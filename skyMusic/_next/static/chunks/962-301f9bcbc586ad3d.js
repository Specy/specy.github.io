(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[962],{3337:function(e,n,t){"use strict";t.d(n,{h:function(){return s}});var r=t(2253),o=t(4932),i=t(5893),l=t(8461);function s(e){var n,t,s,c,a;return(0,i.jsx)(l.J,(0,o._)((0,r._)({},e),{style:(0,r._)({width:null!==(n=e.size)&&void 0!==n?n:"2rem",height:null!==(t=e.size)&&void 0!==t?t:"2rem",minWidth:null!==(s=e.size)&&void 0!==s?s:"2rem",minHeight:null!==(c=e.size)&&void 0!==c?c:"2rem"},e.style),className:"icon-app-button flex-centered ".concat(null!==(a=e.className)&&void 0!==a?a:""),children:e.children}))}},9878:function(e,n,t){"use strict";t.d(n,{v:function(){return i}});var r=t(5893),o=t(1014);function i(e){var n=e.onClick,t=e.children,i=e.style,l=e.tooltip,s=e.ariaLabel,c=e.className;return(0,r.jsx)(r.Fragment,{children:(0,r.jsxs)("button",{className:"song-button ".concat((0,o.h)(l)," ").concat(null!=c?c:""),onClick:n||function(){},style:i,"aria-label":s,children:[t,l&&(0,r.jsx)(o.u,{children:l})]})})}},125:function(e,n,t){"use strict";t.d(n,{G:function(){return F}});var r=t(2253),o=t(4932),i=t(1309),l=t(5893),s=t(7294),c=t(5055),a=t(1010),u=t(4586),d=t(7582),f=t(2132),g=t(3465),h=t.n(g),m=t(3750),p=t(9583),v=t(8434),x=t(750),j=t(1108),y=t(2169),C=t(6743),_=t(1182);function k(e){var n=e.children,t=e.title;return(0,l.jsxs)("div",{className:"folder-content",children:[t&&(0,l.jsx)("h2",{className:"folder-title",children:t}),(0,l.jsx)("div",{className:"folder-songs-wrapper",children:n})]})}function S(e){var n=e.children,t=e.backgroundColor,r=e.color,o=e.headerColor,c=e.data,g=e.isDefault,k=e.defaultOpen,S=void 0!==k&&k,b=(0,i._)((0,s.useState)(!1),2),N=b[0],w=b[1],E=(0,i._)((0,s.useState)(!1),2),z=E[0],T=E[1],R=(0,i._)((0,s.useState)(c.name),2),F=R[0],D=R[1],O=(0,s.useRef)(null),B=(0,i._)((0,s.useState)(0),2),H=B[0],L=B[1];function I(){return(I=(0,a._)(function(){return(0,d.Jh)(this,function(e){switch(e.label){case 0:return[4,(0,x.jH)('Are you sure you want to delete "'.concat(c.name,"\"?  \n            The songs won't be deleted"))];case 1:if(!e.sent())return[2];return v.p.removeFolder(c),[2]}})})).apply(this,arguments)}return(0,s.useEffect)(function(){D(c.name)},[c.name]),(0,s.useEffect)(function(){if(O.current){L(O.current.getBoundingClientRect().height+100);var e=setTimeout(function(){var e=O.current;e&&L(e.getBoundingClientRect().height+100)},200);return function(){return clearTimeout(e)}}},[c.songs,N,n]),(0,s.useEffect)(function(){w(S)},[S]),(0,l.jsxs)("div",{className:"folder ".concat(N?"folder-expanded":""),style:{backgroundColor:t,color:r},children:[(0,l.jsxs)("div",{className:"folder-header",children:[(0,l.jsxs)("div",{onClick:function(){z||w(!N)},className:"folder-header-button",style:{color:o},children:[(0,l.jsx)(m.fmn,{strokeWidth:2,style:{transform:"rotate(".concat(N?90:0,"deg)"),transition:"all 0.2s"},size:18}),z?(0,l.jsx)("input",{value:F,onChange:function(e){return D(e.target.value)},className:"folder-name"}):(0,l.jsx)("div",{className:"folder-name text-ellipsis",children:c.name})]}),!g&&(0,l.jsxs)(j.Rk,{offset:2.3,ignoreClickOutside:z,onClose:function(){return T(!1)},Icon:p.LCi,children:[(0,l.jsxs)(j.tc,{onClick:function(){z&&(v.p.renameFolder(c,F),T(!1)),T(!z)},children:[(0,l.jsx)(p.tU3,{style:{marginRight:"0.4rem"},size:14}),(0,l.jsx)(j.Qr,{text:z?"Save":"Rename"})]}),(0,l.jsxs)(j.tc,{style:{padding:"0 0.4rem"},children:[(0,l.jsx)(p.ulB,{style:{marginRight:"0.4rem"}}),(0,l.jsx)("select",{className:"dropdown-select",value:c.filterType,onChange:function(e){var n=e.target.value;c.set({filterType:n}),v.p.updateFolder(c)},children:y.g0.map(function(e){return(0,l.jsx)("option",{value:e,children:(0,C.kC)(e.replaceAll("-"," "))},e)})})]}),(0,l.jsxs)(j.tc,{onClick:(0,a._)(function(){var e,n;return(0,d.Jh)(this,function(t){switch(t.label){case 0:return[4,_.v.getManySerializedFromStorable(h()(c.songs))];case 1:return[4,Promise.all(t.sent().map(function(e){return f.bV.prepareSongDownload(e)}))];case 2:return e=t.sent().flat().filter(function(e,n,t){return t.findIndex(function(n){return n.id===e.id})===n}),n=(0,u._)(e).concat([c.serialize()]),f.bV.downloadFiles(n,"".concat(c.name,"-folder.").concat(y.iC.toLowerCase(),"sheet")),[2]}})}),children:[(0,l.jsx)(p.aBF,{style:{marginRight:"0.4rem"},size:14}),(0,l.jsx)(j.Qr,{text:"Download"})]}),(0,l.jsxs)(j.tc,{onClick:function(){return I.apply(this,arguments)},children:[(0,l.jsx)(p.Xm5,{color:"#ed4557",style:{marginRight:"0.4rem"},size:14}),(0,l.jsx)(j.Qr,{text:"Delete"})]})]})]}),(0,l.jsx)("div",{className:"column folder-overflow",style:{maxHeight:N?"".concat(H,"px"):0},children:(0,l.jsx)("div",{className:"column folder-overflow-expandible",ref:O,children:n})})]})}var b=t(766),N=t(4931),w=t(3878),E=t.n(w),z=t(6611),T=t(8461),R=t(3337);function F(e){var n=e.songs,t=e.SongComponent,a=e.componentProps,u=e.className,d=e.style,f=e.baseType,g=e.exclude,h=e.onCreateFolder,m=(0,i._)((0,s.useState)(),2),v=m[0],x=m[1],j=(0,i._)((0,s.useState)(),2),y=j[0],C=j[1],_=(0,i._)((0,s.useState)(),2),w=_[0],F=_[1],D=(0,i._)((0,s.useState)([]),2),O=D[0],B=D[1],H=(0,i._)((0,s.useState)(""),2),L=H[0],I=H[1],J=(0,i._)((0,N.j)(O),1)[0];(0,s.useEffect)(function(){var e,t=n.filter(function(e){return!(null==g?void 0:g.includes(e.type))}),r=new z.Z(t,["name"],{caseSensitive:!1,sort:!0});if(""===L)return B(t);B(r.search(L))},[n,g,L]),(0,s.useEffect)(function(){var e=function(e){return J.some(function(n){return n.id===e.folderId})};x(new b.g("Recorded",null,O.filter(function(n){return!e(n)&&"recorded"===n.type}))),C(new b.g("Composed",null,O.filter(function(n){return!e(n)&&"composed"===n.type}))),F(new b.g("Vsrg",null,O.filter(function(n){return!e(n)&&"vsrg"===n.type})))},[O,J]);var V=(0,i._)((0,c.F)(),1)[0],Q=V.layer("menu_background",.35).lighten(.2),P=V.getTextColorFromBackground(Q).toString();return(0,l.jsxs)("div",{className:u,style:d,children:[(0,l.jsxs)("div",{className:"row",style:{justifyContent:"space-between",gap:"0.5rem"},children:[(0,l.jsxs)("div",{className:E().search,style:{backgroundColor:Q.toString(),color:P,outline:"solid 0.2rem transparent",outlineOffset:"-0.2rem",outlineColor:""===L?"transparent":"var(--accent)"},children:[(0,l.jsx)("input",{type:"text",placeholder:"Search",value:L,onChange:function(e){return I(e.target.value)},style:{color:P}}),(0,l.jsx)(R.h,{size:"1rem",ariaLabel:""===L?"Search":"Clear search",style:{backgroundColor:"transparent",color:"inherit"},onClick:function(){return I("")},children:""===L?(0,l.jsx)(p.U41,{}):(0,l.jsx)(p.aHS,{})})]}),h&&(0,l.jsx)(T.J,{onClick:h,children:"Create folder"})]}),!(null==g?void 0:g.includes("composed"))&&y&&(0,l.jsx)(S,{backgroundColor:Q.toString(),headerColor:P,color:V.getText("menu_background").toString(),data:y,isDefault:!0,defaultOpen:"composed"===f,children:(0,l.jsxs)(k,{children:[y.songs.map(function(e){return(0,s.createElement)(t,(0,o._)((0,r._)({},a),{data:e,key:null==e?void 0:e.id}))}),0===y.songs.length&&(0,l.jsx)("div",{style:{padding:"0.2rem",fontSize:"0.9rem"},children:"No songs here, compose one!"})]})}),!(null==g?void 0:g.includes("recorded"))&&v&&(0,l.jsx)(S,{backgroundColor:Q.toString(),headerColor:P,color:V.getText("menu_background").toString(),data:v,isDefault:!0,defaultOpen:"recorded"===f,children:(0,l.jsxs)(k,{children:[v.songs.map(function(e){return(0,s.createElement)(t,(0,o._)((0,r._)({},a),{data:e,key:null==e?void 0:e.id}))}),0===v.songs.length&&(0,l.jsx)("div",{style:{padding:"0.2rem",fontSize:"0.9rem"},children:"No songs here, record one!"})]})}),!(null==g?void 0:g.includes("vsrg"))&&w&&(0,l.jsx)(S,{backgroundColor:Q.toString(),headerColor:P,color:V.getText("menu_background").toString(),data:w,isDefault:!0,defaultOpen:"recorded"===f,children:(0,l.jsxs)(k,{children:[w.songs.map(function(e){return(0,s.createElement)(t,(0,o._)((0,r._)({},a),{data:e,key:null==e?void 0:e.id}))}),0===w.songs.length&&(0,l.jsx)("div",{style:{padding:"0.2rem",fontSize:"0.9rem"},children:"No songs here, create one!"})]})}),J.map(function(e){var n=e.songs.filter(function(e){return"composed"===e.type}),i=e.songs.filter(function(e){return"recorded"===e.type}),c=e.songs.filter(function(e){return"vsrg"===e.type});return(0,l.jsxs)(S,{backgroundColor:Q.toString(),headerColor:P,color:V.getText("menu_background").toString(),data:e,children:[!(null==g?void 0:g.includes("composed"))&&n.length>0&&(0,l.jsx)(k,{title:"Composed",children:n.map(function(e){return(0,s.createElement)(t,(0,o._)((0,r._)({},a),{data:e,key:null==e?void 0:e.id}))})}),!(null==g?void 0:g.includes("recorded"))&&i.length>0&&(0,l.jsx)(k,{title:"Recorded",children:i.map(function(e){return(0,s.createElement)(t,(0,o._)((0,r._)({},a),{data:e,key:null==e?void 0:e.id}))})}),!(null==g?void 0:g.includes("vsrg"))&&c.length>0&&(0,l.jsx)(k,{title:"Vsrg",children:c.map(function(e){return(0,s.createElement)(t,(0,o._)((0,r._)({},a),{data:e,key:null==e?void 0:e.id}))})}),0===n.length&&0===i.length&&0===c.length&&(0,l.jsx)("div",{style:{padding:"0.7rem",paddingTop:"0",fontSize:"0.9rem"},children:"The folder is empty"})]},e.id)})]})}},4995:function(e,n,t){"use strict";t.d(n,{D:function(){return l}});var r=t(5893),o=t(9008),i=t.n(o);function l(e){var n=e.text,t=e.description;return(0,r.jsxs)(i(),{children:[(0,r.jsx)("title",{children:n}),t&&(0,r.jsx)("meta",{name:"description",content:t})]})}},1108:function(e,n,t){"use strict";t.d(n,{Qr:function(){return f},Rk:function(){return d},tc:function(){return g}});var r=t(2253),o=t(1309),i=t(5893),l=t(7053),s=t(7294),c=t(9583),a=t(8461),u=t(9878);function d(e){var n=e.children,t=e.Icon,a=e.className,d=e.style,f=void 0===d?{}:d,g=e.onClose,h=e.tooltip,m=e.offset,p=e.ignoreClickOutside,v=(0,o._)((0,s.useState)(!1),2),x=v[0],j=v[1],y=(0,o._)((0,s.useState)(!1),2),C=y[0],_=y[1],k=(0,l.ZP)(function(){!p&&(j(!1),g&&g())},{active:x,ignoreFocusable:!0});(0,s.useEffect)(function(){var e,n=k.current;if(n){var t=n.getBoundingClientRect(),r=t.top+t.height>(null!==(e=window.innerHeight)&&void 0!==e?e:0);_(!(t.top-t.height-32<0)&&r)}},[x,k]);var S="translateX(calc(-100% + ".concat(void 0===m?3:m,"rem)) ").concat(C?"translateY(calc(-100% - 2rem))":"");return(0,i.jsxs)("div",{className:"".concat(void 0===a?"":a," floating-dropdown ").concat(x?"floating-dropdown-active":""),children:[(0,i.jsx)(u.v,{style:(0,r._)({margin:0},f,x?{backgroundColor:"var(--accent)",color:"var(--accent-text)"}:{}),onClick:function(){j(!x),x&&g&&g()},ariaLabel:x?"Close":"Open",tooltip:h,children:x?(0,i.jsx)(c.aHS,{}):(0,i.jsx)(t,{})}),(0,i.jsx)("div",{ref:k,className:"floating-dropdown-children",style:{transform:S,"--existing-transform":S,transformOrigin:C?"bottom":"top"},children:n})]})}function f(e){var n=e.text;return(0,i.jsx)("div",{className:"floating-dropdown-text",children:n})}function g(e){var n=e.children,t=e.onClick,o=e.style;return(0,i.jsx)(a.J,{ariaLabel:"Floating Dropdown Button",className:"row row-centered",style:(0,r._)({padding:"0.4rem",minWidth:"unset"},o),onClick:t,children:n})}},4931:function(e,n,t){"use strict";t.d(n,{j:function(){return c}});var r=t(1309),o=t(4586),i=t(7294),l=t(8949),s=t(8434);function c(e){var n=(0,r._)((0,i.useState)(s.p.folders),2),t=n[0],c=n[1],a=(0,r._)((0,i.useState)([]),2),u=a[0],d=a[1];return(0,i.useEffect)(function(){var e,n;return e=function(e){c(e)},n=(0,l.N7)(s.p.folders,function(){e((0,o._)(s.p.folders))}),e((0,o._)(s.p.folders)),n},[]),(0,i.useEffect)(function(){if(!e)return d(t);d(t.map(function(n){var t=n.clone(),r=e.filter(function(e){return e.folderId===n.id});return"date-created"===n.filterType?t.songs=r:"alphabetical"===n.filterType?t.songs=r.sort(function(e,n){return e.name.localeCompare(n.name)}):t.songs=r,t}))},[e,t]),[u]}},7008:function(e,n,t){"use strict";t.d(n,{n:function(){return c}});var r=t(1309),o=t(4586),i=t(7294),l=t(8949),s=t(2650);function c(){var e=(0,r._)((0,i.useState)(s.k.songs),2),n=e[0],t=e[1];return(0,i.useEffect)(function(){var e,n;return e=function(e){t(e)},n=(0,l.N7)(s.k.songs,function(){e((0,o._)(s.k.songs))}),e((0,o._)(s.k.songs)),n},[]),[n]}},3878:function(e){e.exports={search:"SongMenu_search__Kb61V"}}}]);