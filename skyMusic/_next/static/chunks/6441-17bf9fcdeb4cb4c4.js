(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6441],{64167:function(e,n,t){"use strict";t.d(n,{h:function(){return IconButton}});var r=t(72253),o=t(14932),i=t(85893),l=t(28796);function IconButton(e){var n,t,s,c,a;return(0,i.jsx)(l.J,(0,o._)((0,r._)({},e),{style:(0,r._)({width:null!==(n=e.size)&&void 0!==n?n:"2rem",height:null!==(t=e.size)&&void 0!==t?t:"2rem",minWidth:null!==(s=e.size)&&void 0!==s?s:"2rem",minHeight:null!==(c=e.size)&&void 0!==c?c:"2rem"},e.style),className:"icon-app-button flex-centered ".concat(null!==(a=e.className)&&void 0!==a?a:""),children:e.children}))}},86869:function(e,n,t){"use strict";t.d(n,{v:function(){return SongActionButton}});var r=t(85893),o=t(31047);function SongActionButton(e){var n=e.onClick,t=e.children,i=e.style,l=e.tooltip,s=e.ariaLabel,c=e.className;return(0,r.jsx)(r.Fragment,{children:(0,r.jsxs)("button",{className:"song-button ".concat((0,o.h)(l)," ").concat(null!=c?c:""),onClick:n||function(){},style:i,"aria-label":s,children:[t,l&&(0,r.jsx)(o.u,{children:l})]})})}},36443:function(e,n,t){"use strict";t.d(n,{V:function(){return PageMeta}});var r=t(85893),o=t(9008),i=t.n(o);function PageMeta(e){var n=e.text,t=e.description,o=e.image,l=e.children;return(0,r.jsxs)(i(),{children:[(0,r.jsx)("title",{children:n}),t&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("meta",{name:"description",content:t}),(0,r.jsx)("meta",{property:"og:description",content:t})]}),o&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("meta",{name:"image",content:o}),(0,r.jsx)("meta",{property:"og:image",content:o})]}),l]})}},29179:function(e,n,t){"use strict";t.d(n,{Qr:function(){return FloatingDropdownText},Rk:function(){return FloatingDropdown},tc:function(){return FloatingDropdownRow}});var r=t(72253),o=t(91309),i=t(85893),l=t(4674),s=t(67294),c=t(52091),a=t(28796),d=t(86869);function FloatingDropdown(e){var n=e.children,t=e.Icon,a=e.className,u=e.style,f=void 0===u?{}:u,g=e.onClose,m=e.tooltip,h=e.offset,p=e.ignoreClickOutside,v=(0,o._)((0,s.useState)(!1),2),x=v[0],j=v[1],C=(0,o._)((0,s.useState)(!1),2),S=C[0],y=C[1],_=(0,l.ZP)(function(){!p&&(j(!1),g&&g())},{active:x,ignoreFocusable:!0});(0,s.useEffect)(function(){var e,n=_.current;if(n){var t=n.getBoundingClientRect(),r=t.top+t.height>(null!==(e=window.innerHeight)&&void 0!==e?e:0);y(!(t.top-t.height-32<0)&&r)}},[x,_]);var k="translateX(calc(-100% + ".concat(void 0===h?3:h,"rem)) ").concat(S?"translateY(calc(-100% - 2rem))":"");return(0,i.jsxs)("div",{className:"".concat(void 0===a?"":a," floating-dropdown ").concat(x?"floating-dropdown-active":""),children:[(0,i.jsx)(d.v,{style:(0,r._)({margin:0},f,x?{backgroundColor:"var(--accent)",color:"var(--accent-text)"}:{}),onClick:function(){j(!x),x&&g&&g()},ariaLabel:x?"Close":"Open",tooltip:m,children:x?(0,i.jsx)(c.aHS,{}):(0,i.jsx)(t,{})}),(0,i.jsx)("div",{ref:_,className:"floating-dropdown-children",style:{transform:k,"--existing-transform":k,transformOrigin:S?"bottom":"top"},children:n})]})}function FloatingDropdownText(e){var n=e.text;return(0,i.jsx)("div",{className:"floating-dropdown-text",children:n})}function FloatingDropdownRow(e){var n=e.children,t=e.onClick,o=e.style;return(0,i.jsx)(a.J,{ariaLabel:"Floating Dropdown Button",className:"row row-centered",style:(0,r._)({padding:"0.4rem",minWidth:"unset"},o),onClick:t,children:n})}},90337:function(e,n,t){"use strict";t.d(n,{G:function(){return SongMenu}});var r=t(72253),o=t(14932),i=t(91309),l=t(85893),s=t(67294),c=t(18212),a=t(11010),d=t(4586),u=t(97582),f=t(26427),g=t(83465),m=t.n(g),h=t(78633),p=t(52091),v=t(95154),x=t(5336),j=t(29179),C=t(1062),S=t(73288),y=t(18208);function SongFolderContent(e){var n=e.children,t=e.title;return(0,l.jsxs)("div",{className:"folder-content",children:[t&&(0,l.jsx)("h2",{className:"folder-title",children:t}),(0,l.jsx)("div",{className:"folder-songs-wrapper",children:n})]})}function SongFolder(e){var n=e.children,t=e.backgroundColor,r=e.color,o=e.headerColor,c=e.data,g=e.isDefault,_=e.defaultOpen,k=void 0!==_&&_,F=(0,i._)((0,s.useState)(!1),2),w=F[0],b=F[1],N=(0,i._)((0,s.useState)(!1),2),E=N[0],T=N[1],z=(0,i._)((0,s.useState)(c.name),2),R=z[0],D=z[1],I=(0,s.useRef)(null),B=(0,i._)((0,s.useState)(0),2),O=B[0],H=B[1];function _deleteFolder(){return(_deleteFolder=(0,a._)(function(){return(0,u.Jh)(this,function(e){switch(e.label){case 0:return[4,(0,x.jH)('Are you sure you want to delete the folder "'.concat(c.name,"\"?  \n            The songs won't be deleted"))];case 1:if(!e.sent())return[2];return v.p.removeFolder(c),[2]}})})).apply(this,arguments)}return(0,s.useEffect)(function(){D(c.name)},[c.name]),(0,s.useEffect)(function(){if(I.current){H(I.current.getBoundingClientRect().height+100);var e=setTimeout(function(){var e=I.current;e&&H(e.getBoundingClientRect().height+100)},200);return function(){return clearTimeout(e)}}},[c.songs,w,n]),(0,s.useEffect)(function(){b(k)},[k]),(0,l.jsxs)("div",{className:"folder ".concat(w?"folder-expanded":""),style:{backgroundColor:t,color:r},children:[(0,l.jsxs)("div",{className:"folder-header",children:[(0,l.jsxs)("div",{onClick:function(){E||b(!w)},className:"folder-header-button",style:{color:o},children:[(0,l.jsx)(h.fmn,{strokeWidth:2,style:{transform:"rotate(".concat(w?90:0,"deg)"),transition:"all 0.2s"},size:18}),E?(0,l.jsx)("input",{value:R,onChange:function(e){return D(e.target.value)},className:"folder-name"}):(0,l.jsx)("div",{className:"folder-name text-ellipsis",children:c.name})]}),!g&&(0,l.jsxs)(j.Rk,{offset:2.3,ignoreClickOutside:E,onClose:function(){return T(!1)},Icon:p.LCi,children:[(0,l.jsxs)(j.tc,{onClick:function(){E&&(v.p.renameFolder(c,R),T(!1)),T(!E)},children:[(0,l.jsx)(p.tU3,{style:{marginRight:"0.4rem"},size:14}),(0,l.jsx)(j.Qr,{text:E?"Save":"Rename"})]}),(0,l.jsxs)(j.tc,{style:{padding:"0 0.4rem"},children:[(0,l.jsx)(p.ulB,{style:{marginRight:"0.4rem"}}),(0,l.jsx)("select",{className:"dropdown-select",value:c.filterType,onChange:function(e){var n=e.target.value;c.set({filterType:n}),v.p.updateFolder(c)},children:C.g0.map(function(e){return(0,l.jsx)("option",{value:e,children:(0,S.kC)(e.replaceAll("-"," "))},e)})})]}),(0,l.jsxs)(j.tc,{onClick:(0,a._)(function(){var e,n;return(0,u.Jh)(this,function(t){switch(t.label){case 0:return[4,y.v.getManySerializedFromStorable(m()(c.songs))];case 1:return[4,Promise.all(t.sent().map(function(e){return f.bV.prepareSongDownload(e)}))];case 2:return e=t.sent().flat().filter(function(e,n,t){return t.findIndex(function(n){return n.id===e.id})===n}),n=(0,d._)(e).concat([c.serialize()]),f.bV.downloadFiles(n,"".concat(c.name,"-folder.").concat(C.iC.toLowerCase(),"sheet")),[2]}})}),children:[(0,l.jsx)(p.aBF,{style:{marginRight:"0.4rem"},size:14}),(0,l.jsx)(j.Qr,{text:"Download"})]}),(0,l.jsxs)(j.tc,{onClick:function(){return _deleteFolder.apply(this,arguments)},children:[(0,l.jsx)(p.Xm5,{color:"#ed4557",style:{marginRight:"0.4rem"},size:14}),(0,l.jsx)(j.Qr,{text:"Delete"})]})]})]}),(0,l.jsx)("div",{className:"column folder-overflow",style:{maxHeight:w?"".concat(O,"px"):0},children:(0,l.jsx)("div",{className:"column folder-overflow-expandible",ref:I,children:n})})]})}var _=t(51854),k=t(60245),F=t(63603),w=t.n(F),b=t(66611),N=t(28796),E=t(64167);function SongMenu(e){var n=e.songs,t=e.SongComponent,a=e.componentProps,d=e.className,u=e.style,f=e.baseType,g=e.exclude,m=e.onCreateFolder,h=(0,i._)((0,s.useState)(),2),v=h[0],x=h[1],j=(0,i._)((0,s.useState)(),2),C=j[0],S=j[1],y=(0,i._)((0,s.useState)(),2),F=y[0],T=y[1],z=(0,i._)((0,s.useState)([]),2),R=z[0],D=z[1],I=(0,i._)((0,s.useState)(""),2),B=I[0],O=I[1],H=(0,i._)((0,k.j)(R),1)[0];(0,s.useEffect)(function(){var e=n.filter(function(e){return!(null==g?void 0:g.includes(e.type))}),t=new b.Z(e,["name"],{caseSensitive:!1,sort:!0});if(""===B)return D(e);D(t.search(B))},[n,g,B]),(0,s.useEffect)(function(){var isInFolder=function(e){return H.some(function(n){return n.id===e.folderId})};x(new _.g("Recorded",null,R.filter(function(e){return!isInFolder(e)&&"recorded"===e.type}))),S(new _.g("Composed",null,R.filter(function(e){return!isInFolder(e)&&"composed"===e.type}))),T(new _.g("Vsrg",null,R.filter(function(e){return!isInFolder(e)&&"vsrg"===e.type})))},[R,H]);var L=(0,i._)((0,c.F)(),1)[0],M=L.layer("menu_background",.35).lighten(.2),J=L.getTextColorFromBackground(M).toString();return(0,l.jsxs)("div",{className:d,style:u,children:[(0,l.jsxs)("div",{className:"row",style:{justifyContent:"space-between",gap:"0.5rem"},children:[(0,l.jsxs)("div",{className:w().search,style:{backgroundColor:M.toString(),color:J,outline:"solid 0.2rem transparent",outlineOffset:"-0.2rem",outlineColor:""===B?"transparent":"var(--accent)"},children:[(0,l.jsx)("input",{type:"text",placeholder:"Search",value:B,onChange:function(e){return O(e.target.value)},style:{color:J}}),(0,l.jsx)(E.h,{size:"1rem",ariaLabel:""===B?"Search":"Clear search",style:{backgroundColor:"transparent",color:"inherit"},onClick:function(){return O("")},children:""===B?(0,l.jsx)(p.U41,{}):(0,l.jsx)(p.aHS,{})})]}),m&&(0,l.jsx)(N.J,{onClick:m,children:"Create folder"})]}),!(null==g?void 0:g.includes("composed"))&&C&&(0,l.jsx)(SongFolder,{backgroundColor:M.toString(),headerColor:J,color:L.getText("menu_background").toString(),data:C,isDefault:!0,defaultOpen:"composed"===f,children:(0,l.jsxs)(SongFolderContent,{children:[C.songs.map(function(e){return(0,s.createElement)(t,(0,o._)((0,r._)({},a),{data:e,key:null==e?void 0:e.id}))}),0===C.songs.length&&(0,l.jsx)("div",{style:{padding:"0.2rem",fontSize:"0.9rem"},children:"No songs here, compose one!"})]})}),!(null==g?void 0:g.includes("recorded"))&&v&&(0,l.jsx)(SongFolder,{backgroundColor:M.toString(),headerColor:J,color:L.getText("menu_background").toString(),data:v,isDefault:!0,defaultOpen:"recorded"===f,children:(0,l.jsxs)(SongFolderContent,{children:[v.songs.map(function(e){return(0,s.createElement)(t,(0,o._)((0,r._)({},a),{data:e,key:null==e?void 0:e.id}))}),0===v.songs.length&&(0,l.jsx)("div",{style:{padding:"0.2rem",fontSize:"0.9rem"},children:"No songs here, record one!"})]})}),!(null==g?void 0:g.includes("vsrg"))&&F&&(0,l.jsx)(SongFolder,{backgroundColor:M.toString(),headerColor:J,color:L.getText("menu_background").toString(),data:F,isDefault:!0,defaultOpen:"recorded"===f,children:(0,l.jsxs)(SongFolderContent,{children:[F.songs.map(function(e){return(0,s.createElement)(t,(0,o._)((0,r._)({},a),{data:e,key:null==e?void 0:e.id}))}),0===F.songs.length&&(0,l.jsx)("div",{style:{padding:"0.2rem",fontSize:"0.9rem"},children:"No songs here, create one!"})]})}),H.map(function(e){var n=e.songs.filter(function(e){return"composed"===e.type}),i=e.songs.filter(function(e){return"recorded"===e.type}),c=e.songs.filter(function(e){return"vsrg"===e.type});return(0,l.jsxs)(SongFolder,{backgroundColor:M.toString(),headerColor:J,color:L.getText("menu_background").toString(),data:e,children:[!(null==g?void 0:g.includes("composed"))&&n.length>0&&(0,l.jsx)(SongFolderContent,{title:"Composed",children:n.map(function(e){return(0,s.createElement)(t,(0,o._)((0,r._)({},a),{data:e,key:null==e?void 0:e.id}))})}),!(null==g?void 0:g.includes("recorded"))&&i.length>0&&(0,l.jsx)(SongFolderContent,{title:"Recorded",children:i.map(function(e){return(0,s.createElement)(t,(0,o._)((0,r._)({},a),{data:e,key:null==e?void 0:e.id}))})}),!(null==g?void 0:g.includes("vsrg"))&&c.length>0&&(0,l.jsx)(SongFolderContent,{title:"Vsrg",children:c.map(function(e){return(0,s.createElement)(t,(0,o._)((0,r._)({},a),{data:e,key:null==e?void 0:e.id}))})}),0===n.length&&0===i.length&&0===c.length&&(0,l.jsx)("div",{style:{padding:"0.7rem",paddingTop:"0",fontSize:"0.9rem"},children:"The folder is empty"})]},e.id)})]})}},60245:function(e,n,t){"use strict";t.d(n,{j:function(){return useFolders}});var r=t(91309),o=t(4586),i=t(67294),l=t(68949),s=t(95154);function useFolders(e){var n=(0,r._)((0,i.useState)(s.p.folders),2),t=n[0],c=n[1],a=(0,r._)((0,i.useState)([]),2),d=a[0],u=a[1];return(0,i.useEffect)(function(){var e,n;return e=function(e){c(e)},n=(0,l.N7)(s.p.folders,function(){e((0,o._)(s.p.folders))}),e((0,o._)(s.p.folders)),n},[]),(0,i.useEffect)(function(){if(!e)return u(t);u(t.map(function(n){var t=n.clone(),r=e.filter(function(e){return e.folderId===n.id});return"date-created"===n.filterType?t.songs=r:"alphabetical"===n.filterType?t.songs=r.sort(function(e,n){return e.name.localeCompare(n.name)}):t.songs=r,t}))},[e,t]),[d]}},41072:function(e,n,t){"use strict";t.d(n,{n:function(){return useSongs}});var r=t(91309),o=t(4586),i=t(67294),l=t(68949),s=t(10681);function useSongs(){var e=(0,r._)((0,i.useState)(s.k.songs),2),n=e[0],t=e[1];return(0,i.useEffect)(function(){var e,n;return e=function(e){t(e)},n=(0,l.N7)(s.k.songs,function(){e((0,o._)(s.k.songs))}),e((0,o._)(s.k.songs)),n},[]),[n]}},63603:function(e){e.exports={search:"SongMenu_search__aSIQY"}}}]);