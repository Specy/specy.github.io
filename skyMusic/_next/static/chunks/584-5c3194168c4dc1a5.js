(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[584],{40208:function(e,n,t){"use strict";t.d(n,{h:function(){return o}});var r=t(85893),l=t(48043);function o(e){var n,t,o,s,i;return(0,r.jsx)(l.J,{...e,style:{width:null!==(n=e.size)&&void 0!==n?n:"2rem",height:null!==(t=e.size)&&void 0!==t?t:"2rem",minWidth:null!==(o=e.size)&&void 0!==o?o:"2rem",minHeight:null!==(s=e.size)&&void 0!==s?s:"2rem",...e.style},className:"icon-app-button flex-centered ".concat(null!==(i=e.className)&&void 0!==i?i:""),children:e.children})}},50746:function(e,n,t){"use strict";t.d(n,{v:function(){return o}});var r=t(85893),l=t(10694);function o(e){let{onClick:n,children:t,style:o,tooltip:s,ariaLabel:i,className:a}=e;return(0,r.jsx)(r.Fragment,{children:(0,r.jsxs)("button",{className:"song-button ".concat((0,l.h)(s)," ").concat(null!=a?a:""),onClick:n||(()=>{}),style:o,"aria-label":i,children:[t,s&&(0,r.jsx)(l.u,{children:s})]})})}},99962:function(e,n,t){"use strict";t.d(n,{V:function(){return a},q:function(){return c}});var r=t(85893),l=t(40456),o=t.n(l),s=t(69887),i=t(701);function a(e){let{style:n,className:t,opacity:l,children:a}=e,{visible:c}=(0,s.X)();return(0,r.jsx)("div",{className:(0,i.cn)("".concat(o().menu," ").concat(t),[c,o()["menu-visible"]]),style:{opacity:l,...n},children:a})}let c=(0,t(67294).forwardRef)(function(e,n){let{children:t,className:l,style:i,current:a,open:c,setOpen:d,setCurrent:u,visible:m,setVisible:f}=e;return(0,r.jsx)(s.p.Provider,{value:{current:null!=a?a:"",setCurrent:null!=u?u:e=>{},open:null!=c&&c,setOpen:null!=d?d:()=>{},visible:null==m||m,setVisible:null!=f?f:()=>{}},children:(0,r.jsx)("div",{className:"".concat(o()["menu-wrapper"]," ").concat(l),ref:n,style:i,children:t})})})},23441:function(e,n,t){"use strict";t.d(n,{d:function(){return s}});var r=t(85893),l=t(9008),o=t.n(l);function s(e){let{text:n,description:t,image:l,children:s}=e;return(0,r.jsxs)(o(),{children:[(0,r.jsx)("title",{children:n}),t&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("meta",{name:"description",content:t}),(0,r.jsx)("meta",{property:"og:description",content:t})]}),l&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("meta",{name:"image",content:l}),(0,r.jsx)("meta",{property:"og:image",content:l})]}),s]})}},52461:function(e,n,t){"use strict";t.d(n,{Qr:function(){return d},Rk:function(){return c},tc:function(){return u}});var r=t(85893),l=t(12293),o=t(67294),s=t(78773),i=t(48043),a=t(50746);function c(e){let{children:n,Icon:t,className:i="",style:c={},onClose:d,tooltip:u,offset:m=3,ignoreClickOutside:f}=e,[g,h]=(0,o.useState)(!1),[p,x]=(0,o.useState)(!1),v=(0,l.ZP)(()=>{!f&&(h(!1),d&&d())},{active:g,ignoreFocusable:!0});(0,o.useEffect)(()=>{var e;let n=v.current;if(!n)return;let t=n.getBoundingClientRect(),r=t.top+t.height>(null!==(e=window.innerHeight)&&void 0!==e?e:0);x(!(t.top-t.height-32<0)&&r)},[g,v]);let j="translateX(calc(-100% + ".concat(m,"rem)) ").concat(p?"translateY(calc(-100% - 2rem))":"");return(0,r.jsxs)("div",{className:"".concat(i," floating-dropdown ").concat(g?"floating-dropdown-active":""),children:[(0,r.jsx)(a.v,{style:{margin:0,...c,...g?{backgroundColor:"var(--accent)",color:"var(--accent-text)"}:{}},onClick:()=>{h(!g),g&&d&&d()},ariaLabel:g?"Close":"Open",tooltip:u,children:g?(0,r.jsx)(s.aHS,{}):(0,r.jsx)(t,{})}),(0,r.jsx)("div",{ref:v,className:"floating-dropdown-children",style:{transform:j,"--existing-transform":j,transformOrigin:p?"bottom":"top"},children:n})]})}function d(e){let{text:n}=e;return(0,r.jsx)("div",{className:"floating-dropdown-text",children:n})}function u(e){let{children:n,onClick:t,style:l}=e;return(0,r.jsx)(i.J,{ariaLabel:"Floating Dropdown Button",className:"row row-centered",style:{padding:"0.4rem",minWidth:"unset",...l},onClick:t,children:n})}},17678:function(e,n,t){"use strict";t.d(n,{G:function(){return z}});var r=t(85893),l=t(67294),o=t(92634),s=t(89867),i=t(83465),a=t.n(i),c=t(65890),d=t(78773),u=t(40398),m=t(31602),f=t(52461),g=t(17544),h=t(85565),p=t(82860),x=t(67421);function v(e){let{children:n,title:t}=e;return(0,r.jsxs)("div",{className:"folder-content",children:[t&&(0,r.jsx)("h2",{className:"folder-title",children:t}),(0,r.jsx)("div",{className:"folder-songs-wrapper",children:n})]})}function j(e){let{children:n,backgroundColor:t,color:o,headerColor:i,data:v,isDefault:j,defaultOpen:y=!1}=e,{t:k}=(0,x.$G)(["common","logs","question","menu"]),[C,S]=(0,l.useState)(!1),[b,w]=(0,l.useState)(!1),[_,N]=(0,l.useState)(v.name),E=(0,l.useRef)(null),[z,F]=(0,l.useState)(0);async function R(){await (0,m.jH)(k("menu:confirm_delete_folder",{folder_name:v.name}))&&u.p.removeFolder(v)}return(0,l.useEffect)(()=>{N(v.name)},[v.name]),(0,l.useEffect)(()=>{S(y)},[y]),(0,l.useEffect)(()=>{if(!E.current)return;F(E.current.getBoundingClientRect().height+100);let e=setTimeout(()=>{let e=E.current;e&&F(e.getBoundingClientRect().height+100)},200);return()=>clearTimeout(e)},[v.songs,C,n]),(0,r.jsxs)("div",{className:"folder ".concat(C?"folder-expanded":""),style:{backgroundColor:t,color:o},children:[(0,r.jsxs)("div",{className:"folder-header",children:[(0,r.jsxs)("div",{onClick:()=>{b||S(!C)},className:"folder-header-button",style:{color:i},children:[(0,r.jsx)(c.fmn,{strokeWidth:2,style:{transform:"rotate(".concat(C?90:0,"deg)"),transition:"all 0.2s"},size:18}),b?(0,r.jsx)("input",{value:_,onChange:e=>N(e.target.value),className:"folder-name"}):(0,r.jsx)("div",{className:"folder-name text-ellipsis",children:v.name})]}),!j&&(0,r.jsxs)(f.Rk,{offset:2.3,ignoreClickOutside:b,onClose:()=>w(!1),Icon:d.LCi,children:[(0,r.jsxs)(f.tc,{onClick:()=>{b&&(u.p.renameFolder(v,_),w(!1)),w(!b)},children:[(0,r.jsx)(d.tU3,{style:{marginRight:"0.4rem"},size:14}),(0,r.jsx)(f.Qr,{text:b?k("common:save"):k("common:rename")})]}),(0,r.jsxs)(f.tc,{style:{padding:"0 0.4rem"},children:[(0,r.jsx)(d.ulB,{style:{marginRight:"0.4rem"}}),(0,r.jsx)("select",{className:"dropdown-select",value:v.filterType,onChange:e=>{let n=e.target.value;v.set({filterType:n}),u.p.updateFolder(v)},children:g.g0.map(e=>(0,r.jsx)("option",{value:e,children:k("menu:filter_".concat(e))},e))})]}),(0,r.jsxs)(f.tc,{onClick:async()=>{let e=(await h.v.getManySerializedFromStorable(a()(v.songs))).map(e=>s.bV.prepareSongDownload(e)),n=[...(await Promise.all(e)).flat().filter((e,n,t)=>t.findIndex(n=>n.id===e.id)===n),v.serialize()];s.bV.downloadFiles(n,"".concat(v.name,"-folder.").concat(g.iC.toLowerCase(),"sheet"))},children:[(0,r.jsx)(d.aBF,{style:{marginRight:"0.4rem"},size:14}),(0,r.jsx)(f.Qr,{text:k("common:download")})]}),(0,r.jsxs)(f.tc,{onClick:R,children:[(0,r.jsx)(d.Xm5,{color:"#ed4557",style:{marginRight:"0.4rem"},size:14}),(0,r.jsx)(f.Qr,{text:k("common:delete")})]})]})]}),(0,r.jsx)(p.s,{className:"folder-overflow",style:{maxHeight:C?"".concat(z,"px"):0},children:(0,r.jsx)("div",{className:"column folder-overflow-expandible",ref:E,children:n})})]})}var y=t(16913),k=t(86087),C=t(74608),S=t.n(C),b=t(66611),w=t(48043),_=t(40208),N=t(11090);function E(e,n){return e.some(e=>e.id===n.folderId)}function z(e){let{songs:n,SongComponent:t,componentProps:s,className:i,style:a,baseType:c,exclude:u,onCreateFolder:m}=e,{t:f}=(0,x.$G)(["common","menu"]),[g,h]=(0,l.useState)(),[p,C]=(0,l.useState)(),[z,F]=(0,l.useState)(),[R,T]=(0,l.useState)([]),[O,B]=(0,l.useState)(""),[H]=(0,k.j)(R),[V]=(0,o.F)();(0,l.useEffect)(()=>{let e=n.filter(e=>!(null==u?void 0:u.includes(e.type))),t=new b.Z(e,["name"],{caseSensitive:!1,sort:!0});if(""===O)return T(e);T(t.search(O))},[n,u,O]),(0,l.useEffect)(()=>{h(new y.g(f("menu:recorded"),null,R.filter(e=>!E(H,e)&&"recorded"===e.type))),C(new y.g(f("menu:composed"),null,R.filter(e=>!E(H,e)&&"composed"===e.type))),F(new y.g("Vsrg",null,R.filter(e=>!E(H,e)&&"vsrg"===e.type)))},[R,H,f]);let D=V.layer("menu_background",.35).lighten(.2),I=V.getTextColorFromBackground(D).toString();return(0,r.jsxs)("div",{className:i,style:a,children:[(0,r.jsxs)(N.X,{justify:"between",gap:"0.5rem",children:[(0,r.jsxs)("div",{className:S().search,style:{backgroundColor:D.toString(),color:I,outline:"solid 0.2rem transparent",outlineOffset:"-0.2rem",outlineColor:""===O?"transparent":"var(--accent)"},children:[(0,r.jsx)("input",{type:"text",placeholder:f("common:search"),value:O,onChange:e=>B(e.target.value),style:{color:I}}),(0,r.jsx)(_.h,{size:"1rem",ariaLabel:""===O?"Search":"Clear search",style:{backgroundColor:"transparent",color:"inherit"},onClick:()=>B(""),children:""===O?(0,r.jsx)(d.U41,{}):(0,r.jsx)(d.aHS,{})})]}),m&&(0,r.jsx)(w.J,{onClick:m,children:f("menu:create_folder")})]}),!(null==u?void 0:u.includes("composed"))&&p&&(0,r.jsx)(j,{backgroundColor:D.toString(),headerColor:I,color:V.getText("menu_background").toString(),data:p,isDefault:!0,defaultOpen:"composed"===c,children:(0,r.jsxs)(v,{children:[p.songs.map(e=>(0,l.createElement)(t,{...s,data:e,key:null==e?void 0:e.id})),0===p.songs.length&&(0,r.jsx)("div",{style:{padding:"0.2rem",fontSize:"0.9rem"},children:f("menu:hint_no_recorded_songs")})]})}),!(null==u?void 0:u.includes("recorded"))&&g&&(0,r.jsx)(j,{backgroundColor:D.toString(),headerColor:I,color:V.getText("menu_background").toString(),data:g,isDefault:!0,defaultOpen:"recorded"===c,children:(0,r.jsxs)(v,{children:[g.songs.map(e=>(0,l.createElement)(t,{...s,data:e,key:null==e?void 0:e.id})),0===g.songs.length&&(0,r.jsx)("div",{style:{padding:"0.2rem",fontSize:"0.9rem"},children:f("menu:hint_no_recorded_songs")})]})}),!(null==u?void 0:u.includes("vsrg"))&&z&&(0,r.jsx)(j,{backgroundColor:D.toString(),headerColor:I,color:V.getText("menu_background").toString(),data:z,isDefault:!0,defaultOpen:"recorded"===c,children:(0,r.jsxs)(v,{children:[z.songs.map(e=>(0,l.createElement)(t,{...s,data:e,key:null==e?void 0:e.id})),0===z.songs.length&&(0,r.jsx)("div",{style:{padding:"0.2rem",fontSize:"0.9rem"},children:f("menu:hint_no_songs_in_folder")})]})}),H.map(e=>{let n=e.songs.filter(e=>"composed"===e.type),o=e.songs.filter(e=>"recorded"===e.type),i=e.songs.filter(e=>"vsrg"===e.type);return(0,r.jsxs)(j,{backgroundColor:D.toString(),headerColor:I,color:V.getText("menu_background").toString(),data:e,children:[!(null==u?void 0:u.includes("composed"))&&n.length>0&&(0,r.jsx)(v,{title:"Composed",children:n.map(e=>(0,l.createElement)(t,{...s,data:e,key:null==e?void 0:e.id}))}),!(null==u?void 0:u.includes("recorded"))&&o.length>0&&(0,r.jsx)(v,{title:"Recorded",children:o.map(e=>(0,l.createElement)(t,{...s,data:e,key:null==e?void 0:e.id}))}),!(null==u?void 0:u.includes("vsrg"))&&i.length>0&&(0,r.jsx)(v,{title:"Vsrg",children:i.map(e=>(0,l.createElement)(t,{...s,data:e,key:null==e?void 0:e.id}))}),0===n.length&&0===o.length&&0===i.length&&(0,r.jsx)("div",{style:{padding:"0.7rem",paddingTop:"0",fontSize:"0.9rem"},children:f("menu:folder_empty")})]},e.id)})]})}},86087:function(e,n,t){"use strict";t.d(n,{j:function(){return s}});var r=t(67294),l=t(68949),o=t(40398);function s(e){let[n,t]=(0,r.useState)(o.p.folders),[s,i]=(0,r.useState)([]);return(0,r.useEffect)(()=>(function(e){let n=(0,l.N7)(o.p.folders,()=>{e([...o.p.folders])});return e([...o.p.folders]),n})(e=>{t(e)}),[]),(0,r.useEffect)(()=>{if(!e)return i(n);i(n.map(n=>{let t=n.clone(),r=e.filter(e=>e.folderId===n.id);return"date-created"===n.filterType?t.songs=r:"alphabetical"===n.filterType?t.songs=r.sort((e,n)=>e.name.localeCompare(n.name)):t.songs=r,t}))},[e,n]),[s]}},24104:function(e,n,t){"use strict";t.d(n,{n:function(){return s}});var r=t(67294),l=t(68949),o=t(6340);function s(){let[e,n]=(0,r.useState)(o.k.songs);return(0,r.useEffect)(()=>(function(e){let n=(0,l.N7)(o.k.songs,()=>{e([...o.k.songs])});return e([...o.k.songs]),n})(e=>{n(e)}),[]),[e]}},74608:function(e){e.exports={search:"SongMenu_search__aSIQY"}}}]);