(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2510],{66611:function(e,r,s){"use strict";s.d(r,{Z:function(){return o}});class t{static getDescendantProperty(e,r,s=[]){let o,n,a,i,l,c;if(r){if(-1===(a=r.indexOf("."))?o=r:(o=r.slice(0,a),n=r.slice(a+1)),null!=(i=e[o])){if(n||"string"!=typeof i&&"number"!=typeof i){if("[object Array]"===Object.prototype.toString.call(i))for(l=0,c=i.length;l<c;l++)t.getDescendantProperty(i[l],n,s);else n&&t.getDescendantProperty(i,n,s)}else s.push(i)}}else s.push(e);return s}}class o{constructor(e=[],r=[],s={}){Array.isArray(r)||(s=r,r=[]),this.haystack=e,this.keys=r,this.options=Object.assign({caseSensitive:!1,sort:!1},s)}search(e=""){if(""===e)return this.haystack;let r=[];for(let s=0;s<this.haystack.length;s++){let n=this.haystack[s];if(0===this.keys.length){let s=o.isMatch(n,e,this.options.caseSensitive);s&&r.push({item:n,score:s})}else for(let s=0;s<this.keys.length;s++){let a=t.getDescendantProperty(n,this.keys[s]),i=!1;for(let s=0;s<a.length;s++){let t=o.isMatch(a[s],e,this.options.caseSensitive);if(t){i=!0,r.push({item:n,score:t});break}}if(i)break}}return this.options.sort&&r.sort((e,r)=>e.score-r.score),r.map(e=>e.item)}static isMatch(e,r,s){e=String(e),r=String(r),s||(e=e.toLocaleLowerCase(),r=r.toLocaleLowerCase());let t=o.nearestIndexesFor(e,r);return!!t&&(e===r?1:t.length>1?2+(t[t.length-1]-t[0]):2+t[0])}static nearestIndexesFor(e,r){let s=r.split(""),t=[];return o.indexesOfFirstLetter(e,r).forEach((r,o)=>{let n=r+1;t[o]=[r];for(let r=1;r<s.length;r++){let a=s[r];if(-1===(n=e.indexOf(a,n))){t[o]=!1;break}t[o].push(n),n++}}),!!(t=t.filter(e=>!1!==e)).length&&t.sort((e,r)=>1===e.length?e[0]-r[0]:(e=e[e.length-1]-e[0])-(r=r[r.length-1]-r[0]))[0]}static indexesOfFirstLetter(e,r){let s=r[0];return e.split("").map((e,r)=>e===s&&r).filter(e=>!1!==e)}}},89802:function(e,r,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/error",function(){return s(32045)}])},32045:function(e,r,s){"use strict";s.r(r),s.d(r,{ErrorPage:function(){return v}});var t=s(85893),o=s(78773),n=s(31602),a=s(17544),i=s(53179),l=s(17678),c=s(48043),g=s(24104),d=s(6340),h=s(89867),p=s(23441),_=s(2816),u=s(85565),m=s(12120),f=s(23935),w=s(32362),x=s(97541),y=s(47704),k=s.n(y),j=s(67421),b=s(19116);function v(){(0,b.o)("error");let{t:e}=(0,j.$G)(["error","logs","confirm","common"]),[r]=(0,g.n)(),s=(0,w.ih)(x.J.logs),o=async(r,s)=>{await (0,n.jH)(e("confirm:delete_song",{song_name:r}))&&await d.k.removeSong(s)},y=async()=>{await (0,n.jH)(e("confirm_delete_all_songs"))&&await d.k._DANGEROUS_CLEAR_ALL_SONGS()};return(0,t.jsxs)(_.k,{className:k()["error-page"],children:[(0,t.jsx)(p.d,{text:e("common:error"),description:"View the errors that happened in the app to send bug reports and to try to recover your songs"}),(0,t.jsxs)("div",{style:{textAlign:"center"},children:[e("error_page_description"),(0,t.jsx)("a",{href:"https://discord.gg/Arsf65YYHq",target:"_blank",rel:"noreferrer",style:{margin:"0 0.4rem",color:"var(--accent)"},children:"Discord"})]}),(0,t.jsxs)("div",{className:k()["error-buttons-wrapper"],children:[(0,t.jsx)(c.J,{onClick:()=>{localStorage.removeItem(a.iC+"_Composer_Settings"),localStorage.removeItem(a.iC+"_Main_Settings"),i.kg.success(e("settings_reset_notice"))},children:e("reset_settings")}),(0,t.jsx)(c.J,{onClick:y,children:e("delete_all_songs")})]}),(0,t.jsx)("div",{className:k()["error-songs-wrapper"],children:(0,t.jsx)(l.G,{SongComponent:S,songs:r,componentProps:{deleteSong:o,download:r=>{try{let s=r.name,t=u.v.parseSong(r),o=["Sky"===a.iC&&(t instanceof m.l||t instanceof f.M)?t.toOldFormat():t.serialize()];h.bV.downloadSong(o,"".concat(s,".").concat(a.iC.toLowerCase(),"sheet")),i.kg.success(e("logs:song_downloaded"))}catch(r){console.error(r),i.kg.error(e("logs:error_downloading_song"))}}}})}),(0,t.jsxs)("div",{className:"row space-between",style:{margin:"1rem 0"},children:[(0,t.jsx)("div",{style:{fontSize:"2rem"},children:e("error_logs")}),(0,t.jsx)(c.J,{onClick:()=>{let e=x.J.logs.map(e=>e.message);h.bV.downloadObject(e,"".concat(a.iC,"_logs"))},children:e("download_logs")})]}),(0,t.jsx)("div",{className:k()["error-logs"],children:s.map((e,r)=>(0,t.jsx)("pre",{className:"".concat(k()["error-log-row"]," row"),children:e.message},r))})]})}function S(e){let{data:r,deleteSong:s,download:n}=e,{t:a}=(0,j.$G)(["menu","logs"]);return(0,t.jsxs)("div",{className:"song-row",children:[(0,t.jsx)("div",{className:"song-name",children:r.name}),(0,t.jsxs)("div",{className:"song-buttons-wrapper",children:[(0,t.jsx)("button",{className:"song-button",onClick:async()=>{let e=await u.v.getOneSerializedFromStorable(r);if(!e)return i.kg.error(a("logs:could_not_find_song"));n(e)},"aria-label":a("download_song",{song_name:r.name}),children:(0,t.jsx)(o.aBF,{})}),(0,t.jsx)("button",{className:"song-button",onClick:()=>s(r.name,r.id),"aria-label":a("delete_song",{song_name:r.name}),children:(0,t.jsx)(o.Xm5,{color:"#ed4557"})})]})]})}r.default=v},47704:function(e){e.exports={"error-page":"ErrorPage_error-page__YGVCe","error-buttons-wrapper":"ErrorPage_error-buttons-wrapper__yxRcD","error-logs":"ErrorPage_error-logs__nx3gA","error-log-row":"ErrorPage_error-log-row__tqst4","error-songs-wrapper":"ErrorPage_error-songs-wrapper__4v2PG"}}},function(e){e.O(0,[5598,2888,9774,179],function(){return e(e.s=89802)}),_N_E=e.O()}]);