(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9569],{78810:function(y,T,A){"use strict";A.d(T,{Hf:function(){return e6},TC:function(){return e8},W2:function(){return e5},jy:function(){return e7},xv:function(){return e9}});var B=A(1396),F=A(68276),U=A(64260),X=A(73445),Y=A(19743),K=A(88831),q=A(23556),Q=A(67220),J=A(17108),Z=A(53984),ei=A(57157),es=A(57361),eh=A(67294),eu=A(89804),ed=A(97091),ec=A(45697),ef=A.n(ec),ep=A(83454);function P(y){return(P="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(y){return typeof y}:function(y){return y&&"function"==typeof Symbol&&y.constructor===Symbol&&y!==Symbol.prototype?"symbol":typeof y})(y)}function E(y){var T=function(y,T){if("object"!==P(y)||null===y)return y;var A=y[Symbol.toPrimitive];if(void 0!==A){var B=A.call(y,T||"default");if("object"!==P(B))return B;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===T?String:Number)(y)}(y,"string");return"symbol"===P(T)?T:String(T)}function _(y,T,A){return(T=E(T))in y?Object.defineProperty(y,T,{value:A,enumerable:!0,configurable:!0,writable:!0}):y[T]=A,y}function C(y,T){(null==T||T>y.length)&&(T=y.length);for(var A=0,B=Array(T);A<T;A++)B[A]=y[A];return B}function z(y){return function(y){if(Array.isArray(y))return C(y)}(y)||function(y){if("undefined"!=typeof Symbol&&null!=y[Symbol.iterator]||null!=y["@@iterator"])return Array.from(y)}(y)||function(y,T){if(y){if("string"==typeof y)return C(y,T);var A=Object.prototype.toString.call(y).slice(8,-1);return"Object"===A&&y.constructor&&(A=y.constructor.name),"Map"===A||"Set"===A?Array.from(y):"Arguments"===A||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(A)?C(y,T):void 0}}(y)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function N(y,T){for(var A=arguments.length,B=Array(A>2?A-2:0),F=2;F<A;F++)B[F-2]=arguments[F]}var em="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==A.g?A.g:"undefined"!=typeof self?self:{};function O(y){var T=[];if(void 0===y)return T;if("string"==typeof y)T=y.split(",");else if("number"==typeof y)T=[y];else if(Array.isArray(y))T=z(y);else{if(null===y||"object"!==P(y))return T;T=[y&&(null==y?void 0:y.x)||0,y&&(null==y?void 0:y.y)||0]}return T.filter(function(y){return null!=y&&!isNaN(y)}).map(Number)}function j(y,T){if(y.length!==T.length)return!1;for(var A=0;A<y.length;A++)if(y[A]!==T[A])return!1;return!0}function L(y){return y instanceof U.E9||y instanceof U.AB}var eg=["click","mousedown","mousemove","mouseout","mouseover","mouseup","mouseupoutside","tap","touchstart","touchmove","touchend","touchendoutside","pointercancel","pointerout","pointerover","pointertap","pointerdown","pointerup","pointerupoutside","pointermove","rightclick","rightdown","rightup","rightupoutside","touchcancel","touchendoutside","touchmove","touchstart"];function D(y,T,A){if(L(y[T])&&L(A))y[T].copyFrom(A);else if(L(y[T])){var B=O(A);N(void 0!==B&&B.length>0&&B.length<3,"The property `%s` is a `PIXI.Point` or `PIXI.ObservablePoint` and must be set to a comma-separated string of either 1 or 2 coordinates, a 1 or 2 element array containing coordinates, or a PIXI Point/ObservablePoint. If only one coordinate is given then X and Y will be set to the provided value. Received: `%s` of type `%s`.",T,JSON.stringify(A),P(A)),y[T].set(B.shift(),B.shift())}else y[T]=A}var e_,ev,ey="children",ex=(_(ev={},ey,!0),_(ev,"parent",!0),_(ev,"worldAlpha",!0),_(ev,"worldTransform",!0),_(ev,"worldVisible",!0),ev),eb={alpha:1,buttonMode:!1,cacheAsBitmap:!1,cursor:null,filterArea:null,filters:null,hitArea:null,interactive:!1,mask:null,pivot:0,position:0,renderable:!0,rotation:0,scale:1,skew:0,transform:null,visible:!0,x:0,y:0},W=function(y,T){var A=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},l=function(y){return requestAnimationFrame(function(){var T,A;null==y||null===(T=y.__reactpixi)||void 0===T||null===(A=T.root)||void 0===A||A.emit("__REACT_PIXI_REQUEST_RENDER__")})},a=function(T,B){if(A.hasOwnProperty(T))return N(B.typeofs.some(function(y){return P(A[T])===y})||B.instanceofs.some(function(y){return A[T]instanceof y}),"".concat(y," ").concat(T," prop is invalid")),A[T]};if(A.texture)return N(A.texture instanceof B.xE,"".concat(y," texture needs to be typeof `Texture`")),A.texture;var F=a("image",{typeofs:["string"],instanceofs:[HTMLImageElement]})||a("video",{typeofs:["string"],instanceofs:[HTMLVideoElement]})||a("source",{typeofs:["string","number"],instanceofs:[HTMLImageElement,HTMLVideoElement,HTMLCanvasElement,B.xE]});N(!!F,"".concat(y," could not get texture from props"));var U=B.xE.from(F);return U.__reactpixi={root:T},U.once("update",l),U.once("loaded",l),U.valid&&l(U),U},eT=(e_=function(y){var T=y;if(!Array.isArray(T)){if("[object Object]"!==Object.prototype.toString.call(y))throw Error("collection needs to be an Array or Object");T=Object.keys(y)}var A={};return T.forEach(function(y){A[y]=!0}),function(y){return void 0!==A[y]}}([].concat(z(Object.keys(ex)),z(eg))),function(){return!e_.apply(void 0,arguments)});function V(y,T,A){var B=!1;if(N(F.s$.prototype.isPrototypeOf(y),"instance needs to be typeof `DisplayObject`, got `%s`",P(y)),!A.ignoreEvents)for(var U="function"==typeof y.removeListener,X="function"==typeof y.on,Y=0;Y<eg.length;Y++){var K=eg[Y];T[K]!==A[K]&&(B=!0,"function"==typeof T[K]&&U&&y.removeListener(K,T[K]),"function"==typeof A[K]&&X&&y.on(K,A[K]))}var q=Object.keys(A||{});if(A.overwriteProps){for(var Q=0;Q<q.length;Q++){var J=q[Q];T[J]!==A[J]&&(B=!0,D(y,J,A[J]))}return B}for(var Z=q.filter(eT),ei=0;ei<Z.length;ei++){var es=Z[ei],eh=A[es];A[es]!==T[es]&&(B=!0),void 0!==eh?D(y,es,eh):es in eb?(console.warn("setting default value: ".concat(es,", from: ").concat(y[es]," to: ").concat(eh," for"),y),B=!0,D(y,es,eb[es])):console.warn("ignoring prop: ".concat(es,", from ").concat(y[es]," to ").concat(eh," for"),y)}return B}function G(y,T){if(null==y)return{};var A,B,F=function(y,T){if(null==y)return{};var A,B,F={},U=Object.keys(y);for(B=0;B<U.length;B++)A=U[B],T.indexOf(A)>=0||(F[A]=y[A]);return F}(y,T);if(Object.getOwnPropertySymbols){var U=Object.getOwnPropertySymbols(y);for(B=0;B<U.length;B++)A=U[B],T.indexOf(A)>=0||Object.prototype.propertyIsEnumerable.call(y,A)&&(F[A]=y[A])}return F}var eE=["draw","geometry"],eS=["image","texture"];function ee(y,T){var A=Object.keys(y);if(Object.getOwnPropertySymbols){var B=Object.getOwnPropertySymbols(y);T&&(B=B.filter(function(T){return Object.getOwnPropertyDescriptor(y,T).enumerable})),A.push.apply(A,B)}return A}function ne(y){for(var T=1;T<arguments.length;T++){var A=null!=arguments[T]?arguments[T]:{};T%2?ee(Object(A),!0).forEach(function(T){_(y,T,A[T])}):Object.getOwnPropertyDescriptors?Object.defineProperties(y,Object.getOwnPropertyDescriptors(A)):ee(Object(A)).forEach(function(T){Object.defineProperty(y,T,Object.getOwnPropertyDescriptor(A,T))})}return y}var eA=["image","texture"],eR=["textures","isPlaying","initialFrame","images"],ew=["tileScale","tilePosition","image","texture"],eI=["image","texture"],eP=["image","texture"],eM=Object.freeze({__proto__:null,BitmapText:function(y,T){var A=T.text,B=T.style;return new X.Xz(A,B)},Container:function(){return new F.W2},Graphics:function(y,T){var A=T.geometry;N(!A||A instanceof Y.TC,"Graphics geometry needs to be a `PIXI.Graphics`");var B=A?new Y.TC(A.geometry):new Y.TC;return B.applyProps=function(y,T,A){var F=A.draw;A.geometry;var U=V(y,T,G(A,eE));return T.draw!==F&&"function"==typeof F&&(U=!0,F.call(B,B)),U},B},NineSlicePlane:function(y,T){var A=T.leftWidth,B=T.topHeight,F=T.rightWidth,U=T.bottomHeight,X=W("NineSlicePlane",y,T),Y=new K.ZT(X,void 0===A?10:A,void 0===B?10:B,void 0===F?10:F,void 0===U?10:U);return Y.applyProps=function(T,A,B){var F=B.image,U=B.texture,X=V(T,A,G(B,eS));return(F||U)&&(U!==A.texture&&(X=!0),T.texture=W("NineSlicePlane",y,B)),X},Y},ParticleContainer:function(y,T){var A=T.maxSize,B=T.batchSize,F=T.autoResize,U=ne(ne({},{vertices:!1,scale:!0,position:!0,rotation:!0,uvs:!0,tint:!0}),T.properties||{}),X=ne(ne({},{children:!1,texture:!1,baseTexture:!1}),T.destroyOptions||{}),Y=new q.T(void 0===A?1500:A,U,void 0===B?16384:B,void 0!==F&&F);return Y.willUnmount=function(y,T,A){y.destroy(X)},Y},Sprite:function(y,T){var A=new Q.j(W("Sprite",y,T));return A.applyProps=function(T,A,B){var F=B.image,U=B.texture,X=V(T,A,G(B,eA));return(U&&A.texture!==B.texture||F&&A.image!==B.image)&&(A.texture!==B.texture&&(X=!0),T.texture=W("Sprite",y,B)),X},A},Text:function(y,T){var A=T.text,B=T.style,F=T.isSprite,U=new Z.xv(void 0===A?"":A,void 0===B?{}:B);return F?(U.updateText(),new Q.j(U.texture)):U},TilingSprite:function(y,T){var A=T.width,B=T.height,F=W("TilingSprite",y,T),U=new ei.o(F,void 0===A?100:A,void 0===B?100:B);return U.applyProps=function(T,A,B){var F=B.tileScale,U=B.tilePosition,X=B.image,Y=B.texture,K=V(T,A,G(B,ew));if(U){var q,Q=O(U);(q=T.tilePosition).set.apply(q,z(Q)),K=!j(O(A.tilePosition),Q)||K}if(F){var J,Z=O(F);(J=T.tileScale).set.apply(J,z(Z)),K=!j(O(A.tileScale),Z)||K}return(X||Y)&&(Y!==A.texture&&(K=!0),T.texture=W("Sprite",y,B)),K},U},SimpleMesh:function(y,T){var A=W("Mesh",y,T),B=T.vertices,F=T.uvs,U=T.indices,X=T.drawMode,Y=void 0===X?es.lg.TRIANGLES:X,q=new K.AL(A,B,F,U,Y);return q.applyProps=function(T,A,B){var F=B.image,U=B.texture,X=V(T,A,G(B,eI));return(F||U)&&(U!==A.texture&&(X=!0),T.texture=W("Mesh",y,B)),X},q},SimpleRope:function(y,T){var A=W("SimpleRope",y,T),B=T.points,F=new K.IE(A,B);return F.applyProps=function(T,A,B){var F=B.image,U=B.texture,X=G(B,eP);N(Array.isArray(B.points),"SimpleRope points needs to be %s","Array<PIXI.Point>");var Y=V(T,A,X);return(F||U)&&(U!==A.texture&&(Y=!0),T.texture=W("SimpleRope",y,B)),Y},F},AnimatedSprite:function(y,T){var A=T.textures,F=T.images,U=T.isPlaying,X=T.initialFrame,u=function(y){return y.map(function(y){return N(y instanceof B.xE||(null==y?void 0:y.texture),"AnimationSprite texture needs to be an array of `PIXI.Texture` or `{ texture: PIXI.Texture, time:\n                number }`"),y})},Y=F?J.K.fromImages(F):new J.K(u(A));return Y[void 0===U||U?"gotoAndPlay":"gotoAndStop"](X||0),Y.applyProps=function(y,T,A){var F=A.textures,U=A.isPlaying,X=A.initialFrame,K=A.images,q=V(y,T,G(A,eR));if(K&&T.images!==K){for(var Q=[],J=0;J<K.length;++J)Q.push(B.xE.from(K[J]));y.textures=Q,q=!0}if(F&&T.textures!==F&&(y.textures=u(F),q=!0),U!==T.isPlaying||X!==T.initialFrame){var Z="number"==typeof X?X:Y.currentFrame||0;Y[U?"gotoAndPlay":"gotoAndStop"](Z),q=!0}return q},Y}});function he(y,T){var A=Object.keys(y);if(Object.getOwnPropertySymbols){var B=Object.getOwnPropertySymbols(y);T&&(B=B.filter(function(T){return Object.getOwnPropertyDescriptor(y,T).enumerable})),A.push.apply(A,B)}return A}function ge(y){for(var T=1;T<arguments.length;T++){var A=null!=arguments[T]?arguments[T]:{};T%2?he(Object(A),!0).forEach(function(T){_(y,T,A[T])}):Object.getOwnPropertyDescriptors?Object.defineProperties(y,Object.getOwnPropertyDescriptors(A)):he(Object(A)).forEach(function(T){Object.defineProperty(y,T,Object.getOwnPropertyDescriptor(A,T))})}return y}var eC,eD,eO,eN,eB={BitmapText:"BitmapText",Container:"Container",Graphics:"Graphics",NineSlicePlane:"NineSlicePlane",ParticleContainer:"ParticleContainer",Sprite:"Sprite",AnimatedSprite:"AnimatedSprite",Text:"Text",TilingSprite:"TilingSprite",SimpleMesh:"SimpleMesh",SimpleRope:"SimpleRope"},eF=Object.keys(eB).reduce(function(y,T){return ge(ge({},y),{},_({},T,eM[T]))},{}),eL={},ek={},eU={},eG={get exports(){return eU},set exports(e){eU=e}},eX={};({get exports(){return ek},set exports(e){ek=e}}).exports=(eN||(eN=1,eO=function(y){var T={},A=(eD||(eD=1,eG.exports=(eC||(eC=1,function(y){function n(y,T){var A=y.length;for(y.push(T);0<A;){var B=A-1>>>1,F=y[B];if(!(0<l(F,T)))break;y[B]=T,y[A]=F,A=B}}function t(y){return 0===y.length?null:y[0]}function r(y){if(0===y.length)return null;var T=y[0],A=y.pop();if(A!==T){y[0]=A;for(var B=0,F=y.length,U=F>>>1;B<U;){var X=2*(B+1)-1,Y=y[X],K=X+1,q=y[K];if(0>l(Y,A))K<F&&0>l(q,Y)?(y[B]=q,y[K]=A,B=K):(y[B]=Y,y[X]=A,B=X);else{if(!(K<F&&0>l(q,A)))break;y[B]=q,y[K]=A,B=K}}}return T}function l(y,T){var A=y.sortIndex-T.sortIndex;return 0!==A?A:y.id-T.id}if("object"==typeof performance&&"function"==typeof performance.now){var T=performance;y.unstable_now=function(){return T.now()}}else{var A=Date,B=A.now();y.unstable_now=function(){return A.now()-B}}var F=[],U=[],X=1,Y=null,K=3,q=!1,Q=!1,J=!1,Z="function"==typeof setTimeout?setTimeout:null,ei="function"==typeof clearTimeout?clearTimeout:null,es="undefined"!=typeof setImmediate?setImmediate:null;function b(y){for(var T=t(U);null!==T;){if(null===T.callback)r(U);else{if(!(T.startTime<=y))break;r(U),T.sortIndex=T.expirationTime,n(F,T)}T=t(U)}}function S(y){if(J=!1,b(y),!Q){if(null!==t(F))Q=!0,R(x);else{var T=t(U);null!==T&&O(S,T.startTime-y)}}}function x(T,A){Q=!1,J&&(J=!1,ei(ec),ec=-1),q=!0;var B=K;try{for(b(A),Y=t(F);null!==Y&&(!(Y.expirationTime>A)||T&&!z());){var X=Y.callback;if("function"==typeof X){Y.callback=null,K=Y.priorityLevel;var Z=X(Y.expirationTime<=A);A=y.unstable_now(),"function"==typeof Z?Y.callback=Z:Y===t(F)&&r(F),b(A)}else r(F);Y=t(F)}if(null!==Y)var es=!0;else{var eh=t(U);null!==eh&&O(S,eh.startTime-A),es=!1}return es}finally{Y=null,K=B,q=!1}}"undefined"!=typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var eh,eu=!1,ed=null,ec=-1,ef=5,ep=-1;function z(){return!(y.unstable_now()-ep<ef)}function N(){if(null!==ed){var T=y.unstable_now();ep=T;var A=!0;try{A=ed(!0,T)}finally{A?eh():(eu=!1,ed=null)}}else eu=!1}if("function"==typeof es)eh=function(){es(N)};else if("undefined"!=typeof MessageChannel){var em=new MessageChannel,eg=em.port2;em.port1.onmessage=N,eh=function(){eg.postMessage(null)}}else eh=function(){Z(N,0)};function R(y){ed=y,eu||(eu=!0,eh())}function O(T,A){ec=Z(function(){T(y.unstable_now())},A)}y.unstable_IdlePriority=5,y.unstable_ImmediatePriority=1,y.unstable_LowPriority=4,y.unstable_NormalPriority=3,y.unstable_Profiling=null,y.unstable_UserBlockingPriority=2,y.unstable_cancelCallback=function(y){y.callback=null},y.unstable_continueExecution=function(){Q||q||(Q=!0,R(x))},y.unstable_forceFrameRate=function(y){0>y||125<y?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):ef=0<y?Math.floor(1e3/y):5},y.unstable_getCurrentPriorityLevel=function(){return K},y.unstable_getFirstCallbackNode=function(){return t(F)},y.unstable_next=function(y){switch(K){case 1:case 2:case 3:var T=3;break;default:T=K}var A=K;K=T;try{return y()}finally{K=A}},y.unstable_pauseExecution=function(){},y.unstable_requestPaint=function(){},y.unstable_runWithPriority=function(y,T){switch(y){case 1:case 2:case 3:case 4:case 5:break;default:y=3}var A=K;K=y;try{return T()}finally{K=A}},y.unstable_scheduleCallback=function(T,A,B){var Y=y.unstable_now();switch(B="object"==typeof B&&null!==B&&"number"==typeof(B=B.delay)&&0<B?Y+B:Y,T){case 1:var K=-1;break;case 2:K=250;break;case 5:K=1073741823;break;case 4:K=1e4;break;default:K=5e3}return T={id:X++,callback:A,priorityLevel:T,startTime:B,expirationTime:K=B+K,sortIndex:-1},B>Y?(T.sortIndex=B,n(U,T),null===t(F)&&T===t(U)&&(J?(ei(ec),ec=-1):J=!0,O(S,B-Y))):(T.sortIndex=K,n(F,T),Q||q||(Q=!0,R(x))),T},y.unstable_shouldYield=z,y.unstable_wrapCallback=function(y){var T=K;return function(){var A=K;K=T;try{return y.apply(this,arguments)}finally{K=A}}}}(eX)),eX)),eU),B=Object.assign;function a(y){for(var T="https://reactjs.org/docs/error-decoder.html?invariant="+y,A=1;A<arguments.length;A++)T+="&args[]="+encodeURIComponent(arguments[A]);return"Minified React error #"+y+"; visit "+T+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var F=eh.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,U=Symbol.for("react.element"),X=Symbol.for("react.portal"),Y=Symbol.for("react.fragment"),K=Symbol.for("react.strict_mode"),q=Symbol.for("react.profiler"),Q=Symbol.for("react.provider"),J=Symbol.for("react.context"),Z=Symbol.for("react.forward_ref"),ei=Symbol.for("react.suspense"),es=Symbol.for("react.suspense_list"),eu=Symbol.for("react.memo"),ed=Symbol.for("react.lazy"),ec=Symbol.for("react.offscreen"),ef=Symbol.iterator;function w(y){return null===y||"object"!=typeof y?null:"function"==typeof(y=ef&&y[ef]||y["@@iterator"])?y:null}function k(y){if(null==y)return null;if("function"==typeof y)return y.displayName||y.name||null;if("string"==typeof y)return y;switch(y){case Y:return"Fragment";case X:return"Portal";case q:return"Profiler";case K:return"StrictMode";case ei:return"Suspense";case es:return"SuspenseList"}if("object"==typeof y)switch(y.$$typeof){case J:return(y.displayName||"Context")+".Consumer";case Q:return(y._context.displayName||"Context")+".Provider";case Z:var T=y.render;return(y=y.displayName)||(y=""!==(y=T.displayName||T.name||"")?"ForwardRef("+y+")":"ForwardRef"),y;case eu:return null!==(T=y.displayName||null)?T:k(y.type)||"Memo";case ed:T=y._payload,y=y._init;try{return k(y(T))}catch(y){}}return null}function E(y){var T=y,A=y;if(y.alternate)for(;T.return;)T=T.return;else{y=T;do 0!=(4098&(T=y).flags)&&(A=T.return),y=T.return;while(y)}return 3===T.tag?A:null}function _(y){if(E(y)!==y)throw Error(a(188))}function C(y){var T=y.alternate;if(!T){if(null===(T=E(y)))throw Error(a(188));return T!==y?null:y}for(var A=y,B=T;;){var F=A.return;if(null===F)break;var U=F.alternate;if(null===U){if(null!==(B=F.return)){A=B;continue}break}if(F.child===U.child){for(U=F.child;U;){if(U===A)return _(F),y;if(U===B)return _(F),T;U=U.sibling}throw Error(a(188))}if(A.return!==B.return)A=F,B=U;else{for(var X=!1,Y=F.child;Y;){if(Y===A){X=!0,A=F,B=U;break}if(Y===B){X=!0,B=F,A=U;break}Y=Y.sibling}if(!X){for(Y=U.child;Y;){if(Y===A){X=!0,A=U,B=F;break}if(Y===B){X=!0,B=U,A=F;break}Y=Y.sibling}if(!X)throw Error(a(189))}}if(A.alternate!==B)throw Error(a(190))}if(3!==A.tag)throw Error(a(188));return A.stateNode.current===A?y:T}function z(y){return null!==(y=C(y))?function N(y){if(5===y.tag||6===y.tag)return y;for(y=y.child;null!==y;){var T=N(y);if(null!==T)return T;y=y.sibling}return null}(y):null}var ep,em=Array.isArray,eg=y.getPublicInstance,e_=y.getRootHostContext,ev=y.getChildHostContext,ey=y.prepareForCommit,ex=y.resetAfterCommit,eb=y.createInstance,eT=y.appendInitialChild,eE=y.finalizeInitialChildren,eS=y.prepareUpdate,eA=y.shouldSetTextContent,eR=y.createTextInstance,ew=y.scheduleTimeout,eI=y.cancelTimeout,eP=y.noTimeout,eM=y.isPrimaryRenderer,eO=y.supportsMutation,eN=y.supportsPersistence,eB=y.supportsHydration,eF=y.getInstanceFromNode,eL=y.preparePortalMount,ek=y.getCurrentEventPriority,ez=y.detachDeletedInstance,eH=y.supportsMicrotasks,ej=y.scheduleMicrotask,eV=y.supportsTestSelectors,eW=y.findFiberRoot,e$=y.getBoundingRect,eY=y.getTextContent,eK=y.isHiddenSubtree,eq=y.matchAccessibilityRole,eQ=y.setFocusIfFocusable,eJ=y.setupIntersectionObserver,eZ=y.appendChild,e0=y.appendChildToContainer,e1=y.commitTextUpdate,e2=y.commitMount,e3=y.commitUpdate,e4=y.insertBefore,e6=y.insertInContainerBefore,e5=y.removeChild,e8=y.removeChildFromContainer,e7=y.resetTextContent,e9=y.hideInstance,te=y.hideTextInstance,tt=y.unhideInstance,ti=y.unhideTextInstance,ts=y.clearContainer,th=y.cloneInstance,tu=y.createContainerChildSet,td=y.appendChildToContainerChildSet,tc=y.finalizeContainerChildren,tf=y.replaceContainerChildren,tp=y.cloneHiddenInstance,tm=y.cloneHiddenTextInstance,tg=y.canHydrateInstance,t_=y.canHydrateTextInstance,tv=y.canHydrateSuspenseInstance,ty=y.isSuspenseInstancePending,tx=y.isSuspenseInstanceFallback,tb=y.getSuspenseInstanceFallbackErrorDetails,tT=y.registerSuspenseInstanceRetry,tE=y.getNextHydratableSibling,tS=y.getFirstHydratableChild,tA=y.getFirstHydratableChildWithinContainer,tR=y.getFirstHydratableChildWithinSuspenseInstance,tw=y.hydrateInstance,tI=y.hydrateTextInstance,tP=y.hydrateSuspenseInstance,tM=y.getNextHydratableInstanceAfterSuspenseInstance,tC=y.commitHydratedContainer,tD=y.commitHydratedSuspenseInstance,tO=y.clearSuspenseBoundary,tN=y.clearSuspenseBoundaryFromContainer,tB=y.shouldDeleteUnhydratedTailInstances,tF=y.didNotMatchHydratedContainerTextInstance,tL=y.didNotMatchHydratedTextInstance;function tn(y){if(void 0===ep)try{throw Error()}catch(y){var T=y.stack.trim().match(/\n( *(at )?)/);ep=T&&T[1]||""}return"\n"+ep+y}var tk=!1;function ln(y,T){if(!y||tk)return"";tk=!0;var A=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(T){if(T=function(){throw Error()},Object.defineProperty(T.prototype,"props",{set:function(){throw Error()}}),"object"==typeof Reflect&&Reflect.construct){try{Reflect.construct(T,[])}catch(y){var B=y}Reflect.construct(y,[],T)}else{try{T.call()}catch(y){B=y}y.call(T.prototype)}}else{try{throw Error()}catch(y){B=y}y()}}catch(T){if(T&&B&&"string"==typeof T.stack){for(var F=T.stack.split("\n"),U=B.stack.split("\n"),X=F.length-1,Y=U.length-1;1<=X&&0<=Y&&F[X]!==U[Y];)Y--;for(;1<=X&&0<=Y;X--,Y--)if(F[X]!==U[Y]){if(1!==X||1!==Y)do if(X--,0>--Y||F[X]!==U[Y]){var K="\n"+F[X].replace(" at new "," at ");return y.displayName&&K.includes("<anonymous>")&&(K=K.replace("<anonymous>",y.displayName)),K}while(1<=X&&0<=Y);break}}}finally{tk=!1,Error.prepareStackTrace=A}return(y=y?y.displayName||y.name:"")?tn(y):""}var tU=Object.prototype.hasOwnProperty,tG=[],tX=-1;function sn(y){return{current:y}}function cn(y){0>tX||(y.current=tG[tX],tG[tX]=null,tX--)}function fn(y,T){tG[++tX]=y.current,y.current=T}var tz={},tH=sn(tz),tj=sn(!1),tV=tz;function gn(y,T){var A=y.type.contextTypes;if(!A)return tz;var B=y.stateNode;if(B&&B.__reactInternalMemoizedUnmaskedChildContext===T)return B.__reactInternalMemoizedMaskedChildContext;var F,U={};for(F in A)U[F]=T[F];return B&&((y=y.stateNode).__reactInternalMemoizedUnmaskedChildContext=T,y.__reactInternalMemoizedMaskedChildContext=U),U}function vn(y){return null!=(y=y.childContextTypes)}function yn(){cn(tj),cn(tH)}function bn(y,T,A){if(tH.current!==tz)throw Error(a(168));fn(tH,T),fn(tj,A)}function Sn(y,T,A){var F=y.stateNode;if(T=T.childContextTypes,"function"!=typeof F.getChildContext)return A;for(var U in F=F.getChildContext())if(!(U in T))throw Error(a(108,function(y){var T=y.type;switch(y.tag){case 24:return"Cache";case 9:return(T.displayName||"Context")+".Consumer";case 10:return(T._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return y=(y=T.render).displayName||y.name||"",T.displayName||(""!==y?"ForwardRef("+y+")":"ForwardRef");case 7:return"Fragment";case 5:return T;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return k(T);case 8:return T===K?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"==typeof T)return T.displayName||T.name||null;if("string"==typeof T)return T}return null}(y)||"Unknown",U));return B({},A,F)}function xn(y){return y=(y=y.stateNode)&&y.__reactInternalMemoizedMergedChildContext||tz,tV=tH.current,fn(tH,y),fn(tj,tj.current),!0}function wn(y,T,A){var B=y.stateNode;if(!B)throw Error(a(169));A?(y=Sn(y,T,tV),B.__reactInternalMemoizedMergedChildContext=y,cn(tj),cn(tH),fn(tH,y)):cn(tj),fn(tj,A)}var tW=Math.clz32?Math.clz32:function(y){return 0==(y>>>=0)?32:31-(t$(y)/tY|0)|0},t$=Math.log,tY=Math.LN2,tK=64,tq=4194304;function zn(y){switch(y&-y){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&y;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&y;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return y}}function Nn(y,T){var A=y.pendingLanes;if(0===A)return 0;var B=0,F=y.suspendedLanes,U=y.pingedLanes,X=268435455&A;if(0!==X){var Y=X&~F;0!==Y?B=zn(Y):0!=(U&=X)&&(B=zn(U))}else 0!=(X=A&~F)?B=zn(X):0!==U&&(B=zn(U));if(0===B)return 0;if(0!==T&&T!==B&&0==(T&F)&&((F=B&-B)>=(U=T&-T)||16===F&&0!=(4194240&U)))return T;if(0!=(4&B)&&(B|=16&A),0!==(T=y.entangledLanes))for(y=y.entanglements,T&=B;0<T;)F=1<<(A=31-tW(T)),B|=y[A],T&=~F;return B}function Tn(y){return 0!=(y=-1073741825&y.pendingLanes)?y:1073741824&y?1073741824:0}function Rn(){var y=tK;return 0==(4194240&(tK<<=1))&&(tK=64),y}function On(y){for(var T=[],A=0;31>A;A++)T.push(y);return T}function jn(y,T,A){y.pendingLanes|=T,536870912!==T&&(y.suspendedLanes=0,y.pingedLanes=0),(y=y.eventTimes)[T=31-tW(T)]=A}function Ln(y,T){var A=y.entangledLanes|=T;for(y=y.entanglements;A;){var B=31-tW(A),F=1<<B;F&T|y[B]&T&&(y[B]|=T),A&=~F}}var tQ=0;function Dn(y){return 1<(y&=-y)?4<y?0!=(268435455&y)?16:536870912:4:1}var tJ=A.unstable_scheduleCallback,tZ=A.unstable_cancelCallback,t0=A.unstable_shouldYield,t1=A.unstable_requestPaint,t2=A.unstable_now,t3=A.unstable_ImmediatePriority,t4=A.unstable_UserBlockingPriority,t6=A.unstable_NormalPriority,t5=A.unstable_IdlePriority,t8=null,t7=null,t9="function"==typeof Object.is?Object.is:function(y,T){return y===T&&(0!==y||1/y==1/T)||y!=y&&T!=T},re=null,rt=!1,rr=!1;function Zn(y){null===re?re=[y]:re.push(y)}function et(){if(!rr&&null!==re){rr=!0;var y=0,T=tQ;try{var A=re;for(tQ=1;y<A.length;y++){var B=A[y];do B=B(!0);while(null!==B)}re=null,rt=!1}catch(T){throw null!==re&&(re=re.slice(y+1)),tJ(t3,et),T}finally{tQ=T,rr=!1}}return null}var ri=[],rn=0,rs=null,rh=0,ru=[],rd=0,rc=null,rf=1,rp="";function ct(y,T){ri[rn++]=rh,ri[rn++]=rs,rs=y,rh=T}function ft(y,T,A){ru[rd++]=rf,ru[rd++]=rp,ru[rd++]=rc,rc=y;var B=rf;y=rp;var F=32-tW(B)-1;B&=~(1<<F),A+=1;var U=32-tW(T)+F;if(30<U){var X=F-F%5;U=(B&(1<<X)-1).toString(32),B>>=X,F-=X,rf=1<<32-tW(T)+F|A<<F|B,rp=U+y}else rf=1<<U|A<<F|B,rp=y}function dt(y){null!==y.return&&(ct(y,1),ft(y,1,0))}function pt(y){for(;y===rs;)rs=ri[--rn],ri[rn]=null,rh=ri[--rn],ri[rn]=null;for(;y===rc;)rc=ru[--rd],ru[rd]=null,rp=ru[--rd],ru[rd]=null,rf=ru[--rd],ru[rd]=null}var rm=null,rg=null,r_=!1,rv=!1,ry=null;function bt(y,T){var A=oo(5,null,null,0);A.elementType="DELETED",A.stateNode=T,A.return=y,null===(T=y.deletions)?(y.deletions=[A],y.flags|=16):T.push(A)}function St(y,T){switch(y.tag){case 5:return null!==(T=tg(T,y.type,y.pendingProps))&&(y.stateNode=T,rm=y,rg=tS(T),!0);case 6:return null!==(T=t_(T,y.pendingProps))&&(y.stateNode=T,rm=y,rg=null,!0);case 13:if(null!==(T=tv(T))){var A=null!==rc?{id:rf,overflow:rp}:null;return y.memoizedState={dehydrated:T,treeContext:A,retryLane:1073741824},(A=oo(18,null,null,0)).stateNode=T,A.return=y,y.child=A,rm=y,rg=null,!0}return!1;default:return!1}}function xt(y){return 0!=(1&y.mode)&&0==(128&y.flags)}function wt(y){if(r_){var T=rg;if(T){var A=T;if(!St(y,T)){if(xt(y))throw Error(a(418));T=tE(A);var B=rm;T&&St(y,T)?bt(B,A):(y.flags=-4097&y.flags|2,r_=!1,rm=y)}}else{if(xt(y))throw Error(a(418));y.flags=-4097&y.flags|2,r_=!1,rm=y}}}function kt(y){for(y=y.return;null!==y&&5!==y.tag&&3!==y.tag&&13!==y.tag;)y=y.return;rm=y}function Pt(y){if(!eB||y!==rm)return!1;if(!r_)return kt(y),r_=!0,!1;if(3!==y.tag&&(5!==y.tag||tB(y.type)&&!eA(y.type,y.memoizedProps))){var T=rg;if(T){if(xt(y))throw Et(),Error(a(418));for(;T;)bt(y,T),T=tE(T)}}if(kt(y),13===y.tag){if(!eB)throw Error(a(316));if(!(y=null!==(y=y.memoizedState)?y.dehydrated:null))throw Error(a(317));rg=tM(y)}else rg=rm?tE(y.stateNode):null;return!0}function Et(){for(var y=rg;y;)y=tE(y)}function _t(){eB&&(rg=rm=null,rv=r_=!1)}function Ct(y){null===ry?ry=[y]:ry.push(y)}var rx=F.ReactCurrentBatchConfig;function Nt(y,T){if(t9(y,T))return!0;if("object"!=typeof y||null===y||"object"!=typeof T||null===T)return!1;var A=Object.keys(y),B=Object.keys(T);if(A.length!==B.length)return!1;for(B=0;B<A.length;B++){var F=A[B];if(!tU.call(T,F)||!t9(y[F],T[F]))return!1}return!0}function Tt(y,T){if(y&&y.defaultProps)for(var A in T=B({},T),y=y.defaultProps)void 0===T[A]&&(T[A]=y[A]);return T}var rb=sn(null),rT=null,rE=null,rS=null;function Mt(){rS=rE=rT=null}function Dt(y,T,A){eM?(fn(rb,T._currentValue),T._currentValue=A):(fn(rb,T._currentValue2),T._currentValue2=A)}function Ut(y){var T=rb.current;cn(rb),eM?y._currentValue=T:y._currentValue2=T}function Ft(y,T,A){for(;null!==y;){var B=y.alternate;if((y.childLanes&T)!==T?(y.childLanes|=T,null!==B&&(B.childLanes|=T)):null!==B&&(B.childLanes&T)!==T&&(B.childLanes|=T),y===A)break;y=y.return}}function At(y,T){rT=y,rS=rE=null,null!==(y=y.dependencies)&&null!==y.firstContext&&(0!=(y.lanes&T)&&(rZ=!0),y.firstContext=null)}function Qt(y){var T=eM?y._currentValue:y._currentValue2;if(rS!==y){if(y={context:y,memoizedValue:T,next:null},null===rE){if(null===rT)throw Error(a(308));rE=y,rT.dependencies={lanes:0,firstContext:y}}else rE=rE.next=y}return T}var rA=null;function Bt(y){null===rA?rA=[y]:rA.push(y)}function Wt(y,T,A,B){var F=T.interleaved;return null===F?(A.next=A,Bt(T)):(A.next=F.next,F.next=A),T.interleaved=A,$t(y,B)}function $t(y,T){y.lanes|=T;var A=y.alternate;for(null!==A&&(A.lanes|=T),A=y,y=y.return;null!==y;)y.childLanes|=T,null!==(A=y.alternate)&&(A.childLanes|=T),A=y,y=y.return;return 3===A.tag?A.stateNode:null}var rR=!1;function Xt(y){y.updateQueue={baseState:y.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function qt(y,T){y=y.updateQueue,T.updateQueue===y&&(T.updateQueue={baseState:y.baseState,firstBaseUpdate:y.firstBaseUpdate,lastBaseUpdate:y.lastBaseUpdate,shared:y.shared,effects:y.effects})}function Gt(y,T){return{eventTime:y,lane:T,tag:0,payload:null,callback:null,next:null}}function Yt(y,T,A){var B=y.updateQueue;if(null===B)return null;if(B=B.shared,0!=(2&iv)){var F=B.pending;return null===F?T.next=T:(T.next=F.next,F.next=T),B.pending=T,$t(y,A)}return null===(F=B.interleaved)?(T.next=T,Bt(B)):(T.next=F.next,F.next=T),B.interleaved=T,$t(y,A)}function Kt(y,T,A){if(null!==(T=T.updateQueue)&&(T=T.shared,0!=(4194240&A))){var B=T.lanes;A|=B&=y.pendingLanes,T.lanes=A,Ln(y,A)}}function Jt(y,T){var A=y.updateQueue,B=y.alternate;if(null!==B&&A===(B=B.updateQueue)){var F=null,U=null;if(null!==(A=A.firstBaseUpdate)){do{var X={eventTime:A.eventTime,lane:A.lane,tag:A.tag,payload:A.payload,callback:A.callback,next:null};null===U?F=U=X:U=U.next=X,A=A.next}while(null!==A);null===U?F=U=T:U=U.next=T}else F=U=T;return A={baseState:B.baseState,firstBaseUpdate:F,lastBaseUpdate:U,shared:B.shared,effects:B.effects},void(y.updateQueue=A)}null===(y=A.lastBaseUpdate)?A.firstBaseUpdate=T:y.next=T,A.lastBaseUpdate=T}function Zt(y,T,A,F){var U=y.updateQueue;rR=!1;var X=U.firstBaseUpdate,Y=U.lastBaseUpdate,K=U.shared.pending;if(null!==K){U.shared.pending=null;var q=K,Q=q.next;q.next=null,null===Y?X=Q:Y.next=Q,Y=q;var J=y.alternate;null!==J&&(K=(J=J.updateQueue).lastBaseUpdate)!==Y&&(null===K?J.firstBaseUpdate=Q:K.next=Q,J.lastBaseUpdate=q)}if(null!==X){var Z=U.baseState;for(Y=0,J=Q=q=null,K=X;;){var ei=K.lane,es=K.eventTime;if((F&ei)===ei){null!==J&&(J=J.next={eventTime:es,lane:0,tag:K.tag,payload:K.payload,callback:K.callback,next:null});e:{var eh=y,eu=K;switch(ei=T,es=A,eu.tag){case 1:if("function"==typeof(eh=eu.payload)){Z=eh.call(es,Z,ei);break e}Z=eh;break e;case 3:eh.flags=-65537&eh.flags|128;case 0:if(null==(ei="function"==typeof(eh=eu.payload)?eh.call(es,Z,ei):eh))break e;Z=B({},Z,ei);break e;case 2:rR=!0}}null!==K.callback&&0!==K.lane&&(y.flags|=64,null===(ei=U.effects)?U.effects=[K]:ei.push(K))}else es={eventTime:es,lane:ei,tag:K.tag,payload:K.payload,callback:K.callback,next:null},null===J?(Q=J=es,q=Z):J=J.next=es,Y|=ei;if(null===(K=K.next)){if(null===(K=U.shared.pending))break;K=(ei=K).next,ei.next=null,U.lastBaseUpdate=ei,U.shared.pending=null}}if(null===J&&(q=Z),U.baseState=q,U.firstBaseUpdate=Q,U.lastBaseUpdate=J,null!==(T=U.shared.interleaved)){U=T;do Y|=U.lane,U=U.next;while(U!==T)}else null===X&&(U.shared.lanes=0);iR|=Y,y.lanes=Y,y.memoizedState=Z}}function er(y,T,A){if(y=T.effects,T.effects=null,null!==y)for(T=0;T<y.length;T++){var B=y[T],F=B.callback;if(null!==F){if(B.callback=null,B=A,"function"!=typeof F)throw Error(a(191,F));F.call(B)}}}var rw=(new eh.Component).refs;function tr(y,T,A,F){A=null==(A=A(F,T=y.memoizedState))?T:B({},T,A),y.memoizedState=A,0===y.lanes&&(y.updateQueue.baseState=A)}var rI={isMounted:function(y){return!!(y=y._reactInternals)&&E(y)===y},enqueueSetState:function(y,T,A){y=y._reactInternals;var B=Ti(),F=Ri(y),U=Gt(B,F);U.payload=T,null!=A&&(U.callback=A),null!==(T=Yt(y,U,F))&&(Oi(T,y,F,B),Kt(T,y,F))},enqueueReplaceState:function(y,T,A){y=y._reactInternals;var B=Ti(),F=Ri(y),U=Gt(B,F);U.tag=1,U.payload=T,null!=A&&(U.callback=A),null!==(T=Yt(y,U,F))&&(Oi(T,y,F,B),Kt(T,y,F))},enqueueForceUpdate:function(y,T){y=y._reactInternals;var A=Ti(),B=Ri(y),F=Gt(A,B);F.tag=2,null!=T&&(F.callback=T),null!==(T=Yt(y,F,B))&&(Oi(T,y,B,A),Kt(T,y,B))}};function lr(y,T,A,B,F,U,X){return"function"==typeof(y=y.stateNode).shouldComponentUpdate?y.shouldComponentUpdate(B,U,X):!T.prototype||!T.prototype.isPureReactComponent||!Nt(A,B)||!Nt(F,U)}function ar(y,T,A){var B=!1,F=tz,U=T.contextType;return"object"==typeof U&&null!==U?U=Qt(U):(F=vn(T)?tV:tH.current,U=(B=null!=(B=T.contextTypes))?gn(y,F):tz),T=new T(A,U),y.memoizedState=null!==T.state&&void 0!==T.state?T.state:null,T.updater=rI,y.stateNode=T,T._reactInternals=y,B&&((y=y.stateNode).__reactInternalMemoizedUnmaskedChildContext=F,y.__reactInternalMemoizedMaskedChildContext=U),T}function ir(y,T,A,B){y=T.state,"function"==typeof T.componentWillReceiveProps&&T.componentWillReceiveProps(A,B),"function"==typeof T.UNSAFE_componentWillReceiveProps&&T.UNSAFE_componentWillReceiveProps(A,B),T.state!==y&&rI.enqueueReplaceState(T,T.state,null)}function or(y,T,A,B){var F=y.stateNode;F.props=A,F.state=y.memoizedState,F.refs=rw,Xt(y);var U=T.contextType;"object"==typeof U&&null!==U?F.context=Qt(U):(U=vn(T)?tV:tH.current,F.context=gn(y,U)),F.state=y.memoizedState,"function"==typeof(U=T.getDerivedStateFromProps)&&(tr(y,T,U,A),F.state=y.memoizedState),"function"==typeof T.getDerivedStateFromProps||"function"==typeof F.getSnapshotBeforeUpdate||"function"!=typeof F.UNSAFE_componentWillMount&&"function"!=typeof F.componentWillMount||(T=F.state,"function"==typeof F.componentWillMount&&F.componentWillMount(),"function"==typeof F.UNSAFE_componentWillMount&&F.UNSAFE_componentWillMount(),T!==F.state&&rI.enqueueReplaceState(F,F.state,null),Zt(y,A,F,B),F.state=y.memoizedState),"function"==typeof F.componentDidMount&&(y.flags|=4194308)}function ur(y,T,A){if(null!==(y=A.ref)&&"function"!=typeof y&&"object"!=typeof y){if(A._owner){if(A=A._owner){if(1!==A.tag)throw Error(a(309));var B=A.stateNode}if(!B)throw Error(a(147,y));var F=B,U=""+y;return null!==T&&null!==T.ref&&"function"==typeof T.ref&&T.ref._stringRef===U?T.ref:((T=function(y){var T=F.refs;T===rw&&(T=F.refs={}),null===y?delete T[U]:T[U]=y})._stringRef=U,T)}if("string"!=typeof y)throw Error(a(284));if(!A._owner)throw Error(a(290,y))}return y}function sr(y,T){throw Error(a(31,"[object Object]"===(y=Object.prototype.toString.call(T))?"object with keys {"+Object.keys(T).join(", ")+"}":y))}function cr(y){return(0,y._init)(y._payload)}function fr(y){function n(T,A){if(y){var B=T.deletions;null===B?(T.deletions=[A],T.flags|=16):B.push(A)}}function t(T,A){if(!y)return null;for(;null!==A;)n(T,A),A=A.sibling;return null}function r(y,T){for(y=new Map;null!==T;)null!==T.key?y.set(T.key,T):y.set(T.index,T),T=T.sibling;return y}function l(y,T){return(y=so(y,T)).index=0,y.sibling=null,y}function i(T,A,B){return T.index=B,y?null!==(B=T.alternate)?(B=B.index)<A?(T.flags|=2,A):B:(T.flags|=2,A):(T.flags|=1048576,A)}function c(T){return y&&null===T.alternate&&(T.flags|=2),T}function f(y,T,A,B){return null===T||6!==T.tag?(T=mo(A,y.mode,B)).return=y:(T=l(T,A)).return=y,T}function d(y,T,A,B){var F=A.type;return F===Y?m(y,T,A.props.children,B,A.key):(null!==T&&(T.elementType===F||"object"==typeof F&&null!==F&&F.$$typeof===ed&&cr(F)===T.type)?(B=l(T,A.props)).ref=ur(y,T,A):(B=co(A.type,A.key,A.props,null,y.mode,B)).ref=ur(y,T,A),B.return=y,B)}function p(y,T,A,B){return null===T||4!==T.tag||T.stateNode.containerInfo!==A.containerInfo||T.stateNode.implementation!==A.implementation?(T=ho(A,y.mode,B)).return=y:(T=l(T,A.children||[])).return=y,T}function m(y,T,A,B,F){return null===T||7!==T.tag?(T=fo(A,y.mode,B,F)).return=y:(T=l(T,A)).return=y,T}function h(y,T,A){if("string"==typeof T&&""!==T||"number"==typeof T)return(T=mo(""+T,y.mode,A)).return=y,T;if("object"==typeof T&&null!==T){switch(T.$$typeof){case U:return(A=co(T.type,T.key,T.props,null,y.mode,A)).ref=ur(y,null,T),A.return=y,A;case X:return(T=ho(T,y.mode,A)).return=y,T;case ed:return h(y,(0,T._init)(T._payload),A)}if(em(T)||w(T))return(T=fo(T,y.mode,A,null)).return=y,T;sr(y,T)}return null}function g(y,T,A,B){var F=null!==T?T.key:null;if("string"==typeof A&&""!==A||"number"==typeof A)return null!==F?null:f(y,T,""+A,B);if("object"==typeof A&&null!==A){switch(A.$$typeof){case U:return A.key===F?d(y,T,A,B):null;case X:return A.key===F?p(y,T,A,B):null;case ed:return g(y,T,(F=A._init)(A._payload),B)}if(em(A)||w(A))return null!==F?null:m(y,T,A,B,null);sr(y,A)}return null}function v(y,T,A,B,F){if("string"==typeof B&&""!==B||"number"==typeof B)return f(T,y=y.get(A)||null,""+B,F);if("object"==typeof B&&null!==B){switch(B.$$typeof){case U:return d(T,y=y.get(null===B.key?A:B.key)||null,B,F);case X:return p(T,y=y.get(null===B.key?A:B.key)||null,B,F);case ed:return v(y,T,A,(0,B._init)(B._payload),F)}if(em(B)||w(B))return m(T,y=y.get(A)||null,B,F,null);sr(T,B)}return null}return function e(T,A,B,F){if("object"==typeof B&&null!==B&&B.type===Y&&null===B.key&&(B=B.props.children),"object"==typeof B&&null!==B){switch(B.$$typeof){case U:e:{for(var K=B.key,q=A;null!==q;){if(q.key===K){if((K=B.type)===Y){if(7===q.tag){t(T,q.sibling),(A=l(q,B.props.children)).return=T,T=A;break e}}else if(q.elementType===K||"object"==typeof K&&null!==K&&K.$$typeof===ed&&cr(K)===q.type){t(T,q.sibling),(A=l(q,B.props)).ref=ur(T,q,B),A.return=T,T=A;break e}t(T,q);break}n(T,q),q=q.sibling}B.type===Y?((A=fo(B.props.children,T.mode,F,B.key)).return=T,T=A):((F=co(B.type,B.key,B.props,null,T.mode,F)).ref=ur(T,A,B),F.return=T,T=F)}return c(T);case X:e:{for(q=B.key;null!==A;){if(A.key===q){if(4===A.tag&&A.stateNode.containerInfo===B.containerInfo&&A.stateNode.implementation===B.implementation){t(T,A.sibling),(A=l(A,B.children||[])).return=T,T=A;break e}t(T,A);break}n(T,A),A=A.sibling}(A=ho(B,T.mode,F)).return=T,T=A}return c(T);case ed:return e(T,A,(q=B._init)(B._payload),F)}if(em(B))return function(T,A,B,F){for(var U=null,X=null,Y=A,K=A=0,q=null;null!==Y&&K<B.length;K++){Y.index>K?(q=Y,Y=null):q=Y.sibling;var Q=g(T,Y,B[K],F);if(null===Q){null===Y&&(Y=q);break}y&&Y&&null===Q.alternate&&n(T,Y),A=i(Q,A,K),null===X?U=Q:X.sibling=Q,X=Q,Y=q}if(K===B.length)return t(T,Y),r_&&ct(T,K),U;if(null===Y){for(;K<B.length;K++)null!==(Y=h(T,B[K],F))&&(A=i(Y,A,K),null===X?U=Y:X.sibling=Y,X=Y);return r_&&ct(T,K),U}for(Y=r(T,Y);K<B.length;K++)null!==(q=v(Y,T,K,B[K],F))&&(y&&null!==q.alternate&&Y.delete(null===q.key?K:q.key),A=i(q,A,K),null===X?U=q:X.sibling=q,X=q);return y&&Y.forEach(function(y){return n(T,y)}),r_&&ct(T,K),U}(T,A,B,F);if(w(B))return function(T,A,B,F){var U=w(B);if("function"!=typeof U)throw Error(a(150));if(null==(B=U.call(B)))throw Error(a(151));for(var X=U=null,Y=A,K=A=0,q=null,Q=B.next();null!==Y&&!Q.done;K++,Q=B.next()){Y.index>K?(q=Y,Y=null):q=Y.sibling;var J=g(T,Y,Q.value,F);if(null===J){null===Y&&(Y=q);break}y&&Y&&null===J.alternate&&n(T,Y),A=i(J,A,K),null===X?U=J:X.sibling=J,X=J,Y=q}if(Q.done)return t(T,Y),r_&&ct(T,K),U;if(null===Y){for(;!Q.done;K++,Q=B.next())null!==(Q=h(T,Q.value,F))&&(A=i(Q,A,K),null===X?U=Q:X.sibling=Q,X=Q);return r_&&ct(T,K),U}for(Y=r(T,Y);!Q.done;K++,Q=B.next())null!==(Q=v(Y,T,K,Q.value,F))&&(y&&null!==Q.alternate&&Y.delete(null===Q.key?K:Q.key),A=i(Q,A,K),null===X?U=Q:X.sibling=Q,X=Q);return y&&Y.forEach(function(y){return n(T,y)}),r_&&ct(T,K),U}(T,A,B,F);sr(T,B)}return"string"==typeof B&&""!==B||"number"==typeof B?(B=""+B,null!==A&&6===A.tag?(t(T,A.sibling),(A=l(A,B)).return=T):(t(T,A),(A=mo(B,T.mode,F)).return=T),c(T=A)):t(T,A)}}var rP=fr(!0),rM=fr(!1),rC={},rD=sn(rC),rO=sn(rC),rN=sn(rC);function yr(y){if(y===rC)throw Error(a(174));return y}function br(y,T){fn(rN,T),fn(rO,y),fn(rD,rC),y=e_(T),cn(rD),fn(rD,y)}function Sr(){cn(rD),cn(rO),cn(rN)}function xr(y){var T=yr(rN.current),A=yr(rD.current);A!==(T=ev(A,y.type,T))&&(fn(rO,y),fn(rD,T))}function wr(y){rO.current===y&&(cn(rD),cn(rO))}var rB=sn(0);function Pr(y){for(var T=y;null!==T;){if(13===T.tag){var A=T.memoizedState;if(null!==A&&(null===(A=A.dehydrated)||ty(A)||tx(A)))return T}else if(19===T.tag&&void 0!==T.memoizedProps.revealOrder){if(0!=(128&T.flags))return T}else if(null!==T.child){T.child.return=T,T=T.child;continue}if(T===y)break;for(;null===T.sibling;){if(null===T.return||T.return===y)return null;T=T.return}T.sibling.return=T.return,T=T.sibling}return null}var rF=[];function _r(){for(var y=0;y<rF.length;y++){var T=rF[y];eM?T._workInProgressVersionPrimary=null:T._workInProgressVersionSecondary=null}rF.length=0}var rL=F.ReactCurrentDispatcher,rk=F.ReactCurrentBatchConfig,rU=0,rG=null,rX=null,rz=null,rH=!1,rj=!1,rV=0,rW=0;function Dr(){throw Error(a(321))}function Ur(y,T){if(null===T)return!1;for(var A=0;A<T.length&&A<y.length;A++)if(!t9(y[A],T[A]))return!1;return!0}function Fr(y,T,A,B,F,U){if(rU=U,rG=T,T.memoizedState=null,T.updateQueue=null,T.lanes=0,rL.current=null===y||null===y.memoizedState?rY:rK,y=A(B,F),rj){U=0;do{if(rj=!1,rV=0,25<=U)throw Error(a(301));U+=1,rz=rX=null,T.updateQueue=null,rL.current=rq,y=A(B,F)}while(rj)}if(rL.current=r$,T=null!==rX&&null!==rX.next,rU=0,rz=rX=rG=null,rH=!1,T)throw Error(a(300));return y}function Ar(){var y=0!==rV;return rV=0,y}function Qr(){var y={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===rz?rG.memoizedState=rz=y:rz=rz.next=y,rz}function Hr(){if(null===rX){var y=rG.alternate;y=null!==y?y.memoizedState:null}else y=rX.next;var T=null===rz?rG.memoizedState:rz.next;if(null!==T)rz=T,rX=y;else{if(null===y)throw Error(a(310));y={memoizedState:(rX=y).memoizedState,baseState:rX.baseState,baseQueue:rX.baseQueue,queue:rX.queue,next:null},null===rz?rG.memoizedState=rz=y:rz=rz.next=y}return rz}function Br(y,T){return"function"==typeof T?T(y):T}function Wr(y){var T=Hr(),A=T.queue;if(null===A)throw Error(a(311));A.lastRenderedReducer=y;var B=rX,F=B.baseQueue,U=A.pending;if(null!==U){if(null!==F){var X=F.next;F.next=U.next,U.next=X}B.baseQueue=F=U,A.pending=null}if(null!==F){U=F.next,B=B.baseState;var Y=X=null,K=null,q=U;do{var Q=q.lane;if((rU&Q)===Q)null!==K&&(K=K.next={lane:0,action:q.action,hasEagerState:q.hasEagerState,eagerState:q.eagerState,next:null}),B=q.hasEagerState?q.eagerState:y(B,q.action);else{var J={lane:Q,action:q.action,hasEagerState:q.hasEagerState,eagerState:q.eagerState,next:null};null===K?(Y=K=J,X=B):K=K.next=J,rG.lanes|=Q,iR|=Q}q=q.next}while(null!==q&&q!==U);null===K?X=B:K.next=Y,t9(B,T.memoizedState)||(rZ=!0),T.memoizedState=B,T.baseState=X,T.baseQueue=K,A.lastRenderedState=B}if(null!==(y=A.interleaved)){F=y;do U=F.lane,rG.lanes|=U,iR|=U,F=F.next;while(F!==y)}else null===F&&(A.lanes=0);return[T.memoizedState,A.dispatch]}function $r(y){var T=Hr(),A=T.queue;if(null===A)throw Error(a(311));A.lastRenderedReducer=y;var B=A.dispatch,F=A.pending,U=T.memoizedState;if(null!==F){A.pending=null;var X=F=F.next;do U=y(U,X.action),X=X.next;while(X!==F);t9(U,T.memoizedState)||(rZ=!0),T.memoizedState=U,null===T.baseQueue&&(T.baseState=U),A.lastRenderedState=U}return[U,B]}function Vr(){}function Xr(y,T){var A=rG,B=Hr(),F=T(),U=!t9(B.memoizedState,F);if(U&&(B.memoizedState=F,rZ=!0),B=B.queue,al(Yr.bind(null,A,B,y),[y]),B.getSnapshot!==T||U||null!==rz&&1&rz.memoizedState.tag){if(A.flags|=2048,el(9,Gr.bind(null,A,B,F,T),void 0,null),null===iy)throw Error(a(349));0!=(30&rU)||qr(A,T,F)}return F}function qr(y,T,A){y.flags|=16384,y={getSnapshot:T,value:A},null===(T=rG.updateQueue)?(T={lastEffect:null,stores:null},rG.updateQueue=T,T.stores=[y]):null===(A=T.stores)?T.stores=[y]:A.push(y)}function Gr(y,T,A,B){T.value=A,T.getSnapshot=B,Kr(T)&&Jr(y)}function Yr(y,T,A){return A(function(){Kr(T)&&Jr(y)})}function Kr(y){var T=y.getSnapshot;y=y.value;try{var A=T();return!t9(y,A)}catch(y){return!0}}function Jr(y){var T=$t(y,1);null!==T&&Oi(T,y,1,-1)}function Zr(y){var T=Qr();return"function"==typeof y&&(y=y()),T.memoizedState=T.baseState=y,y={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Br,lastRenderedState:y},T.queue=y,y=y.dispatch=vl.bind(null,rG,y),[T.memoizedState,y]}function el(y,T,A,B){return y={tag:y,create:T,destroy:A,deps:B,next:null},null===(T=rG.updateQueue)?(T={lastEffect:null,stores:null},rG.updateQueue=T,T.lastEffect=y.next=y):null===(A=T.lastEffect)?T.lastEffect=y.next=y:(B=A.next,A.next=y,y.next=B,T.lastEffect=y),y}function nl(){return Hr().memoizedState}function tl(y,T,A,B){var F=Qr();rG.flags|=y,F.memoizedState=el(1|T,A,void 0,void 0===B?null:B)}function rl(y,T,A,B){var F=Hr();B=void 0===B?null:B;var U=void 0;if(null!==rX){var X=rX.memoizedState;if(U=X.destroy,null!==B&&Ur(B,X.deps))return void(F.memoizedState=el(T,A,U,B))}rG.flags|=y,F.memoizedState=el(1|T,A,U,B)}function ll(y,T){return tl(8390656,8,y,T)}function al(y,T){return rl(2048,8,y,T)}function il(y,T){return rl(4,2,y,T)}function ol(y,T){return rl(4,4,y,T)}function ul(y,T){return"function"==typeof T?(T(y=y()),function(){T(null)}):null!=T?(y=y(),T.current=y,function(){T.current=null}):void 0}function sl(y,T,A){return A=null!=A?A.concat([y]):null,rl(4,4,ul.bind(null,T,y),A)}function cl(){}function fl(y,T){var A=Hr();T=void 0===T?null:T;var B=A.memoizedState;return null!==B&&null!==T&&Ur(T,B[1])?B[0]:(A.memoizedState=[y,T],y)}function dl(y,T){var A=Hr();T=void 0===T?null:T;var B=A.memoizedState;return null!==B&&null!==T&&Ur(T,B[1])?B[0]:(y=y(),A.memoizedState=[y,T],y)}function pl(y,T,A){return 0==(21&rU)?(y.baseState&&(y.baseState=!1,rZ=!0),y.memoizedState=A):(t9(A,T)||(A=Rn(),rG.lanes|=A,iR|=A,y.baseState=!0),T)}function ml(y,T){var A=tQ;tQ=0!==A&&4>A?A:4,y(!0);var B=rk.transition;rk.transition={};try{y(!1),T()}finally{tQ=A,rk.transition=B}}function hl(){return Hr().memoizedState}function gl(y,T,A){var B=Ri(y);(A={lane:B,action:A,hasEagerState:!1,eagerState:null,next:null},yl(y))?bl(T,A):null!==(A=Wt(y,T,A,B))&&(Oi(A,y,B,Ti()),Sl(A,T,B))}function vl(y,T,A){var B=Ri(y),F={lane:B,action:A,hasEagerState:!1,eagerState:null,next:null};if(yl(y))bl(T,F);else{var U=y.alternate;if(0===y.lanes&&(null===U||0===U.lanes)&&null!==(U=T.lastRenderedReducer))try{var X=T.lastRenderedState,Y=U(X,A);if(F.hasEagerState=!0,F.eagerState=Y,t9(Y,X)){var K=T.interleaved;return null===K?(F.next=F,Bt(T)):(F.next=K.next,K.next=F),void(T.interleaved=F)}}catch(y){}null!==(A=Wt(y,T,F,B))&&(Oi(A,y,B,F=Ti()),Sl(A,T,B))}}function yl(y){var T=y.alternate;return y===rG||null!==T&&T===rG}function bl(y,T){rj=rH=!0;var A=y.pending;null===A?T.next=T:(T.next=A.next,A.next=T),y.pending=T}function Sl(y,T,A){if(0!=(4194240&A)){var B=T.lanes;A|=B&=y.pendingLanes,T.lanes=A,Ln(y,A)}}var r$={readContext:Qt,useCallback:Dr,useContext:Dr,useEffect:Dr,useImperativeHandle:Dr,useInsertionEffect:Dr,useLayoutEffect:Dr,useMemo:Dr,useReducer:Dr,useRef:Dr,useState:Dr,useDebugValue:Dr,useDeferredValue:Dr,useTransition:Dr,useMutableSource:Dr,useSyncExternalStore:Dr,useId:Dr,unstable_isNewReconciler:!1},rY={readContext:Qt,useCallback:function(y,T){return Qr().memoizedState=[y,void 0===T?null:T],y},useContext:Qt,useEffect:ll,useImperativeHandle:function(y,T,A){return A=null!=A?A.concat([y]):null,tl(4194308,4,ul.bind(null,T,y),A)},useLayoutEffect:function(y,T){return tl(4194308,4,y,T)},useInsertionEffect:function(y,T){return tl(4,2,y,T)},useMemo:function(y,T){var A=Qr();return T=void 0===T?null:T,y=y(),A.memoizedState=[y,T],y},useReducer:function(y,T,A){var B=Qr();return T=void 0!==A?A(T):T,B.memoizedState=B.baseState=T,y={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:y,lastRenderedState:T},B.queue=y,y=y.dispatch=gl.bind(null,rG,y),[B.memoizedState,y]},useRef:function(y){return y={current:y},Qr().memoizedState=y},useState:Zr,useDebugValue:cl,useDeferredValue:function(y){return Qr().memoizedState=y},useTransition:function(){var y=Zr(!1),T=y[0];return y=ml.bind(null,y[1]),Qr().memoizedState=y,[T,y]},useMutableSource:function(){},useSyncExternalStore:function(y,T,A){var B=rG,F=Qr();if(r_){if(void 0===A)throw Error(a(407));A=A()}else{if(A=T(),null===iy)throw Error(a(349));0!=(30&rU)||qr(B,T,A)}F.memoizedState=A;var U={value:A,getSnapshot:T};return F.queue=U,ll(Yr.bind(null,B,U,y),[y]),B.flags|=2048,el(9,Gr.bind(null,B,U,A,T),void 0,null),A},useId:function(){var y=Qr(),T=iy.identifierPrefix;if(r_){var A=rp;T=":"+T+"R"+(A=(rf&~(1<<32-tW(rf)-1)).toString(32)+A),0<(A=rV++)&&(T+="H"+A.toString(32)),T+=":"}else T=":"+T+"r"+(A=rW++).toString(32)+":";return y.memoizedState=T},unstable_isNewReconciler:!1},rK={readContext:Qt,useCallback:fl,useContext:Qt,useEffect:al,useImperativeHandle:sl,useInsertionEffect:il,useLayoutEffect:ol,useMemo:dl,useReducer:Wr,useRef:nl,useState:function(){return Wr(Br)},useDebugValue:cl,useDeferredValue:function(y){return pl(Hr(),rX.memoizedState,y)},useTransition:function(){return[Wr(Br)[0],Hr().memoizedState]},useMutableSource:Vr,useSyncExternalStore:Xr,useId:hl,unstable_isNewReconciler:!1},rq={readContext:Qt,useCallback:fl,useContext:Qt,useEffect:al,useImperativeHandle:sl,useInsertionEffect:il,useLayoutEffect:ol,useMemo:dl,useReducer:$r,useRef:nl,useState:function(){return $r(Br)},useDebugValue:cl,useDeferredValue:function(y){var T=Hr();return null===rX?T.memoizedState=y:pl(T,rX.memoizedState,y)},useTransition:function(){return[$r(Br)[0],Hr().memoizedState]},useMutableSource:Vr,useSyncExternalStore:Xr,useId:hl,unstable_isNewReconciler:!1};function El(y,T){try{var A="",B=T;do A+=function(y){switch(y.tag){case 5:return tn(y.type);case 16:return tn("Lazy");case 13:return tn("Suspense");case 19:return tn("SuspenseList");case 0:case 2:case 15:return y=ln(y.type,!1);case 11:return y=ln(y.type.render,!1);case 1:return y=ln(y.type,!0);default:return""}}(B),B=B.return;while(B);var F=A}catch(y){F="\nError generating stack: "+y.message+"\n"+y.stack}return{value:y,source:T,stack:F,digest:null}}function _l(y,T,A){return{value:y,source:null,stack:null!=A?A:null,digest:null!=T?T:null}}function Cl(y,T){try{console.error(T.value)}catch(y){setTimeout(function(){throw y})}}var rQ="function"==typeof WeakMap?WeakMap:Map;function Nl(y,T,A){(A=Gt(-1,A)).tag=3,A.payload={element:null};var B=T.value;return A.callback=function(){iB||(iB=!0,iF=B),Cl(0,T)},A}function Il(y,T,A){(A=Gt(-1,A)).tag=3;var B=y.type.getDerivedStateFromError;if("function"==typeof B){var F=T.value;A.payload=function(){return B(F)},A.callback=function(){Cl(0,T)}}var U=y.stateNode;return null!==U&&"function"==typeof U.componentDidCatch&&(A.callback=function(){Cl(0,T),"function"!=typeof B&&(null===iL?iL=new Set([this]):iL.add(this));var y=T.stack;this.componentDidCatch(T.value,{componentStack:null!==y?y:""})}),A}function Tl(y,T,A){var B=y.pingCache;if(null===B){B=y.pingCache=new rQ;var F=new Set;B.set(T,F)}else void 0===(F=B.get(T))&&(F=new Set,B.set(T,F));F.has(A)||(F.add(A),y=no.bind(null,y,T,A),T.then(y,y))}function Rl(y){do{var T;if((T=13===y.tag)&&(T=null===(T=y.memoizedState)||null!==T.dehydrated),T)return y;y=y.return}while(null!==y);return null}function Ol(y,T,A,B,F){return 0==(1&y.mode)?y===T?y.flags|=65536:(y.flags|=128,A.flags|=131072,A.flags&=-52805,1===A.tag&&(null===A.alternate?A.tag=17:((T=Gt(-1,1)).tag=2,Yt(A,T,1))),A.lanes|=1):(y.flags|=65536,y.lanes=F),y}var rJ=F.ReactCurrentOwner,rZ=!1;function Ml(y,T,A,B){T.child=null===y?rM(T,null,A,B):rP(T,y.child,A,B)}function Dl(y,T,A,B,F){A=A.render;var U=T.ref;return At(T,F),B=Fr(y,T,A,B,U,F),A=Ar(),null===y||rZ?(r_&&A&&dt(T),T.flags|=1,Ml(y,T,B,F),T.child):(T.updateQueue=y.updateQueue,T.flags&=-2053,y.lanes&=~F,ia(y,T,F))}function Ul(y,T,A,B,F){if(null===y){var U=A.type;return"function"!=typeof U||uo(U)||void 0!==U.defaultProps||null!==A.compare||void 0!==A.defaultProps?((y=co(A.type,null,B,T,T.mode,F)).ref=T.ref,y.return=T,T.child=y):(T.tag=15,T.type=U,Fl(y,T,U,B,F))}if(U=y.child,0==(y.lanes&F)){var X=U.memoizedProps;if((A=null!==(A=A.compare)?A:Nt)(X,B)&&y.ref===T.ref)return ia(y,T,F)}return T.flags|=1,(y=so(U,B)).ref=T.ref,y.return=T,T.child=y}function Fl(y,T,A,B,F){if(null!==y){var U=y.memoizedProps;if(Nt(U,B)&&y.ref===T.ref){if(rZ=!1,T.pendingProps=B=U,0==(y.lanes&F))return T.lanes=y.lanes,ia(y,T,F);0!=(131072&y.flags)&&(rZ=!0)}}return Hl(y,T,A,B,F)}function Al(y,T,A){var B=T.pendingProps,F=B.children,U=null!==y?y.memoizedState:null;if("hidden"===B.mode){if(0==(1&T.mode))T.memoizedState={baseLanes:0,cachePool:null,transitions:null},fn(iE,iT),iT|=A;else{if(0==(1073741824&A))return y=null!==U?U.baseLanes|A:A,T.lanes=T.childLanes=1073741824,T.memoizedState={baseLanes:y,cachePool:null,transitions:null},T.updateQueue=null,fn(iE,iT),iT|=y,null;T.memoizedState={baseLanes:0,cachePool:null,transitions:null},B=null!==U?U.baseLanes:A,fn(iE,iT),iT|=B}}else null!==U?(B=U.baseLanes|A,T.memoizedState=null):B=A,fn(iE,iT),iT|=B;return Ml(y,T,F,A),T.child}function Ql(y,T){var A=T.ref;(null===y&&null!==A||null!==y&&y.ref!==A)&&(T.flags|=512,T.flags|=2097152)}function Hl(y,T,A,B,F){var U=vn(A)?tV:tH.current;return U=gn(T,U),At(T,F),A=Fr(y,T,A,B,U,F),B=Ar(),null===y||rZ?(r_&&B&&dt(T),T.flags|=1,Ml(y,T,A,F),T.child):(T.updateQueue=y.updateQueue,T.flags&=-2053,y.lanes&=~F,ia(y,T,F))}function Bl(y,T,A,B,F){if(vn(A)){var U=!0;xn(T)}else U=!1;if(At(T,F),null===T.stateNode)aa(y,T),ar(T,A,B),or(T,A,B,F),B=!0;else if(null===y){var X=T.stateNode,Y=T.memoizedProps;X.props=Y;var K=X.context,q=A.contextType;q="object"==typeof q&&null!==q?Qt(q):gn(T,q=vn(A)?tV:tH.current);var Q=A.getDerivedStateFromProps,J="function"==typeof Q||"function"==typeof X.getSnapshotBeforeUpdate;J||"function"!=typeof X.UNSAFE_componentWillReceiveProps&&"function"!=typeof X.componentWillReceiveProps||(Y!==B||K!==q)&&ir(T,X,B,q),rR=!1;var Z=T.memoizedState;X.state=Z,Zt(T,B,X,F),K=T.memoizedState,Y!==B||Z!==K||tj.current||rR?("function"==typeof Q&&(tr(T,A,Q,B),K=T.memoizedState),(Y=rR||lr(T,A,Y,B,Z,K,q))?(J||"function"!=typeof X.UNSAFE_componentWillMount&&"function"!=typeof X.componentWillMount||("function"==typeof X.componentWillMount&&X.componentWillMount(),"function"==typeof X.UNSAFE_componentWillMount&&X.UNSAFE_componentWillMount()),"function"==typeof X.componentDidMount&&(T.flags|=4194308)):("function"==typeof X.componentDidMount&&(T.flags|=4194308),T.memoizedProps=B,T.memoizedState=K),X.props=B,X.state=K,X.context=q,B=Y):("function"==typeof X.componentDidMount&&(T.flags|=4194308),B=!1)}else{X=T.stateNode,qt(y,T),Y=T.memoizedProps,q=T.type===T.elementType?Y:Tt(T.type,Y),X.props=q,J=T.pendingProps,Z=X.context,K="object"==typeof(K=A.contextType)&&null!==K?Qt(K):gn(T,K=vn(A)?tV:tH.current);var ei=A.getDerivedStateFromProps;(Q="function"==typeof ei||"function"==typeof X.getSnapshotBeforeUpdate)||"function"!=typeof X.UNSAFE_componentWillReceiveProps&&"function"!=typeof X.componentWillReceiveProps||(Y!==J||Z!==K)&&ir(T,X,B,K),rR=!1,Z=T.memoizedState,X.state=Z,Zt(T,B,X,F);var es=T.memoizedState;Y!==J||Z!==es||tj.current||rR?("function"==typeof ei&&(tr(T,A,ei,B),es=T.memoizedState),(q=rR||lr(T,A,q,B,Z,es,K)||!1)?(Q||"function"!=typeof X.UNSAFE_componentWillUpdate&&"function"!=typeof X.componentWillUpdate||("function"==typeof X.componentWillUpdate&&X.componentWillUpdate(B,es,K),"function"==typeof X.UNSAFE_componentWillUpdate&&X.UNSAFE_componentWillUpdate(B,es,K)),"function"==typeof X.componentDidUpdate&&(T.flags|=4),"function"==typeof X.getSnapshotBeforeUpdate&&(T.flags|=1024)):("function"!=typeof X.componentDidUpdate||Y===y.memoizedProps&&Z===y.memoizedState||(T.flags|=4),"function"!=typeof X.getSnapshotBeforeUpdate||Y===y.memoizedProps&&Z===y.memoizedState||(T.flags|=1024),T.memoizedProps=B,T.memoizedState=es),X.props=B,X.state=es,X.context=K,B=q):("function"!=typeof X.componentDidUpdate||Y===y.memoizedProps&&Z===y.memoizedState||(T.flags|=4),"function"!=typeof X.getSnapshotBeforeUpdate||Y===y.memoizedProps&&Z===y.memoizedState||(T.flags|=1024),B=!1)}return Wl(y,T,A,B,U,F)}function Wl(y,T,A,B,F,U){Ql(y,T);var X=0!=(128&T.flags);if(!B&&!X)return F&&wn(T,A,!1),ia(y,T,U);B=T.stateNode,rJ.current=T;var Y=X&&"function"!=typeof A.getDerivedStateFromError?null:B.render();return T.flags|=1,null!==y&&X?(T.child=rP(T,y.child,null,U),T.child=rP(T,null,Y,U)):Ml(y,T,Y,U),T.memoizedState=B.state,F&&wn(T,A,!0),T.child}function $l(y){var T=y.stateNode;T.pendingContext?bn(0,T.pendingContext,T.pendingContext!==T.context):T.context&&bn(0,T.context,!1),br(y,T.containerInfo)}function Vl(y,T,A,B,F){return _t(),Ct(F),T.flags|=256,Ml(y,T,A,B),T.child}var r0,r1,r2,r3,r4={dehydrated:null,treeContext:null,retryLane:0};function Jl(y){return{baseLanes:y,cachePool:null,transitions:null}}function Zl(y,T,A){var B,F=T.pendingProps,U=rB.current,X=!1,Y=0!=(128&T.flags);if((B=Y)||(B=(null===y||null!==y.memoizedState)&&0!=(2&U)),B?(X=!0,T.flags&=-129):null!==y&&null===y.memoizedState||(U|=1),fn(rB,1&U),null===y)return wt(T),null!==(y=T.memoizedState)&&null!==(y=y.dehydrated)?(0==(1&T.mode)?T.lanes=1:tx(y)?T.lanes=8:T.lanes=1073741824,null):(Y=F.children,y=F.fallback,X?(F=T.mode,X=T.child,Y={mode:"hidden",children:Y},0==(1&F)&&null!==X?(X.childLanes=0,X.pendingProps=Y):X=po(Y,F,0,null),y=fo(y,F,A,null),X.return=T,y.return=T,X.sibling=y,T.child=X,T.child.memoizedState=Jl(A),T.memoizedState=r4,y):ea(T,Y));if(null!==(U=y.memoizedState)&&null!==(B=U.dehydrated))return function(y,T,A,B,F,U,X){if(A)return 256&T.flags?(T.flags&=-257,na(y,T,X,B=_l(Error(a(422))))):null!==T.memoizedState?(T.child=y.child,T.flags|=128,null):(U=B.fallback,F=T.mode,B=po({mode:"visible",children:B.children},F,0,null),(U=fo(U,F,X,null)).flags|=2,B.return=T,U.return=T,B.sibling=U,T.child=B,0!=(1&T.mode)&&rP(T,y.child,null,X),T.child.memoizedState=Jl(X),T.memoizedState=r4,U);if(0==(1&T.mode))return na(y,T,X,null);if(tx(F))return B=tb(F).digest,na(y,T,X,B=_l(U=Error(a(419)),B,void 0));if(A=0!=(X&y.childLanes),rZ||A){if(null!==(B=iy)){switch(X&-X){case 4:F=2;break;case 16:F=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:F=32;break;case 536870912:F=268435456;break;default:F=0}0!==(F=0!=(F&(B.suspendedLanes|X))?0:F)&&F!==U.retryLane&&(U.retryLane=F,$t(y,F),Oi(B,y,F,-1))}return $i(),na(y,T,X,B=_l(Error(a(421))))}return ty(F)?(T.flags|=128,T.child=y.child,tT(F,T=ro.bind(null,y)),null):(y=U.treeContext,eB&&(rg=tR(F),rm=T,r_=!0,ry=null,rv=!1,null!==y&&(ru[rd++]=rf,ru[rd++]=rp,ru[rd++]=rc,rf=y.id,rp=y.overflow,rc=T)),T=ea(T,B.children),T.flags|=4096,T)}(y,T,Y,F,B,U,A);if(X){X=F.fallback,Y=T.mode,B=(U=y.child).sibling;var K={mode:"hidden",children:F.children};return 0==(1&Y)&&T.child!==U?((F=T.child).childLanes=0,F.pendingProps=K,T.deletions=null):(F=so(U,K)).subtreeFlags=14680064&U.subtreeFlags,null!==B?X=so(B,X):(X=fo(X,Y,A,null)).flags|=2,X.return=T,F.return=T,F.sibling=X,T.child=F,F=X,X=T.child,Y=null===(Y=y.child.memoizedState)?Jl(A):{baseLanes:Y.baseLanes|A,cachePool:null,transitions:Y.transitions},X.memoizedState=Y,X.childLanes=y.childLanes&~A,T.memoizedState=r4,F}return y=(X=y.child).sibling,F=so(X,{mode:"visible",children:F.children}),0==(1&T.mode)&&(F.lanes=A),F.return=T,F.sibling=null,null!==y&&(null===(A=T.deletions)?(T.deletions=[y],T.flags|=16):A.push(y)),T.child=F,T.memoizedState=null,F}function ea(y,T){return(T=po({mode:"visible",children:T},y.mode,0,null)).return=y,y.child=T}function na(y,T,A,B){return null!==B&&Ct(B),rP(T,y.child,null,A),(y=ea(T,T.pendingProps.children)).flags|=2,T.memoizedState=null,y}function ta(y,T,A){y.lanes|=T;var B=y.alternate;null!==B&&(B.lanes|=T),Ft(y.return,T,A)}function ra(y,T,A,B,F){var U=y.memoizedState;null===U?y.memoizedState={isBackwards:T,rendering:null,renderingStartTime:0,last:B,tail:A,tailMode:F}:(U.isBackwards=T,U.rendering=null,U.renderingStartTime=0,U.last=B,U.tail=A,U.tailMode=F)}function la(y,T,A){var B=T.pendingProps,F=B.revealOrder,U=B.tail;if(Ml(y,T,B.children,A),0!=(2&(B=rB.current)))B=1&B|2,T.flags|=128;else{if(null!==y&&0!=(128&y.flags))e:for(y=T.child;null!==y;){if(13===y.tag)null!==y.memoizedState&&ta(y,A,T);else if(19===y.tag)ta(y,A,T);else if(null!==y.child){y.child.return=y,y=y.child;continue}if(y===T)break;for(;null===y.sibling;){if(null===y.return||y.return===T)break e;y=y.return}y.sibling.return=y.return,y=y.sibling}B&=1}if(fn(rB,B),0==(1&T.mode))T.memoizedState=null;else switch(F){case"forwards":for(A=T.child,F=null;null!==A;)null!==(y=A.alternate)&&null===Pr(y)&&(F=A),A=A.sibling;null===(A=F)?(F=T.child,T.child=null):(F=A.sibling,A.sibling=null),ra(T,!1,F,A,U);break;case"backwards":for(A=null,F=T.child,T.child=null;null!==F;){if(null!==(y=F.alternate)&&null===Pr(y)){T.child=F;break}y=F.sibling,F.sibling=A,A=F,F=y}ra(T,!0,A,null,U);break;case"together":ra(T,!1,null,null,void 0);break;default:T.memoizedState=null}return T.child}function aa(y,T){0==(1&T.mode)&&null!==y&&(y.alternate=null,T.alternate=null,T.flags|=2)}function ia(y,T,A){if(null!==y&&(T.dependencies=y.dependencies),iR|=T.lanes,0==(A&T.childLanes))return null;if(null!==y&&T.child!==y.child)throw Error(a(153));if(null!==T.child){for(A=so(y=T.child,y.pendingProps),T.child=A,A.return=T;null!==y.sibling;)y=y.sibling,(A=A.sibling=so(y,y.pendingProps)).return=T;A.sibling=null}return T.child}function oa(y){y.flags|=4}function ua(y,T){if(null!==y&&y.child===T.child)return!0;if(0!=(16&T.flags))return!1;for(y=T.child;null!==y;){if(0!=(12854&y.flags)||0!=(12854&y.subtreeFlags))return!1;y=y.sibling}return!0}if(eO)r0=function(y,T){for(var A=T.child;null!==A;){if(5===A.tag||6===A.tag)eT(y,A.stateNode);else if(4!==A.tag&&null!==A.child){A.child.return=A,A=A.child;continue}if(A===T)break;for(;null===A.sibling;){if(null===A.return||A.return===T)return;A=A.return}A.sibling.return=A.return,A=A.sibling}},r1=function(){},r2=function(y,T,A,B,F){(y=y.memoizedProps)!==B&&(A=eS(T.stateNode,A,y,B,F,yr(rD.current)),(T.updateQueue=A)&&oa(T))},r3=function(y,T,A,B){A!==B&&oa(T)};else if(eN){r0=function(y,T,A,B){for(var F=T.child;null!==F;){if(5===F.tag){var U=F.stateNode;A&&B&&(U=tp(U,F.type,F.memoizedProps,F)),eT(y,U)}else if(6===F.tag)U=F.stateNode,A&&B&&(U=tm(U,F.memoizedProps,F)),eT(y,U);else if(4!==F.tag){if(22===F.tag&&null!==F.memoizedState)null!==(U=F.child)&&(U.return=F),r0(y,F,!0,!0);else if(null!==F.child){F.child.return=F,F=F.child;continue}}if(F===T)break;for(;null===F.sibling;){if(null===F.return||F.return===T)return;F=F.return}F.sibling.return=F.return,F=F.sibling}};var sa=function(y,T,A,B){for(var F=T.child;null!==F;){if(5===F.tag){var U=F.stateNode;A&&B&&(U=tp(U,F.type,F.memoizedProps,F)),td(y,U)}else if(6===F.tag)U=F.stateNode,A&&B&&(U=tm(U,F.memoizedProps,F)),td(y,U);else if(4!==F.tag){if(22===F.tag&&null!==F.memoizedState)null!==(U=F.child)&&(U.return=F),sa(y,F,!0,!0);else if(null!==F.child){F.child.return=F,F=F.child;continue}}if(F===T)break;for(;null===F.sibling;){if(null===F.return||F.return===T)return;F=F.return}F.sibling.return=F.return,F=F.sibling}};r1=function(y,T){var A=T.stateNode;if(!ua(y,T)){var B=tu(y=A.containerInfo);sa(B,T,!1,!1),A.pendingChildren=B,oa(T),tc(y,B)}},r2=function(y,T,A,B,F){var U=y.stateNode,X=y.memoizedProps;if((y=ua(y,T))&&X===B)T.stateNode=U;else{var Y=T.stateNode,K=yr(rD.current),q=null;X!==B&&(q=eS(Y,A,X,B,F,K)),y&&null===q?T.stateNode=U:(eE(U=th(U,q,A,X,B,T,y,Y),A,B,F,K)&&oa(T),T.stateNode=U,y?oa(T):r0(U,T,!1,!1))}},r3=function(y,T,A,B){A!==B?(y=yr(rN.current),A=yr(rD.current),T.stateNode=eR(B,y,A,T),oa(T)):T.stateNode=y.stateNode}}else r1=function(){},r2=function(){},r3=function(){};function ca(y,T){if(!r_)switch(y.tailMode){case"hidden":T=y.tail;for(var A=null;null!==T;)null!==T.alternate&&(A=T),T=T.sibling;null===A?y.tail=null:A.sibling=null;break;case"collapsed":A=y.tail;for(var B=null;null!==A;)null!==A.alternate&&(B=A),A=A.sibling;null===B?T||null===y.tail?y.tail=null:y.tail.sibling=null:B.sibling=null}}function fa(y){var T=null!==y.alternate&&y.alternate.child===y.child,A=0,B=0;if(T)for(var F=y.child;null!==F;)A|=F.lanes|F.childLanes,B|=14680064&F.subtreeFlags,B|=14680064&F.flags,F.return=y,F=F.sibling;else for(F=y.child;null!==F;)A|=F.lanes|F.childLanes,B|=F.subtreeFlags,B|=F.flags,F.return=y,F=F.sibling;return y.subtreeFlags|=B,y.childLanes=A,T}var r6=!1,r5=!1,r8="function"==typeof WeakSet?WeakSet:Set,r7=null;function ya(y,T){var A=y.ref;if(null!==A){if("function"==typeof A)try{A(null)}catch(A){eo(y,T,A)}else A.current=null}}function ba(y,T,A){try{A()}catch(A){eo(y,T,A)}}var r9=!1;function xa(y,T,A){var B=T.updateQueue;if(null!==(B=null!==B?B.lastEffect:null)){var F=B=B.next;do{if((F.tag&y)===y){var U=F.destroy;F.destroy=void 0,void 0!==U&&ba(T,A,U)}F=F.next}while(F!==B)}}function wa(y,T){if(null!==(T=null!==(T=T.updateQueue)?T.lastEffect:null)){var A=T=T.next;do{if((A.tag&y)===y){var B=A.create;A.destroy=B()}A=A.next}while(A!==T)}}function ka(y){var T=y.ref;if(null!==T){var A=y.stateNode;y=5===y.tag?eg(A):A,"function"==typeof T?T(y):T.current=y}}function Ea(y){return 5===y.tag||3===y.tag||4===y.tag}function _a(y){e:for(;;){for(;null===y.sibling;){if(null===y.return||Ea(y.return))return null;y=y.return}for(y.sibling.return=y.return,y=y.sibling;5!==y.tag&&6!==y.tag&&18!==y.tag;){if(2&y.flags||null===y.child||4===y.tag)continue e;y.child.return=y,y=y.child}if(!(2&y.flags))return y.stateNode}}var ie=null,it=!1;function Ta(y,T,A){for(A=A.child;null!==A;)Ra(y,T,A),A=A.sibling}function Ra(y,T,A){if(t7&&"function"==typeof t7.onCommitFiberUnmount)try{t7.onCommitFiberUnmount(t8,A)}catch(y){}switch(A.tag){case 5:r5||ya(A,T);case 6:if(eO){var B=ie,F=it;ie=null,Ta(y,T,A),it=F,null!==(ie=B)&&(it?e8(ie,A.stateNode):e5(ie,A.stateNode))}else Ta(y,T,A);break;case 18:eO&&null!==ie&&(it?tN(ie,A.stateNode):tO(ie,A.stateNode));break;case 4:eO?(B=ie,F=it,ie=A.stateNode.containerInfo,it=!0,Ta(y,T,A),ie=B,it=F):(eN&&(F=tu(B=A.stateNode.containerInfo),tf(B,F)),Ta(y,T,A));break;case 0:case 11:case 14:case 15:if(!r5&&null!==(B=A.updateQueue)&&null!==(B=B.lastEffect)){F=B=B.next;do{var U=F,X=U.destroy;U=U.tag,void 0!==X&&(0!=(2&U)||0!=(4&U))&&ba(A,T,X),F=F.next}while(F!==B)}Ta(y,T,A);break;case 1:if(!r5&&(ya(A,T),"function"==typeof(B=A.stateNode).componentWillUnmount))try{B.props=A.memoizedProps,B.state=A.memoizedState,B.componentWillUnmount()}catch(y){eo(A,T,y)}Ta(y,T,A);break;case 21:default:Ta(y,T,A);break;case 22:1&A.mode?(r5=(B=r5)||null!==A.memoizedState,Ta(y,T,A),r5=B):Ta(y,T,A)}}function Oa(y){var T=y.updateQueue;if(null!==T){y.updateQueue=null;var A=y.stateNode;null===A&&(A=y.stateNode=new r8),T.forEach(function(T){var B=lo.bind(null,y,T);A.has(T)||(A.add(T),T.then(B,B))})}}function ja(y,T){var A=T.deletions;if(null!==A)for(var B=0;B<A.length;B++){var F=A[B];try{var U=T;if(eO){var X=U;e:for(;null!==X;){switch(X.tag){case 5:ie=X.stateNode,it=!1;break e;case 3:case 4:ie=X.stateNode.containerInfo,it=!0;break e}X=X.return}if(null===ie)throw Error(a(160));Ra(y,U,F),ie=null,it=!1}else Ra(y,U,F);var Y=F.alternate;null!==Y&&(Y.return=null),F.return=null}catch(y){eo(F,T,y)}}if(12854&T.subtreeFlags)for(T=T.child;null!==T;)La(T,y),T=T.sibling}function La(y,T){var A=y.alternate,B=y.flags;switch(y.tag){case 0:case 11:case 14:case 15:if(ja(T,y),Ma(y),4&B){try{xa(3,y,y.return),wa(3,y)}catch(T){eo(y,y.return,T)}try{xa(5,y,y.return)}catch(T){eo(y,y.return,T)}}break;case 1:ja(T,y),Ma(y),512&B&&null!==A&&ya(A,A.return);break;case 5:if(ja(T,y),Ma(y),512&B&&null!==A&&ya(A,A.return),eO){if(32&y.flags){var F=y.stateNode;try{e7(F)}catch(T){eo(y,y.return,T)}}if(4&B&&null!=(F=y.stateNode)){var U=y.memoizedProps;if(A=null!==A?A.memoizedProps:U,B=y.type,T=y.updateQueue,y.updateQueue=null,null!==T)try{e3(F,T,B,A,U,y)}catch(T){eo(y,y.return,T)}}}break;case 6:if(ja(T,y),Ma(y),4&B&&eO){if(null===y.stateNode)throw Error(a(162));F=y.stateNode,U=y.memoizedProps,A=null!==A?A.memoizedProps:U;try{e1(F,A,U)}catch(T){eo(y,y.return,T)}}break;case 3:if(ja(T,y),Ma(y),4&B){if(eO&&eB&&null!==A&&A.memoizedState.isDehydrated)try{tC(T.containerInfo)}catch(T){eo(y,y.return,T)}if(eN){F=T.containerInfo,U=T.pendingChildren;try{tf(F,U)}catch(T){eo(y,y.return,T)}}}break;case 4:if(ja(T,y),Ma(y),4&B&&eN){F=(U=y.stateNode).containerInfo,U=U.pendingChildren;try{tf(F,U)}catch(T){eo(y,y.return,T)}}break;case 13:ja(T,y),Ma(y),8192&(F=y.child).flags&&(U=null!==F.memoizedState,F.stateNode.isHidden=U,U&&(null===F.alternate||null===F.alternate.memoizedState)&&(iC=t2())),4&B&&Oa(y);break;case 22:var X=null!==A&&null!==A.memoizedState;if(1&y.mode?(r5=(A=r5)||X,ja(T,y),r5=A):ja(T,y),Ma(y),8192&B){if(A=null!==y.memoizedState,(y.stateNode.isHidden=A)&&!X&&0!=(1&y.mode))for(r7=y,B=y.child;null!==B;){for(T=r7=B;null!==r7;){var Y=(X=r7).child;switch(X.tag){case 0:case 11:case 14:case 15:xa(4,X,X.return);break;case 1:ya(X,X.return);var K=X.stateNode;if("function"==typeof K.componentWillUnmount){var q=X,Q=X.return;try{K.props=q.memoizedProps,K.state=q.memoizedState,K.componentWillUnmount()}catch(y){eo(q,Q,y)}}break;case 5:ya(X,X.return);break;case 22:if(null!==X.memoizedState){Aa(T);continue}}null!==Y?(Y.return=X,r7=Y):Aa(T)}B=B.sibling}if(eO){e:if(B=null,eO)for(T=y;;){if(5===T.tag){if(null===B){B=T;try{F=T.stateNode,A?e9(F):tt(T.stateNode,T.memoizedProps)}catch(T){eo(y,y.return,T)}}}else if(6===T.tag){if(null===B)try{U=T.stateNode,A?te(U):ti(U,T.memoizedProps)}catch(T){eo(y,y.return,T)}}else if((22!==T.tag&&23!==T.tag||null===T.memoizedState||T===y)&&null!==T.child){T.child.return=T,T=T.child;continue}if(T===y)break e;for(;null===T.sibling;){if(null===T.return||T.return===y)break e;B===T&&(B=null),T=T.return}B===T&&(B=null),T.sibling.return=T.return,T=T.sibling}}}break;case 19:ja(T,y),Ma(y),4&B&&Oa(y);break;case 21:break;default:ja(T,y),Ma(y)}}function Ma(y){var T=y.flags;if(2&T){try{if(eO){e:{for(var A=y.return;null!==A;){if(Ea(A)){var B=A;break e}A=A.return}throw Error(a(160))}switch(B.tag){case 5:var F=B.stateNode;32&B.flags&&(e7(F),B.flags&=-33),function za(y,T,A){var B=y.tag;if(5===B||6===B)y=y.stateNode,T?e4(A,y,T):eZ(A,y);else if(4!==B&&null!==(y=y.child))for(za(y,T,A),y=y.sibling;null!==y;)za(y,T,A),y=y.sibling}(y,_a(y),F);break;case 3:case 4:var U=B.stateNode.containerInfo;(function Ca(y,T,A){var B=y.tag;if(5===B||6===B)y=y.stateNode,T?e6(A,y,T):e0(A,y);else if(4!==B&&null!==(y=y.child))for(Ca(y,T,A),y=y.sibling;null!==y;)Ca(y,T,A),y=y.sibling})(y,_a(y),U);break;default:throw Error(a(161))}}}catch(T){eo(y,y.return,T)}y.flags&=-3}4096&T&&(y.flags&=-4097)}function Fa(y){for(;null!==r7;){var T=r7;if(0!=(8772&T.flags)){var A=T.alternate;try{if(0!=(8772&T.flags))switch(T.tag){case 0:case 11:case 15:r5||wa(5,T);break;case 1:var B=T.stateNode;if(4&T.flags&&!r5){if(null===A)B.componentDidMount();else{var F=T.elementType===T.type?A.memoizedProps:Tt(T.type,A.memoizedProps);B.componentDidUpdate(F,A.memoizedState,B.__reactInternalSnapshotBeforeUpdate)}}var U=T.updateQueue;null!==U&&er(T,U,B);break;case 3:var X=T.updateQueue;if(null!==X){if(A=null,null!==T.child)switch(T.child.tag){case 5:A=eg(T.child.stateNode);break;case 1:A=T.child.stateNode}er(T,X,A)}break;case 5:var Y=T.stateNode;null===A&&4&T.flags&&e2(Y,T.type,T.memoizedProps,T);break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(eB&&null===T.memoizedState){var K=T.alternate;if(null!==K){var q=K.memoizedState;if(null!==q){var Q=q.dehydrated;null!==Q&&tD(Q)}}}break;default:throw Error(a(163))}r5||512&T.flags&&ka(T)}catch(y){eo(T,T.return,y)}}if(T===y){r7=null;break}if(null!==(A=T.sibling)){A.return=T.return,r7=A;break}r7=T.return}}function Aa(y){for(;null!==r7;){var T=r7;if(T===y){r7=null;break}var A=T.sibling;if(null!==A){A.return=T.return,r7=A;break}r7=T.return}}function Qa(y){for(;null!==r7;){var T=r7;try{switch(T.tag){case 0:case 11:case 15:var A=T.return;try{wa(4,T)}catch(y){eo(T,A,y)}break;case 1:var B=T.stateNode;if("function"==typeof B.componentDidMount){var F=T.return;try{B.componentDidMount()}catch(y){eo(T,F,y)}}var U=T.return;try{ka(T)}catch(y){eo(T,U,y)}break;case 5:var X=T.return;try{ka(T)}catch(y){eo(T,X,y)}}}catch(y){eo(T,T.return,y)}if(T===y){r7=null;break}var Y=T.sibling;if(null!==Y){Y.return=T.return,r7=Y;break}r7=T.return}}var ii=0,is=1,ih=2,iu=3,id=4;if("function"==typeof Symbol&&Symbol.for){var ic=Symbol.for;ii=ic("selector.component"),is=ic("selector.has_pseudo_class"),ih=ic("selector.role"),iu=ic("selector.test_id"),id=ic("selector.text")}function qa(y){var T=eF(y);if(null!=T){if("string"!=typeof T.memoizedProps["data-testname"])throw Error(a(364));return T}if(null===(y=eW(y)))throw Error(a(362));return y.stateNode.current}function Ga(y,T){switch(T.$$typeof){case ii:if(y.type===T.value)return!0;break;case is:e:{T=T.value,y=[y,0];for(var A=0;A<y.length;){var B=y[A++],F=y[A++],U=T[F];if(5!==B.tag||!eK(B)){for(;null!=U&&Ga(B,U);)U=T[++F];if(F===T.length){T=!0;break e}for(B=B.child;null!==B;)y.push(B,F),B=B.sibling}}T=!1}return T;case ih:if(5===y.tag&&eq(y.stateNode,T.value))return!0;break;case id:if((5===y.tag||6===y.tag)&&null!==(y=eY(y))&&0<=y.indexOf(T.value))return!0;break;case iu:if(5===y.tag&&"string"==typeof(y=y.memoizedProps["data-testname"])&&y.toLowerCase()===T.value.toLowerCase())return!0;break;default:throw Error(a(365))}return!1}function Ya(y){switch(y.$$typeof){case ii:return"<"+(k(y.value)||"Unknown")+">";case is:return":has("+(Ya(y)||"")+")";case ih:return'[role="'+y.value+'"]';case id:return'"'+y.value+'"';case iu:return'[data-testname="'+y.value+'"]';default:throw Error(a(365))}}function Ka(y,T){var A=[];y=[y,0];for(var B=0;B<y.length;){var F=y[B++],U=y[B++],X=T[U];if(5!==F.tag||!eK(F)){for(;null!=X&&Ga(F,X);)X=T[++U];if(U===T.length)A.push(F);else for(F=F.child;null!==F;)y.push(F,U),F=F.sibling}}return A}function Ja(y,T){if(!eV)throw Error(a(363));y=Ka(y=qa(y),T),T=[],y=Array.from(y);for(var A=0;A<y.length;){var B=y[A++];if(5===B.tag)eK(B)||T.push(B.stateNode);else for(B=B.child;null!==B;)y.push(B),B=B.sibling}return T}var ip=Math.ceil,im=F.ReactCurrentDispatcher,ig=F.ReactCurrentOwner,i_=F.ReactCurrentBatchConfig,iv=0,iy=null,ix=null,ib=0,iT=0,iE=sn(0),iS=0,iA=null,iR=0,iw=0,iI=0,iP=null,iM=null,iC=0,iD=1/0,iO=null;function bi(){iD=t2()+500}var iN,iB=!1,iF=null,iL=null,ik=!1,iU=null,iG=0,iX=0,iz=null,iH=-1,ij=0;function Ti(){return 0!=(6&iv)?t2():-1!==iH?iH:iH=t2()}function Ri(y){return 0==(1&y.mode)?1:0!=(2&iv)&&0!==ib?ib&-ib:null!==rx.transition?(0===ij&&(ij=Rn()),ij):0!==(y=tQ)?y:ek()}function Oi(y,T,A,B){if(50<iX)throw iX=0,iz=null,Error(a(185));jn(y,A,B),0!=(2&iv)&&y===iy||(y===iy&&(0==(2&iv)&&(iw|=A),4===iS&&Ui(y,ib)),ji(y,B),1===A&&0===iv&&0==(1&T.mode)&&(bi(),rt&&et()))}function ji(y,T){var A,B,F,U=y.callbackNode;!function(y,T){for(var A=y.suspendedLanes,B=y.pingedLanes,F=y.expirationTimes,U=y.pendingLanes;0<U;){var X=31-tW(U),Y=1<<X,K=F[X];-1===K?0!=(Y&A)&&0==(Y&B)||(F[X]=function(y,T){switch(y){case 1:case 2:case 4:return T+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return T+5e3;default:return -1}}(Y,T)):K<=T&&(y.expiredLanes|=Y),U&=~Y}}(y,T);var X=Nn(y,y===iy?ib:0);if(0===X)null!==U&&tZ(U),y.callbackNode=null,y.callbackPriority=0;else if(T=X&-X,y.callbackPriority!==T){if(null!=U&&tZ(U),1===T)0===y.tag?(F=Fi.bind(null,y),rt=!0,Zn(F)):Zn(Fi.bind(null,y)),eH?ej(function(){0==(6&iv)&&et()}):tJ(t3,et),U=null;else{switch(Dn(X)){case 1:U=t3;break;case 4:U=t4;break;case 16:default:U=t6;break;case 536870912:U=t5}U=tJ(U,Li.bind(null,y))}y.callbackPriority=T,y.callbackNode=U}}function Li(y,T){if(iH=-1,ij=0,0!=(6&iv))throw Error(a(327));var A=y.callbackNode;if(Ji()&&y.callbackNode!==A)return null;var B=Nn(y,y===iy?ib:0);if(0===B)return null;if(0!=(30&B)||0!=(B&y.expiredLanes)||T)T=Vi(y,B);else{T=B;var F=iv;iv|=2;var U=Wi();for(iy===y&&ib===T||(iO=null,bi(),Hi(y,T));;)try{(function(){for(;null!==ix&&!t0();)Gi(ix)})();break}catch(T){Bi(y,T)}Mt(),im.current=U,iv=F,null!==ix?T=0:(iy=null,ib=0,T=iS)}if(0!==T){if(2===T&&0!==(F=Tn(y))&&(B=F,T=Mi(y,F)),1===T)throw A=iA,Hi(y,0),Ui(y,B),ji(y,t2()),A;if(6===T)Ui(y,B);else{if(F=y.current.alternate,0==(30&B)&&!function(y){for(var T=y;;){if(16384&T.flags){var A=T.updateQueue;if(null!==A&&null!==(A=A.stores))for(var B=0;B<A.length;B++){var F=A[B],U=F.getSnapshot;F=F.value;try{if(!t9(U(),F))return!1}catch(y){return!1}}}if(A=T.child,16384&T.subtreeFlags&&null!==A)A.return=T,T=A;else{if(T===y)break;for(;null===T.sibling;){if(null===T.return||T.return===y)return!0;T=T.return}T.sibling.return=T.return,T=T.sibling}}return!0}(F)&&(2===(T=Vi(y,B))&&0!==(U=Tn(y))&&(B=U,T=Mi(y,U)),1===T))throw A=iA,Hi(y,0),Ui(y,B),ji(y,t2()),A;switch(y.finishedWork=F,y.finishedLanes=B,T){case 0:case 1:throw Error(a(345));case 2:case 5:Ki(y,iM,iO);break;case 3:if(Ui(y,B),(130023424&B)===B&&10<(T=iC+500-t2())){if(0!==Nn(y,0))break;if(((F=y.suspendedLanes)&B)!==B){Ti(),y.pingedLanes|=y.suspendedLanes&F;break}y.timeoutHandle=ew(Ki.bind(null,y,iM,iO),T);break}Ki(y,iM,iO);break;case 4:if(Ui(y,B),(4194240&B)===B)break;for(T=y.eventTimes,F=-1;0<B;){var X=31-tW(B);U=1<<X,(X=T[X])>F&&(F=X),B&=~U}if(B=F,10<(B=(120>(B=t2()-B)?120:480>B?480:1080>B?1080:1920>B?1920:3e3>B?3e3:4320>B?4320:1960*ip(B/1960))-B)){y.timeoutHandle=ew(Ki.bind(null,y,iM,iO),B);break}Ki(y,iM,iO);break;default:throw Error(a(329))}}}return ji(y,t2()),y.callbackNode===A?Li.bind(null,y):null}function Mi(y,T){var A=iP;return y.current.memoizedState.isDehydrated&&(Hi(y,T).flags|=256),2!==(y=Vi(y,T))&&(T=iM,iM=A,null!==T&&Di(T)),y}function Di(y){null===iM?iM=y:iM.push.apply(iM,y)}function Ui(y,T){for(T&=~iI,T&=~iw,y.suspendedLanes|=T,y.pingedLanes&=~T,y=y.expirationTimes;0<T;){var A=31-tW(T),B=1<<A;y[A]=-1,T&=~B}}function Fi(y){if(0!=(6&iv))throw Error(a(327));Ji();var T=Nn(y,0);if(0==(1&T))return ji(y,t2()),null;var A=Vi(y,T);if(0!==y.tag&&2===A){var B=Tn(y);0!==B&&(T=B,A=Mi(y,B))}if(1===A)throw A=iA,Hi(y,0),Ui(y,T),ji(y,t2()),A;if(6===A)throw Error(a(345));return y.finishedWork=y.current.alternate,y.finishedLanes=T,Ki(y,iM,iO),ji(y,t2()),null}function Ai(y){null!==iU&&0===iU.tag&&0==(6&iv)&&Ji();var T=iv;iv|=1;var A=i_.transition,B=tQ;try{if(i_.transition=null,tQ=1,y)return y()}finally{tQ=B,i_.transition=A,0==(6&(iv=T))&&et()}}function Qi(){iT=iE.current,cn(iE)}function Hi(y,T){y.finishedWork=null,y.finishedLanes=0;var A=y.timeoutHandle;if(A!==eP&&(y.timeoutHandle=eP,eI(A)),null!==ix)for(A=ix.return;null!==A;){var B=A;switch(pt(B),B.tag){case 1:null!=(B=B.type.childContextTypes)&&yn();break;case 3:Sr(),cn(tj),cn(tH),_r();break;case 5:wr(B);break;case 4:Sr();break;case 13:case 19:cn(rB);break;case 10:Ut(B.type._context);break;case 22:case 23:Qi()}A=A.return}if(iy=y,ix=y=so(y.current,null),ib=iT=T,iS=0,iA=null,iI=iw=iR=0,iM=iP=null,null!==rA){for(T=0;T<rA.length;T++)if(null!==(B=(A=rA[T]).interleaved)){A.interleaved=null;var F=B.next,U=A.pending;if(null!==U){var X=U.next;U.next=F,B.next=X}A.pending=B}rA=null}return y}function Bi(y,T){for(;;){var A=ix;try{if(Mt(),rL.current=r$,rH){for(var B=rG.memoizedState;null!==B;){var F=B.queue;null!==F&&(F.pending=null),B=B.next}rH=!1}if(rU=0,rz=rX=rG=null,rj=!1,rV=0,ig.current=null,null===A||null===A.return){iS=1,iA=T,ix=null;break}e:{var U=y,X=A.return,Y=A,K=T;if(T=ib,Y.flags|=32768,null!==K&&"object"==typeof K&&"function"==typeof K.then){var q=K,Q=Y,J=Q.tag;if(0==(1&Q.mode)&&(0===J||11===J||15===J)){var Z=Q.alternate;Z?(Q.updateQueue=Z.updateQueue,Q.memoizedState=Z.memoizedState,Q.lanes=Z.lanes):(Q.updateQueue=null,Q.memoizedState=null)}var ei=Rl(X);if(null!==ei){ei.flags&=-257,Ol(ei,X,Y,0,T),1&ei.mode&&Tl(U,q,T),K=q;var es=(T=ei).updateQueue;if(null===es){var eh=new Set;eh.add(K),T.updateQueue=eh}else es.add(K);break e}if(0==(1&T)){Tl(U,q,T),$i();break e}K=Error(a(426))}else if(r_&&1&Y.mode){var eu=Rl(X);if(null!==eu){0==(65536&eu.flags)&&(eu.flags|=256),Ol(eu,X,Y,0,T),Ct(El(K,Y));break e}}U=K=El(K,Y),4!==iS&&(iS=2),null===iP?iP=[U]:iP.push(U),U=X;do{switch(U.tag){case 3:U.flags|=65536,T&=-T,U.lanes|=T,Jt(U,Nl(0,K,T));break e;case 1:Y=K;var ed=U.type,ec=U.stateNode;if(0==(128&U.flags)&&("function"==typeof ed.getDerivedStateFromError||null!==ec&&"function"==typeof ec.componentDidCatch&&(null===iL||!iL.has(ec)))){U.flags|=65536,T&=-T,U.lanes|=T,Jt(U,Il(U,Y,T));break e}}U=U.return}while(null!==U)}Yi(A)}catch(y){T=y,ix===A&&null!==A&&(ix=A=A.return);continue}break}}function Wi(){var y=im.current;return im.current=r$,null===y?r$:y}function $i(){0!==iS&&3!==iS&&2!==iS||(iS=4),null===iy||0==(268435455&iR)&&0==(268435455&iw)||Ui(iy,ib)}function Vi(y,T){var A=iv;iv|=2;var B=Wi();for(iy===y&&ib===T||(iO=null,Hi(y,T));;)try{(function(){for(;null!==ix;)Gi(ix)})();break}catch(T){Bi(y,T)}if(Mt(),iv=A,im.current=B,null!==ix)throw Error(a(261));return iy=null,ib=0,iS}function Gi(y){var T=iN(y.alternate,y,iT);y.memoizedProps=y.pendingProps,null===T?Yi(y):ix=T,ig.current=null}function Yi(y){var T=y;do{var A=T.alternate;if(y=T.return,0==(32768&T.flags)){if(null!==(A=function(y,T,A){var B=T.pendingProps;switch(pt(T),T.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return fa(T),null;case 1:case 17:return vn(T.type)&&yn(),fa(T),null;case 3:return A=T.stateNode,Sr(),cn(tj),cn(tH),_r(),A.pendingContext&&(A.context=A.pendingContext,A.pendingContext=null),null!==y&&null!==y.child||(Pt(T)?oa(T):null===y||y.memoizedState.isDehydrated&&0==(256&T.flags)||(T.flags|=1024,null!==ry&&(Di(ry),ry=null))),r1(y,T),fa(T),null;case 5:wr(T),A=yr(rN.current);var F=T.type;if(null!==y&&null!=T.stateNode)r2(y,T,F,B,A),y.ref!==T.ref&&(T.flags|=512,T.flags|=2097152);else{if(!B){if(null===T.stateNode)throw Error(a(166));return fa(T),null}if(y=yr(rD.current),Pt(T)){if(!eB)throw Error(a(175));y=tw(T.stateNode,T.type,T.memoizedProps,A,y,T,!rv),T.updateQueue=y,null!==y&&oa(T)}else{var U=eb(F,B,A,y,T);r0(U,T,!1,!1),T.stateNode=U,eE(U,F,B,A,y)&&oa(T)}null!==T.ref&&(T.flags|=512,T.flags|=2097152)}return fa(T),null;case 6:if(y&&null!=T.stateNode)r3(y,T,y.memoizedProps,B);else{if("string"!=typeof B&&null===T.stateNode)throw Error(a(166));if(y=yr(rN.current),A=yr(rD.current),Pt(T)){if(!eB)throw Error(a(176));if((B=tI(y=T.stateNode,A=T.memoizedProps,T,!rv))&&null!==(F=rm))switch(F.tag){case 3:tF(F.stateNode.containerInfo,y,A,0!=(1&F.mode));break;case 5:tL(F.type,F.memoizedProps,F.stateNode,y,A,0!=(1&F.mode))}B&&oa(T)}else T.stateNode=eR(B,y,A,T)}return fa(T),null;case 13:if(cn(rB),B=T.memoizedState,null===y||null!==y.memoizedState&&null!==y.memoizedState.dehydrated){if(r_&&null!==rg&&0!=(1&T.mode)&&0==(128&T.flags))Et(),_t(),T.flags|=98560,F=!1;else if(F=Pt(T),null!==B&&null!==B.dehydrated){if(null===y){if(!F)throw Error(a(318));if(!eB)throw Error(a(344));if(!(F=null!==(F=T.memoizedState)?F.dehydrated:null))throw Error(a(317));tP(F,T)}else _t(),0==(128&T.flags)&&(T.memoizedState=null),T.flags|=4;fa(T),F=!1}else null!==ry&&(Di(ry),ry=null),F=!0;if(!F)return 65536&T.flags?T:null}return 0!=(128&T.flags)?(T.lanes=A,T):((A=null!==B)!=(null!==y&&null!==y.memoizedState)&&A&&(T.child.flags|=8192,0!=(1&T.mode)&&(null===y||0!=(1&rB.current)?0===iS&&(iS=3):$i())),null!==T.updateQueue&&(T.flags|=4),fa(T),null);case 4:return Sr(),r1(y,T),null===y&&eL(T.stateNode.containerInfo),fa(T),null;case 10:return Ut(T.type._context),fa(T),null;case 19:if(cn(rB),null===(F=T.memoizedState))return fa(T),null;if(B=0!=(128&T.flags),null===(U=F.rendering)){if(B)ca(F,!1);else{if(0!==iS||null!==y&&0!=(128&y.flags))for(y=T.child;null!==y;){if(null!==(U=Pr(y))){for(T.flags|=128,ca(F,!1),null!==(y=U.updateQueue)&&(T.updateQueue=y,T.flags|=4),T.subtreeFlags=0,y=A,A=T.child;null!==A;)F=y,(B=A).flags&=14680066,null===(U=B.alternate)?(B.childLanes=0,B.lanes=F,B.child=null,B.subtreeFlags=0,B.memoizedProps=null,B.memoizedState=null,B.updateQueue=null,B.dependencies=null,B.stateNode=null):(B.childLanes=U.childLanes,B.lanes=U.lanes,B.child=U.child,B.subtreeFlags=0,B.deletions=null,B.memoizedProps=U.memoizedProps,B.memoizedState=U.memoizedState,B.updateQueue=U.updateQueue,B.type=U.type,F=U.dependencies,B.dependencies=null===F?null:{lanes:F.lanes,firstContext:F.firstContext}),A=A.sibling;return fn(rB,1&rB.current|2),T.child}y=y.sibling}null!==F.tail&&t2()>iD&&(T.flags|=128,B=!0,ca(F,!1),T.lanes=4194304)}}else{if(!B){if(null!==(y=Pr(U))){if(T.flags|=128,B=!0,null!==(y=y.updateQueue)&&(T.updateQueue=y,T.flags|=4),ca(F,!0),null===F.tail&&"hidden"===F.tailMode&&!U.alternate&&!r_)return fa(T),null}else 2*t2()-F.renderingStartTime>iD&&1073741824!==A&&(T.flags|=128,B=!0,ca(F,!1),T.lanes=4194304)}F.isBackwards?(U.sibling=T.child,T.child=U):(null!==(y=F.last)?y.sibling=U:T.child=U,F.last=U)}return null!==F.tail?(T=F.tail,F.rendering=T,F.tail=T.sibling,F.renderingStartTime=t2(),T.sibling=null,y=rB.current,fn(rB,B?1&y|2:1&y),T):(fa(T),null);case 22:case 23:return Qi(),A=null!==T.memoizedState,null!==y&&null!==y.memoizedState!==A&&(T.flags|=8192),A&&0!=(1&T.mode)?0!=(1073741824&iT)&&(fa(T),eO&&6&T.subtreeFlags&&(T.flags|=8192)):fa(T),null;case 24:case 25:return null}throw Error(a(156,T.tag))}(A,T,iT)))return void(ix=A)}else{if(null!==(A=function(y,T){switch(pt(T),T.tag){case 1:return vn(T.type)&&yn(),65536&(y=T.flags)?(T.flags=-65537&y|128,T):null;case 3:return Sr(),cn(tj),cn(tH),_r(),0!=(65536&(y=T.flags))&&0==(128&y)?(T.flags=-65537&y|128,T):null;case 5:return wr(T),null;case 13:if(cn(rB),null!==(y=T.memoizedState)&&null!==y.dehydrated){if(null===T.alternate)throw Error(a(340));_t()}return 65536&(y=T.flags)?(T.flags=-65537&y|128,T):null;case 19:return cn(rB),null;case 4:return Sr(),null;case 10:return Ut(T.type._context),null;case 22:case 23:return Qi(),null;default:return null}}(A,T)))return A.flags&=32767,void(ix=A);if(null===y)return iS=6,void(ix=null);y.flags|=32768,y.subtreeFlags=0,y.deletions=null}if(null!==(T=T.sibling))return void(ix=T);ix=T=y}while(null!==T);0===iS&&(iS=5)}function Ki(y,T,A){var B=tQ,F=i_.transition;try{i_.transition=null,tQ=1,function(y,T,A,B){do Ji();while(null!==iU);if(0!=(6&iv))throw Error(a(327));A=y.finishedWork;var F=y.finishedLanes;if(null!==A){if(y.finishedWork=null,y.finishedLanes=0,A===y.current)throw Error(a(177));y.callbackNode=null,y.callbackPriority=0;var U=A.lanes|A.childLanes;if(function(y,T){var A=y.pendingLanes&~T;y.pendingLanes=T,y.suspendedLanes=0,y.pingedLanes=0,y.expiredLanes&=T,y.mutableReadLanes&=T,y.entangledLanes&=T,T=y.entanglements;var B=y.eventTimes;for(y=y.expirationTimes;0<A;){var F=31-tW(A),U=1<<F;T[F]=0,B[F]=-1,y[F]=-1,A&=~U}}(y,U),y===iy&&(ix=iy=null,ib=0),0==(2064&A.subtreeFlags)&&0==(2064&A.flags)||ik||(ik=!0,tJ(t6,function(){return Ji(),null})),U=0!=(15990&A.flags),0!=(15990&A.subtreeFlags)||U){U=i_.transition,i_.transition=null;var X,Y=tQ;tQ=1;var K=iv;iv|=4,ig.current=null,function(y,T){for(ey(y.containerInfo),r7=T;null!==r7;)if(T=(y=r7).child,0!=(1028&y.subtreeFlags)&&null!==T)T.return=y,r7=T;else for(;null!==r7;){y=r7;try{var A=y.alternate;if(0!=(1024&y.flags))switch(y.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==A){var B=A.memoizedProps,F=A.memoizedState,U=y.stateNode,X=U.getSnapshotBeforeUpdate(y.elementType===y.type?B:Tt(y.type,B),F);U.__reactInternalSnapshotBeforeUpdate=X}break;case 3:eO&&ts(y.stateNode.containerInfo);break;default:throw Error(a(163))}}catch(T){eo(y,y.return,T)}if(null!==(T=y.sibling)){T.return=y.return,r7=T;break}r7=y.return}A=r9,r9=!1}(y,A),La(A,y),ex(y.containerInfo),y.current=A,r7=X=A,function Ua(y,T,A){for(var B=0!=(1&y.mode);null!==r7;){var F=r7,U=F.child;if(22===F.tag&&B){var X=null!==F.memoizedState||r6;if(!X){var Y=F.alternate,K=null!==Y&&null!==Y.memoizedState||r5;Y=r6;var q=r5;if(r6=X,(r5=K)&&!q)for(r7=F;null!==r7;)K=(X=r7).child,22===X.tag&&null!==X.memoizedState?Qa(F):null!==K?(K.return=X,r7=K):Qa(F);for(;null!==U;)r7=U,Ua(U),U=U.sibling;r7=F,r6=Y,r5=q}Fa(y)}else 0!=(8772&F.subtreeFlags)&&null!==U?(U.return=F,r7=U):Fa(y)}}(X),t1(),iv=K,tQ=Y,i_.transition=U}else y.current=A;if(ik&&(ik=!1,iU=y,iG=F),U=y.pendingLanes,0===U&&(iL=null),function(y){if(t7&&"function"==typeof t7.onCommitFiberRoot)try{t7.onCommitFiberRoot(t8,y,void 0,128==(128&y.current.flags))}catch(y){}}(A.stateNode),ji(y,t2()),null!==T)for(B=y.onRecoverableError,A=0;A<T.length;A++)F=T[A],B(F.value,{componentStack:F.stack,digest:F.digest});if(iB)throw iB=!1,y=iF,iF=null,y;0!=(1&iG)&&0!==y.tag&&Ji(),U=y.pendingLanes,0!=(1&U)?y===iz?iX++:(iX=0,iz=y):iX=0,et()}}(y,T,A,B)}finally{i_.transition=F,tQ=B}return null}function Ji(){if(null!==iU){var y=Dn(iG),T=i_.transition,A=tQ;try{if(i_.transition=null,tQ=16>y?16:y,null===iU)var B=!1;else{if(y=iU,iU=null,iG=0,0!=(6&iv))throw Error(a(331));var F=iv;for(iv|=4,r7=y.current;null!==r7;){var U=r7,X=U.child;if(0!=(16&r7.flags)){var Y=U.deletions;if(null!==Y){for(var K=0;K<Y.length;K++){var q=Y[K];for(r7=q;null!==r7;){var Q=r7;switch(Q.tag){case 0:case 11:case 15:xa(8,Q,U)}var J=Q.child;if(null!==J)J.return=Q,r7=J;else for(;null!==r7;){var Z=(Q=r7).sibling,ei=Q.return;if(function Pa(y){var T=y.alternate;null!==T&&(y.alternate=null,Pa(T)),y.child=null,y.deletions=null,y.sibling=null,5===y.tag&&null!==(T=y.stateNode)&&ez(T),y.stateNode=null,y.return=null,y.dependencies=null,y.memoizedProps=null,y.memoizedState=null,y.pendingProps=null,y.stateNode=null,y.updateQueue=null}(Q),Q===q){r7=null;break}if(null!==Z){Z.return=ei,r7=Z;break}r7=ei}}}var es=U.alternate;if(null!==es){var eh=es.child;if(null!==eh){es.child=null;do{var eu=eh.sibling;eh.sibling=null,eh=eu}while(null!==eh)}}r7=U}}if(0!=(2064&U.subtreeFlags)&&null!==X)X.return=U,r7=X;else for(;null!==r7;){if(0!=(2048&(U=r7).flags))switch(U.tag){case 0:case 11:case 15:xa(9,U,U.return)}var ed=U.sibling;if(null!==ed){ed.return=U.return,r7=ed;break}r7=U.return}}var ec=y.current;for(r7=ec;null!==r7;){var ef=(X=r7).child;if(0!=(2064&X.subtreeFlags)&&null!==ef)ef.return=X,r7=ef;else for(X=ec;null!==r7;){if(0!=(2048&(Y=r7).flags))try{switch(Y.tag){case 0:case 11:case 15:wa(9,Y)}}catch(y){eo(Y,Y.return,y)}if(Y===X){r7=null;break}var ep=Y.sibling;if(null!==ep){ep.return=Y.return,r7=ep;break}r7=Y.return}}if(iv=F,et(),t7&&"function"==typeof t7.onPostCommitFiberRoot)try{t7.onPostCommitFiberRoot(t8,y)}catch(y){}B=!0}return B}finally{tQ=A,i_.transition=T}}return!1}function Zi(y,T,A){y=Yt(y,T=Nl(0,T=El(A,T),1),1),T=Ti(),null!==y&&(jn(y,1,T),ji(y,T))}function eo(y,T,A){if(3===y.tag)Zi(y,y,A);else for(;null!==T;){if(3===T.tag){Zi(T,y,A);break}if(1===T.tag){var B=T.stateNode;if("function"==typeof T.type.getDerivedStateFromError||"function"==typeof B.componentDidCatch&&(null===iL||!iL.has(B))){T=Yt(T,y=Il(T,y=El(A,y),1),1),y=Ti(),null!==T&&(jn(T,1,y),ji(T,y));break}}T=T.return}}function no(y,T,A){var B=y.pingCache;null!==B&&B.delete(T),T=Ti(),y.pingedLanes|=y.suspendedLanes&A,iy===y&&(ib&A)===A&&(4===iS||3===iS&&(130023424&ib)===ib&&500>t2()-iC?Hi(y,0):iI|=A),ji(y,T)}function to(y,T){0===T&&(0==(1&y.mode)?T=1:(T=tq,0==(130023424&(tq<<=1))&&(tq=4194304)));var A=Ti();null!==(y=$t(y,T))&&(jn(y,T,A),ji(y,A))}function ro(y){var T=y.memoizedState,A=0;null!==T&&(A=T.retryLane),to(y,A)}function lo(y,T){var A=0;switch(y.tag){case 13:var B=y.stateNode,F=y.memoizedState;null!==F&&(A=F.retryLane);break;case 19:B=y.stateNode;break;default:throw Error(a(314))}null!==B&&B.delete(T),to(y,A)}function io(y,T,A,B){this.tag=y,this.key=A,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=T,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=B,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function oo(y,T,A,B){return new io(y,T,A,B)}function uo(y){return!(!(y=y.prototype)||!y.isReactComponent)}function so(y,T){var A=y.alternate;return null===A?((A=oo(y.tag,T,y.key,y.mode)).elementType=y.elementType,A.type=y.type,A.stateNode=y.stateNode,A.alternate=y,y.alternate=A):(A.pendingProps=T,A.type=y.type,A.flags=0,A.subtreeFlags=0,A.deletions=null),A.flags=14680064&y.flags,A.childLanes=y.childLanes,A.lanes=y.lanes,A.child=y.child,A.memoizedProps=y.memoizedProps,A.memoizedState=y.memoizedState,A.updateQueue=y.updateQueue,T=y.dependencies,A.dependencies=null===T?null:{lanes:T.lanes,firstContext:T.firstContext},A.sibling=y.sibling,A.index=y.index,A.ref=y.ref,A}function co(y,T,A,B,F,U){var X=2;if(B=y,"function"==typeof y)uo(y)&&(X=1);else if("string"==typeof y)X=5;else e:switch(y){case Y:return fo(A.children,F,U,T);case K:X=8,F|=8;break;case q:return(y=oo(12,A,T,2|F)).elementType=q,y.lanes=U,y;case ei:return(y=oo(13,A,T,F)).elementType=ei,y.lanes=U,y;case es:return(y=oo(19,A,T,F)).elementType=es,y.lanes=U,y;case ec:return po(A,F,U,T);default:if("object"==typeof y&&null!==y)switch(y.$$typeof){case Q:X=10;break e;case J:X=9;break e;case Z:X=11;break e;case eu:X=14;break e;case ed:X=16,B=null;break e}throw Error(a(130,null==y?y:typeof y,""))}return(T=oo(X,A,T,F)).elementType=y,T.type=B,T.lanes=U,T}function fo(y,T,A,B){return(y=oo(7,y,B,T)).lanes=A,y}function po(y,T,A,B){return(y=oo(22,y,B,T)).elementType=ec,y.lanes=A,y.stateNode={isHidden:!1},y}function mo(y,T,A){return(y=oo(6,y,null,T)).lanes=A,y}function ho(y,T,A){return(T=oo(4,null!==y.children?y.children:[],y.key,T)).lanes=A,T.stateNode={containerInfo:y.containerInfo,pendingChildren:null,implementation:y.implementation},T}function go(y,T,A,B,F){this.tag=T,this.containerInfo=y,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=eP,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=On(0),this.expirationTimes=On(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=On(0),this.identifierPrefix=B,this.onRecoverableError=F,eB&&(this.mutableSourceEagerHydrationData=null)}function vo(y,T,A,B,F,U,X,Y,K){return y=new go(y,T,A,Y,K),1===T?(T=1,!0===U&&(T|=8)):T=0,U=oo(3,null,null,T),y.current=U,U.stateNode=y,U.memoizedState={element:B,isDehydrated:A,cache:null,transitions:null,pendingSuspenseBoundaries:null},Xt(U),y}function yo(y){if(!y)return tz;e:{if(E(y=y._reactInternals)!==y||1!==y.tag)throw Error(a(170));var T=y;do{switch(T.tag){case 3:T=T.stateNode.context;break e;case 1:if(vn(T.type)){T=T.stateNode.__reactInternalMemoizedMergedChildContext;break e}}T=T.return}while(null!==T);throw Error(a(171))}if(1===y.tag){var A=y.type;if(vn(A))return Sn(y,A,T)}return T}function bo(y){var T=y._reactInternals;if(void 0===T){if("function"==typeof y.render)throw Error(a(188));throw Error(a(268,y=Object.keys(y).join(",")))}return null===(y=z(T))?null:y.stateNode}function So(y,T){if(null!==(y=y.memoizedState)&&null!==y.dehydrated){var A=y.retryLane;y.retryLane=0!==A&&A<T?A:T}}function xo(y,T){So(y,T),(y=y.alternate)&&So(y,T)}function wo(y){return null===(y=z(y))?null:y.stateNode}function ko(){return null}return iN=function(y,T,A){if(null!==y){if(y.memoizedProps!==T.pendingProps||tj.current)rZ=!0;else{if(0==(y.lanes&A)&&0==(128&T.flags))return rZ=!1,function(y,T,A){switch(T.tag){case 3:$l(T),_t();break;case 5:xr(T);break;case 1:vn(T.type)&&xn(T);break;case 4:br(T,T.stateNode.containerInfo);break;case 10:Dt(0,T.type._context,T.memoizedProps.value);break;case 13:var B=T.memoizedState;if(null!==B)return null!==B.dehydrated?(fn(rB,1&rB.current),T.flags|=128,null):0!=(A&T.child.childLanes)?Zl(y,T,A):(fn(rB,1&rB.current),null!==(y=ia(y,T,A))?y.sibling:null);fn(rB,1&rB.current);break;case 19:if(B=0!=(A&T.childLanes),0!=(128&y.flags)){if(B)return la(y,T,A);T.flags|=128}var F=T.memoizedState;if(null!==F&&(F.rendering=null,F.tail=null,F.lastEffect=null),fn(rB,rB.current),B)break;return null;case 22:case 23:return T.lanes=0,Al(y,T,A)}return ia(y,T,A)}(y,T,A);rZ=0!=(131072&y.flags)}}else rZ=!1,r_&&0!=(1048576&T.flags)&&ft(T,rh,T.index);switch(T.lanes=0,T.tag){case 2:var B=T.type;aa(y,T),y=T.pendingProps;var F=gn(T,tH.current);At(T,A),F=Fr(null,T,B,y,F,A);var U=Ar();return T.flags|=1,"object"==typeof F&&null!==F&&"function"==typeof F.render&&void 0===F.$$typeof?(T.tag=1,T.memoizedState=null,T.updateQueue=null,vn(B)?(U=!0,xn(T)):U=!1,T.memoizedState=null!==F.state&&void 0!==F.state?F.state:null,Xt(T),F.updater=rI,T.stateNode=F,F._reactInternals=T,or(T,B,y,A),T=Wl(null,T,B,!0,U,A)):(T.tag=0,r_&&U&&dt(T),Ml(null,T,F,A),T=T.child),T;case 16:B=T.elementType;e:{switch(aa(y,T),y=T.pendingProps,B=(F=B._init)(B._payload),T.type=B,F=T.tag=function(y){if("function"==typeof y)return uo(y)?1:0;if(null!=y){if((y=y.$$typeof)===Z)return 11;if(y===eu)return 14}return 2}(B),y=Tt(B,y),F){case 0:T=Hl(null,T,B,y,A);break e;case 1:T=Bl(null,T,B,y,A);break e;case 11:T=Dl(null,T,B,y,A);break e;case 14:T=Ul(null,T,B,Tt(B.type,y),A);break e}throw Error(a(306,B,""))}return T;case 0:return B=T.type,F=T.pendingProps,Hl(y,T,B,F=T.elementType===B?F:Tt(B,F),A);case 1:return B=T.type,F=T.pendingProps,Bl(y,T,B,F=T.elementType===B?F:Tt(B,F),A);case 3:e:{if($l(T),null===y)throw Error(a(387));B=T.pendingProps,F=(U=T.memoizedState).element,qt(y,T),Zt(T,B,null,A);var X=T.memoizedState;if(B=X.element,eB&&U.isDehydrated){if(U={element:B,isDehydrated:!1,cache:X.cache,pendingSuspenseBoundaries:X.pendingSuspenseBoundaries,transitions:X.transitions},T.updateQueue.baseState=U,T.memoizedState=U,256&T.flags){T=Vl(y,T,B,A,F=El(Error(a(423)),T));break e}if(B!==F){T=Vl(y,T,B,A,F=El(Error(a(424)),T));break e}for(eB&&(rg=tA(T.stateNode.containerInfo),rm=T,r_=!0,ry=null,rv=!1),A=rM(T,null,B,A),T.child=A;A;)A.flags=-3&A.flags|4096,A=A.sibling}else{if(_t(),B===F){T=ia(y,T,A);break e}Ml(y,T,B,A)}T=T.child}return T;case 5:return xr(T),null===y&&wt(T),B=T.type,F=T.pendingProps,U=null!==y?y.memoizedProps:null,X=F.children,eA(B,F)?X=null:null!==U&&eA(B,U)&&(T.flags|=32),Ql(y,T),Ml(y,T,X,A),T.child;case 6:return null===y&&wt(T),null;case 13:return Zl(y,T,A);case 4:return br(T,T.stateNode.containerInfo),B=T.pendingProps,null===y?T.child=rP(T,null,B,A):Ml(y,T,B,A),T.child;case 11:return B=T.type,F=T.pendingProps,Dl(y,T,B,F=T.elementType===B?F:Tt(B,F),A);case 7:return Ml(y,T,T.pendingProps,A),T.child;case 8:case 12:return Ml(y,T,T.pendingProps.children,A),T.child;case 10:e:{if(B=T.type._context,F=T.pendingProps,U=T.memoizedProps,Dt(0,B,X=F.value),null!==U){if(t9(U.value,X)){if(U.children===F.children&&!tj.current){T=ia(y,T,A);break e}}else for(null!==(U=T.child)&&(U.return=T);null!==U;){var Y=U.dependencies;if(null!==Y){X=U.child;for(var K=Y.firstContext;null!==K;){if(K.context===B){if(1===U.tag){(K=Gt(-1,A&-A)).tag=2;var q=U.updateQueue;if(null!==q){var Q=(q=q.shared).pending;null===Q?K.next=K:(K.next=Q.next,Q.next=K),q.pending=K}}U.lanes|=A,null!==(K=U.alternate)&&(K.lanes|=A),Ft(U.return,A,T),Y.lanes|=A;break}K=K.next}}else if(10===U.tag)X=U.type===T.type?null:U.child;else if(18===U.tag){if(null===(X=U.return))throw Error(a(341));X.lanes|=A,null!==(Y=X.alternate)&&(Y.lanes|=A),Ft(X,A,T),X=U.sibling}else X=U.child;if(null!==X)X.return=U;else for(X=U;null!==X;){if(X===T){X=null;break}if(null!==(U=X.sibling)){U.return=X.return,X=U;break}X=X.return}U=X}}Ml(y,T,F.children,A),T=T.child}return T;case 9:return F=T.type,B=T.pendingProps.children,At(T,A),B=B(F=Qt(F)),T.flags|=1,Ml(y,T,B,A),T.child;case 14:return F=Tt(B=T.type,T.pendingProps),Ul(y,T,B,F=Tt(B.type,F),A);case 15:return Fl(y,T,T.type,T.pendingProps,A);case 17:return B=T.type,F=T.pendingProps,F=T.elementType===B?F:Tt(B,F),aa(y,T),T.tag=1,vn(B)?(y=!0,xn(T)):y=!1,At(T,A),ar(T,B,F),or(T,B,F,A),Wl(null,T,B,!0,y,A);case 19:return la(y,T,A);case 22:return Al(y,T,A)}throw Error(a(156,T.tag))},T.attemptContinuousHydration=function(y){if(13===y.tag){var T=$t(y,134217728);null!==T&&Oi(T,y,134217728,Ti()),xo(y,134217728)}},T.attemptDiscreteHydration=function(y){if(13===y.tag){var T=$t(y,1);null!==T&&Oi(T,y,1,Ti()),xo(y,1)}},T.attemptHydrationAtCurrentPriority=function(y){if(13===y.tag){var T=Ri(y),A=$t(y,T);null!==A&&Oi(A,y,T,Ti()),xo(y,T)}},T.attemptSynchronousHydration=function(y){switch(y.tag){case 3:var T=y.stateNode;if(T.current.memoizedState.isDehydrated){var A=zn(T.pendingLanes);0!==A&&(Ln(T,1|A),ji(T,t2()),0==(6&iv)&&(bi(),et()))}break;case 13:Ai(function(){var T=$t(y,1);null!==T&&Oi(T,y,1,Ti())}),xo(y,1)}},T.batchedUpdates=function(y,T){var A=iv;iv|=1;try{return y(T)}finally{0===(iv=A)&&(bi(),rt&&et())}},T.createComponentSelector=function(y){return{$$typeof:ii,value:y}},T.createContainer=function(y,T,A,B,F,U,X){return vo(y,T,!1,null,0,B,0,U,X)},T.createHasPseudoClassSelector=function(y){return{$$typeof:is,value:y}},T.createHydrationContainer=function(y,T,A,B,F,U,X,Y,K){return(y=vo(A,B,!0,y,0,U,0,Y,K)).context=yo(null),A=y.current,(U=Gt(B=Ti(),F=Ri(A))).callback=null!=T?T:null,Yt(A,U,F),y.current.lanes=F,jn(y,F,B),ji(y,B),y},T.createPortal=function(y,T,A){var B=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:X,key:null==B?null:""+B,children:y,containerInfo:T,implementation:A}},T.createRoleSelector=function(y){return{$$typeof:ih,value:y}},T.createTestNameSelector=function(y){return{$$typeof:iu,value:y}},T.createTextSelector=function(y){return{$$typeof:id,value:y}},T.deferredUpdates=function(y){var T=tQ,A=i_.transition;try{return i_.transition=null,tQ=16,y()}finally{tQ=T,i_.transition=A}},T.discreteUpdates=function(y,T,A,B,F){var U=tQ,X=i_.transition;try{return i_.transition=null,tQ=1,y(T,A,B,F)}finally{tQ=U,i_.transition=X,0===iv&&bi()}},T.findAllNodes=Ja,T.findBoundingRects=function(y,T){if(!eV)throw Error(a(363));T=Ja(y,T),y=[];for(var A=0;A<T.length;A++)y.push(e$(T[A]));for(T=y.length-1;0<T;T--)for(var B=(A=y[T]).x,F=B+A.width,U=A.y,X=U+A.height,Y=T-1;0<=Y;Y--)if(T!==Y){var K=y[Y],q=K.x,Q=q+K.width,J=K.y,Z=J+K.height;if(B>=q&&U>=J&&F<=Q&&X<=Z){y.splice(T,1);break}if(!(B!==q||A.width!==K.width||Z<U||J>X)){J>U&&(K.height+=J-U,K.y=U),Z<X&&(K.height=X-J),y.splice(T,1);break}if(!(U!==J||A.height!==K.height||Q<B||q>F)){q>B&&(K.width+=q-B,K.x=B),Q<F&&(K.width=F-q),y.splice(T,1);break}}return y},T.findHostInstance=bo,T.findHostInstanceWithNoPortals=function(y){return null===(y=null!==(y=C(y))?function I(y){if(5===y.tag||6===y.tag)return y;for(y=y.child;null!==y;){if(4!==y.tag){var T=I(y);if(null!==T)return T}y=y.sibling}return null}(y):null)?null:y.stateNode},T.findHostInstanceWithWarning=function(y){return bo(y)},T.flushControlled=function(y){var T=iv;iv|=1;var A=i_.transition,B=tQ;try{i_.transition=null,tQ=1,y()}finally{tQ=B,i_.transition=A,0===(iv=T)&&(bi(),et())}},T.flushPassiveEffects=Ji,T.flushSync=Ai,T.focusWithin=function(y,T){if(!eV)throw Error(a(363));for(T=Array.from(T=Ka(y=qa(y),T)),y=0;y<T.length;){var A=T[y++];if(!eK(A)){if(5===A.tag&&eQ(A.stateNode))return!0;for(A=A.child;null!==A;)T.push(A),A=A.sibling}}return!1},T.getCurrentUpdatePriority=function(){return tQ},T.getFindAllNodesFailureDescription=function(y,T){if(!eV)throw Error(a(363));var A=0,B=[];y=[qa(y),0];for(var F=0;F<y.length;){var U=y[F++],X=y[F++],Y=T[X];if((5!==U.tag||!eK(U))&&(Ga(U,Y)&&(B.push(Ya(Y)),++X>A&&(A=X)),X<T.length))for(U=U.child;null!==U;)y.push(U,X),U=U.sibling}if(A<T.length){for(y=[];A<T.length;A++)y.push(Ya(T[A]));return"findAllNodes was able to match part of the selector:\n  "+B.join(" > ")+"\n\nNo matching component was found for:\n  "+y.join(" > ")}return null},T.getPublicRootInstance=function(y){return(y=y.current).child?5===y.child.tag?eg(y.child.stateNode):y.child.stateNode:null},T.injectIntoDevTools=function(y){if(y={bundleType:y.bundleType,version:y.version,rendererPackageName:y.rendererPackageName,rendererConfig:y.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:F.ReactCurrentDispatcher,findHostInstanceByFiber:wo,findFiberByHostInstance:y.findFiberByHostInstance||ko,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0"},"undefined"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__)y=!1;else{var T=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(T.isDisabled||!T.supportsFiber)y=!0;else{try{t8=T.inject(y),t7=T}catch(y){}y=!!T.checkDCE}}return y},T.isAlreadyRendering=function(){return!1},T.observeVisibleRects=function(y,T,A,B){if(!eV)throw Error(a(363));var F=eJ(y=Ja(y,T),A,B).disconnect;return{disconnect:function(){F()}}},T.registerMutableSourceForHydration=function(y,T){var A=T._getVersion;A=A(T._source),null==y.mutableSourceEagerHydrationData?y.mutableSourceEagerHydrationData=[T,A]:y.mutableSourceEagerHydrationData.push(T,A)},T.runWithPriority=function(y,T){var A=tQ;try{return tQ=y,T()}finally{tQ=A}},T.shouldError=function(){return null},T.shouldSuspend=function(){return!1},T.updateContainer=function(y,T,A,B){var F=T.current,U=Ti(),X=Ri(F);return A=yo(A),null===T.context?T.context=A:T.pendingContext=A,(T=Gt(U,X)).payload={element:y},null!==(B=void 0===B?null:B)&&(T.callback=B),null!==(y=Yt(F,T,X))&&(Oi(y,F,X,U),Kt(y,F,X)),X},T}),eO);var ez=(eW=ek)&&eW.__esModule&&Object.prototype.hasOwnProperty.call(eW,"default")?eW.default:eW,eH={name:"root",dependencies:{"@babel/runtime":"^7.14.8","@pixi/app":"^7.1.1","@pixi/constants":"^7.1.1","@pixi/core":"^7.1.1","@pixi/display":"^7.1.1","@pixi/extensions":"^7.1.1","@pixi/graphics":"^7.1.1","@pixi/math":"^7.1.1","@pixi/mesh":"^7.1.1","@pixi/mesh-extras":"^7.1.1","@pixi/particle-container":"^7.1.1","@pixi/sprite":"^7.1.1","@pixi/sprite-animated":"^7.1.1","@pixi/sprite-tiling":"^7.1.1","@pixi/text":"^7.1.1","@pixi/text-bitmap":"^7.1.1","@pixi/ticker":"^7.1.1","@react-spring/animated":"^9.6.1","@react-spring/types":"^9.6.1",react:"^18.0.0","react-dom":"^18.0.0","react-reconciler":"0.29.0","react-spring":"^9.6.1"}},ej={},eV={get exports(){return ej},set exports(e){ej=e}};(function(){var y,T,A,B;"undefined"!=typeof performance&&null!==performance&&performance.now?eV.exports=function(){return performance.now()}:null!=ep&&ep.hrtime?(eV.exports=function(){return(y()-B)/1e6},T=ep.hrtime,B=(y=function(){var y;return 1e9*(y=T())[0]+y[1]})()-1e9*ep.uptime()):Date.now?(eV.exports=function(){return Date.now()-A},A=Date.now()):(eV.exports=function(){return(new Date).getTime()-A},A=(new Date).getTime())}).call(em);var eW,e$,eY={},eK={};({get exports(){return eY},set exports(e){eY=e}}).exports=(e$||(e$=1,eK.ConcurrentRoot=1,eK.ContinuousEventPriority=4,eK.DefaultEventPriority=16,eK.DiscreteEventPriority=1,eK.IdleEventPriority=536870912,eK.LegacyRoot=0),eK);var eq={};function Fe(y,T){y.addChild&&(y.addChild(T),"function"==typeof T.didMount&&T.didMount(T,y))}function Qe(y,T){(function Ae(y,T){var A,B,F;null===(A=y.willUnmount)||void 0===A||A.call(y,y,T),!1!==(null===(B=y.config)||void 0===B?void 0:B.destroyChildren)&&null!==(F=y.children)&&void 0!==F&&F.length&&z(y.children).forEach(function(T){Ae(T,y)})})(T,y),y.removeChild(T);var A,B=null!==(A=T.config)&&void 0!==A?A:{},F=B.destroy,U=B.destroyChildren,X=B.destroyTexture,Y=B.destroyBaseTexture;(void 0===F||F)&&T.destroy({children:void 0===U||U,texture:void 0!==X&&X,baseTexture:void 0!==Y&&Y})}function He(y,T,A){N(T!==A,"pixi-react: PixiFiber cannot insert node before itself"),-1!==y.children.indexOf(T)&&y.removeChild(T);var B=y.getChildIndex(A);y.addChildAt(T,B)}var eQ=null,eJ=ez({getRootHostContext:function(){return eq},getChildHostContext:function(y){return y},getChildHostContextForEventComponent:function(y){return y},getPublicInstance:function(y){return y},getCurrentEventPriority:function(){return function(){var y,T;if("undefined"==typeof window)return eY.DefaultEventPriority;switch(null===(y=window)||void 0===y||null===(T=y.event)||void 0===T?void 0:T.type){case"click":case"contextmenu":case"dblclick":case"pointercancel":case"pointerdown":case"pointerup":return eY.DiscreteEventPriority;case"pointermove":case"pointerout":case"pointerover":case"pointerenter":case"pointerleave":case"wheel":return eY.ContinuousEventPriority;default:return eY.DefaultEventPriority}}()},prepareForCommit:function(){return null},resetAfterCommit:function(){},createInstance:function(y){var T,A,B=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},F=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,U=eF[y];if("function"==typeof U&&(T=U(F,B)),!T){var X=eL[y];X&&((T=X.create(B,{root:F})).didMount=X.didMount?X.didMount.bind(T):void 0,T.willUnmount=X.willUnmount?X.willUnmount.bind(T):void 0,T.applyProps=X.applyProps?X.applyProps.bind(T):void 0,T.config=X.config)}return T&&(T.__reactpixi={root:F},("function"==typeof(null===(A=T)||void 0===A?void 0:A.applyProps)?T.applyProps:V)(T,{},B)),T},hideInstance:function(y){y.visible=!1},unhideInstance:function(y,T){var A=null==T||!T.hasOwnProperty("visible")||T.visible;y.visible=A},finalizeInitialChildren:function(y,T,A){return!1},prepareUpdate:function(y,T,A,B,F,U){return eQ=function(y,T,A,B){var F=null;for(var U in A)!B.hasOwnProperty(U)&&A.hasOwnProperty(U)&&null!==A[U]&&(U===ey||(F||(F=[]),F.push(U,null)));for(var X in B){var Y=B[X],K=null!==A?A[X]:void 0;B.hasOwnProperty(X)&&Y!==K&&(null!==Y||null!==K)&&X!==ey&&(F||(F=[]),F.push(X,Y))}return F}(0,0,A,B)},shouldSetTextContent:function(y,T){return!1},shouldDeprioritizeSubtree:function(y,T){var A=void 0===T.alpha||T.alpha>0,B=void 0===T.renderable||!0===T.renderable,F=void 0===T.visible||!0===T.visible;return!(A&&B&&F)},createTextInstance:function(y,T,A){N(!1,'pixi-react: Error trying to add text node "'.concat(y,'"'),"PixiFiber does not support text nodes as children of a Pixi component. To pass a string value to your component, use a property other than children. If you wish to display some text, you can use &lt;Text text={string} /&gt; instead.")},unhideTextInstance:function(y,T){},mountEventComponent:function(){},updateEventComponent:function(){},handleEventTarget:function(){},scheduleTimeout:setTimeout,cancelTimeout:clearTimeout,noTimeout:-1,warnsIfNotActing:!1,now:ej,isPrimaryRenderer:!1,supportsMutation:!0,supportsPersistence:!1,supportsHydration:!1,supportsMicrotasks:!0,scheduleMicrotask:queueMicrotask,appendInitialChild:function(){for(var y,T,A=arguments.length,B=Array(A),F=0;F<A;F++)B[F]=arguments[F];var U=Fe.apply(null,B);return null===(y=B[0].__reactpixi)||void 0===y||null===(T=y.root)||void 0===T||T.emit("__REACT_PIXI_REQUEST_RENDER__",{detail:"appendInitialChild"}),U},appendChild:function(){for(var y,T,A=arguments.length,B=Array(A),F=0;F<A;F++)B[F]=arguments[F];var U=Fe.apply(null,B);return null===(y=B[0].__reactpixi)||void 0===y||null===(T=y.root)||void 0===T||T.emit("__REACT_PIXI_REQUEST_RENDER__",{detail:"appendChild"}),U},appendChildToContainer:function(){for(var y,T,A=arguments.length,B=Array(A),F=0;F<A;F++)B[F]=arguments[F];var U=Fe.apply(null,B);return null===(y=B[0].__reactpixi)||void 0===y||null===(T=y.root)||void 0===T||T.emit("__REACT_PIXI_REQUEST_RENDER__",{detail:"appendChildToContainer"}),U},removeChild:function(){for(var y,T,A=arguments.length,B=Array(A),F=0;F<A;F++)B[F]=arguments[F];var U=Qe.apply(null,B);return null===(y=B[0].__reactpixi)||void 0===y||null===(T=y.root)||void 0===T||T.emit("__REACT_PIXI_REQUEST_RENDER__",{detail:"removeChild"}),U},removeChildFromContainer:function(){for(var y,T,A=arguments.length,B=Array(A),F=0;F<A;F++)B[F]=arguments[F];var U=Qe.apply(null,B);return null===(y=B[0].__reactpixi)||void 0===y||null===(T=y.root)||void 0===T||T.emit("__REACT_PIXI_REQUEST_RENDER__",{detail:"removeChildFromContainer"}),U},insertBefore:He,insertInContainerBefore:function(){for(var y,T,A=arguments.length,B=Array(A),F=0;F<A;F++)B[F]=arguments[F];var U=He.apply(null,B);return null===(y=B[0].__reactpixi)||void 0===y||null===(T=y.root)||void 0===T||T.emit("__REACT_PIXI_REQUEST_RENDER__",{detail:"insertInContainerBefore"}),U},commitUpdate:function(y,T,A,B,F){var U,X,Y=y&&y.applyProps;"function"!=typeof Y&&(Y=V),(Y(y,B,F)||eQ)&&(null===(U=y.__reactpixi)||void 0===U||null===(X=U.root)||void 0===X||X.emit("__REACT_PIXI_REQUEST_RENDER__",{detail:"commitUpdate"}))},commitMount:function(y,T,A,B,F){},commitTextUpdate:function(y,T,A){},resetTextContent:function(y){},clearContainer:function(y){},getFundamentalComponentInstance:function(y){throw Error("Not yet implemented.")},mountFundamentalComponent:function(y){throw Error("Not yet implemented.")},shouldUpdateFundamentalComponent:function(y){throw Error("Not yet implemented.")},unmountFundamentalComponent:function(y){throw Error("Not yet implemented.")},getInstanceFromNode:function(y){throw Error("Not yet implemented.")},isOpaqueHydratingObject:function(y){throw Error("Not yet implemented")},makeOpaqueHydratingObject:function(y){throw Error("Not yet implemented.")},makeClientIdInDEV:function(y){throw Error("Not yet implemented")},beforeActiveInstanceBlur:function(y){},afterActiveInstanceBlur:function(){},detachDeletedInstance:function(){},preparePortalMount:function(y){}}),eZ=eH.dependencies["react-dom"].replace(/[^0-9.]/g,""),e0=eH.name;function Je(){return(Je=Object.assign?Object.assign.bind():function(y){for(var T=1;T<arguments.length;T++){var A=arguments[T];for(var B in A)Object.prototype.hasOwnProperty.call(A,B)&&(y[B]=A[B])}return y}).apply(this,arguments)}function en(y,T){for(var A=0;A<T.length;A++){var B=T[A];B.enumerable=B.enumerable||!1,B.configurable=!0,"value"in B&&(B.writable=!0),Object.defineProperty(y,E(B.key),B)}}function nn(y){if(void 0===y)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return y}function tn(y,T){return(tn=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(y,T){return y.__proto__=T,y})(y,T)}function ln(y){return(ln=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(y){return y.__proto__||Object.getPrototypeOf(y)})(y)}eJ.injectIntoDevTools({bundleType:0,version:eZ,rendererPackageName:e0,findHostInstanceByFiber:eJ.findHostInstance});var e1=eh.createContext(null),e2=e1.Provider;function fn(y,T){var A=Object.keys(y);if(Object.getOwnPropertySymbols){var B=Object.getOwnPropertySymbols(y);T&&(B=B.filter(function(T){return Object.getOwnPropertyDescriptor(y,T).enumerable})),A.push.apply(A,B)}return A}function dn(y){for(var T=1;T<arguments.length;T++){var A=null!=arguments[T]?arguments[T]:{};T%2?fn(Object(A),!0).forEach(function(T){_(y,T,A[T])}):Object.getOwnPropertyDescriptors?Object.defineProperties(y,Object.getOwnPropertyDescriptors(A)):fn(Object(A)).forEach(function(T){Object.defineProperty(y,T,Object.getOwnPropertyDescriptor(A,T))})}return y}e1.Consumer;var pn=function(){},e3={width:ef().number,height:ef().number,onMount:ef().func,onUnmount:ef().func,raf:ef().bool,renderOnComponentChange:ef().bool,children:ef().node,options:ef().shape({autoStart:ef().bool,width:ef().number,height:ef().number,useContextAlpha:ef().bool,backgroundAlpha:ef().number,autoDensity:ef().bool,antialias:ef().bool,preserveDrawingBuffer:ef().bool,resolution:ef().number,forceCanvas:ef().bool,backgroundColor:ef().number,clearBeforeRender:ef().bool,powerPreference:ef().string,sharedTicker:ef().bool,sharedLoader:ef().bool,resizeTo:function(y,T){var A=y[T];A&&N(A===window||A instanceof HTMLElement,"Invalid prop `resizeTo` of type ".concat(P(A),", expect `window` or an `HTMLElement`."))},view:function(y,T,A){var B=y[T];B&&N(B instanceof HTMLCanvasElement,"Invalid prop `view` of type ".concat(P(B),", supplied to ").concat(A,", expected `<canvas> Element`"))}})},e4=function(y){!function(y,T){if("function"!=typeof T&&null!==T)throw TypeError("Super expression must either be null or a function");y.prototype=Object.create(T&&T.prototype,{constructor:{value:y,writable:!0,configurable:!0}}),Object.defineProperty(y,"prototype",{writable:!1}),T&&tn(y,T)}(a,eh.Component);var T,A,B,F=(T=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(y){return!1}}(),function(){var y,A=ln(a);if(T){var B=ln(this).constructor;y=Reflect.construct(A,arguments,B)}else y=A.apply(this,arguments);return function(y,T){if(T&&("object"===P(T)||"function"==typeof T))return T;if(void 0!==T)throw TypeError("Derived constructors may only return object or undefined");return nn(y)}(this,y)});function a(){var y;!function(y,T){if(!(y instanceof T))throw TypeError("Cannot call a class as a function")}(this,a);for(var T=arguments.length,A=Array(T),B=0;B<T;B++)A[B]=arguments[B];return _(nn(y=F.call.apply(F,[this].concat(A))),"_canvas",null),_(nn(y),"_mediaQuery",null),_(nn(y),"_ticker",null),_(nn(y),"_needsUpdate",!0),_(nn(y),"app",null),_(nn(y),"updateSize",function(){var T=y.props,A=T.width,B=T.height,F=T.options;null!=F&&F.resolution||(y.app.renderer.resolution=window.devicePixelRatio,y.resetInteractionManager()),y.app.renderer.resize(A,B)}),_(nn(y),"needsRenderUpdate",function(){y._needsUpdate=!0}),_(nn(y),"renderStage",function(){var T=y.props,A=T.renderOnComponentChange;!T.raf&&A&&y._needsUpdate&&(y._needsUpdate=!1,y.app.renderer.render(y.app.stage))}),y}return A=[{key:"componentDidMount",value:function(){var y=this.props,T=y.onMount,A=y.width,B=y.height,F=y.options,U=y.raf,X=y.renderOnComponentChange;this.app=new eu.M(dn(dn({width:A,height:B,view:this._canvas},F),{},{autoDensity:!1!==(null==F?void 0:F.autoDensity)})),this.app.ticker.autoStart=!1,this.app.ticker[U?"start":"stop"](),this.app.stage.__reactpixi={root:this.app.stage},this.mountNode=eJ.createContainer(this.app.stage),eJ.updateContainer(this.getChildren(),this.mountNode,this),T(this.app),null!=F&&F.autoDensity&&window.matchMedia&&void 0===(null==F?void 0:F.resolution)&&(this._mediaQuery=window.matchMedia("(-webkit-min-device-pixel-ratio: 1.3), (min-resolution: 120dpi)"),this._mediaQuery.addListener(this.updateSize)),X&&!U&&(this._ticker=new ed.vB,this._ticker.autoStart=!0,this._ticker.add(this.renderStage),this.app.stage.on("__REACT_PIXI_REQUEST_RENDER__",this.needsRenderUpdate)),this.updateSize(),this.renderStage()}},{key:"componentDidUpdate",value:function(y,T,A){var B,F=this.props,U=F.width,X=F.height,Y=F.raf,K=F.renderOnComponentChange,q=F.options;void 0!==(null==q?void 0:q.resolution)&&(null==y?void 0:y.options.resolution)!==(null==q?void 0:q.resolution)&&(this.app.renderer.resolution=q.resolution,this.resetInteractionManager()),y.height===X&&y.width===U&&(null===(B=y.options)||void 0===B?void 0:B.resolution)===(null==q?void 0:q.resolution)||this.updateSize(),y.raf!==Y&&this.app.ticker[Y?"start":"stop"](),eJ.updateContainer(this.getChildren(),this.mountNode,this),y.width===U&&y.height===X&&y.raf===Y&&y.renderOnComponentChange===K&&y.options===q||(this._needsUpdate=!0,this.renderStage())}},{key:"resetInteractionManager",value:function(){var y=this.app.renderer.plugins.interaction;null!=y&&y.resolution&&(y.resolution=this.app.renderer.resolution)}},{key:"getChildren",value:function(){var y=this.props.children;return eh.createElement(e2,{value:this.app},y)}},{key:"componentDidCatch",value:function(y,T){console.error("Error occurred in `Stage`."),console.error(y),console.error(T)}},{key:"componentWillUnmount",value:function(){this.props.onUnmount(this.app),this._ticker&&(this._ticker.remove(this.renderStage),this._ticker.destroy()),this.app.stage.off("__REACT_PIXI_REQUEST_RENDER__",this.needsRenderUpdate),eJ.updateContainer(null,this.mountNode,this),this._mediaQuery&&(this._mediaQuery.removeListener(this.updateSize),this._mediaQuery=null),this.app.destroy()}},{key:"render",value:function(){var y,T,A=this,B=this.props.options;return B&&B.view?(N(B.view instanceof HTMLCanvasElement,"options.view needs to be a `HTMLCanvasElement`"),null):eh.createElement("canvas",Je({},(y=this.props,T=[].concat(z(Object.keys(e3)),z(Object.keys(eb))),Object.keys(y).filter(function(y){return!T.includes(y)}).reduce(function(T,A){return dn(dn({},T),{},_({},A,y[A]))},{})),{ref:function(y){return A._canvas=y}}))}}],en(a.prototype,A),B&&en(a,B),Object.defineProperty(a,"prototype",{writable:!1}),a}();e4.propTypes=e3,e4.defaultProps={width:800,height:600,onMount:pn,onUnmount:pn,raf:!0,renderOnComponentChange:!0};var e6=e4;eB.BitmapText;var e5=eB.Container,e8=eB.Graphics,e7=(eB.NineSlicePlane,eB.ParticleContainer,eB.Sprite),e9=(eB.AnimatedSprite,eB.Text);eB.TilingSprite,eB.SimpleMesh,eB.SimpleRope},9187:function(y){"use strict";function earcut(y,T,A){A=A||2;var B,F,U,X,Y,K,q,Q=T&&T.length,J=Q?T[0]*A:y.length,Z=linkedList(y,0,J,A,!0),ei=[];if(!Z||Z.next===Z.prev)return ei;if(Q&&(Z=function(y,T,A,B){var F,U,X,Y,K,q=[];for(F=0,U=T.length;F<U;F++)X=T[F]*B,Y=F<U-1?T[F+1]*B:y.length,(K=linkedList(y,X,Y,B,!1))===K.next&&(K.steiner=!0),q.push(function(y){var T=y,A=y;do(T.x<A.x||T.x===A.x&&T.y<A.y)&&(A=T),T=T.next;while(T!==y);return A}(K));for(q.sort(compareX),F=0;F<q.length;F++)A=function(y,T){var A=function(y,T){var A,B,F,U=T,X=y.x,Y=y.y,K=-1/0;do{if(Y<=U.y&&Y>=U.next.y&&U.next.y!==U.y){var q=U.x+(Y-U.y)*(U.next.x-U.x)/(U.next.y-U.y);if(q<=X&&q>K&&(K=q,F=U.x<U.next.x?U:U.next,q===X))return F}U=U.next}while(U!==T);if(!F)return null;var Q,J=F,Z=F.x,ei=F.y,es=1/0;U=F;do X>=U.x&&U.x>=Z&&X!==U.x&&pointInTriangle(Y<ei?X:K,Y,Z,ei,Y<ei?K:X,Y,U.x,U.y)&&(Q=Math.abs(Y-U.y)/(X-U.x),locallyInside(U,y)&&(Q<es||Q===es&&(U.x>F.x||U.x===F.x&&(A=F,B=U,0>area(A.prev,A,B.prev)&&0>area(B.next,A,A.next))))&&(F=U,es=Q)),U=U.next;while(U!==J);return F}(y,T);if(!A)return T;var B=splitPolygon(A,y);return filterPoints(B,B.next),filterPoints(A,A.next)}(q[F],A);return A}(y,T,Z,A)),y.length>80*A){B=U=y[0],F=X=y[1];for(var es=A;es<J;es+=A)Y=y[es],K=y[es+1],Y<B&&(B=Y),K<F&&(F=K),Y>U&&(U=Y),K>X&&(X=K);q=0!==(q=Math.max(U-B,X-F))?32767/q:0}return function earcutLinked(y,T,A,B,F,U,X){if(y){!X&&U&&function(y,T,A,B){var F=y;do 0===F.z&&(F.z=zOrder(F.x,F.y,T,A,B)),F.prevZ=F.prev,F.nextZ=F.next,F=F.next;while(F!==y);F.prevZ.nextZ=null,F.prevZ=null,function(y){var T,A,B,F,U,X,Y,K,q=1;do{for(A=y,y=null,U=null,X=0;A;){for(X++,B=A,Y=0,T=0;T<q&&(Y++,B=B.nextZ);T++);for(K=q;Y>0||K>0&&B;)0!==Y&&(0===K||!B||A.z<=B.z)?(F=A,A=A.nextZ,Y--):(F=B,B=B.nextZ,K--),U?U.nextZ=F:y=F,F.prevZ=U,U=F;A=B}U.nextZ=null,q*=2}while(X>1)}(F)}(y,B,F,U);for(var Y,K,q=y;y.prev!==y.next;){if(Y=y.prev,K=y.next,U?function(y,T,A,B){var F=y.prev,U=y.next;if(area(F,y,U)>=0)return!1;for(var X=F.x,Y=y.x,K=U.x,q=F.y,Q=y.y,J=U.y,Z=X<Y?X<K?X:K:Y<K?Y:K,ei=q<Q?q<J?q:J:Q<J?Q:J,es=X>Y?X>K?X:K:Y>K?Y:K,eh=q>Q?q>J?q:J:Q>J?Q:J,eu=zOrder(Z,ei,T,A,B),ed=zOrder(es,eh,T,A,B),ec=y.prevZ,ef=y.nextZ;ec&&ec.z>=eu&&ef&&ef.z<=ed;){if(ec.x>=Z&&ec.x<=es&&ec.y>=ei&&ec.y<=eh&&ec!==F&&ec!==U&&pointInTriangle(X,q,Y,Q,K,J,ec.x,ec.y)&&area(ec.prev,ec,ec.next)>=0||(ec=ec.prevZ,ef.x>=Z&&ef.x<=es&&ef.y>=ei&&ef.y<=eh&&ef!==F&&ef!==U&&pointInTriangle(X,q,Y,Q,K,J,ef.x,ef.y)&&area(ef.prev,ef,ef.next)>=0))return!1;ef=ef.nextZ}for(;ec&&ec.z>=eu;){if(ec.x>=Z&&ec.x<=es&&ec.y>=ei&&ec.y<=eh&&ec!==F&&ec!==U&&pointInTriangle(X,q,Y,Q,K,J,ec.x,ec.y)&&area(ec.prev,ec,ec.next)>=0)return!1;ec=ec.prevZ}for(;ef&&ef.z<=ed;){if(ef.x>=Z&&ef.x<=es&&ef.y>=ei&&ef.y<=eh&&ef!==F&&ef!==U&&pointInTriangle(X,q,Y,Q,K,J,ef.x,ef.y)&&area(ef.prev,ef,ef.next)>=0)return!1;ef=ef.nextZ}return!0}(y,B,F,U):function(y){var T=y.prev,A=y.next;if(area(T,y,A)>=0)return!1;for(var B=T.x,F=y.x,U=A.x,X=T.y,Y=y.y,K=A.y,q=B<F?B<U?B:U:F<U?F:U,Q=X<Y?X<K?X:K:Y<K?Y:K,J=B>F?B>U?B:U:F>U?F:U,Z=X>Y?X>K?X:K:Y>K?Y:K,ei=A.next;ei!==T;){if(ei.x>=q&&ei.x<=J&&ei.y>=Q&&ei.y<=Z&&pointInTriangle(B,X,F,Y,U,K,ei.x,ei.y)&&area(ei.prev,ei,ei.next)>=0)return!1;ei=ei.next}return!0}(y)){T.push(Y.i/A|0),T.push(y.i/A|0),T.push(K.i/A|0),removeNode(y),y=K.next,q=K.next;continue}if((y=K)===q){X?1===X?earcutLinked(y=function(y,T,A){var B=y;do{var F=B.prev,U=B.next.next;!equals(F,U)&&intersects(F,B,B.next,U)&&locallyInside(F,U)&&locallyInside(U,F)&&(T.push(F.i/A|0),T.push(B.i/A|0),T.push(U.i/A|0),removeNode(B),removeNode(B.next),B=y=U),B=B.next}while(B!==y);return filterPoints(B)}(filterPoints(y),T,A),T,A,B,F,U,2):2===X&&function(y,T,A,B,F,U){var X=y;do{for(var Y,K,q=X.next.next;q!==X.prev;){if(X.i!==q.i&&(Y=X,K=q,Y.next.i!==K.i&&Y.prev.i!==K.i&&!function(y,T){var A=y;do{if(A.i!==y.i&&A.next.i!==y.i&&A.i!==T.i&&A.next.i!==T.i&&intersects(A,A.next,y,T))return!0;A=A.next}while(A!==y);return!1}(Y,K)&&(locallyInside(Y,K)&&locallyInside(K,Y)&&function(y,T){var A=y,B=!1,F=(y.x+T.x)/2,U=(y.y+T.y)/2;do A.y>U!=A.next.y>U&&A.next.y!==A.y&&F<(A.next.x-A.x)*(U-A.y)/(A.next.y-A.y)+A.x&&(B=!B),A=A.next;while(A!==y);return B}(Y,K)&&(area(Y.prev,Y,K.prev)||area(Y,K.prev,K))||equals(Y,K)&&area(Y.prev,Y,Y.next)>0&&area(K.prev,K,K.next)>0))){var Q=splitPolygon(X,q);X=filterPoints(X,X.next),Q=filterPoints(Q,Q.next),earcutLinked(X,T,A,B,F,U,0),earcutLinked(Q,T,A,B,F,U,0);return}q=q.next}X=X.next}while(X!==y)}(y,T,A,B,F,U):earcutLinked(filterPoints(y),T,A,B,F,U,1);break}}}}(Z,ei,A,B,F,q,0),ei}function linkedList(y,T,A,B,F){var U,X;if(F===signedArea(y,T,A,B)>0)for(U=T;U<A;U+=B)X=insertNode(U,y[U],y[U+1],X);else for(U=A-B;U>=T;U-=B)X=insertNode(U,y[U],y[U+1],X);return X&&equals(X,X.next)&&(removeNode(X),X=X.next),X}function filterPoints(y,T){if(!y)return y;T||(T=y);var A,B=y;do if(A=!1,!B.steiner&&(equals(B,B.next)||0===area(B.prev,B,B.next))){if(removeNode(B),(B=T=B.prev)===B.next)break;A=!0}else B=B.next;while(A||B!==T);return T}function compareX(y,T){return y.x-T.x}function zOrder(y,T,A,B,F){return(y=((y=((y=((y=((y=(y-A)*F|0)|y<<8)&16711935)|y<<4)&252645135)|y<<2)&858993459)|y<<1)&1431655765)|(T=((T=((T=((T=((T=(T-B)*F|0)|T<<8)&16711935)|T<<4)&252645135)|T<<2)&858993459)|T<<1)&1431655765)<<1}function pointInTriangle(y,T,A,B,F,U,X,Y){return(F-X)*(T-Y)>=(y-X)*(U-Y)&&(y-X)*(B-Y)>=(A-X)*(T-Y)&&(A-X)*(U-Y)>=(F-X)*(B-Y)}function area(y,T,A){return(T.y-y.y)*(A.x-T.x)-(T.x-y.x)*(A.y-T.y)}function equals(y,T){return y.x===T.x&&y.y===T.y}function intersects(y,T,A,B){var F=sign(area(y,T,A)),U=sign(area(y,T,B)),X=sign(area(A,B,y)),Y=sign(area(A,B,T));return!!(F!==U&&X!==Y||0===F&&onSegment(y,A,T)||0===U&&onSegment(y,B,T)||0===X&&onSegment(A,y,B)||0===Y&&onSegment(A,T,B))}function onSegment(y,T,A){return T.x<=Math.max(y.x,A.x)&&T.x>=Math.min(y.x,A.x)&&T.y<=Math.max(y.y,A.y)&&T.y>=Math.min(y.y,A.y)}function sign(y){return y>0?1:y<0?-1:0}function locallyInside(y,T){return 0>area(y.prev,y,y.next)?area(y,T,y.next)>=0&&area(y,y.prev,T)>=0:0>area(y,T,y.prev)||0>area(y,y.next,T)}function splitPolygon(y,T){var A=new Node(y.i,y.x,y.y),B=new Node(T.i,T.x,T.y),F=y.next,U=T.prev;return y.next=T,T.prev=y,A.next=F,F.prev=A,B.next=A,A.prev=B,U.next=B,B.prev=U,B}function insertNode(y,T,A,B){var F=new Node(y,T,A);return B?(F.next=B.next,F.prev=B,B.next.prev=F,B.next=F):(F.prev=F,F.next=F),F}function removeNode(y){y.next.prev=y.prev,y.prev.next=y.next,y.prevZ&&(y.prevZ.nextZ=y.nextZ),y.nextZ&&(y.nextZ.prevZ=y.prevZ)}function Node(y,T,A){this.i=y,this.x=T,this.y=A,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function signedArea(y,T,A,B){for(var F=0,U=T,X=A-B;U<A;U+=B)F+=(y[X]-y[U])*(y[U+1]+y[X+1]),X=U;return F}y.exports=earcut,y.exports.default=earcut,earcut.deviation=function(y,T,A,B){var F=T&&T.length,U=F?T[0]*A:y.length,X=Math.abs(signedArea(y,0,U,A));if(F)for(var Y=0,K=T.length;Y<K;Y++){var q=T[Y]*A,Q=Y<K-1?T[Y+1]*A:y.length;X-=Math.abs(signedArea(y,q,Q,A))}var J=0;for(Y=0;Y<B.length;Y+=3){var Z=B[Y]*A,ei=B[Y+1]*A,es=B[Y+2]*A;J+=Math.abs((y[Z]-y[es])*(y[ei+1]-y[Z+1])-(y[Z]-y[ei])*(y[es+1]-y[Z+1]))}return 0===X&&0===J?0:Math.abs((J-X)/X)},earcut.flatten=function(y){for(var T=y[0][0].length,A={vertices:[],holes:[],dimensions:T},B=0,F=0;F<y.length;F++){for(var U=0;U<y[F].length;U++)for(var X=0;X<T;X++)A.vertices.push(y[F][U][X]);F>0&&(B+=y[F-1].length,A.holes.push(B))}return A}},26729:function(y){"use strict";var T=Object.prototype.hasOwnProperty,A="~";function Events(){}function EE(y,T,A){this.fn=y,this.context=T,this.once=A||!1}function addListener(y,T,B,F,U){if("function"!=typeof B)throw TypeError("The listener must be a function");var X=new EE(B,F||y,U),Y=A?A+T:T;return y._events[Y]?y._events[Y].fn?y._events[Y]=[y._events[Y],X]:y._events[Y].push(X):(y._events[Y]=X,y._eventsCount++),y}function clearEvent(y,T){0==--y._eventsCount?y._events=new Events:delete y._events[T]}function EventEmitter(){this._events=new Events,this._eventsCount=0}Object.create&&(Events.prototype=Object.create(null),new Events().__proto__||(A=!1)),EventEmitter.prototype.eventNames=function(){var y,B,F=[];if(0===this._eventsCount)return F;for(B in y=this._events)T.call(y,B)&&F.push(A?B.slice(1):B);return Object.getOwnPropertySymbols?F.concat(Object.getOwnPropertySymbols(y)):F},EventEmitter.prototype.listeners=function(y){var T=A?A+y:y,B=this._events[T];if(!B)return[];if(B.fn)return[B.fn];for(var F=0,U=B.length,X=Array(U);F<U;F++)X[F]=B[F].fn;return X},EventEmitter.prototype.listenerCount=function(y){var T=A?A+y:y,B=this._events[T];return B?B.fn?1:B.length:0},EventEmitter.prototype.emit=function(y,T,B,F,U,X){var Y=A?A+y:y;if(!this._events[Y])return!1;var K,q,Q=this._events[Y],J=arguments.length;if(Q.fn){switch(Q.once&&this.removeListener(y,Q.fn,void 0,!0),J){case 1:return Q.fn.call(Q.context),!0;case 2:return Q.fn.call(Q.context,T),!0;case 3:return Q.fn.call(Q.context,T,B),!0;case 4:return Q.fn.call(Q.context,T,B,F),!0;case 5:return Q.fn.call(Q.context,T,B,F,U),!0;case 6:return Q.fn.call(Q.context,T,B,F,U,X),!0}for(q=1,K=Array(J-1);q<J;q++)K[q-1]=arguments[q];Q.fn.apply(Q.context,K)}else{var Z,ei=Q.length;for(q=0;q<ei;q++)switch(Q[q].once&&this.removeListener(y,Q[q].fn,void 0,!0),J){case 1:Q[q].fn.call(Q[q].context);break;case 2:Q[q].fn.call(Q[q].context,T);break;case 3:Q[q].fn.call(Q[q].context,T,B);break;case 4:Q[q].fn.call(Q[q].context,T,B,F);break;default:if(!K)for(Z=1,K=Array(J-1);Z<J;Z++)K[Z-1]=arguments[Z];Q[q].fn.apply(Q[q].context,K)}}return!0},EventEmitter.prototype.on=function(y,T,A){return addListener(this,y,T,A,!1)},EventEmitter.prototype.once=function(y,T,A){return addListener(this,y,T,A,!0)},EventEmitter.prototype.removeListener=function(y,T,B,F){var U=A?A+y:y;if(!this._events[U])return this;if(!T)return clearEvent(this,U),this;var X=this._events[U];if(X.fn)X.fn!==T||F&&!X.once||B&&X.context!==B||clearEvent(this,U);else{for(var Y=0,K=[],q=X.length;Y<q;Y++)(X[Y].fn!==T||F&&!X[Y].once||B&&X[Y].context!==B)&&K.push(X[Y]);K.length?this._events[U]=1===K.length?K[0]:K:clearEvent(this,U)}return this},EventEmitter.prototype.removeAllListeners=function(y){var T;return y?(T=A?A+y:y,this._events[T]&&clearEvent(this,T)):(this._events=new Events,this._eventsCount=0),this},EventEmitter.prototype.off=EventEmitter.prototype.removeListener,EventEmitter.prototype.addListener=EventEmitter.prototype.on,EventEmitter.prefixed=A,EventEmitter.EventEmitter=EventEmitter,y.exports=EventEmitter},66611:function(y,T,A){"use strict";A.d(T,{Z:function(){return FuzzySearch}});let Helper=class Helper{static getDescendantProperty(y,T,A=[]){let B,F,U,X,Y,K;if(T){if(-1===(U=T.indexOf("."))?B=T:(B=T.slice(0,U),F=T.slice(U+1)),null!=(X=y[B])){if(F||"string"!=typeof X&&"number"!=typeof X){if("[object Array]"===Object.prototype.toString.call(X))for(Y=0,K=X.length;Y<K;Y++)Helper.getDescendantProperty(X[Y],F,A);else F&&Helper.getDescendantProperty(X,F,A)}else A.push(X)}}else A.push(y);return A}};let FuzzySearch=class FuzzySearch{constructor(y=[],T=[],A={}){Array.isArray(T)||(A=T,T=[]),this.haystack=y,this.keys=T,this.options=Object.assign({caseSensitive:!1,sort:!1},A)}search(y=""){if(""===y)return this.haystack;let T=[];for(let A=0;A<this.haystack.length;A++){let B=this.haystack[A];if(0===this.keys.length){let A=FuzzySearch.isMatch(B,y,this.options.caseSensitive);A&&T.push({item:B,score:A})}else for(let A=0;A<this.keys.length;A++){let F=Helper.getDescendantProperty(B,this.keys[A]),U=!1;for(let A=0;A<F.length;A++){let X=FuzzySearch.isMatch(F[A],y,this.options.caseSensitive);if(X){U=!0,T.push({item:B,score:X});break}}if(U)break}}return this.options.sort&&T.sort((y,T)=>y.score-T.score),T.map(y=>y.item)}static isMatch(y,T,A){y=String(y),T=String(T),A||(y=y.toLocaleLowerCase(),T=T.toLocaleLowerCase());let B=FuzzySearch.nearestIndexesFor(y,T);return!!B&&(y===T?1:B.length>1?2+(B[B.length-1]-B[0]):2+B[0])}static nearestIndexesFor(y,T){let A=T.split(""),B=[],F=FuzzySearch.indexesOfFirstLetter(y,T);return F.forEach((T,F)=>{let U=T+1;B[F]=[T];for(let T=1;T<A.length;T++){let X=A[T];if(-1===(U=y.indexOf(X,U))){B[F]=!1;break}B[F].push(U),U++}}),!!(B=B.filter(y=>!1!==y)).length&&B.sort((y,T)=>1===y.length?y[0]-T[0]:(y=y[y.length-1]-y[0])-(T=T[T.length-1]-T[0]))[0]}static indexesOfFirstLetter(y,T){let A=T[0];return y.split("").map((y,T)=>y===A&&T).filter(y=>!1!==y)}}},11987:function(y,T,A){!function(){var T={452:function(y){"use strict";y.exports=A(97334)}},B={};function __nccwpck_require__(y){var A=B[y];if(void 0!==A)return A.exports;var F=B[y]={exports:{}},U=!0;try{T[y](F,F.exports,__nccwpck_require__),U=!1}finally{U&&delete B[y]}return F.exports}__nccwpck_require__.ab="//";var F={};!function(){var y,T=(y=__nccwpck_require__(452))&&"object"==typeof y&&"default"in y?y.default:y,A=/https?|ftp|gopher|file/;function r(y){"string"==typeof y&&(y=d(y));var B,F,U,X,Y,K,q,Q,J,Z=(F=(B=y).auth,U=B.hostname,X=B.protocol||"",Y=B.pathname||"",K=B.hash||"",q=B.query||"",Q=!1,F=F?encodeURIComponent(F).replace(/%3A/i,":")+"@":"",B.host?Q=F+B.host:U&&(Q=F+(~U.indexOf(":")?"["+U+"]":U),B.port&&(Q+=":"+B.port)),q&&"object"==typeof q&&(q=T.encode(q)),J=B.search||q&&"?"+q||"",X&&":"!==X.substr(-1)&&(X+=":"),B.slashes||(!X||A.test(X))&&!1!==Q?(Q="//"+(Q||""),Y&&"/"!==Y[0]&&(Y="/"+Y)):Q||(Q=""),K&&"#"!==K[0]&&(K="#"+K),J&&"?"!==J[0]&&(J="?"+J),{protocol:X,host:Q,pathname:Y=Y.replace(/[?#]/g,encodeURIComponent),search:J=J.replace("#","%23"),hash:K});return""+Z.protocol+Z.host+Z.pathname+Z.search+Z.hash}var B="http://",U=B+"w.w",X=/^([a-z0-9.+-]*:\/\/\/)([a-z0-9.+-]:\/*)?/i,Y=/https?|ftp|gopher|file/;function h(y,T){var A="string"==typeof y?d(y):y;y="object"==typeof y?r(y):y;var F=d(T),K="";A.protocol&&!A.slashes&&(K=A.protocol,y=y.replace(A.protocol,""),K+="/"===T[0]||"/"===y[0]?"/":""),K&&F.protocol&&(K="",F.slashes||(K=F.protocol,T=T.replace(F.protocol,"")));var q=y.match(X);q&&!F.protocol&&(y=y.substr((K=q[1]+(q[2]||"")).length),/^\/\/[^/]/.test(T)&&(K=K.slice(0,-1)));var Q=new URL(y,U+"/"),J=new URL(T,Q).toString().replace(U,""),Z=F.protocol||A.protocol;return Z+=A.slashes||F.slashes?"//":"",!K&&Z?J=J.replace(B,Z):K&&(J=J.replace(B,"")),Y.test(J)||~T.indexOf(".")||"/"===y.slice(-1)||"/"===T.slice(-1)||"/"!==J.slice(-1)||(J=J.slice(0,-1)),K&&(J=K+("/"===J[0]?J.substr(1):J)),J}function l(){}l.prototype.parse=d,l.prototype.format=r,l.prototype.resolve=h,l.prototype.resolveObject=h;var K=/^https?|ftp|gopher|file/,q=/^(.*?)([#?].*)/,Q=/^([a-z0-9.+-]*:)(\/{0,3})(.*)/i,J=/^([a-z0-9.+-]*:)?\/\/\/*/i,Z=/^([a-z0-9.+-]*:)(\/{0,2})\[(.*)\]$/i;function d(y,A,B){if(void 0===A&&(A=!1),void 0===B&&(B=!1),y&&"object"==typeof y&&y instanceof l)return y;var F=(y=y.trim()).match(q);y=F?F[1].replace(/\\/g,"/")+F[2]:y.replace(/\\/g,"/"),Z.test(y)&&"/"!==y.slice(-1)&&(y+="/");var X=!/(^javascript)/.test(y)&&y.match(Q),Y=J.test(y),ei="";X&&(K.test(X[1])||(ei=X[1].toLowerCase(),y=""+X[2]+X[3]),X[2]||(Y=!1,K.test(X[1])?(ei=X[1],y=""+X[3]):y="//"+X[3]),3!==X[2].length&&1!==X[2].length||(ei=X[1],y="/"+X[3]));var es,eh=(F?F[1]:y).match(/^https?:\/\/[^/]+(:[0-9]+)(?=\/|$)/),eu=eh&&eh[1],ed=new l,ec="",ef="";try{es=new URL(y)}catch(T){ec=T,ei||B||!/^\/\//.test(y)||/^\/\/.+[@.]/.test(y)||(ef="/",y=y.substr(1));try{es=new URL(y,U)}catch(y){return ed.protocol=ei,ed.href=ei,ed}}ed.slashes=Y&&!ef,ed.host="w.w"===es.host?"":es.host,ed.hostname="w.w"===es.hostname?"":es.hostname.replace(/(\[|\])/g,""),ed.protocol=ec?ei||null:es.protocol,ed.search=es.search.replace(/\\/g,"%5C"),ed.hash=es.hash.replace(/\\/g,"%5C");var ep=y.split("#");!ed.search&&~ep[0].indexOf("?")&&(ed.search="?"),ed.hash||""!==ep[1]||(ed.hash="#"),ed.query=A?T.decode(es.search.substr(1)):ed.search.substr(1),ed.pathname=ef+(X?es.pathname.replace(/['^|`]/g,function(y){return"%"+y.charCodeAt().toString(16).toUpperCase()}).replace(/((?:%[0-9A-F]{2})+)/g,function(y,T){try{return decodeURIComponent(T).split("").map(function(y){var T=y.charCodeAt();return T>256||/^[a-z0-9]$/i.test(y)?y:"%"+T.toString(16).toUpperCase()}).join("")}catch(y){return T}}):es.pathname),"about:"===ed.protocol&&"blank"===ed.pathname&&(ed.protocol="",ed.pathname=""),ec&&"/"!==y[0]&&(ed.pathname=ed.pathname.substr(1)),ei&&!K.test(ei)&&"/"!==y.slice(-1)&&"/"===ed.pathname&&(ed.pathname=""),ed.path=ed.pathname+ed.search,ed.auth=[es.username,es.password].map(decodeURIComponent).filter(Boolean).join(":"),ed.port=es.port,eu&&!ed.host.endsWith(eu)&&(ed.host+=eu,ed.port=eu.slice(1)),ed.href=ef?""+ed.pathname+ed.search+ed.hash:r(ed);var em=/^(file)/.test(ed.href)?["host","hostname"]:[];return Object.keys(ed).forEach(function(y){~em.indexOf(y)||(ed[y]=ed[y]||null)}),ed}F.parse=d,F.format=r,F.resolve=h,F.resolveObject=function(y,T){return d(h(y,T))},F.Url=l}(),y.exports=F}()},97334:function(y){!function(){"use strict";var T={815:function(y){y.exports=function(y,A,B,F){A=A||"&",B=B||"=";var U={};if("string"!=typeof y||0===y.length)return U;var X=/\+/g;y=y.split(A);var Y=1e3;F&&"number"==typeof F.maxKeys&&(Y=F.maxKeys);var K=y.length;Y>0&&K>Y&&(K=Y);for(var q=0;q<K;++q){var Q,J,Z,ei,es=y[q].replace(X,"%20"),eh=es.indexOf(B);(eh>=0?(Q=es.substr(0,eh),J=es.substr(eh+1)):(Q=es,J=""),Z=decodeURIComponent(Q),ei=decodeURIComponent(J),Object.prototype.hasOwnProperty.call(U,Z))?T(U[Z])?U[Z].push(ei):U[Z]=[U[Z],ei]:U[Z]=ei}return U};var T=Array.isArray||function(y){return"[object Array]"===Object.prototype.toString.call(y)}},577:function(y){var stringifyPrimitive=function(y){switch(typeof y){case"string":return y;case"boolean":return y?"true":"false";case"number":return isFinite(y)?y:"";default:return""}};y.exports=function(y,B,F,U){return(B=B||"&",F=F||"=",null===y&&(y=void 0),"object"==typeof y)?map(A(y),function(A){var U=encodeURIComponent(stringifyPrimitive(A))+F;return T(y[A])?map(y[A],function(y){return U+encodeURIComponent(stringifyPrimitive(y))}).join(B):U+encodeURIComponent(stringifyPrimitive(y[A]))}).join(B):U?encodeURIComponent(stringifyPrimitive(U))+F+encodeURIComponent(stringifyPrimitive(y)):""};var T=Array.isArray||function(y){return"[object Array]"===Object.prototype.toString.call(y)};function map(y,T){if(y.map)return y.map(T);for(var A=[],B=0;B<y.length;B++)A.push(T(y[B],B));return A}var A=Object.keys||function(y){var T=[];for(var A in y)Object.prototype.hasOwnProperty.call(y,A)&&T.push(A);return T}}},A={};function __nccwpck_require__(y){var B=A[y];if(void 0!==B)return B.exports;var F=A[y]={exports:{}},U=!0;try{T[y](F,F.exports,__nccwpck_require__),U=!1}finally{U&&delete A[y]}return F.exports}__nccwpck_require__.ab="//";var B={};B.decode=B.parse=__nccwpck_require__(815),B.encode=B.stringify=__nccwpck_require__(577),y.exports=B}()},92703:function(y,T,A){"use strict";var B=A(50414);function emptyFunction(){}function emptyFunctionWithReset(){}emptyFunctionWithReset.resetWarningCache=emptyFunction,y.exports=function(){function shim(y,T,A,F,U,X){if(X!==B){var Y=Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw Y.name="Invariant Violation",Y}}function getShim(){return shim}shim.isRequired=shim;var y={array:shim,bigint:shim,bool:shim,func:shim,number:shim,object:shim,string:shim,symbol:shim,any:shim,arrayOf:getShim,element:shim,elementType:shim,instanceOf:getShim,node:shim,objectOf:getShim,oneOf:getShim,oneOfType:getShim,shape:getShim,exact:getShim,checkPropTypes:emptyFunctionWithReset,resetWarningCache:emptyFunction};return y.PropTypes=y,y}},45697:function(y,T,A){y.exports=A(92703)()},50414:function(y){"use strict";y.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},89804:function(y,T,A){"use strict";A.d(T,{M:function(){return X}});var B=A(1396),F=A(68276);let U=class{constructor(y){this.stage=new F.W2,y=Object.assign({forceCanvas:!1},y),this.renderer=(0,B.e6)(y),U._plugins.forEach(T=>{T.init.call(this,y)})}render(){this.renderer.render(this.stage)}get view(){return this.renderer.view}get screen(){return this.renderer.screen}destroy(y,T){let A=U._plugins.slice(0);A.reverse(),A.forEach(y=>{y.destroy.call(this)}),this.stage.destroy(T),this.stage=null,this.renderer.destroy(y),this.renderer=null}},X=U;X._plugins=[],B.Rw.handleByList(B.nw.Application,X._plugins);let ResizePlugin=class ResizePlugin{static init(y){Object.defineProperty(this,"resizeTo",{set(y){globalThis.removeEventListener("resize",this.queueResize),this._resizeTo=y,y&&(globalThis.addEventListener("resize",this.queueResize),this.resize())},get(){return this._resizeTo}}),this.queueResize=()=>{this._resizeTo&&(this.cancelResize(),this._resizeId=requestAnimationFrame(()=>this.resize()))},this.cancelResize=()=>{this._resizeId&&(cancelAnimationFrame(this._resizeId),this._resizeId=null)},this.resize=()=>{let y,T;if(this._resizeTo){if(this.cancelResize(),this._resizeTo===globalThis.window)y=globalThis.innerWidth,T=globalThis.innerHeight;else{let{clientWidth:A,clientHeight:B}=this._resizeTo;y=A,T=B}this.renderer.resize(y,T),this.render()}},this._resizeId=null,this._resizeTo=null,this.resizeTo=y.resizeTo||null}static destroy(){globalThis.removeEventListener("resize",this.queueResize),this.cancelResize(),this.cancelResize=null,this.queueResize=null,this.resizeTo=null,this.resize=null}};ResizePlugin.extension=B.nw.Application,B.Rw.add(ResizePlugin)},61572:function(y,T,A){"use strict";let B,F;A.d(T,{Q2:function(){return q},gN:function(){return checkExtension},uz:function(){return copySearchParams},cU:function(){return createTexture}});var U,X=A(1396);let Y={loader:X.nw.LoadParser,resolver:X.nw.ResolveParser,cache:X.nw.CacheParser,detection:X.nw.DetectionParser};X.Rw.handle(X.nw.Asset,y=>{let T=y.ref;Object.entries(Y).filter(([y])=>!!T[y]).forEach(([y,A])=>X.Rw.add(Object.assign(T[y],{extension:T[y].extension??A})))},y=>{let T=y.ref;Object.keys(Y).filter(y=>!!T[y]).forEach(y=>X.Rw.remove(T[y]))});let BackgroundLoader=class BackgroundLoader{constructor(y,T=!1){this._loader=y,this._assetList=[],this._isLoading=!1,this._maxConcurrent=1,this.verbose=T}add(y){y.forEach(y=>{this._assetList.push(y)}),this.verbose&&console.log("[BackgroundLoader] assets: ",this._assetList),this._isActive&&!this._isLoading&&this._next()}async _next(){if(this._assetList.length&&this._isActive){this._isLoading=!0;let y=[],T=Math.min(this._assetList.length,this._maxConcurrent);for(let A=0;A<T;A++)y.push(this._assetList.pop());await this._loader.load(y),this._isLoading=!1,this._next()}}get active(){return this._isActive}set active(y){this._isActive!==y&&(this._isActive=y,y&&!this._isLoading&&this._next())}};function checkExtension(y,T){let A=y.split("?")[0],B=X.P6.path.extname(A).toLowerCase();return Array.isArray(T)?T.includes(B):B===T}let convertToList=(y,T)=>(Array.isArray(y)||(y=[y]),T)?y.map(y=>"string"==typeof y?T(y):y):y,K=new class{constructor(){this._parsers=[],this._cache=new Map,this._cacheMap=new Map}reset(){this._cacheMap.clear(),this._cache.clear()}has(y){return this._cache.has(y)}get(y){let T=this._cache.get(y);return T||console.warn(`[Assets] Asset id ${y} was not found in the Cache`),T}set(y,T){let A;let B=convertToList(y);for(let y=0;y<this.parsers.length;y++){let F=this.parsers[y];if(F.test(T)){A=F.getCacheableAssets(B,T);break}}A||(A={},B.forEach(y=>{A[y]=T}));let F=Object.keys(A),U={cacheKeys:F,keys:B};B.forEach(y=>{this._cacheMap.set(y,U)}),F.forEach(y=>{this._cache.has(y)&&this._cache.get(y)!==T&&console.warn("[Cache] already has key:",y),this._cache.set(y,A[y])}),T instanceof X.xE&&B.forEach(y=>{T.baseTexture!==X.xE.EMPTY.baseTexture&&X.VL.addToCache(T.baseTexture,y),X.xE.addToCache(T,y)})}remove(y){if(this._cacheMap.get(y),!this._cacheMap.has(y)){console.warn(`[Assets] Asset id ${y} was not found in the Cache`);return}let T=this._cacheMap.get(y),A=T.cacheKeys;A.forEach(y=>{this._cache.delete(y)}),T.keys.forEach(y=>{this._cacheMap.delete(y)})}get parsers(){return this._parsers}},isSingleItem=y=>!Array.isArray(y);let Loader=class Loader{constructor(){this._parsers=[],this._parsersValidated=!1,this.parsers=new Proxy(this._parsers,{set:(y,T,A)=>(this._parsersValidated=!1,y[T]=A,!0)}),this.promiseCache={}}reset(){this._parsersValidated=!1,this.promiseCache={}}_getLoadPromiseAndParser(y,T){let A={promise:null,parser:null};return A.promise=(async()=>{let B=null,F=null;if(!T.loadParser||(F=this._parserHash[T.loadParser])||console.warn(`[Assets] specified load parser "${T.loadParser}" not found while loading ${y}`),!F){for(let A=0;A<this.parsers.length;A++){let B=this.parsers[A];if(B.load&&B.test?.(y,T,this)){F=B;break}}if(!F)return console.warn(`[Assets] ${y} could not be loaded as we don't know how to parse it, ensure the correct parser has been added`),null}B=await F.load(y,T,this),A.parser=F;for(let y=0;y<this.parsers.length;y++){let F=this.parsers[y];F.parse&&F.parse&&await F.testParse?.(B,T,this)&&(B=await F.parse(B,T,this)||B,A.parser=F)}return B})(),A}async load(y,T){this._parsersValidated||this._validateParsers();let A=0,B={},F=isSingleItem(y),U=convertToList(y,y=>({src:y})),Y=U.length,K=U.map(async y=>{let F=X.P6.path.toAbsolute(y.src);if(!B[y.src])try{this.promiseCache[F]||(this.promiseCache[F]=this._getLoadPromiseAndParser(F,y)),B[y.src]=await this.promiseCache[F].promise,T&&T(++A/Y)}catch(T){throw delete this.promiseCache[F],delete B[y.src],Error(`[Loader.load] Failed to load ${F}.
${T}`)}});return await Promise.all(K),F?B[U[0].src]:B}async unload(y){let T=convertToList(y,y=>({src:y})),A=T.map(async y=>{let T=X.P6.path.toAbsolute(y.src),A=this.promiseCache[T];if(A){let B=await A.promise;A.parser?.unload?.(B,y,this),delete this.promiseCache[T]}});await Promise.all(A)}_validateParsers(){this._parsersValidated=!0,this._parserHash=this._parsers.filter(y=>y.name).reduce((y,T)=>(y[T.name]&&console.warn(`[Assets] loadParser name conflict "${T.name}"`),{...y,[T.name]:T}),{})}};var q=((U=q||{})[U.Low=0]="Low",U[U.Normal=1]="Normal",U[U.High=2]="High",U);function checkDataUrl(y,T){if(Array.isArray(T)){for(let A of T)if(y.startsWith(`data:${A}`))return!0;return!1}return y.startsWith(`data:${T}`)}let Q={extension:{type:X.nw.LoadParser,priority:q.Low},name:"loadJson",test:y=>checkDataUrl(y,"application/json")||checkExtension(y,".json"),async load(y){let T=await X.Xd.ADAPTER.fetch(y),A=await T.json();return A}};X.Rw.add(Q);let J={name:"loadTxt",extension:{type:X.nw.LoadParser,priority:q.Low},test:y=>checkDataUrl(y,"text/plain")||checkExtension(y,".txt"),async load(y){let T=await X.Xd.ADAPTER.fetch(y),A=await T.text();return A}};X.Rw.add(J);let Z=["normal","bold","100","200","300","400","500","600","700","800","900"],ei=[".ttf",".otf",".woff",".woff2"],es=["font/ttf","font/otf","font/woff","font/woff2"],eh=/^(--|-?[A-Z_])[0-9A-Z_-]*$/i,eu={extension:{type:X.nw.LoadParser,priority:q.Low},name:"loadWebFont",test:y=>checkDataUrl(y,es)||checkExtension(y,ei),async load(y,T){let A=X.Xd.ADAPTER.getFontFaceSet();if(A){let B=[],F=T.data?.family??function(y){let T=X.P6.path.extname(y),A=X.P6.path.basename(y,T),B=A.replace(/(-|_)/g," "),F=B.toLowerCase().split(" ").map(y=>y.charAt(0).toUpperCase()+y.slice(1)),U=F.length>0;for(let y of F)if(!y.match(eh)){U=!1;break}let Y=F.join(" ");return U||(Y=`"${Y.replace(/[\\"]/g,"\\$&")}"`),Y}(y),U=T.data?.weights?.filter(y=>Z.includes(y))??["normal"],Y=T.data??{};for(let T=0;T<U.length;T++){let X=U[T],K=new FontFace(F,`url(${encodeURI(y)})`,{...Y,weight:X});await K.load(),A.add(K),B.push(K)}return 1===B.length?B[0]:B}return console.warn("[loadWebFont] FontFace API is not supported. Skipping loading font"),null},unload(y){(Array.isArray(y)?y:[y]).forEach(y=>X.Xd.ADAPTER.getFontFaceSet().delete(y))}};X.Rw.add(eu);let ed=0,ec={id:"checkImageBitmap",code:`
    async function checkImageBitmap()
    {
        try
        {
            if (typeof createImageBitmap !== 'function') return false;

            const response = await fetch('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mP8/x8AAwMCAO+ip1sAAAAASUVORK5CYII=');
            const imageBlob =  await response.blob();
            const imageBitmap = await createImageBitmap(imageBlob);

            return imageBitmap.width === 1 && imageBitmap.height === 1;
        }
        catch (e)
        {
            return false;
        }
    }
    checkImageBitmap().then((result) => { self.postMessage(result); });
    `},ef={id:"loadImageBitmap",code:`
    async function loadImageBitmap(url)
    {
        const response = await fetch(url);

        if (!response.ok)
        {
            throw new Error(\`[WorkerManager.loadImageBitmap] Failed to fetch \${url}: \`
                + \`\${response.status} \${response.statusText}\`);
        }

        const imageBlob =  await response.blob();
        const imageBitmap = await createImageBitmap(imageBlob);

        return imageBitmap;
    }
    self.onmessage = async (event) =>
    {
        try
        {
            const imageBitmap = await loadImageBitmap(event.data.data[0]);

            self.postMessage({
                data: imageBitmap,
                uuid: event.data.uuid,
                id: event.data.id,
            }, [imageBitmap]);
        }
        catch(e)
        {
            self.postMessage({
                error: e,
                uuid: event.data.uuid,
                id: event.data.id,
            });
        }
    };`},ep=new class{constructor(){this._initialized=!1,this._createdWorkers=0,this.workerPool=[],this.queue=[],this.resolveHash={}}isImageBitmapSupported(){return void 0!==this._isImageBitmapSupported||(this._isImageBitmapSupported=new Promise(y=>{let T=URL.createObjectURL(new Blob([ec.code],{type:"application/javascript"})),A=new Worker(T);A.addEventListener("message",B=>{A.terminate(),URL.revokeObjectURL(T),y(B.data)})})),this._isImageBitmapSupported}loadImageBitmap(y){return this._run("loadImageBitmap",[y])}async _initWorkers(){this._initialized||(this._initialized=!0)}getWorker(){void 0===B&&(B=navigator.hardwareConcurrency||4);let y=this.workerPool.pop();return!y&&this._createdWorkers<B&&(F||(F=URL.createObjectURL(new Blob([ef.code],{type:"application/javascript"}))),this._createdWorkers++,(y=new Worker(F)).addEventListener("message",y=>{this.complete(y.data),this.returnWorker(y.target),this.next()})),y}returnWorker(y){this.workerPool.push(y)}complete(y){void 0!==y.error?this.resolveHash[y.uuid].reject(y.error):this.resolveHash[y.uuid].resolve(y.data),this.resolveHash[y.uuid]=null}async _run(y,T){await this._initWorkers();let A=new Promise((A,B)=>{this.queue.push({id:y,arguments:T,resolve:A,reject:B})});return this.next(),A}next(){if(!this.queue.length)return;let y=this.getWorker();if(!y)return;let T=this.queue.pop(),A=T.id;this.resolveHash[ed]={resolve:T.resolve,reject:T.reject},y.postMessage({data:T.arguments,uuid:ed++,id:A})}};function createTexture(y,T,A){let B=new X.xE(y);return B.baseTexture.on("dispose",()=>{delete T.promiseCache[A]}),B}let em=[".jpeg",".jpg",".png",".webp",".avif"],eg=["image/jpeg","image/png","image/webp","image/avif"];async function loadImageBitmap(y){let T=await X.Xd.ADAPTER.fetch(y);if(!T.ok)throw Error(`[loadImageBitmap] Failed to fetch ${y}: ${T.status} ${T.statusText}`);let A=await T.blob(),B=await createImageBitmap(A);return B}let e_={name:"loadTextures",extension:{type:X.nw.LoadParser,priority:q.High},config:{preferWorkers:!0,preferCreateImageBitmap:!0,crossOrigin:"anonymous"},test:y=>checkDataUrl(y,eg)||checkExtension(y,em),async load(y,T,A){let B=null;B=globalThis.createImageBitmap&&this.config.preferCreateImageBitmap?this.config.preferWorkers&&await ep.isImageBitmapSupported()?await ep.loadImageBitmap(y):await loadImageBitmap(y):await new Promise(T=>{(B=new Image).crossOrigin=this.config.crossOrigin,B.src=y,B.complete?T(B):B.onload=()=>{T(B)}});let F=new X.VL(B,{resolution:X.P6.getResolutionOfUrl(y),...T.data});return F.resource.src=y,createTexture(F,A,y)},unload(y){y.destroy(!0)}};X.Rw.add(e_);let ev={extension:{type:X.nw.LoadParser,priority:q.High},name:"loadSVG",test:y=>checkDataUrl(y,"image/svg+xml")||checkExtension(y,".svg"),testParse:async y=>X.pX.test(y),async parse(y,T,A){let B=new X.pX(y,T?.data?.resourceOptions);await B.load();let F=new X.VL(B,{resolution:X.P6.getResolutionOfUrl(y),...T?.data});F.resource.src=y;let U=createTexture(F,A,y);return U},async load(y,T){let A=await X.Xd.ADAPTER.fetch(y);return A.text()},unload:e_.unload};X.Rw.add(ev);let Resolver=class Resolver{constructor(){this._defaultBundleIdentifierOptions={connector:"-",createBundleAssetId:(y,T)=>`${y}${this._bundleIdConnector}${T}`,extractAssetIdFromBundle:(y,T)=>T.replace(`${y}${this._bundleIdConnector}`,"")},this._bundleIdConnector=this._defaultBundleIdentifierOptions.connector,this._createBundleAssetId=this._defaultBundleIdentifierOptions.createBundleAssetId,this._extractAssetIdFromBundle=this._defaultBundleIdentifierOptions.extractAssetIdFromBundle,this._assetMap={},this._preferredOrder=[],this._parsers=[],this._resolverHash={},this._bundles={}}setBundleIdentifier(y){if(this._bundleIdConnector=y.connector??this._bundleIdConnector,this._createBundleAssetId=y.createBundleAssetId??this._createBundleAssetId,this._extractAssetIdFromBundle=y.extractAssetIdFromBundle??this._extractAssetIdFromBundle,"bar"!==this._extractAssetIdFromBundle("foo",this._createBundleAssetId("foo","bar")))throw Error("[Resolver] GenerateBundleAssetId are not working correctly")}prefer(...y){y.forEach(y=>{this._preferredOrder.push(y),y.priority||(y.priority=Object.keys(y.params))}),this._resolverHash={}}set basePath(y){this._basePath=y}get basePath(){return this._basePath}set rootPath(y){this._rootPath=y}get rootPath(){return this._rootPath}get parsers(){return this._parsers}reset(){this.setBundleIdentifier(this._defaultBundleIdentifierOptions),this._assetMap={},this._preferredOrder=[],this._resolverHash={},this._rootPath=null,this._basePath=null,this._manifest=null,this._bundles={},this._defaultSearchParams=null}setDefaultSearchParams(y){"string"==typeof y?this._defaultSearchParams=y:this._defaultSearchParams=Object.keys(y).map(T=>`${encodeURIComponent(T)}=${encodeURIComponent(y[T])}`).join("&")}addManifest(y){this._manifest&&console.warn("[Resolver] Manifest already exists, this will be overwritten"),this._manifest=y,y.bundles.forEach(y=>{this.addBundle(y.name,y.assets)})}addBundle(y,T){let A=[];Array.isArray(T)?T.forEach(T=>{if("string"==typeof T.name){let B=this._createBundleAssetId(y,T.name);A.push(B),this.add([T.name,B],T.srcs,T.data)}else{let B=T.name.map(T=>this._createBundleAssetId(y,T));B.forEach(y=>{A.push(y)}),this.add([...T.name,...B],T.srcs)}}):Object.keys(T).forEach(B=>{A.push(this._createBundleAssetId(y,B)),this.add([B,this._createBundleAssetId(y,B)],T[B])}),this._bundles[y]=A}add(y,T,A){let B=convertToList(y);B.forEach(y=>{this.hasKey(y)&&console.warn(`[Resolver] already has key: ${y} overwriting`)}),Array.isArray(T)||(T="string"==typeof T?function(y){let T=y.match(/\{(.*?)\}/g),A=[];if(T){let B=[];T.forEach(y=>{let T=y.substring(1,y.length-1).split(",");B.push(T)}),function processX(y,T,A,B,F){let U=T[A];for(let X=0;X<U.length;X++){let Y=U[X];A<T.length-1?processX(y.replace(B[A],Y),T,A+1,B,F):F.push(y.replace(B[A],Y))}}(y,B,0,T,A)}else A.push(y);return A}(T):[T]);let F=T.map(y=>{let T=y;if("string"==typeof y){let A=!1;for(let B=0;B<this._parsers.length;B++){let F=this._parsers[B];if(F.test(y)){T=F.parse(y),A=!0;break}}A||(T={src:y})}return T.format||(T.format=T.src.split(".").pop()),T.alias||(T.alias=B),(this._basePath||this._rootPath)&&(T.src=X.P6.path.toAbsolute(T.src,this._basePath,this._rootPath)),T.src=this._appendDefaultSearchParams(T.src),T.data=T.data??A,T});B.forEach(y=>{this._assetMap[y]=F})}resolveBundle(y){let T=isSingleItem(y);y=convertToList(y);let A={};return y.forEach(y=>{let T=this._bundles[y];if(T){let B=this.resolve(T),F={};for(let T in B){let A=B[T];F[this._extractAssetIdFromBundle(y,T)]=A}A[y]=F}}),T?A[y[0]]:A}resolveUrl(y){let T=this.resolve(y);if("string"!=typeof y){let y={};for(let A in T)y[A]=T[A].src;return y}return T.src}resolve(y){let T=isSingleItem(y);y=convertToList(y);let A={};return y.forEach(y=>{if(!this._resolverHash[y]){if(this._assetMap[y]){let T=this._assetMap[y],A=this._getPreferredOrder(T),B=T[0];A?.priority.forEach(y=>{A.params[y].forEach(A=>{let B=T.filter(T=>!!T[y]&&T[y]===A);B.length&&(T=B)})}),this._resolverHash[y]=T[0]??B}else{let T=y;(this._basePath||this._rootPath)&&(T=X.P6.path.toAbsolute(T,this._basePath,this._rootPath)),T=this._appendDefaultSearchParams(T),this._resolverHash[y]={src:T}}}A[y]=this._resolverHash[y]}),T?A[y[0]]:A}hasKey(y){return!!this._assetMap[y]}hasBundle(y){return!!this._bundles[y]}_getPreferredOrder(y){for(let T=0;T<y.length;T++){let T=y[0],A=this._preferredOrder.find(y=>y.params.format.includes(T.format));if(A)return A}return this._preferredOrder[0]}_appendDefaultSearchParams(y){if(!this._defaultSearchParams)return y;let T=/\?/.test(y)?"&":"?";return`${y}${T}${this._defaultSearchParams}`}};let ey=new class{constructor(){this._detections=[],this._initialized=!1,this.resolver=new Resolver,this.loader=new Loader,this.cache=K,this._backgroundLoader=new BackgroundLoader(this.loader),this._backgroundLoader.active=!0,this.reset()}async init(y={}){if(this._initialized){console.warn("[Assets]AssetManager already initialized, did you load before calling this Asset.init()?");return}if(this._initialized=!0,y.defaultSearchParams&&this.resolver.setDefaultSearchParams(y.defaultSearchParams),y.basePath&&(this.resolver.basePath=y.basePath),y.bundleIdentifier&&this.resolver.setBundleIdentifier(y.bundleIdentifier),y.manifest){let T=y.manifest;"string"==typeof T&&(T=await this.load(T)),this.resolver.addManifest(T)}let T=y.texturePreference?.resolution??1,A=[];if(y.texturePreference?.format){let T=y.texturePreference?.format;for(let y of(A="string"==typeof T?[T]:T,this._detections))await y.test()||(A=await y.remove(A))}else for(let y of this._detections)await y.test()&&(A=await y.add(A));this.resolver.prefer({params:{format:A,resolution:"number"==typeof T?[T]:T}}),y.preferences&&this.setPreferences(y.preferences)}add(y,T,A){this.resolver.add(y,T,A)}async load(y,T){this._initialized||await this.init();let A=isSingleItem(y),B=convertToList(y).map(y=>"string"!=typeof y?(this.resolver.add(y.src,y),y.src):(this.resolver.hasKey(y)||this.resolver.add(y,y),y)),F=this.resolver.resolve(B),U=await this._mapLoadToResolve(F,T);return A?U[B[0]]:U}addBundle(y,T){this.resolver.addBundle(y,T)}async loadBundle(y,T){this._initialized||await this.init();let A=!1;"string"==typeof y&&(A=!0,y=[y]);let B=this.resolver.resolveBundle(y),F={},U=Object.keys(B),X=0,Y=0,_onProgress=()=>{T?.(++X/Y)},K=U.map(y=>{let T=B[y];return Y+=Object.keys(T).length,this._mapLoadToResolve(T,_onProgress).then(T=>{F[y]=T})});return await Promise.all(K),A?F[y[0]]:F}async backgroundLoad(y){this._initialized||await this.init(),"string"==typeof y&&(y=[y]);let T=this.resolver.resolve(y);this._backgroundLoader.add(Object.values(T))}async backgroundLoadBundle(y){this._initialized||await this.init(),"string"==typeof y&&(y=[y]);let T=this.resolver.resolveBundle(y);Object.values(T).forEach(y=>{this._backgroundLoader.add(Object.values(y))})}reset(){this.resolver.reset(),this.loader.reset(),this.cache.reset(),this._initialized=!1}get(y){if("string"==typeof y)return K.get(y);let T={};for(let A=0;A<y.length;A++)T[A]=K.get(y[A]);return T}async _mapLoadToResolve(y,T){let A=Object.values(y),B=Object.keys(y);this._backgroundLoader.active=!1;let F=await this.loader.load(A,T);this._backgroundLoader.active=!0;let U={};return A.forEach((y,T)=>{let A=F[y.src],X=[y.src];y.alias&&X.push(...y.alias),U[B[T]]=A,K.set(X,A)}),U}async unload(y){this._initialized||await this.init();let T=convertToList(y).map(y=>"string"!=typeof y?y.src:y),A=this.resolver.resolve(T);await this._unloadFromResolved(A)}async unloadBundle(y){this._initialized||await this.init(),y=convertToList(y);let T=this.resolver.resolveBundle(y),A=Object.keys(T).map(y=>this._unloadFromResolved(T[y]));await Promise.all(A)}async _unloadFromResolved(y){let T=Object.values(y);T.forEach(y=>{K.remove(y.src)}),await this.loader.unload(T)}get detections(){return this._detections}get preferWorkers(){return e_.config.preferWorkers}set preferWorkers(y){X.P6.deprecation("7.2.0","Assets.prefersWorkers is deprecated, use Assets.setPreferences({ preferWorkers: true }) instead."),this.setPreferences({preferWorkers:y})}setPreferences(y){this.loader.parsers.forEach(T=>{T.config&&Object.keys(T.config).filter(T=>T in y).forEach(A=>{T.config[A]=y[A]})})}};X.Rw.handleByList(X.nw.LoadParser,ey.loader.parsers).handleByList(X.nw.ResolveParser,ey.resolver.parsers).handleByList(X.nw.CacheParser,ey.cache.parsers).handleByList(X.nw.DetectionParser,ey.detections);let ex={extension:X.nw.CacheParser,test:y=>Array.isArray(y)&&y.every(y=>y instanceof X.xE),getCacheableAssets:(y,T)=>{let A={};return y.forEach(y=>{T.forEach((T,B)=>{A[y+(0===B?"":B+1)]=T})}),A}};X.Rw.add(ex);let eb={extension:{type:X.nw.DetectionParser,priority:1},test:async()=>{if(!globalThis.createImageBitmap)return!1;let y=await X.Xd.ADAPTER.fetch("data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAAB0AAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAIAAAACAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQ0MAAAAABNjb2xybmNseAACAAIAAYAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAACVtZGF0EgAKCBgANogQEAwgMg8f8D///8WfhwB8+ErK42A=").then(y=>y.blob());return createImageBitmap(y).then(()=>!0,()=>!1)},add:async y=>[...y,"avif"],remove:async y=>y.filter(y=>"avif"!==y)};X.Rw.add(eb);let eT={extension:{type:X.nw.DetectionParser,priority:0},test:async()=>{if(!globalThis.createImageBitmap)return!1;let y=await X.Xd.ADAPTER.fetch("data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAAAAAAfQ//73v/+BiOh/AAA=").then(y=>y.blob());return createImageBitmap(y).then(()=>!0,()=>!1)},add:async y=>[...y,"webp"],remove:async y=>y.filter(y=>"webp"!==y)};X.Rw.add(eT);let eE=["png","jpg","jpeg"],eS={extension:{type:X.nw.DetectionParser,priority:-1},test:()=>Promise.resolve(!0),add:async y=>[...y,...eE],remove:async y=>y.filter(y=>!eE.includes(y))};X.Rw.add(eS);let eA={extension:X.nw.ResolveParser,test:e_.test,parse:y=>({resolution:parseFloat(X.Xd.RETINA_PREFIX.exec(y)?.[1]??"1"),format:y.split(".").pop(),src:y})};X.Rw.add(eA);let copySearchParams=(y,T)=>{let A=T.split("?")[1];return A&&(y+=`?${A}`),y}},76278:function(y,T,A){"use strict";A.d(T,{I:function(){return ei}});var B={grad:.9,turn:360,rad:360/(2*Math.PI)},t=function(y){return"string"==typeof y?y.length>0:"number"==typeof y},n=function(y,T,A){return void 0===T&&(T=0),void 0===A&&(A=Math.pow(10,T)),Math.round(A*y)/A+0},e=function(y,T,A){return void 0===T&&(T=0),void 0===A&&(A=1),y>A?A:y>T?y:T},u=function(y){return(y=isFinite(y)?y%360:0)>0?y:y+360},a=function(y){return{r:e(y.r,0,255),g:e(y.g,0,255),b:e(y.b,0,255),a:e(y.a)}},o=function(y){return{r:n(y.r),g:n(y.g),b:n(y.b),a:n(y.a,3)}},F=/^#([0-9a-f]{3,8})$/i,s=function(y){var T=y.toString(16);return T.length<2?"0"+T:T},h=function(y){var T=y.r,A=y.g,B=y.b,F=y.a,U=Math.max(T,A,B),X=U-Math.min(T,A,B),Y=X?U===T?(A-B)/X:U===A?2+(B-T)/X:4+(T-A)/X:0;return{h:60*(Y<0?Y+6:Y),s:U?X/U*100:0,v:U/255*100,a:F}},b=function(y){var T=y.h,A=y.s,B=y.v,F=y.a;T=T/360*6,A/=100,B/=100;var U=Math.floor(T),X=B*(1-A),Y=B*(1-(T-U)*A),K=B*(1-(1-T+U)*A),q=U%6;return{r:255*[B,Y,X,X,K,B][q],g:255*[K,B,B,Y,X,X][q],b:255*[X,X,K,B,B,Y][q],a:F}},g=function(y){return{h:u(y.h),s:e(y.s,0,100),l:e(y.l,0,100),a:e(y.a)}},d=function(y){return{h:n(y.h),s:n(y.s),l:n(y.l),a:n(y.a,3)}},f=function(y){var T,A;return b((T=y.s,{h:y.h,s:(T*=((A=y.l)<50?A:100-A)/100)>0?2*T/(A+T)*100:0,v:A+T,a:y.a}))},c=function(y){var T,A,B,F;return{h:(T=h(y)).h,s:(F=(200-(A=T.s))*(B=T.v)/100)>0&&F<200?A*B/100/(F<=100?F:200-F)*100:0,l:F/2,a:T.a}},U=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s*,\s*([+-]?\d*\.?\d+)%\s*,\s*([+-]?\d*\.?\d+)%\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,X=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s+([+-]?\d*\.?\d+)%\s+([+-]?\d*\.?\d+)%\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,Y=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,K=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,q={string:[[function(y){var T=F.exec(y);return T?(y=T[1]).length<=4?{r:parseInt(y[0]+y[0],16),g:parseInt(y[1]+y[1],16),b:parseInt(y[2]+y[2],16),a:4===y.length?n(parseInt(y[3]+y[3],16)/255,2):1}:6===y.length||8===y.length?{r:parseInt(y.substr(0,2),16),g:parseInt(y.substr(2,2),16),b:parseInt(y.substr(4,2),16),a:8===y.length?n(parseInt(y.substr(6,2),16)/255,2):1}:null:null},"hex"],[function(y){var T=Y.exec(y)||K.exec(y);return T?T[2]!==T[4]||T[4]!==T[6]?null:a({r:Number(T[1])/(T[2]?100/255:1),g:Number(T[3])/(T[4]?100/255:1),b:Number(T[5])/(T[6]?100/255:1),a:void 0===T[7]?1:Number(T[7])/(T[8]?100:1)}):null},"rgb"],[function(y){var T,A,F=U.exec(y)||X.exec(y);return F?f(g({h:(T=F[1],void 0===(A=F[2])&&(A="deg"),Number(T)*(B[A]||1)),s:Number(F[3]),l:Number(F[4]),a:void 0===F[5]?1:Number(F[5])/(F[6]?100:1)})):null},"hsl"]],object:[[function(y){var T=y.r,A=y.g,B=y.b,F=y.a;return t(T)&&t(A)&&t(B)?a({r:Number(T),g:Number(A),b:Number(B),a:Number(void 0===F?1:F)}):null},"rgb"],[function(y){var T=y.h,A=y.s,B=y.l,F=y.a;return t(T)&&t(A)&&t(B)?f(g({h:Number(T),s:Number(A),l:Number(B),a:Number(void 0===F?1:F)})):null},"hsl"],[function(y){var T,A=y.h,B=y.s,F=y.v,U=y.a;return t(A)&&t(B)&&t(F)?b({h:u((T={h:Number(A),s:Number(B),v:Number(F),a:Number(void 0===U?1:U)}).h),s:e(T.s,0,100),v:e(T.v,0,100),a:e(T.a)}):null},"hsv"]]},N=function(y,T){for(var A=0;A<T.length;A++){var B=T[A][0](y);if(B)return[B,T[A][1]]}return[null,void 0]},M=function(y,T){var A=c(y);return{h:A.h,s:e(A.s+100*T,0,100),l:A.l,a:A.a}},H=function(y){return(299*y.r+587*y.g+114*y.b)/1e3/255},$=function(y,T){var A=c(y);return{h:A.h,s:A.s,l:e(A.l+100*T,0,100),a:A.a}},Q=function(){function r(y){this.parsed=("string"==typeof y?N(y.trim(),q.string):"object"==typeof y&&null!==y?N(y,q.object):[null,void 0])[0],this.rgba=this.parsed||{r:0,g:0,b:0,a:1}}return r.prototype.isValid=function(){return null!==this.parsed},r.prototype.brightness=function(){return n(H(this.rgba),2)},r.prototype.isDark=function(){return .5>H(this.rgba)},r.prototype.isLight=function(){return H(this.rgba)>=.5},r.prototype.toHex=function(){var y,T,A,B,F,U;return T=(y=o(this.rgba)).r,A=y.g,B=y.b,U=(F=y.a)<1?s(n(255*F)):"","#"+s(T)+s(A)+s(B)+U},r.prototype.toRgb=function(){return o(this.rgba)},r.prototype.toRgbString=function(){var y,T,A,B,F;return T=(y=o(this.rgba)).r,A=y.g,B=y.b,(F=y.a)<1?"rgba("+T+", "+A+", "+B+", "+F+")":"rgb("+T+", "+A+", "+B+")"},r.prototype.toHsl=function(){return d(c(this.rgba))},r.prototype.toHslString=function(){var y,T,A,B,F;return T=(y=d(c(this.rgba))).h,A=y.s,B=y.l,(F=y.a)<1?"hsla("+T+", "+A+"%, "+B+"%, "+F+")":"hsl("+T+", "+A+"%, "+B+"%)"},r.prototype.toHsv=function(){var y;return{h:n((y=h(this.rgba)).h),s:n(y.s),v:n(y.v),a:n(y.a,3)}},r.prototype.invert=function(){var y;return w({r:255-(y=this.rgba).r,g:255-y.g,b:255-y.b,a:y.a})},r.prototype.saturate=function(y){return void 0===y&&(y=.1),w(M(this.rgba,y))},r.prototype.desaturate=function(y){return void 0===y&&(y=.1),w(M(this.rgba,-y))},r.prototype.grayscale=function(){return w(M(this.rgba,-1))},r.prototype.lighten=function(y){return void 0===y&&(y=.1),w($(this.rgba,y))},r.prototype.darken=function(y){return void 0===y&&(y=.1),w($(this.rgba,-y))},r.prototype.rotate=function(y){return void 0===y&&(y=15),this.hue(this.hue()+y)},r.prototype.alpha=function(y){var T;return"number"==typeof y?w({r:(T=this.rgba).r,g:T.g,b:T.b,a:y}):n(this.rgba.a,3)},r.prototype.hue=function(y){var T=c(this.rgba);return"number"==typeof y?w({h:y,s:T.s,l:T.l,a:T.a}):n(T.h)},r.prototype.isEqual=function(y){return this.toHex()===w(y).toHex()},r}(),w=function(y){return y instanceof Q?y:new Q(y)},J=[];!function(y){y.forEach(function(y){0>J.indexOf(y)&&(y(Q,q),J.push(y))})}([function(y,T){var A={white:"#ffffff",bisque:"#ffe4c4",blue:"#0000ff",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",antiquewhite:"#faebd7",aqua:"#00ffff",azure:"#f0ffff",whitesmoke:"#f5f5f5",papayawhip:"#ffefd5",plum:"#dda0dd",blanchedalmond:"#ffebcd",black:"#000000",gold:"#ffd700",goldenrod:"#daa520",gainsboro:"#dcdcdc",cornsilk:"#fff8dc",cornflowerblue:"#6495ed",burlywood:"#deb887",aquamarine:"#7fffd4",beige:"#f5f5dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkkhaki:"#bdb76b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",peachpuff:"#ffdab9",darkmagenta:"#8b008b",darkred:"#8b0000",darkorchid:"#9932cc",darkorange:"#ff8c00",darkslateblue:"#483d8b",gray:"#808080",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",deeppink:"#ff1493",deepskyblue:"#00bfff",wheat:"#f5deb3",firebrick:"#b22222",floralwhite:"#fffaf0",ghostwhite:"#f8f8ff",darkviolet:"#9400d3",magenta:"#ff00ff",green:"#008000",dodgerblue:"#1e90ff",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",blueviolet:"#8a2be2",forestgreen:"#228b22",lawngreen:"#7cfc00",indianred:"#cd5c5c",indigo:"#4b0082",fuchsia:"#ff00ff",brown:"#a52a2a",maroon:"#800000",mediumblue:"#0000cd",lightcoral:"#f08080",darkturquoise:"#00ced1",lightcyan:"#e0ffff",ivory:"#fffff0",lightyellow:"#ffffe0",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",linen:"#faf0e6",mediumaquamarine:"#66cdaa",lemonchiffon:"#fffacd",lime:"#00ff00",khaki:"#f0e68c",mediumseagreen:"#3cb371",limegreen:"#32cd32",mediumspringgreen:"#00fa9a",lightskyblue:"#87cefa",lightblue:"#add8e6",midnightblue:"#191970",lightpink:"#ffb6c1",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",mintcream:"#f5fffa",lightslategray:"#778899",lightslategrey:"#778899",navajowhite:"#ffdead",navy:"#000080",mediumvioletred:"#c71585",powderblue:"#b0e0e6",palegoldenrod:"#eee8aa",oldlace:"#fdf5e6",paleturquoise:"#afeeee",mediumturquoise:"#48d1cc",mediumorchid:"#ba55d3",rebeccapurple:"#663399",lightsteelblue:"#b0c4de",mediumslateblue:"#7b68ee",thistle:"#d8bfd8",tan:"#d2b48c",orchid:"#da70d6",mediumpurple:"#9370db",purple:"#800080",pink:"#ffc0cb",skyblue:"#87ceeb",springgreen:"#00ff7f",palegreen:"#98fb98",red:"#ff0000",yellow:"#ffff00",slateblue:"#6a5acd",lavenderblush:"#fff0f5",peru:"#cd853f",palevioletred:"#db7093",violet:"#ee82ee",teal:"#008080",slategray:"#708090",slategrey:"#708090",aliceblue:"#f0f8ff",darkseagreen:"#8fbc8f",darkolivegreen:"#556b2f",greenyellow:"#adff2f",seagreen:"#2e8b57",seashell:"#fff5ee",tomato:"#ff6347",silver:"#c0c0c0",sienna:"#a0522d",lavender:"#e6e6fa",lightgreen:"#90ee90",orange:"#ffa500",orangered:"#ff4500",steelblue:"#4682b4",royalblue:"#4169e1",turquoise:"#40e0d0",yellowgreen:"#9acd32",salmon:"#fa8072",saddlebrown:"#8b4513",sandybrown:"#f4a460",rosybrown:"#bc8f8f",darksalmon:"#e9967a",lightgoldenrodyellow:"#fafad2",snow:"#fffafa",lightgrey:"#d3d3d3",lightgray:"#d3d3d3",dimgray:"#696969",dimgrey:"#696969",olivedrab:"#6b8e23",olive:"#808000"},B={};for(var F in A)B[A[F]]=F;var U={};y.prototype.toName=function(T){if(!(this.rgba.a||this.rgba.r||this.rgba.g||this.rgba.b))return"transparent";var F,X=B[this.toHex()];if(X)return X;if(null==T?void 0:T.closest){var Y=this.toRgb(),K=1/0,q="black";if(!U.length)for(var Q in A)U[Q]=new y(A[Q]).toRgb();for(var J in A){var Z=(F=U[J],Math.pow(Y.r-F.r,2)+Math.pow(Y.g-F.g,2)+Math.pow(Y.b-F.b,2));Z<K&&(K=Z,q=J)}return q}},T.string.push([function(T){var B=T.toLowerCase(),F="transparent"===B?"#0000":A[B];return F?new y(F).toRgb():null},"name"])}]);let Z=class{constructor(y=16777215){this._value=null,this._components=new Float32Array(4),this._components.fill(1),this._int=16777215,this.value=y}get red(){return this._components[0]}get green(){return this._components[1]}get blue(){return this._components[2]}get alpha(){return this._components[3]}setValue(y){return this.value=y,this}set value(y){if(y instanceof Z)this._value=this.cloneSource(y._value),this._int=y._int,this._components.set(y._components);else if(null===y)throw Error("Cannot set PIXI.Color#value to null");else null!==this._value&&this.isSourceEqual(this._value,y)||(this.normalize(y),this._value=this.cloneSource(y))}get value(){return this._value}cloneSource(y){if("string"==typeof y||"number"==typeof y||y instanceof Number||null===y);else if(Array.isArray(y)||ArrayBuffer.isView(y))return y.slice(0);else if("object"==typeof y&&null!==y)return{...y};return y}isSourceEqual(y,T){let A=typeof y,B=typeof T;if(A!==B)return!1;if("number"===A||"string"===A||y instanceof Number);else if(Array.isArray(y)&&Array.isArray(T)||ArrayBuffer.isView(y)&&ArrayBuffer.isView(T))return y.length===T.length&&y.every((y,A)=>y===T[A]);else if(null!==y&&null!==T){let A=Object.keys(y),B=Object.keys(T);return A.length===B.length&&A.every(A=>y[A]===T[A])}return y===T}toRgba(){let[y,T,A,B]=this._components;return{r:y,g:T,b:A,a:B}}toRgb(){let[y,T,A]=this._components;return{r:y,g:T,b:A}}toRgbaString(){let[y,T,A]=this.toUint8RgbArray();return`rgba(${y},${T},${A},${this.alpha})`}toUint8RgbArray(y){let[T,A,B]=this._components;return(y=y??[])[0]=Math.round(255*T),y[1]=Math.round(255*A),y[2]=Math.round(255*B),y}toRgbArray(y){y=y??[];let[T,A,B]=this._components;return y[0]=T,y[1]=A,y[2]=B,y}toNumber(){return this._int}toLittleEndianNumber(){let y=this._int;return(y>>16)+(65280&y)+((255&y)<<16)}multiply(y){let[T,A,B,F]=Z.temp.setValue(y)._components;return this._components[0]*=T,this._components[1]*=A,this._components[2]*=B,this._components[3]*=F,this.refreshInt(),this._value=null,this}premultiply(y,T=!0){return T&&(this._components[0]*=y,this._components[1]*=y,this._components[2]*=y),this._components[3]=y,this.refreshInt(),this._value=null,this}toPremultiplied(y,T=!0){if(1===y)return -16777216+this._int;if(0===y)return T?0:this._int;let A=this._int>>16&255,B=this._int>>8&255,F=255&this._int;return T&&(A=A*y+.5|0,B=B*y+.5|0,F=F*y+.5|0),(255*y<<24)+(A<<16)+(B<<8)+F}toHex(){let y=this._int.toString(16);return`#${"000000".substring(0,6-y.length)+y}`}toHexa(){let y=Math.round(255*this._components[3]),T=y.toString(16);return this.toHex()+"00".substring(0,2-T.length)+T}setAlpha(y){return this._components[3]=this._clamp(y),this}round(y){let[T,A,B]=this._components;return this._components[0]=Math.round(T*y)/y,this._components[1]=Math.round(A*y)/y,this._components[2]=Math.round(B*y)/y,this.refreshInt(),this._value=null,this}toArray(y){y=y??[];let[T,A,B,F]=this._components;return y[0]=T,y[1]=A,y[2]=B,y[3]=F,y}normalize(y){let T,A,B,F;if(("number"==typeof y||y instanceof Number)&&y>=0&&y<=16777215){let U=y;T=(U>>16&255)/255,A=(U>>8&255)/255,B=(255&U)/255,F=1}else if((Array.isArray(y)||y instanceof Float32Array)&&y.length>=3&&y.length<=4)y=this._clamp(y),[T,A,B,F=1]=y;else if((y instanceof Uint8Array||y instanceof Uint8ClampedArray)&&y.length>=3&&y.length<=4)y=this._clamp(y,0,255),[T,A,B,F=255]=y,T/=255,A/=255,B/=255,F/=255;else if("string"==typeof y||"object"==typeof y){if("string"==typeof y){let T=Z.HEX_PATTERN.exec(y);T&&(y=`#${T[2]}`)}let U=w(y);U.isValid()&&({r:T,g:A,b:B,a:F}=U.rgba,T/=255,A/=255,B/=255)}if(void 0!==T)this._components[0]=T,this._components[1]=A,this._components[2]=B,this._components[3]=F,this.refreshInt();else throw Error(`Unable to convert color ${y}`)}refreshInt(){this._clamp(this._components);let[y,T,A]=this._components;this._int=(255*y<<16)+(255*T<<8)+(255*A|0)}_clamp(y,T=0,A=1){return"number"==typeof y?Math.min(Math.max(y,T),A):(y.forEach((B,F)=>{y[F]=Math.min(Math.max(B,T),A)}),y)}},ei=Z;ei.shared=new Z,ei.temp=new Z,ei.HEX_PATTERN=/^(#|0x)?(([a-f0-9]{3}){1,2}([a-f0-9]{2})?)$/i},57361:function(y,T,A){"use strict";A.d(T,{A7:function(){return eO},G5:function(){return eB},I2:function(){return eT},N3:function(){return ev},Nt:function(){return ew},T$:function(){return ex},UN:function(){return eC},V0:function(){return ey},Vi:function(){return e_},WB:function(){return eI},aH:function(){return eR},cB:function(){return eD},iw:function(){return eP},lg:function(){return eb},mr:function(){return eF},oT:function(){return eA},sp:function(){return eE},vK:function(){return eS},yl:function(){return eM}});var B,F,U,X,Y,K,q,Q,J,Z,ei,es,eh,eu,ed,ec,ef,ep,em,eg,e_=((B=e_||{})[B.WEBGL_LEGACY=0]="WEBGL_LEGACY",B[B.WEBGL=1]="WEBGL",B[B.WEBGL2=2]="WEBGL2",B),ev=((F=ev||{})[F.UNKNOWN=0]="UNKNOWN",F[F.WEBGL=1]="WEBGL",F[F.CANVAS=2]="CANVAS",F),ey=((U=ey||{})[U.COLOR=16384]="COLOR",U[U.DEPTH=256]="DEPTH",U[U.STENCIL=1024]="STENCIL",U),ex=((X=ex||{})[X.NORMAL=0]="NORMAL",X[X.ADD=1]="ADD",X[X.MULTIPLY=2]="MULTIPLY",X[X.SCREEN=3]="SCREEN",X[X.OVERLAY=4]="OVERLAY",X[X.DARKEN=5]="DARKEN",X[X.LIGHTEN=6]="LIGHTEN",X[X.COLOR_DODGE=7]="COLOR_DODGE",X[X.COLOR_BURN=8]="COLOR_BURN",X[X.HARD_LIGHT=9]="HARD_LIGHT",X[X.SOFT_LIGHT=10]="SOFT_LIGHT",X[X.DIFFERENCE=11]="DIFFERENCE",X[X.EXCLUSION=12]="EXCLUSION",X[X.HUE=13]="HUE",X[X.SATURATION=14]="SATURATION",X[X.COLOR=15]="COLOR",X[X.LUMINOSITY=16]="LUMINOSITY",X[X.NORMAL_NPM=17]="NORMAL_NPM",X[X.ADD_NPM=18]="ADD_NPM",X[X.SCREEN_NPM=19]="SCREEN_NPM",X[X.NONE=20]="NONE",X[X.SRC_OVER=0]="SRC_OVER",X[X.SRC_IN=21]="SRC_IN",X[X.SRC_OUT=22]="SRC_OUT",X[X.SRC_ATOP=23]="SRC_ATOP",X[X.DST_OVER=24]="DST_OVER",X[X.DST_IN=25]="DST_IN",X[X.DST_OUT=26]="DST_OUT",X[X.DST_ATOP=27]="DST_ATOP",X[X.ERASE=26]="ERASE",X[X.SUBTRACT=28]="SUBTRACT",X[X.XOR=29]="XOR",X),eb=((Y=eb||{})[Y.POINTS=0]="POINTS",Y[Y.LINES=1]="LINES",Y[Y.LINE_LOOP=2]="LINE_LOOP",Y[Y.LINE_STRIP=3]="LINE_STRIP",Y[Y.TRIANGLES=4]="TRIANGLES",Y[Y.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",Y[Y.TRIANGLE_FAN=6]="TRIANGLE_FAN",Y),eT=((K=eT||{})[K.RGBA=6408]="RGBA",K[K.RGB=6407]="RGB",K[K.RG=33319]="RG",K[K.RED=6403]="RED",K[K.RGBA_INTEGER=36249]="RGBA_INTEGER",K[K.RGB_INTEGER=36248]="RGB_INTEGER",K[K.RG_INTEGER=33320]="RG_INTEGER",K[K.RED_INTEGER=36244]="RED_INTEGER",K[K.ALPHA=6406]="ALPHA",K[K.LUMINANCE=6409]="LUMINANCE",K[K.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",K[K.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",K[K.DEPTH_STENCIL=34041]="DEPTH_STENCIL",K),eE=((q=eE||{})[q.TEXTURE_2D=3553]="TEXTURE_2D",q[q.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",q[q.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",q[q.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",q[q.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",q[q.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",q[q.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",q[q.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",q[q.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z",q),eS=((Q=eS||{})[Q.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",Q[Q.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",Q[Q.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",Q[Q.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",Q[Q.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",Q[Q.UNSIGNED_INT=5125]="UNSIGNED_INT",Q[Q.UNSIGNED_INT_10F_11F_11F_REV=35899]="UNSIGNED_INT_10F_11F_11F_REV",Q[Q.UNSIGNED_INT_2_10_10_10_REV=33640]="UNSIGNED_INT_2_10_10_10_REV",Q[Q.UNSIGNED_INT_24_8=34042]="UNSIGNED_INT_24_8",Q[Q.UNSIGNED_INT_5_9_9_9_REV=35902]="UNSIGNED_INT_5_9_9_9_REV",Q[Q.BYTE=5120]="BYTE",Q[Q.SHORT=5122]="SHORT",Q[Q.INT=5124]="INT",Q[Q.FLOAT=5126]="FLOAT",Q[Q.FLOAT_32_UNSIGNED_INT_24_8_REV=36269]="FLOAT_32_UNSIGNED_INT_24_8_REV",Q[Q.HALF_FLOAT=36193]="HALF_FLOAT",Q),eA=((J=eA||{})[J.FLOAT=0]="FLOAT",J[J.INT=1]="INT",J[J.UINT=2]="UINT",J),eR=((Z=eR||{})[Z.NEAREST=0]="NEAREST",Z[Z.LINEAR=1]="LINEAR",Z),ew=((ei=ew||{})[ei.CLAMP=33071]="CLAMP",ei[ei.REPEAT=10497]="REPEAT",ei[ei.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT",ei),eI=((es=eI||{})[es.OFF=0]="OFF",es[es.POW2=1]="POW2",es[es.ON=2]="ON",es[es.ON_MANUAL=3]="ON_MANUAL",es),eP=((eh=eP||{})[eh.NPM=0]="NPM",eh[eh.UNPACK=1]="UNPACK",eh[eh.PMA=2]="PMA",eh[eh.NO_PREMULTIPLIED_ALPHA=0]="NO_PREMULTIPLIED_ALPHA",eh[eh.PREMULTIPLY_ON_UPLOAD=1]="PREMULTIPLY_ON_UPLOAD",eh[eh.PREMULTIPLIED_ALPHA=2]="PREMULTIPLIED_ALPHA",eh),eM=((eu=eM||{})[eu.NO=0]="NO",eu[eu.YES=1]="YES",eu[eu.AUTO=2]="AUTO",eu[eu.BLEND=0]="BLEND",eu[eu.CLEAR=1]="CLEAR",eu[eu.BLIT=2]="BLIT",eu),eC=((ed=eC||{})[ed.AUTO=0]="AUTO",ed[ed.MANUAL=1]="MANUAL",ed),eD=((ec=eD||{}).LOW="lowp",ec.MEDIUM="mediump",ec.HIGH="highp",ec),eO=((ef=eO||{})[ef.NONE=0]="NONE",ef[ef.SCISSOR=1]="SCISSOR",ef[ef.STENCIL=2]="STENCIL",ef[ef.SPRITE=3]="SPRITE",ef[ef.COLOR=4]="COLOR",ef),eN=((ep=eN||{})[ep.RED=1]="RED",ep[ep.GREEN=2]="GREEN",ep[ep.BLUE=4]="BLUE",ep[ep.ALPHA=8]="ALPHA",ep),eB=((em=eB||{})[em.NONE=0]="NONE",em[em.LOW=2]="LOW",em[em.MEDIUM=4]="MEDIUM",em[em.HIGH=8]="HIGH",em),eF=((eg=eF||{})[eg.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",eg[eg.ARRAY_BUFFER=34962]="ARRAY_BUFFER",eg[eg.UNIFORM_BUFFER=35345]="UNIFORM_BUFFER",eg)},1396:function(y,T,A){"use strict";let B,F;A.d(T,{iw:function(){return U.iw},T$:function(){return U.T$},VL:function(){return ei},a$:function(){return BatchDrawCall},JZ:function(){return BatchGeometry},Ie:function(){return BatchTextureArray},lW:function(){return Buffer},qm:function(){return BufferResource},yl:function(){return U.yl},Cd:function(){return ef.Cd},Il:function(){return K.I},ZX:function(){return ef.ZX},lg:function(){return U.lg},Pj:function(){return ef.Pj},nw:function(){return q.n},I2:function(){return U.I2},wn:function(){return eP},wG:function(){return Geometry},A7:function(){return U.A7},KI:function(){return U.WB},G5:function(){return U.G5},y3:function(){return ef.y3},bO:function(){return ObjectRenderer},AB:function(){return ef.AB},_b:function(){return ef._b},E9:function(){return ef.E9},mg:function(){return ef.mg},$r:function(){return eA},ud:function(){return QuadUv},jl:function(){return ef.jl},Ae:function(){return ef.Ae},TI:function(){return RenderTexture},c9:function(){return ef.c9},aH:function(){return U.aH},HS:function(){return ef.HS},pX:function(){return e2},ex:function(){return Shader},ZM:function(){return State},vK:function(){return U.vK},xE:function(){return Texture},UX:function(){return TextureMatrix},vB:function(){return eK.vB},wx:function(){return ef.wx},uF:function(){return eK.uF},oo:function(){return UniformGroup},Rv:function(){return ViewableBuffer},Nt:function(){return U.Nt},e6:function(){return autoDetectRenderer},Y9:function(){return eJ},kP:function(){return eQ},Rw:function(){return q.R},Xd:function(){return X.Xd},P6:function(){return Y}});var U=A(57361),X=A(78706),Y=A(84038),K=A(76278),q=A(90463);let ViewableBuffer=class ViewableBuffer{constructor(y){"number"==typeof y?this.rawBinaryData=new ArrayBuffer(y):y instanceof Uint8Array?this.rawBinaryData=y.buffer:this.rawBinaryData=y,this.uint32View=new Uint32Array(this.rawBinaryData),this.float32View=new Float32Array(this.rawBinaryData)}get int8View(){return this._int8View||(this._int8View=new Int8Array(this.rawBinaryData)),this._int8View}get uint8View(){return this._uint8View||(this._uint8View=new Uint8Array(this.rawBinaryData)),this._uint8View}get int16View(){return this._int16View||(this._int16View=new Int16Array(this.rawBinaryData)),this._int16View}get uint16View(){return this._uint16View||(this._uint16View=new Uint16Array(this.rawBinaryData)),this._uint16View}get int32View(){return this._int32View||(this._int32View=new Int32Array(this.rawBinaryData)),this._int32View}view(y){return this[`${y}View`]}destroy(){this.rawBinaryData=null,this._int8View=null,this._uint8View=null,this._int16View=null,this._uint16View=null,this._int32View=null,this.uint32View=null,this.float32View=null}static sizeOf(y){switch(y){case"int8":case"uint8":return 1;case"int16":case"uint16":return 2;case"int32":case"uint32":case"float32":return 4;default:throw Error(`${y} isn't a valid view type`)}}};let State=class State{constructor(){this.data=0,this.blendMode=U.T$.NORMAL,this.polygonOffset=0,this.blend=!0,this.depthMask=!0}get blend(){return!!(1&this.data)}set blend(y){!!(1&this.data)!==y&&(this.data^=1)}get offsets(){return!!(2&this.data)}set offsets(y){!!(2&this.data)!==y&&(this.data^=2)}get culling(){return!!(4&this.data)}set culling(y){!!(4&this.data)!==y&&(this.data^=4)}get depthTest(){return!!(8&this.data)}set depthTest(y){!!(8&this.data)!==y&&(this.data^=8)}get depthMask(){return!!(32&this.data)}set depthMask(y){!!(32&this.data)!==y&&(this.data^=32)}get clockwiseFrontFace(){return!!(16&this.data)}set clockwiseFrontFace(y){!!(16&this.data)!==y&&(this.data^=16)}get blendMode(){return this._blendMode}set blendMode(y){this.blend=y!==U.T$.NONE,this._blendMode=y}get polygonOffset(){return this._polygonOffset}set polygonOffset(y){this.offsets=!!y,this._polygonOffset=y}toString(){return`[@pixi/core:State blendMode=${this.blendMode} clockwiseFrontFace=${this.clockwiseFrontFace} culling=${this.culling} depthMask=${this.depthMask} polygonOffset=${this.polygonOffset}]`}static for2d(){let y=new State;return y.depthTest=!1,y.blend=!0,y}};let Q=[];function autoDetectResource(y,T){if(!y)return null;let A="";if("string"==typeof y){let T=/\.(\w{3,4})(?:$|\?|#)/i.exec(y);T&&(A=T[1].toLowerCase())}for(let B=Q.length-1;B>=0;--B){let F=Q[B];if(F.test&&F.test(y,A))return new F(y,T)}throw Error("Unrecognized source type to auto-detect Resource")}let Runner_Runner=class Runner_Runner{constructor(y){this.items=[],this._name=y,this._aliasCount=0}emit(y,T,A,B,F,U,X,Y){if(arguments.length>8)throw Error("max arguments reached");let{name:K,items:q}=this;this._aliasCount++;for(let Q=0,J=q.length;Q<J;Q++)q[Q][K](y,T,A,B,F,U,X,Y);return q===this.items&&this._aliasCount--,this}ensureNonAliasedItems(){this._aliasCount>0&&this.items.length>1&&(this._aliasCount=0,this.items=this.items.slice(0))}add(y){return y[this._name]&&(this.ensureNonAliasedItems(),this.remove(y),this.items.push(y)),this}remove(y){let T=this.items.indexOf(y);return -1!==T&&(this.ensureNonAliasedItems(),this.items.splice(T,1)),this}contains(y){return this.items.includes(y)}removeAll(){return this.ensureNonAliasedItems(),this.items.length=0,this}destroy(){this.removeAll(),this.items=null,this._name=null}get empty(){return 0===this.items.length}get name(){return this._name}};Object.defineProperties(Runner_Runner.prototype,{dispatch:{value:Runner_Runner.prototype.emit},run:{value:Runner_Runner.prototype.emit}});let Resource=class Resource{constructor(y=0,T=0){this._width=y,this._height=T,this.destroyed=!1,this.internal=!1,this.onResize=new Runner_Runner("setRealSize"),this.onUpdate=new Runner_Runner("update"),this.onError=new Runner_Runner("onError")}bind(y){this.onResize.add(y),this.onUpdate.add(y),this.onError.add(y),(this._width||this._height)&&this.onResize.emit(this._width,this._height)}unbind(y){this.onResize.remove(y),this.onUpdate.remove(y),this.onError.remove(y)}resize(y,T){(y!==this._width||T!==this._height)&&(this._width=y,this._height=T,this.onResize.emit(y,T))}get valid(){return!!this._width&&!!this._height}update(){this.destroyed||this.onUpdate.emit()}load(){return Promise.resolve(this)}get width(){return this._width}get height(){return this._height}style(y,T,A){return!1}dispose(){}destroy(){this.destroyed||(this.destroyed=!0,this.dispose(),this.onError.removeAll(),this.onError=null,this.onResize.removeAll(),this.onResize=null,this.onUpdate.removeAll(),this.onUpdate=null)}static test(y,T){return!1}};let BufferResource=class BufferResource extends Resource{constructor(y,T){let{width:A,height:B}=T||{};if(!A||!B)throw Error("BufferResource width or height invalid");super(A,B),this.data=y}upload(y,T,A){let B=y.gl;B.pixelStorei(B.UNPACK_PREMULTIPLY_ALPHA_WEBGL,T.alphaMode===U.iw.UNPACK);let F=T.realWidth,X=T.realHeight;return A.width===F&&A.height===X?B.texSubImage2D(T.target,0,0,0,F,X,T.format,A.type,this.data):(A.width=F,A.height=X,B.texImage2D(T.target,0,A.internalFormat,F,X,0,T.format,A.type,this.data)),!0}dispose(){this.data=null}static test(y){return y instanceof Float32Array||y instanceof Uint8Array||y instanceof Uint32Array}};let J={scaleMode:U.aH.NEAREST,format:U.I2.RGBA,alphaMode:U.iw.NPM},Z=class extends Y.EventEmitter{constructor(y=null,T=null){super(),T=Object.assign({},Z.defaultOptions,T);let{alphaMode:A,mipmap:B,anisotropicLevel:F,scaleMode:U,width:K,height:q,wrapMode:Q,format:J,type:ei,target:es,resolution:eh,resourceOptions:eu}=T;!y||y instanceof Resource||((y=autoDetectResource(y,eu)).internal=!0),this.resolution=eh||X.Xd.RESOLUTION,this.width=Math.round((K||0)*this.resolution)/this.resolution,this.height=Math.round((q||0)*this.resolution)/this.resolution,this._mipmap=B,this.anisotropicLevel=F,this._wrapMode=Q,this._scaleMode=U,this.format=J,this.type=ei,this.target=es,this.alphaMode=A,this.uid=(0,Y.uid)(),this.touched=0,this.isPowerOfTwo=!1,this._refreshPOT(),this._glTextures={},this.dirtyId=0,this.dirtyStyleId=0,this.cacheId=null,this.valid=K>0&&q>0,this.textureCacheIds=[],this.destroyed=!1,this.resource=null,this._batchEnabled=0,this._batchLocation=0,this.parentTextureArray=null,this.setResource(y)}get realWidth(){return Math.round(this.width*this.resolution)}get realHeight(){return Math.round(this.height*this.resolution)}get mipmap(){return this._mipmap}set mipmap(y){this._mipmap!==y&&(this._mipmap=y,this.dirtyStyleId++)}get scaleMode(){return this._scaleMode}set scaleMode(y){this._scaleMode!==y&&(this._scaleMode=y,this.dirtyStyleId++)}get wrapMode(){return this._wrapMode}set wrapMode(y){this._wrapMode!==y&&(this._wrapMode=y,this.dirtyStyleId++)}setStyle(y,T){let A;return void 0!==y&&y!==this.scaleMode&&(this.scaleMode=y,A=!0),void 0!==T&&T!==this.mipmap&&(this.mipmap=T,A=!0),A&&this.dirtyStyleId++,this}setSize(y,T,A){return A=A||this.resolution,this.setRealSize(y*A,T*A,A)}setRealSize(y,T,A){return this.resolution=A||this.resolution,this.width=Math.round(y)/this.resolution,this.height=Math.round(T)/this.resolution,this._refreshPOT(),this.update(),this}_refreshPOT(){this.isPowerOfTwo=(0,Y.isPow2)(this.realWidth)&&(0,Y.isPow2)(this.realHeight)}setResolution(y){let T=this.resolution;return T===y||(this.resolution=y,this.valid&&(this.width=Math.round(this.width*T)/y,this.height=Math.round(this.height*T)/y,this.emit("update",this)),this._refreshPOT()),this}setResource(y){if(this.resource===y)return this;if(this.resource)throw Error("Resource can be set only once");return y.bind(this),this.resource=y,this}update(){this.valid?(this.dirtyId++,this.dirtyStyleId++,this.emit("update",this)):this.width>0&&this.height>0&&(this.valid=!0,this.emit("loaded",this),this.emit("update",this))}onError(y){this.emit("error",this,y)}destroy(){this.resource&&(this.resource.unbind(this),this.resource.internal&&this.resource.destroy(),this.resource=null),this.cacheId&&(delete Y.BaseTextureCache[this.cacheId],delete Y.TextureCache[this.cacheId],this.cacheId=null),this.dispose(),Z.removeFromCache(this),this.textureCacheIds=null,this.destroyed=!0}dispose(){this.emit("dispose",this)}castToBaseTexture(){return this}static from(y,T,A=X.Xd.STRICT_TEXTURE_CACHE){let B="string"==typeof y,F=null;if(B)F=y;else{if(!y._pixiId){let A=T?.pixiIdPrefix||"pixiid";y._pixiId=`${A}_${(0,Y.uid)()}`}F=y._pixiId}let U=Y.BaseTextureCache[F];if(B&&A&&!U)throw Error(`The cacheId "${F}" does not exist in BaseTextureCache.`);return U||((U=new Z(y,T)).cacheId=F,Z.addToCache(U,F)),U}static fromBuffer(y,T,A,B){y=y||new Float32Array(T*A*4);let F=new BufferResource(y,{width:T,height:A}),X=y instanceof Float32Array?U.vK.FLOAT:U.vK.UNSIGNED_BYTE;return new Z(F,Object.assign({},J,{type:X},B))}static addToCache(y,T){T&&(y.textureCacheIds.includes(T)||y.textureCacheIds.push(T),Y.BaseTextureCache[T]&&Y.BaseTextureCache[T]!==y&&console.warn(`BaseTexture added to the cache with an id [${T}] that already had an entry`),Y.BaseTextureCache[T]=y)}static removeFromCache(y){if("string"==typeof y){let T=Y.BaseTextureCache[y];if(T){let A=T.textureCacheIds.indexOf(y);return A>-1&&T.textureCacheIds.splice(A,1),delete Y.BaseTextureCache[y],T}}else if(y?.textureCacheIds){for(let T=0;T<y.textureCacheIds.length;++T)delete Y.BaseTextureCache[y.textureCacheIds[T]];return y.textureCacheIds.length=0,y}return null}},ei=Z;ei.defaultOptions={mipmap:U.WB.POW2,anisotropicLevel:0,scaleMode:U.aH.LINEAR,wrapMode:U.Nt.CLAMP,alphaMode:U.iw.UNPACK,target:U.sp.TEXTURE_2D,format:U.I2.RGBA,type:U.vK.UNSIGNED_BYTE},ei._globalBatch=0;let BatchDrawCall=class BatchDrawCall{constructor(){this.texArray=null,this.blend=0,this.type=U.lg.TRIANGLES,this.start=0,this.size=0,this.data=null}};let es=0;let Buffer=class Buffer{constructor(y,T=!0,A=!1){this.data=y||new Float32Array(1),this._glBuffers={},this._updateID=0,this.index=A,this.static=T,this.id=es++,this.disposeRunner=new Runner_Runner("disposeBuffer")}update(y){y instanceof Array&&(y=new Float32Array(y)),this.data=y||this.data,this._updateID++}dispose(){this.disposeRunner.emit(this,!1)}destroy(){this.dispose(),this.data=null}set index(y){this.type=y?U.mr.ELEMENT_ARRAY_BUFFER:U.mr.ARRAY_BUFFER}get index(){return this.type===U.mr.ELEMENT_ARRAY_BUFFER}static from(y){return y instanceof Array&&(y=new Float32Array(y)),new Buffer(y)}};let Attribute=class Attribute{constructor(y,T=0,A=!1,B=U.vK.FLOAT,F,X,Y,K=1){this.buffer=y,this.size=T,this.normalized=A,this.type=B,this.stride=F,this.start=X,this.instance=Y,this.divisor=K}destroy(){this.buffer=null}static from(y,T,A,B,F){return new Attribute(y,T,A,B,F)}};let eh={Float32Array,Uint32Array,Int32Array,Uint8Array},eu={5126:4,5123:2,5121:1},ed=0,ec={Float32Array,Uint32Array,Int32Array,Uint8Array,Uint16Array};let Geometry=class Geometry{constructor(y=[],T={}){this.buffers=y,this.indexBuffer=null,this.attributes=T,this.glVertexArrayObjects={},this.id=ed++,this.instanced=!1,this.instanceCount=1,this.disposeRunner=new Runner_Runner("disposeGeometry"),this.refCount=0}addAttribute(y,T,A=0,B=!1,F,U,X,Y=!1){if(!T)throw Error("You must pass a buffer when creating an attribute");T instanceof Buffer||(T instanceof Array&&(T=new Float32Array(T)),T=new Buffer(T));let K=y.split("|");if(K.length>1){for(let y=0;y<K.length;y++)this.addAttribute(K[y],T,A,B,F);return this}let q=this.buffers.indexOf(T);return -1===q&&(this.buffers.push(T),q=this.buffers.length-1),this.attributes[y]=new Attribute(q,A,B,F,U,X,Y),this.instanced=this.instanced||Y,this}getAttribute(y){return this.attributes[y]}getBuffer(y){return this.buffers[this.getAttribute(y).buffer]}addIndex(y){return y instanceof Buffer||(y instanceof Array&&(y=new Uint16Array(y)),y=new Buffer(y)),y.type=U.mr.ELEMENT_ARRAY_BUFFER,this.indexBuffer=y,this.buffers.includes(y)||this.buffers.push(y),this}getIndex(){return this.indexBuffer}interleave(){let y;if(1===this.buffers.length||2===this.buffers.length&&this.indexBuffer)return this;let T=[],A=[],B=new Buffer;for(y in this.attributes){let B=this.attributes[y],F=this.buffers[B.buffer];T.push(F.data),A.push(B.size*eu[B.type]/4),B.buffer=0}for(y=0,B.data=function(y,T){let A=0,B=0,F={};for(let F=0;F<y.length;F++)B+=T[F],A+=y[F].length;let U=new ArrayBuffer(4*A),X=null,K=0;for(let A=0;A<y.length;A++){let q=T[A],Q=y[A],J=(0,Y.getBufferType)(Q);F[J]||(F[J]=new eh[J](U)),X=F[J];for(let y=0;y<Q.length;y++){let T=(y/q|0)*B+K,A=y%q;X[T+A]=Q[y]}K+=q}return new Float32Array(U)}(T,A);y<this.buffers.length;y++)this.buffers[y]!==this.indexBuffer&&this.buffers[y].destroy();return this.buffers=[B],this.indexBuffer&&this.buffers.push(this.indexBuffer),this}getSize(){for(let y in this.attributes){let T=this.attributes[y],A=this.buffers[T.buffer];return A.data.length/(T.stride/4||T.size)}return 0}dispose(){this.disposeRunner.emit(this,!1)}destroy(){this.dispose(),this.buffers=null,this.indexBuffer=null,this.attributes=null}clone(){let y=new Geometry;for(let T=0;T<this.buffers.length;T++)y.buffers[T]=new Buffer(this.buffers[T].data.slice(0));for(let T in this.attributes){let A=this.attributes[T];y.attributes[T]=new Attribute(A.buffer,A.size,A.normalized,A.type,A.stride,A.start,A.instance)}return this.indexBuffer&&(y.indexBuffer=y.buffers[this.buffers.indexOf(this.indexBuffer)],y.indexBuffer.type=U.mr.ELEMENT_ARRAY_BUFFER),y}static merge(y){let T;let A=new Geometry,B=[],F=[],X=[];for(let A=0;A<y.length;A++){T=y[A];for(let y=0;y<T.buffers.length;y++)F[y]=F[y]||0,F[y]+=T.buffers[y].data.length,X[y]=0}for(let y=0;y<T.buffers.length;y++)B[y]=new ec[(0,Y.getBufferType)(T.buffers[y].data)](F[y]),A.buffers[y]=new Buffer(B[y]);for(let A=0;A<y.length;A++){T=y[A];for(let y=0;y<T.buffers.length;y++)B[y].set(T.buffers[y].data,X[y]),X[y]+=T.buffers[y].data.length}if(A.attributes=T.attributes,T.indexBuffer){A.indexBuffer=A.buffers[T.buffers.indexOf(T.indexBuffer)],A.indexBuffer.type=U.mr.ELEMENT_ARRAY_BUFFER;let B=0,F=0,X=0,Y=0;for(let y=0;y<T.buffers.length;y++)if(T.buffers[y]!==T.indexBuffer){Y=y;break}for(let y in T.attributes){let A=T.attributes[y];(0|A.buffer)===Y&&(F+=A.size*eu[A.type]/4)}for(let T=0;T<y.length;T++){let U=y[T].indexBuffer.data;for(let y=0;y<U.length;y++)A.indexBuffer.data[y+X]+=B;B+=y[T].buffers[Y].data.length/F,X+=U.length}}return A}};let BatchGeometry=class BatchGeometry extends Geometry{constructor(y=!1){super(),this._buffer=new Buffer(null,y,!1),this._indexBuffer=new Buffer(null,y,!0),this.addAttribute("aVertexPosition",this._buffer,2,!1,U.vK.FLOAT).addAttribute("aTextureCoord",this._buffer,2,!1,U.vK.FLOAT).addAttribute("aColor",this._buffer,4,!0,U.vK.UNSIGNED_BYTE).addAttribute("aTextureId",this._buffer,1,!0,U.vK.FLOAT).addIndex(this._indexBuffer)}};var ef=A(64260);let ep=[{test:y=>"float"===y.type&&1===y.size&&!y.isArray,code:y=>`
            if(uv["${y}"] !== ud["${y}"].value)
            {
                ud["${y}"].value = uv["${y}"]
                gl.uniform1f(ud["${y}"].location, uv["${y}"])
            }
            `},{test:(y,T)=>("sampler2D"===y.type||"samplerCube"===y.type||"sampler2DArray"===y.type)&&1===y.size&&!y.isArray&&(null==T||void 0!==T.castToBaseTexture),code:y=>`t = syncData.textureCount++;

            renderer.texture.bind(uv["${y}"], t);

            if(ud["${y}"].value !== t)
            {
                ud["${y}"].value = t;
                gl.uniform1i(ud["${y}"].location, t);
; // eslint-disable-line max-len
            }`},{test:(y,T)=>"mat3"===y.type&&1===y.size&&!y.isArray&&void 0!==T.a,code:y=>`
            gl.uniformMatrix3fv(ud["${y}"].location, false, uv["${y}"].toArray(true));
            `,codeUbo:y=>`
                var ${y}_matrix = uv.${y}.toArray(true);

                data[offset] = ${y}_matrix[0];
                data[offset+1] = ${y}_matrix[1];
                data[offset+2] = ${y}_matrix[2];
        
                data[offset + 4] = ${y}_matrix[3];
                data[offset + 5] = ${y}_matrix[4];
                data[offset + 6] = ${y}_matrix[5];
        
                data[offset + 8] = ${y}_matrix[6];
                data[offset + 9] = ${y}_matrix[7];
                data[offset + 10] = ${y}_matrix[8];
            `},{test:(y,T)=>"vec2"===y.type&&1===y.size&&!y.isArray&&void 0!==T.x,code:y=>`
                cv = ud["${y}"].value;
                v = uv["${y}"];

                if(cv[0] !== v.x || cv[1] !== v.y)
                {
                    cv[0] = v.x;
                    cv[1] = v.y;
                    gl.uniform2f(ud["${y}"].location, v.x, v.y);
                }`,codeUbo:y=>`
                v = uv.${y};

                data[offset] = v.x;
                data[offset+1] = v.y;
            `},{test:y=>"vec2"===y.type&&1===y.size&&!y.isArray,code:y=>`
                cv = ud["${y}"].value;
                v = uv["${y}"];

                if(cv[0] !== v[0] || cv[1] !== v[1])
                {
                    cv[0] = v[0];
                    cv[1] = v[1];
                    gl.uniform2f(ud["${y}"].location, v[0], v[1]);
                }
            `},{test:(y,T)=>"vec4"===y.type&&1===y.size&&!y.isArray&&void 0!==T.width,code:y=>`
                cv = ud["${y}"].value;
                v = uv["${y}"];

                if(cv[0] !== v.x || cv[1] !== v.y || cv[2] !== v.width || cv[3] !== v.height)
                {
                    cv[0] = v.x;
                    cv[1] = v.y;
                    cv[2] = v.width;
                    cv[3] = v.height;
                    gl.uniform4f(ud["${y}"].location, v.x, v.y, v.width, v.height)
                }`,codeUbo:y=>`
                    v = uv.${y};

                    data[offset] = v.x;
                    data[offset+1] = v.y;
                    data[offset+2] = v.width;
                    data[offset+3] = v.height;
                `},{test:(y,T)=>"vec4"===y.type&&1===y.size&&!y.isArray&&void 0!==T.red,code:y=>`
                cv = ud["${y}"].value;
                v = uv["${y}"];

                if(cv[0] !== v.red || cv[1] !== v.green || cv[2] !== v.blue || cv[3] !== v.alpha)
                {
                    cv[0] = v.red;
                    cv[1] = v.green;
                    cv[2] = v.blue;
                    cv[3] = v.alpha;
                    gl.uniform4f(ud["${y}"].location, v.red, v.green, v.blue, v.alpha)
                }`,codeUbo:y=>`
                    v = uv.${y};

                    data[offset] = v.red;
                    data[offset+1] = v.green;
                    data[offset+2] = v.blue;
                    data[offset+3] = v.alpha;
                `},{test:(y,T)=>"vec3"===y.type&&1===y.size&&!y.isArray&&void 0!==T.red,code:y=>`
                cv = ud["${y}"].value;
                v = uv["${y}"];

                if(cv[0] !== v.red || cv[1] !== v.green || cv[2] !== v.blue || cv[3] !== v.a)
                {
                    cv[0] = v.red;
                    cv[1] = v.green;
                    cv[2] = v.blue;
    
                    gl.uniform3f(ud["${y}"].location, v.red, v.green, v.blue)
                }`,codeUbo:y=>`
                    v = uv.${y};

                    data[offset] = v.red;
                    data[offset+1] = v.green;
                    data[offset+2] = v.blue;
                `},{test:y=>"vec4"===y.type&&1===y.size&&!y.isArray,code:y=>`
                cv = ud["${y}"].value;
                v = uv["${y}"];

                if(cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
                {
                    cv[0] = v[0];
                    cv[1] = v[1];
                    cv[2] = v[2];
                    cv[3] = v[3];

                    gl.uniform4f(ud["${y}"].location, v[0], v[1], v[2], v[3])
                }`}],em={float:`
    if (cv !== v)
    {
        cu.value = v;
        gl.uniform1f(location, v);
    }`,vec2:`
    if (cv[0] !== v[0] || cv[1] !== v[1])
    {
        cv[0] = v[0];
        cv[1] = v[1];

        gl.uniform2f(location, v[0], v[1])
    }`,vec3:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];

        gl.uniform3f(location, v[0], v[1], v[2])
    }`,vec4:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];
        cv[3] = v[3];

        gl.uniform4f(location, v[0], v[1], v[2], v[3]);
    }`,int:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1i(location, v);
    }`,ivec2:`
    if (cv[0] !== v[0] || cv[1] !== v[1])
    {
        cv[0] = v[0];
        cv[1] = v[1];

        gl.uniform2i(location, v[0], v[1]);
    }`,ivec3:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];

        gl.uniform3i(location, v[0], v[1], v[2]);
    }`,ivec4:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];
        cv[3] = v[3];

        gl.uniform4i(location, v[0], v[1], v[2], v[3]);
    }`,uint:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1ui(location, v);
    }`,uvec2:`
    if (cv[0] !== v[0] || cv[1] !== v[1])
    {
        cv[0] = v[0];
        cv[1] = v[1];

        gl.uniform2ui(location, v[0], v[1]);
    }`,uvec3:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];

        gl.uniform3ui(location, v[0], v[1], v[2]);
    }`,uvec4:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];
        cv[3] = v[3];

        gl.uniform4ui(location, v[0], v[1], v[2], v[3]);
    }`,bool:`
    if (cv !== v)
    {
        cu.value = v;
        gl.uniform1i(location, v);
    }`,bvec2:`
    if (cv[0] != v[0] || cv[1] != v[1])
    {
        cv[0] = v[0];
        cv[1] = v[1];

        gl.uniform2i(location, v[0], v[1]);
    }`,bvec3:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];

        gl.uniform3i(location, v[0], v[1], v[2]);
    }`,bvec4:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];
        cv[3] = v[3];

        gl.uniform4i(location, v[0], v[1], v[2], v[3]);
    }`,mat2:"gl.uniformMatrix2fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",sampler2D:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1i(location, v);
    }`,samplerCube:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1i(location, v);
    }`,sampler2DArray:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1i(location, v);
    }`},eg={float:"gl.uniform1fv(location, v)",vec2:"gl.uniform2fv(location, v)",vec3:"gl.uniform3fv(location, v)",vec4:"gl.uniform4fv(location, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat2:"gl.uniformMatrix2fv(location, false, v)",int:"gl.uniform1iv(location, v)",ivec2:"gl.uniform2iv(location, v)",ivec3:"gl.uniform3iv(location, v)",ivec4:"gl.uniform4iv(location, v)",uint:"gl.uniform1uiv(location, v)",uvec2:"gl.uniform2uiv(location, v)",uvec3:"gl.uniform3uiv(location, v)",uvec4:"gl.uniform4uiv(location, v)",bool:"gl.uniform1iv(location, v)",bvec2:"gl.uniform2iv(location, v)",bvec3:"gl.uniform3iv(location, v)",bvec4:"gl.uniform4iv(location, v)",sampler2D:"gl.uniform1iv(location, v)",samplerCube:"gl.uniform1iv(location, v)",sampler2DArray:"gl.uniform1iv(location, v)"},e_={},ev=e_,ey={float:1,vec2:2,vec3:3,vec4:4,int:1,ivec2:2,ivec3:3,ivec4:4,uint:1,uvec2:2,uvec3:3,uvec4:4,bool:1,bvec2:2,bvec3:3,bvec4:4,mat2:4,mat3:9,mat4:16,sampler2D:1},ex=null,eb={FLOAT:"float",FLOAT_VEC2:"vec2",FLOAT_VEC3:"vec3",FLOAT_VEC4:"vec4",INT:"int",INT_VEC2:"ivec2",INT_VEC3:"ivec3",INT_VEC4:"ivec4",UNSIGNED_INT:"uint",UNSIGNED_INT_VEC2:"uvec2",UNSIGNED_INT_VEC3:"uvec3",UNSIGNED_INT_VEC4:"uvec4",BOOL:"bool",BOOL_VEC2:"bvec2",BOOL_VEC3:"bvec3",BOOL_VEC4:"bvec4",FLOAT_MAT2:"mat2",FLOAT_MAT3:"mat3",FLOAT_MAT4:"mat4",SAMPLER_2D:"sampler2D",INT_SAMPLER_2D:"sampler2D",UNSIGNED_INT_SAMPLER_2D:"sampler2D",SAMPLER_CUBE:"samplerCube",INT_SAMPLER_CUBE:"samplerCube",UNSIGNED_INT_SAMPLER_CUBE:"samplerCube",SAMPLER_2D_ARRAY:"sampler2DArray",INT_SAMPLER_2D_ARRAY:"sampler2DArray",UNSIGNED_INT_SAMPLER_2D_ARRAY:"sampler2DArray"};function mapType(y,T){if(!ex){let T=Object.keys(eb);ex={};for(let A=0;A<T.length;++A){let B=T[A];ex[y[B]]=eb[B]}}return ex[T]}function setPrecision(y,T,A){if("precision"!==y.substring(0,9)){let B=T;return T===U.cB.HIGH&&A!==U.cB.HIGH&&(B=U.cB.MEDIUM),`precision ${B} float;
${y}`}return A!==U.cB.HIGH&&"precision highp"===y.substring(0,15)?y.replace("precision highp","precision mediump"):y}let eT=0,eE={},eS=class{constructor(y,T,A="pixi-shader",F={}){this.extra={},this.id=eT++,this.vertexSrc=y||eS.defaultVertexSrc,this.fragmentSrc=T||eS.defaultFragmentSrc,this.vertexSrc=this.vertexSrc.trim(),this.fragmentSrc=this.fragmentSrc.trim(),this.extra=F,"#version"!==this.vertexSrc.substring(0,8)&&(eE[A=A.replace(/\s+/g,"-")]?(eE[A]++,A+=`-${eE[A]}`):eE[A]=1,this.vertexSrc=`#define SHADER_NAME ${A}
${this.vertexSrc}`,this.fragmentSrc=`#define SHADER_NAME ${A}
${this.fragmentSrc}`,this.vertexSrc=setPrecision(this.vertexSrc,eS.defaultVertexPrecision,U.cB.HIGH),this.fragmentSrc=setPrecision(this.fragmentSrc,eS.defaultFragmentPrecision,function(){if(!B){B=U.cB.MEDIUM;let y=function(){if(ev===e_||ev?.isContextLost()){let y;let T=X.Xd.ADAPTER.createCanvas();X.Xd.PREFER_ENV>=U.Vi.WEBGL2&&(y=T.getContext("webgl2",{})),y||((y=T.getContext("webgl",{})||T.getContext("experimental-webgl",{}))?y.getExtension("WEBGL_draw_buffers"):y=null),ev=y}return ev}();if(y&&y.getShaderPrecisionFormat){let T=y.getShaderPrecisionFormat(y.FRAGMENT_SHADER,y.HIGH_FLOAT);B=T.precision?U.cB.HIGH:U.cB.MEDIUM}}return B}())),this.glPrograms={},this.syncUniforms=null}static get defaultVertexSrc(){return"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void){\n   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n   vTextureCoord = aTextureCoord;\n}\n"}static get defaultFragmentSrc(){return"varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\n\nvoid main(void){\n   gl_FragColor *= texture2D(uSampler, vTextureCoord);\n}"}static from(y,T,A){let B=y+T,F=Y.ProgramCache[B];return F||(Y.ProgramCache[B]=F=new eS(y,T,A)),F}},eA=eS;eA.defaultVertexPrecision=U.cB.HIGH,eA.defaultFragmentPrecision=Y.isMobile.apple.device?U.cB.HIGH:U.cB.MEDIUM;let eR=0;let UniformGroup=class UniformGroup{constructor(y,T,A){this.group=!0,this.syncUniforms={},this.dirtyId=0,this.id=eR++,this.static=!!T,this.ubo=!!A,y instanceof Buffer?(this.buffer=y,this.buffer.type=U.mr.UNIFORM_BUFFER,this.autoManage=!1,this.ubo=!0):(this.uniforms=y,this.ubo&&(this.buffer=new Buffer(new Float32Array(1)),this.buffer.type=U.mr.UNIFORM_BUFFER,this.autoManage=!0))}update(){this.dirtyId++,!this.autoManage&&this.buffer&&this.buffer.update()}add(y,T,A){if(this.ubo)throw Error("[UniformGroup] uniform groups in ubo mode cannot be modified, or have uniform groups nested in them");this.uniforms[y]=new UniformGroup(T,A)}static from(y,T,A){return new UniformGroup(y,T,A)}static uboFrom(y,T){return new UniformGroup(y,T??!0,!0)}};let Shader=class Shader{constructor(y,T){this.uniformBindCount=0,this.program=y,T?T instanceof UniformGroup?this.uniformGroup=T:this.uniformGroup=new UniformGroup(T):this.uniformGroup=new UniformGroup({}),this.disposeRunner=new Runner_Runner("disposeShader")}checkUniformExists(y,T){if(T.uniforms[y])return!0;for(let A in T.uniforms){let B=T.uniforms[A];if(B.group&&this.checkUniformExists(y,B))return!0}return!1}destroy(){this.uniformGroup=null,this.disposeRunner.emit(this),this.disposeRunner.destroy()}get uniforms(){return this.uniformGroup.uniforms}static from(y,T,A){let B=eA.from(y,T);return new Shader(B,A)}};let BatchShaderGenerator=class BatchShaderGenerator{constructor(y,T){if(this.vertexSrc=y,this.fragTemplate=T,this.programCache={},this.defaultGroupCache={},!T.includes("%count%"))throw Error('Fragment template must contain "%count%".');if(!T.includes("%forloop%"))throw Error('Fragment template must contain "%forloop%".')}generateShader(y){if(!this.programCache[y]){let T=new Int32Array(y);for(let A=0;A<y;A++)T[A]=A;this.defaultGroupCache[y]=UniformGroup.from({uSamplers:T},!0);let A=this.fragTemplate;A=(A=A.replace(/%count%/gi,`${y}`)).replace(/%forloop%/gi,this.generateSampleSrc(y)),this.programCache[y]=new eA(this.vertexSrc,A)}let T={tint:new Float32Array([1,1,1,1]),translationMatrix:new ef.y3,default:this.defaultGroupCache[y]};return new Shader(this.programCache[y],T)}generateSampleSrc(y){let T="";T+="\n\n";for(let A=0;A<y;A++)A>0&&(T+="\nelse "),A<y-1&&(T+=`if(vTextureId < ${A}.5)`),T+=`
{
	color = texture2D(uSamplers[${A}], vTextureCoord);
}`;return T+"\n\n"}};let BatchTextureArray=class BatchTextureArray{constructor(){this.elements=[],this.ids=[],this.count=0}clear(){for(let y=0;y<this.count;y++)this.elements[y]=null;this.count=0}};let ObjectRenderer=class ObjectRenderer{constructor(y){this.renderer=y}flush(){}destroy(){this.renderer=null}start(){}stop(){this.flush()}render(y){}};let ew=class extends ObjectRenderer{constructor(y){super(y),this.setShaderGenerator(),this.geometryClass=BatchGeometry,this.vertexSize=6,this.state=State.for2d(),this.size=4*ew.defaultBatchSize,this._vertexCount=0,this._indexCount=0,this._bufferedElements=[],this._bufferedTextures=[],this._bufferSize=0,this._shader=null,this._packedGeometries=[],this._packedGeometryPoolSize=2,this._flushId=0,this._aBuffers={},this._iBuffers={},this.maxTextures=1,this.renderer.on("prerender",this.onPrerender,this),y.runners.contextChange.add(this),this._dcIndex=0,this._aIndex=0,this._iIndex=0,this._attributeBuffer=null,this._indexBuffer=null,this._tempBoundTextures=[]}static get defaultMaxTextures(){return this._defaultMaxTextures=this._defaultMaxTextures??function(y){let T=!0,A=X.Xd.ADAPTER.getNavigator();if(X.tq.tablet||X.tq.phone){if(X.tq.apple.device){let y=A.userAgent.match(/OS (\d+)_(\d+)?/);if(y){let A=parseInt(y[1],10);A<11&&(T=!1)}}if(X.tq.android.device){let y=A.userAgent.match(/Android\s([0-9.]*)/);if(y){let A=parseInt(y[1],10);A<7&&(T=!1)}}}return T?32:4}(0),this._defaultMaxTextures}static set defaultMaxTextures(y){this._defaultMaxTextures=y}static get canUploadSameBuffer(){return this._canUploadSameBuffer=this._canUploadSameBuffer??!X.tq.apple.device,this._canUploadSameBuffer}static set canUploadSameBuffer(y){this._canUploadSameBuffer=y}get MAX_TEXTURES(){return(0,Y.deprecation)("7.1.0","BatchRenderer#MAX_TEXTURES renamed to BatchRenderer#maxTextures"),this.maxTextures}static get defaultVertexSrc(){return"precision highp float;\nattribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec4 aColor;\nattribute float aTextureId;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform vec4 tint;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\nvarying float vTextureId;\n\nvoid main(void){\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = aTextureCoord;\n    vTextureId = aTextureId;\n    vColor = aColor * tint;\n}\n"}static get defaultFragmentTemplate(){return"varying vec2 vTextureCoord;\nvarying vec4 vColor;\nvarying float vTextureId;\nuniform sampler2D uSamplers[%count%];\n\nvoid main(void){\n    vec4 color;\n    %forloop%\n    gl_FragColor = color * vColor;\n}\n"}setShaderGenerator({vertex:y=ew.defaultVertexSrc,fragment:T=ew.defaultFragmentTemplate}={}){this.shaderGenerator=new BatchShaderGenerator(y,T)}contextChange(){let y=this.renderer.gl;X.Xd.PREFER_ENV===U.Vi.WEBGL_LEGACY?this.maxTextures=1:(this.maxTextures=Math.min(y.getParameter(y.MAX_TEXTURE_IMAGE_UNITS),ew.defaultMaxTextures),this.maxTextures=function(y,T){if(0===y)throw Error("Invalid value of `0` passed to `checkMaxIfStatementsInShader`");let A=T.createShader(T.FRAGMENT_SHADER);for(;;){let B="precision mediump float;\nvoid main(void){\nfloat test = 0.1;\n%forloop%\ngl_FragColor = vec4(0.0);\n}".replace(/%forloop%/gi,function(y){let T="";for(let A=0;A<y;++A)A>0&&(T+="\nelse "),A<y-1&&(T+=`if(test == ${A}.0){}`);return T}(y));if(T.shaderSource(A,B),T.compileShader(A),T.getShaderParameter(A,T.COMPILE_STATUS))break;y=y/2|0}return y}(this.maxTextures,y)),this._shader=this.shaderGenerator.generateShader(this.maxTextures);for(let y=0;y<this._packedGeometryPoolSize;y++)this._packedGeometries[y]=new this.geometryClass;this.initFlushBuffers()}initFlushBuffers(){let{_drawCallPool:y,_textureArrayPool:T}=ew,A=this.size/4,B=Math.floor(A/this.maxTextures)+1;for(;y.length<A;)y.push(new BatchDrawCall);for(;T.length<B;)T.push(new BatchTextureArray);for(let y=0;y<this.maxTextures;y++)this._tempBoundTextures[y]=null}onPrerender(){this._flushId=0}render(y){y._texture.valid&&(this._vertexCount+y.vertexData.length/2>this.size&&this.flush(),this._vertexCount+=y.vertexData.length/2,this._indexCount+=y.indices.length,this._bufferedTextures[this._bufferSize]=y._texture.baseTexture,this._bufferedElements[this._bufferSize++]=y)}buildTexturesAndDrawCalls(){let{_bufferedTextures:y,maxTextures:T}=this,A=ew._textureArrayPool,B=this.renderer.batch,F=this._tempBoundTextures,U=this.renderer.textureGC.count,X=++ei._globalBatch,Y=0,K=A[0],q=0;B.copyBoundTextures(F,T);for(let Q=0;Q<this._bufferSize;++Q){let J=y[Q];y[Q]=null,J._batchEnabled!==X&&(K.count>=T&&(B.boundArray(K,F,X,T),this.buildDrawCalls(K,q,Q),q=Q,K=A[++Y],++X),J._batchEnabled=X,J.touched=U,K.elements[K.count++]=J)}K.count>0&&(B.boundArray(K,F,X,T),this.buildDrawCalls(K,q,this._bufferSize),++Y,++X);for(let y=0;y<F.length;y++)F[y]=null;ei._globalBatch=X}buildDrawCalls(y,T,A){let{_bufferedElements:B,_attributeBuffer:F,_indexBuffer:U,vertexSize:X}=this,K=ew._drawCallPool,q=this._dcIndex,Q=this._aIndex,J=this._iIndex,Z=K[q];Z.start=this._iIndex,Z.texArray=y;for(let ei=T;ei<A;++ei){let A=B[ei],es=A._texture.baseTexture,eh=Y.premultiplyBlendMode[es.alphaMode?1:0][A.blendMode];B[ei]=null,T<ei&&Z.blend!==eh&&(Z.size=J-Z.start,T=ei,(Z=K[++q]).texArray=y,Z.start=J),this.packInterleavedGeometry(A,F,U,Q,J),Q+=A.vertexData.length/2*X,J+=A.indices.length,Z.blend=eh}T<A&&(Z.size=J-Z.start,++q),this._dcIndex=q,this._aIndex=Q,this._iIndex=J}bindAndClearTexArray(y){let T=this.renderer.texture;for(let A=0;A<y.count;A++)T.bind(y.elements[A],y.ids[A]),y.elements[A]=null;y.count=0}updateGeometry(){let{_packedGeometries:y,_attributeBuffer:T,_indexBuffer:A}=this;ew.canUploadSameBuffer?(y[this._flushId]._buffer.update(T.rawBinaryData),y[this._flushId]._indexBuffer.update(A),this.renderer.geometry.updateBuffers()):(this._packedGeometryPoolSize<=this._flushId&&(this._packedGeometryPoolSize++,y[this._flushId]=new this.geometryClass),y[this._flushId]._buffer.update(T.rawBinaryData),y[this._flushId]._indexBuffer.update(A),this.renderer.geometry.bind(y[this._flushId]),this.renderer.geometry.updateBuffers(),this._flushId++)}drawBatches(){let y=this._dcIndex,{gl:T,state:A}=this.renderer,B=ew._drawCallPool,F=null;for(let U=0;U<y;U++){let{texArray:y,type:X,size:Y,start:K,blend:q}=B[U];F!==y&&(F=y,this.bindAndClearTexArray(y)),this.state.blendMode=q,A.set(this.state),T.drawElements(X,Y,T.UNSIGNED_SHORT,2*K)}}flush(){0!==this._vertexCount&&(this._attributeBuffer=this.getAttributeBuffer(this._vertexCount),this._indexBuffer=this.getIndexBuffer(this._indexCount),this._aIndex=0,this._iIndex=0,this._dcIndex=0,this.buildTexturesAndDrawCalls(),this.updateGeometry(),this.drawBatches(),this._bufferSize=0,this._vertexCount=0,this._indexCount=0)}start(){this.renderer.state.set(this.state),this.renderer.texture.ensureSamplerType(this.maxTextures),this.renderer.shader.bind(this._shader),ew.canUploadSameBuffer&&this.renderer.geometry.bind(this._packedGeometries[this._flushId])}stop(){this.flush()}destroy(){for(let y=0;y<this._packedGeometryPoolSize;y++)this._packedGeometries[y]&&this._packedGeometries[y].destroy();this.renderer.off("prerender",this.onPrerender,this),this._aBuffers=null,this._iBuffers=null,this._packedGeometries=null,this._attributeBuffer=null,this._indexBuffer=null,this._shader&&(this._shader.destroy(),this._shader=null),super.destroy()}getAttributeBuffer(y){let T=(0,Y.nextPow2)(Math.ceil(y/8)),A=(0,Y.log2)(T),B=8*T;this._aBuffers.length<=A&&(this._iBuffers.length=A+1);let F=this._aBuffers[B];return F||(this._aBuffers[B]=F=new ViewableBuffer(B*this.vertexSize*4)),F}getIndexBuffer(y){let T=(0,Y.nextPow2)(Math.ceil(y/12)),A=(0,Y.log2)(T),B=12*T;this._iBuffers.length<=A&&(this._iBuffers.length=A+1);let F=this._iBuffers[A];return F||(this._iBuffers[A]=F=new Uint16Array(B)),F}packInterleavedGeometry(y,T,A,B,F){let{uint32View:U,float32View:X}=T,Y=B/this.vertexSize,q=y.uvs,Q=y.indices,J=y.vertexData,Z=y._texture.baseTexture._batchLocation,ei=Math.min(y.worldAlpha,1),es=K.I.shared.setValue(y._tintRGB).toPremultiplied(ei,y._texture.baseTexture.alphaMode>0);for(let y=0;y<J.length;y+=2)X[B++]=J[y],X[B++]=J[y+1],X[B++]=q[y],X[B++]=q[y+1],U[B++]=es,X[B++]=Z;for(let y=0;y<Q.length;y++)A[F++]=Y+Q[y]}};ew.defaultBatchSize=4096,ew.extension={name:"batch",type:q.n.RendererPlugin},ew._drawCallPool=[],ew._textureArrayPool=[],q.R.add(ew);let eI=class extends Shader{constructor(y,T,A){let B=eA.from(y||eI.defaultVertexSrc,T||eI.defaultFragmentSrc);super(B,A),this.padding=0,this.resolution=eI.defaultResolution,this.multisample=eI.defaultMultisample,this.enabled=!0,this.autoFit=!0,this.state=new State}apply(y,T,A,B,F){y.applyFilter(this,T,A,B)}get blendMode(){return this.state.blendMode}set blendMode(y){this.state.blendMode=y}get resolution(){return this._resolution}set resolution(y){this._resolution=y}static get defaultVertexSrc(){return"attribute vec2 aVertexPosition;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nuniform vec4 inputSize;\nuniform vec4 outputFrame;\n\nvec4 filterVertexPosition( void )\n{\n    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;\n\n    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);\n}\n\nvec2 filterTextureCoord( void )\n{\n    return aVertexPosition * (outputFrame.zw * inputSize.zw);\n}\n\nvoid main(void)\n{\n    gl_Position = filterVertexPosition();\n    vTextureCoord = filterTextureCoord();\n}\n"}static get defaultFragmentSrc(){return"varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\n\nvoid main(void){\n   gl_FragColor = texture2D(uSampler, vTextureCoord);\n}\n"}},eP=eI;eP.defaultResolution=1,eP.defaultMultisample=U.G5.NONE;let BackgroundSystem=class BackgroundSystem{constructor(){this.clearBeforeRender=!0,this._backgroundColor=new K.I(0),this.alpha=1}init(y){this.clearBeforeRender=y.clearBeforeRender;let{backgroundColor:T,background:A,backgroundAlpha:B}=y,F=A??T;void 0!==F&&(this.color=F),this.alpha=B}get color(){return this._backgroundColor.value}set color(y){this._backgroundColor.setValue(y)}get alpha(){return this._backgroundColor.alpha}set alpha(y){this._backgroundColor.setAlpha(y)}get backgroundColor(){return this._backgroundColor}destroy(){}};BackgroundSystem.defaultOptions={backgroundAlpha:1,backgroundColor:0,clearBeforeRender:!0},BackgroundSystem.extension={type:[q.n.RendererSystem,q.n.CanvasRendererSystem],name:"background"},q.R.add(BackgroundSystem);let BatchSystem=class BatchSystem{constructor(y){this.renderer=y,this.emptyRenderer=new ObjectRenderer(y),this.currentRenderer=this.emptyRenderer}setObjectRenderer(y){this.currentRenderer!==y&&(this.currentRenderer.stop(),this.currentRenderer=y,this.currentRenderer.start())}flush(){this.setObjectRenderer(this.emptyRenderer)}reset(){this.setObjectRenderer(this.emptyRenderer)}copyBoundTextures(y,T){let{boundTextures:A}=this.renderer.texture;for(let B=T-1;B>=0;--B)y[B]=A[B]||null,y[B]&&(y[B]._batchLocation=B)}boundArray(y,T,A,B){let{elements:F,ids:U,count:X}=y,Y=0;for(let y=0;y<X;y++){let X=F[y],K=X._batchLocation;if(K>=0&&K<B&&T[K]===X){U[y]=K;continue}for(;Y<B;){let B=T[Y];if(B&&B._batchEnabled===A&&B._batchLocation===Y){Y++;continue}U[y]=Y,X._batchLocation=Y,T[Y]=X;break}}}destroy(){this.renderer=null}};BatchSystem.extension={type:q.n.RendererSystem,name:"batch"},q.R.add(BatchSystem);let eM=0;let ContextSystem=class ContextSystem{constructor(y){this.renderer=y,this.webGLVersion=1,this.extensions={},this.supports={uint32Indices:!1},this.handleContextLost=this.handleContextLost.bind(this),this.handleContextRestored=this.handleContextRestored.bind(this)}get isLost(){return!this.gl||this.gl.isContextLost()}contextChange(y){this.gl=y,this.renderer.gl=y,this.renderer.CONTEXT_UID=eM++}init(y){if(y.context)this.initFromContext(y.context);else{let T=this.renderer.background.alpha<1,A=y.premultipliedAlpha;this.preserveDrawingBuffer=y.preserveDrawingBuffer,this.useContextAlpha=y.useContextAlpha,this.powerPreference=y.powerPreference,this.initFromOptions({alpha:T,premultipliedAlpha:A,antialias:y.antialias,stencil:!0,preserveDrawingBuffer:y.preserveDrawingBuffer,powerPreference:y.powerPreference})}}initFromContext(y){this.gl=y,this.validateContext(y),this.renderer.gl=y,this.renderer.CONTEXT_UID=eM++,this.renderer.runners.contextChange.emit(y);let T=this.renderer.view;void 0!==T.addEventListener&&(T.addEventListener("webglcontextlost",this.handleContextLost,!1),T.addEventListener("webglcontextrestored",this.handleContextRestored,!1))}initFromOptions(y){let T=this.createContext(this.renderer.view,y);this.initFromContext(T)}createContext(y,T){let A;if(X.Xd.PREFER_ENV>=U.Vi.WEBGL2&&(A=y.getContext("webgl2",T)),A)this.webGLVersion=2;else if(this.webGLVersion=1,!(A=y.getContext("webgl",T)||y.getContext("experimental-webgl",T)))throw Error("This browser does not support WebGL. Try using the canvas renderer");return this.gl=A,this.getExtensions(),this.gl}getExtensions(){let{gl:y}=this,T={loseContext:y.getExtension("WEBGL_lose_context"),anisotropicFiltering:y.getExtension("EXT_texture_filter_anisotropic"),floatTextureLinear:y.getExtension("OES_texture_float_linear"),s3tc:y.getExtension("WEBGL_compressed_texture_s3tc"),s3tc_sRGB:y.getExtension("WEBGL_compressed_texture_s3tc_srgb"),etc:y.getExtension("WEBGL_compressed_texture_etc"),etc1:y.getExtension("WEBGL_compressed_texture_etc1"),pvrtc:y.getExtension("WEBGL_compressed_texture_pvrtc")||y.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc"),atc:y.getExtension("WEBGL_compressed_texture_atc"),astc:y.getExtension("WEBGL_compressed_texture_astc")};1===this.webGLVersion?Object.assign(this.extensions,T,{drawBuffers:y.getExtension("WEBGL_draw_buffers"),depthTexture:y.getExtension("WEBGL_depth_texture"),vertexArrayObject:y.getExtension("OES_vertex_array_object")||y.getExtension("MOZ_OES_vertex_array_object")||y.getExtension("WEBKIT_OES_vertex_array_object"),uint32ElementIndex:y.getExtension("OES_element_index_uint"),floatTexture:y.getExtension("OES_texture_float"),floatTextureLinear:y.getExtension("OES_texture_float_linear"),textureHalfFloat:y.getExtension("OES_texture_half_float"),textureHalfFloatLinear:y.getExtension("OES_texture_half_float_linear")}):2===this.webGLVersion&&Object.assign(this.extensions,T,{colorBufferFloat:y.getExtension("EXT_color_buffer_float")})}handleContextLost(y){y.preventDefault(),setTimeout(()=>{this.gl.isContextLost()&&this.extensions.loseContext&&this.extensions.loseContext.restoreContext()},0)}handleContextRestored(){this.renderer.runners.contextChange.emit(this.gl)}destroy(){let y=this.renderer.view;this.renderer=null,void 0!==y.removeEventListener&&(y.removeEventListener("webglcontextlost",this.handleContextLost),y.removeEventListener("webglcontextrestored",this.handleContextRestored)),this.gl.useProgram(null),this.extensions.loseContext&&this.extensions.loseContext.loseContext()}postrender(){this.renderer.objectRenderer.renderingToScreen&&this.gl.flush()}validateContext(y){let T=y.getContextAttributes(),A="WebGL2RenderingContext"in globalThis&&y instanceof globalThis.WebGL2RenderingContext;A&&(this.webGLVersion=2),T&&!T.stencil&&console.warn("Provided WebGL context does not have a stencil buffer, masks may not render correctly");let B=A||!!y.getExtension("OES_element_index_uint");this.supports.uint32Indices=B,B||console.warn("Provided WebGL context does not support 32 index buffer, complex graphics may not render correctly")}};ContextSystem.defaultOptions={context:null,antialias:!1,premultipliedAlpha:!0,preserveDrawingBuffer:!1,powerPreference:"default"},ContextSystem.extension={type:q.n.RendererSystem,name:"context"},q.R.add(ContextSystem);let DepthResource=class DepthResource extends BufferResource{upload(y,T,A){let B=y.gl;B.pixelStorei(B.UNPACK_PREMULTIPLY_ALPHA_WEBGL,T.alphaMode===U.iw.UNPACK);let F=T.realWidth,X=T.realHeight;return A.width===F&&A.height===X?B.texSubImage2D(T.target,0,0,0,F,X,T.format,A.type,this.data):(A.width=F,A.height=X,B.texImage2D(T.target,0,A.internalFormat,F,X,0,T.format,A.type,this.data)),!0}};let Framebuffer=class Framebuffer{constructor(y,T){this.width=Math.round(y||100),this.height=Math.round(T||100),this.stencil=!1,this.depth=!1,this.dirtyId=0,this.dirtyFormat=0,this.dirtySize=0,this.depthTexture=null,this.colorTextures=[],this.glFramebuffers={},this.disposeRunner=new Runner_Runner("disposeFramebuffer"),this.multisample=U.G5.NONE}get colorTexture(){return this.colorTextures[0]}addColorTexture(y=0,T){return this.colorTextures[y]=T||new ei(null,{scaleMode:U.aH.NEAREST,resolution:1,mipmap:U.WB.OFF,width:this.width,height:this.height}),this.dirtyId++,this.dirtyFormat++,this}addDepthTexture(y){return this.depthTexture=y||new ei(new DepthResource(null,{width:this.width,height:this.height}),{scaleMode:U.aH.NEAREST,resolution:1,width:this.width,height:this.height,mipmap:U.WB.OFF,format:U.I2.DEPTH_COMPONENT,type:U.vK.UNSIGNED_SHORT}),this.dirtyId++,this.dirtyFormat++,this}enableDepth(){return this.depth=!0,this.dirtyId++,this.dirtyFormat++,this}enableStencil(){return this.stencil=!0,this.dirtyId++,this.dirtyFormat++,this}resize(y,T){if(y=Math.round(y),T=Math.round(T),y!==this.width||T!==this.height){this.width=y,this.height=T,this.dirtyId++,this.dirtySize++;for(let A=0;A<this.colorTextures.length;A++){let B=this.colorTextures[A],F=B.resolution;B.setSize(y/F,T/F)}if(this.depthTexture){let A=this.depthTexture.resolution;this.depthTexture.setSize(y/A,T/A)}}}dispose(){this.disposeRunner.emit(this,!1)}destroyDepthTexture(){this.depthTexture&&(this.depthTexture.destroy(),this.depthTexture=null,++this.dirtyId,++this.dirtyFormat)}};let BaseRenderTexture=class BaseRenderTexture extends ei{constructor(y={}){if("number"==typeof y){let T=arguments[0],A=arguments[1],B=arguments[2],F=arguments[3];y={width:T,height:A,scaleMode:B,resolution:F}}y.width=y.width||100,y.height=y.height||100,y.multisample??(y.multisample=U.G5.NONE),super(null,y),this.mipmap=U.WB.OFF,this.valid=!0,this._clear=new K.I([0,0,0,0]),this.framebuffer=new Framebuffer(this.realWidth,this.realHeight).addColorTexture(0,this),this.framebuffer.multisample=y.multisample,this.maskStack=[],this.filterStack=[{}]}set clearColor(y){this._clear.setValue(y)}get clearColor(){return this._clear.value}get clear(){return this._clear}resize(y,T){this.framebuffer.resize(y*this.resolution,T*this.resolution),this.setRealSize(this.framebuffer.width,this.framebuffer.height)}dispose(){this.framebuffer.dispose(),super.dispose()}destroy(){super.destroy(),this.framebuffer.destroyDepthTexture(),this.framebuffer=null}};let BaseImageResource=class BaseImageResource extends Resource{constructor(y){let T=y.naturalWidth||y.videoWidth||y.width,A=y.naturalHeight||y.videoHeight||y.height;super(T,A),this.source=y,this.noSubImage=!1}static crossOrigin(y,T,A){void 0!==A||T.startsWith("data:")?!1!==A&&(y.crossOrigin="string"==typeof A?A:"anonymous"):y.crossOrigin=(0,Y.determineCrossOrigin)(T)}upload(y,T,A,B){let F=y.gl,X=T.realWidth,Y=T.realHeight;if(B=B||this.source,"undefined"!=typeof HTMLImageElement&&B instanceof HTMLImageElement){if(!B.complete||0===B.naturalWidth)return!1}else if("undefined"!=typeof HTMLVideoElement&&B instanceof HTMLVideoElement&&B.readyState<=1&&0===B.buffered.length)return!1;return F.pixelStorei(F.UNPACK_PREMULTIPLY_ALPHA_WEBGL,T.alphaMode===U.iw.UNPACK),this.noSubImage||T.target!==F.TEXTURE_2D||A.width!==X||A.height!==Y?(A.width=X,A.height=Y,F.texImage2D(T.target,0,A.internalFormat,T.format,A.type,B)):F.texSubImage2D(F.TEXTURE_2D,0,0,0,T.format,A.type,B),!0}update(){if(this.destroyed)return;let y=this.source,T=y.naturalWidth||y.videoWidth||y.width,A=y.naturalHeight||y.videoHeight||y.height;this.resize(T,A),super.update()}dispose(){this.source=null}};let ImageResource=class ImageResource extends BaseImageResource{constructor(y,T){if(T=T||{},"string"==typeof y){let A=new Image;BaseImageResource.crossOrigin(A,y,T.crossorigin),A.src=y,y=A}super(y),!y.complete&&this._width&&this._height&&(this._width=0,this._height=0),this.url=y.src,this._process=null,this.preserveBitmap=!1,this.createBitmap=(T.createBitmap??X.Xd.CREATE_IMAGE_BITMAP)&&!!globalThis.createImageBitmap,this.alphaMode="number"==typeof T.alphaMode?T.alphaMode:null,this.bitmap=null,this._load=null,!1!==T.autoLoad&&this.load()}load(y){return this._load||(void 0!==y&&(this.createBitmap=y),this._load=new Promise((y,T)=>{let A=this.source;this.url=A.src;let completed=()=>{this.destroyed||(A.onload=null,A.onerror=null,this.resize(A.width,A.height),this._load=null,this.createBitmap?y(this.process()):y(this))};A.complete&&A.src?completed():(A.onload=completed,A.onerror=y=>{T(y),this.onError.emit(y)})})),this._load}process(){let y=this.source;if(null!==this._process)return this._process;if(null!==this.bitmap||!globalThis.createImageBitmap)return Promise.resolve(this);let T=globalThis.createImageBitmap,A=!y.crossOrigin||"anonymous"===y.crossOrigin;return this._process=fetch(y.src,{mode:A?"cors":"no-cors"}).then(y=>y.blob()).then(A=>T(A,0,0,y.width,y.height,{premultiplyAlpha:null===this.alphaMode||this.alphaMode===U.iw.UNPACK?"premultiply":"none"})).then(y=>this.destroyed?Promise.reject():(this.bitmap=y,this.update(),this._process=null,Promise.resolve(this))),this._process}upload(y,T,A){if("number"==typeof this.alphaMode&&(T.alphaMode=this.alphaMode),!this.createBitmap)return super.upload(y,T,A);if(!this.bitmap&&(this.process(),!this.bitmap))return!1;if(super.upload(y,T,A,this.bitmap),!this.preserveBitmap){let y=!0,B=T._glTextures;for(let F in B){let U=B[F];if(U!==A&&U.dirtyId!==T.dirtyId){y=!1;break}}y&&(this.bitmap.close&&this.bitmap.close(),this.bitmap=null)}return!0}dispose(){this.source.onload=null,this.source.onerror=null,super.dispose(),this.bitmap&&(this.bitmap.close(),this.bitmap=null),this._process=null,this._load=null}static test(y){return"undefined"!=typeof HTMLImageElement&&("string"==typeof y||y instanceof HTMLImageElement)}};let TextureUvs=class TextureUvs{constructor(){this.x0=0,this.y0=0,this.x1=1,this.y1=0,this.x2=1,this.y2=1,this.x3=0,this.y3=1,this.uvsFloat32=new Float32Array(8)}set(y,T,A){let B=T.width,F=T.height;if(A){let T=y.width/2/B,U=y.height/2/F,X=y.x/B+T,Y=y.y/F+U;A=ef.Lv.add(A,ef.Lv.NW),this.x0=X+T*ef.Lv.uX(A),this.y0=Y+U*ef.Lv.uY(A),A=ef.Lv.add(A,2),this.x1=X+T*ef.Lv.uX(A),this.y1=Y+U*ef.Lv.uY(A),A=ef.Lv.add(A,2),this.x2=X+T*ef.Lv.uX(A),this.y2=Y+U*ef.Lv.uY(A),A=ef.Lv.add(A,2),this.x3=X+T*ef.Lv.uX(A),this.y3=Y+U*ef.Lv.uY(A)}else this.x0=y.x/B,this.y0=y.y/F,this.x1=(y.x+y.width)/B,this.y1=y.y/F,this.x2=(y.x+y.width)/B,this.y2=(y.y+y.height)/F,this.x3=y.x/B,this.y3=(y.y+y.height)/F;this.uvsFloat32[0]=this.x0,this.uvsFloat32[1]=this.y0,this.uvsFloat32[2]=this.x1,this.uvsFloat32[3]=this.y1,this.uvsFloat32[4]=this.x2,this.uvsFloat32[5]=this.y2,this.uvsFloat32[6]=this.x3,this.uvsFloat32[7]=this.y3}toString(){return`[@pixi/core:TextureUvs x0=${this.x0} y0=${this.y0} x1=${this.x1} y1=${this.y1} x2=${this.x2} y2=${this.y2} x3=${this.x3} y3=${this.y3}]`}};let eC=new TextureUvs;function removeAllHandlers(y){y.destroy=function(){},y.on=function(){},y.once=function(){},y.emit=function(){}}let Texture=class Texture extends Y.EventEmitter{constructor(y,T,A,B,F,U,X){if(super(),this.noFrame=!1,T||(this.noFrame=!0,T=new ef.Ae(0,0,1,1)),y instanceof Texture&&(y=y.baseTexture),this.baseTexture=y,this._frame=T,this.trim=B,this.valid=!1,this._uvs=eC,this.uvMatrix=null,this.orig=A||T,this._rotate=Number(F||0),!0===F)this._rotate=2;else if(this._rotate%2!=0)throw Error("attempt to use diamond-shaped UVs. If you are sure, set rotation manually");this.defaultAnchor=U?new ef.E9(U.x,U.y):new ef.E9(0,0),this.defaultBorders=X,this._updateID=0,this.textureCacheIds=[],y.valid?this.noFrame?y.valid&&this.onBaseTextureUpdated(y):this.frame=T:y.once("loaded",this.onBaseTextureUpdated,this),this.noFrame&&y.on("update",this.onBaseTextureUpdated,this)}update(){this.baseTexture.resource&&this.baseTexture.resource.update()}onBaseTextureUpdated(y){if(this.noFrame){if(!this.baseTexture.valid)return;this._frame.width=y.width,this._frame.height=y.height,this.valid=!0,this.updateUvs()}else this.frame=this._frame;this.emit("update",this)}destroy(y){if(this.baseTexture){if(y){let{resource:y}=this.baseTexture;y?.url&&Y.TextureCache[y.url]&&Texture.removeFromCache(y.url),this.baseTexture.destroy()}this.baseTexture.off("loaded",this.onBaseTextureUpdated,this),this.baseTexture.off("update",this.onBaseTextureUpdated,this),this.baseTexture=null}this._frame=null,this._uvs=null,this.trim=null,this.orig=null,this.valid=!1,Texture.removeFromCache(this),this.textureCacheIds=null}clone(){let y=this._frame.clone(),T=this._frame===this.orig?y:this.orig.clone(),A=new Texture(this.baseTexture,!this.noFrame&&y,T,this.trim?.clone(),this.rotate,this.defaultAnchor,this.defaultBorders);return this.noFrame&&(A._frame=y),A}updateUvs(){this._uvs===eC&&(this._uvs=new TextureUvs),this._uvs.set(this._frame,this.baseTexture,this.rotate),this._updateID++}static from(y,T={},A=X.Xd.STRICT_TEXTURE_CACHE){let B="string"==typeof y,F=null;if(B)F=y;else if(y instanceof ei){if(!y.cacheId){let A=T?.pixiIdPrefix||"pixiid";y.cacheId=`${A}-${(0,Y.uid)()}`,ei.addToCache(y,y.cacheId)}F=y.cacheId}else{if(!y._pixiId){let A=T?.pixiIdPrefix||"pixiid";y._pixiId=`${A}_${(0,Y.uid)()}`}F=y._pixiId}let U=Y.TextureCache[F];if(B&&A&&!U)throw Error(`The cacheId "${F}" does not exist in TextureCache.`);return U||y instanceof ei?!U&&y instanceof ei&&(U=new Texture(y),Texture.addToCache(U,F)):(T.resolution||(T.resolution=(0,Y.getResolutionOfUrl)(y)),(U=new Texture(new ei(y,T))).baseTexture.cacheId=F,ei.addToCache(U.baseTexture,F),Texture.addToCache(U,F)),U}static fromURL(y,T){let A=Object.assign({autoLoad:!1},T?.resourceOptions),B=Texture.from(y,Object.assign({resourceOptions:A},T),!1),F=B.baseTexture.resource;return B.baseTexture.valid?Promise.resolve(B):F.load().then(()=>Promise.resolve(B))}static fromBuffer(y,T,A,B){return new Texture(ei.fromBuffer(y,T,A,B))}static fromLoader(y,T,A,B){let F=new ei(y,Object.assign({scaleMode:ei.defaultOptions.scaleMode,resolution:(0,Y.getResolutionOfUrl)(T)},B)),{resource:U}=F;U instanceof ImageResource&&(U.url=T);let X=new Texture(F);return(A||(A=T),ei.addToCache(X.baseTexture,A),Texture.addToCache(X,A),A!==T&&(ei.addToCache(X.baseTexture,T),Texture.addToCache(X,T)),X.baseTexture.valid)?Promise.resolve(X):new Promise(y=>{X.baseTexture.once("loaded",()=>y(X))})}static addToCache(y,T){T&&(y.textureCacheIds.includes(T)||y.textureCacheIds.push(T),Y.TextureCache[T]&&Y.TextureCache[T]!==y&&console.warn(`Texture added to the cache with an id [${T}] that already had an entry`),Y.TextureCache[T]=y)}static removeFromCache(y){if("string"==typeof y){let T=Y.TextureCache[y];if(T){let A=T.textureCacheIds.indexOf(y);return A>-1&&T.textureCacheIds.splice(A,1),delete Y.TextureCache[y],T}}else if(y?.textureCacheIds){for(let T=0;T<y.textureCacheIds.length;++T)Y.TextureCache[y.textureCacheIds[T]]===y&&delete Y.TextureCache[y.textureCacheIds[T]];return y.textureCacheIds.length=0,y}return null}get resolution(){return this.baseTexture.resolution}get frame(){return this._frame}set frame(y){this._frame=y,this.noFrame=!1;let{x:T,y:A,width:B,height:F}=y,U=T+B>this.baseTexture.width,X=A+F>this.baseTexture.height;if(U||X){let y=`X: ${T} + ${B} = ${T+B} > ${this.baseTexture.width}`,Y=`Y: ${A} + ${F} = ${A+F} > ${this.baseTexture.height}`;throw Error(`Texture Error: frame does not fit inside the base Texture dimensions: ${y} ${U&&X?"and":"or"} ${Y}`)}this.valid=B&&F&&this.baseTexture.valid,this.trim||this.rotate||(this.orig=y),this.valid&&this.updateUvs()}get rotate(){return this._rotate}set rotate(y){this._rotate=y,this.valid&&this.updateUvs()}get width(){return this.orig.width}get height(){return this.orig.height}castToBaseTexture(){return this.baseTexture}static get EMPTY(){return Texture._EMPTY||(Texture._EMPTY=new Texture(new ei),removeAllHandlers(Texture._EMPTY),removeAllHandlers(Texture._EMPTY.baseTexture)),Texture._EMPTY}static get WHITE(){if(!Texture._WHITE){let y=X.Xd.ADAPTER.createCanvas(16,16),T=y.getContext("2d");y.width=16,y.height=16,T.fillStyle="white",T.fillRect(0,0,16,16),Texture._WHITE=new Texture(ei.from(y)),removeAllHandlers(Texture._WHITE),removeAllHandlers(Texture._WHITE.baseTexture)}return Texture._WHITE}};let RenderTexture=class RenderTexture extends Texture{constructor(y,T){super(y,T),this.valid=!0,this.filterFrame=null,this.filterPoolKey=null,this.updateUvs()}get framebuffer(){return this.baseTexture.framebuffer}get multisample(){return this.framebuffer.multisample}set multisample(y){this.framebuffer.multisample=y}resize(y,T,A=!0){let B=this.baseTexture.resolution,F=Math.round(y*B)/B,U=Math.round(T*B)/B;this.valid=F>0&&U>0,this._frame.width=this.orig.width=F,this._frame.height=this.orig.height=U,A&&this.baseTexture.resize(F,U),this.updateUvs()}setResolution(y){let{baseTexture:T}=this;T.resolution!==y&&(T.setResolution(y),this.resize(T.width,T.height,!1))}static create(y){return new RenderTexture(new BaseRenderTexture(y))}};let RenderTexturePool=class RenderTexturePool{constructor(y){this.texturePool={},this.textureOptions=y||{},this.enableFullScreen=!1,this._pixelsWidth=0,this._pixelsHeight=0}createTexture(y,T,A=U.G5.NONE){let B=new BaseRenderTexture(Object.assign({width:y,height:T,resolution:1,multisample:A},this.textureOptions));return new RenderTexture(B)}getOptimalTexture(y,T,A=1,B=U.G5.NONE){let F;y=Math.ceil(y*A-1e-6),T=Math.ceil(T*A-1e-6),this.enableFullScreen&&y===this._pixelsWidth&&T===this._pixelsHeight?F=B>1?-B:-1:(y=(0,Y.nextPow2)(y),T=(0,Y.nextPow2)(T),F=((65535&y)<<16|65535&T)>>>0,B>1&&(F+=4294967296*B)),this.texturePool[F]||(this.texturePool[F]=[]);let X=this.texturePool[F].pop();return X||(X=this.createTexture(y,T,B)),X.filterPoolKey=F,X.setResolution(A),X}getFilterTexture(y,T,A){let B=this.getOptimalTexture(y.width,y.height,T||y.resolution,A||U.G5.NONE);return B.filterFrame=y.filterFrame,B}returnTexture(y){let T=y.filterPoolKey;y.filterFrame=null,this.texturePool[T].push(y)}returnFilterTexture(y){this.returnTexture(y)}clear(y){if(y=!1!==y)for(let y in this.texturePool){let T=this.texturePool[y];if(T)for(let y=0;y<T.length;y++)T[y].destroy(!0)}this.texturePool={}}setScreenSize(y){if(y.width!==this._pixelsWidth||y.height!==this._pixelsHeight){for(let T in this.enableFullScreen=y.width>0&&y.height>0,this.texturePool){if(!(0>Number(T)))continue;let y=this.texturePool[T];if(y)for(let T=0;T<y.length;T++)y[T].destroy(!0);this.texturePool[T]=[]}this._pixelsWidth=y.width,this._pixelsHeight=y.height}}};RenderTexturePool.SCREEN_KEY=-1;let Quad=class Quad extends Geometry{constructor(){super(),this.addAttribute("aVertexPosition",new Float32Array([0,0,1,0,1,1,0,1])).addIndex([0,1,3,2])}};let QuadUv=class QuadUv extends Geometry{constructor(){super(),this.vertices=new Float32Array([-1,-1,1,-1,1,1,-1,1]),this.uvs=new Float32Array([0,0,1,0,1,1,0,1]),this.vertexBuffer=new Buffer(this.vertices),this.uvBuffer=new Buffer(this.uvs),this.addAttribute("aVertexPosition",this.vertexBuffer).addAttribute("aTextureCoord",this.uvBuffer).addIndex([0,1,2,0,2,3])}map(y,T){let A=0,B=0;return this.uvs[0]=A,this.uvs[1]=B,this.uvs[2]=A+T.width/y.width,this.uvs[3]=B,this.uvs[4]=A+T.width/y.width,this.uvs[5]=B+T.height/y.height,this.uvs[6]=A,this.uvs[7]=B+T.height/y.height,A=T.x,B=T.y,this.vertices[0]=A,this.vertices[1]=B,this.vertices[2]=A+T.width,this.vertices[3]=B,this.vertices[4]=A+T.width,this.vertices[5]=B+T.height,this.vertices[6]=A,this.vertices[7]=B+T.height,this.invalidate(),this}invalidate(){return this.vertexBuffer._updateID++,this.uvBuffer._updateID++,this}};let FilterState=class FilterState{constructor(){this.renderTexture=null,this.target=null,this.legacy=!1,this.resolution=1,this.multisample=U.G5.NONE,this.sourceFrame=new ef.Ae,this.destinationFrame=new ef.Ae,this.bindingSourceFrame=new ef.Ae,this.bindingDestinationFrame=new ef.Ae,this.filters=[],this.transform=null}clear(){this.target=null,this.filters=null,this.renderTexture=null}};let eD=[new ef.E9,new ef.E9,new ef.E9,new ef.E9],eO=new ef.y3;let FilterSystem=class FilterSystem{constructor(y){this.renderer=y,this.defaultFilterStack=[{}],this.texturePool=new RenderTexturePool,this.statePool=[],this.quad=new Quad,this.quadUv=new QuadUv,this.tempRect=new ef.Ae,this.activeState={},this.globalUniforms=new UniformGroup({outputFrame:new ef.Ae,inputSize:new Float32Array(4),inputPixel:new Float32Array(4),inputClamp:new Float32Array(4),resolution:1,filterArea:new Float32Array(4),filterClamp:new Float32Array(4)},!0),this.forceClear=!1,this.useMaxPadding=!1}init(){this.texturePool.setScreenSize(this.renderer.view)}push(y,T){let A=this.renderer,B=this.defaultFilterStack,F=this.statePool.pop()||new FilterState,U=this.renderer.renderTexture,X=T[0].resolution,Y=T[0].multisample,K=T[0].padding,q=T[0].autoFit,Q=T[0].legacy??!0;for(let y=1;y<T.length;y++){let A=T[y];X=Math.min(X,A.resolution),Y=Math.min(Y,A.multisample),K=this.useMaxPadding?Math.max(K,A.padding):K+A.padding,q=q&&A.autoFit,Q=Q||(A.legacy??!0)}1===B.length&&(this.defaultFilterStack[0].renderTexture=U.current),B.push(F),F.resolution=X,F.multisample=Y,F.legacy=Q,F.target=y,F.sourceFrame.copyFrom(y.filterArea||y.getBounds(!0)),F.sourceFrame.pad(K);let J=this.tempRect.copyFrom(U.sourceFrame);A.projection.transform&&this.transformAABB(eO.copyFrom(A.projection.transform).invert(),J),q?(F.sourceFrame.fit(J),(F.sourceFrame.width<=0||F.sourceFrame.height<=0)&&(F.sourceFrame.width=0,F.sourceFrame.height=0)):F.sourceFrame.intersects(J)||(F.sourceFrame.width=0,F.sourceFrame.height=0),this.roundFrame(F.sourceFrame,U.current?U.current.resolution:A.resolution,U.sourceFrame,U.destinationFrame,A.projection.transform),F.renderTexture=this.getOptimalFilterTexture(F.sourceFrame.width,F.sourceFrame.height,X,Y),F.filters=T,F.destinationFrame.width=F.renderTexture.width,F.destinationFrame.height=F.renderTexture.height;let Z=this.tempRect;Z.x=0,Z.y=0,Z.width=F.sourceFrame.width,Z.height=F.sourceFrame.height,F.renderTexture.filterFrame=F.sourceFrame,F.bindingSourceFrame.copyFrom(U.sourceFrame),F.bindingDestinationFrame.copyFrom(U.destinationFrame),F.transform=A.projection.transform,A.projection.transform=null,U.bind(F.renderTexture,F.sourceFrame,Z),A.framebuffer.clear(0,0,0,0)}pop(){let y=this.defaultFilterStack,T=y.pop(),A=T.filters;this.activeState=T;let B=this.globalUniforms.uniforms;B.outputFrame=T.sourceFrame,B.resolution=T.resolution;let F=B.inputSize,X=B.inputPixel,Y=B.inputClamp;if(F[0]=T.destinationFrame.width,F[1]=T.destinationFrame.height,F[2]=1/F[0],F[3]=1/F[1],X[0]=Math.round(F[0]*T.resolution),X[1]=Math.round(F[1]*T.resolution),X[2]=1/X[0],X[3]=1/X[1],Y[0]=.5*X[2],Y[1]=.5*X[3],Y[2]=T.sourceFrame.width*F[2]-.5*X[2],Y[3]=T.sourceFrame.height*F[3]-.5*X[3],T.legacy){let y=B.filterArea;y[0]=T.destinationFrame.width,y[1]=T.destinationFrame.height,y[2]=T.sourceFrame.x,y[3]=T.sourceFrame.y,B.filterClamp=B.inputClamp}this.globalUniforms.update();let K=y[y.length-1];if(this.renderer.framebuffer.blit(),1===A.length)A[0].apply(this,T.renderTexture,K.renderTexture,U.yl.BLEND,T),this.returnFilterTexture(T.renderTexture);else{let y=T.renderTexture,B=this.getOptimalFilterTexture(y.width,y.height,T.resolution);B.filterFrame=y.filterFrame;let F=0;for(F=0;F<A.length-1;++F){1===F&&T.multisample>1&&((B=this.getOptimalFilterTexture(y.width,y.height,T.resolution)).filterFrame=y.filterFrame),A[F].apply(this,y,B,U.yl.CLEAR,T);let X=y;y=B,B=X}A[F].apply(this,y,K.renderTexture,U.yl.BLEND,T),F>1&&T.multisample>1&&this.returnFilterTexture(T.renderTexture),this.returnFilterTexture(y),this.returnFilterTexture(B)}T.clear(),this.statePool.push(T)}bindAndClear(y,T=U.yl.CLEAR){let{renderTexture:A,state:B}=this.renderer;if(y===this.defaultFilterStack[this.defaultFilterStack.length-1].renderTexture?this.renderer.projection.transform=this.activeState.transform:this.renderer.projection.transform=null,y?.filterFrame){let T=this.tempRect;T.x=0,T.y=0,T.width=y.filterFrame.width,T.height=y.filterFrame.height,A.bind(y,y.filterFrame,T)}else y!==this.defaultFilterStack[this.defaultFilterStack.length-1].renderTexture?A.bind(y):this.renderer.renderTexture.bind(y,this.activeState.bindingSourceFrame,this.activeState.bindingDestinationFrame);let F=1&B.stateId||this.forceClear;(T===U.yl.CLEAR||T===U.yl.BLIT&&F)&&this.renderer.framebuffer.clear(0,0,0,0)}applyFilter(y,T,A,B){let F=this.renderer;F.state.set(y.state),this.bindAndClear(A,B),y.uniforms.uSampler=T,y.uniforms.filterGlobals=this.globalUniforms,F.shader.bind(y),y.legacy=!!y.program.attributeData.aTextureCoord,y.legacy?(this.quadUv.map(T._frame,T.filterFrame),F.geometry.bind(this.quadUv),F.geometry.draw(U.lg.TRIANGLES)):(F.geometry.bind(this.quad),F.geometry.draw(U.lg.TRIANGLE_STRIP))}calculateSpriteMatrix(y,T){let{sourceFrame:A,destinationFrame:B}=this.activeState,{orig:F}=T._texture,U=y.set(B.width,0,0,B.height,A.x,A.y),X=T.worldTransform.copyTo(ef.y3.TEMP_MATRIX);return X.invert(),U.prepend(X),U.scale(1/F.width,1/F.height),U.translate(T.anchor.x,T.anchor.y),U}destroy(){this.renderer=null,this.texturePool.clear(!1)}getOptimalFilterTexture(y,T,A=1,B=U.G5.NONE){return this.texturePool.getOptimalTexture(y,T,A,B)}getFilterTexture(y,T,A){if("number"==typeof y){let A=y;y=T,T=A}y=y||this.activeState.renderTexture;let B=this.texturePool.getOptimalTexture(y.width,y.height,T||y.resolution,A||U.G5.NONE);return B.filterFrame=y.filterFrame,B}returnFilterTexture(y){this.texturePool.returnTexture(y)}emptyPool(){this.texturePool.clear(!0)}resize(){this.texturePool.setScreenSize(this.renderer.view)}transformAABB(y,T){let A=eD[0],B=eD[1],F=eD[2],U=eD[3];A.set(T.left,T.top),B.set(T.left,T.bottom),F.set(T.right,T.top),U.set(T.right,T.bottom),y.apply(A,A),y.apply(B,B),y.apply(F,F),y.apply(U,U);let X=Math.min(A.x,B.x,F.x,U.x),Y=Math.min(A.y,B.y,F.y,U.y),K=Math.max(A.x,B.x,F.x,U.x),q=Math.max(A.y,B.y,F.y,U.y);T.x=X,T.y=Y,T.width=K-X,T.height=q-Y}roundFrame(y,T,A,B,F){if(!(y.width<=0)&&!(y.height<=0)&&!(A.width<=0)&&!(A.height<=0)){if(F){let{a:y,b:T,c:A,d:B}=F;if((Math.abs(T)>1e-4||Math.abs(A)>1e-4)&&(Math.abs(y)>1e-4||Math.abs(B)>1e-4))return}(F=F?eO.copyFrom(F):eO.identity()).translate(-A.x,-A.y).scale(B.width/A.width,B.height/A.height).translate(B.x,B.y),this.transformAABB(F,y),y.ceil(T),this.transformAABB(F.invert(),y)}}};FilterSystem.extension={type:q.n.RendererSystem,name:"filter"},q.R.add(FilterSystem);let GLFramebuffer=class GLFramebuffer{constructor(y){this.framebuffer=y,this.stencil=null,this.dirtyId=-1,this.dirtyFormat=-1,this.dirtySize=-1,this.multisample=U.G5.NONE,this.msaaBuffer=null,this.blitFramebuffer=null,this.mipLevel=0}};let eN=new ef.Ae;let FramebufferSystem=class FramebufferSystem{constructor(y){this.renderer=y,this.managedFramebuffers=[],this.unknownFramebuffer=new Framebuffer(10,10),this.msaaSamples=null}contextChange(){this.disposeAll(!0);let y=this.gl=this.renderer.gl;if(this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.current=this.unknownFramebuffer,this.viewport=new ef.Ae,this.hasMRT=!0,this.writeDepthTexture=!0,1===this.renderer.context.webGLVersion){let T=this.renderer.context.extensions.drawBuffers,A=this.renderer.context.extensions.depthTexture;X.Xd.PREFER_ENV===U.Vi.WEBGL_LEGACY&&(T=null,A=null),T?y.drawBuffers=y=>T.drawBuffersWEBGL(y):(this.hasMRT=!1,y.drawBuffers=()=>{}),A||(this.writeDepthTexture=!1)}else this.msaaSamples=y.getInternalformatParameter(y.RENDERBUFFER,y.RGBA8,y.SAMPLES)}bind(y,T,A=0){let{gl:B}=this;if(y){let F=y.glFramebuffers[this.CONTEXT_UID]||this.initFramebuffer(y);this.current!==y&&(this.current=y,B.bindFramebuffer(B.FRAMEBUFFER,F.framebuffer)),F.mipLevel!==A&&(y.dirtyId++,y.dirtyFormat++,F.mipLevel=A),F.dirtyId!==y.dirtyId&&(F.dirtyId=y.dirtyId,F.dirtyFormat!==y.dirtyFormat?(F.dirtyFormat=y.dirtyFormat,F.dirtySize=y.dirtySize,this.updateFramebuffer(y,A)):F.dirtySize!==y.dirtySize&&(F.dirtySize=y.dirtySize,this.resizeFramebuffer(y)));for(let T=0;T<y.colorTextures.length;T++){let A=y.colorTextures[T];this.renderer.texture.unbind(A.parentTextureArray||A)}if(y.depthTexture&&this.renderer.texture.unbind(y.depthTexture),T){let y=T.width>>A,B=T.height>>A,F=y/T.width;this.setViewport(T.x*F,T.y*F,y,B)}else{let T=y.width>>A,B=y.height>>A;this.setViewport(0,0,T,B)}}else this.current&&(this.current=null,B.bindFramebuffer(B.FRAMEBUFFER,null)),T?this.setViewport(T.x,T.y,T.width,T.height):this.setViewport(0,0,this.renderer.width,this.renderer.height)}setViewport(y,T,A,B){let F=this.viewport;y=Math.round(y),T=Math.round(T),A=Math.round(A),B=Math.round(B),(F.width!==A||F.height!==B||F.x!==y||F.y!==T)&&(F.x=y,F.y=T,F.width=A,F.height=B,this.gl.viewport(y,T,A,B))}get size(){return this.current?{x:0,y:0,width:this.current.width,height:this.current.height}:{x:0,y:0,width:this.renderer.width,height:this.renderer.height}}clear(y,T,A,B,F=U.V0.COLOR|U.V0.DEPTH){let{gl:X}=this;X.clearColor(y,T,A,B),X.clear(F)}initFramebuffer(y){let{gl:T}=this,A=new GLFramebuffer(T.createFramebuffer());return A.multisample=this.detectSamples(y.multisample),y.glFramebuffers[this.CONTEXT_UID]=A,this.managedFramebuffers.push(y),y.disposeRunner.add(this),A}resizeFramebuffer(y){let{gl:T}=this,A=y.glFramebuffers[this.CONTEXT_UID];A.stencil&&(T.bindRenderbuffer(T.RENDERBUFFER,A.stencil),A.msaaBuffer?T.renderbufferStorageMultisample(T.RENDERBUFFER,A.multisample,T.DEPTH24_STENCIL8,y.width,y.height):T.renderbufferStorage(T.RENDERBUFFER,T.DEPTH_STENCIL,y.width,y.height));let B=y.colorTextures,F=B.length;T.drawBuffers||(F=Math.min(F,1));for(let U=0;U<F;U++){let F=B[U],X=F.parentTextureArray||F;this.renderer.texture.bind(X,0),0===U&&A.msaaBuffer&&(T.bindRenderbuffer(T.RENDERBUFFER,A.msaaBuffer),T.renderbufferStorageMultisample(T.RENDERBUFFER,A.multisample,X._glTextures[this.CONTEXT_UID].internalFormat,y.width,y.height))}y.depthTexture&&this.writeDepthTexture&&this.renderer.texture.bind(y.depthTexture,0)}updateFramebuffer(y,T){let{gl:A}=this,B=y.glFramebuffers[this.CONTEXT_UID],F=y.colorTextures,U=F.length;A.drawBuffers||(U=Math.min(U,1)),B.multisample>1&&this.canMultisampleFramebuffer(y)?B.msaaBuffer=B.msaaBuffer||A.createRenderbuffer():B.msaaBuffer&&(A.deleteRenderbuffer(B.msaaBuffer),B.msaaBuffer=null,B.blitFramebuffer&&(B.blitFramebuffer.dispose(),B.blitFramebuffer=null));let X=[];for(let Y=0;Y<U;Y++){let U=F[Y],K=U.parentTextureArray||U;this.renderer.texture.bind(K,0),0===Y&&B.msaaBuffer?(A.bindRenderbuffer(A.RENDERBUFFER,B.msaaBuffer),A.renderbufferStorageMultisample(A.RENDERBUFFER,B.multisample,K._glTextures[this.CONTEXT_UID].internalFormat,y.width,y.height),A.framebufferRenderbuffer(A.FRAMEBUFFER,A.COLOR_ATTACHMENT0,A.RENDERBUFFER,B.msaaBuffer)):(A.framebufferTexture2D(A.FRAMEBUFFER,A.COLOR_ATTACHMENT0+Y,U.target,K._glTextures[this.CONTEXT_UID].texture,T),X.push(A.COLOR_ATTACHMENT0+Y))}if(X.length>1&&A.drawBuffers(X),y.depthTexture){let B=this.writeDepthTexture;if(B){let B=y.depthTexture;this.renderer.texture.bind(B,0),A.framebufferTexture2D(A.FRAMEBUFFER,A.DEPTH_ATTACHMENT,A.TEXTURE_2D,B._glTextures[this.CONTEXT_UID].texture,T)}}(y.stencil||y.depth)&&!(y.depthTexture&&this.writeDepthTexture)?(B.stencil=B.stencil||A.createRenderbuffer(),A.bindRenderbuffer(A.RENDERBUFFER,B.stencil),B.msaaBuffer?A.renderbufferStorageMultisample(A.RENDERBUFFER,B.multisample,A.DEPTH24_STENCIL8,y.width,y.height):A.renderbufferStorage(A.RENDERBUFFER,A.DEPTH_STENCIL,y.width,y.height),A.framebufferRenderbuffer(A.FRAMEBUFFER,A.DEPTH_STENCIL_ATTACHMENT,A.RENDERBUFFER,B.stencil)):B.stencil&&(A.deleteRenderbuffer(B.stencil),B.stencil=null)}canMultisampleFramebuffer(y){return 1!==this.renderer.context.webGLVersion&&y.colorTextures.length<=1&&!y.depthTexture}detectSamples(y){let{msaaSamples:T}=this,A=U.G5.NONE;if(y<=1||null===T)return A;for(let B=0;B<T.length;B++)if(T[B]<=y){A=T[B];break}return 1===A&&(A=U.G5.NONE),A}blit(y,T,A){let{current:B,renderer:F,gl:U,CONTEXT_UID:X}=this;if(2!==F.context.webGLVersion||!B)return;let Y=B.glFramebuffers[X];if(!Y)return;if(!y){if(!Y.msaaBuffer)return;let T=B.colorTextures[0];if(!T)return;Y.blitFramebuffer||(Y.blitFramebuffer=new Framebuffer(B.width,B.height),Y.blitFramebuffer.addColorTexture(0,T)),(y=Y.blitFramebuffer).colorTextures[0]!==T&&(y.colorTextures[0]=T,y.dirtyId++,y.dirtyFormat++),(y.width!==B.width||y.height!==B.height)&&(y.width=B.width,y.height=B.height,y.dirtyId++,y.dirtySize++)}T||((T=eN).width=B.width,T.height=B.height),A||(A=T);let K=T.width===A.width&&T.height===A.height;this.bind(y),U.bindFramebuffer(U.READ_FRAMEBUFFER,Y.framebuffer),U.blitFramebuffer(T.left,T.top,T.right,T.bottom,A.left,A.top,A.right,A.bottom,U.COLOR_BUFFER_BIT,K?U.NEAREST:U.LINEAR),U.bindFramebuffer(U.READ_FRAMEBUFFER,y.glFramebuffers[this.CONTEXT_UID].framebuffer)}disposeFramebuffer(y,T){let A=y.glFramebuffers[this.CONTEXT_UID],B=this.gl;if(!A)return;delete y.glFramebuffers[this.CONTEXT_UID];let F=this.managedFramebuffers.indexOf(y);F>=0&&this.managedFramebuffers.splice(F,1),y.disposeRunner.remove(this),!T&&(B.deleteFramebuffer(A.framebuffer),A.msaaBuffer&&B.deleteRenderbuffer(A.msaaBuffer),A.stencil&&B.deleteRenderbuffer(A.stencil)),A.blitFramebuffer&&this.disposeFramebuffer(A.blitFramebuffer,T)}disposeAll(y){let T=this.managedFramebuffers;this.managedFramebuffers=[];for(let A=0;A<T.length;A++)this.disposeFramebuffer(T[A],y)}forceStencil(){let y=this.current;if(!y)return;let T=y.glFramebuffers[this.CONTEXT_UID];if(!T||T.stencil)return;y.stencil=!0;let A=y.width,B=y.height,F=this.gl,U=F.createRenderbuffer();F.bindRenderbuffer(F.RENDERBUFFER,U),T.msaaBuffer?F.renderbufferStorageMultisample(F.RENDERBUFFER,T.multisample,F.DEPTH24_STENCIL8,A,B):F.renderbufferStorage(F.RENDERBUFFER,F.DEPTH_STENCIL,A,B),T.stencil=U,F.framebufferRenderbuffer(F.FRAMEBUFFER,F.DEPTH_STENCIL_ATTACHMENT,F.RENDERBUFFER,U)}reset(){this.current=this.unknownFramebuffer,this.viewport=new ef.Ae}destroy(){this.renderer=null}};FramebufferSystem.extension={type:q.n.RendererSystem,name:"framebuffer"},q.R.add(FramebufferSystem);let eB={5126:4,5123:2,5121:1};let GeometrySystem=class GeometrySystem{constructor(y){this.renderer=y,this._activeGeometry=null,this._activeVao=null,this.hasVao=!0,this.hasInstance=!0,this.canUseUInt32ElementIndex=!1,this.managedGeometries={}}contextChange(){this.disposeAll(!0);let y=this.gl=this.renderer.gl,T=this.renderer.context;if(this.CONTEXT_UID=this.renderer.CONTEXT_UID,2!==T.webGLVersion){let T=this.renderer.context.extensions.vertexArrayObject;X.Xd.PREFER_ENV===U.Vi.WEBGL_LEGACY&&(T=null),T?(y.createVertexArray=()=>T.createVertexArrayOES(),y.bindVertexArray=y=>T.bindVertexArrayOES(y),y.deleteVertexArray=y=>T.deleteVertexArrayOES(y)):(this.hasVao=!1,y.createVertexArray=()=>null,y.bindVertexArray=()=>null,y.deleteVertexArray=()=>null)}if(2!==T.webGLVersion){let T=y.getExtension("ANGLE_instanced_arrays");T?(y.vertexAttribDivisor=(y,A)=>T.vertexAttribDivisorANGLE(y,A),y.drawElementsInstanced=(y,A,B,F,U)=>T.drawElementsInstancedANGLE(y,A,B,F,U),y.drawArraysInstanced=(y,A,B,F)=>T.drawArraysInstancedANGLE(y,A,B,F)):this.hasInstance=!1}this.canUseUInt32ElementIndex=2===T.webGLVersion||!!T.extensions.uint32ElementIndex}bind(y,T){T=T||this.renderer.shader.shader;let{gl:A}=this,B=y.glVertexArrayObjects[this.CONTEXT_UID],F=!1;B||(this.managedGeometries[y.id]=y,y.disposeRunner.add(this),y.glVertexArrayObjects[this.CONTEXT_UID]=B={},F=!0);let U=B[T.program.id]||this.initGeometryVao(y,T,F);this._activeGeometry=y,this._activeVao!==U&&(this._activeVao=U,this.hasVao?A.bindVertexArray(U):this.activateVao(y,T.program)),this.updateBuffers()}reset(){this.unbind()}updateBuffers(){let y=this._activeGeometry,T=this.renderer.buffer;for(let A=0;A<y.buffers.length;A++){let B=y.buffers[A];T.update(B)}}checkCompatibility(y,T){let A=y.attributes,B=T.attributeData;for(let y in B)if(!A[y])throw Error(`shader and geometry incompatible, geometry missing the "${y}" attribute`)}getSignature(y,T){let A=y.attributes,B=T.attributeData,F=["g",y.id];for(let y in A)B[y]&&F.push(y,B[y].location);return F.join("-")}initGeometryVao(y,T,A=!0){let B=this.gl,F=this.CONTEXT_UID,X=this.renderer.buffer,Y=T.program;Y.glPrograms[F]||this.renderer.shader.generateProgram(T),this.checkCompatibility(y,Y);let K=this.getSignature(y,Y),q=y.glVertexArrayObjects[this.CONTEXT_UID],Q=q[K];if(Q)return q[Y.id]=Q,Q;let J=y.buffers,Z=y.attributes,ei={},es={};for(let y in J)ei[y]=0,es[y]=0;for(let y in Z)!Z[y].size&&Y.attributeData[y]?Z[y].size=Y.attributeData[y].size:Z[y].size||console.warn(`PIXI Geometry attribute '${y}' size cannot be determined (likely the bound shader does not have the attribute)`),ei[Z[y].buffer]+=Z[y].size*eB[Z[y].type];for(let y in Z){let T=Z[y],A=T.size;void 0===T.stride&&(ei[T.buffer]===A*eB[T.type]?T.stride=0:T.stride=ei[T.buffer]),void 0===T.start&&(T.start=es[T.buffer],es[T.buffer]+=A*eB[T.type])}Q=B.createVertexArray(),B.bindVertexArray(Q);for(let y=0;y<J.length;y++){let T=J[y];X.bind(T),A&&T._glBuffers[F].refCount++}return this.activateVao(y,Y),q[Y.id]=Q,q[K]=Q,B.bindVertexArray(null),X.unbind(U.mr.ARRAY_BUFFER),Q}disposeGeometry(y,T){if(!this.managedGeometries[y.id])return;delete this.managedGeometries[y.id];let A=y.glVertexArrayObjects[this.CONTEXT_UID],B=this.gl,F=y.buffers,U=this.renderer?.buffer;if(y.disposeRunner.remove(this),A){if(U)for(let y=0;y<F.length;y++){let A=F[y]._glBuffers[this.CONTEXT_UID];A&&(A.refCount--,0!==A.refCount||T||U.dispose(F[y],T))}if(!T){for(let y in A)if("g"===y[0]){let T=A[y];this._activeVao===T&&this.unbind(),B.deleteVertexArray(T)}}delete y.glVertexArrayObjects[this.CONTEXT_UID]}}disposeAll(y){let T=Object.keys(this.managedGeometries);for(let A=0;A<T.length;A++)this.disposeGeometry(this.managedGeometries[T[A]],y)}activateVao(y,T){let A=this.gl,B=this.CONTEXT_UID,F=this.renderer.buffer,U=y.buffers,X=y.attributes;y.indexBuffer&&F.bind(y.indexBuffer);let Y=null;for(let y in X){let K=X[y],q=U[K.buffer],Q=q._glBuffers[B];if(T.attributeData[y]){Y!==Q&&(F.bind(q),Y=Q);let B=T.attributeData[y].location;if(A.enableVertexAttribArray(B),A.vertexAttribPointer(B,K.size,K.type||A.FLOAT,K.normalized,K.stride,K.start),K.instance){if(this.hasInstance)A.vertexAttribDivisor(B,K.divisor);else throw Error("geometry error, GPU Instancing is not supported on this device")}}}}draw(y,T,A,B){let{gl:F}=this,U=this._activeGeometry;if(U.indexBuffer){let X=U.indexBuffer.data.BYTES_PER_ELEMENT,Y=2===X?F.UNSIGNED_SHORT:F.UNSIGNED_INT;2===X||4===X&&this.canUseUInt32ElementIndex?U.instanced?F.drawElementsInstanced(y,T||U.indexBuffer.data.length,Y,(A||0)*X,B||1):F.drawElements(y,T||U.indexBuffer.data.length,Y,(A||0)*X):console.warn("unsupported index buffer type: uint32")}else U.instanced?F.drawArraysInstanced(y,A,T||U.getSize(),B||1):F.drawArrays(y,A,T||U.getSize());return this}unbind(){this.gl.bindVertexArray(null),this._activeVao=null,this._activeGeometry=null}destroy(){this.renderer=null}};GeometrySystem.extension={type:q.n.RendererSystem,name:"geometry"},q.R.add(GeometrySystem);let eF=new ef.y3;let TextureMatrix=class TextureMatrix{constructor(y,T){this._texture=y,this.mapCoord=new ef.y3,this.uClampFrame=new Float32Array(4),this.uClampOffset=new Float32Array(2),this._textureID=-1,this._updateID=0,this.clampOffset=0,this.clampMargin=void 0===T?.5:T,this.isSimple=!1}get texture(){return this._texture}set texture(y){this._texture=y,this._textureID=-1}multiplyUvs(y,T){void 0===T&&(T=y);let A=this.mapCoord;for(let B=0;B<y.length;B+=2){let F=y[B],U=y[B+1];T[B]=F*A.a+U*A.c+A.tx,T[B+1]=F*A.b+U*A.d+A.ty}return T}update(y){let T=this._texture;if(!T||!T.valid||!y&&this._textureID===T._updateID)return!1;this._textureID=T._updateID,this._updateID++;let A=T._uvs;this.mapCoord.set(A.x1-A.x0,A.y1-A.y0,A.x3-A.x0,A.y3-A.y0,A.x0,A.y0);let B=T.orig,F=T.trim;F&&(eF.set(B.width/F.width,0,0,B.height/F.height,-F.x/F.width,-F.y/F.height),this.mapCoord.append(eF));let U=T.baseTexture,X=this.uClampFrame,Y=this.clampMargin/U.resolution,K=this.clampOffset;return X[0]=(T._frame.x+Y+K)/U.width,X[1]=(T._frame.y+Y+K)/U.height,X[2]=(T._frame.x+T._frame.width-Y+K)/U.width,X[3]=(T._frame.y+T._frame.height-Y+K)/U.height,this.uClampOffset[0]=K/U.realWidth,this.uClampOffset[1]=K/U.realHeight,this.isSimple=T._frame.width===U.width&&T._frame.height===U.height&&0===T.rotate,!0}};let SpriteMaskFilter=class SpriteMaskFilter extends eP{constructor(y,T,A){let B=null;"string"!=typeof y&&void 0===T&&void 0===A&&(B=y,y=void 0,T=void 0,A=void 0),super(y||"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 otherMatrix;\n\nvarying vec2 vMaskCoord;\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = aTextureCoord;\n    vMaskCoord = ( otherMatrix * vec3( aTextureCoord, 1.0)  ).xy;\n}\n",T||"varying vec2 vMaskCoord;\nvarying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform sampler2D mask;\nuniform float alpha;\nuniform float npmAlpha;\nuniform vec4 maskClamp;\n\nvoid main(void)\n{\n    float clip = step(3.5,\n        step(maskClamp.x, vMaskCoord.x) +\n        step(maskClamp.y, vMaskCoord.y) +\n        step(vMaskCoord.x, maskClamp.z) +\n        step(vMaskCoord.y, maskClamp.w));\n\n    vec4 original = texture2D(uSampler, vTextureCoord);\n    vec4 masky = texture2D(mask, vMaskCoord);\n    float alphaMul = 1.0 - npmAlpha * (1.0 - masky.a);\n\n    original *= (alphaMul * masky.r * alpha * clip);\n\n    gl_FragColor = original;\n}\n",A),this.maskSprite=B,this.maskMatrix=new ef.y3}get maskSprite(){return this._maskSprite}set maskSprite(y){this._maskSprite=y,this._maskSprite&&(this._maskSprite.renderable=!1)}apply(y,T,A,B){let F=this._maskSprite,U=F._texture;U.valid&&(U.uvMatrix||(U.uvMatrix=new TextureMatrix(U,0)),U.uvMatrix.update(),this.uniforms.npmAlpha=U.baseTexture.alphaMode?0:1,this.uniforms.mask=U,this.uniforms.otherMatrix=y.calculateSpriteMatrix(this.maskMatrix,F).prepend(U.uvMatrix.mapCoord),this.uniforms.alpha=F.worldAlpha,this.uniforms.maskClamp=U.uvMatrix.uClampFrame,y.applyFilter(this,T,A,B))}};let MaskData=class MaskData{constructor(y=null){this.type=U.A7.NONE,this.autoDetect=!0,this.maskObject=y||null,this.pooled=!1,this.isMaskData=!0,this.resolution=null,this.multisample=eP.defaultMultisample,this.enabled=!0,this.colorMask=15,this._filters=null,this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null,this._scissorRectLocal=null,this._colorMask=15,this._target=null}get filter(){return this._filters?this._filters[0]:null}set filter(y){y?this._filters?this._filters[0]=y:this._filters=[y]:this._filters=null}reset(){this.pooled&&(this.maskObject=null,this.type=U.A7.NONE,this.autoDetect=!0),this._target=null,this._scissorRectLocal=null}copyCountersOrReset(y){y?(this._stencilCounter=y._stencilCounter,this._scissorCounter=y._scissorCounter,this._scissorRect=y._scissorRect):(this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null)}};let MaskSystem=class MaskSystem{constructor(y){this.renderer=y,this.enableScissor=!0,this.alphaMaskPool=[],this.maskDataPool=[],this.maskStack=[],this.alphaMaskIndex=0}setMaskStack(y){this.maskStack=y,this.renderer.scissor.setMaskStack(y),this.renderer.stencil.setMaskStack(y)}push(y,T){let A=T;if(!A.isMaskData){let y=this.maskDataPool.pop()||new MaskData;y.pooled=!0,y.maskObject=T,A=y}let B=0!==this.maskStack.length?this.maskStack[this.maskStack.length-1]:null;if(A.copyCountersOrReset(B),A._colorMask=B?B._colorMask:15,A.autoDetect&&this.detect(A),A._target=y,A.type!==U.A7.SPRITE&&this.maskStack.push(A),A.enabled)switch(A.type){case U.A7.SCISSOR:this.renderer.scissor.push(A);break;case U.A7.STENCIL:this.renderer.stencil.push(A);break;case U.A7.SPRITE:A.copyCountersOrReset(null),this.pushSpriteMask(A);break;case U.A7.COLOR:this.pushColorMask(A)}A.type===U.A7.SPRITE&&this.maskStack.push(A)}pop(y){let T=this.maskStack.pop();if(T&&T._target===y){if(T.enabled)switch(T.type){case U.A7.SCISSOR:this.renderer.scissor.pop(T);break;case U.A7.STENCIL:this.renderer.stencil.pop(T.maskObject);break;case U.A7.SPRITE:this.popSpriteMask(T);break;case U.A7.COLOR:this.popColorMask(T)}if(T.reset(),T.pooled&&this.maskDataPool.push(T),0!==this.maskStack.length){let y=this.maskStack[this.maskStack.length-1];y.type===U.A7.SPRITE&&y._filters&&(y._filters[0].maskSprite=y.maskObject)}}}detect(y){let T=y.maskObject;T?T.isSprite?y.type=U.A7.SPRITE:this.enableScissor&&this.renderer.scissor.testScissor(y)?y.type=U.A7.SCISSOR:y.type=U.A7.STENCIL:y.type=U.A7.COLOR}pushSpriteMask(y){let T,A;let{maskObject:B}=y,F=y._target,U=y._filters;U||(U=this.alphaMaskPool[this.alphaMaskIndex])||(U=this.alphaMaskPool[this.alphaMaskIndex]=[new SpriteMaskFilter]);let X=this.renderer,Y=X.renderTexture;if(Y.current){let B=Y.current;T=y.resolution||B.resolution,A=y.multisample??B.multisample}else T=y.resolution||X.resolution,A=y.multisample??X.multisample;U[0].resolution=T,U[0].multisample=A,U[0].maskSprite=B;let K=F.filterArea;F.filterArea=B.getBounds(!0),X.filter.push(F,U),F.filterArea=K,!y._filters&&this.alphaMaskIndex++}popSpriteMask(y){this.renderer.filter.pop(),y._filters?y._filters[0].maskSprite=null:(this.alphaMaskIndex--,this.alphaMaskPool[this.alphaMaskIndex][0].maskSprite=null)}pushColorMask(y){let T=y._colorMask,A=y._colorMask=T&y.colorMask;A!==T&&this.renderer.gl.colorMask((1&A)!=0,(2&A)!=0,(4&A)!=0,(8&A)!=0)}popColorMask(y){let T=y._colorMask,A=this.maskStack.length>0?this.maskStack[this.maskStack.length-1]._colorMask:15;A!==T&&this.renderer.gl.colorMask((1&A)!=0,(2&A)!=0,(4&A)!=0,(8&A)!=0)}destroy(){this.renderer=null}};MaskSystem.extension={type:q.n.RendererSystem,name:"mask"},q.R.add(MaskSystem);let AbstractMaskSystem=class AbstractMaskSystem{constructor(y){this.renderer=y,this.maskStack=[],this.glConst=0}getStackLength(){return this.maskStack.length}setMaskStack(y){let{gl:T}=this.renderer,A=this.getStackLength();this.maskStack=y;let B=this.getStackLength();B!==A&&(0===B?T.disable(this.glConst):(T.enable(this.glConst),this._useCurrent()))}_useCurrent(){}destroy(){this.renderer=null,this.maskStack=null}};let eL=new ef.y3,ek=[],eU=class extends AbstractMaskSystem{constructor(y){super(y),this.glConst=X.Xd.ADAPTER.getWebGLRenderingContext().SCISSOR_TEST}getStackLength(){let y=this.maskStack[this.maskStack.length-1];return y?y._scissorCounter:0}calcScissorRect(y){if(y._scissorRectLocal)return;let T=y._scissorRect,{maskObject:A}=y,{renderer:B}=this,F=B.renderTexture,U=A.getBounds(!0,ek.pop()??new ef.Ae);this.roundFrameToPixels(U,F.current?F.current.resolution:B.resolution,F.sourceFrame,F.destinationFrame,B.projection.transform),T&&U.fit(T),y._scissorRectLocal=U}static isMatrixRotated(y){if(!y)return!1;let{a:T,b:A,c:B,d:F}=y;return(Math.abs(A)>1e-4||Math.abs(B)>1e-4)&&(Math.abs(T)>1e-4||Math.abs(F)>1e-4)}testScissor(y){let{maskObject:T}=y;if(!T.isFastRect||!T.isFastRect()||eU.isMatrixRotated(T.worldTransform)||eU.isMatrixRotated(this.renderer.projection.transform))return!1;this.calcScissorRect(y);let A=y._scissorRectLocal;return A.width>0&&A.height>0}roundFrameToPixels(y,T,A,B,F){eU.isMatrixRotated(F)||((F=F?eL.copyFrom(F):eL.identity()).translate(-A.x,-A.y).scale(B.width/A.width,B.height/A.height).translate(B.x,B.y),this.renderer.filter.transformAABB(F,y),y.fit(B),y.x=Math.round(y.x*T),y.y=Math.round(y.y*T),y.width=Math.round(y.width*T),y.height=Math.round(y.height*T))}push(y){y._scissorRectLocal||this.calcScissorRect(y);let{gl:T}=this.renderer;y._scissorRect||T.enable(T.SCISSOR_TEST),y._scissorCounter++,y._scissorRect=y._scissorRectLocal,this._useCurrent()}pop(y){let{gl:T}=this.renderer;y&&ek.push(y._scissorRectLocal),this.getStackLength()>0?this._useCurrent():T.disable(T.SCISSOR_TEST)}_useCurrent(){let y;let T=this.maskStack[this.maskStack.length-1]._scissorRect;y=this.renderer.renderTexture.current?T.y:this.renderer.height-T.height-T.y,this.renderer.gl.scissor(T.x,y,T.width,T.height)}};eU.extension={type:q.n.RendererSystem,name:"scissor"},q.R.add(eU);let StencilSystem=class StencilSystem extends AbstractMaskSystem{constructor(y){super(y),this.glConst=X.Xd.ADAPTER.getWebGLRenderingContext().STENCIL_TEST}getStackLength(){let y=this.maskStack[this.maskStack.length-1];return y?y._stencilCounter:0}push(y){let T=y.maskObject,{gl:A}=this.renderer,B=y._stencilCounter;0===B&&(this.renderer.framebuffer.forceStencil(),A.clearStencil(0),A.clear(A.STENCIL_BUFFER_BIT),A.enable(A.STENCIL_TEST)),y._stencilCounter++;let F=y._colorMask;0!==F&&(y._colorMask=0,A.colorMask(!1,!1,!1,!1)),A.stencilFunc(A.EQUAL,B,4294967295),A.stencilOp(A.KEEP,A.KEEP,A.INCR),T.renderable=!0,T.render(this.renderer),this.renderer.batch.flush(),T.renderable=!1,0!==F&&(y._colorMask=F,A.colorMask((1&F)!=0,(2&F)!=0,(4&F)!=0,(8&F)!=0)),this._useCurrent()}pop(y){let T=this.renderer.gl;if(0===this.getStackLength())T.disable(T.STENCIL_TEST);else{let A=0!==this.maskStack.length?this.maskStack[this.maskStack.length-1]:null,B=A?A._colorMask:15;0!==B&&(A._colorMask=0,T.colorMask(!1,!1,!1,!1)),T.stencilOp(T.KEEP,T.KEEP,T.DECR),y.renderable=!0,y.render(this.renderer),this.renderer.batch.flush(),y.renderable=!1,0!==B&&(A._colorMask=B,T.colorMask((1&B)!=0,(2&B)!=0,(4&B)!=0,(8&B)!=0)),this._useCurrent()}}_useCurrent(){let y=this.renderer.gl;y.stencilFunc(y.EQUAL,this.getStackLength(),4294967295),y.stencilOp(y.KEEP,y.KEEP,y.KEEP)}};StencilSystem.extension={type:q.n.RendererSystem,name:"stencil"},q.R.add(StencilSystem);let PluginSystem=class PluginSystem{constructor(y){this.renderer=y,this.plugins={},Object.defineProperties(this.plugins,{extract:{enumerable:!1,get:()=>((0,Y.deprecation)("7.0.0","renderer.plugins.extract has moved to renderer.extract"),y.extract)},prepare:{enumerable:!1,get:()=>((0,Y.deprecation)("7.0.0","renderer.plugins.prepare has moved to renderer.prepare"),y.prepare)},interaction:{enumerable:!1,get:()=>((0,Y.deprecation)("7.0.0","renderer.plugins.interaction has been deprecated, use renderer.events"),y.events)}})}init(){let y=this.rendererPlugins;for(let T in y)this.plugins[T]=new y[T](this.renderer)}destroy(){for(let y in this.plugins)this.plugins[y].destroy(),this.plugins[y]=null}};PluginSystem.extension={type:[q.n.RendererSystem,q.n.CanvasRendererSystem],name:"_plugin"},q.R.add(PluginSystem);let ProjectionSystem=class ProjectionSystem{constructor(y){this.renderer=y,this.destinationFrame=null,this.sourceFrame=null,this.defaultFrame=null,this.projectionMatrix=new ef.y3,this.transform=null}update(y,T,A,B){this.destinationFrame=y||this.destinationFrame||this.defaultFrame,this.sourceFrame=T||this.sourceFrame||y,this.calculateProjection(this.destinationFrame,this.sourceFrame,A,B),this.transform&&this.projectionMatrix.append(this.transform);let F=this.renderer;F.globalUniforms.uniforms.projectionMatrix=this.projectionMatrix,F.globalUniforms.update(),F.shader.shader&&F.shader.syncUniformGroup(F.shader.shader.uniforms.globals)}calculateProjection(y,T,A,B){let F=this.projectionMatrix,U=B?-1:1;F.identity(),F.a=1/T.width*2,F.d=U*(1/T.height*2),F.tx=-1-T.x*F.a,F.ty=-U-T.y*F.d}setTransform(y){}destroy(){this.renderer=null}};ProjectionSystem.extension={type:q.n.RendererSystem,name:"projection"},q.R.add(ProjectionSystem);let eG=new ef.wx;let GenerateTextureSystem=class GenerateTextureSystem{constructor(y){this.renderer=y,this._tempMatrix=new ef.y3}generateTexture(y,T){let{region:A,...B}=T||{},F=A||y.getLocalBounds(null,!0);0===F.width&&(F.width=1),0===F.height&&(F.height=1);let U=RenderTexture.create({width:F.width,height:F.height,...B});this._tempMatrix.tx=-F.x,this._tempMatrix.ty=-F.y;let X=y.transform;return y.transform=eG,this.renderer.render(y,{renderTexture:U,transform:this._tempMatrix,skipUpdateTransform:!!y.parent,blit:!0}),y.transform=X,U}destroy(){}};GenerateTextureSystem.extension={type:[q.n.RendererSystem,q.n.CanvasRendererSystem],name:"textureGenerator"},q.R.add(GenerateTextureSystem);let eX=new ef.Ae,ez=new ef.Ae;let RenderTextureSystem=class RenderTextureSystem{constructor(y){this.renderer=y,this.defaultMaskStack=[],this.current=null,this.sourceFrame=new ef.Ae,this.destinationFrame=new ef.Ae,this.viewportFrame=new ef.Ae}contextChange(){let y=this.renderer?.gl.getContextAttributes();this._rendererPremultipliedAlpha=!!(y&&y.alpha&&y.premultipliedAlpha)}bind(y=null,T,A){let B,F,U;let X=this.renderer;this.current=y,y?(U=(B=y.baseTexture).resolution,T||(eX.width=y.frame.width,eX.height=y.frame.height,T=eX),A||(ez.x=y.frame.x,ez.y=y.frame.y,ez.width=T.width,ez.height=T.height,A=ez),F=B.framebuffer):(U=X.resolution,T||(eX.width=X._view.screen.width,eX.height=X._view.screen.height,T=eX),A||((A=eX).width=T.width,A.height=T.height));let Y=this.viewportFrame;Y.x=A.x*U,Y.y=A.y*U,Y.width=A.width*U,Y.height=A.height*U,y||(Y.y=X.view.height-(Y.y+Y.height)),Y.ceil(),this.renderer.framebuffer.bind(F,Y),this.renderer.projection.update(A,T,U,!F),y?this.renderer.mask.setMaskStack(B.maskStack):this.renderer.mask.setMaskStack(this.defaultMaskStack),this.sourceFrame.copyFrom(T),this.destinationFrame.copyFrom(A)}clear(y,T){let A=this.current?this.current.baseTexture.clear:this.renderer.background.backgroundColor,B=K.I.shared.setValue(y||A);(this.current&&this.current.baseTexture.alphaMode>0||!this.current&&this._rendererPremultipliedAlpha)&&B.premultiply(B.alpha);let F=this.destinationFrame,U=this.current?this.current.baseTexture:this.renderer._view.screen,X=F.width!==U.width||F.height!==U.height;if(X){let{x:y,y:T,width:A,height:B}=this.viewportFrame;y=Math.round(y),T=Math.round(T),A=Math.round(A),B=Math.round(B),this.renderer.gl.enable(this.renderer.gl.SCISSOR_TEST),this.renderer.gl.scissor(y,T,A,B)}this.renderer.framebuffer.clear(B.red,B.green,B.blue,B.alpha,T),X&&this.renderer.scissor.pop()}resize(){this.bind(null)}reset(){this.bind(null)}destroy(){this.renderer=null}};RenderTextureSystem.extension={type:q.n.RendererSystem,name:"renderTexture"},q.R.add(RenderTextureSystem);let GLProgram=class GLProgram{constructor(y,T){this.program=y,this.uniformData=T,this.uniformGroups={},this.uniformDirtyGroups={},this.uniformBufferBindings={}}destroy(){this.uniformData=null,this.uniformGroups=null,this.uniformDirtyGroups=null,this.uniformBufferBindings=null,this.program=null}};function compileShader(y,T,A){let B=y.createShader(T);return y.shaderSource(B,A),y.compileShader(B),B}function booleanArray(y){let T=Array(y);for(let y=0;y<T.length;y++)T[y]=!1;return T}function defaultValue(y,T){switch(y){case"float":case"int":case"uint":case"sampler2D":case"sampler2DArray":return 0;case"vec2":return new Float32Array(2*T);case"vec3":return new Float32Array(3*T);case"vec4":return new Float32Array(4*T);case"ivec2":return new Int32Array(2*T);case"ivec3":return new Int32Array(3*T);case"ivec4":return new Int32Array(4*T);case"uvec2":return new Uint32Array(2*T);case"uvec3":return new Uint32Array(3*T);case"uvec4":return new Uint32Array(4*T);case"bool":return!1;case"bvec2":return booleanArray(2*T);case"bvec3":return booleanArray(3*T);case"bvec4":return booleanArray(4*T);case"mat2":return new Float32Array([1,0,0,1]);case"mat3":return new Float32Array([1,0,0,0,1,0,0,0,1]);case"mat4":return new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}return null}function logPrettyShaderError(y,T){let A=y.getShaderSource(T).split("\n").map((y,T)=>`${T}: ${y}`),B=y.getShaderInfoLog(T),F=B.split("\n"),U={},X=F.map(y=>parseFloat(y.replace(/^ERROR\: 0\:([\d]+)\:.*$/,"$1"))).filter(y=>!!y&&!U[y]&&(U[y]=!0,!0)),Y=[""];X.forEach(y=>{A[y-1]=`%c${A[y-1]}%c`,Y.push("background: #FF0000; color:#FFFFFF; font-size: 10px","font-size: 10px")});let K=A.join("\n");Y[0]=K,console.error(B),console.groupCollapsed("click to view full shader code"),console.warn(...Y),console.groupEnd()}function uboUpdate(y,T,A,B,F){A.buffer.update(F)}let eH={float:`
        data[offset] = v;
    `,vec2:`
        data[offset] = v[0];
        data[offset+1] = v[1];
    `,vec3:`
        data[offset] = v[0];
        data[offset+1] = v[1];
        data[offset+2] = v[2];

    `,vec4:`
        data[offset] = v[0];
        data[offset+1] = v[1];
        data[offset+2] = v[2];
        data[offset+3] = v[3];
    `,mat2:`
        data[offset] = v[0];
        data[offset+1] = v[1];

        data[offset+4] = v[2];
        data[offset+5] = v[3];
    `,mat3:`
        data[offset] = v[0];
        data[offset+1] = v[1];
        data[offset+2] = v[2];

        data[offset + 4] = v[3];
        data[offset + 5] = v[4];
        data[offset + 6] = v[5];

        data[offset + 8] = v[6];
        data[offset + 9] = v[7];
        data[offset + 10] = v[8];
    `,mat4:`
        for(var i = 0; i < 16; i++)
        {
            data[offset + i] = v[i];
        }
    `},ej={float:4,vec2:8,vec3:12,vec4:16,int:4,ivec2:8,ivec3:12,ivec4:16,uint:4,uvec2:8,uvec3:12,uvec4:16,bool:4,bvec2:8,bvec3:12,bvec4:16,mat2:32,mat3:48,mat4:64},eV=0,eW={textureCount:0,uboCount:0};let ShaderSystem=class ShaderSystem{constructor(y){this.destroyed=!1,this.renderer=y,this.systemCheck(),this.gl=null,this.shader=null,this.program=null,this.cache={},this._uboCache={},this.id=eV++}systemCheck(){if(!function(){if("boolean"==typeof F)return F;try{let y=Function("param1","param2","param3","return param1[param2] === param3;");F=!0===y({a:"b"},"a","b")}catch(y){F=!1}return F}())throw Error("Current environment does not allow unsafe-eval, please use @pixi/unsafe-eval module to enable support.")}contextChange(y){this.gl=y,this.reset()}bind(y,T){y.disposeRunner.add(this),y.uniforms.globals=this.renderer.globalUniforms;let A=y.program,B=A.glPrograms[this.renderer.CONTEXT_UID]||this.generateProgram(y);return this.shader=y,this.program!==A&&(this.program=A,this.gl.useProgram(B.program)),T||(eW.textureCount=0,eW.uboCount=0,this.syncUniformGroup(y.uniformGroup,eW)),B}setUniforms(y){let T=this.shader.program,A=T.glPrograms[this.renderer.CONTEXT_UID];T.syncUniforms(A.uniformData,y,this.renderer)}syncUniformGroup(y,T){let A=this.getGlProgram();y.static&&y.dirtyId===A.uniformDirtyGroups[y.id]||(A.uniformDirtyGroups[y.id]=y.dirtyId,this.syncUniforms(y,A,T))}syncUniforms(y,T,A){let B=y.syncUniforms[this.shader.program.id]||this.createSyncGroups(y);B(T.uniformData,y.uniforms,this.renderer,A)}createSyncGroups(y){let T=this.getSignature(y,this.shader.program.uniformData,"u");return this.cache[T]||(this.cache[T]=function(y,T){let A=[`
        var v = null;
        var cv = null;
        var cu = null;
        var t = 0;
        var gl = renderer.gl;
    `];for(let B in y.uniforms){let F=T[B];if(!F){y.uniforms[B]?.group&&(y.uniforms[B].ubo?A.push(`
                        renderer.shader.syncUniformBufferGroup(uv.${B}, '${B}');
                    `):A.push(`
                        renderer.shader.syncUniformGroup(uv.${B}, syncData);
                    `));continue}let U=y.uniforms[B],X=!1;for(let y=0;y<ep.length;y++)if(ep[y].test(F,U)){A.push(ep[y].code(B,U)),X=!0;break}if(!X){let y=1!==F.size||F.isArray?eg:em,T=y[F.type].replace("location",`ud["${B}"].location`);A.push(`
            cu = ud["${B}"];
            cv = cu.value;
            v = uv["${B}"];
            ${T};`)}}return Function("ud","uv","renderer","syncData",A.join("\n"))}(y,this.shader.program.uniformData)),y.syncUniforms[this.shader.program.id]=this.cache[T],y.syncUniforms[this.shader.program.id]}syncUniformBufferGroup(y,T){let A=this.getGlProgram();if(!y.static||0!==y.dirtyId||!A.uniformGroups[y.id]){y.dirtyId=0;let B=A.uniformGroups[y.id]||this.createSyncBufferGroup(y,A,T);y.buffer.update(),B(A.uniformData,y.uniforms,this.renderer,eW,y.buffer)}this.renderer.buffer.bindBufferBase(y.buffer,A.uniformBufferBindings[T])}createSyncBufferGroup(y,T,A){let{gl:B}=this.renderer;this.renderer.buffer.bind(y.buffer);let F=this.gl.getUniformBlockIndex(T.program,A);T.uniformBufferBindings[A]=this.shader.uniformBindCount,B.uniformBlockBinding(T.program,F,this.shader.uniformBindCount),this.shader.uniformBindCount++;let U=this.getSignature(y,this.shader.program.uniformData,"ubo"),X=this._uboCache[U];if(X||(X=this._uboCache[U]=function(y,T){if(!y.autoManage)return{size:0,syncFunc:uboUpdate};let A=function(y,T){let A=[];for(let B in y)T[B]&&A.push(T[B]);return A.sort((y,T)=>y.index-T.index),A}(y.uniforms,T),{uboElements:B,size:F}=function(y){let T=y.map(y=>({data:y,offset:0,dataLen:0,dirty:0})),A=0,B=0,F=0;for(let y=0;y<T.length;y++){let U=T[y];if(A=ej[U.data.type],U.data.size>1&&(A=Math.max(A,16)*U.data.size),U.dataLen=A,B%A!=0&&B<16){let y=B%A%16;B+=y,F+=y}B+A>16?(F=16*Math.ceil(F/16),U.offset=F,F+=A,B=A):(U.offset=F,B+=A,F+=A)}return{uboElements:T,size:F=16*Math.ceil(F/16)}}(A),U=[`
    var v = null;
    var v2 = null;
    var cv = null;
    var t = 0;
    var gl = renderer.gl
    var index = 0;
    var data = buffer.data;
    `];for(let T=0;T<B.length;T++){let A=B[T],F=y.uniforms[A.data.name],X=A.data.name,Y=!1;for(let y=0;y<ep.length;y++){let T=ep[y];if(T.codeUbo&&T.test(A.data,F)){U.push(`offset = ${A.offset/4};`,ep[y].codeUbo(A.data.name,F)),Y=!0;break}}if(!Y){if(A.data.size>1){let y=ey[A.data.type],T=Math.max(ej[A.data.type]/16,1),B=y/T,F=(4-B%4)%4;U.push(`
                cv = ud.${X}.value;
                v = uv.${X};
                offset = ${A.offset/4};

                t = 0;

                for(var i=0; i < ${A.data.size*T}; i++)
                {
                    for(var j = 0; j < ${B}; j++)
                    {
                        data[offset++] = v[t++];
                    }
                    offset += ${F};
                }

                `)}else{let y=eH[A.data.type];U.push(`
                cv = ud.${X}.value;
                v = uv.${X};
                offset = ${A.offset/4};
                ${y};
                `)}}}return U.push(`
       renderer.buffer.update(buffer);
    `),{size:F,syncFunc:Function("ud","uv","renderer","syncData","buffer",U.join("\n"))}}(y,this.shader.program.uniformData)),y.autoManage){let T=new Float32Array(X.size/4);y.buffer.update(T)}return T.uniformGroups[y.id]=X.syncFunc,T.uniformGroups[y.id]}getSignature(y,T,A){let B=y.uniforms,F=[`${A}-`];for(let y in B)F.push(y),T[y]&&F.push(T[y].type);return F.join("-")}getGlProgram(){return this.shader?this.shader.program.glPrograms[this.renderer.CONTEXT_UID]:null}generateProgram(y){let T=this.gl,A=y.program,B=function(y,T){let A=compileShader(y,y.VERTEX_SHADER,T.vertexSrc),B=compileShader(y,y.FRAGMENT_SHADER,T.fragmentSrc),F=y.createProgram();y.attachShader(F,A),y.attachShader(F,B);let U=T.extra?.transformFeedbackVaryings;if(U&&("function"!=typeof y.transformFeedbackVaryings?console.warn("TransformFeedback is not supported but TransformFeedbackVaryings are given."):y.transformFeedbackVaryings(F,U.names,"separate"===U.bufferMode?y.SEPARATE_ATTRIBS:y.INTERLEAVED_ATTRIBS)),y.linkProgram(F),!y.getProgramParameter(F,y.LINK_STATUS)&&(y.getProgramParameter(F,y.LINK_STATUS)||(y.getShaderParameter(A,y.COMPILE_STATUS)||logPrettyShaderError(y,A),y.getShaderParameter(B,y.COMPILE_STATUS)||logPrettyShaderError(y,B),console.error("PixiJS Error: Could not initialize shader."),""!==y.getProgramInfoLog(F)&&console.warn("PixiJS Warning: gl.getProgramInfoLog()",y.getProgramInfoLog(F)))),T.attributeData=function(y,T){let A={},B=T.getProgramParameter(y,T.ACTIVE_ATTRIBUTES);for(let F=0;F<B;F++){let B=T.getActiveAttrib(y,F);if(B.name.startsWith("gl_"))continue;let U=mapType(T,B.type),X={type:U,name:B.name,size:ey[U],location:T.getAttribLocation(y,B.name)};A[B.name]=X}return A}(F,y),T.uniformData=function(y,T){let A={},B=T.getProgramParameter(y,T.ACTIVE_UNIFORMS);for(let F=0;F<B;F++){let B=T.getActiveUniform(y,F),U=B.name.replace(/\[.*?\]$/,""),X=!!B.name.match(/\[.*?\]$/),Y=mapType(T,B.type);A[U]={name:U,index:F,type:Y,size:B.size,isArray:X,value:defaultValue(Y,B.size)}}return A}(F,y),!/^[ \t]*#[ \t]*version[ \t]+300[ \t]+es[ \t]*$/m.test(T.vertexSrc)){let A=Object.keys(T.attributeData);A.sort((y,T)=>y>T?1:-1);for(let B=0;B<A.length;B++)T.attributeData[A[B]].location=B,y.bindAttribLocation(F,B,A[B]);y.linkProgram(F)}y.deleteShader(A),y.deleteShader(B);let X={};for(let A in T.uniformData){let B=T.uniformData[A];X[A]={location:y.getUniformLocation(F,A),value:defaultValue(B.type,B.size)}}let Y=new GLProgram(F,X);return Y}(T,A);return A.glPrograms[this.renderer.CONTEXT_UID]=B,B}reset(){this.program=null,this.shader=null}disposeShader(y){this.shader===y&&(this.shader=null)}destroy(){this.renderer=null,this.destroyed=!0}};ShaderSystem.extension={type:q.n.RendererSystem,name:"shader"},q.R.add(ShaderSystem);let StartupSystem=class StartupSystem{constructor(y){this.renderer=y}run(y){let{renderer:T}=this;T.runners.init.emit(T.options),y.hello&&console.log(`PixiJS 7.2.4 - ${T.rendererLogId} - https://pixijs.com`),T.resize(T.screen.width,T.screen.height)}destroy(){}};StartupSystem.defaultOptions={hello:!1},StartupSystem.extension={type:[q.n.RendererSystem,q.n.CanvasRendererSystem],name:"startup"},q.R.add(StartupSystem);let e$=class{constructor(){this.gl=null,this.stateId=0,this.polygonOffset=0,this.blendMode=U.T$.NONE,this._blendEq=!1,this.map=[],this.map[0]=this.setBlend,this.map[1]=this.setOffset,this.map[2]=this.setCullFace,this.map[3]=this.setDepthTest,this.map[4]=this.setFrontFace,this.map[5]=this.setDepthMask,this.checks=[],this.defaultState=new State,this.defaultState.blend=!0}contextChange(y){this.gl=y,this.blendModes=function(y,T=[]){return T[U.T$.NORMAL]=[y.ONE,y.ONE_MINUS_SRC_ALPHA],T[U.T$.ADD]=[y.ONE,y.ONE],T[U.T$.MULTIPLY]=[y.DST_COLOR,y.ONE_MINUS_SRC_ALPHA,y.ONE,y.ONE_MINUS_SRC_ALPHA],T[U.T$.SCREEN]=[y.ONE,y.ONE_MINUS_SRC_COLOR,y.ONE,y.ONE_MINUS_SRC_ALPHA],T[U.T$.OVERLAY]=[y.ONE,y.ONE_MINUS_SRC_ALPHA],T[U.T$.DARKEN]=[y.ONE,y.ONE_MINUS_SRC_ALPHA],T[U.T$.LIGHTEN]=[y.ONE,y.ONE_MINUS_SRC_ALPHA],T[U.T$.COLOR_DODGE]=[y.ONE,y.ONE_MINUS_SRC_ALPHA],T[U.T$.COLOR_BURN]=[y.ONE,y.ONE_MINUS_SRC_ALPHA],T[U.T$.HARD_LIGHT]=[y.ONE,y.ONE_MINUS_SRC_ALPHA],T[U.T$.SOFT_LIGHT]=[y.ONE,y.ONE_MINUS_SRC_ALPHA],T[U.T$.DIFFERENCE]=[y.ONE,y.ONE_MINUS_SRC_ALPHA],T[U.T$.EXCLUSION]=[y.ONE,y.ONE_MINUS_SRC_ALPHA],T[U.T$.HUE]=[y.ONE,y.ONE_MINUS_SRC_ALPHA],T[U.T$.SATURATION]=[y.ONE,y.ONE_MINUS_SRC_ALPHA],T[U.T$.COLOR]=[y.ONE,y.ONE_MINUS_SRC_ALPHA],T[U.T$.LUMINOSITY]=[y.ONE,y.ONE_MINUS_SRC_ALPHA],T[U.T$.NONE]=[0,0],T[U.T$.NORMAL_NPM]=[y.SRC_ALPHA,y.ONE_MINUS_SRC_ALPHA,y.ONE,y.ONE_MINUS_SRC_ALPHA],T[U.T$.ADD_NPM]=[y.SRC_ALPHA,y.ONE,y.ONE,y.ONE],T[U.T$.SCREEN_NPM]=[y.SRC_ALPHA,y.ONE_MINUS_SRC_COLOR,y.ONE,y.ONE_MINUS_SRC_ALPHA],T[U.T$.SRC_IN]=[y.DST_ALPHA,y.ZERO],T[U.T$.SRC_OUT]=[y.ONE_MINUS_DST_ALPHA,y.ZERO],T[U.T$.SRC_ATOP]=[y.DST_ALPHA,y.ONE_MINUS_SRC_ALPHA],T[U.T$.DST_OVER]=[y.ONE_MINUS_DST_ALPHA,y.ONE],T[U.T$.DST_IN]=[y.ZERO,y.SRC_ALPHA],T[U.T$.DST_OUT]=[y.ZERO,y.ONE_MINUS_SRC_ALPHA],T[U.T$.DST_ATOP]=[y.ONE_MINUS_DST_ALPHA,y.SRC_ALPHA],T[U.T$.XOR]=[y.ONE_MINUS_DST_ALPHA,y.ONE_MINUS_SRC_ALPHA],T[U.T$.SUBTRACT]=[y.ONE,y.ONE,y.ONE,y.ONE,y.FUNC_REVERSE_SUBTRACT,y.FUNC_ADD],T}(y),this.set(this.defaultState),this.reset()}set(y){if(y=y||this.defaultState,this.stateId!==y.data){let T=this.stateId^y.data,A=0;for(;T;)1&T&&this.map[A].call(this,!!(y.data&1<<A)),T>>=1,A++;this.stateId=y.data}for(let T=0;T<this.checks.length;T++)this.checks[T](this,y)}forceState(y){y=y||this.defaultState;for(let T=0;T<this.map.length;T++)this.map[T].call(this,!!(y.data&1<<T));for(let T=0;T<this.checks.length;T++)this.checks[T](this,y);this.stateId=y.data}setBlend(y){this.updateCheck(e$.checkBlendMode,y),this.gl[y?"enable":"disable"](this.gl.BLEND)}setOffset(y){this.updateCheck(e$.checkPolygonOffset,y),this.gl[y?"enable":"disable"](this.gl.POLYGON_OFFSET_FILL)}setDepthTest(y){this.gl[y?"enable":"disable"](this.gl.DEPTH_TEST)}setDepthMask(y){this.gl.depthMask(y)}setCullFace(y){this.gl[y?"enable":"disable"](this.gl.CULL_FACE)}setFrontFace(y){this.gl.frontFace(this.gl[y?"CW":"CCW"])}setBlendMode(y){if(y===this.blendMode)return;this.blendMode=y;let T=this.blendModes[y],A=this.gl;2===T.length?A.blendFunc(T[0],T[1]):A.blendFuncSeparate(T[0],T[1],T[2],T[3]),6===T.length?(this._blendEq=!0,A.blendEquationSeparate(T[4],T[5])):this._blendEq&&(this._blendEq=!1,A.blendEquationSeparate(A.FUNC_ADD,A.FUNC_ADD))}setPolygonOffset(y,T){this.gl.polygonOffset(y,T)}reset(){this.gl.pixelStorei(this.gl.UNPACK_FLIP_Y_WEBGL,!1),this.forceState(this.defaultState),this._blendEq=!0,this.blendMode=-1,this.setBlendMode(0)}updateCheck(y,T){let A=this.checks.indexOf(y);T&&-1===A?this.checks.push(y):T||-1===A||this.checks.splice(A,1)}static checkBlendMode(y,T){y.setBlendMode(T.blendMode)}static checkPolygonOffset(y,T){y.setPolygonOffset(1,T.polygonOffset)}destroy(){this.gl=null}};e$.extension={type:q.n.RendererSystem,name:"state"},q.R.add(e$);let SystemManager=class SystemManager extends Y.EventEmitter{constructor(){super(...arguments),this.runners={},this._systemsHash={}}setup(y){this.addRunners(...y.runners);let T=(y.priority??[]).filter(T=>y.systems[T]),A=[...T,...Object.keys(y.systems).filter(y=>!T.includes(y))];for(let T of A)this.addSystem(y.systems[T],T)}addRunners(...y){y.forEach(y=>{this.runners[y]=new Runner_Runner(y)})}addSystem(y,T){let A=new y(this);if(this[T])throw Error(`Whoops! The name "${T}" is already in use`);for(let y in this[T]=A,this._systemsHash[T]=A,this.runners)this.runners[y].add(A);return this}emitWithCustomOptions(y,T){let A=Object.keys(this._systemsHash);y.items.forEach(B=>{let F=A.find(y=>this._systemsHash[y]===B);B[y.name](T[F])})}destroy(){Object.values(this.runners).forEach(y=>{y.destroy()}),this._systemsHash={}}};let eY=class{constructor(y){this.renderer=y,this.count=0,this.checkCount=0,this.maxIdle=eY.defaultMaxIdle,this.checkCountMax=eY.defaultCheckCountMax,this.mode=eY.defaultMode}postrender(){this.renderer.objectRenderer.renderingToScreen&&(this.count++,this.mode!==U.UN.MANUAL&&(this.checkCount++,this.checkCount>this.checkCountMax&&(this.checkCount=0,this.run())))}run(){let y=this.renderer.texture,T=y.managedTextures,A=!1;for(let B=0;B<T.length;B++){let F=T[B];!F.framebuffer&&this.count-F.touched>this.maxIdle&&(y.destroyTexture(F,!0),T[B]=null,A=!0)}if(A){let y=0;for(let A=0;A<T.length;A++)null!==T[A]&&(T[y++]=T[A]);T.length=y}}unload(y){let T=this.renderer.texture,A=y._texture;A&&!A.framebuffer&&T.destroyTexture(A);for(let T=y.children.length-1;T>=0;T--)this.unload(y.children[T])}destroy(){this.renderer=null}};eY.defaultMode=U.UN.AUTO,eY.defaultMaxIdle=3600,eY.defaultCheckCountMax=600,eY.extension={type:q.n.RendererSystem,name:"textureGC"},q.R.add(eY);let GLTexture=class GLTexture{constructor(y){this.texture=y,this.width=-1,this.height=-1,this.dirtyId=-1,this.dirtyStyleId=-1,this.mipmap=!1,this.wrapMode=33071,this.type=U.vK.UNSIGNED_BYTE,this.internalFormat=U.I2.RGBA,this.samplerType=0}};let TextureSystem=class TextureSystem{constructor(y){this.renderer=y,this.boundTextures=[],this.currentLocation=-1,this.managedTextures=[],this._unknownBoundTextures=!1,this.unknownTexture=new ei,this.hasIntegerTextures=!1}contextChange(){let y=this.gl=this.renderer.gl;this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.webGLVersion=this.renderer.context.webGLVersion,this.internalFormats="WebGL2RenderingContext"in globalThis&&y instanceof globalThis.WebGL2RenderingContext?{[U.vK.UNSIGNED_BYTE]:{[U.I2.RGBA]:y.RGBA8,[U.I2.RGB]:y.RGB8,[U.I2.RG]:y.RG8,[U.I2.RED]:y.R8,[U.I2.RGBA_INTEGER]:y.RGBA8UI,[U.I2.RGB_INTEGER]:y.RGB8UI,[U.I2.RG_INTEGER]:y.RG8UI,[U.I2.RED_INTEGER]:y.R8UI,[U.I2.ALPHA]:y.ALPHA,[U.I2.LUMINANCE]:y.LUMINANCE,[U.I2.LUMINANCE_ALPHA]:y.LUMINANCE_ALPHA},[U.vK.BYTE]:{[U.I2.RGBA]:y.RGBA8_SNORM,[U.I2.RGB]:y.RGB8_SNORM,[U.I2.RG]:y.RG8_SNORM,[U.I2.RED]:y.R8_SNORM,[U.I2.RGBA_INTEGER]:y.RGBA8I,[U.I2.RGB_INTEGER]:y.RGB8I,[U.I2.RG_INTEGER]:y.RG8I,[U.I2.RED_INTEGER]:y.R8I},[U.vK.UNSIGNED_SHORT]:{[U.I2.RGBA_INTEGER]:y.RGBA16UI,[U.I2.RGB_INTEGER]:y.RGB16UI,[U.I2.RG_INTEGER]:y.RG16UI,[U.I2.RED_INTEGER]:y.R16UI,[U.I2.DEPTH_COMPONENT]:y.DEPTH_COMPONENT16},[U.vK.SHORT]:{[U.I2.RGBA_INTEGER]:y.RGBA16I,[U.I2.RGB_INTEGER]:y.RGB16I,[U.I2.RG_INTEGER]:y.RG16I,[U.I2.RED_INTEGER]:y.R16I},[U.vK.UNSIGNED_INT]:{[U.I2.RGBA_INTEGER]:y.RGBA32UI,[U.I2.RGB_INTEGER]:y.RGB32UI,[U.I2.RG_INTEGER]:y.RG32UI,[U.I2.RED_INTEGER]:y.R32UI,[U.I2.DEPTH_COMPONENT]:y.DEPTH_COMPONENT24},[U.vK.INT]:{[U.I2.RGBA_INTEGER]:y.RGBA32I,[U.I2.RGB_INTEGER]:y.RGB32I,[U.I2.RG_INTEGER]:y.RG32I,[U.I2.RED_INTEGER]:y.R32I},[U.vK.FLOAT]:{[U.I2.RGBA]:y.RGBA32F,[U.I2.RGB]:y.RGB32F,[U.I2.RG]:y.RG32F,[U.I2.RED]:y.R32F,[U.I2.DEPTH_COMPONENT]:y.DEPTH_COMPONENT32F},[U.vK.HALF_FLOAT]:{[U.I2.RGBA]:y.RGBA16F,[U.I2.RGB]:y.RGB16F,[U.I2.RG]:y.RG16F,[U.I2.RED]:y.R16F},[U.vK.UNSIGNED_SHORT_5_6_5]:{[U.I2.RGB]:y.RGB565},[U.vK.UNSIGNED_SHORT_4_4_4_4]:{[U.I2.RGBA]:y.RGBA4},[U.vK.UNSIGNED_SHORT_5_5_5_1]:{[U.I2.RGBA]:y.RGB5_A1},[U.vK.UNSIGNED_INT_2_10_10_10_REV]:{[U.I2.RGBA]:y.RGB10_A2,[U.I2.RGBA_INTEGER]:y.RGB10_A2UI},[U.vK.UNSIGNED_INT_10F_11F_11F_REV]:{[U.I2.RGB]:y.R11F_G11F_B10F},[U.vK.UNSIGNED_INT_5_9_9_9_REV]:{[U.I2.RGB]:y.RGB9_E5},[U.vK.UNSIGNED_INT_24_8]:{[U.I2.DEPTH_STENCIL]:y.DEPTH24_STENCIL8},[U.vK.FLOAT_32_UNSIGNED_INT_24_8_REV]:{[U.I2.DEPTH_STENCIL]:y.DEPTH32F_STENCIL8}}:{[U.vK.UNSIGNED_BYTE]:{[U.I2.RGBA]:y.RGBA,[U.I2.RGB]:y.RGB,[U.I2.ALPHA]:y.ALPHA,[U.I2.LUMINANCE]:y.LUMINANCE,[U.I2.LUMINANCE_ALPHA]:y.LUMINANCE_ALPHA},[U.vK.UNSIGNED_SHORT_5_6_5]:{[U.I2.RGB]:y.RGB},[U.vK.UNSIGNED_SHORT_4_4_4_4]:{[U.I2.RGBA]:y.RGBA},[U.vK.UNSIGNED_SHORT_5_5_5_1]:{[U.I2.RGBA]:y.RGBA}};let T=y.getParameter(y.MAX_TEXTURE_IMAGE_UNITS);this.boundTextures.length=T;for(let y=0;y<T;y++)this.boundTextures[y]=null;this.emptyTextures={};let A=new GLTexture(y.createTexture());y.bindTexture(y.TEXTURE_2D,A.texture),y.texImage2D(y.TEXTURE_2D,0,y.RGBA,1,1,0,y.RGBA,y.UNSIGNED_BYTE,new Uint8Array(4)),this.emptyTextures[y.TEXTURE_2D]=A,this.emptyTextures[y.TEXTURE_CUBE_MAP]=new GLTexture(y.createTexture()),y.bindTexture(y.TEXTURE_CUBE_MAP,this.emptyTextures[y.TEXTURE_CUBE_MAP].texture);for(let T=0;T<6;T++)y.texImage2D(y.TEXTURE_CUBE_MAP_POSITIVE_X+T,0,y.RGBA,1,1,0,y.RGBA,y.UNSIGNED_BYTE,null);y.texParameteri(y.TEXTURE_CUBE_MAP,y.TEXTURE_MAG_FILTER,y.LINEAR),y.texParameteri(y.TEXTURE_CUBE_MAP,y.TEXTURE_MIN_FILTER,y.LINEAR);for(let y=0;y<this.boundTextures.length;y++)this.bind(null,y)}bind(y,T=0){let{gl:A}=this;if(y=y?.castToBaseTexture(),y?.valid&&!y.parentTextureArray){y.touched=this.renderer.textureGC.count;let B=y._glTextures[this.CONTEXT_UID]||this.initTexture(y);this.boundTextures[T]!==y&&(this.currentLocation!==T&&(this.currentLocation=T,A.activeTexture(A.TEXTURE0+T)),A.bindTexture(y.target,B.texture)),B.dirtyId!==y.dirtyId?(this.currentLocation!==T&&(this.currentLocation=T,A.activeTexture(A.TEXTURE0+T)),this.updateTexture(y)):B.dirtyStyleId!==y.dirtyStyleId&&this.updateTextureStyle(y),this.boundTextures[T]=y}else this.currentLocation!==T&&(this.currentLocation=T,A.activeTexture(A.TEXTURE0+T)),A.bindTexture(A.TEXTURE_2D,this.emptyTextures[A.TEXTURE_2D].texture),this.boundTextures[T]=null}reset(){this._unknownBoundTextures=!0,this.hasIntegerTextures=!1,this.currentLocation=-1;for(let y=0;y<this.boundTextures.length;y++)this.boundTextures[y]=this.unknownTexture}unbind(y){let{gl:T,boundTextures:A}=this;if(this._unknownBoundTextures){this._unknownBoundTextures=!1;for(let y=0;y<A.length;y++)A[y]===this.unknownTexture&&this.bind(null,y)}for(let B=0;B<A.length;B++)A[B]===y&&(this.currentLocation!==B&&(T.activeTexture(T.TEXTURE0+B),this.currentLocation=B),T.bindTexture(y.target,this.emptyTextures[y.target].texture),A[B]=null)}ensureSamplerType(y){let{boundTextures:T,hasIntegerTextures:A,CONTEXT_UID:B}=this;if(A)for(let A=y-1;A>=0;--A){let y=T[A];if(y){let T=y._glTextures[B];T.samplerType!==U.oT.FLOAT&&this.renderer.texture.unbind(y)}}}initTexture(y){let T=new GLTexture(this.gl.createTexture());return T.dirtyId=-1,y._glTextures[this.CONTEXT_UID]=T,this.managedTextures.push(y),y.on("dispose",this.destroyTexture,this),T}initTextureType(y,T){T.internalFormat=this.internalFormats[y.type]?.[y.format]??y.format,2===this.webGLVersion&&y.type===U.vK.HALF_FLOAT?T.type=this.gl.HALF_FLOAT:T.type=y.type}updateTexture(y){let T=y._glTextures[this.CONTEXT_UID];if(!T)return;let A=this.renderer;if(this.initTextureType(y,T),y.resource?.upload(A,y,T))T.samplerType!==U.oT.FLOAT&&(this.hasIntegerTextures=!0);else{let B=y.realWidth,F=y.realHeight,U=A.gl;(T.width!==B||T.height!==F||T.dirtyId<0)&&(T.width=B,T.height=F,U.texImage2D(y.target,0,T.internalFormat,B,F,0,y.format,T.type,null))}y.dirtyStyleId!==T.dirtyStyleId&&this.updateTextureStyle(y),T.dirtyId=y.dirtyId}destroyTexture(y,T){let{gl:A}=this;if((y=y.castToBaseTexture())._glTextures[this.CONTEXT_UID]&&(this.unbind(y),A.deleteTexture(y._glTextures[this.CONTEXT_UID].texture),y.off("dispose",this.destroyTexture,this),delete y._glTextures[this.CONTEXT_UID],!T)){let T=this.managedTextures.indexOf(y);-1!==T&&(0,Y.removeItems)(this.managedTextures,T,1)}}updateTextureStyle(y){let T=y._glTextures[this.CONTEXT_UID];T&&(y.mipmap!==U.WB.POW2&&2===this.webGLVersion||y.isPowerOfTwo?T.mipmap=y.mipmap>=1:T.mipmap=!1,2===this.webGLVersion||y.isPowerOfTwo?T.wrapMode=y.wrapMode:T.wrapMode=U.Nt.CLAMP,y.resource?.style(this.renderer,y,T)||this.setStyle(y,T),T.dirtyStyleId=y.dirtyStyleId)}setStyle(y,T){let A=this.gl;if(T.mipmap&&y.mipmap!==U.WB.ON_MANUAL&&A.generateMipmap(y.target),A.texParameteri(y.target,A.TEXTURE_WRAP_S,T.wrapMode),A.texParameteri(y.target,A.TEXTURE_WRAP_T,T.wrapMode),T.mipmap){A.texParameteri(y.target,A.TEXTURE_MIN_FILTER,y.scaleMode===U.aH.LINEAR?A.LINEAR_MIPMAP_LINEAR:A.NEAREST_MIPMAP_NEAREST);let T=this.renderer.context.extensions.anisotropicFiltering;if(T&&y.anisotropicLevel>0&&y.scaleMode===U.aH.LINEAR){let B=Math.min(y.anisotropicLevel,A.getParameter(T.MAX_TEXTURE_MAX_ANISOTROPY_EXT));A.texParameterf(y.target,T.TEXTURE_MAX_ANISOTROPY_EXT,B)}}else A.texParameteri(y.target,A.TEXTURE_MIN_FILTER,y.scaleMode===U.aH.LINEAR?A.LINEAR:A.NEAREST);A.texParameteri(y.target,A.TEXTURE_MAG_FILTER,y.scaleMode===U.aH.LINEAR?A.LINEAR:A.NEAREST)}destroy(){this.renderer=null}};TextureSystem.extension={type:q.n.RendererSystem,name:"texture"},q.R.add(TextureSystem);let TransformFeedbackSystem=class TransformFeedbackSystem{constructor(y){this.renderer=y}contextChange(){this.gl=this.renderer.gl,this.CONTEXT_UID=this.renderer.CONTEXT_UID}bind(y){let{gl:T,CONTEXT_UID:A}=this,B=y._glTransformFeedbacks[A]||this.createGLTransformFeedback(y);T.bindTransformFeedback(T.TRANSFORM_FEEDBACK,B)}unbind(){let{gl:y}=this;y.bindTransformFeedback(y.TRANSFORM_FEEDBACK,null)}beginTransformFeedback(y,T){let{gl:A,renderer:B}=this;T&&B.shader.bind(T),A.beginTransformFeedback(y)}endTransformFeedback(){let{gl:y}=this;y.endTransformFeedback()}createGLTransformFeedback(y){let{gl:T,renderer:A,CONTEXT_UID:B}=this,F=T.createTransformFeedback();y._glTransformFeedbacks[B]=F,T.bindTransformFeedback(T.TRANSFORM_FEEDBACK,F);for(let F=0;F<y.buffers.length;F++){let U=y.buffers[F];U&&(A.buffer.update(U),U._glBuffers[B].refCount++,T.bindBufferBase(T.TRANSFORM_FEEDBACK_BUFFER,F,U._glBuffers[B].buffer||null))}return T.bindTransformFeedback(T.TRANSFORM_FEEDBACK,null),y.disposeRunner.add(this),F}disposeTransformFeedback(y,T){let A=y._glTransformFeedbacks[this.CONTEXT_UID],B=this.gl;y.disposeRunner.remove(this);let F=this.renderer.buffer;if(F)for(let A=0;A<y.buffers.length;A++){let B=y.buffers[A];if(!B)continue;let U=B._glBuffers[this.CONTEXT_UID];U&&(U.refCount--,0!==U.refCount||T||F.dispose(B,T))}A&&(T||B.deleteTransformFeedback(A),delete y._glTransformFeedbacks[this.CONTEXT_UID])}destroy(){this.renderer=null}};TransformFeedbackSystem.extension={type:q.n.RendererSystem,name:"transformFeedback"},q.R.add(TransformFeedbackSystem);let ViewSystem=class ViewSystem{constructor(y){this.renderer=y}init(y){this.screen=new ef.Ae(0,0,y.width,y.height),this.element=y.view||X.Xd.ADAPTER.createCanvas(),this.resolution=y.resolution||X.Xd.RESOLUTION,this.autoDensity=!!y.autoDensity}resizeView(y,T){this.element.width=Math.round(y*this.resolution),this.element.height=Math.round(T*this.resolution);let A=this.element.width/this.resolution,B=this.element.height/this.resolution;this.screen.width=A,this.screen.height=B,this.autoDensity&&(this.element.style.width=`${A}px`,this.element.style.height=`${B}px`),this.renderer.emit("resize",A,B),this.renderer.runners.resize.emit(this.screen.width,this.screen.height)}destroy(y){y&&this.element.parentNode?.removeChild(this.element),this.renderer=null,this.element=null,this.screen=null}};ViewSystem.defaultOptions={width:800,height:600,resolution:X.Xd.RESOLUTION,autoDensity:!1},ViewSystem.extension={type:[q.n.RendererSystem,q.n.CanvasRendererSystem],name:"_view"},q.R.add(ViewSystem),X.Xd.PREFER_ENV=U.Vi.WEBGL2,X.Xd.STRICT_TEXTURE_CACHE=!1,X.Xd.RENDER_OPTIONS={...ContextSystem.defaultOptions,...BackgroundSystem.defaultOptions,...ViewSystem.defaultOptions,...StartupSystem.defaultOptions},Object.defineProperties(X.Xd,{WRAP_MODE:{get:()=>ei.defaultOptions.wrapMode,set(y){(0,Y.deprecation)("7.1.0","settings.WRAP_MODE is deprecated, use BaseTexture.defaultOptions.wrapMode"),ei.defaultOptions.wrapMode=y}},SCALE_MODE:{get:()=>ei.defaultOptions.scaleMode,set(y){(0,Y.deprecation)("7.1.0","settings.SCALE_MODE is deprecated, use BaseTexture.defaultOptions.scaleMode"),ei.defaultOptions.scaleMode=y}},MIPMAP_TEXTURES:{get:()=>ei.defaultOptions.mipmap,set(y){(0,Y.deprecation)("7.1.0","settings.MIPMAP_TEXTURES is deprecated, use BaseTexture.defaultOptions.mipmap"),ei.defaultOptions.mipmap=y}},ANISOTROPIC_LEVEL:{get:()=>ei.defaultOptions.anisotropicLevel,set(y){(0,Y.deprecation)("7.1.0","settings.ANISOTROPIC_LEVEL is deprecated, use BaseTexture.defaultOptions.anisotropicLevel"),ei.defaultOptions.anisotropicLevel=y}},FILTER_RESOLUTION:{get:()=>((0,Y.deprecation)("7.1.0","settings.FILTER_RESOLUTION is deprecated, use Filter.defaultResolution"),eP.defaultResolution),set(y){eP.defaultResolution=y}},FILTER_MULTISAMPLE:{get:()=>((0,Y.deprecation)("7.1.0","settings.FILTER_MULTISAMPLE is deprecated, use Filter.defaultMultisample"),eP.defaultMultisample),set(y){eP.defaultMultisample=y}},SPRITE_MAX_TEXTURES:{get:()=>ew.defaultMaxTextures,set(y){(0,Y.deprecation)("7.1.0","settings.SPRITE_MAX_TEXTURES is deprecated, use BatchRenderer.defaultMaxTextures"),ew.defaultMaxTextures=y}},SPRITE_BATCH_SIZE:{get:()=>ew.defaultBatchSize,set(y){(0,Y.deprecation)("7.1.0","settings.SPRITE_BATCH_SIZE is deprecated, use BatchRenderer.defaultBatchSize"),ew.defaultBatchSize=y}},CAN_UPLOAD_SAME_BUFFER:{get:()=>ew.canUploadSameBuffer,set(y){(0,Y.deprecation)("7.1.0","settings.CAN_UPLOAD_SAME_BUFFER is deprecated, use BatchRenderer.canUploadSameBuffer"),ew.canUploadSameBuffer=y}},GC_MODE:{get:()=>eY.defaultMode,set(y){(0,Y.deprecation)("7.1.0","settings.GC_MODE is deprecated, use TextureGCSystem.defaultMode"),eY.defaultMode=y}},GC_MAX_IDLE:{get:()=>eY.defaultMaxIdle,set(y){(0,Y.deprecation)("7.1.0","settings.GC_MAX_IDLE is deprecated, use TextureGCSystem.defaultMaxIdle"),eY.defaultMaxIdle=y}},GC_MAX_CHECK_COUNT:{get:()=>eY.defaultCheckCountMax,set(y){(0,Y.deprecation)("7.1.0","settings.GC_MAX_CHECK_COUNT is deprecated, use TextureGCSystem.defaultCheckCountMax"),eY.defaultCheckCountMax=y}},PRECISION_VERTEX:{get:()=>eA.defaultVertexPrecision,set(y){(0,Y.deprecation)("7.1.0","settings.PRECISION_VERTEX is deprecated, use Program.defaultVertexPrecision"),eA.defaultVertexPrecision=y}},PRECISION_FRAGMENT:{get:()=>eA.defaultFragmentPrecision,set(y){(0,Y.deprecation)("7.1.0","settings.PRECISION_FRAGMENT is deprecated, use Program.defaultFragmentPrecision"),eA.defaultFragmentPrecision=y}}});var eK=A(97091);let eq=[];function autoDetectRenderer(y){for(let T of eq)if(T.test(y))return new T(y);throw Error("Unable to auto-detect a suitable renderer.")}q.R.handleByList(q.n.Renderer,eq);let eQ="attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}",eJ="attribute vec2 aVertexPosition;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nuniform vec4 inputSize;\nuniform vec4 outputFrame;\n\nvec4 filterVertexPosition( void )\n{\n    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;\n\n    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);\n}\n\nvec2 filterTextureCoord( void )\n{\n    return aVertexPosition * (outputFrame.zw * inputSize.zw);\n}\n\nvoid main(void)\n{\n    gl_Position = filterVertexPosition();\n    vTextureCoord = filterTextureCoord();\n}\n";let MultisampleSystem=class MultisampleSystem{constructor(y){this.renderer=y}contextChange(y){let T;if(1===this.renderer.context.webGLVersion){let A=y.getParameter(y.FRAMEBUFFER_BINDING);y.bindFramebuffer(y.FRAMEBUFFER,null),T=y.getParameter(y.SAMPLES),y.bindFramebuffer(y.FRAMEBUFFER,A)}else{let A=y.getParameter(y.DRAW_FRAMEBUFFER_BINDING);y.bindFramebuffer(y.DRAW_FRAMEBUFFER,null),T=y.getParameter(y.SAMPLES),y.bindFramebuffer(y.DRAW_FRAMEBUFFER,A)}T>=U.G5.HIGH?this.multisample=U.G5.HIGH:T>=U.G5.MEDIUM?this.multisample=U.G5.MEDIUM:T>=U.G5.LOW?this.multisample=U.G5.LOW:this.multisample=U.G5.NONE}destroy(){}};MultisampleSystem.extension={type:q.n.RendererSystem,name:"_multisample"},q.R.add(MultisampleSystem);let GLBuffer=class GLBuffer{constructor(y){this.buffer=y||null,this.updateID=-1,this.byteLength=-1,this.refCount=0}};let BufferSystem=class BufferSystem{constructor(y){this.renderer=y,this.managedBuffers={},this.boundBufferBases={}}destroy(){this.renderer=null}contextChange(){this.disposeAll(!0),this.gl=this.renderer.gl,this.CONTEXT_UID=this.renderer.CONTEXT_UID}bind(y){let{gl:T,CONTEXT_UID:A}=this,B=y._glBuffers[A]||this.createGLBuffer(y);T.bindBuffer(y.type,B.buffer)}unbind(y){let{gl:T}=this;T.bindBuffer(y,null)}bindBufferBase(y,T){let{gl:A,CONTEXT_UID:B}=this;if(this.boundBufferBases[T]!==y){let F=y._glBuffers[B]||this.createGLBuffer(y);this.boundBufferBases[T]=y,A.bindBufferBase(A.UNIFORM_BUFFER,T,F.buffer)}}bindBufferRange(y,T,A){let{gl:B,CONTEXT_UID:F}=this;A=A||0;let U=y._glBuffers[F]||this.createGLBuffer(y);B.bindBufferRange(B.UNIFORM_BUFFER,T||0,U.buffer,256*A,256)}update(y){let{gl:T,CONTEXT_UID:A}=this,B=y._glBuffers[A]||this.createGLBuffer(y);if(y._updateID!==B.updateID){if(B.updateID=y._updateID,T.bindBuffer(y.type,B.buffer),B.byteLength>=y.data.byteLength)T.bufferSubData(y.type,0,y.data);else{let A=y.static?T.STATIC_DRAW:T.DYNAMIC_DRAW;B.byteLength=y.data.byteLength,T.bufferData(y.type,y.data,A)}}}dispose(y,T){if(!this.managedBuffers[y.id])return;delete this.managedBuffers[y.id];let A=y._glBuffers[this.CONTEXT_UID],B=this.gl;y.disposeRunner.remove(this),A&&(T||B.deleteBuffer(A.buffer),delete y._glBuffers[this.CONTEXT_UID])}disposeAll(y){let T=Object.keys(this.managedBuffers);for(let A=0;A<T.length;A++)this.dispose(this.managedBuffers[T[A]],y)}createGLBuffer(y){let{CONTEXT_UID:T,gl:A}=this;return y._glBuffers[T]=new GLBuffer(A.createBuffer()),this.managedBuffers[y.id]=y,y.disposeRunner.add(this),y._glBuffers[T]}};BufferSystem.extension={type:q.n.RendererSystem,name:"buffer"},q.R.add(BufferSystem);let ObjectRendererSystem=class ObjectRendererSystem{constructor(y){this.renderer=y}render(y,T){let A,B,F,U;let X=this.renderer;if(T&&(A=T.renderTexture,B=T.clear,F=T.transform,U=T.skipUpdateTransform),this.renderingToScreen=!A,X.runners.prerender.emit(),X.emit("prerender"),X.projection.transform=F,!X.context.isLost){if(A||(this.lastObjectRendered=y),!U){let T=y.enableTempParent();y.updateTransform(),y.disableTempParent(T)}X.renderTexture.bind(A),X.batch.currentRenderer.start(),(B??X.background.clearBeforeRender)&&X.renderTexture.clear(),y.render(X),X.batch.currentRenderer.flush(),A&&(T.blit&&X.framebuffer.blit(),A.baseTexture.update()),X.runners.postrender.emit(),X.projection.transform=null,X.emit("postrender")}}destroy(){this.renderer=null,this.lastObjectRendered=null}};ObjectRendererSystem.extension={type:q.n.RendererSystem,name:"objectRenderer"},q.R.add(ObjectRendererSystem);let eZ=class extends SystemManager{constructor(y){super(),this.type=U.N3.WEBGL,y=Object.assign({},X.Xd.RENDER_OPTIONS,y),this.gl=null,this.CONTEXT_UID=0,this.globalUniforms=new UniformGroup({projectionMatrix:new ef.y3},!0);let T={runners:["init","destroy","contextChange","resolutionChange","reset","update","postrender","prerender","resize"],systems:eZ.__systems,priority:["_view","textureGenerator","background","_plugin","startup","context","state","texture","buffer","geometry","framebuffer","transformFeedback","mask","scissor","stencil","projection","textureGC","filter","renderTexture","batch","objectRenderer","_multisample"]};this.setup(T),"useContextAlpha"in y&&((0,Y.deprecation)("7.0.0","options.useContextAlpha is deprecated, use options.premultipliedAlpha and options.backgroundAlpha instead"),y.premultipliedAlpha=y.useContextAlpha&&"notMultiplied"!==y.useContextAlpha,y.backgroundAlpha=!1===y.useContextAlpha?1:y.backgroundAlpha),this._plugin.rendererPlugins=eZ.__plugins,this.options=y,this.startup.run(this.options)}static test(y){return!y?.forceCanvas&&(0,Y.isWebGLSupported)()}render(y,T){this.objectRenderer.render(y,T)}resize(y,T){this._view.resizeView(y,T)}reset(){return this.runners.reset.emit(),this}clear(){this.renderTexture.bind(),this.renderTexture.clear()}destroy(y=!1){this.runners.destroy.items.reverse(),this.emitWithCustomOptions(this.runners.destroy,{_view:y}),super.destroy()}get plugins(){return this._plugin.plugins}get multisample(){return this._multisample.multisample}get width(){return this._view.element.width}get height(){return this._view.element.height}get resolution(){return this._view.resolution}set resolution(y){this._view.resolution=y,this.runners.resolutionChange.emit(y)}get autoDensity(){return this._view.autoDensity}get view(){return this._view.element}get screen(){return this._view.screen}get lastObjectRendered(){return this.objectRenderer.lastObjectRendered}get renderingToScreen(){return this.objectRenderer.renderingToScreen}get rendererLogId(){return`WebGL ${this.context.webGLVersion}`}get clearBeforeRender(){return(0,Y.deprecation)("7.0.0","renderer.clearBeforeRender has been deprecated, please use renderer.background.clearBeforeRender instead."),this.background.clearBeforeRender}get useContextAlpha(){return(0,Y.deprecation)("7.0.0","renderer.useContextAlpha has been deprecated, please use renderer.context.premultipliedAlpha instead."),this.context.useContextAlpha}get preserveDrawingBuffer(){return(0,Y.deprecation)("7.0.0","renderer.preserveDrawingBuffer has been deprecated, we cannot truly know this unless pixi created the context"),this.context.preserveDrawingBuffer}get backgroundColor(){return(0,Y.deprecation)("7.0.0","renderer.backgroundColor has been deprecated, use renderer.background.color instead."),this.background.color}set backgroundColor(y){(0,Y.deprecation)("7.0.0","renderer.backgroundColor has been deprecated, use renderer.background.color instead."),this.background.color=y}get backgroundAlpha(){return(0,Y.deprecation)("7.0.0","renderer.backgroundAlpha has been deprecated, use renderer.background.alpha instead."),this.background.alpha}set backgroundAlpha(y){(0,Y.deprecation)("7.0.0","renderer.backgroundAlpha has been deprecated, use renderer.background.alpha instead."),this.background.alpha=y}get powerPreference(){return(0,Y.deprecation)("7.0.0","renderer.powerPreference has been deprecated, we can only know this if pixi creates the context"),this.context.powerPreference}generateTexture(y,T){return this.textureGenerator.generateTexture(y,T)}};eZ.extension={type:q.n.Renderer,priority:1},eZ.__plugins={},eZ.__systems={},q.R.handleByMap(q.n.RendererPlugin,eZ.__plugins),q.R.handleByMap(q.n.RendererSystem,eZ.__systems),q.R.add(eZ);let AbstractMultiResource=class AbstractMultiResource extends Resource{constructor(y,T){let{width:A,height:B}=T||{};super(A,B),this.items=[],this.itemDirtyIds=[];for(let T=0;T<y;T++){let y=new ei;this.items.push(y),this.itemDirtyIds.push(-2)}this.length=y,this._load=null,this.baseTexture=null}initFromArray(y,T){for(let A=0;A<this.length;A++)y[A]&&(y[A].castToBaseTexture?this.addBaseTextureAt(y[A].castToBaseTexture(),A):y[A]instanceof Resource?this.addResourceAt(y[A],A):this.addResourceAt(autoDetectResource(y[A],T),A))}dispose(){for(let y=0,T=this.length;y<T;y++)this.items[y].destroy();this.items=null,this.itemDirtyIds=null,this._load=null}addResourceAt(y,T){if(!this.items[T])throw Error(`Index ${T} is out of bounds`);return y.valid&&!this.valid&&this.resize(y.width,y.height),this.items[T].setResource(y),this}bind(y){if(null!==this.baseTexture)throw Error("Only one base texture per TextureArray is allowed");super.bind(y);for(let T=0;T<this.length;T++)this.items[T].parentTextureArray=y,this.items[T].on("update",y.update,y)}unbind(y){super.unbind(y);for(let T=0;T<this.length;T++)this.items[T].parentTextureArray=null,this.items[T].off("update",y.update,y)}load(){if(this._load)return this._load;let y=this.items.map(y=>y.resource).filter(y=>y),T=y.map(y=>y.load());return this._load=Promise.all(T).then(()=>{let{realWidth:y,realHeight:T}=this.items[0];return this.resize(y,T),Promise.resolve(this)}),this._load}};let e0=class extends AbstractMultiResource{constructor(y,T){let{width:A,height:B,autoLoad:F,linkBaseTexture:X}=T||{};if(y&&y.length!==e0.SIDES)throw Error(`Invalid length. Got ${y.length}, expected 6`);super(6,{width:A,height:B});for(let y=0;y<e0.SIDES;y++)this.items[y].target=U.sp.TEXTURE_CUBE_MAP_POSITIVE_X+y;this.linkBaseTexture=!1!==X,y&&this.initFromArray(y,T),!1!==F&&this.load()}bind(y){super.bind(y),y.target=U.sp.TEXTURE_CUBE_MAP}addBaseTextureAt(y,T,A){if(void 0===A&&(A=this.linkBaseTexture),!this.items[T])throw Error(`Index ${T} is out of bounds`);if(!this.linkBaseTexture||y.parentTextureArray||Object.keys(y._glTextures).length>0){if(y.resource)this.addResourceAt(y.resource,T);else throw Error("CubeResource does not support copying of renderTexture.")}else y.target=U.sp.TEXTURE_CUBE_MAP_POSITIVE_X+T,y.parentTextureArray=this.baseTexture,this.items[T]=y;return y.valid&&!this.valid&&this.resize(y.realWidth,y.realHeight),this.items[T]=y,this}upload(y,T,A){let B=this.itemDirtyIds;for(let F=0;F<e0.SIDES;F++){let U=this.items[F];(B[F]<U.dirtyId||A.dirtyId<T.dirtyId)&&(U.valid&&U.resource?(U.resource.upload(y,U,A),B[F]=U.dirtyId):B[F]<-1&&(y.gl.texImage2D(U.target,0,A.internalFormat,T.realWidth,T.realHeight,0,T.format,A.type,null),B[F]=-1))}return!0}static test(y){return Array.isArray(y)&&y.length===e0.SIDES}};e0.SIDES=6;let ImageBitmapResource=class ImageBitmapResource extends BaseImageResource{constructor(y,T){let A,B;T=T||{},"string"==typeof y?(A=ImageBitmapResource.EMPTY,B=y):(A=y,B=null),super(A),this.url=B,this.crossOrigin=T.crossOrigin??!0,this.alphaMode="number"==typeof T.alphaMode?T.alphaMode:null,this._load=null,!1!==T.autoLoad&&this.load()}load(){return this._load||(this._load=new Promise(async(y,T)=>{if(null===this.url){y(this);return}try{let T=await X.Xd.ADAPTER.fetch(this.url,{mode:this.crossOrigin?"cors":"no-cors"});if(this.destroyed)return;let A=await T.blob();if(this.destroyed)return;let B=await createImageBitmap(A,{premultiplyAlpha:null===this.alphaMode||this.alphaMode===U.iw.UNPACK?"premultiply":"none"});if(this.destroyed)return;this.source=B,this.update(),y(this)}catch(y){if(this.destroyed)return;T(y),this.onError.emit(y)}})),this._load}upload(y,T,A){return this.source instanceof ImageBitmap?("number"==typeof this.alphaMode&&(T.alphaMode=this.alphaMode),super.upload(y,T,A)):(this.load(),!1)}dispose(){this.source instanceof ImageBitmap&&this.source.close(),super.dispose(),this._load=null}static test(y){return!!globalThis.createImageBitmap&&"undefined"!=typeof ImageBitmap&&("string"==typeof y||y instanceof ImageBitmap)}static get EMPTY(){return ImageBitmapResource._EMPTY=ImageBitmapResource._EMPTY??X.Xd.ADAPTER.createCanvas(0,0),ImageBitmapResource._EMPTY}};let e1=class extends BaseImageResource{constructor(y,T){T=T||{},super(X.Xd.ADAPTER.createCanvas()),this._width=0,this._height=0,this.svg=y,this.scale=T.scale||1,this._overrideWidth=T.width,this._overrideHeight=T.height,this._resolve=null,this._crossorigin=T.crossorigin,this._load=null,!1!==T.autoLoad&&this.load()}load(){return this._load||(this._load=new Promise(y=>{if(this._resolve=()=>{this.resize(this.source.width,this.source.height),y(this)},e1.SVG_XML.test(this.svg.trim())){if(!btoa)throw Error("Your browser doesn't support base64 conversions.");this.svg=`data:image/svg+xml;base64,${btoa(unescape(encodeURIComponent(this.svg)))}`}this._loadSvg()})),this._load}_loadSvg(){let y=new Image;BaseImageResource.crossOrigin(y,this.svg,this._crossorigin),y.src=this.svg,y.onerror=T=>{this._resolve&&(y.onerror=null,this.onError.emit(T))},y.onload=()=>{if(!this._resolve)return;let T=y.width,A=y.height;if(!T||!A)throw Error("The SVG image must have width and height defined (in pixels), canvas API needs them.");let B=T*this.scale,F=A*this.scale;(this._overrideWidth||this._overrideHeight)&&(B=this._overrideWidth||this._overrideHeight/A*T,F=this._overrideHeight||this._overrideWidth/T*A),B=Math.round(B),F=Math.round(F);let U=this.source;U.width=B,U.height=F,U._pixiId=`canvas_${(0,Y.uid)()}`,U.getContext("2d").drawImage(y,0,0,T,A,0,0,B,F),this._resolve(),this._resolve=null}}static getSize(y){let T=e1.SVG_SIZE.exec(y),A={};return T&&(A[T[1]]=Math.round(parseFloat(T[3])),A[T[5]]=Math.round(parseFloat(T[7]))),A}dispose(){super.dispose(),this._resolve=null,this._crossorigin=null}static test(y,T){return"svg"===T||"string"==typeof y&&y.startsWith("data:image/svg+xml")||"string"==typeof y&&e1.SVG_XML.test(y)}},e2=e1;e2.SVG_XML=/^(<\?xml[^?]+\?>)?\s*(<!--[^(-->)]*-->)?\s*\<svg/m,e2.SVG_SIZE=/<svg[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*>/i;let e3=class extends BaseImageResource{constructor(y,T){if(T=T||{},!(y instanceof HTMLVideoElement)){let A=document.createElement("video");A.setAttribute("preload","auto"),A.setAttribute("webkit-playsinline",""),A.setAttribute("playsinline",""),"string"==typeof y&&(y=[y]);let B=y[0].src||y[0];BaseImageResource.crossOrigin(A,B,T.crossorigin);for(let T=0;T<y.length;++T){let B=document.createElement("source"),{src:F,mime:U}=y[T];F=F||y[T];let X=F.split("?").shift().toLowerCase(),Y=X.slice(X.lastIndexOf(".")+1);U=U||e3.MIME_TYPES[Y]||`video/${Y}`,B.src=F,B.type=U,A.appendChild(B)}y=A}super(y),this.noSubImage=!0,this._autoUpdate=!0,this._isConnectedToTicker=!1,this._updateFPS=T.updateFPS||0,this._msToNextUpdate=0,this.autoPlay=!1!==T.autoPlay,this._load=null,this._resolve=null,this._onCanPlay=this._onCanPlay.bind(this),this._onError=this._onError.bind(this),!1!==T.autoLoad&&this.load()}update(y=0){if(!this.destroyed){let y=eK.vB.shared.elapsedMS*this.source.playbackRate;this._msToNextUpdate=Math.floor(this._msToNextUpdate-y),(!this._updateFPS||this._msToNextUpdate<=0)&&(super.update(),this._msToNextUpdate=this._updateFPS?Math.floor(1e3/this._updateFPS):0)}}load(){if(this._load)return this._load;let y=this.source;return(y.readyState===y.HAVE_ENOUGH_DATA||y.readyState===y.HAVE_FUTURE_DATA)&&y.width&&y.height&&(y.complete=!0),y.addEventListener("play",this._onPlayStart.bind(this)),y.addEventListener("pause",this._onPlayStop.bind(this)),this._isSourceReady()?this._onCanPlay():(y.addEventListener("canplay",this._onCanPlay),y.addEventListener("canplaythrough",this._onCanPlay),y.addEventListener("error",this._onError,!0)),this._load=new Promise(T=>{this.valid?T(this):(this._resolve=T,y.load())}),this._load}_onError(y){this.source.removeEventListener("error",this._onError,!0),this.onError.emit(y)}_isSourcePlaying(){let y=this.source;return!y.paused&&!y.ended&&this._isSourceReady()}_isSourceReady(){let y=this.source;return y.readyState>2}_onPlayStart(){this.valid||this._onCanPlay(),this.autoUpdate&&!this._isConnectedToTicker&&(eK.vB.shared.add(this.update,this),this._isConnectedToTicker=!0)}_onPlayStop(){this._isConnectedToTicker&&(eK.vB.shared.remove(this.update,this),this._isConnectedToTicker=!1)}_onCanPlay(){let y=this.source;y.removeEventListener("canplay",this._onCanPlay),y.removeEventListener("canplaythrough",this._onCanPlay);let T=this.valid;this.resize(y.videoWidth,y.videoHeight),!T&&this._resolve&&(this._resolve(this),this._resolve=null),this._isSourcePlaying()?this._onPlayStart():this.autoPlay&&y.play()}dispose(){this._isConnectedToTicker&&(eK.vB.shared.remove(this.update,this),this._isConnectedToTicker=!1);let y=this.source;y&&(y.removeEventListener("error",this._onError,!0),y.pause(),y.src="",y.load()),super.dispose()}get autoUpdate(){return this._autoUpdate}set autoUpdate(y){y!==this._autoUpdate&&(this._autoUpdate=y,!this._autoUpdate&&this._isConnectedToTicker?(eK.vB.shared.remove(this.update,this),this._isConnectedToTicker=!1):this._autoUpdate&&!this._isConnectedToTicker&&this._isSourcePlaying()&&(eK.vB.shared.add(this.update,this),this._isConnectedToTicker=!0))}get updateFPS(){return this._updateFPS}set updateFPS(y){y!==this._updateFPS&&(this._updateFPS=y)}static test(y,T){return globalThis.HTMLVideoElement&&y instanceof HTMLVideoElement||e3.TYPES.includes(T)}};e3.TYPES=["mp4","m4v","webm","ogg","ogv","h264","avi","mov"],e3.MIME_TYPES={ogv:"video/ogg",mov:"video/quicktime",m4v:"video/mp4"},Q.push(ImageBitmapResource,ImageResource,class extends BaseImageResource{constructor(y){super(y)}static test(y){let{OffscreenCanvas:T}=globalThis;return!!T&&y instanceof T||globalThis.HTMLCanvasElement&&y instanceof HTMLCanvasElement}},e3,e2,BufferResource,e0,class extends AbstractMultiResource{constructor(y,T){let A,B;let{width:F,height:U}=T||{};Array.isArray(y)?(A=y,B=y.length):B=y,super(B,{width:F,height:U}),A&&this.initFromArray(A,T)}addBaseTextureAt(y,T){if(y.resource)this.addResourceAt(y.resource,T);else throw Error("ArrayResource does not support RenderTexture");return this}bind(y){super.bind(y),y.target=U.sp.TEXTURE_2D_ARRAY}upload(y,T,A){let{length:B,itemDirtyIds:F,items:U}=this,{gl:X}=y;A.dirtyId<0&&X.texImage3D(X.TEXTURE_2D_ARRAY,0,A.internalFormat,this._width,this._height,B,0,T.format,A.type,null);for(let y=0;y<B;y++){let B=U[y];F[y]<B.dirtyId&&(F[y]=B.dirtyId,B.valid&&X.texSubImage3D(X.TEXTURE_2D_ARRAY,0,0,0,y,B.resource.width,B.resource.height,1,T.format,A.type,B.resource.source))}return!0}})},68276:function(y,T,A){"use strict";A.d(T,{YZ:function(){return Bounds},W2:function(){return X},s$:function(){return DisplayObject}});var B=A(1396);let Bounds=class Bounds{constructor(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0,this.rect=null,this.updateID=-1}isEmpty(){return this.minX>this.maxX||this.minY>this.maxY}clear(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0}getRectangle(y){return this.minX>this.maxX||this.minY>this.maxY?B.Ae.EMPTY:((y=y||new B.Ae(0,0,1,1)).x=this.minX,y.y=this.minY,y.width=this.maxX-this.minX,y.height=this.maxY-this.minY,y)}addPoint(y){this.minX=Math.min(this.minX,y.x),this.maxX=Math.max(this.maxX,y.x),this.minY=Math.min(this.minY,y.y),this.maxY=Math.max(this.maxY,y.y)}addPointMatrix(y,T){let{a:A,b:B,c:F,d:U,tx:X,ty:Y}=y,K=A*T.x+F*T.y+X,q=B*T.x+U*T.y+Y;this.minX=Math.min(this.minX,K),this.maxX=Math.max(this.maxX,K),this.minY=Math.min(this.minY,q),this.maxY=Math.max(this.maxY,q)}addQuad(y){let T=this.minX,A=this.minY,B=this.maxX,F=this.maxY,U=y[0],X=y[1];T=U<T?U:T,A=X<A?X:A,B=U>B?U:B,F=X>F?X:F,U=y[2],X=y[3],T=U<T?U:T,A=X<A?X:A,B=U>B?U:B,F=X>F?X:F,U=y[4],X=y[5],T=U<T?U:T,A=X<A?X:A,B=U>B?U:B,F=X>F?X:F,U=y[6],X=y[7],T=U<T?U:T,A=X<A?X:A,B=U>B?U:B,F=X>F?X:F,this.minX=T,this.minY=A,this.maxX=B,this.maxY=F}addFrame(y,T,A,B,F){this.addFrameMatrix(y.worldTransform,T,A,B,F)}addFrameMatrix(y,T,A,B,F){let U=y.a,X=y.b,Y=y.c,K=y.d,q=y.tx,Q=y.ty,J=this.minX,Z=this.minY,ei=this.maxX,es=this.maxY,eh=U*T+Y*A+q,eu=X*T+K*A+Q;J=eh<J?eh:J,Z=eu<Z?eu:Z,ei=eh>ei?eh:ei,es=eu>es?eu:es,eh=U*B+Y*A+q,eu=X*B+K*A+Q,J=eh<J?eh:J,Z=eu<Z?eu:Z,ei=eh>ei?eh:ei,es=eu>es?eu:es,eh=U*T+Y*F+q,eu=X*T+K*F+Q,J=eh<J?eh:J,Z=eu<Z?eu:Z,ei=eh>ei?eh:ei,es=eu>es?eu:es,eh=U*B+Y*F+q,eu=X*B+K*F+Q,J=eh<J?eh:J,Z=eu<Z?eu:Z,ei=eh>ei?eh:ei,es=eu>es?eu:es,this.minX=J,this.minY=Z,this.maxX=ei,this.maxY=es}addVertexData(y,T,A){let B=this.minX,F=this.minY,U=this.maxX,X=this.maxY;for(let Y=T;Y<A;Y+=2){let T=y[Y],A=y[Y+1];B=T<B?T:B,F=A<F?A:F,U=T>U?T:U,X=A>X?A:X}this.minX=B,this.minY=F,this.maxX=U,this.maxY=X}addVertices(y,T,A,B){this.addVerticesMatrix(y.worldTransform,T,A,B)}addVerticesMatrix(y,T,A,B,F=0,U=F){let X=y.a,Y=y.b,K=y.c,q=y.d,Q=y.tx,J=y.ty,Z=this.minX,ei=this.minY,es=this.maxX,eh=this.maxY;for(let y=A;y<B;y+=2){let A=T[y],B=T[y+1],eu=X*A+K*B+Q,ed=q*B+Y*A+J;Z=Math.min(Z,eu-F),es=Math.max(es,eu+F),ei=Math.min(ei,ed-U),eh=Math.max(eh,ed+U)}this.minX=Z,this.minY=ei,this.maxX=es,this.maxY=eh}addBounds(y){let T=this.minX,A=this.minY,B=this.maxX,F=this.maxY;this.minX=y.minX<T?y.minX:T,this.minY=y.minY<A?y.minY:A,this.maxX=y.maxX>B?y.maxX:B,this.maxY=y.maxY>F?y.maxY:F}addBoundsMask(y,T){let A=y.minX>T.minX?y.minX:T.minX,B=y.minY>T.minY?y.minY:T.minY,F=y.maxX<T.maxX?y.maxX:T.maxX,U=y.maxY<T.maxY?y.maxY:T.maxY;if(A<=F&&B<=U){let y=this.minX,T=this.minY,X=this.maxX,Y=this.maxY;this.minX=A<y?A:y,this.minY=B<T?B:T,this.maxX=F>X?F:X,this.maxY=U>Y?U:Y}}addBoundsMatrix(y,T){this.addFrameMatrix(T,y.minX,y.minY,y.maxX,y.maxY)}addBoundsArea(y,T){let A=y.minX>T.x?y.minX:T.x,B=y.minY>T.y?y.minY:T.y,F=y.maxX<T.x+T.width?y.maxX:T.x+T.width,U=y.maxY<T.y+T.height?y.maxY:T.y+T.height;if(A<=F&&B<=U){let y=this.minX,T=this.minY,X=this.maxX,Y=this.maxY;this.minX=A<y?A:y,this.minY=B<T?B:T,this.maxX=F>X?F:X,this.maxY=U>Y?U:Y}}pad(y=0,T=y){this.isEmpty()||(this.minX-=y,this.maxX+=y,this.minY-=T,this.maxY+=T)}addFramePad(y,T,A,B,F,U){y-=F,T-=U,A+=F,B+=U,this.minX=this.minX<y?this.minX:y,this.maxX=this.maxX>A?this.maxX:A,this.minY=this.minY<T?this.minY:T,this.maxY=this.maxY>B?this.maxY:B}};let DisplayObject=class DisplayObject extends B.P6.EventEmitter{constructor(){super(),this.tempDisplayObjectParent=null,this.transform=new B.wx,this.alpha=1,this.visible=!0,this.renderable=!0,this.cullable=!1,this.cullArea=null,this.parent=null,this.worldAlpha=1,this._lastSortedIndex=0,this._zIndex=0,this.filterArea=null,this.filters=null,this._enabledFilters=null,this._bounds=new Bounds,this._localBounds=null,this._boundsID=0,this._boundsRect=null,this._localBoundsRect=null,this._mask=null,this._maskRefCount=0,this._destroyed=!1,this.isSprite=!1,this.isMask=!1}static mixin(y){let T=Object.keys(y);for(let A=0;A<T.length;++A){let B=T[A];Object.defineProperty(DisplayObject.prototype,B,Object.getOwnPropertyDescriptor(y,B))}}get destroyed(){return this._destroyed}_recursivePostUpdateTransform(){this.parent?(this.parent._recursivePostUpdateTransform(),this.transform.updateTransform(this.parent.transform)):this.transform.updateTransform(this._tempDisplayObjectParent.transform)}updateTransform(){this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha}getBounds(y,T){return y||(this.parent?(this._recursivePostUpdateTransform(),this.updateTransform()):(this.parent=this._tempDisplayObjectParent,this.updateTransform(),this.parent=null)),this._bounds.updateID!==this._boundsID&&(this.calculateBounds(),this._bounds.updateID=this._boundsID),T||(this._boundsRect||(this._boundsRect=new B.Ae),T=this._boundsRect),this._bounds.getRectangle(T)}getLocalBounds(y){y||(this._localBoundsRect||(this._localBoundsRect=new B.Ae),y=this._localBoundsRect),this._localBounds||(this._localBounds=new Bounds);let T=this.transform,A=this.parent;this.parent=null,this.transform=this._tempDisplayObjectParent.transform;let F=this._bounds,U=this._boundsID;this._bounds=this._localBounds;let X=this.getBounds(!1,y);return this.parent=A,this.transform=T,this._bounds=F,this._bounds.updateID+=this._boundsID-U,X}toGlobal(y,T,A=!1){return A||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.apply(y,T)}toLocal(y,T,A,B){return T&&(y=T.toGlobal(y,A,B)),B||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.applyInverse(y,A)}setParent(y){if(!y||!y.addChild)throw Error("setParent: Argument must be a Container");return y.addChild(this),y}removeFromParent(){this.parent?.removeChild(this)}setTransform(y=0,T=0,A=1,B=1,F=0,U=0,X=0,Y=0,K=0){return this.position.x=y,this.position.y=T,this.scale.x=A||1,this.scale.y=B||1,this.rotation=F,this.skew.x=U,this.skew.y=X,this.pivot.x=Y,this.pivot.y=K,this}destroy(y){this.removeFromParent(),this._destroyed=!0,this.transform=null,this.parent=null,this._bounds=null,this.mask=null,this.cullArea=null,this.filters=null,this.filterArea=null,this.hitArea=null,this.eventMode="auto",this.interactiveChildren=!1,this.emit("destroyed"),this.removeAllListeners()}get _tempDisplayObjectParent(){return null===this.tempDisplayObjectParent&&(this.tempDisplayObjectParent=new TemporaryDisplayObject),this.tempDisplayObjectParent}enableTempParent(){let y=this.parent;return this.parent=this._tempDisplayObjectParent,y}disableTempParent(y){this.parent=y}get x(){return this.position.x}set x(y){this.transform.position.x=y}get y(){return this.position.y}set y(y){this.transform.position.y=y}get worldTransform(){return this.transform.worldTransform}get localTransform(){return this.transform.localTransform}get position(){return this.transform.position}set position(y){this.transform.position.copyFrom(y)}get scale(){return this.transform.scale}set scale(y){this.transform.scale.copyFrom(y)}get pivot(){return this.transform.pivot}set pivot(y){this.transform.pivot.copyFrom(y)}get skew(){return this.transform.skew}set skew(y){this.transform.skew.copyFrom(y)}get rotation(){return this.transform.rotation}set rotation(y){this.transform.rotation=y}get angle(){return this.transform.rotation*B.jl}set angle(y){this.transform.rotation=y*B.ZX}get zIndex(){return this._zIndex}set zIndex(y){this._zIndex=y,this.parent&&(this.parent.sortDirty=!0)}get worldVisible(){let y=this;do{if(!y.visible)return!1;y=y.parent}while(y);return!0}get mask(){return this._mask}set mask(y){if(this._mask!==y){if(this._mask){let y=this._mask.isMaskData?this._mask.maskObject:this._mask;y&&(y._maskRefCount--,0===y._maskRefCount&&(y.renderable=!0,y.isMask=!1))}if(this._mask=y,this._mask){let y=this._mask.isMaskData?this._mask.maskObject:this._mask;y&&(0===y._maskRefCount&&(y.renderable=!1,y.isMask=!0),y._maskRefCount++)}}}};let TemporaryDisplayObject=class TemporaryDisplayObject extends DisplayObject{constructor(){super(...arguments),this.sortDirty=null}};DisplayObject.prototype.displayObjectUpdateTransform=DisplayObject.prototype.updateTransform;let F=new B.y3;function sortChildren(y,T){return y.zIndex===T.zIndex?y._lastSortedIndex-T._lastSortedIndex:y.zIndex-T.zIndex}let U=class extends DisplayObject{constructor(){super(),this.children=[],this.sortableChildren=U.defaultSortableChildren,this.sortDirty=!1}onChildrenChange(y){}addChild(...y){if(y.length>1)for(let T=0;T<y.length;T++)this.addChild(y[T]);else{let T=y[0];T.parent&&T.parent.removeChild(T),T.parent=this,this.sortDirty=!0,T.transform._parentID=-1,this.children.push(T),this._boundsID++,this.onChildrenChange(this.children.length-1),this.emit("childAdded",T,this,this.children.length-1),T.emit("added",this)}return y[0]}addChildAt(y,T){if(T<0||T>this.children.length)throw Error(`${y}addChildAt: The index ${T} supplied is out of bounds ${this.children.length}`);return y.parent&&y.parent.removeChild(y),y.parent=this,this.sortDirty=!0,y.transform._parentID=-1,this.children.splice(T,0,y),this._boundsID++,this.onChildrenChange(T),y.emit("added",this),this.emit("childAdded",y,this,T),y}swapChildren(y,T){if(y===T)return;let A=this.getChildIndex(y),B=this.getChildIndex(T);this.children[A]=T,this.children[B]=y,this.onChildrenChange(A<B?A:B)}getChildIndex(y){let T=this.children.indexOf(y);if(-1===T)throw Error("The supplied DisplayObject must be a child of the caller");return T}setChildIndex(y,T){if(T<0||T>=this.children.length)throw Error(`The index ${T} supplied is out of bounds ${this.children.length}`);let A=this.getChildIndex(y);B.P6.removeItems(this.children,A,1),this.children.splice(T,0,y),this.onChildrenChange(T)}getChildAt(y){if(y<0||y>=this.children.length)throw Error(`getChildAt: Index (${y}) does not exist.`);return this.children[y]}removeChild(...y){if(y.length>1)for(let T=0;T<y.length;T++)this.removeChild(y[T]);else{let T=y[0],A=this.children.indexOf(T);if(-1===A)return null;T.parent=null,T.transform._parentID=-1,B.P6.removeItems(this.children,A,1),this._boundsID++,this.onChildrenChange(A),T.emit("removed",this),this.emit("childRemoved",T,this,A)}return y[0]}removeChildAt(y){let T=this.getChildAt(y);return T.parent=null,T.transform._parentID=-1,B.P6.removeItems(this.children,y,1),this._boundsID++,this.onChildrenChange(y),T.emit("removed",this),this.emit("childRemoved",T,this,y),T}removeChildren(y=0,T=this.children.length){let A;let B=T-y;if(B>0&&B<=T){A=this.children.splice(y,B);for(let y=0;y<A.length;++y)A[y].parent=null,A[y].transform&&(A[y].transform._parentID=-1);this._boundsID++,this.onChildrenChange(y);for(let y=0;y<A.length;++y)A[y].emit("removed",this),this.emit("childRemoved",A[y],this,y);return A}if(0===B&&0===this.children.length)return[];throw RangeError("removeChildren: numeric values are outside the acceptable range.")}sortChildren(){let y=!1;for(let T=0,A=this.children.length;T<A;++T){let A=this.children[T];A._lastSortedIndex=T,y||0===A.zIndex||(y=!0)}y&&this.children.length>1&&this.children.sort(sortChildren),this.sortDirty=!1}updateTransform(){this.sortableChildren&&this.sortDirty&&this.sortChildren(),this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha;for(let y=0,T=this.children.length;y<T;++y){let T=this.children[y];T.visible&&T.updateTransform()}}calculateBounds(){this._bounds.clear(),this._calculateBounds();for(let y=0;y<this.children.length;y++){let T=this.children[y];if(T.visible&&T.renderable){if(T.calculateBounds(),T._mask){let y=T._mask.isMaskData?T._mask.maskObject:T._mask;y?(y.calculateBounds(),this._bounds.addBoundsMask(T._bounds,y._bounds)):this._bounds.addBounds(T._bounds)}else T.filterArea?this._bounds.addBoundsArea(T._bounds,T.filterArea):this._bounds.addBounds(T._bounds)}}this._bounds.updateID=this._boundsID}getLocalBounds(y,T=!1){let A=super.getLocalBounds(y);if(!T)for(let y=0,T=this.children.length;y<T;++y){let T=this.children[y];T.visible&&T.updateTransform()}return A}_calculateBounds(){}_renderWithCulling(y){let T,A;let B=y.renderTexture.sourceFrame;if(!(B.width>0&&B.height>0))return;this.cullArea?(T=this.cullArea,A=this.worldTransform):this._render!==U.prototype._render&&(T=this.getBounds(!0));let X=y.projection.transform;if(X&&(A?(A=F.copyFrom(A)).prepend(X):A=X),T&&B.intersects(T,A))this._render(y);else if(this.cullArea)return;for(let T=0,A=this.children.length;T<A;++T){let A=this.children[T],B=A.cullable;A.cullable=B||!this.cullArea,A.render(y),A.cullable=B}}render(y){if(this.visible&&!(this.worldAlpha<=0)&&this.renderable){if(this._mask||this.filters?.length)this.renderAdvanced(y);else if(this.cullable)this._renderWithCulling(y);else{this._render(y);for(let T=0,A=this.children.length;T<A;++T)this.children[T].render(y)}}}renderAdvanced(y){let T=this.filters,A=this._mask;if(T){this._enabledFilters||(this._enabledFilters=[]),this._enabledFilters.length=0;for(let y=0;y<T.length;y++)T[y].enabled&&this._enabledFilters.push(T[y])}let F=T&&this._enabledFilters?.length||A&&(!A.isMaskData||A.enabled&&(A.autoDetect||A.type!==B.A7.NONE));if(F&&y.batch.flush(),T&&this._enabledFilters?.length&&y.filter.push(this,this._enabledFilters),A&&y.mask.push(this,this._mask),this.cullable)this._renderWithCulling(y);else{this._render(y);for(let T=0,A=this.children.length;T<A;++T)this.children[T].render(y)}F&&y.batch.flush(),A&&y.mask.pop(this),T&&this._enabledFilters?.length&&y.filter.pop()}_render(y){}destroy(y){super.destroy(),this.sortDirty=!1;let T="boolean"==typeof y?y:y?.children,A=this.removeChildren(0,this.children.length);if(T)for(let T=0;T<A.length;++T)A[T].destroy(y)}get width(){return this.scale.x*this.getLocalBounds().width}set width(y){let T=this.getLocalBounds().width;0!==T?this.scale.x=y/T:this.scale.x=1,this._width=y}get height(){return this.scale.y*this.getLocalBounds().height}set height(y){let T=this.getLocalBounds().height;0!==T?this.scale.y=y/T:this.scale.y=1,this._height=y}},X=U;X.defaultSortableChildren=!1,X.prototype.containerUpdateTransform=X.prototype.updateTransform,Object.defineProperties(B.Xd,{SORTABLE_CHILDREN:{get:()=>X.defaultSortableChildren,set(y){B.P6.deprecation("7.1.0","settings.SORTABLE_CHILDREN is deprecated, use Container.defaultSortableChildren"),X.defaultSortableChildren=y}}})},90463:function(y,T,A){"use strict";A.d(T,{R:function(){return U},n:function(){return F}});var B,F=((B=F||{}).Renderer="renderer",B.Application="application",B.RendererSystem="renderer-webgl-system",B.RendererPlugin="renderer-webgl-plugin",B.CanvasRendererSystem="renderer-canvas-system",B.CanvasRendererPlugin="renderer-canvas-plugin",B.Asset="asset",B.LoadParser="load-parser",B.ResolveParser="resolve-parser",B.CacheParser="cache-parser",B.DetectionParser="detection-parser",B);let normalizeExtension=y=>{if("function"==typeof y||"object"==typeof y&&y.extension){if(!y.extension)throw Error("Extension class must have an extension object");let T="object"!=typeof y.extension?{type:y.extension}:y.extension;y={...T,ref:y}}if("object"==typeof y)y={...y};else throw Error("Invalid extension type");return"string"==typeof y.type&&(y.type=[y.type]),y},normalizePriority=(y,T)=>normalizeExtension(y).priority??T,U={_addHandlers:{},_removeHandlers:{},_queue:{},remove(...y){return y.map(normalizeExtension).forEach(y=>{y.type.forEach(T=>this._removeHandlers[T]?.(y))}),this},add(...y){return y.map(normalizeExtension).forEach(y=>{y.type.forEach(T=>{let A=this._addHandlers,B=this._queue;A[T]?A[T](y):(B[T]=B[T]||[],B[T].push(y))})}),this},handle(y,T,A){let B=this._addHandlers,F=this._removeHandlers;if(B[y]||F[y])throw Error(`Extension type ${y} already has a handler`);B[y]=T,F[y]=A;let U=this._queue;return U[y]&&(U[y].forEach(y=>T(y)),delete U[y]),this},handleByMap(y,T){return this.handle(y,y=>{T[y.name]=y.ref},y=>{delete T[y.name]})},handleByList(y,T,A=-1){return this.handle(y,y=>{T.includes(y.ref)||(T.push(y.ref),T.sort((y,T)=>normalizePriority(T,A)-normalizePriority(y,A)))},y=>{let A=T.indexOf(y.ref);-1!==A&&T.splice(A,1)})}}},57564:function(y,T,A){"use strict";A.d(T,{F4:function(){return Y},K3:function(){return eS},Xd:function(){return e_}});var B,F,U=A(1396);function matrixEquals(y,T,A=.001){return this===T||Math.abs(y.a-T.a)<A&&Math.abs(y.b-T.b)<A&&Math.abs(y.c-T.c)<A&&Math.abs(y.d-T.d)<A&&Math.abs(y.tx-T.tx)<A&&Math.abs(y.ty-T.ty)<A}let BatchStyleArray=class BatchStyleArray{constructor(){this.textureIds=[],this.matrices=[],this.lines=[],this.count=0}clear(){for(let y=0;y<this.count;y++)this.textureIds[y]=null,this.matrices[y]=null;this.count=0}add(y,T,A,B,F,U){let{textureIds:X,matrices:Y,lines:K,count:q}=this;y=4*y+F;for(let F=0;F<q;F++)if(K[2*F]===A&&K[2*F+1]===B&&X[F]===y&&matrixEquals(Y[F],T))return F;return q>=U.maxStyles?-1:(X[q]=y,Y[q]=T,K[2*q]=A,K[2*q+1]=B,this.count++,q)}};let BatchDrawCall=class BatchDrawCall{constructor(){this.texArray=new U.Ie,this.styleArray=new BatchStyleArray,this.shader=null,this.blend=U.T$.NORMAL,this.start=0,this.size=0,this.TICK=0,this.settings=null,this.data=null}clear(){this.texArray.clear(),this.styleArray.clear(),this.settings=null,this.data=null,this.shader=null}begin(y,T){this.TICK=++U.VL._globalBatch,this.settings=y,this.shader=T,this.start=0,this.size=0,this.data=null,T&&T.settings&&(this.settings=T.settings)}check(y){return 0===this.size?(this.shader=y,!0):this.shader===y}add(y,T,A,B,F){let{texArray:X,TICK:Y,styleArray:K,settings:q}=this,{baseTexture:Q}=y;if(Q._batchEnabled!==Y&&X.count===q.maxTextures)return -1;let J=Q._batchEnabled!==Y?X.count:Q._batchLocation,Z=K.add(J,T||U.y3.IDENTITY,A,B,F,q);return Z>=0&&Q._batchEnabled!==Y&&(Q._batchEnabled=Y,Q._batchLocation=X.count,X.elements[X.count++]=Q),Z}};var X=A(19743);let FillStyle=class FillStyle{constructor(){this.reset()}toJSON(){return this.copyTo({})}clone(){return this.copyTo(new FillStyle)}copyTo(y){return y.color=this.color,y.alpha=this.alpha,y.texture=this.texture,y.matrix=this.matrix,y.shader=this.shader,y.visible=this.visible,y.smooth=this.smooth,y.matrixTex=null,y}packLineScale(){return 0}reset(){this.color=16777215,this.alpha=1,this.texture=U.xE.WHITE,this.matrix=null,this.shader=null,this.visible=!1,this.smooth=!1,this.matrixTex=null}destroy(){this.texture=null,this.matrix=null,this.matrixTex=null}getTextureMatrix(){let y=this.texture;return this.matrix?y.frame.width===y.baseTexture.width&&y.frame.height===y.baseTexture.height?this.matrix:(this.matrixTex?this.matrixTex.copyFrom(this.matrix):this.matrixTex=this.matrix.clone(),this.matrixTex.translate(Number(y.frame.x),Number(y.frame.y)),this.matrixTex):null}};var Y=((B=Y||{}).NONE="none",B.NORMAL="normal",B.HORIZONTAL="horizontal",B.VERTICAL="vertical",B);let LineStyle=class LineStyle extends FillStyle{clone(){return this.copyTo(new LineStyle)}copyTo(y){return y.color=this.color,y.alpha=this.alpha,y.texture=this.texture,y.matrix=this.matrix,y.shader=this.shader,y.visible=this.visible,y.width=this.width,y.alignment=this.alignment,y.cap=this.cap,y.join=this.join,y.miterLimit=this.miterLimit,y.scaleMode=this.scaleMode,y}packLineScale(){switch(this.scaleMode){case"normal":return 1;case"horizontal":return 2;case"vertical":return 3;default:return 0}}reset(){super.reset(),this.smooth=!0,this.color=0,this.width=0,this.alignment=.5,this.cap=X.$o.BUTT,this.join=X.S.MITER,this.miterLimit=10,this.scaleMode="normal"}};var K=((F=K||{})[F.NONE=0]="NONE",F[F.FILL=1]="FILL",F[F.JOINT_BEVEL=4]="JOINT_BEVEL",F[F.JOINT_MITER=8]="JOINT_MITER",F[F.JOINT_ROUND=12]="JOINT_ROUND",F[F.JOINT_CAP_BUTT=16]="JOINT_CAP_BUTT",F[F.JOINT_CAP_SQUARE=18]="JOINT_CAP_SQUARE",F[F.JOINT_CAP_ROUND=20]="JOINT_CAP_ROUND",F[F.FILL_EXPAND=24]="FILL_EXPAND",F[F.CAP_BUTT=32]="CAP_BUTT",F[F.CAP_SQUARE=64]="CAP_SQUARE",F[F.CAP_ROUND=96]="CAP_ROUND",F[F.CAP_BUTT2=128]="CAP_BUTT2",F);let q=class{constructor(){this.strideFloats=12,this.bufferPos=0,this.indexPos=0}updateBufferSize(y,T,A,B){let{joints:F}=B,U=!1,X=0,Y=0;for(let A=y;A<y+T;A++){let y=-32&F[A],T=31&F[A];if(T===K.FILL){U=!0,X++;continue}if(T>=K.FILL_EXPAND){X+=3,Y+=3;continue}let B=q.vertsByJoint[T]+q.vertsByJoint[y];B>=4&&(X+=B,Y+=6+3*Math.max(B-6,0))}U&&(Y+=A),B.vertexSize+=X,B.indexSize+=Y}beginPack(y,T,A,B,F=0,U=0){this.buildData=y,this.bufFloat=T,this.bufUint=A,this.indices=B,this.bufferPos=F,this.indexPos=U}endPack(){this.buildData=null,this.bufFloat=null,this.bufUint=null,this.indices=null}packInterleavedGeometry(y,T,A,B,F){let U,X,Y,Q,J,Z,ei,es;let{bufFloat:eh,bufUint:eu,indices:ed,buildData:ec,strideFloats:ef}=this,{joints:ep,verts:em}=ec,eg=this.bufferPos,e_=this.indexPos,ev=this.bufferPos/this.strideFloats,ey=!1,ex=0;for(let A=y;A<y+T;A++){let y=ep[A],T=-32&ep[A],ec=31&ep[A];if(ec===K.FILL){ey=!0,U=em[2*A],X=em[2*A+1],eh[eg]=U,eh[eg+1]=X,eh[eg+2]=U,eh[eg+3]=X,eh[eg+4]=U,eh[eg+5]=X,eh[eg+6]=U,eh[eg+7]=X,eh[eg+8]=ex,eh[eg+9]=16*ec,eh[eg+10]=B,eu[eg+11]=F,eg+=ef;continue}if(ec>=K.FILL_EXPAND){J=em[2*A],Z=em[2*A+1],U=em[2*A+2],X=em[2*A+3],Y=em[2*A+4],Q=em[2*A+5];let T=A+3;for(let A=0;A<3;A++)eh[eg]=J,eh[eg+1]=Z,eh[eg+2]=U,eh[eg+3]=X,eh[eg+4]=Y,eh[eg+5]=Q,eh[eg+6]=em[(T+A)*2],eh[eg+7]=em[(T+A)*2+1],eh[eg+8]=ex,eh[eg+9]=16*y+A,eh[eg+10]=B,eu[eg+11]=F,eg+=ef;ed[e_]=ev,ed[e_+1]=ev+1,ed[e_+2]=ev+2,e_+=3,ev+=3;continue}let eb=q.vertsByJoint[ec]+q.vertsByJoint[T];if(0===eb)continue;U=em[2*A],X=em[2*A+1],Y=em[2*A+2],Q=em[2*A+3],J=em[2*A-2],Z=em[2*A-1];let eT=Math.sqrt((Y-U)*(Y-U)+(Q-X)*(Q-X));0===q.vertsByJoint[ec]&&(ex-=eT),(-3&ec)!==K.JOINT_CAP_BUTT?(ei=em[2*A+4],es=em[2*A+5]):(ei=U,es=X);for(let T=0;T<eb;T++)eh[eg]=J,eh[eg+1]=Z,eh[eg+2]=U,eh[eg+3]=X,eh[eg+4]=Y,eh[eg+5]=Q,eh[eg+6]=ei,eh[eg+7]=es,eh[eg+8]=ex,eh[eg+9]=16*y+T,eh[eg+10]=B,eu[eg+11]=F,eg+=ef;ex+=eT,ed[e_]=ev,ed[e_+1]=ev+1,ed[e_+2]=ev+2,ed[e_+3]=ev,ed[e_+4]=ev+2,ed[e_+5]=ev+3,e_+=6;for(let y=5;y+1<eb;y++)ed[e_]=ev+4,ed[e_+1]=ev+y,ed[e_+2]=ev+y+1,e_+=3;ev+=eb}if(ey){for(let y=0;y<A.length;y++)ed[e_+y]=A[y]+ev;e_+=A.length}this.bufferPos=eg,this.indexPos=e_}};q.vertsByJoint=[];let Q=q.vertsByJoint;for(let y=0;y<256;y++)Q.push(0);Q[K.FILL]=1;for(let y=0;y<8;y++)Q[K.FILL_EXPAND+y]=3;Q[K.JOINT_BEVEL]=9,Q[K.JOINT_BEVEL+1]=9,Q[K.JOINT_BEVEL+2]=9,Q[K.JOINT_BEVEL+3]=9,Q[K.JOINT_ROUND]=9,Q[K.JOINT_ROUND+1]=9,Q[K.JOINT_ROUND+2]=9,Q[K.JOINT_ROUND+3]=9,Q[K.JOINT_MITER]=9,Q[K.JOINT_MITER+1]=9,Q[K.JOINT_MITER+2]=4,Q[K.JOINT_MITER+3]=4,Q[K.JOINT_CAP_BUTT]=4,Q[K.JOINT_CAP_BUTT+1]=4,Q[K.JOINT_CAP_SQUARE]=4,Q[K.JOINT_CAP_SQUARE+1]=4,Q[K.JOINT_CAP_ROUND]=9,Q[K.JOINT_CAP_ROUND+1]=9,Q[K.CAP_ROUND]=4;let SmoothGraphicsData=class SmoothGraphicsData{constructor(y,T=null,A=null,B=null){this.shape=y,this.lineStyle=A,this.fillStyle=T,this.matrix=B,this.type=y.type,this.points=[],this.holes=[],this.triangles=[],this.closeStroke=!1,this.clearBuild()}clearPath(){this.points.length=0,this.closeStroke=!0}clearBuild(){this.triangles.length=0,this.fillStart=0,this.fillLen=0,this.strokeStart=0,this.strokeLen=0,this.fillAA=!1}clone(){return new SmoothGraphicsData(this.shape,this.fillStyle,this.lineStyle,this.matrix)}capType(){let y;switch(this.lineStyle.cap){case X.$o.SQUARE:y=K.CAP_SQUARE;break;case X.$o.ROUND:y=K.CAP_ROUND;break;default:y=K.CAP_BUTT}return y}goodJointType(){let y;switch(this.lineStyle.join){case X.S.BEVEL:y=K.JOINT_BEVEL;break;case X.S.ROUND:y=K.JOINT_ROUND;break;default:y=K.JOINT_MITER+3}return y}jointType(){let y;switch(this.lineStyle.join){case X.S.BEVEL:y=K.JOINT_BEVEL;break;case X.S.ROUND:y=K.JOINT_ROUND;break;default:y=K.JOINT_MITER}return y}destroy(){this.shape=null,this.holes.length=0,this.holes=null,this.points.length=0,this.points=null,this.lineStyle=null,this.fillStyle=null,this.triangles=null}};let CircleBuilder=class CircleBuilder{path(y,T){let A,B,F,X,Y,K;let q=y.points;if(y.type===U.HS.CIRC){let T=y.shape;A=T.x,B=T.y,Y=K=T.radius,F=X=0}else if(y.type===U.HS.ELIP){let T=y.shape;A=T.x,B=T.y,Y=T.width,K=T.height,F=X=0}else{let T=y.shape,U=T.width/2,q=T.height/2;A=T.x+U,B=T.y+q,Y=K=Math.max(0,Math.min(T.radius,Math.min(U,q))),F=U-Y,X=q-K}if(!(Y>=0&&K>=0&&F>=0&&X>=0)){q.length=0;return}let Q=Math.ceil(2.3*Math.sqrt(Y+K)),J=8*Q+(F?4:0)+(X?4:0);if(q.length=J,0===J)return;if(0===Q){q.length=8,q[0]=q[6]=A+F,q[1]=q[3]=B+X,q[2]=q[4]=A-F,q[5]=q[7]=B-X;return}let Z=0,ei=4*Q+(F?2:0)+2,es=ei,eh=J;{let y=F+Y,T=X,U=A+y,K=A-y,Q=B+T;if(q[Z++]=U,q[Z++]=Q,q[--ei]=Q,q[--ei]=K,X){let y=B-T;q[es++]=K,q[es++]=y,q[--eh]=y,q[--eh]=U}}for(let y=1;y<Q;y++){let T=Math.PI/2*(y/Q),U=F+Math.cos(T)*Y,J=X+Math.sin(T)*K,eu=A+U,ed=A-U,ec=B+J,ef=B-J;q[Z++]=eu,q[Z++]=ec,q[--ei]=ec,q[--ei]=ed,q[es++]=ed,q[es++]=ef,q[--eh]=ef,q[--eh]=eu}{let y=F,T=X+K,U=A+y,Y=A-y,Q=B+T,J=B-T;q[Z++]=U,q[Z++]=Q,q[--eh]=J,q[--eh]=U,F&&(q[Z++]=Y,q[Z++]=Q,q[--eh]=J,q[--eh]=Y)}}fill(y,T){let A,B,F,X;let{verts:Y,joints:q}=T,{points:Q,triangles:J}=y;if(0===Q.length)return;if(y.type!==U.HS.RREC){let T=y.shape;A=T.x,B=T.y}else{let T=y.shape;A=T.x+T.width/2,B=T.y+T.height/2}let Z=y.matrix,ei=Z?Z.a*A+Z.c*B+Z.tx:A,es=Z?Z.b*A+Z.d*B+Z.ty:B,eh=1;if(!y.fillAA){Y.push(ei,es),q.push(K.FILL),Y.push(Q[0],Q[1]),q.push(K.FILL);for(let y=2;y<Q.length;y+=2)Y.push(Q[y],Q[y+1]),q.push(K.FILL),J.push(eh++,0,eh);J.push(1,0,eh);return}let eu=Q.length,ed=Q[eu-2],ec=Q[eu-1],ef=ec-Q[eu-3],ep=Q[eu-4]-ed,em=Math.sqrt(ef*ef+ep*ep);ef/=em,ep/=em;for(let y=0;y<eu;y+=2){let T=Q[y],A=Q[y+1],B=A-ec,U=ed-T,J=Math.sqrt(B*B+U*U),Z=ef+(B/=J),eh=ep+(U/=J),eu=B*Z+U*eh;Z/=eu,eh/=eu,y>0?(Y.push(Z),Y.push(eh)):(F=Z,X=eh),Y.push(ei),Y.push(es),Y.push(ed),Y.push(ec),Y.push(T),Y.push(A),Y.push(0),Y.push(0),Y.push(Z),Y.push(eh),q.push(K.FILL_EXPAND+2),q.push(K.NONE),q.push(K.NONE),q.push(K.NONE),q.push(K.NONE),q.push(K.NONE),ed=T,ec=A,ef=B,ep=U}Y.push(F),Y.push(X)}line(y,T){let{verts:A,joints:B}=T,{points:F}=y,U=8===F.length?y.goodJointType():K.JOINT_MITER+3,X=F.length;if(0!==X){A.push(F[X-2],F[X-1]),B.push(K.NONE);for(let y=0;y<X;y+=2)A.push(F[y],F[y+1]),B.push(U);A.push(F[0],F[1]),B.push(K.NONE),A.push(F[2],F[3]),B.push(K.NONE)}}};let J=[];function fixOrientation(y,T=!1){let A=y.length;if(A<6)return;let B=0;for(let T=0,F=y[A-2],U=y[A-1];T<A;T+=2){let A=y[T],X=y[T+1];B+=(A-F)*(X+U),F=A,U=X}if(!T&&B>0||T&&B<=0){let T=A/2;for(let B=T+T%2;B<A;B+=2){let T=A-B-2,F=A-B-1,U=B,X=B+1;[y[T],y[U]]=[y[U],y[T]],[y[F],y[X]]=[y[X],y[F]]}}}let PolyBuilder=class PolyBuilder{path(y,T){let A=y.shape,B=y.points=A.points.slice(),F=T.closePointEps,X=F*F;if(0===B.length)return;let Y=new U.E9(B[0],B[1]),K=new U.E9(B[B.length-2],B[B.length-1]),q=y.closeStroke=A.closeStroke,Q=B.length,J=2;for(let y=2;y<Q;y+=2){let T=B[y-2],A=B[y-1],U=B[y],X=B[y+1],Y=!0;Math.abs(T-U)<F&&Math.abs(A-X)<F&&(Y=!1),Y&&(B[J]=B[y],B[J+1]=B[y+1],J+=2)}B.length=Q=J,J=2;for(let y=2;y+2<Q;y+=2){let T=B[y-2],A=B[y-1],F=B[y],U=B[y+1],Y=B[y+2],K=B[y+3];T-=F,A-=U;let q=!0;Math.abs((Y-=F)*A-(K-=U)*T)<X&&T*Y+A*K<-X&&(q=!1),q&&(B[J]=B[y],B[J+1]=B[y+1],J+=2)}if(B[J]=B[Q-2],B[J+1]=B[Q-1],J+=2,B.length=Q=J,!(Q<=2)&&q){let y=Math.abs(Y.x-K.x)<F&&Math.abs(Y.y-K.y)<F;y&&(B.pop(),B.pop())}}line(y,T){let A,B;let{closeStroke:F,points:U}=y,X=U.length;if(X<=2)return;let{verts:Y,joints:q}=T,Q=y.jointType(),J=y.capType(),Z=0;F?(A=U[X-2],B=U[X-1],q.push(K.NONE)):(A=U[2],B=U[3],J===K.CAP_ROUND?(Y.push(U[0],U[1]),q.push(K.NONE),q.push(K.CAP_ROUND),Z=0):(Z=J,q.push(K.NONE))),Y.push(A,B);for(let y=0;y<X;y+=2){let T=U[y],ei=U[y+1],es=Q;y+2>=X?F||(es=K.NONE):y+4>=X&&!F&&(J===K.CAP_ROUND&&(es=K.JOINT_CAP_ROUND),J===K.CAP_BUTT&&(es=K.JOINT_CAP_BUTT),J===K.CAP_SQUARE&&(es=K.JOINT_CAP_SQUARE)),es+=Z,Z=0,Y.push(T,ei),q.push(es),A=T,B=ei}F?(Y.push(U[0],U[1]),q.push(K.NONE),Y.push(U[2],U[3])):Y.push(U[X-4],U[X-3]),q.push(K.NONE)}fill(y,T){let A=y.points,B=y.holes,F=T.closePointEps,{verts:X,joints:Y}=T;if(A.length<6)return;let q=[],Q=A.length;fixOrientation(A,!1);for(let y=0;y<B.length;y++){let T=B[y];fixOrientation(T.points,!0),q.push(A.length/2),A=A.concat(T.points)}J.length<A.length&&(J.length=A.length);let Z=0;for(let y=0;y<=q.length;y++){let T=Q/2;y>0&&(T=y<q.length?q[y]:A.length>>1),J[2*Z]=T-1,J[(T-1)*2+1]=Z;for(let y=Z;y+1<T;y++)J[2*y+1]=y+1,J[2*y+2]=y;Z=T}if(y.triangles=U.P6.earcut(A,q,2),!y.triangles)return;if(!y.fillAA){for(let y=0;y<A.length;y+=2)X.push(A[y],A[y+1]),Y.push(K.FILL);return}let{triangles:ei}=y;Q=A.length;for(let y=0;y<ei.length;y+=3){let T=0;for(let A=0;A<3;A++){let B=ei[y+A],F=ei[y+(A+1)%3];(J[2*B]===F||J[2*B+1]===F)&&(T|=1<<A)}Y.push(K.FILL_EXPAND+T),Y.push(K.NONE),Y.push(K.NONE),Y.push(K.NONE),Y.push(K.NONE),Y.push(K.NONE)}for(let y=0;y<Q/2;y++){let T=J[2*y],B=J[2*y+1],U=A[2*B+1]-A[2*y+1],X=-(A[2*B]-A[2*y]),Y=A[2*y+1]-A[2*T+1],K=-(A[2*y]-A[2*T]),q=Math.sqrt(U*U+X*X);U/=q,X/=q;let Q=Math.sqrt(Y*Y+K*K),Z=U+(Y/=Q),ei=X+(K/=Q),es=Z*U+ei*X;Math.abs(es)<F?(Z=U,ei=X):(Z/=es,ei/=es),J[2*y]=Z,J[2*y+1]=ei}for(let y=0;y<ei.length;y+=3){let T=ei[y],B=ei[y+1],F=ei[y+2],U=A[2*F+1]-A[2*B+1],Y=-(A[2*F]-A[2*B]),K=A[2*B+1]-A[2*T+1],q=-(A[2*B]-A[2*T]),Q=1;U*q-K*Y>0&&(Q=2);for(let T=0;T<3;T++){let B=ei[y+T*Q%3];X.push(A[2*B],A[2*B+1])}for(let T=0;T<3;T++){let A=ei[y+T*Q%3];X.push(J[2*A],J[2*A+1])}}}};let Z={[U.HS.POLY]:new PolyBuilder,[U.HS.CIRC]:new CircleBuilder,[U.HS.ELIP]:new CircleBuilder,[U.HS.RECT]:new class{constructor(){this._polyBuilder=new PolyBuilder}path(y,T){let A=y.shape,B=A.x,F=A.y,U=A.width,X=A.height,Y=y.points;Y.length=0,Y.push(B,F,B+U,F,B+U,F+X,B,F+X)}line(y,T){let{verts:A,joints:B}=T,{points:F}=y,U=y.goodJointType(),X=F.length;A.push(F[X-2],F[X-1]),B.push(K.NONE);for(let y=0;y<X;y+=2)A.push(F[y],F[y+1]),B.push(U);A.push(F[0],F[1]),B.push(K.NONE),A.push(F[2],F[3]),B.push(K.NONE)}fill(y,T){let{verts:A,joints:B}=T,{points:F,triangles:U}=y;if(U.length=0,!y.fillAA){A.push(F[0],F[1],F[2],F[3],F[4],F[5],F[6],F[7]),B.push(K.FILL,K.FILL,K.FILL,K.FILL),U.push(0,1,2,0,2,3);return}this._polyBuilder.fill(y,T)}},[U.HS.RREC]:new class{constructor(){this._circleBuilder=new CircleBuilder}path(y,T){this._circleBuilder.path(y,T)}line(y,T){this._circleBuilder.line(y,T)}fill(y,T){this._circleBuilder.fill(y,T)}}};var ei=A(68276);let BuildData=class BuildData{constructor(){this.verts=[],this.joints=[],this.vertexSize=0,this.indexSize=0,this.closePointEps=1e-4}clear(){this.verts.length=0,this.joints.length=0,this.vertexSize=0,this.indexSize=0}destroy(){this.verts.length=0,this.joints.length=0}};let BatchPart=class BatchPart{constructor(){this.reset()}begin(y,T,A){this.reset(),this.style=y,this.start=T,this.attribStart=A,this.jointEnd=0}end(y,T){this.attribSize=T-this.attribStart,this.size=y-this.start}reset(){this.style=null,this.size=0,this.start=0,this.attribStart=0,this.attribSize=0,this.styleId=-1,this.rgba=0,this.jointEnd=0}};let es=[],eh=[],eu=new U.E9,ed=new ei.YZ;let SmoothGraphicsGeometry=class SmoothGraphicsGeometry extends U.wG{constructor(){super(),this.indicesUint16=null,this.initAttributes(!1),this.buildData=new BuildData,this.graphicsData=[],this.dirty=0,this.batchDirty=-1,this.cacheDirty=-1,this.clearDirty=0,this.drawCalls=[],this.batches=[],this.shapeBuildIndex=0,this.shapeBatchIndex=0,this._bounds=new ei.YZ,this.boundsDirty=-1,this.boundsPadding=0,this.batchable=!1,this.indicesUint16=null,this.packer=null,this.packSize=0,this.pack32index=null}get points(){return this.buildData.verts}get closePointEps(){return this.buildData.closePointEps}initAttributes(y){this._buffer=new U.lW(null,y,!1),this._bufferFloats=new Float32Array,this._bufferUint=new Uint32Array,this._indexBuffer=new U.lW(null,y,!0),this.addAttribute("aPrev",this._buffer,2,!1,U.vK.FLOAT).addAttribute("aPoint1",this._buffer,2,!1,U.vK.FLOAT).addAttribute("aPoint2",this._buffer,2,!1,U.vK.FLOAT).addAttribute("aNext",this._buffer,2,!1,U.vK.FLOAT).addAttribute("aTravel",this._buffer,1,!1,U.vK.FLOAT).addAttribute("aVertexJoint",this._buffer,1,!1,U.vK.FLOAT).addAttribute("aStyleId",this._buffer,1,!1,U.vK.FLOAT).addAttribute("aColor",this._buffer,4,!0,U.vK.UNSIGNED_BYTE).addIndex(this._indexBuffer),this.strideFloats=12}checkInstancing(y,T){this.packer||(this.packer=new q,this.pack32index=T)}get bounds(){return this.boundsDirty!==this.dirty&&(this.boundsDirty=this.dirty,this.calculateBounds()),this._bounds}invalidate(){this.boundsDirty=-1,this.dirty++,this.batchDirty++,this.shapeBuildIndex=0,this.shapeBatchIndex=0,this.packSize=0,this.buildData.clear();for(let y=0;y<this.drawCalls.length;y++)this.drawCalls[y].clear(),eh.push(this.drawCalls[y]);this.drawCalls.length=0;for(let y=0;y<this.batches.length;y++){let T=this.batches[y];T.reset(),es.push(T)}this.batches.length=0}clear(){return this.graphicsData.length>0&&(this.invalidate(),this.clearDirty++,this.graphicsData.length=0),this}drawShape(y,T=null,A=null,B=null){let F=new SmoothGraphicsData(y,T,A,B);return this.graphicsData.push(F),this.dirty++,this}drawHole(y,T=null){if(!this.graphicsData.length)return null;let A=new SmoothGraphicsData(y,null,null,T),B=this.graphicsData[this.graphicsData.length-1];return A.lineStyle=B.lineStyle,B.holes.push(A),this.dirty++,this}destroy(){super.destroy();for(let y=0;y<this.graphicsData.length;++y)this.graphicsData[y].destroy();this.buildData.destroy(),this.buildData=null,this.indexBuffer.destroy(),this.indexBuffer=null,this.graphicsData.length=0,this.graphicsData=null,this.drawCalls.length=0,this.drawCalls=null,this.batches.length=0,this.batches=null,this._bounds=null}containsPoint(y){let T=this.graphicsData;for(let A=0;A<T.length;++A){let B=T[A];if(B.fillStyle.visible&&B.shape&&(B.matrix?B.matrix.applyInverse(y,eu):eu.copyFrom(y),B.shape.contains(eu.x,eu.y))){let y=!1;if(B.holes)for(let T=0;T<B.holes.length;T++){let A=B.holes[T];if(A.shape.contains(eu.x,eu.y)){y=!0;break}}if(!y)return!0}}return!1}updatePoints(){}updateBufferSize(){this._buffer.update(new Float32Array)}updateBuild(){let{graphicsData:y,buildData:T}=this,A=y.length;for(let B=this.shapeBuildIndex;B<A;B++){let A=y[B];A.strokeStart=0,A.strokeLen=0,A.fillStart=0,A.fillLen=0;let{fillStyle:F,lineStyle:X,holes:Y}=A;if(!F.visible&&!X.visible)continue;let K=Z[A.type];if(A.clearPath(),K.path(A,T),A.matrix&&this.transformPoints(A.points,A.matrix),A.clearBuild(),!(A.points.length<=2)&&((F.visible||X.visible)&&this.processHoles(Y),F.visible&&(A.fillAA=A.fillStyle.smooth&&A.fillStyle.texture===U.xE.WHITE&&0===Y.length&&!(A.closeStroke&&A.lineStyle.visible&&!A.lineStyle.shader&&A.lineStyle.alpha>=.99&&A.lineStyle.width*Math.min(A.lineStyle.alignment,1-A.lineStyle.alignment)>=.495),A.fillStart=T.joints.length,Y.length?Z[U.HS.POLY].fill(A,T):K.fill(A,T),A.fillLen=T.joints.length-A.fillStart),X.visible)){A.strokeStart=T.joints.length,K.line(A,T);for(let y=0;y<Y.length;y++){let A=Y[y];Z[A.type].line(A,T)}A.strokeLen=T.joints.length-A.strokeStart}}this.shapeBuildIndex=A}updateBatches(y){if(!this.graphicsData.length){this.batchable=!0;return}if(this.updateBuild(),!this.validateBatching())return;let{buildData:T,graphicsData:A}=this,B=A.length;this.cacheDirty=this.dirty;let F=null,X=null;this.batches.length>0&&(X=(F=this.batches[this.batches.length-1]).style);for(let y=this.shapeBatchIndex;y<B;y++){let B=A[y],Y=B.fillStyle,K=B.lineStyle;if(B.matrix&&this.transformPoints(B.points,B.matrix),Y.visible||K.visible)for(let y=0;y<2;y++){let A=0===y?Y:K;if(!A.visible)continue;let q=A.texture.baseTexture,Q=T.vertexSize,J=T.indexSize;q.wrapMode=U.Nt.REPEAT,0===y?this.packer.updateBufferSize(B.fillStart,B.fillLen,B.triangles.length,T):this.packer.updateBufferSize(B.strokeStart,B.strokeLen,B.triangles.length,T);let Z=T.vertexSize;Z!==Q&&(F&&!this._compareStyles(X,A)&&(F.end(J,Q),F=null),F||((F=es.pop()||new BatchPart).begin(A,J,Q),this.batches.push(F),X=A),0===y?F.jointEnd=B.fillStart+B.fillLen:F.jointEnd=B.strokeStart+B.strokeLen)}}if(this.shapeBatchIndex=B,F&&F.end(T.indexSize,T.vertexSize),0===this.batches.length){this.batchable=!0;return}this.batchable=this.isBatchable(),this.batchable?this.packBatches():(this.buildDrawCalls(y),this.updatePack())}updatePack(){let{vertexSize:y,indexSize:T}=this.buildData;if(this.packSize===y)return;let{strideFloats:A,packer:B,buildData:F,batches:U}=this,X=this._buffer,Y=this._indexBuffer,K=y*A;if(X.data.length!==K){let y=new ArrayBuffer(4*K);this._bufferFloats=new Float32Array(y),this._bufferUint=new Uint32Array(y),X.data=this._bufferFloats}Y.data.length!==T&&(y>65535&&this.pack32index?Y.data=new Uint32Array(T):Y.data=new Uint16Array(T)),B.beginPack(F,this._bufferFloats,this._bufferUint,Y.data);let q=0;for(let y=0;y<this.graphicsData.length;y++){let T=this.graphicsData[y];if(T.fillLen){for(;U[q].jointEnd<=T.fillStart;)q++;B.packInterleavedGeometry(T.fillStart,T.fillLen,T.triangles,U[q].styleId,U[q].rgba)}if(T.strokeLen){for(;U[q].jointEnd<=T.strokeStart;)q++;B.packInterleavedGeometry(T.strokeStart,T.strokeLen,T.triangles,U[q].styleId,U[q].rgba)}}X.update(),Y.update(),this.packSize=y}_compareStyles(y,T){if(!y||!T||y.texture.baseTexture!==T.texture.baseTexture||y.color+y.alpha!==T.color+T.alpha||y.shader!==T.shader||y.width!==T.width||y.scaleMode!==T.scaleMode||y.alignment!==T.alignment)return!1;let A=y.matrix||U.y3.IDENTITY,B=T.matrix||U.y3.IDENTITY;return matrixEquals(A,B)}validateBatching(){if(this.dirty===this.cacheDirty||!this.graphicsData.length)return!1;for(let y=0,T=this.graphicsData.length;y<T;y++){let T=this.graphicsData[y],A=T.fillStyle,B=T.lineStyle;if(A&&!A.texture.baseTexture.valid||B&&!B.texture.baseTexture.valid)return!1}return!0}packBatches(){this.batchDirty++;let y=this.batches;for(let T=0,A=y.length;T<A;T++){let A=y[T];for(let y=0;y<A.size;y++){let T=A.start+y;this.indicesUint16[T]=this.indicesUint16[T]-A.attribStart}}}isBatchable(){return!1}buildDrawCalls(y){for(let y=0;y<this.drawCalls.length;y++)this.drawCalls[y].clear(),eh.push(this.drawCalls[y]);this.drawCalls.length=0;let T=eh.pop()||new BatchDrawCall;T.begin(y,null);let A=0;this.drawCalls.push(T);for(let B=0;B<this.batches.length;B++){let F=this.batches[B],X=F.style;if(0===F.attribSize)continue;let Y=-1,K=X.getTextureMatrix();T.check(X.shader)&&(Y=T.add(X.texture,K,X.width,X.alignment||0,X.packLineScale())),Y<0&&(T=eh.pop()||new BatchDrawCall,this.drawCalls.push(T),T.begin(y,X.shader),T.start=A,Y=T.add(X.texture,K,X.width,X.alignment||0,X.packLineScale())),T.size+=F.size,A+=F.size;let{color:q,alpha:Q}=X,J=U.Il.shared.setValue(q).toLittleEndianNumber();F.rgba=U.Il.shared.setValue(J).toPremultiplied(Q),F.styleId=Y}}processHoles(y){for(let T=0;T<y.length;T++){let A=y[T],B=Z[A.type];A.clearPath(),B.path(A,this.buildData),A.matrix&&this.transformPoints(A.points,A.matrix)}}calculateBounds(){let y=this._bounds,T=U.y3.IDENTITY;this._bounds.clear(),ed.clear();for(let A=0;A<this.graphicsData.length;A++){let B=this.graphicsData[A],F=B.shape,X=B.type,Y=B.lineStyle,K=B.matrix||U.y3.IDENTITY,q=0;Y&&Y.visible&&(q=Y.width,X!==U.HS.POLY||B.fillStyle.visible?q*=Math.max(0,Y.alignment):q*=Math.max(Y.alignment,1-Y.alignment)),T!==K&&(ed.isEmpty()||(y.addBoundsMatrix(ed,T),ed.clear()),T=K),X===U.HS.RECT||X===U.HS.RREC?ed.addFramePad(F.x,F.y,F.x+F.width,F.y+F.height,q,q):X===U.HS.CIRC?ed.addFramePad(F.x,F.y,F.x,F.y,F.radius+q,F.radius+q):X===U.HS.ELIP?ed.addFramePad(F.x,F.y,F.x,F.y,F.width+q,F.height+q):y.addVerticesMatrix(T,F.points,0,F.points.length,q,q)}ed.isEmpty()||y.addBoundsMatrix(ed,T),y.pad(this.boundsPadding,this.boundsPadding)}transformPoints(y,T){for(let A=0;A<y.length/2;A++){let B=y[2*A],F=y[2*A+1];y[2*A]=T.a*B+T.c*F+T.tx,y[2*A+1]=T.b*B+T.d*F+T.ty}}};SmoothGraphicsGeometry.BATCHABLE_SIZE=100;let ec=`#version 100
precision highp float;
const float FILL = 1.0;
const float BEVEL = 4.0;
const float MITER = 8.0;
const float ROUND = 12.0;
const float JOINT_CAP_BUTT = 16.0;
const float JOINT_CAP_SQUARE = 18.0;
const float JOINT_CAP_ROUND = 20.0;

const float FILL_EXPAND = 24.0;

const float CAP_BUTT = 1.0;
const float CAP_SQUARE = 2.0;
const float CAP_ROUND = 3.0;
const float CAP_BUTT2 = 4.0;

const float MITER_LIMIT = 10.0;

// === geom ===
attribute vec2 aPrev;
attribute vec2 aPoint1;
attribute vec2 aPoint2;
attribute vec2 aNext;
attribute float aVertexJoint;
attribute float aTravel;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform vec4 tint;

varying vec4 vLine1;
varying vec4 vLine2;
varying vec4 vArc;
varying float vType;

uniform float resolution;
uniform float expand;

// === style ===
attribute float aStyleId;
attribute vec4 aColor;

varying float vTextureId;
varying vec4 vColor;
varying vec2 vTextureCoord;
varying vec2 vTravel;

uniform vec2 styleLine[%MAX_STYLES%];
uniform vec3 styleMatrix[2 * %MAX_STYLES%];
uniform float styleTextureId[%MAX_STYLES%];
uniform vec2 samplerSize[%MAX_TEXTURES%];

vec2 doBisect(vec2 norm, float len, vec2 norm2, float len2,
    float dy, float inner) {
    vec2 bisect = (norm + norm2) / 2.0;
    bisect /= dot(norm, bisect);
    vec2 shift = dy * bisect;
    if (inner > 0.5) {
        if (len < len2) {
            if (abs(dy * (bisect.x * norm.y - bisect.y * norm.x)) > len) {
                return dy * norm;
            }
        } else {
            if (abs(dy * (bisect.x * norm2.y - bisect.y * norm2.x)) > len2) {
                return dy * norm;
            }
        }
    }
    return dy * bisect;
}

void main(void){
    vec2 pointA = (translationMatrix * vec3(aPoint1, 1.0)).xy;
    vec2 pointB = (translationMatrix * vec3(aPoint2, 1.0)).xy;

    vec2 xBasis = pointB - pointA;
    float len = length(xBasis);
    vec2 forward = xBasis / len;
    vec2 norm = vec2(forward.y, -forward.x);

    float type = floor(aVertexJoint / 16.0);
    float vertexNum = aVertexJoint - type * 16.0;
    float dx = 0.0, dy = 1.0;

    float capType = floor(type / 32.0);
    type -= capType * 32.0;

    int styleId = int(aStyleId + 0.5);
    float lineWidth = styleLine[styleId].x;
    vTextureId = floor(styleTextureId[styleId] / 4.0);
    float scaleMode = styleTextureId[styleId] - vTextureId * 4.0;
    float avgScale = 1.0;
    if (scaleMode > 2.5) {
        avgScale = length(translationMatrix * vec3(1.0, 0.0, 0.0));
    } else if (scaleMode > 1.5) {
        avgScale = length(translationMatrix * vec3(0.0, 1.0, 0.0));
    } else if (scaleMode > 0.5) {
        vec2 avgDiag = (translationMatrix * vec3(1.0, 1.0, 0.0)).xy;
        avgScale = sqrt(dot(avgDiag, avgDiag) * 0.5);
    }
    lineWidth *= 0.5 * avgScale;
    float lineAlignment = 2.0 * styleLine[styleId].y - 1.0;
    vTextureCoord = vec2(0.0);

    vec2 pos;

    if (capType == CAP_ROUND) {
        vertexNum += 4.0;
        type = JOINT_CAP_ROUND;
        capType = 0.0;
        lineAlignment = -lineAlignment;
    }

    vLine1 = vec4(0.0, 10.0, 1.0, 0.0);
    vLine2 = vec4(0.0, 10.0, 1.0, 0.0);
    vArc = vec4(0.0);
    if (type == FILL) {
        pos = pointA;
        vType = 0.0;
        vLine2 = vec4(-2.0, -2.0, -2.0, 0.0);
        vec2 vTexturePixel;
        vTexturePixel.x = dot(vec3(aPoint1, 1.0), styleMatrix[styleId * 2]);
        vTexturePixel.y = dot(vec3(aPoint1, 1.0), styleMatrix[styleId * 2 + 1]);
        vTextureCoord = vTexturePixel / samplerSize[int(vTextureId)];
    } else if (type >= FILL_EXPAND && type < FILL_EXPAND + 7.5) {
        // expand vertices
        float flags = type - FILL_EXPAND;
        float flag3 = floor(flags / 4.0);
        float flag2 = floor((flags - flag3 * 4.0) / 2.0);
        float flag1 = flags - flag3 * 4.0 - flag2 * 2.0;

        vec2 prev = (translationMatrix * vec3(aPrev, 1.0)).xy;

        if (vertexNum < 0.5) {
            pos = prev;
        } else if (vertexNum < 1.5) {
            pos = pointA;
        } else {
            pos = pointB;
        }
        float len2 = length(aNext);
        vec2 bisect = (translationMatrix * vec3(aNext, 0.0)).xy;
        if (len2 > 0.01) {
            bisect = normalize(bisect) * len2;
        }

        vec2 n1 = normalize(vec2(pointA.y - prev.y, -(pointA.x - prev.x)));
        vec2 n2 = normalize(vec2(pointB.y - pointA.y, -(pointB.x - pointA.x)));
        vec2 n3 = normalize(vec2(prev.y - pointB.y, -(prev.x - pointB.x)));

        if (n1.x * n2.y - n1.y * n2.x < 0.0) {
            n1 = -n1;
            n2 = -n2;
            n3 = -n3;
        }
        pos += bisect * expand;

        vLine1 = vec4(16.0, 16.0, 16.0, -1.0);
        if (flag1 > 0.5) {
            vLine1.x = -dot(pos - prev, n1);
        }
        if (flag2 > 0.5) {
            vLine1.y = -dot(pos - pointA, n2);
        }
        if (flag3 > 0.5) {
            vLine1.z = -dot(pos - pointB, n3);
        }
        vLine1.xyz *= resolution;
        vType = 2.0;
    } else if (type >= BEVEL) {
        float dy = lineWidth + expand;
        float shift = lineWidth * lineAlignment;
        float inner = 0.0;
        if (vertexNum >= 1.5) {
            dy = -dy;
            inner = 1.0;
        }

        vec2 base, next, xBasis2, bisect;
        float flag = 0.0;
        float side2 = 1.0;
        if (vertexNum < 0.5 || vertexNum > 2.5 && vertexNum < 3.5) {
            next = (translationMatrix * vec3(aPrev, 1.0)).xy;
            base = pointA;
            flag = type - floor(type / 2.0) * 2.0;
            side2 = -1.0;
        } else {
            next = (translationMatrix * vec3(aNext, 1.0)).xy;
            base = pointB;
            if (type >= MITER && type < MITER + 3.5) {
                flag = step(MITER + 1.5, type);
                // check miter limit here?
            }
        }
        xBasis2 = next - base;
        float len2 = length(xBasis2);
        vec2 norm2 = vec2(xBasis2.y, -xBasis2.x) / len2;
        float D = norm.x * norm2.y - norm.y * norm2.x;
        if (D < 0.0) {
            inner = 1.0 - inner;
        }

        norm2 *= side2;

        float collinear = step(0.0, dot(norm, norm2));

        vType = 0.0;
        float dy2 = -1000.0;

        if (abs(D) < 0.01 && collinear < 0.5) {
            if (type >= ROUND && type < ROUND + 1.5) {
                type = JOINT_CAP_ROUND;
            }
            //TODO: BUTT here too
        }

        vLine1 = vec4(0.0, lineWidth, max(abs(norm.x), abs(norm.y)), min(abs(norm.x), abs(norm.y)));
        vLine2 = vec4(0.0, lineWidth, max(abs(norm2.x), abs(norm2.y)), min(abs(norm2.x), abs(norm2.y)));

        if (vertexNum < 3.5) {
            if (abs(D) < 0.01 && collinear < 0.5) {
                pos = (shift + dy) * norm;
            } else {
                if (flag < 0.5 && inner < 0.5) {
                    pos = (shift + dy) * norm;
                } else {
                    pos = doBisect(norm, len, norm2, len2, shift + dy, inner);
                }
            }
            vLine2.y = -1000.0;
            if (capType >= CAP_BUTT && capType < CAP_ROUND) {
                float extra = step(CAP_SQUARE, capType) * lineWidth;
                vec2 back = -forward;
                if (vertexNum < 0.5 || vertexNum > 2.5) {
                    pos += back * (expand + extra);
                    dy2 = expand;
                } else {
                    dy2 = dot(pos + base - pointA, back) - extra;
                }
            }
            if (type >= JOINT_CAP_BUTT && type < JOINT_CAP_SQUARE + 0.5) {
                float extra = step(JOINT_CAP_SQUARE, type) * lineWidth;
                if (vertexNum < 0.5 || vertexNum > 2.5) {
                    vLine2.y = dot(pos + base - pointB, forward) - extra;
                } else {
                    pos += forward * (expand + extra);
                    vLine2.y = expand;
                    if (capType >= CAP_BUTT) {
                        dy2 -= expand + extra;
                    }
                }
            }
        } else if (type >= JOINT_CAP_ROUND && type < JOINT_CAP_ROUND + 1.5) {
            base += shift * norm;
            if (inner > 0.5) {
                dy = -dy;
                inner = 0.0;
            }
            vec2 d2 = abs(dy) * forward;
            if (vertexNum < 4.5) {
                dy = -dy;
                pos = dy * norm;
            } else if (vertexNum < 5.5) {
                pos = dy * norm;
            } else if (vertexNum < 6.5) {
                pos = dy * norm + d2;
                vArc.x = abs(dy);
            } else {
                dy = -dy;
                pos = dy * norm + d2;
                vArc.x = abs(dy);
            }
            vLine2 = vec4(0.0, lineWidth * 2.0 + 10.0, 1.0  , 0.0); // forget about line2 with type=3
            vArc.y = dy;
            vArc.z = 0.0;
            vArc.w = lineWidth;
            vType = 3.0;
        } else if (abs(D) < 0.01 && collinear < 0.5) {
            pos = dy * norm;
        } else {
            if (inner > 0.5) {
                dy = -dy;
                inner = 0.0;
            }
            float side = sign(dy);
            vec2 norm3 = normalize(norm + norm2);

            if (type >= MITER && type < MITER + 3.5) {
                vec2 farVertex = doBisect(norm, len, norm2, len2, shift + dy, 0.0);
                if (length(farVertex) > abs(shift + dy) * MITER_LIMIT) {
                    type = BEVEL;
                }
            }

            if (vertexNum < 4.5) {
                pos = doBisect(norm, len, norm2, len2, shift - dy, 1.0);
            } else if (vertexNum < 5.5) {
                pos = (shift + dy) * norm;
            } else if (vertexNum > 7.5) {
                pos = (shift + dy) * norm2;
            } else {
                if (type >= ROUND && type < ROUND + 1.5) {
                    pos = doBisect(norm, len, norm2, len2, shift + dy, 0.0);
                    float d2 = abs(shift + dy);
                    if (length(pos) > abs(shift + dy) * 1.5) {
                        if (vertexNum < 6.5) {
                            pos.x = (shift + dy) * norm.x - d2 * norm.y;
                            pos.y = (shift + dy) * norm.y + d2 * norm.x;
                        } else {
                            pos.x = (shift + dy) * norm2.x + d2 * norm2.y;
                            pos.y = (shift + dy) * norm2.y - d2 * norm2.x;
                        }
                    }
                } else if (type >= MITER && type < MITER + 3.5) {
                    pos = doBisect(norm, len, norm2, len2, shift + dy, 0.0); //farVertex
                } else if (type >= BEVEL && type < BEVEL + 1.5) {
                    float d2 = side / resolution;
                    if (vertexNum < 6.5) {
                        pos = (shift + dy) * norm + d2 * norm3;
                    } else {
                        pos = (shift + dy) * norm2 + d2 * norm3;
                    }
                }
            }

            if (type >= ROUND && type < ROUND + 1.5) {
                vArc.x = side * dot(pos, norm3);
                vArc.y = pos.x * norm3.y - pos.y * norm3.x;
                vArc.z = dot(norm, norm3) * (lineWidth + side * shift);
                vArc.w = lineWidth + side * shift;
                vType = 3.0;
            } else if (type >= MITER && type < MITER + 3.5) {
                vType = 1.0;
            } else if (type >= BEVEL && type < BEVEL + 1.5) {
                vType = 4.0;
                vArc.z = dot(norm, norm3) * (lineWidth + side * shift) - side * dot(pos, norm3);
            }

            dy = side * (dot(pos, norm) - shift);
            dy2 = side * (dot(pos, norm2) - shift);
        }

        pos += base;
        vLine1.xy = vec2(dy, vLine1.y) * resolution;
        vLine2.xy = vec2(dy2, vLine2.y) * resolution;
        vArc = vArc * resolution;
        vTravel = vec2(aTravel * avgScale + dot(pos - pointA, vec2(-norm.y, norm.x)), avgScale);
    }

    gl_Position = vec4((projectionMatrix * vec3(pos, 1.0)).xy, 0.0, 1.0);

    vColor = aColor * tint;
}`,ef=`#version 100
#ifdef GL_FRAGMENT_PRECISION_HIGH
  precision highp float;
#else
  precision mediump float;
#endif
`,ep=`%PRECISION%
varying vec4 vColor;
varying vec4 vLine1;
varying vec4 vLine2;
varying vec4 vArc;
varying float vType;
varying float vTextureId;
varying vec2 vTextureCoord;
varying vec2 vTravel;
uniform sampler2D uSamplers[%MAX_TEXTURES%];

%PIXEL_LINE%

void main(void){
    %PIXEL_COVERAGE%

    vec4 texColor;
    float textureId = floor(vTextureId+0.5);
    %FOR_LOOP%

    gl_FragColor = vColor * texColor * alpha;
}
`,em=[`
float pixelLine(float x, float A, float B) {
    return clamp(x + 0.5, 0.0, 1.0);
}
`,`
float pixelLine(float x, float A, float B) {
    float y = abs(x), s = sign(x);
    if (y * 2.0 < A - B) {
        return 0.5 + s * y / A;
    }
    y -= (A - B) * 0.5;
    y = max(1.0 - y / B, 0.0);
    return (1.0 + s * (1.0 - y * y)) * 0.5;
    //return clamp(x + 0.5, 0.0, 1.0);
}
`],eg=`float alpha = 1.0;
if (vType < 0.5) {
    float left = pixelLine(-vLine1.y - vLine1.x, vLine1.z, vLine1.w);
    float right = pixelLine(vLine1.y - vLine1.x, vLine1.z, vLine1.w);
    float near = vLine2.x - 0.5;
    float far = min(vLine2.x + 0.5, 0.0);
    float top = vLine2.y - 0.5;
    float bottom = min(vLine2.y + 0.5, 0.0);
    alpha = (right - left) * max(bottom - top, 0.0) * max(far - near, 0.0);
} else if (vType < 1.5) {
    float a1 = pixelLine(- vLine1.y - vLine1.x, vLine1.z, vLine1.w);
    float a2 = pixelLine(vLine1.y - vLine1.x, vLine1.z, vLine1.w);
    float b1 = pixelLine(- vLine2.y - vLine2.x, vLine2.z, vLine2.w);
    float b2 = pixelLine(vLine2.y - vLine2.x, vLine2.z, vLine2.w);
    alpha = a2 * b2 - a1 * b1;
} else if (vType < 2.5) {
    alpha *= max(min(vLine1.x + 0.5, 1.0), 0.0);
    alpha *= max(min(vLine1.y + 0.5, 1.0), 0.0);
    alpha *= max(min(vLine1.z + 0.5, 1.0), 0.0);
} else if (vType < 3.5) {
    float a1 = pixelLine(- vLine1.y - vLine1.x, vLine1.z, vLine1.w);
    float a2 = pixelLine(vLine1.y - vLine1.x, vLine1.z, vLine1.w);
    float b1 = pixelLine(- vLine2.y - vLine2.x, vLine2.z, vLine2.w);
    float b2 = pixelLine(vLine2.y - vLine2.x, vLine2.z, vLine2.w);
    float alpha_miter = a2 * b2 - a1 * b1;
    float alpha_plane = clamp(vArc.z - vArc.x + 0.5, 0.0, 1.0);
    float d = length(vArc.xy);
    float circle_hor = max(min(vArc.w, d + 0.5) - max(-vArc.w, d - 0.5), 0.0);
    float circle_vert = min(vArc.w * 2.0, 1.0);
    float alpha_circle = circle_hor * circle_vert;
    alpha = min(alpha_miter, max(alpha_circle, alpha_plane));
} else {
    float a1 = pixelLine(- vLine1.y - vLine1.x, vLine1.z, vLine1.w);
    float a2 = pixelLine(vLine1.y - vLine1.x, vLine1.z, vLine1.w);
    float b1 = pixelLine(- vLine2.y - vLine2.x, vLine2.z, vLine2.w);
    float b2 = pixelLine(vLine2.y - vLine2.x, vLine2.z, vLine2.w);
    alpha = a2 * b2 - a1 * b1;
    alpha *= clamp(vArc.z + 0.5, 0.0, 1.0);
}
`;let SmoothShader_SmoothGraphicsShader=class SmoothShader_SmoothGraphicsShader extends U.ex{constructor(y,T=ec,A=ep,B={}){T=SmoothShader_SmoothGraphicsShader.generateVertexSrc(y,T),A=SmoothShader_SmoothGraphicsShader.generateFragmentSrc(y,A);let{maxStyles:F,maxTextures:X}=y,Y=new Int32Array(X);for(let y=0;y<X;y++)Y[y]=y;super(U.$r.from(T,A),Object.assign(B,{styleMatrix:new Float32Array(6*F),styleTextureId:new Float32Array(F),styleLine:new Float32Array(2*F),samplerSize:new Float32Array(2*X),uSamplers:Y,tint:new Float32Array([1,1,1,1]),resolution:1,expand:1})),this.settings=y}static generateVertexSrc(y,T=ec){let{maxStyles:A,maxTextures:B}=y;return T=T.replace(/%MAX_TEXTURES%/gi,`${B}`).replace(/%MAX_STYLES%/gi,`${A}`)}static generateFragmentSrc(y,T=ep){let{maxTextures:A,pixelLine:B}=y;return T=T.replace(/%PRECISION%/gi,ef).replace(/%PIXEL_LINE%/gi,em[B]).replace(/%PIXEL_COVERAGE%/gi,eg).replace(/%MAX_TEXTURES%/gi,`${A}`).replace(/%FOR_LOOP%/gi,this.generateSampleSrc(A))}static generateSampleSrc(y){let T="";T+="\n\n";for(let A=0;A<y;A++)A>0&&(T+="\nelse "),A<y-1&&(T+=`if(textureId < ${A}.5)`),T+=`
{
	texColor = texture2D(uSamplers[${A}], vTextureCoord);
}`;return T+"\n\n"}};let e_={LINE_SCALE_MODE:Y.NORMAL,SHADER_MAX_STYLES:24,SHADER_MAX_TEXTURES:4,PIXEL_LINE:0},ev=X.TC,{BezierUtils:ey,QuadraticUtils:ex,ArcUtils:eb}=X.graphicsUtils,eT={},eE=class extends ei.W2{constructor(y=null){super(),this._geometry=y||new SmoothGraphicsGeometry,this._geometry.refCount++,this.shader=null,this.shaderSettings={maxStyles:e_.SHADER_MAX_STYLES,maxTextures:e_.SHADER_MAX_TEXTURES,pixelLine:e_.PIXEL_LINE},this.state=U.ZM.for2d(),this._fillStyle=new FillStyle,this._lineStyle=new LineStyle,this._matrix=null,this._holeMode=!1,this.currentPath=null,this.batches=[],this.batchTint=-1,this.batchDirty=-1,this.vertexData=null,this.pluginName="smooth",this._transformID=-1,this._tintColor=new U.Il(16777215),this.blendMode=U.T$.NORMAL}get geometry(){return this._geometry}clone(){return this.finishPoly(),new eE(this._geometry)}set blendMode(y){this.state.blendMode=y}get blendMode(){return this.state.blendMode}get tint(){return this._tintColor.value}set tint(y){this._tintColor.setValue(y)}get fill(){return this._fillStyle}get line(){return this._lineStyle}lineStyle(y=null,T=0,A=1,B=.5,F=e_.LINE_SCALE_MODE){if("number"==typeof y)"boolean"==typeof F&&(F=F?Y.NONE:Y.NORMAL),y={width:y,color:T,alpha:A,alignment:B,scaleMode:F};else{let T=y.native;void 0!==T&&(y.scaleMode=T?Y.NONE:Y.NORMAL)}return this.lineTextureStyle(y)}lineTextureStyle(y){y=Object.assign({width:0,texture:U.xE.WHITE,color:y&&y.texture?16777215:0,alpha:1,matrix:null,alignment:.5,native:!1,cap:X.$o.BUTT,join:X.S.MITER,miterLimit:10,shader:null,scaleMode:e_.LINE_SCALE_MODE},y),this.normalizeColor(y),this.currentPath&&this.startPoly();let T=y.width>0&&y.alpha>0;return T?(y.matrix&&(y.matrix=y.matrix.clone(),y.matrix.invert()),Object.assign(this._lineStyle,{visible:T},y)):this._lineStyle.reset(),this}startPoly(){if(this.currentPath){let y=this.currentPath.points,T=this.currentPath.points.length;T>2&&(this.drawShape(this.currentPath),this.currentPath=new U.mg,this.currentPath.closeStroke=!1,this.currentPath.points.push(y[T-2],y[T-1]))}else this.currentPath=new U.mg,this.currentPath.closeStroke=!1}finishPoly(){this.currentPath&&(this.currentPath.points.length>2?(this.drawShape(this.currentPath),this.currentPath=null):this.currentPath.points.length=0)}moveTo(y,T){return this.startPoly(),this.currentPath.points[0]=y,this.currentPath.points[1]=T,this}lineTo(y,T){this.currentPath||this.moveTo(0,0);let A=this.currentPath.points,B=A[A.length-2],F=A[A.length-1];return(B!==y||F!==T)&&A.push(y,T),this}_initCurve(y=0,T=0){this.currentPath?0===this.currentPath.points.length&&(this.currentPath.points=[y,T]):this.moveTo(y,T)}quadraticCurveTo(y,T,A,B){this._initCurve();let F=this.currentPath.points;return 0===F.length&&this.moveTo(0,0),ex.curveTo(y,T,A,B,F),this}bezierCurveTo(y,T,A,B,F,U){return this._initCurve(),ey.curveTo(y,T,A,B,F,U,this.currentPath.points),this}arcTo(y,T,A,B,F){this._initCurve(y,T);let U=this.currentPath.points,X=eb.curveTo(y,T,A,B,F,U);if(X){let{cx:y,cy:T,radius:A,startAngle:B,endAngle:F,anticlockwise:U}=X;this.arc(y,T,A,B,F,U)}return this}arc(y,T,A,B,F,X=!1){if(B===F)return this;!X&&F<=B?F+=U._b:X&&B<=F&&(B+=U._b);let Y=F-B;if(0===Y)return this;let K=y+Math.cos(B)*A,q=T+Math.sin(B)*A,Q=this._geometry.closePointEps,J=this.currentPath?this.currentPath.points:null;if(J){let y=Math.abs(J[J.length-2]-K),T=Math.abs(J[J.length-1]-q);y<Q&&T<Q||J.push(K,q)}else this.moveTo(K,q),J=this.currentPath.points;return eb.arc(K,q,y,T,A,B,F,X,J),this}beginFill(y=0,T=1,A=!1){return this.beginTextureFill({texture:U.xE.WHITE,color:y,alpha:T,smooth:A})}normalizeColor(y){let T=U.Il.shared.setValue(y.color??0);y.color=T.toNumber(),y.alpha??(y.alpha=T.alpha)}beginTextureFill(y){y=Object.assign({texture:U.xE.WHITE,color:16777215,alpha:1,matrix:null,smooth:!1},y),this.normalizeColor(y),this.currentPath&&this.startPoly();let T=y.alpha>0;return T?(y.matrix&&(y.matrix=y.matrix.clone(),y.matrix.invert()),Object.assign(this._fillStyle,{visible:T},y)):this._fillStyle.reset(),this}endFill(){return this.finishPoly(),this._fillStyle.reset(),this}drawRect(y,T,A,B){return this.drawShape(new U.Ae(y,T,A,B))}drawRoundedRect(y,T,A,B,F){return this.drawShape(new U.c9(y,T,A,B,F))}drawCircle(y,T,A){return this.drawShape(new U.Cd(y,T,A))}drawEllipse(y,T,A,B){return this.drawShape(new U.Pj(y,T,A,B))}drawPolygon(...y){let T;let A=!0,B=y[0];B.points?(A=B.closeStroke,T=B.points):T=Array.isArray(y[0])?y[0]:y;let F=new U.mg(T);return F.closeStroke=A,this.drawShape(F),this}drawShape(y){return this._holeMode?this._geometry.drawHole(y,this._matrix):this._geometry.drawShape(y,this._fillStyle.clone(),this._lineStyle.clone(),this._matrix),this}clear(){return this._geometry.clear(),this._lineStyle.reset(),this._fillStyle.reset(),this._boundsID++,this._matrix=null,this._holeMode=!1,this.currentPath=null,this}isFastRect(){let y=this._geometry.graphicsData;return 1===y.length&&y[0].shape.type===U.HS.RECT&&!y[0].matrix&&!y[0].holes.length&&!(y[0].lineStyle.visible&&y[0].lineStyle.width)}_renderCanvas(y){ev.prototype._renderCanvas.call(this,y)}_render(y){this.finishPoly();let T=this._geometry,A=y.context.supports.uint32Indices;T.checkInstancing(y.geometry.hasInstance,A),T.updateBatches(this.shaderSettings),T.batchable?(this.batchDirty!==T.batchDirty&&this._populateBatches(),this._renderBatched(y)):(y.batch.flush(),this._renderDirect(y))}_populateBatches(){let y=this._geometry,T=this.blendMode,A=y.batches.length;this.batchTint=-1,this._transformID=-1,this.batchDirty=y.batchDirty,this.batches.length=A,this.vertexData=new Float32Array(y.points);for(let B=0;B<A;B++){let A=y.batches[B],F=A.style.color,X=new Float32Array(this.vertexData.buffer,8*A.attribStart,2*A.attribSize),Y={vertexData:X,blendMode:T,_batchRGB:U.P6.hex2rgb(F),_tintRGB:F,_texture:A.style.texture,alpha:A.style.alpha,worldAlpha:1};this.batches[B]=Y}}_renderBatched(y){if(this.batches.length){y.batch.setObjectRenderer(y.plugins[this.pluginName]),this.calculateVertices(),this.calculateTints();for(let T=0,A=this.batches.length;T<A;T++){let A=this.batches[T];A.worldAlpha=this.worldAlpha*A.alpha,y.plugins[this.pluginName].render(A)}}}_renderDirect(y){let T=this._resolveDirectShader(y),A=T,B=this._geometry,F=this.worldAlpha,X=A.uniforms,Y=B.drawCalls;X.translationMatrix=this.transform.worldTransform,U.Il.shared.setValue(this._tintColor).premultiply(F).toArray(X.tint),X.resolution=y.renderTexture.current?y.renderTexture.current.resolution:y.resolution;let K=y.projection.transform;if(K){let y=Math.sqrt(K.a*K.a+K.b*K.b);X.resolution*=y}let q=y.renderTexture.current?y.renderTexture.current.multisample:y.multisample;X.expand=(q!==U.G5.NONE?2:1)/X.resolution,y.shader.bind(A),y.geometry.bind(B,A),y.state.set(this.state),A=null;for(let F=0,K=Y.length;F<K;F++){let Y=B.drawCalls[F],K=A!==Y.shader;K&&(A=Y.shader)&&(A.uniforms.translationMatrix=this.transform.worldTransform,A.uniforms.tint&&(A.uniforms.tint[0]=X.tint[0],A.uniforms.tint[1]=X.tint[1],A.uniforms.tint[2]=X.tint[2],A.uniforms.tint[3]=X.tint[3]));let{texArray:q,styleArray:Q,size:J,start:Z}=Y,ei=q.count,es=A||T,eh=es.uniforms.styleTextureId,eu=es.uniforms.styleMatrix,ed=es.uniforms.styleLine;for(let y=0;y<Q.count;y++){eh[y]=Q.textureIds[y],ed[2*y]=Q.lines[2*y],ed[2*y+1]=Q.lines[2*y+1];let T=Q.matrices[y];eu[6*y]=T.a,eu[6*y+1]=T.c,eu[6*y+2]=T.tx,eu[6*y+3]=T.b,eu[6*y+4]=T.d,eu[6*y+5]=T.ty}let ec=es.uniforms.samplerSize;for(let y=0;y<ei;y++)ec[2*y]=q.elements[y].width,ec[2*y+1]=q.elements[y].height;y.shader.bind(es),K&&y.geometry.bind(B);for(let T=0;T<ei;T++)y.texture.bind(q.elements[T],T);y.geometry.draw(U.lg.TRIANGLES,J,Z)}}_resolveDirectShader(y){let T=this.shader,A=this.pluginName;return T||(eT[A]||(eT[A]=new SmoothShader_SmoothGraphicsShader(this.shaderSettings)),T=eT[A]),T}_calculateBounds(){this.finishPoly();let y=this._geometry;if(!y.graphicsData.length)return;let{minX:T,minY:A,maxX:B,maxY:F}=y.bounds;this._bounds.addFrame(this.transform,T,A,B,F)}containsPoint(y){return this.worldTransform.applyInverse(y,eE._TEMP_POINT),this._geometry.containsPoint(eE._TEMP_POINT)}calculateTints(){if(this.batchTint!==this.tint){this.batchTint=this._tintColor.toNumber();for(let y=0;y<this.batches.length;y++){let T=this.batches[y];T._tintRGB=U.Il.shared.setValue(this._tintColor).multiply(T._batchRGB).toLittleEndianNumber()}}}calculateVertices(){let y=this.transform._worldID;if(this._transformID===y)return;this._transformID=y;let T=this.transform.worldTransform,A=T.a,B=T.b,F=T.c,U=T.d,X=T.tx,Y=T.ty,K=this._geometry.points,q=this.vertexData,Q=0;for(let y=0;y<K.length;y+=2){let T=K[y],J=K[y+1];q[Q++]=A*T+F*J+X,q[Q++]=U*J+B*T+Y}}closePath(){let y=this.currentPath;return y&&(y.closeStroke=!0),this}setMatrix(y){return this._matrix=y,this}beginHole(){return this.finishPoly(),this._holeMode=!0,this}endHole(){return this.finishPoly(),this._holeMode=!1,this}destroy(y){this._geometry.refCount--,0===this._geometry.refCount&&this._geometry.dispose(),this._matrix=null,this.currentPath=null,this._lineStyle.destroy(),this._lineStyle=null,this._fillStyle.destroy(),this._fillStyle=null,this._geometry=null,this.shader=null,this.vertexData=null,this.batches.length=0,this.batches=null,super.destroy(y)}},eS=eE;eS.curves=X.yw,eS._TEMP_POINT=new U.E9},19743:function(y,T,A){"use strict";A.d(T,{TC:function(){return em},$o:function(){return J},S:function(){return Q},yw:function(){return Z},graphicsUtils:function(){return eg}});var B,F,U=A(1396);let X={build(y){let T,A,B,F,X,Y;let K=y.points;if(y.type===U.HS.CIRC){let U=y.shape;T=U.x,A=U.y,X=Y=U.radius,B=F=0}else if(y.type===U.HS.ELIP){let U=y.shape;T=U.x,A=U.y,X=U.width,Y=U.height,B=F=0}else{let U=y.shape,K=U.width/2,q=U.height/2;T=U.x+K,A=U.y+q,X=Y=Math.max(0,Math.min(U.radius,Math.min(K,q))),B=K-X,F=q-Y}if(!(X>=0&&Y>=0&&B>=0&&F>=0)){K.length=0;return}let q=Math.ceil(2.3*Math.sqrt(X+Y)),Q=8*q+(B?4:0)+(F?4:0);if(K.length=Q,0===Q)return;if(0===q){K.length=8,K[0]=K[6]=T+B,K[1]=K[3]=A+F,K[2]=K[4]=T-B,K[5]=K[7]=A-F;return}let J=0,Z=4*q+(B?2:0)+2,ei=Z,es=Q;{let y=B+X,U=F,Y=T+y,q=T-y,Q=A+U;if(K[J++]=Y,K[J++]=Q,K[--Z]=Q,K[--Z]=q,F){let y=A-U;K[ei++]=q,K[ei++]=y,K[--es]=y,K[--es]=Y}}for(let y=1;y<q;y++){let U=Math.PI/2*(y/q),Q=B+Math.cos(U)*X,eh=F+Math.sin(U)*Y,eu=T+Q,ed=T-Q,ec=A+eh,ef=A-eh;K[J++]=eu,K[J++]=ec,K[--Z]=ec,K[--Z]=ed,K[ei++]=ed,K[ei++]=ef,K[--es]=ef,K[--es]=eu}{let y=B,U=F+Y,X=T+y,q=T-y,Q=A+U,Z=A-U;K[J++]=X,K[J++]=Q,K[--es]=Z,K[--es]=X,B&&(K[J++]=q,K[J++]=Q,K[--es]=Z,K[--es]=q)}},triangulate(y,T){let A,B;let F=y.points,X=T.points,Y=T.indices;if(0===F.length)return;let K=X.length/2,q=K;if(y.type!==U.HS.RREC){let T=y.shape;A=T.x,B=T.y}else{let T=y.shape;A=T.x+T.width/2,B=T.y+T.height/2}let Q=y.matrix;X.push(y.matrix?Q.a*A+Q.c*B+Q.tx:A,y.matrix?Q.b*A+Q.d*B+Q.ty:B),K++,X.push(F[0],F[1]);for(let y=2;y<F.length;y+=2)X.push(F[y],F[y+1]),Y.push(K++,q,K);Y.push(q+1,q,K)}};function fixOrientation(y,T=!1){let A=y.length;if(A<6)return;let B=0;for(let T=0,F=y[A-2],U=y[A-1];T<A;T+=2){let A=y[T],X=y[T+1];B+=(A-F)*(X+U),F=A,U=X}if(!T&&B>0||T&&B<=0){let T=A/2;for(let B=T+T%2;B<A;B+=2){let T=A-B-2,F=A-B-1,U=B,X=B+1;[y[T],y[U]]=[y[U],y[T]],[y[F],y[X]]=[y[X],y[F]]}}}let Y={build(y){y.points=y.shape.points.slice()},triangulate(y,T){let A=y.points,B=y.holes,F=T.points,X=T.indices;if(A.length>=6){fixOrientation(A,!1);let y=[];for(let T=0;T<B.length;T++){let F=B[T];fixOrientation(F.points,!0),y.push(A.length/2),A=A.concat(F.points)}let T=U.P6.earcut(A,y,2);if(!T)return;let Y=F.length/2;for(let y=0;y<T.length;y+=3)X.push(T[y]+Y),X.push(T[y+1]+Y),X.push(T[y+2]+Y);for(let y=0;y<A.length;y++)F.push(A[y])}}},K={build(y){let T=y.shape,A=T.x,B=T.y,F=T.width,U=T.height,X=y.points;X.length=0,F>=0&&U>=0&&X.push(A,B,A+F,B,A+F,B+U,A,B+U)},triangulate(y,T){let A=y.points,B=T.points;if(0===A.length)return;let F=B.length/2;B.push(A[0],A[1],A[2],A[3],A[6],A[7],A[4],A[5]),T.indices.push(F,F+1,F+2,F+1,F+2,F+3)}},q={build(y){X.build(y)},triangulate(y,T){X.triangulate(y,T)}};var Q=((B=Q||{}).MITER="miter",B.BEVEL="bevel",B.ROUND="round",B),J=((F=J||{}).BUTT="butt",F.ROUND="round",F.SQUARE="square",F);let Z={adaptive:!0,maxLength:10,minSegments:8,maxSegments:2048,epsilon:1e-4,_segmentsCount(y,T=20){if(!this.adaptive||!y||isNaN(y))return T;let A=Math.ceil(y/this.maxLength);return A<this.minSegments?A=this.minSegments:A>this.maxSegments&&(A=this.maxSegments),A}};let ArcUtils=class ArcUtils{static curveTo(y,T,A,B,F,U){let X=U[U.length-2],Y=U[U.length-1],K=Y-T,q=X-y,Q=B-T,J=A-y,Z=Math.abs(K*J-q*Q);if(Z<1e-8||0===F)return(U[U.length-2]!==y||U[U.length-1]!==T)&&U.push(y,T),null;let ei=K*K+q*q,es=Q*Q+J*J,eh=K*Q+q*J,eu=F*Math.sqrt(ei)/Z,ed=F*Math.sqrt(es)/Z,ec=eu*eh/ei,ef=ed*eh/es,ep=eu*J+ed*q,em=eu*Q+ed*K;return{cx:ep+y,cy:em+T,radius:F,startAngle:Math.atan2(K*(ed+ec)-em,q*(ed+ec)-ep),endAngle:Math.atan2(Q*(eu+ef)-em,J*(eu+ef)-ep),anticlockwise:q*Q>J*K}}static arc(y,T,A,B,F,X,Y,K,q){let Q=Y-X,J=Z._segmentsCount(Math.abs(Q)*F,40*Math.ceil(Math.abs(Q)/U._b)),ei=Q/(2*J),es=2*ei,eh=Math.cos(ei),eu=Math.sin(ei),ed=J-1,ec=ed%1/ed;for(let y=0;y<=ed;++y){let T=y+ec*y,U=ei+X+es*T,Y=Math.cos(U),K=-Math.sin(U);q.push((eh*Y+eu*K)*F+A,(-(eh*K)+eu*Y)*F+B)}}};let BezierUtils=class BezierUtils{static curveLength(y,T,A,B,F,U,X,Y){let K=0,q=0,Q=0,J=0,Z=0,ei=0,es=0,eh=0,eu=0,ed=0,ec=0,ef=y,ep=T;for(let em=1;em<=10;++em)J=(Q=(q=em/10)*q)*q,eh=(es=(ei=(Z=1-q)*Z)*Z)*y+3*ei*q*A+3*Z*Q*F+J*X,eu=es*T+3*ei*q*B+3*Z*Q*U+J*Y,ed=ef-eh,ec=ep-eu,ef=eh,ep=eu,K+=Math.sqrt(ed*ed+ec*ec);return K}static curveTo(y,T,A,B,F,U,X){let Y=X[X.length-2],K=X[X.length-1];X.length-=2;let q=Z._segmentsCount(BezierUtils.curveLength(Y,K,y,T,A,B,F,U)),Q=0,J=0,ei=0,es=0,eh=0;X.push(Y,K);for(let Z=1,eu=0;Z<=q;++Z)ei=(J=(Q=1-(eu=Z/q))*Q)*Q,eh=(es=eu*eu)*eu,X.push(ei*Y+3*J*eu*y+3*Q*es*A+eh*F,ei*K+3*J*eu*T+3*Q*es*B+eh*U)}};function square(y,T,A,B,F,U,X,Y){let K,q;X?(K=B,q=-A):(K=-B,q=A);let Q=y-A*F+K,J=T-B*F+q,Z=y+A*U+K,ei=T+B*U+q;return Y.push(Q,J,Z,ei),2}function round(y,T,A,B,F,U,X,Y){let K=A-y,q=B-T,Q=Math.atan2(K,q),J=Math.atan2(F-y,U-T);Y&&Q<J?Q+=2*Math.PI:!Y&&Q>J&&(J+=2*Math.PI);let Z=Q,ei=J-Q,es=Math.sqrt(K*K+q*q),eh=(15*Math.abs(ei)*Math.sqrt(es)/Math.PI>>0)+1,eu=ei/eh;if(Z+=eu,Y){X.push(y,T,A,B);for(let A=1,B=Z;A<eh;A++,B+=eu)X.push(y,T,y+Math.sin(B)*es,T+Math.cos(B)*es);X.push(y,T,F,U)}else{X.push(A,B,y,T);for(let A=1,B=Z;A<eh;A++,B+=eu)X.push(y+Math.sin(B)*es,T+Math.cos(B)*es,y,T);X.push(F,U,y,T)}return 2*eh}function buildLine(y,T){y.lineStyle.native?function(y,T){let A=0,B=y.shape,F=y.points||B.points,X=B.type!==U.HS.POLY||B.closeStroke;if(0===F.length)return;let Y=T.points,K=T.indices,q=F.length/2,Q=Y.length/2,J=Q;for(Y.push(F[0],F[1]),A=1;A<q;A++)Y.push(F[2*A],F[2*A+1]),K.push(J,J+1),J++;X&&K.push(J,Q)}(y,T):function(y,T){let A=y.shape,B=y.points||A.points.slice(),F=T.closePointEps;if(0===B.length)return;let X=y.lineStyle,Y=new U.E9(B[0],B[1]),K=new U.E9(B[B.length-2],B[B.length-1]),q=A.type!==U.HS.POLY||A.closeStroke,ei=Math.abs(Y.x-K.x)<F&&Math.abs(Y.y-K.y)<F;if(q){B=B.slice(),ei&&(B.pop(),B.pop(),K.set(B[B.length-2],B[B.length-1]));let y=(Y.x+K.x)*.5,T=(K.y+Y.y)*.5;B.unshift(y,T),B.push(y,T)}let es=T.points,eh=B.length/2,eu=B.length,ed=es.length/2,ec=X.width/2,ef=ec*ec,ep=X.miterLimit*X.miterLimit,em=B[0],eg=B[1],e_=B[2],ev=B[3],ey=0,ex=0,eb=-(eg-ev),eT=em-e_,eE=0,eS=0,eA=Math.sqrt(eb*eb+eT*eT);eb/=eA,eT/=eA,eb*=ec,eT*=ec;let eR=X.alignment,ew=(1-eR)*2,eI=2*eR;q||(X.cap===J.ROUND?eu+=round(em-eb*(ew-eI)*.5,eg-eT*(ew-eI)*.5,em-eb*ew,eg-eT*ew,em+eb*eI,eg+eT*eI,es,!0)+2:X.cap===J.SQUARE&&(eu+=square(em,eg,eb,eT,ew,eI,!0,es))),es.push(em-eb*ew,eg-eT*ew,em+eb*eI,eg+eT*eI);for(let y=1;y<eh-1;++y){em=B[(y-1)*2],eg=B[(y-1)*2+1],e_=B[2*y],ev=B[2*y+1],ey=B[(y+1)*2],ex=B[(y+1)*2+1],eA=Math.sqrt((eb=-(eg-ev))*eb+(eT=em-e_)*eT),eb/=eA,eT/=eA,eb*=ec,eT*=ec,eA=Math.sqrt((eE=-(ev-ex))*eE+(eS=e_-ey)*eS),eE/=eA,eS/=eA,eE*=ec,eS*=ec;let T=e_-em,A=eg-ev,F=e_-ey,U=ex-ev,Y=T*F+A*U,K=A*F-U*T,q=K<0;if(Math.abs(K)<.001*Math.abs(Y)){es.push(e_-eb*ew,ev-eT*ew,e_+eb*eI,ev+eT*eI),Y>=0&&(X.join===Q.ROUND?eu+=round(e_,ev,e_-eb*ew,ev-eT*ew,e_-eE*ew,ev-eS*ew,es,!1)+4:eu+=2,es.push(e_-eE*eI,ev-eS*eI,e_+eE*ew,ev+eS*ew));continue}let J=(-eb+em)*(-eT+ev)-(-eb+e_)*(-eT+eg),Z=(-eE+ey)*(-eS+ev)-(-eE+e_)*(-eS+ex),ei=(T*Z-F*J)/K,eh=(U*J-A*Z)/K,ed=(ei-e_)*(ei-e_)+(eh-ev)*(eh-ev),eR=e_+(ei-e_)*ew,eP=ev+(eh-ev)*ew,eM=e_-(ei-e_)*eI,eC=ev-(eh-ev)*eI,eD=Math.min(T*T+A*A,F*F+U*U),eO=q?ew:eI,eN=eD+eO*eO*ef,eB=ed<=eN,eF=X.join;if(eF===Q.MITER&&ed/ef>ep&&(eF=Q.BEVEL),eB)switch(eF){case Q.MITER:es.push(eR,eP,eM,eC);break;case Q.BEVEL:q?es.push(eR,eP,e_+eb*eI,ev+eT*eI,eR,eP,e_+eE*eI,ev+eS*eI):es.push(e_-eb*ew,ev-eT*ew,eM,eC,e_-eE*ew,ev-eS*ew,eM,eC),eu+=2;break;case Q.ROUND:q?(es.push(eR,eP,e_+eb*eI,ev+eT*eI),eu+=round(e_,ev,e_+eb*eI,ev+eT*eI,e_+eE*eI,ev+eS*eI,es,!0)+4,es.push(eR,eP,e_+eE*eI,ev+eS*eI)):(es.push(e_-eb*ew,ev-eT*ew,eM,eC),eu+=round(e_,ev,e_-eb*ew,ev-eT*ew,e_-eE*ew,ev-eS*ew,es,!1)+4,es.push(e_-eE*ew,ev-eS*ew,eM,eC))}else{switch(es.push(e_-eb*ew,ev-eT*ew,e_+eb*eI,ev+eT*eI),eF){case Q.MITER:q?es.push(eM,eC,eM,eC):es.push(eR,eP,eR,eP),eu+=2;break;case Q.ROUND:q?eu+=round(e_,ev,e_+eb*eI,ev+eT*eI,e_+eE*eI,ev+eS*eI,es,!0)+2:eu+=round(e_,ev,e_-eb*ew,ev-eT*ew,e_-eE*ew,ev-eS*ew,es,!1)+2}es.push(e_-eE*ew,ev-eS*ew,e_+eE*eI,ev+eS*eI),eu+=2}}em=B[(eh-2)*2],eg=B[(eh-2)*2+1],e_=B[(eh-1)*2],eA=Math.sqrt((eb=-(eg-(ev=B[(eh-1)*2+1])))*eb+(eT=em-e_)*eT),eb/=eA,eT/=eA,eb*=ec,eT*=ec,es.push(e_-eb*ew,ev-eT*ew,e_+eb*eI,ev+eT*eI),q||(X.cap===J.ROUND?eu+=round(e_-eb*(ew-eI)*.5,ev-eT*(ew-eI)*.5,e_-eb*ew,ev-eT*ew,e_+eb*eI,ev+eT*eI,es,!1)+2:X.cap===J.SQUARE&&(eu+=square(e_,ev,eb,eT,ew,eI,!1,es)));let eP=T.indices,eM=Z.epsilon*Z.epsilon;for(let y=ed;y<eu+ed-2;++y)em=es[2*y],eg=es[2*y+1],e_=es[(y+1)*2],ev=es[(y+1)*2+1],ey=es[(y+2)*2],Math.abs(em*(ev-(ex=es[(y+2)*2+1]))+e_*(ex-eg)+ey*(eg-ev))<eM||eP.push(y,y+1,y+2)}(y,T)}let QuadraticUtils=class QuadraticUtils{static curveLength(y,T,A,B,F,U){let X=y-2*A+F,Y=T-2*B+U,K=2*A-2*y,q=2*B-2*T,Q=4*(X*X+Y*Y),J=4*(X*K+Y*q),Z=K*K+q*q,ei=2*Math.sqrt(Q+J+Z),es=Math.sqrt(Q),eh=2*Q*es,eu=2*Math.sqrt(Z),ed=J/es;return(eh*ei+es*J*(ei-eu)+(4*Z*Q-J*J)*Math.log((2*es+ed+ei)/(ed+eu)))/(4*eh)}static curveTo(y,T,A,B,F){let U=F[F.length-2],X=F[F.length-1],Y=Z._segmentsCount(QuadraticUtils.curveLength(U,X,y,T,A,B)),K=0,q=0;for(let Q=1;Q<=Y;++Q){let J=Q/Y;K=U+(y-U)*J,q=X+(T-X)*J,F.push(K+(y+(A-y)*J-K)*J,q+(T+(B-T)*J-q)*J)}}};let ei={[U.HS.POLY]:Y,[U.HS.CIRC]:X,[U.HS.ELIP]:X,[U.HS.RECT]:K,[U.HS.RREC]:q},es=[],eh=[];var eu=A(68276);let GraphicsData=class GraphicsData{constructor(y,T=null,A=null,B=null){this.points=[],this.holes=[],this.shape=y,this.lineStyle=A,this.fillStyle=T,this.matrix=B,this.type=y.type}clone(){return new GraphicsData(this.shape,this.fillStyle,this.lineStyle,this.matrix)}destroy(){this.shape=null,this.holes.length=0,this.holes=null,this.points.length=0,this.points=null,this.lineStyle=null,this.fillStyle=null}};let BatchPart=class BatchPart{constructor(){this.reset()}begin(y,T,A){this.reset(),this.style=y,this.start=T,this.attribStart=A}end(y,T){this.attribSize=T-this.attribStart,this.size=y-this.start}reset(){this.style=null,this.size=0,this.start=0,this.attribStart=0,this.attribSize=0}};let ed=new U.E9,ec=class extends U.JZ{constructor(){super(),this.closePointEps=1e-4,this.boundsPadding=0,this.uvsFloat32=null,this.indicesUint16=null,this.batchable=!1,this.points=[],this.colors=[],this.uvs=[],this.indices=[],this.textureIds=[],this.graphicsData=[],this.drawCalls=[],this.batchDirty=-1,this.batches=[],this.dirty=0,this.cacheDirty=-1,this.clearDirty=0,this.shapeIndex=0,this._bounds=new eu.YZ,this.boundsDirty=-1}get bounds(){return this.updateBatches(),this.boundsDirty!==this.dirty&&(this.boundsDirty=this.dirty,this.calculateBounds()),this._bounds}invalidate(){this.boundsDirty=-1,this.dirty++,this.batchDirty++,this.shapeIndex=0,this.points.length=0,this.colors.length=0,this.uvs.length=0,this.indices.length=0,this.textureIds.length=0;for(let y=0;y<this.drawCalls.length;y++)this.drawCalls[y].texArray.clear(),eh.push(this.drawCalls[y]);this.drawCalls.length=0;for(let y=0;y<this.batches.length;y++){let T=this.batches[y];T.reset(),es.push(T)}this.batches.length=0}clear(){return this.graphicsData.length>0&&(this.invalidate(),this.clearDirty++,this.graphicsData.length=0),this}drawShape(y,T=null,A=null,B=null){let F=new GraphicsData(y,T,A,B);return this.graphicsData.push(F),this.dirty++,this}drawHole(y,T=null){if(!this.graphicsData.length)return null;let A=new GraphicsData(y,null,null,T),B=this.graphicsData[this.graphicsData.length-1];return A.lineStyle=B.lineStyle,B.holes.push(A),this.dirty++,this}destroy(){super.destroy();for(let y=0;y<this.graphicsData.length;++y)this.graphicsData[y].destroy();this.points.length=0,this.points=null,this.colors.length=0,this.colors=null,this.uvs.length=0,this.uvs=null,this.indices.length=0,this.indices=null,this.indexBuffer.destroy(),this.indexBuffer=null,this.graphicsData.length=0,this.graphicsData=null,this.drawCalls.length=0,this.drawCalls=null,this.batches.length=0,this.batches=null,this._bounds=null}containsPoint(y){let T=this.graphicsData;for(let A=0;A<T.length;++A){let B=T[A];if(B.fillStyle.visible&&B.shape&&(B.matrix?B.matrix.applyInverse(y,ed):ed.copyFrom(y),B.shape.contains(ed.x,ed.y))){let y=!1;if(B.holes)for(let T=0;T<B.holes.length;T++){let A=B.holes[T];if(A.shape.contains(ed.x,ed.y)){y=!0;break}}if(!y)return!0}}return!1}updateBatches(){if(!this.graphicsData.length){this.batchable=!0;return}if(!this.validateBatching())return;this.cacheDirty=this.dirty;let y=this.uvs,T=this.graphicsData,A=null,B=null;this.batches.length>0&&(B=(A=this.batches[this.batches.length-1]).style);for(let F=this.shapeIndex;F<T.length;F++){this.shapeIndex++;let X=T[F],Y=X.fillStyle,K=X.lineStyle,q=ei[X.type];q.build(X),X.matrix&&this.transformPoints(X.points,X.matrix),(Y.visible||K.visible)&&this.processHoles(X.holes);for(let T=0;T<2;T++){let F=0===T?Y:K;if(!F.visible)continue;let q=F.texture.baseTexture,Q=this.indices.length,J=this.points.length/2;q.wrapMode=U.Nt.REPEAT,0===T?this.processFill(X):this.processLine(X);let Z=this.points.length/2-J;0!==Z&&(A&&!this._compareStyles(B,F)&&(A.end(Q,J),A=null),A||((A=es.pop()||new BatchPart).begin(F,Q,J),this.batches.push(A),B=F),this.addUvs(this.points,y,F.texture,J,Z,F.matrix))}}let F=this.indices.length,X=this.points.length/2;if(A&&A.end(F,X),0===this.batches.length){this.batchable=!0;return}let Y=X>65535;this.indicesUint16&&this.indices.length===this.indicesUint16.length&&Y===this.indicesUint16.BYTES_PER_ELEMENT>2?this.indicesUint16.set(this.indices):this.indicesUint16=Y?new Uint32Array(this.indices):new Uint16Array(this.indices),this.batchable=this.isBatchable(),this.batchable?this.packBatches():this.buildDrawCalls()}_compareStyles(y,T){return!!y&&!!T&&y.texture.baseTexture===T.texture.baseTexture&&y.color+y.alpha===T.color+T.alpha&&!!y.native==!!T.native}validateBatching(){if(this.dirty===this.cacheDirty||!this.graphicsData.length)return!1;for(let y=0,T=this.graphicsData.length;y<T;y++){let T=this.graphicsData[y],A=T.fillStyle,B=T.lineStyle;if(A&&!A.texture.baseTexture.valid||B&&!B.texture.baseTexture.valid)return!1}return!0}packBatches(){this.batchDirty++,this.uvsFloat32=new Float32Array(this.uvs);let y=this.batches;for(let T=0,A=y.length;T<A;T++){let A=y[T];for(let y=0;y<A.size;y++){let T=A.start+y;this.indicesUint16[T]=this.indicesUint16[T]-A.attribStart}}}isBatchable(){if(this.points.length>131070)return!1;let y=this.batches;for(let T=0;T<y.length;T++)if(y[T].style.native)return!1;return this.points.length<2*ec.BATCHABLE_SIZE}buildDrawCalls(){let y=++U.VL._globalBatch;for(let y=0;y<this.drawCalls.length;y++)this.drawCalls[y].texArray.clear(),eh.push(this.drawCalls[y]);this.drawCalls.length=0;let T=this.colors,A=this.textureIds,B=eh.pop();B||((B=new U.a$).texArray=new U.Ie),B.texArray.count=0,B.start=0,B.size=0,B.type=U.lg.TRIANGLES;let F=0,X=null,Y=0,K=!1,q=U.lg.TRIANGLES,Q=0;this.drawCalls.push(B);for(let J=0;J<this.batches.length;J++){let Z=this.batches[J],ei=Z.style,es=ei.texture.baseTexture;!!ei.native!==K&&(q=(K=!!ei.native)?U.lg.LINES:U.lg.TRIANGLES,X=null,F=8,y++),X!==es&&(X=es,es._batchEnabled!==y&&(8===F&&(y++,F=0,B.size>0&&((B=eh.pop())||((B=new U.a$).texArray=new U.Ie),this.drawCalls.push(B)),B.start=Q,B.size=0,B.texArray.count=0,B.type=q),es.touched=1,es._batchEnabled=y,es._batchLocation=F,es.wrapMode=U.Nt.REPEAT,B.texArray.elements[B.texArray.count++]=es,F++)),B.size+=Z.size,Q+=Z.size,Y=es._batchLocation,this.addColors(T,ei.color,ei.alpha,Z.attribSize,Z.attribStart),this.addTextureIds(A,Y,Z.attribSize,Z.attribStart)}U.VL._globalBatch=y,this.packAttributes()}packAttributes(){let y=this.points,T=this.uvs,A=this.colors,B=this.textureIds,F=new ArrayBuffer(12*y.length),U=new Float32Array(F),X=new Uint32Array(F),Y=0;for(let F=0;F<y.length/2;F++)U[Y++]=y[2*F],U[Y++]=y[2*F+1],U[Y++]=T[2*F],U[Y++]=T[2*F+1],X[Y++]=A[F],U[Y++]=B[F];this._buffer.update(F),this._indexBuffer.update(this.indicesUint16)}processFill(y){if(y.holes.length)Y.triangulate(y,this);else{let T=ei[y.type];T.triangulate(y,this)}}processLine(y){buildLine(y,this);for(let T=0;T<y.holes.length;T++)buildLine(y.holes[T],this)}processHoles(y){for(let T=0;T<y.length;T++){let A=y[T],B=ei[A.type];B.build(A),A.matrix&&this.transformPoints(A.points,A.matrix)}}calculateBounds(){let y=this._bounds;y.clear(),y.addVertexData(this.points,0,this.points.length),y.pad(this.boundsPadding,this.boundsPadding)}transformPoints(y,T){for(let A=0;A<y.length/2;A++){let B=y[2*A],F=y[2*A+1];y[2*A]=T.a*B+T.c*F+T.tx,y[2*A+1]=T.b*B+T.d*F+T.ty}}addColors(y,T,A,B,F=0){let X=U.Il.shared.setValue(T).toLittleEndianNumber(),Y=U.Il.shared.setValue(X).toPremultiplied(A);y.length=Math.max(y.length,F+B);for(let T=0;T<B;T++)y[F+T]=Y}addTextureIds(y,T,A,B=0){y.length=Math.max(y.length,B+A);for(let F=0;F<A;F++)y[B+F]=T}addUvs(y,T,A,B,F,U=null){let X=0,Y=T.length,K=A.frame;for(;X<F;){let A=y[(B+X)*2],F=y[(B+X)*2+1];if(U){let y=U.a*A+U.c*F+U.tx;F=U.b*A+U.d*F+U.ty,A=y}X++,T.push(A/K.width,F/K.height)}let q=A.baseTexture;(K.width<q.width||K.height<q.height)&&this.adjustUvs(T,A,Y,F)}adjustUvs(y,T,A,B){let F=T.baseTexture,U=A+2*B,X=T.frame,Y=X.width/F.width,K=X.height/F.height,q=X.x/X.width,Q=X.y/X.height,J=Math.floor(y[A]+1e-6),Z=Math.floor(y[A+1]+1e-6);for(let T=A+2;T<U;T+=2)J=Math.min(J,Math.floor(y[T]+1e-6)),Z=Math.min(Z,Math.floor(y[T+1]+1e-6));q-=J,Q-=Z;for(let T=A;T<U;T+=2)y[T]=(y[T]+q)*Y,y[T+1]=(y[T+1]+Q)*K}};ec.BATCHABLE_SIZE=100;let FillStyle=class FillStyle{constructor(){this.color=16777215,this.alpha=1,this.texture=U.xE.WHITE,this.matrix=null,this.visible=!1,this.reset()}clone(){let y=new FillStyle;return y.color=this.color,y.alpha=this.alpha,y.texture=this.texture,y.matrix=this.matrix,y.visible=this.visible,y}reset(){this.color=16777215,this.alpha=1,this.texture=U.xE.WHITE,this.matrix=null,this.visible=!1}destroy(){this.texture=null,this.matrix=null}};let LineStyle=class LineStyle extends FillStyle{constructor(){super(...arguments),this.width=0,this.alignment=.5,this.native=!1,this.cap=J.BUTT,this.join=Q.MITER,this.miterLimit=10}clone(){let y=new LineStyle;return y.color=this.color,y.alpha=this.alpha,y.texture=this.texture,y.matrix=this.matrix,y.visible=this.visible,y.width=this.width,y.alignment=this.alignment,y.native=this.native,y.cap=this.cap,y.join=this.join,y.miterLimit=this.miterLimit,y}reset(){super.reset(),this.color=0,this.alignment=.5,this.width=0,this.native=!1}};let ef={},ep=class extends eu.W2{constructor(y=null){super(),this.shader=null,this.pluginName="batch",this.currentPath=null,this.batches=[],this.batchTint=-1,this.batchDirty=-1,this.vertexData=null,this._fillStyle=new FillStyle,this._lineStyle=new LineStyle,this._matrix=null,this._holeMode=!1,this.state=U.ZM.for2d(),this._geometry=y||new ec,this._geometry.refCount++,this._transformID=-1,this._tintColor=new U.Il(16777215),this.blendMode=U.T$.NORMAL}get geometry(){return this._geometry}clone(){return this.finishPoly(),new ep(this._geometry)}set blendMode(y){this.state.blendMode=y}get blendMode(){return this.state.blendMode}get tint(){return this._tintColor.value}set tint(y){this._tintColor.setValue(y)}get fill(){return this._fillStyle}get line(){return this._lineStyle}lineStyle(y=null,T=0,A,B=.5,F=!1){return"number"==typeof y&&(y={width:y,color:T,alpha:A,alignment:B,native:F}),this.lineTextureStyle(y)}lineTextureStyle(y){let T={width:0,texture:U.xE.WHITE,color:y?.texture?16777215:0,matrix:null,alignment:.5,native:!1,cap:J.BUTT,join:Q.MITER,miterLimit:10};y=Object.assign(T,y),this.normalizeColor(y),this.currentPath&&this.startPoly();let A=y.width>0&&y.alpha>0;return A?(y.matrix&&(y.matrix=y.matrix.clone(),y.matrix.invert()),Object.assign(this._lineStyle,{visible:A},y)):this._lineStyle.reset(),this}startPoly(){if(this.currentPath){let y=this.currentPath.points,T=this.currentPath.points.length;T>2&&(this.drawShape(this.currentPath),this.currentPath=new U.mg,this.currentPath.closeStroke=!1,this.currentPath.points.push(y[T-2],y[T-1]))}else this.currentPath=new U.mg,this.currentPath.closeStroke=!1}finishPoly(){this.currentPath&&(this.currentPath.points.length>2?(this.drawShape(this.currentPath),this.currentPath=null):this.currentPath.points.length=0)}moveTo(y,T){return this.startPoly(),this.currentPath.points[0]=y,this.currentPath.points[1]=T,this}lineTo(y,T){this.currentPath||this.moveTo(0,0);let A=this.currentPath.points,B=A[A.length-2],F=A[A.length-1];return(B!==y||F!==T)&&A.push(y,T),this}_initCurve(y=0,T=0){this.currentPath?0===this.currentPath.points.length&&(this.currentPath.points=[y,T]):this.moveTo(y,T)}quadraticCurveTo(y,T,A,B){this._initCurve();let F=this.currentPath.points;return 0===F.length&&this.moveTo(0,0),QuadraticUtils.curveTo(y,T,A,B,F),this}bezierCurveTo(y,T,A,B,F,U){return this._initCurve(),BezierUtils.curveTo(y,T,A,B,F,U,this.currentPath.points),this}arcTo(y,T,A,B,F){this._initCurve(y,T);let U=this.currentPath.points,X=ArcUtils.curveTo(y,T,A,B,F,U);if(X){let{cx:y,cy:T,radius:A,startAngle:B,endAngle:F,anticlockwise:U}=X;this.arc(y,T,A,B,F,U)}return this}arc(y,T,A,B,F,X=!1){if(B===F)return this;!X&&F<=B?F+=U._b:X&&B<=F&&(B+=U._b);let Y=F-B;if(0===Y)return this;let K=y+Math.cos(B)*A,q=T+Math.sin(B)*A,Q=this._geometry.closePointEps,J=this.currentPath?this.currentPath.points:null;if(J){let y=Math.abs(J[J.length-2]-K),T=Math.abs(J[J.length-1]-q);y<Q&&T<Q||J.push(K,q)}else this.moveTo(K,q),J=this.currentPath.points;return ArcUtils.arc(K,q,y,T,A,B,F,X,J),this}beginFill(y=0,T){return this.beginTextureFill({texture:U.xE.WHITE,color:y,alpha:T})}normalizeColor(y){let T=U.Il.shared.setValue(y.color??0);y.color=T.toNumber(),y.alpha??(y.alpha=T.alpha)}beginTextureFill(y){let T={texture:U.xE.WHITE,color:16777215,matrix:null};y=Object.assign(T,y),this.normalizeColor(y),this.currentPath&&this.startPoly();let A=y.alpha>0;return A?(y.matrix&&(y.matrix=y.matrix.clone(),y.matrix.invert()),Object.assign(this._fillStyle,{visible:A},y)):this._fillStyle.reset(),this}endFill(){return this.finishPoly(),this._fillStyle.reset(),this}drawRect(y,T,A,B){return this.drawShape(new U.Ae(y,T,A,B))}drawRoundedRect(y,T,A,B,F){return this.drawShape(new U.c9(y,T,A,B,F))}drawCircle(y,T,A){return this.drawShape(new U.Cd(y,T,A))}drawEllipse(y,T,A,B){return this.drawShape(new U.Pj(y,T,A,B))}drawPolygon(...y){let T;let A=!0,B=y[0];B.points?(A=B.closeStroke,T=B.points):T=Array.isArray(y[0])?y[0]:y;let F=new U.mg(T);return F.closeStroke=A,this.drawShape(F),this}drawShape(y){return this._holeMode?this._geometry.drawHole(y,this._matrix):this._geometry.drawShape(y,this._fillStyle.clone(),this._lineStyle.clone(),this._matrix),this}clear(){return this._geometry.clear(),this._lineStyle.reset(),this._fillStyle.reset(),this._boundsID++,this._matrix=null,this._holeMode=!1,this.currentPath=null,this}isFastRect(){let y=this._geometry.graphicsData;return 1===y.length&&y[0].shape.type===U.HS.RECT&&!y[0].matrix&&!y[0].holes.length&&!(y[0].lineStyle.visible&&y[0].lineStyle.width)}_render(y){this.finishPoly();let T=this._geometry;T.updateBatches(),T.batchable?(this.batchDirty!==T.batchDirty&&this._populateBatches(),this._renderBatched(y)):(y.batch.flush(),this._renderDirect(y))}_populateBatches(){let y=this._geometry,T=this.blendMode,A=y.batches.length;this.batchTint=-1,this._transformID=-1,this.batchDirty=y.batchDirty,this.batches.length=A,this.vertexData=new Float32Array(y.points);for(let B=0;B<A;B++){let A=y.batches[B],F=A.style.color,X=new Float32Array(this.vertexData.buffer,8*A.attribStart,2*A.attribSize),Y=new Float32Array(y.uvsFloat32.buffer,8*A.attribStart,2*A.attribSize),K=new Uint16Array(y.indicesUint16.buffer,2*A.start,A.size),q={vertexData:X,blendMode:T,indices:K,uvs:Y,_batchRGB:U.Il.shared.setValue(F).toRgbArray(),_tintRGB:F,_texture:A.style.texture,alpha:A.style.alpha,worldAlpha:1};this.batches[B]=q}}_renderBatched(y){if(this.batches.length){y.batch.setObjectRenderer(y.plugins[this.pluginName]),this.calculateVertices(),this.calculateTints();for(let T=0,A=this.batches.length;T<A;T++){let A=this.batches[T];A.worldAlpha=this.worldAlpha*A.alpha,y.plugins[this.pluginName].render(A)}}}_renderDirect(y){let T=this._resolveDirectShader(y),A=this._geometry,B=this.worldAlpha,F=T.uniforms,X=A.drawCalls;F.translationMatrix=this.transform.worldTransform,U.Il.shared.setValue(this._tintColor).premultiply(B).toArray(F.tint),y.shader.bind(T),y.geometry.bind(A,T),y.state.set(this.state);for(let T=0,B=X.length;T<B;T++)this._renderDrawCallDirect(y,A.drawCalls[T])}_renderDrawCallDirect(y,T){let{texArray:A,type:B,size:F,start:U}=T,X=A.count;for(let T=0;T<X;T++)y.texture.bind(A.elements[T],T);y.geometry.draw(B,F,U)}_resolveDirectShader(y){let T=this.shader,A=this.pluginName;if(!T){if(!ef[A]){let{maxTextures:T}=y.plugins[A],B=new Int32Array(T);for(let y=0;y<T;y++)B[y]=y;let F={tint:new Float32Array([1,1,1,1]),translationMatrix:new U.y3,default:U.oo.from({uSamplers:B},!0)},X=y.plugins[A]._shader.program;ef[A]=new U.ex(X,F)}T=ef[A]}return T}_calculateBounds(){this.finishPoly();let y=this._geometry;if(!y.graphicsData.length)return;let{minX:T,minY:A,maxX:B,maxY:F}=y.bounds;this._bounds.addFrame(this.transform,T,A,B,F)}containsPoint(y){return this.worldTransform.applyInverse(y,ep._TEMP_POINT),this._geometry.containsPoint(ep._TEMP_POINT)}calculateTints(){if(this.batchTint!==this.tint){this.batchTint=this._tintColor.toNumber();for(let y=0;y<this.batches.length;y++){let T=this.batches[y];T._tintRGB=U.Il.shared.setValue(this._tintColor).multiply(T._batchRGB).toLittleEndianNumber()}}}calculateVertices(){let y=this.transform._worldID;if(this._transformID===y)return;this._transformID=y;let T=this.transform.worldTransform,A=T.a,B=T.b,F=T.c,U=T.d,X=T.tx,Y=T.ty,K=this._geometry.points,q=this.vertexData,Q=0;for(let y=0;y<K.length;y+=2){let T=K[y],J=K[y+1];q[Q++]=A*T+F*J+X,q[Q++]=U*J+B*T+Y}}closePath(){let y=this.currentPath;return y&&(y.closeStroke=!0,this.finishPoly()),this}setMatrix(y){return this._matrix=y,this}beginHole(){return this.finishPoly(),this._holeMode=!0,this}endHole(){return this.finishPoly(),this._holeMode=!1,this}destroy(y){this._geometry.refCount--,0===this._geometry.refCount&&this._geometry.dispose(),this._matrix=null,this.currentPath=null,this._lineStyle.destroy(),this._lineStyle=null,this._fillStyle.destroy(),this._fillStyle=null,this._geometry=null,this.shader=null,this.vertexData=null,this.batches.length=0,this.batches=null,super.destroy(y)}},em=ep;em.curves=Z,em._TEMP_POINT=new U.E9;let eg={buildPoly:Y,buildCircle:X,buildRectangle:K,buildRoundedRectangle:q,buildLine:buildLine,ArcUtils:ArcUtils,BezierUtils:BezierUtils,QuadraticUtils:QuadraticUtils,BatchPart:BatchPart,FILL_COMMANDS:ei,BATCH_POOL:es,DRAW_CALL_POOL:eh}},64260:function(y,T,A){"use strict";A.d(T,{Cd:function(){return Circle},ZX:function(){return U},Pj:function(){return Ellipse},y3:function(){return Matrix},AB:function(){return ObservablePoint},_b:function(){return B},E9:function(){return Point},mg:function(){return Polygon},jl:function(){return F},Ae:function(){return Rectangle},c9:function(){return RoundedRectangle},HS:function(){return Y},wx:function(){return ec},Lv:function(){return eu}});let B=2*Math.PI,F=180/Math.PI,U=Math.PI/180;var X,Y=((X=Y||{})[X.POLY=0]="POLY",X[X.RECT=1]="RECT",X[X.CIRC=2]="CIRC",X[X.ELIP=3]="ELIP",X[X.RREC=4]="RREC",X);let Point=class Point{constructor(y=0,T=0){this.x=0,this.y=0,this.x=y,this.y=T}clone(){return new Point(this.x,this.y)}copyFrom(y){return this.set(y.x,y.y),this}copyTo(y){return y.set(this.x,this.y),y}equals(y){return y.x===this.x&&y.y===this.y}set(y=0,T=y){return this.x=y,this.y=T,this}toString(){return`[@pixi/math:Point x=${this.x} y=${this.y}]`}};let K=[new Point,new Point,new Point,new Point];let Rectangle=class Rectangle{constructor(y=0,T=0,A=0,B=0){this.x=Number(y),this.y=Number(T),this.width=Number(A),this.height=Number(B),this.type=Y.RECT}get left(){return this.x}get right(){return this.x+this.width}get top(){return this.y}get bottom(){return this.y+this.height}static get EMPTY(){return new Rectangle(0,0,0,0)}clone(){return new Rectangle(this.x,this.y,this.width,this.height)}copyFrom(y){return this.x=y.x,this.y=y.y,this.width=y.width,this.height=y.height,this}copyTo(y){return y.x=this.x,y.y=this.y,y.width=this.width,y.height=this.height,y}contains(y,T){return!(this.width<=0)&&!(this.height<=0)&&y>=this.x&&y<this.x+this.width&&T>=this.y&&T<this.y+this.height}intersects(y,T){if(!T){let T=this.x<y.x?y.x:this.x,A=this.right>y.right?y.right:this.right;if(A<=T)return!1;let B=this.y<y.y?y.y:this.y,F=this.bottom>y.bottom?y.bottom:this.bottom;return F>B}let A=this.left,B=this.right,F=this.top,U=this.bottom;if(B<=A||U<=F)return!1;let X=K[0].set(y.left,y.top),Y=K[1].set(y.left,y.bottom),q=K[2].set(y.right,y.top),Q=K[3].set(y.right,y.bottom);if(q.x<=X.x||Y.y<=X.y)return!1;let J=Math.sign(T.a*T.d-T.b*T.c);if(0===J||(T.apply(X,X),T.apply(Y,Y),T.apply(q,q),T.apply(Q,Q),Math.max(X.x,Y.x,q.x,Q.x)<=A||Math.min(X.x,Y.x,q.x,Q.x)>=B||Math.max(X.y,Y.y,q.y,Q.y)<=F||Math.min(X.y,Y.y,q.y,Q.y)>=U))return!1;let Z=J*(Y.y-X.y),ei=J*(X.x-Y.x),es=Z*A+ei*F,eh=Z*B+ei*F,eu=Z*A+ei*U,ed=Z*B+ei*U;if(Math.max(es,eh,eu,ed)<=Z*X.x+ei*X.y||Math.min(es,eh,eu,ed)>=Z*Q.x+ei*Q.y)return!1;let ec=J*(X.y-q.y),ef=J*(q.x-X.x),ep=ec*A+ef*F,em=ec*B+ef*F,eg=ec*A+ef*U,e_=ec*B+ef*U;return!(Math.max(ep,em,eg,e_)<=ec*X.x+ef*X.y||Math.min(ep,em,eg,e_)>=ec*Q.x+ef*Q.y)}pad(y=0,T=y){return this.x-=y,this.y-=T,this.width+=2*y,this.height+=2*T,this}fit(y){let T=Math.max(this.x,y.x),A=Math.min(this.x+this.width,y.x+y.width),B=Math.max(this.y,y.y),F=Math.min(this.y+this.height,y.y+y.height);return this.x=T,this.width=Math.max(A-T,0),this.y=B,this.height=Math.max(F-B,0),this}ceil(y=1,T=.001){let A=Math.ceil((this.x+this.width-T)*y)/y,B=Math.ceil((this.y+this.height-T)*y)/y;return this.x=Math.floor((this.x+T)*y)/y,this.y=Math.floor((this.y+T)*y)/y,this.width=A-this.x,this.height=B-this.y,this}enlarge(y){let T=Math.min(this.x,y.x),A=Math.max(this.x+this.width,y.x+y.width),B=Math.min(this.y,y.y),F=Math.max(this.y+this.height,y.y+y.height);return this.x=T,this.width=A-T,this.y=B,this.height=F-B,this}toString(){return`[@pixi/math:Rectangle x=${this.x} y=${this.y} width=${this.width} height=${this.height}]`}};let Circle=class Circle{constructor(y=0,T=0,A=0){this.x=y,this.y=T,this.radius=A,this.type=Y.CIRC}clone(){return new Circle(this.x,this.y,this.radius)}contains(y,T){if(this.radius<=0)return!1;let A=this.radius*this.radius,B=this.x-y,F=this.y-T;return B*=B,F*=F,B+F<=A}getBounds(){return new Rectangle(this.x-this.radius,this.y-this.radius,2*this.radius,2*this.radius)}toString(){return`[@pixi/math:Circle x=${this.x} y=${this.y} radius=${this.radius}]`}};let Ellipse=class Ellipse{constructor(y=0,T=0,A=0,B=0){this.x=y,this.y=T,this.width=A,this.height=B,this.type=Y.ELIP}clone(){return new Ellipse(this.x,this.y,this.width,this.height)}contains(y,T){if(this.width<=0||this.height<=0)return!1;let A=(y-this.x)/this.width,B=(T-this.y)/this.height;return A*=A,B*=B,A+B<=1}getBounds(){return new Rectangle(this.x-this.width,this.y-this.height,this.width,this.height)}toString(){return`[@pixi/math:Ellipse x=${this.x} y=${this.y} width=${this.width} height=${this.height}]`}};let Polygon=class Polygon{constructor(...y){let T=Array.isArray(y[0])?y[0]:y;if("number"!=typeof T[0]){let y=[];for(let A=0,B=T.length;A<B;A++)y.push(T[A].x,T[A].y);T=y}this.points=T,this.type=Y.POLY,this.closeStroke=!0}clone(){let y=this.points.slice(),T=new Polygon(y);return T.closeStroke=this.closeStroke,T}contains(y,T){let A=!1,B=this.points.length/2;for(let F=0,U=B-1;F<B;U=F++){let B=this.points[2*F],X=this.points[2*F+1],Y=this.points[2*U],K=this.points[2*U+1],q=X>T!=K>T&&y<(Y-B)*((T-X)/(K-X))+B;q&&(A=!A)}return A}toString(){return`[@pixi/math:PolygoncloseStroke=${this.closeStroke}points=${this.points.reduce((y,T)=>`${y}, ${T}`,"")}]`}};let RoundedRectangle=class RoundedRectangle{constructor(y=0,T=0,A=0,B=0,F=20){this.x=y,this.y=T,this.width=A,this.height=B,this.radius=F,this.type=Y.RREC}clone(){return new RoundedRectangle(this.x,this.y,this.width,this.height,this.radius)}contains(y,T){if(this.width<=0||this.height<=0)return!1;if(y>=this.x&&y<=this.x+this.width&&T>=this.y&&T<=this.y+this.height){let A=Math.max(0,Math.min(this.radius,Math.min(this.width,this.height)/2));if(T>=this.y+A&&T<=this.y+this.height-A||y>=this.x+A&&y<=this.x+this.width-A)return!0;let B=y-(this.x+A),F=T-(this.y+A),U=A*A;if(B*B+F*F<=U||(B=y-(this.x+this.width-A))*B+F*F<=U||B*B+(F=T-(this.y+this.height-A))*F<=U||(B=y-(this.x+A))*B+F*F<=U)return!0}return!1}toString(){return`[@pixi/math:RoundedRectangle x=${this.x} y=${this.y}width=${this.width} height=${this.height} radius=${this.radius}]`}};let Matrix=class Matrix{constructor(y=1,T=0,A=0,B=1,F=0,U=0){this.array=null,this.a=y,this.b=T,this.c=A,this.d=B,this.tx=F,this.ty=U}fromArray(y){this.a=y[0],this.b=y[1],this.c=y[3],this.d=y[4],this.tx=y[2],this.ty=y[5]}set(y,T,A,B,F,U){return this.a=y,this.b=T,this.c=A,this.d=B,this.tx=F,this.ty=U,this}toArray(y,T){this.array||(this.array=new Float32Array(9));let A=T||this.array;return y?(A[0]=this.a,A[1]=this.b,A[2]=0,A[3]=this.c,A[4]=this.d,A[5]=0,A[6]=this.tx,A[7]=this.ty):(A[0]=this.a,A[1]=this.c,A[2]=this.tx,A[3]=this.b,A[4]=this.d,A[5]=this.ty,A[6]=0,A[7]=0),A[8]=1,A}apply(y,T){T=T||new Point;let A=y.x,B=y.y;return T.x=this.a*A+this.c*B+this.tx,T.y=this.b*A+this.d*B+this.ty,T}applyInverse(y,T){T=T||new Point;let A=1/(this.a*this.d+-(this.c*this.b)),B=y.x,F=y.y;return T.x=this.d*A*B+-this.c*A*F+(this.ty*this.c-this.tx*this.d)*A,T.y=this.a*A*F+-this.b*A*B+(-this.ty*this.a+this.tx*this.b)*A,T}translate(y,T){return this.tx+=y,this.ty+=T,this}scale(y,T){return this.a*=y,this.d*=T,this.c*=y,this.b*=T,this.tx*=y,this.ty*=T,this}rotate(y){let T=Math.cos(y),A=Math.sin(y),B=this.a,F=this.c,U=this.tx;return this.a=B*T-this.b*A,this.b=B*A+this.b*T,this.c=F*T-this.d*A,this.d=F*A+this.d*T,this.tx=U*T-this.ty*A,this.ty=U*A+this.ty*T,this}append(y){let T=this.a,A=this.b,B=this.c,F=this.d;return this.a=y.a*T+y.b*B,this.b=y.a*A+y.b*F,this.c=y.c*T+y.d*B,this.d=y.c*A+y.d*F,this.tx=y.tx*T+y.ty*B+this.tx,this.ty=y.tx*A+y.ty*F+this.ty,this}setTransform(y,T,A,B,F,U,X,Y,K){return this.a=Math.cos(X+K)*F,this.b=Math.sin(X+K)*F,this.c=-Math.sin(X-Y)*U,this.d=Math.cos(X-Y)*U,this.tx=y-(A*this.a+B*this.c),this.ty=T-(A*this.b+B*this.d),this}prepend(y){let T=this.tx;if(1!==y.a||0!==y.b||0!==y.c||1!==y.d){let T=this.a,A=this.c;this.a=T*y.a+this.b*y.c,this.b=T*y.b+this.b*y.d,this.c=A*y.a+this.d*y.c,this.d=A*y.b+this.d*y.d}return this.tx=T*y.a+this.ty*y.c+y.tx,this.ty=T*y.b+this.ty*y.d+y.ty,this}decompose(y){let T=this.a,A=this.b,F=this.c,U=this.d,X=y.pivot,Y=-Math.atan2(-F,U),K=Math.atan2(A,T),q=Math.abs(Y+K);return q<1e-5||1e-5>Math.abs(B-q)?(y.rotation=K,y.skew.x=y.skew.y=0):(y.rotation=0,y.skew.x=Y,y.skew.y=K),y.scale.x=Math.sqrt(T*T+A*A),y.scale.y=Math.sqrt(F*F+U*U),y.position.x=this.tx+(X.x*T+X.y*F),y.position.y=this.ty+(X.x*A+X.y*U),y}invert(){let y=this.a,T=this.b,A=this.c,B=this.d,F=this.tx,U=y*B-T*A;return this.a=B/U,this.b=-T/U,this.c=-A/U,this.d=y/U,this.tx=(A*this.ty-B*F)/U,this.ty=-(y*this.ty-T*F)/U,this}identity(){return this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this}clone(){let y=new Matrix;return y.a=this.a,y.b=this.b,y.c=this.c,y.d=this.d,y.tx=this.tx,y.ty=this.ty,y}copyTo(y){return y.a=this.a,y.b=this.b,y.c=this.c,y.d=this.d,y.tx=this.tx,y.ty=this.ty,y}copyFrom(y){return this.a=y.a,this.b=y.b,this.c=y.c,this.d=y.d,this.tx=y.tx,this.ty=y.ty,this}toString(){return`[@pixi/math:Matrix a=${this.a} b=${this.b} c=${this.c} d=${this.d} tx=${this.tx} ty=${this.ty}]`}static get IDENTITY(){return new Matrix}static get TEMP_MATRIX(){return new Matrix}};let q=[1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1,0,1],Q=[0,1,1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1],J=[0,-1,-1,-1,0,1,1,1,0,1,1,1,0,-1,-1,-1],Z=[1,1,0,-1,-1,-1,0,1,-1,-1,0,1,1,1,0,-1],ei=[],es=[],eh=Math.sign;!function(){for(let y=0;y<16;y++){let T=[];ei.push(T);for(let A=0;A<16;A++){let B=eh(q[y]*q[A]+J[y]*Q[A]),F=eh(Q[y]*q[A]+Z[y]*Q[A]),U=eh(q[y]*J[A]+J[y]*Z[A]),X=eh(Q[y]*J[A]+Z[y]*Z[A]);for(let y=0;y<16;y++)if(q[y]===B&&Q[y]===F&&J[y]===U&&Z[y]===X){T.push(y);break}}}for(let y=0;y<16;y++){let T=new Matrix;T.set(q[y],Q[y],J[y],Z[y],0,0),es.push(T)}}();let eu={E:0,SE:1,S:2,SW:3,W:4,NW:5,N:6,NE:7,MIRROR_VERTICAL:8,MAIN_DIAGONAL:10,MIRROR_HORIZONTAL:12,REVERSE_DIAGONAL:14,uX:y=>q[y],uY:y=>Q[y],vX:y=>J[y],vY:y=>Z[y],inv:y=>8&y?15&y:7&-y,add:(y,T)=>ei[y][T],sub:(y,T)=>ei[y][eu.inv(T)],rotate180:y=>4^y,isVertical:y=>(3&y)==2,byDirection:(y,T)=>2*Math.abs(y)<=Math.abs(T)?T>=0?eu.S:eu.N:2*Math.abs(T)<=Math.abs(y)?y>0?eu.E:eu.W:T>0?y>0?eu.SE:eu.SW:y>0?eu.NE:eu.NW,matrixAppendRotationInv:(y,T,A=0,B=0)=>{let F=es[eu.inv(T)];F.tx=A,F.ty=B,y.append(F)}};let ObservablePoint=class ObservablePoint{constructor(y,T,A=0,B=0){this._x=A,this._y=B,this.cb=y,this.scope=T}clone(y=this.cb,T=this.scope){return new ObservablePoint(y,T,this._x,this._y)}set(y=0,T=y){return(this._x!==y||this._y!==T)&&(this._x=y,this._y=T,this.cb.call(this.scope)),this}copyFrom(y){return(this._x!==y.x||this._y!==y.y)&&(this._x=y.x,this._y=y.y,this.cb.call(this.scope)),this}copyTo(y){return y.set(this._x,this._y),y}equals(y){return y.x===this._x&&y.y===this._y}toString(){return`[@pixi/math:ObservablePoint x=0 y=0 scope=${this.scope}]`}get x(){return this._x}set x(y){this._x!==y&&(this._x=y,this.cb.call(this.scope))}get y(){return this._y}set y(y){this._y!==y&&(this._y=y,this.cb.call(this.scope))}};let ed=class{constructor(){this.worldTransform=new Matrix,this.localTransform=new Matrix,this.position=new ObservablePoint(this.onChange,this,0,0),this.scale=new ObservablePoint(this.onChange,this,1,1),this.pivot=new ObservablePoint(this.onChange,this,0,0),this.skew=new ObservablePoint(this.updateSkew,this,0,0),this._rotation=0,this._cx=1,this._sx=0,this._cy=0,this._sy=1,this._localID=0,this._currentLocalID=0,this._worldID=0,this._parentID=0}onChange(){this._localID++}updateSkew(){this._cx=Math.cos(this._rotation+this.skew.y),this._sx=Math.sin(this._rotation+this.skew.y),this._cy=-Math.sin(this._rotation-this.skew.x),this._sy=Math.cos(this._rotation-this.skew.x),this._localID++}toString(){return`[@pixi/math:Transform position=(${this.position.x}, ${this.position.y}) rotation=${this.rotation} scale=(${this.scale.x}, ${this.scale.y}) skew=(${this.skew.x}, ${this.skew.y}) ]`}updateLocalTransform(){let y=this.localTransform;this._localID!==this._currentLocalID&&(y.a=this._cx*this.scale.x,y.b=this._sx*this.scale.x,y.c=this._cy*this.scale.y,y.d=this._sy*this.scale.y,y.tx=this.position.x-(this.pivot.x*y.a+this.pivot.y*y.c),y.ty=this.position.y-(this.pivot.x*y.b+this.pivot.y*y.d),this._currentLocalID=this._localID,this._parentID=-1)}updateTransform(y){let T=this.localTransform;if(this._localID!==this._currentLocalID&&(T.a=this._cx*this.scale.x,T.b=this._sx*this.scale.x,T.c=this._cy*this.scale.y,T.d=this._sy*this.scale.y,T.tx=this.position.x-(this.pivot.x*T.a+this.pivot.y*T.c),T.ty=this.position.y-(this.pivot.x*T.b+this.pivot.y*T.d),this._currentLocalID=this._localID,this._parentID=-1),this._parentID!==y._worldID){let A=y.worldTransform,B=this.worldTransform;B.a=T.a*A.a+T.b*A.c,B.b=T.a*A.b+T.b*A.d,B.c=T.c*A.a+T.d*A.c,B.d=T.c*A.b+T.d*A.d,B.tx=T.tx*A.a+T.ty*A.c+A.tx,B.ty=T.tx*A.b+T.ty*A.d+A.ty,this._parentID=y._worldID,this._worldID++}}setFromMatrix(y){y.decompose(this),this._localID++}get rotation(){return this._rotation}set rotation(y){this._rotation!==y&&(this._rotation=y,this.updateSkew())}},ec=ed;ec.IDENTITY=new ed},88831:function(y,T,A){"use strict";A.d(T,{ZT:function(){return NineSlicePlane},AL:function(){return SimpleMesh},IE:function(){return SimpleRope}});var B=A(67778);let PlaneGeometry=class PlaneGeometry extends B.xc{constructor(y=100,T=100,A=10,B=10){super(),this.segWidth=A,this.segHeight=B,this.width=y,this.height=T,this.build()}build(){let y=this.segWidth*this.segHeight,T=[],A=[],B=[],F=this.segWidth-1,U=this.segHeight-1,X=this.width/F,Y=this.height/U;for(let B=0;B<y;B++){let y=B%this.segWidth,K=B/this.segWidth|0;T.push(y*X,K*Y),A.push(y/F,K/U)}let K=F*U;for(let y=0;y<K;y++){let T=y%F,A=y/F|0,U=A*this.segWidth+T,X=A*this.segWidth+T+1,Y=(A+1)*this.segWidth+T,K=(A+1)*this.segWidth+T+1;B.push(U,X,Y,X,K,Y)}this.buffers[0].data=new Float32Array(T),this.buffers[1].data=new Float32Array(A),this.indexBuffer.data=new Uint16Array(B),this.buffers[0].update(),this.buffers[1].update(),this.indexBuffer.update()}};let RopeGeometry=class RopeGeometry extends B.xc{constructor(y=200,T,A=0){super(new Float32Array(4*T.length),new Float32Array(4*T.length),new Uint16Array((T.length-1)*6)),this.points=T,this._width=y,this.textureScale=A,this.build()}get width(){return this._width}build(){let y=this.points;if(!y)return;let T=this.getBuffer("aVertexPosition"),A=this.getBuffer("aTextureCoord"),B=this.getIndex();if(y.length<1)return;T.data.length/4!==y.length&&(T.data=new Float32Array(4*y.length),A.data=new Float32Array(4*y.length),B.data=new Uint16Array((y.length-1)*6));let F=A.data,U=B.data;F[0]=0,F[1]=0,F[2]=0,F[3]=1;let X=0,Y=y[0],K=this._width*this.textureScale,q=y.length;for(let T=0;T<q;T++){let A=4*T;if(this.textureScale>0){let A=Y.x-y[T].x,B=Y.y-y[T].y,F=Math.sqrt(A*A+B*B);Y=y[T],X+=F/K}else X=T/(q-1);F[A]=X,F[A+1]=0,F[A+2]=X,F[A+3]=1}let Q=0;for(let y=0;y<q-1;y++){let T=2*y;U[Q++]=T,U[Q++]=T+1,U[Q++]=T+2,U[Q++]=T+2,U[Q++]=T+1,U[Q++]=T+3}A.update(),B.update(),this.updateVertices()}updateVertices(){let y;let T=this.points;if(T.length<1)return;let A=T[0],B=0,F=0,U=this.buffers[0].data,X=T.length,Y=this.textureScale>0?this.textureScale*this._width/2:this._width/2;for(let K=0;K<X;K++){let q=T[K],Q=4*K;F=-((y=K<T.length-1?T[K+1]:q).x-A.x),B=y.y-A.y;let J=(1-K/(X-1))*10;J>1&&(J=1);let Z=Math.sqrt(B*B+F*F);Z<1e-6?(B=0,F=0):(B/=Z,F/=Z,B*=Y,F*=Y),U[Q]=q.x+B,U[Q+1]=q.y+F,U[Q+2]=q.x-B,U[Q+3]=q.y-F,A=q}this.buffers[0].update()}update(){this.textureScale>0?this.build():this.updateVertices()}};var F=A(1396);let SimplePlane=class SimplePlane extends B.Kj{constructor(y,T,A){let U=new PlaneGeometry(y.width,y.height,T,A),X=new B.rY(F.xE.WHITE);super(U,X),this.texture=y,this.autoResize=!0}textureUpdated(){this._textureID=this.shader.texture._updateID;let y=this.geometry,{width:T,height:A}=this.shader.texture;this.autoResize&&(y.width!==T||y.height!==A)&&(y.width=this.shader.texture.width,y.height=this.shader.texture.height,y.build())}set texture(y){this.shader.texture!==y&&(this.shader.texture=y,this._textureID=-1,y.baseTexture.valid?this.textureUpdated():y.once("update",this.textureUpdated,this))}get texture(){return this.shader.texture}_render(y){this._textureID!==this.shader.texture._updateID&&this.textureUpdated(),super._render(y)}destroy(y){this.shader.texture.off("update",this.textureUpdated,this),super.destroy(y)}};let NineSlicePlane=class NineSlicePlane extends SimplePlane{constructor(y,T,A,B,U){super(F.xE.WHITE,4,4),this._origWidth=y.orig.width,this._origHeight=y.orig.height,this._width=this._origWidth,this._height=this._origHeight,this._leftWidth=T??y.defaultBorders?.left??10,this._rightWidth=B??y.defaultBorders?.right??10,this._topHeight=A??y.defaultBorders?.top??10,this._bottomHeight=U??y.defaultBorders?.bottom??10,this.texture=y}textureUpdated(){this._textureID=this.shader.texture._updateID,this._refresh()}get vertices(){return this.geometry.getBuffer("aVertexPosition").data}set vertices(y){this.geometry.getBuffer("aVertexPosition").data=y}updateHorizontalVertices(){let y=this.vertices,T=this._getMinScale();y[9]=y[11]=y[13]=y[15]=this._topHeight*T,y[17]=y[19]=y[21]=y[23]=this._height-this._bottomHeight*T,y[25]=y[27]=y[29]=y[31]=this._height}updateVerticalVertices(){let y=this.vertices,T=this._getMinScale();y[2]=y[10]=y[18]=y[26]=this._leftWidth*T,y[4]=y[12]=y[20]=y[28]=this._width-this._rightWidth*T,y[6]=y[14]=y[22]=y[30]=this._width}_getMinScale(){let y=this._leftWidth+this._rightWidth,T=this._width>y?1:this._width/y,A=this._topHeight+this._bottomHeight,B=this._height>A?1:this._height/A;return Math.min(T,B)}get width(){return this._width}set width(y){this._width=y,this._refresh()}get height(){return this._height}set height(y){this._height=y,this._refresh()}get leftWidth(){return this._leftWidth}set leftWidth(y){this._leftWidth=y,this._refresh()}get rightWidth(){return this._rightWidth}set rightWidth(y){this._rightWidth=y,this._refresh()}get topHeight(){return this._topHeight}set topHeight(y){this._topHeight=y,this._refresh()}get bottomHeight(){return this._bottomHeight}set bottomHeight(y){this._bottomHeight=y,this._refresh()}_refresh(){let y=this.texture,T=this.geometry.buffers[1].data;this._origWidth=y.orig.width,this._origHeight=y.orig.height;let A=1/this._origWidth,B=1/this._origHeight;T[0]=T[8]=T[16]=T[24]=0,T[1]=T[3]=T[5]=T[7]=0,T[6]=T[14]=T[22]=T[30]=1,T[25]=T[27]=T[29]=T[31]=1,T[2]=T[10]=T[18]=T[26]=A*this._leftWidth,T[4]=T[12]=T[20]=T[28]=1-A*this._rightWidth,T[9]=T[11]=T[13]=T[15]=B*this._topHeight,T[17]=T[19]=T[21]=T[23]=1-B*this._bottomHeight,this.updateHorizontalVertices(),this.updateVerticalVertices(),this.geometry.buffers[0].update(),this.geometry.buffers[1].update()}};let SimpleMesh=class SimpleMesh extends B.Kj{constructor(y=F.xE.EMPTY,T,A,U,X){let Y=new B.xc(T,A,U);Y.getBuffer("aVertexPosition").static=!1;let K=new B.rY(y);super(Y,K,null,X),this.autoUpdate=!0}get vertices(){return this.geometry.getBuffer("aVertexPosition").data}set vertices(y){this.geometry.getBuffer("aVertexPosition").data=y}_render(y){this.autoUpdate&&this.geometry.getBuffer("aVertexPosition").update(),super._render(y)}};let SimpleRope=class SimpleRope extends B.Kj{constructor(y,T,A=0){let U=new RopeGeometry(y.height,T,A),X=new B.rY(y);A>0&&(y.baseTexture.wrapMode=F.Nt.REPEAT),super(U,X),this.autoUpdate=!0}_render(y){let T=this.geometry;(this.autoUpdate||T._width!==this.shader.texture.height)&&(T._width=this.shader.texture.height,T.update()),super._render(y)}}},67778:function(y,T,A){"use strict";A.d(T,{Kj:function(){return K},xc:function(){return MeshGeometry},rY:function(){return MeshMaterial}});var B=A(1396),F=A(68276);let MeshBatchUvs=class MeshBatchUvs{constructor(y,T){this.uvBuffer=y,this.uvMatrix=T,this.data=null,this._bufferUpdateId=-1,this._textureUpdateId=-1,this._updateID=0}update(y){if(!y&&this._bufferUpdateId===this.uvBuffer._updateID&&this._textureUpdateId===this.uvMatrix._updateID)return;this._bufferUpdateId=this.uvBuffer._updateID,this._textureUpdateId=this.uvMatrix._updateID;let T=this.uvBuffer.data;this.data&&this.data.length===T.length||(this.data=new Float32Array(T.length)),this.uvMatrix.multiplyUvs(T,this.data),this._updateID++}};let U=new B.E9,X=new B.mg,Y=class extends F.W2{constructor(y,T,A,F=B.lg.TRIANGLES){super(),this.geometry=y,this.shader=T,this.state=A||B.ZM.for2d(),this.drawMode=F,this.start=0,this.size=0,this.uvs=null,this.indices=null,this.vertexData=new Float32Array(1),this.vertexDirty=-1,this._transformID=-1,this._roundPixels=B.Xd.ROUND_PIXELS,this.batchUvs=null}get geometry(){return this._geometry}set geometry(y){this._geometry!==y&&(this._geometry&&(this._geometry.refCount--,0===this._geometry.refCount&&this._geometry.dispose()),this._geometry=y,this._geometry&&this._geometry.refCount++,this.vertexDirty=-1)}get uvBuffer(){return this.geometry.buffers[1]}get verticesBuffer(){return this.geometry.buffers[0]}set material(y){this.shader=y}get material(){return this.shader}set blendMode(y){this.state.blendMode=y}get blendMode(){return this.state.blendMode}set roundPixels(y){this._roundPixels!==y&&(this._transformID=-1),this._roundPixels=y}get roundPixels(){return this._roundPixels}get tint(){return"tint"in this.shader?this.shader.tint:null}set tint(y){this.shader.tint=y}get tintValue(){return this.shader.tintValue}get texture(){return"texture"in this.shader?this.shader.texture:null}set texture(y){this.shader.texture=y}_render(y){let T=this.geometry.buffers[0].data,A=this.shader;A.batchable&&this.drawMode===B.lg.TRIANGLES&&T.length<2*Y.BATCHABLE_SIZE?this._renderToBatch(y):this._renderDefault(y)}_renderDefault(y){let T=this.shader;T.alpha=this.worldAlpha,T.update&&T.update(),y.batch.flush(),T.uniforms.translationMatrix=this.transform.worldTransform.toArray(!0),y.shader.bind(T),y.state.set(this.state),y.geometry.bind(this.geometry,T),y.geometry.draw(this.drawMode,this.size,this.start,this.geometry.instanceCount)}_renderToBatch(y){let T=this.geometry,A=this.shader;A.uvMatrix&&(A.uvMatrix.update(),this.calculateUvs()),this.calculateVertices(),this.indices=T.indexBuffer.data,this._tintRGB=A._tintRGB,this._texture=A.texture;let B=this.material.pluginName;y.batch.setObjectRenderer(y.plugins[B]),y.plugins[B].render(this)}calculateVertices(){let y=this.geometry,T=y.buffers[0],A=T.data,F=T._updateID;if(F===this.vertexDirty&&this._transformID===this.transform._worldID)return;this._transformID=this.transform._worldID,this.vertexData.length!==A.length&&(this.vertexData=new Float32Array(A.length));let U=this.transform.worldTransform,X=U.a,Y=U.b,K=U.c,q=U.d,Q=U.tx,J=U.ty,Z=this.vertexData;for(let y=0;y<Z.length/2;y++){let T=A[2*y],B=A[2*y+1];Z[2*y]=X*T+K*B+Q,Z[2*y+1]=Y*T+q*B+J}if(this._roundPixels){let y=B.Xd.RESOLUTION;for(let T=0;T<Z.length;++T)Z[T]=Math.round(Z[T]*y)/y}this.vertexDirty=F}calculateUvs(){let y=this.geometry.buffers[1],T=this.shader;T.uvMatrix.isSimple?this.uvs=y.data:(this.batchUvs||(this.batchUvs=new MeshBatchUvs(y,T.uvMatrix)),this.batchUvs.update(),this.uvs=this.batchUvs.data)}_calculateBounds(){this.calculateVertices(),this._bounds.addVertexData(this.vertexData,0,this.vertexData.length)}containsPoint(y){if(!this.getBounds().contains(y.x,y.y))return!1;this.worldTransform.applyInverse(y,U);let T=this.geometry.getBuffer("aVertexPosition").data,A=X.points,B=this.geometry.getIndex().data,F=B.length,Y=4===this.drawMode?3:1;for(let y=0;y+2<F;y+=Y){let F=2*B[y],Y=2*B[y+1],K=2*B[y+2];if(A[0]=T[F],A[1]=T[F+1],A[2]=T[Y],A[3]=T[Y+1],A[4]=T[K],A[5]=T[K+1],X.contains(U.x,U.y))return!0}return!1}destroy(y){super.destroy(y),this._cachedTexture&&(this._cachedTexture.destroy(),this._cachedTexture=null),this.geometry=null,this.shader=null,this.state=null,this.uvs=null,this.indices=null,this.vertexData=null}},K=Y;K.BATCHABLE_SIZE=100;let MeshGeometry=class MeshGeometry extends B.wG{constructor(y,T,A){super();let F=new B.lW(y),U=new B.lW(T,!0),X=new B.lW(A,!0,!0);this.addAttribute("aVertexPosition",F,2,!1,B.vK.FLOAT).addAttribute("aTextureCoord",U,2,!1,B.vK.FLOAT).addIndex(X),this._updateId=-1}get vertexDirtyId(){return this.buffers[0]._updateID}};let MeshMaterial=class MeshMaterial extends B.ex{constructor(y,T){let A={uSampler:y,alpha:1,uTextureMatrix:B.y3.IDENTITY,uColor:new Float32Array([1,1,1,1])};(T=Object.assign({tint:16777215,alpha:1,pluginName:"batch"},T)).uniforms&&Object.assign(A,T.uniforms),super(T.program||B.$r.from("attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform mat3 uTextureMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = (uTextureMatrix * vec3(aTextureCoord, 1.0)).xy;\n}\n","varying vec2 vTextureCoord;\nuniform vec4 uColor;\n\nuniform sampler2D uSampler;\n\nvoid main(void)\n{\n    gl_FragColor = texture2D(uSampler, vTextureCoord) * uColor;\n}\n"),A),this._colorDirty=!1,this.uvMatrix=new B.UX(y),this.batchable=void 0===T.program,this.pluginName=T.pluginName,this._tintColor=new B.Il(T.tint),this._tintRGB=this._tintColor.toLittleEndianNumber(),this._colorDirty=!0,this.alpha=T.alpha}get texture(){return this.uniforms.uSampler}set texture(y){this.uniforms.uSampler!==y&&(!this.uniforms.uSampler.baseTexture.alphaMode!=!y.baseTexture.alphaMode&&(this._colorDirty=!0),this.uniforms.uSampler=y,this.uvMatrix.texture=y)}set alpha(y){y!==this._alpha&&(this._alpha=y,this._colorDirty=!0)}get alpha(){return this._alpha}set tint(y){y!==this.tint&&(this._tintColor.setValue(y),this._tintRGB=this._tintColor.toLittleEndianNumber(),this._colorDirty=!0)}get tint(){return this._tintColor.value}get tintValue(){return this._tintColor.toNumber()}update(){if(this._colorDirty){this._colorDirty=!1;let y=this.texture.baseTexture,T=y.alphaMode;B.Il.shared.setValue(this._tintColor).premultiply(this._alpha,T).toArray(this.uniforms.uColor)}this.uvMatrix.update()&&(this.uniforms.uTextureMatrix=this.uvMatrix.mapCoord)}}},23556:function(y,T,A){"use strict";A.d(T,{T:function(){return ParticleContainer}});var B=A(1396),F=A(68276);let ParticleContainer=class ParticleContainer extends F.W2{constructor(y=1500,T,A=16384,F=!1){super(),A>16384&&(A=16384),this._properties=[!1,!0,!1,!1,!1],this._maxSize=y,this._batchSize=A,this._buffers=null,this._bufferUpdateIDs=[],this._updateID=0,this.interactiveChildren=!1,this.blendMode=B.T$.NORMAL,this.autoResize=F,this.roundPixels=!0,this.baseTexture=null,this.setProperties(T),this._tintColor=new B.Il(0),this.tintRgb=new Float32Array(3),this.tint=16777215}setProperties(y){y&&(this._properties[0]="vertices"in y||"scale"in y?!!y.vertices||!!y.scale:this._properties[0],this._properties[1]="position"in y?!!y.position:this._properties[1],this._properties[2]="rotation"in y?!!y.rotation:this._properties[2],this._properties[3]="uvs"in y?!!y.uvs:this._properties[3],this._properties[4]="tint"in y||"alpha"in y?!!y.tint||!!y.alpha:this._properties[4])}updateTransform(){this.displayObjectUpdateTransform()}get tint(){return this._tintColor.value}set tint(y){this._tintColor.setValue(y),this._tintColor.toRgbArray(this.tintRgb)}render(y){this.visible&&!(this.worldAlpha<=0)&&this.children.length&&this.renderable&&(this.baseTexture||(this.baseTexture=this.children[0]._texture.baseTexture,this.baseTexture.valid||this.baseTexture.once("update",()=>this.onChildrenChange(0))),y.batch.setObjectRenderer(y.plugins.particle),y.plugins.particle.render(this))}onChildrenChange(y){let T=Math.floor(y/this._batchSize);for(;this._bufferUpdateIDs.length<T;)this._bufferUpdateIDs.push(0);this._bufferUpdateIDs[T]=++this._updateID}dispose(){if(this._buffers){for(let y=0;y<this._buffers.length;++y)this._buffers[y].destroy();this._buffers=null}}destroy(y){super.destroy(y),this.dispose(),this._properties=null,this._buffers=null,this._bufferUpdateIDs=null}};let ParticleBuffer=class ParticleBuffer{constructor(y,T,A){this.geometry=new B.wG,this.indexBuffer=null,this.size=A,this.dynamicProperties=[],this.staticProperties=[];for(let A=0;A<y.length;++A){let F=y[A];F={attributeName:F.attributeName,size:F.size,uploadFunction:F.uploadFunction,type:F.type||B.vK.FLOAT,offset:F.offset},T[A]?this.dynamicProperties.push(F):this.staticProperties.push(F)}this.staticStride=0,this.staticBuffer=null,this.staticData=null,this.staticDataUint32=null,this.dynamicStride=0,this.dynamicBuffer=null,this.dynamicData=null,this.dynamicDataUint32=null,this._updateID=0,this.initBuffers()}initBuffers(){let y=this.geometry,T=0;this.indexBuffer=new B.lW(B.P6.createIndicesForQuads(this.size),!0,!0),y.addIndex(this.indexBuffer),this.dynamicStride=0;for(let y=0;y<this.dynamicProperties.length;++y){let A=this.dynamicProperties[y];A.offset=T,T+=A.size,this.dynamicStride+=A.size}let A=new ArrayBuffer(this.size*this.dynamicStride*16);this.dynamicData=new Float32Array(A),this.dynamicDataUint32=new Uint32Array(A),this.dynamicBuffer=new B.lW(this.dynamicData,!1,!1);let F=0;this.staticStride=0;for(let y=0;y<this.staticProperties.length;++y){let T=this.staticProperties[y];T.offset=F,F+=T.size,this.staticStride+=T.size}let U=new ArrayBuffer(this.size*this.staticStride*16);this.staticData=new Float32Array(U),this.staticDataUint32=new Uint32Array(U),this.staticBuffer=new B.lW(this.staticData,!0,!1);for(let T=0;T<this.dynamicProperties.length;++T){let A=this.dynamicProperties[T];y.addAttribute(A.attributeName,this.dynamicBuffer,0,A.type===B.vK.UNSIGNED_BYTE,A.type,4*this.dynamicStride,4*A.offset)}for(let T=0;T<this.staticProperties.length;++T){let A=this.staticProperties[T];y.addAttribute(A.attributeName,this.staticBuffer,0,A.type===B.vK.UNSIGNED_BYTE,A.type,4*this.staticStride,4*A.offset)}}uploadDynamic(y,T,A){for(let F=0;F<this.dynamicProperties.length;F++){let U=this.dynamicProperties[F];U.uploadFunction(y,T,A,U.type===B.vK.UNSIGNED_BYTE?this.dynamicDataUint32:this.dynamicData,this.dynamicStride,U.offset)}this.dynamicBuffer._updateID++}uploadStatic(y,T,A){for(let F=0;F<this.staticProperties.length;F++){let U=this.staticProperties[F];U.uploadFunction(y,T,A,U.type===B.vK.UNSIGNED_BYTE?this.staticDataUint32:this.staticData,this.staticStride,U.offset)}this.staticBuffer._updateID++}destroy(){this.indexBuffer=null,this.dynamicProperties=null,this.dynamicBuffer=null,this.dynamicData=null,this.dynamicDataUint32=null,this.staticProperties=null,this.staticBuffer=null,this.staticData=null,this.staticDataUint32=null,this.geometry.destroy()}};let ParticleRenderer=class ParticleRenderer extends B.bO{constructor(y){super(y),this.shader=null,this.properties=null,this.tempMatrix=new B.y3,this.properties=[{attributeName:"aVertexPosition",size:2,uploadFunction:this.uploadVertices,offset:0},{attributeName:"aPositionCoord",size:2,uploadFunction:this.uploadPosition,offset:0},{attributeName:"aRotation",size:1,uploadFunction:this.uploadRotation,offset:0},{attributeName:"aTextureCoord",size:2,uploadFunction:this.uploadUvs,offset:0},{attributeName:"aColor",size:1,type:B.vK.UNSIGNED_BYTE,uploadFunction:this.uploadTint,offset:0}],this.shader=B.ex.from("attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec4 aColor;\n\nattribute vec2 aPositionCoord;\nattribute float aRotation;\n\nuniform mat3 translationMatrix;\nuniform vec4 uColor;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nvoid main(void){\n    float x = (aVertexPosition.x) * cos(aRotation) - (aVertexPosition.y) * sin(aRotation);\n    float y = (aVertexPosition.x) * sin(aRotation) + (aVertexPosition.y) * cos(aRotation);\n\n    vec2 v = vec2(x, y);\n    v = v + aPositionCoord;\n\n    gl_Position = vec4((translationMatrix * vec3(v, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = aTextureCoord;\n    vColor = aColor * uColor;\n}\n","varying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nuniform sampler2D uSampler;\n\nvoid main(void){\n    vec4 color = texture2D(uSampler, vTextureCoord) * vColor;\n    gl_FragColor = color;\n}",{}),this.state=B.ZM.for2d()}render(y){let T=y.children,A=y._maxSize,F=y._batchSize,U=this.renderer,X=T.length;if(0===X)return;X>A&&!y.autoResize&&(X=A);let Y=y._buffers;Y||(Y=y._buffers=this.generateBuffers(y));let K=T[0]._texture.baseTexture,q=K.alphaMode>0;this.state.blendMode=B.P6.correctBlendMode(y.blendMode,q),U.state.set(this.state);let Q=U.gl,J=y.worldTransform.copyTo(this.tempMatrix);J.prepend(U.globalUniforms.uniforms.projectionMatrix),this.shader.uniforms.translationMatrix=J.toArray(!0),this.shader.uniforms.uColor=B.Il.shared.setValue(y.tintRgb).premultiply(y.worldAlpha,q).toArray(this.shader.uniforms.uColor),this.shader.uniforms.uSampler=K,this.renderer.shader.bind(this.shader);let Z=!1;for(let A=0,B=0;A<X;A+=F,B+=1){let K=X-A;K>F&&(K=F),B>=Y.length&&Y.push(this._generateOneMoreBuffer(y));let q=Y[B];q.uploadDynamic(T,A,K);let J=y._bufferUpdateIDs[B]||0;(Z=Z||q._updateID<J)&&(q._updateID=y._updateID,q.uploadStatic(T,A,K)),U.geometry.bind(q.geometry),Q.drawElements(Q.TRIANGLES,6*K,Q.UNSIGNED_SHORT,0)}}generateBuffers(y){let T=[],A=y._maxSize,B=y._batchSize,F=y._properties;for(let y=0;y<A;y+=B)T.push(new ParticleBuffer(this.properties,F,B));return T}_generateOneMoreBuffer(y){let T=y._batchSize,A=y._properties;return new ParticleBuffer(this.properties,A,T)}uploadVertices(y,T,A,B,F,U){let X=0,Y=0,K=0,q=0;for(let Q=0;Q<A;++Q){let A=y[T+Q],J=A._texture,Z=A.scale.x,ei=A.scale.y,es=J.trim,eh=J.orig;es?(X=(Y=es.x-A.anchor.x*eh.width)+es.width,K=(q=es.y-A.anchor.y*eh.height)+es.height):(X=eh.width*(1-A.anchor.x),Y=-(eh.width*A.anchor.x),K=eh.height*(1-A.anchor.y),q=-(eh.height*A.anchor.y)),B[U]=Y*Z,B[U+1]=q*ei,B[U+F]=X*Z,B[U+F+1]=q*ei,B[U+2*F]=X*Z,B[U+2*F+1]=K*ei,B[U+3*F]=Y*Z,B[U+3*F+1]=K*ei,U+=4*F}}uploadPosition(y,T,A,B,F,U){for(let X=0;X<A;X++){let A=y[T+X].position;B[U]=A.x,B[U+1]=A.y,B[U+F]=A.x,B[U+F+1]=A.y,B[U+2*F]=A.x,B[U+2*F+1]=A.y,B[U+3*F]=A.x,B[U+3*F+1]=A.y,U+=4*F}}uploadRotation(y,T,A,B,F,U){for(let X=0;X<A;X++){let A=y[T+X].rotation;B[U]=A,B[U+F]=A,B[U+2*F]=A,B[U+3*F]=A,U+=4*F}}uploadUvs(y,T,A,B,F,U){for(let X=0;X<A;++X){let A=y[T+X]._texture._uvs;A?(B[U]=A.x0,B[U+1]=A.y0,B[U+F]=A.x1,B[U+F+1]=A.y1,B[U+2*F]=A.x2,B[U+2*F+1]=A.y2,B[U+3*F]=A.x3,B[U+3*F+1]=A.y3):(B[U]=0,B[U+1]=0,B[U+F]=0,B[U+F+1]=0,B[U+2*F]=0,B[U+2*F+1]=0,B[U+3*F]=0,B[U+3*F+1]=0),U+=4*F}}uploadTint(y,T,A,F,U,X){for(let Y=0;Y<A;++Y){let A=y[T+Y],K=B.Il.shared.setValue(A._tintRGB).toPremultiplied(A.alpha,A.texture.baseTexture.alphaMode>0);F[X]=K,F[X+U]=K,F[X+2*U]=K,F[X+3*U]=K,X+=4*U}}destroy(){super.destroy(),this.shader&&(this.shader.destroy(),this.shader=null),this.tempMatrix=null}};ParticleRenderer.extension={name:"particle",type:B.nw.RendererPlugin},B.Rw.add(ParticleRenderer)},78706:function(y,T,A){"use strict";A.d(T,{tq:function(){return ep},Xd:function(){return B}});let B={ADAPTER:{createCanvas:(y,T)=>{let A=document.createElement("canvas");return A.width=y,A.height=T,A},getCanvasRenderingContext2D:()=>CanvasRenderingContext2D,getWebGLRenderingContext:()=>WebGLRenderingContext,getNavigator:()=>navigator,getBaseUrl:()=>document.baseURI??window.location.href,getFontFaceSet:()=>document.fonts,fetch:(y,T)=>fetch(y,T),parseXML:y=>{let T=new DOMParser;return T.parseFromString(y,"text/xml")}},RESOLUTION:1,CREATE_IMAGE_BITMAP:!1,ROUND_PIXELS:!1};var F=/iPhone/i,U=/iPod/i,X=/iPad/i,Y=/\biOS-universal(?:.+)Mac\b/i,K=/\bAndroid(?:.+)Mobile\b/i,q=/Android/i,Q=/(?:SD4930UR|\bSilk(?:.+)Mobile\b)/i,J=/Silk/i,Z=/Windows Phone/i,ei=/\bWindows(?:.+)ARM\b/i,es=/BlackBerry/i,eh=/BB10/i,eu=/Opera Mini/i,ed=/\b(CriOS|Chrome)(?:.+)Mobile/i,ec=/Mobile(?:.+)Firefox\b/i,isAppleTabletOnIos13=function(y){return void 0!==y&&"MacIntel"===y.platform&&"number"==typeof y.maxTouchPoints&&y.maxTouchPoints>1&&"undefined"==typeof MSStream};function isMobile(y){var T,A={userAgent:"",platform:"",maxTouchPoints:0};y||"undefined"==typeof navigator?"string"==typeof y?A.userAgent=y:y&&y.userAgent&&(A={userAgent:y.userAgent,platform:y.platform,maxTouchPoints:y.maxTouchPoints||0}):A={userAgent:navigator.userAgent,platform:navigator.platform,maxTouchPoints:navigator.maxTouchPoints||0};var B=A.userAgent,ef=B.split("[FBAN");void 0!==ef[1]&&(B=ef[0]),void 0!==(ef=B.split("Twitter"))[1]&&(B=ef[0]);var ep=(T=B,function(y){return y.test(T)}),em={apple:{phone:ep(F)&&!ep(Z),ipod:ep(U),tablet:!ep(F)&&(ep(X)||isAppleTabletOnIos13(A))&&!ep(Z),universal:ep(Y),device:(ep(F)||ep(U)||ep(X)||ep(Y)||isAppleTabletOnIos13(A))&&!ep(Z)},amazon:{phone:ep(Q),tablet:!ep(Q)&&ep(J),device:ep(Q)||ep(J)},android:{phone:!ep(Z)&&ep(Q)||!ep(Z)&&ep(K),tablet:!ep(Z)&&!ep(Q)&&!ep(K)&&(ep(J)||ep(q)),device:!ep(Z)&&(ep(Q)||ep(J)||ep(K)||ep(q))||ep(/\bokhttp\b/i)},windows:{phone:ep(Z),tablet:ep(ei),device:ep(Z)||ep(ei)},other:{blackberry:ep(es),blackberry10:ep(eh),opera:ep(eu),firefox:ep(ec),chrome:ep(ed),device:ep(es)||ep(eh)||ep(eu)||ep(ec)||ep(ed)},any:!1,phone:!1,tablet:!1};return em.any=em.apple.device||em.android.device||em.windows.device||em.other.device,em.phone=em.apple.phone||em.android.phone||em.windows.phone,em.tablet=em.apple.tablet||em.android.tablet||em.windows.tablet,em}let ef=isMobile.default??isMobile,ep=ef(globalThis.navigator)},17108:function(y,T,A){"use strict";A.d(T,{K:function(){return AnimatedSprite}});var B=A(1396),F=A(67220);let AnimatedSprite=class AnimatedSprite extends F.j{constructor(y,T=!0){super(y[0]instanceof B.xE?y[0]:y[0].texture),this._textures=null,this._durations=null,this._autoUpdate=T,this._isConnectedToTicker=!1,this.animationSpeed=1,this.loop=!0,this.updateAnchor=!1,this.onComplete=null,this.onFrameChange=null,this.onLoop=null,this._currentTime=0,this._playing=!1,this._previousFrame=null,this.textures=y}stop(){this._playing&&(this._playing=!1,this._autoUpdate&&this._isConnectedToTicker&&(B.vB.shared.remove(this.update,this),this._isConnectedToTicker=!1))}play(){this._playing||(this._playing=!0,!this._autoUpdate||this._isConnectedToTicker||(B.vB.shared.add(this.update,this,B.uF.HIGH),this._isConnectedToTicker=!0))}gotoAndStop(y){this.stop(),this.currentFrame=y}gotoAndPlay(y){this.currentFrame=y,this.play()}update(y){if(!this._playing)return;let T=this.animationSpeed*y,A=this.currentFrame;if(null!==this._durations){let A=this._currentTime%1*this._durations[this.currentFrame];for(A+=T/60*1e3;A<0;)this._currentTime--,A+=this._durations[this.currentFrame];let B=Math.sign(this.animationSpeed*y);for(this._currentTime=Math.floor(this._currentTime);A>=this._durations[this.currentFrame];)A-=this._durations[this.currentFrame]*B,this._currentTime+=B;this._currentTime+=A/this._durations[this.currentFrame]}else this._currentTime+=T;this._currentTime<0&&!this.loop?(this.gotoAndStop(0),this.onComplete&&this.onComplete()):this._currentTime>=this._textures.length&&!this.loop?(this.gotoAndStop(this._textures.length-1),this.onComplete&&this.onComplete()):A!==this.currentFrame&&(this.loop&&this.onLoop&&(this.animationSpeed>0&&this.currentFrame<A||this.animationSpeed<0&&this.currentFrame>A)&&this.onLoop(),this.updateTexture())}updateTexture(){let y=this.currentFrame;this._previousFrame!==y&&(this._previousFrame=y,this._texture=this._textures[y],this._textureID=-1,this._textureTrimmedID=-1,this._cachedTint=16777215,this.uvs=this._texture._uvs.uvsFloat32,this.updateAnchor&&this._anchor.copyFrom(this._texture.defaultAnchor),this.onFrameChange&&this.onFrameChange(this.currentFrame))}destroy(y){this.stop(),super.destroy(y),this.onComplete=null,this.onFrameChange=null,this.onLoop=null}static fromFrames(y){let T=[];for(let A=0;A<y.length;++A)T.push(B.xE.from(y[A]));return new AnimatedSprite(T)}static fromImages(y){let T=[];for(let A=0;A<y.length;++A)T.push(B.xE.from(y[A]));return new AnimatedSprite(T)}get totalFrames(){return this._textures.length}get textures(){return this._textures}set textures(y){if(y[0]instanceof B.xE)this._textures=y,this._durations=null;else{this._textures=[],this._durations=[];for(let T=0;T<y.length;T++)this._textures.push(y[T].texture),this._durations.push(y[T].time)}this._previousFrame=null,this.gotoAndStop(0),this.updateTexture()}get currentFrame(){let y=Math.floor(this._currentTime)%this._textures.length;return y<0&&(y+=this._textures.length),y}set currentFrame(y){if(y<0||y>this.totalFrames-1)throw Error(`[AnimatedSprite]: Invalid frame index value ${y}, expected to be between 0 and totalFrames ${this.totalFrames}.`);let T=this.currentFrame;this._currentTime=y,T!==this.currentFrame&&this.updateTexture()}get playing(){return this._playing}get autoUpdate(){return this._autoUpdate}set autoUpdate(y){y!==this._autoUpdate&&(this._autoUpdate=y,!this._autoUpdate&&this._isConnectedToTicker?(B.vB.shared.remove(this.update,this),this._isConnectedToTicker=!1):this._autoUpdate&&!this._isConnectedToTicker&&this._playing&&(B.vB.shared.add(this.update,this),this._isConnectedToTicker=!0))}}},57157:function(y,T,A){"use strict";A.d(T,{o:function(){return TilingSprite}});var B=A(1396),F=A(67220);let U=new B.E9;let TilingSprite=class TilingSprite extends F.j{constructor(y,T=100,A=100){super(y),this.tileTransform=new B.wx,this._width=T,this._height=A,this.uvMatrix=this.texture.uvMatrix||new B.UX(y),this.pluginName="tilingSprite",this.uvRespectAnchor=!1}get clampMargin(){return this.uvMatrix.clampMargin}set clampMargin(y){this.uvMatrix.clampMargin=y,this.uvMatrix.update(!0)}get tileScale(){return this.tileTransform.scale}set tileScale(y){this.tileTransform.scale.copyFrom(y)}get tilePosition(){return this.tileTransform.position}set tilePosition(y){this.tileTransform.position.copyFrom(y)}_onTextureUpdate(){this.uvMatrix&&(this.uvMatrix.texture=this._texture),this._cachedTint=16777215}_render(y){let T=this._texture;T&&T.valid&&(this.tileTransform.updateLocalTransform(),this.uvMatrix.update(),y.batch.setObjectRenderer(y.plugins[this.pluginName]),y.plugins[this.pluginName].render(this))}_calculateBounds(){let y=-(this._width*this._anchor._x),T=-(this._height*this._anchor._y),A=this._width*(1-this._anchor._x),B=this._height*(1-this._anchor._y);this._bounds.addFrame(this.transform,y,T,A,B)}getLocalBounds(y){return 0===this.children.length?(this._bounds.minX=-(this._width*this._anchor._x),this._bounds.minY=-(this._height*this._anchor._y),this._bounds.maxX=this._width*(1-this._anchor._x),this._bounds.maxY=this._height*(1-this._anchor._y),y||(this._localBoundsRect||(this._localBoundsRect=new B.Ae),y=this._localBoundsRect),this._bounds.getRectangle(y)):super.getLocalBounds.call(this,y)}containsPoint(y){this.worldTransform.applyInverse(y,U);let T=this._width,A=this._height,B=-T*this.anchor._x;if(U.x>=B&&U.x<B+T){let y=-A*this.anchor._y;if(U.y>=y&&U.y<y+A)return!0}return!1}destroy(y){super.destroy(y),this.tileTransform=null,this.uvMatrix=null}static from(y,T){let A=y instanceof B.xE?y:B.xE.from(y,T);return new TilingSprite(A,T.width,T.height)}get width(){return this._width}set width(y){this._width=y}get height(){return this._height}set height(y){this._height=y}};var X="#version 100\n#define SHADER_NAME Tiling-Sprite-100\n\nprecision lowp float;\n\nattribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform mat3 uTransform;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;\n}\n";let Y=new B.y3;let TilingSpriteRenderer=class TilingSpriteRenderer extends B.bO{constructor(y){super(y),y.runners.contextChange.add(this),this.quad=new B.ud,this.state=B.ZM.for2d()}contextChange(){let y=this.renderer,T={globals:y.globalUniforms};this.simpleShader=B.ex.from(X,"#version 100\n#define SHADER_NAME Tiling-Sprite-Simple-100\n\nprecision lowp float;\n\nvarying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform vec4 uColor;\n\nvoid main(void)\n{\n    vec4 texSample = texture2D(uSampler, vTextureCoord);\n    gl_FragColor = texSample * uColor;\n}\n",T),this.shader=y.context.webGLVersion>1?B.ex.from("#version 300 es\n#define SHADER_NAME Tiling-Sprite-300\n\nprecision lowp float;\n\nin vec2 aVertexPosition;\nin vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform mat3 uTransform;\n\nout vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;\n}\n","#version 300 es\n#define SHADER_NAME Tiling-Sprite-100\n\nprecision lowp float;\n\nin vec2 vTextureCoord;\n\nout vec4 fragmentColor;\n\nuniform sampler2D uSampler;\nuniform vec4 uColor;\nuniform mat3 uMapCoord;\nuniform vec4 uClampFrame;\nuniform vec2 uClampOffset;\n\nvoid main(void)\n{\n    vec2 coord = vTextureCoord + ceil(uClampOffset - vTextureCoord);\n    coord = (uMapCoord * vec3(coord, 1.0)).xy;\n    vec2 unclamped = coord;\n    coord = clamp(coord, uClampFrame.xy, uClampFrame.zw);\n\n    vec4 texSample = texture(uSampler, coord, unclamped == coord ? 0.0f : -32.0f);// lod-bias very negative to force lod 0\n\n    fragmentColor = texSample * uColor;\n}\n",T):B.ex.from(X,"#version 100\n#ifdef GL_EXT_shader_texture_lod\n    #extension GL_EXT_shader_texture_lod : enable\n#endif\n#define SHADER_NAME Tiling-Sprite-100\n\nprecision lowp float;\n\nvarying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform vec4 uColor;\nuniform mat3 uMapCoord;\nuniform vec4 uClampFrame;\nuniform vec2 uClampOffset;\n\nvoid main(void)\n{\n    vec2 coord = vTextureCoord + ceil(uClampOffset - vTextureCoord);\n    coord = (uMapCoord * vec3(coord, 1.0)).xy;\n    vec2 unclamped = coord;\n    coord = clamp(coord, uClampFrame.xy, uClampFrame.zw);\n\n    #ifdef GL_EXT_shader_texture_lod\n        vec4 texSample = unclamped == coord\n            ? texture2D(uSampler, coord) \n            : texture2DLodEXT(uSampler, coord, 0);\n    #else\n        vec4 texSample = texture2D(uSampler, coord);\n    #endif\n\n    gl_FragColor = texSample * uColor;\n}\n",T)}render(y){let T=this.renderer,A=this.quad,F=A.vertices;F[0]=F[6]=-(y._width*y.anchor.x),F[1]=F[3]=-(y._height*y.anchor.y),F[2]=F[4]=y._width*(1-y.anchor.x),F[5]=F[7]=y._height*(1-y.anchor.y);let U=y.uvRespectAnchor?y.anchor.x:0,X=y.uvRespectAnchor?y.anchor.y:0;(F=A.uvs)[0]=F[6]=-U,F[1]=F[3]=-X,F[2]=F[4]=1-U,F[5]=F[7]=1-X,A.invalidate();let K=y._texture,q=K.baseTexture,Q=q.alphaMode>0,J=y.tileTransform.localTransform,Z=y.uvMatrix,ei=q.isPowerOfTwo&&K.frame.width===q.width&&K.frame.height===q.height;ei&&(q._glTextures[T.CONTEXT_UID]?ei=q.wrapMode!==B.Nt.CLAMP:q.wrapMode===B.Nt.CLAMP&&(q.wrapMode=B.Nt.REPEAT));let es=ei?this.simpleShader:this.shader,eh=K.width,eu=K.height,ed=y._width,ec=y._height;Y.set(J.a*eh/ed,J.b*eh/ec,J.c*eu/ed,J.d*eu/ec,J.tx/ed,J.ty/ec),Y.invert(),ei?Y.prepend(Z.mapCoord):(es.uniforms.uMapCoord=Z.mapCoord.toArray(!0),es.uniforms.uClampFrame=Z.uClampFrame,es.uniforms.uClampOffset=Z.uClampOffset),es.uniforms.uTransform=Y.toArray(!0),es.uniforms.uColor=B.Il.shared.setValue(y.tint).premultiply(y.worldAlpha,Q).toArray(es.uniforms.uColor),es.uniforms.translationMatrix=y.transform.worldTransform.toArray(!0),es.uniforms.uSampler=K,T.shader.bind(es),T.geometry.bind(A),this.state.blendMode=B.P6.correctBlendMode(y.blendMode,Q),T.state.set(this.state),T.geometry.draw(this.renderer.gl.TRIANGLES,6,0)}};TilingSpriteRenderer.extension={name:"tilingSprite",type:B.nw.RendererPlugin},B.Rw.add(TilingSpriteRenderer)},67220:function(y,T,A){"use strict";A.d(T,{j:function(){return Sprite}});var B=A(1396),F=A(68276);let U=new B.E9,X=new Uint16Array([0,1,2,0,2,3]);let Sprite=class Sprite extends F.W2{constructor(y){super(),this._anchor=new B.AB(this._onAnchorUpdate,this,y?y.defaultAnchor.x:0,y?y.defaultAnchor.y:0),this._texture=null,this._width=0,this._height=0,this._tintColor=new B.Il(16777215),this._tintRGB=null,this.tint=16777215,this.blendMode=B.T$.NORMAL,this._cachedTint=16777215,this.uvs=null,this.texture=y||B.xE.EMPTY,this.vertexData=new Float32Array(8),this.vertexTrimmedData=null,this._transformID=-1,this._textureID=-1,this._transformTrimmedID=-1,this._textureTrimmedID=-1,this.indices=X,this.pluginName="batch",this.isSprite=!0,this._roundPixels=B.Xd.ROUND_PIXELS}_onTextureUpdate(){this._textureID=-1,this._textureTrimmedID=-1,this._cachedTint=16777215,this._width&&(this.scale.x=B.P6.sign(this.scale.x)*this._width/this._texture.orig.width),this._height&&(this.scale.y=B.P6.sign(this.scale.y)*this._height/this._texture.orig.height)}_onAnchorUpdate(){this._transformID=-1,this._transformTrimmedID=-1}calculateVertices(){let y=this._texture;if(this._transformID===this.transform._worldID&&this._textureID===y._updateID)return;this._textureID!==y._updateID&&(this.uvs=this._texture._uvs.uvsFloat32),this._transformID=this.transform._worldID,this._textureID=y._updateID;let T=this.transform.worldTransform,A=T.a,F=T.b,U=T.c,X=T.d,Y=T.tx,K=T.ty,q=this.vertexData,Q=y.trim,J=y.orig,Z=this._anchor,ei=0,es=0,eh=0,eu=0;if(Q?(ei=(es=Q.x-Z._x*J.width)+Q.width,eh=(eu=Q.y-Z._y*J.height)+Q.height):(ei=(es=-Z._x*J.width)+J.width,eh=(eu=-Z._y*J.height)+J.height),q[0]=A*es+U*eu+Y,q[1]=X*eu+F*es+K,q[2]=A*ei+U*eu+Y,q[3]=X*eu+F*ei+K,q[4]=A*ei+U*eh+Y,q[5]=X*eh+F*ei+K,q[6]=A*es+U*eh+Y,q[7]=X*eh+F*es+K,this._roundPixels){let y=B.Xd.RESOLUTION;for(let T=0;T<q.length;++T)q[T]=Math.round(q[T]*y)/y}}calculateTrimmedVertices(){if(this.vertexTrimmedData){if(this._transformTrimmedID===this.transform._worldID&&this._textureTrimmedID===this._texture._updateID)return}else this.vertexTrimmedData=new Float32Array(8);this._transformTrimmedID=this.transform._worldID,this._textureTrimmedID=this._texture._updateID;let y=this._texture,T=this.vertexTrimmedData,A=y.orig,B=this._anchor,F=this.transform.worldTransform,U=F.a,X=F.b,Y=F.c,K=F.d,q=F.tx,Q=F.ty,J=-B._x*A.width,Z=J+A.width,ei=-B._y*A.height,es=ei+A.height;T[0]=U*J+Y*ei+q,T[1]=K*ei+X*J+Q,T[2]=U*Z+Y*ei+q,T[3]=K*ei+X*Z+Q,T[4]=U*Z+Y*es+q,T[5]=K*es+X*Z+Q,T[6]=U*J+Y*es+q,T[7]=K*es+X*J+Q}_render(y){this.calculateVertices(),y.batch.setObjectRenderer(y.plugins[this.pluginName]),y.plugins[this.pluginName].render(this)}_calculateBounds(){let y=this._texture.trim,T=this._texture.orig;y&&(y.width!==T.width||y.height!==T.height)?(this.calculateTrimmedVertices(),this._bounds.addQuad(this.vertexTrimmedData)):(this.calculateVertices(),this._bounds.addQuad(this.vertexData))}getLocalBounds(y){return 0===this.children.length?(this._localBounds||(this._localBounds=new F.YZ),this._localBounds.minX=-(this._texture.orig.width*this._anchor._x),this._localBounds.minY=-(this._texture.orig.height*this._anchor._y),this._localBounds.maxX=this._texture.orig.width*(1-this._anchor._x),this._localBounds.maxY=this._texture.orig.height*(1-this._anchor._y),y||(this._localBoundsRect||(this._localBoundsRect=new B.Ae),y=this._localBoundsRect),this._localBounds.getRectangle(y)):super.getLocalBounds.call(this,y)}containsPoint(y){this.worldTransform.applyInverse(y,U);let T=this._texture.orig.width,A=this._texture.orig.height,B=-T*this.anchor.x,F=0;return U.x>=B&&U.x<B+T&&(F=-A*this.anchor.y,U.y>=F&&U.y<F+A)}destroy(y){super.destroy(y),this._texture.off("update",this._onTextureUpdate,this),this._anchor=null;let T="boolean"==typeof y?y:y?.texture;if(T){let T="boolean"==typeof y?y:y?.baseTexture;this._texture.destroy(!!T)}this._texture=null}static from(y,T){let A=y instanceof B.xE?y:B.xE.from(y,T);return new Sprite(A)}set roundPixels(y){this._roundPixels!==y&&(this._transformID=-1),this._roundPixels=y}get roundPixels(){return this._roundPixels}get width(){return Math.abs(this.scale.x)*this._texture.orig.width}set width(y){let T=B.P6.sign(this.scale.x)||1;this.scale.x=T*y/this._texture.orig.width,this._width=y}get height(){return Math.abs(this.scale.y)*this._texture.orig.height}set height(y){let T=B.P6.sign(this.scale.y)||1;this.scale.y=T*y/this._texture.orig.height,this._height=y}get anchor(){return this._anchor}set anchor(y){this._anchor.copyFrom(y)}get tint(){return this._tintColor.value}set tint(y){this._tintColor.setValue(y),this._tintRGB=this._tintColor.toLittleEndianNumber()}get tintValue(){return this._tintColor.toNumber()}get texture(){return this._texture}set texture(y){this._texture!==y&&(this._texture&&this._texture.off("update",this._onTextureUpdate,this),this._texture=y||B.xE.EMPTY,this._cachedTint=16777215,this._textureID=-1,this._textureTrimmedID=-1,y&&(y.baseTexture.valid?this._onTextureUpdate():y.once("update",this._onTextureUpdate,this)))}}},73445:function(y,T,A){"use strict";A.d(T,{Xz:function(){return ei}});var B=A(1396),F=A(53984);let BitmapFontData=class BitmapFontData{constructor(){this.info=[],this.common=[],this.page=[],this.char=[],this.kerning=[],this.distanceField=[]}};let TextFormat=class TextFormat{static test(y){return"string"==typeof y&&y.startsWith("info face=")}static parse(y){let T=y.match(/^[a-z]+\s+.+$/gm),A={info:[],common:[],page:[],char:[],chars:[],kerning:[],kernings:[],distanceField:[]};for(let y in T){let B=T[y].match(/^[a-z]+/gm)[0],F=T[y].match(/[a-zA-Z]+=([^\s"']+|"([^"]*)")/gm),U={};for(let y in F){let T=F[y].split("="),A=T[0],B=T[1].replace(/"/gm,""),X=parseFloat(B),Y=isNaN(X)?B:X;U[A]=Y}A[B].push(U)}let B=new BitmapFontData;return A.info.forEach(y=>B.info.push({face:y.face,size:parseInt(y.size,10)})),A.common.forEach(y=>B.common.push({lineHeight:parseInt(y.lineHeight,10)})),A.page.forEach(y=>B.page.push({id:parseInt(y.id,10),file:y.file})),A.char.forEach(y=>B.char.push({id:parseInt(y.id,10),page:parseInt(y.page,10),x:parseInt(y.x,10),y:parseInt(y.y,10),width:parseInt(y.width,10),height:parseInt(y.height,10),xoffset:parseInt(y.xoffset,10),yoffset:parseInt(y.yoffset,10),xadvance:parseInt(y.xadvance,10)})),A.kerning.forEach(y=>B.kerning.push({first:parseInt(y.first,10),second:parseInt(y.second,10),amount:parseInt(y.amount,10)})),A.distanceField.forEach(y=>B.distanceField.push({distanceRange:parseInt(y.distanceRange,10),fieldType:y.fieldType})),B}};let XMLFormat=class XMLFormat{static test(y){return"getElementsByTagName"in y&&y.getElementsByTagName("page").length&&null!==y.getElementsByTagName("info")[0].getAttribute("face")}static parse(y){let T=new BitmapFontData,A=y.getElementsByTagName("info"),B=y.getElementsByTagName("common"),F=y.getElementsByTagName("page"),U=y.getElementsByTagName("char"),X=y.getElementsByTagName("kerning"),Y=y.getElementsByTagName("distanceField");for(let y=0;y<A.length;y++)T.info.push({face:A[y].getAttribute("face"),size:parseInt(A[y].getAttribute("size"),10)});for(let y=0;y<B.length;y++)T.common.push({lineHeight:parseInt(B[y].getAttribute("lineHeight"),10)});for(let y=0;y<F.length;y++)T.page.push({id:parseInt(F[y].getAttribute("id"),10)||0,file:F[y].getAttribute("file")});for(let y=0;y<U.length;y++){let A=U[y];T.char.push({id:parseInt(A.getAttribute("id"),10),page:parseInt(A.getAttribute("page"),10)||0,x:parseInt(A.getAttribute("x"),10),y:parseInt(A.getAttribute("y"),10),width:parseInt(A.getAttribute("width"),10),height:parseInt(A.getAttribute("height"),10),xoffset:parseInt(A.getAttribute("xoffset"),10),yoffset:parseInt(A.getAttribute("yoffset"),10),xadvance:parseInt(A.getAttribute("xadvance"),10)})}for(let y=0;y<X.length;y++)T.kerning.push({first:parseInt(X[y].getAttribute("first"),10),second:parseInt(X[y].getAttribute("second"),10),amount:parseInt(X[y].getAttribute("amount"),10)});for(let y=0;y<Y.length;y++)T.distanceField.push({fieldType:Y[y].getAttribute("fieldType"),distanceRange:parseInt(Y[y].getAttribute("distanceRange"),10)});return T}};let XMLStringFormat=class XMLStringFormat{static test(y){return!!("string"==typeof y&&y.includes("<font>"))&&XMLFormat.test(B.Xd.ADAPTER.parseXML(y))}static parse(y){return XMLFormat.parse(B.Xd.ADAPTER.parseXML(y))}};let U=[TextFormat,XMLFormat,XMLStringFormat];function splitTextToCharacters(y){return Array.from?Array.from(y):y.split("")}function extractCharCode(y){return y.codePointAt?y.codePointAt(0):y.charCodeAt(0)}let X=class{constructor(y,T,A){let[F]=y.info,[U]=y.common,[X]=y.page,[Y]=y.distanceField,K=B.P6.getResolutionOfUrl(X.file),q={};this._ownsTextures=A,this.font=F.face,this.size=F.size,this.lineHeight=U.lineHeight/K,this.chars={},this.pageTextures=q;for(let A=0;A<y.page.length;A++){let{id:F,file:U}=y.page[A];q[F]=T instanceof Array?T[A]:T[U],Y?.fieldType&&"none"!==Y.fieldType&&(q[F].baseTexture.alphaMode=B.iw.NO_PREMULTIPLIED_ALPHA,q[F].baseTexture.mipmap=B.KI.OFF)}for(let T=0;T<y.char.length;T++){let{id:A,page:F}=y.char[T],{x:U,y:X,width:Y,height:Q,xoffset:J,yoffset:Z,xadvance:ei}=y.char[T];U/=K,X/=K,Y/=K,Q/=K,J/=K,Z/=K,ei/=K;let es=new B.Ae(U+q[F].frame.x/K,X+q[F].frame.y/K,Y,Q);this.chars[A]={xOffset:J,yOffset:Z,xAdvance:ei,kerning:{},texture:new B.xE(q[F].baseTexture,es),page:F}}for(let T=0;T<y.kerning.length;T++){let{first:A,second:B,amount:F}=y.kerning[T];A/=K,B/=K,F/=K,this.chars[B]&&(this.chars[B].kerning[A]=F)}this.distanceFieldRange=Y?.distanceRange,this.distanceFieldType=Y?.fieldType?.toLowerCase()??"none"}destroy(){for(let y in this.chars)this.chars[y].texture.destroy(),this.chars[y].texture=null;for(let y in this.pageTextures)this._ownsTextures&&this.pageTextures[y].destroy(!0),this.pageTextures[y]=null;this.chars=null,this.pageTextures=null}static install(y,T,A){let F;if(y instanceof BitmapFontData)F=y;else{let T=function(y){for(let T=0;T<U.length;T++)if(U[T].test(y))return U[T];return null}(y);if(!T)throw Error("Unrecognized data format for font.");F=T.parse(y)}T instanceof B.xE&&(T=[T]);let Y=new X(F,T,A);return X.available[Y.font]=Y,Y}static uninstall(y){let T=X.available[y];if(!T)throw Error(`No font found named '${y}'`);T.destroy(),delete X.available[y]}static from(y,T,A){let U,Y,K;if(!y)throw Error("[BitmapFont] Property `name` is required.");let{chars:q,padding:Q,resolution:J,textureWidth:Z,textureHeight:ei,...es}=Object.assign({},X.defaultOptions,A),eh=function(y){"string"==typeof y&&(y=[y]);let T=[];for(let A=0,B=y.length;A<B;A++){let B=y[A];if(Array.isArray(B)){if(2!==B.length)throw Error(`[BitmapFont]: Invalid character range length, expecting 2 got ${B.length}.`);let y=B[0].charCodeAt(0),A=B[1].charCodeAt(0);if(A<y)throw Error("[BitmapFont]: Invalid character range.");for(let B=y;B<=A;B++)T.push(String.fromCharCode(B))}else T.push(...splitTextToCharacters(B))}if(0===T.length)throw Error("[BitmapFont]: Empty set when resolving characters.");return T}(q),eu=T instanceof F.pn?T:new F.pn(T),ed=new BitmapFontData;ed.info[0]={face:eu.fontFamily,size:eu.fontSize},ed.common[0]={lineHeight:eu.fontSize};let ec=0,ef=0,ep=0,em=[],eg=[];for(let y=0;y<eh.length;y++){U||((U=B.Xd.ADAPTER.createCanvas()).width=Z,U.height=ei,Y=U.getContext("2d"),K=new B.VL(U,{resolution:J,...es}),em.push(K),eg.push(new B.xE(K)),ed.page.push({id:eg.length-1,file:""}));let T=eh[y],A=F._A.measureText(T,eu,!1,U),X=A.width,q=Math.ceil(A.height),e_=Math.ceil(("italic"===eu.fontStyle?2:1)*X);if(ef>=ei-q*J){if(0===ef)throw Error(`[BitmapFont] textureHeight ${ei}px is too small (fontFamily: '${eu.fontFamily}', fontSize: ${eu.fontSize}px, char: '${T}')`);--y,U=null,Y=null,K=null,ef=0,ec=0,ep=0;continue}if(ep=Math.max(q+A.fontProperties.descent,ep),e_*J+ec>=Z){if(0===ec)throw Error(`[BitmapFont] textureWidth ${Z}px is too small (fontFamily: '${eu.fontFamily}', fontSize: ${eu.fontSize}px, char: '${T}')`);--y,ef+=ep*J,ef=Math.ceil(ef),ec=0,ep=0;continue}!function(y,T,A,U,X,Y,K){let q=A.text,Q=A.fontProperties;T.translate(U,X),T.scale(Y,Y);let J=K.strokeThickness/2,Z=-(K.strokeThickness/2);if(T.font=K.toFontString(),T.lineWidth=K.strokeThickness,T.textBaseline=K.textBaseline,T.lineJoin=K.lineJoin,T.miterLimit=K.miterLimit,T.fillStyle=function(y,T,A,B,U,X){let Y;let K=A.fill;if(!Array.isArray(K))return K;if(1===K.length)return K[0];let q=A.dropShadow?A.dropShadowDistance:0,Q=A.padding||0,J=y.width/B-q-2*Q,Z=y.height/B-q-2*Q,ei=K.slice(),es=A.fillGradientStops.slice();if(!es.length){let y=ei.length+1;for(let T=1;T<y;++T)es.push(T/y)}if(ei.unshift(K[0]),es.unshift(0),ei.push(K[K.length-1]),es.push(1),A.fillGradientType===F.M_.LINEAR_VERTICAL){Y=T.createLinearGradient(J/2,Q,J/2,Z+Q);let y=0,B=X.fontProperties.fontSize+A.strokeThickness,F=B/Z;for(let T=0;T<U.length;T++){let A=X.lineHeight*T;for(let T=0;T<ei.length;T++){let B=0;B="number"==typeof es[T]?es[T]:T/ei.length;let U=A/Z+B*F,X=Math.max(y,U);X=Math.min(X,1),Y.addColorStop(X,ei[T]),y=X}}}else{Y=T.createLinearGradient(Q,Z/2,J+Q,Z/2);let y=ei.length+1,A=1;for(let T=0;T<ei.length;T++){let B;B="number"==typeof es[T]?es[T]:A/y,Y.addColorStop(B,ei[T]),A++}}return Y}(y,T,K,Y,[q],A),T.strokeStyle=K.stroke,K.dropShadow){let y=K.dropShadowColor,A=K.dropShadowBlur*Y,F=K.dropShadowDistance*Y;T.shadowColor=B.Il.shared.setValue(y).setAlpha(K.dropShadowAlpha).toRgbaString(),T.shadowBlur=A,T.shadowOffsetX=Math.cos(K.dropShadowAngle)*F,T.shadowOffsetY=Math.sin(K.dropShadowAngle)*F}else T.shadowColor="black",T.shadowBlur=0,T.shadowOffsetX=0,T.shadowOffsetY=0;K.stroke&&K.strokeThickness&&T.strokeText(q,J,Z+A.lineHeight-Q.descent),K.fill&&T.fillText(q,J,Z+A.lineHeight-Q.descent),T.setTransform(1,0,0,1,0,0),T.fillStyle="rgba(0, 0, 0, 0)"}(U,Y,A,ec,ef,J,eu);let ev=extractCharCode(A.text);ed.char.push({id:ev,page:eg.length-1,x:ec/J,y:ef/J,width:e_,height:q,xoffset:0,yoffset:0,xadvance:X-(eu.dropShadow?eu.dropShadowDistance:0)-(eu.stroke?eu.strokeThickness:0)}),ec+=(e_+2*Q)*J,ec=Math.ceil(ec)}for(let y=0,T=eh.length;y<T;y++){let A=eh[y];for(let y=0;y<T;y++){let T=eh[y],B=Y.measureText(A).width,F=Y.measureText(T).width,U=Y.measureText(A+T).width,X=U-(B+F);X&&ed.kerning.push({first:extractCharCode(A),second:extractCharCode(T),amount:X})}}let e_=new X(ed,eg,!0);return void 0!==X.available[y]&&X.uninstall(y),X.available[y]=e_,e_}};X.ALPHA=[["a","z"],["A","Z"]," "],X.NUMERIC=[["0","9"]],X.ALPHANUMERIC=[["a","z"],["A","Z"],["0","9"]," "],X.ASCII=[[" ","~"]],X.defaultOptions={resolution:1,textureWidth:512,textureHeight:512,padding:4,chars:X.ALPHANUMERIC},X.available={};var Y=A(68276),K=A(67778);let q=[],Q=[],J=[],Z=class extends Y.W2{constructor(y,T={}){super();let{align:A,tint:F,maxWidth:U,letterSpacing:Y,fontName:K,fontSize:q}=Object.assign({},Z.styleDefaults,T);if(!X.available[K])throw Error(`Missing BitmapFont "${K}"`);this._activePagesMeshData=[],this._textWidth=0,this._textHeight=0,this._align=A,this._tintColor=new B.Il(F),this._font=void 0,this._fontName=K,this._fontSize=q,this.text=y,this._maxWidth=U,this._maxLineHeight=0,this._letterSpacing=Y,this._anchor=new B.AB(()=>{this.dirty=!0},this,0,0),this._roundPixels=B.Xd.ROUND_PIXELS,this.dirty=!0,this._resolution=B.Xd.RESOLUTION,this._autoResolution=!0,this._textureCache={}}updateText(){let y=X.available[this._fontName],T=this.fontSize,A=T/y.size,F=new B.E9,U=[],Y=[],Z=[],ei=this._text.replace(/(?:\r\n|\r)/g,"\n")||" ",es=splitTextToCharacters(ei),eh=this._maxWidth*y.size/T,eu="none"===y.distanceFieldType?q:Q,ed=null,ec=0,ef=0,ep=0,em=-1,eg=0,e_=0,ev=0,ey=0;for(let T=0;T<es.length;T++){let A=es[T],X=extractCharCode(A);if(/(?:\s)/.test(A)&&(em=T,eg=ec,ey++),"\r"===A||"\n"===A){Y.push(ec),Z.push(-1),ef=Math.max(ef,ec),++ep,++e_,F.x=0,F.y+=y.lineHeight,ed=null,ey=0;continue}let K=y.chars[X];if(!K)continue;ed&&K.kerning[ed]&&(F.x+=K.kerning[ed]);let q=J.pop()||{texture:B.xE.EMPTY,line:0,charCode:0,prevSpaces:0,position:new B.E9};q.texture=K.texture,q.line=ep,q.charCode=X,q.position.x=Math.round(F.x+K.xOffset+this._letterSpacing/2),q.position.y=Math.round(F.y+K.yOffset),q.prevSpaces=ey,U.push(q),ec=q.position.x+Math.max(K.xAdvance-K.xOffset,K.texture.orig.width),F.x+=K.xAdvance+this._letterSpacing,ev=Math.max(ev,K.yOffset+K.texture.height),ed=X,-1!==em&&eh>0&&F.x>eh&&(++e_,B.P6.removeItems(U,1+em-e_,1+T-em),T=em,em=-1,Y.push(eg),Z.push(U.length>0?U[U.length-1].prevSpaces:0),ef=Math.max(ef,eg),ep++,F.x=0,F.y+=y.lineHeight,ed=null,ey=0)}let ex=es[es.length-1];"\r"!==ex&&"\n"!==ex&&(/(?:\s)/.test(ex)&&(ec=eg),Y.push(ec),ef=Math.max(ef,ec),Z.push(-1));let eb=[];for(let y=0;y<=ep;y++){let T=0;"right"===this._align?T=ef-Y[y]:"center"===this._align?T=(ef-Y[y])/2:"justify"===this._align&&(T=Z[y]<0?0:(ef-Y[y])/Z[y]),eb.push(T)}let eT=U.length,eE={},eS=[],eA=this._activePagesMeshData;eu.push(...eA);for(let T=0;T<eT;T++){let A=U[T].texture,F=A.baseTexture.uid;if(!eE[F]){let T=eu.pop();if(!T){let A,F;let U=new K.xc;"none"===y.distanceFieldType?(A=new K.rY(B.xE.EMPTY),F=B.T$.NORMAL):(A=new K.rY(B.xE.EMPTY,{program:B.$r.from("// Mesh material default fragment\r\nattribute vec2 aVertexPosition;\r\nattribute vec2 aTextureCoord;\r\n\r\nuniform mat3 projectionMatrix;\r\nuniform mat3 translationMatrix;\r\nuniform mat3 uTextureMatrix;\r\n\r\nvarying vec2 vTextureCoord;\r\n\r\nvoid main(void)\r\n{\r\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\r\n\r\n    vTextureCoord = (uTextureMatrix * vec3(aTextureCoord, 1.0)).xy;\r\n}\r\n","// Pixi texture info\r\nvarying vec2 vTextureCoord;\r\nuniform sampler2D uSampler;\r\n\r\n// Tint\r\nuniform vec4 uColor;\r\n\r\n// on 2D applications fwidth is screenScale / glyphAtlasScale * distanceFieldRange\r\nuniform float uFWidth;\r\n\r\nvoid main(void) {\r\n\r\n  // To stack MSDF and SDF we need a non-pre-multiplied-alpha texture.\r\n  vec4 texColor = texture2D(uSampler, vTextureCoord);\r\n\r\n  // MSDF\r\n  float median = texColor.r + texColor.g + texColor.b -\r\n                  min(texColor.r, min(texColor.g, texColor.b)) -\r\n                  max(texColor.r, max(texColor.g, texColor.b));\r\n  // SDF\r\n  median = min(median, texColor.a);\r\n\r\n  float screenPxDistance = uFWidth * (median - 0.5);\r\n  float alpha = clamp(screenPxDistance + 0.5, 0.0, 1.0);\r\n  if (median < 0.01) {\r\n    alpha = 0.0;\r\n  } else if (median > 0.99) {\r\n    alpha = 1.0;\r\n  }\r\n\r\n  // Gamma correction for coverage-like alpha\r\n  float luma = dot(uColor.rgb, vec3(0.299, 0.587, 0.114));\r\n  float gamma = mix(1.0, 1.0 / 2.2, luma);\r\n  float coverage = pow(uColor.a * alpha, gamma);  \r\n\r\n  // NPM Textures, NPM outputs\r\n  gl_FragColor = vec4(uColor.rgb, coverage);\r\n}\r\n"),uniforms:{uFWidth:0}}),F=B.T$.NORMAL_NPM);let X=new K.Kj(U,A);X.blendMode=F,T={index:0,indexCount:0,vertexCount:0,uvsCount:0,total:0,mesh:X,vertices:null,uvs:null,indices:null}}T.index=0,T.indexCount=0,T.vertexCount=0,T.uvsCount=0,T.total=0;let{_textureCache:U}=this;U[F]=U[F]||new B.xE(A.baseTexture),T.mesh.texture=U[F],T.mesh.tint=this._tintColor.value,eS.push(T),eE[F]=T}eE[F].total++}for(let y=0;y<eA.length;y++)eS.includes(eA[y])||this.removeChild(eA[y].mesh);for(let y=0;y<eS.length;y++)eS[y].mesh.parent!==this&&this.addChild(eS[y].mesh);for(let y in this._activePagesMeshData=eS,eE){let T=eE[y],A=T.total;if(!(T.indices?.length>6*A)||T.vertices.length<2*K.Kj.BATCHABLE_SIZE)T.vertices=new Float32Array(8*A),T.uvs=new Float32Array(8*A),T.indices=new Uint16Array(6*A);else{let y=T.total,A=T.vertices;for(let T=8*y;T<A.length;T++)A[T]=0}T.mesh.size=6*A}for(let y=0;y<eT;y++){let T=U[y],B=T.position.x+eb[T.line]*("justify"===this._align?T.prevSpaces:1);this._roundPixels&&(B=Math.round(B));let F=B*A,X=T.position.y*A,Y=T.texture,K=eE[Y.baseTexture.uid],q=Y.frame,Q=Y._uvs,J=K.index++;K.indices[6*J+0]=0+4*J,K.indices[6*J+1]=1+4*J,K.indices[6*J+2]=2+4*J,K.indices[6*J+3]=0+4*J,K.indices[6*J+4]=2+4*J,K.indices[6*J+5]=3+4*J,K.vertices[8*J+0]=F,K.vertices[8*J+1]=X,K.vertices[8*J+2]=F+q.width*A,K.vertices[8*J+3]=X,K.vertices[8*J+4]=F+q.width*A,K.vertices[8*J+5]=X+q.height*A,K.vertices[8*J+6]=F,K.vertices[8*J+7]=X+q.height*A,K.uvs[8*J+0]=Q.x0,K.uvs[8*J+1]=Q.y0,K.uvs[8*J+2]=Q.x1,K.uvs[8*J+3]=Q.y1,K.uvs[8*J+4]=Q.x2,K.uvs[8*J+5]=Q.y2,K.uvs[8*J+6]=Q.x3,K.uvs[8*J+7]=Q.y3}for(let T in this._textWidth=ef*A,this._textHeight=(F.y+y.lineHeight)*A,eE){let y=eE[T];if(0!==this.anchor.x||0!==this.anchor.y){let T=0,A=this._textWidth*this.anchor.x,B=this._textHeight*this.anchor.y;for(let F=0;F<y.total;F++)y.vertices[T++]-=A,y.vertices[T++]-=B,y.vertices[T++]-=A,y.vertices[T++]-=B,y.vertices[T++]-=A,y.vertices[T++]-=B,y.vertices[T++]-=A,y.vertices[T++]-=B}this._maxLineHeight=ev*A;let B=y.mesh.geometry.getBuffer("aVertexPosition"),F=y.mesh.geometry.getBuffer("aTextureCoord"),U=y.mesh.geometry.getIndex();B.data=y.vertices,F.data=y.uvs,U.data=y.indices,B.update(),F.update(),U.update()}for(let y=0;y<U.length;y++)J.push(U[y]);this._font=y,this.dirty=!1}updateTransform(){this.validate(),this.containerUpdateTransform()}_render(y){this._autoResolution&&this._resolution!==y.resolution&&(this._resolution=y.resolution,this.dirty=!0);let{distanceFieldRange:T,distanceFieldType:A,size:B}=X.available[this._fontName];if("none"!==A){let{a:A,b:F,c:U,d:X}=this.worldTransform,Y=(Math.abs(Math.sqrt(A*A+F*F))+Math.abs(Math.sqrt(U*U+X*X)))/2,K=this.fontSize/B,q=y._view.resolution;for(let y of this._activePagesMeshData)y.mesh.shader.uniforms.uFWidth=Y*T*K*q}super._render(y)}getLocalBounds(){return this.validate(),super.getLocalBounds()}validate(){let y=X.available[this._fontName];if(!y)throw Error(`Missing BitmapFont "${this._fontName}"`);this._font!==y&&(this.dirty=!0),this.dirty&&this.updateText()}get tint(){return this._tintColor.value}set tint(y){if(this.tint!==y){this._tintColor.setValue(y);for(let T=0;T<this._activePagesMeshData.length;T++)this._activePagesMeshData[T].mesh.tint=y}}get align(){return this._align}set align(y){this._align!==y&&(this._align=y,this.dirty=!0)}get fontName(){return this._fontName}set fontName(y){if(!X.available[y])throw Error(`Missing BitmapFont "${y}"`);this._fontName!==y&&(this._fontName=y,this.dirty=!0)}get fontSize(){return this._fontSize??X.available[this._fontName].size}set fontSize(y){this._fontSize!==y&&(this._fontSize=y,this.dirty=!0)}get anchor(){return this._anchor}set anchor(y){"number"==typeof y?this._anchor.set(y):this._anchor.copyFrom(y)}get text(){return this._text}set text(y){y=String(null==y?"":y),this._text!==y&&(this._text=y,this.dirty=!0)}get maxWidth(){return this._maxWidth}set maxWidth(y){this._maxWidth!==y&&(this._maxWidth=y,this.dirty=!0)}get maxLineHeight(){return this.validate(),this._maxLineHeight}get textWidth(){return this.validate(),this._textWidth}get letterSpacing(){return this._letterSpacing}set letterSpacing(y){this._letterSpacing!==y&&(this._letterSpacing=y,this.dirty=!0)}get roundPixels(){return this._roundPixels}set roundPixels(y){y!==this._roundPixels&&(this._roundPixels=y,this.dirty=!0)}get textHeight(){return this.validate(),this._textHeight}get resolution(){return this._resolution}set resolution(y){this._autoResolution=!1,this._resolution!==y&&(this._resolution=y,this.dirty=!0)}destroy(y){let{_textureCache:T}=this,A=X.available[this._fontName],F="none"===A.distanceFieldType?q:Q;for(let y of(F.push(...this._activePagesMeshData),this._activePagesMeshData))this.removeChild(y.mesh);for(let y in this._activePagesMeshData=[],F.filter(y=>T[y.mesh.texture.baseTexture.uid]).forEach(y=>{y.mesh.texture=B.xE.EMPTY}),T){let A=T[y];A.destroy(),delete T[y]}this._font=null,this._tintColor=null,this._textureCache=null,super.destroy(y)}},ei=Z;ei.styleDefaults={align:"left",tint:16777215,maxWidth:0,letterSpacing:0};var es=A(61572);let eh=[".xml",".fnt"],eu={extension:{type:B.nw.LoadParser,priority:es.Q2.Normal},name:"loadBitmapFont",test:y=>eh.includes(B.P6.path.extname(y).toLowerCase()),testParse:async y=>TextFormat.test(y)||XMLStringFormat.test(y),async parse(y,T,A){let F=TextFormat.test(y)?TextFormat.parse(y):XMLStringFormat.parse(y),{src:U}=T,{page:Y}=F,K=[];for(let y=0;y<Y.length;++y){let T=Y[y].file,A=B.P6.path.join(B.P6.path.dirname(U),T);A=(0,es.uz)(A,U),K.push(A)}let q=await A.load(K),Q=K.map(y=>q[y]);return X.install(F,Q,!0)},async load(y,T){let A=await B.Xd.ADAPTER.fetch(y);return A.text()},unload(y){y.destroy()}};B.Rw.add(eu)},53984:function(y,T,A){"use strict";A.d(T,{M_:function(){return F},xv:function(){return eh},_A:function(){return q},pn:function(){return Z}});var B,F=((B=F||{})[B.LINEAR_VERTICAL=0]="LINEAR_VERTICAL",B[B.LINEAR_HORIZONTAL=1]="LINEAR_HORIZONTAL",B),U=A(1396),X=A(67220);let Y={willReadFrequently:!0},K=class{static get experimentalLetterSpacingSupported(){let y=K._experimentalLetterSpacingSupported;if(void 0!==y){let T=U.Xd.ADAPTER.getCanvasRenderingContext2D().prototype;y=K._experimentalLetterSpacingSupported="letterSpacing"in T||"textLetterSpacing"in T}return y}constructor(y,T,A,B,F,U,X,Y,K){this.text=y,this.style=T,this.width=A,this.height=B,this.lines=F,this.lineWidths=U,this.lineHeight=X,this.maxLineWidth=Y,this.fontProperties=K}static measureText(y,T,A,B=K._canvas){A=null==A?T.wordWrap:A;let F=T.toFontString(),U=K.measureFont(F);0===U.fontSize&&(U.fontSize=T.fontSize,U.ascent=T.fontSize);let X=B.getContext("2d",Y);X.font=F;let q=A?K.wordWrap(y,T,B):y,Q=q.split(/(?:\r\n|\r|\n)/),J=Array(Q.length),Z=0;for(let y=0;y<Q.length;y++){let A=K._measureText(Q[y],T.letterSpacing,X);J[y]=A,Z=Math.max(Z,A)}let ei=Z+T.strokeThickness;T.dropShadow&&(ei+=T.dropShadowDistance);let es=T.lineHeight||U.fontSize+T.strokeThickness,eh=Math.max(es,U.fontSize+2*T.strokeThickness)+(Q.length-1)*(es+T.leading);return T.dropShadow&&(eh+=T.dropShadowDistance),new K(y,T,ei,eh,Q,J,es+T.leading,Z,U)}static _measureText(y,T,A){let B=!1;K.experimentalLetterSpacingSupported&&(K.experimentalLetterSpacing?(A.letterSpacing=`${T}px`,A.textLetterSpacing=`${T}px`,B=!0):(A.letterSpacing="0px",A.textLetterSpacing="0px"));let F=A.measureText(y).width;return F>0&&(B?F-=T:F+=(K.graphemeSegmenter(y).length-1)*T),F}static wordWrap(y,T,A=K._canvas){let B=A.getContext("2d",Y),F=0,U="",X="",q=Object.create(null),{letterSpacing:Q,whiteSpace:J}=T,Z=K.collapseSpaces(J),ei=K.collapseNewlines(J),es=!Z,eh=T.wordWrapWidth+Q,eu=K.tokenize(y);for(let y=0;y<eu.length;y++){let A=eu[y];if(K.isNewline(A)){if(!ei){X+=K.addLine(U),es=!Z,U="",F=0;continue}A=" "}if(Z){let y=K.isBreakingSpace(A),T=K.isBreakingSpace(U[U.length-1]);if(y&&T)continue}let Y=K.getFromCache(A,Q,q,B);if(Y>eh){if(""!==U&&(X+=K.addLine(U),U="",F=0),K.canBreakWords(A,T.breakWords)){let y=K.wordWrapSplit(A);for(let Y=0;Y<y.length;Y++){let J=y[Y],Z=J,ei=1;for(;y[Y+ei];){let B=y[Y+ei];if(K.canBreakChars(Z,B,A,Y,T.breakWords))break;J+=B,Z=B,ei++}Y+=ei-1;let eu=K.getFromCache(J,Q,q,B);eu+F>eh&&(X+=K.addLine(U),es=!1,U="",F=0),U+=J,F+=eu}}else{U.length>0&&(X+=K.addLine(U),U="",F=0);let T=y===eu.length-1;X+=K.addLine(A,!T),es=!1,U="",F=0}}else Y+F>eh&&(es=!1,X+=K.addLine(U),U="",F=0),(U.length>0||!K.isBreakingSpace(A)||es)&&(U+=A,F+=Y)}return X+K.addLine(U,!1)}static addLine(y,T=!0){return y=K.trimRight(y),y=T?`${y}
`:y}static getFromCache(y,T,A,B){let F=A[y];return"number"!=typeof F&&(F=K._measureText(y,T,B)+T,A[y]=F),F}static collapseSpaces(y){return"normal"===y||"pre-line"===y}static collapseNewlines(y){return"normal"===y}static trimRight(y){if("string"!=typeof y)return"";for(let T=y.length-1;T>=0;T--){let A=y[T];if(!K.isBreakingSpace(A))break;y=y.slice(0,-1)}return y}static isNewline(y){return"string"==typeof y&&K._newlines.includes(y.charCodeAt(0))}static isBreakingSpace(y,T){return"string"==typeof y&&K._breakingSpaces.includes(y.charCodeAt(0))}static tokenize(y){let T=[],A="";if("string"!=typeof y)return T;for(let B=0;B<y.length;B++){let F=y[B],U=y[B+1];if(K.isBreakingSpace(F,U)||K.isNewline(F)){""!==A&&(T.push(A),A=""),T.push(F);continue}A+=F}return""!==A&&T.push(A),T}static canBreakWords(y,T){return T}static canBreakChars(y,T,A,B,F){return!0}static wordWrapSplit(y){return K.graphemeSegmenter(y)}static measureFont(y){if(K._fonts[y])return K._fonts[y];let T={ascent:0,descent:0,fontSize:0},A=K._canvas,B=K._context;B.font=y;let F=K.METRICS_STRING+K.BASELINE_SYMBOL,U=Math.ceil(B.measureText(F).width),X=Math.ceil(B.measureText(K.BASELINE_SYMBOL).width),Y=Math.ceil(K.HEIGHT_MULTIPLIER*X);if(X=X*K.BASELINE_MULTIPLIER|0,0===U||0===Y)return K._fonts[y]=T,T;A.width=U,A.height=Y,B.fillStyle="#f00",B.fillRect(0,0,U,Y),B.font=y,B.textBaseline="alphabetic",B.fillStyle="#000",B.fillText(F,0,X);let q=B.getImageData(0,0,U,Y).data,Q=q.length,J=4*U,Z=0,ei=0,es=!1;for(Z=0;Z<X;++Z){for(let y=0;y<J;y+=4)if(255!==q[ei+y]){es=!0;break}if(es)break;ei+=J}for(T.ascent=X-Z,ei=Q-J,es=!1,Z=Y;Z>X;--Z){for(let y=0;y<J;y+=4)if(255!==q[ei+y]){es=!0;break}if(es)break;ei-=J}return T.descent=Z-X,T.fontSize=T.ascent+T.descent,K._fonts[y]=T,T}static clearMetrics(y=""){y?delete K._fonts[y]:K._fonts={}}static get _canvas(){if(!K.__canvas){let y;try{let T=new OffscreenCanvas(0,0),A=T.getContext("2d",Y);if(A?.measureText)return K.__canvas=T,T;y=U.Xd.ADAPTER.createCanvas()}catch(T){y=U.Xd.ADAPTER.createCanvas()}y.width=y.height=10,K.__canvas=y}return K.__canvas}static get _context(){return K.__context||(K.__context=K._canvas.getContext("2d",Y)),K.__context}},q=K;q.METRICS_STRING="|\xc9q\xc5",q.BASELINE_SYMBOL="M",q.BASELINE_MULTIPLIER=1.4,q.HEIGHT_MULTIPLIER=2,q.graphemeSegmenter=(()=>{if("function"==typeof Intl?.Segmenter){let y=new Intl.Segmenter;return T=>[...y.segment(T)].map(y=>y.segment)}return y=>[...y]})(),q.experimentalLetterSpacing=!1,q._fonts={},q._newlines=[10,13],q._breakingSpaces=[9,32,8192,8193,8194,8195,8196,8197,8198,8200,8201,8202,8287,12288];let Q=["serif","sans-serif","monospace","cursive","fantasy","system-ui"],J=class{constructor(y){this.styleID=0,this.reset(),deepCopyProperties(this,y,y)}clone(){let y={};return deepCopyProperties(y,this,J.defaultStyle),new J(y)}reset(){deepCopyProperties(this,J.defaultStyle,J.defaultStyle)}get align(){return this._align}set align(y){this._align!==y&&(this._align=y,this.styleID++)}get breakWords(){return this._breakWords}set breakWords(y){this._breakWords!==y&&(this._breakWords=y,this.styleID++)}get dropShadow(){return this._dropShadow}set dropShadow(y){this._dropShadow!==y&&(this._dropShadow=y,this.styleID++)}get dropShadowAlpha(){return this._dropShadowAlpha}set dropShadowAlpha(y){this._dropShadowAlpha!==y&&(this._dropShadowAlpha=y,this.styleID++)}get dropShadowAngle(){return this._dropShadowAngle}set dropShadowAngle(y){this._dropShadowAngle!==y&&(this._dropShadowAngle=y,this.styleID++)}get dropShadowBlur(){return this._dropShadowBlur}set dropShadowBlur(y){this._dropShadowBlur!==y&&(this._dropShadowBlur=y,this.styleID++)}get dropShadowColor(){return this._dropShadowColor}set dropShadowColor(y){let T=getColor(y);this._dropShadowColor!==T&&(this._dropShadowColor=T,this.styleID++)}get dropShadowDistance(){return this._dropShadowDistance}set dropShadowDistance(y){this._dropShadowDistance!==y&&(this._dropShadowDistance=y,this.styleID++)}get fill(){return this._fill}set fill(y){let T=getColor(y);this._fill!==T&&(this._fill=T,this.styleID++)}get fillGradientType(){return this._fillGradientType}set fillGradientType(y){this._fillGradientType!==y&&(this._fillGradientType=y,this.styleID++)}get fillGradientStops(){return this._fillGradientStops}set fillGradientStops(y){!function(y,T){if(!Array.isArray(y)||!Array.isArray(T)||y.length!==T.length)return!1;for(let A=0;A<y.length;++A)if(y[A]!==T[A])return!1;return!0}(this._fillGradientStops,y)&&(this._fillGradientStops=y,this.styleID++)}get fontFamily(){return this._fontFamily}set fontFamily(y){this.fontFamily!==y&&(this._fontFamily=y,this.styleID++)}get fontSize(){return this._fontSize}set fontSize(y){this._fontSize!==y&&(this._fontSize=y,this.styleID++)}get fontStyle(){return this._fontStyle}set fontStyle(y){this._fontStyle!==y&&(this._fontStyle=y,this.styleID++)}get fontVariant(){return this._fontVariant}set fontVariant(y){this._fontVariant!==y&&(this._fontVariant=y,this.styleID++)}get fontWeight(){return this._fontWeight}set fontWeight(y){this._fontWeight!==y&&(this._fontWeight=y,this.styleID++)}get letterSpacing(){return this._letterSpacing}set letterSpacing(y){this._letterSpacing!==y&&(this._letterSpacing=y,this.styleID++)}get lineHeight(){return this._lineHeight}set lineHeight(y){this._lineHeight!==y&&(this._lineHeight=y,this.styleID++)}get leading(){return this._leading}set leading(y){this._leading!==y&&(this._leading=y,this.styleID++)}get lineJoin(){return this._lineJoin}set lineJoin(y){this._lineJoin!==y&&(this._lineJoin=y,this.styleID++)}get miterLimit(){return this._miterLimit}set miterLimit(y){this._miterLimit!==y&&(this._miterLimit=y,this.styleID++)}get padding(){return this._padding}set padding(y){this._padding!==y&&(this._padding=y,this.styleID++)}get stroke(){return this._stroke}set stroke(y){let T=getColor(y);this._stroke!==T&&(this._stroke=T,this.styleID++)}get strokeThickness(){return this._strokeThickness}set strokeThickness(y){this._strokeThickness!==y&&(this._strokeThickness=y,this.styleID++)}get textBaseline(){return this._textBaseline}set textBaseline(y){this._textBaseline!==y&&(this._textBaseline=y,this.styleID++)}get trim(){return this._trim}set trim(y){this._trim!==y&&(this._trim=y,this.styleID++)}get whiteSpace(){return this._whiteSpace}set whiteSpace(y){this._whiteSpace!==y&&(this._whiteSpace=y,this.styleID++)}get wordWrap(){return this._wordWrap}set wordWrap(y){this._wordWrap!==y&&(this._wordWrap=y,this.styleID++)}get wordWrapWidth(){return this._wordWrapWidth}set wordWrapWidth(y){this._wordWrapWidth!==y&&(this._wordWrapWidth=y,this.styleID++)}toFontString(){let y="number"==typeof this.fontSize?`${this.fontSize}px`:this.fontSize,T=this.fontFamily;Array.isArray(this.fontFamily)||(T=this.fontFamily.split(","));for(let y=T.length-1;y>=0;y--){let A=T[y].trim();/([\"\'])[^\'\"]+\1/.test(A)||Q.includes(A)||(A=`"${A}"`),T[y]=A}return`${this.fontStyle} ${this.fontVariant} ${this.fontWeight} ${y} ${T.join(",")}`}},Z=J;function getColor(y){let T=U.Il.shared;return Array.isArray(y)?y.map(y=>T.setValue(y).toHex()):T.setValue(y).toHex()}function deepCopyProperties(y,T,A){for(let B in A)Array.isArray(T[B])?y[B]=T[B].slice():y[B]=T[B]}Z.defaultStyle={align:"left",breakWords:!1,dropShadow:!1,dropShadowAlpha:1,dropShadowAngle:Math.PI/6,dropShadowBlur:0,dropShadowColor:"black",dropShadowDistance:5,fill:"black",fillGradientType:F.LINEAR_VERTICAL,fillGradientStops:[],fontFamily:"Arial",fontSize:26,fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",leading:0,letterSpacing:0,lineHeight:0,lineJoin:"miter",miterLimit:10,padding:0,stroke:"black",strokeThickness:0,textBaseline:"alphabetic",trim:!1,whiteSpace:"pre",wordWrap:!1,wordWrapWidth:100};let ei={texture:!0,children:!1,baseTexture:!0},es=class extends X.j{constructor(y,T,A){let B=!1;A||(A=U.Xd.ADAPTER.createCanvas(),B=!0),A.width=3,A.height=3;let F=U.xE.from(A);F.orig=new U.Ae,F.trim=new U.Ae,super(F),this._ownCanvas=B,this.canvas=A,this.context=A.getContext("2d",{willReadFrequently:!0}),this._resolution=es.defaultResolution??U.Xd.RESOLUTION,this._autoResolution=es.defaultAutoResolution,this._text=null,this._style=null,this._styleListener=null,this._font="",this.text=y,this.style=T,this.localStyleID=-1}static get experimentalLetterSpacing(){return q.experimentalLetterSpacing}static set experimentalLetterSpacing(y){U.P6.deprecation("7.1.0","Text.experimentalLetterSpacing is deprecated, use TextMetrics.experimentalLetterSpacing"),q.experimentalLetterSpacing=y}updateText(y){let T,A;let B=this._style;if(this.localStyleID!==B.styleID&&(this.dirty=!0,this.localStyleID=B.styleID),!this.dirty&&y)return;this._font=this._style.toFontString();let F=this.context,X=q.measureText(this._text||" ",this._style,this._style.wordWrap,this.canvas),Y=X.width,K=X.height,Q=X.lines,J=X.lineHeight,Z=X.lineWidths,ei=X.maxLineWidth,es=X.fontProperties;this.canvas.width=Math.ceil(Math.ceil(Math.max(1,Y)+2*B.padding)*this._resolution),this.canvas.height=Math.ceil(Math.ceil(Math.max(1,K)+2*B.padding)*this._resolution),F.scale(this._resolution,this._resolution),F.clearRect(0,0,this.canvas.width,this.canvas.height),F.font=this._font,F.lineWidth=B.strokeThickness,F.textBaseline=B.textBaseline,F.lineJoin=B.lineJoin,F.miterLimit=B.miterLimit;let eh=B.dropShadow?2:1;for(let y=0;y<eh;++y){let Y=B.dropShadow&&0===y,q=Y?Math.ceil(Math.max(1,K)+2*B.padding):0,eh=q*this._resolution;if(Y){F.fillStyle="black",F.strokeStyle="black";let y=B.dropShadowColor,T=B.dropShadowBlur*this._resolution,A=B.dropShadowDistance*this._resolution;F.shadowColor=U.Il.shared.setValue(y).setAlpha(B.dropShadowAlpha).toRgbaString(),F.shadowBlur=T,F.shadowOffsetX=Math.cos(B.dropShadowAngle)*A,F.shadowOffsetY=Math.sin(B.dropShadowAngle)*A+eh}else F.fillStyle=this._generateFillStyle(B,Q,X),F.strokeStyle=B.stroke,F.shadowColor="black",F.shadowBlur=0,F.shadowOffsetX=0,F.shadowOffsetY=0;let eu=(J-es.fontSize)/2;J-es.fontSize<0&&(eu=0);for(let y=0;y<Q.length;y++)T=B.strokeThickness/2,A=B.strokeThickness/2+y*J+es.ascent+eu,"right"===B.align?T+=ei-Z[y]:"center"===B.align&&(T+=(ei-Z[y])/2),B.stroke&&B.strokeThickness&&this.drawLetterSpacing(Q[y],T+B.padding,A+B.padding-q,!0),B.fill&&this.drawLetterSpacing(Q[y],T+B.padding,A+B.padding-q)}this.updateTexture()}drawLetterSpacing(y,T,A,B=!1){let F=this._style,U=F.letterSpacing,X=!1;if(q.experimentalLetterSpacingSupported&&(q.experimentalLetterSpacing?(this.context.letterSpacing=`${U}px`,this.context.textLetterSpacing=`${U}px`,X=!0):(this.context.letterSpacing="0px",this.context.textLetterSpacing="0px")),0===U||X){B?this.context.strokeText(y,T,A):this.context.fillText(y,T,A);return}let Y=T,K=q.graphemeSegmenter(y),Q=this.context.measureText(y).width,J=0;for(let y=0;y<K.length;++y){let T=K[y];B?this.context.strokeText(T,Y,A):this.context.fillText(T,Y,A);let F="";for(let T=y+1;T<K.length;++T)F+=K[T];Y+=Q-(J=this.context.measureText(F).width)+U,Q=J}}updateTexture(){let y=this.canvas;if(this._style.trim){let T=U.P6.trimCanvas(y);T.data&&(y.width=T.width,y.height=T.height,this.context.putImageData(T.data,0,0))}let T=this._texture,A=this._style,B=A.trim?0:A.padding,F=T.baseTexture;T.trim.width=T._frame.width=y.width/this._resolution,T.trim.height=T._frame.height=y.height/this._resolution,T.trim.x=-B,T.trim.y=-B,T.orig.width=T._frame.width-2*B,T.orig.height=T._frame.height-2*B,this._onTextureUpdate(),F.setRealSize(y.width,y.height,this._resolution),T.updateUvs(),this.dirty=!1}_render(y){this._autoResolution&&this._resolution!==y.resolution&&(this._resolution=y.resolution,this.dirty=!0),this.updateText(!0),super._render(y)}updateTransform(){this.updateText(!0),super.updateTransform()}getBounds(y,T){return this.updateText(!0),-1===this._textureID&&(y=!1),super.getBounds(y,T)}getLocalBounds(y){return this.updateText(!0),super.getLocalBounds.call(this,y)}_calculateBounds(){this.calculateVertices(),this._bounds.addQuad(this.vertexData)}_generateFillStyle(y,T,A){let B;let U=y.fill;if(!Array.isArray(U))return U;if(1===U.length)return U[0];let X=y.dropShadow?y.dropShadowDistance:0,Y=y.padding||0,K=this.canvas.width/this._resolution-X-2*Y,q=this.canvas.height/this._resolution-X-2*Y,Q=U.slice(),J=y.fillGradientStops.slice();if(!J.length){let y=Q.length+1;for(let T=1;T<y;++T)J.push(T/y)}if(Q.unshift(U[0]),J.unshift(0),Q.push(U[U.length-1]),J.push(1),y.fillGradientType===F.LINEAR_VERTICAL){B=this.context.createLinearGradient(K/2,Y,K/2,q+Y);let F=A.fontProperties.fontSize+y.strokeThickness;for(let y=0;y<T.length;y++){let U=A.lineHeight*(y-1)+F,X=A.lineHeight*y,Y=X;y>0&&U>X&&(Y=(X+U)/2);let K=X+F,Z=A.lineHeight*(y+1),ei=K;y+1<T.length&&Z<K&&(ei=(K+Z)/2);let es=(ei-Y)/q;for(let y=0;y<Q.length;y++){let T=Math.min(1,Math.max(0,Y/q+("number"==typeof J[y]?J[y]:y/Q.length)*es));T=Number(T.toFixed(5)),B.addColorStop(T,Q[y])}}}else{B=this.context.createLinearGradient(Y,q/2,K+Y,q/2);let y=Q.length+1,T=1;for(let A=0;A<Q.length;A++){let F;F="number"==typeof J[A]?J[A]:T/y,B.addColorStop(F,Q[A]),T++}}return B}destroy(y){"boolean"==typeof y&&(y={children:y}),y=Object.assign({},ei,y),super.destroy(y),this._ownCanvas&&(this.canvas.height=this.canvas.width=0),this.context=null,this.canvas=null,this._style=null}get width(){return this.updateText(!0),Math.abs(this.scale.x)*this._texture.orig.width}set width(y){this.updateText(!0);let T=U.P6.sign(this.scale.x)||1;this.scale.x=T*y/this._texture.orig.width,this._width=y}get height(){return this.updateText(!0),Math.abs(this.scale.y)*this._texture.orig.height}set height(y){this.updateText(!0);let T=U.P6.sign(this.scale.y)||1;this.scale.y=T*y/this._texture.orig.height,this._height=y}get style(){return this._style}set style(y){(y=y||{})instanceof Z?this._style=y:this._style=new Z(y),this.localStyleID=-1,this.dirty=!0}get text(){return this._text}set text(y){y=String(null==y?"":y),this._text!==y&&(this._text=y,this.dirty=!0)}get resolution(){return this._resolution}set resolution(y){this._autoResolution=!1,this._resolution!==y&&(this._resolution=y,this.dirty=!0)}},eh=es;eh.defaultAutoResolution=!0},97091:function(y,T,A){"use strict";A.d(T,{vB:function(){return K},uF:function(){return X}});var B,F=A(78706),U=A(84038),X=((B=X||{})[B.INTERACTION=50]="INTERACTION",B[B.HIGH=25]="HIGH",B[B.NORMAL=0]="NORMAL",B[B.LOW=-25]="LOW",B[B.UTILITY=-50]="UTILITY",B);let TickerListener=class TickerListener{constructor(y,T=null,A=0,B=!1){this.next=null,this.previous=null,this._destroyed=!1,this.fn=y,this.context=T,this.priority=A,this.once=B}match(y,T=null){return this.fn===y&&this.context===T}emit(y){this.fn&&(this.context?this.fn.call(this.context,y):this.fn(y));let T=this.next;return this.once&&this.destroy(!0),this._destroyed&&(this.next=null),T}connect(y){this.previous=y,y.next&&(y.next.previous=this),this.next=y.next,y.next=this}destroy(y=!1){this._destroyed=!0,this.fn=null,this.context=null,this.previous&&(this.previous.next=this.next),this.next&&(this.next.previous=this.previous);let T=this.next;return this.next=y?null:T,this.previous=null,T}};let Y=class{constructor(){this.autoStart=!1,this.deltaTime=1,this.lastTime=-1,this.speed=1,this.started=!1,this._requestId=null,this._maxElapsedMS=100,this._minElapsedMS=0,this._protected=!1,this._lastFrame=-1,this._head=new TickerListener(null,null,1/0),this.deltaMS=1/Y.targetFPMS,this.elapsedMS=1/Y.targetFPMS,this._tick=y=>{this._requestId=null,this.started&&(this.update(y),this.started&&null===this._requestId&&this._head.next&&(this._requestId=requestAnimationFrame(this._tick)))}}_requestIfNeeded(){null===this._requestId&&this._head.next&&(this.lastTime=performance.now(),this._lastFrame=this.lastTime,this._requestId=requestAnimationFrame(this._tick))}_cancelIfNeeded(){null!==this._requestId&&(cancelAnimationFrame(this._requestId),this._requestId=null)}_startIfPossible(){this.started?this._requestIfNeeded():this.autoStart&&this.start()}add(y,T,A=X.NORMAL){return this._addListener(new TickerListener(y,T,A))}addOnce(y,T,A=X.NORMAL){return this._addListener(new TickerListener(y,T,A,!0))}_addListener(y){let T=this._head.next,A=this._head;if(T){for(;T;){if(y.priority>T.priority){y.connect(A);break}A=T,T=T.next}y.previous||y.connect(A)}else y.connect(A);return this._startIfPossible(),this}remove(y,T){let A=this._head.next;for(;A;)A=A.match(y,T)?A.destroy():A.next;return this._head.next||this._cancelIfNeeded(),this}get count(){if(!this._head)return 0;let y=0,T=this._head;for(;T=T.next;)y++;return y}start(){this.started||(this.started=!0,this._requestIfNeeded())}stop(){this.started&&(this.started=!1,this._cancelIfNeeded())}destroy(){if(!this._protected){this.stop();let y=this._head.next;for(;y;)y=y.destroy(!0);this._head.destroy(),this._head=null}}update(y=performance.now()){let T;if(y>this.lastTime){if((T=this.elapsedMS=y-this.lastTime)>this._maxElapsedMS&&(T=this._maxElapsedMS),T*=this.speed,this._minElapsedMS){let T=y-this._lastFrame|0;if(T<this._minElapsedMS)return;this._lastFrame=y-T%this._minElapsedMS}this.deltaMS=T,this.deltaTime=this.deltaMS*Y.targetFPMS;let A=this._head,B=A.next;for(;B;)B=B.emit(this.deltaTime);A.next||this._cancelIfNeeded()}else this.deltaTime=this.deltaMS=this.elapsedMS=0;this.lastTime=y}get FPS(){return 1e3/this.elapsedMS}get minFPS(){return 1e3/this._maxElapsedMS}set minFPS(y){let T=Math.min(this.maxFPS,y),A=Math.min(Math.max(0,T)/1e3,Y.targetFPMS);this._maxElapsedMS=1/A}get maxFPS(){return this._minElapsedMS?Math.round(1e3/this._minElapsedMS):0}set maxFPS(y){if(0===y)this._minElapsedMS=0;else{let T=Math.max(this.minFPS,y);this._minElapsedMS=1/(T/1e3)}}static get shared(){if(!Y._shared){let y=Y._shared=new Y;y.autoStart=!0,y._protected=!0}return Y._shared}static get system(){if(!Y._system){let y=Y._system=new Y;y.autoStart=!0,y._protected=!0}return Y._system}},K=Y;K.targetFPMS=.06,Object.defineProperties(F.Xd,{TARGET_FPMS:{get:()=>K.targetFPMS,set(y){(0,U.deprecation)("7.1.0","settings.TARGET_FPMS is deprecated, use Ticker.targetFPMS"),K.targetFPMS=y}}});var q=A(90463);let TickerPlugin=class TickerPlugin{static init(y){y=Object.assign({autoStart:!0,sharedTicker:!1},y),Object.defineProperty(this,"ticker",{set(y){this._ticker&&this._ticker.remove(this.render,this),this._ticker=y,y&&y.add(this.render,this,X.LOW)},get(){return this._ticker}}),this.stop=()=>{this._ticker.stop()},this.start=()=>{this._ticker.start()},this._ticker=null,this.ticker=y.sharedTicker?K.shared:new K,y.autoStart&&this.start()}static destroy(){if(this._ticker){let y=this._ticker;this.ticker=null,y.destroy()}}};TickerPlugin.extension=q.n.Application,q.R.add(TickerPlugin)},84038:function(y,T,A){"use strict";let B,F;A.r(T),A.d(T,{BaseTextureCache:function(){return eg},BoundingBox:function(){return ef},CanvasRenderTarget:function(){return CanvasRenderTarget},DATA_URI:function(){return eh},EventEmitter:function(){return X},ProgramCache:function(){return ep},TextureCache:function(){return em},clearTextureCache:function(){return clearTextureCache},correctBlendMode:function(){return correctBlendMode},createIndicesForQuads:function(){return createIndicesForQuads},decomposeDataUri:function(){return decomposeDataUri},deprecation:function(){return deprecation},destroyTextureCache:function(){return destroyTextureCache},determineCrossOrigin:function(){return determineCrossOrigin},earcut:function(){return Y},getBufferType:function(){return getBufferType},getCanvasBoundingBox:function(){return getCanvasBoundingBox},getResolutionOfUrl:function(){return getResolutionOfUrl},hex2rgb:function(){return hex2rgb},hex2string:function(){return hex2string},interleaveTypedArrays:function(){return interleaveTypedArrays},isMobile:function(){return U.tq},isPow2:function(){return isPow2},isWebGLSupported:function(){return isWebGLSupported},log2:function(){return log2},nextPow2:function(){return nextPow2},path:function(){return Q},premultiplyBlendMode:function(){return es},premultiplyRgba:function(){return premultiplyRgba},premultiplyTint:function(){return premultiplyTint},premultiplyTintToRgba:function(){return premultiplyTintToRgba},removeItems:function(){return removeItems},rgb2hex:function(){return rgb2hex},sayHello:function(){return sayHello},sign:function(){return sign},skipHello:function(){return skipHello},string2hex:function(){return string2hex},trimCanvas:function(){return trimCanvas},uid:function(){return uid},url:function(){return q}});var U=A(78706);U.Xd.RETINA_PREFIX=/@([0-9\.]+)x/,U.Xd.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT=!1;var X=A(26729),Y=A(9187),K=A(11987);let q={parse:K.parse,format:K.format,resolve:K.resolve};function assertPath(y){if("string"!=typeof y)throw TypeError(`Path must be a string. Received ${JSON.stringify(y)}`)}function removeUrlParams(y){let T=y.split("?")[0];return T.split("#")[0]}let Q={toPosix:y=>y.replace(RegExp("\\".replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),"g"),"/"),isUrl(y){return/^https?:/.test(this.toPosix(y))},isDataUrl:y=>/^data:([a-z]+\/[a-z0-9-+.]+(;[a-z0-9-.!#$%*+.{}|~`]+=[a-z0-9-.!#$%*+.{}()_|~`]+)*)?(;base64)?,([a-z0-9!$&',()*+;=\-._~:@\/?%\s<>]*?)$/i.test(y),hasProtocol(y){return/^[^/:]+:\//.test(this.toPosix(y))},getProtocol(y){assertPath(y),y=this.toPosix(y);let T="",A=/^file:\/\/\//.exec(y),B=/^[^/:]+:\/\//.exec(y),F=/^[^/:]+:\//.exec(y);if(A||B||F){let U=A?.[0]||B?.[0]||F?.[0];T=U,y=y.slice(U.length)}return T},toAbsolute(y,T,A){if(this.isDataUrl(y))return y;let B=removeUrlParams(this.toPosix(T??U.Xd.ADAPTER.getBaseUrl())),F=removeUrlParams(this.toPosix(A??this.rootname(B)));if(assertPath(y),(y=this.toPosix(y)).startsWith("/"))return Q.join(F,y.slice(1));let X=this.isAbsolute(y)?y:this.join(B,y);return X},normalize(y){if(assertPath(y=this.toPosix(y)),0===y.length)return".";let T="",A=y.startsWith("/");this.hasProtocol(y)&&(T=this.rootname(y),y=y.slice(T.length));let B=y.endsWith("/");return((y=function(y,T){let A="",B=0,F=-1,U=0,X=-1;for(let Y=0;Y<=y.length;++Y){if(Y<y.length)X=y.charCodeAt(Y);else if(47===X)break;else X=47;if(47===X){if(F===Y-1||1===U);else if(F!==Y-1&&2===U){if(A.length<2||2!==B||46!==A.charCodeAt(A.length-1)||46!==A.charCodeAt(A.length-2)){if(A.length>2){let y=A.lastIndexOf("/");if(y!==A.length-1){-1===y?(A="",B=0):B=(A=A.slice(0,y)).length-1-A.lastIndexOf("/"),F=Y,U=0;continue}}else if(2===A.length||1===A.length){A="",B=0,F=Y,U=0;continue}}T&&(A.length>0?A+="/..":A="..",B=2)}else A.length>0?A+=`/${y.slice(F+1,Y)}`:A=y.slice(F+1,Y),B=Y-F-1;F=Y,U=0}else 46===X&&-1!==U?++U:U=-1}return A}(y,!1)).length>0&&B&&(y+="/"),A)?`/${y}`:T+y},isAbsolute(y){return assertPath(y),y=this.toPosix(y),!!this.hasProtocol(y)||y.startsWith("/")},join(...y){let T;if(0===y.length)return".";for(let A=0;A<y.length;++A){let B=y[A];if(assertPath(B),B.length>0){if(void 0===T)T=B;else{let F=y[A-1]??"";this.extname(F)?T+=`/../${B}`:T+=`/${B}`}}}return void 0===T?".":this.normalize(T)},dirname(y){if(assertPath(y),0===y.length)return".";let T=(y=this.toPosix(y)).charCodeAt(0),A=47===T,B=-1,F=!0,U=this.getProtocol(y),X=y;y=y.slice(U.length);for(let A=y.length-1;A>=1;--A)if(47===(T=y.charCodeAt(A))){if(!F){B=A;break}}else F=!1;return -1===B?A?"/":this.isUrl(X)?U+y:U:A&&1===B?"//":U+y.slice(0,B)},rootname(y){assertPath(y);let T="";if(T=(y=this.toPosix(y)).startsWith("/")?"/":this.getProtocol(y),this.isUrl(y)){let A=y.indexOf("/",T.length);(T=-1!==A?y.slice(0,A):y).endsWith("/")||(T+="/")}return T},basename(y,T){let A;assertPath(y),T&&assertPath(T),y=removeUrlParams(this.toPosix(y));let B=0,F=-1,U=!0;if(void 0!==T&&T.length>0&&T.length<=y.length){if(T.length===y.length&&T===y)return"";let X=T.length-1,Y=-1;for(A=y.length-1;A>=0;--A){let K=y.charCodeAt(A);if(47===K){if(!U){B=A+1;break}}else -1===Y&&(U=!1,Y=A+1),X>=0&&(K===T.charCodeAt(X)?-1==--X&&(F=A):(X=-1,F=Y))}return B===F?F=Y:-1===F&&(F=y.length),y.slice(B,F)}for(A=y.length-1;A>=0;--A)if(47===y.charCodeAt(A)){if(!U){B=A+1;break}}else -1===F&&(U=!1,F=A+1);return -1===F?"":y.slice(B,F)},extname(y){assertPath(y),y=removeUrlParams(this.toPosix(y));let T=-1,A=0,B=-1,F=!0,U=0;for(let X=y.length-1;X>=0;--X){let Y=y.charCodeAt(X);if(47===Y){if(!F){A=X+1;break}continue}-1===B&&(F=!1,B=X+1),46===Y?-1===T?T=X:1!==U&&(U=1):-1!==T&&(U=-1)}return -1===T||-1===B||0===U||1===U&&T===B-1&&T===A+1?"":y.slice(T,B)},parse(y){let T;assertPath(y);let A={root:"",dir:"",base:"",ext:"",name:""};if(0===y.length)return A;let B=(y=removeUrlParams(this.toPosix(y))).charCodeAt(0),F=this.isAbsolute(y);A.root=this.rootname(y),T=F||this.hasProtocol(y)?1:0;let U=-1,X=0,Y=-1,K=!0,q=y.length-1,Q=0;for(;q>=T;--q){if(47===(B=y.charCodeAt(q))){if(!K){X=q+1;break}continue}-1===Y&&(K=!1,Y=q+1),46===B?-1===U?U=q:1!==Q&&(Q=1):-1!==U&&(Q=-1)}return -1===U||-1===Y||0===Q||1===Q&&U===Y-1&&U===X+1?-1!==Y&&(0===X&&F?A.base=A.name=y.slice(1,Y):A.base=A.name=y.slice(X,Y)):(0===X&&F?(A.name=y.slice(1,U),A.base=y.slice(1,Y)):(A.name=y.slice(X,U),A.base=y.slice(X,Y)),A.ext=y.slice(U,Y)),A.dir=this.dirname(y),A},sep:"/",delimiter:":"},J={};function deprecation(y,T,A=3){if(J[T])return;let B=Error().stack;void 0===B?console.warn("PixiJS Deprecation Warning: ",`${T}
Deprecated since v${y}`):(B=B.split("\n").splice(A).join("\n"),console.groupCollapsed?(console.groupCollapsed("%cPixiJS Deprecation Warning: %c%s","color:#614108;background:#fffbe6","font-weight:normal;color:#614108;background:#fffbe6",`${T}
Deprecated since v${y}`),console.warn(B),console.groupEnd()):(console.warn("PixiJS Deprecation Warning: ",`${T}
Deprecated since v${y}`),console.warn(B))),J[T]=!0}function skipHello(){deprecation("7.0.0","skipHello is deprecated, please use settings.RENDER_OPTIONS.hello")}function sayHello(){deprecation("7.0.0",'sayHello is deprecated, please use Renderer\'s "hello" option')}function isWebGLSupported(){return void 0===B&&(B=function(){let y={stencil:!0,failIfMajorPerformanceCaveat:U.Xd.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT};try{if(!U.Xd.ADAPTER.getWebGLRenderingContext())return!1;let T=U.Xd.ADAPTER.createCanvas(),A=T.getContext("webgl",y)||T.getContext("experimental-webgl",y),B=!!A?.getContextAttributes()?.stencil;if(A){let y=A.getExtension("WEBGL_lose_context");y&&y.loseContext()}return A=null,B}catch(y){return!1}}()),B}var Z=A(76278);function hex2rgb(y,T=[]){return deprecation("7.2.0","utils.hex2rgb is deprecated, use Color#toRgbArray instead"),Z.I.shared.setValue(y).toRgbArray(T)}function hex2string(y){return deprecation("7.2.0","utils.hex2string is deprecated, use Color#toHex instead"),Z.I.shared.setValue(y).toHex()}function string2hex(y){return deprecation("7.2.0","utils.string2hex is deprecated, use Color#toNumber instead"),Z.I.shared.setValue(y).toNumber()}function rgb2hex(y){return deprecation("7.2.0","utils.rgb2hex is deprecated, use Color#toNumber instead"),Z.I.shared.setValue(y).toNumber()}var ei=A(57361);let es=function(){let y=[],T=[];for(let A=0;A<32;A++)y[A]=A,T[A]=A;y[ei.T$.NORMAL_NPM]=ei.T$.NORMAL,y[ei.T$.ADD_NPM]=ei.T$.ADD,y[ei.T$.SCREEN_NPM]=ei.T$.SCREEN,T[ei.T$.NORMAL]=ei.T$.NORMAL_NPM,T[ei.T$.ADD]=ei.T$.ADD_NPM,T[ei.T$.SCREEN]=ei.T$.SCREEN_NPM;let A=[];return A.push(T),A.push(y),A}();function correctBlendMode(y,T){return es[T?1:0][y]}function premultiplyRgba(y,T,A,B=!0){return deprecation("7.2.0","utils.premultiplyRgba has moved to Color.premultiply"),Z.I.shared.setValue(y).premultiply(T,B).toArray(A??new Float32Array(4))}function premultiplyTint(y,T){return deprecation("7.2.0","utils.premultiplyTint has moved to Color.toPremultiplied"),Z.I.shared.setValue(y).toPremultiplied(T)}function premultiplyTintToRgba(y,T,A,B=!0){return deprecation("7.2.0","utils.premultiplyTintToRgba has moved to Color.premultiply"),Z.I.shared.setValue(y).premultiply(T,B).toArray(A??new Float32Array(4))}let eh=/^\s*data:(?:([\w-]+)\/([\w+.-]+))?(?:;charset=([\w-]+))?(?:;(base64))?,(.*)/i;function createIndicesForQuads(y,T=null){let A=6*y;if((T=T||new Uint16Array(A)).length!==A)throw Error(`Out buffer length is incorrect, got ${T.length} and expected ${A}`);for(let y=0,B=0;y<A;y+=6,B+=4)T[y+0]=B+0,T[y+1]=B+1,T[y+2]=B+2,T[y+3]=B+0,T[y+4]=B+2,T[y+5]=B+3;return T}function getBufferType(y){if(4===y.BYTES_PER_ELEMENT)return y instanceof Float32Array?"Float32Array":y instanceof Uint32Array?"Uint32Array":"Int32Array";if(2===y.BYTES_PER_ELEMENT){if(y instanceof Uint16Array)return"Uint16Array"}else if(1===y.BYTES_PER_ELEMENT&&y instanceof Uint8Array)return"Uint8Array";return null}let eu={Float32Array,Uint32Array,Int32Array,Uint8Array};function interleaveTypedArrays(y,T){let A=0,B=0,F={};for(let F=0;F<y.length;F++)B+=T[F],A+=y[F].length;let U=new ArrayBuffer(4*A),X=null,Y=0;for(let A=0;A<y.length;A++){let K=T[A],q=y[A],Q=getBufferType(q);F[Q]||(F[Q]=new eu[Q](U)),X=F[Q];for(let y=0;y<q.length;y++){let T=(y/K|0)*B+Y,A=y%K;X[T+A]=q[y]}Y+=K}return new Float32Array(U)}function nextPow2(y){return y+=0===y?1:0,--y,y|=y>>>1,y|=y>>>2,y|=y>>>4,y|=y>>>8,(y|=y>>>16)+1}function isPow2(y){return!(y&y-1)&&!!y}function log2(y){let T=(y>65535?1:0)<<4,A=((y>>>=T)>255?1:0)<<3;return y>>>=A,T|=A,A=(y>15?1:0)<<2,y>>>=A,T|=A,A=(y>3?1:0)<<1,y>>>=A,(T|=A)|y>>1}function removeItems(y,T,A){let B;let F=y.length;if(T>=F||0===A)return;A=T+A>F?F-T:A;let U=F-A;for(B=T;B<U;++B)y[B]=y[B+A];y.length=U}function sign(y){return 0===y?0:y<0?-1:1}let ed=0;function uid(){return++ed}let ec=class{constructor(y,T,A,B){this.left=y,this.top=T,this.right=A,this.bottom=B}get width(){return this.right-this.left}get height(){return this.bottom-this.top}isEmpty(){return this.left===this.right||this.top===this.bottom}},ef=ec;ef.EMPTY=new ec(0,0,0,0);let ep={},em=Object.create(null),eg=Object.create(null);function destroyTextureCache(){let y;for(y in em)em[y].destroy();for(y in eg)eg[y].destroy()}function clearTextureCache(){let y;for(y in em)delete em[y];for(y in eg)delete eg[y]}let CanvasRenderTarget=class CanvasRenderTarget{constructor(y,T,A){this._canvas=U.Xd.ADAPTER.createCanvas(),this._context=this._canvas.getContext("2d"),this.resolution=A||U.Xd.RESOLUTION,this.resize(y,T)}clear(){this._checkDestroyed(),this._context.setTransform(1,0,0,1,0,0),this._context.clearRect(0,0,this._canvas.width,this._canvas.height)}resize(y,T){this._checkDestroyed(),this._canvas.width=Math.round(y*this.resolution),this._canvas.height=Math.round(T*this.resolution)}destroy(){this._context=null,this._canvas=null}get width(){return this._checkDestroyed(),this._canvas.width}set width(y){this._checkDestroyed(),this._canvas.width=Math.round(y)}get height(){return this._checkDestroyed(),this._canvas.height}set height(y){this._checkDestroyed(),this._canvas.height=Math.round(y)}get canvas(){return this._checkDestroyed(),this._canvas}get context(){return this._checkDestroyed(),this._context}_checkDestroyed(){if(null===this._canvas)throw TypeError("The CanvasRenderTarget has already been destroyed")}};function checkRow(y,T,A){for(let B=0,F=4*A*T;B<T;++B,F+=4)if(0!==y[F+3])return!1;return!0}function checkColumn(y,T,A,B,F){let U=4*T;for(let T=B,X=B*U+4*A;T<=F;++T,X+=U)if(0!==y[X+3])return!1;return!0}function getCanvasBoundingBox(y){let{width:T,height:A}=y,B=y.getContext("2d",{willReadFrequently:!0});if(null===B)throw TypeError("Failed to get canvas 2D context");let F=B.getImageData(0,0,T,A),U=F.data,X=0,Y=0,K=T-1,q=A-1;for(;Y<A&&checkRow(U,T,Y);)++Y;if(Y===A)return ef.EMPTY;for(;checkRow(U,T,q);)--q;for(;checkColumn(U,T,X,Y,q);)++X;for(;checkColumn(U,T,K,Y,q);)--K;return++K,++q,new ef(X,Y,K,q)}function trimCanvas(y){let T=getCanvasBoundingBox(y),{width:A,height:B}=T,F=null;if(!T.isEmpty()){let U=y.getContext("2d");if(null===U)throw TypeError("Failed to get canvas 2D context");F=U.getImageData(T.left,T.top,A,B)}return{width:A,height:B,data:F}}function decomposeDataUri(y){let T=eh.exec(y);if(T)return{mediaType:T[1]?T[1].toLowerCase():void 0,subType:T[2]?T[2].toLowerCase():void 0,charset:T[3]?T[3].toLowerCase():void 0,encoding:T[4]?T[4].toLowerCase():void 0,data:T[5]}}function determineCrossOrigin(y,T=globalThis.location){if(y.startsWith("data:"))return"";T=T||globalThis.location,F||(F=document.createElement("a")),F.href=y;let A=q.parse(F.href),B=!A.port&&""===T.port||A.port===T.port;return A.hostname===T.hostname&&B&&A.protocol===T.protocol?"":"anonymous"}function getResolutionOfUrl(y,T=1){let A=U.Xd.RETINA_PREFIX?.exec(y);return A?parseFloat(A[1]):T}},43531:function(y,T,A){"use strict";let B,F;A.d(T,{AeJ:function(){return K.Ae},aH$:function(){return K.aH},pn8:function(){return eN.pn}});var U,X,Y,K=A(1396),q=A(68276),Q=A(67220);let J=new K.y3;q.s$.prototype._cacheAsBitmap=!1,q.s$.prototype._cacheData=null,q.s$.prototype._cacheAsBitmapResolution=null,q.s$.prototype._cacheAsBitmapMultisample=null;let CacheData=class CacheData{constructor(){this.textureCacheId=null,this.originalRender=null,this.originalRenderCanvas=null,this.originalCalculateBounds=null,this.originalGetLocalBounds=null,this.originalUpdateTransform=null,this.originalDestroy=null,this.originalMask=null,this.originalFilterArea=null,this.originalContainsPoint=null,this.sprite=null}};Object.defineProperties(q.s$.prototype,{cacheAsBitmapResolution:{get(){return this._cacheAsBitmapResolution},set(y){y!==this._cacheAsBitmapResolution&&(this._cacheAsBitmapResolution=y,this.cacheAsBitmap&&(this.cacheAsBitmap=!1,this.cacheAsBitmap=!0))}},cacheAsBitmapMultisample:{get(){return this._cacheAsBitmapMultisample},set(y){y!==this._cacheAsBitmapMultisample&&(this._cacheAsBitmapMultisample=y,this.cacheAsBitmap&&(this.cacheAsBitmap=!1,this.cacheAsBitmap=!0))}},cacheAsBitmap:{get(){return this._cacheAsBitmap},set(y){let T;this._cacheAsBitmap!==y&&(this._cacheAsBitmap=y,y?(this._cacheData||(this._cacheData=new CacheData),(T=this._cacheData).originalRender=this.render,T.originalRenderCanvas=this.renderCanvas,T.originalUpdateTransform=this.updateTransform,T.originalCalculateBounds=this.calculateBounds,T.originalGetLocalBounds=this.getLocalBounds,T.originalDestroy=this.destroy,T.originalContainsPoint=this.containsPoint,T.originalMask=this._mask,T.originalFilterArea=this.filterArea,this.render=this._renderCached,this.renderCanvas=this._renderCachedCanvas,this.destroy=this._cacheAsBitmapDestroy):((T=this._cacheData).sprite&&this._destroyCachedDisplayObject(),this.render=T.originalRender,this.renderCanvas=T.originalRenderCanvas,this.calculateBounds=T.originalCalculateBounds,this.getLocalBounds=T.originalGetLocalBounds,this.destroy=T.originalDestroy,this.updateTransform=T.originalUpdateTransform,this.containsPoint=T.originalContainsPoint,this._mask=T.originalMask,this.filterArea=T.originalFilterArea))}}}),q.s$.prototype._renderCached=function(y){this.visible&&!(this.worldAlpha<=0)&&this.renderable&&(this._initCachedDisplayObject(y),this._cacheData.sprite.transform._worldID=this.transform._worldID,this._cacheData.sprite.worldAlpha=this.worldAlpha,this._cacheData.sprite._render(y))},q.s$.prototype._initCachedDisplayObject=function(y){if(this._cacheData?.sprite)return;let T=this.alpha;this.alpha=1,y.batch.flush();let A=this.getLocalBounds(null,!0).clone();if(this.filters?.length){let y=this.filters[0].padding;A.pad(y)}A.ceil(K.Xd.RESOLUTION);let B=y.renderTexture.current,F=y.renderTexture.sourceFrame.clone(),U=y.renderTexture.destinationFrame.clone(),X=y.projection.transform,Y=K.TI.create({width:A.width,height:A.height,resolution:this.cacheAsBitmapResolution||y.resolution,multisample:this.cacheAsBitmapMultisample??y.multisample}),q=`cacheAsBitmap_${K.P6.uid()}`;this._cacheData.textureCacheId=q,K.VL.addToCache(Y.baseTexture,q),K.xE.addToCache(Y,q);let Z=this.transform.localTransform.copyTo(J).invert().translate(-A.x,-A.y);this.render=this._cacheData.originalRender,y.render(this,{renderTexture:Y,clear:!0,transform:Z,skipUpdateTransform:!1}),y.framebuffer.blit(),y.projection.transform=X,y.renderTexture.bind(B,F,U),this.render=this._renderCached,this.updateTransform=this.displayObjectUpdateTransform,this.calculateBounds=this._calculateCachedBounds,this.getLocalBounds=this._getCachedLocalBounds,this._mask=null,this.filterArea=null,this.alpha=T;let ei=new Q.j(Y);ei.transform.worldTransform=this.transform.worldTransform,ei.anchor.x=-(A.x/A.width),ei.anchor.y=-(A.y/A.height),ei.alpha=T,ei._bounds=this._bounds,this._cacheData.sprite=ei,this.transform._parentID=-1,this.parent?this.updateTransform():(this.enableTempParent(),this.updateTransform(),this.disableTempParent(null)),this.containsPoint=ei.containsPoint.bind(ei)},q.s$.prototype._renderCachedCanvas=function(y){this.visible&&!(this.worldAlpha<=0)&&this.renderable&&(this._initCachedDisplayObjectCanvas(y),this._cacheData.sprite.worldAlpha=this.worldAlpha,this._cacheData.sprite._renderCanvas(y))},q.s$.prototype._initCachedDisplayObjectCanvas=function(y){if(this._cacheData?.sprite)return;let T=this.getLocalBounds(null,!0),A=this.alpha;this.alpha=1;let B=y.canvasContext.activeContext,F=y._projTransform;T.ceil(K.Xd.RESOLUTION);let U=K.TI.create({width:T.width,height:T.height}),X=`cacheAsBitmap_${K.P6.uid()}`;this._cacheData.textureCacheId=X,K.VL.addToCache(U.baseTexture,X),K.xE.addToCache(U,X),this.transform.localTransform.copyTo(J),J.invert(),J.tx-=T.x,J.ty-=T.y,this.renderCanvas=this._cacheData.originalRenderCanvas,y.render(this,{renderTexture:U,clear:!0,transform:J,skipUpdateTransform:!1}),y.canvasContext.activeContext=B,y._projTransform=F,this.renderCanvas=this._renderCachedCanvas,this.updateTransform=this.displayObjectUpdateTransform,this.calculateBounds=this._calculateCachedBounds,this.getLocalBounds=this._getCachedLocalBounds,this._mask=null,this.filterArea=null,this.alpha=A;let Y=new Q.j(U);Y.transform.worldTransform=this.transform.worldTransform,Y.anchor.x=-(T.x/T.width),Y.anchor.y=-(T.y/T.height),Y.alpha=A,Y._bounds=this._bounds,this._cacheData.sprite=Y,this.transform._parentID=-1,this.parent?this.updateTransform():(this.parent=y._tempDisplayObjectParent,this.updateTransform(),this.parent=null),this.containsPoint=Y.containsPoint.bind(Y)},q.s$.prototype._calculateCachedBounds=function(){this._bounds.clear(),this._cacheData.sprite.transform._worldID=this.transform._worldID,this._cacheData.sprite._calculateBounds(),this._bounds.updateID=this._boundsID},q.s$.prototype._getCachedLocalBounds=function(){return this._cacheData.sprite.getLocalBounds(null)},q.s$.prototype._destroyCachedDisplayObject=function(){this._cacheData.sprite._texture.destroy(!0),this._cacheData.sprite=null,K.VL.removeFromCache(this._cacheData.textureCacheId),K.xE.removeFromCache(this._cacheData.textureCacheId),this._cacheData.textureCacheId=null},q.s$.prototype._cacheAsBitmapDestroy=function(y){this.cacheAsBitmap=!1,this.destroy(y)},q.s$.prototype.name=null,q.W2.prototype.getChildByName=function(y,T){for(let T=0,A=this.children.length;T<A;T++)if(this.children[T].name===y)return this.children[T];if(T)for(let T=0,A=this.children.length;T<A;T++){let A=this.children[T];if(!A.getChildByName)continue;let B=A.getChildByName(y,!0);if(B)return B}return null},q.s$.prototype.getGlobalPosition=function(y=new K.E9,T=!1){return this.parent?this.parent.toGlobal(this.position,y,T):(y.x=this.position.x,y.y=this.position.y),y};let AlphaFilter=class AlphaFilter extends K.wn{constructor(y=1){super(K.kP,"varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform float uAlpha;\n\nvoid main(void)\n{\n   gl_FragColor = texture2D(uSampler, vTextureCoord) * uAlpha;\n}\n",{uAlpha:1}),this.alpha=y}get alpha(){return this.uniforms.uAlpha}set alpha(y){this.uniforms.uAlpha=y}};let Z={5:[.153388,.221461,.250301],7:[.071303,.131514,.189879,.214607],9:[.028532,.067234,.124009,.179044,.20236],11:[.0093,.028002,.065984,.121703,.175713,.198596],13:[.002406,.009255,.027867,.065666,.121117,.174868,.197641],15:[489e-6,.002403,.009246,.02784,.065602,.120999,.174697,.197448]},ei=`
    attribute vec2 aVertexPosition;

    uniform mat3 projectionMatrix;

    uniform float strength;

    varying vec2 vBlurTexCoords[%size%];

    uniform vec4 inputSize;
    uniform vec4 outputFrame;

    vec4 filterVertexPosition( void )
    {
        vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

        return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
    }

    vec2 filterTextureCoord( void )
    {
        return aVertexPosition * (outputFrame.zw * inputSize.zw);
    }

    void main(void)
    {
        gl_Position = filterVertexPosition();

        vec2 textureCoord = filterTextureCoord();
        %blur%
    }`;let BlurFilterPass=class BlurFilterPass extends K.wn{constructor(y,T=8,A=4,B=K.wn.defaultResolution,F=5){let U=function(y,T){let A;let B=Math.ceil(y/2),F=ei,U="";A=T?"vBlurTexCoords[%index%] =  textureCoord + vec2(%sampleIndex% * strength, 0.0);":"vBlurTexCoords[%index%] =  textureCoord + vec2(0.0, %sampleIndex% * strength);";for(let T=0;T<y;T++){let y=A.replace("%index%",T.toString());U+=(y=y.replace("%sampleIndex%",`${T-(B-1)}.0`))+"\n"}return(F=F.replace("%blur%",U)).replace("%size%",y.toString())}(F,y),X=function(y){let T;let A=Z[y],B=A.length,F="varying vec2 vBlurTexCoords[%size%];\nuniform sampler2D uSampler;\nvoid main(void)\n{\n    gl_FragColor = vec4(0.0);\n    %blur%\n}",U="";for(let F=0;F<y;F++){let X="gl_FragColor += texture2D(uSampler, vBlurTexCoords[%index%]) * %value%;".replace("%index%",F.toString());T=F,F>=B&&(T=y-F-1),U+=(X=X.replace("%value%",A[T].toString()))+"\n"}return(F=F.replace("%blur%",U)).replace("%size%",y.toString())}(F);super(U,X),this.horizontal=y,this.resolution=B,this._quality=0,this.quality=A,this.blur=T}apply(y,T,A,B){if(A?this.horizontal?this.uniforms.strength=1/A.width*(A.width/T.width):this.uniforms.strength=1/A.height*(A.height/T.height):this.horizontal?this.uniforms.strength=1/y.renderer.width*(y.renderer.width/T.width):this.uniforms.strength=1/y.renderer.height*(y.renderer.height/T.height),this.uniforms.strength*=this.strength,this.uniforms.strength/=this.passes,1===this.passes)y.applyFilter(this,T,A,B);else{let F=y.getFilterTexture(),U=y.renderer,X=T,Y=F;this.state.blend=!1,y.applyFilter(this,X,Y,K.yl.CLEAR);for(let T=1;T<this.passes-1;T++){y.bindAndClear(X,K.yl.BLIT),this.uniforms.uSampler=Y;let T=Y;Y=X,X=T,U.shader.bind(this),U.geometry.draw(5)}this.state.blend=!0,y.applyFilter(this,Y,A,B),y.returnFilterTexture(F)}}get blur(){return this.strength}set blur(y){this.padding=1+2*Math.abs(y),this.strength=y}get quality(){return this._quality}set quality(y){this._quality=y,this.passes=y}};let BlurFilter=class BlurFilter extends K.wn{constructor(y=8,T=4,A=K.wn.defaultResolution,B=5){super(),this._repeatEdgePixels=!1,this.blurXFilter=new BlurFilterPass(!0,y,T,A,B),this.blurYFilter=new BlurFilterPass(!1,y,T,A,B),this.resolution=A,this.quality=T,this.blur=y,this.repeatEdgePixels=!1}apply(y,T,A,B){let F=Math.abs(this.blurXFilter.strength),U=Math.abs(this.blurYFilter.strength);if(F&&U){let F=y.getFilterTexture();this.blurXFilter.apply(y,T,F,K.yl.CLEAR),this.blurYFilter.apply(y,F,A,B),y.returnFilterTexture(F)}else U?this.blurYFilter.apply(y,T,A,B):this.blurXFilter.apply(y,T,A,B)}updatePadding(){this._repeatEdgePixels?this.padding=0:this.padding=2*Math.max(Math.abs(this.blurXFilter.strength),Math.abs(this.blurYFilter.strength))}get blur(){return this.blurXFilter.blur}set blur(y){this.blurXFilter.blur=this.blurYFilter.blur=y,this.updatePadding()}get quality(){return this.blurXFilter.quality}set quality(y){this.blurXFilter.quality=this.blurYFilter.quality=y}get blurX(){return this.blurXFilter.blur}set blurX(y){this.blurXFilter.blur=y,this.updatePadding()}get blurY(){return this.blurYFilter.blur}set blurY(y){this.blurYFilter.blur=y,this.updatePadding()}get blendMode(){return this.blurYFilter.blendMode}set blendMode(y){this.blurYFilter.blendMode=y}get repeatEdgePixels(){return this._repeatEdgePixels}set repeatEdgePixels(y){this._repeatEdgePixels=y,this.updatePadding()}};let ColorMatrixFilter=class ColorMatrixFilter extends K.wn{constructor(){let y={m:new Float32Array([1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0]),uAlpha:1};super(K.Y9,"varying vec2 vTextureCoord;\nuniform sampler2D uSampler;\nuniform float m[20];\nuniform float uAlpha;\n\nvoid main(void)\n{\n    vec4 c = texture2D(uSampler, vTextureCoord);\n\n    if (uAlpha == 0.0) {\n        gl_FragColor = c;\n        return;\n    }\n\n    // Un-premultiply alpha before applying the color matrix. See issue #3539.\n    if (c.a > 0.0) {\n      c.rgb /= c.a;\n    }\n\n    vec4 result;\n\n    result.r = (m[0] * c.r);\n        result.r += (m[1] * c.g);\n        result.r += (m[2] * c.b);\n        result.r += (m[3] * c.a);\n        result.r += m[4];\n\n    result.g = (m[5] * c.r);\n        result.g += (m[6] * c.g);\n        result.g += (m[7] * c.b);\n        result.g += (m[8] * c.a);\n        result.g += m[9];\n\n    result.b = (m[10] * c.r);\n       result.b += (m[11] * c.g);\n       result.b += (m[12] * c.b);\n       result.b += (m[13] * c.a);\n       result.b += m[14];\n\n    result.a = (m[15] * c.r);\n       result.a += (m[16] * c.g);\n       result.a += (m[17] * c.b);\n       result.a += (m[18] * c.a);\n       result.a += m[19];\n\n    vec3 rgb = mix(c.rgb, result.rgb, uAlpha);\n\n    // Premultiply alpha again.\n    rgb *= result.a;\n\n    gl_FragColor = vec4(rgb, result.a);\n}\n",y),this.alpha=1}_loadMatrix(y,T=!1){let A=y;T&&(this._multiply(A,this.uniforms.m,y),A=this._colorMatrix(A)),this.uniforms.m=A}_multiply(y,T,A){return y[0]=T[0]*A[0]+T[1]*A[5]+T[2]*A[10]+T[3]*A[15],y[1]=T[0]*A[1]+T[1]*A[6]+T[2]*A[11]+T[3]*A[16],y[2]=T[0]*A[2]+T[1]*A[7]+T[2]*A[12]+T[3]*A[17],y[3]=T[0]*A[3]+T[1]*A[8]+T[2]*A[13]+T[3]*A[18],y[4]=T[0]*A[4]+T[1]*A[9]+T[2]*A[14]+T[3]*A[19]+T[4],y[5]=T[5]*A[0]+T[6]*A[5]+T[7]*A[10]+T[8]*A[15],y[6]=T[5]*A[1]+T[6]*A[6]+T[7]*A[11]+T[8]*A[16],y[7]=T[5]*A[2]+T[6]*A[7]+T[7]*A[12]+T[8]*A[17],y[8]=T[5]*A[3]+T[6]*A[8]+T[7]*A[13]+T[8]*A[18],y[9]=T[5]*A[4]+T[6]*A[9]+T[7]*A[14]+T[8]*A[19]+T[9],y[10]=T[10]*A[0]+T[11]*A[5]+T[12]*A[10]+T[13]*A[15],y[11]=T[10]*A[1]+T[11]*A[6]+T[12]*A[11]+T[13]*A[16],y[12]=T[10]*A[2]+T[11]*A[7]+T[12]*A[12]+T[13]*A[17],y[13]=T[10]*A[3]+T[11]*A[8]+T[12]*A[13]+T[13]*A[18],y[14]=T[10]*A[4]+T[11]*A[9]+T[12]*A[14]+T[13]*A[19]+T[14],y[15]=T[15]*A[0]+T[16]*A[5]+T[17]*A[10]+T[18]*A[15],y[16]=T[15]*A[1]+T[16]*A[6]+T[17]*A[11]+T[18]*A[16],y[17]=T[15]*A[2]+T[16]*A[7]+T[17]*A[12]+T[18]*A[17],y[18]=T[15]*A[3]+T[16]*A[8]+T[17]*A[13]+T[18]*A[18],y[19]=T[15]*A[4]+T[16]*A[9]+T[17]*A[14]+T[18]*A[19]+T[19],y}_colorMatrix(y){let T=new Float32Array(y);return T[4]/=255,T[9]/=255,T[14]/=255,T[19]/=255,T}brightness(y,T){let A=[y,0,0,0,0,0,y,0,0,0,0,0,y,0,0,0,0,0,1,0];this._loadMatrix(A,T)}tint(y,T){let[A,B,F]=K.Il.shared.setValue(y).toArray(),U=[A,0,0,0,0,0,B,0,0,0,0,0,F,0,0,0,0,0,1,0];this._loadMatrix(U,T)}greyscale(y,T){let A=[y,y,y,0,0,y,y,y,0,0,y,y,y,0,0,0,0,0,1,0];this._loadMatrix(A,T)}blackAndWhite(y){this._loadMatrix([.3,.6,.1,0,0,.3,.6,.1,0,0,.3,.6,.1,0,0,0,0,0,1,0],y)}hue(y,T){y=(y||0)/180*Math.PI;let A=Math.cos(y),B=Math.sin(y),F=1/3,U=(0,Math.sqrt)(F),X=A+(1-A)*F,Y=F*(1-A)-U*B,K=F*(1-A)+U*B,q=F*(1-A)+U*B,Q=A+F*(1-A),J=F*(1-A)-U*B,Z=F*(1-A)-U*B,ei=F*(1-A)+U*B,es=A+F*(1-A),eh=[X,Y,K,0,0,q,Q,J,0,0,Z,ei,es,0,0,0,0,0,1,0];this._loadMatrix(eh,T)}contrast(y,T){let A=(y||0)+1,B=-.5*(A-1),F=[A,0,0,0,B,0,A,0,0,B,0,0,A,0,B,0,0,0,1,0];this._loadMatrix(F,T)}saturate(y=0,T){let A=2*y/3+1,B=-((A-1)*.5),F=[A,B,B,0,0,B,A,B,0,0,B,B,A,0,0,0,0,0,1,0];this._loadMatrix(F,T)}desaturate(){this.saturate(-1)}negative(y){this._loadMatrix([-1,0,0,1,0,0,-1,0,1,0,0,0,-1,1,0,0,0,0,1,0],y)}sepia(y){this._loadMatrix([.393,.7689999,.18899999,0,0,.349,.6859999,.16799999,0,0,.272,.5339999,.13099999,0,0,0,0,0,1,0],y)}technicolor(y){this._loadMatrix([1.9125277891456083,-.8545344976951645,-.09155508482755585,0,11.793603434377337,-.3087833385928097,1.7658908555458428,-.10601743074722245,0,-70.35205161461398,-.231103377548616,-.7501899197440212,1.847597816108189,0,30.950940869491138,0,0,0,1,0],y)}polaroid(y){this._loadMatrix([1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0],y)}toBGR(y){this._loadMatrix([0,0,1,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,1,0],y)}kodachrome(y){this._loadMatrix([1.1285582396593525,-.3967382283601348,-.03992559172921793,0,63.72958762196502,-.16404339962244616,1.0835251566291304,-.05498805115633132,0,24.732407896706203,-.16786010706155763,-.5603416277695248,1.6014850761964943,0,35.62982807460946,0,0,0,1,0],y)}browni(y){this._loadMatrix([.5997023498159715,.34553243048391263,-.2708298674538042,0,47.43192855600873,-.037703249837783157,.8609577587992641,.15059552388459913,0,-36.96841498319127,.24113635128153335,-.07441037908422492,.44972182064877153,0,-7.562075277591283,0,0,0,1,0],y)}vintage(y){this._loadMatrix([.6279345635605994,.3202183420819367,-.03965408211312453,0,9.651285835294123,.02578397704808868,.6441188644374771,.03259127616149294,0,7.462829176470591,.0466055556782719,-.0851232987247891,.5241648018700465,0,5.159190588235296,0,0,0,1,0],y)}colorTone(y,T,A,B,F){y=y||.2,T=T||.15,A=A||16770432,B=B||3375104;let U=K.Il.shared,[X,Y,q]=U.setValue(A).toArray(),[Q,J,Z]=U.setValue(B).toArray(),ei=[.3,.59,.11,0,0,X,Y,q,y,0,Q,J,Z,T,0,X-Q,Y-J,q-Z,0,0];this._loadMatrix(ei,F)}night(y,T){y=y||.1;let A=[-2*y,-y,0,0,0,-y,0,y,0,0,0,y,2*y,0,0,0,0,0,1,0];this._loadMatrix(A,T)}predator(y,T){this._loadMatrix([11.224130630493164*y,-4.794486999511719*y,-2.8746118545532227*y,0*y,.40342438220977783*y,-3.6330697536468506*y,9.193157196044922*y,-2.951810836791992*y,0*y,-1.316135048866272*y,-3.2184197902679443*y,-4.2375030517578125*y,7.476448059082031*y,0*y,.8044459223747253*y,0,0,0,1,0],T)}lsd(y){this._loadMatrix([2,-.4,.5,0,0,-.5,2,-.4,0,0,-.4,-.5,3,0,0,0,0,0,1,0],y)}reset(){this._loadMatrix([1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],!1)}get matrix(){return this.uniforms.m}set matrix(y){this.uniforms.m=y}get alpha(){return this.uniforms.uAlpha}set alpha(y){this.uniforms.uAlpha=y}};ColorMatrixFilter.prototype.grayscale=ColorMatrixFilter.prototype.greyscale;let DisplacementFilter=class DisplacementFilter extends K.wn{constructor(y,T){let A=new K.y3;y.renderable=!1,super("attribute vec2 aVertexPosition;\n\nuniform mat3 projectionMatrix;\nuniform mat3 filterMatrix;\n\nvarying vec2 vTextureCoord;\nvarying vec2 vFilterCoord;\n\nuniform vec4 inputSize;\nuniform vec4 outputFrame;\n\nvec4 filterVertexPosition( void )\n{\n    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;\n\n    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);\n}\n\nvec2 filterTextureCoord( void )\n{\n    return aVertexPosition * (outputFrame.zw * inputSize.zw);\n}\n\nvoid main(void)\n{\n	gl_Position = filterVertexPosition();\n	vTextureCoord = filterTextureCoord();\n	vFilterCoord = ( filterMatrix * vec3( vTextureCoord, 1.0)  ).xy;\n}\n","varying vec2 vFilterCoord;\nvarying vec2 vTextureCoord;\n\nuniform vec2 scale;\nuniform mat2 rotation;\nuniform sampler2D uSampler;\nuniform sampler2D mapSampler;\n\nuniform highp vec4 inputSize;\nuniform vec4 inputClamp;\n\nvoid main(void)\n{\n  vec4 map =  texture2D(mapSampler, vFilterCoord);\n\n  map -= 0.5;\n  map.xy = scale * inputSize.zw * (rotation * map.xy);\n\n  gl_FragColor = texture2D(uSampler, clamp(vec2(vTextureCoord.x + map.x, vTextureCoord.y + map.y), inputClamp.xy, inputClamp.zw));\n}\n",{mapSampler:y._texture,filterMatrix:A,scale:{x:1,y:1},rotation:new Float32Array([1,0,0,1])}),this.maskSprite=y,this.maskMatrix=A,null==T&&(T=20),this.scale=new K.E9(T,T)}apply(y,T,A,B){this.uniforms.filterMatrix=y.calculateSpriteMatrix(this.maskMatrix,this.maskSprite),this.uniforms.scale.x=this.scale.x,this.uniforms.scale.y=this.scale.y;let F=this.maskSprite.worldTransform,U=Math.sqrt(F.a*F.a+F.b*F.b),X=Math.sqrt(F.c*F.c+F.d*F.d);0!==U&&0!==X&&(this.uniforms.rotation[0]=F.a/U,this.uniforms.rotation[1]=F.b/U,this.uniforms.rotation[2]=F.c/X,this.uniforms.rotation[3]=F.d/X),y.applyFilter(this,T,A,B)}get map(){return this.uniforms.mapSampler}set map(y){this.uniforms.mapSampler=y}};let FXAAFilter=class FXAAFilter extends K.wn{constructor(){super("\nattribute vec2 aVertexPosition;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 v_rgbNW;\nvarying vec2 v_rgbNE;\nvarying vec2 v_rgbSW;\nvarying vec2 v_rgbSE;\nvarying vec2 v_rgbM;\n\nvarying vec2 vFragCoord;\n\nuniform vec4 inputSize;\nuniform vec4 outputFrame;\n\nvec4 filterVertexPosition( void )\n{\n    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;\n\n    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);\n}\n\nvoid texcoords(vec2 fragCoord, vec2 inverseVP,\n               out vec2 v_rgbNW, out vec2 v_rgbNE,\n               out vec2 v_rgbSW, out vec2 v_rgbSE,\n               out vec2 v_rgbM) {\n    v_rgbNW = (fragCoord + vec2(-1.0, -1.0)) * inverseVP;\n    v_rgbNE = (fragCoord + vec2(1.0, -1.0)) * inverseVP;\n    v_rgbSW = (fragCoord + vec2(-1.0, 1.0)) * inverseVP;\n    v_rgbSE = (fragCoord + vec2(1.0, 1.0)) * inverseVP;\n    v_rgbM = vec2(fragCoord * inverseVP);\n}\n\nvoid main(void) {\n\n   gl_Position = filterVertexPosition();\n\n   vFragCoord = aVertexPosition * outputFrame.zw;\n\n   texcoords(vFragCoord, inputSize.zw, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);\n}\n",'varying vec2 v_rgbNW;\nvarying vec2 v_rgbNE;\nvarying vec2 v_rgbSW;\nvarying vec2 v_rgbSE;\nvarying vec2 v_rgbM;\n\nvarying vec2 vFragCoord;\nuniform sampler2D uSampler;\nuniform highp vec4 inputSize;\n\n\n/**\n Basic FXAA implementation based on the code on geeks3d.com with the\n modification that the texture2DLod stuff was removed since it\'s\n unsupported by WebGL.\n\n --\n\n From:\n https://github.com/mitsuhiko/webgl-meincraft\n\n Copyright (c) 2011 by Armin Ronacher.\n\n Some rights reserved.\n\n Redistribution and use in source and binary forms, with or without\n modification, are permitted provided that the following conditions are\n met:\n\n * Redistributions of source code must retain the above copyright\n notice, this list of conditions and the following disclaimer.\n\n * Redistributions in binary form must reproduce the above\n copyright notice, this list of conditions and the following\n disclaimer in the documentation and/or other materials provided\n with the distribution.\n\n * The names of the contributors may not be used to endorse or\n promote products derived from this software without specific\n prior written permission.\n\n THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS\n "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT\n LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR\n A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT\n OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,\n SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT\n LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,\n DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY\n THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\n OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\n\n#ifndef FXAA_REDUCE_MIN\n#define FXAA_REDUCE_MIN   (1.0/ 128.0)\n#endif\n#ifndef FXAA_REDUCE_MUL\n#define FXAA_REDUCE_MUL   (1.0 / 8.0)\n#endif\n#ifndef FXAA_SPAN_MAX\n#define FXAA_SPAN_MAX     8.0\n#endif\n\n//optimized version for mobile, where dependent\n//texture reads can be a bottleneck\nvec4 fxaa(sampler2D tex, vec2 fragCoord, vec2 inverseVP,\n          vec2 v_rgbNW, vec2 v_rgbNE,\n          vec2 v_rgbSW, vec2 v_rgbSE,\n          vec2 v_rgbM) {\n    vec4 color;\n    vec3 rgbNW = texture2D(tex, v_rgbNW).xyz;\n    vec3 rgbNE = texture2D(tex, v_rgbNE).xyz;\n    vec3 rgbSW = texture2D(tex, v_rgbSW).xyz;\n    vec3 rgbSE = texture2D(tex, v_rgbSE).xyz;\n    vec4 texColor = texture2D(tex, v_rgbM);\n    vec3 rgbM  = texColor.xyz;\n    vec3 luma = vec3(0.299, 0.587, 0.114);\n    float lumaNW = dot(rgbNW, luma);\n    float lumaNE = dot(rgbNE, luma);\n    float lumaSW = dot(rgbSW, luma);\n    float lumaSE = dot(rgbSE, luma);\n    float lumaM  = dot(rgbM,  luma);\n    float lumaMin = min(lumaM, min(min(lumaNW, lumaNE), min(lumaSW, lumaSE)));\n    float lumaMax = max(lumaM, max(max(lumaNW, lumaNE), max(lumaSW, lumaSE)));\n\n    mediump vec2 dir;\n    dir.x = -((lumaNW + lumaNE) - (lumaSW + lumaSE));\n    dir.y =  ((lumaNW + lumaSW) - (lumaNE + lumaSE));\n\n    float dirReduce = max((lumaNW + lumaNE + lumaSW + lumaSE) *\n                          (0.25 * FXAA_REDUCE_MUL), FXAA_REDUCE_MIN);\n\n    float rcpDirMin = 1.0 / (min(abs(dir.x), abs(dir.y)) + dirReduce);\n    dir = min(vec2(FXAA_SPAN_MAX, FXAA_SPAN_MAX),\n              max(vec2(-FXAA_SPAN_MAX, -FXAA_SPAN_MAX),\n                  dir * rcpDirMin)) * inverseVP;\n\n    vec3 rgbA = 0.5 * (\n                       texture2D(tex, fragCoord * inverseVP + dir * (1.0 / 3.0 - 0.5)).xyz +\n                       texture2D(tex, fragCoord * inverseVP + dir * (2.0 / 3.0 - 0.5)).xyz);\n    vec3 rgbB = rgbA * 0.5 + 0.25 * (\n                                     texture2D(tex, fragCoord * inverseVP + dir * -0.5).xyz +\n                                     texture2D(tex, fragCoord * inverseVP + dir * 0.5).xyz);\n\n    float lumaB = dot(rgbB, luma);\n    if ((lumaB < lumaMin) || (lumaB > lumaMax))\n        color = vec4(rgbA, texColor.a);\n    else\n        color = vec4(rgbB, texColor.a);\n    return color;\n}\n\nvoid main() {\n\n      vec4 color;\n\n      color = fxaa(uSampler, vFragCoord, inputSize.zw, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);\n\n      gl_FragColor = color;\n}\n')}};let NoiseFilter=class NoiseFilter extends K.wn{constructor(y=.5,T=Math.random()){super(K.Y9,"precision highp float;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nuniform float uNoise;\nuniform float uSeed;\nuniform sampler2D uSampler;\n\nfloat rand(vec2 co)\n{\n    return fract(sin(dot(co.xy, vec2(12.9898, 78.233))) * 43758.5453);\n}\n\nvoid main()\n{\n    vec4 color = texture2D(uSampler, vTextureCoord);\n    float randomValue = rand(gl_FragCoord.xy * uSeed);\n    float diff = (randomValue - 0.5) * uNoise;\n\n    // Un-premultiply alpha before applying the color matrix. See issue #3539.\n    if (color.a > 0.0) {\n        color.rgb /= color.a;\n    }\n\n    color.r += diff;\n    color.g += diff;\n    color.b += diff;\n\n    // Premultiply alpha again.\n    color.rgb *= color.a;\n\n    gl_FragColor = color;\n}\n",{uNoise:0,uSeed:0}),this.noise=y,this.seed=T}get noise(){return this.uniforms.uNoise}set noise(y){this.uniforms.uNoise=y}get seed(){return this.uniforms.uSeed}set seed(y){this.uniforms.uSeed=y}};let es={AlphaFilter:AlphaFilter,BlurFilter:BlurFilter,BlurFilterPass:BlurFilterPass,ColorMatrixFilter:ColorMatrixFilter,DisplacementFilter:DisplacementFilter,FXAAFilter:FXAAFilter,NoiseFilter:NoiseFilter};Object.entries(es).forEach(([y,T])=>{Object.defineProperty(es,y,{get:()=>(K.P6.deprecation("7.1.0",`filters.${y} has moved to ${y}`),T)})});let eh=new class{constructor(){this.interactionFrequency=10,this._deltaTime=0,this._didMove=!1,this.tickerAdded=!1,this._pauseUpdate=!0}init(y){this.removeTickerListener(),this.events=y,this.interactionFrequency=10,this._deltaTime=0,this._didMove=!1,this.tickerAdded=!1,this._pauseUpdate=!0}get pauseUpdate(){return this._pauseUpdate}set pauseUpdate(y){this._pauseUpdate=y}addTickerListener(){!this.tickerAdded&&this.domElement&&(K.vB.system.add(this.tickerUpdate,this,K.uF.INTERACTION),this.tickerAdded=!0)}removeTickerListener(){this.tickerAdded&&(K.vB.system.remove(this.tickerUpdate,this),this.tickerAdded=!1)}pointerMoved(){this._didMove=!0}update(){if(!this.domElement||this._pauseUpdate)return;if(this._didMove){this._didMove=!1;return}let y=this.events.rootPointerEvent;this.events.supportsTouchEvents&&"touch"===y.pointerType||globalThis.document.dispatchEvent(new PointerEvent("pointermove",{clientX:y.clientX,clientY:y.clientY}))}tickerUpdate(y){this._deltaTime+=y,this._deltaTime<this.interactionFrequency||(this._deltaTime=0,this.update())}};let FederatedEvent=class FederatedEvent{constructor(y){this.bubbles=!0,this.cancelBubble=!0,this.cancelable=!1,this.composed=!1,this.defaultPrevented=!1,this.eventPhase=FederatedEvent.prototype.NONE,this.propagationStopped=!1,this.propagationImmediatelyStopped=!1,this.layer=new K.E9,this.page=new K.E9,this.NONE=0,this.CAPTURING_PHASE=1,this.AT_TARGET=2,this.BUBBLING_PHASE=3,this.manager=y}get layerX(){return this.layer.x}get layerY(){return this.layer.y}get pageX(){return this.page.x}get pageY(){return this.page.y}get data(){return this}composedPath(){return this.manager&&(!this.path||this.path[this.path.length-1]!==this.target)&&(this.path=this.target?this.manager.propagationPath(this.target):[]),this.path}initEvent(y,T,A){throw Error("initEvent() is a legacy DOM API. It is not implemented in the Federated Events API.")}initUIEvent(y,T,A,B,F){throw Error("initUIEvent() is a legacy DOM API. It is not implemented in the Federated Events API.")}preventDefault(){this.nativeEvent instanceof Event&&this.nativeEvent.cancelable&&this.nativeEvent.preventDefault(),this.defaultPrevented=!0}stopImmediatePropagation(){this.propagationImmediatelyStopped=!0}stopPropagation(){this.propagationStopped=!0}};let FederatedMouseEvent=class FederatedMouseEvent extends FederatedEvent{constructor(){super(...arguments),this.client=new K.E9,this.movement=new K.E9,this.offset=new K.E9,this.global=new K.E9,this.screen=new K.E9}get clientX(){return this.client.x}get clientY(){return this.client.y}get x(){return this.clientX}get y(){return this.clientY}get movementX(){return this.movement.x}get movementY(){return this.movement.y}get offsetX(){return this.offset.x}get offsetY(){return this.offset.y}get globalX(){return this.global.x}get globalY(){return this.global.y}get screenX(){return this.screen.x}get screenY(){return this.screen.y}getLocalPosition(y,T,A){return y.worldTransform.applyInverse(A||this.global,T)}getModifierState(y){return"getModifierState"in this.nativeEvent&&this.nativeEvent.getModifierState(y)}initMouseEvent(y,T,A,B,F,U,X,Y,K,q,Q,J,Z,ei,es){throw Error("Method not implemented.")}};let FederatedPointerEvent=class FederatedPointerEvent extends FederatedMouseEvent{constructor(){super(...arguments),this.width=0,this.height=0,this.isPrimary=!1}getCoalescedEvents(){return"pointermove"===this.type||"mousemove"===this.type||"touchmove"===this.type?[this]:[]}getPredictedEvents(){throw Error("getPredictedEvents is not supported!")}};let FederatedWheelEvent=class FederatedWheelEvent extends FederatedMouseEvent{constructor(){super(...arguments),this.DOM_DELTA_PIXEL=0,this.DOM_DELTA_LINE=1,this.DOM_DELTA_PAGE=2}};FederatedWheelEvent.DOM_DELTA_PIXEL=0,FederatedWheelEvent.DOM_DELTA_LINE=1,FederatedWheelEvent.DOM_DELTA_PAGE=2;let eu=new K.E9,ed=new K.E9;let EventBoundary=class EventBoundary{constructor(y){this.dispatch=new K.P6.EventEmitter,this.moveOnAll=!1,this.enableGlobalMoveEvents=!0,this.mappingState={trackingData:{}},this.eventPool=new Map,this._allInteractiveElements=[],this._hitElements=[],this._isPointerMoveEvent=!1,this.rootTarget=y,this.hitPruneFn=this.hitPruneFn.bind(this),this.hitTestFn=this.hitTestFn.bind(this),this.mapPointerDown=this.mapPointerDown.bind(this),this.mapPointerMove=this.mapPointerMove.bind(this),this.mapPointerOut=this.mapPointerOut.bind(this),this.mapPointerOver=this.mapPointerOver.bind(this),this.mapPointerUp=this.mapPointerUp.bind(this),this.mapPointerUpOutside=this.mapPointerUpOutside.bind(this),this.mapWheel=this.mapWheel.bind(this),this.mappingTable={},this.addEventMapping("pointerdown",this.mapPointerDown),this.addEventMapping("pointermove",this.mapPointerMove),this.addEventMapping("pointerout",this.mapPointerOut),this.addEventMapping("pointerleave",this.mapPointerOut),this.addEventMapping("pointerover",this.mapPointerOver),this.addEventMapping("pointerup",this.mapPointerUp),this.addEventMapping("pointerupoutside",this.mapPointerUpOutside),this.addEventMapping("wheel",this.mapWheel)}addEventMapping(y,T){this.mappingTable[y]||(this.mappingTable[y]=[]),this.mappingTable[y].push({fn:T,priority:0}),this.mappingTable[y].sort((y,T)=>y.priority-T.priority)}dispatchEvent(y,T){y.propagationStopped=!1,y.propagationImmediatelyStopped=!1,this.propagate(y,T),this.dispatch.emit(T||y.type,y)}mapEvent(y){if(!this.rootTarget)return;let T=this.mappingTable[y.type];if(T)for(let A=0,B=T.length;A<B;A++)T[A].fn(y);else console.warn(`[EventBoundary]: Event mapping not defined for ${y.type}`)}hitTest(y,T){eh.pauseUpdate=!0;let A=this._isPointerMoveEvent&&this.enableGlobalMoveEvents,B=this[A?"hitTestMoveRecursive":"hitTestRecursive"](this.rootTarget,this.rootTarget.eventMode,eu.set(y,T),this.hitTestFn,this.hitPruneFn);return B&&B[0]}propagate(y,T){if(!y.target)return;let A=y.composedPath();y.eventPhase=y.CAPTURING_PHASE;for(let B=0,F=A.length-1;B<F;B++)if(y.currentTarget=A[B],this.notifyTarget(y,T),y.propagationStopped||y.propagationImmediatelyStopped)return;if(y.eventPhase=y.AT_TARGET,y.currentTarget=y.target,this.notifyTarget(y,T),!y.propagationStopped&&!y.propagationImmediatelyStopped){y.eventPhase=y.BUBBLING_PHASE;for(let B=A.length-2;B>=0;B--)if(y.currentTarget=A[B],this.notifyTarget(y,T),y.propagationStopped||y.propagationImmediatelyStopped)return}}all(y,T,A=this._allInteractiveElements){if(0===A.length)return;y.eventPhase=y.BUBBLING_PHASE;let B=Array.isArray(T)?T:[T];for(let T=A.length-1;T>=0;T--)B.forEach(B=>{y.currentTarget=A[T],this.notifyTarget(y,B)})}propagationPath(y){let T=[y];for(let A=0;A<2048&&y!==this.rootTarget;A++){if(!y.parent)throw Error("Cannot find propagation path to disconnected target");T.push(y.parent),y=y.parent}return T.reverse(),T}hitTestMoveRecursive(y,T,A,B,F,U=!1){let X=!1;if(this._interactivePrune(y))return null;if(("dynamic"===y.eventMode||"dynamic"===T)&&(eh.pauseUpdate=!1),y.interactiveChildren&&y.children){let Y=y.children;for(let K=Y.length-1;K>=0;K--){let q=Y[K],Q=this.hitTestMoveRecursive(q,this._isInteractive(T)?T:q.eventMode,A,B,F,U||F(y,A));if(Q){if(Q.length>0&&!Q[Q.length-1].parent)continue;let T=y.isInteractive();(Q.length>0||T)&&(T&&this._allInteractiveElements.push(y),Q.push(y)),0===this._hitElements.length&&(this._hitElements=Q),X=!0}}}let Y=this._isInteractive(T),K=y.isInteractive();return(K&&K&&this._allInteractiveElements.push(y),U||this._hitElements.length>0)?null:X?this._hitElements:Y&&!F(y,A)&&B(y,A)?K?[y]:[]:null}hitTestRecursive(y,T,A,B,F){if(this._interactivePrune(y)||F(y,A))return null;if(("dynamic"===y.eventMode||"dynamic"===T)&&(eh.pauseUpdate=!1),y.interactiveChildren&&y.children){let U=y.children;for(let X=U.length-1;X>=0;X--){let Y=U[X],K=this.hitTestRecursive(Y,this._isInteractive(T)?T:Y.eventMode,A,B,F);if(K){if(K.length>0&&!K[K.length-1].parent)continue;let T=y.isInteractive();return(K.length>0||T)&&K.push(y),K}}}let U=this._isInteractive(T),X=y.isInteractive();return U&&B(y,A)?X?[y]:[]:null}_isInteractive(y){return"static"===y||"dynamic"===y}_interactivePrune(y){return!y||!!y.isMask||!y.visible||!y.renderable||"none"===y.eventMode||"passive"===y.eventMode&&!y.interactiveChildren||!!y.isMask}hitPruneFn(y,T){if(y.hitArea&&(y.worldTransform.applyInverse(T,ed),!y.hitArea.contains(ed.x,ed.y)))return!0;if(y._mask){let A=y._mask.isMaskData?y._mask.maskObject:y._mask;if(A&&!A.containsPoint?.(T))return!0}return!1}hitTestFn(y,T){return"passive"!==y.eventMode&&(!!y.hitArea||!!y.containsPoint&&y.containsPoint(T))}notifyTarget(y,T){T=T??y.type;let A=`on${T}`;y.currentTarget[A]?.(y);let B=y.eventPhase===y.CAPTURING_PHASE||y.eventPhase===y.AT_TARGET?`${T}capture`:T;this.notifyListeners(y,B),y.eventPhase===y.AT_TARGET&&this.notifyListeners(y,T)}mapPointerDown(y){if(!(y instanceof FederatedPointerEvent)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}let T=this.createPointerEvent(y);if(this.dispatchEvent(T,"pointerdown"),"touch"===T.pointerType)this.dispatchEvent(T,"touchstart");else if("mouse"===T.pointerType||"pen"===T.pointerType){let y=2===T.button;this.dispatchEvent(T,y?"rightdown":"mousedown")}let A=this.trackingData(y.pointerId);A.pressTargetsByButton[y.button]=T.composedPath(),this.freeEvent(T)}mapPointerMove(y){if(!(y instanceof FederatedPointerEvent)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}this._allInteractiveElements.length=0,this._hitElements.length=0,this._isPointerMoveEvent=!0;let T=this.createPointerEvent(y);this._isPointerMoveEvent=!1;let A="mouse"===T.pointerType||"pen"===T.pointerType,B=this.trackingData(y.pointerId),F=this.findMountedTarget(B.overTargets);if(B.overTargets?.length>0&&F!==T.target){let B="mousemove"===y.type?"mouseout":"pointerout",U=this.createPointerEvent(y,B,F);if(this.dispatchEvent(U,"pointerout"),A&&this.dispatchEvent(U,"mouseout"),!T.composedPath().includes(F)){let B=this.createPointerEvent(y,"pointerleave",F);for(B.eventPhase=B.AT_TARGET;B.target&&!T.composedPath().includes(B.target);)B.currentTarget=B.target,this.notifyTarget(B),A&&this.notifyTarget(B,"mouseleave"),B.target=B.target.parent;this.freeEvent(B)}this.freeEvent(U)}if(F!==T.target){let B="mousemove"===y.type?"mouseover":"pointerover",U=this.clonePointerEvent(T,B);this.dispatchEvent(U,"pointerover"),A&&this.dispatchEvent(U,"mouseover");let X=F?.parent;for(;X&&X!==this.rootTarget.parent&&X!==T.target;)X=X.parent;let Y=!X||X===this.rootTarget.parent;if(Y){let y=this.clonePointerEvent(T,"pointerenter");for(y.eventPhase=y.AT_TARGET;y.target&&y.target!==F&&y.target!==this.rootTarget.parent;)y.currentTarget=y.target,this.notifyTarget(y),A&&this.notifyTarget(y,"mouseenter"),y.target=y.target.parent;this.freeEvent(y)}this.freeEvent(U)}let U=[],X=this.enableGlobalMoveEvents??!0;this.moveOnAll?U.push("pointermove"):this.dispatchEvent(T,"pointermove"),X&&U.push("globalpointermove"),"touch"===T.pointerType&&(this.moveOnAll?U.splice(1,0,"touchmove"):this.dispatchEvent(T,"touchmove"),X&&U.push("globaltouchmove")),A&&(this.moveOnAll?U.splice(1,0,"mousemove"):this.dispatchEvent(T,"mousemove"),X&&U.push("globalmousemove"),this.cursor=T.target?.cursor),U.length>0&&this.all(T,U),this._allInteractiveElements.length=0,this._hitElements.length=0,B.overTargets=T.composedPath(),this.freeEvent(T)}mapPointerOver(y){if(!(y instanceof FederatedPointerEvent)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}let T=this.trackingData(y.pointerId),A=this.createPointerEvent(y),B="mouse"===A.pointerType||"pen"===A.pointerType;this.dispatchEvent(A,"pointerover"),B&&this.dispatchEvent(A,"mouseover"),"mouse"===A.pointerType&&(this.cursor=A.target?.cursor);let F=this.clonePointerEvent(A,"pointerenter");for(F.eventPhase=F.AT_TARGET;F.target&&F.target!==this.rootTarget.parent;)F.currentTarget=F.target,this.notifyTarget(F),B&&this.notifyTarget(F,"mouseenter"),F.target=F.target.parent;T.overTargets=A.composedPath(),this.freeEvent(A),this.freeEvent(F)}mapPointerOut(y){if(!(y instanceof FederatedPointerEvent)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}let T=this.trackingData(y.pointerId);if(T.overTargets){let A="mouse"===y.pointerType||"pen"===y.pointerType,B=this.findMountedTarget(T.overTargets),F=this.createPointerEvent(y,"pointerout",B);this.dispatchEvent(F),A&&this.dispatchEvent(F,"mouseout");let U=this.createPointerEvent(y,"pointerleave",B);for(U.eventPhase=U.AT_TARGET;U.target&&U.target!==this.rootTarget.parent;)U.currentTarget=U.target,this.notifyTarget(U),A&&this.notifyTarget(U,"mouseleave"),U.target=U.target.parent;T.overTargets=null,this.freeEvent(F),this.freeEvent(U)}this.cursor=null}mapPointerUp(y){if(!(y instanceof FederatedPointerEvent)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}let T=performance.now(),A=this.createPointerEvent(y);if(this.dispatchEvent(A,"pointerup"),"touch"===A.pointerType)this.dispatchEvent(A,"touchend");else if("mouse"===A.pointerType||"pen"===A.pointerType){let y=2===A.button;this.dispatchEvent(A,y?"rightup":"mouseup")}let B=this.trackingData(y.pointerId),F=this.findMountedTarget(B.pressTargetsByButton[y.button]),U=F;if(F&&!A.composedPath().includes(F)){let T=F;for(;T&&!A.composedPath().includes(T);){if(A.currentTarget=T,this.notifyTarget(A,"pointerupoutside"),"touch"===A.pointerType)this.notifyTarget(A,"touchendoutside");else if("mouse"===A.pointerType||"pen"===A.pointerType){let y=2===A.button;this.notifyTarget(A,y?"rightupoutside":"mouseupoutside")}T=T.parent}delete B.pressTargetsByButton[y.button],U=T}if(U){let F=this.clonePointerEvent(A,"click");F.target=U,F.path=null,B.clicksByButton[y.button]||(B.clicksByButton[y.button]={clickCount:0,target:F.target,timeStamp:T});let X=B.clicksByButton[y.button];if(X.target===F.target&&T-X.timeStamp<200?++X.clickCount:X.clickCount=1,X.target=F.target,X.timeStamp=T,F.detail=X.clickCount,"mouse"===F.pointerType){let y=2===F.button;this.dispatchEvent(F,y?"rightclick":"click")}else"touch"===F.pointerType&&this.dispatchEvent(F,"tap");this.dispatchEvent(F,"pointertap"),this.freeEvent(F)}this.freeEvent(A)}mapPointerUpOutside(y){if(!(y instanceof FederatedPointerEvent)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}let T=this.trackingData(y.pointerId),A=this.findMountedTarget(T.pressTargetsByButton[y.button]),B=this.createPointerEvent(y);if(A){let F=A;for(;F;)B.currentTarget=F,this.notifyTarget(B,"pointerupoutside"),"touch"===B.pointerType?this.notifyTarget(B,"touchendoutside"):("mouse"===B.pointerType||"pen"===B.pointerType)&&this.notifyTarget(B,2===B.button?"rightupoutside":"mouseupoutside"),F=F.parent;delete T.pressTargetsByButton[y.button]}this.freeEvent(B)}mapWheel(y){if(!(y instanceof FederatedWheelEvent)){console.warn("EventBoundary cannot map a non-wheel event as a wheel event");return}let T=this.createWheelEvent(y);this.dispatchEvent(T),this.freeEvent(T)}findMountedTarget(y){if(!y)return null;let T=y[0];for(let A=1;A<y.length;A++)if(y[A].parent===T)T=y[A];else break;return T}createPointerEvent(y,T,A){let B=this.allocateEvent(FederatedPointerEvent);return this.copyPointerData(y,B),this.copyMouseData(y,B),this.copyData(y,B),B.nativeEvent=y.nativeEvent,B.originalEvent=y,B.target=A??this.hitTest(B.global.x,B.global.y)??this._hitElements[0],"string"==typeof T&&(B.type=T),B}createWheelEvent(y){let T=this.allocateEvent(FederatedWheelEvent);return this.copyWheelData(y,T),this.copyMouseData(y,T),this.copyData(y,T),T.nativeEvent=y.nativeEvent,T.originalEvent=y,T.target=this.hitTest(T.global.x,T.global.y),T}clonePointerEvent(y,T){let A=this.allocateEvent(FederatedPointerEvent);return A.nativeEvent=y.nativeEvent,A.originalEvent=y.originalEvent,this.copyPointerData(y,A),this.copyMouseData(y,A),this.copyData(y,A),A.target=y.target,A.path=y.composedPath().slice(),A.type=T??A.type,A}copyWheelData(y,T){T.deltaMode=y.deltaMode,T.deltaX=y.deltaX,T.deltaY=y.deltaY,T.deltaZ=y.deltaZ}copyPointerData(y,T){y instanceof FederatedPointerEvent&&T instanceof FederatedPointerEvent&&(T.pointerId=y.pointerId,T.width=y.width,T.height=y.height,T.isPrimary=y.isPrimary,T.pointerType=y.pointerType,T.pressure=y.pressure,T.tangentialPressure=y.tangentialPressure,T.tiltX=y.tiltX,T.tiltY=y.tiltY,T.twist=y.twist)}copyMouseData(y,T){y instanceof FederatedMouseEvent&&T instanceof FederatedMouseEvent&&(T.altKey=y.altKey,T.button=y.button,T.buttons=y.buttons,T.client.copyFrom(y.client),T.ctrlKey=y.ctrlKey,T.metaKey=y.metaKey,T.movement.copyFrom(y.movement),T.screen.copyFrom(y.screen),T.shiftKey=y.shiftKey,T.global.copyFrom(y.global))}copyData(y,T){T.isTrusted=y.isTrusted,T.srcElement=y.srcElement,T.timeStamp=performance.now(),T.type=y.type,T.detail=y.detail,T.view=y.view,T.which=y.which,T.layer.copyFrom(y.layer),T.page.copyFrom(y.page)}trackingData(y){return this.mappingState.trackingData[y]||(this.mappingState.trackingData[y]={pressTargetsByButton:{},clicksByButton:{},overTarget:null}),this.mappingState.trackingData[y]}allocateEvent(y){this.eventPool.has(y)||this.eventPool.set(y,[]);let T=this.eventPool.get(y).pop()||new y(this);return T.eventPhase=T.NONE,T.currentTarget=null,T.path=null,T.target=null,T}freeEvent(y){if(y.manager!==this)throw Error("It is illegal to free an event not managed by this EventBoundary!");let T=y.constructor;this.eventPool.has(T)||this.eventPool.set(T,[]),this.eventPool.get(T).push(y)}notifyListeners(y,T){let A=y.currentTarget._events[T];if(A&&y.currentTarget.isInteractive()){if("fn"in A)A.once&&y.currentTarget.removeListener(T,A.fn,void 0,!0),A.fn.call(A.context,y);else for(let B=0,F=A.length;B<F&&!y.propagationImmediatelyStopped;B++)A[B].once&&y.currentTarget.removeListener(T,A[B].fn,void 0,!0),A[B].fn.call(A[B].context,y)}}};let ec={touchstart:"pointerdown",touchend:"pointerup",touchendoutside:"pointerupoutside",touchmove:"pointermove",touchcancel:"pointercancel"},ef=class{constructor(y){this.supportsTouchEvents="ontouchstart"in globalThis,this.supportsPointerEvents=!!globalThis.PointerEvent,this.domElement=null,this.resolution=1,this.renderer=y,this.rootBoundary=new EventBoundary(null),eh.init(this),this.autoPreventDefault=!0,this.eventsAdded=!1,this.rootPointerEvent=new FederatedPointerEvent(null),this.rootWheelEvent=new FederatedWheelEvent(null),this.cursorStyles={default:"inherit",pointer:"pointer"},this.features=new Proxy({...ef.defaultEventFeatures},{set:(y,T,A)=>("globalMove"===T&&(this.rootBoundary.enableGlobalMoveEvents=A),y[T]=A,!0)}),this.onPointerDown=this.onPointerDown.bind(this),this.onPointerMove=this.onPointerMove.bind(this),this.onPointerUp=this.onPointerUp.bind(this),this.onPointerOverOut=this.onPointerOverOut.bind(this),this.onWheel=this.onWheel.bind(this)}static get defaultEventMode(){return this._defaultEventMode}init(y){let{view:T,resolution:A}=this.renderer;this.setTargetElement(T),this.resolution=A,ef._defaultEventMode=y.eventMode??"auto",Object.assign(this.features,y.eventFeatures??{}),this.rootBoundary.enableGlobalMoveEvents=this.features.globalMove}resolutionChange(y){this.resolution=y}destroy(){this.setTargetElement(null),this.renderer=null}setCursor(y){y=y||"default";let T=!0;if(globalThis.OffscreenCanvas&&this.domElement instanceof OffscreenCanvas&&(T=!1),this.currentCursor===y)return;this.currentCursor=y;let A=this.cursorStyles[y];if(A)switch(typeof A){case"string":T&&(this.domElement.style.cursor=A);break;case"function":A(y);break;case"object":T&&Object.assign(this.domElement.style,A)}else T&&"string"==typeof y&&!Object.prototype.hasOwnProperty.call(this.cursorStyles,y)&&(this.domElement.style.cursor=y)}get pointer(){return this.rootPointerEvent}onPointerDown(y){if(!this.features.click||(this.rootBoundary.rootTarget=this.renderer.lastObjectRendered,this.supportsTouchEvents&&"touch"===y.pointerType))return;let T=this.normalizeToPointerData(y);if(this.autoPreventDefault&&T[0].isNormalized){let T=y.cancelable||!("cancelable"in y);T&&y.preventDefault()}for(let y=0,A=T.length;y<A;y++){let A=T[y],B=this.bootstrapEvent(this.rootPointerEvent,A);this.rootBoundary.mapEvent(B)}this.setCursor(this.rootBoundary.cursor)}onPointerMove(y){if(!this.features.move||(this.rootBoundary.rootTarget=this.renderer.lastObjectRendered,this.supportsTouchEvents&&"touch"===y.pointerType))return;eh.pointerMoved();let T=this.normalizeToPointerData(y);for(let y=0,A=T.length;y<A;y++){let A=this.bootstrapEvent(this.rootPointerEvent,T[y]);this.rootBoundary.mapEvent(A)}this.setCursor(this.rootBoundary.cursor)}onPointerUp(y){if(!this.features.click||(this.rootBoundary.rootTarget=this.renderer.lastObjectRendered,this.supportsTouchEvents&&"touch"===y.pointerType))return;let T=y.target;y.composedPath&&y.composedPath().length>0&&(T=y.composedPath()[0]);let A=T!==this.domElement?"outside":"",B=this.normalizeToPointerData(y);for(let y=0,T=B.length;y<T;y++){let T=this.bootstrapEvent(this.rootPointerEvent,B[y]);T.type+=A,this.rootBoundary.mapEvent(T)}this.setCursor(this.rootBoundary.cursor)}onPointerOverOut(y){if(!this.features.click||(this.rootBoundary.rootTarget=this.renderer.lastObjectRendered,this.supportsTouchEvents&&"touch"===y.pointerType))return;let T=this.normalizeToPointerData(y);for(let y=0,A=T.length;y<A;y++){let A=this.bootstrapEvent(this.rootPointerEvent,T[y]);this.rootBoundary.mapEvent(A)}this.setCursor(this.rootBoundary.cursor)}onWheel(y){if(!this.features.wheel)return;let T=this.normalizeWheelEvent(y);this.rootBoundary.rootTarget=this.renderer.lastObjectRendered,this.rootBoundary.mapEvent(T)}setTargetElement(y){this.removeEvents(),this.domElement=y,eh.domElement=y,this.addEvents()}addEvents(){if(this.eventsAdded||!this.domElement)return;eh.addTickerListener();let y=this.domElement.style;y&&(globalThis.navigator.msPointerEnabled?(y.msContentZooming="none",y.msTouchAction="none"):this.supportsPointerEvents&&(y.touchAction="none")),this.supportsPointerEvents?(globalThis.document.addEventListener("pointermove",this.onPointerMove,!0),this.domElement.addEventListener("pointerdown",this.onPointerDown,!0),this.domElement.addEventListener("pointerleave",this.onPointerOverOut,!0),this.domElement.addEventListener("pointerover",this.onPointerOverOut,!0),globalThis.addEventListener("pointerup",this.onPointerUp,!0)):(globalThis.document.addEventListener("mousemove",this.onPointerMove,!0),this.domElement.addEventListener("mousedown",this.onPointerDown,!0),this.domElement.addEventListener("mouseout",this.onPointerOverOut,!0),this.domElement.addEventListener("mouseover",this.onPointerOverOut,!0),globalThis.addEventListener("mouseup",this.onPointerUp,!0)),this.supportsTouchEvents&&(this.domElement.addEventListener("touchstart",this.onPointerDown,!0),this.domElement.addEventListener("touchend",this.onPointerUp,!0),this.domElement.addEventListener("touchmove",this.onPointerMove,!0)),this.domElement.addEventListener("wheel",this.onWheel,{passive:!0,capture:!0}),this.eventsAdded=!0}removeEvents(){if(!this.eventsAdded||!this.domElement)return;eh.removeTickerListener();let y=this.domElement.style;globalThis.navigator.msPointerEnabled?(y.msContentZooming="",y.msTouchAction=""):this.supportsPointerEvents&&(y.touchAction=""),this.supportsPointerEvents?(globalThis.document.removeEventListener("pointermove",this.onPointerMove,!0),this.domElement.removeEventListener("pointerdown",this.onPointerDown,!0),this.domElement.removeEventListener("pointerleave",this.onPointerOverOut,!0),this.domElement.removeEventListener("pointerover",this.onPointerOverOut,!0),globalThis.removeEventListener("pointerup",this.onPointerUp,!0)):(globalThis.document.removeEventListener("mousemove",this.onPointerMove,!0),this.domElement.removeEventListener("mousedown",this.onPointerDown,!0),this.domElement.removeEventListener("mouseout",this.onPointerOverOut,!0),this.domElement.removeEventListener("mouseover",this.onPointerOverOut,!0),globalThis.removeEventListener("mouseup",this.onPointerUp,!0)),this.supportsTouchEvents&&(this.domElement.removeEventListener("touchstart",this.onPointerDown,!0),this.domElement.removeEventListener("touchend",this.onPointerUp,!0),this.domElement.removeEventListener("touchmove",this.onPointerMove,!0)),this.domElement.removeEventListener("wheel",this.onWheel,!0),this.domElement=null,this.eventsAdded=!1}mapPositionToPoint(y,T,A){let B;B=this.domElement.parentElement?this.domElement.getBoundingClientRect():{x:0,y:0,width:this.domElement.width,height:this.domElement.height,left:0,top:0};let F=1/this.resolution;y.x=(T-B.left)*(this.domElement.width/B.width)*F,y.y=(A-B.top)*(this.domElement.height/B.height)*F}normalizeToPointerData(y){let T=[];if(this.supportsTouchEvents&&y instanceof TouchEvent)for(let A=0,B=y.changedTouches.length;A<B;A++){let B=y.changedTouches[A];void 0===B.button&&(B.button=0),void 0===B.buttons&&(B.buttons=1),void 0===B.isPrimary&&(B.isPrimary=1===y.touches.length&&"touchstart"===y.type),void 0===B.width&&(B.width=B.radiusX||1),void 0===B.height&&(B.height=B.radiusY||1),void 0===B.tiltX&&(B.tiltX=0),void 0===B.tiltY&&(B.tiltY=0),void 0===B.pointerType&&(B.pointerType="touch"),void 0===B.pointerId&&(B.pointerId=B.identifier||0),void 0===B.pressure&&(B.pressure=B.force||.5),void 0===B.twist&&(B.twist=0),void 0===B.tangentialPressure&&(B.tangentialPressure=0),void 0===B.layerX&&(B.layerX=B.offsetX=B.clientX),void 0===B.layerY&&(B.layerY=B.offsetY=B.clientY),B.isNormalized=!0,B.type=y.type,T.push(B)}else(!globalThis.MouseEvent||y instanceof MouseEvent&&(!this.supportsPointerEvents||!(y instanceof globalThis.PointerEvent)))&&(void 0===y.isPrimary&&(y.isPrimary=!0),void 0===y.width&&(y.width=1),void 0===y.height&&(y.height=1),void 0===y.tiltX&&(y.tiltX=0),void 0===y.tiltY&&(y.tiltY=0),void 0===y.pointerType&&(y.pointerType="mouse"),void 0===y.pointerId&&(y.pointerId=1),void 0===y.pressure&&(y.pressure=.5),void 0===y.twist&&(y.twist=0),void 0===y.tangentialPressure&&(y.tangentialPressure=0),y.isNormalized=!0),T.push(y);return T}normalizeWheelEvent(y){let T=this.rootWheelEvent;return this.transferMouseData(T,y),T.deltaX=y.deltaX,T.deltaY=y.deltaY,T.deltaZ=y.deltaZ,T.deltaMode=y.deltaMode,this.mapPositionToPoint(T.screen,y.clientX,y.clientY),T.global.copyFrom(T.screen),T.offset.copyFrom(T.screen),T.nativeEvent=y,T.type=y.type,T}bootstrapEvent(y,T){return y.originalEvent=null,y.nativeEvent=T,y.pointerId=T.pointerId,y.width=T.width,y.height=T.height,y.isPrimary=T.isPrimary,y.pointerType=T.pointerType,y.pressure=T.pressure,y.tangentialPressure=T.tangentialPressure,y.tiltX=T.tiltX,y.tiltY=T.tiltY,y.twist=T.twist,this.transferMouseData(y,T),this.mapPositionToPoint(y.screen,T.clientX,T.clientY),y.global.copyFrom(y.screen),y.offset.copyFrom(y.screen),y.isTrusted=T.isTrusted,"pointerleave"===y.type&&(y.type="pointerout"),y.type.startsWith("mouse")&&(y.type=y.type.replace("mouse","pointer")),y.type.startsWith("touch")&&(y.type=ec[y.type]||y.type),y}transferMouseData(y,T){y.isTrusted=T.isTrusted,y.srcElement=T.srcElement,y.timeStamp=performance.now(),y.type=T.type,y.altKey=T.altKey,y.button=T.button,y.buttons=T.buttons,y.client.x=T.clientX,y.client.y=T.clientY,y.ctrlKey=T.ctrlKey,y.metaKey=T.metaKey,y.movement.x=T.movementX,y.movement.y=T.movementY,y.page.x=T.pageX,y.page.y=T.pageY,y.relatedTarget=null,y.shiftKey=T.shiftKey}};function convertEventModeToInteractiveMode(y){return"dynamic"===y||"static"===y}ef.extension={name:"events",type:[K.nw.RendererSystem,K.nw.CanvasRendererSystem]},ef.defaultEventFeatures={move:!0,globalMove:!0,click:!0,wheel:!0},K.Rw.add(ef),q.s$.mixin({onclick:null,onmousedown:null,onmouseenter:null,onmouseleave:null,onmousemove:null,onglobalmousemove:null,onmouseout:null,onmouseover:null,onmouseup:null,onmouseupoutside:null,onpointercancel:null,onpointerdown:null,onpointerenter:null,onpointerleave:null,onpointermove:null,onglobalpointermove:null,onpointerout:null,onpointerover:null,onpointertap:null,onpointerup:null,onpointerupoutside:null,onrightclick:null,onrightdown:null,onrightup:null,onrightupoutside:null,ontap:null,ontouchcancel:null,ontouchend:null,ontouchendoutside:null,ontouchmove:null,onglobaltouchmove:null,ontouchstart:null,onwheel:null,_internalInteractive:void 0,get interactive(){return this._internalInteractive??convertEventModeToInteractiveMode(ef.defaultEventMode)},set interactive(value){K.P6.deprecation("7.2.0","Setting interactive is deprecated, use eventMode = 'none'/'passive'/'auto'/'static'/'dynamic' instead."),this._internalInteractive=value,this.eventMode=value?"static":"auto"},_internalEventMode:void 0,get eventMode(){return this._internalEventMode??ef.defaultEventMode},set eventMode(value){this._internalInteractive=convertEventModeToInteractiveMode(value),this._internalEventMode=value},isInteractive(){return"static"===this.eventMode||"dynamic"===this.eventMode},interactiveChildren:!0,hitArea:null,addEventListener(y,T,A){let B="boolean"==typeof A&&A||"object"==typeof A&&A.capture,F="function"==typeof T?void 0:T;y=B?`${y}capture`:y,T="function"==typeof T?T:T.handleEvent,this.on(y,T,F)},removeEventListener(y,T,A){let B="boolean"==typeof A&&A||"object"==typeof A&&A.capture,F="function"==typeof T?void 0:T;y=B?`${y}capture`:y,T="function"==typeof T?T:T.handleEvent,this.off(y,T,F)},dispatchEvent(y){if(!(y instanceof FederatedEvent))throw Error("DisplayObject cannot propagate events outside of the Federated Events API");return y.defaultPrevented=!1,y.path=null,y.target=this,y.manager.dispatchEvent(y),!y.defaultPrevented}}),q.s$.mixin({accessible:!1,accessibleTitle:null,accessibleHint:null,tabIndex:0,_accessibleActive:!1,_accessibleDiv:null,accessibleType:"button",accessiblePointerEvents:"auto",accessibleChildren:!0,renderId:-1});let AccessibilityManager=class AccessibilityManager{constructor(y){this.debug=!1,this._isActive=!1,this._isMobileAccessibility=!1,this.pool=[],this.renderId=0,this.children=[],this.androidUpdateCount=0,this.androidUpdateFrequency=500,this._hookDiv=null,(K.P6.isMobile.tablet||K.P6.isMobile.phone)&&this.createTouchHook();let T=document.createElement("div");T.style.width="100px",T.style.height="100px",T.style.position="absolute",T.style.top="0px",T.style.left="0px",T.style.zIndex="2",this.div=T,this.renderer=y,this._onKeyDown=this._onKeyDown.bind(this),this._onMouseMove=this._onMouseMove.bind(this),globalThis.addEventListener("keydown",this._onKeyDown,!1)}get isActive(){return this._isActive}get isMobileAccessibility(){return this._isMobileAccessibility}createTouchHook(){let y=document.createElement("button");y.style.width="1px",y.style.height="1px",y.style.position="absolute",y.style.top="-1000px",y.style.left="-1000px",y.style.zIndex="2",y.style.backgroundColor="#FF0000",y.title="select to enable accessibility for this content",y.addEventListener("focus",()=>{this._isMobileAccessibility=!0,this.activate(),this.destroyTouchHook()}),document.body.appendChild(y),this._hookDiv=y}destroyTouchHook(){this._hookDiv&&(document.body.removeChild(this._hookDiv),this._hookDiv=null)}activate(){this._isActive||(this._isActive=!0,globalThis.document.addEventListener("mousemove",this._onMouseMove,!0),globalThis.removeEventListener("keydown",this._onKeyDown,!1),this.renderer.on("postrender",this.update,this),this.renderer.view.parentNode?.appendChild(this.div))}deactivate(){this._isActive&&!this._isMobileAccessibility&&(this._isActive=!1,globalThis.document.removeEventListener("mousemove",this._onMouseMove,!0),globalThis.addEventListener("keydown",this._onKeyDown,!1),this.renderer.off("postrender",this.update),this.div.parentNode?.removeChild(this.div))}updateAccessibleObjects(y){if(!y.visible||!y.accessibleChildren)return;y.accessible&&y.isInteractive()&&(y._accessibleActive||this.addChild(y),y.renderId=this.renderId);let T=y.children;if(T)for(let y=0;y<T.length;y++)this.updateAccessibleObjects(T[y])}update(){let y=performance.now();if(K.P6.isMobile.android.device&&y<this.androidUpdateCount||(this.androidUpdateCount=y+this.androidUpdateFrequency,!this.renderer.renderingToScreen))return;this.renderer.lastObjectRendered&&this.updateAccessibleObjects(this.renderer.lastObjectRendered);let{x:T,y:A,width:B,height:F}=this.renderer.view.getBoundingClientRect(),{width:U,height:X,resolution:Y}=this.renderer,q=B/U*Y,Q=F/X*Y,J=this.div;J.style.left=`${T}px`,J.style.top=`${A}px`,J.style.width=`${U}px`,J.style.height=`${X}px`;for(let y=0;y<this.children.length;y++){let T=this.children[y];if(T.renderId!==this.renderId)T._accessibleActive=!1,K.P6.removeItems(this.children,y,1),this.div.removeChild(T._accessibleDiv),this.pool.push(T._accessibleDiv),T._accessibleDiv=null,y--;else{J=T._accessibleDiv;let y=T.hitArea,A=T.worldTransform;T.hitArea?(J.style.left=`${(A.tx+y.x*A.a)*q}px`,J.style.top=`${(A.ty+y.y*A.d)*Q}px`,J.style.width=`${y.width*A.a*q}px`,J.style.height=`${y.height*A.d*Q}px`):(y=T.getBounds(),this.capHitArea(y),J.style.left=`${y.x*q}px`,J.style.top=`${y.y*Q}px`,J.style.width=`${y.width*q}px`,J.style.height=`${y.height*Q}px`,J.title!==T.accessibleTitle&&null!==T.accessibleTitle&&(J.title=T.accessibleTitle),J.getAttribute("aria-label")!==T.accessibleHint&&null!==T.accessibleHint&&J.setAttribute("aria-label",T.accessibleHint)),(T.accessibleTitle!==J.title||T.tabIndex!==J.tabIndex)&&(J.title=T.accessibleTitle,J.tabIndex=T.tabIndex,this.debug&&this.updateDebugHTML(J))}}this.renderId++}updateDebugHTML(y){y.innerHTML=`type: ${y.type}</br> title : ${y.title}</br> tabIndex: ${y.tabIndex}`}capHitArea(y){y.x<0&&(y.width+=y.x,y.x=0),y.y<0&&(y.height+=y.y,y.y=0);let{width:T,height:A}=this.renderer;y.x+y.width>T&&(y.width=T-y.x),y.y+y.height>A&&(y.height=A-y.y)}addChild(y){let T=this.pool.pop();T||((T=document.createElement("button")).style.width="100px",T.style.height="100px",T.style.backgroundColor=this.debug?"rgba(255,255,255,0.5)":"transparent",T.style.position="absolute",T.style.zIndex="2",T.style.borderStyle="none",navigator.userAgent.toLowerCase().includes("chrome")?T.setAttribute("aria-live","off"):T.setAttribute("aria-live","polite"),navigator.userAgent.match(/rv:.*Gecko\//)?T.setAttribute("aria-relevant","additions"):T.setAttribute("aria-relevant","text"),T.addEventListener("click",this._onClick.bind(this)),T.addEventListener("focus",this._onFocus.bind(this)),T.addEventListener("focusout",this._onFocusOut.bind(this))),T.style.pointerEvents=y.accessiblePointerEvents,T.type=y.accessibleType,y.accessibleTitle&&null!==y.accessibleTitle?T.title=y.accessibleTitle:y.accessibleHint&&null!==y.accessibleHint||(T.title=`displayObject ${y.tabIndex}`),y.accessibleHint&&null!==y.accessibleHint&&T.setAttribute("aria-label",y.accessibleHint),this.debug&&this.updateDebugHTML(T),y._accessibleActive=!0,y._accessibleDiv=T,T.displayObject=y,this.children.push(y),this.div.appendChild(y._accessibleDiv),y._accessibleDiv.tabIndex=y.tabIndex}_dispatchEvent(y,T){let{displayObject:A}=y.target,B=this.renderer.events.rootBoundary,F=Object.assign(new FederatedEvent(B),{target:A});B.rootTarget=this.renderer.lastObjectRendered,T.forEach(y=>B.dispatchEvent(F,y))}_onClick(y){this._dispatchEvent(y,["click","pointertap","tap"])}_onFocus(y){y.target.getAttribute("aria-live")||y.target.setAttribute("aria-live","assertive"),this._dispatchEvent(y,["mouseover"])}_onFocusOut(y){y.target.getAttribute("aria-live")||y.target.setAttribute("aria-live","polite"),this._dispatchEvent(y,["mouseout"])}_onKeyDown(y){9===y.keyCode&&this.activate()}_onMouseMove(y){(0!==y.movementX||0!==y.movementY)&&this.deactivate()}destroy(){this.destroyTouchHook(),this.div=null,globalThis.document.removeEventListener("mousemove",this._onMouseMove,!0),globalThis.removeEventListener("keydown",this._onKeyDown),this.pool=null,this.children=null,this.renderer=null}};AccessibilityManager.extension={name:"accessibility",type:[K.nw.RendererPlugin,K.nw.CanvasRendererPlugin]},K.Rw.add(AccessibilityManager),A(89804);var ep=A(61572),em=((U=em||{})[U.COMPRESSED_RGB_S3TC_DXT1_EXT=33776]="COMPRESSED_RGB_S3TC_DXT1_EXT",U[U.COMPRESSED_RGBA_S3TC_DXT1_EXT=33777]="COMPRESSED_RGBA_S3TC_DXT1_EXT",U[U.COMPRESSED_RGBA_S3TC_DXT3_EXT=33778]="COMPRESSED_RGBA_S3TC_DXT3_EXT",U[U.COMPRESSED_RGBA_S3TC_DXT5_EXT=33779]="COMPRESSED_RGBA_S3TC_DXT5_EXT",U[U.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT=35917]="COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT",U[U.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT=35918]="COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT",U[U.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT=35919]="COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT",U[U.COMPRESSED_SRGB_S3TC_DXT1_EXT=35916]="COMPRESSED_SRGB_S3TC_DXT1_EXT",U[U.COMPRESSED_R11_EAC=37488]="COMPRESSED_R11_EAC",U[U.COMPRESSED_SIGNED_R11_EAC=37489]="COMPRESSED_SIGNED_R11_EAC",U[U.COMPRESSED_RG11_EAC=37490]="COMPRESSED_RG11_EAC",U[U.COMPRESSED_SIGNED_RG11_EAC=37491]="COMPRESSED_SIGNED_RG11_EAC",U[U.COMPRESSED_RGB8_ETC2=37492]="COMPRESSED_RGB8_ETC2",U[U.COMPRESSED_RGBA8_ETC2_EAC=37496]="COMPRESSED_RGBA8_ETC2_EAC",U[U.COMPRESSED_SRGB8_ETC2=37493]="COMPRESSED_SRGB8_ETC2",U[U.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC=37497]="COMPRESSED_SRGB8_ALPHA8_ETC2_EAC",U[U.COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2=37494]="COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2",U[U.COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2=37495]="COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2",U[U.COMPRESSED_RGB_PVRTC_4BPPV1_IMG=35840]="COMPRESSED_RGB_PVRTC_4BPPV1_IMG",U[U.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG=35842]="COMPRESSED_RGBA_PVRTC_4BPPV1_IMG",U[U.COMPRESSED_RGB_PVRTC_2BPPV1_IMG=35841]="COMPRESSED_RGB_PVRTC_2BPPV1_IMG",U[U.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG=35843]="COMPRESSED_RGBA_PVRTC_2BPPV1_IMG",U[U.COMPRESSED_RGB_ETC1_WEBGL=36196]="COMPRESSED_RGB_ETC1_WEBGL",U[U.COMPRESSED_RGB_ATC_WEBGL=35986]="COMPRESSED_RGB_ATC_WEBGL",U[U.COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL=35986]="COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL",U[U.COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL=34798]="COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL",U[U.COMPRESSED_RGBA_ASTC_4x4_KHR=37808]="COMPRESSED_RGBA_ASTC_4x4_KHR",U);let eg={33776:.5,33777:.5,33778:1,33779:1,35916:.5,35917:.5,35918:1,35919:1,37488:.5,37489:.5,37490:1,37491:1,37492:.5,37496:1,37493:.5,37497:1,37494:.5,37495:.5,35840:.5,35842:.5,35841:.25,35843:.25,36196:.5,35986:.5,35986:1,34798:1,37808:1};function getCompressedTextureExtensions(){F={s3tc:B.getExtension("WEBGL_compressed_texture_s3tc"),s3tc_sRGB:B.getExtension("WEBGL_compressed_texture_s3tc_srgb"),etc:B.getExtension("WEBGL_compressed_texture_etc"),etc1:B.getExtension("WEBGL_compressed_texture_etc1"),pvrtc:B.getExtension("WEBGL_compressed_texture_pvrtc")||B.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc"),atc:B.getExtension("WEBGL_compressed_texture_atc"),astc:B.getExtension("WEBGL_compressed_texture_astc")}}let e_={extension:{type:K.nw.DetectionParser,priority:2},test:async()=>{let y=K.Xd.ADAPTER.createCanvas(),T=y.getContext("webgl");return T?(B=T,!0):(console.warn("WebGL not available for compressed textures."),!1)},add:async y=>{F||getCompressedTextureExtensions();let T=[];for(let y in F){let A=F[y];A&&T.push(y)}return[...T,...y]},remove:async y=>(F||getCompressedTextureExtensions(),y.filter(y=>!(y in F)))};K.Rw.add(e_);let BlobResource=class BlobResource extends K.qm{constructor(y,T={width:1,height:1,autoLoad:!0}){let A,B;"string"==typeof y?(A=y,B=new Uint8Array):(A=null,B=y),super(B,T),this.origin=A,this.buffer=B?new K.Rv(B):null,this._load=null,this.loaded=!1,null!==this.origin&&!1!==T.autoLoad&&this.load(),null===this.origin&&this.buffer&&(this._load=Promise.resolve(this),this.loaded=!0,this.onBlobLoaded(this.buffer.rawBinaryData))}onBlobLoaded(y){}load(){return this._load||(this._load=fetch(this.origin).then(y=>y.blob()).then(y=>y.arrayBuffer()).then(y=>(this.data=new Uint32Array(y),this.buffer=new K.Rv(y),this.loaded=!0,this.onBlobLoaded(y),this.update(),this))),this._load}};let CompressedTextureResource=class CompressedTextureResource extends BlobResource{constructor(y,T){super(y,T),this.format=T.format,this.levels=T.levels||1,this._width=T.width,this._height=T.height,this._extension=CompressedTextureResource._formatToExtension(this.format),(T.levelBuffers||this.buffer)&&(this._levelBuffers=T.levelBuffers||CompressedTextureResource._createLevelBuffers(y instanceof Uint8Array?y:this.buffer.uint8View,this.format,this.levels,4,4,this.width,this.height))}upload(y,T,A){let B=y.gl,F=y.context.extensions[this._extension];if(!F)throw Error(`${this._extension} textures are not supported on the current machine`);if(!this._levelBuffers)return!1;for(let y=0,T=this.levels;y<T;y++){let{levelID:T,levelWidth:A,levelHeight:F,levelBuffer:U}=this._levelBuffers[y];B.compressedTexImage2D(B.TEXTURE_2D,T,this.format,A,F,0,U)}return!0}onBlobLoaded(){this._levelBuffers=CompressedTextureResource._createLevelBuffers(this.buffer.uint8View,this.format,this.levels,4,4,this.width,this.height)}static _formatToExtension(y){if(y>=33776&&y<=33779)return"s3tc";if(y>=37488&&y<=37497)return"etc";if(y>=35840&&y<=35843)return"pvrtc";if(y>=36196)return"etc1";if(y>=35986&&y<=34798)return"atc";throw Error("Invalid (compressed) texture format given!")}static _createLevelBuffers(y,T,A,B,F,U,X){let Y=Array(A),K=y.byteOffset,q=U,Q=X,J=q+B-1&~(B-1),Z=Q+F-1&~(F-1),ei=J*Z*eg[T];for(let U=0;U<A;U++)Y[U]={levelID:U,levelWidth:A>1?q:J,levelHeight:A>1?Q:Z,levelBuffer:new Uint8Array(y.buffer,K,ei)},K+=ei,Q=Q>>1||1,ei=(J=(q=q>>1||1)+B-1&~(B-1))*(Z=Q+F-1&~(F-1))*eg[T];return Y}};let ev={FOURCC:2},ey={DXGI_FORMAT:0,RESOURCE_DIMENSION:1,MISC_FLAG:2,ARRAY_SIZE:3};var ex=((X=ex||{})[X.DXGI_FORMAT_UNKNOWN=0]="DXGI_FORMAT_UNKNOWN",X[X.DXGI_FORMAT_R32G32B32A32_TYPELESS=1]="DXGI_FORMAT_R32G32B32A32_TYPELESS",X[X.DXGI_FORMAT_R32G32B32A32_FLOAT=2]="DXGI_FORMAT_R32G32B32A32_FLOAT",X[X.DXGI_FORMAT_R32G32B32A32_UINT=3]="DXGI_FORMAT_R32G32B32A32_UINT",X[X.DXGI_FORMAT_R32G32B32A32_SINT=4]="DXGI_FORMAT_R32G32B32A32_SINT",X[X.DXGI_FORMAT_R32G32B32_TYPELESS=5]="DXGI_FORMAT_R32G32B32_TYPELESS",X[X.DXGI_FORMAT_R32G32B32_FLOAT=6]="DXGI_FORMAT_R32G32B32_FLOAT",X[X.DXGI_FORMAT_R32G32B32_UINT=7]="DXGI_FORMAT_R32G32B32_UINT",X[X.DXGI_FORMAT_R32G32B32_SINT=8]="DXGI_FORMAT_R32G32B32_SINT",X[X.DXGI_FORMAT_R16G16B16A16_TYPELESS=9]="DXGI_FORMAT_R16G16B16A16_TYPELESS",X[X.DXGI_FORMAT_R16G16B16A16_FLOAT=10]="DXGI_FORMAT_R16G16B16A16_FLOAT",X[X.DXGI_FORMAT_R16G16B16A16_UNORM=11]="DXGI_FORMAT_R16G16B16A16_UNORM",X[X.DXGI_FORMAT_R16G16B16A16_UINT=12]="DXGI_FORMAT_R16G16B16A16_UINT",X[X.DXGI_FORMAT_R16G16B16A16_SNORM=13]="DXGI_FORMAT_R16G16B16A16_SNORM",X[X.DXGI_FORMAT_R16G16B16A16_SINT=14]="DXGI_FORMAT_R16G16B16A16_SINT",X[X.DXGI_FORMAT_R32G32_TYPELESS=15]="DXGI_FORMAT_R32G32_TYPELESS",X[X.DXGI_FORMAT_R32G32_FLOAT=16]="DXGI_FORMAT_R32G32_FLOAT",X[X.DXGI_FORMAT_R32G32_UINT=17]="DXGI_FORMAT_R32G32_UINT",X[X.DXGI_FORMAT_R32G32_SINT=18]="DXGI_FORMAT_R32G32_SINT",X[X.DXGI_FORMAT_R32G8X24_TYPELESS=19]="DXGI_FORMAT_R32G8X24_TYPELESS",X[X.DXGI_FORMAT_D32_FLOAT_S8X24_UINT=20]="DXGI_FORMAT_D32_FLOAT_S8X24_UINT",X[X.DXGI_FORMAT_R32_FLOAT_X8X24_TYPELESS=21]="DXGI_FORMAT_R32_FLOAT_X8X24_TYPELESS",X[X.DXGI_FORMAT_X32_TYPELESS_G8X24_UINT=22]="DXGI_FORMAT_X32_TYPELESS_G8X24_UINT",X[X.DXGI_FORMAT_R10G10B10A2_TYPELESS=23]="DXGI_FORMAT_R10G10B10A2_TYPELESS",X[X.DXGI_FORMAT_R10G10B10A2_UNORM=24]="DXGI_FORMAT_R10G10B10A2_UNORM",X[X.DXGI_FORMAT_R10G10B10A2_UINT=25]="DXGI_FORMAT_R10G10B10A2_UINT",X[X.DXGI_FORMAT_R11G11B10_FLOAT=26]="DXGI_FORMAT_R11G11B10_FLOAT",X[X.DXGI_FORMAT_R8G8B8A8_TYPELESS=27]="DXGI_FORMAT_R8G8B8A8_TYPELESS",X[X.DXGI_FORMAT_R8G8B8A8_UNORM=28]="DXGI_FORMAT_R8G8B8A8_UNORM",X[X.DXGI_FORMAT_R8G8B8A8_UNORM_SRGB=29]="DXGI_FORMAT_R8G8B8A8_UNORM_SRGB",X[X.DXGI_FORMAT_R8G8B8A8_UINT=30]="DXGI_FORMAT_R8G8B8A8_UINT",X[X.DXGI_FORMAT_R8G8B8A8_SNORM=31]="DXGI_FORMAT_R8G8B8A8_SNORM",X[X.DXGI_FORMAT_R8G8B8A8_SINT=32]="DXGI_FORMAT_R8G8B8A8_SINT",X[X.DXGI_FORMAT_R16G16_TYPELESS=33]="DXGI_FORMAT_R16G16_TYPELESS",X[X.DXGI_FORMAT_R16G16_FLOAT=34]="DXGI_FORMAT_R16G16_FLOAT",X[X.DXGI_FORMAT_R16G16_UNORM=35]="DXGI_FORMAT_R16G16_UNORM",X[X.DXGI_FORMAT_R16G16_UINT=36]="DXGI_FORMAT_R16G16_UINT",X[X.DXGI_FORMAT_R16G16_SNORM=37]="DXGI_FORMAT_R16G16_SNORM",X[X.DXGI_FORMAT_R16G16_SINT=38]="DXGI_FORMAT_R16G16_SINT",X[X.DXGI_FORMAT_R32_TYPELESS=39]="DXGI_FORMAT_R32_TYPELESS",X[X.DXGI_FORMAT_D32_FLOAT=40]="DXGI_FORMAT_D32_FLOAT",X[X.DXGI_FORMAT_R32_FLOAT=41]="DXGI_FORMAT_R32_FLOAT",X[X.DXGI_FORMAT_R32_UINT=42]="DXGI_FORMAT_R32_UINT",X[X.DXGI_FORMAT_R32_SINT=43]="DXGI_FORMAT_R32_SINT",X[X.DXGI_FORMAT_R24G8_TYPELESS=44]="DXGI_FORMAT_R24G8_TYPELESS",X[X.DXGI_FORMAT_D24_UNORM_S8_UINT=45]="DXGI_FORMAT_D24_UNORM_S8_UINT",X[X.DXGI_FORMAT_R24_UNORM_X8_TYPELESS=46]="DXGI_FORMAT_R24_UNORM_X8_TYPELESS",X[X.DXGI_FORMAT_X24_TYPELESS_G8_UINT=47]="DXGI_FORMAT_X24_TYPELESS_G8_UINT",X[X.DXGI_FORMAT_R8G8_TYPELESS=48]="DXGI_FORMAT_R8G8_TYPELESS",X[X.DXGI_FORMAT_R8G8_UNORM=49]="DXGI_FORMAT_R8G8_UNORM",X[X.DXGI_FORMAT_R8G8_UINT=50]="DXGI_FORMAT_R8G8_UINT",X[X.DXGI_FORMAT_R8G8_SNORM=51]="DXGI_FORMAT_R8G8_SNORM",X[X.DXGI_FORMAT_R8G8_SINT=52]="DXGI_FORMAT_R8G8_SINT",X[X.DXGI_FORMAT_R16_TYPELESS=53]="DXGI_FORMAT_R16_TYPELESS",X[X.DXGI_FORMAT_R16_FLOAT=54]="DXGI_FORMAT_R16_FLOAT",X[X.DXGI_FORMAT_D16_UNORM=55]="DXGI_FORMAT_D16_UNORM",X[X.DXGI_FORMAT_R16_UNORM=56]="DXGI_FORMAT_R16_UNORM",X[X.DXGI_FORMAT_R16_UINT=57]="DXGI_FORMAT_R16_UINT",X[X.DXGI_FORMAT_R16_SNORM=58]="DXGI_FORMAT_R16_SNORM",X[X.DXGI_FORMAT_R16_SINT=59]="DXGI_FORMAT_R16_SINT",X[X.DXGI_FORMAT_R8_TYPELESS=60]="DXGI_FORMAT_R8_TYPELESS",X[X.DXGI_FORMAT_R8_UNORM=61]="DXGI_FORMAT_R8_UNORM",X[X.DXGI_FORMAT_R8_UINT=62]="DXGI_FORMAT_R8_UINT",X[X.DXGI_FORMAT_R8_SNORM=63]="DXGI_FORMAT_R8_SNORM",X[X.DXGI_FORMAT_R8_SINT=64]="DXGI_FORMAT_R8_SINT",X[X.DXGI_FORMAT_A8_UNORM=65]="DXGI_FORMAT_A8_UNORM",X[X.DXGI_FORMAT_R1_UNORM=66]="DXGI_FORMAT_R1_UNORM",X[X.DXGI_FORMAT_R9G9B9E5_SHAREDEXP=67]="DXGI_FORMAT_R9G9B9E5_SHAREDEXP",X[X.DXGI_FORMAT_R8G8_B8G8_UNORM=68]="DXGI_FORMAT_R8G8_B8G8_UNORM",X[X.DXGI_FORMAT_G8R8_G8B8_UNORM=69]="DXGI_FORMAT_G8R8_G8B8_UNORM",X[X.DXGI_FORMAT_BC1_TYPELESS=70]="DXGI_FORMAT_BC1_TYPELESS",X[X.DXGI_FORMAT_BC1_UNORM=71]="DXGI_FORMAT_BC1_UNORM",X[X.DXGI_FORMAT_BC1_UNORM_SRGB=72]="DXGI_FORMAT_BC1_UNORM_SRGB",X[X.DXGI_FORMAT_BC2_TYPELESS=73]="DXGI_FORMAT_BC2_TYPELESS",X[X.DXGI_FORMAT_BC2_UNORM=74]="DXGI_FORMAT_BC2_UNORM",X[X.DXGI_FORMAT_BC2_UNORM_SRGB=75]="DXGI_FORMAT_BC2_UNORM_SRGB",X[X.DXGI_FORMAT_BC3_TYPELESS=76]="DXGI_FORMAT_BC3_TYPELESS",X[X.DXGI_FORMAT_BC3_UNORM=77]="DXGI_FORMAT_BC3_UNORM",X[X.DXGI_FORMAT_BC3_UNORM_SRGB=78]="DXGI_FORMAT_BC3_UNORM_SRGB",X[X.DXGI_FORMAT_BC4_TYPELESS=79]="DXGI_FORMAT_BC4_TYPELESS",X[X.DXGI_FORMAT_BC4_UNORM=80]="DXGI_FORMAT_BC4_UNORM",X[X.DXGI_FORMAT_BC4_SNORM=81]="DXGI_FORMAT_BC4_SNORM",X[X.DXGI_FORMAT_BC5_TYPELESS=82]="DXGI_FORMAT_BC5_TYPELESS",X[X.DXGI_FORMAT_BC5_UNORM=83]="DXGI_FORMAT_BC5_UNORM",X[X.DXGI_FORMAT_BC5_SNORM=84]="DXGI_FORMAT_BC5_SNORM",X[X.DXGI_FORMAT_B5G6R5_UNORM=85]="DXGI_FORMAT_B5G6R5_UNORM",X[X.DXGI_FORMAT_B5G5R5A1_UNORM=86]="DXGI_FORMAT_B5G5R5A1_UNORM",X[X.DXGI_FORMAT_B8G8R8A8_UNORM=87]="DXGI_FORMAT_B8G8R8A8_UNORM",X[X.DXGI_FORMAT_B8G8R8X8_UNORM=88]="DXGI_FORMAT_B8G8R8X8_UNORM",X[X.DXGI_FORMAT_R10G10B10_XR_BIAS_A2_UNORM=89]="DXGI_FORMAT_R10G10B10_XR_BIAS_A2_UNORM",X[X.DXGI_FORMAT_B8G8R8A8_TYPELESS=90]="DXGI_FORMAT_B8G8R8A8_TYPELESS",X[X.DXGI_FORMAT_B8G8R8A8_UNORM_SRGB=91]="DXGI_FORMAT_B8G8R8A8_UNORM_SRGB",X[X.DXGI_FORMAT_B8G8R8X8_TYPELESS=92]="DXGI_FORMAT_B8G8R8X8_TYPELESS",X[X.DXGI_FORMAT_B8G8R8X8_UNORM_SRGB=93]="DXGI_FORMAT_B8G8R8X8_UNORM_SRGB",X[X.DXGI_FORMAT_BC6H_TYPELESS=94]="DXGI_FORMAT_BC6H_TYPELESS",X[X.DXGI_FORMAT_BC6H_UF16=95]="DXGI_FORMAT_BC6H_UF16",X[X.DXGI_FORMAT_BC6H_SF16=96]="DXGI_FORMAT_BC6H_SF16",X[X.DXGI_FORMAT_BC7_TYPELESS=97]="DXGI_FORMAT_BC7_TYPELESS",X[X.DXGI_FORMAT_BC7_UNORM=98]="DXGI_FORMAT_BC7_UNORM",X[X.DXGI_FORMAT_BC7_UNORM_SRGB=99]="DXGI_FORMAT_BC7_UNORM_SRGB",X[X.DXGI_FORMAT_AYUV=100]="DXGI_FORMAT_AYUV",X[X.DXGI_FORMAT_Y410=101]="DXGI_FORMAT_Y410",X[X.DXGI_FORMAT_Y416=102]="DXGI_FORMAT_Y416",X[X.DXGI_FORMAT_NV12=103]="DXGI_FORMAT_NV12",X[X.DXGI_FORMAT_P010=104]="DXGI_FORMAT_P010",X[X.DXGI_FORMAT_P016=105]="DXGI_FORMAT_P016",X[X.DXGI_FORMAT_420_OPAQUE=106]="DXGI_FORMAT_420_OPAQUE",X[X.DXGI_FORMAT_YUY2=107]="DXGI_FORMAT_YUY2",X[X.DXGI_FORMAT_Y210=108]="DXGI_FORMAT_Y210",X[X.DXGI_FORMAT_Y216=109]="DXGI_FORMAT_Y216",X[X.DXGI_FORMAT_NV11=110]="DXGI_FORMAT_NV11",X[X.DXGI_FORMAT_AI44=111]="DXGI_FORMAT_AI44",X[X.DXGI_FORMAT_IA44=112]="DXGI_FORMAT_IA44",X[X.DXGI_FORMAT_P8=113]="DXGI_FORMAT_P8",X[X.DXGI_FORMAT_A8P8=114]="DXGI_FORMAT_A8P8",X[X.DXGI_FORMAT_B4G4R4A4_UNORM=115]="DXGI_FORMAT_B4G4R4A4_UNORM",X[X.DXGI_FORMAT_P208=116]="DXGI_FORMAT_P208",X[X.DXGI_FORMAT_V208=117]="DXGI_FORMAT_V208",X[X.DXGI_FORMAT_V408=118]="DXGI_FORMAT_V408",X[X.DXGI_FORMAT_SAMPLER_FEEDBACK_MIN_MIP_OPAQUE=119]="DXGI_FORMAT_SAMPLER_FEEDBACK_MIN_MIP_OPAQUE",X[X.DXGI_FORMAT_SAMPLER_FEEDBACK_MIP_REGION_USED_OPAQUE=120]="DXGI_FORMAT_SAMPLER_FEEDBACK_MIP_REGION_USED_OPAQUE",X[X.DXGI_FORMAT_FORCE_UINT=121]="DXGI_FORMAT_FORCE_UINT",X),eb=((Y=eb||{})[Y.DDS_DIMENSION_TEXTURE1D=2]="DDS_DIMENSION_TEXTURE1D",Y[Y.DDS_DIMENSION_TEXTURE2D=3]="DDS_DIMENSION_TEXTURE2D",Y[Y.DDS_DIMENSION_TEXTURE3D=6]="DDS_DIMENSION_TEXTURE3D",Y);let eT={827611204:em.COMPRESSED_RGBA_S3TC_DXT1_EXT,861165636:em.COMPRESSED_RGBA_S3TC_DXT3_EXT,894720068:em.COMPRESSED_RGBA_S3TC_DXT5_EXT},eE={70:em.COMPRESSED_RGBA_S3TC_DXT1_EXT,71:em.COMPRESSED_RGBA_S3TC_DXT1_EXT,73:em.COMPRESSED_RGBA_S3TC_DXT3_EXT,74:em.COMPRESSED_RGBA_S3TC_DXT3_EXT,76:em.COMPRESSED_RGBA_S3TC_DXT5_EXT,77:em.COMPRESSED_RGBA_S3TC_DXT5_EXT,72:em.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT,75:em.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT,78:em.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT},eS=[171,75,84,88,32,49,49,187,13,10,26,10],eA={[K.vK.UNSIGNED_BYTE]:1,[K.vK.UNSIGNED_SHORT]:2,[K.vK.INT]:4,[K.vK.UNSIGNED_INT]:4,[K.vK.FLOAT]:4,[K.vK.HALF_FLOAT]:8},eR={[K.I2.RGBA]:4,[K.I2.RGB]:3,[K.I2.RG]:2,[K.I2.RED]:1,[K.I2.LUMINANCE]:1,[K.I2.LUMINANCE_ALPHA]:2,[K.I2.ALPHA]:1},ew={[K.vK.UNSIGNED_SHORT_4_4_4_4]:2,[K.vK.UNSIGNED_SHORT_5_5_5_1]:2,[K.vK.UNSIGNED_SHORT_5_6_5]:2},eI={extension:{type:K.nw.LoadParser,priority:ep.Q2.High},name:"loadDDS",test:y=>(0,ep.gN)(y,".dds"),async load(y,T,A){let B=await K.Xd.ADAPTER.fetch(y),F=await B.arrayBuffer(),U=function(y){let T=new Uint32Array(y),A=T[0];if(542327876!==A)throw Error("Invalid DDS file magic word");let B=new Uint32Array(y,0,124/Uint32Array.BYTES_PER_ELEMENT),F=B[3],U=B[4],X=B[7],Y=new Uint32Array(y,19*Uint32Array.BYTES_PER_ELEMENT,32/Uint32Array.BYTES_PER_ELEMENT),K=Y[1];if(4&K){let A=Y[ev.FOURCC];if(808540228!==A){let T=eT[A],B=new Uint8Array(y,128),Y=new CompressedTextureResource(B,{format:T,width:U,height:F,levels:X});return[Y]}let B=new Uint32Array(T.buffer,128,20/Uint32Array.BYTES_PER_ELEMENT),K=B[ey.DXGI_FORMAT],q=B[ey.RESOURCE_DIMENSION],Q=B[ey.MISC_FLAG],J=B[ey.ARRAY_SIZE],Z=eE[K];if(void 0===Z)throw Error(`DDSParser cannot parse texture data with DXGI format ${K}`);if(4===Q)throw Error("DDSParser does not support cubemap textures");if(6===q)throw Error("DDSParser does not supported 3D texture data");let ei=[];if(1===J)ei.push(new Uint8Array(y,148));else{let T=eg[Z],A=0,B=U,Y=F;for(let y=0;y<X;y++){let y=Math.max(1,B+3&-4),F=Math.max(1,Y+3&-4),U=y*F*T;A+=U,B>>>=1,Y>>>=1}let K=148;for(let T=0;T<J;T++)ei.push(new Uint8Array(y,K,A)),K+=A}return ei.map(y=>new CompressedTextureResource(y,{format:Z,width:U,height:F,levels:X}))}if(64&K)throw Error("DDSParser does not support uncompressed texture data.");if(512&K)throw Error("DDSParser does not supported YUV uncompressed texture data.");if(131072&K)throw Error("DDSParser does not support single-channel (lumninance) texture data!");if(2&K)throw Error("DDSParser does not support single-channel (alpha) texture data!");throw Error("DDSParser failed to load a texture file due to an unknown reason!")}(F),X=U.map(B=>{let F=new K.VL(B,{mipmap:K.KI.OFF,alphaMode:K.iw.NO_PREMULTIPLIED_ALPHA,resolution:K.P6.getResolutionOfUrl(y),...T.data});return(0,ep.cU)(F,A,y)});return 1===X.length?X[0]:X},unload(y){Array.isArray(y)?y.forEach(y=>y.destroy(!0)):y.destroy(!0)}};K.Rw.add(eI);let eP={extension:{type:K.nw.LoadParser,priority:ep.Q2.High},name:"loadKTX",test:y=>(0,ep.gN)(y,".ktx"),async load(y,T,A){let B=await K.Xd.ADAPTER.fetch(y),F=await B.arrayBuffer(),{compressed:U,uncompressed:X,kvData:Y}=function(y,T,A=!1){let B;let F=new DataView(T);if(!function(y,T){for(let A=0;A<eS.length;A++)if(T.getUint8(A)!==eS[A])return console.error(`${y} is not a valid *.ktx file!`),!1;return!0}(y,F))return null;let U=67305985===F.getUint32(12,!0),X=F.getUint32(16,U),Y=F.getUint32(24,U),q=F.getUint32(28,U),Q=F.getUint32(36,U),J=F.getUint32(40,U)||1,Z=F.getUint32(44,U)||1,ei=F.getUint32(48,U)||1,es=F.getUint32(52,U),eh=F.getUint32(56,U),eu=F.getUint32(60,U);if(0===J||1!==Z)throw Error("Only 2D textures are supported");if(1!==es)throw Error("CubeTextures are not supported by KTXLoader yet!");if(1!==ei)throw Error("WebGL does not support array textures");let ed=Q+3&-4,ec=J+3&-4,ef=Array(ei),ep=Q*J;if(0===X&&(ep=ed*ec),void 0===(B=0!==X?eA[X]?eA[X]*eR[Y]:ew[X]:eg[q]))throw Error("Unable to resolve the pixel format stored in the *.ktx file!");let em=A?function(y,T,A){let B=new Map,F=0;for(;F<T;){let U=y.getUint32(64+F,A),X=64+F+4,Y=3-(U+3)%4;if(0===U||U>T-F){console.error("KTXLoader: keyAndValueByteSize out of bounds");break}let K=0;for(;K<U&&0!==y.getUint8(X+K);K++);if(-1===K){console.error("KTXLoader: Failed to find null byte terminating kvData key");break}let q=new TextDecoder().decode(new Uint8Array(y.buffer,X,K)),Q=new DataView(y.buffer,X+K+1,U-K-1);B.set(q,Q),F+=4+U+Y}return B}(F,eu,U):null,e_=ep*B,ev=e_,ey=Q,ex=J,eb=ed,eT=ec,eE=64+eu;for(let y=0;y<eh;y++){let A=F.getUint32(eE,U),Y=eE+4;for(let A=0;A<ei;A++){let B=ef[A];B||(B=ef[A]=Array(eh)),B[y]={levelID:y,levelWidth:eh>1||0!==X?ey:eb,levelHeight:eh>1||0!==X?ex:eT,levelBuffer:new Uint8Array(T,Y,ev)},Y+=ev}eE+=A+4,eE=eE%4!=0?eE+4-eE%4:eE,ex=ex>>1||1,ev=(eb=(ey=ey>>1||1)+4-1&-4)*(eT=ex+4-1&-4)*B}return 0!==X?{uncompressed:ef.map(y=>{let T=y[0].levelBuffer,A=!1;return X===K.vK.FLOAT?T=new Float32Array(y[0].levelBuffer.buffer,y[0].levelBuffer.byteOffset,y[0].levelBuffer.byteLength/4):X===K.vK.UNSIGNED_INT?(A=!0,T=new Uint32Array(y[0].levelBuffer.buffer,y[0].levelBuffer.byteOffset,y[0].levelBuffer.byteLength/4)):X===K.vK.INT&&(A=!0,T=new Int32Array(y[0].levelBuffer.buffer,y[0].levelBuffer.byteOffset,y[0].levelBuffer.byteLength/4)),{resource:new K.qm(T,{width:y[0].levelWidth,height:y[0].levelHeight}),type:X,format:A?function(y){switch(y){case K.I2.RGBA:return K.I2.RGBA_INTEGER;case K.I2.RGB:return K.I2.RGB_INTEGER;case K.I2.RG:return K.I2.RG_INTEGER;case K.I2.RED:return K.I2.RED_INTEGER;default:return y}}(Y):Y}}),kvData:em}:{compressed:ef.map(y=>new CompressedTextureResource(null,{format:q,width:Q,height:J,levels:eh,levelBuffers:y})),kvData:em}}(y,F),q=U??X,Q={mipmap:K.KI.OFF,alphaMode:K.iw.NO_PREMULTIPLIED_ALPHA,resolution:K.P6.getResolutionOfUrl(y),...T.data},J=q.map(T=>{q===X&&Object.assign(Q,{type:T.type,format:T.format});let B=new K.VL(T,Q);return B.ktxKeyValueData=Y,(0,ep.cU)(B,A,y)});return 1===J.length?J[0]:J},unload(y){Array.isArray(y)?y.forEach(y=>y.destroy(!0)):y.destroy(!0)}};K.Rw.add(eP);let eM={extension:K.nw.ResolveParser,test:y=>{let T=y.split("?")[0],A=T.split(".").pop();return["basis","ktx","dds"].includes(A)},parse:y=>{let T=y.split("?")[0],A=T.split(".").pop();if("ktx"===A){let T=[".s3tc.ktx",".s3tc_sRGB.ktx",".etc.ktx",".etc1.ktx",".pvrt.ktx",".atc.ktx",".astc.ktx"];if(T.some(T=>y.endsWith(T)))return{resolution:parseFloat(K.Xd.RETINA_PREFIX.exec(y)?.[1]??"1"),format:T.find(T=>y.endsWith(T)),src:y}}return{resolution:parseFloat(K.Xd.RETINA_PREFIX.exec(y)?.[1]??"1"),format:y.split(".").pop(),src:y}}};K.Rw.add(eM);let eC=new K.Ae,eD=class{constructor(y){this.renderer=y}async image(y,T,A){let B=new Image;return B.src=await this.base64(y,T,A),B}async base64(y,T,A){let B=this.canvas(y);if(void 0!==B.toBlob)return new Promise((y,F)=>{B.toBlob(T=>{if(!T){F(Error("ICanvas.toBlob failed!"));return}let A=new FileReader;A.onload=()=>y(A.result),A.onerror=F,A.readAsDataURL(T)},T,A)});if(void 0!==B.toDataURL)return B.toDataURL(T,A);if(void 0!==B.convertToBlob){let y=await B.convertToBlob({type:T,quality:A});return new Promise((T,A)=>{let B=new FileReader;B.onload=()=>T(B.result),B.onerror=A,B.readAsDataURL(y)})}throw Error("Extract.base64() requires ICanvas.toDataURL, ICanvas.toBlob, or ICanvas.convertToBlob to be implemented")}canvas(y,T){let{pixels:A,width:B,height:F,flipY:U}=this._rawPixels(y,T);U&&eD._flipY(A,B,F),eD._unpremultiplyAlpha(A);let X=new K.P6.CanvasRenderTarget(B,F,1),Y=new ImageData(new Uint8ClampedArray(A.buffer),B,F);return X.context.putImageData(Y,0,0),X.canvas}pixels(y,T){let{pixels:A,width:B,height:F,flipY:U}=this._rawPixels(y,T);return U&&eD._flipY(A,B,F),eD._unpremultiplyAlpha(A),A}_rawPixels(y,T){let A,B;let F=this.renderer;if(!F)throw Error("The Extract has already been destroyed");let U=!1,X=!1;if(y&&(y instanceof K.TI?B=y:(B=F.generateTexture(y,{resolution:F.resolution,multisample:F.multisample}),X=!0)),B){if(A=B.baseTexture.resolution,T=T??B.frame,U=!1,!X){F.renderTexture.bind(B);let y=B.framebuffer.glFramebuffers[F.CONTEXT_UID];y.blitFramebuffer&&F.framebuffer.bind(y.blitFramebuffer)}}else A=F.resolution,T||((T=eC).width=F.width/A,T.height=F.height/A),U=!0,F.renderTexture.bind();let Y=Math.round(T.width*A),q=Math.round(T.height*A),Q=new Uint8Array(4*Y*q),J=F.gl;return J.readPixels(Math.round(T.x*A),Math.round(T.y*A),Y,q,J.RGBA,J.UNSIGNED_BYTE,Q),X&&B?.destroy(!0),{pixels:Q,width:Y,height:q,flipY:U}}destroy(){this.renderer=null}static _flipY(y,T,A){let B=T<<2,F=A>>1,U=new Uint8Array(B);for(let T=0;T<F;T++){let F=T*B,X=(A-T-1)*B;U.set(y.subarray(F,F+B)),y.copyWithin(F,X,X+B),y.set(U,X)}}static _unpremultiplyAlpha(y){y instanceof Uint8ClampedArray&&(y=new Uint8Array(y.buffer));let T=y.length;for(let A=0;A<T;A+=4){let T=y[A+3];if(0!==T){let B=255.001/T;y[A]=y[A]*B+.5,y[A+1]=y[A+1]*B+.5,y[A+2]=y[A+2]*B+.5}}}};eD.extension={name:"extract",type:K.nw.RendererSystem},K.Rw.add(eD);var eO=A(19743);A(67778),A(88831),A(23556);var eN=A(53984);let CountLimiter=class CountLimiter{constructor(y){this.maxItemsPerFrame=y,this.itemsLeft=0}beginFrame(){this.itemsLeft=this.maxItemsPerFrame}allowedToUpload(){return this.itemsLeft-- >0}};function findMultipleBaseTextures(y,T){let A=!1;if(y?._textures?.length){for(let B=0;B<y._textures.length;B++)if(y._textures[B]instanceof K.xE){let F=y._textures[B].baseTexture;T.includes(F)||(T.push(F),A=!0)}}return A}function findBaseTexture(y,T){if(y.baseTexture instanceof K.VL){let A=y.baseTexture;return T.includes(A)||T.push(A),!0}return!1}function findTexture(y,T){if(y._texture&&y._texture instanceof K.xE){let A=y._texture.baseTexture;return T.includes(A)||T.push(A),!0}return!1}function drawText(y,T){return T instanceof eN.xv&&(T.updateText(!0),!0)}function calculateTextStyle(y,T){if(T instanceof eN.pn){let y=T.toFontString();return eN._A.measureFont(y),!0}return!1}function findText(y,T){if(y instanceof eN.xv){T.includes(y.style)||T.push(y.style),T.includes(y)||T.push(y);let A=y._texture.baseTexture;return T.includes(A)||T.push(A),!0}return!1}function findTextStyle(y,T){return y instanceof eN.pn&&(T.includes(y)||T.push(y),!0)}let eB=class{constructor(y){this.limiter=new CountLimiter(eB.uploadsPerFrame),this.renderer=y,this.uploadHookHelper=null,this.queue=[],this.addHooks=[],this.uploadHooks=[],this.completes=[],this.ticking=!1,this.delayedTick=()=>{this.queue&&this.prepareItems()},this.registerFindHook(findText),this.registerFindHook(findTextStyle),this.registerFindHook(findMultipleBaseTextures),this.registerFindHook(findBaseTexture),this.registerFindHook(findTexture),this.registerUploadHook(drawText),this.registerUploadHook(calculateTextStyle)}upload(y){return new Promise(T=>{y&&this.add(y),this.queue.length?(this.completes.push(T),this.ticking||(this.ticking=!0,K.vB.system.addOnce(this.tick,this,K.uF.UTILITY))):T()})}tick(){setTimeout(this.delayedTick,0)}prepareItems(){for(this.limiter.beginFrame();this.queue.length&&this.limiter.allowedToUpload();){let y=this.queue[0],T=!1;if(y&&!y._destroyed){for(let A=0,B=this.uploadHooks.length;A<B;A++)if(this.uploadHooks[A](this.uploadHookHelper,y)){this.queue.shift(),T=!0;break}}T||this.queue.shift()}if(this.queue.length)K.vB.system.addOnce(this.tick,this,K.uF.UTILITY);else{this.ticking=!1;let y=this.completes.slice(0);this.completes.length=0;for(let T=0,A=y.length;T<A;T++)y[T]()}}registerFindHook(y){return y&&this.addHooks.push(y),this}registerUploadHook(y){return y&&this.uploadHooks.push(y),this}add(y){for(let T=0,A=this.addHooks.length;T<A&&!this.addHooks[T](y,this.queue);T++);if(y instanceof q.W2)for(let T=y.children.length-1;T>=0;T--)this.add(y.children[T]);return this}destroy(){this.ticking&&K.vB.system.remove(this.tick,this),this.ticking=!1,this.addHooks=null,this.uploadHooks=null,this.renderer=null,this.completes=null,this.queue=null,this.limiter=null,this.uploadHookHelper=null}},eF=eB;function uploadBaseTextures(y,T){return T instanceof K.VL&&(T._glTextures[y.CONTEXT_UID]||y.texture.bind(T),!0)}function uploadGraphics(y,T){if(!(T instanceof eO.TC))return!1;let{geometry:A}=T;T.finishPoly(),A.updateBatches();let{batches:B}=A;for(let T=0;T<B.length;T++){let{texture:A}=B[T].style;A&&uploadBaseTextures(y,A.baseTexture)}return A.batchable||y.geometry.bind(A,T._resolveDirectShader(y)),!0}function findGraphics(y,T){return y instanceof eO.TC&&(T.push(y),!0)}eF.uploadsPerFrame=4,Object.defineProperties(K.Xd,{UPLOADS_PER_FRAME:{get:()=>eF.uploadsPerFrame,set(y){K.P6.deprecation("7.1.0","settings.UPLOADS_PER_FRAME is deprecated, use prepare.BasePrepare.uploadsPerFrame"),eF.uploadsPerFrame=y}}});let Prepare=class Prepare extends eF{constructor(y){super(y),this.uploadHookHelper=this.renderer,this.registerFindHook(findGraphics),this.registerUploadHook(uploadBaseTextures),this.registerUploadHook(uploadGraphics)}};Prepare.extension={name:"prepare",type:K.nw.RendererSystem},K.Rw.add(Prepare),A(17108),A(57157);let eL=class{constructor(y,T,A=null){this.linkedSheets=[],this._texture=y instanceof K.xE?y:null,this.baseTexture=y instanceof K.VL?y:this._texture.baseTexture,this.textures={},this.animations={},this.data=T;let B=this.baseTexture.resource;this.resolution=this._updateResolution(A||(B?B.url:null)),this._frames=this.data.frames,this._frameKeys=Object.keys(this._frames),this._batchIndex=0,this._callback=null}_updateResolution(y=null){let{scale:T}=this.data.meta,A=K.P6.getResolutionOfUrl(y,null);return null===A&&(A=parseFloat(T??"1")),1!==A&&this.baseTexture.setResolution(A),A}parse(){return new Promise(y=>{this._callback=y,this._batchIndex=0,this._frameKeys.length<=eL.BATCH_SIZE?(this._processFrames(0),this._processAnimations(),this._parseComplete()):this._nextBatch()})}_processFrames(y){let T=y,A=eL.BATCH_SIZE;for(;T-y<A&&T<this._frameKeys.length;){let y=this._frameKeys[T],A=this._frames[y],B=A.frame;if(B){let T=null,F=null,U=!1!==A.trimmed&&A.sourceSize?A.sourceSize:A.frame,X=new K.Ae(0,0,Math.floor(U.w)/this.resolution,Math.floor(U.h)/this.resolution);T=A.rotated?new K.Ae(Math.floor(B.x)/this.resolution,Math.floor(B.y)/this.resolution,Math.floor(B.h)/this.resolution,Math.floor(B.w)/this.resolution):new K.Ae(Math.floor(B.x)/this.resolution,Math.floor(B.y)/this.resolution,Math.floor(B.w)/this.resolution,Math.floor(B.h)/this.resolution),!1!==A.trimmed&&A.spriteSourceSize&&(F=new K.Ae(Math.floor(A.spriteSourceSize.x)/this.resolution,Math.floor(A.spriteSourceSize.y)/this.resolution,Math.floor(B.w)/this.resolution,Math.floor(B.h)/this.resolution)),this.textures[y]=new K.xE(this.baseTexture,T,X,F,A.rotated?2:0,A.anchor,A.borders),K.xE.addToCache(this.textures[y],y)}T++}}_processAnimations(){let y=this.data.animations||{};for(let T in y){this.animations[T]=[];for(let A=0;A<y[T].length;A++){let B=y[T][A];this.animations[T].push(this.textures[B])}}}_parseComplete(){let y=this._callback;this._callback=null,this._batchIndex=0,y.call(this,this.textures)}_nextBatch(){this._processFrames(this._batchIndex*eL.BATCH_SIZE),this._batchIndex++,setTimeout(()=>{this._batchIndex*eL.BATCH_SIZE<this._frameKeys.length?this._nextBatch():(this._processAnimations(),this._parseComplete())},0)}destroy(y=!1){for(let y in this.textures)this.textures[y].destroy();this._frames=null,this._frameKeys=null,this.data=null,this.textures=null,y&&(this._texture?.destroy(),this.baseTexture.destroy()),this._texture=null,this.baseTexture=null,this.linkedSheets=[]}};eL.BATCH_SIZE=1e3;let ek=["jpg","png","jpeg","avif","webp"],eU={extension:K.nw.Asset,cache:{test:y=>y instanceof eL,getCacheableAssets:(y,T)=>(function getCacheableAssets(y,T,A){let B={};if(y.forEach(y=>{B[y]=T}),Object.keys(T.textures).forEach(y=>{B[y]=T.textures[y]}),!A){let A=K.P6.path.dirname(y[0]);T.linkedSheets.forEach((y,F)=>{let U=getCacheableAssets([`${A}/${T.data.meta.related_multi_packs[F]}`],y,!0);Object.assign(B,U)})}return B})(y,T,!1)},resolver:{test:y=>{let T=y.split("?")[0],A=T.split("."),B=A.pop(),F=A.pop();return"json"===B&&ek.includes(F)},parse:y=>{let T=y.split(".");return{resolution:parseFloat(K.Xd.RETINA_PREFIX.exec(y)?.[1]??"1"),format:T[T.length-2],src:y}}},loader:{name:"spritesheetLoader",extension:{type:K.nw.LoadParser,priority:ep.Q2.Normal},testParse:async(y,T)=>".json"===K.P6.path.extname(T.src).toLowerCase()&&!!y.frames,async parse(y,T,A){let B=K.P6.path.dirname(T.src);B&&B.lastIndexOf("/")!==B.length-1&&(B+="/");let F=B+y.meta.image;F=(0,ep.uz)(F,T.src);let U=await A.load([F]),X=U[F],Y=new eL(X.baseTexture,y,T.src);await Y.parse();let q=y?.meta?.related_multi_packs;if(Array.isArray(q)){let y=[];for(let F of q){if("string"!=typeof F)continue;let U=B+F;T.data?.ignoreMultiPack||(U=(0,ep.uz)(U,T.src),y.push(A.load({src:U,data:{ignoreMultiPack:!0}})))}let F=await Promise.all(y);Y.linkedSheets=F,F.forEach(y=>{y.linkedSheets=[Y].concat(Y.linkedSheets.filter(T=>T!==y))})}return Y},unload(y){y.destroy(!0)}}};K.Rw.add(eU),A(73445);let eG=class extends eN.pn{constructor(){super(...arguments),this._fonts=[],this._overrides=[],this._stylesheet="",this.fontsDirty=!1}static from(y){return new eG(Object.keys(eG.defaultOptions).reduce((T,A)=>({...T,[A]:y[A]}),{}))}cleanFonts(){this._fonts.length>0&&(this._fonts.forEach(y=>{URL.revokeObjectURL(y.src),y.refs--,0===y.refs&&(y.fontFace&&document.fonts.delete(y.fontFace),delete eG.availableFonts[y.originalUrl])}),this.fontFamily="Arial",this._fonts.length=0,this.styleID++,this.fontsDirty=!0)}loadFont(y,T={}){let{availableFonts:A}=eG;if(A[y]){let T=A[y];return this._fonts.push(T),T.refs++,this.styleID++,this.fontsDirty=!0,Promise.resolve()}return K.Xd.ADAPTER.fetch(y).then(y=>y.blob()).then(async y=>new Promise((T,A)=>{let B=URL.createObjectURL(y),F=new FileReader;F.onload=()=>T([B,F.result]),F.onerror=A,F.readAsDataURL(y)})).then(async([B,F])=>{let U=Object.assign({family:K.P6.path.basename(y,K.P6.path.extname(y)),weight:"normal",style:"normal",src:B,dataSrc:F,refs:1,originalUrl:y,fontFace:null},T);A[y]=U,this._fonts.push(U),this.styleID++;let X=new FontFace(U.family,`url(${U.src})`,{weight:U.weight,style:U.style});U.fontFace=X,await X.load(),document.fonts.add(X),await document.fonts.ready,this.styleID++,this.fontsDirty=!0})}addOverride(...y){let T=y.filter(y=>!this._overrides.includes(y));T.length>0&&(this._overrides.push(...T),this.styleID++)}removeOverride(...y){let T=y.filter(y=>this._overrides.includes(y));T.length>0&&(this._overrides=this._overrides.filter(y=>!T.includes(y)),this.styleID++)}toCSS(y){return[`transform: scale(${y})`,"transform-origin: top left","display: inline-block",`color: ${this.normalizeColor(this.fill)}`,`font-size: ${this.fontSize}px`,`font-family: ${this.fontFamily}`,`font-weight: ${this.fontWeight}`,`font-style: ${this.fontStyle}`,`font-variant: ${this.fontVariant}`,`letter-spacing: ${this.letterSpacing}px`,`text-align: ${this.align}`,`padding: ${this.padding}px`,`white-space: ${this.whiteSpace}`,...this.lineHeight?[`line-height: ${this.lineHeight}px`]:[],...this.wordWrap?[`word-wrap: ${this.breakWords?"break-all":"break-word"}`,`max-width: ${this.wordWrapWidth}px`]:[],...this.strokeThickness?[`-webkit-text-stroke-width: ${this.strokeThickness}px`,`-webkit-text-stroke-color: ${this.normalizeColor(this.stroke)}`,`text-stroke-width: ${this.strokeThickness}px`,`text-stroke-color: ${this.normalizeColor(this.stroke)}`,"paint-order: stroke"]:[],...this.dropShadow?[this.dropShadowToCSS()]:[],...this._overrides].join(";")}toGlobalCSS(){return this._fonts.reduce((y,T)=>`${y}
            @font-face {
                font-family: "${T.family}";
                src: url('${T.dataSrc}');
                font-weight: ${T.weight};
                font-style: ${T.style}; 
            }`,this._stylesheet)}get stylesheet(){return this._stylesheet}set stylesheet(y){this._stylesheet!==y&&(this._stylesheet=y,this.styleID++)}normalizeColor(y){return(Array.isArray(y)&&(y=K.P6.rgb2hex(y)),"number"==typeof y)?K.P6.hex2string(y):y}dropShadowToCSS(){let y=this.normalizeColor(this.dropShadowColor),T=this.dropShadowAlpha,A=Math.round(Math.cos(this.dropShadowAngle)*this.dropShadowDistance),B=Math.round(Math.sin(this.dropShadowAngle)*this.dropShadowDistance);y.startsWith("#")&&T<1&&(y+=(255*T|0).toString(16).padStart(2,"0"));let F=`${A}px ${B}px`;return this.dropShadowBlur>0?`text-shadow: ${F} ${this.dropShadowBlur}px ${y}`:`text-shadow: ${F} ${y}`}reset(){Object.assign(this,eG.defaultOptions)}onBeforeDraw(){let{fontsDirty:y}=this;return(this.fontsDirty=!1,this.isSafari&&this._fonts.length>0&&y)?new Promise(y=>setTimeout(y,100)):Promise.resolve()}get isSafari(){let{userAgent:y}=K.Xd.ADAPTER.getNavigator();return/^((?!chrome|android).)*safari/i.test(y)}set fillGradientStops(y){console.warn("[HTMLTextStyle] fillGradientStops is not supported by HTMLText")}get fillGradientStops(){return super.fillGradientStops}set fillGradientType(y){console.warn("[HTMLTextStyle] fillGradientType is not supported by HTMLText")}get fillGradientType(){return super.fillGradientType}set miterLimit(y){console.warn("[HTMLTextStyle] miterLimit is not supported by HTMLText")}get miterLimit(){return super.miterLimit}set trim(y){console.warn("[HTMLTextStyle] trim is not supported by HTMLText")}get trim(){return super.trim}set textBaseline(y){console.warn("[HTMLTextStyle] textBaseline is not supported by HTMLText")}get textBaseline(){return super.textBaseline}set leading(y){console.warn("[HTMLTextStyle] leading is not supported by HTMLText")}get leading(){return super.leading}set lineJoin(y){console.warn("[HTMLTextStyle] lineJoin is not supported by HTMLText")}get lineJoin(){return super.lineJoin}};eG.availableFonts={},eG.defaultOptions={align:"left",breakWords:!1,dropShadow:!1,dropShadowAlpha:1,dropShadowAngle:Math.PI/6,dropShadowBlur:0,dropShadowColor:"black",dropShadowDistance:5,fill:"black",fontFamily:"Arial",fontSize:26,fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",letterSpacing:0,lineHeight:0,padding:0,stroke:"black",strokeThickness:0,whiteSpace:"normal",wordWrap:!1,wordWrapWidth:100};let eX=class extends Q.j{constructor(y="",T={}){super(K.xE.EMPTY),this._text=null,this._style=null,this._autoResolution=!0,this._loading=!1,this.localStyleID=-1,this.dirty=!1,this.ownsStyle=!1;let A=new Image,B=K.xE.from(A,{scaleMode:K.Xd.SCALE_MODE,resourceOptions:{autoLoad:!1}});B.orig=new K.Ae,B.trim=new K.Ae,this.texture=B;let F="http://www.w3.org/2000/svg",U="http://www.w3.org/1999/xhtml",X=document.createElementNS(F,"svg"),Y=document.createElementNS(F,"foreignObject"),q=document.createElementNS(U,"div"),Q=document.createElementNS(U,"style");Y.setAttribute("width","10000"),Y.setAttribute("height","10000"),Y.style.overflow="hidden",X.appendChild(Y),this.maxWidth=eX.defaultMaxWidth,this.maxHeight=eX.defaultMaxHeight,this._domElement=q,this._styleElement=Q,this._svgRoot=X,this._foreignObject=Y,this._foreignObject.appendChild(Q),this._foreignObject.appendChild(q),this._image=A,this._loadImage=new Image,this._autoResolution=eX.defaultAutoResolution,this._resolution=eX.defaultResolution??K.Xd.RESOLUTION,this.text=y,this.style=T}measureText(y){let{text:T,style:A,resolution:B}=Object.assign({text:this._text,style:this._style,resolution:this._resolution},y);Object.assign(this._domElement,{innerHTML:T,style:A.toCSS(B)}),this._styleElement.textContent=A.toGlobalCSS(),document.body.appendChild(this._svgRoot);let F=this._domElement.getBoundingClientRect();this._svgRoot.remove();let U=Math.min(this.maxWidth,Math.ceil(F.width)),X=Math.min(this.maxHeight,Math.ceil(F.height));return this._svgRoot.setAttribute("width",U.toString()),this._svgRoot.setAttribute("height",X.toString()),T!==this._text&&(this._domElement.innerHTML=this._text),A!==this._style&&(Object.assign(this._domElement,{style:this._style?.toCSS(B)}),this._styleElement.textContent=this._style?.toGlobalCSS()),{width:U+2*A.padding,height:X+2*A.padding}}async updateText(y=!0){let{style:T,_image:A,_loadImage:B}=this;if(this.localStyleID!==T.styleID&&(this.dirty=!0,this.localStyleID=T.styleID),!this.dirty&&y)return;let{width:F,height:U}=this.measureText();A.width=B.width=Math.ceil(Math.max(1,F)),A.height=B.height=Math.ceil(Math.max(1,U)),this._loading||(this._loading=!0,await new Promise(y=>{B.onload=async()=>{await T.onBeforeDraw(),this._loading=!1,A.src=B.src,B.onload=null,B.src="",this.updateTexture(),y()};let F=new XMLSerializer().serializeToString(this._svgRoot);B.src=`data:image/svg+xml;charset=utf8,${encodeURIComponent(F)}`}))}get source(){return this._image}updateTexture(){let{style:y,texture:T,_image:A,resolution:B}=this,{padding:F}=y,{baseTexture:U}=T;T.trim.width=T._frame.width=A.width/B,T.trim.height=T._frame.height=A.height/B,T.trim.x=-F,T.trim.y=-F,T.orig.width=T._frame.width-2*F,T.orig.height=T._frame.height-2*F,this._onTextureUpdate(),U.setRealSize(A.width,A.height,B),this.dirty=!1}_render(y){this._autoResolution&&this._resolution!==y.resolution&&(this._resolution=y.resolution,this.dirty=!0),this.updateText(!0),super._render(y)}_renderCanvas(y){this._autoResolution&&this._resolution!==y.resolution&&(this._resolution=y.resolution,this.dirty=!0),this.updateText(!0),super._renderCanvas(y)}getLocalBounds(y){return this.updateText(!0),super.getLocalBounds(y)}_calculateBounds(){this.updateText(!0),this.calculateVertices(),this._bounds.addQuad(this.vertexData)}_onStyleChange(){this.dirty=!0}destroy(y){"boolean"==typeof y&&(y={children:y}),y=Object.assign({},eX.defaultDestroyOptions,y),super.destroy(y),this.ownsStyle&&this._style?.cleanFonts(),this._style=null,this._svgRoot?.remove(),this._svgRoot=null,this._domElement?.remove(),this._domElement=null,this._foreignObject?.remove(),this._foreignObject=null,this._styleElement?.remove(),this._styleElement=null,this._loadImage.src="",this._loadImage.onload=null,this._loadImage=null,this._image.src="",this._image=null}get width(){return this.updateText(!0),Math.abs(this.scale.x)*this._image.width/this.resolution}set width(y){this.updateText(!0);let T=K.P6.sign(this.scale.x)||1;this.scale.x=T*y/this._image.width/this.resolution,this._width=y}get height(){return this.updateText(!0),Math.abs(this.scale.y)*this._image.height/this.resolution}set height(y){this.updateText(!0);let T=K.P6.sign(this.scale.y)||1;this.scale.y=T*y/this._image.height/this.resolution,this._height=y}get style(){return this._style}set style(y){this._style!==y&&((y=y||{})instanceof eG?(this.ownsStyle=!1,this._style=y):y instanceof eN.pn?(console.warn("[HTMLText] Cloning TextStyle, if this is not what you want, use HTMLTextStyle"),this.ownsStyle=!0,this._style=eG.from(y)):(this.ownsStyle=!0,this._style=new eG(y)),this.localStyleID=-1,this.dirty=!0)}get text(){return this._text}set text(y){y=String(""===y||null==y?" ":y),y=this.sanitiseText(y),this._text!==y&&(this._text=y,this.dirty=!0)}get resolution(){return this._resolution}set resolution(y){this._autoResolution=!1,this._resolution!==y&&(this._resolution=y,this.dirty=!0)}sanitiseText(y){return y.replace(/<br>/gi,"<br/>").replace(/<hr>/gi,"<hr/>").replace(/&nbsp;/gi,"&#160;")}};eX.defaultDestroyOptions={texture:!0,children:!1,baseTexture:!0},eX.defaultMaxWidth=2024,eX.defaultMaxHeight=2024,eX.defaultAutoResolution=!0}}]);