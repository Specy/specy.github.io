(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const s of o.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&n(s)}).observe(document,{childList:!0,subtree:!0});function r(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerpolicy&&(o.referrerPolicy=i.referrerpolicy),i.crossorigin==="use-credentials"?o.credentials="include":i.crossorigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function n(i){if(i.ep)return;i.ep=!0;const o=r(i);fetch(i.href,o)}})();var go=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function T9(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function Lx(e){var t=e.default;if(typeof t=="function"){var r=function(){return t.apply(this,arguments)};r.prototype=t.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(e).forEach(function(n){var i=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(r,n,i.get?i:{enumerable:!0,get:function(){return e[n]}})}),r}var S9={exports:{}};/*!
 * PEP v0.5.1 | https://github.com/jquery/PEP
 * Copyright jQuery Foundation and other contributors | http://jquery.org/license
 */(function(e,t){(function(r,n){e.exports=n()})(go,function(){var r=["bubbles","cancelable","view","screenX","screenY","clientX","clientY","ctrlKey","altKey","shiftKey","metaKey","button","relatedTarget","pageX","pageY"],n=[!1,!1,null,0,0,0,0,!1,!1,!1,!1,0,null,0,0];function i(L,H){H=H||Object.create(null);var Z=document.createEvent("Event");Z.initEvent(L,H.bubbles||!1,H.cancelable||!1);for(var be=2,Ve;be<r.length;be++)Ve=r[be],Z[Ve]=H[Ve]||n[be];Z.buttons=H.buttons||0;var ht=0;return H.pressure!==void 0&&Z.buttons?ht=H.pressure:ht=Z.buttons?.5:0,Z.x=Z.clientX,Z.y=Z.clientY,Z.pointerId=H.pointerId||0,Z.width=H.width||1,Z.height=H.height||1,Z.pressure=ht,Z.tiltX=H.tiltX||0,Z.tiltY=H.tiltY||0,Z.twist=H.twist||0,Z.tangentialPressure=H.tangentialPressure||0,Z.pointerType=H.pointerType||"",Z.hwTimestamp=H.hwTimestamp||0,Z.isPrimary=H.isPrimary||!1,Z.detail=0,Z}var o=window.Map&&window.Map.prototype.forEach,s=o?Map:a;function a(){this.array=[],this.size=0}a.prototype={set:function(L,H){if(H===void 0)return this.delete(L);this.has(L)||this.size++,this.array[L]=H},has:function(L){return this.array[L]!==void 0},delete:function(L){this.has(L)&&(delete this.array[L],this.size--)},get:function(L){return this.array[L]},clear:function(){this.array.length=0,this.size=0},forEach:function(L,H){return this.array.forEach(function(Z,be){L.call(H,Z,be,this)},this)}};var l=["bubbles","cancelable","view","detail","screenX","screenY","clientX","clientY","ctrlKey","altKey","shiftKey","metaKey","button","relatedTarget","buttons","pointerId","width","height","pressure","tiltX","tiltY","pointerType","hwTimestamp","isPrimary","type","target","currentTarget","which","pageX","pageY","timeStamp"],u=[!1,!1,null,null,0,0,0,0,!1,!1,!1,!1,0,null,0,0,0,0,0,0,0,"",0,!1,"",null,null,0,0,0,0],c={pointerover:1,pointerout:1,pointerenter:1,pointerleave:1},f=typeof SVGElementInstance<"u",p={pointermap:new s,eventMap:Object.create(null),captureInfo:Object.create(null),eventSources:Object.create(null),eventSourceList:[],registerSource:function(L,H){var Z=H,be=Z.events;be&&(be.forEach(function(Ve){Z[Ve]&&(this.eventMap[Ve]=Z[Ve].bind(Z))},this),this.eventSources[L]=Z,this.eventSourceList.push(Z))},register:function(L){for(var H=this.eventSourceList.length,Z=0,be;Z<H&&(be=this.eventSourceList[Z]);Z++)be.register.call(be,L)},unregister:function(L){for(var H=this.eventSourceList.length,Z=0,be;Z<H&&(be=this.eventSourceList[Z]);Z++)be.unregister.call(be,L)},contains:function(L,H){try{return L.contains(H)}catch{return!1}},down:function(L){L.bubbles=!0,this.fireEvent("pointerdown",L)},move:function(L){L.bubbles=!0,this.fireEvent("pointermove",L)},up:function(L){L.bubbles=!0,this.fireEvent("pointerup",L)},enter:function(L){L.bubbles=!1,this.fireEvent("pointerenter",L)},leave:function(L){L.bubbles=!1,this.fireEvent("pointerleave",L)},over:function(L){L.bubbles=!0,this.fireEvent("pointerover",L)},out:function(L){L.bubbles=!0,this.fireEvent("pointerout",L)},cancel:function(L){L.bubbles=!0,this.fireEvent("pointercancel",L)},leaveOut:function(L){this.out(L),this.propagate(L,this.leave,!1)},enterOver:function(L){this.over(L),this.propagate(L,this.enter,!0)},eventHandler:function(L){if(!L._handledByPE){var H=L.type,Z=this.eventMap&&this.eventMap[H];Z&&Z(L),L._handledByPE=!0}},listen:function(L,H){H.forEach(function(Z){this.addEvent(L,Z)},this)},unlisten:function(L,H){H.forEach(function(Z){this.removeEvent(L,Z)},this)},addEvent:function(L,H){L.addEventListener(H,this.boundHandler)},removeEvent:function(L,H){L.removeEventListener(H,this.boundHandler)},makeEvent:function(L,H){this.captureInfo[H.pointerId]&&(H.relatedTarget=null);var Z=new i(L,H);return H.preventDefault&&(Z.preventDefault=H.preventDefault),Z._target=Z._target||H.target,Z},fireEvent:function(L,H){var Z=this.makeEvent(L,H);return this.dispatchEvent(Z)},cloneEvent:function(L){for(var H=Object.create(null),Z,be=0;be<l.length;be++)Z=l[be],H[Z]=L[Z]||u[be],f&&(Z==="target"||Z==="relatedTarget")&&H[Z]instanceof SVGElementInstance&&(H[Z]=H[Z].correspondingUseElement);return L.preventDefault&&(H.preventDefault=function(){L.preventDefault()}),H},getTarget:function(L){var H=this.captureInfo[L.pointerId];if(!H)return L._target;if(L._target===H||!(L.type in c))return H},propagate:function(L,H,Z){for(var be=L.target,Ve=[];be!=null&&be!==document&&!be.contains(L.relatedTarget);)if(Ve.push(be),be=be.parentNode,!be)return;Z&&Ve.reverse(),Ve.forEach(function(ht){L.target=ht,H.call(this,L)},this)},setCapture:function(L,H,Z){this.captureInfo[L]&&this.releaseCapture(L,Z),this.captureInfo[L]=H,this.implicitRelease=this.releaseCapture.bind(this,L,Z),document.addEventListener("pointerup",this.implicitRelease),document.addEventListener("pointercancel",this.implicitRelease);var be=new i("gotpointercapture",{bubbles:!0});be.pointerId=L,be._target=H,Z||this.asyncDispatchEvent(be)},releaseCapture:function(L,H){var Z=this.captureInfo[L];if(!!Z){this.captureInfo[L]=void 0,document.removeEventListener("pointerup",this.implicitRelease),document.removeEventListener("pointercancel",this.implicitRelease);var be=new i("lostpointercapture",{bubbles:!0});be.pointerId=L,be._target=Z,H||this.asyncDispatchEvent(be)}},dispatchEvent:function(L){var H=this.getTarget(L);if(H)return H.dispatchEvent(L)},asyncDispatchEvent:function(L){requestAnimationFrame(this.dispatchEvent.bind(this,L))}};p.boundHandler=p.eventHandler.bind(p);var m={shadow:function(L){if(L)return L.shadowRoot||L.webkitShadowRoot},canTarget:function(L){return L&&Boolean(L.elementFromPoint)},targetingShadow:function(L){var H=this.shadow(L);if(this.canTarget(H))return H},olderShadow:function(L){var H=L.olderShadowRoot;if(!H){var Z=L.querySelector("shadow");Z&&(H=Z.olderShadowRoot)}return H},allShadows:function(L){for(var H=[],Z=this.shadow(L);Z;)H.push(Z),Z=this.olderShadow(Z);return H},searchRoot:function(L,H,Z){if(L){var be=L.elementFromPoint(H,Z),Ve,ht;for(ht=this.targetingShadow(be);ht;)if(Ve=ht.elementFromPoint(H,Z),!Ve)ht=this.olderShadow(ht);else{var B=this.targetingShadow(Ve);return this.searchRoot(B,H,Z)||Ve}return be}},owner:function(L){for(var H=L;H.parentNode;)H=H.parentNode;return H.nodeType!==Node.DOCUMENT_NODE&&H.nodeType!==Node.DOCUMENT_FRAGMENT_NODE&&(H=document),H},findTarget:function(L){var H=L.clientX,Z=L.clientY,be=this.owner(L.target);return be.elementFromPoint(H,Z)||(be=document),this.searchRoot(be,H,Z)}},g=Array.prototype.forEach.call.bind(Array.prototype.forEach),b=Array.prototype.map.call.bind(Array.prototype.map),y=Array.prototype.slice.call.bind(Array.prototype.slice),w=Array.prototype.filter.call.bind(Array.prototype.filter),x=window.MutationObserver||window.WebKitMutationObserver,T="[touch-action]",I={subtree:!0,childList:!0,attributes:!0,attributeOldValue:!0,attributeFilter:["touch-action"]};function R(L,H,Z,be){this.addCallback=L.bind(be),this.removeCallback=H.bind(be),this.changedCallback=Z.bind(be),x&&(this.observer=new x(this.mutationWatcher.bind(this)))}R.prototype={watchSubtree:function(L){this.observer&&m.canTarget(L)&&this.observer.observe(L,I)},enableOnSubtree:function(L){this.watchSubtree(L),L===document&&document.readyState!=="complete"?this.installOnLoad():this.installNewSubtree(L)},installNewSubtree:function(L){g(this.findElements(L),this.addElement,this)},findElements:function(L){return L.querySelectorAll?L.querySelectorAll(T):[]},removeElement:function(L){this.removeCallback(L)},addElement:function(L){this.addCallback(L)},elementChanged:function(L,H){this.changedCallback(L,H)},concatLists:function(L,H){return L.concat(y(H))},installOnLoad:function(){document.addEventListener("readystatechange",function(){document.readyState==="complete"&&this.installNewSubtree(document)}.bind(this))},isElement:function(L){return L.nodeType===Node.ELEMENT_NODE},flattenMutationTree:function(L){var H=b(L,this.findElements,this);return H.push(w(L,this.isElement)),H.reduce(this.concatLists,[])},mutationWatcher:function(L){L.forEach(this.mutationHandler,this)},mutationHandler:function(L){if(L.type==="childList"){var H=this.flattenMutationTree(L.addedNodes);H.forEach(this.addElement,this);var Z=this.flattenMutationTree(L.removedNodes);Z.forEach(this.removeElement,this)}else L.type==="attributes"&&this.elementChanged(L.target,L.oldValue)}};function S(L){return"body /shadow-deep/ "+L}function O(L){return"{ -ms-touch-action: "+L+"; touch-action: "+L+"; }"}var P=[{selector:'[touch-action="none"]',value:"none"},{selector:'[touch-action="auto"]',value:"auto"},{selector:'[touch-action~="pan-x"]',value:"pan-x"},{selector:'[touch-action~="pan-y"]',value:"pan-y"},{selector:'[touch-action~="pan-up"]',value:"pan-up"},{selector:'[touch-action~="pan-down"]',value:"pan-down"},{selector:'[touch-action~="pan-left"]',value:"pan-left"},{selector:'[touch-action~="pan-right"]',value:"pan-right"}],N="",A=window.PointerEvent||window.MSPointerEvent,j=!window.ShadowDOMPolyfill&&document.head.createShadowRoot;function X(){if(A){P.forEach(function(H){N+=H.selector+O(H.value)+`
`,j&&(N+=S(H.selector)+O(H.value)+`
`)});var L=document.createElement("style");L.textContent=N,document.head.appendChild(L)}}var G=p.pointermap,ne=25,W=[1,4,2,8,16],Y=!1;try{Y=new MouseEvent("test",{buttons:1}).buttons===1}catch{}var de={POINTER_ID:1,POINTER_TYPE:"mouse",events:["mousedown","webkitmouseforcechanged","mousemove","mouseup","mouseover","mouseout"],register:function(L){p.listen(L,this.events)},unregister:function(L){p.unlisten(L,this.events)},lastTouches:[],isEventSimulatedFromTouch:function(L){for(var H=this.lastTouches,Z=L.clientX,be=L.clientY,Ve=0,ht=H.length,B;Ve<ht&&(B=H[Ve]);Ve++){var V=Math.abs(Z-B.x),re=Math.abs(be-B.y);if(V<=ne&&re<=ne)return!0}},prepareEvent:function(L){var H=p.cloneEvent(L),Z=H.preventDefault;return H.preventDefault=function(){L.preventDefault(),Z()},H.pointerId=this.POINTER_ID,H.isPrimary=!0,H.pointerType=this.POINTER_TYPE,"webkitForce"in L&&(H.pressure=L.webkitForce-MouseEvent.WEBKIT_FORCE_AT_MOUSE_DOWN),H},prepareButtonsForMove:function(L,H){var Z=G.get(this.POINTER_ID);H.which===0||!Z?L.buttons=0:L.buttons=Z.buttons,H.buttons=L.buttons},mousedown:function(L){if(!this.isEventSimulatedFromTouch(L)){var H=G.get(this.POINTER_ID),Z=this.prepareEvent(L);Y||(Z.buttons=W[Z.button],H&&(Z.buttons|=H.buttons),L.buttons=Z.buttons),G.set(this.POINTER_ID,L),!H||H.buttons===0?p.down(Z):p.move(Z)}},webkitmouseforcechanged:function(L){this.mousemove(L)},mousemove:function(L){if(!this.isEventSimulatedFromTouch(L)){var H=this.prepareEvent(L);Y||this.prepareButtonsForMove(H,L),H.button=-1,G.set(this.POINTER_ID,L),p.move(H)}},mouseup:function(L){if(!this.isEventSimulatedFromTouch(L)){var H=G.get(this.POINTER_ID),Z=this.prepareEvent(L);if(!Y){var be=W[Z.button];Z.buttons=H?H.buttons&~be:0,L.buttons=Z.buttons}G.set(this.POINTER_ID,L),Z.buttons&=~W[Z.button],Z.buttons===0?p.up(Z):p.move(Z)}},mouseover:function(L){if(!this.isEventSimulatedFromTouch(L)){var H=this.prepareEvent(L);Y||this.prepareButtonsForMove(H,L),H.button=-1,G.set(this.POINTER_ID,L),p.enterOver(H)}},mouseout:function(L){if(!this.isEventSimulatedFromTouch(L)){var H=this.prepareEvent(L);Y||this.prepareButtonsForMove(H,L),H.button=-1,p.leaveOut(H)}},cancel:function(L){var H=this.prepareEvent(L);p.cancel(H),this.deactivateMouse()},deactivateMouse:function(){G.delete(this.POINTER_ID)}},le=p.captureInfo,ie=m.findTarget.bind(m),Q=m.allShadows.bind(m),ee=p.pointermap,K=2500,te="touch-action",ye,Ce=1,Ie=2,Ye=4,pe=8,F=Ce|Ie|Ye|pe,$={events:["touchstart","touchmove","touchforcechange","touchend","touchcancel"],register:function(L){ye.enableOnSubtree(L)},unregister:function(){},elementAdded:function(L){var H=L.getAttribute(te),Z=this.touchActionToScrollType(H);typeof Z=="number"&&(L._scrollType=Z,p.listen(L,this.events),Q(L).forEach(function(be){be._scrollType=Z,p.listen(be,this.events)},this))},elementRemoved:function(L){if(ee.size>0){var H=this.events;L.addEventListener("touchend",function(){L._scrollType=void 0,p.unlisten(L,H)})}else L._scrollType=void 0,p.unlisten(L,this.events);Q(L).forEach(function(Z){Z._scrollType=void 0,p.unlisten(Z,this.events)},this)},elementChanged:function(L,H){var Z=L.getAttribute(te),be=this.touchActionToScrollType(Z),Ve=this.touchActionToScrollType(H);typeof be=="number"&&typeof Ve=="number"?(L._scrollType=be,Q(L).forEach(function(ht){ht._scrollType=be},this)):typeof Ve=="number"?this.elementRemoved(L):typeof be=="number"&&this.elementAdded(L)},scrollTypes:{UP:function(L){return L.includes("pan-y")||L.includes("pan-up")?Ce:0},DOWN:function(L){return L.includes("pan-y")||L.includes("pan-down")?Ie:0},LEFT:function(L){return L.includes("pan-x")||L.includes("pan-left")?Ye:0},RIGHT:function(L){return L.includes("pan-x")||L.includes("pan-right")?pe:0}},touchActionToScrollType:function(L){if(!!L){if(L==="auto")return F;if(L==="none")return 0;var H=L.split(" "),Z=this.scrollTypes;return Z.UP(H)|Z.DOWN(H)|Z.LEFT(H)|Z.RIGHT(H)}},POINTER_TYPE:"touch",firstTouch:null,isPrimaryTouch:function(L){return this.firstTouch===L.identifier},setPrimaryTouch:function(L){(ee.size===0||ee.size===1&&ee.has(1))&&(this.firstTouch=L.identifier,this.firstXY={X:L.clientX,Y:L.clientY},this.scrolling=!1)},removePrimaryPointer:function(L){L.isPrimary&&(this.firstTouch=null,this.firstXY=null)},typeToButtons:function(L){var H=0;return(L==="touchstart"||L==="touchmove"||L==="touchforcechange")&&(H=1),H},touchToPointer:function(L){var H=this.currentTouchEvent,Z=p.cloneEvent(L),be=Z.pointerId=L.identifier+2;if(Z.target=le[be]||ie(Z),Z.bubbles=!0,Z.cancelable=!0,Z.button=0,Z.buttons=this.typeToButtons(H.type),Z.width=(L.radiusX||L.webkitRadiusX||0)*2,Z.height=(L.radiusY||L.webkitRadiusY||0)*2,Z.pressure=L.force!==void 0?L.force:L.webkitForce!==void 0?L.webkitForce:void 0,Z.isPrimary=this.isPrimaryTouch(L),L.altitudeAngle){var Ve=Math.tan(L.altitudeAngle),ht=180/Math.PI;Z.tiltX=Math.atan(Math.cos(L.azimuthAngle)/Ve)*ht,Z.tiltY=Math.atan(Math.sin(L.azimuthAngle)/Ve)*ht}else Z.tiltX=0,Z.tiltY=0;L.touchType==="stylus"?Z.pointerType="pen":Z.pointerType=this.POINTER_TYPE,Z.altKey=H.altKey,Z.ctrlKey=H.ctrlKey,Z.metaKey=H.metaKey,Z.shiftKey=H.shiftKey;var B=this;return Z.preventDefault=function(){B.scrolling=!1,B.firstXY=null,H.preventDefault()},Z},processTouches:function(L,H){var Z=L.changedTouches;this.currentTouchEvent=L;for(var be=0,Ve;be<Z.length;be++)Ve=Z[be],H.call(this,this.touchToPointer(Ve))},shouldScroll:function(L){if(this.firstXY){var H,Z=L.currentTarget._scrollType;if(Z===0)H=!1;else if(Z===F)H=!0;else{var be=L.changedTouches[0],Ve=be.clientY-this.firstXY.Y,ht=Math.abs(Ve),B=be.clientX-this.firstXY.X,V=Math.abs(B),re=Z&Ce,ge=Z&Ie,Ke=Z&Ye,nt=Z&pe;Ke&&nt?H=V>ht:Ke?H=V>ht&&B>0:nt&&(H=V>ht&&B<0),H||(re&&ge?H=V<ht:re?H=V<ht&&Ve>0:ge&&(H=V<ht&&Ve<0))}return this.firstXY=null,H}},findTouch:function(L,H){for(var Z=0,be=L.length,Ve;Z<be&&(Ve=L[Z]);Z++)if(Ve.identifier===H)return!0},vacuumTouches:function(L){var H=L.touches;if(ee.size>=H.length){var Z=[];ee.forEach(function(be,Ve){if(Ve!==1&&!this.findTouch(H,Ve-2)){var ht=be.out;Z.push(ht)}},this),Z.forEach(this.cancelOut,this)}},touchstart:function(L){this.vacuumTouches(L),this.setPrimaryTouch(L.changedTouches[0]),this.dedupSynthMouse(L),this.scrolling||this.processTouches(L,this.overDown)},overDown:function(L){ee.set(L.pointerId,{target:L.target,out:L,outTarget:L.target}),p.enterOver(L),p.down(L)},touchforcechange:function(L){this.touchmove(L)},touchmove:function(L){this.scrolling||(this.shouldScroll(L)?(this.scrolling=!0,this.touchcancel(L)):(L.type!=="touchforcechange"&&L.preventDefault(),this.processTouches(L,this.moveOverOut)))},moveOverOut:function(L){var H=L,Z=ee.get(H.pointerId);if(!!Z){var be=Z.out,Ve=Z.outTarget;p.move(H),be&&Ve!==H.target&&(be.relatedTarget=H.target,H.relatedTarget=Ve,be.target=Ve,H.target?(p.leaveOut(be),p.enterOver(H)):(H.target=Ve,H.relatedTarget=null,this.cancelOut(H))),Z.out=H,Z.outTarget=H.target}},touchend:function(L){this.dedupSynthMouse(L),this.processTouches(L,this.upOut)},upOut:function(L){this.scrolling||(p.up(L),p.leaveOut(L)),this.cleanUpPointer(L)},touchcancel:function(L){this.processTouches(L,this.cancelOut)},cancelOut:function(L){p.cancel(L),p.leaveOut(L),this.cleanUpPointer(L)},cleanUpPointer:function(L){ee.delete(L.pointerId),this.removePrimaryPointer(L)},dedupSynthMouse:function(L){var H=de.lastTouches,Z=L.changedTouches[0];if(this.isPrimaryTouch(Z)){var be={x:Z.clientX,y:Z.clientY};H.push(be);var Ve=function(ht,B){var V=ht.indexOf(B);V>-1&&ht.splice(V,1)}.bind(null,H,be);setTimeout(Ve,K)}}};ye=new R($.elementAdded,$.elementRemoved,$.elementChanged,$);var q=p.pointermap,ve=window.MSPointerEvent&&typeof window.MSPointerEvent.MSPOINTER_TYPE_MOUSE=="number",ue={events:["MSPointerDown","MSPointerMove","MSPointerUp","MSPointerOut","MSPointerOver","MSPointerCancel","MSGotPointerCapture","MSLostPointerCapture"],register:function(L){p.listen(L,this.events)},unregister:function(L){p.unlisten(L,this.events)},POINTER_TYPES:["","unavailable","touch","pen","mouse"],prepareEvent:function(L){var H=L;return ve&&(H=p.cloneEvent(L),H.pointerType=this.POINTER_TYPES[L.pointerType]),H},cleanup:function(L){q.delete(L)},MSPointerDown:function(L){q.set(L.pointerId,L);var H=this.prepareEvent(L);p.down(H)},MSPointerMove:function(L){var H=this.prepareEvent(L);p.move(H)},MSPointerUp:function(L){var H=this.prepareEvent(L);p.up(H),this.cleanup(L.pointerId)},MSPointerOut:function(L){var H=this.prepareEvent(L);p.leaveOut(H)},MSPointerOver:function(L){var H=this.prepareEvent(L);p.enterOver(H)},MSPointerCancel:function(L){var H=this.prepareEvent(L);p.cancel(H),this.cleanup(L.pointerId)},MSLostPointerCapture:function(L){var H=p.makeEvent("lostpointercapture",L);p.dispatchEvent(H)},MSGotPointerCapture:function(L){var H=p.makeEvent("gotpointercapture",L);p.dispatchEvent(H)}};function Ee(){if(!window.PointerEvent){if(window.PointerEvent=i,window.navigator.msPointerEnabled){var L=window.navigator.msMaxTouchPoints;Object.defineProperty(window.navigator,"maxTouchPoints",{value:L,enumerable:!0}),p.registerSource("ms",ue)}else Object.defineProperty(window.navigator,"maxTouchPoints",{value:0,enumerable:!0}),p.registerSource("mouse",de),window.ontouchstart!==void 0&&p.registerSource("touch",$);p.register(document)}}var Pe=window.navigator,Le,ot,It;function Lt(L){if(!p.pointermap.has(L)){var H=new Error("NotFoundError");throw H.name="NotFoundError",H}}function Kt(L){for(var H=L.parentNode;H&&H!==L.ownerDocument;)H=H.parentNode;if(!H){var Z=new Error("InvalidStateError");throw Z.name="InvalidStateError",Z}}function qt(L){var H=p.pointermap.get(L);return H.buttons!==0}Pe.msPointerEnabled?(Le=function(L){Lt(L),Kt(this),qt(L)&&(p.setCapture(L,this,!0),this.msSetPointerCapture(L))},ot=function(L){Lt(L),p.releaseCapture(L,!0),this.msReleasePointerCapture(L)}):(Le=function(H){Lt(H),Kt(this),qt(H)&&p.setCapture(H,this)},ot=function(H){Lt(H),p.releaseCapture(H)}),It=function(H){return!!p.captureInfo[H]};function Tt(){window.Element&&!window.Element.prototype.setPointerCapture&&Object.defineProperties(window.Element.prototype,{setPointerCapture:{value:Le},releasePointerCapture:{value:ot},hasPointerCapture:{value:It}})}X(),Ee(),Tt();var jr={dispatcher:p,Installer:R,PointerEvent:i,PointerMap:s,targetFinding:m};return jr})})(S9);var M={exports:{}},Pt={};/*
object-assign
(c) Sindre Sorhus
@license MIT
*/var iS=Object.getOwnPropertySymbols,E9=Object.prototype.hasOwnProperty,C9=Object.prototype.propertyIsEnumerable;function I9(e){if(e==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}function N9(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de",Object.getOwnPropertyNames(e)[0]==="5")return!1;for(var t={},r=0;r<10;r++)t["_"+String.fromCharCode(r)]=r;var n=Object.getOwnPropertyNames(t).map(function(o){return t[o]});if(n.join("")!=="0123456789")return!1;var i={};return"abcdefghijklmnopqrst".split("").forEach(function(o){i[o]=o}),Object.keys(Object.assign({},i)).join("")==="abcdefghijklmnopqrst"}catch{return!1}}var Ux=N9()?Object.assign:function(e,t){for(var r,n=I9(e),i,o=1;o<arguments.length;o++){r=Object(arguments[o]);for(var s in r)E9.call(r,s)&&(n[s]=r[s]);if(iS){i=iS(r);for(var a=0;a<i.length;a++)C9.call(r,i[a])&&(n[i[a]]=r[i[a]])}}return n};/** @license React v17.0.2
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Fx=Ux,ph=60103,DN=60106;Pt.Fragment=60107;Pt.StrictMode=60108;Pt.Profiler=60114;var GN=60109,jN=60110,$N=60112;Pt.Suspense=60113;var HN=60115,zN=60116;if(typeof Symbol=="function"&&Symbol.for){var co=Symbol.for;ph=co("react.element"),DN=co("react.portal"),Pt.Fragment=co("react.fragment"),Pt.StrictMode=co("react.strict_mode"),Pt.Profiler=co("react.profiler"),GN=co("react.provider"),jN=co("react.context"),$N=co("react.forward_ref"),Pt.Suspense=co("react.suspense"),HN=co("react.memo"),zN=co("react.lazy")}var oS=typeof Symbol=="function"&&Symbol.iterator;function P9(e){return e===null||typeof e!="object"?null:(e=oS&&e[oS]||e["@@iterator"],typeof e=="function"?e:null)}function hp(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var VN={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},XN={};function mh(e,t,r){this.props=e,this.context=t,this.refs=XN,this.updater=r||VN}mh.prototype.isReactComponent={};mh.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error(hp(85));this.updater.enqueueSetState(this,e,t,"setState")};mh.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function WN(){}WN.prototype=mh.prototype;function Mx(e,t,r){this.props=e,this.context=t,this.refs=XN,this.updater=r||VN}var Bx=Mx.prototype=new WN;Bx.constructor=Mx;Fx(Bx,mh.prototype);Bx.isPureReactComponent=!0;var Dx={current:null},YN=Object.prototype.hasOwnProperty,KN={key:!0,ref:!0,__self:!0,__source:!0};function qN(e,t,r){var n,i={},o=null,s=null;if(t!=null)for(n in t.ref!==void 0&&(s=t.ref),t.key!==void 0&&(o=""+t.key),t)YN.call(t,n)&&!KN.hasOwnProperty(n)&&(i[n]=t[n]);var a=arguments.length-2;if(a===1)i.children=r;else if(1<a){for(var l=Array(a),u=0;u<a;u++)l[u]=arguments[u+2];i.children=l}if(e&&e.defaultProps)for(n in a=e.defaultProps,a)i[n]===void 0&&(i[n]=a[n]);return{$$typeof:ph,type:e,key:o,ref:s,props:i,_owner:Dx.current}}function A9(e,t){return{$$typeof:ph,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function Gx(e){return typeof e=="object"&&e!==null&&e.$$typeof===ph}function R9(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(r){return t[r]})}var sS=/\/+/g;function u2(e,t){return typeof e=="object"&&e!==null&&e.key!=null?R9(""+e.key):t.toString(36)}function Xv(e,t,r,n,i){var o=typeof e;(o==="undefined"||o==="boolean")&&(e=null);var s=!1;if(e===null)s=!0;else switch(o){case"string":case"number":s=!0;break;case"object":switch(e.$$typeof){case ph:case DN:s=!0}}if(s)return s=e,i=i(s),e=n===""?"."+u2(s,0):n,Array.isArray(i)?(r="",e!=null&&(r=e.replace(sS,"$&/")+"/"),Xv(i,t,r,"",function(u){return u})):i!=null&&(Gx(i)&&(i=A9(i,r+(!i.key||s&&s.key===i.key?"":(""+i.key).replace(sS,"$&/")+"/")+e)),t.push(i)),1;if(s=0,n=n===""?".":n+":",Array.isArray(e))for(var a=0;a<e.length;a++){o=e[a];var l=n+u2(o,a);s+=Xv(o,t,r,l,i)}else if(l=P9(e),typeof l=="function")for(e=l.call(e),a=0;!(o=e.next()).done;)o=o.value,l=n+u2(o,a++),s+=Xv(o,t,r,l,i);else if(o==="object")throw t=""+e,Error(hp(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t));return s}function Mm(e,t,r){if(e==null)return e;var n=[],i=0;return Xv(e,n,"","",function(o){return t.call(r,o,i++)}),n}function k9(e){if(e._status===-1){var t=e._result;t=t(),e._status=0,e._result=t,t.then(function(r){e._status===0&&(r=r.default,e._status=1,e._result=r)},function(r){e._status===0&&(e._status=2,e._result=r)})}if(e._status===1)return e._result;throw e._result}var ZN={current:null};function ra(){var e=ZN.current;if(e===null)throw Error(hp(321));return e}var O9={ReactCurrentDispatcher:ZN,ReactCurrentBatchConfig:{transition:0},ReactCurrentOwner:Dx,IsSomeRendererActing:{current:!1},assign:Fx};Pt.Children={map:Mm,forEach:function(e,t,r){Mm(e,function(){t.apply(this,arguments)},r)},count:function(e){var t=0;return Mm(e,function(){t++}),t},toArray:function(e){return Mm(e,function(t){return t})||[]},only:function(e){if(!Gx(e))throw Error(hp(143));return e}};Pt.Component=mh;Pt.PureComponent=Mx;Pt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=O9;Pt.cloneElement=function(e,t,r){if(e==null)throw Error(hp(267,e));var n=Fx({},e.props),i=e.key,o=e.ref,s=e._owner;if(t!=null){if(t.ref!==void 0&&(o=t.ref,s=Dx.current),t.key!==void 0&&(i=""+t.key),e.type&&e.type.defaultProps)var a=e.type.defaultProps;for(l in t)YN.call(t,l)&&!KN.hasOwnProperty(l)&&(n[l]=t[l]===void 0&&a!==void 0?a[l]:t[l])}var l=arguments.length-2;if(l===1)n.children=r;else if(1<l){a=Array(l);for(var u=0;u<l;u++)a[u]=arguments[u+2];n.children=a}return{$$typeof:ph,type:e.type,key:i,ref:o,props:n,_owner:s}};Pt.createContext=function(e,t){return t===void 0&&(t=null),e={$$typeof:jN,_calculateChangedBits:t,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null},e.Provider={$$typeof:GN,_context:e},e.Consumer=e};Pt.createElement=qN;Pt.createFactory=function(e){var t=qN.bind(null,e);return t.type=e,t};Pt.createRef=function(){return{current:null}};Pt.forwardRef=function(e){return{$$typeof:$N,render:e}};Pt.isValidElement=Gx;Pt.lazy=function(e){return{$$typeof:zN,_payload:{_status:-1,_result:e},_init:k9}};Pt.memo=function(e,t){return{$$typeof:HN,type:e,compare:t===void 0?null:t}};Pt.useCallback=function(e,t){return ra().useCallback(e,t)};Pt.useContext=function(e,t){return ra().useContext(e,t)};Pt.useDebugValue=function(){};Pt.useEffect=function(e,t){return ra().useEffect(e,t)};Pt.useImperativeHandle=function(e,t,r){return ra().useImperativeHandle(e,t,r)};Pt.useLayoutEffect=function(e,t){return ra().useLayoutEffect(e,t)};Pt.useMemo=function(e,t){return ra().useMemo(e,t)};Pt.useReducer=function(e,t,r){return ra().useReducer(e,t,r)};Pt.useRef=function(e){return ra().useRef(e)};Pt.useState=function(e){return ra().useState(e)};Pt.version="17.0.2";(function(e){e.exports=Pt})(M);const Je=T9(M.exports);var JN={exports:{}},io={},QN={exports:{}},eP={};/** @license React v0.20.2
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){var t,r,n,i;if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;e.unstable_now=function(){return o.now()}}else{var s=Date,a=s.now();e.unstable_now=function(){return s.now()-a}}if(typeof window>"u"||typeof MessageChannel!="function"){var l=null,u=null,c=function(){if(l!==null)try{var ee=e.unstable_now();l(!0,ee),l=null}catch(K){throw setTimeout(c,0),K}};t=function(ee){l!==null?setTimeout(t,0,ee):(l=ee,setTimeout(c,0))},r=function(ee,K){u=setTimeout(ee,K)},n=function(){clearTimeout(u)},e.unstable_shouldYield=function(){return!1},i=e.unstable_forceFrameRate=function(){}}else{var f=window.setTimeout,p=window.clearTimeout;if(typeof console<"u"){var m=window.cancelAnimationFrame;typeof window.requestAnimationFrame!="function"&&console.error("This browser doesn't support requestAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills"),typeof m!="function"&&console.error("This browser doesn't support cancelAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills")}var g=!1,b=null,y=-1,w=5,x=0;e.unstable_shouldYield=function(){return e.unstable_now()>=x},i=function(){},e.unstable_forceFrameRate=function(ee){0>ee||125<ee?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):w=0<ee?Math.floor(1e3/ee):5};var T=new MessageChannel,I=T.port2;T.port1.onmessage=function(){if(b!==null){var ee=e.unstable_now();x=ee+w;try{b(!0,ee)?I.postMessage(null):(g=!1,b=null)}catch(K){throw I.postMessage(null),K}}else g=!1},t=function(ee){b=ee,g||(g=!0,I.postMessage(null))},r=function(ee,K){y=f(function(){ee(e.unstable_now())},K)},n=function(){p(y),y=-1}}function R(ee,K){var te=ee.length;ee.push(K);e:for(;;){var ye=te-1>>>1,Ce=ee[ye];if(Ce!==void 0&&0<P(Ce,K))ee[ye]=K,ee[te]=Ce,te=ye;else break e}}function S(ee){return ee=ee[0],ee===void 0?null:ee}function O(ee){var K=ee[0];if(K!==void 0){var te=ee.pop();if(te!==K){ee[0]=te;e:for(var ye=0,Ce=ee.length;ye<Ce;){var Ie=2*(ye+1)-1,Ye=ee[Ie],pe=Ie+1,F=ee[pe];if(Ye!==void 0&&0>P(Ye,te))F!==void 0&&0>P(F,Ye)?(ee[ye]=F,ee[pe]=te,ye=pe):(ee[ye]=Ye,ee[Ie]=te,ye=Ie);else if(F!==void 0&&0>P(F,te))ee[ye]=F,ee[pe]=te,ye=pe;else break e}}return K}return null}function P(ee,K){var te=ee.sortIndex-K.sortIndex;return te!==0?te:ee.id-K.id}var N=[],A=[],j=1,X=null,G=3,ne=!1,W=!1,Y=!1;function de(ee){for(var K=S(A);K!==null;){if(K.callback===null)O(A);else if(K.startTime<=ee)O(A),K.sortIndex=K.expirationTime,R(N,K);else break;K=S(A)}}function le(ee){if(Y=!1,de(ee),!W)if(S(N)!==null)W=!0,t(ie);else{var K=S(A);K!==null&&r(le,K.startTime-ee)}}function ie(ee,K){W=!1,Y&&(Y=!1,n()),ne=!0;var te=G;try{for(de(K),X=S(N);X!==null&&(!(X.expirationTime>K)||ee&&!e.unstable_shouldYield());){var ye=X.callback;if(typeof ye=="function"){X.callback=null,G=X.priorityLevel;var Ce=ye(X.expirationTime<=K);K=e.unstable_now(),typeof Ce=="function"?X.callback=Ce:X===S(N)&&O(N),de(K)}else O(N);X=S(N)}if(X!==null)var Ie=!0;else{var Ye=S(A);Ye!==null&&r(le,Ye.startTime-K),Ie=!1}return Ie}finally{X=null,G=te,ne=!1}}var Q=i;e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(ee){ee.callback=null},e.unstable_continueExecution=function(){W||ne||(W=!0,t(ie))},e.unstable_getCurrentPriorityLevel=function(){return G},e.unstable_getFirstCallbackNode=function(){return S(N)},e.unstable_next=function(ee){switch(G){case 1:case 2:case 3:var K=3;break;default:K=G}var te=G;G=K;try{return ee()}finally{G=te}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=Q,e.unstable_runWithPriority=function(ee,K){switch(ee){case 1:case 2:case 3:case 4:case 5:break;default:ee=3}var te=G;G=ee;try{return K()}finally{G=te}},e.unstable_scheduleCallback=function(ee,K,te){var ye=e.unstable_now();switch(typeof te=="object"&&te!==null?(te=te.delay,te=typeof te=="number"&&0<te?ye+te:ye):te=ye,ee){case 1:var Ce=-1;break;case 2:Ce=250;break;case 5:Ce=1073741823;break;case 4:Ce=1e4;break;default:Ce=5e3}return Ce=te+Ce,ee={id:j++,callback:K,priorityLevel:ee,startTime:te,expirationTime:Ce,sortIndex:-1},te>ye?(ee.sortIndex=te,R(A,ee),S(N)===null&&ee===S(A)&&(Y?n():Y=!0,r(le,te-ye))):(ee.sortIndex=Ce,R(N,ee),W||ne||(W=!0,t(ie))),ee},e.unstable_wrapCallback=function(ee){var K=G;return function(){var te=G;G=K;try{return ee.apply(this,arguments)}finally{G=te}}}})(eP);(function(e){e.exports=eP})(QN);/** @license React v17.0.2
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Mg=M.exports,dr=Ux,cn=QN.exports;function xe(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}if(!Mg)throw Error(xe(227));var tP=new Set,wd={};function wu(e,t){eh(e,t),eh(e+"Capture",t)}function eh(e,t){for(wd[e]=t,e=0;e<t.length;e++)tP.add(t[e])}var Ys=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),L9=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,aS=Object.prototype.hasOwnProperty,lS={},uS={};function U9(e){return aS.call(uS,e)?!0:aS.call(lS,e)?!1:L9.test(e)?uS[e]=!0:(lS[e]=!0,!1)}function F9(e,t,r,n){if(r!==null&&r.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return n?!1:r!==null?!r.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function M9(e,t,r,n){if(t===null||typeof t>"u"||F9(e,t,r,n))return!0;if(n)return!1;if(r!==null)switch(r.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function qn(e,t,r,n,i,o,s){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=n,this.attributeNamespace=i,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=o,this.removeEmptyString=s}var In={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){In[e]=new qn(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];In[t]=new qn(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){In[e]=new qn(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){In[e]=new qn(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){In[e]=new qn(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){In[e]=new qn(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){In[e]=new qn(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){In[e]=new qn(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){In[e]=new qn(e,5,!1,e.toLowerCase(),null,!1,!1)});var jx=/[\-:]([a-z])/g;function $x(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(jx,$x);In[t]=new qn(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(jx,$x);In[t]=new qn(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(jx,$x);In[t]=new qn(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){In[e]=new qn(e,1,!1,e.toLowerCase(),null,!1,!1)});In.xlinkHref=new qn("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){In[e]=new qn(e,1,!1,e.toLowerCase(),null,!0,!0)});function Hx(e,t,r,n){var i=In.hasOwnProperty(t)?In[t]:null,o=i!==null?i.type===0:n?!1:!(!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N");o||(M9(t,r,i,n)&&(r=null),n||i===null?U9(t)&&(r===null?e.removeAttribute(t):e.setAttribute(t,""+r)):i.mustUseProperty?e[i.propertyName]=r===null?i.type===3?!1:"":r:(t=i.attributeName,n=i.attributeNamespace,r===null?e.removeAttribute(t):(i=i.type,r=i===3||i===4&&r===!0?"":""+r,n?e.setAttributeNS(n,t,r):e.setAttribute(t,r))))}var xu=Mg.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Hf=60103,zl=60106,Ia=60107,zx=60108,Zf=60114,Vx=60109,Xx=60110,Bg=60112,Jf=60113,P0=60120,Dg=60115,Wx=60116,Yx=60121,Kx=60128,rP=60129,qx=60130,V_=60131;if(typeof Symbol=="function"&&Symbol.for){var rn=Symbol.for;Hf=rn("react.element"),zl=rn("react.portal"),Ia=rn("react.fragment"),zx=rn("react.strict_mode"),Zf=rn("react.profiler"),Vx=rn("react.provider"),Xx=rn("react.context"),Bg=rn("react.forward_ref"),Jf=rn("react.suspense"),P0=rn("react.suspense_list"),Dg=rn("react.memo"),Wx=rn("react.lazy"),Yx=rn("react.block"),rn("react.scope"),Kx=rn("react.opaque.id"),rP=rn("react.debug_trace_mode"),qx=rn("react.offscreen"),V_=rn("react.legacy_hidden")}var cS=typeof Symbol=="function"&&Symbol.iterator;function yf(e){return e===null||typeof e!="object"?null:(e=cS&&e[cS]||e["@@iterator"],typeof e=="function"?e:null)}var c2;function zf(e){if(c2===void 0)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);c2=t&&t[1]||""}return`
`+c2+e}var h2=!1;function Bm(e,t){if(!e||h2)return"";h2=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(l){var n=l}Reflect.construct(e,[],t)}else{try{t.call()}catch(l){n=l}e.call(t.prototype)}else{try{throw Error()}catch(l){n=l}e()}}catch(l){if(l&&n&&typeof l.stack=="string"){for(var i=l.stack.split(`
`),o=n.stack.split(`
`),s=i.length-1,a=o.length-1;1<=s&&0<=a&&i[s]!==o[a];)a--;for(;1<=s&&0<=a;s--,a--)if(i[s]!==o[a]){if(s!==1||a!==1)do if(s--,a--,0>a||i[s]!==o[a])return`
`+i[s].replace(" at new "," at ");while(1<=s&&0<=a);break}}}finally{h2=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?zf(e):""}function B9(e){switch(e.tag){case 5:return zf(e.type);case 16:return zf("Lazy");case 13:return zf("Suspense");case 19:return zf("SuspenseList");case 0:case 2:case 15:return e=Bm(e.type,!1),e;case 11:return e=Bm(e.type.render,!1),e;case 22:return e=Bm(e.type._render,!1),e;case 1:return e=Bm(e.type,!0),e;default:return""}}function Bc(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Ia:return"Fragment";case zl:return"Portal";case Zf:return"Profiler";case zx:return"StrictMode";case Jf:return"Suspense";case P0:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case Xx:return(e.displayName||"Context")+".Consumer";case Vx:return(e._context.displayName||"Context")+".Provider";case Bg:var t=e.render;return t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case Dg:return Bc(e.type);case Yx:return Bc(e._render);case Wx:t=e._payload,e=e._init;try{return Bc(e(t))}catch{}}return null}function qa(e){switch(typeof e){case"boolean":case"number":case"object":case"string":case"undefined":return e;default:return""}}function nP(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function D9(e){var t=nP(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),n=""+e[t];if(!e.hasOwnProperty(t)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var i=r.get,o=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(s){n=""+s,o.call(this,s)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(s){n=""+s},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Dm(e){e._valueTracker||(e._valueTracker=D9(e))}function iP(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),n="";return e&&(n=nP(e)?e.checked?"true":"false":e.value),e=n,e!==r?(t.setValue(e),!0):!1}function A0(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function X_(e,t){var r=t.checked;return dr({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r!=null?r:e._wrapperState.initialChecked})}function hS(e,t){var r=t.defaultValue==null?"":t.defaultValue,n=t.checked!=null?t.checked:t.defaultChecked;r=qa(t.value!=null?t.value:r),e._wrapperState={initialChecked:n,initialValue:r,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function oP(e,t){t=t.checked,t!=null&&Hx(e,"checked",t,!1)}function W_(e,t){oP(e,t);var r=qa(t.value),n=t.type;if(r!=null)n==="number"?(r===0&&e.value===""||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if(n==="submit"||n==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?Y_(e,t.type,r):t.hasOwnProperty("defaultValue")&&Y_(e,t.type,qa(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function fS(e,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var n=t.type;if(!(n!=="submit"&&n!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,r||t===e.value||(e.value=t),e.defaultValue=t}r=e.name,r!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,r!==""&&(e.name=r)}function Y_(e,t,r){(t!=="number"||A0(e.ownerDocument)!==e)&&(r==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}function G9(e){var t="";return Mg.Children.forEach(e,function(r){r!=null&&(t+=r)}),t}function K_(e,t){return e=dr({children:void 0},t),(t=G9(t.children))&&(e.children=t),e}function Dc(e,t,r,n){if(e=e.options,t){t={};for(var i=0;i<r.length;i++)t["$"+r[i]]=!0;for(r=0;r<e.length;r++)i=t.hasOwnProperty("$"+e[r].value),e[r].selected!==i&&(e[r].selected=i),i&&n&&(e[r].defaultSelected=!0)}else{for(r=""+qa(r),t=null,i=0;i<e.length;i++){if(e[i].value===r){e[i].selected=!0,n&&(e[i].defaultSelected=!0);return}t!==null||e[i].disabled||(t=e[i])}t!==null&&(t.selected=!0)}}function q_(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(xe(91));return dr({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function dS(e,t){var r=t.value;if(r==null){if(r=t.children,t=t.defaultValue,r!=null){if(t!=null)throw Error(xe(92));if(Array.isArray(r)){if(!(1>=r.length))throw Error(xe(93));r=r[0]}t=r}t==null&&(t=""),r=t}e._wrapperState={initialValue:qa(r)}}function sP(e,t){var r=qa(t.value),n=qa(t.defaultValue);r!=null&&(r=""+r,r!==e.value&&(e.value=r),t.defaultValue==null&&e.defaultValue!==r&&(e.defaultValue=r)),n!=null&&(e.defaultValue=""+n)}function pS(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}var Z_={html:"http://www.w3.org/1999/xhtml",mathml:"http://www.w3.org/1998/Math/MathML",svg:"http://www.w3.org/2000/svg"};function aP(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function J_(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?aP(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Gm,lP=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,r,n,i){MSApp.execUnsafeLocalFunction(function(){return e(t,r,n,i)})}:e}(function(e,t){if(e.namespaceURI!==Z_.svg||"innerHTML"in e)e.innerHTML=t;else{for(Gm=Gm||document.createElement("div"),Gm.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Gm.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function xd(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&r.nodeType===3){r.nodeValue=t;return}}e.textContent=t}var Qf={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},j9=["Webkit","ms","Moz","O"];Object.keys(Qf).forEach(function(e){j9.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Qf[t]=Qf[e]})});function uP(e,t,r){return t==null||typeof t=="boolean"||t===""?"":r||typeof t!="number"||t===0||Qf.hasOwnProperty(e)&&Qf[e]?(""+t).trim():t+"px"}function cP(e,t){e=e.style;for(var r in t)if(t.hasOwnProperty(r)){var n=r.indexOf("--")===0,i=uP(r,t[r],n);r==="float"&&(r="cssFloat"),n?e.setProperty(r,i):e[r]=i}}var $9=dr({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Q_(e,t){if(t){if($9[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(xe(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(xe(60));if(!(typeof t.dangerouslySetInnerHTML=="object"&&"__html"in t.dangerouslySetInnerHTML))throw Error(xe(61))}if(t.style!=null&&typeof t.style!="object")throw Error(xe(62))}}function eb(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}function Zx(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var tb=null,Gc=null,jc=null;function mS(e){if(e=dp(e)){if(typeof tb!="function")throw Error(xe(280));var t=e.stateNode;t&&(t=Vg(t),tb(e.stateNode,e.type,t))}}function hP(e){Gc?jc?jc.push(e):jc=[e]:Gc=e}function fP(){if(Gc){var e=Gc,t=jc;if(jc=Gc=null,mS(e),t)for(e=0;e<t.length;e++)mS(t[e])}}function Jx(e,t){return e(t)}function dP(e,t,r,n,i){return e(t,r,n,i)}function Qx(){}var pP=Jx,Vl=!1,f2=!1;function e3(){(Gc!==null||jc!==null)&&(Qx(),fP())}function H9(e,t,r){if(f2)return e(t,r);f2=!0;try{return pP(e,t,r)}finally{f2=!1,e3()}}function Td(e,t){var r=e.stateNode;if(r===null)return null;var n=Vg(r);if(n===null)return null;r=n[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(e=e.type,n=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!n;break e;default:e=!1}if(e)return null;if(r&&typeof r!="function")throw Error(xe(231,t,typeof r));return r}var rb=!1;if(Ys)try{var _f={};Object.defineProperty(_f,"passive",{get:function(){rb=!0}}),window.addEventListener("test",_f,_f),window.removeEventListener("test",_f,_f)}catch{rb=!1}function z9(e,t,r,n,i,o,s,a,l){var u=Array.prototype.slice.call(arguments,3);try{t.apply(r,u)}catch(c){this.onError(c)}}var ed=!1,R0=null,k0=!1,nb=null,V9={onError:function(e){ed=!0,R0=e}};function X9(e,t,r,n,i,o,s,a,l){ed=!1,R0=null,z9.apply(V9,arguments)}function W9(e,t,r,n,i,o,s,a,l){if(X9.apply(this,arguments),ed){if(ed){var u=R0;ed=!1,R0=null}else throw Error(xe(198));k0||(k0=!0,nb=u)}}function Tu(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,(t.flags&1026)!==0&&(r=t.return),e=t.return;while(e)}return t.tag===3?r:null}function mP(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function vS(e){if(Tu(e)!==e)throw Error(xe(188))}function Y9(e){var t=e.alternate;if(!t){if(t=Tu(e),t===null)throw Error(xe(188));return t!==e?null:e}for(var r=e,n=t;;){var i=r.return;if(i===null)break;var o=i.alternate;if(o===null){if(n=i.return,n!==null){r=n;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===r)return vS(i),e;if(o===n)return vS(i),t;o=o.sibling}throw Error(xe(188))}if(r.return!==n.return)r=i,n=o;else{for(var s=!1,a=i.child;a;){if(a===r){s=!0,r=i,n=o;break}if(a===n){s=!0,n=i,r=o;break}a=a.sibling}if(!s){for(a=o.child;a;){if(a===r){s=!0,r=o,n=i;break}if(a===n){s=!0,n=o,r=i;break}a=a.sibling}if(!s)throw Error(xe(189))}}if(r.alternate!==n)throw Error(xe(190))}if(r.tag!==3)throw Error(xe(188));return r.stateNode.current===r?e:t}function vP(e){if(e=Y9(e),!e)return null;for(var t=e;;){if(t.tag===5||t.tag===6)return t;if(t.child)t.child.return=t,t=t.child;else{if(t===e)break;for(;!t.sibling;){if(!t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}}return null}function gS(e,t){for(var r=e.alternate;t!==null;){if(t===e||t===r)return!0;t=t.return}return!1}var gP,t3,yP,_P,ib=!1,zo=[],Ua=null,Fa=null,Ma=null,Sd=new Map,Ed=new Map,bf=[],yS="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function ob(e,t,r,n,i){return{blockedOn:e,domEventName:t,eventSystemFlags:r|16,nativeEvent:i,targetContainers:[n]}}function _S(e,t){switch(e){case"focusin":case"focusout":Ua=null;break;case"dragenter":case"dragleave":Fa=null;break;case"mouseover":case"mouseout":Ma=null;break;case"pointerover":case"pointerout":Sd.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ed.delete(t.pointerId)}}function wf(e,t,r,n,i,o){return e===null||e.nativeEvent!==o?(e=ob(t,r,n,i,o),t!==null&&(t=dp(t),t!==null&&t3(t)),e):(e.eventSystemFlags|=n,t=e.targetContainers,i!==null&&t.indexOf(i)===-1&&t.push(i),e)}function K9(e,t,r,n,i){switch(t){case"focusin":return Ua=wf(Ua,e,t,r,n,i),!0;case"dragenter":return Fa=wf(Fa,e,t,r,n,i),!0;case"mouseover":return Ma=wf(Ma,e,t,r,n,i),!0;case"pointerover":var o=i.pointerId;return Sd.set(o,wf(Sd.get(o)||null,e,t,r,n,i)),!0;case"gotpointercapture":return o=i.pointerId,Ed.set(o,wf(Ed.get(o)||null,e,t,r,n,i)),!0}return!1}function q9(e){var t=Xl(e.target);if(t!==null){var r=Tu(t);if(r!==null){if(t=r.tag,t===13){if(t=mP(r),t!==null){e.blockedOn=t,_P(e.lanePriority,function(){cn.unstable_runWithPriority(e.priority,function(){yP(r)})});return}}else if(t===3&&r.stateNode.hydrate){e.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Wv(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var r=o3(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(r!==null)return t=dp(r),t!==null&&t3(t),e.blockedOn=r,!1;t.shift()}return!0}function bS(e,t,r){Wv(e)&&r.delete(t)}function Z9(){for(ib=!1;0<zo.length;){var e=zo[0];if(e.blockedOn!==null){e=dp(e.blockedOn),e!==null&&gP(e);break}for(var t=e.targetContainers;0<t.length;){var r=o3(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(r!==null){e.blockedOn=r;break}t.shift()}e.blockedOn===null&&zo.shift()}Ua!==null&&Wv(Ua)&&(Ua=null),Fa!==null&&Wv(Fa)&&(Fa=null),Ma!==null&&Wv(Ma)&&(Ma=null),Sd.forEach(bS),Ed.forEach(bS)}function xf(e,t){e.blockedOn===t&&(e.blockedOn=null,ib||(ib=!0,cn.unstable_scheduleCallback(cn.unstable_NormalPriority,Z9)))}function bP(e){function t(i){return xf(i,e)}if(0<zo.length){xf(zo[0],e);for(var r=1;r<zo.length;r++){var n=zo[r];n.blockedOn===e&&(n.blockedOn=null)}}for(Ua!==null&&xf(Ua,e),Fa!==null&&xf(Fa,e),Ma!==null&&xf(Ma,e),Sd.forEach(t),Ed.forEach(t),r=0;r<bf.length;r++)n=bf[r],n.blockedOn===e&&(n.blockedOn=null);for(;0<bf.length&&(r=bf[0],r.blockedOn===null);)q9(r),r.blockedOn===null&&bf.shift()}function jm(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var Sc={animationend:jm("Animation","AnimationEnd"),animationiteration:jm("Animation","AnimationIteration"),animationstart:jm("Animation","AnimationStart"),transitionend:jm("Transition","TransitionEnd")},d2={},wP={};Ys&&(wP=document.createElement("div").style,"AnimationEvent"in window||(delete Sc.animationend.animation,delete Sc.animationiteration.animation,delete Sc.animationstart.animation),"TransitionEvent"in window||delete Sc.transitionend.transition);function Gg(e){if(d2[e])return d2[e];if(!Sc[e])return e;var t=Sc[e],r;for(r in t)if(t.hasOwnProperty(r)&&r in wP)return d2[e]=t[r];return e}var xP=Gg("animationend"),TP=Gg("animationiteration"),SP=Gg("animationstart"),EP=Gg("transitionend"),CP=new Map,r3=new Map,J9=["abort","abort",xP,"animationEnd",TP,"animationIteration",SP,"animationStart","canplay","canPlay","canplaythrough","canPlayThrough","durationchange","durationChange","emptied","emptied","encrypted","encrypted","ended","ended","error","error","gotpointercapture","gotPointerCapture","load","load","loadeddata","loadedData","loadedmetadata","loadedMetadata","loadstart","loadStart","lostpointercapture","lostPointerCapture","playing","playing","progress","progress","seeking","seeking","stalled","stalled","suspend","suspend","timeupdate","timeUpdate",EP,"transitionEnd","waiting","waiting"];function n3(e,t){for(var r=0;r<e.length;r+=2){var n=e[r],i=e[r+1];i="on"+(i[0].toUpperCase()+i.slice(1)),r3.set(n,t),CP.set(n,i),wu(i,[n])}}var Q9=cn.unstable_now;Q9();var tr=8;function yc(e){if((1&e)!==0)return tr=15,1;if((2&e)!==0)return tr=14,2;if((4&e)!==0)return tr=13,4;var t=24&e;return t!==0?(tr=12,t):(e&32)!==0?(tr=11,32):(t=192&e,t!==0?(tr=10,t):(e&256)!==0?(tr=9,256):(t=3584&e,t!==0?(tr=8,t):(e&4096)!==0?(tr=7,4096):(t=4186112&e,t!==0?(tr=6,t):(t=62914560&e,t!==0?(tr=5,t):e&67108864?(tr=4,67108864):(e&134217728)!==0?(tr=3,134217728):(t=805306368&e,t!==0?(tr=2,t):(1073741824&e)!==0?(tr=1,1073741824):(tr=8,e))))))}function eL(e){switch(e){case 99:return 15;case 98:return 10;case 97:case 96:return 8;case 95:return 2;default:return 0}}function tL(e){switch(e){case 15:case 14:return 99;case 13:case 12:case 11:case 10:return 98;case 9:case 8:case 7:case 6:case 4:case 5:return 97;case 3:case 2:case 1:return 95;case 0:return 90;default:throw Error(xe(358,e))}}function Cd(e,t){var r=e.pendingLanes;if(r===0)return tr=0;var n=0,i=0,o=e.expiredLanes,s=e.suspendedLanes,a=e.pingedLanes;if(o!==0)n=o,i=tr=15;else if(o=r&134217727,o!==0){var l=o&~s;l!==0?(n=yc(l),i=tr):(a&=o,a!==0&&(n=yc(a),i=tr))}else o=r&~s,o!==0?(n=yc(o),i=tr):a!==0&&(n=yc(a),i=tr);if(n===0)return 0;if(n=31-Za(n),n=r&((0>n?0:1<<n)<<1)-1,t!==0&&t!==n&&(t&s)===0){if(yc(t),i<=tr)return t;tr=i}if(t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=n;0<t;)r=31-Za(t),i=1<<r,n|=e[r],t&=~i;return n}function IP(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function O0(e,t){switch(e){case 15:return 1;case 14:return 2;case 12:return e=_c(24&~t),e===0?O0(10,t):e;case 10:return e=_c(192&~t),e===0?O0(8,t):e;case 8:return e=_c(3584&~t),e===0&&(e=_c(4186112&~t),e===0&&(e=512)),e;case 2:return t=_c(805306368&~t),t===0&&(t=268435456),t}throw Error(xe(358,e))}function _c(e){return e&-e}function p2(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function jg(e,t,r){e.pendingLanes|=t;var n=t-1;e.suspendedLanes&=n,e.pingedLanes&=n,e=e.eventTimes,t=31-Za(t),e[t]=r}var Za=Math.clz32?Math.clz32:iL,rL=Math.log,nL=Math.LN2;function iL(e){return e===0?32:31-(rL(e)/nL|0)|0}var oL=cn.unstable_UserBlockingPriority,sL=cn.unstable_runWithPriority,Yv=!0;function aL(e,t,r,n){Vl||Qx();var i=i3,o=Vl;Vl=!0;try{dP(i,e,t,r,n)}finally{(Vl=o)||e3()}}function lL(e,t,r,n){sL(oL,i3.bind(null,e,t,r,n))}function i3(e,t,r,n){if(Yv){var i;if((i=(t&4)===0)&&0<zo.length&&-1<yS.indexOf(e))e=ob(null,e,t,r,n),zo.push(e);else{var o=o3(e,t,r,n);if(o===null)i&&_S(e,n);else{if(i){if(-1<yS.indexOf(e)){e=ob(o,e,t,r,n),zo.push(e);return}if(K9(o,e,t,r,n))return;_S(e,n)}GP(e,t,n,null,r)}}}}function o3(e,t,r,n){var i=Zx(n);if(i=Xl(i),i!==null){var o=Tu(i);if(o===null)i=null;else{var s=o.tag;if(s===13){if(i=mP(o),i!==null)return i;i=null}else if(s===3){if(o.stateNode.hydrate)return o.tag===3?o.stateNode.containerInfo:null;i=null}else o!==i&&(i=null)}}return GP(e,t,n,i,r),null}var Aa=null,s3=null,Kv=null;function NP(){if(Kv)return Kv;var e,t=s3,r=t.length,n,i="value"in Aa?Aa.value:Aa.textContent,o=i.length;for(e=0;e<r&&t[e]===i[e];e++);var s=r-e;for(n=1;n<=s&&t[r-n]===i[o-n];n++);return Kv=i.slice(e,1<n?1-n:void 0)}function qv(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function $m(){return!0}function wS(){return!1}function ki(e){function t(r,n,i,o,s){this._reactName=r,this._targetInst=i,this.type=n,this.nativeEvent=o,this.target=s,this.currentTarget=null;for(var a in e)e.hasOwnProperty(a)&&(r=e[a],this[a]=r?r(o):o[a]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?$m:wS,this.isPropagationStopped=wS,this}return dr(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=$m)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=$m)},persist:function(){},isPersistent:$m}),t}var vh={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},a3=ki(vh),fp=dr({},vh,{view:0,detail:0}),uL=ki(fp),m2,v2,Tf,$g=dr({},fp,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:l3,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Tf&&(Tf&&e.type==="mousemove"?(m2=e.screenX-Tf.screenX,v2=e.screenY-Tf.screenY):v2=m2=0,Tf=e),m2)},movementY:function(e){return"movementY"in e?e.movementY:v2}}),xS=ki($g),cL=dr({},$g,{dataTransfer:0}),hL=ki(cL),fL=dr({},fp,{relatedTarget:0}),g2=ki(fL),dL=dr({},vh,{animationName:0,elapsedTime:0,pseudoElement:0}),pL=ki(dL),mL=dr({},vh,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),vL=ki(mL),gL=dr({},vh,{data:0}),TS=ki(gL),yL={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},_L={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},bL={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function wL(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=bL[e])?!!t[e]:!1}function l3(){return wL}var xL=dr({},fp,{key:function(e){if(e.key){var t=yL[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=qv(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?_L[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:l3,charCode:function(e){return e.type==="keypress"?qv(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?qv(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),TL=ki(xL),SL=dr({},$g,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),SS=ki(SL),EL=dr({},fp,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:l3}),CL=ki(EL),IL=dr({},vh,{propertyName:0,elapsedTime:0,pseudoElement:0}),NL=ki(IL),PL=dr({},$g,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),AL=ki(PL),RL=[9,13,27,32],u3=Ys&&"CompositionEvent"in window,td=null;Ys&&"documentMode"in document&&(td=document.documentMode);var kL=Ys&&"TextEvent"in window&&!td,PP=Ys&&(!u3||td&&8<td&&11>=td),ES=String.fromCharCode(32),CS=!1;function AP(e,t){switch(e){case"keyup":return RL.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function RP(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Ec=!1;function OL(e,t){switch(e){case"compositionend":return RP(t);case"keypress":return t.which!==32?null:(CS=!0,ES);case"textInput":return e=t.data,e===ES&&CS?null:e;default:return null}}function LL(e,t){if(Ec)return e==="compositionend"||!u3&&AP(e,t)?(e=NP(),Kv=s3=Aa=null,Ec=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return PP&&t.locale!=="ko"?null:t.data;default:return null}}var UL={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function IS(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!UL[e.type]:t==="textarea"}function kP(e,t,r,n){hP(n),t=L0(t,"onChange"),0<t.length&&(r=new a3("onChange","change",null,r,n),e.push({event:r,listeners:t}))}var rd=null,Id=null;function FL(e){MP(e,0)}function Hg(e){var t=Ic(e);if(iP(t))return e}function ML(e,t){if(e==="change")return t}var OP=!1;if(Ys){var y2;if(Ys){var _2="oninput"in document;if(!_2){var NS=document.createElement("div");NS.setAttribute("oninput","return;"),_2=typeof NS.oninput=="function"}y2=_2}else y2=!1;OP=y2&&(!document.documentMode||9<document.documentMode)}function PS(){rd&&(rd.detachEvent("onpropertychange",LP),Id=rd=null)}function LP(e){if(e.propertyName==="value"&&Hg(Id)){var t=[];if(kP(t,Id,e,Zx(e)),e=FL,Vl)e(t);else{Vl=!0;try{Jx(e,t)}finally{Vl=!1,e3()}}}}function BL(e,t,r){e==="focusin"?(PS(),rd=t,Id=r,rd.attachEvent("onpropertychange",LP)):e==="focusout"&&PS()}function DL(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Hg(Id)}function GL(e,t){if(e==="click")return Hg(t)}function jL(e,t){if(e==="input"||e==="change")return Hg(t)}function $L(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Hi=typeof Object.is=="function"?Object.is:$L,HL=Object.prototype.hasOwnProperty;function Nd(e,t){if(Hi(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++)if(!HL.call(t,r[n])||!Hi(e[r[n]],t[r[n]]))return!1;return!0}function AS(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function RS(e,t){var r=AS(e);e=0;for(var n;r;){if(r.nodeType===3){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=AS(r)}}function UP(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?UP(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function kS(){for(var e=window,t=A0();t instanceof e.HTMLIFrameElement;){try{var r=typeof t.contentWindow.location.href=="string"}catch{r=!1}if(r)e=t.contentWindow;else break;t=A0(e.document)}return t}function sb(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}var zL=Ys&&"documentMode"in document&&11>=document.documentMode,Cc=null,ab=null,nd=null,lb=!1;function OS(e,t,r){var n=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;lb||Cc==null||Cc!==A0(n)||(n=Cc,"selectionStart"in n&&sb(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),nd&&Nd(nd,n)||(nd=n,n=L0(ab,"onSelect"),0<n.length&&(t=new a3("onSelect","select",null,t,r),e.push({event:t,listeners:n}),t.target=Cc)))}n3("cancel cancel click click close close contextmenu contextMenu copy copy cut cut auxclick auxClick dblclick doubleClick dragend dragEnd dragstart dragStart drop drop focusin focus focusout blur input input invalid invalid keydown keyDown keypress keyPress keyup keyUp mousedown mouseDown mouseup mouseUp paste paste pause pause play play pointercancel pointerCancel pointerdown pointerDown pointerup pointerUp ratechange rateChange reset reset seeked seeked submit submit touchcancel touchCancel touchend touchEnd touchstart touchStart volumechange volumeChange".split(" "),0);n3("drag drag dragenter dragEnter dragexit dragExit dragleave dragLeave dragover dragOver mousemove mouseMove mouseout mouseOut mouseover mouseOver pointermove pointerMove pointerout pointerOut pointerover pointerOver scroll scroll toggle toggle touchmove touchMove wheel wheel".split(" "),1);n3(J9,2);for(var LS="change selectionchange textInput compositionstart compositionend compositionupdate".split(" "),b2=0;b2<LS.length;b2++)r3.set(LS[b2],0);eh("onMouseEnter",["mouseout","mouseover"]);eh("onMouseLeave",["mouseout","mouseover"]);eh("onPointerEnter",["pointerout","pointerover"]);eh("onPointerLeave",["pointerout","pointerover"]);wu("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));wu("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));wu("onBeforeInput",["compositionend","keypress","textInput","paste"]);wu("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));wu("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));wu("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Vf="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),FP=new Set("cancel close invalid load scroll toggle".split(" ").concat(Vf));function US(e,t,r){var n=e.type||"unknown-event";e.currentTarget=r,W9(n,t,void 0,e),e.currentTarget=null}function MP(e,t){t=(t&4)!==0;for(var r=0;r<e.length;r++){var n=e[r],i=n.event;n=n.listeners;e:{var o=void 0;if(t)for(var s=n.length-1;0<=s;s--){var a=n[s],l=a.instance,u=a.currentTarget;if(a=a.listener,l!==o&&i.isPropagationStopped())break e;US(i,a,u),o=l}else for(s=0;s<n.length;s++){if(a=n[s],l=a.instance,u=a.currentTarget,a=a.listener,l!==o&&i.isPropagationStopped())break e;US(i,a,u),o=l}}}if(k0)throw e=nb,k0=!1,nb=null,e}function or(e,t){var r=$P(t),n=e+"__bubble";r.has(n)||(DP(t,e,2,!1),r.add(n))}var FS="_reactListening"+Math.random().toString(36).slice(2);function BP(e){e[FS]||(e[FS]=!0,tP.forEach(function(t){FP.has(t)||MS(t,!1,e,null),MS(t,!0,e,null)}))}function MS(e,t,r,n){var i=4<arguments.length&&arguments[4]!==void 0?arguments[4]:0,o=r;if(e==="selectionchange"&&r.nodeType!==9&&(o=r.ownerDocument),n!==null&&!t&&FP.has(e)){if(e!=="scroll")return;i|=2,o=n}var s=$P(o),a=e+"__"+(t?"capture":"bubble");s.has(a)||(t&&(i|=4),DP(o,e,i,t),s.add(a))}function DP(e,t,r,n){var i=r3.get(t);switch(i===void 0?2:i){case 0:i=aL;break;case 1:i=lL;break;default:i=i3}r=i.bind(null,t,r,e),i=void 0,!rb||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(i=!0),n?i!==void 0?e.addEventListener(t,r,{capture:!0,passive:i}):e.addEventListener(t,r,!0):i!==void 0?e.addEventListener(t,r,{passive:i}):e.addEventListener(t,r,!1)}function GP(e,t,r,n,i){var o=n;if((t&1)===0&&(t&2)===0&&n!==null)e:for(;;){if(n===null)return;var s=n.tag;if(s===3||s===4){var a=n.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(s===4)for(s=n.return;s!==null;){var l=s.tag;if((l===3||l===4)&&(l=s.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;s=s.return}for(;a!==null;){if(s=Xl(a),s===null)return;if(l=s.tag,l===5||l===6){n=o=s;continue e}a=a.parentNode}}n=n.return}H9(function(){var u=o,c=Zx(r),f=[];e:{var p=CP.get(e);if(p!==void 0){var m=a3,g=e;switch(e){case"keypress":if(qv(r)===0)break e;case"keydown":case"keyup":m=TL;break;case"focusin":g="focus",m=g2;break;case"focusout":g="blur",m=g2;break;case"beforeblur":case"afterblur":m=g2;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":m=xS;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":m=hL;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":m=CL;break;case xP:case TP:case SP:m=pL;break;case EP:m=NL;break;case"scroll":m=uL;break;case"wheel":m=AL;break;case"copy":case"cut":case"paste":m=vL;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":m=SS}var b=(t&4)!==0,y=!b&&e==="scroll",w=b?p!==null?p+"Capture":null:p;b=[];for(var x=u,T;x!==null;){T=x;var I=T.stateNode;if(T.tag===5&&I!==null&&(T=I,w!==null&&(I=Td(x,w),I!=null&&b.push(Pd(x,I,T)))),y)break;x=x.return}0<b.length&&(p=new m(p,g,null,r,c),f.push({event:p,listeners:b}))}}if((t&7)===0){e:{if(p=e==="mouseover"||e==="pointerover",m=e==="mouseout"||e==="pointerout",p&&(t&16)===0&&(g=r.relatedTarget||r.fromElement)&&(Xl(g)||g[gh]))break e;if((m||p)&&(p=c.window===c?c:(p=c.ownerDocument)?p.defaultView||p.parentWindow:window,m?(g=r.relatedTarget||r.toElement,m=u,g=g?Xl(g):null,g!==null&&(y=Tu(g),g!==y||g.tag!==5&&g.tag!==6)&&(g=null)):(m=null,g=u),m!==g)){if(b=xS,I="onMouseLeave",w="onMouseEnter",x="mouse",(e==="pointerout"||e==="pointerover")&&(b=SS,I="onPointerLeave",w="onPointerEnter",x="pointer"),y=m==null?p:Ic(m),T=g==null?p:Ic(g),p=new b(I,x+"leave",m,r,c),p.target=y,p.relatedTarget=T,I=null,Xl(c)===u&&(b=new b(w,x+"enter",g,r,c),b.target=T,b.relatedTarget=y,I=b),y=I,m&&g)t:{for(b=m,w=g,x=0,T=b;T;T=nc(T))x++;for(T=0,I=w;I;I=nc(I))T++;for(;0<x-T;)b=nc(b),x--;for(;0<T-x;)w=nc(w),T--;for(;x--;){if(b===w||w!==null&&b===w.alternate)break t;b=nc(b),w=nc(w)}b=null}else b=null;m!==null&&BS(f,p,m,b,!1),g!==null&&y!==null&&BS(f,y,g,b,!0)}}e:{if(p=u?Ic(u):window,m=p.nodeName&&p.nodeName.toLowerCase(),m==="select"||m==="input"&&p.type==="file")var R=ML;else if(IS(p))if(OP)R=jL;else{R=DL;var S=BL}else(m=p.nodeName)&&m.toLowerCase()==="input"&&(p.type==="checkbox"||p.type==="radio")&&(R=GL);if(R&&(R=R(e,u))){kP(f,R,r,c);break e}S&&S(e,p,u),e==="focusout"&&(S=p._wrapperState)&&S.controlled&&p.type==="number"&&Y_(p,"number",p.value)}switch(S=u?Ic(u):window,e){case"focusin":(IS(S)||S.contentEditable==="true")&&(Cc=S,ab=u,nd=null);break;case"focusout":nd=ab=Cc=null;break;case"mousedown":lb=!0;break;case"contextmenu":case"mouseup":case"dragend":lb=!1,OS(f,r,c);break;case"selectionchange":if(zL)break;case"keydown":case"keyup":OS(f,r,c)}var O;if(u3)e:{switch(e){case"compositionstart":var P="onCompositionStart";break e;case"compositionend":P="onCompositionEnd";break e;case"compositionupdate":P="onCompositionUpdate";break e}P=void 0}else Ec?AP(e,r)&&(P="onCompositionEnd"):e==="keydown"&&r.keyCode===229&&(P="onCompositionStart");P&&(PP&&r.locale!=="ko"&&(Ec||P!=="onCompositionStart"?P==="onCompositionEnd"&&Ec&&(O=NP()):(Aa=c,s3="value"in Aa?Aa.value:Aa.textContent,Ec=!0)),S=L0(u,P),0<S.length&&(P=new TS(P,e,null,r,c),f.push({event:P,listeners:S}),O?P.data=O:(O=RP(r),O!==null&&(P.data=O)))),(O=kL?OL(e,r):LL(e,r))&&(u=L0(u,"onBeforeInput"),0<u.length&&(c=new TS("onBeforeInput","beforeinput",null,r,c),f.push({event:c,listeners:u}),c.data=O))}MP(f,t)})}function Pd(e,t,r){return{instance:e,listener:t,currentTarget:r}}function L0(e,t){for(var r=t+"Capture",n=[];e!==null;){var i=e,o=i.stateNode;i.tag===5&&o!==null&&(i=o,o=Td(e,r),o!=null&&n.unshift(Pd(e,o,i)),o=Td(e,t),o!=null&&n.push(Pd(e,o,i))),e=e.return}return n}function nc(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function BS(e,t,r,n,i){for(var o=t._reactName,s=[];r!==null&&r!==n;){var a=r,l=a.alternate,u=a.stateNode;if(l!==null&&l===n)break;a.tag===5&&u!==null&&(a=u,i?(l=Td(r,o),l!=null&&s.unshift(Pd(r,l,a))):i||(l=Td(r,o),l!=null&&s.push(Pd(r,l,a)))),r=r.return}s.length!==0&&e.push({event:t,listeners:s})}function U0(){}var w2=null,x2=null;function jP(e,t){switch(e){case"button":case"input":case"select":case"textarea":return!!t.autoFocus}return!1}function ub(e,t){return e==="textarea"||e==="option"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var DS=typeof setTimeout=="function"?setTimeout:void 0,VL=typeof clearTimeout=="function"?clearTimeout:void 0;function c3(e){e.nodeType===1?e.textContent="":e.nodeType===9&&(e=e.body,e!=null&&(e.textContent=""))}function $c(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break}return e}function GS(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="$"||r==="$!"||r==="$?"){if(t===0)return e;t--}else r==="/$"&&t++}e=e.previousSibling}return null}var T2=0;function XL(e){return{$$typeof:Kx,toString:e,valueOf:e}}var zg=Math.random().toString(36).slice(2),Ra="__reactFiber$"+zg,F0="__reactProps$"+zg,gh="__reactContainer$"+zg,jS="__reactEvents$"+zg;function Xl(e){var t=e[Ra];if(t)return t;for(var r=e.parentNode;r;){if(t=r[gh]||r[Ra]){if(r=t.alternate,t.child!==null||r!==null&&r.child!==null)for(e=GS(e);e!==null;){if(r=e[Ra])return r;e=GS(e)}return t}e=r,r=e.parentNode}return null}function dp(e){return e=e[Ra]||e[gh],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Ic(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(xe(33))}function Vg(e){return e[F0]||null}function $P(e){var t=e[jS];return t===void 0&&(t=e[jS]=new Set),t}var cb=[],Nc=-1;function cl(e){return{current:e}}function lr(e){0>Nc||(e.current=cb[Nc],cb[Nc]=null,Nc--)}function xr(e,t){Nc++,cb[Nc]=e.current,e.current=t}var Ja={},$n=cl(Ja),hi=cl(!1),ou=Ja;function th(e,t){var r=e.type.contextTypes;if(!r)return Ja;var n=e.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===t)return n.__reactInternalMemoizedMaskedChildContext;var i={},o;for(o in r)i[o]=t[o];return n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=i),i}function fi(e){return e=e.childContextTypes,e!=null}function M0(){lr(hi),lr($n)}function $S(e,t,r){if($n.current!==Ja)throw Error(xe(168));xr($n,t),xr(hi,r)}function HP(e,t,r){var n=e.stateNode;if(e=t.childContextTypes,typeof n.getChildContext!="function")return r;n=n.getChildContext();for(var i in n)if(!(i in e))throw Error(xe(108,Bc(t)||"Unknown",i));return dr({},r,n)}function Zv(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Ja,ou=$n.current,xr($n,e),xr(hi,hi.current),!0}function HS(e,t,r){var n=e.stateNode;if(!n)throw Error(xe(169));r?(e=HP(e,t,ou),n.__reactInternalMemoizedMergedChildContext=e,lr(hi),lr($n),xr($n,e)):lr(hi),xr(hi,r)}var h3=null,Jl=null,WL=cn.unstable_runWithPriority,f3=cn.unstable_scheduleCallback,hb=cn.unstable_cancelCallback,YL=cn.unstable_shouldYield,zS=cn.unstable_requestPaint,fb=cn.unstable_now,KL=cn.unstable_getCurrentPriorityLevel,Xg=cn.unstable_ImmediatePriority,zP=cn.unstable_UserBlockingPriority,VP=cn.unstable_NormalPriority,XP=cn.unstable_LowPriority,WP=cn.unstable_IdlePriority,S2={},qL=zS!==void 0?zS:function(){},As=null,Jv=null,E2=!1,VS=fb(),Dn=1e4>VS?fb:function(){return fb()-VS};function rh(){switch(KL()){case Xg:return 99;case zP:return 98;case VP:return 97;case XP:return 96;case WP:return 95;default:throw Error(xe(332))}}function YP(e){switch(e){case 99:return Xg;case 98:return zP;case 97:return VP;case 96:return XP;case 95:return WP;default:throw Error(xe(332))}}function su(e,t){return e=YP(e),WL(e,t)}function Ad(e,t,r){return e=YP(e),f3(e,t,r)}function us(){if(Jv!==null){var e=Jv;Jv=null,hb(e)}KP()}function KP(){if(!E2&&As!==null){E2=!0;var e=0;try{var t=As;su(99,function(){for(;e<t.length;e++){var r=t[e];do r=r(!0);while(r!==null)}}),As=null}catch(r){throw As!==null&&(As=As.slice(e+1)),f3(Xg,us),r}finally{E2=!1}}}var ZL=xu.ReactCurrentBatchConfig;function vo(e,t){if(e&&e.defaultProps){t=dr({},t),e=e.defaultProps;for(var r in e)t[r]===void 0&&(t[r]=e[r]);return t}return t}var B0=cl(null),D0=null,Pc=null,G0=null;function d3(){G0=Pc=D0=null}function p3(e){var t=B0.current;lr(B0),e.type._context._currentValue=t}function qP(e,t){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)===t){if(r===null||(r.childLanes&t)===t)break;r.childLanes|=t}else e.childLanes|=t,r!==null&&(r.childLanes|=t);e=e.return}}function Hc(e,t){D0=e,G0=Pc=null,e=e.dependencies,e!==null&&e.firstContext!==null&&((e.lanes&t)!==0&&(yo=!0),e.firstContext=null)}function Ji(e,t){if(G0!==e&&t!==!1&&t!==0)if((typeof t!="number"||t===1073741823)&&(G0=e,t=1073741823),t={context:e,observedBits:t,next:null},Pc===null){if(D0===null)throw Error(xe(308));Pc=t,D0.dependencies={lanes:0,firstContext:t,responders:null}}else Pc=Pc.next=t;return e._currentValue}var Sa=!1;function m3(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null},effects:null}}function ZP(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Ba(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Da(e,t){if(e=e.updateQueue,e!==null){e=e.shared;var r=e.pending;r===null?t.next=t:(t.next=r.next,r.next=t),e.pending=t}}function XS(e,t){var r=e.updateQueue,n=e.alternate;if(n!==null&&(n=n.updateQueue,r===n)){var i=null,o=null;if(r=r.firstBaseUpdate,r!==null){do{var s={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};o===null?i=o=s:o=o.next=s,r=r.next}while(r!==null);o===null?i=o=t:o=o.next=t}else i=o=t;r={baseState:n.baseState,firstBaseUpdate:i,lastBaseUpdate:o,shared:n.shared,effects:n.effects},e.updateQueue=r;return}e=r.lastBaseUpdate,e===null?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}function Rd(e,t,r,n){var i=e.updateQueue;Sa=!1;var o=i.firstBaseUpdate,s=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var l=a,u=l.next;l.next=null,s===null?o=u:s.next=u,s=l;var c=e.alternate;if(c!==null){c=c.updateQueue;var f=c.lastBaseUpdate;f!==s&&(f===null?c.firstBaseUpdate=u:f.next=u,c.lastBaseUpdate=l)}}if(o!==null){f=i.baseState,s=0,c=u=l=null;do{a=o.lane;var p=o.eventTime;if((n&a)===a){c!==null&&(c=c.next={eventTime:p,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var m=e,g=o;switch(a=t,p=r,g.tag){case 1:if(m=g.payload,typeof m=="function"){f=m.call(p,f,a);break e}f=m;break e;case 3:m.flags=m.flags&-4097|64;case 0:if(m=g.payload,a=typeof m=="function"?m.call(p,f,a):m,a==null)break e;f=dr({},f,a);break e;case 2:Sa=!0}}o.callback!==null&&(e.flags|=32,a=i.effects,a===null?i.effects=[o]:a.push(o))}else p={eventTime:p,lane:a,tag:o.tag,payload:o.payload,callback:o.callback,next:null},c===null?(u=c=p,l=f):c=c.next=p,s|=a;if(o=o.next,o===null){if(a=i.shared.pending,a===null)break;o=a.next,a.next=null,i.lastBaseUpdate=a,i.shared.pending=null}}while(1);c===null&&(l=f),i.baseState=l,i.firstBaseUpdate=u,i.lastBaseUpdate=c,mp|=s,e.lanes=s,e.memoizedState=f}}function WS(e,t,r){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var n=e[t],i=n.callback;if(i!==null){if(n.callback=null,n=r,typeof i!="function")throw Error(xe(191,i));i.call(n)}}}var JP=new Mg.Component().refs;function j0(e,t,r,n){t=e.memoizedState,r=r(n,t),r=r==null?t:dr({},t,r),e.memoizedState=r,e.lanes===0&&(e.updateQueue.baseState=r)}var Wg={isMounted:function(e){return(e=e._reactInternals)?Tu(e)===e:!1},enqueueSetState:function(e,t,r){e=e._reactInternals;var n=Pi(),i=Ga(e),o=Ba(n,i);o.payload=t,r!=null&&(o.callback=r),Da(e,o),ja(e,i,n)},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var n=Pi(),i=Ga(e),o=Ba(n,i);o.tag=1,o.payload=t,r!=null&&(o.callback=r),Da(e,o),ja(e,i,n)},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=Pi(),n=Ga(e),i=Ba(r,n);i.tag=2,t!=null&&(i.callback=t),Da(e,i),ja(e,n,r)}};function YS(e,t,r,n,i,o,s){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(n,o,s):t.prototype&&t.prototype.isPureReactComponent?!Nd(r,n)||!Nd(i,o):!0}function QP(e,t,r){var n=!1,i=Ja,o=t.contextType;return typeof o=="object"&&o!==null?o=Ji(o):(i=fi(t)?ou:$n.current,n=t.contextTypes,o=(n=n!=null)?th(e,i):Ja),t=new t(r,o),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Wg,e.stateNode=t,t._reactInternals=e,n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=o),t}function KS(e,t,r,n){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(r,n),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(r,n),t.state!==e&&Wg.enqueueReplaceState(t,t.state,null)}function db(e,t,r,n){var i=e.stateNode;i.props=r,i.state=e.memoizedState,i.refs=JP,m3(e);var o=t.contextType;typeof o=="object"&&o!==null?i.context=Ji(o):(o=fi(t)?ou:$n.current,i.context=th(e,o)),Rd(e,r,i,n),i.state=e.memoizedState,o=t.getDerivedStateFromProps,typeof o=="function"&&(j0(e,t,o,r),i.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(t=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),t!==i.state&&Wg.enqueueReplaceState(i,i.state,null),Rd(e,r,i,n),i.state=e.memoizedState),typeof i.componentDidMount=="function"&&(e.flags|=4)}var Hm=Array.isArray;function Sf(e,t,r){if(e=r.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(xe(309));var n=r.stateNode}if(!n)throw Error(xe(147,e));var i=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===i?t.ref:(t=function(o){var s=n.refs;s===JP&&(s=n.refs={}),o===null?delete s[i]:s[i]=o},t._stringRef=i,t)}if(typeof e!="string")throw Error(xe(284));if(!r._owner)throw Error(xe(290,e))}return e}function zm(e,t){if(e.type!=="textarea")throw Error(xe(31,Object.prototype.toString.call(t)==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":t))}function e8(e){function t(y,w){if(e){var x=y.lastEffect;x!==null?(x.nextEffect=w,y.lastEffect=w):y.firstEffect=y.lastEffect=w,w.nextEffect=null,w.flags=8}}function r(y,w){if(!e)return null;for(;w!==null;)t(y,w),w=w.sibling;return null}function n(y,w){for(y=new Map;w!==null;)w.key!==null?y.set(w.key,w):y.set(w.index,w),w=w.sibling;return y}function i(y,w){return y=el(y,w),y.index=0,y.sibling=null,y}function o(y,w,x){return y.index=x,e?(x=y.alternate,x!==null?(x=x.index,x<w?(y.flags=2,w):x):(y.flags=2,w)):w}function s(y){return e&&y.alternate===null&&(y.flags=2),y}function a(y,w,x,T){return w===null||w.tag!==6?(w=A2(x,y.mode,T),w.return=y,w):(w=i(w,x),w.return=y,w)}function l(y,w,x,T){return w!==null&&w.elementType===x.type?(T=i(w,x.props),T.ref=Sf(y,w,x),T.return=y,T):(T=r0(x.type,x.key,x.props,null,y.mode,T),T.ref=Sf(y,w,x),T.return=y,T)}function u(y,w,x,T){return w===null||w.tag!==4||w.stateNode.containerInfo!==x.containerInfo||w.stateNode.implementation!==x.implementation?(w=R2(x,y.mode,T),w.return=y,w):(w=i(w,x.children||[]),w.return=y,w)}function c(y,w,x,T,I){return w===null||w.tag!==7?(w=Wc(x,y.mode,T,I),w.return=y,w):(w=i(w,x),w.return=y,w)}function f(y,w,x){if(typeof w=="string"||typeof w=="number")return w=A2(""+w,y.mode,x),w.return=y,w;if(typeof w=="object"&&w!==null){switch(w.$$typeof){case Hf:return x=r0(w.type,w.key,w.props,null,y.mode,x),x.ref=Sf(y,null,w),x.return=y,x;case zl:return w=R2(w,y.mode,x),w.return=y,w}if(Hm(w)||yf(w))return w=Wc(w,y.mode,x,null),w.return=y,w;zm(y,w)}return null}function p(y,w,x,T){var I=w!==null?w.key:null;if(typeof x=="string"||typeof x=="number")return I!==null?null:a(y,w,""+x,T);if(typeof x=="object"&&x!==null){switch(x.$$typeof){case Hf:return x.key===I?x.type===Ia?c(y,w,x.props.children,T,I):l(y,w,x,T):null;case zl:return x.key===I?u(y,w,x,T):null}if(Hm(x)||yf(x))return I!==null?null:c(y,w,x,T,null);zm(y,x)}return null}function m(y,w,x,T,I){if(typeof T=="string"||typeof T=="number")return y=y.get(x)||null,a(w,y,""+T,I);if(typeof T=="object"&&T!==null){switch(T.$$typeof){case Hf:return y=y.get(T.key===null?x:T.key)||null,T.type===Ia?c(w,y,T.props.children,I,T.key):l(w,y,T,I);case zl:return y=y.get(T.key===null?x:T.key)||null,u(w,y,T,I)}if(Hm(T)||yf(T))return y=y.get(x)||null,c(w,y,T,I,null);zm(w,T)}return null}function g(y,w,x,T){for(var I=null,R=null,S=w,O=w=0,P=null;S!==null&&O<x.length;O++){S.index>O?(P=S,S=null):P=S.sibling;var N=p(y,S,x[O],T);if(N===null){S===null&&(S=P);break}e&&S&&N.alternate===null&&t(y,S),w=o(N,w,O),R===null?I=N:R.sibling=N,R=N,S=P}if(O===x.length)return r(y,S),I;if(S===null){for(;O<x.length;O++)S=f(y,x[O],T),S!==null&&(w=o(S,w,O),R===null?I=S:R.sibling=S,R=S);return I}for(S=n(y,S);O<x.length;O++)P=m(S,y,O,x[O],T),P!==null&&(e&&P.alternate!==null&&S.delete(P.key===null?O:P.key),w=o(P,w,O),R===null?I=P:R.sibling=P,R=P);return e&&S.forEach(function(A){return t(y,A)}),I}function b(y,w,x,T){var I=yf(x);if(typeof I!="function")throw Error(xe(150));if(x=I.call(x),x==null)throw Error(xe(151));for(var R=I=null,S=w,O=w=0,P=null,N=x.next();S!==null&&!N.done;O++,N=x.next()){S.index>O?(P=S,S=null):P=S.sibling;var A=p(y,S,N.value,T);if(A===null){S===null&&(S=P);break}e&&S&&A.alternate===null&&t(y,S),w=o(A,w,O),R===null?I=A:R.sibling=A,R=A,S=P}if(N.done)return r(y,S),I;if(S===null){for(;!N.done;O++,N=x.next())N=f(y,N.value,T),N!==null&&(w=o(N,w,O),R===null?I=N:R.sibling=N,R=N);return I}for(S=n(y,S);!N.done;O++,N=x.next())N=m(S,y,O,N.value,T),N!==null&&(e&&N.alternate!==null&&S.delete(N.key===null?O:N.key),w=o(N,w,O),R===null?I=N:R.sibling=N,R=N);return e&&S.forEach(function(j){return t(y,j)}),I}return function(y,w,x,T){var I=typeof x=="object"&&x!==null&&x.type===Ia&&x.key===null;I&&(x=x.props.children);var R=typeof x=="object"&&x!==null;if(R)switch(x.$$typeof){case Hf:e:{for(R=x.key,I=w;I!==null;){if(I.key===R){switch(I.tag){case 7:if(x.type===Ia){r(y,I.sibling),w=i(I,x.props.children),w.return=y,y=w;break e}break;default:if(I.elementType===x.type){r(y,I.sibling),w=i(I,x.props),w.ref=Sf(y,I,x),w.return=y,y=w;break e}}r(y,I);break}else t(y,I);I=I.sibling}x.type===Ia?(w=Wc(x.props.children,y.mode,T,x.key),w.return=y,y=w):(T=r0(x.type,x.key,x.props,null,y.mode,T),T.ref=Sf(y,w,x),T.return=y,y=T)}return s(y);case zl:e:{for(I=x.key;w!==null;){if(w.key===I)if(w.tag===4&&w.stateNode.containerInfo===x.containerInfo&&w.stateNode.implementation===x.implementation){r(y,w.sibling),w=i(w,x.children||[]),w.return=y,y=w;break e}else{r(y,w);break}else t(y,w);w=w.sibling}w=R2(x,y.mode,T),w.return=y,y=w}return s(y)}if(typeof x=="string"||typeof x=="number")return x=""+x,w!==null&&w.tag===6?(r(y,w.sibling),w=i(w,x),w.return=y,y=w):(r(y,w),w=A2(x,y.mode,T),w.return=y,y=w),s(y);if(Hm(x))return g(y,w,x,T);if(yf(x))return b(y,w,x,T);if(R&&zm(y,x),typeof x>"u"&&!I)switch(y.tag){case 1:case 22:case 0:case 11:case 15:throw Error(xe(152,Bc(y.type)||"Component"))}return r(y,w)}}var $0=e8(!0),t8=e8(!1),pp={},Zo=cl(pp),kd=cl(pp),Od=cl(pp);function Wl(e){if(e===pp)throw Error(xe(174));return e}function pb(e,t){switch(xr(Od,t),xr(kd,e),xr(Zo,pp),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:J_(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=J_(t,e)}lr(Zo),xr(Zo,t)}function nh(){lr(Zo),lr(kd),lr(Od)}function qS(e){Wl(Od.current);var t=Wl(Zo.current),r=J_(t,e.type);t!==r&&(xr(kd,e),xr(Zo,r))}function v3(e){kd.current===e&&(lr(Zo),lr(kd))}var wr=cl(0);function H0(e){for(var t=e;t!==null;){if(t.tag===13){var r=t.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if((t.flags&64)!==0)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Us=null,ka=null,Jo=!1;function r8(e,t){var r=zi(5,null,null,0);r.elementType="DELETED",r.type="DELETED",r.stateNode=t,r.return=e,r.flags=8,e.lastEffect!==null?(e.lastEffect.nextEffect=r,e.lastEffect=r):e.firstEffect=e.lastEffect=r}function ZS(e,t){switch(e.tag){case 5:var r=e.type;return t=t.nodeType!==1||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,!0):!1;case 13:return!1;default:return!1}}function mb(e){if(Jo){var t=ka;if(t){var r=t;if(!ZS(e,t)){if(t=$c(r.nextSibling),!t||!ZS(e,t)){e.flags=e.flags&-1025|2,Jo=!1,Us=e;return}r8(Us,r)}Us=e,ka=$c(t.firstChild)}else e.flags=e.flags&-1025|2,Jo=!1,Us=e}}function JS(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Us=e}function Vm(e){if(e!==Us)return!1;if(!Jo)return JS(e),Jo=!0,!1;var t=e.type;if(e.tag!==5||t!=="head"&&t!=="body"&&!ub(t,e.memoizedProps))for(t=ka;t;)r8(e,t),t=$c(t.nextSibling);if(JS(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(xe(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="/$"){if(t===0){ka=$c(e.nextSibling);break e}t--}else r!=="$"&&r!=="$!"&&r!=="$?"||t++}e=e.nextSibling}ka=null}}else ka=Us?$c(e.stateNode.nextSibling):null;return!0}function C2(){ka=Us=null,Jo=!1}var zc=[];function g3(){for(var e=0;e<zc.length;e++)zc[e]._workInProgressVersionPrimary=null;zc.length=0}var id=xu.ReactCurrentDispatcher,Yi=xu.ReactCurrentBatchConfig,Ld=0,kr=null,Fn=null,xn=null,z0=!1,od=!1;function ri(){throw Error(xe(321))}function y3(e,t){if(t===null)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!Hi(e[r],t[r]))return!1;return!0}function _3(e,t,r,n,i,o){if(Ld=o,kr=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,id.current=e===null||e.memoizedState===null?QL:eU,e=r(n,i),od){o=0;do{if(od=!1,!(25>o))throw Error(xe(301));o+=1,xn=Fn=null,t.updateQueue=null,id.current=tU,e=r(n,i)}while(od)}if(id.current=Y0,t=Fn!==null&&Fn.next!==null,Ld=0,xn=Fn=kr=null,z0=!1,t)throw Error(xe(300));return e}function Yl(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return xn===null?kr.memoizedState=xn=e:xn=xn.next=e,xn}function Su(){if(Fn===null){var e=kr.alternate;e=e!==null?e.memoizedState:null}else e=Fn.next;var t=xn===null?kr.memoizedState:xn.next;if(t!==null)xn=t,Fn=e;else{if(e===null)throw Error(xe(310));Fn=e,e={memoizedState:Fn.memoizedState,baseState:Fn.baseState,baseQueue:Fn.baseQueue,queue:Fn.queue,next:null},xn===null?kr.memoizedState=xn=e:xn=xn.next=e}return xn}function Vo(e,t){return typeof t=="function"?t(e):t}function Ef(e){var t=Su(),r=t.queue;if(r===null)throw Error(xe(311));r.lastRenderedReducer=e;var n=Fn,i=n.baseQueue,o=r.pending;if(o!==null){if(i!==null){var s=i.next;i.next=o.next,o.next=s}n.baseQueue=i=o,r.pending=null}if(i!==null){i=i.next,n=n.baseState;var a=s=o=null,l=i;do{var u=l.lane;if((Ld&u)===u)a!==null&&(a=a.next={lane:0,action:l.action,eagerReducer:l.eagerReducer,eagerState:l.eagerState,next:null}),n=l.eagerReducer===e?l.eagerState:e(n,l.action);else{var c={lane:u,action:l.action,eagerReducer:l.eagerReducer,eagerState:l.eagerState,next:null};a===null?(s=a=c,o=n):a=a.next=c,kr.lanes|=u,mp|=u}l=l.next}while(l!==null&&l!==i);a===null?o=n:a.next=s,Hi(n,t.memoizedState)||(yo=!0),t.memoizedState=n,t.baseState=o,t.baseQueue=a,r.lastRenderedState=n}return[t.memoizedState,r.dispatch]}function Cf(e){var t=Su(),r=t.queue;if(r===null)throw Error(xe(311));r.lastRenderedReducer=e;var n=r.dispatch,i=r.pending,o=t.memoizedState;if(i!==null){r.pending=null;var s=i=i.next;do o=e(o,s.action),s=s.next;while(s!==i);Hi(o,t.memoizedState)||(yo=!0),t.memoizedState=o,t.baseQueue===null&&(t.baseState=o),r.lastRenderedState=o}return[o,n]}function QS(e,t,r){var n=t._getVersion;n=n(t._source);var i=t._workInProgressVersionPrimary;if(i!==null?e=i===n:(e=e.mutableReadLanes,(e=(Ld&e)===e)&&(t._workInProgressVersionPrimary=n,zc.push(t))),e)return r(t._source);throw zc.push(t),Error(xe(350))}function n8(e,t,r,n){var i=Yn;if(i===null)throw Error(xe(349));var o=t._getVersion,s=o(t._source),a=id.current,l=a.useState(function(){return QS(i,t,r)}),u=l[1],c=l[0];l=xn;var f=e.memoizedState,p=f.refs,m=p.getSnapshot,g=f.source;f=f.subscribe;var b=kr;return e.memoizedState={refs:p,source:t,subscribe:n},a.useEffect(function(){p.getSnapshot=r,p.setSnapshot=u;var y=o(t._source);if(!Hi(s,y)){y=r(t._source),Hi(c,y)||(u(y),y=Ga(b),i.mutableReadLanes|=y&i.pendingLanes),y=i.mutableReadLanes,i.entangledLanes|=y;for(var w=i.entanglements,x=y;0<x;){var T=31-Za(x),I=1<<T;w[T]|=y,x&=~I}}},[r,t,n]),a.useEffect(function(){return n(t._source,function(){var y=p.getSnapshot,w=p.setSnapshot;try{w(y(t._source));var x=Ga(b);i.mutableReadLanes|=x&i.pendingLanes}catch(T){w(function(){throw T})}})},[t,n]),Hi(m,r)&&Hi(g,t)&&Hi(f,n)||(e={pending:null,dispatch:null,lastRenderedReducer:Vo,lastRenderedState:c},e.dispatch=u=x3.bind(null,kr,e),l.queue=e,l.baseQueue=null,c=QS(i,t,r),l.memoizedState=l.baseState=c),c}function i8(e,t,r){var n=Su();return n8(n,e,t,r)}function If(e){var t=Yl();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e=t.queue={pending:null,dispatch:null,lastRenderedReducer:Vo,lastRenderedState:e},e=e.dispatch=x3.bind(null,kr,e),[t.memoizedState,e]}function V0(e,t,r,n){return e={tag:e,create:t,destroy:r,deps:n,next:null},t=kr.updateQueue,t===null?(t={lastEffect:null},kr.updateQueue=t,t.lastEffect=e.next=e):(r=t.lastEffect,r===null?t.lastEffect=e.next=e:(n=r.next,r.next=e,e.next=n,t.lastEffect=e)),e}function eE(e){var t=Yl();return e={current:e},t.memoizedState=e}function X0(){return Su().memoizedState}function vb(e,t,r,n){var i=Yl();kr.flags|=e,i.memoizedState=V0(1|t,r,void 0,n===void 0?null:n)}function b3(e,t,r,n){var i=Su();n=n===void 0?null:n;var o=void 0;if(Fn!==null){var s=Fn.memoizedState;if(o=s.destroy,n!==null&&y3(n,s.deps)){V0(t,r,o,n);return}}kr.flags|=e,i.memoizedState=V0(1|t,r,o,n)}function tE(e,t){return vb(516,4,e,t)}function W0(e,t){return b3(516,4,e,t)}function o8(e,t){return b3(4,2,e,t)}function s8(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function a8(e,t,r){return r=r!=null?r.concat([e]):null,b3(4,2,s8.bind(null,t,e),r)}function w3(){}function l8(e,t){var r=Su();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&y3(t,n[1])?n[0]:(r.memoizedState=[e,t],e)}function u8(e,t){var r=Su();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&y3(t,n[1])?n[0]:(e=e(),r.memoizedState=[e,t],e)}function JL(e,t){var r=rh();su(98>r?98:r,function(){e(!0)}),su(97<r?97:r,function(){var n=Yi.transition;Yi.transition=1;try{e(!1),t()}finally{Yi.transition=n}})}function x3(e,t,r){var n=Pi(),i=Ga(e),o={lane:i,action:r,eagerReducer:null,eagerState:null,next:null},s=t.pending;if(s===null?o.next=o:(o.next=s.next,s.next=o),t.pending=o,s=e.alternate,e===kr||s!==null&&s===kr)od=z0=!0;else{if(e.lanes===0&&(s===null||s.lanes===0)&&(s=t.lastRenderedReducer,s!==null))try{var a=t.lastRenderedState,l=s(a,r);if(o.eagerReducer=s,o.eagerState=l,Hi(l,a))return}catch{}finally{}ja(e,i,n)}}var Y0={readContext:Ji,useCallback:ri,useContext:ri,useEffect:ri,useImperativeHandle:ri,useLayoutEffect:ri,useMemo:ri,useReducer:ri,useRef:ri,useState:ri,useDebugValue:ri,useDeferredValue:ri,useTransition:ri,useMutableSource:ri,useOpaqueIdentifier:ri,unstable_isNewReconciler:!1},QL={readContext:Ji,useCallback:function(e,t){return Yl().memoizedState=[e,t===void 0?null:t],e},useContext:Ji,useEffect:tE,useImperativeHandle:function(e,t,r){return r=r!=null?r.concat([e]):null,vb(4,2,s8.bind(null,t,e),r)},useLayoutEffect:function(e,t){return vb(4,2,e,t)},useMemo:function(e,t){var r=Yl();return t=t===void 0?null:t,e=e(),r.memoizedState=[e,t],e},useReducer:function(e,t,r){var n=Yl();return t=r!==void 0?r(t):t,n.memoizedState=n.baseState=t,e=n.queue={pending:null,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},e=e.dispatch=x3.bind(null,kr,e),[n.memoizedState,e]},useRef:eE,useState:If,useDebugValue:w3,useDeferredValue:function(e){var t=If(e),r=t[0],n=t[1];return tE(function(){var i=Yi.transition;Yi.transition=1;try{n(e)}finally{Yi.transition=i}},[e]),r},useTransition:function(){var e=If(!1),t=e[0];return e=JL.bind(null,e[1]),eE(e),[e,t]},useMutableSource:function(e,t,r){var n=Yl();return n.memoizedState={refs:{getSnapshot:t,setSnapshot:null},source:e,subscribe:r},n8(n,e,t,r)},useOpaqueIdentifier:function(){if(Jo){var e=!1,t=XL(function(){throw e||(e=!0,r("r:"+(T2++).toString(36))),Error(xe(355))}),r=If(t)[1];return(kr.mode&2)===0&&(kr.flags|=516,V0(5,function(){r("r:"+(T2++).toString(36))},void 0,null)),t}return t="r:"+(T2++).toString(36),If(t),t},unstable_isNewReconciler:!1},eU={readContext:Ji,useCallback:l8,useContext:Ji,useEffect:W0,useImperativeHandle:a8,useLayoutEffect:o8,useMemo:u8,useReducer:Ef,useRef:X0,useState:function(){return Ef(Vo)},useDebugValue:w3,useDeferredValue:function(e){var t=Ef(Vo),r=t[0],n=t[1];return W0(function(){var i=Yi.transition;Yi.transition=1;try{n(e)}finally{Yi.transition=i}},[e]),r},useTransition:function(){var e=Ef(Vo)[0];return[X0().current,e]},useMutableSource:i8,useOpaqueIdentifier:function(){return Ef(Vo)[0]},unstable_isNewReconciler:!1},tU={readContext:Ji,useCallback:l8,useContext:Ji,useEffect:W0,useImperativeHandle:a8,useLayoutEffect:o8,useMemo:u8,useReducer:Cf,useRef:X0,useState:function(){return Cf(Vo)},useDebugValue:w3,useDeferredValue:function(e){var t=Cf(Vo),r=t[0],n=t[1];return W0(function(){var i=Yi.transition;Yi.transition=1;try{n(e)}finally{Yi.transition=i}},[e]),r},useTransition:function(){var e=Cf(Vo)[0];return[X0().current,e]},useMutableSource:i8,useOpaqueIdentifier:function(){return Cf(Vo)[0]},unstable_isNewReconciler:!1},rU=xu.ReactCurrentOwner,yo=!1;function ii(e,t,r,n){t.child=e===null?t8(t,null,r,n):$0(t,e.child,r,n)}function rE(e,t,r,n,i){r=r.render;var o=t.ref;return Hc(t,i),n=_3(e,t,r,n,o,i),e!==null&&!yo?(t.updateQueue=e.updateQueue,t.flags&=-517,e.lanes&=~i,Fs(e,t,i)):(t.flags|=1,ii(e,t,n,i),t.child)}function nE(e,t,r,n,i,o){if(e===null){var s=r.type;return typeof s=="function"&&!N3(s)&&s.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(t.tag=15,t.type=s,c8(e,t,s,n,i,o)):(e=r0(r.type,null,n,t,t.mode,o),e.ref=t.ref,e.return=t,t.child=e)}return s=e.child,(i&o)===0&&(i=s.memoizedProps,r=r.compare,r=r!==null?r:Nd,r(i,n)&&e.ref===t.ref)?Fs(e,t,o):(t.flags|=1,e=el(s,n),e.ref=t.ref,e.return=t,t.child=e)}function c8(e,t,r,n,i,o){if(e!==null&&Nd(e.memoizedProps,n)&&e.ref===t.ref)if(yo=!1,(o&i)!==0)(e.flags&16384)!==0&&(yo=!0);else return t.lanes=e.lanes,Fs(e,t,o);return gb(e,t,r,n,o)}function I2(e,t,r){var n=t.pendingProps,i=n.children,o=e!==null?e.memoizedState:null;if(n.mode==="hidden"||n.mode==="unstable-defer-without-hiding")if((t.mode&4)===0)t.memoizedState={baseLanes:0},Wm(t,r);else if((r&1073741824)!==0)t.memoizedState={baseLanes:0},Wm(t,o!==null?o.baseLanes:r);else return e=o!==null?o.baseLanes|r:r,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e},Wm(t,e),null;else o!==null?(n=o.baseLanes|r,t.memoizedState=null):n=r,Wm(t,n);return ii(e,t,i,r),t.child}function h8(e,t){var r=t.ref;(e===null&&r!==null||e!==null&&e.ref!==r)&&(t.flags|=128)}function gb(e,t,r,n,i){var o=fi(r)?ou:$n.current;return o=th(t,o),Hc(t,i),r=_3(e,t,r,n,o,i),e!==null&&!yo?(t.updateQueue=e.updateQueue,t.flags&=-517,e.lanes&=~i,Fs(e,t,i)):(t.flags|=1,ii(e,t,r,i),t.child)}function iE(e,t,r,n,i){if(fi(r)){var o=!0;Zv(t)}else o=!1;if(Hc(t,i),t.stateNode===null)e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2),QP(t,r,n),db(t,r,n,i),n=!0;else if(e===null){var s=t.stateNode,a=t.memoizedProps;s.props=a;var l=s.context,u=r.contextType;typeof u=="object"&&u!==null?u=Ji(u):(u=fi(r)?ou:$n.current,u=th(t,u));var c=r.getDerivedStateFromProps,f=typeof c=="function"||typeof s.getSnapshotBeforeUpdate=="function";f||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(a!==n||l!==u)&&KS(t,s,n,u),Sa=!1;var p=t.memoizedState;s.state=p,Rd(t,n,s,i),l=t.memoizedState,a!==n||p!==l||hi.current||Sa?(typeof c=="function"&&(j0(t,r,c,n),l=t.memoizedState),(a=Sa||YS(t,r,a,n,p,l,u))?(f||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount()),typeof s.componentDidMount=="function"&&(t.flags|=4)):(typeof s.componentDidMount=="function"&&(t.flags|=4),t.memoizedProps=n,t.memoizedState=l),s.props=n,s.state=l,s.context=u,n=a):(typeof s.componentDidMount=="function"&&(t.flags|=4),n=!1)}else{s=t.stateNode,ZP(e,t),a=t.memoizedProps,u=t.type===t.elementType?a:vo(t.type,a),s.props=u,f=t.pendingProps,p=s.context,l=r.contextType,typeof l=="object"&&l!==null?l=Ji(l):(l=fi(r)?ou:$n.current,l=th(t,l));var m=r.getDerivedStateFromProps;(c=typeof m=="function"||typeof s.getSnapshotBeforeUpdate=="function")||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(a!==f||p!==l)&&KS(t,s,n,l),Sa=!1,p=t.memoizedState,s.state=p,Rd(t,n,s,i);var g=t.memoizedState;a!==f||p!==g||hi.current||Sa?(typeof m=="function"&&(j0(t,r,m,n),g=t.memoizedState),(u=Sa||YS(t,r,u,n,p,g,l))?(c||typeof s.UNSAFE_componentWillUpdate!="function"&&typeof s.componentWillUpdate!="function"||(typeof s.componentWillUpdate=="function"&&s.componentWillUpdate(n,g,l),typeof s.UNSAFE_componentWillUpdate=="function"&&s.UNSAFE_componentWillUpdate(n,g,l)),typeof s.componentDidUpdate=="function"&&(t.flags|=4),typeof s.getSnapshotBeforeUpdate=="function"&&(t.flags|=256)):(typeof s.componentDidUpdate!="function"||a===e.memoizedProps&&p===e.memoizedState||(t.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&p===e.memoizedState||(t.flags|=256),t.memoizedProps=n,t.memoizedState=g),s.props=n,s.state=g,s.context=l,n=u):(typeof s.componentDidUpdate!="function"||a===e.memoizedProps&&p===e.memoizedState||(t.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&p===e.memoizedState||(t.flags|=256),n=!1)}return yb(e,t,r,n,o,i)}function yb(e,t,r,n,i,o){h8(e,t);var s=(t.flags&64)!==0;if(!n&&!s)return i&&HS(t,r,!1),Fs(e,t,o);n=t.stateNode,rU.current=t;var a=s&&typeof r.getDerivedStateFromError!="function"?null:n.render();return t.flags|=1,e!==null&&s?(t.child=$0(t,e.child,null,o),t.child=$0(t,null,a,o)):ii(e,t,a,o),t.memoizedState=n.state,i&&HS(t,r,!0),t.child}function oE(e){var t=e.stateNode;t.pendingContext?$S(e,t.pendingContext,t.pendingContext!==t.context):t.context&&$S(e,t.context,!1),pb(e,t.containerInfo)}var Xm={dehydrated:null,retryLane:0};function sE(e,t,r){var n=t.pendingProps,i=wr.current,o=!1,s;return(s=(t.flags&64)!==0)||(s=e!==null&&e.memoizedState===null?!1:(i&2)!==0),s?(o=!0,t.flags&=-65):e!==null&&e.memoizedState===null||n.fallback===void 0||n.unstable_avoidThisFallback===!0||(i|=1),xr(wr,i&1),e===null?(n.fallback!==void 0&&mb(t),e=n.children,i=n.fallback,o?(e=aE(t,e,i,r),t.child.memoizedState={baseLanes:r},t.memoizedState=Xm,e):typeof n.unstable_expectedLoadTime=="number"?(e=aE(t,e,i,r),t.child.memoizedState={baseLanes:r},t.memoizedState=Xm,t.lanes=33554432,e):(r=P3({mode:"visible",children:e},t.mode,r,null),r.return=t,t.child=r)):e.memoizedState!==null?o?(n=uE(e,t,n.children,n.fallback,r),o=t.child,i=e.child.memoizedState,o.memoizedState=i===null?{baseLanes:r}:{baseLanes:i.baseLanes|r},o.childLanes=e.childLanes&~r,t.memoizedState=Xm,n):(r=lE(e,t,n.children,r),t.memoizedState=null,r):o?(n=uE(e,t,n.children,n.fallback,r),o=t.child,i=e.child.memoizedState,o.memoizedState=i===null?{baseLanes:r}:{baseLanes:i.baseLanes|r},o.childLanes=e.childLanes&~r,t.memoizedState=Xm,n):(r=lE(e,t,n.children,r),t.memoizedState=null,r)}function aE(e,t,r,n){var i=e.mode,o=e.child;return t={mode:"hidden",children:t},(i&2)===0&&o!==null?(o.childLanes=0,o.pendingProps=t):o=P3(t,i,0,null),r=Wc(r,i,n,null),o.return=e,r.return=e,o.sibling=r,e.child=o,r}function lE(e,t,r,n){var i=e.child;return e=i.sibling,r=el(i,{mode:"visible",children:r}),(t.mode&2)===0&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(e.nextEffect=null,e.flags=8,t.firstEffect=t.lastEffect=e),t.child=r}function uE(e,t,r,n,i){var o=t.mode,s=e.child;e=s.sibling;var a={mode:"hidden",children:r};return(o&2)===0&&t.child!==s?(r=t.child,r.childLanes=0,r.pendingProps=a,s=r.lastEffect,s!==null?(t.firstEffect=r.firstEffect,t.lastEffect=s,s.nextEffect=null):t.firstEffect=t.lastEffect=null):r=el(s,a),e!==null?n=el(e,n):(n=Wc(n,o,i,null),n.flags|=2),n.return=t,r.return=t,r.sibling=n,t.child=r,n}function cE(e,t){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),qP(e.return,t)}function N2(e,t,r,n,i,o){var s=e.memoizedState;s===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:i,lastEffect:o}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=n,s.tail=r,s.tailMode=i,s.lastEffect=o)}function hE(e,t,r){var n=t.pendingProps,i=n.revealOrder,o=n.tail;if(ii(e,t,n.children,r),n=wr.current,(n&2)!==0)n=n&1|2,t.flags|=64;else{if(e!==null&&(e.flags&64)!==0)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&cE(e,r);else if(e.tag===19)cE(e,r);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}n&=1}if(xr(wr,n),(t.mode&2)===0)t.memoizedState=null;else switch(i){case"forwards":for(r=t.child,i=null;r!==null;)e=r.alternate,e!==null&&H0(e)===null&&(i=r),r=r.sibling;r=i,r===null?(i=t.child,t.child=null):(i=r.sibling,r.sibling=null),N2(t,!1,i,r,o,t.lastEffect);break;case"backwards":for(r=null,i=t.child,t.child=null;i!==null;){if(e=i.alternate,e!==null&&H0(e)===null){t.child=i;break}e=i.sibling,i.sibling=r,r=i,i=e}N2(t,!0,r,null,o,t.lastEffect);break;case"together":N2(t,!1,null,null,void 0,t.lastEffect);break;default:t.memoizedState=null}return t.child}function Fs(e,t,r){if(e!==null&&(t.dependencies=e.dependencies),mp|=t.lanes,(r&t.childLanes)!==0){if(e!==null&&t.child!==e.child)throw Error(xe(153));if(t.child!==null){for(e=t.child,r=el(e,e.pendingProps),t.child=r,r.return=t;e.sibling!==null;)e=e.sibling,r=r.sibling=el(e,e.pendingProps),r.return=t;r.sibling=null}return t.child}return null}var f8,_b,d8,p8;f8=function(e,t){for(var r=t.child;r!==null;){if(r.tag===5||r.tag===6)e.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};_b=function(){};d8=function(e,t,r,n){var i=e.memoizedProps;if(i!==n){e=t.stateNode,Wl(Zo.current);var o=null;switch(r){case"input":i=X_(e,i),n=X_(e,n),o=[];break;case"option":i=K_(e,i),n=K_(e,n),o=[];break;case"select":i=dr({},i,{value:void 0}),n=dr({},n,{value:void 0}),o=[];break;case"textarea":i=q_(e,i),n=q_(e,n),o=[];break;default:typeof i.onClick!="function"&&typeof n.onClick=="function"&&(e.onclick=U0)}Q_(r,n);var s;r=null;for(u in i)if(!n.hasOwnProperty(u)&&i.hasOwnProperty(u)&&i[u]!=null)if(u==="style"){var a=i[u];for(s in a)a.hasOwnProperty(s)&&(r||(r={}),r[s]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(wd.hasOwnProperty(u)?o||(o=[]):(o=o||[]).push(u,null));for(u in n){var l=n[u];if(a=i!=null?i[u]:void 0,n.hasOwnProperty(u)&&l!==a&&(l!=null||a!=null))if(u==="style")if(a){for(s in a)!a.hasOwnProperty(s)||l&&l.hasOwnProperty(s)||(r||(r={}),r[s]="");for(s in l)l.hasOwnProperty(s)&&a[s]!==l[s]&&(r||(r={}),r[s]=l[s])}else r||(o||(o=[]),o.push(u,r)),r=l;else u==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(o=o||[]).push(u,l)):u==="children"?typeof l!="string"&&typeof l!="number"||(o=o||[]).push(u,""+l):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(wd.hasOwnProperty(u)?(l!=null&&u==="onScroll"&&or("scroll",e),o||a===l||(o=[])):typeof l=="object"&&l!==null&&l.$$typeof===Kx?l.toString():(o=o||[]).push(u,l))}r&&(o=o||[]).push("style",r);var u=o;(t.updateQueue=u)&&(t.flags|=4)}};p8=function(e,t,r,n){r!==n&&(t.flags|=4)};function Nf(e,t){if(!Jo)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:n.sibling=null}}function nU(e,t,r){var n=t.pendingProps;switch(t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return null;case 1:return fi(t.type)&&M0(),null;case 3:return nh(),lr(hi),lr($n),g3(),n=t.stateNode,n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(e===null||e.child===null)&&(Vm(t)?t.flags|=4:n.hydrate||(t.flags|=256)),_b(t),null;case 5:v3(t);var i=Wl(Od.current);if(r=t.type,e!==null&&t.stateNode!=null)d8(e,t,r,n,i),e.ref!==t.ref&&(t.flags|=128);else{if(!n){if(t.stateNode===null)throw Error(xe(166));return null}if(e=Wl(Zo.current),Vm(t)){n=t.stateNode,r=t.type;var o=t.memoizedProps;switch(n[Ra]=t,n[F0]=o,r){case"dialog":or("cancel",n),or("close",n);break;case"iframe":case"object":case"embed":or("load",n);break;case"video":case"audio":for(e=0;e<Vf.length;e++)or(Vf[e],n);break;case"source":or("error",n);break;case"img":case"image":case"link":or("error",n),or("load",n);break;case"details":or("toggle",n);break;case"input":hS(n,o),or("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!o.multiple},or("invalid",n);break;case"textarea":dS(n,o),or("invalid",n)}Q_(r,o),e=null;for(var s in o)o.hasOwnProperty(s)&&(i=o[s],s==="children"?typeof i=="string"?n.textContent!==i&&(e=["children",i]):typeof i=="number"&&n.textContent!==""+i&&(e=["children",""+i]):wd.hasOwnProperty(s)&&i!=null&&s==="onScroll"&&or("scroll",n));switch(r){case"input":Dm(n),fS(n,o,!0);break;case"textarea":Dm(n),pS(n);break;case"select":case"option":break;default:typeof o.onClick=="function"&&(n.onclick=U0)}n=e,t.updateQueue=n,n!==null&&(t.flags|=4)}else{switch(s=i.nodeType===9?i:i.ownerDocument,e===Z_.html&&(e=aP(r)),e===Z_.html?r==="script"?(e=s.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof n.is=="string"?e=s.createElement(r,{is:n.is}):(e=s.createElement(r),r==="select"&&(s=e,n.multiple?s.multiple=!0:n.size&&(s.size=n.size))):e=s.createElementNS(e,r),e[Ra]=t,e[F0]=n,f8(e,t,!1,!1),t.stateNode=e,s=eb(r,n),r){case"dialog":or("cancel",e),or("close",e),i=n;break;case"iframe":case"object":case"embed":or("load",e),i=n;break;case"video":case"audio":for(i=0;i<Vf.length;i++)or(Vf[i],e);i=n;break;case"source":or("error",e),i=n;break;case"img":case"image":case"link":or("error",e),or("load",e),i=n;break;case"details":or("toggle",e),i=n;break;case"input":hS(e,n),i=X_(e,n),or("invalid",e);break;case"option":i=K_(e,n);break;case"select":e._wrapperState={wasMultiple:!!n.multiple},i=dr({},n,{value:void 0}),or("invalid",e);break;case"textarea":dS(e,n),i=q_(e,n),or("invalid",e);break;default:i=n}Q_(r,i);var a=i;for(o in a)if(a.hasOwnProperty(o)){var l=a[o];o==="style"?cP(e,l):o==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&lP(e,l)):o==="children"?typeof l=="string"?(r!=="textarea"||l!=="")&&xd(e,l):typeof l=="number"&&xd(e,""+l):o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&o!=="autoFocus"&&(wd.hasOwnProperty(o)?l!=null&&o==="onScroll"&&or("scroll",e):l!=null&&Hx(e,o,l,s))}switch(r){case"input":Dm(e),fS(e,n,!1);break;case"textarea":Dm(e),pS(e);break;case"option":n.value!=null&&e.setAttribute("value",""+qa(n.value));break;case"select":e.multiple=!!n.multiple,o=n.value,o!=null?Dc(e,!!n.multiple,o,!1):n.defaultValue!=null&&Dc(e,!!n.multiple,n.defaultValue,!0);break;default:typeof i.onClick=="function"&&(e.onclick=U0)}jP(r,n)&&(t.flags|=4)}t.ref!==null&&(t.flags|=128)}return null;case 6:if(e&&t.stateNode!=null)p8(e,t,e.memoizedProps,n);else{if(typeof n!="string"&&t.stateNode===null)throw Error(xe(166));r=Wl(Od.current),Wl(Zo.current),Vm(t)?(n=t.stateNode,r=t.memoizedProps,n[Ra]=t,n.nodeValue!==r&&(t.flags|=4)):(n=(r.nodeType===9?r:r.ownerDocument).createTextNode(n),n[Ra]=t,t.stateNode=n)}return null;case 13:return lr(wr),n=t.memoizedState,(t.flags&64)!==0?(t.lanes=r,t):(n=n!==null,r=!1,e===null?t.memoizedProps.fallback!==void 0&&Vm(t):r=e.memoizedState!==null,n&&!r&&(t.mode&2)!==0&&(e===null&&t.memoizedProps.unstable_avoidThisFallback!==!0||(wr.current&1)!==0?Sn===0&&(Sn=3):((Sn===0||Sn===3)&&(Sn=4),Yn===null||(mp&134217727)===0&&(_h&134217727)===0||Vc(Yn,jn))),(n||r)&&(t.flags|=4),null);case 4:return nh(),_b(t),e===null&&BP(t.stateNode.containerInfo),null;case 10:return p3(t),null;case 17:return fi(t.type)&&M0(),null;case 19:if(lr(wr),n=t.memoizedState,n===null)return null;if(o=(t.flags&64)!==0,s=n.rendering,s===null)if(o)Nf(n,!1);else{if(Sn!==0||e!==null&&(e.flags&64)!==0)for(e=t.child;e!==null;){if(s=H0(e),s!==null){for(t.flags|=64,Nf(n,!1),o=s.updateQueue,o!==null&&(t.updateQueue=o,t.flags|=4),n.lastEffect===null&&(t.firstEffect=null),t.lastEffect=n.lastEffect,n=r,r=t.child;r!==null;)o=r,e=n,o.flags&=2,o.nextEffect=null,o.firstEffect=null,o.lastEffect=null,s=o.alternate,s===null?(o.childLanes=0,o.lanes=e,o.child=null,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=s.childLanes,o.lanes=s.lanes,o.child=s.child,o.memoizedProps=s.memoizedProps,o.memoizedState=s.memoizedState,o.updateQueue=s.updateQueue,o.type=s.type,e=s.dependencies,o.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return xr(wr,wr.current&1|2),t.child}e=e.sibling}n.tail!==null&&Dn()>Eb&&(t.flags|=64,o=!0,Nf(n,!1),t.lanes=33554432)}else{if(!o)if(e=H0(s),e!==null){if(t.flags|=64,o=!0,r=e.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),Nf(n,!0),n.tail===null&&n.tailMode==="hidden"&&!s.alternate&&!Jo)return t=t.lastEffect=n.lastEffect,t!==null&&(t.nextEffect=null),null}else 2*Dn()-n.renderingStartTime>Eb&&r!==1073741824&&(t.flags|=64,o=!0,Nf(n,!1),t.lanes=33554432);n.isBackwards?(s.sibling=t.child,t.child=s):(r=n.last,r!==null?r.sibling=s:t.child=s,n.last=s)}return n.tail!==null?(r=n.tail,n.rendering=r,n.tail=r.sibling,n.lastEffect=t.lastEffect,n.renderingStartTime=Dn(),r.sibling=null,t=wr.current,xr(wr,o?t&1|2:t&1),r):null;case 23:case 24:return I3(),e!==null&&e.memoizedState!==null!=(t.memoizedState!==null)&&n.mode!=="unstable-defer-without-hiding"&&(t.flags|=4),null}throw Error(xe(156,t.tag))}function iU(e){switch(e.tag){case 1:fi(e.type)&&M0();var t=e.flags;return t&4096?(e.flags=t&-4097|64,e):null;case 3:if(nh(),lr(hi),lr($n),g3(),t=e.flags,(t&64)!==0)throw Error(xe(285));return e.flags=t&-4097|64,e;case 5:return v3(e),null;case 13:return lr(wr),t=e.flags,t&4096?(e.flags=t&-4097|64,e):null;case 19:return lr(wr),null;case 4:return nh(),null;case 10:return p3(e),null;case 23:case 24:return I3(),null;default:return null}}function T3(e,t){try{var r="",n=t;do r+=B9(n),n=n.return;while(n);var i=r}catch(o){i=`
Error generating stack: `+o.message+`
`+o.stack}return{value:e,source:t,stack:i}}function bb(e,t){try{console.error(t.value)}catch(r){setTimeout(function(){throw r})}}var oU=typeof WeakMap=="function"?WeakMap:Map;function m8(e,t,r){r=Ba(-1,r),r.tag=3,r.payload={element:null};var n=t.value;return r.callback=function(){q0||(q0=!0,Cb=n),bb(e,t)},r}function v8(e,t,r){r=Ba(-1,r),r.tag=3;var n=e.type.getDerivedStateFromError;if(typeof n=="function"){var i=t.value;r.payload=function(){return bb(e,t),n(i)}}var o=e.stateNode;return o!==null&&typeof o.componentDidCatch=="function"&&(r.callback=function(){typeof n!="function"&&(Xo===null?Xo=new Set([this]):Xo.add(this),bb(e,t));var s=t.stack;this.componentDidCatch(t.value,{componentStack:s!==null?s:""})}),r}var sU=typeof WeakSet=="function"?WeakSet:Set;function fE(e){var t=e.ref;if(t!==null)if(typeof t=="function")try{t(null)}catch(r){$a(e,r)}else t.current=null}function aU(e,t){switch(t.tag){case 0:case 11:case 15:case 22:return;case 1:if(t.flags&256&&e!==null){var r=e.memoizedProps,n=e.memoizedState;e=t.stateNode,t=e.getSnapshotBeforeUpdate(t.elementType===t.type?r:vo(t.type,r),n),e.__reactInternalSnapshotBeforeUpdate=t}return;case 3:t.flags&256&&c3(t.stateNode.containerInfo);return;case 5:case 6:case 4:case 17:return}throw Error(xe(163))}function lU(e,t,r){switch(r.tag){case 0:case 11:case 15:case 22:if(t=r.updateQueue,t=t!==null?t.lastEffect:null,t!==null){e=t=t.next;do{if((e.tag&3)===3){var n=e.create;e.destroy=n()}e=e.next}while(e!==t)}if(t=r.updateQueue,t=t!==null?t.lastEffect:null,t!==null){e=t=t.next;do{var i=e;n=i.next,i=i.tag,(i&4)!==0&&(i&1)!==0&&(E8(r,e),vU(r,e)),e=n}while(e!==t)}return;case 1:e=r.stateNode,r.flags&4&&(t===null?e.componentDidMount():(n=r.elementType===r.type?t.memoizedProps:vo(r.type,t.memoizedProps),e.componentDidUpdate(n,t.memoizedState,e.__reactInternalSnapshotBeforeUpdate))),t=r.updateQueue,t!==null&&WS(r,t,e);return;case 3:if(t=r.updateQueue,t!==null){if(e=null,r.child!==null)switch(r.child.tag){case 5:e=r.child.stateNode;break;case 1:e=r.child.stateNode}WS(r,t,e)}return;case 5:e=r.stateNode,t===null&&r.flags&4&&jP(r.type,r.memoizedProps)&&e.focus();return;case 6:return;case 4:return;case 12:return;case 13:r.memoizedState===null&&(r=r.alternate,r!==null&&(r=r.memoizedState,r!==null&&(r=r.dehydrated,r!==null&&bP(r))));return;case 19:case 17:case 20:case 21:case 23:case 24:return}throw Error(xe(163))}function dE(e,t){for(var r=e;;){if(r.tag===5){var n=r.stateNode;if(t)n=n.style,typeof n.setProperty=="function"?n.setProperty("display","none","important"):n.display="none";else{n=r.stateNode;var i=r.memoizedProps.style;i=i!=null&&i.hasOwnProperty("display")?i.display:null,n.style.display=uP("display",i)}}else if(r.tag===6)r.stateNode.nodeValue=t?"":r.memoizedProps;else if((r.tag!==23&&r.tag!==24||r.memoizedState===null||r===e)&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===e)break;for(;r.sibling===null;){if(r.return===null||r.return===e)return;r=r.return}r.sibling.return=r.return,r=r.sibling}}function pE(e,t){if(Jl&&typeof Jl.onCommitFiberUnmount=="function")try{Jl.onCommitFiberUnmount(h3,t)}catch{}switch(t.tag){case 0:case 11:case 14:case 15:case 22:if(e=t.updateQueue,e!==null&&(e=e.lastEffect,e!==null)){var r=e=e.next;do{var n=r,i=n.destroy;if(n=n.tag,i!==void 0)if((n&4)!==0)E8(t,r);else{n=t;try{i()}catch(o){$a(n,o)}}r=r.next}while(r!==e)}break;case 1:if(fE(t),e=t.stateNode,typeof e.componentWillUnmount=="function")try{e.props=t.memoizedProps,e.state=t.memoizedState,e.componentWillUnmount()}catch(o){$a(t,o)}break;case 5:fE(t);break;case 4:g8(e,t)}}function mE(e){e.alternate=null,e.child=null,e.dependencies=null,e.firstEffect=null,e.lastEffect=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.return=null,e.updateQueue=null}function vE(e){return e.tag===5||e.tag===3||e.tag===4}function gE(e){e:{for(var t=e.return;t!==null;){if(vE(t))break e;t=t.return}throw Error(xe(160))}var r=t;switch(t=r.stateNode,r.tag){case 5:var n=!1;break;case 3:t=t.containerInfo,n=!0;break;case 4:t=t.containerInfo,n=!0;break;default:throw Error(xe(161))}r.flags&16&&(xd(t,""),r.flags&=-17);e:t:for(r=e;;){for(;r.sibling===null;){if(r.return===null||vE(r.return)){r=null;break e}r=r.return}for(r.sibling.return=r.return,r=r.sibling;r.tag!==5&&r.tag!==6&&r.tag!==18;){if(r.flags&2||r.child===null||r.tag===4)continue t;r.child.return=r,r=r.child}if(!(r.flags&2)){r=r.stateNode;break e}}n?wb(e,r,t):xb(e,r,t)}function wb(e,t,r){var n=e.tag,i=n===5||n===6;if(i)e=i?e.stateNode:e.stateNode.instance,t?r.nodeType===8?r.parentNode.insertBefore(e,t):r.insertBefore(e,t):(r.nodeType===8?(t=r.parentNode,t.insertBefore(e,r)):(t=r,t.appendChild(e)),r=r._reactRootContainer,r!=null||t.onclick!==null||(t.onclick=U0));else if(n!==4&&(e=e.child,e!==null))for(wb(e,t,r),e=e.sibling;e!==null;)wb(e,t,r),e=e.sibling}function xb(e,t,r){var n=e.tag,i=n===5||n===6;if(i)e=i?e.stateNode:e.stateNode.instance,t?r.insertBefore(e,t):r.appendChild(e);else if(n!==4&&(e=e.child,e!==null))for(xb(e,t,r),e=e.sibling;e!==null;)xb(e,t,r),e=e.sibling}function g8(e,t){for(var r=t,n=!1,i,o;;){if(!n){n=r.return;e:for(;;){if(n===null)throw Error(xe(160));switch(i=n.stateNode,n.tag){case 5:o=!1;break e;case 3:i=i.containerInfo,o=!0;break e;case 4:i=i.containerInfo,o=!0;break e}n=n.return}n=!0}if(r.tag===5||r.tag===6){e:for(var s=e,a=r,l=a;;)if(pE(s,l),l.child!==null&&l.tag!==4)l.child.return=l,l=l.child;else{if(l===a)break e;for(;l.sibling===null;){if(l.return===null||l.return===a)break e;l=l.return}l.sibling.return=l.return,l=l.sibling}o?(s=i,a=r.stateNode,s.nodeType===8?s.parentNode.removeChild(a):s.removeChild(a)):i.removeChild(r.stateNode)}else if(r.tag===4){if(r.child!==null){i=r.stateNode.containerInfo,o=!0,r.child.return=r,r=r.child;continue}}else if(pE(e,r),r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return;r=r.return,r.tag===4&&(n=!1)}r.sibling.return=r.return,r=r.sibling}}function P2(e,t){switch(t.tag){case 0:case 11:case 14:case 15:case 22:var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var n=r=r.next;do(n.tag&3)===3&&(e=n.destroy,n.destroy=void 0,e!==void 0&&e()),n=n.next;while(n!==r)}return;case 1:return;case 5:if(r=t.stateNode,r!=null){n=t.memoizedProps;var i=e!==null?e.memoizedProps:n;e=t.type;var o=t.updateQueue;if(t.updateQueue=null,o!==null){for(r[F0]=n,e==="input"&&n.type==="radio"&&n.name!=null&&oP(r,n),eb(e,i),t=eb(e,n),i=0;i<o.length;i+=2){var s=o[i],a=o[i+1];s==="style"?cP(r,a):s==="dangerouslySetInnerHTML"?lP(r,a):s==="children"?xd(r,a):Hx(r,s,a,t)}switch(e){case"input":W_(r,n);break;case"textarea":sP(r,n);break;case"select":e=r._wrapperState.wasMultiple,r._wrapperState.wasMultiple=!!n.multiple,o=n.value,o!=null?Dc(r,!!n.multiple,o,!1):e!==!!n.multiple&&(n.defaultValue!=null?Dc(r,!!n.multiple,n.defaultValue,!0):Dc(r,!!n.multiple,n.multiple?[]:"",!1))}}}return;case 6:if(t.stateNode===null)throw Error(xe(162));t.stateNode.nodeValue=t.memoizedProps;return;case 3:r=t.stateNode,r.hydrate&&(r.hydrate=!1,bP(r.containerInfo));return;case 12:return;case 13:t.memoizedState!==null&&(C3=Dn(),dE(t.child,!0)),yE(t);return;case 19:yE(t);return;case 17:return;case 23:case 24:dE(t,t.memoizedState!==null);return}throw Error(xe(163))}function yE(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var r=e.stateNode;r===null&&(r=e.stateNode=new sU),t.forEach(function(n){var i=_U.bind(null,e,n);r.has(n)||(r.add(n),n.then(i,i))})}}function uU(e,t){return e!==null&&(e=e.memoizedState,e===null||e.dehydrated!==null)?(t=t.memoizedState,t!==null&&t.dehydrated===null):!1}var cU=Math.ceil,K0=xu.ReactCurrentDispatcher,S3=xu.ReactCurrentOwner,lt=0,Yn=null,Yr=null,jn=0,au=0,Tb=cl(0),Sn=0,Yg=null,yh=0,mp=0,_h=0,E3=0,Sb=null,C3=0,Eb=1/0;function bh(){Eb=Dn()+500}var Fe=null,q0=!1,Cb=null,Xo=null,Qa=!1,sd=null,Xf=90,Ib=[],Nb=[],Ds=null,ad=0,Pb=null,Qv=-1,Rs=0,e0=0,ld=null,t0=!1;function Pi(){return(lt&48)!==0?Dn():Qv!==-1?Qv:Qv=Dn()}function Ga(e){if(e=e.mode,(e&2)===0)return 1;if((e&4)===0)return rh()===99?1:2;if(Rs===0&&(Rs=yh),ZL.transition!==0){e0!==0&&(e0=Sb!==null?Sb.pendingLanes:0),e=Rs;var t=4186112&~e0;return t&=-t,t===0&&(e=4186112&~e,t=e&-e,t===0&&(t=8192)),t}return e=rh(),(lt&4)!==0&&e===98?e=O0(12,Rs):(e=eL(e),e=O0(e,Rs)),e}function ja(e,t,r){if(50<ad)throw ad=0,Pb=null,Error(xe(185));if(e=Kg(e,t),e===null)return null;jg(e,t,r),e===Yn&&(_h|=t,Sn===4&&Vc(e,jn));var n=rh();t===1?(lt&8)!==0&&(lt&48)===0?Ab(e):(Qi(e,r),lt===0&&(bh(),us())):((lt&4)===0||n!==98&&n!==99||(Ds===null?Ds=new Set([e]):Ds.add(e)),Qi(e,r)),Sb=e}function Kg(e,t){e.lanes|=t;var r=e.alternate;for(r!==null&&(r.lanes|=t),r=e,e=e.return;e!==null;)e.childLanes|=t,r=e.alternate,r!==null&&(r.childLanes|=t),r=e,e=e.return;return r.tag===3?r.stateNode:null}function Qi(e,t){for(var r=e.callbackNode,n=e.suspendedLanes,i=e.pingedLanes,o=e.expirationTimes,s=e.pendingLanes;0<s;){var a=31-Za(s),l=1<<a,u=o[a];if(u===-1){if((l&n)===0||(l&i)!==0){u=t,yc(l);var c=tr;o[a]=10<=c?u+250:6<=c?u+5e3:-1}}else u<=t&&(e.expiredLanes|=l);s&=~l}if(n=Cd(e,e===Yn?jn:0),t=tr,n===0)r!==null&&(r!==S2&&hb(r),e.callbackNode=null,e.callbackPriority=0);else{if(r!==null){if(e.callbackPriority===t)return;r!==S2&&hb(r)}t===15?(r=Ab.bind(null,e),As===null?(As=[r],Jv=f3(Xg,KP)):As.push(r),r=S2):t===14?r=Ad(99,Ab.bind(null,e)):(r=tL(t),r=Ad(r,y8.bind(null,e))),e.callbackPriority=t,e.callbackNode=r}}function y8(e){if(Qv=-1,e0=Rs=0,(lt&48)!==0)throw Error(xe(327));var t=e.callbackNode;if(hl()&&e.callbackNode!==t)return null;var r=Cd(e,e===Yn?jn:0);if(r===0)return null;var n=r,i=lt;lt|=16;var o=x8();(Yn!==e||jn!==n)&&(bh(),Xc(e,n));do try{dU();break}catch(a){w8(e,a)}while(1);if(d3(),K0.current=o,lt=i,Yr!==null?n=0:(Yn=null,jn=0,n=Sn),(yh&_h)!==0)Xc(e,0);else if(n!==0){if(n===2&&(lt|=64,e.hydrate&&(e.hydrate=!1,c3(e.containerInfo)),r=IP(e),r!==0&&(n=Wf(e,r))),n===1)throw t=Yg,Xc(e,0),Vc(e,r),Qi(e,Dn()),t;switch(e.finishedWork=e.current.alternate,e.finishedLanes=r,n){case 0:case 1:throw Error(xe(345));case 2:Bl(e);break;case 3:if(Vc(e,r),(r&62914560)===r&&(n=C3+500-Dn(),10<n)){if(Cd(e,0)!==0)break;if(i=e.suspendedLanes,(i&r)!==r){Pi(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=DS(Bl.bind(null,e),n);break}Bl(e);break;case 4:if(Vc(e,r),(r&4186112)===r)break;for(n=e.eventTimes,i=-1;0<r;){var s=31-Za(r);o=1<<s,s=n[s],s>i&&(i=s),r&=~o}if(r=i,r=Dn()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*cU(r/1960))-r,10<r){e.timeoutHandle=DS(Bl.bind(null,e),r);break}Bl(e);break;case 5:Bl(e);break;default:throw Error(xe(329))}}return Qi(e,Dn()),e.callbackNode===t?y8.bind(null,e):null}function Vc(e,t){for(t&=~E3,t&=~_h,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var r=31-Za(t),n=1<<r;e[r]=-1,t&=~n}}function Ab(e){if((lt&48)!==0)throw Error(xe(327));if(hl(),e===Yn&&(e.expiredLanes&jn)!==0){var t=jn,r=Wf(e,t);(yh&_h)!==0&&(t=Cd(e,t),r=Wf(e,t))}else t=Cd(e,0),r=Wf(e,t);if(e.tag!==0&&r===2&&(lt|=64,e.hydrate&&(e.hydrate=!1,c3(e.containerInfo)),t=IP(e),t!==0&&(r=Wf(e,t))),r===1)throw r=Yg,Xc(e,0),Vc(e,t),Qi(e,Dn()),r;return e.finishedWork=e.current.alternate,e.finishedLanes=t,Bl(e),Qi(e,Dn()),null}function hU(){if(Ds!==null){var e=Ds;Ds=null,e.forEach(function(t){t.expiredLanes|=24&t.pendingLanes,Qi(t,Dn())})}us()}function _8(e,t){var r=lt;lt|=1;try{return e(t)}finally{lt=r,lt===0&&(bh(),us())}}function b8(e,t){var r=lt;lt&=-2,lt|=8;try{return e(t)}finally{lt=r,lt===0&&(bh(),us())}}function Wm(e,t){xr(Tb,au),au|=t,yh|=t}function I3(){au=Tb.current,lr(Tb)}function Xc(e,t){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(r!==-1&&(e.timeoutHandle=-1,VL(r)),Yr!==null)for(r=Yr.return;r!==null;){var n=r;switch(n.tag){case 1:n=n.type.childContextTypes,n!=null&&M0();break;case 3:nh(),lr(hi),lr($n),g3();break;case 5:v3(n);break;case 4:nh();break;case 13:lr(wr);break;case 19:lr(wr);break;case 10:p3(n);break;case 23:case 24:I3()}r=r.return}Yn=e,Yr=el(e.current,null),jn=au=yh=t,Sn=0,Yg=null,E3=_h=mp=0}function w8(e,t){do{var r=Yr;try{if(d3(),id.current=Y0,z0){for(var n=kr.memoizedState;n!==null;){var i=n.queue;i!==null&&(i.pending=null),n=n.next}z0=!1}if(Ld=0,xn=Fn=kr=null,od=!1,S3.current=null,r===null||r.return===null){Sn=1,Yg=t,Yr=null;break}e:{var o=e,s=r.return,a=r,l=t;if(t=jn,a.flags|=2048,a.firstEffect=a.lastEffect=null,l!==null&&typeof l=="object"&&typeof l.then=="function"){var u=l;if((a.mode&2)===0){var c=a.alternate;c?(a.updateQueue=c.updateQueue,a.memoizedState=c.memoizedState,a.lanes=c.lanes):(a.updateQueue=null,a.memoizedState=null)}var f=(wr.current&1)!==0,p=s;do{var m;if(m=p.tag===13){var g=p.memoizedState;if(g!==null)m=g.dehydrated!==null;else{var b=p.memoizedProps;m=b.fallback===void 0?!1:b.unstable_avoidThisFallback!==!0?!0:!f}}if(m){var y=p.updateQueue;if(y===null){var w=new Set;w.add(u),p.updateQueue=w}else y.add(u);if((p.mode&2)===0){if(p.flags|=64,a.flags|=16384,a.flags&=-2981,a.tag===1)if(a.alternate===null)a.tag=17;else{var x=Ba(-1,1);x.tag=2,Da(a,x)}a.lanes|=1;break e}l=void 0,a=t;var T=o.pingCache;if(T===null?(T=o.pingCache=new oU,l=new Set,T.set(u,l)):(l=T.get(u),l===void 0&&(l=new Set,T.set(u,l))),!l.has(a)){l.add(a);var I=yU.bind(null,o,u,a);u.then(I,I)}p.flags|=4096,p.lanes=t;break e}p=p.return}while(p!==null);l=Error((Bc(a.type)||"A React component")+` suspended while rendering, but no fallback UI was specified.

Add a <Suspense fallback=...> component higher in the tree to provide a loading indicator or placeholder to display.`)}Sn!==5&&(Sn=2),l=T3(l,a),p=s;do{switch(p.tag){case 3:o=l,p.flags|=4096,t&=-t,p.lanes|=t;var R=m8(p,o,t);XS(p,R);break e;case 1:o=l;var S=p.type,O=p.stateNode;if((p.flags&64)===0&&(typeof S.getDerivedStateFromError=="function"||O!==null&&typeof O.componentDidCatch=="function"&&(Xo===null||!Xo.has(O)))){p.flags|=4096,t&=-t,p.lanes|=t;var P=v8(p,o,t);XS(p,P);break e}}p=p.return}while(p!==null)}S8(r)}catch(N){t=N,Yr===r&&r!==null&&(Yr=r=r.return);continue}break}while(1)}function x8(){var e=K0.current;return K0.current=Y0,e===null?Y0:e}function Wf(e,t){var r=lt;lt|=16;var n=x8();Yn===e&&jn===t||Xc(e,t);do try{fU();break}catch(i){w8(e,i)}while(1);if(d3(),lt=r,K0.current=n,Yr!==null)throw Error(xe(261));return Yn=null,jn=0,Sn}function fU(){for(;Yr!==null;)T8(Yr)}function dU(){for(;Yr!==null&&!YL();)T8(Yr)}function T8(e){var t=C8(e.alternate,e,au);e.memoizedProps=e.pendingProps,t===null?S8(e):Yr=t,S3.current=null}function S8(e){var t=e;do{var r=t.alternate;if(e=t.return,(t.flags&2048)===0){if(r=nU(r,t,au),r!==null){Yr=r;return}if(r=t,r.tag!==24&&r.tag!==23||r.memoizedState===null||(au&1073741824)!==0||(r.mode&4)===0){for(var n=0,i=r.child;i!==null;)n|=i.lanes|i.childLanes,i=i.sibling;r.childLanes=n}e!==null&&(e.flags&2048)===0&&(e.firstEffect===null&&(e.firstEffect=t.firstEffect),t.lastEffect!==null&&(e.lastEffect!==null&&(e.lastEffect.nextEffect=t.firstEffect),e.lastEffect=t.lastEffect),1<t.flags&&(e.lastEffect!==null?e.lastEffect.nextEffect=t:e.firstEffect=t,e.lastEffect=t))}else{if(r=iU(t),r!==null){r.flags&=2047,Yr=r;return}e!==null&&(e.firstEffect=e.lastEffect=null,e.flags|=2048)}if(t=t.sibling,t!==null){Yr=t;return}Yr=t=e}while(t!==null);Sn===0&&(Sn=5)}function Bl(e){var t=rh();return su(99,pU.bind(null,e,t)),null}function pU(e,t){do hl();while(sd!==null);if((lt&48)!==0)throw Error(xe(327));var r=e.finishedWork;if(r===null)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(xe(177));e.callbackNode=null;var n=r.lanes|r.childLanes,i=n,o=e.pendingLanes&~i;e.pendingLanes=i,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=i,e.mutableReadLanes&=i,e.entangledLanes&=i,i=e.entanglements;for(var s=e.eventTimes,a=e.expirationTimes;0<o;){var l=31-Za(o),u=1<<l;i[l]=0,s[l]=-1,a[l]=-1,o&=~u}if(Ds!==null&&(n&24)===0&&Ds.has(e)&&Ds.delete(e),e===Yn&&(Yr=Yn=null,jn=0),1<r.flags?r.lastEffect!==null?(r.lastEffect.nextEffect=r,n=r.firstEffect):n=r:n=r.firstEffect,n!==null){if(i=lt,lt|=32,S3.current=null,w2=Yv,s=kS(),sb(s)){if("selectionStart"in s)a={start:s.selectionStart,end:s.selectionEnd};else e:if(a=(a=s.ownerDocument)&&a.defaultView||window,(u=a.getSelection&&a.getSelection())&&u.rangeCount!==0){a=u.anchorNode,o=u.anchorOffset,l=u.focusNode,u=u.focusOffset;try{a.nodeType,l.nodeType}catch{a=null;break e}var c=0,f=-1,p=-1,m=0,g=0,b=s,y=null;t:for(;;){for(var w;b!==a||o!==0&&b.nodeType!==3||(f=c+o),b!==l||u!==0&&b.nodeType!==3||(p=c+u),b.nodeType===3&&(c+=b.nodeValue.length),(w=b.firstChild)!==null;)y=b,b=w;for(;;){if(b===s)break t;if(y===a&&++m===o&&(f=c),y===l&&++g===u&&(p=c),(w=b.nextSibling)!==null)break;b=y,y=b.parentNode}b=w}a=f===-1||p===-1?null:{start:f,end:p}}else a=null;a=a||{start:0,end:0}}else a=null;x2={focusedElem:s,selectionRange:a},Yv=!1,ld=null,t0=!1,Fe=n;do try{mU()}catch(N){if(Fe===null)throw Error(xe(330));$a(Fe,N),Fe=Fe.nextEffect}while(Fe!==null);ld=null,Fe=n;do try{for(s=e;Fe!==null;){var x=Fe.flags;if(x&16&&xd(Fe.stateNode,""),x&128){var T=Fe.alternate;if(T!==null){var I=T.ref;I!==null&&(typeof I=="function"?I(null):I.current=null)}}switch(x&1038){case 2:gE(Fe),Fe.flags&=-3;break;case 6:gE(Fe),Fe.flags&=-3,P2(Fe.alternate,Fe);break;case 1024:Fe.flags&=-1025;break;case 1028:Fe.flags&=-1025,P2(Fe.alternate,Fe);break;case 4:P2(Fe.alternate,Fe);break;case 8:a=Fe,g8(s,a);var R=a.alternate;mE(a),R!==null&&mE(R)}Fe=Fe.nextEffect}}catch(N){if(Fe===null)throw Error(xe(330));$a(Fe,N),Fe=Fe.nextEffect}while(Fe!==null);if(I=x2,T=kS(),x=I.focusedElem,s=I.selectionRange,T!==x&&x&&x.ownerDocument&&UP(x.ownerDocument.documentElement,x)){for(s!==null&&sb(x)&&(T=s.start,I=s.end,I===void 0&&(I=T),"selectionStart"in x?(x.selectionStart=T,x.selectionEnd=Math.min(I,x.value.length)):(I=(T=x.ownerDocument||document)&&T.defaultView||window,I.getSelection&&(I=I.getSelection(),a=x.textContent.length,R=Math.min(s.start,a),s=s.end===void 0?R:Math.min(s.end,a),!I.extend&&R>s&&(a=s,s=R,R=a),a=RS(x,R),o=RS(x,s),a&&o&&(I.rangeCount!==1||I.anchorNode!==a.node||I.anchorOffset!==a.offset||I.focusNode!==o.node||I.focusOffset!==o.offset)&&(T=T.createRange(),T.setStart(a.node,a.offset),I.removeAllRanges(),R>s?(I.addRange(T),I.extend(o.node,o.offset)):(T.setEnd(o.node,o.offset),I.addRange(T)))))),T=[],I=x;I=I.parentNode;)I.nodeType===1&&T.push({element:I,left:I.scrollLeft,top:I.scrollTop});for(typeof x.focus=="function"&&x.focus(),x=0;x<T.length;x++)I=T[x],I.element.scrollLeft=I.left,I.element.scrollTop=I.top}Yv=!!w2,x2=w2=null,e.current=r,Fe=n;do try{for(x=e;Fe!==null;){var S=Fe.flags;if(S&36&&lU(x,Fe.alternate,Fe),S&128){T=void 0;var O=Fe.ref;if(O!==null){var P=Fe.stateNode;switch(Fe.tag){case 5:T=P;break;default:T=P}typeof O=="function"?O(T):O.current=T}}Fe=Fe.nextEffect}}catch(N){if(Fe===null)throw Error(xe(330));$a(Fe,N),Fe=Fe.nextEffect}while(Fe!==null);Fe=null,qL(),lt=i}else e.current=r;if(Qa)Qa=!1,sd=e,Xf=t;else for(Fe=n;Fe!==null;)t=Fe.nextEffect,Fe.nextEffect=null,Fe.flags&8&&(S=Fe,S.sibling=null,S.stateNode=null),Fe=t;if(n=e.pendingLanes,n===0&&(Xo=null),n===1?e===Pb?ad++:(ad=0,Pb=e):ad=0,r=r.stateNode,Jl&&typeof Jl.onCommitFiberRoot=="function")try{Jl.onCommitFiberRoot(h3,r,void 0,(r.current.flags&64)===64)}catch{}if(Qi(e,Dn()),q0)throw q0=!1,e=Cb,Cb=null,e;return(lt&8)!==0||us(),null}function mU(){for(;Fe!==null;){var e=Fe.alternate;t0||ld===null||((Fe.flags&8)!==0?gS(Fe,ld)&&(t0=!0):Fe.tag===13&&uU(e,Fe)&&gS(Fe,ld)&&(t0=!0));var t=Fe.flags;(t&256)!==0&&aU(e,Fe),(t&512)===0||Qa||(Qa=!0,Ad(97,function(){return hl(),null})),Fe=Fe.nextEffect}}function hl(){if(Xf!==90){var e=97<Xf?97:Xf;return Xf=90,su(e,gU)}return!1}function vU(e,t){Ib.push(t,e),Qa||(Qa=!0,Ad(97,function(){return hl(),null}))}function E8(e,t){Nb.push(t,e),Qa||(Qa=!0,Ad(97,function(){return hl(),null}))}function gU(){if(sd===null)return!1;var e=sd;if(sd=null,(lt&48)!==0)throw Error(xe(331));var t=lt;lt|=32;var r=Nb;Nb=[];for(var n=0;n<r.length;n+=2){var i=r[n],o=r[n+1],s=i.destroy;if(i.destroy=void 0,typeof s=="function")try{s()}catch(l){if(o===null)throw Error(xe(330));$a(o,l)}}for(r=Ib,Ib=[],n=0;n<r.length;n+=2){i=r[n],o=r[n+1];try{var a=i.create;i.destroy=a()}catch(l){if(o===null)throw Error(xe(330));$a(o,l)}}for(a=e.current.firstEffect;a!==null;)e=a.nextEffect,a.nextEffect=null,a.flags&8&&(a.sibling=null,a.stateNode=null),a=e;return lt=t,us(),!0}function _E(e,t,r){t=T3(r,t),t=m8(e,t,1),Da(e,t),t=Pi(),e=Kg(e,1),e!==null&&(jg(e,1,t),Qi(e,t))}function $a(e,t){if(e.tag===3)_E(e,e,t);else for(var r=e.return;r!==null;){if(r.tag===3){_E(r,e,t);break}else if(r.tag===1){var n=r.stateNode;if(typeof r.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(Xo===null||!Xo.has(n))){e=T3(t,e);var i=v8(r,e,1);if(Da(r,i),i=Pi(),r=Kg(r,1),r!==null)jg(r,1,i),Qi(r,i);else if(typeof n.componentDidCatch=="function"&&(Xo===null||!Xo.has(n)))try{n.componentDidCatch(t,e)}catch{}break}}r=r.return}}function yU(e,t,r){var n=e.pingCache;n!==null&&n.delete(t),t=Pi(),e.pingedLanes|=e.suspendedLanes&r,Yn===e&&(jn&r)===r&&(Sn===4||Sn===3&&(jn&62914560)===jn&&500>Dn()-C3?Xc(e,0):E3|=r),Qi(e,t)}function _U(e,t){var r=e.stateNode;r!==null&&r.delete(t),t=0,t===0&&(t=e.mode,(t&2)===0?t=1:(t&4)===0?t=rh()===99?1:2:(Rs===0&&(Rs=yh),t=_c(62914560&~Rs),t===0&&(t=4194304))),r=Pi(),e=Kg(e,t),e!==null&&(jg(e,t,r),Qi(e,r))}var C8;C8=function(e,t,r){var n=t.lanes;if(e!==null)if(e.memoizedProps!==t.pendingProps||hi.current)yo=!0;else if((r&n)!==0)yo=(e.flags&16384)!==0;else{switch(yo=!1,t.tag){case 3:oE(t),C2();break;case 5:qS(t);break;case 1:fi(t.type)&&Zv(t);break;case 4:pb(t,t.stateNode.containerInfo);break;case 10:n=t.memoizedProps.value;var i=t.type._context;xr(B0,i._currentValue),i._currentValue=n;break;case 13:if(t.memoizedState!==null)return(r&t.child.childLanes)!==0?sE(e,t,r):(xr(wr,wr.current&1),t=Fs(e,t,r),t!==null?t.sibling:null);xr(wr,wr.current&1);break;case 19:if(n=(r&t.childLanes)!==0,(e.flags&64)!==0){if(n)return hE(e,t,r);t.flags|=64}if(i=t.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),xr(wr,wr.current),n)break;return null;case 23:case 24:return t.lanes=0,I2(e,t,r)}return Fs(e,t,r)}else yo=!1;switch(t.lanes=0,t.tag){case 2:if(n=t.type,e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2),e=t.pendingProps,i=th(t,$n.current),Hc(t,r),i=_3(null,t,n,e,i,r),t.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0){if(t.tag=1,t.memoizedState=null,t.updateQueue=null,fi(n)){var o=!0;Zv(t)}else o=!1;t.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,m3(t);var s=n.getDerivedStateFromProps;typeof s=="function"&&j0(t,n,s,e),i.updater=Wg,t.stateNode=i,i._reactInternals=t,db(t,n,e,r),t=yb(null,t,n,!0,o,r)}else t.tag=0,ii(null,t,i,r),t=t.child;return t;case 16:i=t.elementType;e:{switch(e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2),e=t.pendingProps,o=i._init,i=o(i._payload),t.type=i,o=t.tag=wU(i),e=vo(i,e),o){case 0:t=gb(null,t,i,e,r);break e;case 1:t=iE(null,t,i,e,r);break e;case 11:t=rE(null,t,i,e,r);break e;case 14:t=nE(null,t,i,vo(i.type,e),n,r);break e}throw Error(xe(306,i,""))}return t;case 0:return n=t.type,i=t.pendingProps,i=t.elementType===n?i:vo(n,i),gb(e,t,n,i,r);case 1:return n=t.type,i=t.pendingProps,i=t.elementType===n?i:vo(n,i),iE(e,t,n,i,r);case 3:if(oE(t),n=t.updateQueue,e===null||n===null)throw Error(xe(282));if(n=t.pendingProps,i=t.memoizedState,i=i!==null?i.element:null,ZP(e,t),Rd(t,n,null,r),n=t.memoizedState.element,n===i)C2(),t=Fs(e,t,r);else{if(i=t.stateNode,(o=i.hydrate)&&(ka=$c(t.stateNode.containerInfo.firstChild),Us=t,o=Jo=!0),o){if(e=i.mutableSourceEagerHydrationData,e!=null)for(i=0;i<e.length;i+=2)o=e[i],o._workInProgressVersionPrimary=e[i+1],zc.push(o);for(r=t8(t,null,n,r),t.child=r;r;)r.flags=r.flags&-3|1024,r=r.sibling}else ii(e,t,n,r),C2();t=t.child}return t;case 5:return qS(t),e===null&&mb(t),n=t.type,i=t.pendingProps,o=e!==null?e.memoizedProps:null,s=i.children,ub(n,i)?s=null:o!==null&&ub(n,o)&&(t.flags|=16),h8(e,t),ii(e,t,s,r),t.child;case 6:return e===null&&mb(t),null;case 13:return sE(e,t,r);case 4:return pb(t,t.stateNode.containerInfo),n=t.pendingProps,e===null?t.child=$0(t,null,n,r):ii(e,t,n,r),t.child;case 11:return n=t.type,i=t.pendingProps,i=t.elementType===n?i:vo(n,i),rE(e,t,n,i,r);case 7:return ii(e,t,t.pendingProps,r),t.child;case 8:return ii(e,t,t.pendingProps.children,r),t.child;case 12:return ii(e,t,t.pendingProps.children,r),t.child;case 10:e:{n=t.type._context,i=t.pendingProps,s=t.memoizedProps,o=i.value;var a=t.type._context;if(xr(B0,a._currentValue),a._currentValue=o,s!==null)if(a=s.value,o=Hi(a,o)?0:(typeof n._calculateChangedBits=="function"?n._calculateChangedBits(a,o):1073741823)|0,o===0){if(s.children===i.children&&!hi.current){t=Fs(e,t,r);break e}}else for(a=t.child,a!==null&&(a.return=t);a!==null;){var l=a.dependencies;if(l!==null){s=a.child;for(var u=l.firstContext;u!==null;){if(u.context===n&&(u.observedBits&o)!==0){a.tag===1&&(u=Ba(-1,r&-r),u.tag=2,Da(a,u)),a.lanes|=r,u=a.alternate,u!==null&&(u.lanes|=r),qP(a.return,r),l.lanes|=r;break}u=u.next}}else s=a.tag===10&&a.type===t.type?null:a.child;if(s!==null)s.return=a;else for(s=a;s!==null;){if(s===t){s=null;break}if(a=s.sibling,a!==null){a.return=s.return,s=a;break}s=s.return}a=s}ii(e,t,i.children,r),t=t.child}return t;case 9:return i=t.type,o=t.pendingProps,n=o.children,Hc(t,r),i=Ji(i,o.unstable_observedBits),n=n(i),t.flags|=1,ii(e,t,n,r),t.child;case 14:return i=t.type,o=vo(i,t.pendingProps),o=vo(i.type,o),nE(e,t,i,o,n,r);case 15:return c8(e,t,t.type,t.pendingProps,n,r);case 17:return n=t.type,i=t.pendingProps,i=t.elementType===n?i:vo(n,i),e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2),t.tag=1,fi(n)?(e=!0,Zv(t)):e=!1,Hc(t,r),QP(t,n,i),db(t,n,i,r),yb(null,t,n,!0,e,r);case 19:return hE(e,t,r);case 23:return I2(e,t,r);case 24:return I2(e,t,r)}throw Error(xe(156,t.tag))};function bU(e,t,r,n){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.flags=0,this.lastEffect=this.firstEffect=this.nextEffect=null,this.childLanes=this.lanes=0,this.alternate=null}function zi(e,t,r,n){return new bU(e,t,r,n)}function N3(e){return e=e.prototype,!(!e||!e.isReactComponent)}function wU(e){if(typeof e=="function")return N3(e)?1:0;if(e!=null){if(e=e.$$typeof,e===Bg)return 11;if(e===Dg)return 14}return 2}function el(e,t){var r=e.alternate;return r===null?(r=zi(e.tag,t,e.key,e.mode),r.elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.nextEffect=null,r.firstEffect=null,r.lastEffect=null),r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function r0(e,t,r,n,i,o){var s=2;if(n=e,typeof e=="function")N3(e)&&(s=1);else if(typeof e=="string")s=5;else e:switch(e){case Ia:return Wc(r.children,i,o,t);case rP:s=8,i|=16;break;case zx:s=8,i|=1;break;case Zf:return e=zi(12,r,t,i|8),e.elementType=Zf,e.type=Zf,e.lanes=o,e;case Jf:return e=zi(13,r,t,i),e.type=Jf,e.elementType=Jf,e.lanes=o,e;case P0:return e=zi(19,r,t,i),e.elementType=P0,e.lanes=o,e;case qx:return P3(r,i,o,t);case V_:return e=zi(24,r,t,i),e.elementType=V_,e.lanes=o,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case Vx:s=10;break e;case Xx:s=9;break e;case Bg:s=11;break e;case Dg:s=14;break e;case Wx:s=16,n=null;break e;case Yx:s=22;break e}throw Error(xe(130,e==null?e:typeof e,""))}return t=zi(s,r,t,i),t.elementType=e,t.type=n,t.lanes=o,t}function Wc(e,t,r,n){return e=zi(7,e,n,t),e.lanes=r,e}function P3(e,t,r,n){return e=zi(23,e,n,t),e.elementType=qx,e.lanes=r,e}function A2(e,t,r){return e=zi(6,e,null,t),e.lanes=r,e}function R2(e,t,r){return t=zi(4,e.children!==null?e.children:[],e.key,t),t.lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function xU(e,t,r){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.pendingContext=this.context=null,this.hydrate=r,this.callbackNode=null,this.callbackPriority=0,this.eventTimes=p2(0),this.expirationTimes=p2(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=p2(0),this.mutableSourceEagerHydrationData=null}function TU(e,t,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:zl,key:n==null?null:""+n,children:e,containerInfo:t,implementation:r}}function Z0(e,t,r,n){var i=t.current,o=Pi(),s=Ga(i);e:if(r){r=r._reactInternals;t:{if(Tu(r)!==r||r.tag!==1)throw Error(xe(170));var a=r;do{switch(a.tag){case 3:a=a.stateNode.context;break t;case 1:if(fi(a.type)){a=a.stateNode.__reactInternalMemoizedMergedChildContext;break t}}a=a.return}while(a!==null);throw Error(xe(171))}if(r.tag===1){var l=r.type;if(fi(l)){r=HP(r,l,a);break e}}r=a}else r=Ja;return t.context===null?t.context=r:t.pendingContext=r,t=Ba(o,s),t.payload={element:e},n=n===void 0?null:n,n!==null&&(t.callback=n),Da(i,t),ja(i,s,o),s}function k2(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function bE(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var r=e.retryLane;e.retryLane=r!==0&&r<t?r:t}}function A3(e,t){bE(e,t),(e=e.alternate)&&bE(e,t)}function SU(){return null}function R3(e,t,r){var n=r!=null&&r.hydrationOptions!=null&&r.hydrationOptions.mutableSources||null;if(r=new xU(e,t,r!=null&&r.hydrate===!0),t=zi(3,null,null,t===2?7:t===1?3:0),r.current=t,t.stateNode=r,m3(t),e[gh]=r.current,BP(e.nodeType===8?e.parentNode:e),n)for(e=0;e<n.length;e++){t=n[e];var i=t._getVersion;i=i(t._source),r.mutableSourceEagerHydrationData==null?r.mutableSourceEagerHydrationData=[t,i]:r.mutableSourceEagerHydrationData.push(t,i)}this._internalRoot=r}R3.prototype.render=function(e){Z0(e,this._internalRoot,null,null)};R3.prototype.unmount=function(){var e=this._internalRoot,t=e.containerInfo;Z0(null,e,null,function(){t[gh]=null})};function vp(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function EU(e,t){if(t||(t=e?e.nodeType===9?e.documentElement:e.firstChild:null,t=!(!t||t.nodeType!==1||!t.hasAttribute("data-reactroot"))),!t)for(var r;r=e.lastChild;)e.removeChild(r);return new R3(e,0,t?{hydrate:!0}:void 0)}function qg(e,t,r,n,i){var o=r._reactRootContainer;if(o){var s=o._internalRoot;if(typeof i=="function"){var a=i;i=function(){var u=k2(s);a.call(u)}}Z0(t,s,e,i)}else{if(o=r._reactRootContainer=EU(r,n),s=o._internalRoot,typeof i=="function"){var l=i;i=function(){var u=k2(s);l.call(u)}}b8(function(){Z0(t,s,e,i)})}return k2(s)}gP=function(e){if(e.tag===13){var t=Pi();ja(e,4,t),A3(e,4)}};t3=function(e){if(e.tag===13){var t=Pi();ja(e,67108864,t),A3(e,67108864)}};yP=function(e){if(e.tag===13){var t=Pi(),r=Ga(e);ja(e,r,t),A3(e,r)}};_P=function(e,t){return t()};tb=function(e,t,r){switch(t){case"input":if(W_(e,r),t=r.name,r.type==="radio"&&t!=null){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<r.length;t++){var n=r[t];if(n!==e&&n.form===e.form){var i=Vg(n);if(!i)throw Error(xe(90));iP(n),W_(n,i)}}}break;case"textarea":sP(e,r);break;case"select":t=r.value,t!=null&&Dc(e,!!r.multiple,t,!1)}};Jx=_8;dP=function(e,t,r,n,i){var o=lt;lt|=4;try{return su(98,e.bind(null,t,r,n,i))}finally{lt=o,lt===0&&(bh(),us())}};Qx=function(){(lt&49)===0&&(hU(),hl())};pP=function(e,t){var r=lt;lt|=2;try{return e(t)}finally{lt=r,lt===0&&(bh(),us())}};function I8(e,t){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!vp(t))throw Error(xe(200));return TU(e,t,null,r)}var CU={Events:[dp,Ic,Vg,hP,fP,hl,{current:!1}]},Pf={findFiberByHostInstance:Xl,bundleType:0,version:"17.0.2",rendererPackageName:"react-dom"},IU={bundleType:Pf.bundleType,version:Pf.version,rendererPackageName:Pf.rendererPackageName,rendererConfig:Pf.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:xu.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=vP(e),e===null?null:e.stateNode},findFiberByHostInstance:Pf.findFiberByHostInstance||SU,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ym=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ym.isDisabled&&Ym.supportsFiber)try{h3=Ym.inject(IU),Jl=Ym}catch{}}io.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=CU;io.createPortal=I8;io.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(xe(188)):Error(xe(268,Object.keys(e)));return e=vP(t),e=e===null?null:e.stateNode,e};io.flushSync=function(e,t){var r=lt;if((r&48)!==0)return e(t);lt|=1;try{if(e)return su(99,e.bind(null,t))}finally{lt=r,us()}};io.hydrate=function(e,t,r){if(!vp(t))throw Error(xe(200));return qg(null,e,t,!0,r)};io.render=function(e,t,r){if(!vp(t))throw Error(xe(200));return qg(null,e,t,!1,r)};io.unmountComponentAtNode=function(e){if(!vp(e))throw Error(xe(40));return e._reactRootContainer?(b8(function(){qg(null,null,e,!1,function(){e._reactRootContainer=null,e[gh]=null})}),!0):!1};io.unstable_batchedUpdates=_8;io.unstable_createPortal=function(e,t){return I8(e,t,2<arguments.length&&arguments[2]!==void 0?arguments[2]:null)};io.unstable_renderSubtreeIntoContainer=function(e,t,r,n){if(!vp(r))throw Error(xe(200));if(e==null||e._reactInternals===void 0)throw Error(xe(38));return qg(e,t,r,!1,n)};io.version="17.0.2";(function(e){function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(r){console.error(r)}}t(),e.exports=io})(JN);const NU=Boolean(window.location.hostname==="localhost"||window.location.hostname==="[::1]"||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function PU(e){if("serviceWorker"in navigator){if(new URL(window.location.href).origin!==window.location.origin)return;window.addEventListener("load",()=>{const r="./service-worker.js";NU?(AU(r,e),navigator.serviceWorker.ready.then(()=>{console.log("This web app is being served cache-first by a service worker. To learn more, visit https://cra.link/PWA")})):N8(r,e)})}}function N8(e,t){navigator.serviceWorker.register(e).then(r=>{r.onupdatefound=()=>{const n=r.installing;n!=null&&(n.onstatechange=()=>{n.state==="installed"&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://cra.link/PWA."),t&&t.onUpdate&&t.onUpdate(r)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(r)))})}}).catch(r=>{console.error("Error during service worker registration:",r)})}function AU(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then(r=>{const n=r.headers.get("content-type");r.status===404||n!=null&&n.indexOf("javascript")===-1?navigator.serviceWorker.ready.then(i=>{i.unregister().then(()=>{window.location.reload()})}):N8(e,t)}).catch(()=>{console.log("No internet connection found. App is running in offline mode.")})}function Rb(e,t){return Rb=Object.setPrototypeOf||function(n,i){return n.__proto__=i,n},Rb(e,t)}function wh(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,Rb(e,t)}var kb={exports:{}},RU="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",kU=RU,OU=kU;function P8(){}function A8(){}A8.resetWarningCache=P8;var LU=function(){function e(n,i,o,s,a,l){if(l!==OU){var u=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw u.name="Invariant Violation",u}}e.isRequired=e;function t(){return e}var r={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:A8,resetWarningCache:P8};return r.PropTypes=r,r};kb.exports=LU();function ih(){return ih=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},ih.apply(this,arguments)}function Km(e){return e.charAt(0)==="/"}function O2(e,t){for(var r=t,n=r+1,i=e.length;n<i;r+=1,n+=1)e[r]=e[n];e.pop()}function UU(e,t){t===void 0&&(t="");var r=e&&e.split("/")||[],n=t&&t.split("/")||[],i=e&&Km(e),o=t&&Km(t),s=i||o;if(e&&Km(e)?n=r:r.length&&(n.pop(),n=n.concat(r)),!n.length)return"/";var a;if(n.length){var l=n[n.length-1];a=l==="."||l===".."||l===""}else a=!1;for(var u=0,c=n.length;c>=0;c--){var f=n[c];f==="."?O2(n,c):f===".."?(O2(n,c),u++):u&&(O2(n,c),u--)}if(!s)for(;u--;u)n.unshift("..");s&&n[0]!==""&&(!n[0]||!Km(n[0]))&&n.unshift("");var p=n.join("/");return a&&p.substr(-1)!=="/"&&(p+="/"),p}var FU=!0,L2="Invariant failed";function fl(e,t){if(!e){if(FU)throw new Error(L2);var r=typeof t=="function"?t():t,n=r?L2+": "+r:L2;throw new Error(n)}}function ud(e){return e.charAt(0)==="/"?e:"/"+e}function wE(e){return e.charAt(0)==="/"?e.substr(1):e}function MU(e,t){return e.toLowerCase().indexOf(t.toLowerCase())===0&&"/?#".indexOf(e.charAt(t.length))!==-1}function R8(e,t){return MU(e,t)?e.substr(t.length):e}function k8(e){return e.charAt(e.length-1)==="/"?e.slice(0,-1):e}function BU(e){var t=e||"/",r="",n="",i=t.indexOf("#");i!==-1&&(n=t.substr(i),t=t.substr(0,i));var o=t.indexOf("?");return o!==-1&&(r=t.substr(o),t=t.substr(0,o)),{pathname:t,search:r==="?"?"":r,hash:n==="#"?"":n}}function oi(e){var t=e.pathname,r=e.search,n=e.hash,i=t||"/";return r&&r!=="?"&&(i+=r.charAt(0)==="?"?r:"?"+r),n&&n!=="#"&&(i+=n.charAt(0)==="#"?n:"#"+n),i}function Ti(e,t,r,n){var i;typeof e=="string"?(i=BU(e),i.state=t):(i=ih({},e),i.pathname===void 0&&(i.pathname=""),i.search?i.search.charAt(0)!=="?"&&(i.search="?"+i.search):i.search="",i.hash?i.hash.charAt(0)!=="#"&&(i.hash="#"+i.hash):i.hash="",t!==void 0&&i.state===void 0&&(i.state=t));try{i.pathname=decodeURI(i.pathname)}catch(o){throw o instanceof URIError?new URIError('Pathname "'+i.pathname+'" could not be decoded. This is likely caused by an invalid percent-encoding.'):o}return r&&(i.key=r),n?i.pathname?i.pathname.charAt(0)!=="/"&&(i.pathname=UU(i.pathname,n.pathname)):i.pathname=n.pathname:i.pathname||(i.pathname="/"),i}function k3(){var e=null;function t(s){return e=s,function(){e===s&&(e=null)}}function r(s,a,l,u){if(e!=null){var c=typeof e=="function"?e(s,a):e;typeof c=="string"?typeof l=="function"?l(c,u):u(!0):u(c!==!1)}else u(!0)}var n=[];function i(s){var a=!0;function l(){a&&s.apply(void 0,arguments)}return n.push(l),function(){a=!1,n=n.filter(function(u){return u!==l})}}function o(){for(var s=arguments.length,a=new Array(s),l=0;l<s;l++)a[l]=arguments[l];n.forEach(function(u){return u.apply(void 0,a)})}return{setPrompt:t,confirmTransitionTo:r,appendListener:i,notifyListeners:o}}var O8=!!(typeof window<"u"&&window.document&&window.document.createElement);function L8(e,t){t(window.confirm(e))}function DU(){var e=window.navigator.userAgent;return(e.indexOf("Android 2.")!==-1||e.indexOf("Android 4.0")!==-1)&&e.indexOf("Mobile Safari")!==-1&&e.indexOf("Chrome")===-1&&e.indexOf("Windows Phone")===-1?!1:window.history&&"pushState"in window.history}function GU(){return window.navigator.userAgent.indexOf("Trident")===-1}function jU(){return window.navigator.userAgent.indexOf("Firefox")===-1}function $U(e){return e.state===void 0&&navigator.userAgent.indexOf("CriOS")===-1}var xE="popstate",TE="hashchange";function SE(){try{return window.history.state||{}}catch{return{}}}function HU(e){e===void 0&&(e={}),O8||fl(!1);var t=window.history,r=DU(),n=!GU(),i=e,o=i.forceRefresh,s=o===void 0?!1:o,a=i.getUserConfirmation,l=a===void 0?L8:a,u=i.keyLength,c=u===void 0?6:u,f=e.basename?k8(ud(e.basename)):"";function p(ie){var Q=ie||{},ee=Q.key,K=Q.state,te=window.location,ye=te.pathname,Ce=te.search,Ie=te.hash,Ye=ye+Ce+Ie;return f&&(Ye=R8(Ye,f)),Ti(Ye,K,ee)}function m(){return Math.random().toString(36).substr(2,c)}var g=k3();function b(ie){ih(le,ie),le.length=t.length,g.notifyListeners(le.location,le.action)}function y(ie){$U(ie)||T(p(ie.state))}function w(){T(p(SE()))}var x=!1;function T(ie){if(x)x=!1,b();else{var Q="POP";g.confirmTransitionTo(ie,Q,l,function(ee){ee?b({action:Q,location:ie}):I(ie)})}}function I(ie){var Q=le.location,ee=S.indexOf(Q.key);ee===-1&&(ee=0);var K=S.indexOf(ie.key);K===-1&&(K=0);var te=ee-K;te&&(x=!0,A(te))}var R=p(SE()),S=[R.key];function O(ie){return f+oi(ie)}function P(ie,Q){var ee="PUSH",K=Ti(ie,Q,m(),le.location);g.confirmTransitionTo(K,ee,l,function(te){if(!!te){var ye=O(K),Ce=K.key,Ie=K.state;if(r)if(t.pushState({key:Ce,state:Ie},null,ye),s)window.location.href=ye;else{var Ye=S.indexOf(le.location.key),pe=S.slice(0,Ye+1);pe.push(K.key),S=pe,b({action:ee,location:K})}else window.location.href=ye}})}function N(ie,Q){var ee="REPLACE",K=Ti(ie,Q,m(),le.location);g.confirmTransitionTo(K,ee,l,function(te){if(!!te){var ye=O(K),Ce=K.key,Ie=K.state;if(r)if(t.replaceState({key:Ce,state:Ie},null,ye),s)window.location.replace(ye);else{var Ye=S.indexOf(le.location.key);Ye!==-1&&(S[Ye]=K.key),b({action:ee,location:K})}else window.location.replace(ye)}})}function A(ie){t.go(ie)}function j(){A(-1)}function X(){A(1)}var G=0;function ne(ie){G+=ie,G===1&&ie===1?(window.addEventListener(xE,y),n&&window.addEventListener(TE,w)):G===0&&(window.removeEventListener(xE,y),n&&window.removeEventListener(TE,w))}var W=!1;function Y(ie){ie===void 0&&(ie=!1);var Q=g.setPrompt(ie);return W||(ne(1),W=!0),function(){return W&&(W=!1,ne(-1)),Q()}}function de(ie){var Q=g.appendListener(ie);return ne(1),function(){ne(-1),Q()}}var le={length:t.length,action:"POP",location:R,createHref:O,push:P,replace:N,go:A,goBack:j,goForward:X,block:Y,listen:de};return le}var EE="hashchange",zU={hashbang:{encodePath:function(t){return t.charAt(0)==="!"?t:"!/"+wE(t)},decodePath:function(t){return t.charAt(0)==="!"?t.substr(1):t}},noslash:{encodePath:wE,decodePath:ud},slash:{encodePath:ud,decodePath:ud}};function U8(e){var t=e.indexOf("#");return t===-1?e:e.slice(0,t)}function Af(){var e=window.location.href,t=e.indexOf("#");return t===-1?"":e.substring(t+1)}function VU(e){window.location.hash=e}function U2(e){window.location.replace(U8(window.location.href)+"#"+e)}function XU(e){e===void 0&&(e={}),O8||fl(!1);var t=window.history;jU();var r=e,n=r.getUserConfirmation,i=n===void 0?L8:n,o=r.hashType,s=o===void 0?"slash":o,a=e.basename?k8(ud(e.basename)):"",l=zU[s],u=l.encodePath,c=l.decodePath;function f(){var Q=c(Af());return a&&(Q=R8(Q,a)),Ti(Q)}var p=k3();function m(Q){ih(ie,Q),ie.length=t.length,p.notifyListeners(ie.location,ie.action)}var g=!1,b=null;function y(Q,ee){return Q.pathname===ee.pathname&&Q.search===ee.search&&Q.hash===ee.hash}function w(){var Q=Af(),ee=u(Q);if(Q!==ee)U2(ee);else{var K=f(),te=ie.location;if(!g&&y(te,K)||b===oi(K))return;b=null,x(K)}}function x(Q){if(g)g=!1,m();else{var ee="POP";p.confirmTransitionTo(Q,ee,i,function(K){K?m({action:ee,location:Q}):T(Q)})}}function T(Q){var ee=ie.location,K=O.lastIndexOf(oi(ee));K===-1&&(K=0);var te=O.lastIndexOf(oi(Q));te===-1&&(te=0);var ye=K-te;ye&&(g=!0,j(ye))}var I=Af(),R=u(I);I!==R&&U2(R);var S=f(),O=[oi(S)];function P(Q){var ee=document.querySelector("base"),K="";return ee&&ee.getAttribute("href")&&(K=U8(window.location.href)),K+"#"+u(a+oi(Q))}function N(Q,ee){var K="PUSH",te=Ti(Q,void 0,void 0,ie.location);p.confirmTransitionTo(te,K,i,function(ye){if(!!ye){var Ce=oi(te),Ie=u(a+Ce),Ye=Af()!==Ie;if(Ye){b=Ce,VU(Ie);var pe=O.lastIndexOf(oi(ie.location)),F=O.slice(0,pe+1);F.push(Ce),O=F,m({action:K,location:te})}else m()}})}function A(Q,ee){var K="REPLACE",te=Ti(Q,void 0,void 0,ie.location);p.confirmTransitionTo(te,K,i,function(ye){if(!!ye){var Ce=oi(te),Ie=u(a+Ce),Ye=Af()!==Ie;Ye&&(b=Ce,U2(Ie));var pe=O.indexOf(oi(ie.location));pe!==-1&&(O[pe]=Ce),m({action:K,location:te})}})}function j(Q){t.go(Q)}function X(){j(-1)}function G(){j(1)}var ne=0;function W(Q){ne+=Q,ne===1&&Q===1?window.addEventListener(EE,w):ne===0&&window.removeEventListener(EE,w)}var Y=!1;function de(Q){Q===void 0&&(Q=!1);var ee=p.setPrompt(Q);return Y||(W(1),Y=!0),function(){return Y&&(Y=!1,W(-1)),ee()}}function le(Q){var ee=p.appendListener(Q);return W(1),function(){W(-1),ee()}}var ie={length:t.length,action:"POP",location:S,createHref:P,push:N,replace:A,go:j,goBack:X,goForward:G,block:de,listen:le};return ie}function CE(e,t,r){return Math.min(Math.max(e,t),r)}function WU(e){e===void 0&&(e={});var t=e,r=t.getUserConfirmation,n=t.initialEntries,i=n===void 0?["/"]:n,o=t.initialIndex,s=o===void 0?0:o,a=t.keyLength,l=a===void 0?6:a,u=k3();function c(P){ih(O,P),O.length=O.entries.length,u.notifyListeners(O.location,O.action)}function f(){return Math.random().toString(36).substr(2,l)}var p=CE(s,0,i.length-1),m=i.map(function(P){return typeof P=="string"?Ti(P,void 0,f()):Ti(P,void 0,P.key||f())}),g=oi;function b(P,N){var A="PUSH",j=Ti(P,N,f(),O.location);u.confirmTransitionTo(j,A,r,function(X){if(!!X){var G=O.index,ne=G+1,W=O.entries.slice(0);W.length>ne?W.splice(ne,W.length-ne,j):W.push(j),c({action:A,location:j,index:ne,entries:W})}})}function y(P,N){var A="REPLACE",j=Ti(P,N,f(),O.location);u.confirmTransitionTo(j,A,r,function(X){!X||(O.entries[O.index]=j,c({action:A,location:j}))})}function w(P){var N=CE(O.index+P,0,O.entries.length-1),A="POP",j=O.entries[N];u.confirmTransitionTo(j,A,r,function(X){X?c({action:A,location:j,index:N}):c()})}function x(){w(-1)}function T(){w(1)}function I(P){var N=O.index+P;return N>=0&&N<O.entries.length}function R(P){return P===void 0&&(P=!1),u.setPrompt(P)}function S(P){return u.appendListener(P)}var O={length:m.length,action:"POP",location:m[p],index:p,entries:m,createHref:g,push:b,replace:y,go:w,goBack:x,goForward:T,canGo:I,block:R,listen:S};return O}const Ai=typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{};function Ob(e,t){return Ob=Object.setPrototypeOf||function(n,i){return n.__proto__=i,n},Ob(e,t)}function IE(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,Ob(e,t)}var F2=1073741823,NE=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof Ai<"u"?Ai:{};function YU(){var e="__global_unique_id__";return NE[e]=(NE[e]||0)+1}function KU(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}function qU(e){var t=[];return{on:function(n){t.push(n)},off:function(n){t=t.filter(function(i){return i!==n})},get:function(){return e},set:function(n,i){e=n,t.forEach(function(o){return o(e,i)})}}}function ZU(e){return Array.isArray(e)?e[0]:e}function JU(e,t){var r,n,i="__create-react-context-"+YU()+"__",o=function(a){IE(l,a);function l(){var c;return c=a.apply(this,arguments)||this,c.emitter=qU(c.props.value),c}var u=l.prototype;return u.getChildContext=function(){var f;return f={},f[i]=this.emitter,f},u.componentWillReceiveProps=function(f){if(this.props.value!==f.value){var p=this.props.value,m=f.value,g;KU(p,m)?g=0:(g=typeof t=="function"?t(p,m):F2,g|=0,g!==0&&this.emitter.set(f.value,g))}},u.render=function(){return this.props.children},l}(M.exports.Component);o.childContextTypes=(r={},r[i]=kb.exports.object.isRequired,r);var s=function(a){IE(l,a);function l(){var c;return c=a.apply(this,arguments)||this,c.state={value:c.getValue()},c.onUpdate=function(f,p){var m=c.observedBits|0;(m&p)!==0&&c.setState({value:c.getValue()})},c}var u=l.prototype;return u.componentWillReceiveProps=function(f){var p=f.observedBits;this.observedBits=p==null?F2:p},u.componentDidMount=function(){this.context[i]&&this.context[i].on(this.onUpdate);var f=this.props.observedBits;this.observedBits=f==null?F2:f},u.componentWillUnmount=function(){this.context[i]&&this.context[i].off(this.onUpdate)},u.getValue=function(){return this.context[i]?this.context[i].get():e},u.render=function(){return ZU(this.props.children)(this.state.value)},l}(M.exports.Component);return s.contextTypes=(n={},n[i]=kb.exports.object,n),{Provider:o,Consumer:s}}var QU=Je.createContext||JU;function oh(){return oh=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},oh.apply(this,arguments)}var xh={exports:{}},eF=Array.isArray||function(e){return Object.prototype.toString.call(e)=="[object Array]"},J0=eF;xh.exports=B8;xh.exports.parse=O3;xh.exports.compile=rF;xh.exports.tokensToFunction=F8;xh.exports.tokensToRegExp=M8;var tF=new RegExp(["(\\\\.)","([\\/.])?(?:(?:\\:(\\w+)(?:\\(((?:\\\\.|[^\\\\()])+)\\))?|\\(((?:\\\\.|[^\\\\()])+)\\))([+*?])?|(\\*))"].join("|"),"g");function O3(e,t){for(var r=[],n=0,i=0,o="",s=t&&t.delimiter||"/",a;(a=tF.exec(e))!=null;){var l=a[0],u=a[1],c=a.index;if(o+=e.slice(i,c),i=c+l.length,u){o+=u[1];continue}var f=e[i],p=a[2],m=a[3],g=a[4],b=a[5],y=a[6],w=a[7];o&&(r.push(o),o="");var x=p!=null&&f!=null&&f!==p,T=y==="+"||y==="*",I=y==="?"||y==="*",R=a[2]||s,S=g||b;r.push({name:m||n++,prefix:p||"",delimiter:R,optional:I,repeat:T,partial:x,asterisk:!!w,pattern:S?oF(S):w?".*":"[^"+n0(R)+"]+?"})}return i<e.length&&(o+=e.substr(i)),o&&r.push(o),r}function rF(e,t){return F8(O3(e,t),t)}function nF(e){return encodeURI(e).replace(/[\/?#]/g,function(t){return"%"+t.charCodeAt(0).toString(16).toUpperCase()})}function iF(e){return encodeURI(e).replace(/[?#]/g,function(t){return"%"+t.charCodeAt(0).toString(16).toUpperCase()})}function F8(e,t){for(var r=new Array(e.length),n=0;n<e.length;n++)typeof e[n]=="object"&&(r[n]=new RegExp("^(?:"+e[n].pattern+")$",U3(t)));return function(i,o){for(var s="",a=i||{},l=o||{},u=l.pretty?nF:encodeURIComponent,c=0;c<e.length;c++){var f=e[c];if(typeof f=="string"){s+=f;continue}var p=a[f.name],m;if(p==null)if(f.optional){f.partial&&(s+=f.prefix);continue}else throw new TypeError('Expected "'+f.name+'" to be defined');if(J0(p)){if(!f.repeat)throw new TypeError('Expected "'+f.name+'" to not repeat, but received `'+JSON.stringify(p)+"`");if(p.length===0){if(f.optional)continue;throw new TypeError('Expected "'+f.name+'" to not be empty')}for(var g=0;g<p.length;g++){if(m=u(p[g]),!r[c].test(m))throw new TypeError('Expected all "'+f.name+'" to match "'+f.pattern+'", but received `'+JSON.stringify(m)+"`");s+=(g===0?f.prefix:f.delimiter)+m}continue}if(m=f.asterisk?iF(p):u(p),!r[c].test(m))throw new TypeError('Expected "'+f.name+'" to match "'+f.pattern+'", but received "'+m+'"');s+=f.prefix+m}return s}}function n0(e){return e.replace(/([.+*?=^!:${}()[\]|\/\\])/g,"\\$1")}function oF(e){return e.replace(/([=!:$\/()])/g,"\\$1")}function L3(e,t){return e.keys=t,e}function U3(e){return e&&e.sensitive?"":"i"}function sF(e,t){var r=e.source.match(/\((?!\?)/g);if(r)for(var n=0;n<r.length;n++)t.push({name:n,prefix:null,delimiter:null,optional:!1,repeat:!1,partial:!1,asterisk:!1,pattern:null});return L3(e,t)}function aF(e,t,r){for(var n=[],i=0;i<e.length;i++)n.push(B8(e[i],t,r).source);var o=new RegExp("(?:"+n.join("|")+")",U3(r));return L3(o,t)}function lF(e,t,r){return M8(O3(e,r),t,r)}function M8(e,t,r){J0(t)||(r=t||r,t=[]),r=r||{};for(var n=r.strict,i=r.end!==!1,o="",s=0;s<e.length;s++){var a=e[s];if(typeof a=="string")o+=n0(a);else{var l=n0(a.prefix),u="(?:"+a.pattern+")";t.push(a),a.repeat&&(u+="(?:"+l+u+")*"),a.optional?a.partial?u=l+"("+u+")?":u="(?:"+l+"("+u+"))?":u=l+"("+u+")",o+=u}}var c=n0(r.delimiter||"/"),f=o.slice(-c.length)===c;return n||(o=(f?o.slice(0,-c.length):o)+"(?:"+c+"(?=$))?"),i?o+="$":o+=n&&f?"":"(?="+c+"|$)",L3(new RegExp("^"+o,U3(r)),t)}function B8(e,t,r){return J0(t)||(r=t||r,t=[]),r=r||{},e instanceof RegExp?sF(e,t):J0(e)?aF(e,t,r):lF(e,t,r)}var D8={exports:{}},$t={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var dn=typeof Symbol=="function"&&Symbol.for,F3=dn?Symbol.for("react.element"):60103,M3=dn?Symbol.for("react.portal"):60106,Zg=dn?Symbol.for("react.fragment"):60107,Jg=dn?Symbol.for("react.strict_mode"):60108,Qg=dn?Symbol.for("react.profiler"):60114,ey=dn?Symbol.for("react.provider"):60109,ty=dn?Symbol.for("react.context"):60110,B3=dn?Symbol.for("react.async_mode"):60111,ry=dn?Symbol.for("react.concurrent_mode"):60111,ny=dn?Symbol.for("react.forward_ref"):60112,iy=dn?Symbol.for("react.suspense"):60113,uF=dn?Symbol.for("react.suspense_list"):60120,oy=dn?Symbol.for("react.memo"):60115,sy=dn?Symbol.for("react.lazy"):60116,cF=dn?Symbol.for("react.block"):60121,hF=dn?Symbol.for("react.fundamental"):60117,fF=dn?Symbol.for("react.responder"):60118,dF=dn?Symbol.for("react.scope"):60119;function Oi(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case F3:switch(e=e.type,e){case B3:case ry:case Zg:case Qg:case Jg:case iy:return e;default:switch(e=e&&e.$$typeof,e){case ty:case ny:case sy:case oy:case ey:return e;default:return t}}case M3:return t}}}function G8(e){return Oi(e)===ry}$t.AsyncMode=B3;$t.ConcurrentMode=ry;$t.ContextConsumer=ty;$t.ContextProvider=ey;$t.Element=F3;$t.ForwardRef=ny;$t.Fragment=Zg;$t.Lazy=sy;$t.Memo=oy;$t.Portal=M3;$t.Profiler=Qg;$t.StrictMode=Jg;$t.Suspense=iy;$t.isAsyncMode=function(e){return G8(e)||Oi(e)===B3};$t.isConcurrentMode=G8;$t.isContextConsumer=function(e){return Oi(e)===ty};$t.isContextProvider=function(e){return Oi(e)===ey};$t.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===F3};$t.isForwardRef=function(e){return Oi(e)===ny};$t.isFragment=function(e){return Oi(e)===Zg};$t.isLazy=function(e){return Oi(e)===sy};$t.isMemo=function(e){return Oi(e)===oy};$t.isPortal=function(e){return Oi(e)===M3};$t.isProfiler=function(e){return Oi(e)===Qg};$t.isStrictMode=function(e){return Oi(e)===Jg};$t.isSuspense=function(e){return Oi(e)===iy};$t.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===Zg||e===ry||e===Qg||e===Jg||e===iy||e===uF||typeof e=="object"&&e!==null&&(e.$$typeof===sy||e.$$typeof===oy||e.$$typeof===ey||e.$$typeof===ty||e.$$typeof===ny||e.$$typeof===hF||e.$$typeof===fF||e.$$typeof===dF||e.$$typeof===cF)};$t.typeOf=Oi;(function(e){e.exports=$t})(D8);function j8(e,t){if(e==null)return{};var r={},n=Object.keys(e),i,o;for(o=0;o<n.length;o++)i=n[o],!(t.indexOf(i)>=0)&&(r[i]=e[i]);return r}var D3=D8.exports,pF={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},mF={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},vF={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},$8={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},G3={};G3[D3.ForwardRef]=vF;G3[D3.Memo]=$8;function PE(e){return D3.isMemo(e)?$8:G3[e.$$typeof]||pF}var gF=Object.defineProperty,yF=Object.getOwnPropertyNames,AE=Object.getOwnPropertySymbols,_F=Object.getOwnPropertyDescriptor,bF=Object.getPrototypeOf,RE=Object.prototype;function H8(e,t,r){if(typeof t!="string"){if(RE){var n=bF(t);n&&n!==RE&&H8(e,n,r)}var i=yF(t);AE&&(i=i.concat(AE(t)));for(var o=PE(e),s=PE(t),a=0;a<i.length;++a){var l=i[a];if(!mF[l]&&!(r&&r[l])&&!(s&&s[l])&&!(o&&o[l])){var u=_F(t,l);try{gF(e,l,u)}catch{}}}}return e}var wF=H8,ay={exports:{}},gp={};/** @license React v17.0.2
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var xF=M.exports,z8=60103;gp.Fragment=60107;if(typeof Symbol=="function"&&Symbol.for){var kE=Symbol.for;z8=kE("react.element"),gp.Fragment=kE("react.fragment")}var TF=xF.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,SF=Object.prototype.hasOwnProperty,EF={key:!0,ref:!0,__self:!0,__source:!0};function V8(e,t,r){var n,i={},o=null,s=null;r!==void 0&&(o=""+r),t.key!==void 0&&(o=""+t.key),t.ref!==void 0&&(s=t.ref);for(n in t)SF.call(t,n)&&!EF.hasOwnProperty(n)&&(i[n]=t[n]);if(e&&e.defaultProps)for(n in t=e.defaultProps,t)i[n]===void 0&&(i[n]=t[n]);return{$$typeof:z8,type:e,key:o,ref:s,props:i,_owner:TF.current}}gp.jsx=V8;gp.jsxs=V8;(function(e){e.exports=gp})(ay);const je=ay.exports.Fragment,v=ay.exports.jsx,k=ay.exports.jsxs;var X8=function(t){var r=QU();return r.displayName=t,r},W8=X8("Router-History"),lu=X8("Router"),ly=function(e){wh(t,e),t.computeRootMatch=function(i){return{path:"/",url:"/",params:{},isExact:i==="/"}};function t(n){var i;return i=e.call(this,n)||this,i.state={location:n.history.location},i._isMounted=!1,i._pendingLocation=null,n.staticContext||(i.unlisten=n.history.listen(function(o){i._isMounted?i.setState({location:o}):i._pendingLocation=o})),i}var r=t.prototype;return r.componentDidMount=function(){this._isMounted=!0,this._pendingLocation&&this.setState({location:this._pendingLocation})},r.componentWillUnmount=function(){this.unlisten&&(this.unlisten(),this._isMounted=!1,this._pendingLocation=null)},r.render=function(){return Je.createElement(lu.Provider,{value:{history:this.props.history,location:this.state.location,match:t.computeRootMatch(this.state.location.pathname),staticContext:this.props.staticContext}},Je.createElement(W8.Provider,{children:this.props.children||null,value:this.props.history}))},t}(Je.Component);Je.Component;Je.Component;var OE={},CF=1e4,LE=0;function IF(e,t){var r=""+t.end+t.strict+t.sensitive,n=OE[r]||(OE[r]={});if(n[e])return n[e];var i=[],o=xh.exports(e,i,t),s={regexp:o,keys:i};return LE<CF&&(n[e]=s,LE++),s}function j3(e,t){t===void 0&&(t={}),(typeof t=="string"||Array.isArray(t))&&(t={path:t});var r=t,n=r.path,i=r.exact,o=i===void 0?!1:i,s=r.strict,a=s===void 0?!1:s,l=r.sensitive,u=l===void 0?!1:l,c=[].concat(n);return c.reduce(function(f,p){if(!p&&p!=="")return null;if(f)return f;var m=IF(p,{end:o,strict:a,sensitive:u}),g=m.regexp,b=m.keys,y=g.exec(e);if(!y)return null;var w=y[0],x=y.slice(1),T=e===w;return o&&!T?null:{path:p,url:p==="/"&&w===""?"/":w,isExact:T,params:b.reduce(function(I,R,S){return I[R.name]=x[S],I},{})}},null)}function NF(e){return Je.Children.count(e)===0}var nn=function(e){wh(t,e);function t(){return e.apply(this,arguments)||this}var r=t.prototype;return r.render=function(){var i=this;return Je.createElement(lu.Consumer,null,function(o){o||fl(!1);var s=i.props.location||o.location,a=i.props.computedMatch?i.props.computedMatch:i.props.path?j3(s.pathname,i.props):o.match,l=oh({},o,{location:s,match:a}),u=i.props,c=u.children,f=u.component,p=u.render;return Array.isArray(c)&&NF(c)&&(c=null),Je.createElement(lu.Provider,{value:l},l.match?c?typeof c=="function"?c(l):c:f?Je.createElement(f,l):p?p(l):null:typeof c=="function"?c(l):null)})},t}(Je.Component);function $3(e){return e.charAt(0)==="/"?e:"/"+e}function PF(e,t){return e?oh({},t,{pathname:$3(e)+t.pathname}):t}function AF(e,t){if(!e)return t;var r=$3(e);return t.pathname.indexOf(r)!==0?t:oh({},t,{pathname:t.pathname.substr(r.length)})}function UE(e){return typeof e=="string"?e:oi(e)}function M2(e){return function(){fl(!1)}}function FE(){}Je.Component;var RF=function(e){wh(t,e);function t(){return e.apply(this,arguments)||this}var r=t.prototype;return r.render=function(){var i=this;return Je.createElement(lu.Consumer,null,function(o){o||fl(!1);var s=i.props.location||o.location,a,l;return Je.Children.forEach(i.props.children,function(u){if(l==null&&Je.isValidElement(u)){a=u;var c=u.props.path||u.props.from;l=c?j3(s.pathname,oh({},u.props,{path:c})):o.match}}),l?Je.cloneElement(a,{location:s,computedMatch:l}):null})},t}(Je.Component);function Th(e){var t="withRouter("+(e.displayName||e.name)+")",r=function(i){var o=i.wrappedComponentRef,s=j8(i,["wrappedComponentRef"]);return Je.createElement(lu.Consumer,null,function(a){return a||fl(!1),v(e,{...s,...a,ref:o})})};return r.displayName=t,r.WrappedComponent=e,wF(r,e)}var kF=Je.useContext;function H3(){return kF(W8)}function Lb(e,t){return Lb=Object.setPrototypeOf||function(n,i){return n.__proto__=i,n},Lb(e,t)}function Y8(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,Lb(e,t)}function sh(){return sh=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},sh.apply(this,arguments)}function z3(e,t){if(e==null)return{};var r={},n=Object.keys(e),i,o;for(o=0;o<n.length;o++)i=n[o],!(t.indexOf(i)>=0)&&(r[i]=e[i]);return r}Je.Component;var OF=function(e){Y8(t,e);function t(){for(var n,i=arguments.length,o=new Array(i),s=0;s<i;s++)o[s]=arguments[s];return n=e.call.apply(e,[this].concat(o))||this,n.history=XU(n.props),n}var r=t.prototype;return r.render=function(){return v(ly,{history:this.history,children:this.props.children})},t}(Je.Component),Ub=function(t,r){return typeof t=="function"?t(r):t},Fb=function(t,r){return typeof t=="string"?Ti(t,null,null,r):t},V3=function(t){return t},ah=Je.forwardRef;typeof ah>"u"&&(ah=V3);function LF(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}var UF=ah(function(e,t){var r=e.innerRef,n=e.navigate,i=e.onClick,o=z3(e,["innerRef","navigate","onClick"]),s=o.target,a=sh({},o,{onClick:function(u){try{i&&i(u)}catch(c){throw u.preventDefault(),c}!u.defaultPrevented&&u.button===0&&(!s||s==="_self")&&!LF(u)&&(u.preventDefault(),n())}});return V3!==ah?a.ref=t||r:a.ref=r,v("a",{...a})}),di=ah(function(e,t){var r=e.component,n=r===void 0?UF:r,i=e.replace,o=e.to,s=e.innerRef,a=z3(e,["component","replace","to","innerRef"]);return Je.createElement(lu.Consumer,null,function(l){l||fl(!1);var u=l.history,c=Fb(Ub(o,l.location),l.location),f=c?u.createHref(c):"",p=sh({},a,{href:f,navigate:function(){var g=Ub(o,l.location),b=oi(l.location)===oi(Fb(g)),y=i||b?u.replace:u.push;y(g)}});return V3!==ah?p.ref=t||s:p.innerRef=s,Je.createElement(n,p)})}),K8=function(t){return t},Q0=Je.forwardRef;typeof Q0>"u"&&(Q0=K8);function FF(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.filter(function(n){return n}).join(" ")}Q0(function(e,t){var r=e["aria-current"],n=r===void 0?"page":r,i=e.activeClassName,o=i===void 0?"active":i,s=e.activeStyle,a=e.className,l=e.exact,u=e.isActive,c=e.location,f=e.sensitive,p=e.strict,m=e.style,g=e.to,b=e.innerRef,y=z3(e,["aria-current","activeClassName","activeStyle","className","exact","isActive","location","sensitive","strict","style","to","innerRef"]);return Je.createElement(lu.Consumer,null,function(w){w||fl(!1);var x=c||w.location,T=Fb(Ub(g,x),x),I=T.pathname,R=I&&I.replace(/([.+*?=^!:${}()[\]|/\\])/g,"\\$1"),S=R?j3(x.pathname,{path:R,exact:l,sensitive:f,strict:p}):null,O=!!(u?u(S,x):S),P=typeof a=="function"?a(O):a,N=typeof m=="function"?m(O):m;O&&(P=FF(P,o),N=sh({},N,s));var A=sh({"aria-current":O&&n||null,className:P,style:N,to:T},y);return K8!==Q0?A.ref=t||b:A.innerRef=b,v(di,{...A})})});const q8=window==null?void 0:window.gtag;async function MF(e){try{return{data:await e()}}catch(t){return q8&&console.log("Error with GA"),{error:t}}}function Sh(e,t){return MF(()=>q8("event",e,t))}function BF(e,t){return Sh("songs_"+e,t)}function DF(e){return Sh("song_search",e)}function GF(e,t){return Sh("UI_"+e,t)}function jF(e){return Sh("song_event",e)}function $F(e){return Sh("page_view",e)}const Cn={pageView:$F,event:Sh,songEvent:jF,userSongs:BF,songSearch:DF,UIEvent:GF};var Z8={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},ME=Je.createContext&&Je.createContext(Z8),Ha=globalThis&&globalThis.__assign||function(){return Ha=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},Ha.apply(this,arguments)},HF=globalThis&&globalThis.__rest||function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]]);return r};function J8(e){return e&&e.map(function(t,r){return Je.createElement(t.tag,Ha({key:r},t.attr),J8(t.child))})}function De(e){return function(t){return v(zF,{...Ha({attr:Ha({},e.attr)},t),children:J8(e.child)})}}function zF(e){var t=function(r){var n=e.attr,i=e.size,o=e.title,s=HF(e,["attr","size","title"]),a=i||r.size||"1em",l;return r.className&&(l=r.className),e.className&&(l=(l?l+" ":"")+e.className),k("svg",{...Ha({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},r.attr,n,s,{className:l,style:Ha(Ha({color:e.color||r.color},r.style),e.style),height:a,width:a,xmlns:"http://www.w3.org/2000/svg"}),children:[o&&v("title",{children:o}),e.children]})};return ME!==void 0?v(ME.Consumer,{children:function(r){return t(r)}}):t(Z8)}function Q8(e){return De({tag:"svg",attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M524.531,69.836a1.5,1.5,0,0,0-.764-.7A485.065,485.065,0,0,0,404.081,32.03a1.816,1.816,0,0,0-1.923.91,337.461,337.461,0,0,0-14.9,30.6,447.848,447.848,0,0,0-134.426,0,309.541,309.541,0,0,0-15.135-30.6,1.89,1.89,0,0,0-1.924-.91A483.689,483.689,0,0,0,116.085,69.137a1.712,1.712,0,0,0-.788.676C39.068,183.651,18.186,294.69,28.43,404.354a2.016,2.016,0,0,0,.765,1.375A487.666,487.666,0,0,0,176.02,479.918a1.9,1.9,0,0,0,2.063-.676A348.2,348.2,0,0,0,208.12,430.4a1.86,1.86,0,0,0-1.019-2.588,321.173,321.173,0,0,1-45.868-21.853,1.885,1.885,0,0,1-.185-3.126c3.082-2.309,6.166-4.711,9.109-7.137a1.819,1.819,0,0,1,1.9-.256c96.229,43.917,200.41,43.917,295.5,0a1.812,1.812,0,0,1,1.924.233c2.944,2.426,6.027,4.851,9.132,7.16a1.884,1.884,0,0,1-.162,3.126,301.407,301.407,0,0,1-45.89,21.83,1.875,1.875,0,0,0-1,2.611,391.055,391.055,0,0,0,30.014,48.815,1.864,1.864,0,0,0,2.063.7A486.048,486.048,0,0,0,610.7,405.729a1.882,1.882,0,0,0,.765-1.352C623.729,277.594,590.933,167.465,524.531,69.836ZM222.491,337.58c-28.972,0-52.844-26.587-52.844-59.239S193.056,219.1,222.491,219.1c29.665,0,53.306,26.82,52.843,59.239C275.334,310.993,251.924,337.58,222.491,337.58Zm195.38,0c-28.971,0-52.843-26.587-52.843-59.239S388.437,219.1,417.871,219.1c29.667,0,53.307,26.82,52.844,59.239C470.715,310.993,447.538,337.58,417.871,337.58Z"}}]})(e)}function eA(e){return De({tag:"svg",attr:{viewBox:"0 0 496 512"},child:[{tag:"path",attr:{d:"M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"}}]})(e)}function VF(e){return De({tag:"svg",attr:{viewBox:"0 0 320 512"},child:[{tag:"path",attr:{d:"M143 352.3L7 216.3c-9.4-9.4-9.4-24.6 0-33.9l22.6-22.6c9.4-9.4 24.6-9.4 33.9 0l96.4 96.4 96.4-96.4c9.4-9.4 24.6-9.4 33.9 0l22.6 22.6c9.4 9.4 9.4 24.6 0 33.9l-136 136c-9.2 9.4-24.4 9.4-33.8 0z"}}]})(e)}function XF(e){return De({tag:"svg",attr:{viewBox:"0 0 320 512"},child:[{tag:"path",attr:{d:"M177 159.7l136 136c9.4 9.4 9.4 24.6 0 33.9l-22.6 22.6c-9.4 9.4-24.6 9.4-33.9 0L160 255.9l-96.4 96.4c-9.4 9.4-24.6 9.4-33.9 0L7 329.7c-9.4-9.4-9.4-24.6 0-33.9l136-136c9.4-9.5 24.6-9.5 34-.1z"}}]})(e)}function tA(e){return De({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M413.1 222.5l22.2 22.2c9.4 9.4 9.4 24.6 0 33.9L241 473c-9.4 9.4-24.6 9.4-33.9 0L12.7 278.6c-9.4-9.4-9.4-24.6 0-33.9l22.2-22.2c9.5-9.5 25-9.3 34.3.4L184 343.4V56c0-13.3 10.7-24 24-24h32c13.3 0 24 10.7 24 24v287.4l114.8-120.5c9.3-9.8 24.8-10 34.3-.4z"}}]})(e)}function rA(e){return De({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M257.5 445.1l-22.2 22.2c-9.4 9.4-24.6 9.4-33.9 0L7 273c-9.4-9.4-9.4-24.6 0-33.9L201.4 44.7c9.4-9.4 24.6-9.4 33.9 0l22.2 22.2c9.5 9.5 9.3 25-.4 34.3L136.6 216H424c13.3 0 24 10.7 24 24v32c0 13.3-10.7 24-24 24H136.6l120.5 114.8c9.8 9.3 10 24.8.4 34.3z"}}]})(e)}function nA(e){return De({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M34.9 289.5l-22.2-22.2c-9.4-9.4-9.4-24.6 0-33.9L207 39c9.4-9.4 24.6-9.4 33.9 0l194.3 194.3c9.4 9.4 9.4 24.6 0 33.9L413 289.4c-9.5 9.5-25 9.3-34.3-.4L264 168.6V456c0 13.3-10.7 24-24 24h-32c-13.3 0-24-10.7-24-24V168.6L69.2 289.1c-9.3 9.8-24.8 10-34.3.4z"}}]})(e)}function uy(e){return De({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M16 132h416c8.837 0 16-7.163 16-16V76c0-8.837-7.163-16-16-16H16C7.163 60 0 67.163 0 76v40c0 8.837 7.163 16 16 16zm0 160h416c8.837 0 16-7.163 16-16v-40c0-8.837-7.163-16-16-16H16c-8.837 0-16 7.163-16 16v40c0 8.837 7.163 16 16 16zm0 160h416c8.837 0 16-7.163 16-16v-40c0-8.837-7.163-16-16-16H16c-8.837 0-16 7.163-16 16v40c0 8.837 7.163 16 16 16z"}}]})(e)}function WF(e){return De({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M504 256c0 136.967-111.033 248-248 248S8 392.967 8 256 119.033 8 256 8s248 111.033 248 248zM227.314 387.314l184-184c6.248-6.248 6.248-16.379 0-22.627l-22.627-22.627c-6.248-6.249-16.379-6.249-22.628 0L216 308.118l-70.059-70.059c-6.248-6.248-16.379-6.248-22.628 0l-22.627 22.627c-6.248 6.248-6.248 16.379 0 22.627l104 104c6.249 6.249 16.379 6.249 22.628.001z"}}]})(e)}function iA(e){return De({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M173.898 439.404l-166.4-166.4c-9.997-9.997-9.997-26.206 0-36.204l36.203-36.204c9.997-9.998 26.207-9.998 36.204 0L192 312.69 432.095 72.596c9.997-9.997 26.207-9.997 36.204 0l36.203 36.204c9.997 9.997 9.997 26.206 0 36.204l-294.4 294.401c-9.998 9.997-26.207 9.997-36.204-.001z"}}]})(e)}function oA(e){return De({tag:"svg",attr:{viewBox:"0 0 320 512"},child:[{tag:"path",attr:{d:"M34.52 239.03L228.87 44.69c9.37-9.37 24.57-9.37 33.94 0l22.67 22.67c9.36 9.36 9.37 24.52.04 33.9L131.49 256l154.02 154.75c9.34 9.38 9.32 24.54-.04 33.9l-22.67 22.67c-9.37 9.37-24.57 9.37-33.94 0L34.52 272.97c-9.37-9.37-9.37-24.57 0-33.94z"}}]})(e)}function sA(e){return De({tag:"svg",attr:{viewBox:"0 0 320 512"},child:[{tag:"path",attr:{d:"M285.476 272.971L91.132 467.314c-9.373 9.373-24.569 9.373-33.941 0l-22.667-22.667c-9.357-9.357-9.375-24.522-.04-33.901L188.505 256 34.484 101.255c-9.335-9.379-9.317-24.544.04-33.901l22.667-22.667c9.373-9.373 24.569-9.373 33.941 0L285.475 239.03c9.373 9.372 9.373 24.568.001 33.941z"}}]})(e)}function YF(e){return De({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M256 8C119 8 8 119 8 256s111 248 248 248 248-111 248-248S393 8 256 8z"}}]})(e)}function KF(e){return De({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M464 0c26.51 0 48 21.49 48 48v288c0 26.51-21.49 48-48 48H176c-26.51 0-48-21.49-48-48V48c0-26.51 21.49-48 48-48h288M176 416c-44.112 0-80-35.888-80-80V128H48c-26.51 0-48 21.49-48 48v288c0 26.51 21.49 48 48 48h288c26.51 0 48-21.49 48-48v-48H176z"}}]})(e)}function Eu(e){return De({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M487.4 315.7l-42.6-24.6c4.3-23.2 4.3-47 0-70.2l42.6-24.6c4.9-2.8 7.1-8.6 5.5-14-11.1-35.6-30-67.8-54.7-94.6-3.8-4.1-10-5.1-14.8-2.3L380.8 110c-17.9-15.4-38.5-27.3-60.8-35.1V25.8c0-5.6-3.9-10.5-9.4-11.7-36.7-8.2-74.3-7.8-109.2 0-5.5 1.2-9.4 6.1-9.4 11.7V75c-22.2 7.9-42.8 19.8-60.8 35.1L88.7 85.5c-4.9-2.8-11-1.9-14.8 2.3-24.7 26.7-43.6 58.9-54.7 94.6-1.7 5.4.6 11.2 5.5 14L67.3 221c-4.3 23.2-4.3 47 0 70.2l-42.6 24.6c-4.9 2.8-7.1 8.6-5.5 14 11.1 35.6 30 67.8 54.7 94.6 3.8 4.1 10 5.1 14.8 2.3l42.6-24.6c17.9 15.4 38.5 27.3 60.8 35.1v49.2c0 5.6 3.9 10.5 9.4 11.7 36.7 8.2 74.3 7.8 109.2 0 5.5-1.2 9.4-6.1 9.4-11.7v-49.2c22.2-7.9 42.8-19.8 60.8-35.1l42.6 24.6c4.9 2.8 11 1.9 14.8-2.3 24.7-26.7 43.6-58.9 54.7-94.6 1.5-5.5-.7-11.3-5.6-14.1zM256 336c-44.1 0-80-35.9-80-80s35.9-80 80-80 80 35.9 80 80-35.9 80-80 80z"}}]})(e)}function qF(e){return De({tag:"svg",attr:{viewBox:"0 0 496 512"},child:[{tag:"path",attr:{d:"M248 8C111 8 0 119 0 256s111 248 248 248 248-111 248-248S385 8 248 8zM88 256H56c0-105.9 86.1-192 192-192v32c-88.2 0-160 71.8-160 160zm160 96c-53 0-96-43-96-96s43-96 96-96 96 43 96 96-43 96-96 96zm0-128c-17.7 0-32 14.3-32 32s14.3 32 32 32 32-14.3 32-32-14.3-32-32-32z"}}]})(e)}function ZF(e){return De({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M320 448v40c0 13.255-10.745 24-24 24H24c-13.255 0-24-10.745-24-24V120c0-13.255 10.745-24 24-24h72v296c0 30.879 25.121 56 56 56h168zm0-344V0H152c-13.255 0-24 10.745-24 24v368c0 13.255 10.745 24 24 24h272c13.255 0 24-10.745 24-24V128H344c-13.2 0-24-10.8-24-24zm120.971-31.029L375.029 7.029A24 24 0 0 0 358.059 0H352v96h96v-6.059a24 24 0 0 0-7.029-16.97z"}}]})(e)}function aA(e){return De({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M500 224h-30.364C455.724 130.325 381.675 56.276 288 42.364V12c0-6.627-5.373-12-12-12h-40c-6.627 0-12 5.373-12 12v30.364C130.325 56.276 56.276 130.325 42.364 224H12c-6.627 0-12 5.373-12 12v40c0 6.627 5.373 12 12 12h30.364C56.276 381.675 130.325 455.724 224 469.636V500c0 6.627 5.373 12 12 12h40c6.627 0 12-5.373 12-12v-30.364C381.675 455.724 455.724 381.675 469.636 288H500c6.627 0 12-5.373 12-12v-40c0-6.627-5.373-12-12-12zM288 404.634V364c0-6.627-5.373-12-12-12h-40c-6.627 0-12 5.373-12 12v40.634C165.826 392.232 119.783 346.243 107.366 288H148c6.627 0 12-5.373 12-12v-40c0-6.627-5.373-12-12-12h-40.634C119.768 165.826 165.757 119.783 224 107.366V148c0 6.627 5.373 12 12 12h40c6.627 0 12-5.373 12-12v-40.634C346.174 119.768 392.217 165.757 404.634 224H364c-6.627 0-12 5.373-12 12v40c0 6.627 5.373 12 12 12h40.634C392.232 346.174 346.243 392.217 288 404.634zM288 256c0 17.673-14.327 32-32 32s-32-14.327-32-32c0-17.673 14.327-32 32-32s32 14.327 32 32z"}}]})(e)}function ns(e){return De({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M216 0h80c13.3 0 24 10.7 24 24v168h87.7c17.8 0 26.7 21.5 14.1 34.1L269.7 378.3c-7.5 7.5-19.8 7.5-27.3 0L90.1 226.1c-12.6-12.6-3.7-34.1 14.1-34.1H192V24c0-13.3 10.7-24 24-24zm296 376v112c0 13.3-10.7 24-24 24H24c-13.3 0-24-10.7-24-24V376c0-13.3 10.7-24 24-24h146.7l49 49c20.1 20.1 52.5 20.1 72.6 0l49-49H488c13.3 0 24 10.7 24 24zm-124 88c0-11-9-20-20-20s-20 9-20 20 9 20 20 20 20-9 20-20zm64 0c0-11-9-20-20-20s-20 9-20 20 9 20 20 20 20-9 20-20z"}}]})(e)}function lA(e){return De({tag:"svg",attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M402.6 83.2l90.2 90.2c3.8 3.8 3.8 10 0 13.8L274.4 405.6l-92.8 10.3c-12.4 1.4-22.9-9.1-21.5-21.5l10.3-92.8L388.8 83.2c3.8-3.8 10-3.8 13.8 0zm162-22.9l-48.8-48.8c-15.2-15.2-39.9-15.2-55.2 0l-35.4 35.4c-3.8 3.8-3.8 10 0 13.8l90.2 90.2c3.8 3.8 10 3.8 13.8 0l35.4-35.4c15.2-15.3 15.2-40 0-55.2zM384 346.2V448H64V128h229.8c3.2 0 6.2-1.3 8.5-3.5l40-40c7.6-7.6 2.2-20.5-8.5-20.5H48C21.5 64 0 85.5 0 112v352c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V306.2c0-10.7-12.9-16-20.5-8.5l-40 40c-2.2 2.3-3.5 5.3-3.5 8.5z"}}]})(e)}function Eh(e){return De({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M328 256c0 39.8-32.2 72-72 72s-72-32.2-72-72 32.2-72 72-72 72 32.2 72 72zm104-72c-39.8 0-72 32.2-72 72s32.2 72 72 72 72-32.2 72-72-32.2-72-72-72zm-352 0c-39.8 0-72 32.2-72 72s32.2 72 72 72 72-32.2 72-72-32.2-72-72-72z"}}]})(e)}function JF(e){return De({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M497.941 273.941c18.745-18.745 18.745-49.137 0-67.882l-160-160c-18.745-18.745-49.136-18.746-67.883 0l-256 256c-18.745 18.745-18.745 49.137 0 67.882l96 96A48.004 48.004 0 0 0 144 480h356c6.627 0 12-5.373 12-12v-40c0-6.627-5.373-12-12-12H355.883l142.058-142.059zm-302.627-62.627l137.373 137.373L265.373 416H150.628l-80-80 124.686-124.686z"}}]})(e)}function QF(e){return De({tag:"svg",attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M569.517 440.013C587.975 472.007 564.806 512 527.94 512H48.054c-36.937 0-59.999-40.055-41.577-71.987L246.423 23.985c18.467-32.009 64.72-31.951 83.154 0l239.94 416.028zM288 354c-25.405 0-46 20.595-46 46s20.595 46 46 46 46-20.595 46-46-20.595-46-46-46zm-43.673-165.346l7.418 136c.347 6.364 5.609 11.346 11.982 11.346h48.546c6.373 0 11.635-4.982 11.982-11.346l7.418-136c.375-6.874-5.098-12.654-11.982-12.654h-63.383c-6.884 0-12.356 5.78-11.981 12.654z"}}]})(e)}function eM(e){return De({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M212.686 315.314L120 408l32.922 31.029c15.12 15.12 4.412 40.971-16.97 40.971h-112C10.697 480 0 469.255 0 456V344c0-21.382 25.803-32.09 40.922-16.971L72 360l92.686-92.686c6.248-6.248 16.379-6.248 22.627 0l25.373 25.373c6.249 6.248 6.249 16.378 0 22.627zm22.628-118.628L328 104l-32.922-31.029C279.958 57.851 290.666 32 312.048 32h112C437.303 32 448 42.745 448 56v112c0 21.382-25.803 32.09-40.922 16.971L376 152l-92.686 92.686c-6.248 6.248-16.379 6.248-22.627 0l-25.373-25.373c-6.249-6.248-6.249-16.378 0-22.627z"}}]})(e)}function Mb(e){return De({tag:"svg",attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M320 400c-75.85 0-137.25-58.71-142.9-133.11L72.2 185.82c-13.79 17.3-26.48 35.59-36.72 55.59a32.35 32.35 0 0 0 0 29.19C89.71 376.41 197.07 448 320 448c26.91 0 52.87-4 77.89-10.46L346 397.39a144.13 144.13 0 0 1-26 2.61zm313.82 58.1l-110.55-85.44a331.25 331.25 0 0 0 81.25-102.07 32.35 32.35 0 0 0 0-29.19C550.29 135.59 442.93 64 320 64a308.15 308.15 0 0 0-147.32 37.7L45.46 3.37A16 16 0 0 0 23 6.18L3.37 31.45A16 16 0 0 0 6.18 53.9l588.36 454.73a16 16 0 0 0 22.46-2.81l19.64-25.27a16 16 0 0 0-2.82-22.45zm-183.72-142l-39.3-30.38A94.75 94.75 0 0 0 416 256a94.76 94.76 0 0 0-121.31-92.21A47.65 47.65 0 0 1 304 192a46.64 46.64 0 0 1-1.54 10l-73.61-56.89A142.31 142.31 0 0 1 320 112a143.92 143.92 0 0 1 144 144c0 21.63-5.29 41.79-13.9 60.11z"}}]})(e)}function uA(e){return De({tag:"svg",attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M572.52 241.4C518.29 135.59 410.93 64 288 64S57.68 135.64 3.48 241.41a32.35 32.35 0 0 0 0 29.19C57.71 376.41 165.07 448 288 448s230.32-71.64 284.52-177.41a32.35 32.35 0 0 0 0-29.19zM288 400a144 144 0 1 1 144-144 143.93 143.93 0 0 1-144 144zm0-240a95.31 95.31 0 0 0-25.31 3.79 47.85 47.85 0 0 1-66.9 66.9A95.78 95.78 0 1 0 288 160z"}}]})(e)}function B2(e){return De({tag:"svg",attr:{viewBox:"0 0 384 512"},child:[{tag:"path",attr:{d:"M224 136V0H24C10.7 0 0 10.7 0 24v464c0 13.3 10.7 24 24 24h336c13.3 0 24-10.7 24-24V160H248c-13.2 0-24-10.8-24-24zm76.45 211.36l-96.42 95.7c-6.65 6.61-17.39 6.61-24.04 0l-96.42-95.7C73.42 337.29 80.54 320 94.82 320H160v-80c0-8.84 7.16-16 16-16h32c8.84 0 16 7.16 16 16v80h65.18c14.28 0 21.4 17.29 11.27 27.36zM377 105L279.1 7c-4.5-4.5-10.6-7-17-7H256v128h128v-6.1c0-6.3-2.5-12.4-7-16.9z"}}]})(e)}function tM(e){return De({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M16 288c-8.8 0-16 7.2-16 16v32c0 8.8 7.2 16 16 16h112v-64zm489-183L407.1 7c-4.5-4.5-10.6-7-17-7H384v128h128v-6.1c0-6.3-2.5-12.4-7-16.9zm-153 31V0H152c-13.3 0-24 10.7-24 24v264h128v-65.2c0-14.3 17.3-21.4 27.4-11.3L379 308c6.6 6.7 6.6 17.4 0 24l-95.7 96.4c-10.1 10.1-27.4 3-27.4-11.3V352H128v136c0 13.3 10.7 24 24 24h336c13.3 0 24-10.7 24-24V160H376c-13.2 0-24-10.8-24-24z"}}]})(e)}function rM(e){return De({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M487.976 0H24.028C2.71 0-8.047 25.866 7.058 40.971L192 225.941V432c0 7.831 3.821 15.17 10.237 19.662l80 55.98C298.02 518.69 320 507.493 320 487.98V225.941l184.947-184.97C520.021 25.896 509.338 0 487.976 0z"}}]})(e)}function cy(e){return De({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M464 128H272l-64-64H48C21.49 64 0 85.49 0 112v288c0 26.51 21.49 48 48 48h416c26.51 0 48-21.49 48-48V176c0-26.51-21.49-48-48-48z"}}]})(e)}function Cu(e){return De({tag:"svg",attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M280.37 148.26L96 300.11V464a16 16 0 0 0 16 16l112.06-.29a16 16 0 0 0 15.92-16V368a16 16 0 0 1 16-16h64a16 16 0 0 1 16 16v95.64a16 16 0 0 0 16 16.05L464 480a16 16 0 0 0 16-16V300L295.67 148.26a12.19 12.19 0 0 0-15.3 0zM571.6 251.47L488 182.56V44.05a12 12 0 0 0-12-12h-56a12 12 0 0 0-12 12v72.61L318.47 43a48 48 0 0 0-61 0L4.34 251.47a12 12 0 0 0-1.6 16.9l25.5 31A12 12 0 0 0 45.15 301l235.22-193.74a12.19 12.19 0 0 1 15.3 0L530.9 301a12 12 0 0 0 16.9-1.6l25.5-31a12 12 0 0 0-1.7-16.93z"}}]})(e)}function cA(e){return De({tag:"svg",attr:{viewBox:"0 0 192 512"},child:[{tag:"path",attr:{d:"M20 424.229h20V279.771H20c-11.046 0-20-8.954-20-20V212c0-11.046 8.954-20 20-20h112c11.046 0 20 8.954 20 20v212.229h20c11.046 0 20 8.954 20 20V492c0 11.046-8.954 20-20 20H20c-11.046 0-20-8.954-20-20v-47.771c0-11.046 8.954-20 20-20zM96 0C56.235 0 24 32.235 24 72s32.235 72 72 72 72-32.235 72-72S135.764 0 96 0z"}}]})(e)}function nM(e){return De({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M256 8C119 8 8 119 8 256s111 248 248 248 248-111 248-248S393 8 256 8zM124 296c-6.6 0-12-5.4-12-12v-56c0-6.6 5.4-12 12-12h264c6.6 0 12 5.4 12 12v56c0 6.6-5.4 12-12 12H124z"}}]})(e)}function hy(e){return De({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M416 208H32c-17.67 0-32 14.33-32 32v32c0 17.67 14.33 32 32 32h384c17.67 0 32-14.33 32-32v-32c0-17.67-14.33-32-32-32z"}}]})(e)}function yp(e){return De({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M470.38 1.51L150.41 96A32 32 0 0 0 128 126.51v261.41A139 139 0 0 0 96 384c-53 0-96 28.66-96 64s43 64 96 64 96-28.66 96-64V214.32l256-75v184.61a138.4 138.4 0 0 0-32-3.93c-53 0-96 28.66-96 64s43 64 96 64 96-28.65 96-64V32a32 32 0 0 0-41.62-30.49z"}}]})(e)}function iM(e){return De({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M128 184c0-30.879 25.122-56 56-56h136V56c0-13.255-10.745-24-24-24h-80.61C204.306 12.89 183.637 0 160 0s-44.306 12.89-55.39 32H24C10.745 32 0 42.745 0 56v336c0 13.255 10.745 24 24 24h104V184zm32-144c13.255 0 24 10.745 24 24s-10.745 24-24 24-24-10.745-24-24 10.745-24 24-24zm184 248h104v200c0 13.255-10.745 24-24 24H184c-13.255 0-24-10.745-24-24V184c0-13.255 10.745-24 24-24h136v104c0 13.2 10.8 24 24 24zm104-38.059V256h-96v-96h6.059a24 24 0 0 1 16.97 7.029l65.941 65.941a24.002 24.002 0 0 1 7.03 16.971z"}}]})(e)}function hA(e){return De({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M144 479H48c-26.5 0-48-21.5-48-48V79c0-26.5 21.5-48 48-48h96c26.5 0 48 21.5 48 48v352c0 26.5-21.5 48-48 48zm304-48V79c0-26.5-21.5-48-48-48h-96c-26.5 0-48 21.5-48 48v352c0 26.5 21.5 48 48 48h96c26.5 0 48-21.5 48-48z"}}]})(e)}function _p(e){return De({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M290.74 93.24l128.02 128.02-277.99 277.99-114.14 12.6C11.35 513.54-1.56 500.62.14 485.34l12.7-114.22 277.9-277.88zm207.2-19.06l-60.11-60.11c-18.75-18.75-49.16-18.75-67.91 0l-56.55 56.55 128.02 128.02 56.55-56.55c18.75-18.76 18.75-49.16 0-67.91z"}}]})(e)}function fA(e){return De({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M424.4 214.7L72.4 6.6C43.8-10.3 0 6.1 0 47.9V464c0 37.5 40.7 60.1 72.4 41.3l352-208c31.4-18.5 31.5-64.1 0-82.6z"}}]})(e)}function oM(e){return De({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M256 8C119 8 8 119 8 256s111 248 248 248 248-111 248-248S393 8 256 8zm144 276c0 6.6-5.4 12-12 12h-92v92c0 6.6-5.4 12-12 12h-56c-6.6 0-12-5.4-12-12v-92h-92c-6.6 0-12-5.4-12-12v-56c0-6.6 5.4-12 12-12h92v-92c0-6.6 5.4-12 12-12h56c6.6 0 12 5.4 12 12v92h92c6.6 0 12 5.4 12 12v56z"}}]})(e)}function uu(e){return De({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M416 208H272V64c0-17.67-14.33-32-32-32h-32c-17.67 0-32 14.33-32 32v144H32c-17.67 0-32 14.33-32 32v32c0 17.67 14.33 32 32 32h144v144c0 17.67 14.33 32 32 32h32c17.67 0 32-14.33 32-32V304h144c17.67 0 32-14.33 32-32v-32c0-17.67-14.33-32-32-32z"}}]})(e)}function dA(e){return De({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M433.941 129.941l-83.882-83.882A48 48 0 0 0 316.118 32H48C21.49 32 0 53.49 0 80v352c0 26.51 21.49 48 48 48h352c26.51 0 48-21.49 48-48V163.882a48 48 0 0 0-14.059-33.941zM224 416c-35.346 0-64-28.654-64-64 0-35.346 28.654-64 64-64s64 28.654 64 64c0 35.346-28.654 64-64 64zm96-304.52V212c0 6.627-5.373 12-12 12H76c-6.627 0-12-5.373-12-12V108c0-6.627 5.373-12 12-12h228.52c3.183 0 6.235 1.264 8.485 3.515l3.48 3.48A11.996 11.996 0 0 1 320 111.48z"}}]})(e)}function sM(e){return De({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M505 442.7L405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9 0 208 0S0 93.1 0 208s93.1 208 208 208c48.3 0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9 0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7 0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7 0 128 57.2 128 128 0 70.7-57.2 128-128 128z"}}]})(e)}function aM(e){return De({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M304 48c0 26.51-21.49 48-48 48s-48-21.49-48-48 21.49-48 48-48 48 21.49 48 48zm-48 368c-26.51 0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48-21.49-48-48-48zm208-208c-26.51 0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48-21.49-48-48-48zM96 256c0-26.51-21.49-48-48-48S0 229.49 0 256s21.49 48 48 48 48-21.49 48-48zm12.922 99.078c-26.51 0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48c0-26.509-21.491-48-48-48zm294.156 0c-26.51 0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48c0-26.509-21.49-48-48-48zM108.922 60.922c-26.51 0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48-21.491-48-48-48z"}}]})(e)}function pA(e){return De({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M64 468V44c0-6.6 5.4-12 12-12h48c6.6 0 12 5.4 12 12v176.4l195.5-181C352.1 22.3 384 36.6 384 64v384c0 27.4-31.9 41.7-52.5 24.6L136 292.7V468c0 6.6-5.4 12-12 12H76c-6.6 0-12-5.4-12-12z"}}]})(e)}function mA(e){return De({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M384 44v424c0 6.6-5.4 12-12 12h-48c-6.6 0-12-5.4-12-12V291.6l-195.5 181C95.9 489.7 64 475.4 64 448V64c0-27.4 31.9-41.7 52.5-24.6L312 219.3V44c0-6.6 5.4-12 12-12h48c6.6 0 12 5.4 12 12z"}}]})(e)}function vA(e){return De({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M400 32H48C21.5 32 0 53.5 0 80v352c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V80c0-26.5-21.5-48-48-48z"}}]})(e)}function gA(e){return De({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M370.72 133.28C339.458 104.008 298.888 87.962 255.848 88c-77.458.068-144.328 53.178-162.791 126.85-1.344 5.363-6.122 9.15-11.651 9.15H24.103c-7.498 0-13.194-6.807-11.807-14.176C33.933 94.924 134.813 8 256 8c66.448 0 126.791 26.136 171.315 68.685L463.03 40.97C478.149 25.851 504 36.559 504 57.941V192c0 13.255-10.745 24-24 24H345.941c-21.382 0-32.09-25.851-16.971-40.971l41.75-41.749zM32 296h134.059c21.382 0 32.09 25.851 16.971 40.971l-41.75 41.75c31.262 29.273 71.835 45.319 114.876 45.28 77.418-.07 144.315-53.144 162.787-126.849 1.344-5.363 6.122-9.15 11.651-9.15h57.304c7.498 0 13.194 6.807 11.807 14.176C478.067 417.076 377.187 504 256 504c-66.448 0-126.791-26.136-171.315-68.685L48.97 471.03C33.851 486.149 8 475.441 8 454.059V320c0-13.255 10.745-24 24-24z"}}]})(e)}function lM(e){return De({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M256 8C119 8 8 119 8 256s111 248 248 248 248-111 248-248S393 8 256 8zm121.6 313.1c4.7 4.7 4.7 12.3 0 17L338 377.6c-4.7 4.7-12.3 4.7-17 0L256 312l-65.1 65.6c-4.7 4.7-12.3 4.7-17 0L134.4 338c-4.7-4.7-4.7-12.3 0-17l65.6-65-65.6-65.1c-4.7-4.7-4.7-12.3 0-17l39.6-39.6c4.7-4.7 12.3-4.7 17 0l65 65.7 65.1-65.6c4.7-4.7 12.3-4.7 17 0l39.6 39.6c4.7 4.7 4.7 12.3 0 17L312 256l65.6 65.1z"}}]})(e)}function eo(e){return De({tag:"svg",attr:{viewBox:"0 0 352 512"},child:[{tag:"path",attr:{d:"M242.72 256l100.07-100.07c12.28-12.28 12.28-32.19 0-44.48l-22.24-22.24c-12.28-12.28-32.19-12.28-44.48 0L176 189.28 75.93 89.21c-12.28-12.28-32.19-12.28-44.48 0L9.21 111.45c-12.28 12.28-12.28 32.19 0 44.48L109.28 256 9.21 356.07c-12.28 12.28-12.28 32.19 0 44.48l22.24 22.24c12.28 12.28 32.2 12.28 44.48 0L176 322.72l100.07 100.07c12.28 12.28 32.2 12.28 44.48 0l22.24-22.24c12.28-12.28 12.28-32.19 0-44.48L242.72 256z"}}]})(e)}function uM(e){return De({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M501.1 395.7L384 278.6c-23.1-23.1-57.6-27.6-85.4-13.9L192 158.1V96L64 0 0 64l96 128h62.1l106.6 106.6c-13.6 27.8-9.2 62.3 13.9 85.4l117.1 117.1c14.6 14.6 38.2 14.6 52.7 0l52.7-52.7c14.5-14.6 14.5-38.2 0-52.7zM331.7 225c28.3 0 54.9 11 74.9 31l19.4 19.4c15.8-6.9 30.8-16.5 43.8-29.5 37.1-37.1 49.7-89.3 37.9-136.7-2.2-9-13.5-12.1-20.1-5.5l-74.4 74.4-67.9-11.3L334 98.9l74.4-74.4c6.6-6.6 3.4-17.9-5.7-20.2-47.4-11.7-99.6.9-136.6 37.9-28.5 28.5-41.9 66.1-41.2 103.6l82.1 82.1c8.1-1.9 16.5-2.9 24.7-2.9zm-103.9 82l-56.7-56.7L18.7 402.8c-25 25-25 65.5 0 90.5s65.5 25 90.5 0l123.6-123.6c-7.6-19.9-9.9-41.6-5-62.7zM64 472c-13.2 0-24-10.8-24-24 0-13.3 10.7-24 24-24s24 10.7 24 24c0 13.2-10.7 24-24 24z"}}]})(e)}function to(e){return De({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M432 32H312l-9.4-18.7A24 24 0 0 0 281.1 0H166.8a23.72 23.72 0 0 0-21.4 13.3L136 32H16A16 16 0 0 0 0 48v32a16 16 0 0 0 16 16h416a16 16 0 0 0 16-16V48a16 16 0 0 0-16-16zM53.2 467a48 48 0 0 0 47.9 45h245.8a48 48 0 0 0 47.9-45L416 128H32z"}}]})(e)}function fy(e){return De({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M215.03 71.05L126.06 160H24c-13.26 0-24 10.74-24 24v144c0 13.25 10.74 24 24 24h102.06l88.97 88.95c15.03 15.03 40.97 4.47 40.97-16.97V88.02c0-21.46-25.96-31.98-40.97-16.97zM461.64 256l45.64-45.64c6.3-6.3 6.3-16.52 0-22.82l-22.82-22.82c-6.3-6.3-16.52-6.3-22.82 0L416 210.36l-45.64-45.64c-6.3-6.3-16.52-6.3-22.82 0l-22.82 22.82c-6.3 6.3-6.3 16.52 0 22.82L370.36 256l-45.63 45.63c-6.3 6.3-6.3 16.52 0 22.82l22.82 22.82c6.3 6.3 16.52 6.3 22.82 0L416 301.64l45.64 45.64c6.3 6.3 16.52 6.3 22.82 0l22.82-22.82c6.3-6.3 6.3-16.52 0-22.82L461.64 256z"}}]})(e)}function yA(e){return De({tag:"svg",attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M215.03 71.05L126.06 160H24c-13.26 0-24 10.74-24 24v144c0 13.25 10.74 24 24 24h102.06l88.97 88.95c15.03 15.03 40.97 4.47 40.97-16.97V88.02c0-21.46-25.96-31.98-40.97-16.97zm233.32-51.08c-11.17-7.33-26.18-4.24-33.51 6.95-7.34 11.17-4.22 26.18 6.95 33.51 66.27 43.49 105.82 116.6 105.82 195.58 0 78.98-39.55 152.09-105.82 195.58-11.17 7.32-14.29 22.34-6.95 33.5 7.04 10.71 21.93 14.56 33.51 6.95C528.27 439.58 576 351.33 576 256S528.27 72.43 448.35 19.97zM480 256c0-63.53-32.06-121.94-85.77-156.24-11.19-7.14-26.03-3.82-33.12 7.46s-3.78 26.21 7.41 33.36C408.27 165.97 432 209.11 432 256s-23.73 90.03-63.48 115.42c-11.19 7.14-14.5 22.07-7.41 33.36 6.51 10.36 21.12 15.14 33.12 7.46C447.94 377.94 480 319.54 480 256zm-141.77-76.87c-11.58-6.33-26.19-2.16-32.61 9.45-6.39 11.61-2.16 26.2 9.45 32.61C327.98 228.28 336 241.63 336 256c0 14.38-8.02 27.72-20.92 34.81-11.61 6.41-15.84 21-9.45 32.61 6.43 11.66 21.05 15.8 32.61 9.45 28.23-15.55 45.77-45 45.77-76.88s-17.54-61.32-45.78-76.86z"}}]})(e)}function _A(e){return De({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M256 8C119 8 8 119 8 256s111 248 248 248 248-111 248-248S393 8 256 8zm0 448c-110.5 0-200-89.5-200-200S145.5 56 256 56s200 89.5 200 200-89.5 200-200 200z"}}]})(e)}function cM(e){return De({tag:"svg",attr:{fill:"currentColor",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M4.646 1.646a.5.5 0 0 1 .708 0l6 6a.5.5 0 0 1 0 .708l-6 6a.5.5 0 0 1-.708-.708L10.293 8 4.646 2.354a.5.5 0 0 1 0-.708z"}}]})(e)}function hM(e){return De({tag:"svg",attr:{fill:"currentColor",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M8 12a1 1 0 1 0 0-2 1 1 0 0 0 0 2z"}},{tag:"path",attr:{d:"M4 0a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2H4zm1 2h6a1 1 0 0 1 1 1v2.5a1 1 0 0 1-1 1H5a1 1 0 0 1-1-1V3a1 1 0 0 1 1-1zm3 12a3 3 0 1 1 0-6 3 3 0 0 1 0 6z"}}]})(e)}function BE(e){return De({tag:"svg",attr:{fill:"currentColor",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M7.022 1.566a1.13 1.13 0 0 1 1.96 0l6.857 11.667c.457.778-.092 1.767-.98 1.767H1.144c-.889 0-1.437-.99-.98-1.767L7.022 1.566z"}}]})(e)}var Wn={exports:{}};Wn.exports=X3;Wn.exports.isMobile=X3;Wn.exports.default=X3;const fM=/(android|bb\d+|meego).+mobile|armv7l|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series[46]0|samsungbrowser|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i,dM=/CrOS/,pM=/android|ipad|playbook|silk/i;function X3(e){e||(e={});let t=e.ua;if(!t&&typeof navigator<"u"&&(t=navigator.userAgent),t&&t.headers&&typeof t.headers["user-agent"]=="string"&&(t=t.headers["user-agent"]),typeof t!="string")return!1;let r=fM.test(t)&&!dM.test(t)||!!e.tablet&&pM.test(t);return!r&&e.tablet&&e.featureDetect&&navigator&&navigator.maxTouchPoints>1&&t.indexOf("Macintosh")!==-1&&t.indexOf("Safari")!==-1&&(r=!0),r}const Ae="Sky",ks="3.1";console.log(`${Ae}-V${ks}`);const mM=`
        Added aurora (Sky)
        Added switch/playstation layouts (Sky)
        Added backup warnings
        Added tranparency to themes
        Bug fixes and improvement
    `.trim(),vM="https://raw.githubusercontent.com/Specy/genshin-music/main/public/updates.json",i0=window==null?void 0:window.__TAURI__,W3=!!i0,Gs={noteComposer:"note-composer-sky",note:"note-sky",noteAnimation:"note-animation-sky",approachCircle:"approach-circle-sky",noteName:"note-name-sky"},Mr=new(window.AudioContext||window.webkitAudioContext),vt={text:{light:"#edeae5",dark:"#151414",note:"#212121"}},Bb=!!navigator.requestMIDIAccess,Ar=["Piano","Contrabass","Guitar","LightGuitar","Harp","Horn","Trumpet","Pipa","WinterPiano","Xylophone","Flute","Panflute","Ocarina","Aurora","Kalimba","ToyUkulele","Drum","Bells","DunDun","HandPan","SFX_Dance","SFX_BirdCall","SFX_CrabCall","SFX_FishCall","SFX_SpiritMantaCall","SFX_JellyCall","SFX_MantaCall","SFX_MothCall"],Wr=200,Y3=15,bA={Cb:["Cb","Dbb","Db","Ebb","Eb","Fb","Gbb","Gb","Abb","Ab","Bbb","Bb"],C:["C","Db","D","Eb","E","F","Gb","G","Ab","A","Bb","B"],"C#":["C#","D","D#","E","E#","F#","G","G#","A","A#","B","B#"],Db:["Db","Ebb","Eb","Fb","F","Gb","Abb","Ab","Bbb","Bb","Cb","C"],D:["D","Eb","E","F","F#","G","Ab","A","Bb","B","C","C#"],"D#":["D#","E","E#","F#","F##","G#","A","A#","B","B#","C#","C##"],Eb:["Eb","Fb","F","Gb","G","Ab","Bbb","Bb","Cb","C","Db","D"],E:["E","F","F#","G","G#","A","Bb","B","C","C#","D","D#"],"E#":["E#","F#","F##","G#","G##","A#","B","B#","C#","C##","D#","D##"],Fb:["Fb","Gbb","Gb","Abb","Ab","Bbb","Cbb","Cb","Dbb","Db","Ebb","Eb"],F:["F","Gb","G","Ab","A","Bb","Cb","C","Db","D","Eb","E"],"F#":["F#","G","G#","A","A#","B","C","C#","D","D#","E","E#"],Gb:["Gb","Abb","Ab","Bbb","Bb","Cb","Dbb","Db","Ebb","Eb","Fb","F"],G:["G","Ab","A","Bb","B","C","Db","D","Eb","E","F","F#"],"G#":["G#","A","A#","B","B#","C#","D","D#","E","E#","F#","F##"],Ab:["Ab","Bbb","Bb","Cb","C","Db","Ebb","Eb","Fb","F","Gb","G"],A:["A","Bb","B","C","C#","D","Eb","E","F","F#","G","G#"],"A#":["A#","B","B#","C#","C##","D#","E","E#","F#","F##","G#","G##"],Bb:["Bb","Cb","C","Db","D","Eb","Fb","F","Gb","G","Ab","A"],B:["B","C","C#","D","D#","E","F","F#","G","G#","A","A#"],"B#":["B#","C#","C##","D#","D##","E#","F#","F##","G#","G##","A#","A##"],"":["","","","","","","","","","","",""]},Wt={defaultSky:["C","D","E","F","G","A","B","C","D","E","F","G","A","B","C"],defaultGenshin:["C","D","E","F","G","A","B","C","D","E","F","G","A","B","C","D","E","F","G","A","B"],skyBell:["C","D","G","A","C","D","G","A"],skyHandpan:["D","A","C","D","F","G","A","C"],defaultDrums:["C","D","E","F","G","A","B","C"],skySFX6:["","","","","",""],skySFX14:["C#","E","G","A#","C#","E","G","A#","C#","E","G","A#","C#","E"],genshinVintageLyre:["C","Db","Eb","F","G","Ab","Bb","C","D","Eb","F","G","A","Bb","C","D","Eb","F","G","A","Bb"]};Object.freeze(bA);Object.freeze(Wt);const Zt={defaultGenshin:{keyboardLayout:"Q W E R T Y U A S D F G H J Z X C V B N M".split(" "),mobileLayout:"do re mi fa so la ti do re mi fa so la ti do re mi fa so la ti".split(" "),abcLayout:"A1 A2 A3 A4 A5 A6 A7 B1 B2 B3 B4 B5 B6 B7 C1 C2 C3 C4 C5 C6 C7".split(" "),playstationLayout:new Array(21).fill(" "),switchLayout:new Array(21).fill(" ")},defaultDrums:{keyboardLayout:"Q W E R A S D F".split(" "),mobileLayout:"do re mi fa do re mi fa".split(" "),abcLayout:"A1 A2 A3 A4 B1 B2 B3 B4".split(" "),playstationLayout:"\u27F0 \u25B2 \u2B45 \u25FC \u27F1 X L2 R2".split(" "),switchLayout:"\u27F0 X \u2B45 Y \u27F1 B Zl Zr".split(" ")},defaultSky:{keyboardLayout:"Q W E R T A S D F G Z X C V B".split(" "),mobileLayout:"do re mi fa so do re mi fa so do re mi fa so".split(" "),abcLayout:"A1 A2 A3 A4 A5 B1 B2 B3 B4 B5 C1 C2 C3 C4 C5".split(" "),playstationLayout:"L2 R2 \u27F1 X \u2B45 \u25FC \u27F0 \u25B2 \u2B46 \u2B24 L1 R1 \u2770L \u2770R L\u2771".split(" "),switchLayout:"Zl Zr \u27F1 B \u2B45 Y \u27F0 X \u2B46 A L R \u2770L \u2770R L\u2771".split(" ")},skySFX6:{keyboardLayout:"Q W E A S D".split(" "),mobileLayout:"do re mi do re mi".split(" "),abcLayout:"A1 A2 A3 B1 B2 B3".split(" "),playstationLayout:"\u27F0 \u25B2 \u2B45 \u27F1 X L2".split(" "),switchLayout:"Zl Zr \u27F1 Y \u27F0 X".split(" ")}},Jt={defaultSky:"dmcr dm cr dm cr cr dm dmcr dm cr cr dm cr dm dmcr".split(" "),defaultSkyDrums:"cr dm cr dm cr dm cr dm".split(" "),defaultGenshinDrums:"do re mi fa do re mi fa".split(" "),skySFX6:"cr dm cr cr dm cr".split(" "),defaultGenshin:"do re mi fa so la ti do re mi fa so la ti do re mi fa so la ti".split(" "),genshinVintageLyre:"do reb mib fa so lab tib do re mib fa so la tib do re mib fa so la tib".split(" ")},dy=["Note name","Keyboard layout","ABC","No Text","Playstation","Switch"],Rl={notes:15,family:"percussive",midiName:"synth drum",baseNotes:Wt.defaultSky,layout:Zt.defaultSky,icons:Jt.defaultSky},gM={Lyre:{notes:21,family:"strings",midiName:"pizzicato strings",baseNotes:Wt.defaultGenshin,layout:Zt.defaultGenshin,icons:Jt.defaultGenshin},Zither:{notes:21,fill:"#cdb68e",family:"strings",midiName:"pizzicato strings",clickColor:"#ddcba8",baseNotes:Wt.defaultGenshin,layout:Zt.defaultGenshin,icons:Jt.defaultGenshin},"Vintage-Lyre":{notes:21,family:"strings",midiName:"pizzicato strings",fill:"#7FB363",clickColor:"#7FB363",baseNotes:Wt.genshinVintageLyre,layout:Zt.defaultGenshin,icons:Jt.genshinVintageLyre},"Old-Zither":{notes:21,fill:"#cdb68e",family:"strings",midiName:"pizzicato strings",clickColor:"#ddcba8",baseNotes:Wt.defaultGenshin,layout:Zt.defaultGenshin,icons:Jt.defaultGenshin},DunDun:{notes:8,family:"percussive",midiName:"synth drum",baseNotes:Wt.defaultDrums,layout:Zt.defaultDrums,icons:Jt.defaultSkyDrums},SFX_Dance:{notes:6,family:"percussive",midiName:"synth drum",baseNotes:Wt.skySFX6,layout:Zt.skySFX6,icons:Jt.skySFX6},SFX_BirdCall:Rl,SFX_CrabCall:Rl,SFX_FishCall:Rl,SFX_SpiritMantaCall:Rl,SFX_JellyCall:Rl,SFX_MantaCall:Rl,SFX_MothCall:Rl,Panflute:{notes:15,family:"pipe",midiName:"pan flute",baseNotes:Wt.defaultSky,layout:Zt.defaultSky,icons:Jt.defaultSky},LightGuitar:{notes:15,family:"guitar",midiName:"electric guitar (clean)",baseNotes:Wt.defaultSky,layout:Zt.defaultSky,icons:Jt.defaultSky},Bells:{notes:8,family:"chromatic percussion",midiName:"tubular bells",baseNotes:Wt.skyBell,layout:Zt.defaultDrums,icons:Jt.defaultSkyDrums},Trumpet:{notes:15,family:"brass",midiName:"trumpet",baseNotes:Wt.defaultSky,layout:Zt.defaultSky,icons:Jt.defaultSky},Aurora:{notes:15,family:"vocal",midiName:"voice oohs",baseNotes:Wt.defaultSky,layout:Zt.defaultSky,icons:Jt.defaultSky},Aurora_Short:{notes:15,family:"vocal",midiName:"voice oohs",baseNotes:Wt.defaultSky,layout:Zt.defaultSky,icons:Jt.defaultSky},Contrabass:{notes:15,family:"guitar",midiName:"contrabass",baseNotes:Wt.defaultSky,layout:Zt.defaultSky,icons:Jt.defaultSky},Drum:{notes:8,family:"percussive",midiName:"synth drum",baseNotes:Wt.defaultDrums,layout:Zt.defaultDrums,icons:Jt.defaultSkyDrums},Flute:{notes:15,family:"pipe",midiName:"flute",baseNotes:Wt.defaultSky,layout:Zt.defaultSky,icons:Jt.defaultSky},Guitar:{notes:15,family:"guitar",midiName:"acoustic guitar (steel)",baseNotes:Wt.defaultSky,layout:Zt.defaultSky,icons:Jt.defaultSky},HandPan:{notes:8,family:"percussive",midiName:"steel drums",baseNotes:Wt.skyHandpan,layout:Zt.defaultDrums,icons:Jt.defaultSkyDrums},ToyUkulele:{notes:15,family:"guitar",midiName:"acoustic guitar (nylon)",baseNotes:Wt.defaultSky,layout:Zt.defaultSky,icons:Jt.defaultSky},Harp:{notes:15,family:"strings",midiName:"orchestral harp",baseNotes:Wt.defaultSky,layout:Zt.defaultSky,icons:Jt.defaultSky},Horn:{notes:15,family:"brass",midiName:"tuba",baseNotes:Wt.defaultSky,layout:Zt.defaultSky,icons:Jt.defaultSky},Piano:{notes:15,family:"piano",midiName:"acoustic grand piano",baseNotes:Wt.defaultSky,layout:Zt.defaultSky,icons:Jt.defaultSky},Pipa:{notes:15,family:"reed",midiName:"oboe",baseNotes:Wt.defaultSky,layout:Zt.defaultSky,icons:Jt.defaultSky},Kalimba:{notes:15,family:"piano",midiName:"bright acoustic piano",baseNotes:Wt.defaultSky,layout:Zt.defaultSky,icons:Jt.defaultSky},WinterPiano:{notes:15,family:"piano",midiName:"bright acoustic piano",baseNotes:Wt.defaultSky,layout:Zt.defaultSky,icons:Jt.defaultSky},Xylophone:{notes:15,family:"chromatic percussion",midiName:"xylophone",baseNotes:Wt.defaultSky,layout:Zt.defaultSky,icons:Jt.defaultSky},Ocarina:{notes:15,family:"pipe",midiName:"pan flute",baseNotes:Wt.defaultSky,layout:Zt.defaultSky,icons:Jt.defaultSky}},tl=gM,Db=[.25,.5,.75,1,1.25,1.5,2].map(e=>({name:`x${e}`,value:e})),oo=["C","Db","D","Eb","E","F","Gb","G","Ab","A","Bb","B"],yM=new Map(oo.map((e,t)=>[e,t])),Gb=[15,16,17,18,19,20,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14].reverse(),py=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14],_M={noteData:{background:"#d3bd8e",border:"#de6b45",center:"#de6b45"},horizontalLineBreak:Y3/3,standards:[{color:5332079},{color:4739939},{color:1742475},{color:14053935}],layersCombination:new Array(16).fill(0).map((e,t)=>t),breakpoints:[{type:"short",color:"#282875"},{type:"long",color:"#282875"}]},rl=[{id:0,text:"1",changer:1,color:5332079},{id:1,text:"1/2",changer:1/2,color:5338451},{id:2,text:"1/4",changer:1/4,color:4410493},{id:3,text:"1/8",changer:1/8,color:7818605}];function eg(){return JSON.parse((sessionStorage==null?void 0:sessionStorage.getItem("isTwa"))||"null")}const cu=Wn.exports(),bM=[2,1.75,1.5,1.25,1,.75,.5,.25],wA=new Map(Object.entries({60:[0,!1],61:[0,!0],62:[1,!1],63:[1,!0],64:[2,!1],65:[3,!1],66:[3,!0],67:[4,!1],68:[4,!0],69:[5,!1],70:[5,!0],71:[6,!1],72:[7,!1],73:[7,!0],74:[8,!1],75:[8,!0],76:[9,!1],77:[10,!1],78:[10,!0],79:[11,!1],80:[11,!0],81:[12,!1],82:[12,!0],83:[13,!1],84:[14,!1]})),cd={4:["A","S","G","H"],6:["A","S","D","G","H","J"]},Na={amazing:"#cff3e3",perfect:"#d9af0a",great:"#358a55 ",good:"#380cc4",bad:"#dd8d46",miss:"#f24b5b","":"#ffffff"},wM=["alphabetical","date-created"],qm={upper:84,lower:60},xM=[.5,0],o0=[.5,1],TM=Object.entries(Object.fromEntries(wA)).filter(([e,t])=>t[1]===!1),SM=new Map(TM.map(([e,t])=>[t[0],Number(e)])),EM=new DOMRect;function Ot(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];throw new Error(typeof e=="number"?"[MobX] minified error nr: "+e+(r.length?" "+r.map(String).join(","):"")+". Find the full error at: https://github.com/mobxjs/mobx/blob/main/packages/mobx/src/errors.ts":"[MobX] "+e)}var CM={};function xA(){return typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof Ai<"u"?Ai:typeof self<"u"?self:CM}var IM=Object.assign,tg=Object.getOwnPropertyDescriptor,js=Object.defineProperty,my=Object.prototype,jb=[];Object.freeze(jb);var TA={};Object.freeze(TA);var NM=typeof Proxy<"u",PM=Object.toString();function SA(){NM||Ot("Proxy not available")}function EA(e){var t=!1;return function(){if(!t)return t=!0,e.apply(this,arguments)}}var Ac=function(){};function ro(e){return typeof e=="function"}function hu(e){var t=typeof e;switch(t){case"string":case"symbol":case"number":return!0}return!1}function vy(e){return e!==null&&typeof e=="object"}function nl(e){if(!vy(e))return!1;var t=Object.getPrototypeOf(e);if(t==null)return!0;var r=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return typeof r=="function"&&r.toString()===PM}function CA(e){var t=e==null?void 0:e.constructor;return t?t.name==="GeneratorFunction"||t.displayName==="GeneratorFunction":!1}function gy(e,t,r){js(e,t,{enumerable:!1,writable:!0,configurable:!0,value:r})}function IA(e,t,r){js(e,t,{enumerable:!1,writable:!1,configurable:!0,value:r})}function Iu(e,t){var r="isMobX"+e;return t.prototype[r]=!0,function(n){return vy(n)&&n[r]===!0}}function Ch(e){return e instanceof Map}function bp(e){return e instanceof Set}var NA=typeof Object.getOwnPropertySymbols<"u";function AM(e){var t=Object.keys(e);if(!NA)return t;var r=Object.getOwnPropertySymbols(e);return r.length?[].concat(t,r.filter(function(n){return my.propertyIsEnumerable.call(e,n)})):t}var yy=typeof Reflect<"u"&&Reflect.ownKeys?Reflect.ownKeys:NA?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Object.getOwnPropertyNames;function PA(e){return e===null?null:typeof e=="object"?""+e:e}function $s(e,t){return my.hasOwnProperty.call(e,t)}var RM=Object.getOwnPropertyDescriptors||function(t){var r={};return yy(t).forEach(function(n){r[n]=tg(t,n)}),r};function DE(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function K3(e,t,r){return t&&DE(e.prototype,t),r&&DE(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function lh(){return lh=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},lh.apply(this,arguments)}function AA(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,$b(e,t)}function $b(e,t){return $b=Object.setPrototypeOf||function(n,i){return n.__proto__=i,n},$b(e,t)}function GE(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function kM(e,t){if(!!e){if(typeof e=="string")return jE(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return jE(e,t)}}function jE(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Rc(e,t){var r=typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r)return(r=r.call(e)).next.bind(r);if(Array.isArray(e)||(r=kM(e))||t&&e&&typeof e.length=="number"){r&&(e=r);var n=0;return function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var Wo=Symbol("mobx-stored-annotations");function Qo(e){function t(r,n){wp(r,n,e)}return Object.assign(t,e)}function wp(e,t,r){$s(e,Wo)||gy(e,Wo,lh({},e[Wo])),jM(r)||(e[Wo][t]=r)}function OM(e){return $s(e,Wo)||gy(e,Wo,lh({},e[Wo])),e[Wo]}var ct=Symbol("mobx administration"),xp=function(){function e(r){r===void 0&&(r="Atom"),this.name_=void 0,this.isPendingUnobservation_=!1,this.isBeingObserved_=!1,this.observers_=new Set,this.diffValue_=0,this.lastAccessedBy_=0,this.lowestObserverState_=kt.NOT_TRACKING_,this.onBOL=void 0,this.onBUOL=void 0,this.name_=r}var t=e.prototype;return t.onBO=function(){this.onBOL&&this.onBOL.forEach(function(n){return n()})},t.onBUO=function(){this.onBUOL&&this.onBUOL.forEach(function(n){return n()})},t.reportObserved=function(){return KA(this)},t.reportChanged=function(){Si(),qA(this),Ei()},t.toString=function(){return this.name_},e}(),q3=Iu("Atom",xp);function RA(e,t,r){t===void 0&&(t=Ac),r===void 0&&(r=Ac);var n=new xp(e);return t!==Ac&&GB(n,t),r!==Ac&&nR(n,r),n}function LM(e,t){return e===t}function UM(e,t){return r4(e,t)}function FM(e,t){return r4(e,t,1)}function MM(e,t){return Object.is?Object.is(e,t):e===t?e!==0||1/e===1/t:e!==e&&t!==t}var rg={identity:LM,structural:UM,default:MM,shallow:FM};function uh(e,t,r){return sR(e)?e:Array.isArray(e)?yt.array(e,{name:r}):nl(e)?yt.object(e,void 0,{name:r}):Ch(e)?yt.map(e,{name:r}):bp(e)?yt.set(e,{name:r}):typeof e=="function"&&!Q3(e)&&!sg(e)?CA(e)?Md(e):Fd(r,e):e}function BM(e,t,r){if(e==null||Bd(e)||Ty(e)||Nu(e)||Nh(e))return e;if(Array.isArray(e))return yt.array(e,{name:r,deep:!1});if(nl(e))return yt.object(e,void 0,{name:r,deep:!1});if(Ch(e))return yt.map(e,{name:r,deep:!1});if(bp(e))return yt.set(e,{name:r,deep:!1})}function _y(e){return e}function DM(e,t){return r4(e,t)?t:e}var GM="override";function jM(e){return e.annotationType_===GM}function Tp(e,t){return{annotationType_:e,options_:t,make_:$M,extend_:HM}}function $M(e,t,r,n){var i;if((i=this.options_)!=null&&i.bound)return this.extend_(e,t,r,!1)===null?0:1;if(n===e.target_)return this.extend_(e,t,r,!1)===null?0:2;if(Q3(r.value))return 1;var o=kA(e,this,t,r,!1);return js(n,t,o),2}function HM(e,t,r,n){var i=kA(e,this,t,r);return e.defineProperty_(t,i,n)}function zM(e,t,r,n){t.annotationType_,n.value}function kA(e,t,r,n,i){var o,s,a,l,u,c,f;i===void 0&&(i=Oe.safeDescriptors),zM(e,t,r,n);var p=n.value;if((o=t.options_)!=null&&o.bound){var m;p=p.bind((m=e.proxy_)!=null?m:e.target_)}return{value:ch((s=(a=t.options_)==null?void 0:a.name)!=null?s:r.toString(),p,(l=(u=t.options_)==null?void 0:u.autoAction)!=null?l:!1,(c=t.options_)!=null&&c.bound?(f=e.proxy_)!=null?f:e.target_:void 0),configurable:i?e.isPlainObject_:!0,enumerable:!1,writable:!i}}function OA(e,t){return{annotationType_:e,options_:t,make_:VM,extend_:XM}}function VM(e,t,r,n){var i;if(n===e.target_)return this.extend_(e,t,r,!1)===null?0:2;if((i=this.options_)!=null&&i.bound&&(!$s(e.target_,t)||!sg(e.target_[t]))&&this.extend_(e,t,r,!1)===null)return 0;if(sg(r.value))return 1;var o=LA(e,this,t,r,!1,!1);return js(n,t,o),2}function XM(e,t,r,n){var i,o=LA(e,this,t,r,(i=this.options_)==null?void 0:i.bound);return e.defineProperty_(t,o,n)}function WM(e,t,r,n){t.annotationType_,n.value}function LA(e,t,r,n,i,o){o===void 0&&(o=Oe.safeDescriptors),WM(e,t,r,n);var s=n.value;if(sg(s)||(s=Md(s)),i){var a;s=s.bind((a=e.proxy_)!=null?a:e.target_),s.isMobXFlow=!0}return{value:s,configurable:o?e.isPlainObject_:!0,enumerable:!1,writable:!o}}function Z3(e,t){return{annotationType_:e,options_:t,make_:YM,extend_:KM}}function YM(e,t,r){return this.extend_(e,t,r,!1)===null?0:1}function KM(e,t,r,n){return qM(e,this,t,r),e.defineComputedProperty_(t,lh({},this.options_,{get:r.get,set:r.set}),n)}function qM(e,t,r,n){t.annotationType_,n.get}function by(e,t){return{annotationType_:e,options_:t,make_:ZM,extend_:JM}}function ZM(e,t,r){return this.extend_(e,t,r,!1)===null?0:1}function JM(e,t,r,n){var i,o;return QM(e,this),e.defineObservableProperty_(t,r.value,(i=(o=this.options_)==null?void 0:o.enhancer)!=null?i:uh,n)}function QM(e,t,r,n){t.annotationType_}var eB="true",tB=UA();function UA(e){return{annotationType_:eB,options_:e,make_:rB,extend_:nB}}function rB(e,t,r,n){var i,o;if(r.get)return wy.make_(e,t,r,n);if(r.set){var s=ch(t.toString(),r.set);return n===e.target_?e.defineProperty_(t,{configurable:Oe.safeDescriptors?e.isPlainObject_:!0,set:s})===null?0:2:(js(n,t,{configurable:!0,set:s}),2)}if(n!==e.target_&&typeof r.value=="function"){var a;if(CA(r.value)){var l,u=(l=this.options_)!=null&&l.autoBind?Md.bound:Md;return u.make_(e,t,r,n)}var c=(a=this.options_)!=null&&a.autoBind?Fd.bound:Fd;return c.make_(e,t,r,n)}var f=((i=this.options_)==null?void 0:i.deep)===!1?yt.ref:yt;if(typeof r.value=="function"&&(o=this.options_)!=null&&o.autoBind){var p;r.value=r.value.bind((p=e.proxy_)!=null?p:e.target_)}return f.make_(e,t,r,n)}function nB(e,t,r,n){var i,o;if(r.get)return wy.extend_(e,t,r,n);if(r.set)return e.defineProperty_(t,{configurable:Oe.safeDescriptors?e.isPlainObject_:!0,set:ch(t.toString(),r.set)},n);if(typeof r.value=="function"&&(i=this.options_)!=null&&i.autoBind){var s;r.value=r.value.bind((s=e.proxy_)!=null?s:e.target_)}var a=((o=this.options_)==null?void 0:o.deep)===!1?yt.ref:yt;return a.extend_(e,t,r,n)}var iB="observable",oB="observable.ref",sB="observable.shallow",aB="observable.struct",FA={deep:!0,name:void 0,defaultDecorator:void 0,proxy:!0};Object.freeze(FA);function Zm(e){return e||FA}var MA=by(iB),lB=by(oB,{enhancer:_y}),uB=by(sB,{enhancer:BM}),cB=by(aB,{enhancer:DM}),BA=Qo(MA);function Jm(e){return e.deep===!0?uh:e.deep===!1?_y:fB(e.defaultDecorator)}function hB(e){var t;return e?(t=e.defaultDecorator)!=null?t:UA(e):void 0}function fB(e){var t,r;return e&&(t=(r=e.options_)==null?void 0:r.enhancer)!=null?t:uh}function DA(e,t,r){if(hu(t)){wp(e,t,MA);return}return sR(e)?e:nl(e)?yt.object(e,t,r):Array.isArray(e)?yt.array(e,t):Ch(e)?yt.map(e,t):bp(e)?yt.set(e,t):typeof e=="object"&&e!==null?e:yt.box(e,t)}Object.assign(DA,BA);var dB={box:function(t,r){var n=Zm(r);return new Yc(t,Jm(n),n.name,!0,n.equals)},array:function(t,r){var n=Zm(r);return(Oe.useProxies===!1||n.proxy===!1?lD:QB)(t,Jm(n),n.name)},map:function(t,r){var n=Zm(r);return new cR(t,Jm(n),n.name)},set:function(t,r){var n=Zm(r);return new dR(t,Jm(n),n.name)},object:function(t,r,n){return jB(Oe.useProxies===!1||(n==null?void 0:n.proxy)===!1?Sy({},n):qB({},n),t,r)},ref:Qo(lB),shallow:Qo(uB),deep:BA,struct:Qo(cB)},yt=IM(DA,dB),GA="computed",pB="computed.struct",jA=Z3(GA),mB=Z3(pB,{equals:rg.structural}),wy=function(t,r){if(hu(r))return wp(t,r,jA);if(nl(t))return Qo(Z3(GA,t));var n=nl(r)?r:{};return n.get=t,n.name||(n.name=t.name||""),new Ud(n)};Object.assign(wy,jA);wy.struct=Qo(mB);var $E,HE,ng=0,vB=1,gB=($E=(HE=tg(function(){},"name"))==null?void 0:HE.configurable)!=null?$E:!1,zE={value:"action",configurable:!0,writable:!1,enumerable:!1};function ch(e,t,r,n){r===void 0&&(r=!1);function i(){return yB(e,r,t,n||this,arguments)}return i.isMobxAction=!0,gB&&(zE.value=e,Object.defineProperty(i,"name",zE)),i}function yB(e,t,r,n,i){var o=_B(e,t);try{return r.apply(n,i)}catch(s){throw o.error_=s,s}finally{bB(o)}}function _B(e,t,r,n){var i=!1,o=0,s=Oe.trackingDerivation,a=!t||!s;Si();var l=Oe.allowStateChanges;a&&(Ih(),l=Sp(!0));var u=J3(!0),c={runAsAction_:a,prevDerivation_:s,prevAllowStateChanges_:l,prevAllowStateReads_:u,notifySpy_:i,startTime_:o,actionId_:vB++,parentActionId_:ng};return ng=c.actionId_,c}function bB(e){ng!==e.actionId_&&Ot(30),ng=e.parentActionId_,e.error_!==void 0&&(Oe.suppressReactionErrors=!0),Ep(e.prevAllowStateChanges_),hd(e.prevAllowStateReads_),Ei(),e.runAsAction_&&za(e.prevDerivation_),Oe.suppressReactionErrors=!1}function wB(e,t){var r=Sp(e);try{return t()}finally{Ep(r)}}function Sp(e){var t=Oe.allowStateChanges;return Oe.allowStateChanges=e,t}function Ep(e){Oe.allowStateChanges=e}var $A;$A=Symbol.toPrimitive;var Yc=function(e){AA(t,e);function t(n,i,o,s,a){var l;return o===void 0&&(o="ObservableValue"),a===void 0&&(a=rg.default),l=e.call(this,o)||this,l.enhancer=void 0,l.name_=void 0,l.equals=void 0,l.hasUnreportedChange_=!1,l.interceptors_=void 0,l.changeListeners_=void 0,l.value_=void 0,l.dehancer=void 0,l.enhancer=i,l.name_=o,l.equals=a,l.value_=i(n,void 0,o),l}var r=t.prototype;return r.dehanceValue=function(i){return this.dehancer!==void 0?this.dehancer(i):i},r.set=function(i){this.value_,i=this.prepareNewValue_(i),i!==Oe.UNCHANGED&&this.setNewValue_(i)},r.prepareNewValue_=function(i){if(Vi(this)){var o=Xi(this,{object:this,type:es,newValue:i});if(!o)return Oe.UNCHANGED;i=o.newValue}return i=this.enhancer(i,this.value_,this.name_),this.equals(this.value_,i)?Oe.UNCHANGED:i},r.setNewValue_=function(i){var o=this.value_;this.value_=i,this.reportChanged(),wo(this)&&xo(this,{type:es,object:this,newValue:i,oldValue:o})},r.get=function(){return this.reportObserved(),this.dehanceValue(this.value_)},r.intercept_=function(i){return Cp(this,i)},r.observe_=function(i,o){return o&&i({observableKind:"value",debugObjectName:this.name_,object:this,type:es,newValue:this.value_,oldValue:void 0}),Ip(this,i)},r.raw=function(){return this.value_},r.toJSON=function(){return this.get()},r.toString=function(){return this.name_+"["+this.value_+"]"},r.valueOf=function(){return PA(this.get())},r[$A]=function(){return this.valueOf()},t}(xp),HA;HA=Symbol.toPrimitive;var Ud=function(){function e(r){this.dependenciesState_=kt.NOT_TRACKING_,this.observing_=[],this.newObserving_=null,this.isBeingObserved_=!1,this.isPendingUnobservation_=!1,this.observers_=new Set,this.diffValue_=0,this.runId_=0,this.lastAccessedBy_=0,this.lowestObserverState_=kt.UP_TO_DATE_,this.unboundDepsCount_=0,this.value_=new ig(null),this.name_=void 0,this.triggeredBy_=void 0,this.isComputing_=!1,this.isRunningSetter_=!1,this.derivation=void 0,this.setter_=void 0,this.isTracing_=Ql.NONE,this.scope_=void 0,this.equals_=void 0,this.requiresReaction_=void 0,this.keepAlive_=void 0,this.onBOL=void 0,this.onBUOL=void 0,r.get||Ot(31),this.derivation=r.get,this.name_=r.name||"ComputedValue",r.set&&(this.setter_=ch("ComputedValue-setter",r.set)),this.equals_=r.equals||(r.compareStructural||r.struct?rg.structural:rg.default),this.scope_=r.context,this.requiresReaction_=r.requiresReaction,this.keepAlive_=!!r.keepAlive}var t=e.prototype;return t.onBecomeStale_=function(){EB(this)},t.onBO=function(){this.onBOL&&this.onBOL.forEach(function(n){return n()})},t.onBUO=function(){this.onBUOL&&this.onBUOL.forEach(function(n){return n()})},t.get=function(){if(this.isComputing_&&Ot(32,this.name_,this.derivation),Oe.inBatch===0&&this.observers_.size===0&&!this.keepAlive_)Hb(this)&&(this.warnAboutUntrackedRead_(),Si(),this.value_=this.computeValue_(!1),Ei());else if(KA(this),Hb(this)){var n=Oe.trackingContext;this.keepAlive_&&!n&&(Oe.trackingContext=this),this.trackAndCompute()&&SB(this),Oe.trackingContext=n}var i=this.value_;if(s0(i))throw i.cause;return i},t.set=function(n){if(this.setter_){this.isRunningSetter_&&Ot(33,this.name_),this.isRunningSetter_=!0;try{this.setter_.call(this.scope_,n)}finally{this.isRunningSetter_=!1}}else Ot(34,this.name_)},t.trackAndCompute=function(){var n=this.value_,i=this.dependenciesState_===kt.NOT_TRACKING_,o=this.computeValue_(!0),s=i||s0(n)||s0(o)||!this.equals_(n,o);return s&&(this.value_=o),s},t.computeValue_=function(n){this.isComputing_=!0;var i=Sp(!1),o;if(n)o=zA(this,this.derivation,this.scope_);else if(Oe.disableErrorBoundaries===!0)o=this.derivation.call(this.scope_);else try{o=this.derivation.call(this.scope_)}catch(s){o=new ig(s)}return Ep(i),this.isComputing_=!1,o},t.suspend_=function(){this.keepAlive_||(zb(this),this.value_=void 0)},t.observe_=function(n,i){var o=this,s=!0,a=void 0;return UB(function(){var l=o.get();if(!s||i){var u=Ih();n({observableKind:"computed",debugObjectName:o.name_,type:es,object:o,newValue:l,oldValue:a}),za(u)}s=!1,a=l})},t.warnAboutUntrackedRead_=function(){},t.toString=function(){return this.name_+"["+this.derivation.toString()+"]"},t.valueOf=function(){return PA(this.get())},t[HA]=function(){return this.valueOf()},e}(),xy=Iu("ComputedValue",Ud),kt;(function(e){e[e.NOT_TRACKING_=-1]="NOT_TRACKING_",e[e.UP_TO_DATE_=0]="UP_TO_DATE_",e[e.POSSIBLY_STALE_=1]="POSSIBLY_STALE_",e[e.STALE_=2]="STALE_"})(kt||(kt={}));var Ql;(function(e){e[e.NONE=0]="NONE",e[e.LOG=1]="LOG",e[e.BREAK=2]="BREAK"})(Ql||(Ql={}));var ig=function(t){this.cause=void 0,this.cause=t};function s0(e){return e instanceof ig}function Hb(e){switch(e.dependenciesState_){case kt.UP_TO_DATE_:return!1;case kt.NOT_TRACKING_:case kt.STALE_:return!0;case kt.POSSIBLY_STALE_:{for(var t=J3(!0),r=Ih(),n=e.observing_,i=n.length,o=0;o<i;o++){var s=n[o];if(xy(s)){if(Oe.disableErrorBoundaries)s.get();else try{s.get()}catch{return za(r),hd(t),!0}if(e.dependenciesState_===kt.STALE_)return za(r),hd(t),!0}}return XA(e),za(r),hd(t),!1}}}function zA(e,t,r){var n=J3(!0);XA(e),e.newObserving_=new Array(e.observing_.length+100),e.unboundDepsCount_=0,e.runId_=++Oe.runId;var i=Oe.trackingDerivation;Oe.trackingDerivation=e,Oe.inBatch++;var o;if(Oe.disableErrorBoundaries===!0)o=t.call(r);else try{o=t.call(r)}catch(s){o=new ig(s)}return Oe.inBatch--,Oe.trackingDerivation=i,xB(e),hd(n),o}function xB(e){for(var t=e.observing_,r=e.observing_=e.newObserving_,n=kt.UP_TO_DATE_,i=0,o=e.unboundDepsCount_,s=0;s<o;s++){var a=r[s];a.diffValue_===0&&(a.diffValue_=1,i!==s&&(r[i]=a),i++),a.dependenciesState_>n&&(n=a.dependenciesState_)}for(r.length=i,e.newObserving_=null,o=t.length;o--;){var l=t[o];l.diffValue_===0&&WA(l,e),l.diffValue_=0}for(;i--;){var u=r[i];u.diffValue_===1&&(u.diffValue_=0,TB(u,e))}n!==kt.UP_TO_DATE_&&(e.dependenciesState_=n,e.onBecomeStale_())}function zb(e){var t=e.observing_;e.observing_=[];for(var r=t.length;r--;)WA(t[r],e);e.dependenciesState_=kt.NOT_TRACKING_}function VA(e){var t=Ih();try{return e()}finally{za(t)}}function Ih(){var e=Oe.trackingDerivation;return Oe.trackingDerivation=null,e}function za(e){Oe.trackingDerivation=e}function J3(e){var t=Oe.allowStateReads;return Oe.allowStateReads=e,t}function hd(e){Oe.allowStateReads=e}function XA(e){if(e.dependenciesState_!==kt.UP_TO_DATE_){e.dependenciesState_=kt.UP_TO_DATE_;for(var t=e.observing_,r=t.length;r--;)t[r].lowestObserverState_=kt.UP_TO_DATE_}}var D2=function(){this.version=6,this.UNCHANGED={},this.trackingDerivation=null,this.trackingContext=null,this.runId=0,this.mobxGuid=0,this.inBatch=0,this.pendingUnobservations=[],this.pendingReactions=[],this.isRunningReactions=!1,this.allowStateChanges=!1,this.allowStateReads=!0,this.enforceActions=!0,this.spyListeners=[],this.globalReactionErrorHandlers=[],this.computedRequiresReaction=!1,this.reactionRequiresObservable=!1,this.observableRequiresReaction=!1,this.disableErrorBoundaries=!1,this.suppressReactionErrors=!1,this.useProxies=!0,this.verifyProxies=!1,this.safeDescriptors=!0},G2=!0,Oe=function(){var e=xA();return e.__mobxInstanceCount>0&&!e.__mobxGlobals&&(G2=!1),e.__mobxGlobals&&e.__mobxGlobals.version!==new D2().version&&(G2=!1),G2?e.__mobxGlobals?(e.__mobxInstanceCount+=1,e.__mobxGlobals.UNCHANGED||(e.__mobxGlobals.UNCHANGED={}),e.__mobxGlobals):(e.__mobxInstanceCount=1,e.__mobxGlobals=new D2):(setTimeout(function(){Ot(35)},1),new D2)}();function TB(e,t){e.observers_.add(t),e.lowestObserverState_>t.dependenciesState_&&(e.lowestObserverState_=t.dependenciesState_)}function WA(e,t){e.observers_.delete(t),e.observers_.size===0&&YA(e)}function YA(e){e.isPendingUnobservation_===!1&&(e.isPendingUnobservation_=!0,Oe.pendingUnobservations.push(e))}function Si(){Oe.inBatch++}function Ei(){if(--Oe.inBatch===0){ZA();for(var e=Oe.pendingUnobservations,t=0;t<e.length;t++){var r=e[t];r.isPendingUnobservation_=!1,r.observers_.size===0&&(r.isBeingObserved_&&(r.isBeingObserved_=!1,r.onBUO()),r instanceof Ud&&r.suspend_())}Oe.pendingUnobservations=[]}}function KA(e){var t=Oe.trackingDerivation;return t!==null?(t.runId_!==e.lastAccessedBy_&&(e.lastAccessedBy_=t.runId_,t.newObserving_[t.unboundDepsCount_++]=e,!e.isBeingObserved_&&Oe.trackingContext&&(e.isBeingObserved_=!0,e.onBO())),!0):(e.observers_.size===0&&Oe.inBatch>0&&YA(e),!1)}function qA(e){e.lowestObserverState_!==kt.STALE_&&(e.lowestObserverState_=kt.STALE_,e.observers_.forEach(function(t){t.dependenciesState_===kt.UP_TO_DATE_&&t.onBecomeStale_(),t.dependenciesState_=kt.STALE_}))}function SB(e){e.lowestObserverState_!==kt.STALE_&&(e.lowestObserverState_=kt.STALE_,e.observers_.forEach(function(t){t.dependenciesState_===kt.POSSIBLY_STALE_?t.dependenciesState_=kt.STALE_:t.dependenciesState_===kt.UP_TO_DATE_&&(e.lowestObserverState_=kt.UP_TO_DATE_)}))}function EB(e){e.lowestObserverState_===kt.UP_TO_DATE_&&(e.lowestObserverState_=kt.POSSIBLY_STALE_,e.observers_.forEach(function(t){t.dependenciesState_===kt.UP_TO_DATE_&&(t.dependenciesState_=kt.POSSIBLY_STALE_,t.onBecomeStale_())}))}var Vb=function(){function e(r,n,i,o){r===void 0&&(r="Reaction"),this.name_=void 0,this.onInvalidate_=void 0,this.errorHandler_=void 0,this.requiresObservable_=void 0,this.observing_=[],this.newObserving_=[],this.dependenciesState_=kt.NOT_TRACKING_,this.diffValue_=0,this.runId_=0,this.unboundDepsCount_=0,this.isDisposed_=!1,this.isScheduled_=!1,this.isTrackPending_=!1,this.isRunning_=!1,this.isTracing_=Ql.NONE,this.name_=r,this.onInvalidate_=n,this.errorHandler_=i,this.requiresObservable_=o}var t=e.prototype;return t.onBecomeStale_=function(){this.schedule_()},t.schedule_=function(){this.isScheduled_||(this.isScheduled_=!0,Oe.pendingReactions.push(this),ZA())},t.isScheduled=function(){return this.isScheduled_},t.runReaction_=function(){if(!this.isDisposed_){Si(),this.isScheduled_=!1;var n=Oe.trackingContext;if(Oe.trackingContext=this,Hb(this)){this.isTrackPending_=!0;try{this.onInvalidate_()}catch(i){this.reportExceptionInDerivation_(i)}}Oe.trackingContext=n,Ei()}},t.track=function(n){if(!this.isDisposed_){Si(),this.isRunning_=!0;var i=Oe.trackingContext;Oe.trackingContext=this;var o=zA(this,n,void 0);Oe.trackingContext=i,this.isRunning_=!1,this.isTrackPending_=!1,this.isDisposed_&&zb(this),s0(o)&&this.reportExceptionInDerivation_(o.cause),Ei()}},t.reportExceptionInDerivation_=function(n){var i=this;if(this.errorHandler_){this.errorHandler_(n,this);return}if(Oe.disableErrorBoundaries)throw n;var o="[mobx] uncaught error in '"+this+"'";Oe.suppressReactionErrors||console.error(o,n),Oe.globalReactionErrorHandlers.forEach(function(s){return s(n,i)})},t.dispose=function(){this.isDisposed_||(this.isDisposed_=!0,this.isRunning_||(Si(),zb(this),Ei()))},t.getDisposer_=function(){var n=this.dispose.bind(this);return n[ct]=this,n},t.toString=function(){return"Reaction["+this.name_+"]"},t.trace=function(n){n===void 0&&(n=!1),WB(this,n)},e}(),CB=100,IB=function(t){return t()};function ZA(){Oe.inBatch>0||Oe.isRunningReactions||IB(NB)}function NB(){Oe.isRunningReactions=!0;for(var e=Oe.pendingReactions,t=0;e.length>0;){++t===CB&&(console.error("[mobx] cycle in reaction: "+e[0]),e.splice(0));for(var r=e.splice(0),n=0,i=r.length;n<i;n++)r[n].runReaction_()}Oe.isRunningReactions=!1}var og=Iu("Reaction",Vb);function fd(){return!1}function PB(e){return console.warn("[mobx.spy] Is a no-op in production builds"),function(){}}var JA="action",AB="action.bound",QA="autoAction",RB="autoAction.bound",kB="<unnamed action>",eR=Tp(JA),OB=Tp(AB,{bound:!0}),tR=Tp(QA,{autoAction:!0}),LB=Tp(RB,{autoAction:!0,bound:!0});function rR(e){var t=function(n,i){if(ro(n))return ch(n.name||kB,n,e);if(ro(i))return ch(n,i,e);if(hu(i))return wp(n,i,e?tR:eR);if(hu(n))return Qo(Tp(e?QA:JA,{name:n,autoAction:e}))};return t}var _o=rR(!1);Object.assign(_o,eR);var Fd=rR(!0);Object.assign(Fd,tR);_o.bound=Qo(OB);Fd.bound=Qo(LB);function Q3(e){return ro(e)&&e.isMobxAction===!0}function UB(e,t){var r,n;t===void 0&&(t=TA);var i=(r=(n=t)==null?void 0:n.name)!=null?r:"Autorun",o=!t.scheduler&&!t.delay,s;if(o)s=new Vb(i,function(){this.track(u)},t.onError,t.requiresObservable);else{var a=MB(t),l=!1;s=new Vb(i,function(){l||(l=!0,a(function(){l=!1,s.isDisposed_||s.track(u)}))},t.onError,t.requiresObservable)}function u(){e(s)}return s.schedule_(),s.getDisposer_()}var FB=function(t){return t()};function MB(e){return e.scheduler?e.scheduler:e.delay?function(t){return setTimeout(t,e.delay)}:FB}var BB="onBO",DB="onBUO";function GB(e,t,r){return iR(BB,e,t,r)}function nR(e,t,r){return iR(DB,e,t,r)}function iR(e,t,r,n){var i=typeof n=="function"?fu(t,r):fu(t),o=ro(n)?n:r,s=e+"L";return i[s]?i[s].add(o):i[s]=new Set([o]),function(){var a=i[s];a&&(a.delete(o),a.size===0&&delete i[s])}}function jB(e,t,r,n){var i=RM(t),o=Sy(e,n)[ct];Si();try{yy(i).forEach(function(s){o.extend_(s,i[s],r&&s in r?r[s]:!0)})}finally{Ei()}return e}var $B=0;function oR(){this.message="FLOW_CANCELLED"}oR.prototype=Object.create(Error.prototype);var VE=OA("flow"),HB=OA("flow.bound",{bound:!0}),Md=Object.assign(function(t,r){if(hu(r))return wp(t,r,VE);var n=t,i=n.name||"<unnamed flow>",o=function(){var a=this,l=arguments,u=++$B,c=_o(i+" - runid: "+u+" - init",n).apply(a,l),f,p=void 0,m=new Promise(function(g,b){var y=0;f=b;function w(I){p=void 0;var R;try{R=_o(i+" - runid: "+u+" - yield "+y++,c.next).call(c,I)}catch(S){return b(S)}T(R)}function x(I){p=void 0;var R;try{R=_o(i+" - runid: "+u+" - yield "+y++,c.throw).call(c,I)}catch(S){return b(S)}T(R)}function T(I){if(ro(I==null?void 0:I.then)){I.then(T,b);return}return I.done?g(I.value):(p=Promise.resolve(I.value),p.then(w,x))}w(void 0)});return m.cancel=_o(i+" - runid: "+u+" - cancel",function(){try{p&&XE(p);var g=c.return(void 0),b=Promise.resolve(g.value);b.then(Ac,Ac),XE(b),f(new oR)}catch(y){f(y)}}),m};return o.isMobXFlow=!0,o},VE);Md.bound=Qo(HB);function XE(e){ro(e.cancel)&&e.cancel()}function sg(e){return(e==null?void 0:e.isMobXFlow)===!0}function zB(e,t){return e?t!==void 0?Bd(e)?e[ct].values_.has(t):!1:Bd(e)||!!e[ct]||q3(e)||og(e)||xy(e):!1}function sR(e){return zB(e)}function Hn(e,t,r,n){return ro(r)?XB(e,t,r,n):VB(e,t,r)}function VB(e,t,r){return Ey(e).observe_(t,r)}function XB(e,t,r,n){return Ey(e,t).observe_(r,n)}function WB(){Ot("trace() is not available in production builds");for(var e=!1,t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];typeof r[r.length-1]=="boolean"&&(e=r.pop());var i=YB(r);if(!i)return Ot("'trace(break?)' can only be used inside a tracked computed value or a Reaction. Consider passing in the computed value or reaction explicitly");i.isTracing_===Ql.NONE&&console.log("[mobx.trace] '"+i.name_+"' tracing enabled"),i.isTracing_=e?Ql.BREAK:Ql.LOG}function YB(e){switch(e.length){case 0:return Oe.trackingDerivation;case 1:return fu(e[0]);case 2:return fu(e[0],e[1])}}function Os(e,t){t===void 0&&(t=void 0),Si();try{return e.apply(t)}finally{Ei()}}function ic(e){return e[ct]}var KB={has:function(t,r){return ic(t).has_(r)},get:function(t,r){return ic(t).get_(r)},set:function(t,r,n){var i;return hu(r)?(i=ic(t).set_(r,n,!0))!=null?i:!0:!1},deleteProperty:function(t,r){var n;return hu(r)?(n=ic(t).delete_(r,!0))!=null?n:!0:!1},defineProperty:function(t,r,n){var i;return(i=ic(t).defineProperty_(r,n))!=null?i:!0},ownKeys:function(t){return ic(t).ownKeys_()},preventExtensions:function(t){Ot(13)}};function qB(e,t){var r,n;return SA(),e=Sy(e,t),(n=(r=e[ct]).proxy_)!=null?n:r.proxy_=new Proxy(e,KB)}function Vi(e){return e.interceptors_!==void 0&&e.interceptors_.length>0}function Cp(e,t){var r=e.interceptors_||(e.interceptors_=[]);return r.push(t),EA(function(){var n=r.indexOf(t);n!==-1&&r.splice(n,1)})}function Xi(e,t){var r=Ih();try{for(var n=[].concat(e.interceptors_||[]),i=0,o=n.length;i<o&&(t=n[i](t),t&&!t.type&&Ot(14),!!t);i++);return t}finally{za(r)}}function wo(e){return e.changeListeners_!==void 0&&e.changeListeners_.length>0}function Ip(e,t){var r=e.changeListeners_||(e.changeListeners_=[]);return r.push(t),EA(function(){var n=r.indexOf(t);n!==-1&&r.splice(n,1)})}function xo(e,t){var r=Ih(),n=e.changeListeners_;if(!!n){n=n.slice();for(var i=0,o=n.length;i<o;i++)n[i](t);za(r)}}function Li(e,t,r){var n=Sy(e,r)[ct];Si();try{var i;(i=t)!=null||(t=OM(e)),yy(t).forEach(function(o){return n.make_(o,t[o])})}finally{Ei()}return e}var WE="splice",es="update",ZB=1e4,JB={get:function(t,r){var n=t[ct];return r===ct?n:r==="length"?n.getArrayLength_():typeof r=="string"&&!isNaN(r)?n.get_(parseInt(r)):$s(ag,r)?ag[r]:t[r]},set:function(t,r,n){var i=t[ct];return r==="length"&&i.setArrayLength_(n),typeof r=="symbol"||isNaN(r)?t[r]=n:i.set_(parseInt(r),n),!0},preventExtensions:function(){Ot(15)}},e4=function(){function e(r,n,i,o){r===void 0&&(r="ObservableArray"),this.owned_=void 0,this.legacyMode_=void 0,this.atom_=void 0,this.values_=[],this.interceptors_=void 0,this.changeListeners_=void 0,this.enhancer_=void 0,this.dehancer=void 0,this.proxy_=void 0,this.lastKnownLength_=0,this.owned_=i,this.legacyMode_=o,this.atom_=new xp(r),this.enhancer_=function(s,a){return n(s,a,"ObservableArray[..]")}}var t=e.prototype;return t.dehanceValue_=function(n){return this.dehancer!==void 0?this.dehancer(n):n},t.dehanceValues_=function(n){return this.dehancer!==void 0&&n.length>0?n.map(this.dehancer):n},t.intercept_=function(n){return Cp(this,n)},t.observe_=function(n,i){return i===void 0&&(i=!1),i&&n({observableKind:"array",object:this.proxy_,debugObjectName:this.atom_.name_,type:"splice",index:0,added:this.values_.slice(),addedCount:this.values_.length,removed:[],removedCount:0}),Ip(this,n)},t.getArrayLength_=function(){return this.atom_.reportObserved(),this.values_.length},t.setArrayLength_=function(n){(typeof n!="number"||isNaN(n)||n<0)&&Ot("Out of range: "+n);var i=this.values_.length;if(n!==i)if(n>i){for(var o=new Array(n-i),s=0;s<n-i;s++)o[s]=void 0;this.spliceWithArray_(i,0,o)}else this.spliceWithArray_(n,i-n)},t.updateArrayLength_=function(n,i){n!==this.lastKnownLength_&&Ot(16),this.lastKnownLength_+=i,this.legacyMode_&&i>0&&vR(n+i+1)},t.spliceWithArray_=function(n,i,o){var s=this;this.atom_;var a=this.values_.length;if(n===void 0?n=0:n>a?n=a:n<0&&(n=Math.max(0,a+n)),arguments.length===1?i=a-n:i==null?i=0:i=Math.max(0,Math.min(i,a-n)),o===void 0&&(o=jb),Vi(this)){var l=Xi(this,{object:this.proxy_,type:WE,index:n,removedCount:i,added:o});if(!l)return jb;i=l.removedCount,o=l.added}if(o=o.length===0?o:o.map(function(f){return s.enhancer_(f,void 0)}),this.legacyMode_){var u=o.length-i;this.updateArrayLength_(a,u)}var c=this.spliceItemsIntoValues_(n,i,o);return(i!==0||o.length!==0)&&this.notifyArraySplice_(n,o,c),this.dehanceValues_(c)},t.spliceItemsIntoValues_=function(n,i,o){if(o.length<ZB){var s;return(s=this.values_).splice.apply(s,[n,i].concat(o))}else{var a=this.values_.slice(n,n+i),l=this.values_.slice(n+i);this.values_.length+=o.length-i;for(var u=0;u<o.length;u++)this.values_[n+u]=o[u];for(var c=0;c<l.length;c++)this.values_[n+o.length+c]=l[c];return a}},t.notifyArrayChildUpdate_=function(n,i,o){var s=!this.owned_&&fd(),a=wo(this),l=a||s?{observableKind:"array",object:this.proxy_,type:es,debugObjectName:this.atom_.name_,index:n,newValue:i,oldValue:o}:null;this.atom_.reportChanged(),a&&xo(this,l)},t.notifyArraySplice_=function(n,i,o){var s=!this.owned_&&fd(),a=wo(this),l=a||s?{observableKind:"array",object:this.proxy_,debugObjectName:this.atom_.name_,type:WE,index:n,removed:o,added:i,removedCount:o.length,addedCount:i.length}:null;this.atom_.reportChanged(),a&&xo(this,l)},t.get_=function(n){if(n<this.values_.length)return this.atom_.reportObserved(),this.dehanceValue_(this.values_[n]);console.warn("[mobx.array] Attempt to read an array index ("+n+") that is out of bounds ("+this.values_.length+"). Please check length first. Out of bound indices will not be tracked by MobX")},t.set_=function(n,i){var o=this.values_;if(n<o.length){this.atom_;var s=o[n];if(Vi(this)){var a=Xi(this,{type:es,object:this.proxy_,index:n,newValue:i});if(!a)return;i=a.newValue}i=this.enhancer_(i,s);var l=i!==s;l&&(o[n]=i,this.notifyArrayChildUpdate_(n,i,s))}else n===o.length?this.spliceWithArray_(n,0,[i]):Ot(17,n,o.length)},e}();function QB(e,t,r,n){r===void 0&&(r="ObservableArray"),n===void 0&&(n=!1),SA();var i=new e4(r,t,n,!1);IA(i.values_,ct,i);var o=new Proxy(i.values_,JB);if(i.proxy_=o,e&&e.length){var s=Sp(!0);i.spliceWithArray_(0,0,e),Ep(s)}return o}var ag={clear:function(){return this.splice(0)},replace:function(t){var r=this[ct];return r.spliceWithArray_(0,r.values_.length,t)},toJSON:function(){return this.slice()},splice:function(t,r){for(var n=arguments.length,i=new Array(n>2?n-2:0),o=2;o<n;o++)i[o-2]=arguments[o];var s=this[ct];switch(arguments.length){case 0:return[];case 1:return s.spliceWithArray_(t);case 2:return s.spliceWithArray_(t,r)}return s.spliceWithArray_(t,r,i)},spliceWithArray:function(t,r,n){return this[ct].spliceWithArray_(t,r,n)},push:function(){for(var t=this[ct],r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];return t.spliceWithArray_(t.values_.length,0,n),t.values_.length},pop:function(){return this.splice(Math.max(this[ct].values_.length-1,0),1)[0]},shift:function(){return this.splice(0,1)[0]},unshift:function(){for(var t=this[ct],r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];return t.spliceWithArray_(0,0,n),t.values_.length},reverse:function(){return Oe.trackingDerivation&&Ot(37,"reverse"),this.replace(this.slice().reverse()),this},sort:function(){Oe.trackingDerivation&&Ot(37,"sort");var t=this.slice();return t.sort.apply(t,arguments),this.replace(t),this},remove:function(t){var r=this[ct],n=r.dehanceValues_(r.values_).indexOf(t);return n>-1?(this.splice(n,1),!0):!1}};Zr("concat",na);Zr("flat",na);Zr("includes",na);Zr("indexOf",na);Zr("join",na);Zr("lastIndexOf",na);Zr("slice",na);Zr("toString",na);Zr("toLocaleString",na);Zr("every",dl);Zr("filter",dl);Zr("find",dl);Zr("findIndex",dl);Zr("flatMap",dl);Zr("forEach",dl);Zr("map",dl);Zr("some",dl);Zr("reduce",aR);Zr("reduceRight",aR);function Zr(e,t){typeof Array.prototype[e]=="function"&&(ag[e]=t(e))}function na(e){return function(){var t=this[ct];t.atom_.reportObserved();var r=t.dehanceValues_(t.values_);return r[e].apply(r,arguments)}}function dl(e){return function(t,r){var n=this,i=this[ct];i.atom_.reportObserved();var o=i.dehanceValues_(i.values_);return o[e](function(s,a){return t.call(r,s,a,n)})}}function aR(e){return function(){var t=this,r=this[ct];r.atom_.reportObserved();var n=r.dehanceValues_(r.values_),i=arguments[0];return arguments[0]=function(o,s,a){return i(o,s,a,t)},n[e].apply(n,arguments)}}var eD=Iu("ObservableArrayAdministration",e4);function Ty(e){return vy(e)&&eD(e[ct])}var lR,uR,tD={},Oa="add",lg="delete";lR=Symbol.iterator;uR=Symbol.toStringTag;var cR=function(){function e(r,n,i){var o=this;n===void 0&&(n=uh),i===void 0&&(i="ObservableMap"),this.enhancer_=void 0,this.name_=void 0,this[ct]=tD,this.data_=void 0,this.hasMap_=void 0,this.keysAtom_=void 0,this.interceptors_=void 0,this.changeListeners_=void 0,this.dehancer=void 0,this.enhancer_=n,this.name_=i,ro(Map)||Ot(18),this.keysAtom_=RA("ObservableMap.keys()"),this.data_=new Map,this.hasMap_=new Map,wB(!0,function(){o.merge(r)})}var t=e.prototype;return t.has_=function(n){return this.data_.has(n)},t.has=function(n){var i=this;if(!Oe.trackingDerivation)return this.has_(n);var o=this.hasMap_.get(n);if(!o){var s=o=new Yc(this.has_(n),_y,"ObservableMap.key?",!1);this.hasMap_.set(n,s),nR(s,function(){return i.hasMap_.delete(n)})}return o.get()},t.set=function(n,i){var o=this.has_(n);if(Vi(this)){var s=Xi(this,{type:o?es:Oa,object:this,newValue:i,name:n});if(!s)return this;i=s.newValue}return o?this.updateValue_(n,i):this.addValue_(n,i),this},t.delete=function(n){var i=this;if(this.keysAtom_,Vi(this)){var o=Xi(this,{type:lg,object:this,name:n});if(!o)return!1}if(this.has_(n)){var s=fd(),a=wo(this),l=a||s?{observableKind:"map",debugObjectName:this.name_,type:lg,object:this,oldValue:this.data_.get(n).value_,name:n}:null;return Os(function(){var u;i.keysAtom_.reportChanged(),(u=i.hasMap_.get(n))==null||u.setNewValue_(!1);var c=i.data_.get(n);c.setNewValue_(void 0),i.data_.delete(n)}),a&&xo(this,l),!0}return!1},t.updateValue_=function(n,i){var o=this.data_.get(n);if(i=o.prepareNewValue_(i),i!==Oe.UNCHANGED){var s=fd(),a=wo(this),l=a||s?{observableKind:"map",debugObjectName:this.name_,type:es,object:this,oldValue:o.value_,name:n,newValue:i}:null;o.setNewValue_(i),a&&xo(this,l)}},t.addValue_=function(n,i){var o=this;this.keysAtom_,Os(function(){var u,c=new Yc(i,o.enhancer_,"ObservableMap.key",!1);o.data_.set(n,c),i=c.value_,(u=o.hasMap_.get(n))==null||u.setNewValue_(!0),o.keysAtom_.reportChanged()});var s=fd(),a=wo(this),l=a||s?{observableKind:"map",debugObjectName:this.name_,type:Oa,object:this,name:n,newValue:i}:null;a&&xo(this,l)},t.get=function(n){return this.has(n)?this.dehanceValue_(this.data_.get(n).get()):this.dehanceValue_(void 0)},t.dehanceValue_=function(n){return this.dehancer!==void 0?this.dehancer(n):n},t.keys=function(){return this.keysAtom_.reportObserved(),this.data_.keys()},t.values=function(){var n=this,i=this.keys();return Dd({next:function(){var s=i.next(),a=s.done,l=s.value;return{done:a,value:a?void 0:n.get(l)}}})},t.entries=function(){var n=this,i=this.keys();return Dd({next:function(){var s=i.next(),a=s.done,l=s.value;return{done:a,value:a?void 0:[l,n.get(l)]}}})},t[lR]=function(){return this.entries()},t.forEach=function(n,i){for(var o=Rc(this),s;!(s=o()).done;){var a=s.value,l=a[0],u=a[1];n.call(i,u,l,this)}},t.merge=function(n){var i=this;return Nu(n)&&(n=new Map(n)),Os(function(){nl(n)?AM(n).forEach(function(o){return i.set(o,n[o])}):Array.isArray(n)?n.forEach(function(o){var s=o[0],a=o[1];return i.set(s,a)}):Ch(n)?(n.constructor!==Map&&Ot(19,n),n.forEach(function(o,s){return i.set(s,o)})):n!=null&&Ot(20,n)}),this},t.clear=function(){var n=this;Os(function(){VA(function(){for(var i=Rc(n.keys()),o;!(o=i()).done;){var s=o.value;n.delete(s)}})})},t.replace=function(n){var i=this;return Os(function(){for(var o=rD(n),s=new Map,a=!1,l=Rc(i.data_.keys()),u;!(u=l()).done;){var c=u.value;if(!o.has(c)){var f=i.delete(c);if(f)a=!0;else{var p=i.data_.get(c);s.set(c,p)}}}for(var m=Rc(o.entries()),g;!(g=m()).done;){var b=g.value,y=b[0],w=b[1],x=i.data_.has(y);if(i.set(y,w),i.data_.has(y)){var T=i.data_.get(y);s.set(y,T),x||(a=!0)}}if(!a)if(i.data_.size!==s.size)i.keysAtom_.reportChanged();else for(var I=i.data_.keys(),R=s.keys(),S=I.next(),O=R.next();!S.done;){if(S.value!==O.value){i.keysAtom_.reportChanged();break}S=I.next(),O=R.next()}i.data_=s}),this},t.toString=function(){return"[object ObservableMap]"},t.toJSON=function(){return Array.from(this)},t.observe_=function(n,i){return Ip(this,n)},t.intercept_=function(n){return Cp(this,n)},K3(e,[{key:"size",get:function(){return this.keysAtom_.reportObserved(),this.data_.size}},{key:uR,get:function(){return"Map"}}]),e}(),Nu=Iu("ObservableMap",cR);function rD(e){if(Ch(e)||Nu(e))return e;if(Array.isArray(e))return new Map(e);if(nl(e)){var t=new Map;for(var r in e)t.set(r,e[r]);return t}else return Ot(21,e)}var hR,fR,nD={};hR=Symbol.iterator;fR=Symbol.toStringTag;var dR=function(){function e(r,n,i){n===void 0&&(n=uh),i===void 0&&(i="ObservableSet"),this.name_=void 0,this[ct]=nD,this.data_=new Set,this.atom_=void 0,this.changeListeners_=void 0,this.interceptors_=void 0,this.dehancer=void 0,this.enhancer_=void 0,this.name_=i,ro(Set)||Ot(22),this.atom_=RA(this.name_),this.enhancer_=function(o,s){return n(o,s,i)},r&&this.replace(r)}var t=e.prototype;return t.dehanceValue_=function(n){return this.dehancer!==void 0?this.dehancer(n):n},t.clear=function(){var n=this;Os(function(){VA(function(){for(var i=Rc(n.data_.values()),o;!(o=i()).done;){var s=o.value;n.delete(s)}})})},t.forEach=function(n,i){for(var o=Rc(this),s;!(s=o()).done;){var a=s.value;n.call(i,a,a,this)}},t.add=function(n){var i=this;if(this.atom_,Vi(this)){var o=Xi(this,{type:Oa,object:this,newValue:n});if(!o)return this}if(!this.has(n)){Os(function(){i.data_.add(i.enhancer_(n,void 0)),i.atom_.reportChanged()});var s=!1,a=wo(this),l=a||s?{observableKind:"set",debugObjectName:this.name_,type:Oa,object:this,newValue:n}:null;a&&xo(this,l)}return this},t.delete=function(n){var i=this;if(Vi(this)){var o=Xi(this,{type:lg,object:this,oldValue:n});if(!o)return!1}if(this.has(n)){var s=!1,a=wo(this),l=a||s?{observableKind:"set",debugObjectName:this.name_,type:lg,object:this,oldValue:n}:null;return Os(function(){i.atom_.reportChanged(),i.data_.delete(n)}),a&&xo(this,l),!0}return!1},t.has=function(n){return this.atom_.reportObserved(),this.data_.has(this.dehanceValue_(n))},t.entries=function(){var n=0,i=Array.from(this.keys()),o=Array.from(this.values());return Dd({next:function(){var a=n;return n+=1,a<o.length?{value:[i[a],o[a]],done:!1}:{done:!0}}})},t.keys=function(){return this.values()},t.values=function(){this.atom_.reportObserved();var n=this,i=0,o=Array.from(this.data_.values());return Dd({next:function(){return i<o.length?{value:n.dehanceValue_(o[i++]),done:!1}:{done:!0}}})},t.replace=function(n){var i=this;return Nh(n)&&(n=new Set(n)),Os(function(){Array.isArray(n)?(i.clear(),n.forEach(function(o){return i.add(o)})):bp(n)?(i.clear(),n.forEach(function(o){return i.add(o)})):n!=null&&Ot("Cannot initialize set from "+n)}),this},t.observe_=function(n,i){return Ip(this,n)},t.intercept_=function(n){return Cp(this,n)},t.toJSON=function(){return Array.from(this)},t.toString=function(){return"[object ObservableSet]"},t[hR]=function(){return this.values()},K3(e,[{key:"size",get:function(){return this.atom_.reportObserved(),this.data_.size}},{key:fR,get:function(){return"Set"}}]),e}(),Nh=Iu("ObservableSet",dR),YE=Object.create(null),KE="remove",pR=function(){function e(r,n,i,o){n===void 0&&(n=new Map),o===void 0&&(o=tB),this.target_=void 0,this.values_=void 0,this.name_=void 0,this.defaultAnnotation_=void 0,this.keysAtom_=void 0,this.changeListeners_=void 0,this.interceptors_=void 0,this.proxy_=void 0,this.isPlainObject_=void 0,this.appliedAnnotations_=void 0,this.pendingKeys_=void 0,this.target_=r,this.values_=n,this.name_=i,this.defaultAnnotation_=o,this.keysAtom_=new xp("ObservableObject.keys"),this.isPlainObject_=nl(this.target_)}var t=e.prototype;return t.getObservablePropValue_=function(n){return this.values_.get(n).get()},t.setObservablePropValue_=function(n,i){var o=this.values_.get(n);if(o instanceof Ud)return o.set(i),!0;if(Vi(this)){var s=Xi(this,{type:es,object:this.proxy_||this.target_,name:n,newValue:i});if(!s)return null;i=s.newValue}if(i=o.prepareNewValue_(i),i!==Oe.UNCHANGED){var a=wo(this),l=!1,u=a||l?{type:es,observableKind:"object",debugObjectName:this.name_,object:this.proxy_||this.target_,oldValue:o.value_,name:n,newValue:i}:null;o.setNewValue_(i),a&&xo(this,u)}return!0},t.get_=function(n){return Oe.trackingDerivation&&!$s(this.target_,n)&&this.has_(n),this.target_[n]},t.set_=function(n,i,o){return o===void 0&&(o=!1),$s(this.target_,n)?this.values_.has(n)?this.setObservablePropValue_(n,i):o?Reflect.set(this.target_,n,i):(this.target_[n]=i,!0):this.extend_(n,{value:i,enumerable:!0,writable:!0,configurable:!0},this.defaultAnnotation_,o)},t.has_=function(n){if(!Oe.trackingDerivation)return n in this.target_;this.pendingKeys_||(this.pendingKeys_=new Map);var i=this.pendingKeys_.get(n);return i||(i=new Yc(n in this.target_,_y,"ObservableObject.key?",!1),this.pendingKeys_.set(n,i)),i.get()},t.make_=function(n,i){if(i===!0&&(i=this.defaultAnnotation_),i!==!1){if(!(n in this.target_)){var o;if((o=this.target_[Wo])!=null&&o[n])return;Ot(1,i.annotationType_,this.name_+"."+n.toString())}for(var s=this.target_;s&&s!==my;){var a=tg(s,n);if(a){var l=i.make_(this,n,a,s);if(l===0)return;if(l===1)break}s=Object.getPrototypeOf(s)}ZE(this,i,n)}},t.extend_=function(n,i,o,s){if(s===void 0&&(s=!1),o===!0&&(o=this.defaultAnnotation_),o===!1)return this.defineProperty_(n,i,s);var a=o.extend_(this,n,i,s);return a&&ZE(this,o,n),a},t.defineProperty_=function(n,i,o){o===void 0&&(o=!1);try{Si();var s=this.delete_(n);if(!s)return s;if(Vi(this)){var a=Xi(this,{object:this.proxy_||this.target_,name:n,type:Oa,newValue:i.value});if(!a)return null;var l=a.newValue;i.value!==l&&(i=lh({},i,{value:l}))}if(o){if(!Reflect.defineProperty(this.target_,n,i))return!1}else js(this.target_,n,i);this.notifyPropertyAddition_(n,i.value)}finally{Ei()}return!0},t.defineObservableProperty_=function(n,i,o,s){s===void 0&&(s=!1);try{Si();var a=this.delete_(n);if(!a)return a;if(Vi(this)){var l=Xi(this,{object:this.proxy_||this.target_,name:n,type:Oa,newValue:i});if(!l)return null;i=l.newValue}var u=qE(n),c={configurable:Oe.safeDescriptors?this.isPlainObject_:!0,enumerable:!0,get:u.get,set:u.set};if(s){if(!Reflect.defineProperty(this.target_,n,c))return!1}else js(this.target_,n,c);var f=new Yc(i,o,"ObservableObject.key",!1);this.values_.set(n,f),this.notifyPropertyAddition_(n,f.value_)}finally{Ei()}return!0},t.defineComputedProperty_=function(n,i,o){o===void 0&&(o=!1);try{Si();var s=this.delete_(n);if(!s)return s;if(Vi(this)){var a=Xi(this,{object:this.proxy_||this.target_,name:n,type:Oa,newValue:void 0});if(!a)return null}i.name||(i.name="ObservableObject.key"),i.context=this.proxy_||this.target_;var l=qE(n),u={configurable:Oe.safeDescriptors?this.isPlainObject_:!0,enumerable:!1,get:l.get,set:l.set};if(o){if(!Reflect.defineProperty(this.target_,n,u))return!1}else js(this.target_,n,u);this.values_.set(n,new Ud(i)),this.notifyPropertyAddition_(n,void 0)}finally{Ei()}return!0},t.delete_=function(n,i){if(i===void 0&&(i=!1),!$s(this.target_,n))return!0;if(Vi(this)){var o=Xi(this,{object:this.proxy_||this.target_,name:n,type:KE});if(!o)return null}try{var s,a;Si();var l=wo(this),u=!1,c=this.values_.get(n),f=void 0;if(!c&&(l||u)){var p;f=(p=tg(this.target_,n))==null?void 0:p.value}if(i){if(!Reflect.deleteProperty(this.target_,n))return!1}else delete this.target_[n];if(c&&(this.values_.delete(n),c instanceof Yc&&(f=c.value_),qA(c)),this.keysAtom_.reportChanged(),(s=this.pendingKeys_)==null||(a=s.get(n))==null||a.set(n in this.target_),l||u){var m={type:KE,observableKind:"object",object:this.proxy_||this.target_,debugObjectName:this.name_,oldValue:f,name:n};l&&xo(this,m)}}finally{Ei()}return!0},t.observe_=function(n,i){return Ip(this,n)},t.intercept_=function(n){return Cp(this,n)},t.notifyPropertyAddition_=function(n,i){var o,s,a=wo(this),l=!1;if(a||l){var u=a||l?{type:Oa,observableKind:"object",debugObjectName:this.name_,object:this.proxy_||this.target_,name:n,newValue:i}:null;a&&xo(this,u)}(o=this.pendingKeys_)==null||(s=o.get(n))==null||s.set(!0),this.keysAtom_.reportChanged()},t.ownKeys_=function(){return this.keysAtom_.reportObserved(),yy(this.target_)},t.keys_=function(){return this.keysAtom_.reportObserved(),Object.keys(this.target_)},e}();function Sy(e,t){var r;if($s(e,ct))return e;var n=(r=t==null?void 0:t.name)!=null?r:"ObservableObject",i=new pR(e,new Map,String(n),hB(t));return gy(e,ct,i),e}var iD=Iu("ObservableObjectAdministration",pR);function qE(e){return YE[e]||(YE[e]={get:function(){return this[ct].getObservablePropValue_(e)},set:function(r){return this[ct].setObservablePropValue_(e,r)}})}function Bd(e){return vy(e)?iD(e[ct]):!1}function ZE(e,t,r){var n;(n=e.target_[Wo])==null||delete n[r]}var j2=0,mR=function(){};function oD(e,t){Object.setPrototypeOf?Object.setPrototypeOf(e.prototype,t):e.prototype.__proto__!==void 0?e.prototype.__proto__=t:e.prototype=t}oD(mR,Array.prototype);var t4=function(e,t,r){AA(n,e);function n(o,s,a,l){var u;a===void 0&&(a="ObservableArray"),l===void 0&&(l=!1),u=e.call(this)||this;var c=new e4(a,s,l,!0);if(c.proxy_=GE(u),IA(GE(u),ct,c),o&&o.length){var f=Sp(!0);u.spliceWithArray(0,0,o),Ep(f)}return u}var i=n.prototype;return i.concat=function(){this[ct].atom_.reportObserved();for(var s=arguments.length,a=new Array(s),l=0;l<s;l++)a[l]=arguments[l];return Array.prototype.concat.apply(this.slice(),a.map(function(u){return Ty(u)?u.slice():u}))},i[r]=function(){var o=this,s=0;return Dd({next:function(){return s<o.length?{value:o[s++],done:!1}:{done:!0,value:void 0}}})},K3(n,[{key:"length",get:function(){return this[ct].getArrayLength_()},set:function(s){this[ct].setArrayLength_(s)}},{key:t,get:function(){return"Array"}}]),n}(mR,Symbol.toStringTag,Symbol.iterator);Object.entries(ag).forEach(function(e){var t=e[0],r=e[1];t!=="concat"&&gy(t4.prototype,t,r)});function sD(e){return{enumerable:!1,configurable:!0,get:function(){return this[ct].get_(e)},set:function(r){this[ct].set_(e,r)}}}function aD(e){js(t4.prototype,""+e,sD(e))}function vR(e){if(e>j2){for(var t=j2;t<e+100;t++)aD(t);j2=e}}vR(1e3);function lD(e,t,r){return new t4(e,t,r)}function fu(e,t){if(typeof e=="object"&&e!==null){if(Ty(e))return t!==void 0&&Ot(23),e[ct].atom_;if(Nh(e))return e[ct];if(Nu(e)){if(t===void 0)return e.keysAtom_;var r=e.data_.get(t)||e.hasMap_.get(t);return r||Ot(25,t,Xb(e)),r}if(Bd(e)){if(!t)return Ot(26);var n=e[ct].values_.get(t);return n||Ot(27,t,Xb(e)),n}if(q3(e)||xy(e)||og(e))return e}else if(ro(e)&&og(e[ct]))return e[ct];Ot(28)}function Ey(e,t){if(e||Ot(29),t!==void 0)return Ey(fu(e,t));if(q3(e)||xy(e)||og(e)||Nu(e)||Nh(e))return e;if(e[ct])return e[ct];Ot(24,e)}function Xb(e,t){var r;if(t!==void 0)r=fu(e,t);else{if(Q3(e))return e.name;Bd(e)||Nu(e)||Nh(e)?r=Ey(e):r=fu(e)}return r.name_}var JE=my.toString;function r4(e,t,r){return r===void 0&&(r=-1),Wb(e,t,r)}function Wb(e,t,r,n,i){if(e===t)return e!==0||1/e===1/t;if(e==null||t==null)return!1;if(e!==e)return t!==t;var o=typeof e;if(o!=="function"&&o!=="object"&&typeof t!="object")return!1;var s=JE.call(e);if(s!==JE.call(t))return!1;switch(s){case"[object RegExp]":case"[object String]":return""+e==""+t;case"[object Number]":return+e!=+e?+t!=+t:+e==0?1/+e===1/t:+e==+t;case"[object Date]":case"[object Boolean]":return+e==+t;case"[object Symbol]":return typeof Symbol<"u"&&Symbol.valueOf.call(e)===Symbol.valueOf.call(t);case"[object Map]":case"[object Set]":r>=0&&r++;break}e=QE(e),t=QE(t);var a=s==="[object Array]";if(!a){if(typeof e!="object"||typeof t!="object")return!1;var l=e.constructor,u=t.constructor;if(l!==u&&!(ro(l)&&l instanceof l&&ro(u)&&u instanceof u)&&"constructor"in e&&"constructor"in t)return!1}if(r===0)return!1;r<0&&(r=-1),n=n||[],i=i||[];for(var c=n.length;c--;)if(n[c]===e)return i[c]===t;if(n.push(e),i.push(t),a){if(c=e.length,c!==t.length)return!1;for(;c--;)if(!Wb(e[c],t[c],r-1,n,i))return!1}else{var f=Object.keys(e),p;if(c=f.length,Object.keys(t).length!==c)return!1;for(;c--;)if(p=f[c],!($s(t,p)&&Wb(e[p],t[p],r-1,n,i)))return!1}return n.pop(),i.pop(),!0}function QE(e){return Ty(e)?e.slice():Ch(e)||Nu(e)||bp(e)||Nh(e)?Array.from(e.entries()):e}function Dd(e){return e[Symbol.iterator]=uD,e}function uD(){return this}["Symbol","Map","Set"].forEach(function(e){var t=xA();typeof t[e]>"u"&&Ot("MobX requires global '"+e+"' to be available or polyfilled")});typeof __MOBX_DEVTOOLS_GLOBAL_HOOK__=="object"&&__MOBX_DEVTOOLS_GLOBAL_HOOK__.injectMobx({spy:PB,extras:{getDebugName:Xb},$mobx:ct});const cD=e=>(t,r)=>(e.set(t,r),r),eC=Number.MAX_SAFE_INTEGER===void 0?9007199254740991:Number.MAX_SAFE_INTEGER,gR=536870912,tC=gR*2,hD=(e,t)=>r=>{const n=t.get(r);let i=n===void 0?r.size:n<tC?n+1:0;if(!r.has(i))return e(r,i);if(r.size<gR){for(;r.has(i);)i=Math.floor(Math.random()*tC);return e(r,i)}if(r.size>eC)throw new Error("Congratulations, you created a collection of unique numbers which uses all available integers!");for(;r.has(i);)i=Math.floor(Math.random()*eC);return e(r,i)},yR=new WeakMap,fD=cD(yR),Qm=hD(fD,yR),dD=e=>e.method!==void 0&&e.method==="call",pD=e=>e.error===null&&typeof e.id=="number",mD=e=>{const t=new Map([[0,()=>{}]]),r=new Map([[0,()=>{}]]),n=new Map,i=new Worker(e);return i.addEventListener("message",({data:u})=>{if(dD(u)){const{params:{timerId:c,timerType:f}}=u;if(f==="interval"){const p=t.get(c);if(typeof p=="number"){const m=n.get(p);if(m===void 0||m.timerId!==c||m.timerType!==f)throw new Error("The timer is in an undefined state.")}else if(typeof p<"u")p();else throw new Error("The timer is in an undefined state.")}else if(f==="timeout"){const p=r.get(c);if(typeof p=="number"){const m=n.get(p);if(m===void 0||m.timerId!==c||m.timerType!==f)throw new Error("The timer is in an undefined state.")}else if(typeof p<"u")p(),r.delete(c);else throw new Error("The timer is in an undefined state.")}}else if(pD(u)){const{id:c}=u,f=n.get(c);if(f===void 0)throw new Error("The timer is in an undefined state.");const{timerId:p,timerType:m}=f;n.delete(c),m==="interval"?t.delete(p):r.delete(p)}else{const{error:{message:c}}=u;throw new Error(c)}}),{clearInterval:u=>{const c=Qm(n);n.set(c,{timerId:u,timerType:"interval"}),t.set(u,c),i.postMessage({id:c,method:"clear",params:{timerId:u,timerType:"interval"}})},clearTimeout:u=>{const c=Qm(n);n.set(c,{timerId:u,timerType:"timeout"}),r.set(u,c),i.postMessage({id:c,method:"clear",params:{timerId:u,timerType:"timeout"}})},setInterval:(u,c)=>{const f=Qm(t);return t.set(f,()=>{u(),typeof t.get(f)=="function"&&i.postMessage({id:null,method:"set",params:{delay:c,now:performance.now(),timerId:f,timerType:"interval"}})}),i.postMessage({id:null,method:"set",params:{delay:c,now:performance.now(),timerId:f,timerType:"interval"}}),f},setTimeout:(u,c)=>{const f=Qm(r);return r.set(f,u),i.postMessage({id:null,method:"set",params:{delay:c,now:performance.now(),timerId:f,timerType:"timeout"}}),f}}};let Rf=null;const vD=(e,t)=>()=>{if(Rf!==null)return Rf;const r=new Blob([t],{type:"application/javascript; charset=utf-8"}),n=URL.createObjectURL(r);return Rf=e(n),Rf.setTimeout(()=>URL.revokeObjectURL(n),0),Rf},gD=`(()=>{"use strict";const e=new Map,t=new Map,r=(e,t)=>{let r,o;const i=performance.now();r=i,o=e-Math.max(0,i-t);return{expected:r+o,remainingDelay:o}},o=(e,t,r,i)=>{const s=performance.now();s>r?postMessage({id:null,method:"call",params:{timerId:t,timerType:i}}):e.set(t,setTimeout(o,r-s,e,t,r,i))};addEventListener("message",(i=>{let{data:s}=i;try{if("clear"===s.method){const{id:r,params:{timerId:o,timerType:i}}=s;if("interval"===i)(t=>{const r=e.get(t);if(void 0===r)throw new Error('There is no interval scheduled with the given id "'.concat(t,'".'));clearTimeout(r),e.delete(t)})(o),postMessage({error:null,id:r});else{if("timeout"!==i)throw new Error('The given type "'.concat(i,'" is not supported'));(e=>{const r=t.get(e);if(void 0===r)throw new Error('There is no timeout scheduled with the given id "'.concat(e,'".'));clearTimeout(r),t.delete(e)})(o),postMessage({error:null,id:r})}}else{if("set"!==s.method)throw new Error('The given method "'.concat(s.method,'" is not supported'));{const{params:{delay:i,now:n,timerId:a,timerType:d}}=s;if("interval"===d)((t,i,s)=>{const{expected:n,remainingDelay:a}=r(t,s);e.set(i,setTimeout(o,a,e,i,n,"interval"))})(i,a,n);else{if("timeout"!==d)throw new Error('The given type "'.concat(d,'" is not supported'));((e,i,s)=>{const{expected:n,remainingDelay:a}=r(e,s);t.set(i,setTimeout(o,a,t,i,n,"timeout"))})(i,a,n)}}}}catch(e){postMessage({error:{message:e.message},id:s.id,result:null})}}))})();`,yD=vD(mD,gD),_D=(e,t)=>yD().setTimeout(e,t),kc=class{constructor(e=0){this.data=e}setData(e){this.data=e}asNumber(){return this.data}set(e,t){t?this.data|=1<<e:this.data&=~(1<<e)}toggle(e){this.data^=1<<e}test(e){return(this.data&1<<e)!==0}toLayerStatus(e,t){if(t){const r=this.toArray().map((i,o)=>+(o!==e&&i&&t[o].visible));let n=this.test(e)?1:0;return r.forEach((i,o)=>{n|=i?1<<t[o].toNoteIcon():0}),n}else{const r=this.test(e);return this.data===1<<e?1:r?3:2}}toArray(){return this.serializeBin().split("").map(e=>parseInt(e)).reverse()}isEmpty(){return this.data===0}serializeHex(){return this.data.toString(16)}serializeBin(){return this.data.toString(2)}static deserializeHex(e){return new kc(parseInt(e,16))}static deserializeBin(e){return new kc(parseInt(e,2))}static deserializeDec(e){return new kc(parseInt(e,10))}clone(){return new kc(this.data)}};let Ki=kc;Ki.EMPTY_LAYER=new kc(0);class Ci{constructor(){this.addColumnNote=t=>{this.notes.push(t.clone())},this.removeAtIndex=t=>{this.notes.splice(t,1)},this.getNoteIndex=t=>{const r=this.notes.findIndex(n=>t===n.index);return r===-1?null:r},this.notes=[],this.tempoChanger=0}clone(){const t=new Ci;return t.tempoChanger=this.tempoChanger,t.notes=this.notes.map(r=>r.clone()),t}addNote(t,r){if(t instanceof Hs)return this.notes.push(t),t;const n=new Hs(t,r);return this.notes.push(n),n}serialize(){return[this.tempoChanger,this.notes.map(t=>t.serialize())]}static deserialize(t){const r=new Ci;return r.tempoChanger=t[0],r.notes=t[1].map(n=>Hs.deserialize(n)).filter(n=>!n.layer.isEmpty()),r}setTempoChanger(t){this.tempoChanger=t.id}getTempoChanger(){return rl[this.tempoChanger]}}const bD=new Map([["border",1],["circle",2],["line",3]]);class Bn{constructor(t={}){this.name=Ar[0],this.volume=100,this.pitch="",this.visible=!0,this.icon="circle",this.alias="",this.muted=!1,Object.assign(this,t)}serialize(){return{name:this.name,volume:this.volume,pitch:this.pitch,visible:this.visible,icon:this.icon,alias:this.alias,muted:this.muted}}static deserialize(t){var r,n,i,o,s,a,l;return new Bn().set({name:(r=t.name)!=null?r:Ar[0],volume:(n=t.volume)!=null?n:100,pitch:(i=t.pitch)!=null?i:"C",visible:(o=t.visible)!=null?o:!0,icon:(s=t.icon)!=null?s:"circle",alias:(a=t.alias)!=null?a:"",muted:(l=t.muted)!=null?l:!1})}set(t){return Object.assign(this,t),this}toNoteIcon(){return bD.get(this.icon)||0}clone(){return new Bn(this)}}const rC="0000".split(""),Yb=class{constructor(e,t){this.index=e,this.layer=t||new Ki}static deserialize(e){return new Yb(e[0],Ki.deserializeHex(e[1]))}serialize(){return[this.index,this.layer.serializeHex()]}switchLayer(e,t){this.layer.test(e)&&this.layer.set(t,!0),this.layer.set(e,!1)}swapLayer(e,t){const r=this.layer.test(e);this.layer.set(e,this.layer.test(t)),this.layer.set(t,r)}clearLayer(){this.layer.setData(0)}setLayer(e,t){return this.layer.set(e,t),this.layer}toggleLayer(e){return this.layer.toggle(e),this.layer}isLayerToggled(e){return this.layer.test(e)}clone(){return new Yb(this.index,this.layer.clone())}};let Hs=Yb;Hs.deserializeLayer=e=>{for(let t=0;t<e.length;t++)rC[t]=e[t];return rC.join("")};class nC{constructor({time:t,index:r,clicked:n=!1,id:i=0}){this.time=t,this.index=r,this.clicked=n,this.id=i}}class il{constructor(t,r,n){this.index=t||0,this.time=r||0,this.layer=n||new Ki(1)}setLayer(t,r){this.layer.set(t,r)}toMidi(){return SM.get(this.index)}serialize(){return[this.index,this.time,this.layer.serializeHex()]}static deserialize(t){return new il(t[0],t[1],Ki.deserializeHex(t[2]))}clone(){return new il(this.index,this.time,this.layer.clone())}}class iC{constructor(){this.start=()=>{this.startTimestamp=Date.now()-100,console.log("Started new recording")},this.addNote=t=>{this.notes.length===0&&this.start();const r=Date.now(),n=new il(t,r-this.startTimestamp);this.notes.push(n)},this.startTimestamp=Date.now(),this.notes=[]}}class n4{constructor(t,r,n){this.time=t,this.data=n||{note:-1,isAccidental:!1,outOfRangeBound:0},this.layer=r}static fromMidi(t,r,n,i){const o=new n4(r,t);for(let a=0;a<i;a++)n<qm.lower&&(n+=8),n>qm.upper&&(n-=8);const s=wA.get(`${n}`)||[-1,!1];return o.data={note:s[0],isAccidental:s[1],outOfRangeBound:0},n>qm.upper&&(o.data.outOfRangeBound=1),n<qm.lower&&(o.data.outOfRangeBound=-1),o}}var Kb={exports:{}};(function(e,t){var r=200,n="__lodash_hash_undefined__",i=9007199254740991,o="[object Arguments]",s="[object Array]",a="[object Boolean]",l="[object Date]",u="[object Error]",c="[object Function]",f="[object GeneratorFunction]",p="[object Map]",m="[object Number]",g="[object Object]",b="[object Promise]",y="[object RegExp]",w="[object Set]",x="[object String]",T="[object Symbol]",I="[object WeakMap]",R="[object ArrayBuffer]",S="[object DataView]",O="[object Float32Array]",P="[object Float64Array]",N="[object Int8Array]",A="[object Int16Array]",j="[object Int32Array]",X="[object Uint8Array]",G="[object Uint8ClampedArray]",ne="[object Uint16Array]",W="[object Uint32Array]",Y=/[\\^$.*+?()[\]{}|]/g,de=/\w*$/,le=/^\[object .+?Constructor\]$/,ie=/^(?:0|[1-9]\d*)$/,Q={};Q[o]=Q[s]=Q[R]=Q[S]=Q[a]=Q[l]=Q[O]=Q[P]=Q[N]=Q[A]=Q[j]=Q[p]=Q[m]=Q[g]=Q[y]=Q[w]=Q[x]=Q[T]=Q[X]=Q[G]=Q[ne]=Q[W]=!0,Q[u]=Q[c]=Q[I]=!1;var ee=typeof go=="object"&&go&&go.Object===Object&&go,K=typeof self=="object"&&self&&self.Object===Object&&self,te=ee||K||Function("return this")(),ye=t&&!t.nodeType&&t,Ce=ye&&!0&&e&&!e.nodeType&&e,Ie=Ce&&Ce.exports===ye;function Ye(D,se){return D.set(se[0],se[1]),D}function pe(D,se){return D.add(se),D}function F(D,se){for(var fe=-1,Ge=D?D.length:0;++fe<Ge&&se(D[fe],fe,D)!==!1;);return D}function $(D,se){for(var fe=-1,Ge=se.length,Mt=D.length;++fe<Ge;)D[Mt+fe]=se[fe];return D}function q(D,se,fe,Ge){var Mt=-1,Or=D?D.length:0;for(Ge&&Or&&(fe=D[++Mt]);++Mt<Or;)fe=se(fe,D[Mt],Mt,D);return fe}function ve(D,se){for(var fe=-1,Ge=Array(D);++fe<D;)Ge[fe]=se(fe);return Ge}function ue(D,se){return D==null?void 0:D[se]}function Ee(D){var se=!1;if(D!=null&&typeof D.toString!="function")try{se=!!(D+"")}catch{}return se}function Pe(D){var se=-1,fe=Array(D.size);return D.forEach(function(Ge,Mt){fe[++se]=[Mt,Ge]}),fe}function Le(D,se){return function(fe){return D(se(fe))}}function ot(D){var se=-1,fe=Array(D.size);return D.forEach(function(Ge){fe[++se]=Ge}),fe}var It=Array.prototype,Lt=Function.prototype,Kt=Object.prototype,qt=te["__core-js_shared__"],Tt=function(){var D=/[^.]+$/.exec(qt&&qt.keys&&qt.keys.IE_PROTO||"");return D?"Symbol(src)_1."+D:""}(),jr=Lt.toString,L=Kt.hasOwnProperty,H=Kt.toString,Z=RegExp("^"+jr.call(L).replace(Y,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),be=Ie?te.Buffer:void 0,Ve=te.Symbol,ht=te.Uint8Array,B=Le(Object.getPrototypeOf,Object),V=Object.create,re=Kt.propertyIsEnumerable,ge=It.splice,Ke=Object.getOwnPropertySymbols,nt=be?be.isBuffer:void 0,et=Le(Object.keys,Object),jt=No(te,"DataView"),_t=No(te,"Map"),Rt=No(te,"Promise"),Ut=No(te,"Set"),ur=No(te,"WeakMap"),mi=No(Object,"create"),o1=Po(jt),Dh=Po(_t),s1=Po(Rt),Hp=Po(Ut),zp=Po(ur),Vp=Ve?Ve.prototype:void 0,Gh=Vp?Vp.valueOf:void 0;function Co(D){var se=-1,fe=D?D.length:0;for(this.clear();++se<fe;){var Ge=D[se];this.set(Ge[0],Ge[1])}}function Xp(){this.__data__=mi?mi(null):{}}function a1(D){return this.has(D)&&delete this.__data__[D]}function l1(D){var se=this.__data__;if(mi){var fe=se[D];return fe===n?void 0:fe}return L.call(se,D)?se[D]:void 0}function u1(D){var se=this.__data__;return mi?se[D]!==void 0:L.call(se,D)}function c1(D,se){var fe=this.__data__;return fe[D]=mi&&se===void 0?n:se,this}Co.prototype.clear=Xp,Co.prototype.delete=a1,Co.prototype.get=l1,Co.prototype.has=u1,Co.prototype.set=c1;function vi(D){var se=-1,fe=D?D.length:0;for(this.clear();++se<fe;){var Ge=D[se];this.set(Ge[0],Ge[1])}}function Wp(){this.__data__=[]}function h1(D){var se=this.__data__,fe=$r(se,D);if(fe<0)return!1;var Ge=se.length-1;return fe==Ge?se.pop():ge.call(se,fe,1),!0}function f1(D){var se=this.__data__,fe=$r(se,D);return fe<0?void 0:se[fe][1]}function d1(D){return $r(this.__data__,D)>-1}function Yp(D,se){var fe=this.__data__,Ge=$r(fe,D);return Ge<0?fe.push([D,se]):fe[Ge][1]=se,this}vi.prototype.clear=Wp,vi.prototype.delete=h1,vi.prototype.get=f1,vi.prototype.has=d1,vi.prototype.set=Yp;function sa(D){var se=-1,fe=D?D.length:0;for(this.clear();++se<fe;){var Ge=D[se];this.set(Ge[0],Ge[1])}}function xl(){this.__data__={hash:new Co,map:new(_t||vi),string:new Co}}function jh(D){return zu(this,D).delete(D)}function Mu(D){return zu(this,D).get(D)}function $h(D){return zu(this,D).has(D)}function aa(D,se){return zu(this,D).set(D,se),this}sa.prototype.clear=xl,sa.prototype.delete=jh,sa.prototype.get=Mu,sa.prototype.has=$h,sa.prototype.set=aa;function zn(D){this.__data__=new vi(D)}function Qt(){this.__data__=new vi}function cr(D){return this.__data__.delete(D)}function Io(D){return this.__data__.get(D)}function tn(D){return this.__data__.has(D)}function Rn(D,se){var fe=this.__data__;if(fe instanceof vi){var Ge=fe.__data__;if(!_t||Ge.length<r-1)return Ge.push([D,se]),this;fe=this.__data__=new sa(Ge)}return fe.set(D,se),this}zn.prototype.clear=Qt,zn.prototype.delete=cr,zn.prototype.get=Io,zn.prototype.has=tn,zn.prototype.set=Rn;function hs(D,se){var fe=ua(D)||lo(D)?ve(D.length,String):[],Ge=fe.length,Mt=!!Ge;for(var Or in D)(se||L.call(D,Or))&&!(Mt&&(Or=="length"||Xu(Or,Ge)))&&fe.push(Or);return fe}function fs(D,se,fe){var Ge=D[se];(!(L.call(D,se)&&tm(Ge,fe))||fe===void 0&&!(se in D))&&(D[se]=fe)}function $r(D,se){for(var fe=D.length;fe--;)if(tm(D[fe][0],se))return fe;return-1}function Bu(D,se){return D&&ao(se,kn(se),D)}function Du(D,se,fe,Ge,Mt,Or,gn){var Ir;if(Ge&&(Ir=Or?Ge(D,Mt,Or,gn):Ge(D)),Ir!==void 0)return Ir;if(!Qn(D))return D;var El=ua(D);if(El){if(Ir=Jp(D),!se)return Hu(D,Ir)}else{var Ao=ms(D),Yh=Ao==c||Ao==f;if(Hr(D))return ju(D,se);if(Ao==g||Ao==o||Yh&&!Or){if(Ee(D))return Or?D:{};if(Ir=Vh(Yh?{}:D),!se)return p1(D,Bu(Ir,D))}else{if(!Q[Ao])return Or?D:{};Ir=v1(D,Ao,Du,se)}}gn||(gn=new zn);var Yu=gn.get(D);if(Yu)return Yu;if(gn.set(D,Ir),!El)var Kh=fe?m1(D):kn(D);return F(Kh||D,function(Ro,yn){Kh&&(yn=Ro,Ro=D[yn]),fs(Ir,yn,Du(Ro,se,fe,Ge,yn,D,gn))}),Ir}function Kp(D){return Qn(D)?V(D):{}}function Gu(D,se,fe){var Ge=se(D);return ua(D)?Ge:$(Ge,fe(D))}function qp(D){return H.call(D)}function Hh(D){if(!Qn(D)||em(D))return!1;var se=vs(D)||Ee(D)?Z:le;return se.test(Po(D))}function ds(D){if(!Xh(D))return et(D);var se=[];for(var fe in Object(D))L.call(D,fe)&&fe!="constructor"&&se.push(fe);return se}function ju(D,se){if(se)return D.slice();var fe=new D.constructor(D.length);return D.copy(fe),fe}function Ft(D){var se=new D.constructor(D.byteLength);return new ht(se).set(new ht(D)),se}function ps(D,se){var fe=se?Ft(D.buffer):D.buffer;return new D.constructor(fe,D.byteOffset,D.byteLength)}function Tl(D,se,fe){var Ge=se?fe(Pe(D),!0):Pe(D);return q(Ge,Ye,new D.constructor)}function Zp(D){var se=new D.constructor(D.source,de.exec(D));return se.lastIndex=D.lastIndex,se}function $u(D,se,fe){var Ge=se?fe(ot(D),!0):ot(D);return q(Ge,pe,new D.constructor)}function la(D){return Gh?Object(Gh.call(D)):{}}function zh(D,se){var fe=se?Ft(D.buffer):D.buffer;return new D.constructor(fe,D.byteOffset,D.length)}function Hu(D,se){var fe=-1,Ge=D.length;for(se||(se=Array(Ge));++fe<Ge;)se[fe]=D[fe];return se}function ao(D,se,fe,Ge){fe||(fe={});for(var Mt=-1,Or=se.length;++Mt<Or;){var gn=se[Mt],Ir=Ge?Ge(fe[gn],D[gn],gn,fe,D):void 0;fs(fe,gn,Ir===void 0?D[gn]:Ir)}return fe}function p1(D,se){return ao(D,Vu(D),se)}function m1(D){return Gu(D,kn,Vu)}function zu(D,se){var fe=D.__data__;return Qp(se)?fe[typeof se=="string"?"string":"hash"]:fe.map}function No(D,se){var fe=ue(D,se);return Hh(fe)?fe:void 0}var Vu=Ke?Le(Ke,Object):im,ms=qp;(jt&&ms(new jt(new ArrayBuffer(1)))!=S||_t&&ms(new _t)!=p||Rt&&ms(Rt.resolve())!=b||Ut&&ms(new Ut)!=w||ur&&ms(new ur)!=I)&&(ms=function(D){var se=H.call(D),fe=se==g?D.constructor:void 0,Ge=fe?Po(fe):void 0;if(Ge)switch(Ge){case o1:return S;case Dh:return p;case s1:return b;case Hp:return w;case zp:return I}return se});function Jp(D){var se=D.length,fe=D.constructor(se);return se&&typeof D[0]=="string"&&L.call(D,"index")&&(fe.index=D.index,fe.input=D.input),fe}function Vh(D){return typeof D.constructor=="function"&&!Xh(D)?Kp(B(D)):{}}function v1(D,se,fe,Ge){var Mt=D.constructor;switch(se){case R:return Ft(D);case a:case l:return new Mt(+D);case S:return ps(D,Ge);case O:case P:case N:case A:case j:case X:case G:case ne:case W:return zh(D,Ge);case p:return Tl(D,Ge,fe);case m:case x:return new Mt(D);case y:return Zp(D);case w:return $u(D,Ge,fe);case T:return la(D)}}function Xu(D,se){return se=se==null?i:se,!!se&&(typeof D=="number"||ie.test(D))&&D>-1&&D%1==0&&D<se}function Qp(D){var se=typeof D;return se=="string"||se=="number"||se=="symbol"||se=="boolean"?D!=="__proto__":D===null}function em(D){return!!Tt&&Tt in D}function Xh(D){var se=D&&D.constructor,fe=typeof se=="function"&&se.prototype||Kt;return D===fe}function Po(D){if(D!=null){try{return jr.call(D)}catch{}try{return D+""}catch{}}return""}function Wh(D){return Du(D,!0,!0)}function tm(D,se){return D===se||D!==D&&se!==se}function lo(D){return rm(D)&&L.call(D,"callee")&&(!re.call(D,"callee")||H.call(D)==o)}var ua=Array.isArray;function Wu(D){return D!=null&&nm(D.length)&&!vs(D)}function rm(D){return Sl(D)&&Wu(D)}var Hr=nt||g1;function vs(D){var se=Qn(D)?H.call(D):"";return se==c||se==f}function nm(D){return typeof D=="number"&&D>-1&&D%1==0&&D<=i}function Qn(D){var se=typeof D;return!!D&&(se=="object"||se=="function")}function Sl(D){return!!D&&typeof D=="object"}function kn(D){return Wu(D)?hs(D):ds(D)}function im(){return[]}function g1(){return!1}e.exports=Wh})(Kb,Kb.exports);const wi=Kb.exports;var Np={},Cy={};function wD(e){var t=new Zn(e),r=t.readChunk();if(r.id!="MThd")throw"Bad MIDI file.  Expected 'MHdr', got: '"+r.id+"'";for(var n=xD(r.data),i=[],o=0;!t.eof()&&o<n.numTracks;o++){var s=t.readChunk();if(s.id!="MTrk")throw"Bad MIDI file.  Expected 'MTrk', got: '"+s.id+"'";var a=TD(s.data);i.push(a)}return{header:n,tracks:i}}function xD(e){var t=new Zn(e),r=t.readUInt16(),n=t.readUInt16(),i={format:r,numTracks:n},o=t.readUInt16();return o&32768?(i.framesPerSecond=256-(o>>8),i.ticksPerFrame=o&255):i.ticksPerBeat=o,i}function TD(e){for(var t=new Zn(e),r=[];!t.eof();){var n=o();r.push(n)}return r;var i;function o(){var s={};s.deltaTime=t.readVarInt();var a=t.readUInt8();if((a&240)===240)if(a===255){s.meta=!0;var l=t.readUInt8(),u=t.readVarInt();switch(l){case 0:if(s.type="sequenceNumber",u!==2)throw"Expected length for sequenceNumber event is 2, got "+u;return s.number=t.readUInt16(),s;case 1:return s.type="text",s.text=t.readString(u),s;case 2:return s.type="copyrightNotice",s.text=t.readString(u),s;case 3:return s.type="trackName",s.text=t.readString(u),s;case 4:return s.type="instrumentName",s.text=t.readString(u),s;case 5:return s.type="lyrics",s.text=t.readString(u),s;case 6:return s.type="marker",s.text=t.readString(u),s;case 7:return s.type="cuePoint",s.text=t.readString(u),s;case 32:if(s.type="channelPrefix",u!=1)throw"Expected length for channelPrefix event is 1, got "+u;return s.channel=t.readUInt8(),s;case 33:if(s.type="portPrefix",u!=1)throw"Expected length for portPrefix event is 1, got "+u;return s.port=t.readUInt8(),s;case 47:if(s.type="endOfTrack",u!=0)throw"Expected length for endOfTrack event is 0, got "+u;return s;case 81:if(s.type="setTempo",u!=3)throw"Expected length for setTempo event is 3, got "+u;return s.microsecondsPerBeat=t.readUInt24(),s;case 84:if(s.type="smpteOffset",u!=5)throw"Expected length for smpteOffset event is 5, got "+u;var c=t.readUInt8(),f={0:24,32:25,64:29,96:30};return s.frameRate=f[c&96],s.hour=c&31,s.min=t.readUInt8(),s.sec=t.readUInt8(),s.frame=t.readUInt8(),s.subFrame=t.readUInt8(),s;case 88:if(s.type="timeSignature",u!=4)throw"Expected length for timeSignature event is 4, got "+u;return s.numerator=t.readUInt8(),s.denominator=1<<t.readUInt8(),s.metronome=t.readUInt8(),s.thirtyseconds=t.readUInt8(),s;case 89:if(s.type="keySignature",u!=2)throw"Expected length for keySignature event is 2, got "+u;return s.key=t.readInt8(),s.scale=t.readUInt8(),s;case 127:return s.type="sequencerSpecific",s.data=t.readBytes(u),s;default:return s.type="unknownMeta",s.data=t.readBytes(u),s.metatypeByte=l,s}}else if(a==240){s.type="sysEx";var u=t.readVarInt();return s.data=t.readBytes(u),s}else if(a==247){s.type="endSysEx";var u=t.readVarInt();return s.data=t.readBytes(u),s}else throw"Unrecognised MIDI event type byte: "+a;else{var p;if((a&128)===0){if(i===null)throw"Running status byte encountered before status byte";p=a,a=i,s.running=!0}else p=t.readUInt8(),i=a;var m=a>>4;switch(s.channel=a&15,m){case 8:return s.type="noteOff",s.noteNumber=p,s.velocity=t.readUInt8(),s;case 9:var g=t.readUInt8();return s.type=g===0?"noteOff":"noteOn",s.noteNumber=p,s.velocity=g,g===0&&(s.byte9=!0),s;case 10:return s.type="noteAftertouch",s.noteNumber=p,s.amount=t.readUInt8(),s;case 11:return s.type="controller",s.controllerType=p,s.value=t.readUInt8(),s;case 12:return s.type="programChange",s.programNumber=p,s;case 13:return s.type="channelAftertouch",s.amount=p,s;case 14:return s.type="pitchBend",s.value=p+(t.readUInt8()<<7)-8192,s;default:throw"Unrecognised MIDI event type: "+m}}}}function Zn(e){this.buffer=e,this.bufferLen=this.buffer.length,this.pos=0}Zn.prototype.eof=function(){return this.pos>=this.bufferLen};Zn.prototype.readUInt8=function(){var e=this.buffer[this.pos];return this.pos+=1,e};Zn.prototype.readInt8=function(){var e=this.readUInt8();return e&128?e-256:e};Zn.prototype.readUInt16=function(){var e=this.readUInt8(),t=this.readUInt8();return(e<<8)+t};Zn.prototype.readInt16=function(){var e=this.readUInt16();return e&32768?e-65536:e};Zn.prototype.readUInt24=function(){var e=this.readUInt8(),t=this.readUInt8(),r=this.readUInt8();return(e<<16)+(t<<8)+r};Zn.prototype.readInt24=function(){var e=this.readUInt24();return e&8388608?e-16777216:e};Zn.prototype.readUInt32=function(){var e=this.readUInt8(),t=this.readUInt8(),r=this.readUInt8(),n=this.readUInt8();return(e<<24)+(t<<16)+(r<<8)+n};Zn.prototype.readBytes=function(e){var t=this.buffer.slice(this.pos,this.pos+e);return this.pos+=e,t};Zn.prototype.readString=function(e){var t=this.readBytes(e);return String.fromCharCode.apply(null,t)};Zn.prototype.readVarInt=function(){for(var e=0;!this.eof();){var t=this.readUInt8();if(t&128)e+=t&127,e<<=7;else return e+t}return e};Zn.prototype.readChunk=function(){var e=this.readString(4),t=this.readUInt32(),r=this.readBytes(t);return{id:e,length:t,data:r}};var SD=wD;function ED(e,t){if(typeof e!="object")throw"Invalid MIDI data";t=t||{};var r=e.header||{},n=e.tracks||[],i,o=n.length,s=new qr;for(CD(s,r,o),i=0;i<o;i++)ID(s,n[i],t);return s.buffer}function CD(e,t,r){var n=t.format==null?1:t.format,i=128;t.timeDivision?i=t.timeDivision:t.ticksPerFrame&&t.framesPerSecond?i=-(t.framesPerSecond&255)<<8|t.ticksPerFrame&255:t.ticksPerBeat&&(i=t.ticksPerBeat&32767);var o=new qr;o.writeUInt16(n),o.writeUInt16(r),o.writeUInt16(i),e.writeChunk("MThd",o.buffer)}function ID(e,t,r){var n=new qr,i,o=t.length,s=null;for(i=0;i<o;i++)(r.running===!1||!r.running&&!t[i].running)&&(s=null),s=ND(n,t[i],s,r.useByte9ForNoteOff);e.writeChunk("MTrk",n.buffer)}function ND(e,t,r,n){var i=t.type,o=t.deltaTime,s=t.text||"",a=t.data||[],l=null;switch(e.writeVarInt(o),i){case"sequenceNumber":e.writeUInt8(255),e.writeUInt8(0),e.writeVarInt(2),e.writeUInt16(t.number);break;case"text":e.writeUInt8(255),e.writeUInt8(1),e.writeVarInt(s.length),e.writeString(s);break;case"copyrightNotice":e.writeUInt8(255),e.writeUInt8(2),e.writeVarInt(s.length),e.writeString(s);break;case"trackName":e.writeUInt8(255),e.writeUInt8(3),e.writeVarInt(s.length),e.writeString(s);break;case"instrumentName":e.writeUInt8(255),e.writeUInt8(4),e.writeVarInt(s.length),e.writeString(s);break;case"lyrics":e.writeUInt8(255),e.writeUInt8(5),e.writeVarInt(s.length),e.writeString(s);break;case"marker":e.writeUInt8(255),e.writeUInt8(6),e.writeVarInt(s.length),e.writeString(s);break;case"cuePoint":e.writeUInt8(255),e.writeUInt8(7),e.writeVarInt(s.length),e.writeString(s);break;case"channelPrefix":e.writeUInt8(255),e.writeUInt8(32),e.writeVarInt(1),e.writeUInt8(t.channel);break;case"portPrefix":e.writeUInt8(255),e.writeUInt8(33),e.writeVarInt(1),e.writeUInt8(t.port);break;case"endOfTrack":e.writeUInt8(255),e.writeUInt8(47),e.writeVarInt(0);break;case"setTempo":e.writeUInt8(255),e.writeUInt8(81),e.writeVarInt(3),e.writeUInt24(t.microsecondsPerBeat);break;case"smpteOffset":e.writeUInt8(255),e.writeUInt8(84),e.writeVarInt(5);var u={24:0,25:32,29:64,30:96},c=t.hour&31|u[t.frameRate];e.writeUInt8(c),e.writeUInt8(t.min),e.writeUInt8(t.sec),e.writeUInt8(t.frame),e.writeUInt8(t.subFrame);break;case"timeSignature":e.writeUInt8(255),e.writeUInt8(88),e.writeVarInt(4),e.writeUInt8(t.numerator);var f=Math.floor(Math.log(t.denominator)/Math.LN2)&255;e.writeUInt8(f),e.writeUInt8(t.metronome),e.writeUInt8(t.thirtyseconds||8);break;case"keySignature":e.writeUInt8(255),e.writeUInt8(89),e.writeVarInt(2),e.writeInt8(t.key),e.writeUInt8(t.scale);break;case"sequencerSpecific":e.writeUInt8(255),e.writeUInt8(127),e.writeVarInt(a.length),e.writeBytes(a);break;case"unknownMeta":t.metatypeByte!=null&&(e.writeUInt8(255),e.writeUInt8(t.metatypeByte),e.writeVarInt(a.length),e.writeBytes(a));break;case"sysEx":e.writeUInt8(240),e.writeVarInt(a.length),e.writeBytes(a);break;case"endSysEx":e.writeUInt8(247),e.writeVarInt(a.length),e.writeBytes(a);break;case"noteOff":var p=n!==!1&&t.byte9||n&&t.velocity==0?144:128;l=p|t.channel,l!==r&&e.writeUInt8(l),e.writeUInt8(t.noteNumber),e.writeUInt8(t.velocity);break;case"noteOn":l=144|t.channel,l!==r&&e.writeUInt8(l),e.writeUInt8(t.noteNumber),e.writeUInt8(t.velocity);break;case"noteAftertouch":l=160|t.channel,l!==r&&e.writeUInt8(l),e.writeUInt8(t.noteNumber),e.writeUInt8(t.amount);break;case"controller":l=176|t.channel,l!==r&&e.writeUInt8(l),e.writeUInt8(t.controllerType),e.writeUInt8(t.value);break;case"programChange":l=192|t.channel,l!==r&&e.writeUInt8(l),e.writeUInt8(t.programNumber);break;case"channelAftertouch":l=208|t.channel,l!==r&&e.writeUInt8(l),e.writeUInt8(t.amount);break;case"pitchBend":l=224|t.channel,l!==r&&e.writeUInt8(l);var m=8192+t.value,g=m&127,b=m>>7&127;e.writeUInt8(g),e.writeUInt8(b);break;default:throw"Unrecognized event type: "+i}return l}function qr(){this.buffer=[]}qr.prototype.writeUInt8=function(e){this.buffer.push(e&255)};qr.prototype.writeInt8=qr.prototype.writeUInt8;qr.prototype.writeUInt16=function(e){var t=e>>8&255,r=e&255;this.writeUInt8(t),this.writeUInt8(r)};qr.prototype.writeInt16=qr.prototype.writeUInt16;qr.prototype.writeUInt24=function(e){var t=e>>16&255,r=e>>8&255,n=e&255;this.writeUInt8(t),this.writeUInt8(r),this.writeUInt8(n)};qr.prototype.writeInt24=qr.prototype.writeUInt24;qr.prototype.writeUInt32=function(e){var t=e>>24&255,r=e>>16&255,n=e>>8&255,i=e&255;this.writeUInt8(t),this.writeUInt8(r),this.writeUInt8(n),this.writeUInt8(i)};qr.prototype.writeInt32=qr.prototype.writeUInt32;qr.prototype.writeBytes=function(e){this.buffer=this.buffer.concat(Array.prototype.slice.call(e,0))};qr.prototype.writeString=function(e){var t,r=e.length,n=[];for(t=0;t<r;t++)n.push(e.codePointAt(t));this.writeBytes(n)};qr.prototype.writeVarInt=function(e){if(e<0)throw"Cannot write negative variable-length integer";if(e<=127)this.writeUInt8(e);else{var t=e,r=[];for(r.push(t&127),t>>=7;t;){var n=t&127|128;r.push(n),t>>=7}this.writeBytes(r.reverse())}};qr.prototype.writeChunk=function(e,t){this.writeString(e),this.writeUInt32(t.length),this.writeBytes(t)};var PD=ED;Cy.parseMidi=SD;Cy.writeMidi=PD;var ug={},du={};Object.defineProperty(du,"__esModule",{value:!0});du.insert=du.search=void 0;function _R(e,t,r){r===void 0&&(r="ticks");var n=0,i=e.length,o=i;if(i>0&&e[i-1][r]<=t)return i-1;for(;n<o;){var s=Math.floor(n+(o-n)/2),a=e[s],l=e[s+1];if(a[r]===t){for(var u=s;u<e.length;u++){var c=e[u];c[r]===t&&(s=u)}return s}else{if(a[r]<t&&l[r]>t)return s;a[r]>t?o=s:a[r]<t&&(n=s+1)}}return-1}du.search=_R;function AD(e,t,r){if(r===void 0&&(r="ticks"),e.length){var n=_R(e,t[r],r);e.splice(n+1,0,t)}else e.push(t)}du.insert=AD;(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.Header=e.keySignatureKeys=void 0;var t=du,r=new WeakMap;e.keySignatureKeys=["Cb","Gb","Db","Ab","Eb","Bb","F","C","G","D","A","E","B","F#","C#"];var n=function(){function i(o){var s=this;if(this.tempos=[],this.timeSignatures=[],this.keySignatures=[],this.meta=[],this.name="",r.set(this,480),o){r.set(this,o.header.ticksPerBeat),o.tracks.forEach(function(l){l.forEach(function(u){u.meta&&(u.type==="timeSignature"?s.timeSignatures.push({ticks:u.absoluteTime,timeSignature:[u.numerator,u.denominator]}):u.type==="setTempo"?s.tempos.push({bpm:6e7/u.microsecondsPerBeat,ticks:u.absoluteTime}):u.type==="keySignature"&&s.keySignatures.push({key:e.keySignatureKeys[u.key+7],scale:u.scale===0?"major":"minor",ticks:u.absoluteTime}))})});var a=0;o.tracks[0].forEach(function(l){a+=l.deltaTime,l.meta&&(l.type==="trackName"?s.name=l.text:(l.type==="text"||l.type==="cuePoint"||l.type==="marker"||l.type==="lyrics")&&s.meta.push({text:l.text,ticks:a,type:l.type}))}),this.update()}}return i.prototype.update=function(){var o=this,s=0,a=0;this.tempos.sort(function(l,u){return l.ticks-u.ticks}),this.tempos.forEach(function(l,u){var c=u>0?o.tempos[u-1].bpm:o.tempos[0].bpm,f=l.ticks/o.ppq-a,p=60/c*f;l.time=p+s,s=l.time,a+=f}),this.timeSignatures.sort(function(l,u){return l.ticks-u.ticks}),this.timeSignatures.forEach(function(l,u){var c=u>0?o.timeSignatures[u-1]:o.timeSignatures[0],f=(l.ticks-c.ticks)/o.ppq,p=f/c.timeSignature[0]/(c.timeSignature[1]/4);c.measures=c.measures||0,l.measures=p+c.measures})},i.prototype.ticksToSeconds=function(o){var s=(0,t.search)(this.tempos,o);if(s!==-1){var a=this.tempos[s],l=a.time,u=(o-a.ticks)/this.ppq;return l+60/a.bpm*u}else{var c=o/this.ppq;return 60/120*c}},i.prototype.ticksToMeasures=function(o){var s=(0,t.search)(this.timeSignatures,o);if(s!==-1){var a=this.timeSignatures[s],l=(o-a.ticks)/this.ppq;return a.measures+l/(a.timeSignature[0]/a.timeSignature[1])/4}else return o/this.ppq/4},Object.defineProperty(i.prototype,"ppq",{get:function(){return r.get(this)},enumerable:!1,configurable:!0}),i.prototype.secondsToTicks=function(o){var s=(0,t.search)(this.tempos,o,"time");if(s!==-1){var a=this.tempos[s],l=a.time,u=o-l,c=u/(60/a.bpm);return Math.round(a.ticks+c*this.ppq)}else{var f=o/.5;return Math.round(f*this.ppq)}},i.prototype.toJSON=function(){return{keySignatures:this.keySignatures,meta:this.meta,name:this.name,ppq:this.ppq,tempos:this.tempos.map(function(o){return{bpm:o.bpm,ticks:o.ticks}}),timeSignatures:this.timeSignatures}},i.prototype.fromJSON=function(o){this.name=o.name,this.tempos=o.tempos.map(function(s){return Object.assign({},s)}),this.timeSignatures=o.timeSignatures.map(function(s){return Object.assign({},s)}),this.keySignatures=o.keySignatures.map(function(s){return Object.assign({},s)}),this.meta=o.meta.map(function(s){return Object.assign({},s)}),r.set(this,o.ppq),this.update()},i.prototype.setTempo=function(o){this.tempos=[{bpm:o,ticks:0}],this.update()},i}();e.Header=n})(ug);var Gd={},i4={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.ControlChange=e.controlChangeIds=e.controlChangeNames=void 0,e.controlChangeNames={1:"modulationWheel",2:"breath",4:"footController",5:"portamentoTime",7:"volume",8:"balance",10:"pan",64:"sustain",65:"portamentoTime",66:"sostenuto",67:"softPedal",68:"legatoFootswitch",84:"portamentoControl"},e.controlChangeIds=Object.keys(e.controlChangeNames).reduce(function(i,o){return i[e.controlChangeNames[o]]=o,i},{});var t=new WeakMap,r=new WeakMap,n=function(){function i(o,s){t.set(this,s),r.set(this,o.controllerType),this.ticks=o.absoluteTime,this.value=o.value}return Object.defineProperty(i.prototype,"number",{get:function(){return r.get(this)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"name",{get:function(){return e.controlChangeNames[this.number]?e.controlChangeNames[this.number]:null},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"time",{get:function(){var o=t.get(this);return o.ticksToSeconds(this.ticks)},set:function(o){var s=t.get(this);this.ticks=s.secondsToTicks(o)},enumerable:!1,configurable:!0}),i.prototype.toJSON=function(){return{number:this.number,ticks:this.ticks,time:this.time,value:this.value}},i}();e.ControlChange=n})(i4);var Iy={};Object.defineProperty(Iy,"__esModule",{value:!0});Iy.createControlChanges=void 0;var ev=i4;function RD(){return new Proxy({},{get:function(e,t){if(e[t])return e[t];if(ev.controlChangeIds.hasOwnProperty(t))return e[ev.controlChangeIds[t]]},set:function(e,t,r){return ev.controlChangeIds.hasOwnProperty(t)?e[ev.controlChangeIds[t]]=r:e[t]=r,!0}})}Iy.createControlChanges=RD;var Ny={};Object.defineProperty(Ny,"__esModule",{value:!0});Ny.PitchBend=void 0;var $2=new WeakMap,kD=function(){function e(t,r){$2.set(this,r),this.ticks=t.absoluteTime,this.value=t.value}return Object.defineProperty(e.prototype,"time",{get:function(){var t=$2.get(this);return t.ticksToSeconds(this.ticks)},set:function(t){var r=$2.get(this);this.ticks=r.secondsToTicks(t)},enumerable:!1,configurable:!0}),e.prototype.toJSON=function(){return{ticks:this.ticks,time:this.time,value:this.value}},e}();Ny.PitchBend=kD;var Py={},Va={};Object.defineProperty(Va,"__esModule",{value:!0});Va.DrumKitByPatchID=Va.InstrumentFamilyByID=Va.instrumentByPatchID=void 0;Va.instrumentByPatchID=["acoustic grand piano","bright acoustic piano","electric grand piano","honky-tonk piano","electric piano 1","electric piano 2","harpsichord","clavi","celesta","glockenspiel","music box","vibraphone","marimba","xylophone","tubular bells","dulcimer","drawbar organ","percussive organ","rock organ","church organ","reed organ","accordion","harmonica","tango accordion","acoustic guitar (nylon)","acoustic guitar (steel)","electric guitar (jazz)","electric guitar (clean)","electric guitar (muted)","overdriven guitar","distortion guitar","guitar harmonics","acoustic bass","electric bass (finger)","electric bass (pick)","fretless bass","slap bass 1","slap bass 2","synth bass 1","synth bass 2","violin","viola","cello","contrabass","tremolo strings","pizzicato strings","orchestral harp","timpani","string ensemble 1","string ensemble 2","synthstrings 1","synthstrings 2","choir aahs","voice oohs","synth voice","orchestra hit","trumpet","trombone","tuba","muted trumpet","french horn","brass section","synthbrass 1","synthbrass 2","soprano sax","alto sax","tenor sax","baritone sax","oboe","english horn","bassoon","clarinet","piccolo","flute","recorder","pan flute","blown bottle","shakuhachi","whistle","ocarina","lead 1 (square)","lead 2 (sawtooth)","lead 3 (calliope)","lead 4 (chiff)","lead 5 (charang)","lead 6 (voice)","lead 7 (fifths)","lead 8 (bass + lead)","pad 1 (new age)","pad 2 (warm)","pad 3 (polysynth)","pad 4 (choir)","pad 5 (bowed)","pad 6 (metallic)","pad 7 (halo)","pad 8 (sweep)","fx 1 (rain)","fx 2 (soundtrack)","fx 3 (crystal)","fx 4 (atmosphere)","fx 5 (brightness)","fx 6 (goblins)","fx 7 (echoes)","fx 8 (sci-fi)","sitar","banjo","shamisen","koto","kalimba","bag pipe","fiddle","shanai","tinkle bell","agogo","steel drums","woodblock","taiko drum","melodic tom","synth drum","reverse cymbal","guitar fret noise","breath noise","seashore","bird tweet","telephone ring","helicopter","applause","gunshot"];Va.InstrumentFamilyByID=["piano","chromatic percussion","organ","guitar","bass","strings","ensemble","brass","reed","pipe","synth lead","synth pad","synth effects","world","percussive","sound effects"];Va.DrumKitByPatchID={0:"standard kit",8:"room kit",16:"power kit",24:"electronic kit",25:"tr-808 kit",32:"jazz kit",40:"brush kit",48:"orchestra kit",56:"sound fx kit"};Object.defineProperty(Py,"__esModule",{value:!0});Py.Instrument=void 0;var tv=Va,oC=new WeakMap,OD=function(){function e(t,r){if(this.number=0,oC.set(this,r),this.number=0,t){var n=t.find(function(i){return i.type==="programChange"});n&&(this.number=n.programNumber)}}return Object.defineProperty(e.prototype,"name",{get:function(){return this.percussion?tv.DrumKitByPatchID[this.number]:tv.instrumentByPatchID[this.number]},set:function(t){var r=tv.instrumentByPatchID.indexOf(t);r!==-1&&(this.number=r)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"family",{get:function(){return this.percussion?"drums":tv.InstrumentFamilyByID[Math.floor(this.number/8)]},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"percussion",{get:function(){var t=oC.get(this);return t.channel===9},enumerable:!1,configurable:!0}),e.prototype.toJSON=function(){return{family:this.family,number:this.number,name:this.name}},e.prototype.fromJSON=function(t){this.number=t.number},e}();Py.Instrument=OD;var Ay={};Object.defineProperty(Ay,"__esModule",{value:!0});Ay.Note=void 0;function LD(e){var t=Math.floor(e/12)-1;return bR(e)+t.toString()}function bR(e){var t=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"],r=e%12;return t[r]}function UD(e){var t=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"];return t.indexOf(e)}var FD=function(){var e=/^([a-g]{1}(?:b|#|x|bb)?)(-?[0-9]+)/i,t={cbb:-2,cb:-1,c:0,"c#":1,cx:2,dbb:0,db:1,d:2,"d#":3,dx:4,ebb:2,eb:3,e:4,"e#":5,ex:6,fbb:3,fb:4,f:5,"f#":6,fx:7,gbb:5,gb:6,g:7,"g#":8,gx:9,abb:7,ab:8,a:9,"a#":10,ax:11,bbb:9,bb:10,b:11,"b#":12,bx:13};return function(r){var n=e.exec(r),i=n[1],o=n[2],s=t[i.toLowerCase()];return s+(parseInt(o,10)+1)*12}}(),oc=new WeakMap,MD=function(){function e(t,r,n){oc.set(this,n),this.midi=t.midi,this.velocity=t.velocity,this.noteOffVelocity=r.velocity,this.ticks=t.ticks,this.durationTicks=r.ticks-t.ticks}return Object.defineProperty(e.prototype,"name",{get:function(){return LD(this.midi)},set:function(t){this.midi=FD(t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"octave",{get:function(){return Math.floor(this.midi/12)-1},set:function(t){var r=t-this.octave;this.midi+=r*12},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"pitch",{get:function(){return bR(this.midi)},set:function(t){this.midi=12*(this.octave+1)+UD(t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"duration",{get:function(){var t=oc.get(this);return t.ticksToSeconds(this.ticks+this.durationTicks)-t.ticksToSeconds(this.ticks)},set:function(t){var r=oc.get(this),n=r.secondsToTicks(this.time+t);this.durationTicks=n-this.ticks},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"time",{get:function(){var t=oc.get(this);return t.ticksToSeconds(this.ticks)},set:function(t){var r=oc.get(this);this.ticks=r.secondsToTicks(t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"bars",{get:function(){var t=oc.get(this);return t.ticksToMeasures(this.ticks)},enumerable:!1,configurable:!0}),e.prototype.toJSON=function(){return{duration:this.duration,durationTicks:this.durationTicks,midi:this.midi,name:this.name,ticks:this.ticks,time:this.time,velocity:this.velocity}},e}();Ay.Note=MD;Object.defineProperty(Gd,"__esModule",{value:!0});Gd.Track=void 0;var H2=du,BD=i4,DD=Iy,GD=Ny,sC=Py,jD=Ay,rv=new WeakMap,$D=function(){function e(t,r){var n=this;if(this.name="",this.notes=[],this.controlChanges=(0,DD.createControlChanges)(),this.pitchBends=[],rv.set(this,r),t){var i=t.find(function(p){return p.type==="trackName"});this.name=i?i.text:""}if(this.instrument=new sC.Instrument(t,this),this.channel=0,t){for(var o=t.filter(function(p){return p.type==="noteOn"}),s=t.filter(function(p){return p.type==="noteOff"}),a=function(){var p=o.shift();l.channel=p.channel;var m=s.findIndex(function(b){return b.noteNumber===p.noteNumber&&b.absoluteTime>=p.absoluteTime});if(m!==-1){var g=s.splice(m,1)[0];l.addNote({durationTicks:g.absoluteTime-p.absoluteTime,midi:p.noteNumber,noteOffVelocity:g.velocity/127,ticks:p.absoluteTime,velocity:p.velocity/127})}},l=this;o.length;)a();var u=t.filter(function(p){return p.type==="controller"});u.forEach(function(p){n.addCC({number:p.controllerType,ticks:p.absoluteTime,value:p.value/127})});var c=t.filter(function(p){return p.type==="pitchBend"});c.forEach(function(p){n.addPitchBend({ticks:p.absoluteTime,value:p.value/Math.pow(2,13)})});var f=t.find(function(p){return p.type==="endOfTrack"});this.endOfTrackTicks=f!==void 0?f.absoluteTime:void 0}}return e.prototype.addNote=function(t){var r=rv.get(this),n=new jD.Note({midi:0,ticks:0,velocity:1},{ticks:0,velocity:0},r);return Object.assign(n,t),(0,H2.insert)(this.notes,n,"ticks"),this},e.prototype.addCC=function(t){var r=rv.get(this),n=new BD.ControlChange({controllerType:t.number},r);return delete t.number,Object.assign(n,t),Array.isArray(this.controlChanges[n.number])||(this.controlChanges[n.number]=[]),(0,H2.insert)(this.controlChanges[n.number],n,"ticks"),this},e.prototype.addPitchBend=function(t){var r=rv.get(this),n=new GD.PitchBend({},r);return Object.assign(n,t),(0,H2.insert)(this.pitchBends,n,"ticks"),this},Object.defineProperty(e.prototype,"duration",{get:function(){if(!this.notes.length)return 0;for(var t=this.notes[this.notes.length-1].time+this.notes[this.notes.length-1].duration,r=0;r<this.notes.length-1;r++){var n=this.notes[r].time+this.notes[r].duration;t<n&&(t=n)}return t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"durationTicks",{get:function(){if(!this.notes.length)return 0;for(var t=this.notes[this.notes.length-1].ticks+this.notes[this.notes.length-1].durationTicks,r=0;r<this.notes.length-1;r++){var n=this.notes[r].ticks+this.notes[r].durationTicks;t<n&&(t=n)}return t},enumerable:!1,configurable:!0}),e.prototype.fromJSON=function(t){var r=this;this.name=t.name,this.channel=t.channel,this.instrument=new sC.Instrument(void 0,this),this.instrument.fromJSON(t.instrument),t.endOfTrackTicks!==void 0&&(this.endOfTrackTicks=t.endOfTrackTicks);for(var n in t.controlChanges)t.controlChanges[n]&&t.controlChanges[n].forEach(function(i){r.addCC({number:i.number,ticks:i.ticks,value:i.value})});t.notes.forEach(function(i){r.addNote({durationTicks:i.durationTicks,midi:i.midi,ticks:i.ticks,velocity:i.velocity})})},e.prototype.toJSON=function(){for(var t={},r=0;r<127;r++)this.controlChanges.hasOwnProperty(r)&&(t[r]=this.controlChanges[r].map(function(i){return i.toJSON()}));var n={channel:this.channel,controlChanges:t,pitchBends:this.pitchBends.map(function(i){return i.toJSON()}),instrument:this.instrument.toJSON(),name:this.name,notes:this.notes.map(function(i){return i.toJSON()})};return this.endOfTrackTicks!==void 0&&(n.endOfTrackTicks=this.endOfTrackTicks),n},e}();Gd.Track=$D;var Ry={};function HD(e){var t=[];return wR(e,t),t}function wR(e,t){for(var r=0;r<e.length;r++){var n=e[r];Array.isArray(n)?wR(n,t):t.push(n)}}const zD=Object.freeze(Object.defineProperty({__proto__:null,flatten:HD},Symbol.toStringTag,{value:"Module"})),VD=Lx(zD);var _a=go&&go.__spreadArray||function(e,t,r){if(r||arguments.length===2)for(var n=0,i=t.length,o;n<i;n++)(o||!(n in t))&&(o||(o=Array.prototype.slice.call(t,0,n)),o[n]=t[n]);return e.concat(o||Array.prototype.slice.call(t))};Object.defineProperty(Ry,"__esModule",{value:!0});Ry.encode=void 0;var XD=Cy,WD=ug,YD=VD;function KD(e,t){return[{absoluteTime:e.ticks,channel:t,deltaTime:0,noteNumber:e.midi,type:"noteOn",velocity:Math.floor(e.velocity*127)},{absoluteTime:e.ticks+e.durationTicks,channel:t,deltaTime:0,noteNumber:e.midi,type:"noteOff",velocity:Math.floor(e.noteOffVelocity*127)}]}function qD(e){return(0,YD.flatten)(e.notes.map(function(t){return KD(t,e.channel)}))}function ZD(e,t){return{absoluteTime:e.ticks,channel:t,controllerType:e.number,deltaTime:0,type:"controller",value:Math.floor(e.value*127)}}function JD(e){for(var t=[],r=0;r<127;r++)e.controlChanges.hasOwnProperty(r)&&e.controlChanges[r].forEach(function(n){t.push(ZD(n,e.channel))});return t}function QD(e,t){return{absoluteTime:e.ticks,channel:t,deltaTime:0,type:"pitchBend",value:e.value}}function eG(e){var t=[];return e.pitchBends.forEach(function(r){t.push(QD(r,e.channel))}),t}function tG(e){return{absoluteTime:0,channel:e.channel,deltaTime:0,programNumber:e.instrument.number,type:"programChange"}}function rG(e){return{absoluteTime:0,deltaTime:0,meta:!0,text:e,type:"trackName"}}function nG(e){return{absoluteTime:e.ticks,deltaTime:0,meta:!0,microsecondsPerBeat:Math.floor(6e7/e.bpm),type:"setTempo"}}function iG(e){return{absoluteTime:e.ticks,deltaTime:0,denominator:e.timeSignature[1],meta:!0,metronome:24,numerator:e.timeSignature[0],thirtyseconds:8,type:"timeSignature"}}function oG(e){var t=WD.keySignatureKeys.indexOf(e.key);return{absoluteTime:e.ticks,deltaTime:0,key:t+7,meta:!0,scale:e.scale==="major"?0:1,type:"keySignature"}}function sG(e){return{absoluteTime:e.ticks,deltaTime:0,meta:!0,text:e.text,type:e.type}}function aG(e){var t={header:{format:1,numTracks:e.tracks.length+1,ticksPerBeat:e.header.ppq},tracks:_a([_a(_a(_a(_a([{absoluteTime:0,deltaTime:0,meta:!0,text:e.header.name,type:"trackName"}],e.header.keySignatures.map(function(r){return oG(r)}),!0),e.header.meta.map(function(r){return sG(r)}),!0),e.header.tempos.map(function(r){return nG(r)}),!0),e.header.timeSignatures.map(function(r){return iG(r)}),!0)],e.tracks.map(function(r){return _a(_a(_a([rG(r.name),tG(r)],qD(r),!0),JD(r),!0),eG(r),!0)}),!0)};return t.tracks=t.tracks.map(function(r){r=r.sort(function(i,o){return i.absoluteTime-o.absoluteTime});var n=0;return r.forEach(function(i){i.deltaTime=i.absoluteTime-n,n=i.absoluteTime,delete i.absoluteTime}),r.push({deltaTime:0,meta:!0,type:"endOfTrack"}),r}),new Uint8Array((0,XD.writeMidi)(t))}Ry.encode=aG;(function(e){var t=go&&go.__awaiter||function(f,p,m,g){function b(y){return y instanceof m?y:new m(function(w){w(y)})}return new(m||(m=Promise))(function(y,w){function x(R){try{I(g.next(R))}catch(S){w(S)}}function T(R){try{I(g.throw(R))}catch(S){w(S)}}function I(R){R.done?y(R.value):b(R.value).then(x,T)}I((g=g.apply(f,p||[])).next())})},r=go&&go.__generator||function(f,p){var m={label:0,sent:function(){if(y[0]&1)throw y[1];return y[1]},trys:[],ops:[]},g,b,y,w;return w={next:x(0),throw:x(1),return:x(2)},typeof Symbol=="function"&&(w[Symbol.iterator]=function(){return this}),w;function x(I){return function(R){return T([I,R])}}function T(I){if(g)throw new TypeError("Generator is already executing.");for(;m;)try{if(g=1,b&&(y=I[0]&2?b.return:I[0]?b.throw||((y=b.return)&&y.call(b),0):b.next)&&!(y=y.call(b,I[1])).done)return y;switch(b=0,y&&(I=[I[0]&2,y.value]),I[0]){case 0:case 1:y=I;break;case 4:return m.label++,{value:I[1],done:!1};case 5:m.label++,b=I[1],I=[0];continue;case 7:I=m.ops.pop(),m.trys.pop();continue;default:if(y=m.trys,!(y=y.length>0&&y[y.length-1])&&(I[0]===6||I[0]===2)){m=0;continue}if(I[0]===3&&(!y||I[1]>y[0]&&I[1]<y[3])){m.label=I[1];break}if(I[0]===6&&m.label<y[1]){m.label=y[1],y=I;break}if(y&&m.label<y[2]){m.label=y[2],m.ops.push(I);break}y[2]&&m.ops.pop(),m.trys.pop();continue}I=p.call(f,m)}catch(R){I=[6,R],b=0}finally{g=y=0}if(I[0]&5)throw I[1];return{value:I[0]?I[1]:void 0,done:!0}}};Object.defineProperty(e,"__esModule",{value:!0}),e.Header=e.Track=e.Midi=void 0;var n=Cy,i=ug,o=Gd,s=Ry,a=function(){function f(p){var m=this,g=null;if(p){var b=p instanceof ArrayBuffer?new Uint8Array(p):p;g=(0,n.parseMidi)(b),g.tracks.forEach(function(y){var w=0;y.forEach(function(x){w+=x.deltaTime,x.absoluteTime=w})}),g.tracks=c(g.tracks)}this.header=new i.Header(g),this.tracks=[],p&&(this.tracks=g.tracks.map(function(y){return new o.Track(y,m.header)}),g.header.format===1&&this.tracks[0].duration===0&&this.tracks.shift())}return f.fromUrl=function(p){return t(this,void 0,void 0,function(){var m,g;return r(this,function(b){switch(b.label){case 0:return[4,fetch(p)];case 1:return m=b.sent(),m.ok?[4,m.arrayBuffer()]:[3,3];case 2:return g=b.sent(),[2,new f(g)];case 3:throw new Error("Could not load '".concat(p,"'"))}})})},Object.defineProperty(f.prototype,"name",{get:function(){return this.header.name},set:function(p){this.header.name=p},enumerable:!1,configurable:!0}),Object.defineProperty(f.prototype,"duration",{get:function(){var p=this.tracks.map(function(m){return m.duration});return Math.max.apply(Math,p)},enumerable:!1,configurable:!0}),Object.defineProperty(f.prototype,"durationTicks",{get:function(){var p=this.tracks.map(function(m){return m.durationTicks});return Math.max.apply(Math,p)},enumerable:!1,configurable:!0}),f.prototype.addTrack=function(){var p=new o.Track(void 0,this.header);return this.tracks.push(p),p},f.prototype.toArray=function(){return(0,s.encode)(this)},f.prototype.toJSON=function(){return{header:this.header.toJSON(),tracks:this.tracks.map(function(p){return p.toJSON()})}},f.prototype.fromJSON=function(p){var m=this;this.header=new i.Header,this.header.fromJSON(p.header),this.tracks=p.tracks.map(function(g){var b=new o.Track(void 0,m.header);return b.fromJSON(g),b})},f.prototype.clone=function(){var p=new f;return p.fromJSON(this.toJSON()),p},f}();e.Midi=a;var l=Gd;Object.defineProperty(e,"Track",{enumerable:!0,get:function(){return l.Track}});var u=ug;Object.defineProperty(e,"Header",{enumerable:!0,get:function(){return u.Header}});function c(f){for(var p=[],m=0;m<f.length;m++)for(var g=p.length,b=new Map,y=Array(16).fill(0),w=0,x=f[m];w<x.length;w++){var T=x[w],I=g,R=T.channel;if(R!==void 0){T.type==="programChange"&&(y[R]=T.programNumber);var S=y[R],O="".concat(S," ").concat(R);b.has(O)?I=b.get(O):(I=g+b.size,b.set(O,I))}p[I]||p.push([]),p[I].push(T)}return p}})(Np);class is{constructor(t,r,n,i){this.id=null,this.folderId=null,this.bpm=220,this.pitch="C",this.instruments=[],this.name=t,this.version=r,this.type=n,this.data={isComposed:!1,isComposedVersion:!1,appName:Ae,...i}}static stripMetadata(t){const r={...t};return delete r._id,r}static getSongType(t){var r,n;return t.type?t.type:((r=t.data)==null?void 0:r.isComposedVersion)===!0?"composed":((n=t.data)==null?void 0:n.isComposedVersion)===!1?"recorded":null}static deserializeTo(t,r){var o,s,a;const n=Number(r.bpm),i=Array.isArray(r.instruments)?r.instruments.map(Bn.deserialize):[];return t.id=(o=r.id)!=null?o:null,t.folderId=(s=r.folderId)!=null?s:null,t.name=(a=r.name)!=null?a:"Untitled",t.data={...t.data,...r.data},t.bpm=Number.isFinite(n)?n:220,t.pitch=oo.includes(r.pitch)?r.pitch:"C",t.instruments=i,t}}function lG(e){return{id:e.id,folderId:e.folderId,name:e.name,type:e.type,_thisIsNotASerializedSong:null}}const cg=class extends is{constructor(e,t,r=[]){super(e,2,"recorded",{isComposed:!1,isComposedVersion:!1,appName:Ae}),this.timestamp=0,this.lastPlayedNote=-1,this.toOldFormat=()=>({...this.serialize(),isComposed:!1,pitchLevel:oo.indexOf(this.pitch),bitsPerPage:16,isEncrypted:!1,songNotes:this.notes.map(i=>({time:i.time,key:"1Key"+i.index}))}),this.serialize=()=>({name:this.name,type:"recorded",folderId:this.folderId,instruments:this.instruments.map(n=>n.serialize()),version:this.version,pitch:this.pitch,bpm:this.bpm,data:{...this.data},notes:this.notes.map(n=>n.serialize()),id:this.id}),this.addInstrument=n=>{const i=new Bn({name:n});this.instruments=[...this.instruments,i]},this.toComposedSong=(n=4)=>{const i=Math.floor(6e4/this.bpm),o=new Kr(this.name,this.instruments.map(u=>u.name));o.bpm=this.bpm,o.pitch=this.pitch;const s=this.notes.map(u=>u.clone());let a=[];if(n===1){const u=[];let c=s[0].time;for(;s.length>0;){const p=s.length>0?[s.shift()]:[];let m=0;if(p[0]!==void 0)for(let g=0;g<s.length;g++)p[0].time>s[g].time-i/9&&m++;u.push([...p,...s.splice(0,m)])}const f=[];u.forEach(p=>{const m=p[0];if(!m)return;const g=m.time-c;c=m.time;const b=Math.floor((g-i)/i);b>-1&&new Array(b).fill(0).forEach(()=>f.push(new Ci));const y=new Ci;y.notes=p.map(w=>new Hs(w.index,w.layer.clone())),f.push(y)}),f.forEach(p=>{const m=TR(p);p.notes=m.map(g=>(g[0].layer=xR(g),g[0]))}),a=f}else{const u=gG(s,i/9),c=[i,Math.floor(i/2),Math.floor(i/4),Math.floor(i/8)];for(let f=0;f<u.length;f++){const p=new Ci;p.notes=u[f].map(w=>new Hs(w.index,w.layer.clone()));const m=u[f+1]||[[0,0,0]],g=[];let b=m[0].time-u[f][0].time;for(;b>=c[3];)if(b/c[0]>=1)b-=c[0],g.push(0);else if(b/c[1]>=1){if(b-=c[1],n<=1)continue;g.push(1)}else if(b/c[2]>=1){if(b-=c[2],n<=2)continue;g.push(2)}else if(b/c[3]>=1){if(b-=c[3],n<=3)continue;g.push(3)}p.tempoChanger=g.shift()||0;const y=g.map((w,x)=>{const T=new Ci;return T.tempoChanger=w,T});a.push(p,...y)}}o.columns=a;const l=Math.max(0,...o.columns.map(u=>Math.max(...u.notes.map(c=>c.layer.asNumber()))));return o.instruments=l.toString(2).split("").map((u,c)=>{const f=new Bn;return f.icon=a0[c%3],f}),this.instruments.forEach((u,c)=>{o.instruments[c]=u}),o},this.toRecordedSong=()=>this.clone(),this.toGenshin=()=>{const n=this.clone();return n.data.appName==="Genshin"?(console.warn("Song already in Genshin format"),n):(n.data.appName="Genshin",n.notes=n.notes.map(i=>(i.index=py[i.index],i)),n)},this.clone=()=>{const n=new cg(this.name);return n.id=this.id,n.folderId=this.folderId,n.version=this.version,n.bpm=this.bpm,n.pitch=this.pitch,n.instruments=this.instruments.map(i=>i.clone()),n.data={...this.data},n.notes=this.notes.map(i=>i.clone()),n},this.notes=t||[],this.instruments=[],r.forEach(n=>this.addInstrument(n))}get isComposed(){return!1}static deserialize(e){const{notes:t,name:r}=e,n=e.version||1,i=is.deserializeTo(new cg(r||"Untitled"),e);if(i.instruments.length===0&&(i.instruments=[new Bn]),n===1){const o=Array.isArray(t)?wi(t):[];i.notes=o.map(s=>il.deserialize([s[0],s[1],s[2]||1]))}else n===2&&(i.notes=t.map(o=>il.deserialize(o)));return i}static isSerializedType(e){var t;return typeof e!="object"?!1:e.type==="recorded"||((t=e==null?void 0:e.data)==null?void 0:t.isComposedVersion)===!1}static isOldFormatSerializedType(e){return typeof e!="object"||e.type?!1:!!(Array.isArray(e.songNotes)&&!e.composedSong)}startPlayback(e){this.lastPlayedNote=-1;for(let t=0;t<this.notes.length&&!(this.notes[t].time>=e);t++)this.lastPlayedNote=t}tickPlayback(e){const t=[];for(let r=this.lastPlayedNote+1;r<this.notes.length;r++){if(this.notes[r].time<=e){t.push(this.notes[r]),this.lastPlayedNote=r;continue}break}return t}static mergeNotesIntoChunks(e){const t=[];let r=0;for(let n=0;e.length>0;n++){const i=new o4([e.shift()],0),o=i.notes.length>0?i.notes[0].time:0;for(let s=0;s<e.length&&s<20;s++)e[s].time-i.notes[0].time-50<0&&(i.notes.push(e.shift()),s--);i.delay=r,r=e.length>0?e[0].time-o:0,t.push(i)}return t}toMidi(){var n;const e=new Np.Midi;e.header.setTempo(this.bpm/4),e.header.keySignatures.push({key:this.pitch,scale:"major",ticks:0}),e.name=this.name;const r=Math.max(...this.notes.map(i=>i.layer.asNumber())).toString(2).length;for(let i=0;i<r;i++){const o=this.notes.filter(a=>a.layer.test(i));if(!o.length)continue;const s=e.addTrack();s.name=`Layer ${i+1}`,o.forEach(a=>{s.addNote({time:a.time/1e3,duration:1,midi:a.toMidi()||0})})}return e.tracks.length===1&&(e.tracks[0].name=(n=tl[this.instruments[0].name])==null?void 0:n.midiName),e}};let Nn=cg;Nn.fromOldFormat=e=>{try{const t=new cg(e.name||"Untitled"),r=Number(e.bpm);t.bpm=Number.isFinite(r)?r:220,t.pitch=oo[e.pitchLevel||0]||"C",e.songNotes.filter((s,a,l)=>a===l.findIndex(u=>u.key.split("Key")[1]===s.key.split("Key")[1]&&u.time===s.time)).forEach(s=>{var c;const a=s.key.split("Key"),l=new Ki(((c=s.l)!=null?c:Number(a[0]))||1),u=new il(py[Number(a[1])],s.time,l);t.notes.push(u)});const o=Math.max(...t.notes.map(s=>s.layer.asNumber())).toString(2).length;return t.instruments=new Array(o).fill(0).map(s=>new Bn),[!0,"true"].includes(e.isComposed)?t.toComposedSong():t}catch(t){return console.log(t),null}};class o4{constructor(t,r){this.notes=t,this.delay=r}clone(){return new o4(this.notes.map(t=>t.clone()),this.delay)}}const a0=["border","circle","line"];class Kr extends is{constructor(t,r=[]){super(t,3,"composed",{appName:Ae,isComposed:!0,isComposedVersion:!0}),this.notes=[],this.toRecordedSong=(n=100)=>{const i=new Nn(this.name);i.bpm=this.bpm,i.pitch=this.pitch;const o=Math.floor(6e4/this.bpm);let s=n;return this.columns.forEach(a=>{a.notes.forEach(l=>{i.notes.push(new il(l.index,s,l.layer.clone()))}),s+=Math.floor(o*rl[a.tempoChanger].changer)}),i.instruments=this.instruments.map(a=>a.clone()),i},this.toComposedSong=()=>this.clone(),this.addInstrument=n=>{const i=new Bn({name:n});i.icon=a0[this.instruments.length%3],this.instruments=[...this.instruments,i]},this.removeInstrument=async n=>{this.eraseColumns(Kr.selection(0,this.columns.length),n),n!==this.instruments.length-1&&this.instruments.slice(n).forEach((o,s)=>{this.switchLayer(this.columns.length,0,n+s,n+s-1)}),this.instruments.splice(n,1),this.instruments=[...this.instruments]},this.serialize=()=>{let n=parseInt(this.bpm);return{name:this.name,type:"composed",bpm:Number.isFinite(n)?n:220,pitch:this.pitch,version:this.version,folderId:this.folderId,data:{...this.data,appName:Ae},breakpoints:[...this.breakpoints],instruments:this.instruments.map(i=>i.serialize()),columns:this.columns.map(i=>i.serialize()),id:this.id}},this.toOldFormat=()=>{const n={...this.serialize(),pitchLevel:oo.indexOf(this.pitch),isComposed:!0,bitsPerPage:16,isEncrypted:!1,songNotes:[]},i=[],o=Math.floor(6e4/n.bpm);let s=100;return n.columns.forEach(a=>{a[1].forEach(l=>{var m;const c=Ki.deserializeHex(l[1]).toArray().join("").padEnd(4,"0").substring(0,4),f=(m=uG[c])!=null?m:1;if(f===0)return;const p={key:(f>2?2:f)+"Key"+l[0],time:s,...f>2?{l:3}:{}};i.push(p)}),s+=Math.floor(o*rl[a[0]].changer)}),n.songNotes=i,n},this.addColumns=(n,i)=>{const o=new Array(n).fill(0).map(()=>new Ci);i==="end"?this.columns.push(...o):this.columns.splice(i+1,0,...o)},this.removeColumns=(n,i)=>{this.columns.splice(i,n),this.validateBreakpoints()},this.toggleBreakpoint=n=>{const i=typeof n=="number"?n:this.selected,o=this.breakpoints.indexOf(i);o>=0&&this.columns.length>i?this.breakpoints.splice(o,1):this.columns.length>i&&this.breakpoints.push(i)},this.eraseColumns=(n,i)=>(i==="all"?n.forEach(o=>{this.columns[o]!==void 0&&(this.columns[o].notes=[])}):n.forEach(o=>{const s=this.columns[o];s!==void 0&&(s.notes.forEach(a=>{a.setLayer(i,!1)}),s.notes=s.notes.filter(a=>!a.layer.isEmpty()))}),this),this.pasteColumns=async(n,i)=>{const o=n.map(s=>s.clone());return i?o.forEach((s,a)=>{const l=this.columns[this.selected+a];l!==void 0&&s.notes.forEach(u=>{const c=l.getNoteIndex(u.index);if(c===null)l.addColumnNote(u);else for(let f=0;f<this.instruments.length;f++)u.isLayerToggled(f)&&l.notes[c].setLayer(f,!0)})}):this.columns.splice(this.selected,0,...o),this.ensureInstruments(),this},this.copyColumns=(n,i)=>{let o=[];return n.forEach(s=>{const a=this.columns[s];a!==void 0&&o.push(a.clone())}),i!=="all"&&(o=o.map(s=>(s.notes=s.notes.filter(a=>a.isLayerToggled(i)),s.notes=s.notes.map(a=>(a.clearLayer(),a.setLayer(i,!0),a)),s))),o},this.deleteColumns=n=>{this.columns=this.columns.filter((o,s)=>!n.includes(s));let i=Math.min(...n);return this.selected=ai(i,0,this.columns.length-1),this.columns.length===0&&this.addColumns(12,0),this},this.validateBreakpoints=()=>{this.breakpoints=this.breakpoints.filter(n=>n<this.columns.length)},this.toGenshin=()=>{const n=this.clone();return n.data.appName==="Genshin"?(console.warn("Song already in Genshin format"),n):(n.data.appName="Genshin",n.instruments=[],this.instruments.map(i=>n.addInstrument(Ar[0])),n.columns=n.columns.map(i=>(i.notes=i.notes.map(o=>(o.index=py[o.index],o)),i)),n)},this.toMidi=()=>{const i=this.toRecordedSong().toMidi();return this.instruments.forEach((o,s)=>{var l;const a=tl[o.name];!a||!i.tracks[s]||(i.tracks[s].instrument.name=a.midiName,i.tracks[s].name=`${o.pitch} | ${(l=o.alias)!=null?l:o.name}`)}),i},this.clone=()=>{const n=new Kr(this.name);return n.id=this.id,n.folderId=this.folderId,n.bpm=this.bpm,n.data={...this.data},n.version=this.version,n.pitch=this.pitch,n.instruments=this.instruments.map(i=>i.clone()),n.breakpoints=[...this.breakpoints],n.selected=this.selected,n.columns=this.columns.map(i=>i.clone()),n},this.instruments=[],this.breakpoints=[0],this.selected=0,this.columns=new Array(100).fill(0).map(n=>new Ci),r.forEach(this.addInstrument)}static deserialize(t){var i;t.version===void 0&&(t.version=1);const r=is.deserializeTo(new Kr(t.name),t);r.breakpoints=((i=t.breakpoints)!=null?i:[]).filter(Number.isFinite),t.version===1&&(r.columns=t.columns.map(o=>{const s=new Ci;return s.tempoChanger=o[0],o[1].forEach(a=>{const l=a[1].split("").reverse().join(""),u=new Hs(a[0],Ki.deserializeBin(l));return s.notes.push(u)}),s})),(t.version===2||t.version===3)&&(r.columns=t.columns.map(o=>Ci.deserialize(o)));const n=Math.max(0,...r.columns.map(o=>Math.max(...o.notes.map(s=>s.layer.asNumber()))));return r.instruments=n.toString(2).split("").map((o,s)=>{const a=new Bn;return a.icon=a0[s%3],a}),t.version===1||t.version===2?(Array.isArray(t.instruments)?t.instruments:[]).forEach((s,a)=>{const l=new Bn({name:s});l.icon=a0[a%3],r.instruments[a]=l}):t.version===3&&t.instruments.forEach((o,s)=>{r.instruments[s]=Bn.deserialize(o)}),r}static isSerializedType(t){var r;return typeof t!="object"?!1:t.type==="composed"||((r=t==null?void 0:t.data)==null?void 0:r.isComposedVersion)===!0}static isOldFormatSerializedType(t){return typeof t!="object"||t.type?!1:!!(Array.isArray(t.songNotes)&&t.composedSong)}get isComposed(){return!0}get lastInstrument(){return this.instruments[this.instruments.length-1]}ensureInstruments(){const{columns:t,instruments:r}=this,n=Math.max(0,...t.map(i=>Math.max(...i.notes.map(o=>o.layer.asNumber())))).toString(2).split("").length;if(n>r.length){const i=new Array(n-r.length).fill(0).map(o=>new Bn);this.instruments=[...r,...i]}}static selection(t,r){return new Array(r-t).fill(0).map((n,i)=>i-t)}get selectedColumn(){return this.columns[this.selected]}switchLayer(t,r,n,i){this.columns.slice(r,r+t).forEach(s=>{s.notes.forEach(a=>{a.switchLayer(n,i)})})}swapLayer(t,r,n,i){this.columns.slice(r,r+t).forEach(s=>{s.notes.forEach(a=>{a.swapLayer(n,i)})})}pasteLayer(t,r,n){const i=t.map(o=>{const s=o.clone();return s.notes=s.notes.map(a=>(a.layer.setData(0),a.layer.set(n,!0),a)).filter(a=>!a.layer.isEmpty()),s});this.ensureInstruments(),this.pasteColumns(i,r)}moveNotesBy(t,r,n){const o=new Map([...Gb].reverse().map((a,l)=>[a,l])),s=new Map([...Gb].reverse().map((a,l)=>[l,a]));n==="all"?t.forEach(a=>{const l=this.columns[a];!l||(l.notes.forEach(u=>{const c=o.get(u.index),f=s.get(c+r);u.index=f!=null?f:-1}),l.notes=l.notes.filter(u=>u.index>=0&&u.index<15))}):t.forEach(a=>{const l=this.columns[a];l.notes.sort((u,c)=>r<0?u.index-c.index:c.index-u.index),l&&(l.notes.forEach(u=>{if(u=l.notes.find(m=>m.index===u.index),!u.layer.test(n))return;const c=o.get(u.index),f=s.get(c+r),p=l.notes.find(m=>m.index===f);if(p)p.setLayer(n,!0),u.setLayer(n,!1);else{if(!u.layer.test(n))return;u.setLayer(n,!1);const m=new Hs(f!=null?f:-1,new Ki);m.setLayer(n,!0),l.notes.push(m)}}),l.notes=l.notes.filter(u=>u.index>=0&&u.index<15&&!u.layer.isEmpty()))})}}const uG={"0000":1,"0010":2,"0110":2,"0100":2,1010:3,1e3:1,1110:3,1100:3,"0001":2,"0011":2,"0111":2,"0101":2,1011:3,1001:1,1111:3,1101:3};var jo=(e=>(e[e.Left=1]="Left",e[e.Right=2]="Right",e[e.Unknown=-1]="Unknown",e))(jo||{});class kf{static download(t,r,n="text/json"){const i=document.createElement("a");if(i.style.display="none",i.className="ignore_click_outside",i.download=r,document.body.appendChild(i),typeof t=="string"&&(i.href=`data:${n};charset=utf-8,${encodeURIComponent(t)}`,i.click()),t instanceof Blob){const o=URL.createObjectURL(t);i.href=o,i.click(),URL.revokeObjectURL(o)}i.remove()}}class cG{constructor(t=0,r=0){this.index=t,this.midi=r,this.status=r<0?"wrong":"right"}}class sc{constructor(t,r){this.type=t,this.midi=r,this.status=r<0?"wrong":"right"}}function aC(e,t){let r=[];for(let n=0;n<e.length;n+=t)r.push(e.slice(n,n+t));return r}function hG(e,t,r){return Math.abs(e-t)<Math.abs(e-r)?t:r}function lC(e,t,r){return e>=t-r&&e<=t+r}function ky(e){return e.charAt(0).toUpperCase()+e.slice(1)}function fG(e){var t,r;(r=(t=e==null?void 0:e.target)==null?void 0:t.blur)==null||r.call(t)}function dG(e){const t=["INPUT","SELECT","TEXTAREA","BUTTON","A"];return e?t.includes(e.tagName):!1}function hg(e){return e===0?jo.Left:e===2?jo.Right:jo.Unknown}class z2{static from(t){return new Array(t).fill(0).map(()=>[])}}function pG(e){return e instanceof Kr||e instanceof Nn}function uC(e){const t=Math.floor(e/6e4),r=Number((e%6e4/1e3).toFixed(0));return r===60?t+1+":00":t+":"+(r<10?"0":"")+r}function mG(){if(eg())return console.log("inTWA");const e=document.referrer.includes("android-app://");sessionStorage.setItem("isTwa",JSON.stringify(e))}function vG(e){try{if(e.data===void 0){if(e.pitchLevel=e.pitchLevel||0,e.songNotes!==void 0)return"oldSky"}else{if(e.type==="vsrg")return"vsrg";if(e.type==="composed"||e.data.isComposedVersion===!0)return Array.isArray(e.columns)?"newComposed":"none";if(e.type==="recorded"||e.data.isComposedVersion===!1)return Array.isArray(e.notes)?"newRecorded":"none"}}catch(t){return console.log(t),"none"}return"none"}function dd(...e){return e.map(r=>{var n;return typeof r=="string"?r:r[0]?r[1]:(n=r[2])!=null?n:""}).join(" ")}function gG(e,t){const r=[];for(;e.length>0;){const n=[e.shift()];let i=0;for(let o=0;o<e.length;o++)n[0].time>e[o].time-t&&i++;r.push([...n,...e.splice(0,i)])}return r}const yG=new Map(oo.map((e,t)=>[e,t]));function _G(e){var r;const t=(r=yG.get(e))!=null?r:0;return Number(Math.pow(2,t/12).toFixed(4))}function bG(e,t,r){const n=Math.floor(6e4/t);let i=0,o=0,s=0;for(let a=0;a<e.length;a++)s=n*rl[e[a].tempoChanger].changer,a<r&&(o+=s),i+=s;return{total:i,current:o}}function xR(e){const t=new Ki;return e.forEach(r=>{r.layer.toArray().forEach((n,i)=>{n===1&&t.set(i,!0)})}),t}function TR(e){const t=[];return e.notes.forEach(r=>{t[r.index]?t[r.index].push(r):t[r.index]=[r]}),t.filter(r=>Array.isArray(r))}function Ks(e){return new Promise(t=>{_D(t,e)})}function Mo(e){return 2*Math.round(e/2)}const ai=(e,t,r)=>Math.min(Math.max(e,t),r);function wG(e){let t;return function(r){clearTimeout(t),t=setTimeout(r,e)}}const cC={other:{settingVersion:Ae+59},data:{bpm:{name:"Bpm",tooltip:"Beats per minute, the speed of the song",type:"number",songSetting:!0,increment:5,threshold:[0,3600],value:220,category:"Song Settings"},pitch:{name:"Base pitch",tooltip:"The main pitch of the song",type:"select",songSetting:!0,value:"C",category:"Song Settings",options:[...oo]},beatMarks:{name:"Beat marks",type:"select",songSetting:!1,value:3,category:"Composer Settings",options:[3,4]},noteNameType:{name:"Note name type",tooltip:"The type of text which will be written on the note",type:"select",songSetting:!1,category:"Composer Settings",value:"Note name",options:dy},columnsPerCanvas:{name:"Number of visible columns",tooltip:"How many columns are visible at a time, more columns might cause lag",type:"select",songSetting:!1,category:"Composer Settings",value:35,options:[20,25,30,35,40,45,50]},caveMode:{name:"Reverb (cave mode)",tooltip:"Makes it sound like you are in a cave",category:"Composer Settings",type:"checkbox",songSetting:!1,value:!1},autosave:{name:"Autosave changes",tooltip:"Autosaves the changes to a song every 5 edits, and when you change page/change song",type:"checkbox",category:"Composer Settings",songSetting:!1,value:!1},useKeyboardSideButtons:{name:"Put next/previous column buttons around keyboard",tooltip:"Puts the buttons to select the next/previous column on the left/right of the keyboard",type:"checkbox",category:"Composer Settings",songSetting:!1,value:!1},syncTabs:{name:"Autoplay in all tabs (pc only)",tooltip:"Advanced feature, it syncs other browser tabs to all play at the same time",type:"checkbox",category:"Composer Settings",songSetting:!1,value:!1}}},hC={other:{settingVersion:Ae+59},data:{instrument:{name:"Instrument",tooltip:"The main (first) instrument of the player, will also be saved in the song you record",type:"instrument",songSetting:!0,value:Ar[0],volume:100,options:[...Ar],category:"Song Settings"},pitch:{name:"Pitch",tooltip:"The pitch of the player, will also be saved in the song you record",type:"select",songSetting:!0,value:"C",category:"Song Settings",options:[...oo]},bpm:{name:"Bpm",tooltip:"Beats per minute, used by the metronome and will be used when converting the song with the compsoer",type:"number",songSetting:!0,increment:5,threshold:[0,3600],value:220,category:"Song Settings"},syncSongData:{name:"Auto sync the song's instruments and pitch",tooltip:"Whenever you load a song, the instruments and pitch of that song will be loaded too",type:"checkbox",songSetting:!1,value:!0,category:"Player Settings"},metronomeBeats:{name:"Metronome beats",tooltip:"After how many times a stronger beat is played",type:"number",songSetting:!1,increment:1,value:4,threshold:[0,16],category:"Player Settings"},metronomeVolume:{name:"Metronome volume",tooltip:"The volume of the metronome",type:"slider",songSetting:!1,value:50,category:"Player Settings",threshold:[0,120]},caveMode:{name:"Reverb (cave mode)",tooltip:"Makes it sound like you are in a cave",type:"checkbox",songSetting:!1,value:!1,category:"Player Settings"},noteNameType:{name:"Note name type",tooltip:"The type of text which will be written on the note",type:"select",songSetting:!1,category:"Player Settings",value:"Note name",options:dy},keyboardSize:{name:"Keyboard size",tooltip:"Scales the keyboard size",type:"slider",songSetting:!1,value:100,category:"Player Settings",threshold:[80,150]},keyboardYPosition:{name:"Keyboard vertical position",tooltip:"The vertical position of the keyboard",type:"slider",songSetting:!1,value:-20,category:"Player Settings",threshold:[-60,180]},approachSpeed:{name:"Approach Rate (AR)",tooltip:"The time between when the notes appear and when they reach the end (in ms)",type:"number",increment:50,songSetting:!1,value:1500,category:"Player Settings",threshold:[0,5e3]},noteAnimation:{name:"Note animation",tooltip:"Toggle the animation of the notes (will reduce performance)",type:"checkbox",category:"Player Settings",songSetting:!1,value:!1},showVisualSheet:{name:"Show visual sheet",tooltip:"Show the sheet above the keyboard (might reduce performance)",type:"checkbox",songSetting:!1,value:!0,category:"Player Settings"}}},V2={settingVersion:Ae+4,enabled:!1,currentSource:"",notes:new Array(15).fill(0).map((e,t)=>new cG(t,-1)),shortcuts:[new sc("toggle_play",-1),new sc("next_column",-1),new sc("previous_column",-1),new sc("add_column",-1),new sc("remove_column",-1),new sc("change_layer",-1)]},SR={editable:!1,id:null,type:"theme",other:{backgroundImageMain:"",backgroundImageComposer:"",name:"Default"},data:{background:{name:"background",css:"background",value:"#394248",text:vt.text.light},primary:{name:"primary",css:"primary",value:"#495466",text:vt.text.light},secondary:{name:"secondary",css:"secondary",value:"#8c7063",text:vt.text.light},accent:{name:"accent",css:"accent",value:"#63aea7",text:vt.text.dark},composer_accent:{name:"composer_accent",css:"composer-accent",value:"#2A8C84",text:vt.text.dark},icon_color:{name:"icon_color",css:"icon-color",value:"#d3bd8e",text:vt.text.dark},menu_background:{name:"menu_background",css:"menu-background",value:"rgba(237, 229, 216, 0.95)",text:vt.text.dark},note_background:{name:"note_background",css:"note-background",value:"#495466",text:vt.text.note}}},fC={other:{settingVersion:Ae+9},data:{keys:{name:"Keys",tooltip:"How many keys the song has",type:"select",songSetting:!0,value:6,category:"Song Settings",options:[4,6]},bpm:{name:"Bpm",tooltip:"Beats per minute, the speed of the song",type:"number",songSetting:!0,increment:5,threshold:[0,3600],value:220,category:"Song Settings"},pitch:{name:"Base pitch",tooltip:"The main pitch of the song",type:"select",songSetting:!0,value:"C",category:"Song Settings",options:[...oo]},isVertical:{name:"Vertical editor",tooltip:"If the editor is set horizontally or vertically",type:"checkbox",songSetting:!1,value:!1,category:"Editor Settings"},maxFps:{name:"Max FPS (high values could lag)",tooltip:"The FPS limiter of the editor, higher values could more lag",type:"select",songSetting:!1,value:48,category:"Editor Settings",options:[24,30,48,60,90,120]},scrollSnap:{name:"Snap scroll to snap point",tooltip:"When scrolling, snap the timestamp to the closest snap point",type:"checkbox",category:"Editor Settings",songSetting:!1,value:!1},autosave:{name:"Autosave changes",tooltip:"Autosaves the changes to a song every 5 edits, and when you change page/change song",type:"checkbox",category:"Editor Settings",songSetting:!1,value:!1},difficulty:{name:"Difficulty",tooltip:"Higher values means the notes need to be pressed more accurately",type:"select",songSetting:!0,value:5,category:"Song Settings",options:new Array(10).fill(0).map((e,t)=>t+1)}}},dC={other:{settingVersion:Ae+2},data:{approachTime:{name:"Approaching time",tooltip:"The time between when the notes appear and when they reach the end (in ms)",type:"number",songSetting:!0,increment:100,threshold:[1,5e3],value:2e3,category:"Player Settings"},maxFps:{name:"Max FPS",tooltip:"The FPS limiter of the player, too high values could cause lag or stutters",type:"select",songSetting:!1,value:cu?48:60,category:"Player Settings",options:[24,30,48,60,90,120]},keyboardLayout:{name:"Keyboard layout",tooltip:"The keyboard layout of the player",type:"select",songSetting:!0,value:cu?"line":"circles",category:"Player Settings",options:["circles","line"]},offset:{name:"Audio Offset",tooltip:"An offset to the audio if it plays too early/late (in ms)",type:"number",songSetting:!0,increment:2,threshold:[-1e3,1e3],value:0,category:"Player Settings"},verticalOffset:{name:"Vertical position",tooltip:"The Vertical offset for the line layout",type:"slider",songSetting:!1,value:-0,category:"Layout Settings",threshold:[-40,40]},horizontalOffset:{name:"Horizontal position",tooltip:"The Horizontal offset for the line layout",type:"slider",songSetting:!1,value:0,category:"Layout Settings",threshold:[-40,40]}}},qb={other:{settingVersion:Ae+7},data:{instrument:{name:"Instrument",tooltip:"The main instrument of the keyboard",type:"instrument",songSetting:!1,value:Ar[0],volume:100,options:[...Ar],category:"Keyboard"},pitch:{name:"Pitch",tooltip:"The pitch of the keyboard",type:"select",songSetting:!1,value:"C",category:"Keyboard",options:[...oo]},metronomeBeats:{name:"Metronome beats",tooltip:"After how many times a stronger beat is played",type:"number",songSetting:!1,increment:1,value:4,threshold:[0,16],category:"Metronome"},metronomeVolume:{name:"Metronome volume",tooltip:"The volume of the metronome",type:"slider",songSetting:!1,value:50,category:"Metronome",threshold:[0,120]},metronomeBpm:{name:"Metronome bpm",tooltip:"The bpm of the metronome",type:"number",songSetting:!1,value:200,increment:5,category:"Metronome",threshold:[0,3600]},caveMode:{name:"Reverb (cave mode)",tooltip:"Makes it sound like you are in a cave",type:"checkbox",songSetting:!1,value:!1,category:"Keyboard"},noteNameType:{name:"Note name type",tooltip:"The type of text which will be written on the note",type:"select",songSetting:!1,category:"Keyboard",value:"No Text",options:dy},keyboardSize:{name:"Keyboard size",tooltip:"Scales the keyboard size",type:"slider",songSetting:!1,value:100,category:"Keyboard",threshold:[70,150]},keyboardYPosition:{name:"Vertical position",tooltip:"The vertical position of the keyboard",type:"slider",songSetting:!1,value:0,category:"Keyboard",threshold:[-100,100]}}};var ER={exports:{}},CR={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]},IR={exports:{}},xG=function(t){return!t||typeof t=="string"?!1:t instanceof Array||Array.isArray(t)||t.length>=0&&(t.splice instanceof Function||Object.getOwnPropertyDescriptor(t,t.length-1)&&t.constructor.name!=="String")},TG=xG,SG=Array.prototype.concat,EG=Array.prototype.slice,pC=IR.exports=function(t){for(var r=[],n=0,i=t.length;n<i;n++){var o=t[n];TG(o)?r=SG.call(r,EG.call(o)):r.push(o)}return r};pC.wrap=function(e){return function(){return e(pC(arguments))}};var pd=CR,Pp=IR.exports,NR=Object.hasOwnProperty,PR=Object.create(null);for(var X2 in pd)NR.call(pd,X2)&&(PR[pd[X2]]=X2);var Ii=ER.exports={to:{},get:{}};Ii.get=function(e){var t=e.substring(0,3).toLowerCase(),r,n;switch(t){case"hsl":r=Ii.get.hsl(e),n="hsl";break;case"hwb":r=Ii.get.hwb(e),n="hwb";break;default:r=Ii.get.rgb(e),n="rgb";break}return r?{model:n,value:r}:null};Ii.get.rgb=function(e){if(!e)return null;var t=/^#([a-f0-9]{3,4})$/i,r=/^#([a-f0-9]{6})([a-f0-9]{2})?$/i,n=/^rgba?\(\s*([+-]?\d+)(?=[\s,])\s*(?:,\s*)?([+-]?\d+)(?=[\s,])\s*(?:,\s*)?([+-]?\d+)\s*(?:[,|\/]\s*([+-]?[\d\.]+)(%?)\s*)?\)$/,i=/^rgba?\(\s*([+-]?[\d\.]+)\%\s*,?\s*([+-]?[\d\.]+)\%\s*,?\s*([+-]?[\d\.]+)\%\s*(?:[,|\/]\s*([+-]?[\d\.]+)(%?)\s*)?\)$/,o=/^(\w+)$/,s=[0,0,0,1],a,l,u;if(a=e.match(r)){for(u=a[2],a=a[1],l=0;l<3;l++){var c=l*2;s[l]=parseInt(a.slice(c,c+2),16)}u&&(s[3]=parseInt(u,16)/255)}else if(a=e.match(t)){for(a=a[1],u=a[3],l=0;l<3;l++)s[l]=parseInt(a[l]+a[l],16);u&&(s[3]=parseInt(u+u,16)/255)}else if(a=e.match(n)){for(l=0;l<3;l++)s[l]=parseInt(a[l+1],0);a[4]&&(a[5]?s[3]=parseFloat(a[4])*.01:s[3]=parseFloat(a[4]))}else if(a=e.match(i)){for(l=0;l<3;l++)s[l]=Math.round(parseFloat(a[l+1])*2.55);a[4]&&(a[5]?s[3]=parseFloat(a[4])*.01:s[3]=parseFloat(a[4]))}else return(a=e.match(o))?a[1]==="transparent"?[0,0,0,0]:NR.call(pd,a[1])?(s=pd[a[1]],s[3]=1,s):null:null;for(l=0;l<3;l++)s[l]=Xa(s[l],0,255);return s[3]=Xa(s[3],0,1),s};Ii.get.hsl=function(e){if(!e)return null;var t=/^hsla?\(\s*([+-]?(?:\d{0,3}\.)?\d+)(?:deg)?\s*,?\s*([+-]?[\d\.]+)%\s*,?\s*([+-]?[\d\.]+)%\s*(?:[,|\/]\s*([+-]?(?=\.\d|\d)(?:0|[1-9]\d*)?(?:\.\d*)?(?:[eE][+-]?\d+)?)\s*)?\)$/,r=e.match(t);if(r){var n=parseFloat(r[4]),i=(parseFloat(r[1])%360+360)%360,o=Xa(parseFloat(r[2]),0,100),s=Xa(parseFloat(r[3]),0,100),a=Xa(isNaN(n)?1:n,0,1);return[i,o,s,a]}return null};Ii.get.hwb=function(e){if(!e)return null;var t=/^hwb\(\s*([+-]?\d{0,3}(?:\.\d+)?)(?:deg)?\s*,\s*([+-]?[\d\.]+)%\s*,\s*([+-]?[\d\.]+)%\s*(?:,\s*([+-]?(?=\.\d|\d)(?:0|[1-9]\d*)?(?:\.\d*)?(?:[eE][+-]?\d+)?)\s*)?\)$/,r=e.match(t);if(r){var n=parseFloat(r[4]),i=(parseFloat(r[1])%360+360)%360,o=Xa(parseFloat(r[2]),0,100),s=Xa(parseFloat(r[3]),0,100),a=Xa(isNaN(n)?1:n,0,1);return[i,o,s,a]}return null};Ii.to.hex=function(){var e=Pp(arguments);return"#"+nv(e[0])+nv(e[1])+nv(e[2])+(e[3]<1?nv(Math.round(e[3]*255)):"")};Ii.to.rgb=function(){var e=Pp(arguments);return e.length<4||e[3]===1?"rgb("+Math.round(e[0])+", "+Math.round(e[1])+", "+Math.round(e[2])+")":"rgba("+Math.round(e[0])+", "+Math.round(e[1])+", "+Math.round(e[2])+", "+e[3]+")"};Ii.to.rgb.percent=function(){var e=Pp(arguments),t=Math.round(e[0]/255*100),r=Math.round(e[1]/255*100),n=Math.round(e[2]/255*100);return e.length<4||e[3]===1?"rgb("+t+"%, "+r+"%, "+n+"%)":"rgba("+t+"%, "+r+"%, "+n+"%, "+e[3]+")"};Ii.to.hsl=function(){var e=Pp(arguments);return e.length<4||e[3]===1?"hsl("+e[0]+", "+e[1]+"%, "+e[2]+"%)":"hsla("+e[0]+", "+e[1]+"%, "+e[2]+"%, "+e[3]+")"};Ii.to.hwb=function(){var e=Pp(arguments),t="";return e.length>=4&&e[3]!==1&&(t=", "+e[3]),"hwb("+e[0]+", "+e[1]+"%, "+e[2]+"%"+t+")"};Ii.to.keyword=function(e){return PR[e.slice(0,3)]};function Xa(e,t,r){return Math.min(Math.max(t,e),r)}function nv(e){var t=Math.round(e).toString(16).toUpperCase();return t.length<2?"0"+t:t}const jd=CR,AR={};for(const e of Object.keys(jd))AR[jd[e]]=e;const He={rgb:{channels:3,labels:"rgb"},hsl:{channels:3,labels:"hsl"},hsv:{channels:3,labels:"hsv"},hwb:{channels:3,labels:"hwb"},cmyk:{channels:4,labels:"cmyk"},xyz:{channels:3,labels:"xyz"},lab:{channels:3,labels:"lab"},lch:{channels:3,labels:"lch"},hex:{channels:1,labels:["hex"]},keyword:{channels:1,labels:["keyword"]},ansi16:{channels:1,labels:["ansi16"]},ansi256:{channels:1,labels:["ansi256"]},hcg:{channels:3,labels:["h","c","g"]},apple:{channels:3,labels:["r16","g16","b16"]},gray:{channels:1,labels:["gray"]}};var RR=He;for(const e of Object.keys(He)){if(!("channels"in He[e]))throw new Error("missing channels property: "+e);if(!("labels"in He[e]))throw new Error("missing channel labels property: "+e);if(He[e].labels.length!==He[e].channels)throw new Error("channel and label counts mismatch: "+e);const{channels:t,labels:r}=He[e];delete He[e].channels,delete He[e].labels,Object.defineProperty(He[e],"channels",{value:t}),Object.defineProperty(He[e],"labels",{value:r})}He.rgb.hsl=function(e){const t=e[0]/255,r=e[1]/255,n=e[2]/255,i=Math.min(t,r,n),o=Math.max(t,r,n),s=o-i;let a,l;o===i?a=0:t===o?a=(r-n)/s:r===o?a=2+(n-t)/s:n===o&&(a=4+(t-r)/s),a=Math.min(a*60,360),a<0&&(a+=360);const u=(i+o)/2;return o===i?l=0:u<=.5?l=s/(o+i):l=s/(2-o-i),[a,l*100,u*100]};He.rgb.hsv=function(e){let t,r,n,i,o;const s=e[0]/255,a=e[1]/255,l=e[2]/255,u=Math.max(s,a,l),c=u-Math.min(s,a,l),f=function(p){return(u-p)/6/c+1/2};return c===0?(i=0,o=0):(o=c/u,t=f(s),r=f(a),n=f(l),s===u?i=n-r:a===u?i=1/3+t-n:l===u&&(i=2/3+r-t),i<0?i+=1:i>1&&(i-=1)),[i*360,o*100,u*100]};He.rgb.hwb=function(e){const t=e[0],r=e[1];let n=e[2];const i=He.rgb.hsl(e)[0],o=1/255*Math.min(t,Math.min(r,n));return n=1-1/255*Math.max(t,Math.max(r,n)),[i,o*100,n*100]};He.rgb.cmyk=function(e){const t=e[0]/255,r=e[1]/255,n=e[2]/255,i=Math.min(1-t,1-r,1-n),o=(1-t-i)/(1-i)||0,s=(1-r-i)/(1-i)||0,a=(1-n-i)/(1-i)||0;return[o*100,s*100,a*100,i*100]};function CG(e,t){return(e[0]-t[0])**2+(e[1]-t[1])**2+(e[2]-t[2])**2}He.rgb.keyword=function(e){const t=AR[e];if(t)return t;let r=1/0,n;for(const i of Object.keys(jd)){const o=jd[i],s=CG(e,o);s<r&&(r=s,n=i)}return n};He.keyword.rgb=function(e){return jd[e]};He.rgb.xyz=function(e){let t=e[0]/255,r=e[1]/255,n=e[2]/255;t=t>.04045?((t+.055)/1.055)**2.4:t/12.92,r=r>.04045?((r+.055)/1.055)**2.4:r/12.92,n=n>.04045?((n+.055)/1.055)**2.4:n/12.92;const i=t*.4124+r*.3576+n*.1805,o=t*.2126+r*.7152+n*.0722,s=t*.0193+r*.1192+n*.9505;return[i*100,o*100,s*100]};He.rgb.lab=function(e){const t=He.rgb.xyz(e);let r=t[0],n=t[1],i=t[2];r/=95.047,n/=100,i/=108.883,r=r>.008856?r**(1/3):7.787*r+16/116,n=n>.008856?n**(1/3):7.787*n+16/116,i=i>.008856?i**(1/3):7.787*i+16/116;const o=116*n-16,s=500*(r-n),a=200*(n-i);return[o,s,a]};He.hsl.rgb=function(e){const t=e[0]/360,r=e[1]/100,n=e[2]/100;let i,o,s;if(r===0)return s=n*255,[s,s,s];n<.5?i=n*(1+r):i=n+r-n*r;const a=2*n-i,l=[0,0,0];for(let u=0;u<3;u++)o=t+1/3*-(u-1),o<0&&o++,o>1&&o--,6*o<1?s=a+(i-a)*6*o:2*o<1?s=i:3*o<2?s=a+(i-a)*(2/3-o)*6:s=a,l[u]=s*255;return l};He.hsl.hsv=function(e){const t=e[0];let r=e[1]/100,n=e[2]/100,i=r;const o=Math.max(n,.01);n*=2,r*=n<=1?n:2-n,i*=o<=1?o:2-o;const s=(n+r)/2,a=n===0?2*i/(o+i):2*r/(n+r);return[t,a*100,s*100]};He.hsv.rgb=function(e){const t=e[0]/60,r=e[1]/100;let n=e[2]/100;const i=Math.floor(t)%6,o=t-Math.floor(t),s=255*n*(1-r),a=255*n*(1-r*o),l=255*n*(1-r*(1-o));switch(n*=255,i){case 0:return[n,l,s];case 1:return[a,n,s];case 2:return[s,n,l];case 3:return[s,a,n];case 4:return[l,s,n];case 5:return[n,s,a]}};He.hsv.hsl=function(e){const t=e[0],r=e[1]/100,n=e[2]/100,i=Math.max(n,.01);let o,s;s=(2-r)*n;const a=(2-r)*i;return o=r*i,o/=a<=1?a:2-a,o=o||0,s/=2,[t,o*100,s*100]};He.hwb.rgb=function(e){const t=e[0]/360;let r=e[1]/100,n=e[2]/100;const i=r+n;let o;i>1&&(r/=i,n/=i);const s=Math.floor(6*t),a=1-n;o=6*t-s,(s&1)!==0&&(o=1-o);const l=r+o*(a-r);let u,c,f;switch(s){default:case 6:case 0:u=a,c=l,f=r;break;case 1:u=l,c=a,f=r;break;case 2:u=r,c=a,f=l;break;case 3:u=r,c=l,f=a;break;case 4:u=l,c=r,f=a;break;case 5:u=a,c=r,f=l;break}return[u*255,c*255,f*255]};He.cmyk.rgb=function(e){const t=e[0]/100,r=e[1]/100,n=e[2]/100,i=e[3]/100,o=1-Math.min(1,t*(1-i)+i),s=1-Math.min(1,r*(1-i)+i),a=1-Math.min(1,n*(1-i)+i);return[o*255,s*255,a*255]};He.xyz.rgb=function(e){const t=e[0]/100,r=e[1]/100,n=e[2]/100;let i,o,s;return i=t*3.2406+r*-1.5372+n*-.4986,o=t*-.9689+r*1.8758+n*.0415,s=t*.0557+r*-.204+n*1.057,i=i>.0031308?1.055*i**(1/2.4)-.055:i*12.92,o=o>.0031308?1.055*o**(1/2.4)-.055:o*12.92,s=s>.0031308?1.055*s**(1/2.4)-.055:s*12.92,i=Math.min(Math.max(0,i),1),o=Math.min(Math.max(0,o),1),s=Math.min(Math.max(0,s),1),[i*255,o*255,s*255]};He.xyz.lab=function(e){let t=e[0],r=e[1],n=e[2];t/=95.047,r/=100,n/=108.883,t=t>.008856?t**(1/3):7.787*t+16/116,r=r>.008856?r**(1/3):7.787*r+16/116,n=n>.008856?n**(1/3):7.787*n+16/116;const i=116*r-16,o=500*(t-r),s=200*(r-n);return[i,o,s]};He.lab.xyz=function(e){const t=e[0],r=e[1],n=e[2];let i,o,s;o=(t+16)/116,i=r/500+o,s=o-n/200;const a=o**3,l=i**3,u=s**3;return o=a>.008856?a:(o-16/116)/7.787,i=l>.008856?l:(i-16/116)/7.787,s=u>.008856?u:(s-16/116)/7.787,i*=95.047,o*=100,s*=108.883,[i,o,s]};He.lab.lch=function(e){const t=e[0],r=e[1],n=e[2];let i;i=Math.atan2(n,r)*360/2/Math.PI,i<0&&(i+=360);const s=Math.sqrt(r*r+n*n);return[t,s,i]};He.lch.lab=function(e){const t=e[0],r=e[1],i=e[2]/360*2*Math.PI,o=r*Math.cos(i),s=r*Math.sin(i);return[t,o,s]};He.rgb.ansi16=function(e,t=null){const[r,n,i]=e;let o=t===null?He.rgb.hsv(e)[2]:t;if(o=Math.round(o/50),o===0)return 30;let s=30+(Math.round(i/255)<<2|Math.round(n/255)<<1|Math.round(r/255));return o===2&&(s+=60),s};He.hsv.ansi16=function(e){return He.rgb.ansi16(He.hsv.rgb(e),e[2])};He.rgb.ansi256=function(e){const t=e[0],r=e[1],n=e[2];return t===r&&r===n?t<8?16:t>248?231:Math.round((t-8)/247*24)+232:16+36*Math.round(t/255*5)+6*Math.round(r/255*5)+Math.round(n/255*5)};He.ansi16.rgb=function(e){let t=e%10;if(t===0||t===7)return e>50&&(t+=3.5),t=t/10.5*255,[t,t,t];const r=(~~(e>50)+1)*.5,n=(t&1)*r*255,i=(t>>1&1)*r*255,o=(t>>2&1)*r*255;return[n,i,o]};He.ansi256.rgb=function(e){if(e>=232){const o=(e-232)*10+8;return[o,o,o]}e-=16;let t;const r=Math.floor(e/36)/5*255,n=Math.floor((t=e%36)/6)/5*255,i=t%6/5*255;return[r,n,i]};He.rgb.hex=function(e){const r=(((Math.round(e[0])&255)<<16)+((Math.round(e[1])&255)<<8)+(Math.round(e[2])&255)).toString(16).toUpperCase();return"000000".substring(r.length)+r};He.hex.rgb=function(e){const t=e.toString(16).match(/[a-f0-9]{6}|[a-f0-9]{3}/i);if(!t)return[0,0,0];let r=t[0];t[0].length===3&&(r=r.split("").map(a=>a+a).join(""));const n=parseInt(r,16),i=n>>16&255,o=n>>8&255,s=n&255;return[i,o,s]};He.rgb.hcg=function(e){const t=e[0]/255,r=e[1]/255,n=e[2]/255,i=Math.max(Math.max(t,r),n),o=Math.min(Math.min(t,r),n),s=i-o;let a,l;return s<1?a=o/(1-s):a=0,s<=0?l=0:i===t?l=(r-n)/s%6:i===r?l=2+(n-t)/s:l=4+(t-r)/s,l/=6,l%=1,[l*360,s*100,a*100]};He.hsl.hcg=function(e){const t=e[1]/100,r=e[2]/100,n=r<.5?2*t*r:2*t*(1-r);let i=0;return n<1&&(i=(r-.5*n)/(1-n)),[e[0],n*100,i*100]};He.hsv.hcg=function(e){const t=e[1]/100,r=e[2]/100,n=t*r;let i=0;return n<1&&(i=(r-n)/(1-n)),[e[0],n*100,i*100]};He.hcg.rgb=function(e){const t=e[0]/360,r=e[1]/100,n=e[2]/100;if(r===0)return[n*255,n*255,n*255];const i=[0,0,0],o=t%1*6,s=o%1,a=1-s;let l=0;switch(Math.floor(o)){case 0:i[0]=1,i[1]=s,i[2]=0;break;case 1:i[0]=a,i[1]=1,i[2]=0;break;case 2:i[0]=0,i[1]=1,i[2]=s;break;case 3:i[0]=0,i[1]=a,i[2]=1;break;case 4:i[0]=s,i[1]=0,i[2]=1;break;default:i[0]=1,i[1]=0,i[2]=a}return l=(1-r)*n,[(r*i[0]+l)*255,(r*i[1]+l)*255,(r*i[2]+l)*255]};He.hcg.hsv=function(e){const t=e[1]/100,r=e[2]/100,n=t+r*(1-t);let i=0;return n>0&&(i=t/n),[e[0],i*100,n*100]};He.hcg.hsl=function(e){const t=e[1]/100,n=e[2]/100*(1-t)+.5*t;let i=0;return n>0&&n<.5?i=t/(2*n):n>=.5&&n<1&&(i=t/(2*(1-n))),[e[0],i*100,n*100]};He.hcg.hwb=function(e){const t=e[1]/100,r=e[2]/100,n=t+r*(1-t);return[e[0],(n-t)*100,(1-n)*100]};He.hwb.hcg=function(e){const t=e[1]/100,r=e[2]/100,n=1-r,i=n-t;let o=0;return i<1&&(o=(n-i)/(1-i)),[e[0],i*100,o*100]};He.apple.rgb=function(e){return[e[0]/65535*255,e[1]/65535*255,e[2]/65535*255]};He.rgb.apple=function(e){return[e[0]/255*65535,e[1]/255*65535,e[2]/255*65535]};He.gray.rgb=function(e){return[e[0]/100*255,e[0]/100*255,e[0]/100*255]};He.gray.hsl=function(e){return[0,0,e[0]]};He.gray.hsv=He.gray.hsl;He.gray.hwb=function(e){return[0,100,e[0]]};He.gray.cmyk=function(e){return[0,0,0,e[0]]};He.gray.lab=function(e){return[e[0],0,0]};He.gray.hex=function(e){const t=Math.round(e[0]/100*255)&255,n=((t<<16)+(t<<8)+t).toString(16).toUpperCase();return"000000".substring(n.length)+n};He.rgb.gray=function(e){return[(e[0]+e[1]+e[2])/3/255*100]};const fg=RR;function IG(){const e={},t=Object.keys(fg);for(let r=t.length,n=0;n<r;n++)e[t[n]]={distance:-1,parent:null};return e}function NG(e){const t=IG(),r=[e];for(t[e].distance=0;r.length;){const n=r.pop(),i=Object.keys(fg[n]);for(let o=i.length,s=0;s<o;s++){const a=i[s],l=t[a];l.distance===-1&&(l.distance=t[n].distance+1,l.parent=n,r.unshift(a))}}return t}function PG(e,t){return function(r){return t(e(r))}}function AG(e,t){const r=[t[e].parent,e];let n=fg[t[e].parent][e],i=t[e].parent;for(;t[i].parent;)r.unshift(t[i].parent),n=PG(fg[t[i].parent][i],n),i=t[i].parent;return n.conversion=r,n}var RG=function(e){const t=NG(e),r={},n=Object.keys(t);for(let i=n.length,o=0;o<i;o++){const s=n[o];t[s].parent!==null&&(r[s]=AG(s,t))}return r};const Zb=RR,kG=RG,bc={},OG=Object.keys(Zb);function LG(e){const t=function(...r){const n=r[0];return n==null?n:(n.length>1&&(r=n),e(r))};return"conversion"in e&&(t.conversion=e.conversion),t}function UG(e){const t=function(...r){const n=r[0];if(n==null)return n;n.length>1&&(r=n);const i=e(r);if(typeof i=="object")for(let o=i.length,s=0;s<o;s++)i[s]=Math.round(i[s]);return i};return"conversion"in e&&(t.conversion=e.conversion),t}OG.forEach(e=>{bc[e]={},Object.defineProperty(bc[e],"channels",{value:Zb[e].channels}),Object.defineProperty(bc[e],"labels",{value:Zb[e].labels});const t=kG(e);Object.keys(t).forEach(n=>{const i=t[n];bc[e][n]=UG(i),bc[e][n].raw=LG(i)})});var FG=bc;const wc=ER.exports,xi=FG,kR=["keyword","gray","hex"],Jb={};for(const e of Object.keys(xi))Jb[[...xi[e].labels].sort().join("")]=e;const dg={};function sn(e,t){if(!(this instanceof sn))return new sn(e,t);if(t&&t in kR&&(t=null),t&&!(t in xi))throw new Error("Unknown model: "+t);let r,n;if(e==null)this.model="rgb",this.color=[0,0,0],this.valpha=1;else if(e instanceof sn)this.model=e.model,this.color=[...e.color],this.valpha=e.valpha;else if(typeof e=="string"){const i=wc.get(e);if(i===null)throw new Error("Unable to parse color from string: "+e);this.model=i.model,n=xi[this.model].channels,this.color=i.value.slice(0,n),this.valpha=typeof i.value[n]=="number"?i.value[n]:1}else if(e.length>0){this.model=t||"rgb",n=xi[this.model].channels;const i=Array.prototype.slice.call(e,0,n);this.color=Qb(i,n),this.valpha=typeof e[n]=="number"?e[n]:1}else if(typeof e=="number")this.model="rgb",this.color=[e>>16&255,e>>8&255,e&255],this.valpha=1;else{this.valpha=1;const i=Object.keys(e);"alpha"in e&&(i.splice(i.indexOf("alpha"),1),this.valpha=typeof e.alpha=="number"?e.alpha:0);const o=i.sort().join("");if(!(o in Jb))throw new Error("Unable to parse color from object: "+JSON.stringify(e));this.model=Jb[o];const{labels:s}=xi[this.model],a=[];for(r=0;r<s.length;r++)a.push(e[s[r]]);this.color=Qb(a)}if(dg[this.model])for(n=xi[this.model].channels,r=0;r<n;r++){const i=dg[this.model][r];i&&(this.color[r]=i(this.color[r]))}this.valpha=Math.max(0,Math.min(1,this.valpha)),Object.freeze&&Object.freeze(this)}sn.prototype={toString(){return this.string()},toJSON(){return this[this.model]()},string(e){let t=this.model in wc.to?this:this.rgb();t=t.round(typeof e=="number"?e:1);const r=t.valpha===1?t.color:[...t.color,this.valpha];return wc.to[t.model](r)},percentString(e){const t=this.rgb().round(typeof e=="number"?e:1),r=t.valpha===1?t.color:[...t.color,this.valpha];return wc.to.rgb.percent(r)},array(){return this.valpha===1?[...this.color]:[...this.color,this.valpha]},object(){const e={},{channels:t}=xi[this.model],{labels:r}=xi[this.model];for(let n=0;n<t;n++)e[r[n]]=this.color[n];return this.valpha!==1&&(e.alpha=this.valpha),e},unitArray(){const e=this.rgb().color;return e[0]/=255,e[1]/=255,e[2]/=255,this.valpha!==1&&e.push(this.valpha),e},unitObject(){const e=this.rgb().object();return e.r/=255,e.g/=255,e.b/=255,this.valpha!==1&&(e.alpha=this.valpha),e},round(e){return e=Math.max(e||0,0),new sn([...this.color.map(BG(e)),this.valpha],this.model)},alpha(e){return e!==void 0?new sn([...this.color,Math.max(0,Math.min(1,e))],this.model):this.valpha},red:_r("rgb",0,Vr(255)),green:_r("rgb",1,Vr(255)),blue:_r("rgb",2,Vr(255)),hue:_r(["hsl","hsv","hsl","hwb","hcg"],0,e=>(e%360+360)%360),saturationl:_r("hsl",1,Vr(100)),lightness:_r("hsl",2,Vr(100)),saturationv:_r("hsv",1,Vr(100)),value:_r("hsv",2,Vr(100)),chroma:_r("hcg",1,Vr(100)),gray:_r("hcg",2,Vr(100)),white:_r("hwb",1,Vr(100)),wblack:_r("hwb",2,Vr(100)),cyan:_r("cmyk",0,Vr(100)),magenta:_r("cmyk",1,Vr(100)),yellow:_r("cmyk",2,Vr(100)),black:_r("cmyk",3,Vr(100)),x:_r("xyz",0,Vr(95.047)),y:_r("xyz",1,Vr(100)),z:_r("xyz",2,Vr(108.833)),l:_r("lab",0,Vr(100)),a:_r("lab",1),b:_r("lab",2),keyword(e){return e!==void 0?new sn(e):xi[this.model].keyword(this.color)},hex(e){return e!==void 0?new sn(e):wc.to.hex(this.rgb().round().color)},hexa(e){if(e!==void 0)return new sn(e);const t=this.rgb().round().color;let r=Math.round(this.valpha*255).toString(16).toUpperCase();return r.length===1&&(r="0"+r),wc.to.hex(t)+r},rgbNumber(){const e=this.rgb().color;return(e[0]&255)<<16|(e[1]&255)<<8|e[2]&255},luminosity(){const e=this.rgb().color,t=[];for(const[r,n]of e.entries()){const i=n/255;t[r]=i<=.04045?i/12.92:((i+.055)/1.055)**2.4}return .2126*t[0]+.7152*t[1]+.0722*t[2]},contrast(e){const t=this.luminosity(),r=e.luminosity();return t>r?(t+.05)/(r+.05):(r+.05)/(t+.05)},level(e){const t=this.contrast(e);return t>=7?"AAA":t>=4.5?"AA":""},isDark(){const e=this.rgb().color;return(e[0]*2126+e[1]*7152+e[2]*722)/1e4<128},isLight(){return!this.isDark()},negate(){const e=this.rgb();for(let t=0;t<3;t++)e.color[t]=255-e.color[t];return e},lighten(e){const t=this.hsl();return t.color[2]+=t.color[2]*e,t},darken(e){const t=this.hsl();return t.color[2]-=t.color[2]*e,t},saturate(e){const t=this.hsl();return t.color[1]+=t.color[1]*e,t},desaturate(e){const t=this.hsl();return t.color[1]-=t.color[1]*e,t},whiten(e){const t=this.hwb();return t.color[1]+=t.color[1]*e,t},blacken(e){const t=this.hwb();return t.color[2]+=t.color[2]*e,t},grayscale(){const e=this.rgb().color,t=e[0]*.3+e[1]*.59+e[2]*.11;return sn.rgb(t,t,t)},fade(e){return this.alpha(this.valpha-this.valpha*e)},opaquer(e){return this.alpha(this.valpha+this.valpha*e)},rotate(e){const t=this.hsl();let r=t.color[0];return r=(r+e)%360,r=r<0?360+r:r,t.color[0]=r,t},mix(e,t){if(!e||!e.rgb)throw new Error('Argument to "mix" was not a Color instance, but rather an instance of '+typeof e);const r=e.rgb(),n=this.rgb(),i=t===void 0?.5:t,o=2*i-1,s=r.alpha()-n.alpha(),a=((o*s===-1?o:(o+s)/(1+o*s))+1)/2,l=1-a;return sn.rgb(a*r.red()+l*n.red(),a*r.green()+l*n.green(),a*r.blue()+l*n.blue(),r.alpha()*i+n.alpha()*(1-i))}};for(const e of Object.keys(xi)){if(kR.includes(e))continue;const{channels:t}=xi[e];sn.prototype[e]=function(...r){return this.model===e?new sn(this):r.length>0?new sn(r,e):new sn([...DG(xi[this.model][e].raw(this.color)),this.valpha],e)},sn[e]=function(...r){let n=r[0];return typeof n=="number"&&(n=Qb(r,t)),new sn(n,e)}}function MG(e,t){return Number(e.toFixed(t))}function BG(e){return function(t){return MG(t,e)}}function _r(e,t,r){e=Array.isArray(e)?e:[e];for(const n of e)(dg[n]||(dg[n]=[]))[t]=r;return e=e[0],function(n){let i;return n!==void 0?(r&&(n=r(n)),i=this[e](),i.color[t]=n,i):(i=this[e]().color[t],r&&(i=r(i)),i)}}function Vr(e){return function(t){return Math.max(0,Math.min(e,t))}}function DG(e){return Array.isArray(e)?e:[e]}function Qb(e,t){for(let r=0;r<t;r++)typeof e[r]!="number"&&(e[r]=0);return e}var GG=sn;const Et=GG;class La extends Error{constructor(t,r){super(t),this.type="",this.type=r!=null?r:""}static getMessageFromAny(t){return t instanceof La||t instanceof Error?t.message:typeof t=="string"?t:"Unknown error"}}var jG=Object.defineProperty,$G=Object.getOwnPropertyDescriptor,OR=(e,t,r,n)=>{for(var i=n>1?void 0:n?$G(t,r):t,o=e.length-1,s;o>=0;o--)(s=e[o])&&(i=(n?s(t,r,i):s(i))||i);return n&&i&&jG(t,r,i),i},l0=(e=>(e.ERROR="var(--red)",e.WARN="var(--orange)",e.SUCCESS="var(--accent)",e))(l0||{});class s4{constructor(){this.lastId=0,this.toasts=[],this.pillState={visible:!1,text:""},this.log=(t,r=3500,n="var(--accent)")=>{const i=++this.lastId;this.toasts.push({text:t,timestamp:Date.now(),timeout:r,visible:!0,id:i,type:n}),setTimeout(()=>this.hideToast(i),r),setTimeout(()=>this.removeToast(i),r+300)},this.error=(t,r)=>{this.log(t,r,"var(--red)")},this.logAppError=t=>{t instanceof La?this.error(t.message):console.error(t)},this.success=(t,r)=>{this.log(t,r,"var(--accent)")},this.warn=(t,r)=>{this.log(t,r,"var(--orange)")},this.clearToasts=()=>{this.toasts.splice(0,this.toasts.length)},this.hideToast=t=>{this.setState(t,{visible:!1})},this.removeToast=t=>{this.toasts.splice(0,this.toasts.length,...this.toasts.filter(r=>r.id!==t))},this.setState=(t,r)=>{const n=this.toasts.find(i=>i.id===t);n&&Object.assign(n,r)},this.setPillState=t=>{Object.assign(this.pillState,t)},this.showPill=t=>{this.setPillState({text:t,visible:!0})},this.hidePill=()=>{this.setPillState({visible:!1})},Li(this)}}OR([yt],s4.prototype,"toasts",2);OR([yt],s4.prototype,"pillState",2);const me=new s4,HG=[{id:"Pink",type:"theme",editable:!1,other:{backgroundImageMain:"",backgroundImageComposer:"",name:"Pink"},data:{background:{name:"background",css:"background",value:"rgb(48, 49, 64)",text:"#edeae5"},primary:{name:"primary",css:"primary",value:"rgb(23, 14, 46)",text:"#edeae5"},secondary:{name:"secondary",css:"secondary",value:"rgb(212, 171, 171)",text:"#151414"},accent:{name:"accent",css:"accent",value:"#DC45B4",text:"#edeae5"},composer_accent:{name:"composer_accent",css:"composer-accent",value:"rgb(132, 28, 104)",text:"#edeae5"},icon_color:{name:"icon_color",css:"icon-color",value:"#FBDDFF",text:"#151414"},menu_background:{name:"menu_background",css:"menu-background",value:"rgb(212, 173, 194)",text:"#151414"},note_background:{name:"note_background",css:"note-background",value:"rgb(13, 6, 33)",text:"#edeae5"}}},{editable:!1,id:"Blue",type:"theme",other:{backgroundImageMain:"",backgroundImageComposer:"",name:"Blue"},data:{background:{name:"background",css:"background",value:"rgb(48, 49, 64)",text:"#edeae5"},primary:{name:"primary",css:"primary",value:"rgb(14, 32, 46)",text:"#edeae5"},secondary:{name:"secondary",css:"secondary",value:"rgb(171, 212, 206)",text:"#151414"},accent:{name:"accent",css:"accent",value:"rgb(56, 94, 201)",text:"#edeae5"},composer_accent:{name:"composer_accent",css:"composer-accent",value:"rgb(56, 94, 201)",text:"#edeae5"},icon_color:{name:"icon_color",css:"icon-color",value:"rgb(135, 179, 255)",text:"#151414"},menu_background:{name:"menu_background",css:"menu-background",value:"#c4cfd4",text:"#151414"},note_background:{name:"note_background",css:"note-background",value:"rgb(14, 32, 46)",text:"#edeae5"}}},{editable:!1,id:"Rainy_Lullaby",type:"theme",other:{backgroundImageMain:"./assets/images/Rainy_Theme.png",backgroundImageComposer:"./assets/images/Rainy_Theme.png",name:"Rainy Lullaby"},data:{background:{name:"background",css:"background",value:"#394248",text:"#edeae5"},primary:{name:"primary",css:"primary",value:"#1a212a",text:"#edeae5"},secondary:{name:"secondary",css:"secondary",value:"#113244",text:"#edeae5"},accent:{name:"accent",css:"accent",value:"#88a8a4",text:"#151414"},composer_accent:{name:"composer_accent",css:"composer-accent",value:"#6D8582",text:"#edeae5"},icon_color:{name:"icon_color",css:"icon-color",value:"#5e7775",text:"#edeae5"},menu_background:{name:"menu_background",css:"menu-background",value:"rgba(237, 229, 216, 0.95)",text:"#151414"},note_background:{name:"note_background",css:"note-background",value:"#203141",text:"#edeae5"}}},{editable:!1,id:"Liyue",type:"theme",other:{backgroundImageMain:"./assets/images/Liyue_Theme.jpg",backgroundImageComposer:"./assets/images/Liyue_Theme.jpg",name:"Liyue"},data:{background:{name:"background",css:"background",value:"#3B5A62",text:"#edeae5"},primary:{name:"primary",css:"primary",value:"#486D78",text:"#edeae5"},secondary:{name:"secondary",css:"secondary",value:"rgb(228, 183, 119)",text:"#151414"},accent:{name:"accent",css:"accent",value:"#54928C",text:"#151414"},composer_accent:{name:"composer_accent",css:"composer-accent",value:"#54928C",text:"#edeae5"},icon_color:{name:"icon_color",css:"icon-color",value:"rgb(155, 220, 230)",text:"#151414"},menu_background:{name:"menu_background",css:"menu-background",value:"#E4D6C8",text:"#151414"},note_background:{name:"note_background",css:"note-background",value:"rgb(255, 229, 209)",text:"#151414"}}},{editable:!1,id:"Hacker_Theme",type:"theme",other:{backgroundImageMain:"",backgroundImageComposer:"",name:"Hacker"},data:{background:{name:"background",css:"background",value:"#070707",text:"#edeae5"},primary:{name:"primary",css:"primary",value:"#141a14",text:"#edeae5"},secondary:{name:"secondary",css:"secondary",value:"#00ff00",text:"#151414"},accent:{name:"accent",css:"accent",value:"#00ff00",text:"#151414"},composer_accent:{name:"composer_accent",css:"composer-accent",value:"#005700",text:"#edeae5"},icon_color:{name:"icon_color",css:"icon-color",value:"#00ff00",text:"#151414"},menu_background:{name:"menu_background",css:"menu-background",value:"#202820",text:"#edeae5"},note_background:{name:"note_background",css:"note-background",value:"#141a14",text:"#edeae5"}}},{editable:!1,id:"Snowy Night",type:"theme",other:{backgroundImageMain:"./assets/images/Snow_Theme.gif",backgroundImageComposer:"./assets/images/Snow_Theme.gif",name:"Snowy Night"},data:{background:{name:"background",css:"background",value:"rgb(0, 0, 0)",text:"#edeae5"},primary:{name:"primary",css:"primary",value:"#141414",text:"#edeae5"},secondary:{name:"secondary",css:"secondary",value:"rgb(255, 255, 255)",text:"#151414"},accent:{name:"accent",css:"accent",value:"rgb(255, 255, 255)",text:"#151414"},composer_accent:{name:"composer_accent",css:"composer-accent",value:"rgb(255, 255, 255)",text:"#858585"},icon_color:{name:"icon_color",css:"icon-color",value:"rgb(255, 255, 255)",text:"#151414"},menu_background:{name:"menu_background",css:"menu-background",value:"rgb(21, 21, 21)",text:"#edeae5"},note_background:{name:"note_background",css:"note-background",value:"rgb(0, 0, 0)",text:"#edeae5"}}}];var zG;function Wa(){}Wa.prototype=Object.create(null);function Yt(){Yt.init.call(this)}Yt.EventEmitter=Yt;Yt.usingDomains=!1;Yt.prototype.domain=void 0;Yt.prototype._events=void 0;Yt.prototype._maxListeners=void 0;Yt.defaultMaxListeners=10;Yt.init=function(){this.domain=null,Yt.usingDomains&&zG.active,(!this._events||this._events===Object.getPrototypeOf(this)._events)&&(this._events=new Wa,this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};Yt.prototype.setMaxListeners=function(t){if(typeof t!="number"||t<0||isNaN(t))throw new TypeError('"n" argument must be a positive number');return this._maxListeners=t,this};function LR(e){return e._maxListeners===void 0?Yt.defaultMaxListeners:e._maxListeners}Yt.prototype.getMaxListeners=function(){return LR(this)};function VG(e,t,r){if(t)e.call(r);else for(var n=e.length,i=Ap(e,n),o=0;o<n;++o)i[o].call(r)}function XG(e,t,r,n){if(t)e.call(r,n);else for(var i=e.length,o=Ap(e,i),s=0;s<i;++s)o[s].call(r,n)}function WG(e,t,r,n,i){if(t)e.call(r,n,i);else for(var o=e.length,s=Ap(e,o),a=0;a<o;++a)s[a].call(r,n,i)}function YG(e,t,r,n,i,o){if(t)e.call(r,n,i,o);else for(var s=e.length,a=Ap(e,s),l=0;l<s;++l)a[l].call(r,n,i,o)}function KG(e,t,r,n){if(t)e.apply(r,n);else for(var i=e.length,o=Ap(e,i),s=0;s<i;++s)o[s].apply(r,n)}Yt.prototype.emit=function(t){var r,n,i,o,s,a,l,u=t==="error";if(a=this._events,a)u=u&&a.error==null;else if(!u)return!1;if(l=this.domain,u){if(r=arguments[1],l)r||(r=new Error('Uncaught, unspecified "error" event')),r.domainEmitter=this,r.domain=l,r.domainThrown=!1,l.emit("error",r);else{if(r instanceof Error)throw r;var c=new Error('Uncaught, unspecified "error" event. ('+r+")");throw c.context=r,c}return!1}if(n=a[t],!n)return!1;var f=typeof n=="function";switch(i=arguments.length,i){case 1:VG(n,f,this);break;case 2:XG(n,f,this,arguments[1]);break;case 3:WG(n,f,this,arguments[1],arguments[2]);break;case 4:YG(n,f,this,arguments[1],arguments[2],arguments[3]);break;default:for(o=new Array(i-1),s=1;s<i;s++)o[s-1]=arguments[s];KG(n,f,this,o)}return!0};function UR(e,t,r,n){var i,o,s;if(typeof r!="function")throw new TypeError('"listener" argument must be a function');if(o=e._events,o?(o.newListener&&(e.emit("newListener",t,r.listener?r.listener:r),o=e._events),s=o[t]):(o=e._events=new Wa,e._eventsCount=0),!s)s=o[t]=r,++e._eventsCount;else if(typeof s=="function"?s=o[t]=n?[r,s]:[s,r]:n?s.unshift(r):s.push(r),!s.warned&&(i=LR(e),i&&i>0&&s.length>i)){s.warned=!0;var a=new Error("Possible EventEmitter memory leak detected. "+s.length+" "+t+" listeners added. Use emitter.setMaxListeners() to increase limit");a.name="MaxListenersExceededWarning",a.emitter=e,a.type=t,a.count=s.length,qG(a)}return e}function qG(e){typeof console.warn=="function"?console.warn(e):console.log(e)}Yt.prototype.addListener=function(t,r){return UR(this,t,r,!1)};Yt.prototype.on=Yt.prototype.addListener;Yt.prototype.prependListener=function(t,r){return UR(this,t,r,!0)};function FR(e,t,r){var n=!1;function i(){e.removeListener(t,i),n||(n=!0,r.apply(e,arguments))}return i.listener=r,i}Yt.prototype.once=function(t,r){if(typeof r!="function")throw new TypeError('"listener" argument must be a function');return this.on(t,FR(this,t,r)),this};Yt.prototype.prependOnceListener=function(t,r){if(typeof r!="function")throw new TypeError('"listener" argument must be a function');return this.prependListener(t,FR(this,t,r)),this};Yt.prototype.removeListener=function(t,r){var n,i,o,s,a;if(typeof r!="function")throw new TypeError('"listener" argument must be a function');if(i=this._events,!i)return this;if(n=i[t],!n)return this;if(n===r||n.listener&&n.listener===r)--this._eventsCount===0?this._events=new Wa:(delete i[t],i.removeListener&&this.emit("removeListener",t,n.listener||r));else if(typeof n!="function"){for(o=-1,s=n.length;s-- >0;)if(n[s]===r||n[s].listener&&n[s].listener===r){a=n[s].listener,o=s;break}if(o<0)return this;if(n.length===1){if(n[0]=void 0,--this._eventsCount===0)return this._events=new Wa,this;delete i[t]}else ZG(n,o);i.removeListener&&this.emit("removeListener",t,a||r)}return this};Yt.prototype.removeAllListeners=function(t){var r,n;if(n=this._events,!n)return this;if(!n.removeListener)return arguments.length===0?(this._events=new Wa,this._eventsCount=0):n[t]&&(--this._eventsCount===0?this._events=new Wa:delete n[t]),this;if(arguments.length===0){for(var i=Object.keys(n),o=0,s;o<i.length;++o)s=i[o],s!=="removeListener"&&this.removeAllListeners(s);return this.removeAllListeners("removeListener"),this._events=new Wa,this._eventsCount=0,this}if(r=n[t],typeof r=="function")this.removeListener(t,r);else if(r)do this.removeListener(t,r[r.length-1]);while(r[0]);return this};Yt.prototype.listeners=function(t){var r,n,i=this._events;return i?(r=i[t],r?typeof r=="function"?n=[r.listener||r]:n=JG(r):n=[]):n=[],n};Yt.listenerCount=function(e,t){return typeof e.listenerCount=="function"?e.listenerCount(t):MR.call(e,t)};Yt.prototype.listenerCount=MR;function MR(e){var t=this._events;if(t){var r=t[e];if(typeof r=="function")return 1;if(r)return r.length}return 0}Yt.prototype.eventNames=function(){return this._eventsCount>0?Reflect.ownKeys(this._events):[]};function ZG(e,t){for(var r=t,n=r+1,i=e.length;n<i;r+=1,n+=1)e[r]=e[n];e.pop()}function Ap(e,t){for(var r=new Array(t);t--;)r[t]=e[t];return r}function JG(e){for(var t=new Array(e.length),r=0;r<t.length;++r)t[r]=e[r].listener||e[r];return t}const QG=Object.freeze(Object.defineProperty({__proto__:null,default:Yt,EventEmitter:Yt},Symbol.toStringTag,{value:"Module"})),BR=Lx(QG),mr={};var Oy={exports:{}};(function(e,t){/*!
 *
 * Copyright 2009-2017 Kris Kowal under the terms of the MIT
 * license found at https://github.com/kriskowal/q/blob/v1/LICENSE
 *
 * With parts by Tyler Close
 * Copyright 2007-2009 Tyler Close under the terms of the MIT X license found
 * at http://www.opensource.org/licenses/mit-license.html
 * Forked at ref_send.js version: 2009-05-11
 *
 * With parts by Mark Miller
 * Copyright (C) 2011 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 */(function(r){typeof bootstrap=="function"?bootstrap("promise",r):e.exports=r()})(function(){var r=!1;try{throw new Error}catch(B){r=!!B.stack}var n=j(),i,o=function(){},s=function(){var B={task:void 0,next:null},V=B,re=!1,ge=void 0,Ke=!1,nt=[];function et(){for(var Ut,ur;B.next;)B=B.next,Ut=B.task,B.task=void 0,ur=B.domain,ur&&(B.domain=void 0,ur.enter()),jt(Ut,ur);for(;nt.length;)Ut=nt.pop(),jt(Ut);re=!1}function jt(Ut,ur){try{Ut()}catch(mi){if(Ke)throw ur&&ur.exit(),setTimeout(et,0),ur&&ur.enter(),mi;setTimeout(function(){throw mi},0)}ur&&ur.exit()}if(s=function(Ut){V=V.next={task:Ut,domain:Ke&&mr.domain,next:null},re||(re=!0,ge())},typeof mr=="object"&&mr.toString()==="[object process]"&&mr.nextTick)Ke=!0,ge=function(){mr.nextTick(et)};else if(typeof setImmediate=="function")typeof window<"u"?ge=setImmediate.bind(window,et):ge=function(){setImmediate(et)};else if(typeof MessageChannel<"u"){var _t=new MessageChannel;_t.port1.onmessage=function(){ge=Rt,_t.port1.onmessage=et,et()};var Rt=function(){_t.port2.postMessage(0)};ge=function(){setTimeout(et,0),Rt()}}else ge=function(){setTimeout(et,0)};return s.runAfter=function(Ut){nt.push(Ut),re||(re=!0,ge())},s}(),a=Function.call;function l(B){return function(){return a.apply(B,arguments)}}var u=l(Array.prototype.slice),c=l(Array.prototype.reduce||function(B,V){var re=0,ge=this.length;if(arguments.length===1)do{if(re in this){V=this[re++];break}if(++re>=ge)throw new TypeError}while(1);for(;re<ge;re++)re in this&&(V=B(V,this[re],re));return V}),f=l(Array.prototype.indexOf||function(B){for(var V=0;V<this.length;V++)if(this[V]===B)return V;return-1}),p=l(Array.prototype.map||function(B,V){var re=this,ge=[];return c(re,function(Ke,nt,et){ge.push(B.call(V,nt,et,re))},void 0),ge}),m=Object.create||function(B){function V(){}return V.prototype=B,new V},g=Object.defineProperty||function(B,V,re){return B[V]=re.value,B},b=l(Object.prototype.hasOwnProperty),y=Object.keys||function(B){var V=[];for(var re in B)b(B,re)&&V.push(re);return V},w=l(Object.prototype.toString);function x(B){return B===Object(B)}function T(B){return w(B)==="[object StopIteration]"||B instanceof I}var I;typeof ReturnValue<"u"?I=ReturnValue:I=function(B){this.value=B};var R="From previous event:";function S(B,V){if(r&&V.stack&&typeof B=="object"&&B!==null&&B.stack){for(var re=[],ge=V;ge;ge=ge.source)ge.stack&&(!B.__minimumStackCounter__||B.__minimumStackCounter__>ge.stackCounter)&&(g(B,"__minimumStackCounter__",{value:ge.stackCounter,configurable:!0}),re.unshift(ge.stack));re.unshift(B.stack);var Ke=re.join(`
`+R+`
`),nt=O(Ke);g(B,"stack",{value:nt,configurable:!0})}}function O(B){for(var V=B.split(`
`),re=[],ge=0;ge<V.length;++ge){var Ke=V[ge];!A(Ke)&&!P(Ke)&&Ke&&re.push(Ke)}return re.join(`
`)}function P(B){return B.indexOf("(module.js:")!==-1||B.indexOf("(node.js:")!==-1}function N(B){var V=/at .+ \((.+):(\d+):(?:\d+)\)$/.exec(B);if(V)return[V[1],Number(V[2])];var re=/at ([^ ]+):(\d+):(?:\d+)$/.exec(B);if(re)return[re[1],Number(re[2])];var ge=/.*@(.+):(\d+)$/.exec(B);if(ge)return[ge[1],Number(ge[2])]}function A(B){var V=N(B);if(!V)return!1;var re=V[0],ge=V[1];return re===i&&ge>=n&&ge<=ht}function j(){if(!!r)try{throw new Error}catch(ge){var B=ge.stack.split(`
`),V=B[0].indexOf("@")>0?B[1]:B[2],re=N(V);return re?(i=re[0],re[1]):void 0}}function X(B,V,re){return function(){return typeof console<"u"&&typeof console.warn=="function"&&console.warn(V+" is deprecated, use "+re+" instead.",new Error("").stack),B.apply(B,arguments)}}function G(B){return B instanceof le?B:K(B)?Pe(B):Ee(B)}G.resolve=G,G.nextTick=s,G.longStackSupport=!1;var ne=1;typeof mr=="object"&&mr&&mr.env&&mr.env.Q_DEBUG&&(G.longStackSupport=!0),G.defer=W;function W(){var B=[],V=[],re,ge=m(W.prototype),Ke=m(le.prototype);if(Ke.promiseDispatch=function(et,jt,_t){var Rt=u(arguments);B?(B.push(Rt),jt==="when"&&_t[1]&&V.push(_t[1])):G.nextTick(function(){re.promiseDispatch.apply(re,Rt)})},Ke.valueOf=function(){if(B)return Ke;var et=Q(re);return ee(et)&&(re=et),et},Ke.inspect=function(){return re?re.inspect():{state:"pending"}},G.longStackSupport&&r)try{throw new Error}catch(et){Ke.stack=et.stack.substring(et.stack.indexOf(`
`)+1),Ke.stackCounter=ne++}function nt(et){re=et,G.longStackSupport&&r&&(Ke.source=et),c(B,function(jt,_t){G.nextTick(function(){et.promiseDispatch.apply(et,_t)})},void 0),B=void 0,V=void 0}return ge.promise=Ke,ge.resolve=function(et){re||nt(G(et))},ge.fulfill=function(et){re||nt(Ee(et))},ge.reject=function(et){re||nt(ue(et))},ge.notify=function(et){re||c(V,function(jt,_t){G.nextTick(function(){_t(et)})},void 0)},ge}W.prototype.makeNodeResolver=function(){var B=this;return function(V,re){V?B.reject(V):arguments.length>2?B.resolve(u(arguments,1)):B.resolve(re)}},G.Promise=Y,G.promise=Y;function Y(B){if(typeof B!="function")throw new TypeError("resolver must be a function.");var V=W();try{B(V.resolve,V.reject,V.notify)}catch(re){V.reject(re)}return V.promise}Y.race=de,Y.all=jr,Y.reject=ue,Y.resolve=G,G.passByCopy=function(B){return B},le.prototype.passByCopy=function(){return this},G.join=function(B,V){return G(B).join(V)},le.prototype.join=function(B){return G([this,B]).spread(function(V,re){if(V===re)return V;throw new Error("Q can't join: not the same: "+V+" "+re)})},G.race=de;function de(B){return Y(function(V,re){for(var ge=0,Ke=B.length;ge<Ke;ge++)G(B[ge]).then(V,re)})}le.prototype.race=function(){return this.then(G.race)},G.makePromise=le;function le(B,V,re){V===void 0&&(V=function(nt){return ue(new Error("Promise does not support operation: "+nt))}),re===void 0&&(re=function(){return{state:"unknown"}});var ge=m(le.prototype);if(ge.promiseDispatch=function(nt,et,jt){var _t;try{B[et]?_t=B[et].apply(ge,jt):_t=V.call(ge,et,jt)}catch(Rt){_t=ue(Rt)}nt&&nt(_t)},ge.inspect=re,re){var Ke=re();Ke.state==="rejected"&&(ge.exception=Ke.reason),ge.valueOf=function(){var nt=re();return nt.state==="pending"||nt.state==="rejected"?ge:nt.value}}return ge}le.prototype.toString=function(){return"[object Promise]"},le.prototype.then=function(B,V,re){var ge=this,Ke=W(),nt=!1;function et(Rt){try{return typeof B=="function"?B(Rt):Rt}catch(Ut){return ue(Ut)}}function jt(Rt){if(typeof V=="function"){S(Rt,ge);try{return V(Rt)}catch(Ut){return ue(Ut)}}return ue(Rt)}function _t(Rt){return typeof re=="function"?re(Rt):Rt}return G.nextTick(function(){ge.promiseDispatch(function(Rt){nt||(nt=!0,Ke.resolve(et(Rt)))},"when",[function(Rt){nt||(nt=!0,Ke.resolve(jt(Rt)))}])}),ge.promiseDispatch(void 0,"when",[void 0,function(Rt){var Ut,ur=!1;try{Ut=_t(Rt)}catch(mi){if(ur=!0,G.onerror)G.onerror(mi);else throw mi}ur||Ke.notify(Ut)}]),Ke.promise},G.tap=function(B,V){return G(B).tap(V)},le.prototype.tap=function(B){return B=G(B),this.then(function(V){return B.fcall(V).thenResolve(V)})},G.when=ie;function ie(B,V,re,ge){return G(B).then(V,re,ge)}le.prototype.thenResolve=function(B){return this.then(function(){return B})},G.thenResolve=function(B,V){return G(B).thenResolve(V)},le.prototype.thenReject=function(B){return this.then(function(){throw B})},G.thenReject=function(B,V){return G(B).thenReject(V)},G.nearer=Q;function Q(B){if(ee(B)){var V=B.inspect();if(V.state==="fulfilled")return V.value}return B}G.isPromise=ee;function ee(B){return B instanceof le}G.isPromiseAlike=K;function K(B){return x(B)&&typeof B.then=="function"}G.isPending=te;function te(B){return ee(B)&&B.inspect().state==="pending"}le.prototype.isPending=function(){return this.inspect().state==="pending"},G.isFulfilled=ye;function ye(B){return!ee(B)||B.inspect().state==="fulfilled"}le.prototype.isFulfilled=function(){return this.inspect().state==="fulfilled"},G.isRejected=Ce;function Ce(B){return ee(B)&&B.inspect().state==="rejected"}le.prototype.isRejected=function(){return this.inspect().state==="rejected"};var Ie=[],Ye=[],pe=[],F=!0;function $(){Ie.length=0,Ye.length=0,F||(F=!0)}function q(B,V){!F||(typeof mr=="object"&&typeof mr.emit=="function"&&G.nextTick.runAfter(function(){f(Ye,B)!==-1&&(mr.emit("unhandledRejection",V,B),pe.push(B))}),Ye.push(B),V&&typeof V.stack<"u"?Ie.push(V.stack):Ie.push("(no stack) "+V))}function ve(B){if(!!F){var V=f(Ye,B);V!==-1&&(typeof mr=="object"&&typeof mr.emit=="function"&&G.nextTick.runAfter(function(){var re=f(pe,B);re!==-1&&(mr.emit("rejectionHandled",Ie[V],B),pe.splice(re,1))}),Ye.splice(V,1),Ie.splice(V,1))}}G.resetUnhandledRejections=$,G.getUnhandledReasons=function(){return Ie.slice()},G.stopUnhandledRejectionTracking=function(){$(),F=!1},$(),G.reject=ue;function ue(B){var V=le({when:function(re){return re&&ve(this),re?re(B):this}},function(){return this},function(){return{state:"rejected",reason:B}});return q(V,B),V}G.fulfill=Ee;function Ee(B){return le({when:function(){return B},get:function(V){return B[V]},set:function(V,re){B[V]=re},delete:function(V){delete B[V]},post:function(V,re){return V==null?B.apply(void 0,re):B[V].apply(B,re)},apply:function(V,re){return B.apply(V,re)},keys:function(){return y(B)}},void 0,function(){return{state:"fulfilled",value:B}})}function Pe(B){var V=W();return G.nextTick(function(){try{B.then(V.resolve,V.reject,V.notify)}catch(re){V.reject(re)}}),V.promise}G.master=Le;function Le(B){return le({isDef:function(){}},function(re,ge){return Tt(B,re,ge)},function(){return G(B).inspect()})}G.spread=ot;function ot(B,V,re){return G(B).spread(V,re)}le.prototype.spread=function(B,V){return this.all().then(function(re){return B.apply(void 0,re)},V)},G.async=It;function It(B){return function(){function V(nt,et){var jt;if(typeof StopIteration>"u"){try{jt=re[nt](et)}catch(_t){return ue(_t)}return jt.done?G(jt.value):ie(jt.value,ge,Ke)}else{try{jt=re[nt](et)}catch(_t){return T(_t)?G(_t.value):ue(_t)}return ie(jt,ge,Ke)}}var re=B.apply(this,arguments),ge=V.bind(V,"next"),Ke=V.bind(V,"throw");return ge()}}G.spawn=Lt;function Lt(B){G.done(G.async(B)())}G.return=Kt;function Kt(B){throw new I(B)}G.promised=qt;function qt(B){return function(){return ot([this,jr(arguments)],function(V,re){return B.apply(V,re)})}}G.dispatch=Tt;function Tt(B,V,re){return G(B).dispatch(V,re)}le.prototype.dispatch=function(B,V){var re=this,ge=W();return G.nextTick(function(){re.promiseDispatch(ge.resolve,B,V)}),ge.promise},G.get=function(B,V){return G(B).dispatch("get",[V])},le.prototype.get=function(B){return this.dispatch("get",[B])},G.set=function(B,V,re){return G(B).dispatch("set",[V,re])},le.prototype.set=function(B,V){return this.dispatch("set",[B,V])},G.del=G.delete=function(B,V){return G(B).dispatch("delete",[V])},le.prototype.del=le.prototype.delete=function(B){return this.dispatch("delete",[B])},G.mapply=G.post=function(B,V,re){return G(B).dispatch("post",[V,re])},le.prototype.mapply=le.prototype.post=function(B,V){return this.dispatch("post",[B,V])},G.send=G.mcall=G.invoke=function(B,V){return G(B).dispatch("post",[V,u(arguments,2)])},le.prototype.send=le.prototype.mcall=le.prototype.invoke=function(B){return this.dispatch("post",[B,u(arguments,1)])},G.fapply=function(B,V){return G(B).dispatch("apply",[void 0,V])},le.prototype.fapply=function(B){return this.dispatch("apply",[void 0,B])},G.try=G.fcall=function(B){return G(B).dispatch("apply",[void 0,u(arguments,1)])},le.prototype.fcall=function(){return this.dispatch("apply",[void 0,u(arguments)])},G.fbind=function(B){var V=G(B),re=u(arguments,1);return function(){return V.dispatch("apply",[this,re.concat(u(arguments))])}},le.prototype.fbind=function(){var B=this,V=u(arguments);return function(){return B.dispatch("apply",[this,V.concat(u(arguments))])}},G.keys=function(B){return G(B).dispatch("keys",[])},le.prototype.keys=function(){return this.dispatch("keys",[])},G.all=jr;function jr(B){return ie(B,function(V){var re=0,ge=W();return c(V,function(Ke,nt,et){var jt;ee(nt)&&(jt=nt.inspect()).state==="fulfilled"?V[et]=jt.value:(++re,ie(nt,function(_t){V[et]=_t,--re===0&&ge.resolve(V)},ge.reject,function(_t){ge.notify({index:et,value:_t})}))},void 0),re===0&&ge.resolve(V),ge.promise})}le.prototype.all=function(){return jr(this)},G.any=L;function L(B){if(B.length===0)return G.resolve();var V=G.defer(),re=0;return c(B,function(ge,Ke,nt){var et=B[nt];re++,ie(et,jt,_t,Rt);function jt(Ut){V.resolve(Ut)}function _t(Ut){if(re--,re===0){var ur=Ut||new Error(""+Ut);ur.message="Q can't get fulfillment value from any promise, all promises were rejected. Last error message: "+ur.message,V.reject(ur)}}function Rt(Ut){V.notify({index:nt,value:Ut})}},void 0),V.promise}le.prototype.any=function(){return L(this)},G.allResolved=X(H,"allResolved","allSettled");function H(B){return ie(B,function(V){return V=p(V,G),ie(jr(p(V,function(re){return ie(re,o,o)})),function(){return V})})}le.prototype.allResolved=function(){return H(this)},G.allSettled=Z;function Z(B){return G(B).allSettled()}le.prototype.allSettled=function(){return this.then(function(B){return jr(p(B,function(V){V=G(V);function re(){return V.inspect()}return V.then(re,re)}))})},G.fail=G.catch=function(B,V){return G(B).then(void 0,V)},le.prototype.fail=le.prototype.catch=function(B){return this.then(void 0,B)},G.progress=be;function be(B,V){return G(B).then(void 0,void 0,V)}le.prototype.progress=function(B){return this.then(void 0,void 0,B)},G.fin=G.finally=function(B,V){return G(B).finally(V)},le.prototype.fin=le.prototype.finally=function(B){if(!B||typeof B.apply!="function")throw new Error("Q can't apply finally callback");return B=G(B),this.then(function(V){return B.fcall().then(function(){return V})},function(V){return B.fcall().then(function(){throw V})})},G.done=function(B,V,re,ge){return G(B).done(V,re,ge)},le.prototype.done=function(B,V,re){var ge=function(nt){G.nextTick(function(){if(S(nt,Ke),G.onerror)G.onerror(nt);else throw nt})},Ke=B||V||re?this.then(B,V,re):this;typeof mr=="object"&&mr&&mr.domain&&(ge=mr.domain.bind(ge)),Ke.then(void 0,ge)},G.timeout=function(B,V,re){return G(B).timeout(V,re)},le.prototype.timeout=function(B,V){var re=W(),ge=setTimeout(function(){(!V||typeof V=="string")&&(V=new Error(V||"Timed out after "+B+" ms"),V.code="ETIMEDOUT"),re.reject(V)},B);return this.then(function(Ke){clearTimeout(ge),re.resolve(Ke)},function(Ke){clearTimeout(ge),re.reject(Ke)},re.notify),re.promise},G.delay=function(B,V){return V===void 0&&(V=B,B=void 0),G(B).delay(V)},le.prototype.delay=function(B){return this.then(function(V){var re=W();return setTimeout(function(){re.resolve(V)},B),re.promise})},G.nfapply=function(B,V){return G(B).nfapply(V)},le.prototype.nfapply=function(B){var V=W(),re=u(B);return re.push(V.makeNodeResolver()),this.fapply(re).fail(V.reject),V.promise},G.nfcall=function(B){var V=u(arguments,1);return G(B).nfapply(V)},le.prototype.nfcall=function(){var B=u(arguments),V=W();return B.push(V.makeNodeResolver()),this.fapply(B).fail(V.reject),V.promise},G.nfbind=G.denodeify=function(B){if(B===void 0)throw new Error("Q can't wrap an undefined function");var V=u(arguments,1);return function(){var re=V.concat(u(arguments)),ge=W();return re.push(ge.makeNodeResolver()),G(B).fapply(re).fail(ge.reject),ge.promise}},le.prototype.nfbind=le.prototype.denodeify=function(){var B=u(arguments);return B.unshift(this),G.denodeify.apply(void 0,B)},G.nbind=function(B,V){var re=u(arguments,2);return function(){var ge=re.concat(u(arguments)),Ke=W();ge.push(Ke.makeNodeResolver());function nt(){return B.apply(V,arguments)}return G(nt).fapply(ge).fail(Ke.reject),Ke.promise}},le.prototype.nbind=function(){var B=u(arguments,0);return B.unshift(this),G.nbind.apply(void 0,B)},G.nmapply=G.npost=function(B,V,re){return G(B).npost(V,re)},le.prototype.nmapply=le.prototype.npost=function(B,V){var re=u(V||[]),ge=W();return re.push(ge.makeNodeResolver()),this.dispatch("post",[B,re]).fail(ge.reject),ge.promise},G.nsend=G.nmcall=G.ninvoke=function(B,V){var re=u(arguments,2),ge=W();return re.push(ge.makeNodeResolver()),G(B).dispatch("post",[V,re]).fail(ge.reject),ge.promise},le.prototype.nsend=le.prototype.nmcall=le.prototype.ninvoke=function(B){var V=u(arguments,1),re=W();return V.push(re.makeNodeResolver()),this.dispatch("post",[B,V]).fail(re.reject),re.promise},G.nodeify=Ve;function Ve(B,V){return G(B).nodeify(V)}le.prototype.nodeify=function(B){if(B)this.then(function(V){G.nextTick(function(){B(null,V)})},function(V){G.nextTick(function(){B(V)})});else return this},G.noConflict=function(){throw new Error("Q.noConflict only works when Q is used as a global")};var ht=j();return G})})(Oy);var Ht={},ej=function(t){return tj(t)&&!rj(t)};function tj(e){return!!e&&typeof e=="object"}function rj(e){var t=Object.prototype.toString.call(e);return t==="[object RegExp]"||t==="[object Date]"||oj(e)}var nj=typeof Symbol=="function"&&Symbol.for,ij=nj?Symbol.for("react.element"):60103;function oj(e){return e.$$typeof===ij}function sj(e){return Array.isArray(e)?[]:{}}function $d(e,t){return t.clone!==!1&&t.isMergeableObject(e)?hh(sj(e),e,t):e}function aj(e,t,r){return e.concat(t).map(function(n){return $d(n,r)})}function lj(e,t){if(!t.customMerge)return hh;var r=t.customMerge(e);return typeof r=="function"?r:hh}function uj(e){return Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(e).filter(function(t){return e.propertyIsEnumerable(t)}):[]}function mC(e){return Object.keys(e).concat(uj(e))}function DR(e,t){try{return t in e}catch{return!1}}function cj(e,t){return DR(e,t)&&!(Object.hasOwnProperty.call(e,t)&&Object.propertyIsEnumerable.call(e,t))}function hj(e,t,r){var n={};return r.isMergeableObject(e)&&mC(e).forEach(function(i){n[i]=$d(e[i],r)}),mC(t).forEach(function(i){cj(e,i)||(DR(e,i)&&r.isMergeableObject(t[i])?n[i]=lj(i,r)(e[i],t[i],r):n[i]=$d(t[i],r))}),n}function hh(e,t,r){r=r||{},r.arrayMerge=r.arrayMerge||aj,r.isMergeableObject=r.isMergeableObject||ej,r.cloneUnlessOtherwiseSpecified=$d;var n=Array.isArray(t),i=Array.isArray(e),o=n===i;return o?n?r.arrayMerge(e,t,r):hj(e,t,r):$d(t,r)}hh.all=function(t,r){if(!Array.isArray(t))throw new Error("first argument should be an array");return t.reduce(function(n,i){return hh(n,i,r)},{})};var fj=hh,GR=fj,$o=[],Gi=[],dj=typeof Uint8Array<"u"?Uint8Array:Array,a4=!1;function jR(){a4=!0;for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",t=0,r=e.length;t<r;++t)$o[t]=e[t],Gi[e.charCodeAt(t)]=t;Gi["-".charCodeAt(0)]=62,Gi["_".charCodeAt(0)]=63}function pj(e){a4||jR();var t,r,n,i,o,s,a=e.length;if(a%4>0)throw new Error("Invalid string. Length must be a multiple of 4");o=e[a-2]==="="?2:e[a-1]==="="?1:0,s=new dj(a*3/4-o),n=o>0?a-4:a;var l=0;for(t=0,r=0;t<n;t+=4,r+=3)i=Gi[e.charCodeAt(t)]<<18|Gi[e.charCodeAt(t+1)]<<12|Gi[e.charCodeAt(t+2)]<<6|Gi[e.charCodeAt(t+3)],s[l++]=i>>16&255,s[l++]=i>>8&255,s[l++]=i&255;return o===2?(i=Gi[e.charCodeAt(t)]<<2|Gi[e.charCodeAt(t+1)]>>4,s[l++]=i&255):o===1&&(i=Gi[e.charCodeAt(t)]<<10|Gi[e.charCodeAt(t+1)]<<4|Gi[e.charCodeAt(t+2)]>>2,s[l++]=i>>8&255,s[l++]=i&255),s}function mj(e){return $o[e>>18&63]+$o[e>>12&63]+$o[e>>6&63]+$o[e&63]}function vj(e,t,r){for(var n,i=[],o=t;o<r;o+=3)n=(e[o]<<16)+(e[o+1]<<8)+e[o+2],i.push(mj(n));return i.join("")}function vC(e){a4||jR();for(var t,r=e.length,n=r%3,i="",o=[],s=16383,a=0,l=r-n;a<l;a+=s)o.push(vj(e,a,a+s>l?l:a+s));return n===1?(t=e[r-1],i+=$o[t>>2],i+=$o[t<<4&63],i+="=="):n===2&&(t=(e[r-2]<<8)+e[r-1],i+=$o[t>>10],i+=$o[t>>4&63],i+=$o[t<<2&63],i+="="),o.push(i),o.join("")}function Ly(e,t,r,n,i){var o,s,a=i*8-n-1,l=(1<<a)-1,u=l>>1,c=-7,f=r?i-1:0,p=r?-1:1,m=e[t+f];for(f+=p,o=m&(1<<-c)-1,m>>=-c,c+=a;c>0;o=o*256+e[t+f],f+=p,c-=8);for(s=o&(1<<-c)-1,o>>=-c,c+=n;c>0;s=s*256+e[t+f],f+=p,c-=8);if(o===0)o=1-u;else{if(o===l)return s?NaN:(m?-1:1)*(1/0);s=s+Math.pow(2,n),o=o-u}return(m?-1:1)*s*Math.pow(2,o-n)}function $R(e,t,r,n,i,o){var s,a,l,u=o*8-i-1,c=(1<<u)-1,f=c>>1,p=i===23?Math.pow(2,-24)-Math.pow(2,-77):0,m=n?0:o-1,g=n?1:-1,b=t<0||t===0&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(a=isNaN(t)?1:0,s=c):(s=Math.floor(Math.log(t)/Math.LN2),t*(l=Math.pow(2,-s))<1&&(s--,l*=2),s+f>=1?t+=p/l:t+=p*Math.pow(2,1-f),t*l>=2&&(s++,l/=2),s+f>=c?(a=0,s=c):s+f>=1?(a=(t*l-1)*Math.pow(2,i),s=s+f):(a=t*Math.pow(2,f-1)*Math.pow(2,i),s=0));i>=8;e[r+m]=a&255,m+=g,a/=256,i-=8);for(s=s<<i|a,u+=i;u>0;e[r+m]=s&255,m+=g,s/=256,u-=8);e[r+m-g]|=b*128}var gj={}.toString,HR=Array.isArray||function(e){return gj.call(e)=="[object Array]"};/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
 * @license  MIT
 */var yj=50;_e.TYPED_ARRAY_SUPPORT=Ai.TYPED_ARRAY_SUPPORT!==void 0?Ai.TYPED_ARRAY_SUPPORT:!0;pg();function pg(){return _e.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function Ms(e,t){if(pg()<t)throw new RangeError("Invalid typed array length");return _e.TYPED_ARRAY_SUPPORT?(e=new Uint8Array(t),e.__proto__=_e.prototype):(e===null&&(e=new _e(t)),e.length=t),e}function _e(e,t,r){if(!_e.TYPED_ARRAY_SUPPORT&&!(this instanceof _e))return new _e(e,t,r);if(typeof e=="number"){if(typeof t=="string")throw new Error("If encoding is specified then the first argument must be a string");return l4(this,e)}return zR(this,e,t,r)}_e.poolSize=8192;_e._augment=function(e){return e.__proto__=_e.prototype,e};function zR(e,t,r,n){if(typeof t=="number")throw new TypeError('"value" argument must not be a number');return typeof ArrayBuffer<"u"&&t instanceof ArrayBuffer?wj(e,t,r,n):typeof t=="string"?bj(e,t,r):xj(e,t)}_e.from=function(e,t,r){return zR(null,e,t,r)};_e.TYPED_ARRAY_SUPPORT&&(_e.prototype.__proto__=Uint8Array.prototype,_e.__proto__=Uint8Array);function VR(e){if(typeof e!="number")throw new TypeError('"size" argument must be a number');if(e<0)throw new RangeError('"size" argument must not be negative')}function _j(e,t,r,n){return VR(t),t<=0?Ms(e,t):r!==void 0?typeof n=="string"?Ms(e,t).fill(r,n):Ms(e,t).fill(r):Ms(e,t)}_e.alloc=function(e,t,r){return _j(null,e,t,r)};function l4(e,t){if(VR(t),e=Ms(e,t<0?0:u4(t)|0),!_e.TYPED_ARRAY_SUPPORT)for(var r=0;r<t;++r)e[r]=0;return e}_e.allocUnsafe=function(e){return l4(null,e)};_e.allocUnsafeSlow=function(e){return l4(null,e)};function bj(e,t,r){if((typeof r!="string"||r==="")&&(r="utf8"),!_e.isEncoding(r))throw new TypeError('"encoding" must be a valid string encoding');var n=XR(t,r)|0;e=Ms(e,n);var i=e.write(t,r);return i!==n&&(e=e.slice(0,i)),e}function ew(e,t){var r=t.length<0?0:u4(t.length)|0;e=Ms(e,r);for(var n=0;n<r;n+=1)e[n]=t[n]&255;return e}function wj(e,t,r,n){if(t.byteLength,r<0||t.byteLength<r)throw new RangeError("'offset' is out of bounds");if(t.byteLength<r+(n||0))throw new RangeError("'length' is out of bounds");return r===void 0&&n===void 0?t=new Uint8Array(t):n===void 0?t=new Uint8Array(t,r):t=new Uint8Array(t,r,n),_e.TYPED_ARRAY_SUPPORT?(e=t,e.__proto__=_e.prototype):e=ew(e,t),e}function xj(e,t){if(os(t)){var r=u4(t.length)|0;return e=Ms(e,r),e.length===0||t.copy(e,0,0,r),e}if(t){if(typeof ArrayBuffer<"u"&&t.buffer instanceof ArrayBuffer||"length"in t)return typeof t.length!="number"||jj(t.length)?Ms(e,0):ew(e,t);if(t.type==="Buffer"&&HR(t.data))return ew(e,t.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}function u4(e){if(e>=pg())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+pg().toString(16)+" bytes");return e|0}_e.isBuffer=$j;function os(e){return!!(e!=null&&e._isBuffer)}_e.compare=function(t,r){if(!os(t)||!os(r))throw new TypeError("Arguments must be Buffers");if(t===r)return 0;for(var n=t.length,i=r.length,o=0,s=Math.min(n,i);o<s;++o)if(t[o]!==r[o]){n=t[o],i=r[o];break}return n<i?-1:i<n?1:0};_e.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}};_e.concat=function(t,r){if(!HR(t))throw new TypeError('"list" argument must be an Array of Buffers');if(t.length===0)return _e.alloc(0);var n;if(r===void 0)for(r=0,n=0;n<t.length;++n)r+=t[n].length;var i=_e.allocUnsafe(r),o=0;for(n=0;n<t.length;++n){var s=t[n];if(!os(s))throw new TypeError('"list" argument must be an Array of Buffers');s.copy(i,o),o+=s.length}return i};function XR(e,t){if(os(e))return e.length;if(typeof ArrayBuffer<"u"&&typeof ArrayBuffer.isView=="function"&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer))return e.byteLength;typeof e!="string"&&(e=""+e);var r=e.length;if(r===0)return 0;for(var n=!1;;)switch(t){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":case void 0:return mg(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return r*2;case"hex":return r>>>1;case"base64":return QR(e).length;default:if(n)return mg(e).length;t=(""+t).toLowerCase(),n=!0}}_e.byteLength=XR;function Tj(e,t,r){var n=!1;if((t===void 0||t<0)&&(t=0),t>this.length||((r===void 0||r>this.length)&&(r=this.length),r<=0)||(r>>>=0,t>>>=0,r<=t))return"";for(e||(e="utf8");;)switch(e){case"hex":return Oj(this,t,r);case"utf8":case"utf-8":return KR(this,t,r);case"ascii":return Rj(this,t,r);case"latin1":case"binary":return kj(this,t,r);case"base64":return Pj(this,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Lj(this,t,r);default:if(n)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),n=!0}}_e.prototype._isBuffer=!0;function Kl(e,t,r){var n=e[t];e[t]=e[r],e[r]=n}_e.prototype.swap16=function(){var t=this.length;if(t%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var r=0;r<t;r+=2)Kl(this,r,r+1);return this};_e.prototype.swap32=function(){var t=this.length;if(t%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var r=0;r<t;r+=4)Kl(this,r,r+3),Kl(this,r+1,r+2);return this};_e.prototype.swap64=function(){var t=this.length;if(t%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var r=0;r<t;r+=8)Kl(this,r,r+7),Kl(this,r+1,r+6),Kl(this,r+2,r+5),Kl(this,r+3,r+4);return this};_e.prototype.toString=function(){var t=this.length|0;return t===0?"":arguments.length===0?KR(this,0,t):Tj.apply(this,arguments)};_e.prototype.equals=function(t){if(!os(t))throw new TypeError("Argument must be a Buffer");return this===t?!0:_e.compare(this,t)===0};_e.prototype.inspect=function(){var t="",r=yj;return this.length>0&&(t=this.toString("hex",0,r).match(/.{2}/g).join(" "),this.length>r&&(t+=" ... ")),"<Buffer "+t+">"};_e.prototype.compare=function(t,r,n,i,o){if(!os(t))throw new TypeError("Argument must be a Buffer");if(r===void 0&&(r=0),n===void 0&&(n=t?t.length:0),i===void 0&&(i=0),o===void 0&&(o=this.length),r<0||n>t.length||i<0||o>this.length)throw new RangeError("out of range index");if(i>=o&&r>=n)return 0;if(i>=o)return-1;if(r>=n)return 1;if(r>>>=0,n>>>=0,i>>>=0,o>>>=0,this===t)return 0;for(var s=o-i,a=n-r,l=Math.min(s,a),u=this.slice(i,o),c=t.slice(r,n),f=0;f<l;++f)if(u[f]!==c[f]){s=u[f],a=c[f];break}return s<a?-1:a<s?1:0};function WR(e,t,r,n,i){if(e.length===0)return-1;if(typeof r=="string"?(n=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),r=+r,isNaN(r)&&(r=i?0:e.length-1),r<0&&(r=e.length+r),r>=e.length){if(i)return-1;r=e.length-1}else if(r<0)if(i)r=0;else return-1;if(typeof t=="string"&&(t=_e.from(t,n)),os(t))return t.length===0?-1:gC(e,t,r,n,i);if(typeof t=="number")return t=t&255,_e.TYPED_ARRAY_SUPPORT&&typeof Uint8Array.prototype.indexOf=="function"?i?Uint8Array.prototype.indexOf.call(e,t,r):Uint8Array.prototype.lastIndexOf.call(e,t,r):gC(e,[t],r,n,i);throw new TypeError("val must be string, number or Buffer")}function gC(e,t,r,n,i){var o=1,s=e.length,a=t.length;if(n!==void 0&&(n=String(n).toLowerCase(),n==="ucs2"||n==="ucs-2"||n==="utf16le"||n==="utf-16le")){if(e.length<2||t.length<2)return-1;o=2,s/=2,a/=2,r/=2}function l(m,g){return o===1?m[g]:m.readUInt16BE(g*o)}var u;if(i){var c=-1;for(u=r;u<s;u++)if(l(e,u)===l(t,c===-1?0:u-c)){if(c===-1&&(c=u),u-c+1===a)return c*o}else c!==-1&&(u-=u-c),c=-1}else for(r+a>s&&(r=s-a),u=r;u>=0;u--){for(var f=!0,p=0;p<a;p++)if(l(e,u+p)!==l(t,p)){f=!1;break}if(f)return u}return-1}_e.prototype.includes=function(t,r,n){return this.indexOf(t,r,n)!==-1};_e.prototype.indexOf=function(t,r,n){return WR(this,t,r,n,!0)};_e.prototype.lastIndexOf=function(t,r,n){return WR(this,t,r,n,!1)};function Sj(e,t,r,n){r=Number(r)||0;var i=e.length-r;n?(n=Number(n),n>i&&(n=i)):n=i;var o=t.length;if(o%2!==0)throw new TypeError("Invalid hex string");n>o/2&&(n=o/2);for(var s=0;s<n;++s){var a=parseInt(t.substr(s*2,2),16);if(isNaN(a))return s;e[r+s]=a}return s}function Ej(e,t,r,n){return My(mg(t,e.length-r),e,r,n)}function YR(e,t,r,n){return My(Dj(t),e,r,n)}function Cj(e,t,r,n){return YR(e,t,r,n)}function Ij(e,t,r,n){return My(QR(t),e,r,n)}function Nj(e,t,r,n){return My(Gj(t,e.length-r),e,r,n)}_e.prototype.write=function(t,r,n,i){if(r===void 0)i="utf8",n=this.length,r=0;else if(n===void 0&&typeof r=="string")i=r,n=this.length,r=0;else if(isFinite(r))r=r|0,isFinite(n)?(n=n|0,i===void 0&&(i="utf8")):(i=n,n=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var o=this.length-r;if((n===void 0||n>o)&&(n=o),t.length>0&&(n<0||r<0)||r>this.length)throw new RangeError("Attempt to write outside buffer bounds");i||(i="utf8");for(var s=!1;;)switch(i){case"hex":return Sj(this,t,r,n);case"utf8":case"utf-8":return Ej(this,t,r,n);case"ascii":return YR(this,t,r,n);case"latin1":case"binary":return Cj(this,t,r,n);case"base64":return Ij(this,t,r,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Nj(this,t,r,n);default:if(s)throw new TypeError("Unknown encoding: "+i);i=(""+i).toLowerCase(),s=!0}};_e.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function Pj(e,t,r){return t===0&&r===e.length?vC(e):vC(e.slice(t,r))}function KR(e,t,r){r=Math.min(e.length,r);for(var n=[],i=t;i<r;){var o=e[i],s=null,a=o>239?4:o>223?3:o>191?2:1;if(i+a<=r){var l,u,c,f;switch(a){case 1:o<128&&(s=o);break;case 2:l=e[i+1],(l&192)===128&&(f=(o&31)<<6|l&63,f>127&&(s=f));break;case 3:l=e[i+1],u=e[i+2],(l&192)===128&&(u&192)===128&&(f=(o&15)<<12|(l&63)<<6|u&63,f>2047&&(f<55296||f>57343)&&(s=f));break;case 4:l=e[i+1],u=e[i+2],c=e[i+3],(l&192)===128&&(u&192)===128&&(c&192)===128&&(f=(o&15)<<18|(l&63)<<12|(u&63)<<6|c&63,f>65535&&f<1114112&&(s=f))}}s===null?(s=65533,a=1):s>65535&&(s-=65536,n.push(s>>>10&1023|55296),s=56320|s&1023),n.push(s),i+=a}return Aj(n)}var yC=4096;function Aj(e){var t=e.length;if(t<=yC)return String.fromCharCode.apply(String,e);for(var r="",n=0;n<t;)r+=String.fromCharCode.apply(String,e.slice(n,n+=yC));return r}function Rj(e,t,r){var n="";r=Math.min(e.length,r);for(var i=t;i<r;++i)n+=String.fromCharCode(e[i]&127);return n}function kj(e,t,r){var n="";r=Math.min(e.length,r);for(var i=t;i<r;++i)n+=String.fromCharCode(e[i]);return n}function Oj(e,t,r){var n=e.length;(!t||t<0)&&(t=0),(!r||r<0||r>n)&&(r=n);for(var i="",o=t;o<r;++o)i+=Bj(e[o]);return i}function Lj(e,t,r){for(var n=e.slice(t,r),i="",o=0;o<n.length;o+=2)i+=String.fromCharCode(n[o]+n[o+1]*256);return i}_e.prototype.slice=function(t,r){var n=this.length;t=~~t,r=r===void 0?n:~~r,t<0?(t+=n,t<0&&(t=0)):t>n&&(t=n),r<0?(r+=n,r<0&&(r=0)):r>n&&(r=n),r<t&&(r=t);var i;if(_e.TYPED_ARRAY_SUPPORT)i=this.subarray(t,r),i.__proto__=_e.prototype;else{var o=r-t;i=new _e(o,void 0);for(var s=0;s<o;++s)i[s]=this[s+t]}return i};function pn(e,t,r){if(e%1!==0||e<0)throw new RangeError("offset is not uint");if(e+t>r)throw new RangeError("Trying to access beyond buffer length")}_e.prototype.readUIntLE=function(t,r,n){t=t|0,r=r|0,n||pn(t,r,this.length);for(var i=this[t],o=1,s=0;++s<r&&(o*=256);)i+=this[t+s]*o;return i};_e.prototype.readUIntBE=function(t,r,n){t=t|0,r=r|0,n||pn(t,r,this.length);for(var i=this[t+--r],o=1;r>0&&(o*=256);)i+=this[t+--r]*o;return i};_e.prototype.readUInt8=function(t,r){return r||pn(t,1,this.length),this[t]};_e.prototype.readUInt16LE=function(t,r){return r||pn(t,2,this.length),this[t]|this[t+1]<<8};_e.prototype.readUInt16BE=function(t,r){return r||pn(t,2,this.length),this[t]<<8|this[t+1]};_e.prototype.readUInt32LE=function(t,r){return r||pn(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+this[t+3]*16777216};_e.prototype.readUInt32BE=function(t,r){return r||pn(t,4,this.length),this[t]*16777216+(this[t+1]<<16|this[t+2]<<8|this[t+3])};_e.prototype.readIntLE=function(t,r,n){t=t|0,r=r|0,n||pn(t,r,this.length);for(var i=this[t],o=1,s=0;++s<r&&(o*=256);)i+=this[t+s]*o;return o*=128,i>=o&&(i-=Math.pow(2,8*r)),i};_e.prototype.readIntBE=function(t,r,n){t=t|0,r=r|0,n||pn(t,r,this.length);for(var i=r,o=1,s=this[t+--i];i>0&&(o*=256);)s+=this[t+--i]*o;return o*=128,s>=o&&(s-=Math.pow(2,8*r)),s};_e.prototype.readInt8=function(t,r){return r||pn(t,1,this.length),this[t]&128?(255-this[t]+1)*-1:this[t]};_e.prototype.readInt16LE=function(t,r){r||pn(t,2,this.length);var n=this[t]|this[t+1]<<8;return n&32768?n|4294901760:n};_e.prototype.readInt16BE=function(t,r){r||pn(t,2,this.length);var n=this[t+1]|this[t]<<8;return n&32768?n|4294901760:n};_e.prototype.readInt32LE=function(t,r){return r||pn(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24};_e.prototype.readInt32BE=function(t,r){return r||pn(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]};_e.prototype.readFloatLE=function(t,r){return r||pn(t,4,this.length),Ly(this,t,!0,23,4)};_e.prototype.readFloatBE=function(t,r){return r||pn(t,4,this.length),Ly(this,t,!1,23,4)};_e.prototype.readDoubleLE=function(t,r){return r||pn(t,8,this.length),Ly(this,t,!0,52,8)};_e.prototype.readDoubleBE=function(t,r){return r||pn(t,8,this.length),Ly(this,t,!1,52,8)};function pi(e,t,r,n,i,o){if(!os(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>i||t<o)throw new RangeError('"value" argument is out of bounds');if(r+n>e.length)throw new RangeError("Index out of range")}_e.prototype.writeUIntLE=function(t,r,n,i){if(t=+t,r=r|0,n=n|0,!i){var o=Math.pow(2,8*n)-1;pi(this,t,r,n,o,0)}var s=1,a=0;for(this[r]=t&255;++a<n&&(s*=256);)this[r+a]=t/s&255;return r+n};_e.prototype.writeUIntBE=function(t,r,n,i){if(t=+t,r=r|0,n=n|0,!i){var o=Math.pow(2,8*n)-1;pi(this,t,r,n,o,0)}var s=n-1,a=1;for(this[r+s]=t&255;--s>=0&&(a*=256);)this[r+s]=t/a&255;return r+n};_e.prototype.writeUInt8=function(t,r,n){return t=+t,r=r|0,n||pi(this,t,r,1,255,0),_e.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),this[r]=t&255,r+1};function Uy(e,t,r,n){t<0&&(t=65535+t+1);for(var i=0,o=Math.min(e.length-r,2);i<o;++i)e[r+i]=(t&255<<8*(n?i:1-i))>>>(n?i:1-i)*8}_e.prototype.writeUInt16LE=function(t,r,n){return t=+t,r=r|0,n||pi(this,t,r,2,65535,0),_e.TYPED_ARRAY_SUPPORT?(this[r]=t&255,this[r+1]=t>>>8):Uy(this,t,r,!0),r+2};_e.prototype.writeUInt16BE=function(t,r,n){return t=+t,r=r|0,n||pi(this,t,r,2,65535,0),_e.TYPED_ARRAY_SUPPORT?(this[r]=t>>>8,this[r+1]=t&255):Uy(this,t,r,!1),r+2};function Fy(e,t,r,n){t<0&&(t=4294967295+t+1);for(var i=0,o=Math.min(e.length-r,4);i<o;++i)e[r+i]=t>>>(n?i:3-i)*8&255}_e.prototype.writeUInt32LE=function(t,r,n){return t=+t,r=r|0,n||pi(this,t,r,4,4294967295,0),_e.TYPED_ARRAY_SUPPORT?(this[r+3]=t>>>24,this[r+2]=t>>>16,this[r+1]=t>>>8,this[r]=t&255):Fy(this,t,r,!0),r+4};_e.prototype.writeUInt32BE=function(t,r,n){return t=+t,r=r|0,n||pi(this,t,r,4,4294967295,0),_e.TYPED_ARRAY_SUPPORT?(this[r]=t>>>24,this[r+1]=t>>>16,this[r+2]=t>>>8,this[r+3]=t&255):Fy(this,t,r,!1),r+4};_e.prototype.writeIntLE=function(t,r,n,i){if(t=+t,r=r|0,!i){var o=Math.pow(2,8*n-1);pi(this,t,r,n,o-1,-o)}var s=0,a=1,l=0;for(this[r]=t&255;++s<n&&(a*=256);)t<0&&l===0&&this[r+s-1]!==0&&(l=1),this[r+s]=(t/a>>0)-l&255;return r+n};_e.prototype.writeIntBE=function(t,r,n,i){if(t=+t,r=r|0,!i){var o=Math.pow(2,8*n-1);pi(this,t,r,n,o-1,-o)}var s=n-1,a=1,l=0;for(this[r+s]=t&255;--s>=0&&(a*=256);)t<0&&l===0&&this[r+s+1]!==0&&(l=1),this[r+s]=(t/a>>0)-l&255;return r+n};_e.prototype.writeInt8=function(t,r,n){return t=+t,r=r|0,n||pi(this,t,r,1,127,-128),_e.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),t<0&&(t=255+t+1),this[r]=t&255,r+1};_e.prototype.writeInt16LE=function(t,r,n){return t=+t,r=r|0,n||pi(this,t,r,2,32767,-32768),_e.TYPED_ARRAY_SUPPORT?(this[r]=t&255,this[r+1]=t>>>8):Uy(this,t,r,!0),r+2};_e.prototype.writeInt16BE=function(t,r,n){return t=+t,r=r|0,n||pi(this,t,r,2,32767,-32768),_e.TYPED_ARRAY_SUPPORT?(this[r]=t>>>8,this[r+1]=t&255):Uy(this,t,r,!1),r+2};_e.prototype.writeInt32LE=function(t,r,n){return t=+t,r=r|0,n||pi(this,t,r,4,2147483647,-2147483648),_e.TYPED_ARRAY_SUPPORT?(this[r]=t&255,this[r+1]=t>>>8,this[r+2]=t>>>16,this[r+3]=t>>>24):Fy(this,t,r,!0),r+4};_e.prototype.writeInt32BE=function(t,r,n){return t=+t,r=r|0,n||pi(this,t,r,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),_e.TYPED_ARRAY_SUPPORT?(this[r]=t>>>24,this[r+1]=t>>>16,this[r+2]=t>>>8,this[r+3]=t&255):Fy(this,t,r,!1),r+4};function qR(e,t,r,n,i,o){if(r+n>e.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function ZR(e,t,r,n,i){return i||qR(e,t,r,4),$R(e,t,r,n,23,4),r+4}_e.prototype.writeFloatLE=function(t,r,n){return ZR(this,t,r,!0,n)};_e.prototype.writeFloatBE=function(t,r,n){return ZR(this,t,r,!1,n)};function JR(e,t,r,n,i){return i||qR(e,t,r,8),$R(e,t,r,n,52,8),r+8}_e.prototype.writeDoubleLE=function(t,r,n){return JR(this,t,r,!0,n)};_e.prototype.writeDoubleBE=function(t,r,n){return JR(this,t,r,!1,n)};_e.prototype.copy=function(t,r,n,i){if(n||(n=0),!i&&i!==0&&(i=this.length),r>=t.length&&(r=t.length),r||(r=0),i>0&&i<n&&(i=n),i===n||t.length===0||this.length===0)return 0;if(r<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(i<0)throw new RangeError("sourceEnd out of bounds");i>this.length&&(i=this.length),t.length-r<i-n&&(i=t.length-r+n);var o=i-n,s;if(this===t&&n<r&&r<i)for(s=o-1;s>=0;--s)t[s+r]=this[s+n];else if(o<1e3||!_e.TYPED_ARRAY_SUPPORT)for(s=0;s<o;++s)t[s+r]=this[s+n];else Uint8Array.prototype.set.call(t,this.subarray(n,n+o),r);return o};_e.prototype.fill=function(t,r,n,i){if(typeof t=="string"){if(typeof r=="string"?(i=r,r=0,n=this.length):typeof n=="string"&&(i=n,n=this.length),t.length===1){var o=t.charCodeAt(0);o<256&&(t=o)}if(i!==void 0&&typeof i!="string")throw new TypeError("encoding must be a string");if(typeof i=="string"&&!_e.isEncoding(i))throw new TypeError("Unknown encoding: "+i)}else typeof t=="number"&&(t=t&255);if(r<0||this.length<r||this.length<n)throw new RangeError("Out of range index");if(n<=r)return this;r=r>>>0,n=n===void 0?this.length:n>>>0,t||(t=0);var s;if(typeof t=="number")for(s=r;s<n;++s)this[s]=t;else{var a=os(t)?t:mg(new _e(t,i).toString()),l=a.length;for(s=0;s<n-r;++s)this[s+r]=a[s%l]}return this};var Uj=/[^+\/0-9A-Za-z-_]/g;function Fj(e){if(e=Mj(e).replace(Uj,""),e.length<2)return"";for(;e.length%4!==0;)e=e+"=";return e}function Mj(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}function Bj(e){return e<16?"0"+e.toString(16):e.toString(16)}function mg(e,t){t=t||1/0;for(var r,n=e.length,i=null,o=[],s=0;s<n;++s){if(r=e.charCodeAt(s),r>55295&&r<57344){if(!i){if(r>56319){(t-=3)>-1&&o.push(239,191,189);continue}else if(s+1===n){(t-=3)>-1&&o.push(239,191,189);continue}i=r;continue}if(r<56320){(t-=3)>-1&&o.push(239,191,189),i=r;continue}r=(i-55296<<10|r-56320)+65536}else i&&(t-=3)>-1&&o.push(239,191,189);if(i=null,r<128){if((t-=1)<0)break;o.push(r)}else if(r<2048){if((t-=2)<0)break;o.push(r>>6|192,r&63|128)}else if(r<65536){if((t-=3)<0)break;o.push(r>>12|224,r>>6&63|128,r&63|128)}else if(r<1114112){if((t-=4)<0)break;o.push(r>>18|240,r>>12&63|128,r>>6&63|128,r&63|128)}else throw new Error("Invalid code point")}return o}function Dj(e){for(var t=[],r=0;r<e.length;++r)t.push(e.charCodeAt(r)&255);return t}function Gj(e,t){for(var r,n,i,o=[],s=0;s<e.length&&!((t-=2)<0);++s)r=e.charCodeAt(s),n=r>>8,i=r%256,o.push(i),o.push(n);return o}function QR(e){return pj(Fj(e))}function My(e,t,r,n){for(var i=0;i<n&&!(i+r>=t.length||i>=e.length);++i)t[i+r]=e[i];return i}function jj(e){return e!==e}function $j(e){return e!=null&&(!!e._isBuffer||ek(e)||Hj(e))}function ek(e){return!!e.constructor&&typeof e.constructor.isBuffer=="function"&&e.constructor.isBuffer(e)}function Hj(e){return typeof e.readFloatLE=="function"&&typeof e.slice=="function"&&ek(e.slice(0,0))}var tk={exports:{}};(function(e){var t=function(){function r(p,m){return m!=null&&p instanceof m}var n;try{n=Map}catch{n=function(){}}var i;try{i=Set}catch{i=function(){}}var o;try{o=Promise}catch{o=function(){}}function s(p,m,g,b,y){typeof m=="object"&&(g=m.depth,b=m.prototype,y=m.includeNonEnumerable,m=m.circular);var w=[],x=[],T=typeof _e<"u";typeof m>"u"&&(m=!0),typeof g>"u"&&(g=1/0);function I(R,S){if(R===null)return null;if(S===0)return R;var O,P;if(typeof R!="object")return R;if(r(R,n))O=new n;else if(r(R,i))O=new i;else if(r(R,o))O=new o(function(de,le){R.then(function(ie){de(I(ie,S-1))},function(ie){le(I(ie,S-1))})});else if(s.__isArray(R))O=[];else if(s.__isRegExp(R))O=new RegExp(R.source,f(R)),R.lastIndex&&(O.lastIndex=R.lastIndex);else if(s.__isDate(R))O=new Date(R.getTime());else{if(T&&_e.isBuffer(R))return _e.allocUnsafe?O=_e.allocUnsafe(R.length):O=new _e(R.length),R.copy(O),O;r(R,Error)?O=Object.create(R):typeof b>"u"?(P=Object.getPrototypeOf(R),O=Object.create(P)):(O=Object.create(b),P=b)}if(m){var N=w.indexOf(R);if(N!=-1)return x[N];w.push(R),x.push(O)}r(R,n)&&R.forEach(function(de,le){var ie=I(le,S-1),Q=I(de,S-1);O.set(ie,Q)}),r(R,i)&&R.forEach(function(de){var le=I(de,S-1);O.add(le)});for(var A in R){var j;P&&(j=Object.getOwnPropertyDescriptor(P,A)),!(j&&j.set==null)&&(O[A]=I(R[A],S-1))}if(Object.getOwnPropertySymbols)for(var X=Object.getOwnPropertySymbols(R),A=0;A<X.length;A++){var G=X[A],ne=Object.getOwnPropertyDescriptor(R,G);ne&&!ne.enumerable&&!y||(O[G]=I(R[G],S-1),ne.enumerable||Object.defineProperty(O,G,{enumerable:!1}))}if(y)for(var W=Object.getOwnPropertyNames(R),A=0;A<W.length;A++){var Y=W[A],ne=Object.getOwnPropertyDescriptor(R,Y);ne&&ne.enumerable||(O[Y]=I(R[Y],S-1),Object.defineProperty(O,Y,{enumerable:!1}))}return O}return I(p,g)}s.clonePrototype=function(m){if(m===null)return null;var g=function(){};return g.prototype=m,new g};function a(p){return Object.prototype.toString.call(p)}s.__objToStr=a;function l(p){return typeof p=="object"&&a(p)==="[object Date]"}s.__isDate=l;function u(p){return typeof p=="object"&&a(p)==="[object Array]"}s.__isArray=u;function c(p){return typeof p=="object"&&a(p)==="[object RegExp]"}s.__isRegExp=c;function f(p){var m="";return p.global&&(m+="g"),p.ignoreCase&&(m+="i"),p.multiline&&(m+="m"),m}return s.__getRegExpFlags=f,s}();e.exports&&(e.exports=t)})(tk);function iv(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var rk={exports:{}};(function(e,t){(function(r){e.exports=r()})(function(){return function r(n,i,o){function s(u,c){if(!i[u]){if(!n[u]){var f=typeof iv=="function"&&iv;if(!c&&f)return f(u,!0);if(a)return a(u,!0);throw new Error("Cannot find module '"+u+"'")}var p=i[u]={exports:{}};n[u][0].call(p.exports,function(m){var g=n[u][1][m];return s(g||m)},p,p.exports,r,n,i,o)}return i[u].exports}for(var a=typeof iv=="function"&&iv,l=0;l<o.length;l++)s(o[l]);return s}({1:[function(r,n,i){(function(o,s,a,l,u,c,f,p,m){var g=r("crypto");function b(S,O){return function(P,N){var A;if(A=N.algorithm!=="passthrough"?g.createHash(N.algorithm):new R,A.write===void 0&&(A.write=A.update,A.end=A.update),I(N,A).dispatch(P),A.update||A.end(""),A.digest)return A.digest(N.encoding==="buffer"?void 0:N.encoding);var j=A.read();return N.encoding!=="buffer"?j.toString(N.encoding):j}(S,O=x(S,O))}(i=n.exports=b).sha1=function(S){return b(S)},i.keys=function(S){return b(S,{excludeValues:!0,algorithm:"sha1",encoding:"hex"})},i.MD5=function(S){return b(S,{algorithm:"md5",encoding:"hex"})},i.keysMD5=function(S){return b(S,{algorithm:"md5",encoding:"hex",excludeValues:!0})};var y=g.getHashes?g.getHashes().slice():["sha1","md5"];y.push("passthrough");var w=["buffer","hex","binary","base64"];function x(S,O){O=O||{};var P={};if(P.algorithm=O.algorithm||"sha1",P.encoding=O.encoding||"hex",P.excludeValues=!!O.excludeValues,P.algorithm=P.algorithm.toLowerCase(),P.encoding=P.encoding.toLowerCase(),P.ignoreUnknown=O.ignoreUnknown===!0,P.respectType=O.respectType!==!1,P.respectFunctionNames=O.respectFunctionNames!==!1,P.respectFunctionProperties=O.respectFunctionProperties!==!1,P.unorderedArrays=O.unorderedArrays===!0,P.unorderedSets=O.unorderedSets!==!1,P.unorderedObjects=O.unorderedObjects!==!1,P.replacer=O.replacer||void 0,P.excludeKeys=O.excludeKeys||void 0,S===void 0)throw new Error("Object argument required.");for(var N=0;N<y.length;++N)y[N].toLowerCase()===P.algorithm.toLowerCase()&&(P.algorithm=y[N]);if(y.indexOf(P.algorithm)===-1)throw new Error('Algorithm "'+P.algorithm+'"  not supported. supported values: '+y.join(", "));if(w.indexOf(P.encoding)===-1&&P.algorithm!=="passthrough")throw new Error('Encoding "'+P.encoding+'"  not supported. supported values: '+w.join(", "));return P}function T(S){if(typeof S=="function")return/^function\s+\w*\s*\(\s*\)\s*{\s+\[native code\]\s+}$/i.exec(Function.prototype.toString.call(S))!=null}function I(S,O,P){P=P||[];function N(A){return O.update?O.update(A,"utf8"):O.write(A,"utf8")}return{dispatch:function(A){return S.replacer&&(A=S.replacer(A)),this["_"+(A===null?"null":typeof A)](A)},_object:function(A){var j=Object.prototype.toString.call(A),X=/\[object (.*)\]/i.exec(j);X=(X=X?X[1]:"unknown:["+j+"]").toLowerCase();var G;if(0<=(G=P.indexOf(A)))return this.dispatch("[CIRCULAR:"+G+"]");if(P.push(A),a!==void 0&&a.isBuffer&&a.isBuffer(A))return N("buffer:"),N(A);if(X==="object"||X==="function"||X==="asyncfunction"){var ne=Object.keys(A);S.unorderedObjects&&(ne=ne.sort()),S.respectType===!1||T(A)||ne.splice(0,0,"prototype","__proto__","constructor"),S.excludeKeys&&(ne=ne.filter(function(Y){return!S.excludeKeys(Y)})),N("object:"+ne.length+":");var W=this;return ne.forEach(function(Y){W.dispatch(Y),N(":"),S.excludeValues||W.dispatch(A[Y]),N(",")})}if(!this["_"+X]){if(S.ignoreUnknown)return N("["+X+"]");throw new Error('Unknown object type "'+X+'"')}this["_"+X](A)},_array:function(A,j){j=j!==void 0?j:S.unorderedArrays!==!1;var X=this;if(N("array:"+A.length+":"),!j||A.length<=1)return A.forEach(function(W){return X.dispatch(W)});var G=[],ne=A.map(function(W){var Y=new R,de=P.slice();return I(S,Y,de).dispatch(W),G=G.concat(de.slice(P.length)),Y.read().toString()});return P=P.concat(G),ne.sort(),this._array(ne,!1)},_date:function(A){return N("date:"+A.toJSON())},_symbol:function(A){return N("symbol:"+A.toString())},_error:function(A){return N("error:"+A.toString())},_boolean:function(A){return N("bool:"+A.toString())},_string:function(A){N("string:"+A.length+":"),N(A.toString())},_function:function(A){N("fn:"),T(A)?this.dispatch("[native]"):this.dispatch(A.toString()),S.respectFunctionNames!==!1&&this.dispatch("function-name:"+String(A.name)),S.respectFunctionProperties&&this._object(A)},_number:function(A){return N("number:"+A.toString())},_xml:function(A){return N("xml:"+A.toString())},_null:function(){return N("Null")},_undefined:function(){return N("Undefined")},_regexp:function(A){return N("regex:"+A.toString())},_uint8array:function(A){return N("uint8array:"),this.dispatch(Array.prototype.slice.call(A))},_uint8clampedarray:function(A){return N("uint8clampedarray:"),this.dispatch(Array.prototype.slice.call(A))},_int8array:function(A){return N("uint8array:"),this.dispatch(Array.prototype.slice.call(A))},_uint16array:function(A){return N("uint16array:"),this.dispatch(Array.prototype.slice.call(A))},_int16array:function(A){return N("uint16array:"),this.dispatch(Array.prototype.slice.call(A))},_uint32array:function(A){return N("uint32array:"),this.dispatch(Array.prototype.slice.call(A))},_int32array:function(A){return N("uint32array:"),this.dispatch(Array.prototype.slice.call(A))},_float32array:function(A){return N("float32array:"),this.dispatch(Array.prototype.slice.call(A))},_float64array:function(A){return N("float64array:"),this.dispatch(Array.prototype.slice.call(A))},_arraybuffer:function(A){return N("arraybuffer:"),this.dispatch(new Uint8Array(A))},_url:function(A){return N("url:"+A.toString())},_map:function(A){N("map:");var j=Array.from(A);return this._array(j,S.unorderedSets!==!1)},_set:function(A){N("set:");var j=Array.from(A);return this._array(j,S.unorderedSets!==!1)},_file:function(A){return N("file:"),this.dispatch([A.name,A.size,A.type,A.lastModfied])},_blob:function(){if(S.ignoreUnknown)return N("[blob]");throw Error(`Hashing Blob objects is currently not supported
(see https://github.com/puleos/object-hash/issues/26)
Use "options.replacer" or "options.ignoreUnknown"
`)},_domwindow:function(){return N("domwindow")},_bigint:function(A){return N("bigint:"+A.toString())},_process:function(){return N("process")},_timer:function(){return N("timer")},_pipe:function(){return N("pipe")},_tcp:function(){return N("tcp")},_udp:function(){return N("udp")},_tty:function(){return N("tty")},_statwatcher:function(){return N("statwatcher")},_securecontext:function(){return N("securecontext")},_connection:function(){return N("connection")},_zlib:function(){return N("zlib")},_context:function(){return N("context")},_nodescript:function(){return N("nodescript")},_httpparser:function(){return N("httpparser")},_dataview:function(){return N("dataview")},_signal:function(){return N("signal")},_fsevent:function(){return N("fsevent")},_tlswrap:function(){return N("tlswrap")}}}function R(){return{buf:"",write:function(S){this.buf+=S},end:function(S){this.buf+=S},read:function(){return this.buf}}}i.writeToStream=function(S,O,P){return P===void 0&&(P=O,O={}),I(O=x(S,O),P).dispatch(S)}}).call(this,r("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},r("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/fake_7eac155c.js","/")},{buffer:3,crypto:5,lYpoI2:10}],2:[function(r,n,i){(function(o,s,a,l,u,c,f,p,m){(function(g){var b=typeof Uint8Array<"u"?Uint8Array:Array,y="+".charCodeAt(0),w="/".charCodeAt(0),x="0".charCodeAt(0),T="a".charCodeAt(0),I="A".charCodeAt(0),R="-".charCodeAt(0),S="_".charCodeAt(0);function O(P){var N=P.charCodeAt(0);return N===y||N===R?62:N===w||N===S?63:N<x?-1:N<x+10?N-x+26+26:N<I+26?N-I:N<T+26?N-T+26:void 0}g.toByteArray=function(P){var N,A;if(0<P.length%4)throw new Error("Invalid string. Length must be a multiple of 4");var j=P.length,X=P.charAt(j-2)==="="?2:P.charAt(j-1)==="="?1:0,G=new b(3*P.length/4-X),ne=0<X?P.length-4:P.length,W=0;function Y(de){G[W++]=de}for(N=0;N<ne;N+=4,0)Y((16711680&(A=O(P.charAt(N))<<18|O(P.charAt(N+1))<<12|O(P.charAt(N+2))<<6|O(P.charAt(N+3))))>>16),Y((65280&A)>>8),Y(255&A);return X==2?Y(255&(A=O(P.charAt(N))<<2|O(P.charAt(N+1))>>4)):X==1&&(Y((A=O(P.charAt(N))<<10|O(P.charAt(N+1))<<4|O(P.charAt(N+2))>>2)>>8&255),Y(255&A)),G},g.fromByteArray=function(P){var N,A,j,X,G=P.length%3,ne="";function W(Y){return"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(Y)}for(N=0,j=P.length-G;N<j;N+=3)A=(P[N]<<16)+(P[N+1]<<8)+P[N+2],ne+=W((X=A)>>18&63)+W(X>>12&63)+W(X>>6&63)+W(63&X);switch(G){case 1:ne+=W((A=P[P.length-1])>>2),ne+=W(A<<4&63),ne+="==";break;case 2:ne+=W((A=(P[P.length-2]<<8)+P[P.length-1])>>10),ne+=W(A>>4&63),ne+=W(A<<2&63),ne+="="}return ne}})(i===void 0?this.base64js={}:i)}).call(this,r("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},r("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/base64-js/lib/b64.js","/node_modules/gulp-browserify/node_modules/base64-js/lib")},{buffer:3,lYpoI2:10}],3:[function(r,n,i){(function(o,s,y,l,u,c,f,p,m){var g=r("base64-js"),b=r("ieee754");function y(F,$,q){if(!(this instanceof y))return new y(F,$,q);var ve,ue,Ee,Pe,Le,ot=typeof F;if($==="base64"&&ot=="string")for(F=(ve=F).trim?ve.trim():ve.replace(/^\s+|\s+$/g,"");F.length%4!=0;)F+="=";if(ot=="number")ue=le(F);else if(ot=="string")ue=y.byteLength(F,$);else{if(ot!="object")throw new Error("First argument needs to be a number, array or string.");ue=le(F.length)}if(y._useTypedArrays?Ee=y._augment(new Uint8Array(ue)):((Ee=this).length=ue,Ee._isBuffer=!0),y._useTypedArrays&&typeof F.byteLength=="number")Ee._set(F);else if(ie(Le=F)||y.isBuffer(Le)||Le&&typeof Le=="object"&&typeof Le.length=="number")for(Pe=0;Pe<ue;Pe++)y.isBuffer(F)?Ee[Pe]=F.readUInt8(Pe):Ee[Pe]=F[Pe];else if(ot=="string")Ee.write(F,0,$);else if(ot=="number"&&!y._useTypedArrays&&!q)for(Pe=0;Pe<ue;Pe++)Ee[Pe]=0;return Ee}function w(F,$,q,ve){return y._charsWritten=te(function(ue){for(var Ee=[],Pe=0;Pe<ue.length;Pe++)Ee.push(255&ue.charCodeAt(Pe));return Ee}($),F,q,ve)}function x(F,$,q,ve){return y._charsWritten=te(function(ue){for(var Ee,Pe,Le,ot=[],It=0;It<ue.length;It++)Ee=ue.charCodeAt(It),Pe=Ee>>8,Le=Ee%256,ot.push(Le),ot.push(Pe);return ot}($),F,q,ve)}function T(F,$,q){var ve="";q=Math.min(F.length,q);for(var ue=$;ue<q;ue++)ve+=String.fromCharCode(F[ue]);return ve}function I(F,$,q,ve){ve||(pe(typeof q=="boolean","missing or invalid endian"),pe($!=null,"missing offset"),pe($+1<F.length,"Trying to read beyond buffer length"));var ue,Ee=F.length;if(!(Ee<=$))return q?(ue=F[$],$+1<Ee&&(ue|=F[$+1]<<8)):(ue=F[$]<<8,$+1<Ee&&(ue|=F[$+1])),ue}function R(F,$,q,ve){ve||(pe(typeof q=="boolean","missing or invalid endian"),pe($!=null,"missing offset"),pe($+3<F.length,"Trying to read beyond buffer length"));var ue,Ee=F.length;if(!(Ee<=$))return q?($+2<Ee&&(ue=F[$+2]<<16),$+1<Ee&&(ue|=F[$+1]<<8),ue|=F[$],$+3<Ee&&(ue+=F[$+3]<<24>>>0)):($+1<Ee&&(ue=F[$+1]<<16),$+2<Ee&&(ue|=F[$+2]<<8),$+3<Ee&&(ue|=F[$+3]),ue+=F[$]<<24>>>0),ue}function S(F,$,q,ve){if(ve||(pe(typeof q=="boolean","missing or invalid endian"),pe($!=null,"missing offset"),pe($+1<F.length,"Trying to read beyond buffer length")),!(F.length<=$)){var ue=I(F,$,q,!0);return 32768&ue?-1*(65535-ue+1):ue}}function O(F,$,q,ve){if(ve||(pe(typeof q=="boolean","missing or invalid endian"),pe($!=null,"missing offset"),pe($+3<F.length,"Trying to read beyond buffer length")),!(F.length<=$)){var ue=R(F,$,q,!0);return 2147483648&ue?-1*(4294967295-ue+1):ue}}function P(F,$,q,ve){return ve||(pe(typeof q=="boolean","missing or invalid endian"),pe($+3<F.length,"Trying to read beyond buffer length")),b.read(F,$,q,23,4)}function N(F,$,q,ve){return ve||(pe(typeof q=="boolean","missing or invalid endian"),pe($+7<F.length,"Trying to read beyond buffer length")),b.read(F,$,q,52,8)}function A(F,$,q,ve,ue){ue||(pe($!=null,"missing value"),pe(typeof ve=="boolean","missing or invalid endian"),pe(q!=null,"missing offset"),pe(q+1<F.length,"trying to write beyond buffer length"),Ce($,65535));var Ee=F.length;if(!(Ee<=q))for(var Pe=0,Le=Math.min(Ee-q,2);Pe<Le;Pe++)F[q+Pe]=($&255<<8*(ve?Pe:1-Pe))>>>8*(ve?Pe:1-Pe)}function j(F,$,q,ve,ue){ue||(pe($!=null,"missing value"),pe(typeof ve=="boolean","missing or invalid endian"),pe(q!=null,"missing offset"),pe(q+3<F.length,"trying to write beyond buffer length"),Ce($,4294967295));var Ee=F.length;if(!(Ee<=q))for(var Pe=0,Le=Math.min(Ee-q,4);Pe<Le;Pe++)F[q+Pe]=$>>>8*(ve?Pe:3-Pe)&255}function X(F,$,q,ve,ue){ue||(pe($!=null,"missing value"),pe(typeof ve=="boolean","missing or invalid endian"),pe(q!=null,"missing offset"),pe(q+1<F.length,"Trying to write beyond buffer length"),Ie($,32767,-32768)),F.length<=q||A(F,0<=$?$:65535+$+1,q,ve,ue)}function G(F,$,q,ve,ue){ue||(pe($!=null,"missing value"),pe(typeof ve=="boolean","missing or invalid endian"),pe(q!=null,"missing offset"),pe(q+3<F.length,"Trying to write beyond buffer length"),Ie($,2147483647,-2147483648)),F.length<=q||j(F,0<=$?$:4294967295+$+1,q,ve,ue)}function ne(F,$,q,ve,ue){ue||(pe($!=null,"missing value"),pe(typeof ve=="boolean","missing or invalid endian"),pe(q!=null,"missing offset"),pe(q+3<F.length,"Trying to write beyond buffer length"),Ye($,34028234663852886e22,-34028234663852886e22)),F.length<=q||b.write(F,$,q,ve,23,4)}function W(F,$,q,ve,ue){ue||(pe($!=null,"missing value"),pe(typeof ve=="boolean","missing or invalid endian"),pe(q!=null,"missing offset"),pe(q+7<F.length,"Trying to write beyond buffer length"),Ye($,17976931348623157e292,-17976931348623157e292)),F.length<=q||b.write(F,$,q,ve,52,8)}i.Buffer=y,i.SlowBuffer=y,i.INSPECT_MAX_BYTES=50,y.poolSize=8192,y._useTypedArrays=function(){try{var F=new ArrayBuffer(0),$=new Uint8Array(F);return $.foo=function(){return 42},$.foo()===42&&typeof $.subarray=="function"}catch{return!1}}(),y.isEncoding=function(F){switch(String(F).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"raw":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},y.isBuffer=function(F){return!(F==null||!F._isBuffer)},y.byteLength=function(F,$){var q;switch(F+="",$||"utf8"){case"hex":q=F.length/2;break;case"utf8":case"utf-8":q=ee(F).length;break;case"ascii":case"binary":case"raw":q=F.length;break;case"base64":q=K(F).length;break;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":q=2*F.length;break;default:throw new Error("Unknown encoding")}return q},y.concat=function(F,$){if(pe(ie(F),`Usage: Buffer.concat(list, [totalLength])
list should be an Array.`),F.length===0)return new y(0);if(F.length===1)return F[0];if(typeof $!="number")for(ue=$=0;ue<F.length;ue++)$+=F[ue].length;for(var q=new y($),ve=0,ue=0;ue<F.length;ue++){var Ee=F[ue];Ee.copy(q,ve),ve+=Ee.length}return q},y.prototype.write=function(F,$,q,ve){var ue;isFinite($)?isFinite(q)||(ve=q,q=void 0):(ue=ve,ve=$,$=q,q=ue),$=Number($)||0;var Ee,Pe,Le,ot,It,Lt,Kt,qt,Tt,jr=this.length-$;switch((!q||jr<(q=Number(q)))&&(q=jr),ve=String(ve||"utf8").toLowerCase()){case"hex":Ee=function(L,H,Z,be){Z=Number(Z)||0;var Ve=L.length-Z;(!be||Ve<(be=Number(be)))&&(be=Ve);var ht=H.length;pe(ht%2==0,"Invalid hex string"),ht/2<be&&(be=ht/2);for(var B=0;B<be;B++){var V=parseInt(H.substr(2*B,2),16);pe(!isNaN(V),"Invalid hex string"),L[Z+B]=V}return y._charsWritten=2*B,B}(this,F,$,q);break;case"utf8":case"utf-8":Lt=this,Kt=F,qt=$,Tt=q,Ee=y._charsWritten=te(ee(Kt),Lt,qt,Tt);break;case"ascii":case"binary":Ee=w(this,F,$,q);break;case"base64":Pe=this,Le=F,ot=$,It=q,Ee=y._charsWritten=te(K(Le),Pe,ot,It);break;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":Ee=x(this,F,$,q);break;default:throw new Error("Unknown encoding")}return Ee},y.prototype.toString=function(F,$,q){var ve,ue,Ee,Pe,Le=this;if(F=String(F||"utf8").toLowerCase(),$=Number($)||0,(q=q!==void 0?Number(q):q=Le.length)===$)return"";switch(F){case"hex":ve=function(ot,It,Lt){var Kt=ot.length;(!It||It<0)&&(It=0),(!Lt||Lt<0||Kt<Lt)&&(Lt=Kt);for(var qt="",Tt=It;Tt<Lt;Tt++)qt+=Q(ot[Tt]);return qt}(Le,$,q);break;case"utf8":case"utf-8":ve=function(ot,It,Lt){var Kt="",qt="";Lt=Math.min(ot.length,Lt);for(var Tt=It;Tt<Lt;Tt++)ot[Tt]<=127?(Kt+=ye(qt)+String.fromCharCode(ot[Tt]),qt=""):qt+="%"+ot[Tt].toString(16);return Kt+ye(qt)}(Le,$,q);break;case"ascii":case"binary":ve=T(Le,$,q);break;case"base64":ue=Le,Pe=q,ve=(Ee=$)===0&&Pe===ue.length?g.fromByteArray(ue):g.fromByteArray(ue.slice(Ee,Pe));break;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":ve=function(ot,It,Lt){for(var Kt=ot.slice(It,Lt),qt="",Tt=0;Tt<Kt.length;Tt+=2)qt+=String.fromCharCode(Kt[Tt]+256*Kt[Tt+1]);return qt}(Le,$,q);break;default:throw new Error("Unknown encoding")}return ve},y.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}},y.prototype.copy=function(F,$,q,ve){if(q=q||0,ve||ve===0||(ve=this.length),$=$||0,ve!==q&&F.length!==0&&this.length!==0){pe(q<=ve,"sourceEnd < sourceStart"),pe(0<=$&&$<F.length,"targetStart out of bounds"),pe(0<=q&&q<this.length,"sourceStart out of bounds"),pe(0<=ve&&ve<=this.length,"sourceEnd out of bounds"),ve>this.length&&(ve=this.length),F.length-$<ve-q&&(ve=F.length-$+q);var ue=ve-q;if(ue<100||!y._useTypedArrays)for(var Ee=0;Ee<ue;Ee++)F[Ee+$]=this[Ee+q];else F._set(this.subarray(q,q+ue),$)}},y.prototype.slice=function(F,$){var q=this.length;if(F=de(F,q,0),$=de($,q,q),y._useTypedArrays)return y._augment(this.subarray(F,$));for(var ve=$-F,ue=new y(ve,void 0,!0),Ee=0;Ee<ve;Ee++)ue[Ee]=this[Ee+F];return ue},y.prototype.get=function(F){return console.log(".get() is deprecated. Access using array indexes instead."),this.readUInt8(F)},y.prototype.set=function(F,$){return console.log(".set() is deprecated. Access using array indexes instead."),this.writeUInt8(F,$)},y.prototype.readUInt8=function(F,$){if($||(pe(F!=null,"missing offset"),pe(F<this.length,"Trying to read beyond buffer length")),!(F>=this.length))return this[F]},y.prototype.readUInt16LE=function(F,$){return I(this,F,!0,$)},y.prototype.readUInt16BE=function(F,$){return I(this,F,!1,$)},y.prototype.readUInt32LE=function(F,$){return R(this,F,!0,$)},y.prototype.readUInt32BE=function(F,$){return R(this,F,!1,$)},y.prototype.readInt8=function(F,$){if($||(pe(F!=null,"missing offset"),pe(F<this.length,"Trying to read beyond buffer length")),!(F>=this.length))return 128&this[F]?-1*(255-this[F]+1):this[F]},y.prototype.readInt16LE=function(F,$){return S(this,F,!0,$)},y.prototype.readInt16BE=function(F,$){return S(this,F,!1,$)},y.prototype.readInt32LE=function(F,$){return O(this,F,!0,$)},y.prototype.readInt32BE=function(F,$){return O(this,F,!1,$)},y.prototype.readFloatLE=function(F,$){return P(this,F,!0,$)},y.prototype.readFloatBE=function(F,$){return P(this,F,!1,$)},y.prototype.readDoubleLE=function(F,$){return N(this,F,!0,$)},y.prototype.readDoubleBE=function(F,$){return N(this,F,!1,$)},y.prototype.writeUInt8=function(F,$,q){q||(pe(F!=null,"missing value"),pe($!=null,"missing offset"),pe($<this.length,"trying to write beyond buffer length"),Ce(F,255)),$>=this.length||(this[$]=F)},y.prototype.writeUInt16LE=function(F,$,q){A(this,F,$,!0,q)},y.prototype.writeUInt16BE=function(F,$,q){A(this,F,$,!1,q)},y.prototype.writeUInt32LE=function(F,$,q){j(this,F,$,!0,q)},y.prototype.writeUInt32BE=function(F,$,q){j(this,F,$,!1,q)},y.prototype.writeInt8=function(F,$,q){q||(pe(F!=null,"missing value"),pe($!=null,"missing offset"),pe($<this.length,"Trying to write beyond buffer length"),Ie(F,127,-128)),$>=this.length||(0<=F?this.writeUInt8(F,$,q):this.writeUInt8(255+F+1,$,q))},y.prototype.writeInt16LE=function(F,$,q){X(this,F,$,!0,q)},y.prototype.writeInt16BE=function(F,$,q){X(this,F,$,!1,q)},y.prototype.writeInt32LE=function(F,$,q){G(this,F,$,!0,q)},y.prototype.writeInt32BE=function(F,$,q){G(this,F,$,!1,q)},y.prototype.writeFloatLE=function(F,$,q){ne(this,F,$,!0,q)},y.prototype.writeFloatBE=function(F,$,q){ne(this,F,$,!1,q)},y.prototype.writeDoubleLE=function(F,$,q){W(this,F,$,!0,q)},y.prototype.writeDoubleBE=function(F,$,q){W(this,F,$,!1,q)},y.prototype.fill=function(F,$,q){if(F=F||0,$=$||0,q=q||this.length,typeof F=="string"&&(F=F.charCodeAt(0)),pe(typeof F=="number"&&!isNaN(F),"value is not a number"),pe($<=q,"end < start"),q!==$&&this.length!==0){pe(0<=$&&$<this.length,"start out of bounds"),pe(0<=q&&q<=this.length,"end out of bounds");for(var ve=$;ve<q;ve++)this[ve]=F}},y.prototype.inspect=function(){for(var F=[],$=this.length,q=0;q<$;q++)if(F[q]=Q(this[q]),q===i.INSPECT_MAX_BYTES){F[q+1]="...";break}return"<Buffer "+F.join(" ")+">"},y.prototype.toArrayBuffer=function(){if(typeof Uint8Array>"u")throw new Error("Buffer.toArrayBuffer not supported in this browser");if(y._useTypedArrays)return new y(this).buffer;for(var F=new Uint8Array(this.length),$=0,q=F.length;$<q;$+=1)F[$]=this[$];return F.buffer};var Y=y.prototype;function de(F,$,q){return typeof F!="number"?q:$<=(F=~~F)?$:0<=F||0<=(F+=$)?F:0}function le(F){return(F=~~Math.ceil(+F))<0?0:F}function ie(F){return(Array.isArray||function($){return Object.prototype.toString.call($)==="[object Array]"})(F)}function Q(F){return F<16?"0"+F.toString(16):F.toString(16)}function ee(F){for(var $=[],q=0;q<F.length;q++){var ve=F.charCodeAt(q);if(ve<=127)$.push(F.charCodeAt(q));else{var ue=q;55296<=ve&&ve<=57343&&q++;for(var Ee=encodeURIComponent(F.slice(ue,q+1)).substr(1).split("%"),Pe=0;Pe<Ee.length;Pe++)$.push(parseInt(Ee[Pe],16))}}return $}function K(F){return g.toByteArray(F)}function te(F,$,q,ve){for(var ue=0;ue<ve&&!(ue+q>=$.length||ue>=F.length);ue++)$[ue+q]=F[ue];return ue}function ye(F){try{return decodeURIComponent(F)}catch{return String.fromCharCode(65533)}}function Ce(F,$){pe(typeof F=="number","cannot write a non-number as a number"),pe(0<=F,"specified a negative value for writing an unsigned value"),pe(F<=$,"value is larger than maximum value for type"),pe(Math.floor(F)===F,"value has a fractional component")}function Ie(F,$,q){pe(typeof F=="number","cannot write a non-number as a number"),pe(F<=$,"value larger than maximum allowed value"),pe(q<=F,"value smaller than minimum allowed value"),pe(Math.floor(F)===F,"value has a fractional component")}function Ye(F,$,q){pe(typeof F=="number","cannot write a non-number as a number"),pe(F<=$,"value larger than maximum allowed value"),pe(q<=F,"value smaller than minimum allowed value")}function pe(F,$){if(!F)throw new Error($||"Failed assertion")}y._augment=function(F){return F._isBuffer=!0,F._get=F.get,F._set=F.set,F.get=Y.get,F.set=Y.set,F.write=Y.write,F.toString=Y.toString,F.toLocaleString=Y.toString,F.toJSON=Y.toJSON,F.copy=Y.copy,F.slice=Y.slice,F.readUInt8=Y.readUInt8,F.readUInt16LE=Y.readUInt16LE,F.readUInt16BE=Y.readUInt16BE,F.readUInt32LE=Y.readUInt32LE,F.readUInt32BE=Y.readUInt32BE,F.readInt8=Y.readInt8,F.readInt16LE=Y.readInt16LE,F.readInt16BE=Y.readInt16BE,F.readInt32LE=Y.readInt32LE,F.readInt32BE=Y.readInt32BE,F.readFloatLE=Y.readFloatLE,F.readFloatBE=Y.readFloatBE,F.readDoubleLE=Y.readDoubleLE,F.readDoubleBE=Y.readDoubleBE,F.writeUInt8=Y.writeUInt8,F.writeUInt16LE=Y.writeUInt16LE,F.writeUInt16BE=Y.writeUInt16BE,F.writeUInt32LE=Y.writeUInt32LE,F.writeUInt32BE=Y.writeUInt32BE,F.writeInt8=Y.writeInt8,F.writeInt16LE=Y.writeInt16LE,F.writeInt16BE=Y.writeInt16BE,F.writeInt32LE=Y.writeInt32LE,F.writeInt32BE=Y.writeInt32BE,F.writeFloatLE=Y.writeFloatLE,F.writeFloatBE=Y.writeFloatBE,F.writeDoubleLE=Y.writeDoubleLE,F.writeDoubleBE=Y.writeDoubleBE,F.fill=Y.fill,F.inspect=Y.inspect,F.toArrayBuffer=Y.toArrayBuffer,F}}).call(this,r("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},r("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/buffer/index.js","/node_modules/gulp-browserify/node_modules/buffer")},{"base64-js":2,buffer:3,ieee754:11,lYpoI2:10}],4:[function(r,n,i){(function(o,s,g,l,u,c,f,p,m){var g=r("buffer").Buffer,b=4,y=new g(b);y.fill(0),n.exports={hash:function(w,x,T,I){return g.isBuffer(w)||(w=new g(w)),function(R,S,O){for(var P=new g(S),N=O?P.writeInt32BE:P.writeInt32LE,A=0;A<R.length;A++)N.call(P,R[A],4*A,!0);return P}(x(function(R,S){var O;R.length%b!=0&&(O=R.length+(b-R.length%b),R=g.concat([R,y],O));for(var P=[],N=S?R.readInt32BE:R.readInt32LE,A=0;A<R.length;A+=b)P.push(N.call(R,A));return P}(w,I),8*w.length),T,I)}}}).call(this,r("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},r("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/crypto-browserify/helpers.js","/node_modules/gulp-browserify/node_modules/crypto-browserify")},{buffer:3,lYpoI2:10}],5:[function(r,n,i){(function(o,s,g,l,u,c,f,p,m){var g=r("buffer").Buffer,b=r("./sha"),y=r("./sha256"),w=r("./rng"),x={sha1:b,sha256:y,md5:r("./md5")},T=64,I=new g(T);function R(O,P){var N=x[O=O||"sha1"],A=[];return N||S("algorithm:",O,"is not yet supported"),{update:function(j){return g.isBuffer(j)||(j=new g(j)),A.push(j),j.length,this},digest:function(j){var X=g.concat(A),G=P?function(ne,W,Y){g.isBuffer(W)||(W=new g(W)),g.isBuffer(Y)||(Y=new g(Y)),W.length>T?W=ne(W):W.length<T&&(W=g.concat([W,I],T));for(var de=new g(T),le=new g(T),ie=0;ie<T;ie++)de[ie]=54^W[ie],le[ie]=92^W[ie];var Q=ne(g.concat([de,Y]));return ne(g.concat([le,Q]))}(N,P,X):N(X);return A=null,j?G.toString(j):G}}}function S(){var O=[].slice.call(arguments).join(" ");throw new Error([O,"we accept pull requests","http://github.com/dominictarr/crypto-browserify"].join(`
`))}I.fill(0),i.createHash=function(O){return R(O)},i.createHmac=R,i.randomBytes=function(O,P){if(!P||!P.call)return new g(w(O));try{P.call(this,void 0,new g(w(O)))}catch(N){P(N)}},function(O,P){for(var N in O)P(O[N],N)}(["createCredentials","createCipher","createCipheriv","createDecipher","createDecipheriv","createSign","createVerify","createDiffieHellman","pbkdf2"],function(O){i[O]=function(){S("sorry,",O,"is not implemented yet")}})}).call(this,r("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},r("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/crypto-browserify/index.js","/node_modules/gulp-browserify/node_modules/crypto-browserify")},{"./md5":6,"./rng":7,"./sha":8,"./sha256":9,buffer:3,lYpoI2:10}],6:[function(r,n,i){(function(o,s,a,l,u,c,f,p,m){var g=r("./helpers");function b(S,O){S[O>>5]|=128<<O%32,S[14+(O+64>>>9<<4)]=O;for(var P=1732584193,N=-271733879,A=-1732584194,j=271733878,X=0;X<S.length;X+=16){var G=P,ne=N,W=A,Y=j,P=w(P,N,A,j,S[X+0],7,-680876936),j=w(j,P,N,A,S[X+1],12,-389564586),A=w(A,j,P,N,S[X+2],17,606105819),N=w(N,A,j,P,S[X+3],22,-1044525330);P=w(P,N,A,j,S[X+4],7,-176418897),j=w(j,P,N,A,S[X+5],12,1200080426),A=w(A,j,P,N,S[X+6],17,-1473231341),N=w(N,A,j,P,S[X+7],22,-45705983),P=w(P,N,A,j,S[X+8],7,1770035416),j=w(j,P,N,A,S[X+9],12,-1958414417),A=w(A,j,P,N,S[X+10],17,-42063),N=w(N,A,j,P,S[X+11],22,-1990404162),P=w(P,N,A,j,S[X+12],7,1804603682),j=w(j,P,N,A,S[X+13],12,-40341101),A=w(A,j,P,N,S[X+14],17,-1502002290),P=x(P,N=w(N,A,j,P,S[X+15],22,1236535329),A,j,S[X+1],5,-165796510),j=x(j,P,N,A,S[X+6],9,-1069501632),A=x(A,j,P,N,S[X+11],14,643717713),N=x(N,A,j,P,S[X+0],20,-373897302),P=x(P,N,A,j,S[X+5],5,-701558691),j=x(j,P,N,A,S[X+10],9,38016083),A=x(A,j,P,N,S[X+15],14,-660478335),N=x(N,A,j,P,S[X+4],20,-405537848),P=x(P,N,A,j,S[X+9],5,568446438),j=x(j,P,N,A,S[X+14],9,-1019803690),A=x(A,j,P,N,S[X+3],14,-187363961),N=x(N,A,j,P,S[X+8],20,1163531501),P=x(P,N,A,j,S[X+13],5,-1444681467),j=x(j,P,N,A,S[X+2],9,-51403784),A=x(A,j,P,N,S[X+7],14,1735328473),P=T(P,N=x(N,A,j,P,S[X+12],20,-1926607734),A,j,S[X+5],4,-378558),j=T(j,P,N,A,S[X+8],11,-2022574463),A=T(A,j,P,N,S[X+11],16,1839030562),N=T(N,A,j,P,S[X+14],23,-35309556),P=T(P,N,A,j,S[X+1],4,-1530992060),j=T(j,P,N,A,S[X+4],11,1272893353),A=T(A,j,P,N,S[X+7],16,-155497632),N=T(N,A,j,P,S[X+10],23,-1094730640),P=T(P,N,A,j,S[X+13],4,681279174),j=T(j,P,N,A,S[X+0],11,-358537222),A=T(A,j,P,N,S[X+3],16,-722521979),N=T(N,A,j,P,S[X+6],23,76029189),P=T(P,N,A,j,S[X+9],4,-640364487),j=T(j,P,N,A,S[X+12],11,-421815835),A=T(A,j,P,N,S[X+15],16,530742520),P=I(P,N=T(N,A,j,P,S[X+2],23,-995338651),A,j,S[X+0],6,-198630844),j=I(j,P,N,A,S[X+7],10,1126891415),A=I(A,j,P,N,S[X+14],15,-1416354905),N=I(N,A,j,P,S[X+5],21,-57434055),P=I(P,N,A,j,S[X+12],6,1700485571),j=I(j,P,N,A,S[X+3],10,-1894986606),A=I(A,j,P,N,S[X+10],15,-1051523),N=I(N,A,j,P,S[X+1],21,-2054922799),P=I(P,N,A,j,S[X+8],6,1873313359),j=I(j,P,N,A,S[X+15],10,-30611744),A=I(A,j,P,N,S[X+6],15,-1560198380),N=I(N,A,j,P,S[X+13],21,1309151649),P=I(P,N,A,j,S[X+4],6,-145523070),j=I(j,P,N,A,S[X+11],10,-1120210379),A=I(A,j,P,N,S[X+2],15,718787259),N=I(N,A,j,P,S[X+9],21,-343485551),P=R(P,G),N=R(N,ne),A=R(A,W),j=R(j,Y)}return Array(P,N,A,j)}function y(S,O,P,N,A,j){return R((X=R(R(O,S),R(N,j)))<<(G=A)|X>>>32-G,P);var X,G}function w(S,O,P,N,A,j,X){return y(O&P|~O&N,S,O,A,j,X)}function x(S,O,P,N,A,j,X){return y(O&N|P&~N,S,O,A,j,X)}function T(S,O,P,N,A,j,X){return y(O^P^N,S,O,A,j,X)}function I(S,O,P,N,A,j,X){return y(P^(O|~N),S,O,A,j,X)}function R(S,O){var P=(65535&S)+(65535&O);return(S>>16)+(O>>16)+(P>>16)<<16|65535&P}n.exports=function(S){return g.hash(S,b,16)}}).call(this,r("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},r("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/crypto-browserify/md5.js","/node_modules/gulp-browserify/node_modules/crypto-browserify")},{"./helpers":4,buffer:3,lYpoI2:10}],7:[function(r,n,i){(function(o,s,a,l,u,c,f,p,m){var g;g=function(b){for(var y,w=new Array(b),x=0;x<b;x++)(3&x)==0&&(y=4294967296*Math.random()),w[x]=y>>>((3&x)<<3)&255;return w},n.exports=g}).call(this,r("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},r("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/crypto-browserify/rng.js","/node_modules/gulp-browserify/node_modules/crypto-browserify")},{buffer:3,lYpoI2:10}],8:[function(r,n,i){(function(o,s,a,l,u,c,f,p,m){var g=r("./helpers");function b(x,T){x[T>>5]|=128<<24-T%32,x[15+(T+64>>9<<4)]=T;for(var I,R,S,O,P,N=Array(80),A=1732584193,j=-271733879,X=-1732584194,G=271733878,ne=-1009589776,W=0;W<x.length;W+=16){for(var Y=A,de=j,le=X,ie=G,Q=ne,ee=0;ee<80;ee++){N[ee]=ee<16?x[W+ee]:w(N[ee-3]^N[ee-8]^N[ee-14]^N[ee-16],1);var K=y(y(w(A,5),(S=j,O=X,P=G,(R=ee)<20?S&O|~S&P:!(R<40)&&R<60?S&O|S&P|O&P:S^O^P)),y(y(ne,N[ee]),(I=ee)<20?1518500249:I<40?1859775393:I<60?-1894007588:-899497514)),ne=G,G=X,X=w(j,30),j=A,A=K}A=y(A,Y),j=y(j,de),X=y(X,le),G=y(G,ie),ne=y(ne,Q)}return Array(A,j,X,G,ne)}function y(x,T){var I=(65535&x)+(65535&T);return(x>>16)+(T>>16)+(I>>16)<<16|65535&I}function w(x,T){return x<<T|x>>>32-T}n.exports=function(x){return g.hash(x,b,20,!0)}}).call(this,r("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},r("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/crypto-browserify/sha.js","/node_modules/gulp-browserify/node_modules/crypto-browserify")},{"./helpers":4,buffer:3,lYpoI2:10}],9:[function(r,n,i){(function(o,s,a,l,u,c,f,p,m){function g(x,T){var I=(65535&x)+(65535&T);return(x>>16)+(T>>16)+(I>>16)<<16|65535&I}function b(x,T){return x>>>T|x<<32-T}function y(x,T){var I,R,S,O,P,N,A,j,X,G,ne=new Array(1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298),W=new Array(1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225),Y=new Array(64);x[T>>5]|=128<<24-T%32,x[15+(T+64>>9<<4)]=T;for(var de,le,ie,Q,ee,K,te,ye,Ce=0;Ce<x.length;Ce+=16){I=W[0],R=W[1],S=W[2],O=W[3],P=W[4],N=W[5],A=W[6],j=W[7];for(var Ie=0;Ie<64;Ie++)Y[Ie]=Ie<16?x[Ie+Ce]:g(g(g((ye=Y[Ie-2],b(ye,17)^b(ye,19)^ye>>>10),Y[Ie-7]),(te=Y[Ie-15],b(te,7)^b(te,18)^te>>>3)),Y[Ie-16]),X=g(g(g(g(j,b(K=P,6)^b(K,11)^b(K,25)),(ee=P)&N^~ee&A),ne[Ie]),Y[Ie]),G=g(b(Q=I,2)^b(Q,13)^b(Q,22),(de=I)&(le=R)^de&(ie=S)^le&ie),j=A,A=N,N=P,P=g(O,X),O=S,S=R,R=I,I=g(X,G);W[0]=g(I,W[0]),W[1]=g(R,W[1]),W[2]=g(S,W[2]),W[3]=g(O,W[3]),W[4]=g(P,W[4]),W[5]=g(N,W[5]),W[6]=g(A,W[6]),W[7]=g(j,W[7])}return W}var w=r("./helpers");n.exports=function(x){return w.hash(x,y,32,!0)}}).call(this,r("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},r("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/crypto-browserify/sha256.js","/node_modules/gulp-browserify/node_modules/crypto-browserify")},{"./helpers":4,buffer:3,lYpoI2:10}],10:[function(r,n,i){(function(o,s,a,l,u,c,f,p,m){function g(){}(o=n.exports={}).nextTick=function(){var b=typeof window<"u"&&window.setImmediate,y=typeof window<"u"&&window.postMessage&&window.addEventListener;if(b)return function(x){return window.setImmediate(x)};if(y){var w=[];return window.addEventListener("message",function(x){var T=x.source;T!==window&&T!==null||x.data!=="process-tick"||(x.stopPropagation(),0<w.length&&w.shift()())},!0),function(x){w.push(x),window.postMessage("process-tick","*")}}return function(x){setTimeout(x,0)}}(),o.title="browser",o.browser=!0,o.env={},o.argv=[],o.on=g,o.addListener=g,o.once=g,o.off=g,o.removeListener=g,o.removeAllListeners=g,o.emit=g,o.binding=function(b){throw new Error("process.binding is not supported")},o.cwd=function(){return"/"},o.chdir=function(b){throw new Error("process.chdir is not supported")}}).call(this,r("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},r("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/process/browser.js","/node_modules/gulp-browserify/node_modules/process")},{buffer:3,lYpoI2:10}],11:[function(r,n,i){(function(o,s,a,l,u,c,f,p,m){i.read=function(g,b,y,w,x){var T,I,R=8*x-w-1,S=(1<<R)-1,O=S>>1,P=-7,N=y?x-1:0,A=y?-1:1,j=g[b+N];for(N+=A,T=j&(1<<-P)-1,j>>=-P,P+=R;0<P;T=256*T+g[b+N],N+=A,P-=8);for(I=T&(1<<-P)-1,T>>=-P,P+=w;0<P;I=256*I+g[b+N],N+=A,P-=8);if(T===0)T=1-O;else{if(T===S)return I?NaN:1/0*(j?-1:1);I+=Math.pow(2,w),T-=O}return(j?-1:1)*I*Math.pow(2,T-w)},i.write=function(g,b,y,w,x,T){var I,R,S,O=8*T-x-1,P=(1<<O)-1,N=P>>1,A=x===23?Math.pow(2,-24)-Math.pow(2,-77):0,j=w?0:T-1,X=w?1:-1,G=b<0||b===0&&1/b<0?1:0;for(b=Math.abs(b),isNaN(b)||b===1/0?(R=isNaN(b)?1:0,I=P):(I=Math.floor(Math.log(b)/Math.LN2),b*(S=Math.pow(2,-I))<1&&(I--,S*=2),2<=(b+=1<=I+N?A/S:A*Math.pow(2,1-N))*S&&(I++,S/=2),P<=I+N?(R=0,I=P):1<=I+N?(R=(b*S-1)*Math.pow(2,x),I+=N):(R=b*Math.pow(2,N-1)*Math.pow(2,x),I=0));8<=x;g[y+j]=255&R,j+=X,R/=256,x-=8);for(I=I<<x|R,O+=x;0<O;g[y+j]=255&I,j+=X,I/=256,O-=8);g[y+j-X]|=128*G}}).call(this,r("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},r("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/ieee754/index.js","/node_modules/ieee754")},{buffer:3,lYpoI2:10}]},{},[1])(1)})})(rk);function nk(e,t){var r;if(typeof Symbol>"u"||e[Symbol.iterator]==null){if(Array.isArray(e)||(r=zj(e))||t&&e&&typeof e.length=="number"){r&&(e=r);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(u){throw u},f:i}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var o=!0,s=!1,a;return{s:function(){r=e[Symbol.iterator]()},n:function(){var u=r.next();return o=u.done,u},e:function(u){s=!0,a=u},f:function(){try{!o&&r.return!=null&&r.return()}finally{if(s)throw a}}}}function zj(e,t){if(!!e){if(typeof e=="string")return _C(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return _C(e,t)}}function _C(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function u0(e){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?u0=function(r){return typeof r}:u0=function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},u0(e)}var Vj=GR,Xj=tk.exports,Wj=rk.exports,Yj=function(t){return t.split(".")},ik=function(t,r){for(var n=0;n<r.length-1;n++){var i=r[n];if(!t.hasOwnProperty(i)||(t=t[i],!Rp(t)))return}if(t.hasOwnProperty(r[n]))return t},Kj=function(t,r){return!!ik(t,r)},ok=function(t,r,n){for(var i=n;i<r.length-1;i++)t[r[i]]={},t=t[r[i]];return t},sk=function(t,r,n){(t=ik(t,r))&&n(t,r[r.length-1])},qj=function(t,r,n){var i=function(s,a){return s[a]=n};ak(t,r,i,i)},Rp=function(t){return u0(t)==="object"&&t!==null},ak=function(t,r,n,i){var o=r[r.length-1],s=function(c){t=ok(t,r,c),i(t,o)};if(!t.hasOwnProperty(r[0]))return s(0);if(r.length>1){t=t[r[0]];for(var a=1;a<r.length-1;a++){var l=r[a];if(!Rp(t[l])||Array.isArray(t)&&l<0)return;if(!t.hasOwnProperty(l))return s(a);t=t[l]}}n(t,o)},Zj=function(t,r){for(var n=0;n<r.length-1;n++)if(t=t[r[n]],!Rp(t))return;if(Array.isArray(t)){var i=Number.parseFloat(r[n]);Number.isInteger(i)&&t.splice(i,1)}else delete t[r[n]]},Jj=function e(t,r,n){var i=function(a){var l=[],u=nk(n),c;try{for(u.s();!(c=u.n()).done;){var f=c.value;if(f[0]===a){if(f.length===1)return;l.push(f.slice(1))}}}catch(m){u.e(m)}finally{u.f()}if(!l.length)r[a]=Xj(t[a]);else{var p=t[a];r[a]=new p.constructor,e(p,r[a],l)}};for(var o in t)i(o)},Qj=function(t,r){var n=new t.constructor;return Jj(t,n,r),n},e$=function(t,r,n){sk(t,r,function(i,o){i[n]=i[o],delete i[o]})},t$=function(t,r,n){for(var i=0;i<n.length-1;i++){var o=n[i];if(t=t[o],!Rp(t))return;r[o]=new t.constructor,r=r[o]}if(t.hasOwnProperty(n[i]))return r[n[i]]=t[n[i]],t},r$=function(t,r){var n=[],i=nk(r),o;try{for(i.s();!(o=i.n()).done;){var s=o.value,a=new t.constructor;t$(t,a,s)&&n.push(a)}}catch(l){i.e(l)}finally{i.f()}return n.reduce(Vj,{})},n$=function(t,r){return tw(t)===tw(r)},i$=function(t){throw Error("unknown operator '".concat(t,"'"))},tw=function(t){if(t!==void 0)return Wj(t)},o$=function(t){return Error(t.target.error.message)};Ht.toPathPieces=Yj;Ht.exists=Kj;Ht.create=ok;Ht.get=sk;Ht.set=qj;Ht.isObject=Rp;Ht.modify=ak;Ht.remove1=Zj;Ht.remove2=Qj;Ht.rename=e$;Ht.copy=r$;Ht.equal=n$;Ht.unknownOp=i$;Ht.hashify=tw;Ht.getIDBError=o$;var c4=Symbol("missing");function s$(e,t){var r;if(typeof Symbol>"u"||e[Symbol.iterator]==null){if(Array.isArray(e)||(r=a$(e))||t&&e&&typeof e.length=="number"){r&&(e=r);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(u){throw u},f:i}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var o=!0,s=!1,a;return{s:function(){r=e[Symbol.iterator]()},n:function(){var u=r.next();return o=u.done,u},e:function(u){s=!0,a=u},f:function(){try{!o&&r.return!=null&&r.return()}finally{if(s)throw a}}}}function a$(e,t){if(!!e){if(typeof e=="string")return bC(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return bC(e,t)}}function bC(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function l$(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function wC(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function u$(e,t,r){return t&&wC(e.prototype,t),r&&wC(e,r),e}var c$=Ht,h$=c$.get,xC=c4,f$=function(){function e(t){l$(this,e),this._doc=t}return u$(e,[{key:"get",value:function(r){var n=xC;return h$(this._doc,r.pieces,function(i,o){n=i[o]}),n}},{key:"ensure",value:function(r){var n=s$(r),i;try{for(n.s();!(i=n.n()).done;){var o=i.value;if(this.get(o)===xC)return!1}}catch(s){n.e(s)}finally{n.f()}return!0}}]),e}(),By=f$,d$=By,lk=function(e,t){return function(r){(function n(){e(function(i,o,s){o?t.run(new d$(o))?r(null,o,s):n():r(i)})})()}};function p$(e,t){return g$(e)||v$(e,t)||uk(e,t)||m$()}function m$(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function v$(e,t){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(e)))){var r=[],n=!0,i=!1,o=void 0;try{for(var s=e[Symbol.iterator](),a;!(n=(a=s.next()).done)&&(r.push(a.value),!(t&&r.length===t));n=!0);}catch(l){i=!0,o=l}finally{try{!n&&s.return!=null&&s.return()}finally{if(i)throw o}}return r}}function g$(e){if(Array.isArray(e))return e}function y$(e,t){var r;if(typeof Symbol>"u"||e[Symbol.iterator]==null){if(Array.isArray(e)||(r=uk(e))||t&&e&&typeof e.length=="number"){r&&(e=r);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(u){throw u},f:i}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var o=!0,s=!1,a;return{s:function(){r=e[Symbol.iterator]()},n:function(){var u=r.next();return o=u.done,u},e:function(u){s=!0,a=u},f:function(){try{!o&&r.return!=null&&r.return()}finally{if(s)throw a}}}}function uk(e,t){if(!!e){if(typeof e=="string")return TC(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return TC(e,t)}}function TC(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var h4=Ht,_$=h4.toPathPieces,W2=h4.isObject,b$=h4.equal,w$=function(t,r,n,i){for(var o=0;o<n.length-1;o++){var s=n[o];if(t=t[s],r=r[s],W2(t)){if(W2(r))continue}else if(!W2(r))return null;return i}var a=n[o];if(t.hasOwnProperty(a)){if(r.hasOwnProperty(a))return t=t[a],r=r[a],b$(t,r)?0:(t<r?1:-1)*i}else if(!r.hasOwnProperty(a))return null;return i},ck=function(e,t){var r=[];for(var n in t)r.push([_$(n),t[n]]);var i=function(u,c){var f=y$(r),p;try{for(f.s();!(p=f.n()).done;){var m=p$(p.value,2),g=m[0],b=m[1],y=w$(u,c,g,b);if(y>0||y<0)return y}}catch(w){f.e(w)}finally{f.f()}return-b},o=[],s=function(u){return u(null,o.pop())},a=function(u){var c=function(p){if(p)return u(p);o=o.sort(i),(a=s)(u)};(function f(){e(function(p,m){if(!m)return c(p);o.push(m),f()})})()};return function(l){return a(l)}},kp={};function x$(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var T$=Ht,S$=T$.toPathPieces,E$=function e(t){x$(this,e),this.pieces=S$(t),this.literal=t},hk=E$;function c0(e){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?c0=function(r){return typeof r}:c0=function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},c0(e)}function C$(e){return N$(e)||fk(e)||f4(e)||I$()}function I$(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function N$(e){if(Array.isArray(e))return e}function md(e,t,r){return typeof Reflect<"u"&&Reflect.get?md=Reflect.get:md=function(i,o,s){var a=P$(i,o);if(!!a){var l=Object.getOwnPropertyDescriptor(a,o);return l.get?l.get.call(s):l.value}},md(e,t,r||e)}function P$(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&(e=pu(e),e!==null););return e}function Eo(e){return R$(e)||fk(e)||f4(e)||A$()}function A$(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function fk(e){if(typeof Symbol<"u"&&Symbol.iterator in Object(e))return Array.from(e)}function R$(e){if(Array.isArray(e))return nw(e)}function Jr(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&rw(e,t)}function rw(e,t){return rw=Object.setPrototypeOf||function(n,i){return n.__proto__=i,n},rw(e,t)}function Qr(e){var t=L$();return function(){var n=pu(e),i;if(t){var o=pu(this).constructor;i=Reflect.construct(n,arguments,o)}else i=n.apply(this,arguments);return k$(this,i)}}function k$(e,t){return t&&(c0(t)==="object"||typeof t=="function")?t:O$(e)}function O$(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function L$(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}function pu(e){return pu=Object.setPrototypeOf?Object.getPrototypeOf:function(r){return r.__proto__||Object.getPrototypeOf(r)},pu(e)}function Gr(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function SC(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function mn(e,t,r){return t&&SC(e.prototype,t),r&&SC(e,r),e}function qi(e,t){var r;if(typeof Symbol>"u"||e[Symbol.iterator]==null){if(Array.isArray(e)||(r=f4(e))||t&&e&&typeof e.length=="number"){r&&(e=r);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(u){throw u},f:i}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var o=!0,s=!1,a;return{s:function(){r=e[Symbol.iterator]()},n:function(){var u=r.next();return o=u.done,u},e:function(u){s=!0,a=u},f:function(){try{!o&&r.return!=null&&r.return()}finally{if(s)throw a}}}}function f4(e,t){if(!!e){if(typeof e=="string")return nw(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return nw(e,t)}}function nw(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var d4=Ht,U$=d4.isObject,F$=d4.equal,dk=d4.unknownOp,Dy=c4,M$=hk,B$=By,pk=function e(t){if(typeof t=="number")return!isNaN(t);if(typeof t=="string"||typeof t=="boolean")return!0;if(!t||t.constructor===Object)return!1;if(Array.isArray(t)){var r=qi(t),n;try{for(r.s();!(n=r.n()).done;){var i=n.value;if(!e(i))return!1}}catch(o){r.e(o)}finally{r.f()}return!0}return t instanceof Date?!isNaN(t.valueOf()):!1},Ph=function(){function e(){Gr(this,e)}return mn(e,[{key:"getClauses",value:function(){return this.is_index_matchable?[this]:[]}}]),e}(),iw=function(e){Jr(r,e);var t=Qr(r);function r(n){var i;return Gr(this,r),i=t.call(this),i.args=n,i}return r}(Ph),Gy=function(e){Jr(r,e);var t=Qr(r);function r(){return Gr(this,r),t.apply(this,arguments)}return mn(r,[{key:"getClauses",value:function(){for(var i=[],o=0;o<this.args.length;o++){var s=this.args[o];s instanceof iw?i.push.apply(i,Eo(s.getClauses())):s.is_index_matchable&&(s.parent=this,s.index=o,i.push(s))}return i}},{key:"run",value:function(i){var o=qi(this.args),s;try{for(o.s();!(s=o.n()).done;){var a=s.value;if(!a.run(i))return!1}}catch(l){o.e(l)}finally{o.f()}return!0}}]),r}(iw),vg=function(e){Jr(r,e);var t=Qr(r);function r(){return Gr(this,r),t.apply(this,arguments)}return mn(r,[{key:"getClauses",value:function(){return[]}},{key:"run",value:function(i){var o=qi(this.args),s;try{for(o.s();!(s=o.n()).done;){var a=s.value;if(a.run(i))return!0}}catch(l){o.e(l)}finally{o.f()}return!1}}]),r}(iw),D$=function(e){Jr(r,e);var t=Qr(r);function r(){return Gr(this,r),t.apply(this,arguments)}return mn(r,[{key:"getClauses",value:function(){return[]}},{key:"run",value:function(i){return!md(pu(r.prototype),"run",this).call(this,i)}}]),r}(Gy),ow=function(e){Jr(r,e);var t=Qr(r);function r(n,i){var o;return Gr(this,r),o=t.call(this),o.path=n,o.bool=i,o}return mn(r,[{key:"run",value:function(i){return i.get(this.path)!==Dy===this.bool}},{key:"is_index_matchable",get:function(){return!!this.bool}}]),r}(Ph),h0=function(e){Jr(r,e);var t=Qr(r);function r(n,i){var o;return Gr(this,r),o=t.call(this),o.path=n,o.value=i,o}return mn(r,[{key:"run",value:function(i){var o=i.get(this.path);return o===Dy?!1:F$(o,this.value)}},{key:"is_index_matchable",get:function(){return pk(this.value)}},{key:"idb_key_range",get:function(){return IDBKeyRange.only(this.value)}}]),r}(Ph),EC=function(e){Jr(r,e);var t=Qr(r);function r(){return Gr(this,r),t.apply(this,arguments)}return mn(r,[{key:"run",value:function(i){return!md(pu(r.prototype),"run",this).call(this,i)}},{key:"is_index_matchable",get:function(){return!1}}]),r}(h0),G$=function(e){Jr(r,e);var t=Qr(r);function r(n,i,o){var s;return Gr(this,r),s=t.call(this),s.path=n,s.fns=i,s.values=o,s}return mn(r,[{key:"run",value:function(i){var o=i.get(this.path);if(o===Dy||o==null)return!1;for(var s=this.fns,a=this.values,l=0;l<s.length;l++)if(!s[l](o,a[l]))return!1;return!0}},{key:"is_index_matchable",get:function(){return!0}}]),r}(Ph),pl=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return function(i){Jr(s,i);var o=Qr(s);function s(a,l){return Gr(this,s),o.call(this,a,r,l)}return s}(G$)},p4=function(t,r){return t>r},m4=function(t,r){return t>=r},v4=function(t,r){return t<r},g4=function(t,r){return t<=r},j$=function(e){Jr(r,e);var t=Qr(r);function r(){return Gr(this,r),t.apply(this,arguments)}return mn(r,[{key:"idb_key_range",get:function(){var i;return(i=IDBKeyRange).lowerBound.apply(i,Eo(this.values).concat([!0]))}}]),r}(pl(p4)),$$=function(e){Jr(r,e);var t=Qr(r);function r(){return Gr(this,r),t.apply(this,arguments)}return mn(r,[{key:"idb_key_range",get:function(){var i;return(i=IDBKeyRange).lowerBound.apply(i,Eo(this.values))}}]),r}(pl(m4)),H$=function(e){Jr(r,e);var t=Qr(r);function r(){return Gr(this,r),t.apply(this,arguments)}return mn(r,[{key:"idb_key_range",get:function(){var i;return(i=IDBKeyRange).upperBound.apply(i,Eo(this.values).concat([!0]))}}]),r}(pl(v4)),z$=function(e){Jr(r,e);var t=Qr(r);function r(){return Gr(this,r),t.apply(this,arguments)}return mn(r,[{key:"idb_key_range",get:function(){var i;return(i=IDBKeyRange).upperBound.apply(i,Eo(this.values))}}]),r}(pl(g4)),V$=function(e){Jr(r,e);var t=Qr(r);function r(){return Gr(this,r),t.apply(this,arguments)}return mn(r,[{key:"idb_key_range",get:function(){var i;return(i=IDBKeyRange).bound.apply(i,Eo(this.values).concat([!0,!0]))}}]),r}(pl(p4,v4)),X$=function(e){Jr(r,e);var t=Qr(r);function r(){return Gr(this,r),t.apply(this,arguments)}return mn(r,[{key:"idb_key_range",get:function(){var i;return(i=IDBKeyRange).bound.apply(i,Eo(this.values).concat([!1,!0]))}}]),r}(pl(m4,v4)),W$=function(e){Jr(r,e);var t=Qr(r);function r(){return Gr(this,r),t.apply(this,arguments)}return mn(r,[{key:"idb_key_range",get:function(){var i;return(i=IDBKeyRange).bound.apply(i,Eo(this.values).concat([!0,!1]))}}]),r}(pl(p4,g4)),Y$=function(e){Jr(r,e);var t=Qr(r);function r(){return Gr(this,r),t.apply(this,arguments)}return mn(r,[{key:"idb_key_range",get:function(){var i;return(i=IDBKeyRange).bound.apply(i,Eo(this.values))}}]),r}(pl(m4,g4)),K$=function(e){Jr(r,e);var t=Qr(r);function r(n,i){var o;return Gr(this,r),o=t.call(this),o.path=n,o.op=i,o}return mn(r,[{key:"run",value:function(i){var o=i.get(this.path);if(!o||!o[Symbol.iterator])return!1;var s=this.op,a=qi(o),l;try{for(a.s();!(l=a.n()).done;){var u=l.value;if(U$(u)&&s.run(new B$(u)))return!0}}catch(c){a.e(c)}finally{a.f()}return!1}},{key:"is_index_matchable",get:function(){return!1}}]),r}(Ph),q$=function(e){Jr(r,e);var t=Qr(r);function r(n,i){var o;return Gr(this,r),o=t.call(this),o.path=n,o.expr=i,o}return mn(r,[{key:"run",value:function(i){var o=i.get(this.path);return o===Dy?!1:this.expr.test(o)}},{key:"is_index_matchable",get:function(){return!1}}]),r}(Ph),Z$=function(t,r){var n=qi(r),i;try{for(n.s();!(i=n.n()).done;){var o=i.value,s=Op(o);if(s===!1)return!1;!s||(s.constructor===Gy?t.push.apply(t,Eo(s.args)):t.push(s))}}catch(a){n.e(a)}finally{n.f()}return!0},J$=function(t,r){var n=[],i,o=qi(r),s;try{for(o.s();!(s=o.n()).done;){var a=s.value,l=Op(a);if(!l){l===!1&&(i=!0);continue}l.constructor===vg?n.push.apply(n,Eo(l.args)):n.push(l)}}catch(u){o.e(u)}finally{o.f()}if(n.length>1)t.push(new vg(n));else if(n.length)t.push(n[0]);else if(i)return!1;return!0},CC=function(t,r){var n=[],i=qi(r),o;try{for(i.s();!(o=i.n()).done;){var s=o.value,a=Op(s);a&&n.push(a)}}catch(l){i.e(l)}finally{i.f()}return n.length&&t.push(new D$(n)),!0},Q$={$and:Z$,$or:J$,$not:CC,$nor:CC},eH=[[V$,"$gt","$lt"],[X$,"$gte","$lt"],[W$,"$gt","$lte"],[Y$,"$gte","$lte"],[j$,"$gt"],[$$,"$gte"],[H$,"$lt"],[z$,"$lte"]],tH=function(t,r,n,i){var o=function(m,g){var b=[],y=qi(g),w;try{for(y.s();!(w=y.n()).done;){var x=w.value;if(!i.has(x))return;var T=n[x];if(!pk(T))return!1;b.push(T)}}catch(I){y.e(I)}finally{y.f()}return t.push(new m(r,b)),!0},s=qi(eH),a;try{for(s.s();!(a=s.n()).done;){var l=C$(a.value),u=l[0],c=l.slice(1),f=o(u,c);if(f===!1)return;if(!!f){i.delete("$gt"),i.delete("$gte"),i.delete("$lt"),i.delete("$lte");break}}}catch(p){s.e(p)}finally{s.f()}return!0},rH=function(t,r,n){var i=function(){return t.push(new h0(r,n)),!0};if(n==null||n.constructor!==Object)return i();var o=new Set(Object.keys(n));if(o.has("$exists")&&!n.$exists)return t.push(new ow(r,!1)),!0;var s=[];if(o.has("$eq")&&(s.push(new h0(r,n.$eq)),o.delete("$eq")),o.has("$ne")&&(s.push(new EC(r,n.$ne)),o.delete("$ne")),!tH(s,r,n,o))return!1;if(o.has("$in")){var a=[],l=qi(n.$in),u;try{for(l.s();!(u=l.n()).done;){var c=u.value;a.push(new h0(r,c))}}catch(T){l.e(T)}finally{l.f()}a.length>1?s.push(new vg(a)):a.length&&s.push(a[0]),o.delete("$in")}if(o.has("$nin")){var f=qi(n.$nin),p;try{for(f.s();!(p=f.n()).done;){var m=p.value;s.push(new EC(r,m))}}catch(T){f.e(T)}finally{f.f()}o.delete("$nin")}if(o.has("$elemMatch")){var g=Op(n.$elemMatch);g&&s.push(new K$(r,g)),o.delete("$elemMatch")}if(o.has("$regex")){var b=new RegExp(n.$regex,n.$options);s.push(new q$(r,b)),o.delete("$regex"),o.delete("$options")}n.$exists&&!s.length&&(s.push(new ow(r,!0)),o.delete("$exists"));var y=qi(o),w;try{for(y.s();!(w=y.n()).done;){var x=w.value;x[0]==="$"&&dk(x)}}catch(T){y.e(T)}finally{y.f()}return s.length?(t.push.apply(t,s),!0):i()},Op=function(t){var r=[];for(var n in t){var i=t[n],o=void 0;if(n[0]!=="$")o=rH(r,new M$(n),i);else{Array.isArray(i)||(i=[i]);var s=Q$[n];s||dk(n),o=s(r,i)}if(!o)return o}if(!!r.length)return r.length===1?r[0]:new Gy(r)};kp.build=Op;kp.Conjunction=Gy;kp.Disjunction=vg;kp.Exists=ow;function y4(e,t){return oH(e)||iH(e,t)||mk(e,t)||nH()}function nH(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function iH(e,t){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(e)))){var r=[],n=!0,i=!1,o=void 0;try{for(var s=e[Symbol.iterator](),a;!(n=(a=s.next()).done)&&(r.push(a.value),!(t&&r.length===t));n=!0);}catch(l){i=!0,o=l}finally{try{!n&&s.return!=null&&s.return()}finally{if(i)throw o}}return r}}function oH(e){if(Array.isArray(e))return e}function Ah(e,t){var r;if(typeof Symbol>"u"||e[Symbol.iterator]==null){if(Array.isArray(e)||(r=mk(e))||t&&e&&typeof e.length=="number"){r&&(e=r);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(u){throw u},f:i}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var o=!0,s=!1,a;return{s:function(){r=e[Symbol.iterator]()},n:function(){var u=r.next();return o=u.done,u},e:function(u){s=!0,a=u},f:function(){try{!o&&r.return!=null&&r.return()}finally{if(s)throw a}}}}function mk(e,t){if(!!e){if(typeof e=="string")return IC(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return IC(e,t)}}function IC(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var sH=GR,vk=Ht,aH=vk.hashify,gk=vk.getIDBError,_4=lk,b4=ck,jy=kp,lH=jy.build,uH=jy.Conjunction,cH=jy.Disjunction,hH=jy.Exists,fH=function(t){return t>0?"next":"prev"},dH=function(t){return t.length>1?new uH(t):t[0]},pH=function(t){var r=t.parent,n=t.index;r.args.splice(n,1)},mH=function(t,r){var n=t.col,i=t.read_pref;n._db._getConn(function(o,s){if(o)return r(o);var a=n._name;try{var l=s.transaction([a],i);l.onerror=function(u){return r(gk(u))},r(null,l.objectStore(a))}catch(u){r(u)}})},vH=function(t,r){var n=r.idb_key_range||null,i=r.idb_direction||"next",o=r.path.literal,s;return o==="_id"?s=t:s=t.index(o),s.openCursor(n,i)},gH=function(t){return t.openCursor()},yH=function(t){var r=[],n=Ah(t),i;try{for(n.s();!(i=n.n()).done;){var o=y4(i.value,2),s=o[0],a=o[1];if(s===_4){var l=lH(a);if(l===!1)return;if(!l)continue;a=l}r.push([s,a])}}catch(u){n.e(u)}finally{n.f()}return r},_H=function(t){var r=t.pipeline,n=[],i=[],o=0,s=Ah(r),a;try{for(s.s();!(a=s.n()).done;){var l=y4(a.value,2),u=l[0],c=l[1];if(u===b4)i.push(c);else if(u===_4)n.push(c);else break;o++}}catch(f){s.e(f)}finally{s.f()}r.splice(0,o),t.pred=dH(n),i.length&&(t.sort_spec=i.reduce(sH,{}))},bH=function(t,r){if(!r)return[];var n=[],i=[],o=Ah(r.getClauses()),s;try{for(o.s();!(s=o.n()).done;){var a=s.value;t._isIndexed(a.path.literal)&&(a instanceof hH?i.push(a):n.push(a))}}catch(l){o.e(l)}finally{o.f()}return n.length?n:i},yk=function(t){var r=t.col,n=t.pred;t.clauses=bH(r,n)},wH=function(t){if(!!t.hint){var r=t.clauses,n=t.hint,i=[],o=Ah(r),s;try{for(o.s();!(s=o.n()).done;){var a=s.value;a.path.literal===n&&i.push(a)}}catch(l){o.e(l)}finally{o.f()}i.length||(i=[{path:{literal:n}}]),t.clauses=i}},xH=function(t){if(!!t.sort_spec){var r=t.clauses,n=t.sort_spec,i=t.pipeline,o=[],s=Ah(r),a;try{for(s.s();!(a=s.n()).done;){var l=a.value,u=l.path.literal;if(!!n.hasOwnProperty(u)){var c=n[u];l.idb_direction=fH(c),o.push(l)}}}catch(f){s.e(f)}finally{s.f()}o.length?t.clauses=o:i.unshift([b4,n])}},TH=function(t){var r=t.pred,n=t.clauses,i=t.pipeline,o;if(n.length){var s=n[0];if(o=function(l){return vH(l,s)},!r||s===r)return o;pH(s)}else if(o=gH,!r)return o;return i.unshift([_4,r]),o},SH=function(t){var r,n,i=TH(t),o=function(u){n.onsuccess=function(c){r=c.target.result,u()},n.onerror=function(c){return u(gk(c))}},s=function(u){o(u),r.continue()},a=function(u){mH(t,function(c,f){if(c)return u(c);n=i(f),o(function(p){r&&(a=s),u(p)})})};return function(l){return a(function(u){return l(u,r)})}},_k=function(t,r){var n=t.pipeline,i=Ah(n),o;try{for(i.s();!(o=i.n()).done;){var s=y4(o.value,2),a=s[0],l=s[1];r=a(r,l)}}catch(u){i.e(u)}finally{i.f()}return r},EH=function(t){for(var r=[],n=t.pred.args,i=n.length-1;i>=0;i--){var o={col:t.col,read_pref:t.read_pref,pred:n[i],pipeline:[]};yk(o);var s=bk(o);r.push(_k(o,s))}var a=new Set,l=function(b){var y=aH(b._id);if(!a.has(y))return a.add(y)},u=function(){return r.pop()},c=u(),f=function(b){(c=u())?p(b):b()},p=function g(b){c(function(y,w,x){y?b(y):w?l(w)?b(null,w,x):g(b):f(b)})},m=t.sort_spec;return m&&t.pipeline.push([b4,m]),p},bk=function(t){var r=SH(t),n=function(o){r(function(s,a){a?o(null,a.value,a):o(s)})};return n},CH=function(e){var t;try{t=yH(e._pipeline)}catch(i){return function(o){return o(i)}}if(!t)return function(i){return i()};var r={col:e._col,read_pref:e._read_pref,hint:e._hint,pipeline:t};_H(r);var n;return r.pred instanceof cH?n=EH(r):(yk(r),wH(r),xH(r),n=bk(r)),_k(r,n)};function f0(e){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?f0=function(r){return typeof r}:f0=function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},f0(e)}function sw(e,t){var r;if(typeof Symbol>"u"||e[Symbol.iterator]==null){if(Array.isArray(e)||(r=wk(e))||t&&e&&typeof e.length=="number"){r&&(e=r);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(u){throw u},f:i}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var o=!0,s=!1,a;return{s:function(){r=e[Symbol.iterator]()},n:function(){var u=r.next();return o=u.done,u},e:function(u){s=!0,a=u},f:function(){try{!o&&r.return!=null&&r.return()}finally{if(s)throw a}}}}function IH(e){return AH(e)||PH(e)||wk(e)||NH()}function NH(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function wk(e,t){if(!!e){if(typeof e=="string")return aw(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return aw(e,t)}}function PH(e){if(typeof Symbol<"u"&&Symbol.iterator in Object(e))return Array.from(e)}function AH(e){if(Array.isArray(e))return aw(e)}function aw(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function pt(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&lw(e,t)}function lw(e,t){return lw=Object.setPrototypeOf||function(n,i){return n.__proto__=i,n},lw(e,t)}function mt(e){var t=OH();return function(){var n=gg(e),i;if(t){var o=gg(this).constructor;i=Reflect.construct(n,arguments,o)}else i=n.apply(this,arguments);return RH(this,i)}}function RH(e,t){return t&&(f0(t)==="object"||typeof t=="function")?t:kH(e)}function kH(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function OH(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}function gg(e){return gg=Object.setPrototypeOf?Object.getPrototypeOf:function(r){return r.__proto__||Object.getPrototypeOf(r)},gg(e)}function ut(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function NC(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Jn(e,t,r){return t&&NC(e.prototype,t),r&&NC(e,r),e}var LH=Ht,UH=LH.unknownOp,FH=c4,MH=hk,ss=function(){function e(t){ut(this,e),this.value=t}return Jn(e,[{key:"run",value:function(){return this.value}},{key:"ResultType",get:function(){return this.constructor}}],[{key:"any",value:function(r){return typeof r=="number"?new $y(r):typeof r=="string"?new yg(r):Array.isArray(r)?new xk(r):r instanceof Date?new Tk(r):new e(r)}},{key:"literal",value:function(r){return new BH(e.any(r))}}]),e}(),$y=function(e){pt(r,e);var t=mt(r);function r(){return ut(this,r),t.apply(this,arguments)}return Jn(r,null,[{key:"isType",value:function(i){return typeof i=="number"}}]),r}(ss),yg=function(e){pt(r,e);var t=mt(r);function r(){return ut(this,r),t.apply(this,arguments)}return Jn(r,null,[{key:"isType",value:function(i){return typeof i=="string"}}]),r}(ss),xk=function(e){pt(r,e);var t=mt(r);function r(){return ut(this,r),t.apply(this,arguments)}return Jn(r,null,[{key:"isType",value:function(i){return Array.isArray(i)}}]),r}(ss),Tk=function(e){pt(r,e);var t=mt(r);function r(){return ut(this,r),t.apply(this,arguments)}return Jn(r,null,[{key:"isType",value:function(i){return i instanceof Date}}]),r}(ss),BH=function(e){pt(r,e);var t=mt(r);function r(){return ut(this,r),t.apply(this,arguments)}return Jn(r,[{key:"run",value:function(){return this.value.run()}},{key:"ResultType",get:function(){return this.value.ResultType}}]),r}(ss),DH=function(){function e(t){ut(this,e),this.path=t}return Jn(e,[{key:"run",value:function(r){var n=r.get(this.path);return n===FH?null:n}}]),e}(),GH=function(e){pt(r,e);var t=mt(r);function r(){return ut(this,r),t.apply(this,arguments)}return Jn(r,[{key:"run",value:function(i){var o={},s=this.value;for(var a in s)o[a]=s[a].run(i);return o}}]),r}(ss),jH=function(){function e(){ut(this,e),this.args=[]}return Jn(e,[{key:"add",value:function(r){this.args.push(r)}},{key:"alt",get:function(){return new ss(null)}}]),e}(),Lp=function(e){pt(r,e);var t=mt(r);function r(n){var i;return ut(this,r),i=t.call(this),i.fn=n,i}return Jn(r,[{key:"run",value:function(i){var o=this.args,s=this.fn;return o.map(function(a){return a.run(i)}).reduce(s)}},{key:"length",get:function(){return 1/0}}]),r}(jH),Sk=function(e){pt(r,e);var t=mt(r);function r(){return ut(this,r),t.apply(this,arguments)}return Jn(r,[{key:"run",value:function(i){return this.fn(this.args[0].run(i))}},{key:"length",get:function(){return 1}}]),r}(Lp),Pu=function(t,r){return function(n){pt(o,n);var i=mt(o);function o(){return ut(this,o),i.call(this,r)}return o}(t)},Rh=function(t,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:r,i=function(o){pt(a,o);var s=mt(a);function a(){return ut(this,a),s.apply(this,arguments)}return a}(t);return i.prototype.InputType=r,i.prototype.ResultType=n,i},$H=function(e){pt(r,e);var t=mt(r);function r(){return ut(this,r),t.apply(this,arguments)}return r}(Rh(Lp,$y)),Up=function(t){return Pu($H,t)},HH=function(e){pt(r,e);var t=mt(r);function r(){return ut(this,r),t.apply(this,arguments)}return r}(Up(function(e,t){return e+t})),zH=function(e){pt(r,e);var t=mt(r);function r(){return ut(this,r),t.apply(this,arguments)}return r}(Up(function(e,t){return e-t})),VH=function(e){pt(r,e);var t=mt(r);function r(){return ut(this,r),t.apply(this,arguments)}return r}(Up(function(e,t){return e*t})),XH=function(e){pt(r,e);var t=mt(r);function r(){return ut(this,r),t.apply(this,arguments)}return r}(Up(function(e,t){return e/t})),WH=function(e){pt(r,e);var t=mt(r);function r(){return ut(this,r),t.apply(this,arguments)}return r}(Up(function(e,t){return e%t})),YH=function(e){pt(r,e);var t=mt(r);function r(){return ut(this,r),t.apply(this,arguments)}return Jn(r,[{key:"run",value:function(i){return this.fn.apply(this,IH(this.args.map(function(o){return o.run(i)})))}},{key:"length",get:function(){return this.fn.length}}]),r}(Rh(Lp,$y)),ml=function(t){return Pu(YH,t)},KH=function(e){pt(r,e);var t=mt(r);function r(){return ut(this,r),t.apply(this,arguments)}return r}(ml(Math.abs)),qH=function(e){pt(r,e);var t=mt(r);function r(){return ut(this,r),t.apply(this,arguments)}return r}(ml(Math.ceil)),ZH=function(e){pt(r,e);var t=mt(r);function r(){return ut(this,r),t.apply(this,arguments)}return r}(ml(Math.floor)),JH=function(e){pt(r,e);var t=mt(r);function r(){return ut(this,r),t.apply(this,arguments)}return r}(ml(Math.log)),QH=function(e){pt(r,e);var t=mt(r);function r(){return ut(this,r),t.apply(this,arguments)}return r}(ml(Math.log10)),ez=function(e){pt(r,e);var t=mt(r);function r(){return ut(this,r),t.apply(this,arguments)}return r}(ml(Math.pow)),tz=function(e){pt(r,e);var t=mt(r);function r(){return ut(this,r),t.apply(this,arguments)}return r}(ml(Math.sqrt)),rz=function(e){pt(r,e);var t=mt(r);function r(){return ut(this,r),t.apply(this,arguments)}return r}(ml(Math.trunc)),nz=function(e){pt(r,e);var t=mt(r);function r(){return ut(this,r),t.apply(this,arguments)}return r}(Rh(Lp,yg)),iz=function(e){pt(r,e);var t=mt(r);function r(){return ut(this,r),t.apply(this,arguments)}return r}(Pu(nz,function(e,t){return e+t})),Ek=function(e){pt(r,e);var t=mt(r);function r(){return ut(this,r),t.apply(this,arguments)}return Jn(r,[{key:"alt",get:function(){return new yg("")}}]),r}(Rh(Sk,yg)),oz=function(e){pt(r,e);var t=mt(r);function r(){return ut(this,r),t.apply(this,arguments)}return r}(Pu(Ek,function(e){return e.toLowerCase()})),sz=function(e){pt(r,e);var t=mt(r);function r(){return ut(this,r),t.apply(this,arguments)}return r}(Pu(Ek,function(e){return e.toUpperCase()})),az=function(e){pt(r,e);var t=mt(r);function r(){return ut(this,r),t.apply(this,arguments)}return r}(Rh(Lp,xk)),lz=function(e){pt(r,e);var t=mt(r);function r(){return ut(this,r),t.apply(this,arguments)}return r}(Pu(az,function(e,t){return e.concat(t)})),uz=function(e){pt(r,e);var t=mt(r);function r(){return ut(this,r),t.apply(this,arguments)}return r}(Rh(Sk,Tk,$y)),Au=function(t){return Pu(uz,t)},cz=function(e){pt(r,e);var t=mt(r);function r(){return ut(this,r),t.apply(this,arguments)}return r}(Au(function(e){return e.getDate()})),hz=function(e){pt(r,e);var t=mt(r);function r(){return ut(this,r),t.apply(this,arguments)}return r}(Au(function(e){return e.getUTCFullYear()})),fz=function(e){pt(r,e);var t=mt(r);function r(){return ut(this,r),t.apply(this,arguments)}return r}(Au(function(e){return e.getUTCMonth()+1})),dz=function(e){pt(r,e);var t=mt(r);function r(){return ut(this,r),t.apply(this,arguments)}return r}(Au(function(e){return e.getUTCHours()})),pz=function(e){pt(r,e);var t=mt(r);function r(){return ut(this,r),t.apply(this,arguments)}return r}(Au(function(e){return e.getUTCMinutes()})),mz=function(e){pt(r,e);var t=mt(r);function r(){return ut(this,r),t.apply(this,arguments)}return r}(Au(function(e){return e.getUTCSeconds()})),vz=function(e){pt(r,e);var t=mt(r);function r(){return ut(this,r),t.apply(this,arguments)}return r}(Au(function(e){return e.getUTCMilliseconds()})),PC=function(){function e(t,r,n){ut(this,e);var i=n.InputType,o=n.alt;this.result_types=new Set([n.ResultType,o.ResultType]),this.stack=t,this.isType=i.isType,this.args=r,this.op=n,this.alt_value=o.value}return Jn(e,[{key:"run",value:function(r){var n=this.stack,i=this.isType,o=this.op,s=[],a=sw(this.args),l;try{for(a.s();!(l=a.n()).done;){var u=l.value,c=u.run(r);if(!i(c))return this.alt_value;s.push(c)}}catch(p){a.e(p)}finally{a.f()}for(var f=s.length-1;f>=0;f--)n.push(s[f]);return o.run(r)}}]),e}(),gz=function(){function e(t){ut(this,e),this.stack=t}return Jn(e,[{key:"run",value:function(){return this.stack.pop()}}]),e}(),yz={$add:HH,$subtract:zH,$multiply:VH,$divide:XH,$mod:WH,$abs:KH,$ceil:qH,$floor:ZH,$ln:JH,$log10:QH,$pow:ez,$sqrt:tz,$trunc:rz,$concat:iz,$toLower:oz,$toUpper:sz,$concatArrays:lz,$dayOfMonth:cz,$year:hz,$month:fz,$hour:dz,$minute:pz,$second:mz,$millisecond:vz},_z=function(t,r,n){var i=yz[r];i||UH(r),Array.isArray(n)||(n=[n]);for(var o=new i,s=[],a=[],l=[],u=0;u<n.length&&u<o.length;u++){var c=w4(a,n[u]);if(c.ResultType){if(c.ResultType!==o.InputType)return o.alt;o.add(c);continue}if(c instanceof PC){if(!c.result_types.has(o.InputType))return o.alt;if(c.result_types.size===1){o.add(c);continue}}s.push(c),o.add(new gz(l))}return a.length?(t.push.apply(t,a),s.length?new PC(l,s,o):o):new o.ResultType(o.run())},bz=function(t,r){var n=new Set,i=new Set;for(var o in r)(o[0]==="$"?n:i).add(o);if(n.size>1)throw Error("objects cannot have more than one operator");if(n.size){var s=sw(i),a;try{for(s.s();!(a=s.n()).done;){var l=a.value;throw Error("unexpected field '".concat(l,"'"))}}catch(y){s.e(y)}finally{s.f()}var u=sw(n),c;try{for(u.s();!(c=u.n()).done;){var f=c.value;return f==="$literal"?ss.literal(r[f]):_z(t,f,r[f])}}catch(y){u.e(y)}finally{u.f()}}var p=[],m={};for(var g in r)m[g]=w4(p,r[g]);var b=new GH(m);return p.length?(t.push.apply(t,p),b):new ss(b.run())},w4=function(t,r){if(typeof r=="string"&&r[0]==="$"){var n=new MH(r.substring(1));return t.push(n),new DH(n)}return r==null||r.constructor!==Object?ss.any(r):bz(t,r)},Ck=function(e){var t=[],r=w4(t,e);return{ast:r,paths:t,has_refs:!!t.length}};function wz(e,t){return Sz(e)||Tz(e,t)||Nk(e,t)||xz()}function xz(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Tz(e,t){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(e)))){var r=[],n=!0,i=!1,o=void 0;try{for(var s=e[Symbol.iterator](),a;!(n=(a=s.next()).done)&&(r.push(a.value),!(t&&r.length===t));n=!0);}catch(l){i=!0,o=l}finally{try{!n&&s.return!=null&&s.return()}finally{if(i)throw o}}return r}}function Sz(e){if(Array.isArray(e))return e}function Ik(e,t){var r;if(typeof Symbol>"u"||e[Symbol.iterator]==null){if(Array.isArray(e)||(r=Nk(e))||t&&e&&typeof e.length=="number"){r&&(e=r);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(u){throw u},f:i}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var o=!0,s=!1,a;return{s:function(){r=e[Symbol.iterator]()},n:function(){var u=r.next();return o=u.done,u},e:function(u){s=!0,a=u},f:function(){try{!o&&r.return!=null&&r.return()}finally{if(s)throw a}}}}function Nk(e,t){if(!!e){if(typeof e=="string")return AC(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return AC(e,t)}}function AC(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var Hy=Ht,Ez=Hy.toPathPieces,RC=Hy.set,Cz=Hy.remove2,Iz=Hy.copy,Nz=Ck,Pz=By,Az=function(t,r,n){var i=Ik(n),o;try{for(i.s();!(o=i.n()).done;){var s=wz(o.value,2),a=s[0],l=s[1];l(t,r,a)}}catch(u){i.e(u)}finally{i.f()}return r},Rz=function(t){var r=Nz(t),n=r.ast,i=r.paths,o=r.has_refs;if(!o){var s=n.run();return function(a){for(var l=arguments.length,u=new Array(l>1?l-1:0),c=1;c<l;c++)u[c-1]=arguments[c];return RC.apply(void 0,u.concat([s]))}}return function(a){var l=new Pz(a);if(l.ensure(i)){for(var u=arguments.length,c=new Array(u>1?u-1:0),f=1;f<u;f++)c[f-1]=arguments[f];RC.apply(void 0,c.concat([n.run(l)]))}}},kz=function(t,r){var n=function(x){return!!r[x]},i=!0;r.hasOwnProperty("_id")&&(i=n("_id"),delete r._id);var o=[],s=[],a=!0,l=function(x){if(n(x)!==a)throw Error("cannot mix inclusions and exclusions")},u=function(x){a=n(x),u=l};for(var c in r){var f=r[c],p=Ez(c);typeof f=="boolean"||f===1||f===0?(u(c),o.push(p)):s.push([p,Rz(f)])}var m=[];if(s.length&&m.push(function(w,x){return Az(w,x,s)}),o.length){a===i&&o.push(["_id"]);var b=a?Iz:Cz;m.push(function(w){return b(w,o)})}else{var g;i?g=function(x,T){x.hasOwnProperty("_id")&&(T._id=x._id)}:g=function(x,T){delete T._id},m.push(function(w,x){return g(w,x),x})}var y=function(x){t(function(T,I){if(!I)return x(T);var R=I,S=Ik(m),O;try{for(S.s();!(O=S.n()).done;){var P=O.value;R=P(I,R)}}catch(N){S.e(N)}finally{S.f()}x(null,R)})};return y},Oz=kz;function d0(e){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?d0=function(r){return typeof r}:d0=function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},d0(e)}function Pk(e,t){var r;if(typeof Symbol>"u"||e[Symbol.iterator]==null){if(Array.isArray(e)||(r=Lz(e))||t&&e&&typeof e.length=="number"){r&&(e=r);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(u){throw u},f:i}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var o=!0,s=!1,a;return{s:function(){r=e[Symbol.iterator]()},n:function(){var u=r.next();return o=u.done,u},e:function(u){s=!0,a=u},f:function(){try{!o&&r.return!=null&&r.return()}finally{if(s)throw a}}}}function Lz(e,t){if(!!e){if(typeof e=="string")return kC(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return kC(e,t)}}function kC(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Kc(e,t,r){return typeof Reflect<"u"&&Reflect.get?Kc=Reflect.get:Kc=function(i,o,s){var a=Uz(i,o);if(!!a){var l=Object.getOwnPropertyDescriptor(a,o);return l.get?l.get.call(s):l.value}},Kc(e,t,r||e)}function Uz(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&(e=ol(e),e!==null););return e}function Ru(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&uw(e,t)}function uw(e,t){return uw=Object.setPrototypeOf||function(n,i){return n.__proto__=i,n},uw(e,t)}function ku(e){var t=Bz();return function(){var n=ol(e),i;if(t){var o=ol(this).constructor;i=Reflect.construct(n,arguments,o)}else i=n.apply(this,arguments);return Fz(this,i)}}function Fz(e,t){return t&&(d0(t)==="object"||typeof t=="function")?t:Mz(e)}function Mz(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Bz(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}function ol(e){return ol=Object.setPrototypeOf?Object.getPrototypeOf:function(r){return r.__proto__||Object.getPrototypeOf(r)},ol(e)}function vl(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function OC(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function kh(e,t,r){return t&&OC(e.prototype,t),r&&OC(e,r),e}var Ak=Ht,Dz=Ak.unknownOp,cw=Ak.hashify,Rk=Ck,kk=By,zy=function(){function e(){vl(this,e)}return kh(e,[{key:"getOpValueWithRefs",value:function(r,n,i){var o=r.ast,s=r.fields;i(o.run(s))}},{key:"value",get:function(){return this._value}}],[{key:"getNoRefsSteps",value:function(r){return r.in_iter}},{key:"getOpValue",value:function(r,n){n(r.ast.run())}}]),e}(),Ok=function(e){Ru(r,e);var t=ku(r);function r(){var n;return vl(this,r),n=t.call(this),n._value=0,n}return kh(r,[{key:"getOpValueWithRefs",value:function(i,o,s){Kc(ol(r.prototype),"getOpValueWithRefs",this).call(this,i,o,function(a){r._verify(a,s)})}},{key:"add",value:function(i){this._value+=i}}],[{key:"_verify",value:function(i,o){typeof i=="number"&&o(i)}},{key:"getOpValue",value:function(i,o){Kc(ol(r),"getOpValue",this).call(this,i,function(s){return r._verify(s,o)})}}]),r}(zy),Gz=function(e){Ru(r,e);var t=ku(r);function r(){var n;return vl(this,r),n=t.call(this),n._count=0,n}return kh(r,[{key:"add",value:function(i){this._count++,Kc(ol(r.prototype),"add",this).call(this,i)}},{key:"value",get:function(){return this._value/this._count||0}}]),r}(Ok),Lk=function(e){Ru(r,e);var t=ku(r);function r(n){var i;return vl(this,r),i=t.call(this),i._value=null,i._fn=n,i._add=i._add1,i}return kh(r,[{key:"_add1",value:function(i){this._value=i,this._add=this._add2}},{key:"_add2",value:function(i){this._fn(i,this._value)&&(this._value=i)}},{key:"add",value:function(i){i!=null&&this._add(i)}}],[{key:"getNoRefsSteps",value:function(i){return i.in_end}}]),r}(zy),jz=function(e){Ru(r,e);var t=ku(r);function r(){return vl(this,r),t.call(this,function(n,i){return n<i})}return r}(Lk),$z=function(e){Ru(r,e);var t=ku(r);function r(){return vl(this,r),t.call(this,function(n,i){return n>i})}return r}(Lk),Hz=function(e){Ru(r,e);var t=ku(r);function r(){var n;return vl(this,r),n=t.call(this),n._value=[],n}return kh(r,[{key:"add",value:function(i){this._value.push(i)}}]),r}(zy),zz=function(e){Ru(r,e);var t=ku(r);function r(){var n;return vl(this,r),n=t.call(this),n._hashes={},n}return kh(r,[{key:"add",value:function(i){this._hashes[cw(i)]=i}},{key:"value",get:function(){var i=[];for(var o in this._hashes)i.push(this._hashes[o]);return i}}],[{key:"getNoRefsSteps",value:function(i){return i.in_end}}]),r}(zy),Hd=function(t){for(var r=arguments.length,n=new Array(r>1?r-1:0),i=1;i<r;i++)n[i-1]=arguments[i];var o=Pk(t),s;try{for(o.s();!(s=o.n()).done;){var a=s.value;a.apply(void 0,n)}}catch(l){o.e(l)}finally{o.f()}},Uk=function(t,r){var n=Pk(r),i;try{for(n.s();!(i=n.n()).done;){var o=i.value;Hd(t,o)}}catch(s){n.e(s)}finally{n.f()}},Fk=function(t,r,n,i){return function(o){var s=function(l){l||Uk(r,n),o(l,n)};(function a(){t(function(l,u){if(!u)return s(l);i(u),a()})})()}},Vz=function(t,r,n){var i=n.in_start,o=n.in_iter,s=n.in_end,a=[],l=function(m,g){var b={_id:g};return a.push(b),Hd(i,b),b},u=r.ast,c=function(m){return u.run(new kk(m))},f;return o.length?f=function(m){var g=c(m),b=l(cw(g),g);Hd(o,b,m)}:f=function(m){var g=c(m);l(cw(g),g)},Fk(t,s,a,f)},Xz=function(t,r,n){if(r.has_refs)return Vz(t,r,n);var i=n.in_start,o=n.in_iter,s=n.in_end,a=[],l=function(){var f={_id:r.ast.run()};return Hd(i,f),a.push(f),f};if(o.length){var u=function(){return l()};return Fk(t,s,a,function(c){Hd(o,u(),c)})}return function(c){t(function(f,p){p&&(l(),Uk(s,a)),c(f,a)})}},Wz={$sum:Ok,$avg:Gz,$min:jz,$max:$z,$push:Hz,$addToSet:zz},Yz=function(t,r,n){var i=t.in_start,o=t.in_iter,s=t.in_end,a=Object.keys(n);if(a.length>1)throw Error("fields must have only one operator");var l=a[0],u=Wz[l];if(!u)throw l[0]==="$"&&Dz(l),Error("unexpected field '".concat(l,"'"));var c=Rk(n[l]);i.push(function(f){f[r]=new u(c)}),c.has_refs?o.push(function(f,p){var m=new kk(p);if(!!m.ensure(c.paths)){var g=f[r],b=Object.assign({fields:m},c),y=function(x){return g.add(x)};g.getOpValueWithRefs(b,p,y)}}):u.getOpValue(c,function(f){u.getNoRefsSteps(t).push(function(p){p[r].add(f)})}),s.push(function(f){f[r]=f[r].value})},Kz=function(e,t){if(!t.hasOwnProperty("_id"))throw Error("the '_id' field is missing");var r=Rk(t._id),n=Object.assign({},t);delete n._id;var i={in_start:[],in_iter:[],in_end:[]};for(var o in n)Yz(i,o,n[o]);var s=Xz(e,r,i),a=function(u){s(function(c,f){c?u(c):(a=function(m){return m(null,f.pop())})(u)})};return function(l){return a(l)}};function qz(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Zz(e,t){var r;if(typeof Symbol>"u"||e[Symbol.iterator]==null){if(Array.isArray(e)||(r=Jz(e))||t&&e&&typeof e.length=="number"){r&&(e=r);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(u){throw u},f:i}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var o=!0,s=!1,a;return{s:function(){r=e[Symbol.iterator]()},n:function(){var u=r.next();return o=u.done,u},e:function(u){s=!0,a=u},f:function(){try{!o&&r.return!=null&&r.return()}finally{if(s)throw a}}}}function Jz(e,t){if(!!e){if(typeof e=="string")return LC(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return LC(e,t)}}function LC(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var Mk=Ht,Qz=Mk.toPathPieces,eV=Mk.get,tV=function(e,t){var r=Qz(t.substring(1)),n=[],i=function(l){return l(null,n.pop())},o=function(l,u){var c=n.length;if(eV(l,r,function(f,p){var m=f[p];if(!!m&&m[Symbol.iterator]){var g=Zz(m),b;try{for(g.s();!(b=g.n()).done;){var y=b.value;n.push(qz({},p,y))}}catch(w){g.e(w)}finally{g.f()}}}),c===n.length)return s(u);i(u)},s=function(l){e(function(u,c){u?l(u):c?o(c,l):(s=i)(l)})};return function(a){return s(a)}},rV=function(e,t){var r=0,n=function i(o){e(function(s,a){a?++r>t?o(null,a):i(o):o(s)})};return n},nV=function(e,t){var r=0,n=function(o){r++<t?e(o):o()};return n};function p0(e){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?p0=function(r){return typeof r}:p0=function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},p0(e)}function iV(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function UC(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function oV(e,t,r){return t&&UC(e.prototype,t),r&&UC(e,r),e}function sV(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&hw(e,t)}function hw(e,t){return hw=Object.setPrototypeOf||function(n,i){return n.__proto__=i,n},hw(e,t)}function aV(e){var t=cV();return function(){var n=_g(e),i;if(t){var o=_g(this).constructor;i=Reflect.construct(n,arguments,o)}else i=n.apply(this,arguments);return lV(this,i)}}function lV(e,t){return t&&(p0(t)==="object"||typeof t=="function")?t:uV(e)}function uV(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function cV(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}function _g(e){return _g=Object.setPrototypeOf?Object.getPrototypeOf:function(r){return r.__proto__||Object.getPrototypeOf(r)},_g(e)}var hV=BR,FC=Oy.exports,fV=CH,dV=lk,pV=Oz,mV=Kz,vV=tV,gV=ck,yV=rV,_V=nV,bV=function(e){sV(r,e);var t=aV(r);function r(n,i){var o;return iV(this,r),o=t.call(this),o._col=n,o._read_pref=i,o._pipeline=[],o._next=o._init,o}return oV(r,[{key:"_forEach",value:function(i,o){var s=this;this._next(function(a,l){l?(i(l),s.emit("data",l),s._forEach(i,o)):(s.emit("end"),o(a))})}},{key:"forEach",value:function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:function(){},o=arguments.length>1?arguments[1]:void 0,s=FC.defer();return this._forEach(i,function(a){a?s.reject(a):s.resolve()}),s.promise.nodeify(o),s.promise}},{key:"_toArray",value:function(i){var o=[];this._forEach(function(s){o.push(s)},function(s){return i(s,o)})}},{key:"toArray",value:function(i){var o=FC.defer();return this._toArray(function(s,a){s?o.reject(s):o.resolve(a)}),o.promise.nodeify(i),o.promise}},{key:"_assertUnopened",value:function(){if(this._opened)throw Error("cursor has already been opened")}},{key:"hint",value:function(i){if(this._assertUnopened(),!this._col._isIndexed(i))throw Error("index '".concat(i,"' does not exist"));return this._hint=i,this}},{key:"_addStage",value:function(i,o){return this._assertUnopened(),this._pipeline.push([i,o]),this}},{key:"filter",value:function(i){return this._addStage(dV,i)}},{key:"limit",value:function(i){return this._addStage(_V,i)}},{key:"skip",value:function(i){return this._addStage(yV,i)}},{key:"project",value:function(i){return this._addStage(pV,i)}},{key:"group",value:function(i){return this._addStage(mV,i)}},{key:"unwind",value:function(i){return this._addStage(vV,i)}},{key:"sort",value:function(i){return this._addStage(gV,i)}},{key:"_init",value:function(i){this._opened=!0,this._next=fV(this),this._next(i)}}]),r}(hV),Bk=bV;function wV(e,t){return SV(e)||TV(e,t)||Dk(e,t)||xV()}function xV(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function TV(e,t){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(e)))){var r=[],n=!0,i=!1,o=void 0;try{for(var s=e[Symbol.iterator](),a;!(n=(a=s.next()).done)&&(r.push(a.value),!(t&&r.length===t));n=!0);}catch(l){i=!0,o=l}finally{try{!n&&s.return!=null&&s.return()}finally{if(i)throw o}}return r}}function SV(e){if(Array.isArray(e))return e}function EV(e,t){var r;if(typeof Symbol>"u"||e[Symbol.iterator]==null){if(Array.isArray(e)||(r=Dk(e))||t&&e&&typeof e.length=="number"){r&&(e=r);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(u){throw u},f:i}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var o=!0,s=!1,a;return{s:function(){r=e[Symbol.iterator]()},n:function(){var u=r.next();return o=u.done,u},e:function(u){s=!0,a=u},f:function(){try{!o&&r.return!=null&&r.return()}finally{if(s)throw a}}}}function Dk(e,t){if(!!e){if(typeof e=="string")return MC(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return MC(e,t)}}function MC(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var CV=Ht,IV=CV.unknownOp,NV=Bk,PV={$match:function(t,r){return t.filter(r)},$project:function(t,r){return t.project(r)},$group:function(t,r){return t.group(r)},$unwind:function(t,r){return t.unwind(r)},$sort:function(t,r){return t.sort(r)},$skip:function(t,r){return t.skip(r)},$limit:function(t,r){return t.limit(r)}},AV=function(t){var r=Object.keys(t);if(r.length>1)throw Error("stages must be passed only one operator");var n=r[0],i=PV[n];return i||IV(n),[i,t[n]]},RV=function(t,r){var n=new NV(t,"readonly"),i=EV(r),o;try{for(i.s();!(o=i.n()).done;){var s=o.value,a=AV(s),l=wV(a,2),u=l[0],c=l[1];u(n,c)}}catch(f){i.e(f)}finally{i.f()}return n},kV=RV;function bg(e,t){var r;if(typeof Symbol>"u"||e[Symbol.iterator]==null){if(Array.isArray(e)||(r=OV(e))||t&&e&&typeof e.length=="number"){r&&(e=r);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(u){throw u},f:i}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var o=!0,s=!1,a;return{s:function(){r=e[Symbol.iterator]()},n:function(){var u=r.next();return o=u.done,u},e:function(u){s=!0,a=u},f:function(){try{!o&&r.return!=null&&r.return()}finally{if(s)throw a}}}}function OV(e,t){if(!!e){if(typeof e=="string")return BC(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return BC(e,t)}}function BC(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var ia=Ht,DC=ia.toPathPieces,x4=ia.get,LV=ia.set,UV=ia.modify,FV=ia.remove1,MV=ia.rename,Gk=ia.equal,BV=ia.unknownOp,DV=ia.getIDBError,Kn={};Kn.$set=function(e,t){return function(r){LV(r,e,t)}};Kn.$unset=function(e){return function(t){return FV(t,e)}};Kn.$rename=function(e,t){return function(r){MV(r,e,t)}};var T4=function(t,r,n){return function(i){UV(i,t,r,n)}},jk=function(t){return function(r,n){var i=function(a,l){var u=a[l];typeof u=="number"&&(a[l]=t(n,u))},o=function(a,l){return a[l]=0};return T4(r,i,o)}};Kn.$inc=jk(function(e,t){return e+t});Kn.$mul=jk(function(e,t){return e*t});var $k=function(t){return function(r,n){var i=function(a,l){t(n,a[l])&&(a[l]=n)},o=function(a,l){return a[l]=n};return T4(r,i,o)}};Kn.$min=$k(function(e,t){return e<t});Kn.$max=$k(function(e,t){return e>t});Kn.$push=function(e,t){var r=function(o,s){var a=o[s];Array.isArray(a)&&a.push(t)},n=function(o,s){return o[s]=[t]};return T4(e,r,n)};Kn.$pop=function(e,t){var r;return t<1?r=function(i){return i.shift()}:r=function(i){return i.pop()},function(n){x4(n,e,function(i,o){var s=i[o];Array.isArray(s)&&r(s)})}};Kn.$pullAll=function(e,t){return function(r){x4(r,e,function(n,i){var o=n[i];if(!!Array.isArray(o)){var s=[],a=function(p){var m=bg(t),g;try{for(m.s();!(g=m.n()).done;){var b=g.value;if(Gk(p,b))return!0}}catch(y){m.e(y)}finally{m.f()}},l=bg(o),u;try{for(l.s();!(u=l.n()).done;){var c=u.value;a(c)||s.push(c)}}catch(f){l.e(f)}finally{l.f()}n[i]=s}})}};Kn.$pull=function(e,t){return Kn.$pullAll(e,[t])};Kn.$addToSet=function(e,t){return function(r){x4(r,e,function(n,i){var o=n[i];if(!!Array.isArray(o)){var s=bg(o),a;try{for(s.s();!(a=s.n()).done;){var l=a.value;if(Gk(l,t))return}}catch(u){s.e(u)}finally{s.f()}o.push(t)}})}};var GV=function(t,r,n){if(r[0]!=="$")return t.push(Kn.$set(DC(r),n));var i=Kn[r];i||BV(r);for(var o in n)t.push(i(DC(o),n[o]))},jV=function(e,t,r){var n=[];for(var i in t)GV(n,i,t[i]);if(!n.length)return r(null);(function o(){e._next(function(s,a,l){if(!a)return r(s);var u=bg(n),c;try{for(u.s();!(c=u.n()).done;){var f=c.value;f(a)}}catch(m){u.e(m)}finally{u.f()}var p=l.update(a);p.onsuccess=o,p.onerror=function(m){return r(DV(m))}})})()},$V=Ht,HV=$V.getIDBError,zV=function(e,t){(function r(){e._next(function(n,i,o){if(!i)return t(n);var s=o.delete();s.onsuccess=r,s.onerror=function(a){return t(HV(a))}})})()};function m0(e){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?m0=function(r){return typeof r}:m0=function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},m0(e)}function VV(e,t){var r;if(typeof Symbol>"u"||e[Symbol.iterator]==null){if(Array.isArray(e)||(r=XV(e))||t&&e&&typeof e.length=="number"){r&&(e=r);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(u){throw u},f:i}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var o=!0,s=!1,a;return{s:function(){r=e[Symbol.iterator]()},n:function(){var u=r.next();return o=u.done,u},e:function(u){s=!0,a=u},f:function(){try{!o&&r.return!=null&&r.return()}finally{if(s)throw a}}}}function XV(e,t){if(!!e){if(typeof e=="string")return GC(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return GC(e,t)}}function GC(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function WV(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function jC(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function YV(e,t,r){return t&&jC(e.prototype,t),r&&jC(e,r),e}var Y2=Oy.exports,KV=Ht,qV=KV.getIDBError,$C=Bk,ZV=kV,JV=jV,QV=zV,eX=function(){function e(t,r){WV(this,e),this._db=t,this._name=r,this._indexes=new Set}return YV(e,[{key:"_isIndexed",value:function(r){return this._indexes.has(r)||r==="_id"}},{key:"find",value:function(r,n){var i=new $C(this,"readonly");return i.filter(r),n&&i.project(n),i}},{key:"findOne",value:function(r,n,i){typeof n=="function"&&(i=n,n=null);var o=Y2.defer(),s=this.find(r,n).limit(1);return s.toArray(function(a,l){a?o.reject(a):o.resolve(l[0])}),o.promise.nodeify(i),o.promise}},{key:"aggregate",value:function(r){return ZV(this,r)}},{key:"_validate",value:function(r){for(var n in r){if(n[0]==="$")throw Error("field name cannot start with '$'");var i=r[n];if(Array.isArray(i)){var o=VV(i),s;try{for(o.s();!(s=o.n()).done;){var a=s.value;this._validate(a)}}catch(l){o.e(l)}finally{o.f()}}else m0(i)==="object"&&this._validate(i)}}},{key:"insert",value:function(r,n){var i=this;Array.isArray(r)||(r=[r]);var o=Y2.defer();return this._db._getConn(function(s,a){var l,u=i._name;try{l=a.transaction([u],"readwrite")}catch(m){return o.reject(m)}l.oncomplete=function(){return o.resolve()},l.onerror=function(m){return o.reject(qV(m))};var c=l.objectStore(u),f=0,p=function m(){var g=r[f];try{i._validate(g)}catch(y){return o.reject(y)}var b=c.add(g);b.onsuccess=function(){f++,f<r.length&&m()}};p()}),o.promise.nodeify(n),o.promise}},{key:"_modify",value:function(r,n,i){var o=Y2.defer(),s=new $C(this,"readwrite");return s.filter(n),r(s,function(a){a?o.reject(a):o.resolve()}),o.promise.nodeify(i),o.promise}},{key:"update",value:function(r,n,i){var o=function(a,l){return JV(a,n,l)};return this._modify(o,r,i)}},{key:"remove",value:function(r,n){return this._modify(QV,r,n)}},{key:"name",get:function(){return this._name}}]),e}(),tX=eX;function HC(e,t){var r;if(typeof Symbol>"u"||e[Symbol.iterator]==null){if(Array.isArray(e)||(r=rX(e))||t&&e&&typeof e.length=="number"){r&&(e=r);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(u){throw u},f:i}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var o=!0,s=!1,a;return{s:function(){r=e[Symbol.iterator]()},n:function(){var u=r.next();return o=u.done,u},e:function(u){s=!0,a=u},f:function(){try{!o&&r.return!=null&&r.return()}finally{if(s)throw a}}}}function rX(e,t){if(!!e){if(typeof e=="string")return zC(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return zC(e,t)}}function zC(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function qc(e){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?qc=function(r){return typeof r}:qc=function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},qc(e)}function nX(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function VC(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function iX(e,t,r){return t&&VC(e.prototype,t),r&&VC(e,r),e}function oX(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&fw(e,t)}function fw(e,t){return fw=Object.setPrototypeOf||function(n,i){return n.__proto__=i,n},fw(e,t)}function sX(e){var t=uX();return function(){var n=wg(e),i;if(t){var o=wg(this).constructor;i=Reflect.construct(n,arguments,o)}else i=n.apply(this,arguments);return aX(this,i)}}function aX(e,t){return t&&(qc(t)==="object"||typeof t=="function")?t:lX(e)}function lX(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function uX(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}function wg(e){return wg=Object.setPrototypeOf?Object.getPrototypeOf:function(r){return r.__proto__||Object.getPrototypeOf(r)},wg(e)}var cX=BR,XC=Oy.exports,hX=Ht,WC=hX.getIDBError,fX=tX,dX=function(e){oX(r,e);var t=sX(r);function r(n,i,o){var s;if(nX(this,r),s=t.call(this),s._name=n,qc(i)==="object"?o=i:s._version=i,s._cols={},s._config={},s._initGetConn(),Array.isArray(o)){var a=HC(o),l;try{for(a.s();!(l=a.n()).done;){var u=l.value;s._addCollection(u),s._config[u]=!0}}catch(f){a.e(f)}finally{a.f()}}else for(var c in o)s._addCollection(c),s._addIndex(o[c],c);return s}return iX(r,[{key:"_addCollection",value:function(i){this._cols[i]=new fX(this,i)}},{key:"_addIndex",value:function(i,o){var s=this._config;if(!i)return s[o]=!1;if(qc(i)!=="object")return s[o]={};var a=this._cols[o];if(Array.isArray(i)){var l={},u=HC(i),c;try{for(u.s();!(c=u.n()).done;){var f=c.value;l[f]=!0,a._indexes.add(f)}}catch(m){u.e(m)}finally{u.f()}s[o]=l}else{for(var p in i)i[p]&&a._indexes.add(p);s[o]=i}}},{key:"_addStore",value:function(i,o){var s=i.createObjectStore(o,{keyPath:"_id",autoIncrement:!0}),a=this._config[o];for(var l in a)a[l]?s.createIndex(l,l,{unique:!1}):s.deleteIndex(l)}},{key:"_getConn",value:function(i){var o=this,s;this._version?s=indexedDB.open(this._name,this._version):s=indexedDB.open(this._name),s.onsuccess=function(a){var l=a.target.result;o._idb=l,o._version=l.version,o._open=!0,i(null,l)},s.onerror=function(a){return i(WC(a))},s.onupgradeneeded=function(a){var l=a.target.result;for(var u in o._config)try{o._config[u]?l.objectStoreNames.contains(u)||o._addStore(l,u):l.deleteObjectStore(u)}catch(c){return i(c)}},s.onblocked=function(){return o.emit("blocked")}}},{key:"_initGetConn",value:function(){}},{key:"collection",value:function(i){var o=this._cols[i];if(!o)throw Error("collection '".concat(i,"' does not exist"));return o}},{key:"open",value:function(i){var o=this,s=XC.defer();return this._getConn(function(a){a?s.reject(a):s.resolve(o)}),s.promise.nodeify(i),s.promise}},{key:"close",value:function(){this._open&&(this._idb.close(),this._open=!1,this._initGetConn())}},{key:"drop",value:function(i){this.close();var o=XC.defer(),s=indexedDB.deleteDatabase(this._name);return s.onsuccess=function(){return o.resolve()},s.onerror=function(a){return o.reject(WC(a))},o.promise.nodeify(i),o.promise}},{key:"name",get:function(){return this._name}},{key:"version",get:function(){return this._version}}]),r}(cX),pX=dX,mX={Db:pX};class K2{constructor(t){this.instance=t}insert(t){return this.instance.insert(t)}update(t,r){return this.instance.update(t,r)}updateById(t,r){return this.instance.update({id:t},r)}findOne(t){return this.instance.findOne(t)}find(t){return this.instance.find(t).toArray()}findOneById(t){return this.instance.findOne({id:t})}remove(t){return this.instance.remove(t)}removeById(t){return this.instance.remove({id:t})}}class q2{constructor(t){this.fs=i0==null?void 0:i0.fs,this.table=t,this.baseSettings={dir:this.fs.BaseDirectory.App},this.initializing=!1,this.init()}async init(){this.initializing=this.fs.createDir(this.table,{...this.baseSettings,recursive:!0}),await this.initializing,this.initializing=!1}async ensureInitialized(){this.initializing&&await this.initializing}async getDirAsArray(){await this.ensureInitialized();const t=await this.fs.readDir(this.table,this.baseSettings),r=[];for(const n of t)n.children||r.push(this.fs.readTextFile(`${this.table}/${n.name}`,this.baseSettings));return(await Promise.all(r)).map(n=>JSON.parse(n))}async remove(t){const n=(await this.getDirAsArray()).filter(i=>this.queryElement(t,i));for(const i of n)await this.fs.removeFile(`${this.table}/${i.id}.json`,this.baseSettings)}async removeById(t){await this.fs.removeFile(`${this.table}/${t}.json`,this.baseSettings)}async insert(t){await this.fs.writeTextFile(`${this.table}/${t.id}.json`,JSON.stringify(t),this.baseSettings)}async updateById(t,r){await this.fs.writeTextFile(`${this.table}/${t}.json`,JSON.stringify(r),this.baseSettings)}async update(t,r){const i=(await this.getDirAsArray()).find(o=>this.queryElement(t,o));!i||await this.fs.writeTextFile(`${this.table}/${i.id}.json`,JSON.stringify(r),this.baseSettings)}async findOne(t){return(await this.getDirAsArray()).find(n=>this.queryElement(t,n))||null}async findOneById(t){await this.ensureInitialized();try{const r=await this.fs.readTextFile(`${this.table}/${t}.json`,this.baseSettings);return JSON.parse(r)}catch(r){return console.error(r),null}}async find(t){return(await this.getDirAsArray()).filter(n=>this.queryElement(t,n))}queryElement(t,r){const n=Object.entries(t).map(([i,o])=>({key:i,value:o}));for(const i of n)if(r[i.key]!==i.value)return!1;return!0}}class vX{constructor(){this.instance=new mX.Db(Ae,3,{songs:[],themes:[],folders:[]}),W3?this.collections={songs:new q2("songs"),themes:new q2("themes"),folders:new q2("folders")}:this.collections={songs:new K2(this.instance.collection("songs")),themes:new K2(this.instance.collection("themes")),folders:new K2(this.instance.collection("folders"))}}generateId(){function t(){return Math.floor((1+Math.random())*65536).toString(16).substring(1)}return t()+t()+"-"+t()+"-"+t()+"-"+t()}}const eu=new vX;class gX{constructor(){this.themeCollection=eu.collections.themes}async getTheme(t){var n;const r=await this.themeCollection.findOneById(t);if(r){const i=r.other.id;r.type="theme",r.id=(n=r.id||i)!=null?n:null,delete r._id}return r}async getThemes(){const t=await this.themeCollection.find({});return t.forEach(r=>{var i;const n=r.other.id;r.type="theme",r.id=(i=r.id||n)!=null?i:null,delete r._id}),t}async addTheme(t){const r=eu.generateId();return t.id=r,await this.themeCollection.insert(t),r}updateTheme(t,r){return r.id=t,this.themeCollection.updateById(t,r)}removeTheme(t){return this.themeCollection.remove(t)}removeThemeById(t){return this.themeCollection.removeById(t)}getCurrentThemeId(){return localStorage.getItem(Ae+"_Theme")}setCurrentThemeId(t){localStorage.setItem(Ae+"_Theme",t!=null?t:"")}_clearAll(){return this.themeCollection.remove({})}}const ji=new gX;var yX=Object.defineProperty,_X=Object.getOwnPropertyDescriptor,bX=(e,t,r,n)=>{for(var i=n>1?void 0:n?_X(t,r):t,o=e.length-1,s;o>=0;o--)(s=e[o])&&(i=(n?s(t,r,i):s(i))||i);return n&&i&&yX(t,r,i),i};class Hk{constructor(){this.themes=[],Li(this),this.sync()}async sync(){const t=await ji.getThemes();this.themes.splice(0,this.themes.length,...t)}async addTheme(t){const r=await ji.addTheme(t);return await this.sync(),r}async updateTheme(t,r){await ji.updateTheme(t,r),await this.sync()}async removeTheme(t){await ji.removeTheme(t),await this.sync()}async removeThemeById(t){await ji.removeThemeById(t),await this.sync()}async _DANGEROUS_CLEAR_ALL_THEMES(){await ji._clearAll(),await this.sync()}getCurrentThemeId(){return ji.getCurrentThemeId()}setCurrentThemeId(t){return ji.setCurrentThemeId(t)}}bX([yt.shallow],Hk.prototype,"themes",2);const zs=new Hk;class YC{constructor(t){this.toJson=()=>JSON.stringify(this.state),this.state=wi(SR),this.state.other.name=t,this.state.editable=!0}serialize(){return{...wi(this.state),id:null,type:"theme"}}}const S4=[SR,...HG];class zk{constructor(t){this.load=async()=>{try{const r=ji.getCurrentThemeId();if(r!==null){const n=S4.find(o=>o.id===r);if(n)return this.loadFromTheme(n);const i=await ji.getTheme(r);if(i)return this.loadFromTheme(i)}}catch(r){console.error(r)}},this.getId=()=>this.state.id,this.get=r=>Et(this.state.data[r].value),this.getText=r=>Et(this.state.data[r].text),this.getOther=r=>this.state.other[r],this.getValue=r=>this.state.data[r].value,this.toArray=()=>Object.values(this.state.data),this.reset=r=>{this.state.data[r]={...this.baseTheme.data[r]}},this.isDefault=r=>{const n=new Et(this.state.data[r].value),i=new Et(this.baseTheme.data[r].value);return n.hex().toLowerCase()===i.hex().toLowerCase()},this.isEditable=()=>this.state.editable,this.layer=(r,n,i)=>{const o=this.get(r);return i?o.luminosity()<i?o.darken(n):o.lighten(n):o.isDark()?o.lighten(n*1.1):o.darken(n)},this.serialize=()=>{var r;return{...wi(this.state),id:(r=this.state.id)!=null?r:null,type:"theme"}},this.setBackground=(r,n)=>{this.setOther("backgroundImage"+n,r),this.save()},this.loadFromJson=(r,n)=>{try{this.toArray().forEach(i=>{this.reset(i.name)}),Object.entries(r.data).forEach(([i,o])=>{if(this.baseTheme.data[i]!==void 0){const s=Et(o.value);this.set(i,o.value.includes("rgba")?s.rgb().toString():s.toString())}}),this.state.editable=Boolean(r.editable),this.state.id=n,Object.entries(r.other).forEach(([i,o])=>{this.baseTheme.other[i]!==void 0&&this.setOther(i,o)})}catch(i){console.error(i),me.error("There was an error loading the theme",4e3)}},this.loadFromTheme=r=>{for(const[n,i]of Object.entries(r.data))this.set(n,i.value);for(const[n,i]of Object.entries(r.other))this.setOther(n,i);this.state.editable=Boolean(r.editable),this.state.id=r.id},this.sanitize=r=>{const n=wi(this.baseTheme);return Object.entries(r.data).forEach(([i,o])=>{if(n.data[i]!==void 0){const s=Et(o.value);n.data[i].value=s.toString(),n.data[i].text=s.isDark()?vt.text.light:vt.text.dark}}),Object.entries(r.other).forEach(([i,o])=>{n.other[i]!==void 0&&(n.other[i]=o)}),n.editable=Boolean(r.editable),n},this.wipe=()=>{this.loadFromJson(wi(this.baseTheme),this.state.id)},this.setOther=(r,n)=>{this.state.other[r]=n},this.set=(r,n)=>{this.state.data[r]={...this.state.data[r],name:r,value:n.toLowerCase(),text:Et(n).isDark()?vt.text.light:vt.text.dark}},this.save=()=>{if(zs.setCurrentThemeId(this.getId()),!!this.state.editable)return zs.updateTheme(this.state.id,wi(this.state))},this.baseTheme=wi(t),this.state=yt(wi(t)),this.load()}static isSerializedType(t){return typeof t!="object"?!1:!!(t.type==="theme"||t.data&&t.other)}}const Se=new zk(S4[0]);function en(){const[e,t]=M.exports.useState(Se);return M.exports.useEffect(()=>Vy(t),[]),[e,t]}function Vy(e){const t=Hn(Se.state.data,()=>{e({...Se})}),r=Hn(Se.state.other,()=>{e({...Se})});return e({...Se}),()=>{t(),r()}}function Nt({className:e="",onClick:t,children:r,data:n,style:i,isActive:o,ariaLabel:s}){const[a]=en();return v("button",{className:`menu-item ${e}`,style:{backgroundColor:o?a.layer("primary",.2).toString():a.layer("primary",0).toString(),...i},"aria-label":s,onClick:l=>{fG(l),t==null||t(n)},children:r})}class xg{constructor(){this.listeners=[],this.create=()=>{window.addEventListener("keydown",this.handleEvent),window.addEventListener("keyup",this.handleEvent),window.addEventListener("keypress",this.handleEvent)},this.destroy=()=>{this.clear(),window.removeEventListener("keydown",this.handleEvent),window.removeEventListener("keyup",this.handleEvent),window.removeEventListener("keypress",this.handleEvent)},this.clear=()=>{this.handlers.clear(),this.listeners=[]},this.listen=(t,r)=>{const n=xg.emptyHandler;return n.callback=t,r&&Object.assign(n.options,r),this.listeners.push(n),t},this.unlisten=t=>{this.listeners=this.listeners.filter(r=>r.callback!==t)},this.unregister=(t,r)=>{var i;const n=this.handlers.get(t);n&&(this.handlers.set(t,n.filter(o=>o.callback!==r)),((i=this.handlers.get(t))==null?void 0:i.length)===0&&this.handlers.delete(t))},this.unregisterById=t=>{this.handlers.forEach((r,n)=>{var i;this.handlers.set(n,r.filter(o=>o.options.id!==t)),((i=this.handlers.get(n))==null?void 0:i.length)===0&&this.handlers.delete(n)}),this.listeners=this.listeners.filter(r=>r.options.id!==t)},this.register=(t,r,n)=>{var o;const i=xg.emptyHandler;return i.callback=r,n&&Object.assign(i.options,n),this.handlers.has(t)?(o=this.handlers.get(t))==null||o.push(i):this.handlers.set(t,[i]),r},this.registerLetter=(t,r,n)=>(this.register(`Key${t}`,r,n),r),this.registerNumber=(t,r,n)=>{const i=t.toString();return this.register(`Digit${i}`,r,n),r},this.handleEvent=t=>{var l,u;if(((l=document.activeElement)==null?void 0:l.tagName)==="INPUT")return;const r=t.code,n=t.type==="keyup",i=t.type==="keydown",o=r.replace("Key",""),s=t.shiftKey,a={letter:o,shift:s,event:t,code:r};this.listeners.forEach(c=>{c.options.type==="keydown"&&i&&c.callback(a),c.options.type==="keyup"&&n&&c.callback(a)}),this.handlers.has(r)&&((u=this.handlers.get(r))==null||u.forEach(c=>{(s&&c.options.shift||!s&&!c.options.shift)&&(c.options.type==="keydown"&&i&&c.callback(a),c.options.type==="keyup"&&n&&c.callback(a))}))},this.handlers=new Map}static get emptyHandler(){return{callback:()=>{},options:{shift:!1,id:"",type:"keydown"}}}}const Xe=new xg;function hn({children:e,position:t="bottom",style:r}){return v("span",{className:`tooltip tooltip-${t}`,style:r,children:e})}function Pn(e){return e?"has-tooltip":""}function Be({style:e={},className:t="",children:r,toggled:n=!1,onClick:i,disabled:o=!1,visible:s=!0,tooltip:a,ariaLabel:l,tooltipPosition:u}){return k("button",{className:`app-button ${t} ${n?"active":""} ${Pn(a)}`,style:{...e,...s?{}:{display:"none"}},"aria-label":l,onClick:c=>i==null?void 0:i(c),disabled:o,children:[r,a&&v(hn,{position:u,children:a})]})}function wX({className:e}){return k("svg",{width:"1em",height:"1em",viewBox:"0 0 222 211",fill:"currentColor",className:e,xmlns:"http://www.w3.org/2000/svg",children:[v("path",{d:"M190 176C190 191.464 177.464 204 162 204C146.536 204 134 191.464 134 176C134 160.536 146.536 148 162 148C177.464 148 190 160.536 190 176Z"}),v("path",{d:"M32.4832 178.489C31.1118 177.118 31.1118 174.894 32.4832 173.523L63.5229 142.483C64.8943 141.112 67.1179 141.112 68.4893 142.483L99.529 173.523C100.9 174.894 100.9 177.118 99.529 178.489L68.4893 209.529C67.1179 210.9 64.8943 210.9 63.5229 209.529L32.4832 178.489Z"}),v("path",{d:"M41 3.51175C41 1.57226 42.5723 0 44.5117 0H88.4086C90.3481 0 91.9203 1.57226 91.9203 3.51175V47.4086C91.9203 49.3481 90.3481 50.9203 88.4086 50.9203H44.5117C42.5723 50.9203 41 49.3481 41 47.4086V3.51175Z"}),v("path",{d:"M49 36C49 34.8954 49.8954 34 51 34H81C82.1046 34 83 34.8954 83 36V162C83 163.105 82.1046 164 81 164H51C49.8954 164 49 163.105 49 162V36Z"}),v("path",{d:"M33.551 160.54C34.0997 159.957 33.6863 159 32.8858 159H17C7.61116 159 0 166.611 0 176C0 185.389 7.61116 193 17 193H32.8858C33.6863 193 34.0997 192.043 33.551 191.46L19.6451 176.685C19.2827 176.3 19.2827 175.7 19.6451 175.315L33.551 160.54Z"}),v("path",{d:"M98.5862 160.685C97.9856 160.047 98.4381 159 99.3144 159H128.338C129.064 159 129.508 159.796 129.127 160.414C123.226 169.967 123.226 182.033 129.127 191.586C129.508 192.204 129.064 193 128.338 193H99.3144C98.4381 193 97.9856 191.953 98.5862 191.315L112.355 176.685C112.717 176.3 112.717 175.7 112.355 175.315L98.5862 160.685Z"}),v("path",{d:"M221.5 176C221.5 166.611 213.889 159 204.5 159H195.662C194.936 159 194.492 159.796 194.873 160.414C200.774 169.967 200.774 182.033 194.873 191.586C194.492 192.204 194.936 193 195.662 193H204.5C213.889 193 221.5 185.389 221.5 176Z"})]})}function xX({className:e}){return k("svg",{width:"1em",height:"1em",viewBox:"0 0 192 177",className:e,fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",children:[v("path",{d:"M71 129C71 141.15 61.1503 151 49 151C36.8497 151 27 141.15 27 129C27 116.85 36.8497 107 49 107C61.1503 107 71 116.85 71 129Z"}),v("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M16.7385 0H175.262C184.506 0 192 7.36161 192 16.4426V160.557C192 169.638 184.506 177 175.262 177H16.7385C7.49406 177 0 169.638 0 160.557V16.4426C0 7.36161 7.49407 0 16.7385 0ZM15.7538 75.9262V20.3115C15.7538 17.6406 17.958 15.4754 20.6769 15.4754H171.323C174.042 15.4754 176.246 17.6406 176.246 20.3115V75.9262C176.246 78.5971 174.042 80.7623 171.323 80.7623H20.6769C17.958 80.7623 15.7538 78.5971 15.7538 75.9262ZM171.323 96.2377H20.6769C17.958 96.2377 15.7538 98.4029 15.7538 101.074V156.689C15.7538 159.359 17.958 161.525 20.6769 161.525H171.323C174.042 161.525 176.246 159.359 176.246 156.689V101.074C176.246 98.4029 174.042 96.2377 171.323 96.2377Z"}),v("path",{d:"M167 46.5C167 58.6503 157.15 68.5 145 68.5C132.85 68.5 123 58.6503 123 46.5C123 34.3497 132.85 24.5 145 24.5C157.15 24.5 167 34.3497 167 46.5Z"})]})}function as(e){const[t,r]=M.exports.useState(e);return M.exports.useEffect(()=>zd(e,r),[e]),t}function Ya(e){const[t,r]=M.exports.useState(e);return M.exports.useEffect(()=>Vk(e,r),[e]),t}function Vk(e,t){const r=Hn(e,()=>{t([...e])});return t([...e]),r}function zd(e,t){const r=Hn(e,n=>{t({...e},n)});return t({...e}),r}var TX=Object.defineProperty,SX=Object.getOwnPropertyDescriptor,EX=(e,t,r,n)=>{for(var i=n>1?void 0:n?SX(t,r):t,o=e.length-1,s;o>=0;o--)(s=e[o])&&(i=(n?s(t,r,i):s(i))||i);return n&&i&&TX(t,r,i),i};class Xk{constructor(){this.state={canShow:!1,visible:!1,isInPosition:!1,hasPersistentStorage:!1},this.open=()=>{this.setState({visible:!0,isInPosition:!1})},this.close=()=>{this.setState({isInPosition:!0}),setTimeout(()=>{this.setState({visible:!1})},150)},this.override=t=>{t?this.open():this.close()},this.setState=t=>{Object.assign(this.state,t)},Li(this)}}EX([yt],Xk.prototype,"state",2);const ln=new Xk;function CX({askForStorage:e,hasVisited:t,setDontShowHome:r,closeWelcomeScreen:n}){const i=as(ln.state),[o,s]=M.exports.useState(100),[a,l]=M.exports.useState("Unknown"),[u,c]=M.exports.useState(!1),f=i.isInPosition?"home":"home home-visible",p=H3(),[m]=en();return M.exports.useEffect(()=>{const g=JSON.parse(localStorage.getItem(Ae+"-font-size")||"100");if(g<75||g>125)return s(100);s(g)},[]),M.exports.useEffect(()=>{const g=document.querySelector("html");if(!!g){if(localStorage.setItem(Ae+"-font-size",`${o}`),o===100){g.style.removeProperty("font-size");return}g.style.fontSize=`${o}%`}},[o]),M.exports.useEffect(()=>{const g=p.listen(b=>{l(b.pathname.replace("/",""))});return l(window.location.hash.replace("#/","")),Xe.register("Escape",()=>{ln.state.visible&&ln.close()},{id:"home"}),c(window.innerWidth>900),()=>{g(),Xe.unregisterById("home")}},[p]),k("div",{className:`${f} ignore_click_outside column`,style:{...i.visible?{}:{display:"none"},backgroundColor:m.get("background").fade(.1).toString()},children:[v(Nt,{className:"close-home",onClick:ln.close,ariaLabel:"Close home menu",children:v(eo,{size:25})}),k("div",{className:"home-padded column",children:[(u||!t)&&k("div",{className:"home-top",children:[k("div",{className:"home-title",children:[Ae," Music Nightly"]}),k("div",{className:"home-top-text",children:["An app where you can create, practice and play songs for ",Ae]})]}),!t&&k("div",{className:"home-welcome",children:[k("div",{children:[!eg()&&v("div",{className:"home-spacing",children:"To have the webapp fullscreen and better view, please add the website to the home screen"}),k("div",{className:"home-spacing",children:[v("div",{className:"red-text",children:"WARNING"}),": Clearing your browser cache / storage might delete your songs, make sure you make backups"]}),i.hasPersistentStorage?k("div",{children:[v("div",{className:"red-text",children:"WARNING"}),": ","Click the button below to make sure that your browser won't delete your songs if you lack storage"]}):null,k("div",{children:[v("span",{style:{marginRight:"0.2rem"},children:"We use cookies for analytics, by continuing to use this app, you agree to our use of cookies, learn more"}),v(di,{to:"Privacy",style:{color:"var(--primary-text)",textDecoration:"underline"},onClick:ln.close,children:"here"})]})]}),v("div",{style:{display:"flex",justifyContent:"flex-end"},children:v("button",{className:"home-accept-storage",onClick:()=>{n(),e()},children:"Confirm"})})]}),k("div",{className:"home-content",children:[v(qC,{icon:v(qF,{}),title:"Composer",style:{backgroundColor:m.layer("primary",.15,.2).fade(.15).toString()},background:"./manifestData/composer.webp",href:"Composer",isCurrent:a==="Composer",children:"Create or edit songs with a fully fledged music composer. Also with MIDI."}),v(qC,{icon:v(hM,{}),title:"Player",style:{backgroundColor:m.layer("primary",.15,.2).fade(.15).toString()},background:"./manifestData/main.webp",href:"",isCurrent:a===""||a==="Player",children:"Play, download, record and import songs. Learn a song with approaching circle mode and practice mode."})]}),k("div",{className:"row space-around middle-size-pages-wrapper",children:[v(KC,{Icon:xX,current:a==="VsrgComposer",href:"VsrgComposer",children:k("span",{style:{fontSize:"1rem"},className:"row-centered",children:["Vsrg Composer",v("span",{style:{fontSize:"0.7rem",marginLeft:"0.3rem"},children:"(beta)"})]})}),v(KC,{Icon:wX,current:a==="VsrgPlayer",href:"VsrgPlayer",children:k("span",{style:{fontSize:"1rem"},className:"row-centered",children:["Vsrg Player",v("span",{style:{fontSize:"0.7rem",marginLeft:"0.3rem"},children:"(beta)"})]})})]}),v(IX,{}),k("div",{className:"page-redirect-wrapper",children:[!eg()&&v(Ts,{href:"Donate",current:a==="Donate",children:"Donate"}),v(Ts,{href:"ZenKeyboard",current:a==="ZenKeyboard",children:"Zen Keyboard"}),v(Ts,{href:"SheetVisualizer",current:a==="SheetVisualizer",children:"Sheet Visualizer"}),v(Ts,{href:"Theme",current:a==="Theme",children:"App Theme"}),v(Ts,{href:"Changelog",current:a==="Changelog",children:"Changelog"}),v(Ts,{href:"Partners",current:a==="Partners",children:"Partners"}),v(Ts,{href:"Help",current:a==="Help",children:"Help"}),v(Ts,{href:"Backup",current:a==="Backup",children:"Backup"}),!cu&&v(Ts,{href:"Keybinds",current:a==="Keybinds",children:"Keybinds"})]})]}),k("div",{className:"home-bottom",children:[k("div",{className:"home-app-scaling row-centered",children:[v("span",{children:"App scale"}),v(Be,{className:"flex-centered",onClick:()=>{const g=o-2;g<75||s(g)},children:v(hy,{})}),v(Be,{className:"flex-centered",style:{marginRight:"0.5rem"},onClick:()=>{const g=o+2;g>125||s(g)},children:v(uu,{})}),o,"%"]}),k("span",{style:{padding:"0 1rem",textAlign:"center"},children:["\xA9 All rights reserved by ","TGC",". Other properties belong to their respective owners."]}),k("div",{className:"home-dont-show-again row-centered",onClick:()=>r(!i.canShow),children:[v("input",{type:"checkbox",checked:!i.canShow,readOnly:!0}),v("span",{children:"Hide on open"})]})]})]})}function KC({href:e,children:t,Icon:r,current:n}){return k(di,{to:e,onClick:ln.close,className:`middle-size-page row ${n?"current-page":""}`,children:[v(r,{className:"middle-size-page-icon"}),t]})}function Ts({children:e,current:t,href:r}){return v(di,{onClick:ln.close,to:r,className:t?"current-page":"",children:e})}function qC({title:e,icon:t,children:r,background:n,isCurrent:i,href:o,style:s={}}){return k(di,{className:`home-content-element ${i?"current-page":""}`,to:o,onClick:ln.close,children:[v("div",{className:"home-content-background",style:{backgroundImage:`url(${n})`}}),k("div",{className:"home-content-main",style:s,children:[k("div",{className:"home-content-title",children:[t," ",e]}),v("div",{className:"home-content-text",children:r}),v("div",{className:"home-content-open",children:v("button",{children:"OPEN"})})]})]})}function IX({children:e}){return v("div",{className:"home-separator",children:e})}function NX({decorationColor:e,size:t,offset:r="0"}){const n={position:"absolute",width:t!=null?t:"0.8rem",height:t!=null?t:"0.8rem",color:e!=null?e:"var(--secondary)"};return k(je,{children:[v(ov,{style:{...n,top:r,right:r,transform:"translate(50%, -50%) rotate(-135deg)"}}),v(ov,{style:{...n,top:r,left:r,transform:"translate(-50%, -50%) rotate(135deg)"}}),v(ov,{style:{...n,bottom:r,right:r,transform:"translate(50%, 50%) rotate(-45deg)"}}),v(ov,{style:{...n,bottom:r,left:r,transform:"translate(-50%, 50%) rotate(45deg)"}})]})}const Xy=M.exports.forwardRef(function(t,r){var i,o,s;const n=(i=t.isRelative)!=null?i:!0;return k("div",{...t.boxProps,ref:r,style:{...n?{position:"relative"}:{},...(s=(o=t.boxProps)==null?void 0:o.style)!=null?s:{}},onClick:t.onClick,children:[t.children,v(NX,{decorationColor:t.decorationColor,size:t.size,offset:t.offset})]})});function ov({style:e}){return v("svg",{style:e,viewBox:"0 0 121 121",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",children:v("path",{d:"M115.674 57.8647C117.754 58.9629 117.77 61.9275 115.739 63.113C89.4847 78.4378 76.7901 90.8857 63.8487 114.065C62.3174 116.808 58.346 116.913 56.6888 114.244C41.4088 89.6383 28.3853 77.334 3.39872 62.2065C2.08229 61.4095 2.11774 59.4753 3.467 58.7352C46.8754 34.9254 72.7237 35.1787 115.674 57.8647Z"})})}function PX(){const e=Ya(me.toasts),t=as(me.pillState);return k(je,{children:[v("div",{className:"logger-wrapper",children:e.map(r=>v(AX,{toast:r},r.id))}),v("div",{className:`flex-centered pill ${t.visible?"pill-visible":""}`,children:t.text})]})}function AX({toast:e}){const t=as(e),{text:r,type:n,id:i,timeout:o,visible:s}=t,a=r.length>150;return k(Xy,{boxProps:{className:s?"logger-toast":"logger-toast logger-toast-hidden",style:{maxWidth:a?"24rem":"19rem"}},onClick:()=>{me.removeToast(i)},children:[k("div",{className:"logger-content",children:[!a&&k("div",{className:"logger-status",children:[n===l0.ERROR&&v(lM,{color:n,size:20}),n===l0.SUCCESS&&v(WF,{color:n,size:20}),n===l0.WARN&&v(QF,{color:n,size:20})]}),v("div",{className:"logger-text",children:r})]}),v("div",{className:"logger-progress-outer",children:v("div",{className:"logger-progress-bar",style:{animation:`logger-animation ${o}ms linear forwards`,backgroundColor:n}},i)})]},i)}const RX=""+new URL("rotate.3e4d8401.svg",import.meta.url).href;class kX{constructor(){this.pages=[]}get lastPage(){return this.pages[this.pages.length-1]}get hasNavigated(){return this.pages.length>0}addPage(t){this.pages.push(t)}}const E4=new kX;function tu(e){var t,r,n,i,o;return v(Be,{...e,style:{width:(t=e.size)!=null?t:"2rem",height:(r=e.size)!=null?r:"2rem",minWidth:(n=e.size)!=null?n:"2rem",minHeight:(i=e.size)!=null?i:"2rem",...e.style},className:`icon-app-button flex-centered ${(o=e.className)!=null?o:""}`,children:e.children})}var OX=Object.defineProperty,LX=Object.getOwnPropertyDescriptor,UX=(e,t,r,n)=>{for(var i=n>1?void 0:n?LX(t,r):t,o=e.length-1,s;o>=0;o--)(s=e[o])&&(i=(n?s(t,r,i):s(i))||i);return n&&i&&OX(t,r,i),i};const sv=new Map;class Gn{constructor(t=Ar[0]){this.volumeNode=null,this.notes=[],this.layouts={keyboard:[],mobile:[],abc:[],playstation:[],switch:[]},this.buffers=[],this.isDeleted=!1,this.isLoaded=!1,this.getNoteFromCode=n=>{const i=this.getNoteIndexFromCode(n);return i!==-1?this.notes[i]:null},this.getNoteIndexFromCode=n=>this.layouts.keyboard.findIndex(i=>i===n),this.getNoteText=(n,i,o)=>{var a;const s=this.layouts;try{if(i==="Note name"){const l=this.notes[n].baseNote;return bA[l][(a=yM.get(o))!=null?a:0]}if(i==="Keyboard layout")return s.keyboard[n];if(i==="Do Re Mi")return s.mobile[n];if(i==="ABC")return s.abc[n];if(i==="No Text")return"";if(i==="Playstation")return s.playstation[n];if(i==="Switch")return s.switch[n]}catch{}return""},this.changeVolume=n=>{let i=Number((n/135).toFixed(2));n<5&&(i=0),this.volumeNode&&(this.volumeNode.gain.value=i)},this.play=(n,i)=>{if(this.isDeleted||!this.volumeNode)return;const o=_G(i),s=Mr.createBufferSource();s.buffer=this.buffers[n],s.connect(this.volumeNode),s.playbackRate.value=o,s.start(0);function a(){s.stop(),s.disconnect()}s.addEventListener("ended",a,{once:!0})},this.load=async()=>{this.volumeNode=Mr.createGain(),this.volumeNode.gain.value=.8;let n=!0;if(sv.has(this.name))this.buffers=sv.get(this.name);else{const i=Mr.createBuffer(2,Mr.sampleRate,Mr.sampleRate),o=this.notes.map(s=>dw(s.url).catch(()=>(n=!1,i)));this.buffers=await Promise.all(o),n&&sv.set(this.name,this.buffers)}return this.isLoaded=!0,n},this.disconnect=n=>{var i,o;if(n)return(i=this.volumeNode)==null?void 0:i.disconnect(n);(o=this.volumeNode)==null||o.disconnect()},this.connect=n=>{var i;(i=this.volumeNode)==null||i.connect(n)},this.dispose=()=>{this.disconnect(),this.isDeleted=!0,this.buffers=[],this.volumeNode=null},this.name=t,Ar.includes(this.name)||(this.name=Ar[0]),this.instrumentData={...tl[this.name]};const r=this.instrumentData.layout;this.layouts={keyboard:[...r.keyboardLayout],mobile:[...r.mobileLayout],abc:[...r.abcLayout],playstation:[...r.playstationLayout],switch:[...r.switchLayout]};for(let n=0;n<this.instrumentData.notes;n++){const o={keyboard:this.layouts.keyboard[n],mobile:this.layouts.mobile[n]},s=`./assets/audio/${this.name}/${n}.mp3`,a=new Yk(n,o,s,this.instrumentData.baseNotes[n]);a.instrument=this.name,a.noteImage=this.instrumentData.icons[n],this.notes.push(a)}}get endNode(){return this.volumeNode}static clearPool(){sv.clear()}}function dw(e){return new Promise((t,r)=>{fetch(e).then(n=>n.arrayBuffer()).then(n=>{Mr.decodeAudioData(n,t,i=>{console.error(i),r()}).catch(i=>{console.error(i),r()})})})}const Wk=class{constructor(e,t,r,n){this.noteImage="cr",this.instrument=Ar[0],this.baseNote="C",this.buffer=new ArrayBuffer(8),this.data={status:"",delay:0,animationId:0},this.index=e,this.noteNames=t,this.url=r,this.baseNote=n,Li(this)}get status(){return this.data.status}setStatus(e){return this.setState({status:e})}triggerAnimation(e){this.setState({animationId:this.data.animationId+1,status:e})}setState(e){Object.assign(this.data,e)}clone(){const e=new Wk(this.index,this.noteNames,this.url,this.baseNote);return e.buffer=this.buffer,e.noteImage=this.noteImage,e.instrument=this.instrument,e.setState(this.data),e}};let Yk=Wk;UX([yt],Yk.prototype,"data",2);const av=Mr.createBuffer(2,Mr.sampleRate,Mr.sampleRate);class FX{constructor(t){this.beats=4,this.volume=50,this.currentTick=0,this.running=!1,this.indicatorBuffer=av,this.crochetBuffer=av,this.volumeNode=Mr.createGain(),this.bpm=t!=null?t:220,this.loadBuffers(),this.volumeNode.connect(Mr.destination),this.changeVolume(this.volume)}destroy(){this.volumeNode.disconnect()}changeVolume(t){this.volume=t,this.volumeNode.gain.value=t/100}async loadBuffers(){const t=[dw("./assets/audio/MetronomeSFX/bar.mp3").catch(()=>av),dw("./assets/audio/MetronomeSFX/quarter.mp3").catch(()=>av)],r=await Promise.all(t);this.indicatorBuffer=r[0],this.crochetBuffer=r[1]}async start(){if(!this.running)for(this.running=!0,this.currentTick=0;this.running;)this.tick(),await Ks(6e4/this.bpm)}stop(){this.running=!1}toggle(){this.running?this.stop():this.start()}tick(){const t=Mr.createBufferSource();this.currentTick%this.beats===0?(t.buffer=this.crochetBuffer,this.currentTick=0):t.buffer=this.indicatorBuffer,this.currentTick++,t.connect(this.volumeNode),t.start(0);function r(){t.stop(),t.disconnect()}t.addEventListener("ended",r,{once:!0})}}const Un=new FX;var MX=Object.defineProperty,BX=Object.getOwnPropertyDescriptor,DX=(e,t,r,n)=>{for(var i=n>1?void 0:n?BX(t,r):t,o=e.length-1,s;o>=0;o--)(s=e[o])&&(i=(n?s(t,r,i):s(i))||i);return n&&i&&MX(t,r,i),i};class Kk{constructor(){this.logs=[],Li(this)}addLog(t){this.logs.find(r=>r.error===t.error)||this.logs.push(t)}clearLogs(){this.logs.splice(0,this.logs.length)}}DX([yt],Kk.prototype,"logs",2);const Vd=new Kk,GX=typeof mr=="object"&&mr.env&&mr.env.NODE_DEBUG&&/\bsemver\b/i.test(mr.env.NODE_DEBUG)?(...e)=>console.error("SEMVER",...e):()=>{};var qk=GX;const jX="2.0.0",$X=256,HX=Number.MAX_SAFE_INTEGER||9007199254740991,zX=16;var C4={SEMVER_SPEC_VERSION:jX,MAX_LENGTH:$X,MAX_SAFE_INTEGER:HX,MAX_SAFE_COMPONENT_LENGTH:zX},Xd={exports:{}};(function(e,t){const{MAX_SAFE_COMPONENT_LENGTH:r}=C4,n=qk;t=e.exports={};const i=t.re=[],o=t.src=[],s=t.t={};let a=0;const l=(u,c,f)=>{const p=a++;n(u,p,c),s[u]=p,o[p]=c,i[p]=new RegExp(c,f?"g":void 0)};l("NUMERICIDENTIFIER","0|[1-9]\\d*"),l("NUMERICIDENTIFIERLOOSE","[0-9]+"),l("NONNUMERICIDENTIFIER","\\d*[a-zA-Z-][a-zA-Z0-9-]*"),l("MAINVERSION",`(${o[s.NUMERICIDENTIFIER]})\\.(${o[s.NUMERICIDENTIFIER]})\\.(${o[s.NUMERICIDENTIFIER]})`),l("MAINVERSIONLOOSE",`(${o[s.NUMERICIDENTIFIERLOOSE]})\\.(${o[s.NUMERICIDENTIFIERLOOSE]})\\.(${o[s.NUMERICIDENTIFIERLOOSE]})`),l("PRERELEASEIDENTIFIER",`(?:${o[s.NUMERICIDENTIFIER]}|${o[s.NONNUMERICIDENTIFIER]})`),l("PRERELEASEIDENTIFIERLOOSE",`(?:${o[s.NUMERICIDENTIFIERLOOSE]}|${o[s.NONNUMERICIDENTIFIER]})`),l("PRERELEASE",`(?:-(${o[s.PRERELEASEIDENTIFIER]}(?:\\.${o[s.PRERELEASEIDENTIFIER]})*))`),l("PRERELEASELOOSE",`(?:-?(${o[s.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${o[s.PRERELEASEIDENTIFIERLOOSE]})*))`),l("BUILDIDENTIFIER","[0-9A-Za-z-]+"),l("BUILD",`(?:\\+(${o[s.BUILDIDENTIFIER]}(?:\\.${o[s.BUILDIDENTIFIER]})*))`),l("FULLPLAIN",`v?${o[s.MAINVERSION]}${o[s.PRERELEASE]}?${o[s.BUILD]}?`),l("FULL",`^${o[s.FULLPLAIN]}$`),l("LOOSEPLAIN",`[v=\\s]*${o[s.MAINVERSIONLOOSE]}${o[s.PRERELEASELOOSE]}?${o[s.BUILD]}?`),l("LOOSE",`^${o[s.LOOSEPLAIN]}$`),l("GTLT","((?:<|>)?=?)"),l("XRANGEIDENTIFIERLOOSE",`${o[s.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`),l("XRANGEIDENTIFIER",`${o[s.NUMERICIDENTIFIER]}|x|X|\\*`),l("XRANGEPLAIN",`[v=\\s]*(${o[s.XRANGEIDENTIFIER]})(?:\\.(${o[s.XRANGEIDENTIFIER]})(?:\\.(${o[s.XRANGEIDENTIFIER]})(?:${o[s.PRERELEASE]})?${o[s.BUILD]}?)?)?`),l("XRANGEPLAINLOOSE",`[v=\\s]*(${o[s.XRANGEIDENTIFIERLOOSE]})(?:\\.(${o[s.XRANGEIDENTIFIERLOOSE]})(?:\\.(${o[s.XRANGEIDENTIFIERLOOSE]})(?:${o[s.PRERELEASELOOSE]})?${o[s.BUILD]}?)?)?`),l("XRANGE",`^${o[s.GTLT]}\\s*${o[s.XRANGEPLAIN]}$`),l("XRANGELOOSE",`^${o[s.GTLT]}\\s*${o[s.XRANGEPLAINLOOSE]}$`),l("COERCE",`(^|[^\\d])(\\d{1,${r}})(?:\\.(\\d{1,${r}}))?(?:\\.(\\d{1,${r}}))?(?:$|[^\\d])`),l("COERCERTL",o[s.COERCE],!0),l("LONETILDE","(?:~>?)"),l("TILDETRIM",`(\\s*)${o[s.LONETILDE]}\\s+`,!0),t.tildeTrimReplace="$1~",l("TILDE",`^${o[s.LONETILDE]}${o[s.XRANGEPLAIN]}$`),l("TILDELOOSE",`^${o[s.LONETILDE]}${o[s.XRANGEPLAINLOOSE]}$`),l("LONECARET","(?:\\^)"),l("CARETTRIM",`(\\s*)${o[s.LONECARET]}\\s+`,!0),t.caretTrimReplace="$1^",l("CARET",`^${o[s.LONECARET]}${o[s.XRANGEPLAIN]}$`),l("CARETLOOSE",`^${o[s.LONECARET]}${o[s.XRANGEPLAINLOOSE]}$`),l("COMPARATORLOOSE",`^${o[s.GTLT]}\\s*(${o[s.LOOSEPLAIN]})$|^$`),l("COMPARATOR",`^${o[s.GTLT]}\\s*(${o[s.FULLPLAIN]})$|^$`),l("COMPARATORTRIM",`(\\s*)${o[s.GTLT]}\\s*(${o[s.LOOSEPLAIN]}|${o[s.XRANGEPLAIN]})`,!0),t.comparatorTrimReplace="$1$2$3",l("HYPHENRANGE",`^\\s*(${o[s.XRANGEPLAIN]})\\s+-\\s+(${o[s.XRANGEPLAIN]})\\s*$`),l("HYPHENRANGELOOSE",`^\\s*(${o[s.XRANGEPLAINLOOSE]})\\s+-\\s+(${o[s.XRANGEPLAINLOOSE]})\\s*$`),l("STAR","(<|>)?=?\\s*\\*"),l("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$"),l("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")})(Xd,Xd.exports);const VX=["includePrerelease","loose","rtl"],XX=e=>e?typeof e!="object"?{loose:!0}:VX.filter(t=>e[t]).reduce((t,r)=>(t[r]=!0,t),{}):{};var Zk=XX;const ZC=/^[0-9]+$/,Jk=(e,t)=>{const r=ZC.test(e),n=ZC.test(t);return r&&n&&(e=+e,t=+t),e===t?0:r&&!n?-1:n&&!r?1:e<t?-1:1},WX=(e,t)=>Jk(t,e);var YX={compareIdentifiers:Jk,rcompareIdentifiers:WX};const lv=qk,{MAX_LENGTH:JC,MAX_SAFE_INTEGER:uv}=C4,{re:QC,t:e5}=Xd.exports,KX=Zk,{compareIdentifiers:ac}=YX;class po{constructor(t,r){if(r=KX(r),t instanceof po){if(t.loose===!!r.loose&&t.includePrerelease===!!r.includePrerelease)return t;t=t.version}else if(typeof t!="string")throw new TypeError(`Invalid Version: ${t}`);if(t.length>JC)throw new TypeError(`version is longer than ${JC} characters`);lv("SemVer",t,r),this.options=r,this.loose=!!r.loose,this.includePrerelease=!!r.includePrerelease;const n=t.trim().match(r.loose?QC[e5.LOOSE]:QC[e5.FULL]);if(!n)throw new TypeError(`Invalid Version: ${t}`);if(this.raw=t,this.major=+n[1],this.minor=+n[2],this.patch=+n[3],this.major>uv||this.major<0)throw new TypeError("Invalid major version");if(this.minor>uv||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>uv||this.patch<0)throw new TypeError("Invalid patch version");n[4]?this.prerelease=n[4].split(".").map(i=>{if(/^[0-9]+$/.test(i)){const o=+i;if(o>=0&&o<uv)return o}return i}):this.prerelease=[],this.build=n[5]?n[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(t){if(lv("SemVer.compare",this.version,this.options,t),!(t instanceof po)){if(typeof t=="string"&&t===this.version)return 0;t=new po(t,this.options)}return t.version===this.version?0:this.compareMain(t)||this.comparePre(t)}compareMain(t){return t instanceof po||(t=new po(t,this.options)),ac(this.major,t.major)||ac(this.minor,t.minor)||ac(this.patch,t.patch)}comparePre(t){if(t instanceof po||(t=new po(t,this.options)),this.prerelease.length&&!t.prerelease.length)return-1;if(!this.prerelease.length&&t.prerelease.length)return 1;if(!this.prerelease.length&&!t.prerelease.length)return 0;let r=0;do{const n=this.prerelease[r],i=t.prerelease[r];if(lv("prerelease compare",r,n,i),n===void 0&&i===void 0)return 0;if(i===void 0)return 1;if(n===void 0)return-1;if(n===i)continue;return ac(n,i)}while(++r)}compareBuild(t){t instanceof po||(t=new po(t,this.options));let r=0;do{const n=this.build[r],i=t.build[r];if(lv("prerelease compare",r,n,i),n===void 0&&i===void 0)return 0;if(i===void 0)return 1;if(n===void 0)return-1;if(n===i)continue;return ac(n,i)}while(++r)}inc(t,r){switch(t){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",r);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",r);break;case"prepatch":this.prerelease.length=0,this.inc("patch",r),this.inc("pre",r);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",r),this.inc("pre",r);break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":if(this.prerelease.length===0)this.prerelease=[0];else{let n=this.prerelease.length;for(;--n>=0;)typeof this.prerelease[n]=="number"&&(this.prerelease[n]++,n=-2);n===-1&&this.prerelease.push(0)}r&&(ac(this.prerelease[0],r)===0?isNaN(this.prerelease[1])&&(this.prerelease=[r,0]):this.prerelease=[r,0]);break;default:throw new Error(`invalid increment argument: ${t}`)}return this.format(),this.raw=this.version,this}}var I4=po;const t5=I4,qX=(e,t,r)=>new t5(e,r).compare(new t5(t,r));var ZX=qX;const JX=ZX,QX=(e,t,r)=>JX(e,t,r)<0;var eW=QX;const{MAX_LENGTH:tW}=C4,{re:r5,t:n5}=Xd.exports,i5=I4,rW=Zk,nW=(e,t)=>{if(t=rW(t),e instanceof i5)return e;if(typeof e!="string"||e.length>tW||!(t.loose?r5[n5.LOOSE]:r5[n5.FULL]).test(e))return null;try{return new i5(e,t)}catch{return null}};var iW=nW;const oW=I4,sW=iW,{re:cv,t:hv}=Xd.exports,aW=(e,t)=>{if(e instanceof oW)return e;if(typeof e=="number"&&(e=String(e)),typeof e!="string")return null;t=t||{};let r=null;if(!t.rtl)r=e.match(cv[hv.COERCE]);else{let n;for(;(n=cv[hv.COERCERTL].exec(e))&&(!r||r.index+r[0].length!==e.length);)(!r||n.index+n[0].length!==r.index+r[0].length)&&(r=n),cv[hv.COERCERTL].lastIndex=n.index+n[1].length+n[2].length;cv[hv.COERCERTL].lastIndex=-1}return r===null?null:sW(`${r[2]}.${r[3]||"0"}.${r[4]||"0"}`,t)};var o5=aW;async function lW(){try{await Ks(2e3);const e=await fetch(vM).then(n=>n.json()),t=o5(ks),r=o5(e[Ae].version);if(t&&r&&eW(t,r)){const{message:n,urgentMessage:i}=e[Ae];n&&me.warn(`A New version of the app is available.
                        ${W3?"":"Please close the app and restart it to update. On the web you need to close all tabs with the app open."} 
                    ${n?`
Update Message: "${n}"`:""}
                    `.trim(),15e3),i&&me.error(i,15e3)}}catch(e){console.error(e)}}var uW=Object.defineProperty,cW=Object.getOwnPropertyDescriptor,Qk=(e,t,r,n)=>{for(var i=n>1?void 0:n?cW(t,r):t,o=e.length-1,s;o>=0;o--)(s=e[o])&&(i=(n?s(t,r,i):s(i))||i);return n&&i&&uW(t,r,i),i};async function En(e){return Tn.prompt(e)}async function Br(e,t=!0){return Tn.confirm(e,t)}class N4{constructor(){this.promptState={question:"",cancellable:!0,deferred:null},this.confirmState={question:"",cancellable:!0,deferred:null},Li(this)}prompt(t,r=!0){return this.promptState.deferred&&this.promptState.deferred(null),new Promise(n=>{Object.assign(this.promptState,{question:t,cancellable:r,deferred:n})})}answerPrompt(t){this.promptState.deferred?this.promptState.deferred(t):console.warn("No deferred prompt"),this.promptState.deferred=null}confirm(t,r=!0){return this.confirmState.deferred&&this.confirmState.deferred(null),new Promise(n=>{Object.assign(this.confirmState,{question:t,cancellable:r,deferred:n})})}answerConfirm(t){this.confirmState.deferred?this.confirmState.deferred(t):console.warn("No deferred confirm"),this.confirmState.deferred=null}clearAll(){this.promptState.deferred&&this.promptState.deferred(null),this.confirmState.deferred&&this.confirmState.deferred(null)}}Qk([yt],N4.prototype,"promptState",2);Qk([yt],N4.prototype,"confirmState",2);const Tn=new N4;function oa(e,t){const r=M.exports.useRef(),n=M.exports.useRef(null);return M.exports.useEffect(()=>{r.current=e}),M.exports.useEffect(()=>{if(!(t!=null&&t.active))return;function i(o){var a,l;if(!((a=n.current)!=null&&a.contains(o.target))){if((t==null?void 0:t.ignoreFocusable)&&hW(o))return;(l=r.current)==null||l.call(r,o)}}return document.addEventListener("click",i),()=>{document.removeEventListener("click",i)}},[t==null?void 0:t.active,t==null?void 0:t.ignoreFocusable]),n}function hW(e){return e.composedPath().some(r=>{var n,i,o,s;return r.tagName==="INPUT"||r.tagName==="BUTTON"?!((i=(n=r.classList)==null?void 0:n.contains)!=null&&i.call(n,"include_click_outside")):(s=(o=r.classList)==null?void 0:o.contains)==null?void 0:s.call(o,"ignore_click_outside")})}const Tg="ignore_click_outside";function fW(){const e=as(Tn.confirmState),t=as(Tn.promptState);return M.exports.useEffect(()=>()=>{Tn.clearAll()},[]),k(je,{children:[v(pW,{...t}),v(dW,{...e})]})}function dW({question:e,deferred:t,cancellable:r}){const n=!t,[i,o]=M.exports.useState(!1),s=M.exports.useRef(null);M.exports.useEffect(()=>{if(!n)return o(!0);const l=setTimeout(()=>o(!1),300);return()=>clearTimeout(l)},[n]),M.exports.useEffect(()=>{if(!!t)return Xe.register("Escape",()=>{!r||Tn.answerConfirm(!1)},{id:"AsyncConfirm"}),Xe.register("Enter",()=>{Tn.answerConfirm(!0)},{id:"AsyncConfirm"}),()=>Xe.unregisterById("AsyncConfirm")},[r,t]);function a(l){l.nativeEvent.composedPath()[0]!==s.current||!r||Tn.answerConfirm(!1)}return v("div",{style:i?{}:{display:"none"},onClick:a,className:dd(`prompt-overlay ${Tg}`,[n,"prompt-overlay-hidden"]),ref:s,children:k(Xy,{boxProps:{className:dd(`floating-prompt ${Tg}`,[!t,"floating-prompt-hidden"])},isRelative:!1,size:"1.1rem",children:[v("div",{children:e}),k("div",{className:"prompt-row",children:[v("button",{className:"prompt-button",style:{backgroundColor:"rgb(169, 82, 90)",color:"white"},onClick:()=>Tn.answerConfirm(!1),children:"No"}),v("button",{className:"prompt-button",style:{backgroundColor:"rgb(98, 140, 131)",color:"white"},onClick:()=>Tn.answerConfirm(!0),children:"Yes"})]})]})})}function pW({question:e,deferred:t,cancellable:r}){const[n,i]=M.exports.useState(""),o=M.exports.useRef(null),[s]=en(),[a,l]=M.exports.useState("var(--primary)"),u=!t,[c,f]=M.exports.useState(!1),p=M.exports.useRef(null);M.exports.useEffect(()=>{if(!u)return f(!0);const g=setTimeout(()=>f(!1),200);return()=>clearTimeout(g)},[u]),M.exports.useEffect(()=>{l(s.layer("primary",.1).hex())},[s]),M.exports.useEffect(()=>{i("")},[t]),M.exports.useEffect(()=>{if(!cu&&t){const g=setTimeout(()=>{var b;return(b=o.current)==null?void 0:b.focus()},300);return()=>clearTimeout(g)}},[o,t]),M.exports.useEffect(()=>{if(!!t)return Xe.register("Escape",()=>{!r||Tn.answerPrompt(null)},{id:"AsyncPrompt"}),Xe.register("Enter",()=>{!n||Tn.answerPrompt(n)},{id:"AsyncPrompt"}),()=>Xe.unregisterById("AsyncPrompt")},[r,n,t]);function m(g){g.nativeEvent.composedPath()[0]!==p.current||!r||Tn.answerPrompt(null)}return v("div",{ref:p,style:c?{}:{display:"none"},onClick:m,className:dd(`prompt-overlay ${Tg}`,[u,"prompt-overlay-hidden"]),children:k(Xy,{boxProps:{className:dd(`floating-prompt ${Tg}`,[!t,"floating-prompt-hidden"])},isRelative:!1,size:"1.1rem",children:[v("div",{children:e}),v("input",{ref:o,className:"prompt-input",value:n,onKeyDown:g=>{g.key==="Enter"&&n&&Tn.answerPrompt(n),g.key==="Escape"&&r&&Tn.answerPrompt(null)},onChange:g=>i(g.target.value)}),k("div",{className:"prompt-row",children:[v("button",{className:"prompt-button",style:{backgroundColor:a,color:"white"},onClick:()=>Tn.answerPrompt(null),children:"Cancel"}),v("button",{className:dd("prompt-button",[!n,"disabled"]),disabled:!n,style:{backgroundColor:a,color:"white"},onClick:()=>Tn.answerPrompt(n),children:"Ok"})]})]})})}class mW{setLastBackupWarningTime(t){localStorage.setItem(Ae+"_LastBackupWarningTime",t.toString())}getLastBackupWarningTime(){const t=localStorage.getItem(Ae+"_LastBackupWarningTime");return t?parseInt(t):(this.setLastBackupWarningTime(Date.now()),-1)}getLatestSettings(t,r){var o;const n=localStorage==null?void 0:localStorage.getItem(r),i={data:t.data,hadUpdate:!1};try{const s=JSON.parse(n||"null");if(s){if(((o=s.other)==null?void 0:o.settingVersion)!==t.other.settingVersion)return i.data=t.data,i.hadUpdate=!0,i;i.data=s.data}}catch(s){console.error(s)}return i}getComposerSettings(){const{data:t,hadUpdate:r}=this.getLatestSettings(cC,Ae+"_Composer_Settings");return r&&this.updateComposerSettings(t),t}getZenKeyboardSettings(){const{data:t,hadUpdate:r}=this.getLatestSettings(qb,Ae+"_ZenKeyboard_Settings");return r&&this.updateZenKeyboardSettings(t),t}getVsrgComposerSettings(){const{data:t,hadUpdate:r}=this.getLatestSettings(fC,Ae+"_VsrgComposer_Settings");return r&&this.updateVsrgComposerSettings(t),t}getVsrgPlayerSettings(){const{data:t,hadUpdate:r}=this.getLatestSettings(dC,Ae+"_VsrgPlayer_Settings");return r&&this.updateVsrgPlayerSettings(t),t}getPlayerSettings(){const{data:t,hadUpdate:r}=this.getLatestSettings(hC,Ae+"_Player_Settings");return r&&this.updatePlayerSettings(t),t}getMIDISettings(){try{const t=JSON.parse((localStorage==null?void 0:localStorage.getItem(`${Ae}_MIDI_Settings`))||"null");return t!==null&&t.settingVersion===V2.settingVersion?t:V2}catch(t){return console.error(t),V2}}updateVsrgComposerSettings(t){const r={other:fC.other,data:t};localStorage.setItem(Ae+"_VsrgComposer_Settings",JSON.stringify(r))}updateZenKeyboardSettings(t){const r={other:qb.other,data:t};localStorage.setItem(Ae+"_ZenKeyboard_Settings",JSON.stringify(r))}updatePlayerSettings(t){const r={other:hC.other,data:t};localStorage.setItem(Ae+"_Player_Settings",JSON.stringify(r))}updateComposerSettings(t){const r={other:cC.other,data:t};localStorage.setItem(Ae+"_Composer_Settings",JSON.stringify(r))}updateVsrgPlayerSettings(t){const r={other:dC.other,data:t};localStorage.setItem(Ae+"_VsrgPlayer_Settings",JSON.stringify(r))}updateMIDISettings(t){localStorage.setItem(`${Ae}_MIDI_Settings`,JSON.stringify(t))}}const fn=new mW;class qs extends is{constructor(t){super(t,1,"vsrg"),this.tracks=[],this.keys=4,this.duration=6e4,this.audioSongId=null,this.trackModifiers=[],this.breakpoints=[],this.difficulty=5,this.snapPoint=1,this.bpm=100}static deserialize(t){var n,i,o,s,a,l,u,c;const r=is.deserializeTo(new qs(t.name),t);return r.tracks=((n=t.tracks)!=null?n:[]).map(f=>Yd.deserialize(f)),r.audioSongId=(i=t.audioSongId)!=null?i:null,r.trackModifiers=((o=t.trackModifiers)!=null?o:[]).map(f=>Wd.deserialize(f)),r.duration=(s=t.duration)!=null?s:6e4,r.keys=(a=t.keys)!=null?a:4,r.breakpoints=(l=t.breakpoints)!=null?l:[],r.difficulty=(u=t.difficulty)!=null?u:5,r.snapPoint=(c=t.snapPoint)!=null?c:1,r}static isSerializedType(t){return(t==null?void 0:t.type)==="vsrg"}setAudioSong(t){if(t===null){this.audioSongId=null;return}this.audioSongId!==t.id&&(this.audioSongId=t.id,this.trackModifiers=t.instruments.map(r=>{const n=new Wd;return n.alias=r.alias||r.name,n}))}setDurationFromNotes(t){const r=t.reduce((n,i)=>Math.max(n,i.time),0);return this.duration=this.duration<r?r:this.duration,r}toGenshin(){const t=this.clone();return t.tracks.forEach(r=>{r.instrument.name="DunDun",r.hitObjects.forEach(n=>{n.notes=n.notes.map(i=>py[i])})}),t}startPlayback(t){this.tracks.forEach(r=>r.startPlayback(t))}tickPlayback(t){return this.tracks.map(r=>r.tickPlayback(t))}addTrack(t){const r=new Yd(t!=null?t:"DunDun");return this.tracks.push(r),this.tracks=[...this.tracks],r}validateBreakpoints(){const t=this.breakpoints.filter(r=>r<this.duration);t.sort((r,n)=>r-n),this.breakpoints=t}setBreakpoint(t,r){const n=this.breakpoints.findIndex(i=>i===t);n===-1&&r?this.breakpoints.push(t):n!==-1&&!r&&this.breakpoints.splice(n,1),this.validateBreakpoints()}getClosestBreakpoint(t,r){const{breakpoints:n}=this,i=r===1?n.filter(o=>o>t):n.filter(o=>o<t);return i.length===0?r===1?this.duration:0:i[r===1?0:i.length-1]}getRenderableNotes(t){const r=[],n=this.trackModifiers.map(i=>!i.hidden);return t.notes.forEach(i=>{n.some((s,a)=>s?i.layer.test(a):!1)&&r.push(i)}),r}getHitObjectsAt(t,r){return this.tracks.map(n=>n.getHitObjectAt(t,r))}getHitObjectsBetween(t,r,n){return this.tracks.map(i=>i.getObjectsBetween(t,r,n))}removeHitObjectsBetween(t,r,n){this.tracks.forEach(i=>i.removeObjectsBetween(t,r,n))}getHitObjectInTrack(t,r,n){return this.tracks[t].getHitObjectAt(r,n)}addHitObjectInTrack(t,r){this.tracks[t].addHitObject(r)}createHitObjectInTrack(t,r,n){const i=this.tracks[t].createHitObjectAt(r,n);return this.duration=Math.max(this.duration,r),i}createHeldHitObject(t,r,n){const i=this.createHitObjectInTrack(t,r,n);return i.isHeld=!0,i}setHeldHitObjectTail(t,r,n){this.tracks.forEach((i,o)=>o!==t&&i.removeObjectsBetween(r.timestamp,r.timestamp+n,r.index)),this.tracks[t].setHeldHitObjectTail(r,n)}removeHitObjectInTrack(t,r){this.tracks[t].removeHitObject(r)}removeHitObjectInTrackAtTimestamp(t,r,n){this.tracks[t].removeHitObjectAt(r,n)}deleteTrack(t){this.tracks.splice(t,1),this.tracks=[...this.tracks]}getAccuracyBounds(){const{difficulty:t}=this;return[16,64-t*2,97-t*2,127-t*2,188-t*2]}changeKeys(t){this.keys=t}serialize(){return{name:this.name,type:"vsrg",bpm:this.bpm,pitch:this.pitch,version:1,keys:this.keys,data:this.data,id:this.id,audioSongId:this.audioSongId,folderId:this.folderId,duration:this.duration,tracks:this.tracks.map(t=>t.serialize()),instruments:this.instruments.map(t=>t.serialize()),trackModifiers:this.trackModifiers.map(t=>t.serialize()),breakpoints:[...this.breakpoints],difficulty:this.difficulty,snapPoint:this.snapPoint}}set(t){return Object.assign(this,t),this}clone(){const t=new qs(this.name);return t.set({id:this.id,folderId:this.folderId,bpm:this.bpm,data:{...this.data},version:this.version,pitch:this.pitch,keys:this.keys,duration:this.duration,audioSongId:this.audioSongId,trackModifiers:this.trackModifiers.map(r=>r.clone()),tracks:this.tracks.map(r=>r.clone()),instruments:this.instruments.map(r=>r.clone()),breakpoints:[...this.breakpoints],difficulty:this.difficulty}),t}}class Wd{constructor(){this.hidden=!1,this.muted=!1,this.alias=""}static deserialize(t){return new Wd().set({hidden:t.hidden,muted:t.muted,alias:t.alias})}serialize(){return{hidden:this.hidden,muted:this.muted,alias:this.alias}}clone(){return new Wd().set({hidden:this.hidden,muted:this.muted})}set(t){return Object.assign(this,t),this}}class Yd{constructor(t,r,n){this.color="#FFFFFF",this.lastPlayedHitObjectIndex=-1,this.instrument=new Bn({name:t!=null?t:"DunDun",alias:r}),this.hitObjects=n!=null?n:[]}static deserialize(t){var n,i,o;const r=new Yd;return r.instrument=Bn.deserialize((n=t.instrument)!=null?n:{}),r.hitObjects=((i=t.hitObjects)!=null?i:[]).map(s=>pw.deserialize(s)),r.color=(o=t.color)!=null?o:"#FFFFFF",r}startPlayback(t){this.lastPlayedHitObjectIndex=-1;for(let r=0;r<this.hitObjects.length&&!(this.hitObjects[r].timestamp>=t);r++)this.lastPlayedHitObjectIndex=r}tickPlayback(t){const r=[];for(let n=this.lastPlayedHitObjectIndex+1;n<this.hitObjects.length;n++){if(this.hitObjects[n].timestamp<=t){r.push(this.hitObjects[n]),this.lastPlayedHitObjectIndex=n;continue}break}return r}serialize(){return{instrument:this.instrument.serialize(),hitObjects:this.hitObjects.map(t=>t.serialize()),color:this.color}}sortTrack(){this.hitObjects.sort((t,r)=>t.timestamp-r.timestamp)}getHitObjectAt(t,r){return this.hitObjects.find(n=>n.timestamp===t&&n.index===r)||null}addHitObject(t){this.hitObjects.push(t),this.sortTrack()}createHitObjectAt(t,r){const n=this.hitObjects.findIndex(o=>o.timestamp===t&&o.index===r);if(n!==-1)return this.hitObjects[n];const i=new pw(r,t);return this.addHitObject(i),i}getObjectsBetween(t,r,n){if(t>r){const i=t;t=r,r=i}return this.hitObjects.filter(i=>i.timestamp>=t&&i.timestamp<=r&&(n===void 0||i.index===n))}removeObjectsBetween(t,r,n){this.getObjectsBetween(t,r,n).forEach(o=>this.removeHitObjectAt(o.timestamp,o.index))}setHeldHitObjectTail(t,r){const n=t.timestamp+r;this.getObjectsBetween(t.timestamp,n,t.index).forEach(o=>o!==t&&this.removeHitObjectAt(o.timestamp,o.index)),r<0?(t.holdDuration=Math.abs(r),t.timestamp=n):t.holdDuration=r}removeHitObject(t){const r=this.hitObjects.indexOf(t);r!==-1&&this.hitObjects.splice(r,1)}removeHitObjectAt(t,r){const n=this.hitObjects.findIndex(i=>i.timestamp===t&&i.index===r);n!==-1&&this.hitObjects.splice(n,1)}set(t){return Object.assign(this,t),this}clone(){const t=new Yd;return t.instrument=this.instrument.clone(),t.hitObjects=this.hitObjects.map(r=>r.clone()),t.color=this.color,t}}const v0=class{constructor(e,t){this.isHeld=!1,this.notes=[],this.holdDuration=0,this.renderId=0,this.index=e,this.timestamp=t,this.renderId=v0.globalRenderId++}static deserialize(e){const t=new v0(e[0],e[1]);return t.holdDuration=e[2],t.notes=[...e[3]],t.isHeld=t.holdDuration>0,t}serialize(){return[this.index,this.timestamp,this.holdDuration,[...this.notes]]}toggleNote(e){if(this.notes.find(r=>r===e)!==void 0)return this.removeNote(e);this.setNote(e)}setNote(e){this.notes.includes(e)||(this.notes=[...this.notes,e])}removeNote(e){const t=this.notes.indexOf(e);t!==-1&&(this.notes.splice(t,1),this.notes=[...this.notes])}clone(){const e=new v0(this.index,this.timestamp);return e.notes=[...this.notes],e.holdDuration=this.holdDuration,e.isHeld=this.isHeld,e}};let pw=v0;pw.globalRenderId=0;class vW{constructor(){this.songCollection=eu.collections.songs}async getStorableSongs(){return(await this.getSongs()).map(lG)}async getSongs(){const t=await this.songCollection.find({});return(await this.ensureMigration(t)).map(this.stripDbId)}async ensureMigration(t){const r=t.map(i=>new Promise(async o=>{let s=!1;(i.id===void 0||i.id===null)&&(i.id=eu.generateId(),i.type=is.getSongType(i),i.folderId=null,await this.songCollection.update({name:i.name},i),s=!0),i.folderId===void 0&&(i.folderId=null),i.type||(i.type=is.getSongType(i)),o(s)}));return(await Promise.all(r)).some(i=>i)?this.songCollection.find({}):t}stripDbId(t){return delete t._id,t}async getOneSerializedFromStorable(t){if(t.id===null)return console.error("ERROR: Storable id is null, this should not happen"),null;const r=await this.getSongById(t.id);return r||console.error("ERROR: Storable song not found, this should not happen"),r}getManySerializedFromStorable(t){const r=t.map(n=>this.getOneSerializedFromStorable(n));return Promise.all(r)}async songExists(t){return await this.getSongById(t)!==null}async getSongById(t){const r=await this.songCollection.findOneById(t);return r?this.stripDbId(r):null}updateSong(t,r){return this.songCollection.updateById(t,r)}async renameSong(t,r){const n=await this.getSongById(t);if(n!==null)return n.name=r,this.updateSong(t,n)}async addSong(t){const r=eu.generateId();return t.id=r,await this.songCollection.insert(t),r}_clearAll(){return this.songCollection.remove({})}async fromStorableSong(t){const r=await this.getOneSerializedFromStorable(t);if(r===null)throw new Error("Error: Song not found");return this.parseSong(r)}parseSong(t){var n;t=Array.isArray(t)?t[0]:t;const r=vG(t);if(r==="none")throw console.log(t),new Error("Error Invalid song");if(r==="oldSky"){const i=Nn.fromOldFormat(t);if(i===null)throw new Error("Error parsing old format song");return i}if(((n=t.data)==null?void 0:n.appName)!=="Sky")throw console.log(t),new Error("Error Invalid song, it's not a Sky song");if(r==="vsrg")return qs.deserialize(t);if(r==="newComposed")return Kr.deserialize(t);if(r==="newRecorded")return Nn.deserialize(t);throw new La("Error Invalid song")}removeSong(t){return this.songCollection.removeById(t)}}const it=new vW;var gW=Object.defineProperty,yW=Object.getOwnPropertyDescriptor,_W=(e,t,r,n)=>{for(var i=n>1?void 0:n?yW(t,r):t,o=e.length-1,s;o>=0;o--)(s=e[o])&&(i=(n?s(t,r,i):s(i))||i);return n&&i&&gW(t,r,i),i};class eO{constructor(){this.songs=[],this.debouncer=wG(10),this.sync=async()=>{this.debouncer(async()=>{const t=await it.getStorableSongs();this.songs.splice(0,this.songs.length,...t)})},this._DANGEROUS_CLEAR_ALL_SONGS=async()=>{await it._clearAll(),this.sync()},this.removeSong=async t=>{await it.removeSong(t),this.sync()},this.addSong=async t=>{const r=await it.addSong(t.serialize());return this.sync(),r},this.renameSong=async(t,r)=>{await it.renameSong(t,r),this.sync()},this.updateSong=async t=>{await it.updateSong(t.id,t.serialize()),this.sync()},this.getSongById=async t=>t===null?null:await it.getSongById(t),this.addSongToFolder=async(t,r)=>{t.folderId=r,await it.updateSong(t.id,t),this.sync()},this.clearSongsInFolder=async t=>{const r=this.songs.filter(i=>i.folderId===t),n=await it.getManySerializedFromStorable(r);for(const i of n)i!=null&&(i.folderId=null,await it.updateSong(i.id,i));this.sync()},Li(this)}}_W([yt.shallow],eO.prototype,"songs",2);const At=new eO;At.sync();var bW=wW;function wW(e,t){t=t||{};var r=e.numberOfChannels,n=e.sampleRate,i=t.float32?3:1,o=i===3?32:16,s;return r===2?s=TW(e.getChannelData(0),e.getChannelData(1)):s=e.getChannelData(0),xW(s,i,n,r,o)}function xW(e,t,r,n,i){var o=i/8,s=n*o,a=new ArrayBuffer(44+e.length*o),l=new DataView(a);return fv(l,0,"RIFF"),l.setUint32(4,36+e.length*o,!0),fv(l,8,"WAVE"),fv(l,12,"fmt "),l.setUint32(16,16,!0),l.setUint16(20,t,!0),l.setUint16(22,n,!0),l.setUint32(24,r,!0),l.setUint32(28,r*s,!0),l.setUint16(32,s,!0),l.setUint16(34,i,!0),fv(l,36,"data"),l.setUint32(40,e.length*o,!0),t===1?EW(l,44,e):SW(l,44,e),a}function TW(e,t){for(var r=e.length+t.length,n=new Float32Array(r),i=0,o=0;i<r;)n[i++]=e[o],n[i++]=t[o],o++;return n}function SW(e,t,r){for(var n=0;n<r.length;n++,t+=4)e.setFloat32(t,r[n],!0)}function EW(e,t,r){for(var n=0;n<r.length;n++,t+=2){var i=Math.max(-1,Math.min(1,r[n]));e.setInt16(t,i<0?i*32768:i*32767,!0)}}function fv(e,t,r){for(var n=0;n<r.length;n++)e.setUint8(t+n,r.charCodeAt(n))}class To{constructor(t,r,n){this.serialize=()=>({type:"folder",id:this.id,name:this.name,filterType:this.filterType}),this.clone=()=>{const i=new To(this.name,this.id);return i.songs=[...this.songs],i.filterType=this.filterType,i},this.set=i=>{Object.assign(this,i)},this.id=r!=null?r:null,this.name=t||"Unnamed folder",this.songs=n!=null?n:[],this.filterType="date-created"}addSong(t){this.songs.push(t)}static deserialize(t){var n;const r=new To(t==null?void 0:t.name,t.id);return r.filterType=(n=t==null?void 0:t.filterType)!=null?n:"date-created",r}static isSerializedType(t){return(t==null?void 0:t.type)==="folder"}}class CW{constructor(){this.foldersCollection=eu.collections.folders}async getFolders(){const t=await this.foldersCollection.find({});return t.forEach(r=>{delete r._id}),t}async addFolder(t){const r=eu.generateId();return t.id=r,await this.foldersCollection.insert(t),r}updateFolder(t,r){return this.foldersCollection.updateById(t,r)}removeFolder(t){return this.foldersCollection.removeById(t)}_deleteAllFolders(){return this.foldersCollection.remove({})}}const Do=new CW;var IW=Object.defineProperty,NW=Object.getOwnPropertyDescriptor,PW=(e,t,r,n)=>{for(var i=n>1?void 0:n?NW(t,r):t,o=e.length-1,s;o>=0;o--)(s=e[o])&&(i=(n?s(t,r,i):s(i))||i);return n&&i&&IW(t,r,i),i};class tO{constructor(){this.folders=[],this.sync=async()=>{const t=await Do.getFolders();this.folders.splice(0,this.folders.length,...t.map(r=>To.deserialize(r)))},this.createFolder=async t=>{t==="_None"&&(t="None");const r=new To(t);await Do.addFolder(r.serialize()),this.sync()},this.removeFolder=async t=>{await Do.removeFolder(t.id),this.sync(),At.clearSongsInFolder(t.id)},this.addFolder=async t=>{const r=await Do.addFolder(t.serialize());return this.sync(),r},this.renameFolder=async(t,r)=>{t.name=r||"Unnamed",await Do.updateFolder(t.id,t.serialize()),this.sync()},this.updateFolder=async t=>{await Do.updateFolder(t.id,t.serialize()),this.sync()},this._DANGEROUS_CLEAR_ALL_FOLDERS=async()=>{await Do._deleteAllFolders(),this.sync()},Li(this)}}PW([yt.shallow],tO.prototype,"folders",2);const Zi=new tO;Zi.sync();class AW{constructor(t,r){this.successful=t||[],this.errors=r||[]}hasErrors(){return this.errors.length>0}getKinds(t,r){return t.filter(n=>Yo.getSerializedObjectType(n)===r)}getSuccessfulSongs(){return this.getKinds(this.successful,"song")}getSuccessfulFolders(){return this.getKinds(this.successful,"folder")}getSuccessfulThemes(){return this.getKinds(this.successful,"theme")}appendSuccessful(t){this.successful.push(t)}getSongErrors(){return this.errors.filter(t=>Yo.getSerializedObjectType(t.file)==="song")}getFolderErrors(){return this.errors.filter(t=>Yo.getSerializedObjectType(t.file)==="folder")}getThemeErrors(){return this.errors.filter(t=>Yo.getSerializedObjectType(t.file)==="theme")}appendError(t,r){this.errors.push({file:t,error:r})}}class Yo{async importAndLog(t){me.showPill("Importing files...");const r=await fr.importUnknownFile(t).catch(u=>{throw me.hidePill(),me.error("Error importing files"),console.error(u),u});me.hidePill(),r.hasErrors()&&me.error(`${r.errors.length} thing${r.errors.length===1?"":"s"} failed to import`);const n=r.getSuccessfulSongs(),i=r.getSongErrors();n.length>5?me.success(`Imported ${n.length} songs`):n.forEach(u=>me.success(`Imported ${u.type} song: "${u.name}"`)),i.forEach(u=>{var c,f;return me.error(`Error importing song: "${(f=(c=u.file)==null?void 0:c.name)!=null?f:""}" | ${u.error}`)});const o=r.getSuccessfulFolders(),s=r.getFolderErrors();o.forEach(u=>me.success(`Imported folder: "${u.name}"`)),s.forEach(u=>{var c,f;return me.error(`Error importing folder: "${(f=(c=u.file)==null?void 0:c.name)!=null?f:""}" | ${u.error}`)});const a=r.getSuccessfulThemes(),l=r.getThemeErrors();return a.forEach(u=>{var c,f;return me.success(`Imported theme: "${(f=(c=u==null?void 0:u.other)==null?void 0:c.name)!=null?f:""}"`)}),l.forEach(u=>{var c,f,p;return me.error(`Error importing theme: "${(p=(f=(c=u.file)==null?void 0:c.other)==null?void 0:f.name)!=null?p:""}" | ${u.error}`)}),r}async importUnknownFile(t){var u,c,f,p;const r=new AW,n=Array.isArray(t)?t:[t],i=this.splitIntoTypes(n),o=new Map;for(const m of i.folders)try{const g=m.id,b=await Zi.addFolder(To.deserialize(m));o.set(g,b),r.appendSuccessful(m)}catch(g){console.error(g),r.appendError(m,La.getMessageFromAny(g))}const s=i.songs.filter(m=>m.type==="vsrg"),a=i.songs.filter(m=>m.type!=="vsrg"),l=new Map;for(const m of a)try{const g=(u=m.id)!=null?u:null;m.id=null,m.folderId=(c=o.get(m.folderId))!=null?c:null;const b=it.parseSong(m),y=await At.addSong(b);l.set(g,y),r.appendSuccessful(b)}catch(g){console.error(g),r.appendError(m,La.getMessageFromAny(g))}for(const m of s)try{m.id=null,m.audioSongId=(f=l.get(m.audioSongId))!=null?f:null,m.folderId=(p=o.get(m.folderId))!=null?p:null;const g=it.parseSong(m);await At.addSong(g),r.appendSuccessful(g)}catch(g){console.error(g),r.appendError(m,La.getMessageFromAny(g))}for(const m of i.themes)try{m.id=null;const g=Se.sanitize(m);await zs.addTheme(g),r.appendSuccessful(m)}catch(g){console.error(g),r.appendError(m,La.getMessageFromAny(g))}for(const m of i.unknown)r.appendError(m,"Unknown file type");return r}splitIntoTypes(t){const r=t.filter(s=>Yo.getSerializedObjectType(s)==="song"),n=t.filter(s=>Yo.getSerializedObjectType(s)==="folder"),i=t.filter(s=>Yo.getSerializedObjectType(s)==="theme"),o=t.filter(s=>Yo.getSerializedObjectType(s)===null);return{songs:r,folders:n,themes:i,unknown:o}}static getSerializedObjectType(t){try{if(Nn.isSerializedType(t)||Kr.isSerializedType(t)||qs.isSerializedType(t)||Nn.isOldFormatSerializedType(t)||Kr.isOldFormatSerializedType(t))return"song";if(To.isSerializedType(t))return"folder";if(zk.isSerializedType(t))return"theme"}catch(r){console.log(r)}return null}async downloadSong(t,r){r=r.replace(".json","");const i=(Array.isArray(t)?t.map(is.stripMetadata):[is.stripMetadata(t)]).map(a=>this.prepareSongDownload(a)),s=(await Promise.all(i)).flat().filter((a,l,u)=>u.findIndex(c=>c.id===a.id)===l);this.downloadFiles(s,r)}async prepareSongDownload(t){const r=[t],n=r.filter(o=>o.type==="vsrg"),i=new Set(n.map(o=>o.audioSongId));for(const o of i){if(r.some(a=>a.id===o))continue;const s=await it.getSongById(o);s&&r.push(s)}return r}downloadFiles(t,r){r=r.replace(".json",""),kf.download(JSON.stringify(t),`${r}.json`)}downloadObject(t,r){kf.download(JSON.stringify(t),`${r}.json`)}async downloadBlobAsWav(t,r){r=r.replace(".wav","");const n=bW(await RW(t)),i=new Blob([new DataView(n)],{type:"audio/wav"});kf.download(i,r+".wav")}downloadBlob(t,r){kf.download(t,r)}downloadMidi(t,r){return r=(r||t.name).replace(".mid",""),kf.download(new Blob([t.toArray()],{type:"audio/midi"}),r+".mid")}downloadTheme(t,r){r=(r||`${t.other.name}.theme`).replace(".json",""),this.downloadFiles([t],r)}}function RW(e){return new Promise(t=>{const r=new AudioContext,n=new FileReader;function i(){r.decodeAudioData(n.result,o=>{t(o)})}n.addEventListener("loadend",i,{once:!0}),n.readAsArrayBuffer(e)})}const fr=new Yo;var kW=Object.defineProperty,OW=Object.getOwnPropertyDescriptor,rO=(e,t,r,n)=>{for(var i=n>1?void 0:n?OW(t,r):t,o=e.length-1,s;o>=0;o--)(s=e[o])&&(i=(n?s(t,r,i):s(i))||i);return n&&i&&kW(t,r,i),i};class P4{constructor(){this.version=2,this.vsrg={k4:["A","S","J","K"],k6:["A","S","D","H","J","K"]},this.keyboard={genshin:"Q W E R T Y U A S D F G H J Z X C V B N M".split(" "),sky:"Q W E R T A S D F G Z X C V B".split(" ")},Li(this),this.load()}getVsrgKeybinds(t){return this.vsrg[`k${t}`]}setVsrgKeybind(t,r,n){this.vsrg[`k${t}`][r]=n,this.save()}setVsrgKeybinds(t,r){this.vsrg[`k${t}`].splice(0,r.length,...r),this.save()}getKeyboardKeybinds(){return this.keyboard[Ae.toLowerCase()]}setKeyboardKeybinds(t){this.keyboard[Ae.toLowerCase()].splice(0,t.length,...t),this.save()}setKeyboardKeybind(t,r){this.keyboard[Ae.toLowerCase()][t]=r,this.save()}load(){const t=localStorage.getItem(`${Ae}_keybinds`);if(t){const r=JSON.parse(t);if(r.version!==this.version)return;this.vsrg=r.vsrg,this.keyboard=r.keyboard}}save(){localStorage.setItem(`${Ae}_keybinds`,JSON.stringify(this.serialize()))}serialize(){return{version:this.version,vsrg:wi(this.vsrg),keyboard:wi(this.keyboard)}}}rO([yt],P4.prototype,"vsrg",2);rO([yt],P4.prototype,"keyboard",2);const Ho=new P4;function LW(){try{window.__link={songService:it,fileService:fr,settingsService:fn,themeSerivce:ji,folderService:Do,songsStore:At,themeStore:zs,logsStore:Vd,keybindsStore:Ho}}catch(e){return console.error(e),!1}return!0}function UW({history:e}){const[t,r]=M.exports.useState(!1),[n,i]=M.exports.useState(Mr.state),[o,s]=M.exports.useState(!1),[a,l]=M.exports.useState(0),[u,c]=M.exports.useState(!1),f=M.exports.useCallback(()=>{i(Mr.state)},[]);M.exports.useEffect(()=>(Mr.addEventListener("statechange",f),()=>{Mr.removeEventListener("statechange",f)}),[f]),M.exports.useEffect(()=>{if(window.location.hostname==="localhost")return;const I=console.error.bind(console);console.error=(...S)=>{I(...S),Vd.addLog({error:S.find(O=>O instanceof Error),message:S.map(O=>O instanceof Error?O.stack:typeof O=="object"?JSON.stringify(O,null,4):O).join(" ")})};const R=S=>{Vd.addLog({error:S.error,message:S.error.stack})};return window.addEventListener("error",R),()=>{console.error=I,window.removeEventListener("error",R)}},[]),M.exports.useEffect(()=>{const I=localStorage.getItem(Ae+"_Visited");let R=localStorage.getItem(Ae+"_ShowHome");R=R===null?"true":R,ln.setState({canShow:R==="true",visible:R==="true",isInPosition:!1,hasPersistentStorage:Boolean(navigator.storage&&navigator.storage.persist)}),c("ontouchstart"in window),r(I==="true"),l(window.innerHeight),lW(),LW();const S=fn.getLastBackupWarningTime();S>0&&Date.now()-S>1e3*60*60*24*14&&(me.warn("You haven't backed up your songs in a while, remember to download the backup sometimes!",8e3),fn.setLastBackupWarningTime(Date.now()))},[]);const p=M.exports.useCallback(I=>{document.body.style.minHeight=I+"px"},[]),m=M.exports.useCallback(()=>{document.body.style=""},[]),g=M.exports.useCallback(()=>{var I;if(((I=document.activeElement)==null?void 0:I.tagName)==="INPUT")return a===window.innerHeight||a===0?void 0:p(a);p(window.innerHeight),m(),c("ontouchstart"in window)},[a,m,p]),b=M.exports.useCallback(()=>{const I=document.activeElement;I&&I.tagName==="INPUT"&&(I==null||I.blur()),m()},[m]),y=M.exports.useCallback((I=!1)=>{localStorage.setItem(Ae+"_ShowHome",JSON.stringify(I)),ln.setState({canShow:I})},[]),w=async()=>{try{navigator.storage&&navigator.storage.persist&&await navigator.storage.persist()&&me.success("Storage permission allowed")}catch(I){console.log(I),me.error("There was an error with setting up persistent storage")}x()},x=()=>{localStorage.setItem(Ae+"_Visited",JSON.stringify(!0)),r(!0)},T=M.exports.useCallback(async()=>{await Ks(1e3);const I=localStorage.getItem(Ae+"_Visited");if(o)return;const R=localStorage.getItem(Ae+"_Version");if(!I)return localStorage.setItem(Ae+"_Version",ks);if(ks!==R&&(me.log("Update V"+ks+`
`+mM,6e3),localStorage.setItem(Ae+"_Version",ks)),s(!0),!!I&&navigator.storage&&navigator.storage.persist){let S=await navigator.storage.persisted();S||(S=await navigator.storage.persist()),console.log(S?"Storage Persisted":"Storage Not persisted")}},[o]);return M.exports.useEffect(()=>(window.addEventListener("resize",g),window.addEventListener("blur",b),T(),()=>{window.removeEventListener("resize",g),window.removeEventListener("blur",b)}),[T,g,b]),M.exports.useEffect(()=>(Cn.UIEvent("version",{version:ks}),Cn.pageView(e.location.pathname.replace("/","")),e.listen(I=>{Cn.pageView({page_title:I.pathName}),E4.addPage(I.pathName)})),[e]),k(je,{children:[v(PX,{}),v(CX,{hasVisited:t,closeWelcomeScreen:x,setDontShowHome:y,askForStorage:w}),v(fW,{}),n!=="running"&&v(tu,{className:"resume-audio-context box-shadow",size:"3rem",onClick:()=>{i("running"),Un.tick()},children:v(fy,{style:{width:"1.4rem",height:"1.4rem"}})}),k("div",{className:"rotate-screen",children:[u&&k(je,{children:[v("img",{src:RX,alt:"icon for the rotating screen"}),v("p",{children:"For a better experience, add the website to the home screen, and rotate your device"})]}),!u&&k(je,{children:[v(eM,{}),v("p",{children:"Please increase your window size"})]})]})]})}const FW=Th(UW);function MW({style:e}){return v("svg",{viewBox:"0 0 63.87 63.87",style:e,className:"svg-note",xmlns:"http://www.w3.org/2000/svg",children:v("path",{d:"M 31.939164,9.4384766 A 22.500162,22.500162 0 0 0 9.4384767,31.939165 22.500162,22.500162 0 0 0 31.939164,54.438477 22.500162,22.500162 0 0 0 54.438476,31.939165 22.500162,22.500162 0 0 0 31.939164,9.4384766 Z m 0,2.5303484 A 19.969496,19.969496 0 0 1 51.908129,31.939165 19.969496,19.969496 0 0 1 31.939164,51.90813 19.969496,19.969496 0 0 1 11.968824,31.939165 19.969496,19.969496 0 0 1 31.939164,11.968825 Z"})})}function BW({style:e}){return v("svg",{style:e,version:"0.0",viewBox:"0 0 63.97 63.87",className:"svg-note",xmlns:"http://www.w3.org/2000/svg",children:v("path",{d:"M 30.878793,1.0626133 1.0626133,30.878793 a 1.4999541,1.4999541 89.999124 0 0 3.24e-5,2.121288 L 30.87876,62.814372 a 1.5000459,1.5000459 179.99912 0 0 2.121353,-3.2e-5 L 62.81434,33.000113 a 1.5000459,1.5000459 90.000876 0 0 3.2e-5,-2.121353 L 33.000081,1.0626457 a 1.4999541,1.4999541 8.7588976e-4 0 0 -2.121288,-3.24e-5 z m 2.121284,3.400427 26.413908,26.4157167 a 1.5000513,1.5000513 90.00098 0 1 -3.6e-5,2.121356 L 33.000113,59.413949 a 1.5000513,1.5000513 179.99902 0 1 -2.121356,3.6e-5 L 4.4630403,33.000077 A 1.4999487,1.4999487 89.99902 0 1 4.463004,30.878793 L 30.878793,4.463004 a 1.4999487,1.4999487 9.804247e-4 0 1 2.121284,3.63e-5 z"})})}function DW({style:e}){return k("svg",{style:e,className:"svg-note",viewBox:"0 0 63.87 63.87",xmlns:"http://www.w3.org/2000/svg",children:[v("path",{d:"M 31.939164,9.4384766 A 22.500162,22.500162 0 0 0 9.4384767,31.939165 22.500162,22.500162 0 0 0 31.939164,54.438477 22.500162,22.500162 0 0 0 54.438476,31.939165 22.500162,22.500162 0 0 0 31.939164,9.4384766 Z m 0,2.5303484 A 19.969496,19.969496 0 0 1 51.908129,31.939165 19.969496,19.969496 0 0 1 31.939164,51.90813 19.969496,19.969496 0 0 1 11.968824,31.939165 19.969496,19.969496 0 0 1 31.939164,11.968825 Z"}),v("path",{d:"M 30.878793,1.0626133 1.0626133,30.878793 a 1.4999541,1.4999541 89.999124 0 0 3.24e-5,2.121288 L 30.87876,62.814372 a 1.5000459,1.5000459 179.99912 0 0 2.121353,-3.2e-5 L 62.81434,33.000113 a 1.5000459,1.5000459 90.000876 0 0 3.2e-5,-2.121353 L 33.000081,1.0626457 a 1.4999541,1.4999541 8.7588976e-4 0 0 -2.121288,-3.24e-5 z m 2.121284,3.400427 26.413908,26.4157167 a 1.5000513,1.5000513 90.00098 0 1 -3.6e-5,2.121356 L 33.000113,59.413949 a 1.5000513,1.5000513 179.99902 0 1 -2.121356,3.6e-5 L 4.4630403,33.000077 A 1.4999487,1.4999487 89.99902 0 1 4.463004,30.878793 L 30.878793,4.463004 a 1.4999487,1.4999487 9.804247e-4 0 1 2.121284,3.63e-5 z"})]})}function GW({style:e}){return v("svg",{style:e,className:"svg-note",viewBox:"0 0 311.9 311.9",xmlns:"http://www.w3.org/2000/svg",children:v("path",{style:{strokeWidth:6},d:"m 226.69,150.93 h -10.17 c -4.19354,-29.95167 -30.35627,-51.882064 -60.58,-50.78 -30.22373,-1.102064 -56.386455,20.82833 -60.58,50.78 l -10.504617,0.0243 c -3.891382,0.0264 -6.394603,2.88715 -6.411077,4.78546 0.02751,3.7114 3.034299,5.28795 6.745694,5.26023 h 10.17 c 4.193545,29.95167 30.35627,51.88206 60.58,50.78 30.22373,1.10206 56.38646,-20.82833 60.58,-50.78 l 10.32017,0.0243 c 4.15875,-0.0993 6.61336,-2.81424 6.62983,-4.71255 -0.0164,-3.72003 -3.0602,-5.42621 -6.78,-5.38176 z M 113.36,120.82 c 13.67,-16.56 43.82,-14.22 67.33,5.2 8.33131,6.76474 15.04502,15.30636 19.65,25 H 108 c -3.14876,-10.34257 -1.15212,-21.56762 5.37,-30.19 z m 85.16,70.34 c -13.67,16.55 -43.82,14.22 -67.34,-5.2 -8.32624,-6.76973 -15.03898,-15.3101 -19.65,-25 h 92.36 c 3.12094,10.31692 1.12951,21.50388 -5.36,30.11 z"})})}function jW({style:e}){return v("svg",{style:e,className:"svg-note",viewBox:"0 0 311.9 311.9",xmlns:"http://www.w3.org/2000/svg",children:v("path",{style:{strokeWidth:6},d:"m 226.7,202.2 h -37.58 c 16.84847,-9.59024 27.369,-27.3755 27.66,-46.76 0,-30.82 -27.24,-55.81 -60.83,-55.81 -33.59,0 -60.83,25 -60.83,55.81 0.290998,19.3845 10.81153,37.16976 27.66,46.76 l -37.720165,0.0972 c -4.162017,-0.20555 -6.686251,2.56369 -6.702754,4.46517 0.03294,3.70275 3.140296,5.53203 6.842919,5.4876 l 141.786,0.0243 c 3.91733,-0.27504 6.4675,-2.65252 6.484,-4.55241 -0.0196,-2.84891 -3.0702,-5.54969 -6.77,-5.5219 z M 113.37,120.28 c 13.67,-16.56 43.81,-14.23 67.34,5.19 23.53,19.42 31.49,48.59 17.82,65.14 -13.67,16.55 -43.82,14.23 -67.34,-5.2 -23.52,-19.43 -31.5,-48.58 -17.82,-65.13 z"})})}function $W({style:e,background:t}){return k("svg",{style:e,className:"svg-note",viewBox:"0 0 311.9 311.9",xmlns:"http://www.w3.org/2000/svg",children:[v("path",{fillRule:"evenodd",className:"svg-b",d:"M10.6585 31.4143C14.0665 31.4143 16.8292 34.177 16.8292 37.585V113.54C16.8292 114.368 17.8162 114.816 18.4912 114.337C62.4503 83.1278 100.485 146.958 6.00837 199.981C5.34458 200.354 4.48779 199.895 4.48779 199.134V37.585C4.48779 34.177 7.2505 31.4143 10.6585 31.4143V31.4143ZM17.3901 131.108C17.3901 130.85 17.4993 130.592 17.6794 130.407C43.1371 104.333 68.853 142.392 18.9059 171.355C18.2453 171.738 17.3901 171.277 17.3901 170.513V131.108Z",style:{strokeWidth:24,paintOrder:"stroke",stroke:t}}),v("path",{style:{strokeWidth:6},d:"m 226.7,202.2 h -37.58 c 16.84847,-9.59024 27.369,-27.3755 27.66,-46.76 0,-30.82 -27.24,-55.81 -60.83,-55.81 -33.59,0 -60.83,25 -60.83,55.81 0.290998,19.3845 10.81153,37.16976 27.66,46.76 l -37.720165,0.0972 c -4.162017,-0.20555 -6.686251,2.56369 -6.702754,4.46517 0.03294,3.70275 3.140296,5.53203 6.842919,5.4876 l 141.786,0.0243 c 3.91733,-0.27504 6.4675,-2.65252 6.484,-4.55241 -0.0196,-2.84891 -3.0702,-5.54969 -6.77,-5.5219 z M 113.37,120.28 c 13.67,-16.56 43.81,-14.23 67.34,5.19 23.53,19.42 31.49,48.59 17.82,65.14 -13.67,16.55 -43.82,14.23 -67.34,-5.2 -23.52,-19.43 -31.5,-48.58 -17.82,-65.13 z"})]})}function HW({style:e}){return v("svg",{style:e,className:"svg-note",viewBox:"0 0 311.9 311.9",xmlns:"http://www.w3.org/2000/svg",children:v("path",{style:{strokeWidth:6},d:"m 226.7,202.2 h -37.6 c 15.25395,-8.75987 25.42508,-24.2598 27.39,-41.74 l 10.35017,-0.0729 c 1.89602,0.0167 6.63216,-1.21235 6.60552,-4.44518 -0.0439,-3.69964 -3.04589,-5.54969 -6.74569,-5.5219 H 216.49 C 212.29646,120.46833 186.13373,98.537936 155.91,99.64 125.69003,98.543179 99.533183,120.47226 95.34,150.42 l -10.674762,0.12153 c -3.599144,0.0805 -6.247808,2.71775 -6.275238,4.61532 0.03846,3.70592 3.074088,5.34201 6.78,5.30315 h 10.18 c 1.965558,17.4827 12.14108,32.98366 27.4,41.74 l -38.187681,0.19445 c -4.333822,0.11041 -6.228962,2.53779 -6.250932,4.44087 0.03846,3.70039 3.118224,5.45354 6.818613,5.41468 h 142.24491 c 3.87036,-0.12918 6.05881,-2.89397 6.08078,-4.79547 -0.0439,-3.70357 -3.052,-5.28786 -6.75569,-5.25453 z M 113.37,120.28 c 13.67,-16.56 43.81,-14.23 67.34,5.19 8.32039,6.75538 15.03271,15.27815 19.65,24.95 H 108 c -3.13335,-10.32731 -1.13732,-21.53036 5.37,-30.14 z m 38.86,40.19 h 51.67 c 3.108,10.32332 1.10174,21.51011 -5.4,30.11 -13.67,16.56 -43.82,14.22 -67.33,-5.2 -8.32907,-6.74932 -15.04585,-15.27341 -19.66,-24.95 z"})})}function zW({style:e,background:t}){return k("svg",{style:e,className:"svg-note",viewBox:"0 0 311.9 311.9",xmlns:"http://www.w3.org/2000/svg",children:[v("path",{fillRule:"evenodd",className:"svg-b",d:"M10.6585 31.4143C14.0665 31.4143 16.8292 34.177 16.8292 37.585V113.54C16.8292 114.368 17.8162 114.816 18.4912 114.337C62.4503 83.1278 100.485 146.958 6.00837 199.981C5.34458 200.354 4.48779 199.895 4.48779 199.134V37.585C4.48779 34.177 7.2505 31.4143 10.6585 31.4143V31.4143ZM17.3901 131.108C17.3901 130.85 17.4993 130.592 17.6794 130.407C43.1371 104.333 68.853 142.392 18.9059 171.355C18.2453 171.738 17.3901 171.277 17.3901 170.513V131.108Z",style:{strokeWidth:24,paintOrder:"stroke",stroke:t}}),v("path",{style:{strokeWidth:6},d:"m 226.7,202.2 h -37.6 c 15.25395,-8.75987 25.42508,-24.2598 27.39,-41.74 l 10.35017,-0.0729 c 1.89602,0.0167 6.63216,-1.21235 6.60552,-4.44518 -0.0439,-3.69964 -3.04589,-5.54969 -6.74569,-5.5219 H 216.49 C 212.29646,120.46833 186.13373,98.537936 155.91,99.64 125.69003,98.543179 99.533183,120.47226 95.34,150.42 l -10.674762,0.12153 c -3.599144,0.0805 -6.247808,2.71775 -6.275238,4.61532 0.03846,3.70592 3.074088,5.34201 6.78,5.30315 h 10.18 c 1.965558,17.4827 12.14108,32.98366 27.4,41.74 l -38.187681,0.19445 c -4.333822,0.11041 -6.228962,2.53779 -6.250932,4.44087 0.03846,3.70039 3.118224,5.45354 6.818613,5.41468 h 142.24491 c 3.87036,-0.12918 6.05881,-2.89397 6.08078,-4.79547 -0.0439,-3.70357 -3.052,-5.28786 -6.75569,-5.25453 z M 113.37,120.28 c 13.67,-16.56 43.81,-14.23 67.34,5.19 8.32039,6.75538 15.03271,15.27815 19.65,24.95 H 108 c -3.13335,-10.32731 -1.13732,-21.53036 5.37,-30.14 z m 38.86,40.19 h 51.67 c 3.108,10.32332 1.10174,21.51011 -5.4,30.11 -13.67,16.56 -43.82,14.22 -67.33,-5.2 -8.32907,-6.74932 -15.04585,-15.27341 -19.66,-24.95 z"})]})}function VW({style:e}){return v("svg",{style:e,className:"svg-note",viewBox:"0 0 311.9 311.9",xmlns:"http://www.w3.org/2000/svg",children:v("path",{style:{strokeWidth:6},d:"m 226.7,202.72 h -37.58 c 16.8363,-9.58302 27.35494,-27.34986 27.66,-46.72 -0.29956,-19.38469 -10.81729,-37.16901 -27.66,-46.77 l 37.83786,-0.0688 c 4.7358,-0.13246 6.4658,-2.47976 6.48777,-4.37967 -0.033,-3.70432 -3.03137,-5.63043 -6.73563,-5.59158 L 85.181367,99.165694 c -4.426124,-0.04652 -6.759199,2.911456 -6.775673,4.809776 0.03299,3.70037 3.083938,5.28782 6.784306,5.25453 h 37.59 c -16.84564,9.59801 -27.364464,27.38418 -27.66,46.77 0.290998,19.3845 10.81153,37.16976 27.66,46.76 l -38.011842,0.0972 c -3.554356,-0.10833 -6.321655,2.78245 -6.338158,4.68393 0.03294,3.70274 3.067377,5.31327 6.77,5.26884 l 141.77505,-0.0344 c 3.58424,-0.0865 6.47845,-2.6101 6.49495,-4.50999 -0.0564,-2.82157 -2.33286,-5.57335 -6.77,-5.54564 z M 113.37,120.8 c 13.63,-16.56 43.81,-14.23 67.33,5.2 23.52,19.43 31.49,48.59 17.82,65.14 -13.67,16.55 -43.81,14.23 -67.34,-5.19 -23.53,-19.42 -31.49,-48.6 -17.81,-65.16 z"})})}function XW({style:e}){return v("svg",{style:e,className:"svg-note",viewBox:"0 0 311.9 311.9",xmlns:"http://www.w3.org/2000/svg",children:v("path",{style:{strokeWidth:6},d:"m 216.53,161 10.35878,0.0486 c 4.67084,-0.24517 6.56926,-2.73971 6.59122,-4.63962 -0.0439,-3.69964 -3.67786,-5.5497 -6.77,-5.44899 h -10.18 c -1.97243,-17.48294 -12.15066,-32.98236 -27.41,-41.74 l 38.15768,-0.31598 c 3.79745,-0.0319 6.13174,-2.38354 6.15371,-4.28503 -0.0385,-3.70039 -3.021,-5.477853 -6.72139,-5.43899 L 84.88969,99.2043 c -3.478174,-0.04652 -6.443216,3.0816 -6.45969,4.97991 0.0573,3.0441 3.399922,5.02046 6.76,5.03578 h 37.59 c -15.25934,8.75764 -25.437568,24.25706 -27.41,41.74 l -10.334472,0.12153 c -3.988607,0.0264 -6.61336,2.57117 -6.629834,4.46948 0.02744,3.70668 3.087806,5.49343 6.794306,5.449 h 10.18 c 1.965558,17.4827 12.14108,32.98366 27.4,41.74 l -38.211987,0.0729 c -4.747032,0.0375 -6.156043,2.9753 -6.178013,4.87839 0.03844,3.02376 3.075723,5.14312 6.78,5.09869 l 141.96184,-0.0243 c 4.25762,-0.12924 6.29735,-2.9928 6.31385,-4.89269 0.029,-2.84892 -3.04589,-5.1608 -6.74569,-5.13301 h -37.58 c 15.26162,-8.75522 25.44069,-24.25593 27.41,-41.74 z M 113.37,120.8 c 13.68,-16.55 43.82,-14.22 67.34,5.2 8.33204,6.76652 15.04868,15.30751 19.66,25 H 108 c -3.13175,-10.33064 -1.13598,-21.53593 5.37,-30.15 z m 17.83,65.14 C 122.87571,179.18998 116.15972,170.6703 111.54,161 h 92.36 c 3.108,10.32332 1.10174,21.51011 -5.4,30.11 -13.64,16.6 -43.79,14.28 -67.31,-5.15 z"})})}function WW({style:e}){return k("svg",{style:e,className:"svg-note",viewBox:"0 0 311.9 311.9",xmlns:"http://www.w3.org/2000/svg",children:[v("path",{style:{strokeWidth:6},d:"m 226.7,190.83 h -37.58 c 17.06075,-9.37792 27.66156,-27.3017 27.66156,-46.77 0,-19.4683 -10.60081,-37.39208 -27.66156,-46.77 l 38.16442,-0.103123 c 4.26786,0.01666 6.09486,-2.741511 6.11683,-4.637481 C 233.39173,89.915363 230.3998,87.22221 226.7,87.25 l -141.713085,0.07292 c -3.964301,0.0021 -6.540441,2.838539 -6.556915,4.736853 -0.04545,3.167971 3.05739,5.269074 6.76,5.230228 h 37.59 c -17.06075,9.37792 -27.661558,27.3017 -27.661558,46.77 0,19.4683 10.600808,37.39208 27.661558,46.77 l -38.032545,0.0687 c -3.964604,0.25279 -6.346493,2.47025 -6.357455,4.37248 0.04394,3.69964 3.070203,5.63656 6.77,5.60877 l 142.06907,-0.0486 c 3.82173,0.0111 6.22443,-2.53939 6.24093,-4.44087 -0.0385,-3.70039 -3.06961,-5.59938 -6.77,-5.56052 z M 113.37,108.9 c 13.67,-16.56 43.81,-14.23 67.34,5.19 23.53,19.42 31.49,48.59 17.82,65.14 -13.67,16.55 -43.82,14.23 -67.33,-5.23 -23.51,-19.46 -31.51,-48.55 -17.83,-65.1 z"}),v("path",{style:{strokeWidth:6},d:"m 226.7,224.61 -142.95,0.05 c -3.046024,-0.16666 -5.248026,3.05403 -5.27,4.95 0.02747,3.70271 3.00739,5.07885 6.71,5.04 l 141.41589,-0.0354 c 4.22947,0.0167 6.84214,-2.60004 6.86411,-4.49601 -0.0439,-3.69964 -3.0702,-5.53642 -6.77,-5.50863 z"})]})}function YW({style:e,background:t}){return k("svg",{style:e,className:"svg-note",viewBox:"0 0 311.9 311.9",xmlns:"http://www.w3.org/2000/svg",children:[v("path",{fillRule:"evenodd",className:"svg-b",d:"M10.6585 31.4143C14.0665 31.4143 16.8292 34.177 16.8292 37.585V113.54C16.8292 114.368 17.8162 114.816 18.4912 114.337C62.4503 83.1278 100.485 146.958 6.00837 199.981C5.34458 200.354 4.48779 199.895 4.48779 199.134V37.585C4.48779 34.177 7.2505 31.4143 10.6585 31.4143V31.4143ZM17.3901 131.108C17.3901 130.85 17.4993 130.592 17.6794 130.407C43.1371 104.333 68.853 142.392 18.9059 171.355C18.2453 171.738 17.3901 171.277 17.3901 170.513V131.108Z",style:{strokeWidth:24,paintOrder:"stroke",stroke:t}}),v("path",{style:{strokeWidth:6},d:"m 226.7,190.83 h -37.58 c 17.06075,-9.37792 27.66156,-27.3017 27.66156,-46.77 0,-19.4683 -10.60081,-37.39208 -27.66156,-46.77 l 38.16442,-0.103123 c 4.26786,0.01666 6.09486,-2.741511 6.11683,-4.637481 C 233.39173,89.915363 230.3998,87.22221 226.7,87.25 l -141.713085,0.07292 c -3.964301,0.0021 -6.540441,2.838539 -6.556915,4.736853 -0.04545,3.167971 3.05739,5.269074 6.76,5.230228 h 37.59 c -17.06075,9.37792 -27.661558,27.3017 -27.661558,46.77 0,19.4683 10.600808,37.39208 27.661558,46.77 l -38.032545,0.0687 c -3.964604,0.25279 -6.346493,2.47025 -6.357455,4.37248 0.04394,3.69964 3.070203,5.63656 6.77,5.60877 l 142.06907,-0.0486 c 3.82173,0.0111 6.22443,-2.53939 6.24093,-4.44087 -0.0385,-3.70039 -3.06961,-5.59938 -6.77,-5.56052 z M 113.37,108.9 c 13.67,-16.56 43.81,-14.23 67.34,5.19 23.53,19.42 31.49,48.59 17.82,65.14 -13.67,16.55 -43.82,14.23 -67.33,-5.23 -23.51,-19.46 -31.51,-48.55 -17.83,-65.1 z"}),v("path",{style:{strokeWidth:6},d:"m 226.7,224.61 -142.95,0.05 c -3.046024,-0.16666 -5.248026,3.05403 -5.27,4.95 0.02747,3.70271 3.00739,5.07885 6.71,5.04 l 141.41589,-0.0354 c 4.22947,0.0167 6.84214,-2.60004 6.86411,-4.49601 -0.0439,-3.69964 -3.0702,-5.53642 -6.77,-5.50863 z"})]})}function KW({style:e}){return k("svg",{style:e,className:"svg-note",viewBox:"0 0 311.9 311.9",xmlns:"http://www.w3.org/2000/svg",children:[v("path",{style:{strokeWidth:6},d:"m 216.53,149.37 10.64555,-0.0504 c 4.5708,-0.11496 6.27248,-2.88856 6.29445,-4.78612 -0.0385,-3.7004 -3.06961,-5.2423 -6.77,-5.20344 h -10.18 c -1.9694,-17.48661 -12.14801,-32.99034 -27.41,-41.75 h 38.28652 c 4.5374,-0.405759 6.02134,-3.035241 6.03782,-4.933555 C 233.39039,88.946804 230.3998,87.51221 226.7,87.54 L 84.646133,87.664824 c -4.647718,0.108052 -6.227366,2.727071 -6.216133,4.646528 0.03297,3.698792 3.061265,5.357498 6.76,5.318648 h 37.59 c -15.25929,8.76078 -25.434357,24.26476 -27.4,41.75 H 84.825323 c -4.319212,0.20475 -6.346244,2.57869 -6.362718,4.477 0.03297,3.70432 3.033137,5.60185 6.737395,5.563 h 10.16 c 1.968677,17.48157 12.14335,32.98124 27.4,41.74 l -38.009042,0.0357 c -4.128894,0.42916 -6.288797,2.75836 -6.305294,4.65825 0.04394,3.69964 3.034539,5.38388 6.734336,5.35609 l 141.5164,0.0252 c 5.50611,-0.18511 6.7571,-3.02321 6.7736,-4.9231 -0.0439,-3.69964 -3.0702,-5.17991 -6.77,-5.15212 h -37.58 c 15.27484,-8.76535 25.45587,-24.28761 27.41,-41.79 z M 108,139.33 c -3.06159,-10.26129 -1.05653,-21.36713 5.4,-29.91 13.67,-16.56 43.82,-14.23 67.33,5.19 8.25742,6.69841 14.93601,15.13543 19.56,24.71 H 108 Z m 23.25,35.23 c -8.38883,-6.80804 -15.14164,-15.41309 -19.76,-25.18 h 92.41 c 3.21387,10.3884 1.23814,21.68843 -5.31,30.37 -13.68,16.54 -43.83,14.22 -67.35,-5.18 z"}),v("path",{style:{strokeWidth:6},d:"m 226.7,224.32 -141.217602,0.0126 c -3.919227,-0.0677 -6.908324,2.57912 -6.924821,4.47901 0.03297,3.70432 2.128938,5.51633 6.642423,5.55843 h 141.54684 c 4.29339,-0.26627 6.54988,-2.72292 6.57185,-4.62048 -0.0439,-3.69964 -2.61627,-4.87729 -6.61869,-5.42952 z"})]})}function qW({style:e,background:t}){return k("svg",{style:e,className:"svg-note",viewBox:"0 0 311.9 311.9",xmlns:"http://www.w3.org/2000/svg",children:[v("path",{fillRule:"evenodd",className:"svg-b",d:"M10.6585 31.4143C14.0665 31.4143 16.8292 34.177 16.8292 37.585V113.54C16.8292 114.368 17.8162 114.816 18.4912 114.337C62.4503 83.1278 100.485 146.958 6.00837 199.981C5.34458 200.354 4.48779 199.895 4.48779 199.134V37.585C4.48779 34.177 7.2505 31.4143 10.6585 31.4143V31.4143ZM17.3901 131.108C17.3901 130.85 17.4993 130.592 17.6794 130.407C43.1371 104.333 68.853 142.392 18.9059 171.355C18.2453 171.738 17.3901 171.277 17.3901 170.513V131.108Z",style:{strokeWidth:24,paintOrder:"stroke",stroke:t}}),v("path",{style:{strokeWidth:6},d:"m 216.53,149.37 10.64555,-0.0504 c 4.5708,-0.11496 6.27248,-2.88856 6.29445,-4.78612 -0.0385,-3.7004 -3.06961,-5.2423 -6.77,-5.20344 h -10.18 c -1.9694,-17.48661 -12.14801,-32.99034 -27.41,-41.75 h 38.28652 c 4.5374,-0.405759 6.02134,-3.035241 6.03782,-4.933555 C 233.39039,88.946804 230.3998,87.51221 226.7,87.54 L 84.646133,87.664824 c -4.647718,0.108052 -6.227366,2.727071 -6.216133,4.646528 0.03297,3.698792 3.061265,5.357498 6.76,5.318648 h 37.59 c -15.25929,8.76078 -25.434357,24.26476 -27.4,41.75 H 84.825323 c -4.319212,0.20475 -6.346244,2.57869 -6.362718,4.477 0.03297,3.70432 3.033137,5.60185 6.737395,5.563 h 10.16 c 1.968677,17.48157 12.14335,32.98124 27.4,41.74 l -38.009042,0.0357 c -4.128894,0.42916 -6.288797,2.75836 -6.305294,4.65825 0.04394,3.69964 3.034539,5.38388 6.734336,5.35609 l 141.5164,0.0252 c 5.50611,-0.18511 6.7571,-3.02321 6.7736,-4.9231 -0.0439,-3.69964 -3.0702,-5.17991 -6.77,-5.15212 h -37.58 c 15.27484,-8.76535 25.45587,-24.28761 27.41,-41.79 z M 108,139.33 c -3.06159,-10.26129 -1.05653,-21.36713 5.4,-29.91 13.67,-16.56 43.82,-14.23 67.33,5.19 8.25742,6.69841 14.93601,15.13543 19.56,24.71 H 108 Z m 23.25,35.23 c -8.38883,-6.80804 -15.14164,-15.41309 -19.76,-25.18 h 92.41 c 3.21387,10.3884 1.23814,21.68843 -5.31,30.37 -13.68,16.54 -43.83,14.22 -67.35,-5.18 z"}),v("path",{style:{strokeWidth:6},d:"m 226.7,224.32 -141.217602,0.0126 c -3.919227,-0.0677 -6.908324,2.57912 -6.924821,4.47901 0.03297,3.70432 2.128938,5.51633 6.642423,5.55843 h 141.54684 c 4.29339,-0.26627 6.54988,-2.72292 6.57185,-4.62048 -0.0439,-3.69964 -2.61627,-4.87729 -6.61869,-5.42952 z"})]})}const ZW={cr:MW,dm:BW,dmcr:DW,do:GW,re:jW,reb:$W,mi:HW,mib:zW,fa:VW,so:XW,la:WW,lab:YW,ti:KW,tib:qW};function JW({name:e,color:t="currentColor",background:r}){const n=ZW[e];return n?v(n,{style:{fill:t,stroke:t},background:r}):v(je,{})}const Wy=M.exports.memo(JW,(e,t)=>e.color===t.color&&e.background===t.background&&e.name===t.name);function s5(){return Se.get("note_background").isDark()?vt.text.light:vt.text.dark}function QW({note:e,approachingNotes:t,handleClick:r,noteText:n,data:i}){var p,m;const[o,s]=M.exports.useState(s5());M.exports.useEffect(()=>Hn(Se.state.data,()=>{s(s5())}),[]);const a=as(e.data),{approachRate:l,instrument:u}=i,c={transition:`background-color ${a.delay}ms  ${a.delay===200?"ease":"linear"} , transform 0.15s, border-color 100ms`},f=(p=tl[u])==null?void 0:p.clickColor;return k("button",{onPointerDown:g=>{g.preventDefault(),r(e)},className:"button-hitbox-bigger",children:[t.map(g=>v(rY,{index:g.index,approachRate:l},g.id)),a.animationId!==0&&v("div",{style:f&&Se.isDefault("accent")?{borderColor:f}:{},className:Gs.noteAnimation},a.animationId),k("div",{className:`${Gs.note} ${nY(e.status)}`,style:{...c,...f&&a.status==="clicked"&&Se.isDefault("accent")?{backgroundColor:f}:{}},children:[Ae==="Genshin",v(Wy,{name:e.noteImage,color:Se.isDefault("accent")?(m=tl[u])==null?void 0:m.fill:void 0,background:a.status==="clicked"?f&&Se.isDefault("accent")?f:"var(--accent)":"var(--note-background)"}),v("div",{className:Gs.noteName,style:{color:o},children:n})]})]})}const eY=M.exports.memo(QW,(e,t)=>e.note===t.note&&e.data.approachRate===t.data.approachRate&&e.data.instrument===t.data.instrument&&e.handleClick===t.handleClick&&e.noteText===t.noteText&&e.approachingNotes===t.approachingNotes);function tY(e){const r=Math.floor(e/5);return r===0?"var(--accent)":r===1?Se.get("accent").rotate(180).hex():(r===2,"var(--accent)")}const rY=M.exports.memo(function({approachRate:t,index:r}){return v("div",{className:Gs.approachCircle,style:{animation:`approach ${t}ms linear`,borderColor:tY(r)}})},(e,t)=>e.approachRate===t.approachRate&&e.index===t.index);function nY(e){switch(e){case"clicked":return"click-event";case"toClick":return"note-red";case"toClickNext":return"note-border-click";case"toClickAndNext":return"note-red note-border-click";case"approach-wrong":return"click-event approach-wrong";case"approach-correct":return"click-event approach-correct";default:return""}}var iY=Object.defineProperty,oY=Object.getOwnPropertyDescriptor,Ou=(e,t,r,n)=>{for(var i=n>1?void 0:n?oY(t,r):t,o=e.length-1,s;o>=0;o--)(s=e[o])&&(i=(n?s(t,r,i):s(i))||i);return n&&i&&iY(t,r,i),i};class gl{constructor(){this.state={song:null,playId:0,eventType:"stop",start:0,end:0},this.keyboard=[],this.setKeyboardLayout=t=>{this.keyboard.splice(0,this.keyboard.length,...t)},this.resetKeyboardLayout=()=>{this.keyboard.forEach(t=>t.setState({status:"",delay:200}))},this.resetOutgoingAnimation=()=>{this.keyboard.forEach(t=>t.setState({animationId:0}))},this.setNoteState=(t,r)=>{this.keyboard[t].setState(r)},this.setState=t=>{Object.assign(this.state,t)},this.play=(t,r=0,n)=>{this.setState({song:t,start:r,eventType:"play",end:n,playId:this.state.playId+1})},this.practice=(t,r=0,n)=>{this.setState({song:t,start:r,eventType:"practice",end:n,playId:this.state.playId+1})},this.approaching=(t,r=0,n)=>{this.setState({song:t,start:r,eventType:"approaching",end:n,playId:this.state.playId+1})},this.resetSong=()=>{this.setState({song:null,eventType:"stop",start:0,end:0,playId:0})},this.restartSong=(t,r)=>{this.setState({start:t,end:r,playId:this.state.playId+1})},Li(this)}get song(){return this.state.song}get eventType(){return this.state.eventType}get start(){return this.state.start}}Ou([yt],gl.prototype,"state",2);Ou([yt],gl.prototype,"keyboard",2);Ou([_o],gl.prototype,"setKeyboardLayout",2);Ou([_o],gl.prototype,"resetKeyboardLayout",2);Ou([_o],gl.prototype,"resetOutgoingAnimation",2);Ou([_o],gl.prototype,"setNoteState",2);Ou([_o],gl.prototype,"setState",2);const wt=new gl;var sY=Object.defineProperty,aY=Object.getOwnPropertyDescriptor,A4=(e,t,r,n)=>{for(var i=n>1?void 0:n?aY(t,r):t,o=e.length-1,s;o>=0;o--)(s=e[o])&&(i=(n?s(t,r,i):s(i))||i);return n&&i&&sY(t,r,i),i};class Yy{constructor(){this.state={position:0,current:0,size:0,end:0},this.pagesState={pages:[],currentPageIndex:0,currentChunkIndex:0,currentPage:[]},this.score={correct:1,wrong:1,score:0,combo:0},this.setSong=t=>{this.setState({size:t.notes.length,position:0,current:0}),this.setPages([])},this.resetScore=()=>{this.setScoreState({correct:1,wrong:1,score:0,combo:0})},this.increaseScore=(t,r)=>{const{score:n}=this;t?this.setScoreState({correct:n.correct+1,combo:n.combo+1,score:n.score+n.combo*(r!=null?r:1)}):this.setScoreState({wrong:n.wrong+1,combo:0})},this.setPages=t=>{var n;const r=t.map(i=>i.map(o=>o.clone()));this.setPagesState({pages:r,currentPageIndex:0,currentChunkIndex:0,currentPage:(n=r[0])!=null?n:[]})},this.clearPages=()=>{this.setPagesState({pages:[],currentPageIndex:0,currentChunkIndex:0,currentPage:[]})},this.setState=t=>{Object.assign(this.state,t)},this.setScoreState=t=>{Object.assign(this.score,t)},this.setPagesState=t=>{Object.assign(this.pagesState,t)},this.setPosition=t=>{this.setState({position:t})},this.incrementCurrent=()=>{this.setState({current:this.current+1})},this.incrementChunkPositionAndSetCurrent=t=>{var o,s;const{pages:r,currentPageIndex:n}=this.pagesState;t=t!=null?t:this.current;const i=this.currentChunkIndex+1;if(i>=((s=(o=r[n])==null?void 0:o.length)!=null?s:0)){if(n===r.length-1)return;this.setPagesState({currentPageIndex:n+1,currentChunkIndex:0,currentPage:r[n+1]}),this.setState({current:t})}else this.setPagesState({currentChunkIndex:i}),this.setState({current:t})},this.setCurrent=t=>{this.setState({current:t})},this.setEnd=t=>{this.setState({end:t})},this.setSize=t=>{this.setState({size:t})},Li(this)}get currentChunkIndex(){return this.pagesState.currentChunkIndex}get currentChunk(){return this.pagesState.currentPage[this.pagesState.currentChunkIndex]}get position(){return this.state.position}get current(){return this.state.current}get size(){return this.state.size}get end(){return this.state.end}}A4([yt],Yy.prototype,"state",2);A4([yt],Yy.prototype,"pagesState",2);A4([yt],Yy.prototype,"score",2);const Dt=new Yy;class lY{constructor(){this.listeners=[],this.inputsListeners=[],this.MIDIAccess=null,this.currentMIDISource=null,this.inputs=[],this.create=async()=>{if(this.MIDIAccess)return this.MIDIAccess;if(navigator.requestMIDIAccess)try{const t=await navigator.requestMIDIAccess();return this.handleMIDIState(t),t}catch(t){return console.error(t),null}else return console.log("Midi not available"),null},this.enable=()=>(this.settings.enabled=!0,this.saveSettings(),this.create()),this.destroy=()=>{var t,r;this.listeners=[],this.inputs=[],(t=this.MIDIAccess)==null||t.removeEventListener("statechange",this.reloadMidiAccess),(r=this.currentMIDISource)==null||r.removeEventListener("midimessage",this.handleEvent),this.MIDIAccess=null},this.handleMIDIState=t=>{var o;(o=this.MIDIAccess)==null||o.removeEventListener("statechange",this.reloadMidiAccess),this.MIDIAccess=t,t.addEventListener("statechange",this.reloadMidiAccess);const r=this.MIDIAccess.inputs.values(),n=[];for(let s=r.next();s&&!s.done;s=r.next())n.push(s.value);this.inputs=n;const i=n.find(s=>s.name+" "+s.manufacturer===this.settings.currentSource)||null;this.dispatchInputs(),n.length&&this.selectSource(i||n[0])},this.reloadMidiAccess=()=>{this.MIDIAccess&&this.handleMIDIState(this.MIDIAccess),this.dispatchInputs()},this.dispatchInputs=()=>{this.inputsListeners.forEach(t=>t(this.inputs))},this.selectSource=t=>{var r;this.settings.currentSource=t.name+" "+t.manufacturer,this.saveSettings(),(r=this.currentMIDISource)==null||r.removeEventListener("midimessage",this.handleEvent),this.currentMIDISource=t,this.currentMIDISource.addEventListener("midimessage",this.handleEvent)},this.saveSettings=()=>{fn.updateMIDISettings(this.settings)},this.handleEvent=t=>{const{data:r}=t,n=[r[0],r[1],r[2]];let i;switch(n[0]){case 250:i=250;break;case 251:i=251;break;case 252:i=252;break}this.listeners.forEach(o=>o(n,i))},this.isUp=t=>t>127&&t<144,this.isDown=t=>t>143&&t<160,this.addListener=t=>{this.listeners.push(t)},this.addInputsListener=t=>{this.inputsListeners.push(t)},this.removeInputsListener=t=>{this.inputsListeners=this.inputsListeners.filter(r=>r!==t)},this.removeListener=t=>{this.listeners=this.listeners.filter(r=>r!==t)},this.clear=()=>{this.listeners=[],this.inputsListeners=[]},this.settings=fn.getMIDISettings(),this.settings.enabled&&this.create()}}const gr=new lY;class uY extends M.exports.Component{constructor(t){super(t),this.approachRate=1500,this.approachingNotesList=[],this.nextChunkDelay=0,this.tickTime=50,this.tickInterval=0,this.songTimestamp=0,this.toDispose=[],this.timeouts=[],this.debouncedStateUpdate=0,this.handleMidi=([r,n,i])=>{if(!this.mounted)return;const o=this.props.data.instrument;gr.isDown(r)&&i!==0&&gr.settings.notes.filter(a=>a.midi===n).forEach(a=>{this.handleClick(o.notes[a.index])})},this.handleKeyboard=async({letter:r,shift:n,event:i})=>{if(!i.repeat&&!n){const o=this.props.data.instrument.getNoteFromCode(r);o!==null&&this.handleClick(o)}},this.approachingSong=async(r,n=0,i)=>{i=i||r.notes.length;const{speedChanger:o}=this.props.data,s=[];this.approachRate=this.props.data.approachRate||1500;const a=this.approachRate,l=r.notes[n]!==void 0?r.notes[n].time:0;for(let u=n;u<i&&u<r.notes.length;u++){const c=r.notes[u],f=new nC({time:Math.floor((c.time-l)/o.value+a),index:c.index});s.push(f)}Dt.setSong(r),Dt.clearPages(),Dt.resetScore(),this.setState({approachingNotes:z2.from(15)}),this.approachingNotesList=s},this.tick=()=>{if(!this.props.data.hasSong)return;const{approachingNotes:r}=this.state,{speedChanger:n}=this.props.data,i=r,o=this.approachingNotesList;o.forEach(l=>{l.time-=this.tickTime});let s=!1,a=0;for(let l=0;l<o.length&&o[l].time<this.approachRate;l++){const u=new nC({time:this.approachRate,index:o[l].index,id:Math.floor(Math.random()*1e4)});i[o[l].index].push(u),o.splice(l,1),l--,s=!0}i.forEach(l=>{for(let u=0;u<l.length;u++){const c=l[u];c.time-=this.tickTime,c.clicked&&(c.time<this.approachRate/3?Dt.increaseScore(!0,n.value):Dt.increaseScore(!1),c.time=-1),c.time<0&&(c.clicked||Dt.increaseScore(!1),l.splice(u,1),u--,s=!0,a++)}}),s&&(Dt.setCurrent(Dt.current+a),this.setState({approachingNotes:i.map(l=>l.slice())}))},this.playSong=async(r,n=0,i)=>{var m,g;i=i||r.notes.length,this.songTimestamp=r.timestamp;const{keyboard:o}=this.state,s=this.applySpeedChange(r.notes).slice(n,i),a=Nn.mergeNotesIntoChunks(s.map(b=>b.clone()));Dt.setPages(aC(a,10)),await Ks(200);const l=s[0].time;let u=l,c=0,f=Date.now(),p=0;for(let b=0;b<s.length;b++){const y=s[b].time-u;if(u=s[b].time,y>16&&await Ks(y+c),!this.mounted||this.songTimestamp!==r.timestamp)return;this.handleClick(o[s[b].index],s[b].layer),p>=((g=(m=Dt.currentChunk)==null?void 0:m.notes.length)!=null?g:0)?(p=1,Dt.incrementChunkPositionAndSetCurrent(n+b+1)):(p++,Dt.setCurrent(n+b+1)),c=f+u-l-Date.now()}},this.applySpeedChange=r=>{const{speedChanger:n}=this.props.data;return r.map(i=>(i.time=i.time/n.value,i))},this.practiceSong=(r,n=0,i)=>{i=i||r.notes.length;const{keyboard:o}=this.state,s=this.applySpeedChange(r.notes).slice(n,i),a=Nn.mergeNotesIntoChunks(s.map(c=>c.clone()));if(a.length===0)return;this.nextChunkDelay=0,a[0].notes.forEach(c=>{wt.setNoteState(c.index,{status:"toClick",delay:200})});const u=a[1];u==null||u.notes.forEach(c=>{const f=o[c.index];if(f.status==="toClick")return f.setStatus("toClickAndNext");f.setStatus("toClickNext")}),this.props.functions.setHasSong(!0),Dt.setPages(aC(a,10)),this.setState({songToPractice:a})},this.restartSong=async r=>{await this.stopSong(),this.mounted&&wt.restartSong(typeof r=="number"?r:Dt.position,Dt.end)},this.stopSong=()=>(this.songTimestamp=0,new Promise(r=>{wt.resetKeyboardLayout(),this.approachingNotesList=[],this.setState({songToPractice:[],approachingNotes:z2.from(15)},r),this.props.functions.setHasSong(!1)})),this.stopAndClear=()=>{this.stopSong(),wt.resetSong()},this.handleApproachClick=r=>{const{approachingNotes:n}=this.state,i=n[r.index][0];return i&&(i.clicked=!0,i.time<this.approachRate/3)?"approach-correct":"approach-wrong"},this.handlePracticeClick=r=>{var o;const{keyboard:n,songToPractice:i}=this.state;if(i.length>0){const s=(o=i[0])==null?void 0:o.notes.findIndex(a=>a.index===r.index);if(s!==-1){if(i[0].notes.splice(s,1),i[0].notes.length===0&&(i.shift(),Dt.incrementChunkPositionAndSetCurrent()),i.length>0){const a=i[0],l=i[1];a.notes.forEach(u=>{wt.setNoteState(u.index,{status:"toClick",delay:a.delay})}),l&&(l==null||l.notes.forEach(u=>{const c=n[u.index];if(c.status==="toClick")return c.setStatus("toClickAndNext");c.setStatus("toClickNext")}))}Dt.incrementCurrent(),this.setState({songToPractice:i})}}},this.handleClick=(r,n)=>{const{keyboard:i}=this.state,o=this.props.data.hasAnimation;if(!r)return;const s=i[r.index].status;wt.setNoteState(r.index,{status:"clicked",delay:wt.eventType!=="play"?200:0,animationId:o&&wt.eventType!=="approaching"?Math.floor(Math.random()*1e4)+Date.now():0}),this.handlePracticeClick(r),this.props.functions.playSound(r.index,n);const a=this.handleApproachClick(r);wt.eventType==="approaching"&&(wt.setNoteState(r.index,{status:a}),a==="approach-wrong"&&Dt.increaseScore(!1)),this.timeouts[r.index]>0&&wt.eventType==="play"&&clearTimeout(this.timeouts[r.index]),this.timeouts[r.index]=setTimeout(()=>{if(this.timeouts[r.index]=0,!!["clicked","approach-wrong","approach-correct"].includes(i[r.index].status)){if(s==="toClickNext")return wt.setNoteState(r.index,{status:s});wt.setNoteState(r.index,{status:""})}},200)},this.state={playTimestamp:Date.now(),songToPractice:[],approachingNotes:z2.from(15),keyboard:wt.keyboard},this.mounted=!0}componentDidMount(){const t="keyboard-player";this.tickInterval=setInterval(this.tick,this.tickTime),Xe.registerLetter("S",()=>{this.props.data.hasSong&&this.stopAndClear()},{shift:!0,id:t}),Xe.registerLetter("R",()=>{!this.props.data.hasSong||["practice","play","approaching"].includes(wt.eventType)&&this.restartSong(0)},{shift:!0,id:t}),Xe.listen(this.handleKeyboard,{id:t}),gr.addListener(this.handleMidi),this.toDispose.push(zd(wt.state,async()=>{this.debouncedStateUpdate&&clearTimeout(this.debouncedStateUpdate),this.debouncedStateUpdate=setTimeout(async()=>{var o,s;const r=wt.state,n=wt.song,i=wt.eventType;if(await this.stopSong(),!!this.mounted)if(i==="stop")this.props.functions.setHasSong(!1);else{if(!n)return;const a=n.isComposed?n.toRecordedSong().clone():n.clone();a.timestamp=Date.now();const l=r.end||((o=a==null?void 0:a.notes)==null?void 0:o.length)||0;i==="play"&&this.playSong(a,r.start,l),i==="practice"&&this.practiceSong(a,r.start,l),i==="approaching"&&this.approachingSong(a,r.start,l),this.props.functions.setHasSong(!0),Cn.songEvent({type:i}),Dt.setState({size:((s=a==null?void 0:a.notes)==null?void 0:s.length)||1,position:r.start,end:l,current:r.start})}},4)})),this.toDispose.push(Vk(wt.keyboard,()=>{this.setState({keyboard:wt.keyboard})}))}componentWillUnmount(){gr.removeListener(this.handleMidi),this.toDispose.forEach(t=>t()),Xe.unregisterById("keyboard-player"),this.songTimestamp=0,wt.resetSong(),this.mounted=!1,clearInterval(this.tickInterval)}render(){const{state:t,props:r}=this,{data:n}=r,{instrument:i,noteNameType:o,pitch:s}=n,{keyboard:a}=t,l=ai(n.keyboardSize/100,.5,1.5);let u="keyboard"+(wt.eventType==="play"?" keyboard-playback":"");a.length===15&&(u+=" keyboard-5"),a.length===14&&(u+=" keyboard-5"),a.length===8&&(u+=" keyboard-4"),a.length===6&&(u+=" keyboard-3");const c=l!==1?{transform:`scale(${l})`}:{};return v(je,{children:v("div",{className:u,style:{...c,zIndex:2,marginBottom:`${l*6+n.keyboardYPosition/10}vh`},children:n.isLoading?v("div",{className:"loading",children:"Loading..."}):a.map(f=>v(eY,{note:f,data:{approachRate:this.approachRate,instrument:i.name},approachingNotes:t.approachingNotes[f.index],handleClick:this.handleClick,noteText:i.getNoteText(f.index,o,s)},f.index))})})}}function cY(e){return De({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"g",attr:{},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"}},{tag:"path",attr:{d:"M2 18h10v2H2v-2zm0-7h14v2H2v-2zm0-7h20v2H2V4zm17 11.17V9h5v2h-3v7a3 3 0 1 1-2-2.83z"}}]}]})(e)}const hY=""+new URL("help-composer.e8769a3a.png",import.meta.url).href,fY=""+new URL("help-player.d766aecd.png",import.meta.url).href;function dY(e){return De({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"}},{tag:"path",attr:{d:"M11 18h2v-2h-2v2zm1-16C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8zm0-14c-2.21 0-4 1.79-4 4h2c0-1.1.9-2 2-2s2 .9 2 2c0 2-3 1.75-3 5h2c0-2.25 3-2.5 3-5 0-2.21-1.79-4-4-4z"}}]})(e)}function pY(e){return De({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"}},{tag:"path",attr:{d:"M3 5h2V3c-1.1 0-2 .9-2 2zm0 8h2v-2H3v2zm4 8h2v-2H7v2zM3 9h2V7H3v2zm10-6h-2v2h2V3zm6 0v2h2c0-1.1-.9-2-2-2zM5 21v-2H3c0 1.1.9 2 2 2zm-2-4h2v-2H3v2zM9 3H7v2h2V3zm2 18h2v-2h-2v2zm8-8h2v-2h-2v2zm0 8c1.1 0 2-.9 2-2h-2v2zm0-12h2V7h-2v2zm0 8h2v-2h-2v2zm-4 4h2v-2h-2v2zm0-16h2V3h-2v2zM7 17h10V7H7v10zm2-8h6v6H9V9z"}}]})(e)}function mY(e){return De({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0V0zm24 24H0V0h24v24z"}},{tag:"path",attr:{d:"M23 15h-2v2h2v-2zm0-4h-2v2h2v-2zm0 8h-2v2c1 0 2-1 2-2zM15 3h-2v2h2V3zm8 4h-2v2h2V7zm-2-4v2h2c0-1-1-2-2-2zM3 21h8v-6H1v4c0 1.1.9 2 2 2zM3 7H1v2h2V7zm12 12h-2v2h2v-2zm4-16h-2v2h2V3zm0 16h-2v2h2v-2zM3 3C2 3 1 4 1 5h2V3zm0 8H1v2h2v-2zm8-8H9v2h2V3zM7 3H5v2h2V3z"}}]})(e)}function Lu({children:e,maxWidth:t=20,buttonStyle:r,parentStyle:n,width:i}){const o=M.exports.useRef(null);return k("div",{className:"help-tooltip",style:n,children:[v("button",{ref:o,className:"help-tooltip-button",style:r,"aria-label":"Help",onClick:()=>{var s;return(s=o.current)==null?void 0:s.focus()},children:v(dY,{style:{width:"100%",height:"100%"}})}),v("div",{className:"help-tooltip-content",style:{maxWidth:`${t}rem`,width:i!==void 0?`${i}rem`:"unset"},children:e})]})}function nO(){return k(je,{children:[k("span",{children:["If you are on PC, hover over the buttons to see a tooltip, if you are on mobile, long press the buttons. When clicking the",v(Lu,{parentStyle:{display:"inline-flex"},buttonStyle:{width:"1.2rem",height:"1.2rem",margin:"0 0.4rem"},children:"Example help"}),"it will show you more info."]}),v("span",{children:"The images are from the genshin version of the app, but the functionality is the same"}),v("div",{className:"help-title",children:"Main page"}),k("div",{children:[v("img",{src:fY,className:"help-img",alt:"tutorial for the main page",loading:"lazy"}),k("ol",{children:[v("li",{children:"Record the keyboard as an audio file"}),v("li",{children:"The selection where you want the song to start/end"}),v("li",{children:"Playback speed"}),v("li",{children:"Restart the song from the selected starting point"}),v("li",{children:"Practice tool note, you should press this note"}),v("li",{children:"Practice tool note, this will need to be clicked after all the red ones"}),v("li",{children:"Public Song library"}),v("li",{children:"Your songs"}),v("li",{children:"Open the Page selection menu"})]})]}),!Wn.exports()&&k(je,{children:[v("div",{className:"help-title",children:"Main page shortcuts"}),k("div",{className:"help-margin-left",children:[v("div",{style:{marginBottom:"0.5rem"},children:"The main page has shortcuts for PC users:"}),v("table",{className:"keys-table",children:k("tbody",{children:[k("tr",{children:[v("td",{children:v(br,{children:"Shift + R"})}),v("td",{children:"reload song "})]}),k("tr",{children:[v("td",{children:v(br,{children:"Shift + C"})}),v("td",{children:"Start/Stop recording when there are no songs playing"})]}),k("tr",{children:[v("td",{children:v(br,{children:"Shift + M"})}),v("td",{children:"Open/Close the menu"})]}),k("tr",{children:[v("td",{children:v(br,{children:"Esc"})}),v("td",{children:" Close the menu "})]}),k("tr",{children:[v("td",{children:v(br,{children:"Shift + S"})}),v("td",{children:"stop song "})]})]})})]})]}),v("div",{className:"help-title",children:"Composer"}),k("div",{children:[v("img",{src:hY,className:"help-img",alt:"tutorial for composer",loading:"lazy"}),k("ol",{children:[v("li",{children:"Go to the next / previous breakpoint"}),v("li",{children:"Timeline of the breakpoints"}),v("li",{children:"Open the tools"}),v("li",{children:"Add 16 columns to the end"}),v("li",{children:"Remove the current selected column"}),v("li",{children:"Add column after the current one"}),v("li",{children:"Layer (instrument) selection"}),v("li",{children:"Change column's duration"})]})]}),!Wn.exports()&&k(je,{children:[v("div",{className:"help-title",children:"Composer shortcuts"}),k("div",{className:"help-margin-left",children:[v("div",{style:{marginBottom:"0.5rem"},children:"The composer has shortcuts for PC users:"}),v("table",{children:k("tbody",{children:[k("tr",{children:[v("td",{children:v(br,{children:"A / D"})}),v("td",{children:"move left / right"})]}),k("tr",{children:[v("td",{children:v(br,{children:"1 / 2 / 3 / 4"})}),v("td",{children:"change tempo"})]}),k("tr",{children:[v("td",{children:v(br,{children:"Space bar"})}),v("td",{children:"play / pause song"})]}),k("tr",{children:[v("td",{children:v(br,{children:"Arrow Left"})}),v("td",{children:"go to previous breakpoint"})]}),k("tr",{children:[v("td",{children:v(br,{children:"Arrow Right"})}),v("td",{children:"go to next breakpoint"})]}),k("tr",{children:[v("td",{children:v(br,{children:"Arrow Up"})}),v("td",{children:"select previous layer"})]}),k("tr",{children:[v("td",{children:v(br,{children:"Arrow Down"})}),v("td",{children:"select next layer "})]}),k("tr",{children:[v("td",{children:v(br,{children:"Shift + Note"})}),v("td",{children:"Adds/remove a note in the column "})]}),k("tr",{children:[v("td",{children:v(br,{children:"Q"})}),v("td",{children:"remove current column"})]}),k("tr",{children:[v("td",{children:v(br,{children:"E"})}),v("td",{children:"add column "})]})]})}),"When playing a song, you can press on the PC keyboard to add notes",v("div",{style:{marginBottom:"1rem"}})]})]})]})}function br({children:e}){return v("div",{className:"keyboard-key",children:e})}function si({title:e,current:t,children:r,id:n}){return k("div",{className:t===n?"menu-panel menu-panel-visible":"menu-panel",children:[e&&v("div",{className:"menu-title",children:e}),v("div",{className:"panel-content-wrapper",children:r})]})}function mw(){return eg()?v(je,{}):v(di,{className:"donate-button",to:"Donate",children:"Donate"})}function vY({onClick:e,data:t,importSong:r,theme:n}){const[i,o]=M.exports.useState(!1),[s,a]=M.exports.useState(null),l=async function(){if(!i)try{if(s)return r(s.clone());o(!0);let c=await fetch("https://sky-music.herokuapp.com/api/songs?get="+encodeURI(t.file)).then(f=>f.json());o(!1),c=it.parseSong(c),a(c),r(c)}catch(c){o(!1),console.error(c),me.error("Error downloading song")}};return k("div",{className:"song-row",children:[v("div",{className:"song-name",onClick:async function(){if(!i)try{if(s)return e(s,0);o(!0);let c=await fetch("https://sky-music.herokuapp.com/api/songs?get="+encodeURI(t.file)).then(f=>f.json());o(!1),c=it.parseSong(c),e(c,0),a(c)}catch(c){console.error(c),o(!1),me.error("Error downloading song")}},children:t.name}),v("div",{className:"song-buttons-wrapper",children:v("button",{className:"song-button",onClick:l,"aria-label":`Import song ${t.name}`,style:{backgroundColor:n.layer("primary",.2).hex(),marginRight:0},children:i?v(aM,{}):v(ns,{})})})]})}function Sg({onClick:e,children:t,style:r,tooltip:n,ariaLabel:i,className:o}){return v(je,{children:k("button",{className:`song-button ${Pn(n)} ${o!=null?o:""}`,onClick:e||(()=>{}),style:r,"aria-label":i,children:[t,n&&v(hn,{children:n})]})})}const gY=new DOMRect(0,0,0,0);function Fp({children:e,Icon:t,className:r="",style:n={},onClose:i,tooltip:o,offset:s=3,ignoreClickOutside:a}){var b;const[l,u]=M.exports.useState(!1),[c,f]=M.exports.useState(gY),p=oa(()=>{a||(u(!1),i&&i())},{active:l,ignoreFocusable:!0});M.exports.useEffect(()=>{const y=p.current;if(!y)return;const w=y.getBoundingClientRect();f(w)},[l,p]);const m=c.top+c.height>((b=window==null?void 0:window.innerHeight)!=null?b:0),g=`translateX(calc(-100% + ${s}rem)) ${m?"translateY(calc(-100% - 2rem))":""}`;return k("div",{className:`${r} floating-dropdown ${l?"floating-dropdown-active":""}`,children:[v(Sg,{style:{margin:0,...n,...l?{backgroundColor:"var(--accent)",color:"var(--accent-text)"}:{}},onClick:()=>{u(!l),l&&i&&i()},ariaLabel:l?"Close":"Open",tooltip:o,children:l?v(eo,{}):v(t,{})}),v("div",{ref:p,className:"floating-dropdown-children",style:{transform:g,"--existing-transform":g,transformOrigin:m?"bottom":"top"},children:e})]})}function Fr({text:e}){return v("div",{className:"floating-dropdown-text",children:e})}function hr({children:e,onClick:t,style:r}){return v(Be,{ariaLabel:"Floating Dropdown Button",className:"row row-centered",style:{padding:"0.4rem",minWidth:"unset",...r},onClick:t,children:e})}function lc({children:e,title:t}){return k("div",{className:"folder-content",children:[t&&v("h2",{className:"folder-title",children:t}),v("div",{className:"folder-songs-wrapper",children:e})]})}function dv({children:e,backgroundColor:t,color:r,data:n,isDefault:i,defaultOpen:o=!1}){const[s,a]=M.exports.useState(!1),[l,u]=M.exports.useState(!1),[c,f]=M.exports.useState(n.name),p=M.exports.useRef(null),[m,g]=M.exports.useState(0);M.exports.useEffect(()=>{f(n.name)},[n.name]),M.exports.useEffect(()=>{if(!p.current)return;const x=p.current.getBoundingClientRect();g(x.height+100);const T=setTimeout(()=>{const I=p.current;if(!I)return;const R=I.getBoundingClientRect();g(R.height+100)},200);return()=>clearTimeout(T)},[n.songs,s,e]),M.exports.useEffect(()=>{a(o)},[o]);const b={backgroundColor:t,color:r};async function y(){!await Br(`Are you sure you want to delete "${n.name}"?  
            The songs won't be deleted`)||Zi.removeFolder(n)}return k("div",{className:`folder ${s?"folder-expanded":""}`,style:b,children:[k("div",{className:"folder-header",children:[k("div",{onClick:()=>{l||a(!s)},className:"folder-header-button",children:[v(cM,{strokeWidth:2,style:{transform:`rotate(${s?90:0}deg)`,transition:"all 0.2s"},size:18}),l?v("input",{value:c,onChange:w=>f(w.target.value),className:"folder-name"}):v("div",{className:"folder-name text-ellipsis",children:n.name})]}),!i&&k(Fp,{offset:2.3,ignoreClickOutside:l,onClose:()=>u(!1),Icon:Eh,children:[k(hr,{onClick:()=>{l&&(Zi.renameFolder(n,c),u(!1)),u(!l)},children:[v(_p,{style:{marginRight:"0.4rem"},size:14}),v(Fr,{text:l?"Save":"Rename"})]}),k(hr,{style:{padding:"0 0.4rem"},children:[v(rM,{style:{marginRight:"0.4rem"}}),v("select",{className:"dropdown-select",value:n.filterType,onChange:w=>{const x=w.target.value;n.set({filterType:x}),Zi.updateFolder(n)},children:wM.map(w=>v("option",{value:w,children:ky(w.replaceAll("-"," "))},w))})]}),k(hr,{onClick:async()=>{const x=(await it.getManySerializedFromStorable(wi(n.songs))).map(S=>fr.prepareSongDownload(S)),R=[...(await Promise.all(x)).flat().filter((S,O,P)=>P.findIndex(N=>N.id===S.id)===O),n.serialize()];fr.downloadFiles(R,`${n.name}-folder`)},children:[v(ns,{style:{marginRight:"0.4rem"},size:14}),v(Fr,{text:"Download"})]}),k(hr,{onClick:y,children:[v(to,{color:"#ed4557",style:{marginRight:"0.4rem"},size:14}),v(Fr,{text:"Delete"})]})]})]}),v("div",{className:"column folder-overflow",style:{maxHeight:s?`${m}px`:0},children:v("div",{className:"column folder-overflow-expandible",ref:p,children:e})})]})}function Mp(e){const[t,r]=M.exports.useState(Zi.folders),[n,i]=M.exports.useState([]);return M.exports.useEffect(()=>yY(s=>{r(s)}),[]),M.exports.useEffect(()=>{if(!e)return i(t);i(t.map(o=>{const s=o.clone(),a=e.filter(l=>l.folderId===o.id);return o.filterType==="date-created"?s.songs=a:o.filterType==="alphabetical"?s.songs=a.sort((l,u)=>l.name.localeCompare(u.name)):s.songs=a,s}))},[e,t]),[n]}function yY(e){const t=Hn(Zi.folders,()=>{e([...Zi.folders])});return e([...Zi.folders]),t}function mu({songs:e,SongComponent:t,componentProps:r,className:n,style:i,baseType:o,exclude:s}){const[a,l]=M.exports.useState(),[u,c]=M.exports.useState(),[f,p]=M.exports.useState(),[m,g]=M.exports.useState([]),[b]=Mp(m);M.exports.useEffect(()=>{g(e.filter(x=>!(s!=null&&s.includes(x.type))))},[e,s]),M.exports.useEffect(()=>{function x(T){return b.some(I=>I.id===T.folderId)}l(new To("Recorded",null,m.filter(T=>!x(T)&&T.type==="recorded"))),c(new To("Composed",null,m.filter(T=>!x(T)&&T.type==="composed"))),p(new To("Vsrg",null,m.filter(T=>!x(T)&&T.type==="vsrg")))},[m,b]);const[y]=en(),w=y.layer("menu_background",.35).lighten(.2);return k("div",{className:n,style:i,children:[!(s!=null&&s.includes("composed"))&&u&&v(dv,{backgroundColor:w.toString(),color:y.getText("menu_background").toString(),data:u,isDefault:!0,defaultOpen:o==="composed",children:k(lc,{children:[u.songs.map(x=>M.exports.createElement(t,{...r,data:x,key:x==null?void 0:x.id})),u.songs.length===0&&v("div",{style:{padding:"0.2rem",fontSize:"0.9rem"},children:"No songs here, compose one!"})]})}),!(s!=null&&s.includes("recorded"))&&a&&v(dv,{backgroundColor:w.toString(),color:y.getText("menu_background").toString(),data:a,isDefault:!0,defaultOpen:o==="recorded",children:k(lc,{children:[a.songs.map(x=>M.exports.createElement(t,{...r,data:x,key:x==null?void 0:x.id})),a.songs.length===0&&v("div",{style:{padding:"0.2rem",fontSize:"0.9rem"},children:"No songs here, record one!"})]})}),!(s!=null&&s.includes("vsrg"))&&f&&v(dv,{backgroundColor:w.toString(),color:y.getText("menu_background").toString(),data:f,isDefault:!0,defaultOpen:o==="recorded",children:k(lc,{children:[f.songs.map(x=>M.exports.createElement(t,{...r,data:x,key:x==null?void 0:x.id})),f.songs.length===0&&v("div",{style:{padding:"0.2rem",fontSize:"0.9rem"},children:"No songs here, create one!"})]})}),b.map(x=>{const T=x.songs.filter(S=>S.type==="composed"),I=x.songs.filter(S=>S.type==="recorded"),R=x.songs.filter(S=>S.type==="vsrg");return k(dv,{backgroundColor:w.toString(),color:y.getText("menu_background").toString(),data:x,children:[!(s!=null&&s.includes("composed"))&&T.length>0&&v(lc,{title:"Composed",children:T.map(S=>M.exports.createElement(t,{...r,data:S,key:S==null?void 0:S.id}))}),!(s!=null&&s.includes("recorded"))&&I.length>0&&v(lc,{title:"Recorded",children:I.map(S=>M.exports.createElement(t,{...r,data:S,key:S==null?void 0:S.id}))}),!(s!=null&&s.includes("vsrg"))&&R.length>0&&v(lc,{title:"Vsrg",children:R.map(S=>M.exports.createElement(t,{...r,data:S,key:S==null?void 0:S.id}))}),T.length===0&&I.length===0&&R.length===0&&v("div",{style:{padding:"0.7rem",paddingTop:"0",fontSize:"0.9rem"},children:"The folder is empty"})]},x.id)})]})}function Bp({children:e,onPick:t,style:r={},as:n,multiple:i=!1,onError:o}){const s=M.exports.useRef(null),a=M.exports.useCallback(async l=>{var f;if(l.target.files===null)return;const u=Array.from((f=l.target.files)!=null?f:[]);if(n==="file")return t(u.map(p=>({data:p,file:p})));const c=u.map(p=>new Promise((m,g)=>{const b=new FileReader;function y(){try{const w=b.result;m({data:n==="json"?JSON.parse(w):w,file:p})}catch(w){g(w)}}try{b.addEventListener("loadend",y,{once:!0}),(n==="text"||n==="json")&&b.readAsText(p),n==="buffer"&&b.readAsArrayBuffer(p)}catch(w){g(w)}}));try{const p=await Promise.all(c);t(p)}catch(p){console.error(p),o==null||o(p,u)}s.current!==null&&(s.current.value="")},[n,t,o]);return k(je,{children:[v("input",{type:"file",style:{display:"none"},ref:s,onChange:a,multiple:i}),v("div",{onClick:()=>{var l;return(l=s.current)==null?void 0:l.click()},style:r,children:e})]})}function Eg({checked:e,onChange:t,styleOuter:r}){const[n]=en();return v("button",{className:"switch-wrapper",onClick:()=>t(!e),style:r||{},"aria-label":e?"Switch to off":"Switch to on",children:v("div",{className:`switch-inner ${e?"switch-inner-on":""}`,style:{backgroundColor:(e?n.get("accent"):n.layer("primary",.4)).toString()}})})}function _Y({data:e,volume:t,onVolumeChange:r,onVolumeComplete:n,onInstrumentPick:i,objectKey:o,instrument:s,theme:a}){const l=[],u=[];for(const m of e.options)m.startsWith("SFX")?u.push(m):l.push(m);function c(m){r(Number(m.target.value))}function f(){n({key:o,value:t})}function p(m){i({key:o,data:{...e,value:m.target.value}})}return k("div",{className:"instrument-picker",children:[v("select",{value:s,style:{textAlign:"left",paddingLeft:"0.4rem",backgroundImage:`url("data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' height='24' viewBox='0 0 24 24' width='24' fill='${a.getText("primary").hex().replace("#","%23")}'><path d='M0 0h24v24H0z' fill='none'/><path d='M16.59 8.59L12 13.17 7.41 8.59 6 10l6 6 6-6z'/></svg>")`},className:"select",onChange:p,children:u.length===0?v(je,{children:l.map(m=>v("option",{value:m,children:m.replace("-"," ")},m))}):k(je,{children:[v("optgroup",{label:"Instruments",children:l.map(m=>v("option",{value:m,children:m.replace("-"," ")},m))}),v("optgroup",{label:"SFX",children:u.map(m=>v("option",{value:m,children:m.replace("-"," ").replace("SFX_","")},m))})]})}),v("input",{type:"range",min:1,max:100,value:t,onChange:c,onPointerUp:f})]})}function bY({data:e,value:t,onChange:r,onComplete:n,objectKey:i}){function o(l){const u=l.target;if(e.type==="number"){const c=Number(u.value);if(u.value="",!e.threshold||c<e.threshold[0]||c>e.threshold[1])return;r(c)}else r(u.value)}function s(l){if(e.type==="number"){const u=Number(t)+(e.increment||0)*l;if(!e.threshold||u<e.threshold[0]||u>e.threshold[1])return;n({key:i,data:{...e,value:u}})}}function a(){e.value!==t&&n({key:i,data:{...e,value:t}})}return k("div",{className:"settings-input",children:[e.type==="number"&&v("button",{onClick:()=>s(-1),className:"settings-input-button",style:{marginRight:"0.15rem"},"aria-label":"Decrement",children:v(hy,{})}),v("input",{type:e.type,value:t,placeholder:e.placeholder||"",onBlur:a,onChange:o,"aria-label":e.name}),e.type==="number"&&v("button",{onClick:()=>s(1),className:"settings-input-button",style:{marginLeft:"0.15rem"},"aria-label":"Increment",children:v(uu,{})})]})}function wY({data:e,value:t,onChange:r,objectKey:n}){function i(o){r({key:n,data:{...e,value:Number(o.target.value)}})}return v("input",{type:"range",min:e.threshold[0],max:e.threshold[1],value:t,onChange:i})}function xY({value:e,onChange:t,data:r,objectKey:n,children:i,theme:o,type:s}){function a(l){t({key:n,data:{...r,value:typeof s=="number"?parseInt(l.target.value):l.target.value}})}return v("select",{value:e,onChange:a,style:{backgroundImage:`url("data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' height='24' viewBox='0 0 24 24' width='24' fill='${o.getText("primary").hex().replace("#","%23")}'><path d='M0 0h24v24H0z' fill='none'/><path d='M16.59 8.59L12 13.17 7.41 8.59 6 10l6 6 6-6z'/></svg>")`},children:i})}function TY({data:e,update:t,objKey:r,changeVolume:n}){const[i,o]=M.exports.useState(e.value),[s,a]=M.exports.useState(e.type==="instrument"?e.volume:0),[l]=en(),{type:u}=e;M.exports.useEffect(()=>{o(e.value)},[e.value]);function c(f){u==="checkbox"&&t({key:r,data:{...e,value:f}})}return k("div",{className:"settings-row",style:{backgroundColor:l.layer("menu_background",.15).toString()},children:[k("div",{className:Pn(e.tooltip),style:{flex:"1"},children:[e.name,e.tooltip&&v(hn,{style:{width:"12rem"},children:e.tooltip})]}),u==="select"&&v(xY,{theme:l,type:e.options[0],onChange:t,value:e.value,objectKey:r,data:e,children:e.options.map(f=>v("option",{value:f,children:f},f))}),(u==="number"||u==="text")&&v(bY,{data:e,value:i,onChange:o,onComplete:t,objectKey:r}),u==="checkbox"&&v(Eg,{checked:i,onChange:c}),u==="slider"&&v(wY,{objectKey:r,data:e,value:i,onChange:t}),u==="instrument"&&n&&v(_Y,{theme:l,volume:s,onInstrumentPick:t,onVolumeChange:a,onVolumeComplete:n,instrument:e.value,data:e,objectKey:r})]})}const SY=M.exports.memo(TY,(e,t)=>e.data.value===t.data.value&&e.data.volume===t.data.volume&&e.update===t.update);function Dp({settings:e,changeVolume:t,onUpdate:r}){const n=new Map;return Object.entries(e).forEach(([i,o])=>{n.has(o.category)||n.set(o.category,{category:o.category,settings:{}}),n.get(o.category).settings[i]=o}),v(je,{children:Array.from(n.values()).map(i=>v(M.exports.Fragment,{children:k("div",{className:"column",children:[v("h1",{className:"settings-group-title",children:i.category}),Object.entries(i.settings).map(([o,s])=>v(SY,{objKey:o,data:s,changeVolume:t,update:r},o))]})},i.category))})}function Uu(){const[e,t]=M.exports.useState(At.songs);return M.exports.useEffect(()=>EY(n=>{t(n)}),[]),[e]}function EY(e){const t=Hn(At.songs,()=>{e([...At.songs])});return e([...At.songs]),t}const CY=["vsrg"];function IY({functions:e,data:t}){const[r]=Uu(),[n,i]=M.exports.useState(!1),[o,s]=M.exports.useState("Songs"),[a,l]=M.exports.useState(""),[u,c]=M.exports.useState([]),[f,p]=M.exports.useState(""),[m,g]=M.exports.useState(!1),[b]=en(),[y]=Mp(),{handleSettingChange:w,addSong:x,removeSong:T,renameSong:I}=e,R=oa(ie=>{i(!1)},{active:n,ignoreFocusable:!0});M.exports.useEffect(()=>{async function ie(){if(navigator.storage&&navigator.storage.persist){let Q=await navigator.storage.persisted();Q||(Q=await navigator.storage.persist()),g(Q)}}ie()},[]);const S=M.exports.useCallback(({letter:ie,shift:Q,code:ee})=>{var K;(K=document.activeElement)==null||K.blur(),ie==="M"&&Q&&i(!n),ee==="Escape"&&i(!1)},[n]);M.exports.useEffect(()=>(Xe.listen(S),()=>Xe.unlisten(S)),[S]);function O(){l(""),p(""),c([])}const P=async()=>{if(f==="Searching...")return;if(a.trim().length===0)return p("Please write a non empty name");p("Searching...");const ie=await fetch("https://sky-music.herokuapp.com/api/songs?search="+encodeURI(a)).then(Q=>Q.json());if(ie.error)return p("Please write a non empty name"),me.error(ie.error);p("success"),c(ie),Cn.songSearch({name:a})},N=ie=>{typeof ie!="boolean"&&(ie=null),i(ie!==null?ie:!n)},A=ie=>{if(ie===o&&n)return i(!1);O(),ie&&s(ie),i(!0),Cn.UIEvent("menu",{tab:ie})},j=async ie=>{var Q,ee;for(const K of ie)try{const te=Array.isArray(K.data)?K.data:[K.data];await fr.importAndLog(te)}catch(te){if(console.error(te),(ee=(Q=K.file.name).includes)!=null&&ee.call(Q,".mid"))return me.error("Midi files should be imported in the composer");ne()}},X=async ie=>{if(ie instanceof Np.Midi)return await Br("If you use MIDI, the song will loose some information, if you want to share the song with others, use the other format (button above). Do you still want to download?")?fr.downloadMidi(ie):void 0;const Q=ie.name,ee=[ie.toOldFormat()];fr.downloadSong(ee,`${Q}.${Ae.toLowerCase()}sheet`),me.success("Song downloaded"),Cn.userSongs("download",{name:Q,page:"player"})},G=M.exports.useCallback(async()=>{const ie=await En("Write the folder name");!ie||Zi.createFolder(ie)},[]),ne=M.exports.useCallback(ie=>{ie&&console.error(ie),me.error("Error importing file, invalid format",8e3)},[]);async function W(){try{const Q=(await it.getSongs()).map(ye=>{if(Ae==="Sky"){if(ye.type==="composed")return Kr.deserialize(ye).toOldFormat();if(ye.type==="recorded")return Nn.deserialize(ye).toOldFormat()}return ye}),ee=new Date().toISOString().split("T")[0],te=[...await Do.getFolders(),...Q];fr.downloadFiles(te,`${Ae}_Backup_${ee}`),me.success("Song backup downloaded"),fn.setLastBackupWarningTime(Date.now())}catch(ie){console.error(ie),me.error("Error downloading songs")}}const Y=n?"side-menu menu-open":"side-menu",de=b.layer("menu_background",.35).lighten(.2),le=b.layer("menu_background",.32).desaturate(.4);return k("div",{className:"menu-wrapper",ref:R,children:[k("div",{className:"menu menu-visible menu-main-page",children:[n&&v(Nt,{onClick:N,className:"close-menu",ariaLabel:"Close menu",children:v(eo,{className:"icon"})}),v(Nt,{onClick:()=>A("Help"),className:"margin-top-auto",isActive:o==="Help"&&n,ariaLabel:"Open info menu",children:v(cA,{className:"icon"})}),v(Nt,{onClick:()=>A("Library"),isActive:o==="Library"&&n,ariaLabel:"Open library menu",children:v(cY,{className:"icon"})}),v(Nt,{onClick:()=>A("Songs"),isActive:o==="Songs"&&n,ariaLabel:"Open songs menu",children:v(yp,{className:"icon"})}),v(Nt,{onClick:()=>A("Settings"),isActive:o==="Settings"&&n,ariaLabel:"Open settings",children:v(Eu,{className:"icon"})}),v(Nt,{onClick:ln.open,ariaLabel:"Open home menu",children:v(Cu,{className:"icon"})})]}),k("div",{className:Y,children:[v(si,{title:"No selection",current:o,id:"No selection"}),k(si,{current:o,id:"Songs",children:[k("div",{className:"songs-buttons-wrapper",children:[v(Lu,{children:k("ul",{children:[v("li",{children:"Click the song name to play it"}),v("li",{children:"You can import songs made by other users (does not accept audio files). Or you can download yours to share"}),v("li",{children:"To create your song, you can record the notes you play or create one in the composer"}),k("li",{children:[v(aA,{style:{marginRight:"0.2rem"}}),": Start the practice mode"]}),k("li",{children:[v(_A,{style:{marginRight:"0.2rem"}}),": Start the approaching notes mode"]}),Bb&&v("li",{children:"You can connect a MIDI keyboard to play"})]})}),v(di,{to:"Composer",style:{marginLeft:"auto"},children:v(Be,{children:"Compose song"})}),v(Bp,{onPick:j,onError:ne,as:"json",multiple:!0,children:v(Be,{children:"Import song sheet"})})]}),v(mu,{songs:r,exclude:CY,style:{marginTop:"0.6rem"},SongComponent:NY,componentProps:{theme:b,folders:y,functions:{removeSong:T,toggleMenu:N,downloadSong:X,renameSong:I}}}),v("div",{className:"row",style:{justifyContent:"flex-end"},children:v(Be,{onClick:G,children:"Create folder"})}),v("div",{style:{marginTop:"auto",paddingTop:"0.5rem",width:"100%",display:"flex",justifyContent:"flex-end"},children:v(Be,{style:{marginLeft:"auto"},onClick:W,children:"Download all songs (backup)"})})]}),k(si,{current:o,id:"Settings",children:[v(Dp,{settings:t.settings,changeVolume:e.changeVolume,onUpdate:w}),k("div",{className:"settings-row-wrap",children:[Bb&&v(di,{to:"MidiSetup",children:v(Be,{style:{width:"fit-content"},children:"Connect MIDI keyboard"})}),v(di,{to:"Theme",children:v(Be,{style:{width:"fit-content"},children:"Change app theme"})})]}),k("div",{style:{marginTop:"0.4rem",marginBottom:"0.6rem"},className:Pn(!0),children:[m?"Storage is persisted":"Storage is not persisted",m?v(hn,{position:"top",style:{maxWidth:"unset"},children:"Your data is persisted in the browser, the browser should not automatically clear it. Always make sure to download a backup sometimes, especially when you will not use the app for a long time"}):v(hn,{position:"top",children:"The browser didn't allow to store data persistently, it might happen that you will loose data when cache is automatically cleared. To get persistent storage, add the app to the home screen. If that still doesn't work, make sure you do a backup often"})]}),v(mw,{})]}),k(si,{title:"Library",current:o,id:"Library",children:[v("div",{children:"Here you can find songs to learn, they are provided by the sky-music library."}),k("div",{className:"library-search-row",children:[v("input",{className:"library-search-input",style:{backgroundColor:de.toString()},placeholder:"Song name",onKeyDown:ie=>{ie.code==="Enter"&&P()},onInput:ie=>l(ie.target.value),value:a}),v("button",{className:"library-search-btn",onClick:O,style:{backgroundColor:de.toString()},children:v(eo,{})}),v("button",{className:"library-search-btn",onClick:P,style:{backgroundColor:de.toString()},children:v(sM,{})})]}),(f||u.length>0)&&v("div",{className:"library-search-songs-wrapper",style:{backgroundColor:le.toString()},children:f==="success"?u.length>0?u.map(ie=>v(vY,{theme:b,data:ie,importSong:x,onClick:wt.play},ie.file)):v("div",{className:"library-search-result-text",children:"No results"}):v("div",{className:"library-search-result-text",children:f})})]}),k(si,{title:"Help",current:o,id:"Help",children:[k("div",{className:"help-icon-wrapper",children:[v("a",{href:"https://discord.gg/Arsf65YYHq",children:v(Q8,{className:"help-icon"})}),v("a",{href:"https://github.com/Specy/genshin-music",children:v(eA,{className:"help-icon"})})]}),v(nO,{}),v(mw,{})]})]})]})}function NY({data:e,functions:t,theme:r,folders:n}){const{removeSong:i,toggleMenu:o,downloadSong:s,renameSong:a}=t,l={backgroundColor:r.layer("primary",.15).hex()},[u,c]=M.exports.useState(!1),[f,p]=M.exports.useState(e.name);return M.exports.useEffect(()=>{p(e.name)},[e.name]),e.type==="vsrg"?v("div",{className:"row",children:"Invalid song"}):k("div",{className:"song-row",children:[k("div",{className:`song-name ${Pn(!0)}`,onClick:async()=>{u||(wt.play(await it.fromStorableSong(e),0),o(!1))},children:[u?v("input",{className:`song-name-input ${u?"song-rename":""}`,disabled:!u,onChange:m=>p(m.target.value),style:{width:"100%",color:"var(--primary-text)"},value:f}):v("div",{style:{marginLeft:"0.3rem"},children:f}),v(hn,{children:u?"Song name":"Play song"})]}),k("div",{className:"song-buttons-wrapper",children:[v(Sg,{onClick:async()=>{const m=await it.fromStorableSong(e);wt.practice(m,0,m.notes.length),o(!1)},ariaLabel:`Practice song ${e.name}`,tooltip:"Practice",style:l,children:v(aA,{})}),v(Sg,{onClick:async()=>{const m=await it.fromStorableSong(e);wt.approaching(m,0,m.notes.length),o(!1)},tooltip:"Approach mode",ariaLabel:`Play in Approach mode the song ${e.name}`,style:l,children:v(_A,{})}),k(Fp,{Icon:Eh,style:l,ignoreClickOutside:u,tooltip:"More options",onClose:()=>c(!1),children:[k(hr,{onClick:()=>{u&&(a(f,e.id),c(!1)),c(!u)},children:[v(_p,{style:{marginRight:"0.4rem"},size:14}),v(Fr,{text:u?"Save":"Rename"})]}),k(hr,{style:{padding:"0 0.4rem"},children:[v(cy,{style:{marginRight:"0.4rem"}}),k("select",{className:"dropdown-select",value:e.folderId||"_None",onChange:async m=>{const g=m.target.value,b=await it.getOneSerializedFromStorable(e);if(!b)return me.error("Could not find song");At.addSongToFolder(b,g!=="_None"?g:null)},children:[v("option",{value:"_None",children:"None"}),n.map(m=>v("option",{value:m.id,children:m.name},m.id))]})]}),v(di,{to:{pathname:"/Composer",state:{songId:e.id}},style:{width:"100%"},children:k(hr,{style:{width:"100%"},onClick:()=>{(e==null?void 0:e.type)==="recorded"&&me.warn("Converting recorded song to composed, audio might not be accurate")},children:[v(lA,{style:{marginRight:"0.4rem"},size:14}),v(Fr,{text:"Edit song"})]})}),k(hr,{onClick:async()=>{const m=await it.fromStorableSong(e);s(m)},children:[v(ns,{style:{marginRight:"0.4rem"},size:14}),v(Fr,{text:"Download"})]}),k(hr,{onClick:async()=>{const m=await it.fromStorableSong(e);s(m.toMidi())},children:[v(ns,{style:{marginRight:"0.4rem"},size:14}),v(Fr,{text:"Download MIDI"})]}),k(hr,{onClick:()=>i(e.name,e.id),children:[v(to,{color:"#ed4557",style:{marginRight:"0.4rem"},size:14}),v(Fr,{text:"Delete"})]})]})]})]})}const PY=()=>{let e=2,t=[];function r(i){let o=i.length,s=new Uint8Array(o*e);for(let a=0;a<o;a++){let l=a*e,u=i[a];u>1?u=1:u<-1&&(u=-1),u=u*32768,s[l]=u,s[l+1]=u>>8}t.push(s)}function n(i){let o=t.length?t[0].length:0,s=t.length*o,a=new Uint8Array(44+s),l=new DataView(a.buffer);l.setUint32(0,1380533830,!1),l.setUint32(4,36+s,!0),l.setUint32(8,1463899717,!1),l.setUint32(12,1718449184,!1),l.setUint32(16,16,!0),l.setUint16(20,1,!0),l.setUint16(22,1,!0),l.setUint32(24,i,!0),l.setUint32(28,i*e,!0),l.setUint16(32,e,!0),l.setUint16(34,8*e,!0),l.setUint32(36,1684108385,!1),l.setUint32(40,s,!0);for(let u=0;u<t.length;u++)a.set(t[u],u*o+44);t=[],postMessage(a.buffer,[a.buffer])}onmessage=i=>{i.data[0]==="encode"?r(i.data[1]):i.data[0]==="dump"&&n(i.data[1])}};let iO=window.AudioContext||window.webkitAudioContext,AY=e=>{let t=e.toString().replace(/^(\(\)\s*=>|function\s*\(\))\s*{/,"").replace(/}$/,""),r=new Blob([t]);return new Worker(URL.createObjectURL(r))},Of=e=>{let t=new Event("error");return t.data=new Error("Wrong state for "+e),t},kl;class sl{constructor(t,r=null){this.stream=t,this.config=r,this.state="inactive",this.em=document.createDocumentFragment(),this.encoder=AY(sl.encoder);let n=this;this.encoder.addEventListener("message",i=>{let o=new Event("dataavailable");o.data=new Blob([i.data],{type:n.mimeType}),n.em.dispatchEvent(o),n.state==="inactive"&&n.em.dispatchEvent(new Event("stop"))})}start(t){if(this.state!=="inactive")return this.em.dispatchEvent(Of("start"));this.state="recording",kl||(kl=new iO(this.config)),this.clone=this.stream.clone(),this.input=kl.createMediaStreamSource(this.clone),this.processor=kl.createScriptProcessor(2048,1,1),this.encoder.postMessage(["init",kl.sampleRate]),this.processor.onaudioprocess=r=>{this.state==="recording"&&this.encoder.postMessage(["encode",r.inputBuffer.getChannelData(0)])},this.input.connect(this.processor),this.processor.connect(kl.destination),this.em.dispatchEvent(new Event("start")),t&&(this.slicing=setInterval(()=>{this.state==="recording"&&this.requestData()},t))}stop(){return this.state==="inactive"?this.em.dispatchEvent(Of("stop")):(this.requestData(),this.state="inactive",this.clone.getTracks().forEach(t=>{t.stop()}),this.processor.disconnect(),this.input.disconnect(),clearInterval(this.slicing))}pause(){return this.state!=="recording"?this.em.dispatchEvent(Of("pause")):(this.state="paused",this.em.dispatchEvent(new Event("pause")))}resume(){return this.state!=="paused"?this.em.dispatchEvent(Of("resume")):(this.state="recording",this.em.dispatchEvent(new Event("resume")))}requestData(){return this.state==="inactive"?this.em.dispatchEvent(Of("requestData")):this.encoder.postMessage(["dump",kl.sampleRate])}addEventListener(...t){this.em.addEventListener(...t)}removeEventListener(...t){this.em.removeEventListener(...t)}dispatchEvent(...t){this.em.dispatchEvent(...t)}}sl.prototype.mimeType="audio/wav";sl.isTypeSupported=e=>sl.prototype.mimeType===e;sl.notSupported=!navigator.mediaDevices||!iO;sl.encoder=PY;class R4{constructor(){var t,r,n,i;this.node=(r=(t=Mr.createMediaStreamDestination)==null?void 0:t.call(Mr))!=null?r:null,window!=null&&window.MediaRecorder?this.recorder=new MediaRecorder((i=this.node)==null?void 0:i.stream):(console.log("Audio recorder Polyfill"),this.recorder=new sl((n=this.node)==null?void 0:n.stream))}start(){this.recorder.start()}delete(){var t;(t=this.node)==null||t.disconnect(),this.node=null}stop(){return new Promise(t=>{this.recorder.addEventListener("dataavailable",function(r){t({data:r.data,toUrl:()=>URL.createObjectURL(r.data)})},{once:!0}),this.recorder.stop()})}static async downloadBlob(t,r){fr.downloadBlobAsWav(t,r)}async download(t,r){fr.downloadBlobAsWav(t,r)}}class RY{constructor(t){this.reverbNode=null,this.reverbVolumeNode=null,this.nodes=[],this.hasReverb=!1,this.isRecording=!1,this.reverbLoading=null,this.loadReverb=()=>(this.reverbLoading=new Promise(r=>{fetch("./assets/audio/reverb4.wav").then(n=>n.arrayBuffer()).then(n=>{this.audioContext&&this.audioContext.decodeAudioData(n,i=>{const o=this.audioContext.createConvolver(),s=this.audioContext.createGain();s.gain.value=2.5,o.buffer=i,o.connect(s),s.connect(this.audioContext.destination),this.reverbNode=o,this.reverbVolumeNode=s,this.reverbLoading=null,r()})}).catch(n=>{console.error(n),this.reverbLoading=null,r()})}),this.reverbLoading),this.waitReverb=async()=>{this.reverbLoading&&await this.reverbLoading},this.init=async()=>(await this.loadReverb(),this.setAudioDestinations(),this),this.connect=r=>r?(this.nodes.push(r),this.setAudioDestinations(),this):this,this.destroy=()=>{this.nodes.forEach(r=>r.disconnect()),this.nodes=[],this.recorder=null,this.reverbNode=null,this.reverbVolumeNode=null},this.clear=()=>(this.nodes.forEach(r=>r.disconnect()),this.nodes=[],this.setReverb(!1),this),this.disconnect=r=>r?(this.nodes=this.nodes.filter(n=>n!==r),r.disconnect(),this):this,this.setReverb=r=>(this.hasReverb=r,this.setAudioDestinations(),this),this.startRecording=()=>{const{hasReverb:r,recorder:n,nodes:i,reverbVolumeNode:o}=this;if(!!n)return r?o&&n.node&&o.connect(n.node):i.forEach(s=>{n.node&&s.connect(n.node)}),this.isRecording=!0,n.start(),this},this.stopRecording=async()=>{const{recorder:r,reverbVolumeNode:n,audioContext:i}=this;if(!r)return;const o=await r.stop();return n&&i&&(n.disconnect(),n.connect(this.audioContext.destination)),this.isRecording=!1,this.setAudioDestinations(),o},this.setAudioDestinations=async()=>(this.nodes.forEach(r=>{this.hasReverb?(r.disconnect(),this.reverbNode?r.connect(this.reverbNode):(console.log("Couldn't connect to reverb"),this.audioContext&&r.connect(this.audioContext.destination))):(r.disconnect(),this.audioContext&&r.connect(this.audioContext.destination))}),this),this.audioContext=t,this.recorder=new R4}}const bt=new RY(Mr);function An({text:e}){return M.exports.useEffect(()=>{document.title=e},[e]),null}const Ct=M.exports.memo(({children:e})=>v(je,{children:e}),(e,t)=>{var r,n,i,o;return((r=t.children)==null?void 0:r.key)!==null||((n=e.children)==null?void 0:n.key)!==null?((i=e.children)==null?void 0:i.key)===((o=t.children)==null?void 0:o.key):e.children!==void 0});function oO(e){return De({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M256 81c-7.7 0-15.5.33-23 .95V119h46V81.95c-7.5-.62-15.3-.95-23-.95zm-41 3.07c-4.8.76-9.5 1.65-13.9 2.69-14.7 3.46-26.3 8.71-32.8 14.04l-22.4 140.3L215 341V137h-23v-18h23V84.07zm82 0V119h23v18h-23v238.4c30.6 2.8 54.5 19.5 73.7 40.5 11 12.2 20.6 25.8 29.6 39.4l-56.6-354.5c-6.5-5.33-18.1-10.58-32.8-14.04-4.4-1.04-9.1-1.93-13.9-2.69zM39.34 90.79L24.66 101.2l20.89 29.6 15.14-9.9-21.35-30.11zm54.81 29.71l-56.04 36.7L82.56 183l17.54-11.5-5.95-51zM233 137v46h46v-46h-46zm-124.8 50.8l-15.3 10 48.9 69.2-30.1 188.3c9-13.6 18.6-27.2 29.6-39.4 19.2-21 43.1-37.7 73.7-40.5v-2.8l-73.2-105.7 4.1-26-37.7-53.1zM233 201v46h46v-46h-46zm0 64v46h46v-46h-46zm0 64v38l5.5 8H279v-46h-46zm206 23v23h-33.2l2.9 18H439v23h18v-64h-18zm-215 41c-29 0-50.3 14.1-69.3 35.1-15.5 17-28.9 38.4-42.1 58.9h286.8c-13.2-20.5-26.6-41.9-42.1-58.9-19-21-40.3-35.1-69.3-35.1h-37l12.4 17.9-14.8 10.2-19.5-28.1H224z"}}]})(e)}function kY(){const e=as(Dt.state),[t,r]=M.exports.useState(null),[n,i]=M.exports.useState(EM),o=M.exports.useRef(null),s=M.exports.useRef(null),a=M.exports.useRef(null);M.exports.useEffect(()=>{if(t===null)return;function m(){t!==null&&r(null)}return window.addEventListener("pointerup",m),window.addEventListener("blur",m),()=>{window.removeEventListener("pointerup",m),window.removeEventListener("blur",m)}},[t]);const l=m=>{if(a.current&&o.current&&s.current){const g=a.current.getBoundingClientRect(),b=m.clientY,y=o.current.getBoundingClientRect().y,w=s.current.getBoundingClientRect().y,x=Math.abs(y-b),T=Math.abs(w-b);i(g);const I=x>=T?"end":"start";r(x>=T?"end":"start"),c(m,I)}};function u(){r(null)}const c=(m,g)=>{if(t===null&&!g)return;const b=g||t,y=n.height,w=n.y,x=m.clientY-w,T=ai(Math.round((1-x/y)*e.size),0,e.size);b==="start"?T-e.end<-1&&Dt.setPosition(T):T-e.position>1&&Dt.setState({end:T})},f=e.size!==0?e.position/e.size*100:0,p=e.size!==0?e.end/e.size*100:100;return v(je,{children:k("div",{className:"slider-outer",ref:a,onPointerUp:u,onPointerMove:c,onPointerDown:l,children:[v("div",{className:"slider-full",children:v("div",{className:"slider-current",style:{transform:`translateY(${(100-e.current/e.size*100).toFixed(1)}%)`}})}),k("div",{className:"two-way-slider",children:[k("div",{className:"two-way-slider-thumb",style:{bottom:`calc(${p}% - 18px)`},ref:s,children:[v("div",{style:{fontSize:"0.8rem"},children:e.end}),v(Ct,{children:v(BE,{width:16,style:{filter:"drop-shadow(rgba(0, 0, 0, 0.4) 0px 2px 2px)"}})})]}),k("div",{className:"two-way-slider-thumb",style:{bottom:`calc(${f}% - 14px)`},ref:o,children:[v("div",{style:{fontSize:"0.8rem"},children:e.position}),v(Ct,{children:v(BE,{width:16,style:{filter:"drop-shadow(rgba(0, 0, 0, 0.4) 0px 2px 2px)"}})})]})]})]})})}const OY=M.exports.memo(kY,()=>!0),LY=new Gn;function UY({chunk:e,rows:t,hasText:r,selected:n,theme:i,keyboardLayout:o}){const[a,l]=M.exports.useState("var(--primary)");M.exports.useEffect(()=>{l(i.layer("primary",.2).hex())},[i]);const u=new Array(5*t).fill(!1);return e.notes.forEach(c=>{u[c.index]=!0}),v("div",{className:`frame-outer ${e.notes.length===0?"displayer-ball":""}`,style:n?{borderColor:"var(--accent)"}:{},children:e.notes.length===0?v("div",{}):v("div",{className:"displayer-frame",style:{gridTemplateColumns:`repeat(${5},1fr)`},children:u.map((c,f)=>v("div",{className:c?"frame-note-s":"frame-note-ns",style:c?{}:{backgroundColor:a},children:c&&r?LY.getNoteText(f,o,"C"):null},f))})})}const sO=M.exports.memo(UY,(e,t)=>e.chunk===t.chunk&&e.rows===t.rows&&e.hasText===t.hasText&&e.selected===t.selected&&e.theme===t.theme),FY="ABC";function MY(){var r;const e=as(Dt.pagesState),[t]=en();return v(je,{children:e.pages.length>0&&v("div",{className:"player-chunks-page",children:(r=e.currentPage)==null?void 0:r.map((n,i)=>v(sO,{keyboardLayout:FY,theme:t,selected:i===e.currentChunkIndex,chunk:n,rows:3,hasText:!1},i))})})}const BY=M.exports.memo(MY,()=>!0);function DY({onRestart:e,onRawSpeedChange:t,speedChanger:r,hasSong:n,isMetronomePlaying:i,onToggleMetronome:o,isRecordingAudio:s,onToggleRecordAudio:a,isVisualSheetVisible:l}){const u=as(wt.state);return k(je,{children:[u.eventType==="approaching"&&v($Y,{}),k("div",{className:"column player-right-controls",children:[v("div",{children:u.eventType!=="approaching"&&v(Be,{toggled:s,onClick:()=>a(!s),children:s?"Finish recording":"Record audio"})}),k("div",{className:"slider-wrapper column",style:n?{}:{display:"none"},children:[k("div",{className:"row",style:{width:"100%"},children:[k("div",{className:`${Pn(!0)} row`,style:{marginRight:"0.4rem",flex:1},children:[k("select",{className:"slider-select",onChange:t,value:r.name,style:{backgroundImage:"none"},children:[v("option",{disabled:!0,children:"Speed"}),Db.map(c=>v("option",{value:c.name,children:c.name},c.name))]}),v(hn,{position:"left",children:"Change speed"})]}),v(tu,{onClick:()=>{wt.resetSong(),Dt.clearPages(),Dt.resetScore()},style:{flex:1},tooltip:"Stop",ariaLabel:"Stop song",children:v(Ct,{children:v(vA,{})})})]}),v(OY,{}),v(tu,{onClick:e,tooltip:"Restart",ariaLabel:"Restart song",children:v(Ct,{children:v(gA,{})})})]}),v(tu,{toggled:i,onClick:o,className:"metronome-button",ariaLabel:"Toggle metronome",children:v(oO,{size:22})})]}),l&&v(BY,{})]})}const GY=M.exports.memo(DY,(e,t)=>e.speedChanger===t.speedChanger&&e.hasSong===t.hasSong&&e.isMetronomePlaying===t.isMetronomePlaying&&e.isRecordingAudio===t.isRecordingAudio&&e.isVisualSheetVisible===t.isVisualSheetVisible);function jY(){const{combo:e,score:t,correct:r,wrong:n}=as(Dt.score);return v("div",{className:"approaching-accuracy",children:v("table",{children:k("tbody",{children:[k("tr",{children:[v("td",{className:"sc-2",children:"Accuracy"}),k("td",{className:"sc-1",children:[(r/(r+n-1)*100).toFixed(1),"%"]})]}),k("tr",{children:[v("td",{className:"sc-2",children:"Score"}),v("td",{className:"sc-1",children:t})]}),k("tr",{children:[v("td",{className:"sc-2",children:"Combo"}),v("td",{className:"sc-1",children:e})]})]})})})}const $Y=M.exports.memo(jY,()=>!0);class HY extends M.exports.Component{constructor(t){super(t),this.cleanup=[],this.init=async()=>{const{settings:n}=this.state;await bt.waitReverb(),await this.loadInstrument(n.instrument.value),this.registerKeyboardListeners(),bt.setReverb(n.caveMode.value)},this.registerKeyboardListeners=()=>{Xe.registerLetter("C",()=>this.toggleRecord(),{shift:!0,id:"player"})},this.setHasSong=n=>{this.setState({hasSong:n})},this.changeVolume=n=>{const{settings:i,instruments:o}=this.state;n.key==="instrument"&&(i.instrument={...i.instrument,volume:n.value},o.forEach(s=>s.changeVolume(n.value))),this.setState({settings:i},this.updateSettings)},this.loadInstrument=async n=>{const i=this.state.instruments[0];bt.disconnect(i.endNode),this.state.instruments[0].dispose();const{settings:o,instruments:s}=this.state,a=new Gn(n);a.changeVolume(o.instrument.volume||100),this.setState({isLoadingInstrument:!0}),await a.load()||me.error("There was an error loading the instrument"),bt.connect(a.endNode),this.mounted&&(wt.setKeyboardLayout(a.notes),s.splice(0,1,a),this.setState({instruments:s,isLoadingInstrument:!1},()=>bt.setReverb(o.caveMode.value)))},this.handleSpeedChanger=n=>{const i=Db.find(o=>o.name===n.target.value);!i||this.setState({speedChanger:i},()=>this.restartSong())},this.restartSong=async n=>{!this.mounted||wt.restartSong(typeof n=="number"?n:Dt.position,Dt.end)},this.loadInstruments=async n=>{const{instruments:i}=this.state;i.splice(n.length).forEach(u=>{bt.disconnect(u.endNode),u.dispose()}),me.showPill("Loading instruments...");const s=n.map(async(u,c)=>{if(i[c]===void 0){const f=new Gn(u.name);return i[c]=f,await f.load()||me.error("There was an error loading the instrument"),this.mounted?(bt.connect(f.endNode),f.changeVolume(u.volume),f):f.dispose()}if(i[c].name===u.name)return i[c].changeVolume(u.volume),i[c];{const f=i[c];bt.disconnect(f.endNode),f.dispose();const p=new Gn(u.name);return i[c]=p,await p.load()||me.error("There was an error loading the instrument"),this.mounted?(bt.connect(p.endNode),p.changeVolume(u.volume),p):p.dispose()}}),a=await Promise.all(s);if(!this.mounted)return;const{settings:l}=this.state;i[0]&&(l.instrument={...l.instrument,value:i[0].name},wt.setKeyboardLayout(i[0].notes)),me.hidePill(),this.setState({instruments:a,settings:l},this.updateSettings)},this.playSound=(n,i)=>{const{state:o}=this,{settings:s,instruments:a}=o;o.isRecording&&this.handleRecording(n),i?a.forEach((l,u)=>{i.test(u)&&l.play(n,s.pitch.value)}):a[0].play(n,s.pitch.value)},this.updateSettings=n=>{fn.updatePlayerSettings(n!==void 0?n:this.state.settings)},this.handleSettingChange=n=>{const{settings:i}=this.state,{data:o}=n;i[n.key]={...i[n.key],value:o.value},n.key==="instrument"&&this.loadInstrument(o.value),n.key==="caveMode"&&bt.setReverb(o.value),n.key==="bpm"&&(Un.bpm=o.value),n.key==="metronomeBeats"&&(Un.beats=o.value),n.key==="metronomeVolume"&&Un.changeVolume(o.value),this.setState({settings:i},this.updateSettings)},this.addSong=async n=>{var i;try{const o=await At.addSong(n);n.id=o;const s=(i=n.type)!=null?i:n.data.isComposedVersion?"composed":"recorded";me.success(`Song added to the ${s} tab!`,4e3)}catch(o){return console.error(o),me.error("There was an error importing the song")}},this.removeSong=async(n,i)=>{const o=await Br(`Are you sure you want to delete the song: "${n}" ?`);!this.mounted||o&&(await At.removeSong(i),Cn.userSongs("delete",{page:"player"}))},this.renameSong=async(n,i)=>{await At.renameSong(i,n)},this.handleRecording=n=>{this.state.isRecording&&this.recording.addNote(n)},this.toggleMetronome=()=>{const{isMetronomePlaying:n,settings:i}=this.state;this.setState({isMetronomePlaying:!n}),n?Un.stop():(Un.bpm=i.bpm.value,Un.beats=i.metronomeBeats.value,Un.changeVolume(i.metronomeVolume.value),Un.start())},this.toggleRecord=async n=>{typeof n!="boolean"&&(n=null);const i=n!==null?n:!this.state.isRecording;if(!i&&this.recording.notes.length>0){const{instruments:o,settings:s}=this.state,a=await En("Write song name, press cancel to ignore");if(!this.mounted)return;if(a!==null){const l=new Nn(a,this.recording.notes,[o[0].name]);l.bpm=s.bpm.value,l.pitch=s.pitch.value,this.addSong(l),Cn.userSongs("record",{name:a,page:"player"})}}else this.recording=new iC;this.setState({isRecording:i})},this.toggleRecordAudio=async n=>{if(!this.mounted)return;typeof n!="boolean"&&(n=null);const i=n!==null?n:!this.state.isRecordingAudio;if(this.setState({isRecordingAudio:i}),i)bt.startRecording();else{const o=await bt.stopRecording(),s=await En("Write the song name, press cancel to ignore");if(!this.mounted||!o)return;s&&R4.downloadBlob(o.data,s+".wav")}},this.recording=new iC;const r=fn.getPlayerSettings();this.state={instruments:[new Gn],settings:r,isLoadingInstrument:!0,isRecording:!1,isRecordingAudio:!1,isMetronomePlaying:!1,hasSong:!1,speedChanger:Db.find(n=>n.name==="x1")},this.mounted=!1}async componentDidMount(){this.mounted=!0;const t=this.state.instruments[0];t&&wt.setKeyboardLayout(t.notes),await this.init();const r=zd(wt.state,({eventType:n,song:i})=>{const{settings:o}=this.state;!o.syncSongData.value||i===null||(["play","practice","approaching"].includes(n)&&this.handleSettingChange({data:{...o.pitch,value:i.pitch},key:"pitch"}),this.loadInstruments(i.instruments))});this.cleanup.push(r)}componentWillUnmount(){Xe.unregisterById("player"),wt.resetSong(),wt.resetKeyboardLayout(),Dt.clearPages(),Dt.resetScore(),bt.clear(),me.hidePill(),this.state.instruments.forEach(t=>t.dispose()),this.cleanup.forEach(t=>t()),this.mounted=!1,Un.stop()}render(){const{state:t,renameSong:r,playSound:n,setHasSong:i,removeSong:o,handleSettingChange:s,changeVolume:a,addSong:l,toggleMetronome:u}=this,{settings:c,isLoadingInstrument:f,instruments:p,hasSong:m,isRecordingAudio:g,isRecording:b,isMetronomePlaying:y,speedChanger:w}=t;return k(je,{children:[v(An,{text:"Player"}),v(IY,{functions:{addSong:l,removeSong:o,handleSettingChange:s,changeVolume:a,renameSong:r},data:{settings:c}}),k("div",{className:"right-panel",children:[v("div",{className:"upper-right",children:!m&&v(Be,{toggled:b,onClick:()=>this.toggleRecord(),style:{marginTop:"0.8rem"},children:b?"Stop":"Record"})}),v("div",{className:"keyboard-wrapper",children:v(uY,{data:{isLoading:f,instrument:p[0],pitch:c.pitch.value,keyboardSize:c.keyboardSize.value,noteNameType:c.noteNameType.value,hasSong:m,hasAnimation:c.noteAnimation.value,approachRate:c.approachSpeed.value,keyboardYPosition:c.keyboardYPosition.value,speedChanger:w},functions:{playSound:n,setHasSong:i}})})]}),v(GY,{isRecordingAudio:g,isVisualSheetVisible:c.showVisualSheet.value,onToggleRecordAudio:this.toggleRecordAudio,onRestart:this.restartSong,isMetronomePlaying:y,onToggleMetronome:u,onRawSpeedChange:this.handleSpeedChanger,hasSong:m,speedChanger:w})]})}}const vw=Th(HY);function zY({className:e}){return v("svg",{width:"194.40327mm",height:"290.853mm",viewBox:"0 0 194.40327 290.85299",xmlns:"http://www.w3.org/2000/svg",className:e,style:{fill:"currentcolor"},children:k("g",{children:[v("rect",{width:"50.962246",height:"290.853",x:"143.44104",y:"2.4868996e-14",rx:"15.05095",ry:"17.061689"}),v("path",{d:"m 42.968955,90.42652 c -2.198688,0 -3.96875,1.770063 -3.96875,3.96875 v 35.03145 H 3.9687499 C 1.7700625,129.42672 0,131.19678 0,133.39547 v 24.0621 c 0,2.19869 1.7700625,3.96875 3.9687499,3.96875 H 39.000205 v 35.03145 c 0,2.19869 1.770062,3.96875 3.96875,3.96875 h 24.062613 c 2.198687,0 3.968749,-1.77006 3.968749,-3.96875 v -35.03145 h 35.030933 c 2.19869,0 3.96875,-1.77006 3.96875,-3.96875 v -24.0621 c 0,-2.19869 -1.77006,-3.96875 -3.96875,-3.96875 H 71.000317 V 94.39527 c 0,-2.198687 -1.770062,-3.96875 -3.968749,-3.96875 z"}),v("rect",{width:"7.8557625",height:"1.5711526",x:"57.085205",y:"139.30885",rx:"3.96875"})]})})}function VY({className:e}){return v("svg",{width:"194.40327mm",height:"290.853mm",viewBox:"0 0 194.40327 290.85299",xmlns:"http://www.w3.org/2000/svg",className:e,style:{fill:"currentcolor"},children:k("g",{children:[v("rect",{width:"50.962246",height:"290.853",x:"143.44104",y:"2.4868996e-14",rx:"15.05095",ry:"17.061689"}),v("rect",{width:"110.35661",height:"35.805271",x:"0",y:"127.52386",rx:"3.96875"})]})})}function k4({selected:e,onChange:t,style:r,children:n,className:i}){return k("select",{className:`select ${i!=null?i:""}`,style:{width:"100%",padding:"0.3rem",...r},onChange:o=>t(o.target.value),value:e,children:[n,oo.map(o=>v("option",{children:o},o))]})}function aO(e,t){const[r,n]=M.exports.useState(e);return M.exports.useEffect(()=>{const i=setTimeout(()=>{n(e)},t);return()=>clearTimeout(i)},[e,t]),r}function Cg({onChange:e,value:t,children:r,style:n}){const[i]=en();return v("select",{onChange:e,value:t,className:"select",style:{backgroundImage:`url("data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' height='24' viewBox='0 0 24 24' width='24' fill='${i.getText("primary").hex().replace("#","%23")}'><path d='M0 0h24v24H0z' fill='none'/><path d='M16.59 8.59L12 13.17 7.41 8.59 6 10l6 6 6-6z'/></svg>")`,...n},children:r})}function gw({onChange:e,value:t,delay:r=800,step:n=1,style:i,placeholder:o,className:s}){const[a,l]=M.exports.useState(`${t}`),u=aO(a,r);return M.exports.useEffect(()=>{const c=Number(u);Number.isFinite(c)?e(c):l("0")},[u,e]),M.exports.useEffect(()=>{l(`${t}`)},[t]),k("div",{style:{display:"flex",justifyContent:"flex-end"},className:s,children:[v("button",{onClick:()=>l(`${Number(a)-n}`),className:"midi-btn-small",style:i,children:"-"}),v("input",{type:"text",placeholder:o,value:a,onChange:c=>l(c.target.value),className:"midi-input",style:{margin:"0 0.3rem",...i}}),v("button",{onClick:()=>l(`${Number(a)+n}`),className:"midi-btn-small",style:i,children:"+"})]})}function XY({data:e,index:t,onChange:r,theme:n,instruments:i}){var p;const[o,s]=M.exports.useState(!1),a={backgroundColor:n.layer("menu_background",.15).toString()},[l,u]=M.exports.useState(`${(p=e.localOffset)!=null?p:""}`),c=aO(l,600);M.exports.useEffect(()=>{const m=parseInt(c),g=Number.isFinite(m)?m:null;u(`${g!=null?g:""}`),r(t,{localOffset:g})},[c,r,t]),M.exports.useEffect(()=>{var m;u(`${(m=e.localOffset)!=null?m:""}`)},[e.localOffset]);const f=M.exports.useCallback(m=>{r(t,{maxScaling:Math.max(0,m)})},[r,t]);return k("div",{className:"midi-track-column",style:a,children:[k("div",{className:"midi-track-wrapper",children:[k("div",{className:"midi-track-center",children:[v("input",{type:"checkbox",onChange:()=>r(t,{selected:!e.selected}),checked:e.selected}),`${e.name} `,"(",e.track.notes.length,",",` ${e.track.instrument.family}`,")"]}),k("div",{className:"midi-track-center",children:[v(Cg,{onChange:m=>r(t,{layer:Number(m.target.value)}),value:e.layer,className:"midi-select",style:{marginLeft:"0.2rem"},children:i.map((m,g)=>k("option",{value:g,children:[m.alias||m.name," - ",`Layer ${g+1}`]},g))}),v(Eh,{size:22,color:"var(--primary)",onClick:()=>s(!o),cursor:"pointer"})]})]}),k("div",{className:"midi-track-data",style:{display:o?"flex":"none"},children:[k("div",{className:"midi-track-data-row",children:[k("div",{className:Pn(!0),children:[v(hn,{children:"Changes the index of each note by this amount."}),"Track offset:"]}),v("input",{type:"text",value:l,placeholder:"No offset",className:"midi-input",style:{width:"6.3rem"},onChange:m=>u(m.target.value)})]}),k("div",{className:"midi-track-data-row",children:[k("div",{className:Pn(!0),children:[v(hn,{children:"Scale down/up the notes which are out of scale by theose octaves."}),"Max notes octave scaling:"]}),v(gw,{value:e.maxScaling,placeholder:"No scaling",onChange:f})]}),k("div",{className:"midi-track-data-row",children:[v("div",{children:"Instrument:"}),v("div",{children:e.track.instrument.name})]}),k("div",{className:"midi-track-data-row",children:[v("div",{children:"Number of notes:"}),v("div",{children:e.track.notes.length})]}),k("div",{className:"midi-track-data-row",children:[v("div",{children:"Accidentals:"}),v("div",{children:e.numberOfAccidentals})]}),k("div",{className:"midi-track-data-row",children:[k("div",{children:["Out of range: (",e.outOfRangeBounds.upper+e.outOfRangeBounds.lower,")"]}),k("div",{className:"row",style:{width:"fit-content"},children:[k("div",{className:"row",style:{marginRight:"0.4rem"},children:[v(nA,{style:{marginRight:"0.2rem"}}),e.outOfRangeBounds.upper]}),k("div",{className:"row",children:[v(tA,{style:{marginRight:"0.2rem"}}),e.outOfRangeBounds.lower]})]})]})]})]})}class WY extends M.exports.Component{constructor(t){super(t),this.handleFile=r=>{var n,i;try{if(r.length===0)return;const o=r[0],s=new Np.Midi(o.data),a=(n=s.header.tempos[0])==null?void 0:n.bpm,l=(i=s.header.keySignatures[0])==null?void 0:i.key,u=s.tracks.map((c,f)=>({track:c,selected:!0,layer:0,name:c.name||`Track n.${f+1}`,numberOfAccidentals:0,maxScaling:0,outOfRangeBounds:{lower:0,upper:0},localOffset:null}));this.setState({tracks:u,fileName:o.file.name,bpm:Math.floor(a*4)||220,offset:0,pitch:oo.includes(l)?l:"C"},()=>{this.state.tracks.length&&this.convertMidi()})}catch(o){console.error(o),me.error("There was an error importing this file, is it a .mid file?")}},this.convertMidi=()=>{const{tracks:r,bpm:n,offset:i,includeAccidentals:o,pitch:s}=this.state,a=r.filter(T=>T.selected),l=[];let u=0,c=0,f=0;a.forEach(T=>{T.numberOfAccidentals=0,T.outOfRangeBounds.upper=0,T.outOfRangeBounds.lower=0,T.track.notes.forEach(I=>{var S;f++;const R=n4.fromMidi(T.layer,Math.floor(I.time*1e3),I.midi-((S=T.localOffset)!=null?S:i),T.maxScaling);R.data.isAccidental&&(u++,T.numberOfAccidentals++),R.data.note!==-1?(o||!R.data.isAccidental)&&l.push(R):(c++,R.data.outOfRangeBound===-1&&T.outOfRangeBounds.lower++,R.data.outOfRangeBound===1&&T.outOfRangeBounds.upper++)})});const p=l.sort((T,I)=>T.time-I.time),m=Math.floor(6e4/n),g=[];for(;p.length>0;){const T=[p.shift()];let I=0;for(let R=0;R<p.length;R++)T[0].time>p[R].time-m/9&&I++;g.push([...T,...p.splice(0,I)])}const b=[];let y=0;g.forEach(T=>{const I=T[0];if(!I)return;const R=I.time-y,S=Math.floor((R-m)/m),O=new Ci;y=I.time,S>-1&&new Array(S).fill(0).forEach(()=>b.push(new Ci)),O.notes=T.map(P=>{const N=new Ki;return N.set(P.layer,!0),new Hs(P.data.note,N)}),b.push(O)}),b.forEach(T=>{const I=TR(T);T.notes=I.map(R=>(R[0].layer=xR(R),R[0]))});const w=new Kr("Untitled");w.columns=b,w.bpm=n,w.instruments=[],w.instruments=this.props.data.instruments.map(T=>T.clone()),w.pitch=s;const x=this.props.data.selectedColumn;if(w.selected=x<w.columns.length?x:0,w.columns.length===0)return me.warn("There are no notes");this.props.functions.loadSong(w),this.setState({accidentals:u,totalNotes:f,outOfRange:c})},this.editTrack=(r,n)=>{const i=this.state.tracks;Object.assign(i[r],n),this.setState({tracks:i},()=>{this.state.tracks.length>0&&this.convertMidi()})},this.changeOffset=r=>{Number.isInteger(r)||(r=0),this.state.offset!==r&&this.setState({offset:r},()=>{this.state.tracks.length>0&&this.convertMidi()})},this.changePitch=r=>{this.props.functions.changePitch(r),this.setState({pitch:r})},this.toggleAccidentals=()=>{this.setState({includeAccidentals:!this.state.includeAccidentals},()=>{this.state.tracks.length>0&&this.convertMidi()})},this.changeBpm=r=>{Number.isInteger(r)||(r=0),this.state.bpm!==r&&this.setState({bpm:r},()=>{this.state.tracks.length>0&&this.convertMidi()})},this.state={fileName:"",bpm:220,tracks:[],offset:0,pitch:"C",ignoreEmptytracks:!1,accidentals:0,outOfRange:0,totalNotes:0,includeAccidentals:!0,theme:Se},this.dispose=()=>{}}componentDidMount(){this.dispose=Hn(Se.state.data,()=>{this.setState({theme:{...Se}})})}componentWillUnmount(){this.dispose()}render(){const{handleFile:t,editTrack:r,state:n,changeBpm:i,changeOffset:o,changePitch:s}=this,{tracks:a,fileName:l,bpm:u,offset:c,pitch:f,accidentals:p,outOfRange:m,totalNotes:g,includeAccidentals:b,theme:y,ignoreEmptytracks:w}=n,{functions:x,data:T}=this.props,{changeMidiVisibility:I}=x,R={backgroundColor:y.layer("primary",.2).toString(),color:y.getText("primary").toString()};return v(Xy,{boxProps:{className:"floating-midi"},size:"1.2rem",isRelative:!1,offset:"0.1rem",children:k("div",{className:"column floating-midi-content",children:[k("div",{className:"midi-row separator-border",style:{width:"100%"},children:[v(Bp,{onPick:t,as:"buffer",children:v("button",{className:"midi-btn",style:R,children:"Open midi file"})}),v("div",{style:{margin:"0 0.5rem",maxWidth:"20rem"},className:"text-ellipsis",children:l}),v("button",{className:"midi-btn",style:{marginLeft:"auto",...R},onClick:()=>I(!1),children:"Close"})]}),k("div",{className:"midi-table-row",children:[v("div",{style:{marginRight:"0.5rem"},children:"Bpm:"}),v(gw,{value:u,onChange:i,delay:600,style:R,step:5})]}),k("div",{className:"midi-table-row",children:[k("div",{className:"row flex-centered",children:[v("span",{style:{marginRight:"0.5rem"},children:"Global note offset: "}),v(Lu,{buttonStyle:{width:"1.2rem",height:"1.2rem"},children:"The index of each note will be pushed up/down by this amount, you can use it to make the song fit into the app range. You can also change the offset of each layer."})]}),v(gw,{value:c,onChange:o,delay:600,style:R,step:1})]}),k("div",{className:"midi-table-row",children:[v("div",{style:{marginRight:"0.5rem"},children:"Pitch:"}),v(k4,{style:{width:"5rem",...R},selected:f,onChange:s})]}),k("div",{className:"midi-table-row",children:[k("div",{className:"row",children:[v("div",{style:{marginRight:"0.5rem"},children:"Include accidentals:"}),v(Eg,{checked:b,onChange:this.toggleAccidentals,styleOuter:R})]}),k("div",{className:"row",children:[v("div",{style:{marginRight:"0.5rem"},children:"Ignore empty tracks:"}),v(Eg,{checked:w,onChange:S=>this.setState({ignoreEmptytracks:S}),styleOuter:R})]})]}),a.length>0&&v("div",{className:"midi-column separator-border",style:{width:"100%"},children:k("div",{className:"midi-column",style:{width:"100%"},children:[v("div",{children:"Select midi tracks"}),a.map((S,O)=>!(w&&S.track.notes.length===0)&&v(XY,{data:S,instruments:T.instruments,index:O,onChange:r,theme:y},O))]})}),a.length>0&&v("table",{children:k("tbody",{children:[k("tr",{children:[v("td",{children:"Total notes: "}),v("td",{}),v("td",{children:g})]}),k("tr",{children:[v("td",{children:"Accidentals: "}),v("td",{}),v("td",{children:p})]}),k("tr",{children:[v("td",{children:"Out of range: "}),v("td",{}),v("td",{children:m})]})]})})]})})}}function YY(e){return De({tag:"svg",attr:{viewBox:"0 0 24 24",strokeWidth:"2",stroke:"currentColor",fill:"none",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"desc",attr:{},child:[]},{tag:"path",attr:{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}},{tag:"line",attr:{x1:"14",y1:"12",x2:"4",y2:"12"}},{tag:"line",attr:{x1:"14",y1:"12",x2:"10",y2:"16"}},{tag:"line",attr:{x1:"14",y1:"12",x2:"10",y2:"8"}},{tag:"line",attr:{x1:"20",y1:"4",x2:"20",y2:"20"}}]})(e)}function KY({data:e,functions:t}){const[r]=en(),[n,i]=M.exports.useState("all"),{toggleTools:o,copyColumns:s,eraseColumns:a,pasteColumns:l,deleteColumns:u,resetSelection:c,undo:f,moveNotesBy:p}=t,{isToolsVisible:m,hasCopiedColumns:g,layer:b,selectedColumns:y,undoHistory:w}=e,x=n==="all"?"all":b;return k("div",{className:`floating-tools ${m?"floating-tools tools-visible":""}`,style:{backgroundColor:r.get("menu_background").fade(.1).toString()},children:[k("div",{className:"tools-buttons-grid",children:[k(Ol,{area:"a",disabled:g,onClick:()=>s(x),active:g,tooltip:"Copy all notes",style:{flexDirection:"column",justifyContent:"center"},tooltipPosition:"bottom",children:[v(ZF,{className:"tools-icon",size:24}),"Copy"]}),k(Ol,{disabled:!g,onClick:()=>l(!1,x),tooltip:"Paste copied notes",area:"b",tooltipPosition:"bottom",children:[v(iM,{className:"tools-icon"}),"Paste ",n==="all"?"":`in layer ${b+1}`]}),k(Ol,{disabled:!g,onClick:()=>l(!0,x),tooltip:"Insert copied notes",area:"c",children:[v(YY,{className:"tools-icon",style:{strokeWidth:"3px"}}),"Insert ",n==="all"?"":`in layer ${b+1}`]}),k(Ol,{disabled:g,onClick:()=>a(x),tooltip:"Erase all selected notes",area:"d",children:[v(JF,{className:"tools-icon"}),"Erase"]}),k(Ol,{disabled:g||x!=="all",onClick:u,tooltip:"Delete selected columns",area:"f",children:[v(to,{className:"tools-icon",color:"var(--red)"}),"Delete"]}),k(Ol,{disabled:g,tooltip:"Push notes up by 1 position",area:"e",onClick:()=>p(1,x),children:[v(XF,{className:"tools-icon"}),"Move notes up"]}),k(Ol,{disabled:g,tooltip:"Push notes down by 1 position",onClick:()=>p(-1,x),area:"g",children:[v(VF,{className:"tools-icon"}),"Move notes down"]})]}),k("div",{className:"tools-right column",children:[k(Be,{style:{marginBottom:"0.2rem"},className:Pn(!0),toggled:n==="all",onClick:()=>i("all"),children:[v(pY,{style:{marginRight:"0.2rem"},size:16}),"All layers",v(hn,{style:{left:0},children:"Select all the layers in the highlighted columns"})]}),k(Be,{style:{marginBottom:"0.2rem"},className:Pn(!0),toggled:n==="layer",onClick:()=>i("layer"),children:[v(mY,{style:{marginRight:"0.2rem"},size:16}),"Only Layer",v("span",{style:{minWidth:"0.6rem",marginLeft:"0.2rem"},children:b+1}),v(hn,{style:{left:0},children:"Select all the notes in the highlighted columns of the current layer"})]}),v(Be,{style:{marginBottom:"0.2rem",justifyContent:"center"},onClick:c,disabled:y.length<=1&&!g,toggled:g,children:"Clear selection"}),k("div",{className:"row",style:{flex:"1",alignItems:"flex-end"},children:[v(Be,{style:{flex:"1",justifyContent:"center"},disabled:w.length===0,onClick:f,children:"Undo"}),v(Be,{onClick:o,style:{marginLeft:"0.2rem",flex:"1",justifyContent:"center"},children:"Ok"})]})]})]})}const qY=M.exports.memo(KY,(e,t)=>e.data.isToolsVisible===t.data.isToolsVisible&&e.data.hasCopiedColumns===t.data.hasCopiedColumns&&e.data.layer===t.data.layer&&e.data.selectedColumns===t.data.selectedColumns&&e.data.undoHistory===t.data.undoHistory);function Ol({disabled:e,onClick:t,active:r,style:n,children:i,tooltip:o,area:s,tooltipPosition:a}){return k("button",{disabled:e,onClick:t,className:`flex-centered tools-button ${r?"tools-button-highlighted":""} ${Pn(o)}`,style:{gridArea:s,...n},children:[i,o&&v(hn,{position:a||"top",children:o})]})}function a5(){return Se.get("note_background").isDark()?vt.text.light:vt.text.dark}const ZY=M.exports.memo(function({data:t,layer:r,instrument:n,clickAction:i,noteText:o,noteImage:s}){var c;const[a,l]=M.exports.useState(a5());M.exports.useEffect(()=>Hn(Se.state.data,()=>{l(a5())}),[]);let u=Gs.noteComposer;return(r&1)!==0&&(u+=" layer-1"),(r&2)!==0&&(u+=" layer-2"),(r&4)!==0&&(u+=" layer-3"),(r&8)!==0&&(u+=" layer-4"),Se.get("note_background").desaturate(.6),v("button",{onPointerDown:()=>i(t),className:"button-hitbox",children:k("div",{className:u,children:[Ae==="Genshin",v(Wy,{name:s,color:Se.isDefault("accent")?(c=tl[n])==null?void 0:c.fill:void 0,background:"var(--note-background)"}),v("div",{className:"layer-3-ball-bigger"}),v("div",{className:"layer-4-line"}),v("div",{className:"note-name-sky",style:{color:a},children:o})]})})},(e,t)=>e.noteText===t.noteText&&e.clickAction===t.clickAction&&e.noteImage===t.noteImage&&e.noteText===t.noteText&&e.layer===t.layer&&e.instrument===t.instrument);function JY({data:e,functions:t}){const{keyboard:r,isPlaying:n,noteNameType:i,currentColumn:o,pitch:s,currentLayer:a,isRecordingAudio:l,settings:u}=e,{handleClick:c,handleTempoChanger:f}=t;if(en(),r===void 0)return v("div",{className:"composer-keyboard-wrapper",style:{marginBottom:"4rem"},children:v("h1",{children:"There was an error with this layer"})});if(l)return v("div",{className:"composer-keyboard-wrapper",style:{marginBottom:"4rem"},children:v("h1",{children:"Recording Audio..."})});let p="keyboard";return r.notes.length===15&&(p+=" keyboard-5"),r.notes.length===14&&(p+=" keyboard-5"),r.notes.length===8&&(p+=" keyboard-4"),r.notes.length===6&&(p+=" keyboard-3"),k(je,{children:[k("div",{className:"composer-keyboard-wrapper",children:[e.settings.useKeyboardSideButtons.value&&v("button",{onPointerDown:()=>t.selectColumnFromDirection(-1),className:`keyboard-column-selection-buttons ${e.isPlaying?"":"keyboard-column-selection-buttons-visible"}`,style:{paddingRight:"0.5rem",justifyContent:"flex-end"},children:v(oA,{})}),k("div",{className:p,children:[r.notes.length===0?v("div",{className:"loading",children:"Loading..."}):null,r.notes.map((m,g)=>{try{const b=o.notes.findIndex(y=>y.index===g);return v(ZY,{layer:b>=0?o.notes[b].layer.toLayerStatus(a,e.instruments):0,data:m,noteText:r.getNoteText(g,i,s),instrument:r.name,noteImage:m.noteImage,clickAction:c},m.index)}catch{return"Err"}})]}),e.settings.useKeyboardSideButtons.value&&v("button",{onPointerDown:()=>t.selectColumnFromDirection(1),className:`keyboard-column-selection-buttons ${e.isPlaying?"":"keyboard-column-selection-buttons-visible"}`,style:{paddingLeft:"0.5rem",justifyContent:"flex-start"},children:v(sA,{})})]}),k("div",{className:`tempo-changers-wrapper ${n?"tempo-changers-wrapper-hidden":""}`,children:[v("div",{className:"bottom-right-text",children:"Tempo"}),rl.map(m=>v("button",{onClick:()=>f(m),style:{...m.changer===1?{backgroundColor:Se.get("primary").toString(),color:Se.getText("primary").toString()}:{backgroundColor:"#"+m.color.toString(16)},outline:e.currentColumn.tempoChanger===m.id?`3px ${Se.get("composer_accent").toString()} solid`:"",margin:"",outlineOffset:"-3px"},children:m.text},m.id))]})]})}var Qe={exports:{}};function QY(e){var t=this.constructor;return this.then(function(r){return t.resolve(e()).then(function(){return r})},function(r){return t.resolve(e()).then(function(){return t.reject(r)})})}function eK(e){var t=this;return new t(function(r,n){if(!(e&&typeof e.length<"u"))return n(new TypeError(typeof e+" "+e+" is not iterable(cannot read property Symbol(Symbol.iterator))"));var i=Array.prototype.slice.call(e);if(i.length===0)return r([]);var o=i.length;function s(l,u){if(u&&(typeof u=="object"||typeof u=="function")){var c=u.then;if(typeof c=="function"){c.call(u,function(f){s(l,f)},function(f){i[l]={status:"rejected",reason:f},--o===0&&r(i)});return}}i[l]={status:"fulfilled",value:u},--o===0&&r(i)}for(var a=0;a<i.length;a++)s(a,i[a])})}var tK=setTimeout;function lO(e){return Boolean(e&&typeof e.length<"u")}function rK(){}function nK(e,t){return function(){e.apply(t,arguments)}}function Sr(e){if(!(this instanceof Sr))throw new TypeError("Promises must be constructed via new");if(typeof e!="function")throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],cO(e,this)}function uO(e,t){for(;e._state===3;)e=e._value;if(e._state===0){e._deferreds.push(t);return}e._handled=!0,Sr._immediateFn(function(){var r=e._state===1?t.onFulfilled:t.onRejected;if(r===null){(e._state===1?yw:Kd)(t.promise,e._value);return}var n;try{n=r(e._value)}catch(i){Kd(t.promise,i);return}yw(t.promise,n)})}function yw(e,t){try{if(t===e)throw new TypeError("A promise cannot be resolved with itself.");if(t&&(typeof t=="object"||typeof t=="function")){var r=t.then;if(t instanceof Sr){e._state=3,e._value=t,_w(e);return}else if(typeof r=="function"){cO(nK(r,t),e);return}}e._state=1,e._value=t,_w(e)}catch(n){Kd(e,n)}}function Kd(e,t){e._state=2,e._value=t,_w(e)}function _w(e){e._state===2&&e._deferreds.length===0&&Sr._immediateFn(function(){e._handled||Sr._unhandledRejectionFn(e._value)});for(var t=0,r=e._deferreds.length;t<r;t++)uO(e,e._deferreds[t]);e._deferreds=null}function iK(e,t,r){this.onFulfilled=typeof e=="function"?e:null,this.onRejected=typeof t=="function"?t:null,this.promise=r}function cO(e,t){var r=!1;try{e(function(n){r||(r=!0,yw(t,n))},function(n){r||(r=!0,Kd(t,n))})}catch(n){if(r)return;r=!0,Kd(t,n)}}Sr.prototype.catch=function(e){return this.then(null,e)};Sr.prototype.then=function(e,t){var r=new this.constructor(rK);return uO(this,new iK(e,t,r)),r};Sr.prototype.finally=QY;Sr.all=function(e){return new Sr(function(t,r){if(!lO(e))return r(new TypeError("Promise.all accepts an array"));var n=Array.prototype.slice.call(e);if(n.length===0)return t([]);var i=n.length;function o(a,l){try{if(l&&(typeof l=="object"||typeof l=="function")){var u=l.then;if(typeof u=="function"){u.call(l,function(c){o(a,c)},r);return}}n[a]=l,--i===0&&t(n)}catch(c){r(c)}}for(var s=0;s<n.length;s++)o(s,n[s])})};Sr.allSettled=eK;Sr.resolve=function(e){return e&&typeof e=="object"&&e.constructor===Sr?e:new Sr(function(t){t(e)})};Sr.reject=function(e){return new Sr(function(t,r){r(e)})};Sr.race=function(e){return new Sr(function(t,r){if(!lO(e))return r(new TypeError("Promise.race accepts an array"));for(var n=0,i=e.length;n<i;n++)Sr.resolve(e[n]).then(t,r)})};Sr._immediateFn=typeof setImmediate=="function"&&function(e){setImmediate(e)}||function(e){tK(e,0)};Sr._unhandledRejectionFn=function(t){typeof console<"u"&&console&&console.warn("Possible Unhandled Promise Rejection:",t)};typeof globalThis>"u"&&(typeof self<"u"?self.globalThis=self:typeof Ai<"u"&&(Ai.globalThis=Ai));globalThis.Promise||(globalThis.Promise=Sr);Object.assign||(Object.assign=Ux);var oK=16;Date.now&&Date.prototype.getTime||(Date.now=function(){return new Date().getTime()});if(!(globalThis.performance&&globalThis.performance.now)){var sK=Date.now();globalThis.performance||(globalThis.performance={}),globalThis.performance.now=function(){return Date.now()-sK}}var Z2=Date.now(),l5=["ms","moz","webkit","o"];for(var J2=0;J2<l5.length&&!globalThis.requestAnimationFrame;++J2){var Q2=l5[J2];globalThis.requestAnimationFrame=globalThis[Q2+"RequestAnimationFrame"],globalThis.cancelAnimationFrame=globalThis[Q2+"CancelAnimationFrame"]||globalThis[Q2+"CancelRequestAnimationFrame"]}globalThis.requestAnimationFrame||(globalThis.requestAnimationFrame=function(e){if(typeof e!="function")throw new TypeError(e+"is not a function");var t=Date.now(),r=oK+Z2-t;return r<0&&(r=0),Z2=t,globalThis.self.setTimeout(function(){Z2=Date.now(),e(performance.now())},r)});globalThis.cancelAnimationFrame||(globalThis.cancelAnimationFrame=function(e){return clearTimeout(e)});Math.sign||(Math.sign=function(t){return t=Number(t),t===0||isNaN(t)?t:t>0?1:-1});Number.isInteger||(Number.isInteger=function(t){return typeof t=="number"&&isFinite(t)&&Math.floor(t)===t});globalThis.ArrayBuffer||(globalThis.ArrayBuffer=Array);globalThis.Float32Array||(globalThis.Float32Array=Array);globalThis.Uint32Array||(globalThis.Uint32Array=Array);globalThis.Uint16Array||(globalThis.Uint16Array=Array);globalThis.Uint8Array||(globalThis.Uint8Array=Array);globalThis.Int32Array||(globalThis.Int32Array=Array);var e_=/iPhone/i,u5=/iPod/i,c5=/iPad/i,h5=/\biOS-universal(?:.+)Mac\b/i,t_=/\bAndroid(?:.+)Mobile\b/i,f5=/Android/i,uc=/(?:SD4930UR|\bSilk(?:.+)Mobile\b)/i,pv=/Silk/i,Ss=/Windows Phone/i,d5=/\bWindows(?:.+)ARM\b/i,p5=/BlackBerry/i,m5=/BB10/i,v5=/Opera Mini/i,g5=/\b(CriOS|Chrome)(?:.+)Mobile/i,y5=/Mobile(?:.+)Firefox\b/i,_5=function(e){return typeof e<"u"&&e.platform==="MacIntel"&&typeof e.maxTouchPoints=="number"&&e.maxTouchPoints>1&&typeof MSStream>"u"};function aK(e){return function(t){return t.test(e)}}function lK(e){var t={userAgent:"",platform:"",maxTouchPoints:0};!e&&typeof navigator<"u"?t={userAgent:navigator.userAgent,platform:navigator.platform,maxTouchPoints:navigator.maxTouchPoints||0}:typeof e=="string"?t.userAgent=e:e&&e.userAgent&&(t={userAgent:e.userAgent,platform:e.platform,maxTouchPoints:e.maxTouchPoints||0});var r=t.userAgent,n=r.split("[FBAN");typeof n[1]<"u"&&(r=n[0]),n=r.split("Twitter"),typeof n[1]<"u"&&(r=n[0]);var i=aK(r),o={apple:{phone:i(e_)&&!i(Ss),ipod:i(u5),tablet:!i(e_)&&(i(c5)||_5(t))&&!i(Ss),universal:i(h5),device:(i(e_)||i(u5)||i(c5)||i(h5)||_5(t))&&!i(Ss)},amazon:{phone:i(uc),tablet:!i(uc)&&i(pv),device:i(uc)||i(pv)},android:{phone:!i(Ss)&&i(uc)||!i(Ss)&&i(t_),tablet:!i(Ss)&&!i(uc)&&!i(t_)&&(i(pv)||i(f5)),device:!i(Ss)&&(i(uc)||i(pv)||i(t_)||i(f5))||i(/\bokhttp\b/i)},windows:{phone:i(Ss),tablet:i(d5),device:i(Ss)||i(d5)},other:{blackberry:i(p5),blackberry10:i(m5),opera:i(v5),firefox:i(y5),chrome:i(g5),device:i(p5)||i(m5)||i(v5)||i(y5)||i(g5)},any:!1,phone:!1,tablet:!1};return o.any=o.apple.device||o.android.device||o.windows.device||o.other.device,o.phone=o.apple.phone||o.android.phone||o.windows.phone,o.tablet=o.apple.tablet||o.android.tablet||o.windows.tablet,o}/*!
 * @pixi/settings - v6.4.2
 * Compiled Thu, 02 Jun 2022 15:39:26 UTC
 *
 * @pixi/settings is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var Ko=lK(globalThis.navigator);function uK(e){var t=!0;if(Ko.tablet||Ko.phone){if(Ko.apple.device){var r=navigator.userAgent.match(/OS (\d+)_(\d+)?/);if(r){var n=parseInt(r[1],10);n<11&&(t=!1)}}if(Ko.android.device){var r=navigator.userAgent.match(/Android\s([0-9.]*)/);if(r){var n=parseInt(r[1],10);n<7&&(t=!1)}}}return t?e:4}function cK(){return!Ko.apple.device}/*!
 * @pixi/constants - v6.4.2
 * Compiled Thu, 02 Jun 2022 15:39:26 UTC
 *
 * @pixi/constants is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var b5;(function(e){e[e.WEBGL_LEGACY=0]="WEBGL_LEGACY",e[e.WEBGL=1]="WEBGL",e[e.WEBGL2=2]="WEBGL2"})(b5||(b5={}));var w5;(function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.WEBGL=1]="WEBGL",e[e.CANVAS=2]="CANVAS"})(w5||(w5={}));var x5;(function(e){e[e.COLOR=16384]="COLOR",e[e.DEPTH=256]="DEPTH",e[e.STENCIL=1024]="STENCIL"})(x5||(x5={}));var T5;(function(e){e[e.NORMAL=0]="NORMAL",e[e.ADD=1]="ADD",e[e.MULTIPLY=2]="MULTIPLY",e[e.SCREEN=3]="SCREEN",e[e.OVERLAY=4]="OVERLAY",e[e.DARKEN=5]="DARKEN",e[e.LIGHTEN=6]="LIGHTEN",e[e.COLOR_DODGE=7]="COLOR_DODGE",e[e.COLOR_BURN=8]="COLOR_BURN",e[e.HARD_LIGHT=9]="HARD_LIGHT",e[e.SOFT_LIGHT=10]="SOFT_LIGHT",e[e.DIFFERENCE=11]="DIFFERENCE",e[e.EXCLUSION=12]="EXCLUSION",e[e.HUE=13]="HUE",e[e.SATURATION=14]="SATURATION",e[e.COLOR=15]="COLOR",e[e.LUMINOSITY=16]="LUMINOSITY",e[e.NORMAL_NPM=17]="NORMAL_NPM",e[e.ADD_NPM=18]="ADD_NPM",e[e.SCREEN_NPM=19]="SCREEN_NPM",e[e.NONE=20]="NONE",e[e.SRC_OVER=0]="SRC_OVER",e[e.SRC_IN=21]="SRC_IN",e[e.SRC_OUT=22]="SRC_OUT",e[e.SRC_ATOP=23]="SRC_ATOP",e[e.DST_OVER=24]="DST_OVER",e[e.DST_IN=25]="DST_IN",e[e.DST_OUT=26]="DST_OUT",e[e.DST_ATOP=27]="DST_ATOP",e[e.ERASE=26]="ERASE",e[e.SUBTRACT=28]="SUBTRACT",e[e.XOR=29]="XOR"})(T5||(T5={}));var S5;(function(e){e[e.POINTS=0]="POINTS",e[e.LINES=1]="LINES",e[e.LINE_LOOP=2]="LINE_LOOP",e[e.LINE_STRIP=3]="LINE_STRIP",e[e.TRIANGLES=4]="TRIANGLES",e[e.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",e[e.TRIANGLE_FAN=6]="TRIANGLE_FAN"})(S5||(S5={}));var E5;(function(e){e[e.RGBA=6408]="RGBA",e[e.RGB=6407]="RGB",e[e.RG=33319]="RG",e[e.RED=6403]="RED",e[e.RGBA_INTEGER=36249]="RGBA_INTEGER",e[e.RGB_INTEGER=36248]="RGB_INTEGER",e[e.RG_INTEGER=33320]="RG_INTEGER",e[e.RED_INTEGER=36244]="RED_INTEGER",e[e.ALPHA=6406]="ALPHA",e[e.LUMINANCE=6409]="LUMINANCE",e[e.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",e[e.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",e[e.DEPTH_STENCIL=34041]="DEPTH_STENCIL"})(E5||(E5={}));var C5;(function(e){e[e.TEXTURE_2D=3553]="TEXTURE_2D",e[e.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",e[e.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",e[e.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",e[e.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",e[e.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",e[e.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",e[e.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",e[e.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z"})(C5||(C5={}));var I5;(function(e){e[e.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",e[e.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",e[e.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",e[e.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",e[e.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",e[e.UNSIGNED_INT=5125]="UNSIGNED_INT",e[e.UNSIGNED_INT_10F_11F_11F_REV=35899]="UNSIGNED_INT_10F_11F_11F_REV",e[e.UNSIGNED_INT_2_10_10_10_REV=33640]="UNSIGNED_INT_2_10_10_10_REV",e[e.UNSIGNED_INT_24_8=34042]="UNSIGNED_INT_24_8",e[e.UNSIGNED_INT_5_9_9_9_REV=35902]="UNSIGNED_INT_5_9_9_9_REV",e[e.BYTE=5120]="BYTE",e[e.SHORT=5122]="SHORT",e[e.INT=5124]="INT",e[e.FLOAT=5126]="FLOAT",e[e.FLOAT_32_UNSIGNED_INT_24_8_REV=36269]="FLOAT_32_UNSIGNED_INT_24_8_REV",e[e.HALF_FLOAT=36193]="HALF_FLOAT"})(I5||(I5={}));var N5;(function(e){e[e.FLOAT=0]="FLOAT",e[e.INT=1]="INT",e[e.UINT=2]="UINT"})(N5||(N5={}));var bw;(function(e){e[e.NEAREST=0]="NEAREST",e[e.LINEAR=1]="LINEAR"})(bw||(bw={}));var ww;(function(e){e[e.CLAMP=33071]="CLAMP",e[e.REPEAT=10497]="REPEAT",e[e.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT"})(ww||(ww={}));var xw;(function(e){e[e.OFF=0]="OFF",e[e.POW2=1]="POW2",e[e.ON=2]="ON",e[e.ON_MANUAL=3]="ON_MANUAL"})(xw||(xw={}));var P5;(function(e){e[e.NPM=0]="NPM",e[e.UNPACK=1]="UNPACK",e[e.PMA=2]="PMA",e[e.NO_PREMULTIPLIED_ALPHA=0]="NO_PREMULTIPLIED_ALPHA",e[e.PREMULTIPLY_ON_UPLOAD=1]="PREMULTIPLY_ON_UPLOAD",e[e.PREMULTIPLY_ALPHA=2]="PREMULTIPLY_ALPHA",e[e.PREMULTIPLIED_ALPHA=2]="PREMULTIPLIED_ALPHA"})(P5||(P5={}));var A5;(function(e){e[e.NO=0]="NO",e[e.YES=1]="YES",e[e.AUTO=2]="AUTO",e[e.BLEND=0]="BLEND",e[e.CLEAR=1]="CLEAR",e[e.BLIT=2]="BLIT"})(A5||(A5={}));var Tw;(function(e){e[e.AUTO=0]="AUTO",e[e.MANUAL=1]="MANUAL"})(Tw||(Tw={}));var vd;(function(e){e.LOW="lowp",e.MEDIUM="mediump",e.HIGH="highp"})(vd||(vd={}));var R5;(function(e){e[e.NONE=0]="NONE",e[e.SCISSOR=1]="SCISSOR",e[e.STENCIL=2]="STENCIL",e[e.SPRITE=3]="SPRITE"})(R5||(R5={}));var Sw;(function(e){e[e.NONE=0]="NONE",e[e.LOW=2]="LOW",e[e.MEDIUM=4]="MEDIUM",e[e.HIGH=8]="HIGH"})(Sw||(Sw={}));var k5;(function(e){e[e.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",e[e.ARRAY_BUFFER=34962]="ARRAY_BUFFER",e[e.UNIFORM_BUFFER=35345]="UNIFORM_BUFFER"})(k5||(k5={}));var We={MIPMAP_TEXTURES:xw.POW2,ANISOTROPIC_LEVEL:0,RESOLUTION:1,FILTER_RESOLUTION:1,FILTER_MULTISAMPLE:Sw.NONE,SPRITE_MAX_TEXTURES:uK(32),SPRITE_BATCH_SIZE:4096,RENDER_OPTIONS:{view:null,antialias:!1,autoDensity:!1,backgroundColor:0,backgroundAlpha:1,useContextAlpha:!0,clearBeforeRender:!0,preserveDrawingBuffer:!1,width:800,height:600,legacy:!1},GC_MODE:Tw.AUTO,GC_MAX_IDLE:60*60,GC_MAX_CHECK_COUNT:60*10,WRAP_MODE:ww.CLAMP,SCALE_MODE:bw.LINEAR,PRECISION_VERTEX:vd.HIGH,PRECISION_FRAGMENT:Ko.apple.device?vd.HIGH:vd.MEDIUM,CAN_UPLOAD_SAME_BUFFER:cK(),CREATE_IMAGE_BITMAP:!1,ROUND_PIXELS:!1},hO={exports:{}};(function(e){var t=Object.prototype.hasOwnProperty,r="~";function n(){}Object.create&&(n.prototype=Object.create(null),new n().__proto__||(r=!1));function i(l,u,c){this.fn=l,this.context=u,this.once=c||!1}function o(l,u,c,f,p){if(typeof c!="function")throw new TypeError("The listener must be a function");var m=new i(c,f||l,p),g=r?r+u:u;return l._events[g]?l._events[g].fn?l._events[g]=[l._events[g],m]:l._events[g].push(m):(l._events[g]=m,l._eventsCount++),l}function s(l,u){--l._eventsCount===0?l._events=new n:delete l._events[u]}function a(){this._events=new n,this._eventsCount=0}a.prototype.eventNames=function(){var u=[],c,f;if(this._eventsCount===0)return u;for(f in c=this._events)t.call(c,f)&&u.push(r?f.slice(1):f);return Object.getOwnPropertySymbols?u.concat(Object.getOwnPropertySymbols(c)):u},a.prototype.listeners=function(u){var c=r?r+u:u,f=this._events[c];if(!f)return[];if(f.fn)return[f.fn];for(var p=0,m=f.length,g=new Array(m);p<m;p++)g[p]=f[p].fn;return g},a.prototype.listenerCount=function(u){var c=r?r+u:u,f=this._events[c];return f?f.fn?1:f.length:0},a.prototype.emit=function(u,c,f,p,m,g){var b=r?r+u:u;if(!this._events[b])return!1;var y=this._events[b],w=arguments.length,x,T;if(y.fn){switch(y.once&&this.removeListener(u,y.fn,void 0,!0),w){case 1:return y.fn.call(y.context),!0;case 2:return y.fn.call(y.context,c),!0;case 3:return y.fn.call(y.context,c,f),!0;case 4:return y.fn.call(y.context,c,f,p),!0;case 5:return y.fn.call(y.context,c,f,p,m),!0;case 6:return y.fn.call(y.context,c,f,p,m,g),!0}for(T=1,x=new Array(w-1);T<w;T++)x[T-1]=arguments[T];y.fn.apply(y.context,x)}else{var I=y.length,R;for(T=0;T<I;T++)switch(y[T].once&&this.removeListener(u,y[T].fn,void 0,!0),w){case 1:y[T].fn.call(y[T].context);break;case 2:y[T].fn.call(y[T].context,c);break;case 3:y[T].fn.call(y[T].context,c,f);break;case 4:y[T].fn.call(y[T].context,c,f,p);break;default:if(!x)for(R=1,x=new Array(w-1);R<w;R++)x[R-1]=arguments[R];y[T].fn.apply(y[T].context,x)}}return!0},a.prototype.on=function(u,c,f){return o(this,u,c,f,!1)},a.prototype.once=function(u,c,f){return o(this,u,c,f,!0)},a.prototype.removeListener=function(u,c,f,p){var m=r?r+u:u;if(!this._events[m])return this;if(!c)return s(this,m),this;var g=this._events[m];if(g.fn)g.fn===c&&(!p||g.once)&&(!f||g.context===f)&&s(this,m);else{for(var b=0,y=[],w=g.length;b<w;b++)(g[b].fn!==c||p&&!g[b].once||f&&g[b].context!==f)&&y.push(g[b]);y.length?this._events[m]=y.length===1?y[0]:y:s(this,m)}return this},a.prototype.removeAllListeners=function(u){var c;return u?(c=r?r+u:u,this._events[c]&&s(this,c)):(this._events=new n,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=r,a.EventEmitter=a,e.exports=a})(hO);const Oh=hO.exports;var Lh={exports:{}};Lh.exports=Ky;Lh.exports.default=Ky;function Ky(e,t,r){r=r||2;var n=t&&t.length,i=n?t[0]*r:e.length,o=fO(e,0,i,r,!0),s=[];if(!o||o.next===o.prev)return s;var a,l,u,c,f,p,m;if(n&&(o=mK(e,t,o,r)),e.length>80*r){a=u=e[0],l=c=e[1];for(var g=r;g<i;g+=r)f=e[g],p=e[g+1],f<a&&(a=f),p<l&&(l=p),f>u&&(u=f),p>c&&(c=p);m=Math.max(u-a,c-l),m=m!==0?32767/m:0}return qd(o,s,r,a,l,m,0),s}function fO(e,t,r,n,i){var o,s;if(i===Iw(e,t,r,n)>0)for(o=t;o<r;o+=n)s=O5(o,e[o],e[o+1],s);else for(o=r-n;o>=t;o-=n)s=O5(o,e[o],e[o+1],s);return s&&qy(s,s.next)&&(Jd(s),s=s.next),s}function vu(e,t){if(!e)return e;t||(t=e);var r=e,n;do if(n=!1,!r.steiner&&(qy(r,r.next)||yr(r.prev,r,r.next)===0)){if(Jd(r),r=t=r.prev,r===r.next)break;n=!0}else r=r.next;while(n||r!==t);return t}function qd(e,t,r,n,i,o,s){if(!!e){!s&&o&&bK(e,n,i,o);for(var a=e,l,u;e.prev!==e.next;){if(l=e.prev,u=e.next,o?fK(e,n,i,o):hK(e)){t.push(l.i/r|0),t.push(e.i/r|0),t.push(u.i/r|0),Jd(e),e=u.next,a=u.next;continue}if(e=u,e===a){s?s===1?(e=dK(vu(e),t,r),qd(e,t,r,n,i,o,2)):s===2&&pK(e,t,r,n,i,o):qd(vu(e),t,r,n,i,o,1);break}}}}function hK(e){var t=e.prev,r=e,n=e.next;if(yr(t,r,n)>=0)return!1;for(var i=t.x,o=r.x,s=n.x,a=t.y,l=r.y,u=n.y,c=i<o?i<s?i:s:o<s?o:s,f=a<l?a<u?a:u:l<u?l:u,p=i>o?i>s?i:s:o>s?o:s,m=a>l?a>u?a:u:l>u?l:u,g=n.next;g!==t;){if(g.x>=c&&g.x<=p&&g.y>=f&&g.y<=m&&Oc(i,a,o,l,s,u,g.x,g.y)&&yr(g.prev,g,g.next)>=0)return!1;g=g.next}return!0}function fK(e,t,r,n){var i=e.prev,o=e,s=e.next;if(yr(i,o,s)>=0)return!1;for(var a=i.x,l=o.x,u=s.x,c=i.y,f=o.y,p=s.y,m=a<l?a<u?a:u:l<u?l:u,g=c<f?c<p?c:p:f<p?f:p,b=a>l?a>u?a:u:l>u?l:u,y=c>f?c>p?c:p:f>p?f:p,w=Ew(m,g,t,r,n),x=Ew(b,y,t,r,n),T=e.prevZ,I=e.nextZ;T&&T.z>=w&&I&&I.z<=x;){if(T.x>=m&&T.x<=b&&T.y>=g&&T.y<=y&&T!==i&&T!==s&&Oc(a,c,l,f,u,p,T.x,T.y)&&yr(T.prev,T,T.next)>=0||(T=T.prevZ,I.x>=m&&I.x<=b&&I.y>=g&&I.y<=y&&I!==i&&I!==s&&Oc(a,c,l,f,u,p,I.x,I.y)&&yr(I.prev,I,I.next)>=0))return!1;I=I.nextZ}for(;T&&T.z>=w;){if(T.x>=m&&T.x<=b&&T.y>=g&&T.y<=y&&T!==i&&T!==s&&Oc(a,c,l,f,u,p,T.x,T.y)&&yr(T.prev,T,T.next)>=0)return!1;T=T.prevZ}for(;I&&I.z<=x;){if(I.x>=m&&I.x<=b&&I.y>=g&&I.y<=y&&I!==i&&I!==s&&Oc(a,c,l,f,u,p,I.x,I.y)&&yr(I.prev,I,I.next)>=0)return!1;I=I.nextZ}return!0}function dK(e,t,r){var n=e;do{var i=n.prev,o=n.next.next;!qy(i,o)&&dO(i,n,n.next,o)&&Zd(i,o)&&Zd(o,i)&&(t.push(i.i/r|0),t.push(n.i/r|0),t.push(o.i/r|0),Jd(n),Jd(n.next),n=e=o),n=n.next}while(n!==e);return vu(n)}function pK(e,t,r,n,i,o){var s=e;do{for(var a=s.next.next;a!==s.prev;){if(s.i!==a.i&&TK(s,a)){var l=pO(s,a);s=vu(s,s.next),l=vu(l,l.next),qd(s,t,r,n,i,o,0),qd(l,t,r,n,i,o,0);return}a=a.next}s=s.next}while(s!==e)}function mK(e,t,r,n){var i=[],o,s,a,l,u;for(o=0,s=t.length;o<s;o++)a=t[o]*n,l=o<s-1?t[o+1]*n:e.length,u=fO(e,a,l,n,!1),u===u.next&&(u.steiner=!0),i.push(xK(u));for(i.sort(vK),o=0;o<i.length;o++)r=gK(i[o],r);return r}function vK(e,t){return e.x-t.x}function gK(e,t){var r=yK(e,t);if(!r)return t;var n=pO(r,e);return vu(n,n.next),vu(r,r.next)}function yK(e,t){var r=t,n=e.x,i=e.y,o=-1/0,s;do{if(i<=r.y&&i>=r.next.y&&r.next.y!==r.y){var a=r.x+(i-r.y)*(r.next.x-r.x)/(r.next.y-r.y);if(a<=n&&a>o&&(o=a,s=r.x<r.next.x?r:r.next,a===n))return s}r=r.next}while(r!==t);if(!s)return null;var l=s,u=s.x,c=s.y,f=1/0,p;r=s;do n>=r.x&&r.x>=u&&n!==r.x&&Oc(i<c?n:o,i,u,c,i<c?o:n,i,r.x,r.y)&&(p=Math.abs(i-r.y)/(n-r.x),Zd(r,e)&&(p<f||p===f&&(r.x>s.x||r.x===s.x&&_K(s,r)))&&(s=r,f=p)),r=r.next;while(r!==l);return s}function _K(e,t){return yr(e.prev,e,t.prev)<0&&yr(t.next,e,e.next)<0}function bK(e,t,r,n){var i=e;do i.z===0&&(i.z=Ew(i.x,i.y,t,r,n)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next;while(i!==e);i.prevZ.nextZ=null,i.prevZ=null,wK(i)}function wK(e){var t,r,n,i,o,s,a,l,u=1;do{for(r=e,e=null,o=null,s=0;r;){for(s++,n=r,a=0,t=0;t<u&&(a++,n=n.nextZ,!!n);t++);for(l=u;a>0||l>0&&n;)a!==0&&(l===0||!n||r.z<=n.z)?(i=r,r=r.nextZ,a--):(i=n,n=n.nextZ,l--),o?o.nextZ=i:e=i,i.prevZ=o,o=i;r=n}o.nextZ=null,u*=2}while(s>1);return e}function Ew(e,t,r,n,i){return e=(e-r)*i|0,t=(t-n)*i|0,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,t=(t|t<<8)&16711935,t=(t|t<<4)&252645135,t=(t|t<<2)&858993459,t=(t|t<<1)&1431655765,e|t<<1}function xK(e){var t=e,r=e;do(t.x<r.x||t.x===r.x&&t.y<r.y)&&(r=t),t=t.next;while(t!==e);return r}function Oc(e,t,r,n,i,o,s,a){return(i-s)*(t-a)>=(e-s)*(o-a)&&(e-s)*(n-a)>=(r-s)*(t-a)&&(r-s)*(o-a)>=(i-s)*(n-a)}function TK(e,t){return e.next.i!==t.i&&e.prev.i!==t.i&&!SK(e,t)&&(Zd(e,t)&&Zd(t,e)&&EK(e,t)&&(yr(e.prev,e,t.prev)||yr(e,t.prev,t))||qy(e,t)&&yr(e.prev,e,e.next)>0&&yr(t.prev,t,t.next)>0)}function yr(e,t,r){return(t.y-e.y)*(r.x-t.x)-(t.x-e.x)*(r.y-t.y)}function qy(e,t){return e.x===t.x&&e.y===t.y}function dO(e,t,r,n){var i=vv(yr(e,t,r)),o=vv(yr(e,t,n)),s=vv(yr(r,n,e)),a=vv(yr(r,n,t));return!!(i!==o&&s!==a||i===0&&mv(e,r,t)||o===0&&mv(e,n,t)||s===0&&mv(r,e,n)||a===0&&mv(r,t,n))}function mv(e,t,r){return t.x<=Math.max(e.x,r.x)&&t.x>=Math.min(e.x,r.x)&&t.y<=Math.max(e.y,r.y)&&t.y>=Math.min(e.y,r.y)}function vv(e){return e>0?1:e<0?-1:0}function SK(e,t){var r=e;do{if(r.i!==e.i&&r.next.i!==e.i&&r.i!==t.i&&r.next.i!==t.i&&dO(r,r.next,e,t))return!0;r=r.next}while(r!==e);return!1}function Zd(e,t){return yr(e.prev,e,e.next)<0?yr(e,t,e.next)>=0&&yr(e,e.prev,t)>=0:yr(e,t,e.prev)<0||yr(e,e.next,t)<0}function EK(e,t){var r=e,n=!1,i=(e.x+t.x)/2,o=(e.y+t.y)/2;do r.y>o!=r.next.y>o&&r.next.y!==r.y&&i<(r.next.x-r.x)*(o-r.y)/(r.next.y-r.y)+r.x&&(n=!n),r=r.next;while(r!==e);return n}function pO(e,t){var r=new Cw(e.i,e.x,e.y),n=new Cw(t.i,t.x,t.y),i=e.next,o=t.prev;return e.next=t,t.prev=e,r.next=i,i.prev=r,n.next=r,r.prev=n,o.next=n,n.prev=o,n}function O5(e,t,r,n){var i=new Cw(e,t,r);return n?(i.next=n.next,i.prev=n,n.next.prev=i,n.next=i):(i.prev=i,i.next=i),i}function Jd(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function Cw(e,t,r){this.i=e,this.x=t,this.y=r,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}Ky.deviation=function(e,t,r,n){var i=t&&t.length,o=i?t[0]*r:e.length,s=Math.abs(Iw(e,0,o,r));if(i)for(var a=0,l=t.length;a<l;a++){var u=t[a]*r,c=a<l-1?t[a+1]*r:e.length;s-=Math.abs(Iw(e,u,c,r))}var f=0;for(a=0;a<n.length;a+=3){var p=n[a]*r,m=n[a+1]*r,g=n[a+2]*r;f+=Math.abs((e[p]-e[g])*(e[m+1]-e[p+1])-(e[p]-e[m])*(e[g+1]-e[p+1]))}return s===0&&f===0?0:Math.abs((f-s)/s)};function Iw(e,t,r,n){for(var i=0,o=t,s=r-n;o<r;o+=n)i+=(e[s]-e[o])*(e[o+1]+e[s+1]),s=o;return i}Ky.flatten=function(e){for(var t=e[0][0].length,r={vertices:[],holes:[],dimensions:t},n=0,i=0;i<e.length;i++){for(var o=0;o<e[i].length;o++)for(var s=0;s<t;s++)r.vertices.push(e[i][o][s]);i>0&&(n+=e[i-1].length,r.holes.push(n))}return r};/*! https://mths.be/punycode v1.4.1 by @mathias */var r_=2147483647,gd=36,mO=1,Nw=26,CK=38,IK=700,NK=72,PK=128,AK="-",RK=/[^\x20-\x7E]/,kK=/[\x2E\u3002\uFF0E\uFF61]/g,OK={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},n_=gd-mO,Lc=Math.floor,i_=String.fromCharCode;function L5(e){throw new RangeError(OK[e])}function LK(e,t){for(var r=e.length,n=[];r--;)n[r]=t(e[r]);return n}function UK(e,t){var r=e.split("@"),n="";r.length>1&&(n=r[0]+"@",e=r[1]),e=e.replace(kK,".");var i=e.split("."),o=LK(i,t).join(".");return n+o}function FK(e){for(var t=[],r=0,n=e.length,i,o;r<n;)i=e.charCodeAt(r++),i>=55296&&i<=56319&&r<n?(o=e.charCodeAt(r++),(o&64512)==56320?t.push(((i&1023)<<10)+(o&1023)+65536):(t.push(i),r--)):t.push(i);return t}function U5(e,t){return e+22+75*(e<26)-((t!=0)<<5)}function MK(e,t,r){var n=0;for(e=r?Lc(e/IK):e>>1,e+=Lc(e/t);e>n_*Nw>>1;n+=gd)e=Lc(e/n_);return Lc(n+(n_+1)*e/(e+CK))}function BK(e){var t,r,n,i,o,s,a,l,u,c,f,p=[],m,g,b,y;for(e=FK(e),m=e.length,t=PK,r=0,o=NK,s=0;s<m;++s)f=e[s],f<128&&p.push(i_(f));for(n=i=p.length,i&&p.push(AK);n<m;){for(a=r_,s=0;s<m;++s)f=e[s],f>=t&&f<a&&(a=f);for(g=n+1,a-t>Lc((r_-r)/g)&&L5("overflow"),r+=(a-t)*g,t=a,s=0;s<m;++s)if(f=e[s],f<t&&++r>r_&&L5("overflow"),f==t){for(l=r,u=gd;c=u<=o?mO:u>=o+Nw?Nw:u-o,!(l<c);u+=gd)y=l-c,b=gd-c,p.push(i_(U5(c+y%b,0))),l=Lc(y/b);p.push(i_(U5(l,0))),o=MK(r,g,n==i),r=0,++n}++r,++t}return p.join("")}function DK(e){return UK(e,function(t){return RK.test(t)?"xn--"+BK(t):t})}function gv(e){return e===null}function GK(e){return e==null}function O4(e){return typeof e=="string"}function vO(e){return typeof e=="object"&&e!==null}function jK(e,t){return Object.prototype.hasOwnProperty.call(e,t)}var gO=Array.isArray||function(e){return Object.prototype.toString.call(e)==="[object Array]"};function Lf(e){switch(typeof e){case"string":return e;case"boolean":return e?"true":"false";case"number":return isFinite(e)?e:"";default:return""}}function $K(e,t,r,n){return t=t||"&",r=r||"=",e===null&&(e=void 0),typeof e=="object"?F5(HK(e),function(i){var o=encodeURIComponent(Lf(i))+r;return gO(e[i])?F5(e[i],function(s){return o+encodeURIComponent(Lf(s))}).join(t):o+encodeURIComponent(Lf(e[i]))}).join(t):n?encodeURIComponent(Lf(n))+r+encodeURIComponent(Lf(e)):""}function F5(e,t){if(e.map)return e.map(t);for(var r=[],n=0;n<e.length;n++)r.push(t(e[n],n));return r}var HK=Object.keys||function(e){var t=[];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.push(r);return t};function M5(e,t,r,n){t=t||"&",r=r||"=";var i={};if(typeof e!="string"||e.length===0)return i;var o=/\+/g;e=e.split(t);var s=1e3;n&&typeof n.maxKeys=="number"&&(s=n.maxKeys);var a=e.length;s>0&&a>s&&(a=s);for(var l=0;l<a;++l){var u=e[l].replace(o,"%20"),c=u.indexOf(r),f,p,m,g;c>=0?(f=u.substr(0,c),p=u.substr(c+1)):(f=u,p=""),m=decodeURIComponent(f),g=decodeURIComponent(p),jK(i,m)?gO(i[m])?i[m].push(g):i[m]=[i[m],g]:i[m]=g}return i}function Vs(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}var zK=/^([a-z0-9.+-]+:)/i,VK=/:[0-9]*$/,XK=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,WK=["<",">",'"',"`"," ","\r",`
`,"	"],YK=["{","}","|","\\","^","`"].concat(WK),Pw=["'"].concat(YK),B5=["%","/","?",";","#"].concat(Pw),D5=["/","?","#"],KK=255,G5=/^[+a-z0-9A-Z_-]{0,63}$/,qK=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,ZK={javascript:!0,"javascript:":!0},Aw={javascript:!0,"javascript:":!0},Zc={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0};function L4(e,t,r){if(e&&vO(e)&&e instanceof Vs)return e;var n=new Vs;return n.parse(e,t,r),n}Vs.prototype.parse=function(e,t,r){return yO(this,e,t,r)};function yO(e,t,r,n){if(!O4(t))throw new TypeError("Parameter 'url' must be a string, not "+typeof t);var i=t.indexOf("?"),o=i!==-1&&i<t.indexOf("#")?"?":"#",s=t.split(o),a=/\\/g;s[0]=s[0].replace(a,"/"),t=s.join(o);var l=t;if(l=l.trim(),!n&&t.split("#").length===1){var u=XK.exec(l);if(u)return e.path=l,e.href=l,e.pathname=u[1],u[2]?(e.search=u[2],r?e.query=M5(e.search.substr(1)):e.query=e.search.substr(1)):r&&(e.search="",e.query={}),e}var c=zK.exec(l);if(c){c=c[0];var f=c.toLowerCase();e.protocol=f,l=l.substr(c.length)}if(n||c||l.match(/^\/\/[^@\/]+@[^@\/]+/)){var p=l.substr(0,2)==="//";p&&!(c&&Aw[c])&&(l=l.substr(2),e.slashes=!0)}var m,g,b,y;if(!Aw[c]&&(p||c&&!Zc[c])){var w=-1;for(m=0;m<D5.length;m++)g=l.indexOf(D5[m]),g!==-1&&(w===-1||g<w)&&(w=g);var x,T;for(w===-1?T=l.lastIndexOf("@"):T=l.lastIndexOf("@",w),T!==-1&&(x=l.slice(0,T),l=l.slice(T+1),e.auth=decodeURIComponent(x)),w=-1,m=0;m<B5.length;m++)g=l.indexOf(B5[m]),g!==-1&&(w===-1||g<w)&&(w=g);w===-1&&(w=l.length),e.host=l.slice(0,w),l=l.slice(w),_O(e),e.hostname=e.hostname||"";var I=e.hostname[0]==="["&&e.hostname[e.hostname.length-1]==="]";if(!I){var R=e.hostname.split(/\./);for(m=0,b=R.length;m<b;m++){var S=R[m];if(!!S&&!S.match(G5)){for(var O="",P=0,N=S.length;P<N;P++)S.charCodeAt(P)>127?O+="x":O+=S[P];if(!O.match(G5)){var A=R.slice(0,m),j=R.slice(m+1),X=S.match(qK);X&&(A.push(X[1]),j.unshift(X[2])),j.length&&(l="/"+j.join(".")+l),e.hostname=A.join(".");break}}}}e.hostname.length>KK?e.hostname="":e.hostname=e.hostname.toLowerCase(),I||(e.hostname=DK(e.hostname)),y=e.port?":"+e.port:"";var G=e.hostname||"";e.host=G+y,e.href+=e.host,I&&(e.hostname=e.hostname.substr(1,e.hostname.length-2),l[0]!=="/"&&(l="/"+l))}if(!ZK[f])for(m=0,b=Pw.length;m<b;m++){var ne=Pw[m];if(l.indexOf(ne)!==-1){var W=encodeURIComponent(ne);W===ne&&(W=escape(ne)),l=l.split(ne).join(W)}}var Y=l.indexOf("#");Y!==-1&&(e.hash=l.substr(Y),l=l.slice(0,Y));var de=l.indexOf("?");if(de!==-1?(e.search=l.substr(de),e.query=l.substr(de+1),r&&(e.query=M5(e.query)),l=l.slice(0,de)):r&&(e.search="",e.query={}),l&&(e.pathname=l),Zc[f]&&e.hostname&&!e.pathname&&(e.pathname="/"),e.pathname||e.search){y=e.pathname||"";var le=e.search||"";e.path=y+le}return e.href=U4(e),e}function JK(e){return O4(e)&&(e=yO({},e)),U4(e)}function U4(e){var t=e.auth||"";t&&(t=encodeURIComponent(t),t=t.replace(/%3A/i,":"),t+="@");var r=e.protocol||"",n=e.pathname||"",i=e.hash||"",o=!1,s="";e.host?o=t+e.host:e.hostname&&(o=t+(e.hostname.indexOf(":")===-1?e.hostname:"["+this.hostname+"]"),e.port&&(o+=":"+e.port)),e.query&&vO(e.query)&&Object.keys(e.query).length&&(s=$K(e.query));var a=e.search||s&&"?"+s||"";return r&&r.substr(-1)!==":"&&(r+=":"),e.slashes||(!r||Zc[r])&&o!==!1?(o="//"+(o||""),n&&n.charAt(0)!=="/"&&(n="/"+n)):o||(o=""),i&&i.charAt(0)!=="#"&&(i="#"+i),a&&a.charAt(0)!=="?"&&(a="?"+a),n=n.replace(/[?#]/g,function(l){return encodeURIComponent(l)}),a=a.replace("#","%23"),r+o+n+a+i}Vs.prototype.format=function(){return U4(this)};function QK(e,t){return L4(e,!1,!0).resolve(t)}Vs.prototype.resolve=function(e){return this.resolveObject(L4(e,!1,!0)).format()};Vs.prototype.resolveObject=function(e){if(O4(e)){var t=new Vs;t.parse(e,!1,!0),e=t}for(var r=new Vs,n=Object.keys(this),i=0;i<n.length;i++){var o=n[i];r[o]=this[o]}if(r.hash=e.hash,e.href==="")return r.href=r.format(),r;if(e.slashes&&!e.protocol){for(var s=Object.keys(e),a=0;a<s.length;a++){var l=s[a];l!=="protocol"&&(r[l]=e[l])}return Zc[r.protocol]&&r.hostname&&!r.pathname&&(r.path=r.pathname="/"),r.href=r.format(),r}var u;if(e.protocol&&e.protocol!==r.protocol){if(!Zc[e.protocol]){for(var c=Object.keys(e),f=0;f<c.length;f++){var p=c[f];r[p]=e[p]}return r.href=r.format(),r}if(r.protocol=e.protocol,!e.host&&!Aw[e.protocol]){for(u=(e.pathname||"").split("/");u.length&&!(e.host=u.shift()););e.host||(e.host=""),e.hostname||(e.hostname=""),u[0]!==""&&u.unshift(""),u.length<2&&u.unshift(""),r.pathname=u.join("/")}else r.pathname=e.pathname;if(r.search=e.search,r.query=e.query,r.host=e.host||"",r.auth=e.auth,r.hostname=e.hostname||e.host,r.port=e.port,r.pathname||r.search){var m=r.pathname||"",g=r.search||"";r.path=m+g}return r.slashes=r.slashes||e.slashes,r.href=r.format(),r}var b=r.pathname&&r.pathname.charAt(0)==="/",y=e.host||e.pathname&&e.pathname.charAt(0)==="/",w=y||b||r.host&&e.pathname,x=w,T=r.pathname&&r.pathname.split("/")||[],I=r.protocol&&!Zc[r.protocol];u=e.pathname&&e.pathname.split("/")||[],I&&(r.hostname="",r.port=null,r.host&&(T[0]===""?T[0]=r.host:T.unshift(r.host)),r.host="",e.protocol&&(e.hostname=null,e.port=null,e.host&&(u[0]===""?u[0]=e.host:u.unshift(e.host)),e.host=null),w=w&&(u[0]===""||T[0]===""));var R;if(y)r.host=e.host||e.host===""?e.host:r.host,r.hostname=e.hostname||e.hostname===""?e.hostname:r.hostname,r.search=e.search,r.query=e.query,T=u;else if(u.length)T||(T=[]),T.pop(),T=T.concat(u),r.search=e.search,r.query=e.query;else if(!GK(e.search))return I&&(r.hostname=r.host=T.shift(),R=r.host&&r.host.indexOf("@")>0?r.host.split("@"):!1,R&&(r.auth=R.shift(),r.host=r.hostname=R.shift())),r.search=e.search,r.query=e.query,(!gv(r.pathname)||!gv(r.search))&&(r.path=(r.pathname?r.pathname:"")+(r.search?r.search:"")),r.href=r.format(),r;if(!T.length)return r.pathname=null,r.search?r.path="/"+r.search:r.path=null,r.href=r.format(),r;for(var S=T.slice(-1)[0],O=(r.host||e.host||T.length>1)&&(S==="."||S==="..")||S==="",P=0,N=T.length;N>=0;N--)S=T[N],S==="."?T.splice(N,1):S===".."?(T.splice(N,1),P++):P&&(T.splice(N,1),P--);if(!w&&!x)for(;P--;P)T.unshift("..");w&&T[0]!==""&&(!T[0]||T[0].charAt(0)!=="/")&&T.unshift(""),O&&T.join("/").substr(-1)!=="/"&&T.push("");var A=T[0]===""||T[0]&&T[0].charAt(0)==="/";return I&&(r.hostname=r.host=A?"":T.length?T.shift():"",R=r.host&&r.host.indexOf("@")>0?r.host.split("@"):!1,R&&(r.auth=R.shift(),r.host=r.hostname=R.shift())),w=w||r.host&&T.length,w&&!A&&T.unshift(""),T.length?r.pathname=T.join("/"):(r.pathname=null,r.path=null),(!gv(r.pathname)||!gv(r.search))&&(r.path=(r.pathname?r.pathname:"")+(r.search?r.search:"")),r.auth=e.auth||r.auth,r.slashes=r.slashes||e.slashes,r.href=r.format(),r};Vs.prototype.parseHost=function(){return _O(this)};function _O(e){var t=e.host,r=VK.exec(t);r&&(r=r[0],r!==":"&&(e.port=r.substr(1)),t=t.substr(0,t.length-r.length)),t&&(e.hostname=t)}/*!
 * @pixi/constants - v6.4.2
 * Compiled Thu, 02 Jun 2022 15:39:26 UTC
 *
 * @pixi/constants is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var Zs;(function(e){e[e.WEBGL_LEGACY=0]="WEBGL_LEGACY",e[e.WEBGL=1]="WEBGL",e[e.WEBGL2=2]="WEBGL2"})(Zs||(Zs={}));var Qd;(function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.WEBGL=1]="WEBGL",e[e.CANVAS=2]="CANVAS"})(Qd||(Qd={}));var Ig;(function(e){e[e.COLOR=16384]="COLOR",e[e.DEPTH=256]="DEPTH",e[e.STENCIL=1024]="STENCIL"})(Ig||(Ig={}));var Ze;(function(e){e[e.NORMAL=0]="NORMAL",e[e.ADD=1]="ADD",e[e.MULTIPLY=2]="MULTIPLY",e[e.SCREEN=3]="SCREEN",e[e.OVERLAY=4]="OVERLAY",e[e.DARKEN=5]="DARKEN",e[e.LIGHTEN=6]="LIGHTEN",e[e.COLOR_DODGE=7]="COLOR_DODGE",e[e.COLOR_BURN=8]="COLOR_BURN",e[e.HARD_LIGHT=9]="HARD_LIGHT",e[e.SOFT_LIGHT=10]="SOFT_LIGHT",e[e.DIFFERENCE=11]="DIFFERENCE",e[e.EXCLUSION=12]="EXCLUSION",e[e.HUE=13]="HUE",e[e.SATURATION=14]="SATURATION",e[e.COLOR=15]="COLOR",e[e.LUMINOSITY=16]="LUMINOSITY",e[e.NORMAL_NPM=17]="NORMAL_NPM",e[e.ADD_NPM=18]="ADD_NPM",e[e.SCREEN_NPM=19]="SCREEN_NPM",e[e.NONE=20]="NONE",e[e.SRC_OVER=0]="SRC_OVER",e[e.SRC_IN=21]="SRC_IN",e[e.SRC_OUT=22]="SRC_OUT",e[e.SRC_ATOP=23]="SRC_ATOP",e[e.DST_OVER=24]="DST_OVER",e[e.DST_IN=25]="DST_IN",e[e.DST_OUT=26]="DST_OUT",e[e.DST_ATOP=27]="DST_ATOP",e[e.ERASE=26]="ERASE",e[e.SUBTRACT=28]="SUBTRACT",e[e.XOR=29]="XOR"})(Ze||(Ze={}));var Ni;(function(e){e[e.POINTS=0]="POINTS",e[e.LINES=1]="LINES",e[e.LINE_LOOP=2]="LINE_LOOP",e[e.LINE_STRIP=3]="LINE_STRIP",e[e.TRIANGLES=4]="TRIANGLES",e[e.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",e[e.TRIANGLE_FAN=6]="TRIANGLE_FAN"})(Ni||(Ni={}));var Te;(function(e){e[e.RGBA=6408]="RGBA",e[e.RGB=6407]="RGB",e[e.RG=33319]="RG",e[e.RED=6403]="RED",e[e.RGBA_INTEGER=36249]="RGBA_INTEGER",e[e.RGB_INTEGER=36248]="RGB_INTEGER",e[e.RG_INTEGER=33320]="RG_INTEGER",e[e.RED_INTEGER=36244]="RED_INTEGER",e[e.ALPHA=6406]="ALPHA",e[e.LUMINANCE=6409]="LUMINANCE",e[e.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",e[e.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",e[e.DEPTH_STENCIL=34041]="DEPTH_STENCIL"})(Te||(Te={}));var ru;(function(e){e[e.TEXTURE_2D=3553]="TEXTURE_2D",e[e.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",e[e.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",e[e.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",e[e.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",e[e.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",e[e.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",e[e.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",e[e.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z"})(ru||(ru={}));var $e;(function(e){e[e.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",e[e.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",e[e.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",e[e.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",e[e.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",e[e.UNSIGNED_INT=5125]="UNSIGNED_INT",e[e.UNSIGNED_INT_10F_11F_11F_REV=35899]="UNSIGNED_INT_10F_11F_11F_REV",e[e.UNSIGNED_INT_2_10_10_10_REV=33640]="UNSIGNED_INT_2_10_10_10_REV",e[e.UNSIGNED_INT_24_8=34042]="UNSIGNED_INT_24_8",e[e.UNSIGNED_INT_5_9_9_9_REV=35902]="UNSIGNED_INT_5_9_9_9_REV",e[e.BYTE=5120]="BYTE",e[e.SHORT=5122]="SHORT",e[e.INT=5124]="INT",e[e.FLOAT=5126]="FLOAT",e[e.FLOAT_32_UNSIGNED_INT_24_8_REV=36269]="FLOAT_32_UNSIGNED_INT_24_8_REV",e[e.HALF_FLOAT=36193]="HALF_FLOAT"})($e||($e={}));var Ng;(function(e){e[e.FLOAT=0]="FLOAT",e[e.INT=1]="INT",e[e.UINT=2]="UINT"})(Ng||(Ng={}));var St;(function(e){e[e.NEAREST=0]="NEAREST",e[e.LINEAR=1]="LINEAR"})(St||(St={}));var ts;(function(e){e[e.CLAMP=33071]="CLAMP",e[e.REPEAT=10497]="REPEAT",e[e.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT"})(ts||(ts={}));var Js;(function(e){e[e.OFF=0]="OFF",e[e.POW2=1]="POW2",e[e.ON=2]="ON",e[e.ON_MANUAL=3]="ON_MANUAL"})(Js||(Js={}));var So;(function(e){e[e.NPM=0]="NPM",e[e.UNPACK=1]="UNPACK",e[e.PMA=2]="PMA",e[e.NO_PREMULTIPLIED_ALPHA=0]="NO_PREMULTIPLIED_ALPHA",e[e.PREMULTIPLY_ON_UPLOAD=1]="PREMULTIPLY_ON_UPLOAD",e[e.PREMULTIPLY_ALPHA=2]="PREMULTIPLY_ALPHA",e[e.PREMULTIPLIED_ALPHA=2]="PREMULTIPLIED_ALPHA"})(So||(So={}));var Ea;(function(e){e[e.NO=0]="NO",e[e.YES=1]="YES",e[e.AUTO=2]="AUTO",e[e.BLEND=0]="BLEND",e[e.CLEAR=1]="CLEAR",e[e.BLIT=2]="BLIT"})(Ea||(Ea={}));var Rw;(function(e){e[e.AUTO=0]="AUTO",e[e.MANUAL=1]="MANUAL"})(Rw||(Rw={}));var qo;(function(e){e.LOW="lowp",e.MEDIUM="mediump",e.HIGH="highp"})(qo||(qo={}));var Ln;(function(e){e[e.NONE=0]="NONE",e[e.SCISSOR=1]="SCISSOR",e[e.STENCIL=2]="STENCIL",e[e.SPRITE=3]="SPRITE"})(Ln||(Ln={}));var Ur;(function(e){e[e.NONE=0]="NONE",e[e.LOW=2]="LOW",e[e.MEDIUM=4]="MEDIUM",e[e.HIGH=8]="HIGH"})(Ur||(Ur={}));var rs;(function(e){e[e.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",e[e.ARRAY_BUFFER=34962]="ARRAY_BUFFER",e[e.UNIFORM_BUFFER=35345]="UNIFORM_BUFFER"})(rs||(rs={}));/*!
 * @pixi/utils - v6.4.2
 * Compiled Thu, 02 Jun 2022 15:39:26 UTC
 *
 * @pixi/utils is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var Uc={parse:L4,format:JK,resolve:QK};We.RETINA_PREFIX=/@([0-9\.]+)x/;We.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT=!1;var j5=!1,$5="6.4.2";function eq(e){var t;if(!j5){if(navigator.userAgent.toLowerCase().indexOf("chrome")>-1){var r=[`
 %c %c %c PixiJS `+$5+" - \u2730 "+e+` \u2730  %c  %c  http://www.pixijs.com/  %c %c \u2665%c\u2665%c\u2665 

`,"background: #ff66a5; padding:5px 0;","background: #ff66a5; padding:5px 0;","color: #ff66a5; background: #030307; padding:5px 0;","background: #ff66a5; padding:5px 0;","background: #ffc3dc; padding:5px 0;","background: #ff66a5; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;"];(t=globalThis.console).log.apply(t,r)}else globalThis.console&&globalThis.console.log("PixiJS "+$5+" - "+e+" - http://www.pixijs.com/");j5=!0}}var o_;function tq(){return typeof o_>"u"&&(o_=function(){var t={stencil:!0,failIfMajorPerformanceCaveat:We.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT};try{if(!globalThis.WebGLRenderingContext)return!1;var r=document.createElement("canvas"),n=r.getContext("webgl",t)||r.getContext("experimental-webgl",t),i=!!(n&&n.getContextAttributes().stencil);if(n){var o=n.getExtension("WEBGL_lose_context");o&&o.loseContext()}return n=null,i}catch{return!1}}()),o_}var rq="#f0f8ff",nq="#faebd7",iq="#00ffff",oq="#7fffd4",sq="#f0ffff",aq="#f5f5dc",lq="#ffe4c4",uq="#000000",cq="#ffebcd",hq="#0000ff",fq="#8a2be2",dq="#a52a2a",pq="#deb887",mq="#5f9ea0",vq="#7fff00",gq="#d2691e",yq="#ff7f50",_q="#6495ed",bq="#fff8dc",wq="#dc143c",xq="#00ffff",Tq="#00008b",Sq="#008b8b",Eq="#b8860b",Cq="#a9a9a9",Iq="#006400",Nq="#a9a9a9",Pq="#bdb76b",Aq="#8b008b",Rq="#556b2f",kq="#ff8c00",Oq="#9932cc",Lq="#8b0000",Uq="#e9967a",Fq="#8fbc8f",Mq="#483d8b",Bq="#2f4f4f",Dq="#2f4f4f",Gq="#00ced1",jq="#9400d3",$q="#ff1493",Hq="#00bfff",zq="#696969",Vq="#696969",Xq="#1e90ff",Wq="#b22222",Yq="#fffaf0",Kq="#228b22",qq="#ff00ff",Zq="#dcdcdc",Jq="#f8f8ff",Qq="#daa520",eZ="#ffd700",tZ="#808080",rZ="#008000",nZ="#adff2f",iZ="#808080",oZ="#f0fff0",sZ="#ff69b4",aZ="#cd5c5c",lZ="#4b0082",uZ="#fffff0",cZ="#f0e68c",hZ="#fff0f5",fZ="#e6e6fa",dZ="#7cfc00",pZ="#fffacd",mZ="#add8e6",vZ="#f08080",gZ="#e0ffff",yZ="#fafad2",_Z="#d3d3d3",bZ="#90ee90",wZ="#d3d3d3",xZ="#ffb6c1",TZ="#ffa07a",SZ="#20b2aa",EZ="#87cefa",CZ="#778899",IZ="#778899",NZ="#b0c4de",PZ="#ffffe0",AZ="#00ff00",RZ="#32cd32",kZ="#faf0e6",OZ="#ff00ff",LZ="#800000",UZ="#66cdaa",FZ="#0000cd",MZ="#ba55d3",BZ="#9370db",DZ="#3cb371",GZ="#7b68ee",jZ="#00fa9a",$Z="#48d1cc",HZ="#c71585",zZ="#191970",VZ="#f5fffa",XZ="#ffe4e1",WZ="#ffe4b5",YZ="#ffdead",KZ="#000080",qZ="#fdf5e6",ZZ="#808000",JZ="#6b8e23",QZ="#ffa500",eJ="#ff4500",tJ="#da70d6",rJ="#eee8aa",nJ="#98fb98",iJ="#afeeee",oJ="#db7093",sJ="#ffefd5",aJ="#ffdab9",lJ="#cd853f",uJ="#ffc0cb",cJ="#dda0dd",hJ="#b0e0e6",fJ="#800080",dJ="#663399",pJ="#ff0000",mJ="#bc8f8f",vJ="#4169e1",gJ="#8b4513",yJ="#fa8072",_J="#f4a460",bJ="#2e8b57",wJ="#fff5ee",xJ="#a0522d",TJ="#c0c0c0",SJ="#87ceeb",EJ="#6a5acd",CJ="#708090",IJ="#708090",NJ="#fffafa",PJ="#00ff7f",AJ="#4682b4",RJ="#d2b48c",kJ="#008080",OJ="#d8bfd8",LJ="#ff6347",UJ="#40e0d0",FJ="#ee82ee",MJ="#f5deb3",BJ="#ffffff",DJ="#f5f5f5",GJ="#ffff00",jJ="#9acd32",$J={aliceblue:rq,antiquewhite:nq,aqua:iq,aquamarine:oq,azure:sq,beige:aq,bisque:lq,black:uq,blanchedalmond:cq,blue:hq,blueviolet:fq,brown:dq,burlywood:pq,cadetblue:mq,chartreuse:vq,chocolate:gq,coral:yq,cornflowerblue:_q,cornsilk:bq,crimson:wq,cyan:xq,darkblue:Tq,darkcyan:Sq,darkgoldenrod:Eq,darkgray:Cq,darkgreen:Iq,darkgrey:Nq,darkkhaki:Pq,darkmagenta:Aq,darkolivegreen:Rq,darkorange:kq,darkorchid:Oq,darkred:Lq,darksalmon:Uq,darkseagreen:Fq,darkslateblue:Mq,darkslategray:Bq,darkslategrey:Dq,darkturquoise:Gq,darkviolet:jq,deeppink:$q,deepskyblue:Hq,dimgray:zq,dimgrey:Vq,dodgerblue:Xq,firebrick:Wq,floralwhite:Yq,forestgreen:Kq,fuchsia:qq,gainsboro:Zq,ghostwhite:Jq,goldenrod:Qq,gold:eZ,gray:tZ,green:rZ,greenyellow:nZ,grey:iZ,honeydew:oZ,hotpink:sZ,indianred:aZ,indigo:lZ,ivory:uZ,khaki:cZ,lavenderblush:hZ,lavender:fZ,lawngreen:dZ,lemonchiffon:pZ,lightblue:mZ,lightcoral:vZ,lightcyan:gZ,lightgoldenrodyellow:yZ,lightgray:_Z,lightgreen:bZ,lightgrey:wZ,lightpink:xZ,lightsalmon:TZ,lightseagreen:SZ,lightskyblue:EZ,lightslategray:CZ,lightslategrey:IZ,lightsteelblue:NZ,lightyellow:PZ,lime:AZ,limegreen:RZ,linen:kZ,magenta:OZ,maroon:LZ,mediumaquamarine:UZ,mediumblue:FZ,mediumorchid:MZ,mediumpurple:BZ,mediumseagreen:DZ,mediumslateblue:GZ,mediumspringgreen:jZ,mediumturquoise:$Z,mediumvioletred:HZ,midnightblue:zZ,mintcream:VZ,mistyrose:XZ,moccasin:WZ,navajowhite:YZ,navy:KZ,oldlace:qZ,olive:ZZ,olivedrab:JZ,orange:QZ,orangered:eJ,orchid:tJ,palegoldenrod:rJ,palegreen:nJ,paleturquoise:iJ,palevioletred:oJ,papayawhip:sJ,peachpuff:aJ,peru:lJ,pink:uJ,plum:cJ,powderblue:hJ,purple:fJ,rebeccapurple:dJ,red:pJ,rosybrown:mJ,royalblue:vJ,saddlebrown:gJ,salmon:yJ,sandybrown:_J,seagreen:bJ,seashell:wJ,sienna:xJ,silver:TJ,skyblue:SJ,slateblue:EJ,slategray:CJ,slategrey:IJ,snow:NJ,springgreen:PJ,steelblue:AJ,tan:RJ,teal:kJ,thistle:OJ,tomato:LJ,turquoise:UJ,violet:FJ,wheat:MJ,white:BJ,whitesmoke:DJ,yellow:GJ,yellowgreen:jJ};function al(e,t){return t===void 0&&(t=[]),t[0]=(e>>16&255)/255,t[1]=(e>>8&255)/255,t[2]=(e&255)/255,t}function bO(e){var t=e.toString(16);return t="000000".substring(0,6-t.length)+t,"#"+t}function wO(e){return typeof e=="string"&&(e=$J[e.toLowerCase()]||e,e[0]==="#"&&(e=e.slice(1))),parseInt(e,16)}function HJ(){for(var e=[],t=[],r=0;r<32;r++)e[r]=r,t[r]=r;e[Ze.NORMAL_NPM]=Ze.NORMAL,e[Ze.ADD_NPM]=Ze.ADD,e[Ze.SCREEN_NPM]=Ze.SCREEN,t[Ze.NORMAL]=Ze.NORMAL_NPM,t[Ze.ADD]=Ze.ADD_NPM,t[Ze.SCREEN]=Ze.SCREEN_NPM;var n=[];return n.push(t),n.push(e),n}var xO=HJ();function TO(e,t){return xO[t?1:0][e]}function zJ(e,t,r,n){return r=r||new Float32Array(4),n||n===void 0?(r[0]=e[0]*t,r[1]=e[1]*t,r[2]=e[2]*t):(r[0]=e[0],r[1]=e[1],r[2]=e[2]),r[3]=t,r}function Zy(e,t){if(t===1)return(t*255<<24)+e;if(t===0)return 0;var r=e>>16&255,n=e>>8&255,i=e&255;return r=r*t+.5|0,n=n*t+.5|0,i=i*t+.5|0,(t*255<<24)+(r<<16)+(n<<8)+i}function SO(e,t,r,n){return r=r||new Float32Array(4),r[0]=(e>>16&255)/255,r[1]=(e>>8&255)/255,r[2]=(e&255)/255,(n||n===void 0)&&(r[0]*=t,r[1]*=t,r[2]*=t),r[3]=t,r}function VJ(e,t){t===void 0&&(t=null);var r=e*6;if(t=t||new Uint16Array(r),t.length!==r)throw new Error("Out buffer length is incorrect, got "+t.length+" and expected "+r);for(var n=0,i=0;n<r;n+=6,i+=4)t[n+0]=i+0,t[n+1]=i+1,t[n+2]=i+2,t[n+3]=i+0,t[n+4]=i+2,t[n+5]=i+3;return t}function EO(e){if(e.BYTES_PER_ELEMENT===4)return e instanceof Float32Array?"Float32Array":e instanceof Uint32Array?"Uint32Array":"Int32Array";if(e.BYTES_PER_ELEMENT===2){if(e instanceof Uint16Array)return"Uint16Array"}else if(e.BYTES_PER_ELEMENT===1&&e instanceof Uint8Array)return"Uint8Array";return null}function Pg(e){return e+=e===0?1:0,--e,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,e+1}function H5(e){return!(e&e-1)&&!!e}function z5(e){var t=(e>65535?1:0)<<4;e>>>=t;var r=(e>255?1:0)<<3;return e>>>=r,t|=r,r=(e>15?1:0)<<2,e>>>=r,t|=r,r=(e>3?1:0)<<1,e>>>=r,t|=r,t|e>>1}function Xs(e,t,r){var n=e.length,i;if(!(t>=n||r===0)){r=t+r>n?n-t:r;var o=n-r;for(i=t;i<o;++i)e[i]=e[i+r];e.length=o}}function Fc(e){return e===0?0:e<0?-1:1}var XJ=0;function gu(){return++XJ}var V5={};function ep(e,t,r){if(r===void 0&&(r=3),!V5[t]){var n=new Error().stack;typeof n>"u"?console.warn("PixiJS Deprecation Warning: ",t+`
Deprecated since v`+e):(n=n.split(`
`).splice(r).join(`
`),console.groupCollapsed?(console.groupCollapsed("%cPixiJS Deprecation Warning: %c%s","color:#614108;background:#fffbe6","font-weight:normal;color:#614108;background:#fffbe6",t+`
Deprecated since v`+e),console.warn(n),console.groupEnd()):(console.warn("PixiJS Deprecation Warning: ",t+`
Deprecated since v`+e),console.warn(n))),V5[t]=!0}}var X5={},Ns=Object.create(null),Ll=Object.create(null),W5=function(){function e(t,r,n){this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d"),this.resolution=n||We.RESOLUTION,this.resize(t,r)}return e.prototype.clear=function(){this.context.setTransform(1,0,0,1,0,0),this.context.clearRect(0,0,this.canvas.width,this.canvas.height)},e.prototype.resize=function(t,r){this.canvas.width=Math.round(t*this.resolution),this.canvas.height=Math.round(r*this.resolution)},e.prototype.destroy=function(){this.context=null,this.canvas=null},Object.defineProperty(e.prototype,"width",{get:function(){return this.canvas.width},set:function(t){this.canvas.width=Math.round(t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this.canvas.height},set:function(t){this.canvas.height=Math.round(t)},enumerable:!1,configurable:!0}),e}();function WJ(e){var t=e.width,r=e.height,n=e.getContext("2d"),i=n.getImageData(0,0,t,r),o=i.data,s=o.length,a={top:null,left:null,right:null,bottom:null},l=null,u,c,f;for(u=0;u<s;u+=4)o[u+3]!==0&&(c=u/4%t,f=~~(u/4/t),a.top===null&&(a.top=f),(a.left===null||c<a.left)&&(a.left=c),(a.right===null||a.right<c)&&(a.right=c+1),(a.bottom===null||a.bottom<f)&&(a.bottom=f));return a.top!==null&&(t=a.right-a.left,r=a.bottom-a.top+1,l=n.getImageData(a.left,a.top,t,r)),{height:r,width:t,data:l}}var yv;function YJ(e,t){if(t===void 0&&(t=globalThis.location),e.indexOf("data:")===0)return"";t=t||globalThis.location,yv||(yv=document.createElement("a")),yv.href=e;var r=Uc.parse(yv.href),n=!r.port&&t.port===""||r.port===t.port;return r.hostname!==t.hostname||!n||r.protocol!==t.protocol?"anonymous":""}function Ag(e,t){var r=We.RETINA_PREFIX.exec(e);return r?parseFloat(r[1]):t!==void 0?t:1}/*!
 * @pixi/math - v6.4.2
 * Compiled Thu, 02 Jun 2022 15:39:26 UTC
 *
 * @pixi/math is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var fh=Math.PI*2,CO=180/Math.PI,IO=Math.PI/180,gt;(function(e){e[e.POLY=0]="POLY",e[e.RECT=1]="RECT",e[e.CIRC=2]="CIRC",e[e.ELIP=3]="ELIP",e[e.RREC=4]="RREC"})(gt||(gt={}));var Gt=function(){function e(t,r){t===void 0&&(t=0),r===void 0&&(r=0),this.x=0,this.y=0,this.x=t,this.y=r}return e.prototype.clone=function(){return new e(this.x,this.y)},e.prototype.copyFrom=function(t){return this.set(t.x,t.y),this},e.prototype.copyTo=function(t){return t.set(this.x,this.y),t},e.prototype.equals=function(t){return t.x===this.x&&t.y===this.y},e.prototype.set=function(t,r){return t===void 0&&(t=0),r===void 0&&(r=t),this.x=t,this.y=r,this},e.prototype.toString=function(){return"[@pixi/math:Point x="+this.x+" y="+this.y+"]"},e}(),_v=[new Gt,new Gt,new Gt,new Gt],Me=function(){function e(t,r,n,i){t===void 0&&(t=0),r===void 0&&(r=0),n===void 0&&(n=0),i===void 0&&(i=0),this.x=Number(t),this.y=Number(r),this.width=Number(n),this.height=Number(i),this.type=gt.RECT}return Object.defineProperty(e.prototype,"left",{get:function(){return this.x},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"right",{get:function(){return this.x+this.width},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"top",{get:function(){return this.y},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"bottom",{get:function(){return this.y+this.height},enumerable:!1,configurable:!0}),Object.defineProperty(e,"EMPTY",{get:function(){return new e(0,0,0,0)},enumerable:!1,configurable:!0}),e.prototype.clone=function(){return new e(this.x,this.y,this.width,this.height)},e.prototype.copyFrom=function(t){return this.x=t.x,this.y=t.y,this.width=t.width,this.height=t.height,this},e.prototype.copyTo=function(t){return t.x=this.x,t.y=this.y,t.width=this.width,t.height=this.height,t},e.prototype.contains=function(t,r){return this.width<=0||this.height<=0?!1:t>=this.x&&t<this.x+this.width&&r>=this.y&&r<this.y+this.height},e.prototype.intersects=function(t,r){if(!r){var n=this.x<t.x?t.x:this.x,i=this.right>t.right?t.right:this.right;if(i<=n)return!1;var o=this.y<t.y?t.y:this.y,s=this.bottom>t.bottom?t.bottom:this.bottom;return s>o}var a=this.left,l=this.right,u=this.top,c=this.bottom;if(l<=a||c<=u)return!1;var f=_v[0].set(t.left,t.top),p=_v[1].set(t.left,t.bottom),m=_v[2].set(t.right,t.top),g=_v[3].set(t.right,t.bottom);if(m.x<=f.x||p.y<=f.y)return!1;var b=Math.sign(r.a*r.d-r.b*r.c);if(b===0||(r.apply(f,f),r.apply(p,p),r.apply(m,m),r.apply(g,g),Math.max(f.x,p.x,m.x,g.x)<=a||Math.min(f.x,p.x,m.x,g.x)>=l||Math.max(f.y,p.y,m.y,g.y)<=u||Math.min(f.y,p.y,m.y,g.y)>=c))return!1;var y=b*(p.y-f.y),w=b*(f.x-p.x),x=y*a+w*u,T=y*l+w*u,I=y*a+w*c,R=y*l+w*c;if(Math.max(x,T,I,R)<=y*f.x+w*f.y||Math.min(x,T,I,R)>=y*g.x+w*g.y)return!1;var S=b*(f.y-m.y),O=b*(m.x-f.x),P=S*a+O*u,N=S*l+O*u,A=S*a+O*c,j=S*l+O*c;return!(Math.max(P,N,A,j)<=S*f.x+O*f.y||Math.min(P,N,A,j)>=S*g.x+O*g.y)},e.prototype.pad=function(t,r){return t===void 0&&(t=0),r===void 0&&(r=t),this.x-=t,this.y-=r,this.width+=t*2,this.height+=r*2,this},e.prototype.fit=function(t){var r=Math.max(this.x,t.x),n=Math.min(this.x+this.width,t.x+t.width),i=Math.max(this.y,t.y),o=Math.min(this.y+this.height,t.y+t.height);return this.x=r,this.width=Math.max(n-r,0),this.y=i,this.height=Math.max(o-i,0),this},e.prototype.ceil=function(t,r){t===void 0&&(t=1),r===void 0&&(r=.001);var n=Math.ceil((this.x+this.width-r)*t)/t,i=Math.ceil((this.y+this.height-r)*t)/t;return this.x=Math.floor((this.x+r)*t)/t,this.y=Math.floor((this.y+r)*t)/t,this.width=n-this.x,this.height=i-this.y,this},e.prototype.enlarge=function(t){var r=Math.min(this.x,t.x),n=Math.max(this.x+this.width,t.x+t.width),i=Math.min(this.y,t.y),o=Math.max(this.y+this.height,t.y+t.height);return this.x=r,this.width=n-r,this.y=i,this.height=o-i,this},e.prototype.toString=function(){return"[@pixi/math:Rectangle x="+this.x+" y="+this.y+" width="+this.width+" height="+this.height+"]"},e}(),NO=function(){function e(t,r,n){t===void 0&&(t=0),r===void 0&&(r=0),n===void 0&&(n=0),this.x=t,this.y=r,this.radius=n,this.type=gt.CIRC}return e.prototype.clone=function(){return new e(this.x,this.y,this.radius)},e.prototype.contains=function(t,r){if(this.radius<=0)return!1;var n=this.radius*this.radius,i=this.x-t,o=this.y-r;return i*=i,o*=o,i+o<=n},e.prototype.getBounds=function(){return new Me(this.x-this.radius,this.y-this.radius,this.radius*2,this.radius*2)},e.prototype.toString=function(){return"[@pixi/math:Circle x="+this.x+" y="+this.y+" radius="+this.radius+"]"},e}(),PO=function(){function e(t,r,n,i){t===void 0&&(t=0),r===void 0&&(r=0),n===void 0&&(n=0),i===void 0&&(i=0),this.x=t,this.y=r,this.width=n,this.height=i,this.type=gt.ELIP}return e.prototype.clone=function(){return new e(this.x,this.y,this.width,this.height)},e.prototype.contains=function(t,r){if(this.width<=0||this.height<=0)return!1;var n=(t-this.x)/this.width,i=(r-this.y)/this.height;return n*=n,i*=i,n+i<=1},e.prototype.getBounds=function(){return new Me(this.x-this.width,this.y-this.height,this.width,this.height)},e.prototype.toString=function(){return"[@pixi/math:Ellipse x="+this.x+" y="+this.y+" width="+this.width+" height="+this.height+"]"},e}(),nu=function(){function e(){for(var t=arguments,r=[],n=0;n<arguments.length;n++)r[n]=t[n];var i=Array.isArray(r[0])?r[0]:r;if(typeof i[0]!="number"){for(var o=[],s=0,a=i.length;s<a;s++)o.push(i[s].x,i[s].y);i=o}this.points=i,this.type=gt.POLY,this.closeStroke=!0}return e.prototype.clone=function(){var t=this.points.slice(),r=new e(t);return r.closeStroke=this.closeStroke,r},e.prototype.contains=function(t,r){for(var n=!1,i=this.points.length/2,o=0,s=i-1;o<i;s=o++){var a=this.points[o*2],l=this.points[o*2+1],u=this.points[s*2],c=this.points[s*2+1],f=l>r!=c>r&&t<(u-a)*((r-l)/(c-l))+a;f&&(n=!n)}return n},e.prototype.toString=function(){return"[@pixi/math:Polygon"+("closeStroke="+this.closeStroke)+("points="+this.points.reduce(function(t,r){return t+", "+r},"")+"]")},e}(),AO=function(){function e(t,r,n,i,o){t===void 0&&(t=0),r===void 0&&(r=0),n===void 0&&(n=0),i===void 0&&(i=0),o===void 0&&(o=20),this.x=t,this.y=r,this.width=n,this.height=i,this.radius=o,this.type=gt.RREC}return e.prototype.clone=function(){return new e(this.x,this.y,this.width,this.height,this.radius)},e.prototype.contains=function(t,r){if(this.width<=0||this.height<=0)return!1;if(t>=this.x&&t<=this.x+this.width&&r>=this.y&&r<=this.y+this.height){var n=Math.max(0,Math.min(this.radius,Math.min(this.width,this.height)/2));if(r>=this.y+n&&r<=this.y+this.height-n||t>=this.x+n&&t<=this.x+this.width-n)return!0;var i=t-(this.x+n),o=r-(this.y+n),s=n*n;if(i*i+o*o<=s||(i=t-(this.x+this.width-n),i*i+o*o<=s)||(o=r-(this.y+this.height-n),i*i+o*o<=s)||(i=t-(this.x+n),i*i+o*o<=s))return!0}return!1},e.prototype.toString=function(){return"[@pixi/math:RoundedRectangle x="+this.x+" y="+this.y+("width="+this.width+" height="+this.height+" radius="+this.radius+"]")},e}(),ql=function(){function e(t,r,n,i){n===void 0&&(n=0),i===void 0&&(i=0),this._x=n,this._y=i,this.cb=t,this.scope=r}return e.prototype.clone=function(t,r){return t===void 0&&(t=this.cb),r===void 0&&(r=this.scope),new e(t,r,this._x,this._y)},e.prototype.set=function(t,r){return t===void 0&&(t=0),r===void 0&&(r=t),(this._x!==t||this._y!==r)&&(this._x=t,this._y=r,this.cb.call(this.scope)),this},e.prototype.copyFrom=function(t){return(this._x!==t.x||this._y!==t.y)&&(this._x=t.x,this._y=t.y,this.cb.call(this.scope)),this},e.prototype.copyTo=function(t){return t.set(this._x,this._y),t},e.prototype.equals=function(t){return t.x===this._x&&t.y===this._y},e.prototype.toString=function(){return"[@pixi/math:ObservablePoint x="+0+" y="+0+" scope="+this.scope+"]"},Object.defineProperty(e.prototype,"x",{get:function(){return this._x},set:function(t){this._x!==t&&(this._x=t,this.cb.call(this.scope))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"y",{get:function(){return this._y},set:function(t){this._y!==t&&(this._y=t,this.cb.call(this.scope))},enumerable:!1,configurable:!0}),e}(),rr=function(){function e(t,r,n,i,o,s){t===void 0&&(t=1),r===void 0&&(r=0),n===void 0&&(n=0),i===void 0&&(i=1),o===void 0&&(o=0),s===void 0&&(s=0),this.array=null,this.a=t,this.b=r,this.c=n,this.d=i,this.tx=o,this.ty=s}return e.prototype.fromArray=function(t){this.a=t[0],this.b=t[1],this.c=t[3],this.d=t[4],this.tx=t[2],this.ty=t[5]},e.prototype.set=function(t,r,n,i,o,s){return this.a=t,this.b=r,this.c=n,this.d=i,this.tx=o,this.ty=s,this},e.prototype.toArray=function(t,r){this.array||(this.array=new Float32Array(9));var n=r||this.array;return t?(n[0]=this.a,n[1]=this.b,n[2]=0,n[3]=this.c,n[4]=this.d,n[5]=0,n[6]=this.tx,n[7]=this.ty,n[8]=1):(n[0]=this.a,n[1]=this.c,n[2]=this.tx,n[3]=this.b,n[4]=this.d,n[5]=this.ty,n[6]=0,n[7]=0,n[8]=1),n},e.prototype.apply=function(t,r){r=r||new Gt;var n=t.x,i=t.y;return r.x=this.a*n+this.c*i+this.tx,r.y=this.b*n+this.d*i+this.ty,r},e.prototype.applyInverse=function(t,r){r=r||new Gt;var n=1/(this.a*this.d+this.c*-this.b),i=t.x,o=t.y;return r.x=this.d*n*i+-this.c*n*o+(this.ty*this.c-this.tx*this.d)*n,r.y=this.a*n*o+-this.b*n*i+(-this.ty*this.a+this.tx*this.b)*n,r},e.prototype.translate=function(t,r){return this.tx+=t,this.ty+=r,this},e.prototype.scale=function(t,r){return this.a*=t,this.d*=r,this.c*=t,this.b*=r,this.tx*=t,this.ty*=r,this},e.prototype.rotate=function(t){var r=Math.cos(t),n=Math.sin(t),i=this.a,o=this.c,s=this.tx;return this.a=i*r-this.b*n,this.b=i*n+this.b*r,this.c=o*r-this.d*n,this.d=o*n+this.d*r,this.tx=s*r-this.ty*n,this.ty=s*n+this.ty*r,this},e.prototype.append=function(t){var r=this.a,n=this.b,i=this.c,o=this.d;return this.a=t.a*r+t.b*i,this.b=t.a*n+t.b*o,this.c=t.c*r+t.d*i,this.d=t.c*n+t.d*o,this.tx=t.tx*r+t.ty*i+this.tx,this.ty=t.tx*n+t.ty*o+this.ty,this},e.prototype.setTransform=function(t,r,n,i,o,s,a,l,u){return this.a=Math.cos(a+u)*o,this.b=Math.sin(a+u)*o,this.c=-Math.sin(a-l)*s,this.d=Math.cos(a-l)*s,this.tx=t-(n*this.a+i*this.c),this.ty=r-(n*this.b+i*this.d),this},e.prototype.prepend=function(t){var r=this.tx;if(t.a!==1||t.b!==0||t.c!==0||t.d!==1){var n=this.a,i=this.c;this.a=n*t.a+this.b*t.c,this.b=n*t.b+this.b*t.d,this.c=i*t.a+this.d*t.c,this.d=i*t.b+this.d*t.d}return this.tx=r*t.a+this.ty*t.c+t.tx,this.ty=r*t.b+this.ty*t.d+t.ty,this},e.prototype.decompose=function(t){var r=this.a,n=this.b,i=this.c,o=this.d,s=t.pivot,a=-Math.atan2(-i,o),l=Math.atan2(n,r),u=Math.abs(a+l);return u<1e-5||Math.abs(fh-u)<1e-5?(t.rotation=l,t.skew.x=t.skew.y=0):(t.rotation=0,t.skew.x=a,t.skew.y=l),t.scale.x=Math.sqrt(r*r+n*n),t.scale.y=Math.sqrt(i*i+o*o),t.position.x=this.tx+(s.x*r+s.y*i),t.position.y=this.ty+(s.x*n+s.y*o),t},e.prototype.invert=function(){var t=this.a,r=this.b,n=this.c,i=this.d,o=this.tx,s=t*i-r*n;return this.a=i/s,this.b=-r/s,this.c=-n/s,this.d=t/s,this.tx=(n*this.ty-i*o)/s,this.ty=-(t*this.ty-r*o)/s,this},e.prototype.identity=function(){return this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this},e.prototype.clone=function(){var t=new e;return t.a=this.a,t.b=this.b,t.c=this.c,t.d=this.d,t.tx=this.tx,t.ty=this.ty,t},e.prototype.copyTo=function(t){return t.a=this.a,t.b=this.b,t.c=this.c,t.d=this.d,t.tx=this.tx,t.ty=this.ty,t},e.prototype.copyFrom=function(t){return this.a=t.a,this.b=t.b,this.c=t.c,this.d=t.d,this.tx=t.tx,this.ty=t.ty,this},e.prototype.toString=function(){return"[@pixi/math:Matrix a="+this.a+" b="+this.b+" c="+this.c+" d="+this.d+" tx="+this.tx+" ty="+this.ty+"]"},Object.defineProperty(e,"IDENTITY",{get:function(){return new e},enumerable:!1,configurable:!0}),Object.defineProperty(e,"TEMP_MATRIX",{get:function(){return new e},enumerable:!1,configurable:!0}),e}(),Dl=[1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1,0,1],Gl=[0,1,1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1],jl=[0,-1,-1,-1,0,1,1,1,0,1,1,1,0,-1,-1,-1],$l=[1,1,0,-1,-1,-1,0,1,-1,-1,0,1,1,1,0,-1],kw=[],RO=[],bv=Math.sign;function KJ(){for(var e=0;e<16;e++){var t=[];kw.push(t);for(var r=0;r<16;r++)for(var n=bv(Dl[e]*Dl[r]+jl[e]*Gl[r]),i=bv(Gl[e]*Dl[r]+$l[e]*Gl[r]),o=bv(Dl[e]*jl[r]+jl[e]*$l[r]),s=bv(Gl[e]*jl[r]+$l[e]*$l[r]),a=0;a<16;a++)if(Dl[a]===n&&Gl[a]===i&&jl[a]===o&&$l[a]===s){t.push(a);break}}for(var e=0;e<16;e++){var l=new rr;l.set(Dl[e],Gl[e],jl[e],$l[e],0,0),RO.push(l)}}KJ();var vr={E:0,SE:1,S:2,SW:3,W:4,NW:5,N:6,NE:7,MIRROR_VERTICAL:8,MAIN_DIAGONAL:10,MIRROR_HORIZONTAL:12,REVERSE_DIAGONAL:14,uX:function(e){return Dl[e]},uY:function(e){return Gl[e]},vX:function(e){return jl[e]},vY:function(e){return $l[e]},inv:function(e){return e&8?e&15:-e&7},add:function(e,t){return kw[e][t]},sub:function(e,t){return kw[e][vr.inv(t)]},rotate180:function(e){return e^4},isVertical:function(e){return(e&3)===2},byDirection:function(e,t){return Math.abs(e)*2<=Math.abs(t)?t>=0?vr.S:vr.N:Math.abs(t)*2<=Math.abs(e)?e>0?vr.E:vr.W:t>0?e>0?vr.SE:vr.SW:e>0?vr.NE:vr.NW},matrixAppendRotationInv:function(e,t,r,n){r===void 0&&(r=0),n===void 0&&(n=0);var i=RO[vr.inv(t)];i.tx=r,i.ty=n,e.append(i)}},F4=function(){function e(){this.worldTransform=new rr,this.localTransform=new rr,this.position=new ql(this.onChange,this,0,0),this.scale=new ql(this.onChange,this,1,1),this.pivot=new ql(this.onChange,this,0,0),this.skew=new ql(this.updateSkew,this,0,0),this._rotation=0,this._cx=1,this._sx=0,this._cy=0,this._sy=1,this._localID=0,this._currentLocalID=0,this._worldID=0,this._parentID=0}return e.prototype.onChange=function(){this._localID++},e.prototype.updateSkew=function(){this._cx=Math.cos(this._rotation+this.skew.y),this._sx=Math.sin(this._rotation+this.skew.y),this._cy=-Math.sin(this._rotation-this.skew.x),this._sy=Math.cos(this._rotation-this.skew.x),this._localID++},e.prototype.toString=function(){return"[@pixi/math:Transform "+("position=("+this.position.x+", "+this.position.y+") ")+("rotation="+this.rotation+" ")+("scale=("+this.scale.x+", "+this.scale.y+") ")+("skew=("+this.skew.x+", "+this.skew.y+") ")+"]"},e.prototype.updateLocalTransform=function(){var t=this.localTransform;this._localID!==this._currentLocalID&&(t.a=this._cx*this.scale.x,t.b=this._sx*this.scale.x,t.c=this._cy*this.scale.y,t.d=this._sy*this.scale.y,t.tx=this.position.x-(this.pivot.x*t.a+this.pivot.y*t.c),t.ty=this.position.y-(this.pivot.x*t.b+this.pivot.y*t.d),this._currentLocalID=this._localID,this._parentID=-1)},e.prototype.updateTransform=function(t){var r=this.localTransform;if(this._localID!==this._currentLocalID&&(r.a=this._cx*this.scale.x,r.b=this._sx*this.scale.x,r.c=this._cy*this.scale.y,r.d=this._sy*this.scale.y,r.tx=this.position.x-(this.pivot.x*r.a+this.pivot.y*r.c),r.ty=this.position.y-(this.pivot.x*r.b+this.pivot.y*r.d),this._currentLocalID=this._localID,this._parentID=-1),this._parentID!==t._worldID){var n=t.worldTransform,i=this.worldTransform;i.a=r.a*n.a+r.b*n.c,i.b=r.a*n.b+r.b*n.d,i.c=r.c*n.a+r.d*n.c,i.d=r.c*n.b+r.d*n.d,i.tx=r.tx*n.a+r.ty*n.c+n.tx,i.ty=r.tx*n.b+r.ty*n.d+n.ty,this._parentID=t._worldID,this._worldID++}},e.prototype.setFromMatrix=function(t){t.decompose(this),this._localID++},Object.defineProperty(e.prototype,"rotation",{get:function(){return this._rotation},set:function(t){this._rotation!==t&&(this._rotation=t,this.updateSkew())},enumerable:!1,configurable:!0}),e.IDENTITY=new e,e}();/*!
 * @pixi/display - v6.4.2
 * Compiled Thu, 02 Jun 2022 15:39:26 UTC
 *
 * @pixi/display is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */We.SORTABLE_CHILDREN=!1;var yu=function(){function e(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0,this.rect=null,this.updateID=-1}return e.prototype.isEmpty=function(){return this.minX>this.maxX||this.minY>this.maxY},e.prototype.clear=function(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0},e.prototype.getRectangle=function(t){return this.minX>this.maxX||this.minY>this.maxY?Me.EMPTY:(t=t||new Me(0,0,1,1),t.x=this.minX,t.y=this.minY,t.width=this.maxX-this.minX,t.height=this.maxY-this.minY,t)},e.prototype.addPoint=function(t){this.minX=Math.min(this.minX,t.x),this.maxX=Math.max(this.maxX,t.x),this.minY=Math.min(this.minY,t.y),this.maxY=Math.max(this.maxY,t.y)},e.prototype.addPointMatrix=function(t,r){var n=t.a,i=t.b,o=t.c,s=t.d,a=t.tx,l=t.ty,u=n*r.x+o*r.y+a,c=i*r.x+s*r.y+l;this.minX=Math.min(this.minX,u),this.maxX=Math.max(this.maxX,u),this.minY=Math.min(this.minY,c),this.maxY=Math.max(this.maxY,c)},e.prototype.addQuad=function(t){var r=this.minX,n=this.minY,i=this.maxX,o=this.maxY,s=t[0],a=t[1];r=s<r?s:r,n=a<n?a:n,i=s>i?s:i,o=a>o?a:o,s=t[2],a=t[3],r=s<r?s:r,n=a<n?a:n,i=s>i?s:i,o=a>o?a:o,s=t[4],a=t[5],r=s<r?s:r,n=a<n?a:n,i=s>i?s:i,o=a>o?a:o,s=t[6],a=t[7],r=s<r?s:r,n=a<n?a:n,i=s>i?s:i,o=a>o?a:o,this.minX=r,this.minY=n,this.maxX=i,this.maxY=o},e.prototype.addFrame=function(t,r,n,i,o){this.addFrameMatrix(t.worldTransform,r,n,i,o)},e.prototype.addFrameMatrix=function(t,r,n,i,o){var s=t.a,a=t.b,l=t.c,u=t.d,c=t.tx,f=t.ty,p=this.minX,m=this.minY,g=this.maxX,b=this.maxY,y=s*r+l*n+c,w=a*r+u*n+f;p=y<p?y:p,m=w<m?w:m,g=y>g?y:g,b=w>b?w:b,y=s*i+l*n+c,w=a*i+u*n+f,p=y<p?y:p,m=w<m?w:m,g=y>g?y:g,b=w>b?w:b,y=s*r+l*o+c,w=a*r+u*o+f,p=y<p?y:p,m=w<m?w:m,g=y>g?y:g,b=w>b?w:b,y=s*i+l*o+c,w=a*i+u*o+f,p=y<p?y:p,m=w<m?w:m,g=y>g?y:g,b=w>b?w:b,this.minX=p,this.minY=m,this.maxX=g,this.maxY=b},e.prototype.addVertexData=function(t,r,n){for(var i=this.minX,o=this.minY,s=this.maxX,a=this.maxY,l=r;l<n;l+=2){var u=t[l],c=t[l+1];i=u<i?u:i,o=c<o?c:o,s=u>s?u:s,a=c>a?c:a}this.minX=i,this.minY=o,this.maxX=s,this.maxY=a},e.prototype.addVertices=function(t,r,n,i){this.addVerticesMatrix(t.worldTransform,r,n,i)},e.prototype.addVerticesMatrix=function(t,r,n,i,o,s){o===void 0&&(o=0),s===void 0&&(s=o);for(var a=t.a,l=t.b,u=t.c,c=t.d,f=t.tx,p=t.ty,m=this.minX,g=this.minY,b=this.maxX,y=this.maxY,w=n;w<i;w+=2){var x=r[w],T=r[w+1],I=a*x+u*T+f,R=c*T+l*x+p;m=Math.min(m,I-o),b=Math.max(b,I+o),g=Math.min(g,R-s),y=Math.max(y,R+s)}this.minX=m,this.minY=g,this.maxX=b,this.maxY=y},e.prototype.addBounds=function(t){var r=this.minX,n=this.minY,i=this.maxX,o=this.maxY;this.minX=t.minX<r?t.minX:r,this.minY=t.minY<n?t.minY:n,this.maxX=t.maxX>i?t.maxX:i,this.maxY=t.maxY>o?t.maxY:o},e.prototype.addBoundsMask=function(t,r){var n=t.minX>r.minX?t.minX:r.minX,i=t.minY>r.minY?t.minY:r.minY,o=t.maxX<r.maxX?t.maxX:r.maxX,s=t.maxY<r.maxY?t.maxY:r.maxY;if(n<=o&&i<=s){var a=this.minX,l=this.minY,u=this.maxX,c=this.maxY;this.minX=n<a?n:a,this.minY=i<l?i:l,this.maxX=o>u?o:u,this.maxY=s>c?s:c}},e.prototype.addBoundsMatrix=function(t,r){this.addFrameMatrix(r,t.minX,t.minY,t.maxX,t.maxY)},e.prototype.addBoundsArea=function(t,r){var n=t.minX>r.x?t.minX:r.x,i=t.minY>r.y?t.minY:r.y,o=t.maxX<r.x+r.width?t.maxX:r.x+r.width,s=t.maxY<r.y+r.height?t.maxY:r.y+r.height;if(n<=o&&i<=s){var a=this.minX,l=this.minY,u=this.maxX,c=this.maxY;this.minX=n<a?n:a,this.minY=i<l?i:l,this.maxX=o>u?o:u,this.maxY=s>c?s:c}},e.prototype.pad=function(t,r){t===void 0&&(t=0),r===void 0&&(r=t),this.isEmpty()||(this.minX-=t,this.maxX+=t,this.minY-=r,this.maxY+=r)},e.prototype.addFramePad=function(t,r,n,i,o,s){t-=o,r-=s,n+=o,i+=s,this.minX=this.minX<t?this.minX:t,this.maxX=this.maxX>n?this.maxX:n,this.minY=this.minY<r?this.minY:r,this.maxY=this.maxY>i?this.maxY:i},e}();/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var Ow=function(e,t){return Ow=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])},Ow(e,t)};function M4(e,t){Ow(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var Er=function(e){M4(t,e);function t(){var r=e.call(this)||this;return r.tempDisplayObjectParent=null,r.transform=new F4,r.alpha=1,r.visible=!0,r.renderable=!0,r.cullable=!1,r.cullArea=null,r.parent=null,r.worldAlpha=1,r._lastSortedIndex=0,r._zIndex=0,r.filterArea=null,r.filters=null,r._enabledFilters=null,r._bounds=new yu,r._localBounds=null,r._boundsID=0,r._boundsRect=null,r._localBoundsRect=null,r._mask=null,r._maskRefCount=0,r._destroyed=!1,r.isSprite=!1,r.isMask=!1,r}return t.mixin=function(r){for(var n=Object.keys(r),i=0;i<n.length;++i){var o=n[i];Object.defineProperty(t.prototype,o,Object.getOwnPropertyDescriptor(r,o))}},Object.defineProperty(t.prototype,"destroyed",{get:function(){return this._destroyed},enumerable:!1,configurable:!0}),t.prototype._recursivePostUpdateTransform=function(){this.parent?(this.parent._recursivePostUpdateTransform(),this.transform.updateTransform(this.parent.transform)):this.transform.updateTransform(this._tempDisplayObjectParent.transform)},t.prototype.updateTransform=function(){this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha},t.prototype.getBounds=function(r,n){return r||(this.parent?(this._recursivePostUpdateTransform(),this.updateTransform()):(this.parent=this._tempDisplayObjectParent,this.updateTransform(),this.parent=null)),this._bounds.updateID!==this._boundsID&&(this.calculateBounds(),this._bounds.updateID=this._boundsID),n||(this._boundsRect||(this._boundsRect=new Me),n=this._boundsRect),this._bounds.getRectangle(n)},t.prototype.getLocalBounds=function(r){r||(this._localBoundsRect||(this._localBoundsRect=new Me),r=this._localBoundsRect),this._localBounds||(this._localBounds=new yu);var n=this.transform,i=this.parent;this.parent=null,this.transform=this._tempDisplayObjectParent.transform;var o=this._bounds,s=this._boundsID;this._bounds=this._localBounds;var a=this.getBounds(!1,r);return this.parent=i,this.transform=n,this._bounds=o,this._bounds.updateID+=this._boundsID-s,a},t.prototype.toGlobal=function(r,n,i){return i===void 0&&(i=!1),i||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.apply(r,n)},t.prototype.toLocal=function(r,n,i,o){return n&&(r=n.toGlobal(r,i,o)),o||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.applyInverse(r,i)},t.prototype.setParent=function(r){if(!r||!r.addChild)throw new Error("setParent: Argument must be a Container");return r.addChild(this),r},t.prototype.setTransform=function(r,n,i,o,s,a,l,u,c){return r===void 0&&(r=0),n===void 0&&(n=0),i===void 0&&(i=1),o===void 0&&(o=1),s===void 0&&(s=0),a===void 0&&(a=0),l===void 0&&(l=0),u===void 0&&(u=0),c===void 0&&(c=0),this.position.x=r,this.position.y=n,this.scale.x=i||1,this.scale.y=o||1,this.rotation=s,this.skew.x=a,this.skew.y=l,this.pivot.x=u,this.pivot.y=c,this},t.prototype.destroy=function(r){this.parent&&this.parent.removeChild(this),this._destroyed=!0,this.transform=null,this.parent=null,this._bounds=null,this.mask=null,this.cullArea=null,this.filters=null,this.filterArea=null,this.hitArea=null,this.interactive=!1,this.interactiveChildren=!1,this.emit("destroyed"),this.removeAllListeners()},Object.defineProperty(t.prototype,"_tempDisplayObjectParent",{get:function(){return this.tempDisplayObjectParent===null&&(this.tempDisplayObjectParent=new kO),this.tempDisplayObjectParent},enumerable:!1,configurable:!0}),t.prototype.enableTempParent=function(){var r=this.parent;return this.parent=this._tempDisplayObjectParent,r},t.prototype.disableTempParent=function(r){this.parent=r},Object.defineProperty(t.prototype,"x",{get:function(){return this.position.x},set:function(r){this.transform.position.x=r},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"y",{get:function(){return this.position.y},set:function(r){this.transform.position.y=r},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"worldTransform",{get:function(){return this.transform.worldTransform},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"localTransform",{get:function(){return this.transform.localTransform},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"position",{get:function(){return this.transform.position},set:function(r){this.transform.position.copyFrom(r)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"scale",{get:function(){return this.transform.scale},set:function(r){this.transform.scale.copyFrom(r)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"pivot",{get:function(){return this.transform.pivot},set:function(r){this.transform.pivot.copyFrom(r)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"skew",{get:function(){return this.transform.skew},set:function(r){this.transform.skew.copyFrom(r)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"rotation",{get:function(){return this.transform.rotation},set:function(r){this.transform.rotation=r},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"angle",{get:function(){return this.transform.rotation*CO},set:function(r){this.transform.rotation=r*IO},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"zIndex",{get:function(){return this._zIndex},set:function(r){this._zIndex=r,this.parent&&(this.parent.sortDirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"worldVisible",{get:function(){var r=this;do{if(!r.visible)return!1;r=r.parent}while(r);return!0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"mask",{get:function(){return this._mask},set:function(r){if(this._mask!==r){if(this._mask){var n=this._mask.maskObject||this._mask;n._maskRefCount--,n._maskRefCount===0&&(n.renderable=!0,n.isMask=!1)}if(this._mask=r,this._mask){var n=this._mask.maskObject||this._mask;n._maskRefCount===0&&(n.renderable=!1,n.isMask=!0),n._maskRefCount++}}},enumerable:!1,configurable:!0}),t}(Oh),kO=function(e){M4(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.sortDirty=null,r}return t}(Er);Er.prototype.displayObjectUpdateTransform=Er.prototype.updateTransform;/*!
 * @pixi/constants - v6.4.2
 * Compiled Thu, 02 Jun 2022 15:39:26 UTC
 *
 * @pixi/constants is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var Y5;(function(e){e[e.WEBGL_LEGACY=0]="WEBGL_LEGACY",e[e.WEBGL=1]="WEBGL",e[e.WEBGL2=2]="WEBGL2"})(Y5||(Y5={}));var K5;(function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.WEBGL=1]="WEBGL",e[e.CANVAS=2]="CANVAS"})(K5||(K5={}));var q5;(function(e){e[e.COLOR=16384]="COLOR",e[e.DEPTH=256]="DEPTH",e[e.STENCIL=1024]="STENCIL"})(q5||(q5={}));var Z5;(function(e){e[e.NORMAL=0]="NORMAL",e[e.ADD=1]="ADD",e[e.MULTIPLY=2]="MULTIPLY",e[e.SCREEN=3]="SCREEN",e[e.OVERLAY=4]="OVERLAY",e[e.DARKEN=5]="DARKEN",e[e.LIGHTEN=6]="LIGHTEN",e[e.COLOR_DODGE=7]="COLOR_DODGE",e[e.COLOR_BURN=8]="COLOR_BURN",e[e.HARD_LIGHT=9]="HARD_LIGHT",e[e.SOFT_LIGHT=10]="SOFT_LIGHT",e[e.DIFFERENCE=11]="DIFFERENCE",e[e.EXCLUSION=12]="EXCLUSION",e[e.HUE=13]="HUE",e[e.SATURATION=14]="SATURATION",e[e.COLOR=15]="COLOR",e[e.LUMINOSITY=16]="LUMINOSITY",e[e.NORMAL_NPM=17]="NORMAL_NPM",e[e.ADD_NPM=18]="ADD_NPM",e[e.SCREEN_NPM=19]="SCREEN_NPM",e[e.NONE=20]="NONE",e[e.SRC_OVER=0]="SRC_OVER",e[e.SRC_IN=21]="SRC_IN",e[e.SRC_OUT=22]="SRC_OUT",e[e.SRC_ATOP=23]="SRC_ATOP",e[e.DST_OVER=24]="DST_OVER",e[e.DST_IN=25]="DST_IN",e[e.DST_OUT=26]="DST_OUT",e[e.DST_ATOP=27]="DST_ATOP",e[e.ERASE=26]="ERASE",e[e.SUBTRACT=28]="SUBTRACT",e[e.XOR=29]="XOR"})(Z5||(Z5={}));var J5;(function(e){e[e.POINTS=0]="POINTS",e[e.LINES=1]="LINES",e[e.LINE_LOOP=2]="LINE_LOOP",e[e.LINE_STRIP=3]="LINE_STRIP",e[e.TRIANGLES=4]="TRIANGLES",e[e.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",e[e.TRIANGLE_FAN=6]="TRIANGLE_FAN"})(J5||(J5={}));var Q5;(function(e){e[e.RGBA=6408]="RGBA",e[e.RGB=6407]="RGB",e[e.RG=33319]="RG",e[e.RED=6403]="RED",e[e.RGBA_INTEGER=36249]="RGBA_INTEGER",e[e.RGB_INTEGER=36248]="RGB_INTEGER",e[e.RG_INTEGER=33320]="RG_INTEGER",e[e.RED_INTEGER=36244]="RED_INTEGER",e[e.ALPHA=6406]="ALPHA",e[e.LUMINANCE=6409]="LUMINANCE",e[e.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",e[e.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",e[e.DEPTH_STENCIL=34041]="DEPTH_STENCIL"})(Q5||(Q5={}));var e6;(function(e){e[e.TEXTURE_2D=3553]="TEXTURE_2D",e[e.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",e[e.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",e[e.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",e[e.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",e[e.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",e[e.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",e[e.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",e[e.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z"})(e6||(e6={}));var t6;(function(e){e[e.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",e[e.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",e[e.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",e[e.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",e[e.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",e[e.UNSIGNED_INT=5125]="UNSIGNED_INT",e[e.UNSIGNED_INT_10F_11F_11F_REV=35899]="UNSIGNED_INT_10F_11F_11F_REV",e[e.UNSIGNED_INT_2_10_10_10_REV=33640]="UNSIGNED_INT_2_10_10_10_REV",e[e.UNSIGNED_INT_24_8=34042]="UNSIGNED_INT_24_8",e[e.UNSIGNED_INT_5_9_9_9_REV=35902]="UNSIGNED_INT_5_9_9_9_REV",e[e.BYTE=5120]="BYTE",e[e.SHORT=5122]="SHORT",e[e.INT=5124]="INT",e[e.FLOAT=5126]="FLOAT",e[e.FLOAT_32_UNSIGNED_INT_24_8_REV=36269]="FLOAT_32_UNSIGNED_INT_24_8_REV",e[e.HALF_FLOAT=36193]="HALF_FLOAT"})(t6||(t6={}));var r6;(function(e){e[e.FLOAT=0]="FLOAT",e[e.INT=1]="INT",e[e.UINT=2]="UINT"})(r6||(r6={}));var n6;(function(e){e[e.NEAREST=0]="NEAREST",e[e.LINEAR=1]="LINEAR"})(n6||(n6={}));var i6;(function(e){e[e.CLAMP=33071]="CLAMP",e[e.REPEAT=10497]="REPEAT",e[e.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT"})(i6||(i6={}));var o6;(function(e){e[e.OFF=0]="OFF",e[e.POW2=1]="POW2",e[e.ON=2]="ON",e[e.ON_MANUAL=3]="ON_MANUAL"})(o6||(o6={}));var s6;(function(e){e[e.NPM=0]="NPM",e[e.UNPACK=1]="UNPACK",e[e.PMA=2]="PMA",e[e.NO_PREMULTIPLIED_ALPHA=0]="NO_PREMULTIPLIED_ALPHA",e[e.PREMULTIPLY_ON_UPLOAD=1]="PREMULTIPLY_ON_UPLOAD",e[e.PREMULTIPLY_ALPHA=2]="PREMULTIPLY_ALPHA",e[e.PREMULTIPLIED_ALPHA=2]="PREMULTIPLIED_ALPHA"})(s6||(s6={}));var a6;(function(e){e[e.NO=0]="NO",e[e.YES=1]="YES",e[e.AUTO=2]="AUTO",e[e.BLEND=0]="BLEND",e[e.CLEAR=1]="CLEAR",e[e.BLIT=2]="BLIT"})(a6||(a6={}));var l6;(function(e){e[e.AUTO=0]="AUTO",e[e.MANUAL=1]="MANUAL"})(l6||(l6={}));var u6;(function(e){e.LOW="lowp",e.MEDIUM="mediump",e.HIGH="highp"})(u6||(u6={}));var Lw;(function(e){e[e.NONE=0]="NONE",e[e.SCISSOR=1]="SCISSOR",e[e.STENCIL=2]="STENCIL",e[e.SPRITE=3]="SPRITE"})(Lw||(Lw={}));var c6;(function(e){e[e.NONE=0]="NONE",e[e.LOW=2]="LOW",e[e.MEDIUM=4]="MEDIUM",e[e.HIGH=8]="HIGH"})(c6||(c6={}));var h6;(function(e){e[e.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",e[e.ARRAY_BUFFER=34962]="ARRAY_BUFFER",e[e.UNIFORM_BUFFER=35345]="UNIFORM_BUFFER"})(h6||(h6={}));function qJ(e,t){return e.zIndex===t.zIndex?e._lastSortedIndex-t._lastSortedIndex:e.zIndex-t.zIndex}var Ri=function(e){M4(t,e);function t(){var r=e.call(this)||this;return r.children=[],r.sortableChildren=We.SORTABLE_CHILDREN,r.sortDirty=!1,r}return t.prototype.onChildrenChange=function(r){},t.prototype.addChild=function(){for(var r=arguments,n=[],i=0;i<arguments.length;i++)n[i]=r[i];if(n.length>1)for(var o=0;o<n.length;o++)this.addChild(n[o]);else{var s=n[0];s.parent&&s.parent.removeChild(s),s.parent=this,this.sortDirty=!0,s.transform._parentID=-1,this.children.push(s),this._boundsID++,this.onChildrenChange(this.children.length-1),this.emit("childAdded",s,this,this.children.length-1),s.emit("added",this)}return n[0]},t.prototype.addChildAt=function(r,n){if(n<0||n>this.children.length)throw new Error(r+"addChildAt: The index "+n+" supplied is out of bounds "+this.children.length);return r.parent&&r.parent.removeChild(r),r.parent=this,this.sortDirty=!0,r.transform._parentID=-1,this.children.splice(n,0,r),this._boundsID++,this.onChildrenChange(n),r.emit("added",this),this.emit("childAdded",r,this,n),r},t.prototype.swapChildren=function(r,n){if(r!==n){var i=this.getChildIndex(r),o=this.getChildIndex(n);this.children[i]=n,this.children[o]=r,this.onChildrenChange(i<o?i:o)}},t.prototype.getChildIndex=function(r){var n=this.children.indexOf(r);if(n===-1)throw new Error("The supplied DisplayObject must be a child of the caller");return n},t.prototype.setChildIndex=function(r,n){if(n<0||n>=this.children.length)throw new Error("The index "+n+" supplied is out of bounds "+this.children.length);var i=this.getChildIndex(r);Xs(this.children,i,1),this.children.splice(n,0,r),this.onChildrenChange(n)},t.prototype.getChildAt=function(r){if(r<0||r>=this.children.length)throw new Error("getChildAt: Index ("+r+") does not exist.");return this.children[r]},t.prototype.removeChild=function(){for(var r=arguments,n=[],i=0;i<arguments.length;i++)n[i]=r[i];if(n.length>1)for(var o=0;o<n.length;o++)this.removeChild(n[o]);else{var s=n[0],a=this.children.indexOf(s);if(a===-1)return null;s.parent=null,s.transform._parentID=-1,Xs(this.children,a,1),this._boundsID++,this.onChildrenChange(a),s.emit("removed",this),this.emit("childRemoved",s,this,a)}return n[0]},t.prototype.removeChildAt=function(r){var n=this.getChildAt(r);return n.parent=null,n.transform._parentID=-1,Xs(this.children,r,1),this._boundsID++,this.onChildrenChange(r),n.emit("removed",this),this.emit("childRemoved",n,this,r),n},t.prototype.removeChildren=function(r,n){r===void 0&&(r=0),n===void 0&&(n=this.children.length);var i=r,o=n,s=o-i,a;if(s>0&&s<=o){a=this.children.splice(i,s);for(var l=0;l<a.length;++l)a[l].parent=null,a[l].transform&&(a[l].transform._parentID=-1);this._boundsID++,this.onChildrenChange(r);for(var l=0;l<a.length;++l)a[l].emit("removed",this),this.emit("childRemoved",a[l],this,l);return a}else if(s===0&&this.children.length===0)return[];throw new RangeError("removeChildren: numeric values are outside the acceptable range.")},t.prototype.sortChildren=function(){for(var r=!1,n=0,i=this.children.length;n<i;++n){var o=this.children[n];o._lastSortedIndex=n,!r&&o.zIndex!==0&&(r=!0)}r&&this.children.length>1&&this.children.sort(qJ),this.sortDirty=!1},t.prototype.updateTransform=function(){this.sortableChildren&&this.sortDirty&&this.sortChildren(),this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha;for(var r=0,n=this.children.length;r<n;++r){var i=this.children[r];i.visible&&i.updateTransform()}},t.prototype.calculateBounds=function(){this._bounds.clear(),this._calculateBounds();for(var r=0;r<this.children.length;r++){var n=this.children[r];if(!(!n.visible||!n.renderable))if(n.calculateBounds(),n._mask){var i=n._mask.maskObject||n._mask;i.calculateBounds(),this._bounds.addBoundsMask(n._bounds,i._bounds)}else n.filterArea?this._bounds.addBoundsArea(n._bounds,n.filterArea):this._bounds.addBounds(n._bounds)}this._bounds.updateID=this._boundsID},t.prototype.getLocalBounds=function(r,n){n===void 0&&(n=!1);var i=e.prototype.getLocalBounds.call(this,r);if(!n)for(var o=0,s=this.children.length;o<s;++o){var a=this.children[o];a.visible&&a.updateTransform()}return i},t.prototype._calculateBounds=function(){},t.prototype._renderWithCulling=function(r){var n=r.renderTexture.sourceFrame;if(n.width>0&&n.height>0){var i,o;if(this.cullArea?(i=this.cullArea,o=this.worldTransform):this._render!==t.prototype._render&&(i=this.getBounds(!0)),i&&n.intersects(i,o))this._render(r);else if(this.cullArea)return;for(var s=0,a=this.children.length;s<a;++s){var l=this.children[s],u=l.cullable;l.cullable=u||!this.cullArea,l.render(r),l.cullable=u}}},t.prototype.render=function(r){if(!(!this.visible||this.worldAlpha<=0||!this.renderable))if(this._mask||this.filters&&this.filters.length)this.renderAdvanced(r);else if(this.cullable)this._renderWithCulling(r);else{this._render(r);for(var n=0,i=this.children.length;n<i;++n)this.children[n].render(r)}},t.prototype.renderAdvanced=function(r){var n=this.filters,i=this._mask;if(n){this._enabledFilters||(this._enabledFilters=[]),this._enabledFilters.length=0;for(var o=0;o<n.length;o++)n[o].enabled&&this._enabledFilters.push(n[o])}var s=n&&this._enabledFilters&&this._enabledFilters.length||i&&(!i.isMaskData||i.enabled&&(i.autoDetect||i.type!==Lw.NONE));if(s&&r.batch.flush(),n&&this._enabledFilters&&this._enabledFilters.length&&r.filter.push(this,this._enabledFilters),i&&r.mask.push(this,this._mask),this.cullable)this._renderWithCulling(r);else{this._render(r);for(var o=0,a=this.children.length;o<a;++o)this.children[o].render(r)}s&&r.batch.flush(),i&&r.mask.pop(this),n&&this._enabledFilters&&this._enabledFilters.length&&r.filter.pop()},t.prototype._render=function(r){},t.prototype.destroy=function(r){e.prototype.destroy.call(this),this.sortDirty=!1;var n=typeof r=="boolean"?r:r&&r.children,i=this.removeChildren(0,this.children.length);if(n)for(var o=0;o<i.length;++o)i[o].destroy(r)},Object.defineProperty(t.prototype,"width",{get:function(){return this.scale.x*this.getLocalBounds().width},set:function(r){var n=this.getLocalBounds().width;n!==0?this.scale.x=r/n:this.scale.x=1,this._width=r},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this.scale.y*this.getLocalBounds().height},set:function(r){var n=this.getLocalBounds().height;n!==0?this.scale.y=r/n:this.scale.y=1,this._height=r},enumerable:!1,configurable:!0}),t}(Er);Ri.prototype.containerUpdateTransform=Ri.prototype.updateTransform;/*!
 * @pixi/accessibility - v6.4.2
 * Compiled Thu, 02 Jun 2022 15:39:26 UTC
 *
 * @pixi/accessibility is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var ZJ={accessible:!1,accessibleTitle:null,accessibleHint:null,tabIndex:0,_accessibleActive:!1,_accessibleDiv:null,accessibleType:"button",accessiblePointerEvents:"auto",accessibleChildren:!0,renderId:-1};Er.mixin(ZJ);var JJ=9,wv=100,QJ=0,eQ=0,f6=2,d6=1,tQ=-1e3,rQ=-1e3,nQ=2,iQ=function(){function e(t){this.debug=!1,this._isActive=!1,this._isMobileAccessibility=!1,this.pool=[],this.renderId=0,this.children=[],this.androidUpdateCount=0,this.androidUpdateFrequency=500,this._hookDiv=null,(Ko.tablet||Ko.phone)&&this.createTouchHook();var r=document.createElement("div");r.style.width=wv+"px",r.style.height=wv+"px",r.style.position="absolute",r.style.top=QJ+"px",r.style.left=eQ+"px",r.style.zIndex=f6.toString(),this.div=r,this.renderer=t,this._onKeyDown=this._onKeyDown.bind(this),this._onMouseMove=this._onMouseMove.bind(this),globalThis.addEventListener("keydown",this._onKeyDown,!1)}return Object.defineProperty(e.prototype,"isActive",{get:function(){return this._isActive},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isMobileAccessibility",{get:function(){return this._isMobileAccessibility},enumerable:!1,configurable:!0}),e.prototype.createTouchHook=function(){var t=this,r=document.createElement("button");r.style.width=d6+"px",r.style.height=d6+"px",r.style.position="absolute",r.style.top=tQ+"px",r.style.left=rQ+"px",r.style.zIndex=nQ.toString(),r.style.backgroundColor="#FF0000",r.title="select to enable accessibility for this content",r.addEventListener("focus",function(){t._isMobileAccessibility=!0,t.activate(),t.destroyTouchHook()}),document.body.appendChild(r),this._hookDiv=r},e.prototype.destroyTouchHook=function(){!this._hookDiv||(document.body.removeChild(this._hookDiv),this._hookDiv=null)},e.prototype.activate=function(){var t;this._isActive||(this._isActive=!0,globalThis.document.addEventListener("mousemove",this._onMouseMove,!0),globalThis.removeEventListener("keydown",this._onKeyDown,!1),this.renderer.on("postrender",this.update,this),(t=this.renderer.view.parentNode)===null||t===void 0||t.appendChild(this.div))},e.prototype.deactivate=function(){var t;!this._isActive||this._isMobileAccessibility||(this._isActive=!1,globalThis.document.removeEventListener("mousemove",this._onMouseMove,!0),globalThis.addEventListener("keydown",this._onKeyDown,!1),this.renderer.off("postrender",this.update),(t=this.div.parentNode)===null||t===void 0||t.removeChild(this.div))},e.prototype.updateAccessibleObjects=function(t){if(!(!t.visible||!t.accessibleChildren)){t.accessible&&t.interactive&&(t._accessibleActive||this.addChild(t),t.renderId=this.renderId);var r=t.children;if(r)for(var n=0;n<r.length;n++)this.updateAccessibleObjects(r[n])}},e.prototype.update=function(){var t=performance.now();if(!(Ko.android.device&&t<this.androidUpdateCount)&&(this.androidUpdateCount=t+this.androidUpdateFrequency,!!this.renderer.renderingToScreen)){this.renderer._lastObjectRendered&&this.updateAccessibleObjects(this.renderer._lastObjectRendered);var r=this.renderer.view.getBoundingClientRect(),n=r.left,i=r.top,o=r.width,s=r.height,a=this.renderer,l=a.width,u=a.height,c=a.resolution,f=o/l*c,p=s/u*c,m=this.div;m.style.left=n+"px",m.style.top=i+"px",m.style.width=l+"px",m.style.height=u+"px";for(var g=0;g<this.children.length;g++){var b=this.children[g];if(b.renderId!==this.renderId)b._accessibleActive=!1,Xs(this.children,g,1),this.div.removeChild(b._accessibleDiv),this.pool.push(b._accessibleDiv),b._accessibleDiv=null,g--;else{m=b._accessibleDiv;var y=b.hitArea,w=b.worldTransform;b.hitArea?(m.style.left=(w.tx+y.x*w.a)*f+"px",m.style.top=(w.ty+y.y*w.d)*p+"px",m.style.width=y.width*w.a*f+"px",m.style.height=y.height*w.d*p+"px"):(y=b.getBounds(),this.capHitArea(y),m.style.left=y.x*f+"px",m.style.top=y.y*p+"px",m.style.width=y.width*f+"px",m.style.height=y.height*p+"px",m.title!==b.accessibleTitle&&b.accessibleTitle!==null&&(m.title=b.accessibleTitle),m.getAttribute("aria-label")!==b.accessibleHint&&b.accessibleHint!==null&&m.setAttribute("aria-label",b.accessibleHint)),(b.accessibleTitle!==m.title||b.tabIndex!==m.tabIndex)&&(m.title=b.accessibleTitle,m.tabIndex=b.tabIndex,this.debug&&this.updateDebugHTML(m))}}this.renderId++}},e.prototype.updateDebugHTML=function(t){t.innerHTML="type: "+t.type+"</br> title : "+t.title+"</br> tabIndex: "+t.tabIndex},e.prototype.capHitArea=function(t){t.x<0&&(t.width+=t.x,t.x=0),t.y<0&&(t.height+=t.y,t.y=0);var r=this.renderer,n=r.width,i=r.height;t.x+t.width>n&&(t.width=n-t.x),t.y+t.height>i&&(t.height=i-t.y)},e.prototype.addChild=function(t){var r=this.pool.pop();r||(r=document.createElement("button"),r.style.width=wv+"px",r.style.height=wv+"px",r.style.backgroundColor=this.debug?"rgba(255,255,255,0.5)":"transparent",r.style.position="absolute",r.style.zIndex=f6.toString(),r.style.borderStyle="none",navigator.userAgent.toLowerCase().indexOf("chrome")>-1?r.setAttribute("aria-live","off"):r.setAttribute("aria-live","polite"),navigator.userAgent.match(/rv:.*Gecko\//)?r.setAttribute("aria-relevant","additions"):r.setAttribute("aria-relevant","text"),r.addEventListener("click",this._onClick.bind(this)),r.addEventListener("focus",this._onFocus.bind(this)),r.addEventListener("focusout",this._onFocusOut.bind(this))),r.style.pointerEvents=t.accessiblePointerEvents,r.type=t.accessibleType,t.accessibleTitle&&t.accessibleTitle!==null?r.title=t.accessibleTitle:(!t.accessibleHint||t.accessibleHint===null)&&(r.title="displayObject "+t.tabIndex),t.accessibleHint&&t.accessibleHint!==null&&r.setAttribute("aria-label",t.accessibleHint),this.debug&&this.updateDebugHTML(r),t._accessibleActive=!0,t._accessibleDiv=r,r.displayObject=t,this.children.push(t),this.div.appendChild(t._accessibleDiv),t._accessibleDiv.tabIndex=t.tabIndex},e.prototype._onClick=function(t){var r=this.renderer.plugins.interaction,n=t.target.displayObject,i=r.eventData;r.dispatchEvent(n,"click",i),r.dispatchEvent(n,"pointertap",i),r.dispatchEvent(n,"tap",i)},e.prototype._onFocus=function(t){t.target.getAttribute("aria-live")||t.target.setAttribute("aria-live","assertive");var r=this.renderer.plugins.interaction,n=t.target.displayObject,i=r.eventData;r.dispatchEvent(n,"mouseover",i)},e.prototype._onFocusOut=function(t){t.target.getAttribute("aria-live")||t.target.setAttribute("aria-live","polite");var r=this.renderer.plugins.interaction,n=t.target.displayObject,i=r.eventData;r.dispatchEvent(n,"mouseout",i)},e.prototype._onKeyDown=function(t){t.keyCode===JJ&&this.activate()},e.prototype._onMouseMove=function(t){t.movementX===0&&t.movementY===0||this.deactivate()},e.prototype.destroy=function(){this.destroyTouchHook(),this.div=null,globalThis.document.removeEventListener("mousemove",this._onMouseMove,!0),globalThis.removeEventListener("keydown",this._onKeyDown),this.pool=null,this.children=null,this.renderer=null},e}();/*!
 * @pixi/ticker - v6.4.2
 * Compiled Thu, 02 Jun 2022 15:39:26 UTC
 *
 * @pixi/ticker is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */We.TARGET_FPMS=.06;var Qs;(function(e){e[e.INTERACTION=50]="INTERACTION",e[e.HIGH=25]="HIGH",e[e.NORMAL=0]="NORMAL",e[e.LOW=-25]="LOW",e[e.UTILITY=-50]="UTILITY"})(Qs||(Qs={}));var s_=function(){function e(t,r,n,i){r===void 0&&(r=null),n===void 0&&(n=0),i===void 0&&(i=!1),this.next=null,this.previous=null,this._destroyed=!1,this.fn=t,this.context=r,this.priority=n,this.once=i}return e.prototype.match=function(t,r){return r===void 0&&(r=null),this.fn===t&&this.context===r},e.prototype.emit=function(t){this.fn&&(this.context?this.fn.call(this.context,t):this.fn(t));var r=this.next;return this.once&&this.destroy(!0),this._destroyed&&(this.next=null),r},e.prototype.connect=function(t){this.previous=t,t.next&&(t.next.previous=this),this.next=t.next,t.next=this},e.prototype.destroy=function(t){t===void 0&&(t=!1),this._destroyed=!0,this.fn=null,this.context=null,this.previous&&(this.previous.next=this.next),this.next&&(this.next.previous=this.previous);var r=this.next;return this.next=t?null:r,this.previous=null,r},e}(),an=function(){function e(){var t=this;this.autoStart=!1,this.deltaTime=1,this.lastTime=-1,this.speed=1,this.started=!1,this._requestId=null,this._maxElapsedMS=100,this._minElapsedMS=0,this._protected=!1,this._lastFrame=-1,this._head=new s_(null,null,1/0),this.deltaMS=1/We.TARGET_FPMS,this.elapsedMS=1/We.TARGET_FPMS,this._tick=function(r){t._requestId=null,t.started&&(t.update(r),t.started&&t._requestId===null&&t._head.next&&(t._requestId=requestAnimationFrame(t._tick)))}}return e.prototype._requestIfNeeded=function(){this._requestId===null&&this._head.next&&(this.lastTime=performance.now(),this._lastFrame=this.lastTime,this._requestId=requestAnimationFrame(this._tick))},e.prototype._cancelIfNeeded=function(){this._requestId!==null&&(cancelAnimationFrame(this._requestId),this._requestId=null)},e.prototype._startIfPossible=function(){this.started?this._requestIfNeeded():this.autoStart&&this.start()},e.prototype.add=function(t,r,n){return n===void 0&&(n=Qs.NORMAL),this._addListener(new s_(t,r,n))},e.prototype.addOnce=function(t,r,n){return n===void 0&&(n=Qs.NORMAL),this._addListener(new s_(t,r,n,!0))},e.prototype._addListener=function(t){var r=this._head.next,n=this._head;if(!r)t.connect(n);else{for(;r;){if(t.priority>r.priority){t.connect(n);break}n=r,r=r.next}t.previous||t.connect(n)}return this._startIfPossible(),this},e.prototype.remove=function(t,r){for(var n=this._head.next;n;)n.match(t,r)?n=n.destroy():n=n.next;return this._head.next||this._cancelIfNeeded(),this},Object.defineProperty(e.prototype,"count",{get:function(){if(!this._head)return 0;for(var t=0,r=this._head;r=r.next;)t++;return t},enumerable:!1,configurable:!0}),e.prototype.start=function(){this.started||(this.started=!0,this._requestIfNeeded())},e.prototype.stop=function(){this.started&&(this.started=!1,this._cancelIfNeeded())},e.prototype.destroy=function(){if(!this._protected){this.stop();for(var t=this._head.next;t;)t=t.destroy(!0);this._head.destroy(),this._head=null}},e.prototype.update=function(t){t===void 0&&(t=performance.now());var r;if(t>this.lastTime){if(r=this.elapsedMS=t-this.lastTime,r>this._maxElapsedMS&&(r=this._maxElapsedMS),r*=this.speed,this._minElapsedMS){var n=t-this._lastFrame|0;if(n<this._minElapsedMS)return;this._lastFrame=t-n%this._minElapsedMS}this.deltaMS=r,this.deltaTime=this.deltaMS*We.TARGET_FPMS;for(var i=this._head,o=i.next;o;)o=o.emit(this.deltaTime);i.next||this._cancelIfNeeded()}else this.deltaTime=this.deltaMS=this.elapsedMS=0;this.lastTime=t},Object.defineProperty(e.prototype,"FPS",{get:function(){return 1e3/this.elapsedMS},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"minFPS",{get:function(){return 1e3/this._maxElapsedMS},set:function(t){var r=Math.min(this.maxFPS,t),n=Math.min(Math.max(0,r)/1e3,We.TARGET_FPMS);this._maxElapsedMS=1/n},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"maxFPS",{get:function(){return this._minElapsedMS?Math.round(1e3/this._minElapsedMS):0},set:function(t){if(t===0)this._minElapsedMS=0;else{var r=Math.max(this.minFPS,t);this._minElapsedMS=1/(r/1e3)}},enumerable:!1,configurable:!0}),Object.defineProperty(e,"shared",{get:function(){if(!e._shared){var t=e._shared=new e;t.autoStart=!0,t._protected=!0}return e._shared},enumerable:!1,configurable:!0}),Object.defineProperty(e,"system",{get:function(){if(!e._system){var t=e._system=new e;t.autoStart=!0,t._protected=!0}return e._system},enumerable:!1,configurable:!0}),e}(),oQ=function(){function e(){}return e.init=function(t){var r=this;t=Object.assign({autoStart:!0,sharedTicker:!1},t),Object.defineProperty(this,"ticker",{set:function(n){this._ticker&&this._ticker.remove(this.render,this),this._ticker=n,n&&n.add(this.render,this,Qs.LOW)},get:function(){return this._ticker}}),this.stop=function(){r._ticker.stop()},this.start=function(){r._ticker.start()},this._ticker=null,this.ticker=t.sharedTicker?an.shared:new an,t.autoStart&&this.start()},e.destroy=function(){if(this._ticker){var t=this._ticker;this.ticker=null,t.destroy()}},e}();/*!
 * @pixi/interaction - v6.4.2
 * Compiled Thu, 02 Jun 2022 15:39:26 UTC
 *
 * @pixi/interaction is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var p6=function(){function e(){this.pressure=0,this.rotationAngle=0,this.twist=0,this.tangentialPressure=0,this.global=new Gt,this.target=null,this.originalEvent=null,this.identifier=null,this.isPrimary=!1,this.button=0,this.buttons=0,this.width=0,this.height=0,this.tiltX=0,this.tiltY=0,this.pointerType=null,this.pressure=0,this.rotationAngle=0,this.twist=0,this.tangentialPressure=0}return Object.defineProperty(e.prototype,"pointerId",{get:function(){return this.identifier},enumerable:!1,configurable:!0}),e.prototype.getLocalPosition=function(t,r,n){return t.worldTransform.applyInverse(n||this.global,r)},e.prototype.copyEvent=function(t){"isPrimary"in t&&t.isPrimary&&(this.isPrimary=!0),this.button="button"in t&&t.button;var r="buttons"in t&&t.buttons;this.buttons=Number.isInteger(r)?r:"which"in t&&t.which,this.width="width"in t&&t.width,this.height="height"in t&&t.height,this.tiltX="tiltX"in t&&t.tiltX,this.tiltY="tiltY"in t&&t.tiltY,this.pointerType="pointerType"in t&&t.pointerType,this.pressure="pressure"in t&&t.pressure,this.rotationAngle="rotationAngle"in t&&t.rotationAngle,this.twist="twist"in t&&t.twist||0,this.tangentialPressure="tangentialPressure"in t&&t.tangentialPressure||0},e.prototype.reset=function(){this.isPrimary=!1},e}();/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var Uw=function(e,t){return Uw=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])},Uw(e,t)};function sQ(e,t){Uw(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var aQ=function(){function e(){this.stopped=!1,this.stopsPropagatingAt=null,this.stopPropagationHint=!1,this.target=null,this.currentTarget=null,this.type=null,this.data=null}return e.prototype.stopPropagation=function(){this.stopped=!0,this.stopPropagationHint=!0,this.stopsPropagatingAt=this.currentTarget},e.prototype.reset=function(){this.stopped=!1,this.stopsPropagatingAt=null,this.stopPropagationHint=!1,this.currentTarget=null,this.target=null},e}(),a_=function(){function e(t){this._pointerId=t,this._flags=e.FLAGS.NONE}return e.prototype._doSet=function(t,r){r?this._flags=this._flags|t:this._flags=this._flags&~t},Object.defineProperty(e.prototype,"pointerId",{get:function(){return this._pointerId},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"flags",{get:function(){return this._flags},set:function(t){this._flags=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"none",{get:function(){return this._flags===e.FLAGS.NONE},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"over",{get:function(){return(this._flags&e.FLAGS.OVER)!==0},set:function(t){this._doSet(e.FLAGS.OVER,t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"rightDown",{get:function(){return(this._flags&e.FLAGS.RIGHT_DOWN)!==0},set:function(t){this._doSet(e.FLAGS.RIGHT_DOWN,t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"leftDown",{get:function(){return(this._flags&e.FLAGS.LEFT_DOWN)!==0},set:function(t){this._doSet(e.FLAGS.LEFT_DOWN,t)},enumerable:!1,configurable:!0}),e.FLAGS=Object.freeze({NONE:0,OVER:1<<0,LEFT_DOWN:1<<1,RIGHT_DOWN:1<<2}),e}(),lQ=function(){function e(){this._tempPoint=new Gt}return e.prototype.recursiveFindHit=function(t,r,n,i,o){if(!r||!r.visible)return!1;var s=t.data.global;o=r.interactive||o;var a=!1,l=o,u=!0;if(r.hitArea?(i&&(r.worldTransform.applyInverse(s,this._tempPoint),r.hitArea.contains(this._tempPoint.x,this._tempPoint.y)?a=!0:(i=!1,u=!1)),l=!1):r._mask&&i&&(r._mask.containsPoint&&r._mask.containsPoint(s)||(i=!1)),u&&r.interactiveChildren&&r.children)for(var c=r.children,f=c.length-1;f>=0;f--){var p=c[f],m=this.recursiveFindHit(t,p,n,i,l);if(m){if(!p.parent)continue;l=!1,m&&(t.target&&(i=!1),a=!0)}}return o&&(i&&!t.target&&!r.hitArea&&r.containsPoint&&r.containsPoint(s)&&(a=!0),r.interactive&&(a&&!t.target&&(t.target=r),n&&n(t,r,!!a))),a},e.prototype.findHit=function(t,r,n,i){this.recursiveFindHit(t,r,n,i,!1)},e}(),uQ={interactive:!1,interactiveChildren:!0,hitArea:null,get buttonMode(){return this.cursor==="pointer"},set buttonMode(e){e?this.cursor="pointer":this.cursor==="pointer"&&(this.cursor=null)},cursor:null,get trackedPointers(){return this._trackedPointers===void 0&&(this._trackedPointers={}),this._trackedPointers},_trackedPointers:void 0};Er.mixin(uQ);var xv=1,Tv={target:null,data:{global:null}},cQ=function(e){sQ(t,e);function t(r,n){var i=e.call(this)||this;return n=n||{},i.renderer=r,i.autoPreventDefault=n.autoPreventDefault!==void 0?n.autoPreventDefault:!0,i.interactionFrequency=n.interactionFrequency||10,i.mouse=new p6,i.mouse.identifier=xv,i.mouse.global.set(-999999),i.activeInteractionData={},i.activeInteractionData[xv]=i.mouse,i.interactionDataPool=[],i.eventData=new aQ,i.interactionDOMElement=null,i.moveWhenInside=!1,i.eventsAdded=!1,i.tickerAdded=!1,i.mouseOverRenderer=!("PointerEvent"in globalThis),i.supportsTouchEvents="ontouchstart"in globalThis,i.supportsPointerEvents=!!globalThis.PointerEvent,i.onPointerUp=i.onPointerUp.bind(i),i.processPointerUp=i.processPointerUp.bind(i),i.onPointerCancel=i.onPointerCancel.bind(i),i.processPointerCancel=i.processPointerCancel.bind(i),i.onPointerDown=i.onPointerDown.bind(i),i.processPointerDown=i.processPointerDown.bind(i),i.onPointerMove=i.onPointerMove.bind(i),i.processPointerMove=i.processPointerMove.bind(i),i.onPointerOut=i.onPointerOut.bind(i),i.processPointerOverOut=i.processPointerOverOut.bind(i),i.onPointerOver=i.onPointerOver.bind(i),i.cursorStyles={default:"inherit",pointer:"pointer"},i.currentCursorMode=null,i.cursor=null,i.resolution=1,i.delayedEvents=[],i.search=new lQ,i._tempDisplayObject=new kO,i._eventListenerOptions={capture:!0,passive:!1},i._useSystemTicker=n.useSystemTicker!==void 0?n.useSystemTicker:!0,i.setTargetElement(i.renderer.view,i.renderer.resolution),i}return Object.defineProperty(t.prototype,"useSystemTicker",{get:function(){return this._useSystemTicker},set:function(r){this._useSystemTicker=r,r?this.addTickerListener():this.removeTickerListener()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"lastObjectRendered",{get:function(){return this.renderer._lastObjectRendered||this._tempDisplayObject},enumerable:!1,configurable:!0}),t.prototype.hitTest=function(r,n){return Tv.target=null,Tv.data.global=r,n||(n=this.lastObjectRendered),this.processInteractive(Tv,n,null,!0),Tv.target},t.prototype.setTargetElement=function(r,n){n===void 0&&(n=1),this.removeTickerListener(),this.removeEvents(),this.interactionDOMElement=r,this.resolution=n,this.addEvents(),this.addTickerListener()},t.prototype.addTickerListener=function(){this.tickerAdded||!this.interactionDOMElement||!this._useSystemTicker||(an.system.add(this.tickerUpdate,this,Qs.INTERACTION),this.tickerAdded=!0)},t.prototype.removeTickerListener=function(){!this.tickerAdded||(an.system.remove(this.tickerUpdate,this),this.tickerAdded=!1)},t.prototype.addEvents=function(){if(!(this.eventsAdded||!this.interactionDOMElement)){var r=this.interactionDOMElement.style;globalThis.navigator.msPointerEnabled?(r.msContentZooming="none",r.msTouchAction="none"):this.supportsPointerEvents&&(r.touchAction="none"),this.supportsPointerEvents?(globalThis.document.addEventListener("pointermove",this.onPointerMove,this._eventListenerOptions),this.interactionDOMElement.addEventListener("pointerdown",this.onPointerDown,this._eventListenerOptions),this.interactionDOMElement.addEventListener("pointerleave",this.onPointerOut,this._eventListenerOptions),this.interactionDOMElement.addEventListener("pointerover",this.onPointerOver,this._eventListenerOptions),globalThis.addEventListener("pointercancel",this.onPointerCancel,this._eventListenerOptions),globalThis.addEventListener("pointerup",this.onPointerUp,this._eventListenerOptions)):(globalThis.document.addEventListener("mousemove",this.onPointerMove,this._eventListenerOptions),this.interactionDOMElement.addEventListener("mousedown",this.onPointerDown,this._eventListenerOptions),this.interactionDOMElement.addEventListener("mouseout",this.onPointerOut,this._eventListenerOptions),this.interactionDOMElement.addEventListener("mouseover",this.onPointerOver,this._eventListenerOptions),globalThis.addEventListener("mouseup",this.onPointerUp,this._eventListenerOptions)),this.supportsTouchEvents&&(this.interactionDOMElement.addEventListener("touchstart",this.onPointerDown,this._eventListenerOptions),this.interactionDOMElement.addEventListener("touchcancel",this.onPointerCancel,this._eventListenerOptions),this.interactionDOMElement.addEventListener("touchend",this.onPointerUp,this._eventListenerOptions),this.interactionDOMElement.addEventListener("touchmove",this.onPointerMove,this._eventListenerOptions)),this.eventsAdded=!0}},t.prototype.removeEvents=function(){if(!(!this.eventsAdded||!this.interactionDOMElement)){var r=this.interactionDOMElement.style;globalThis.navigator.msPointerEnabled?(r.msContentZooming="",r.msTouchAction=""):this.supportsPointerEvents&&(r.touchAction=""),this.supportsPointerEvents?(globalThis.document.removeEventListener("pointermove",this.onPointerMove,this._eventListenerOptions),this.interactionDOMElement.removeEventListener("pointerdown",this.onPointerDown,this._eventListenerOptions),this.interactionDOMElement.removeEventListener("pointerleave",this.onPointerOut,this._eventListenerOptions),this.interactionDOMElement.removeEventListener("pointerover",this.onPointerOver,this._eventListenerOptions),globalThis.removeEventListener("pointercancel",this.onPointerCancel,this._eventListenerOptions),globalThis.removeEventListener("pointerup",this.onPointerUp,this._eventListenerOptions)):(globalThis.document.removeEventListener("mousemove",this.onPointerMove,this._eventListenerOptions),this.interactionDOMElement.removeEventListener("mousedown",this.onPointerDown,this._eventListenerOptions),this.interactionDOMElement.removeEventListener("mouseout",this.onPointerOut,this._eventListenerOptions),this.interactionDOMElement.removeEventListener("mouseover",this.onPointerOver,this._eventListenerOptions),globalThis.removeEventListener("mouseup",this.onPointerUp,this._eventListenerOptions)),this.supportsTouchEvents&&(this.interactionDOMElement.removeEventListener("touchstart",this.onPointerDown,this._eventListenerOptions),this.interactionDOMElement.removeEventListener("touchcancel",this.onPointerCancel,this._eventListenerOptions),this.interactionDOMElement.removeEventListener("touchend",this.onPointerUp,this._eventListenerOptions),this.interactionDOMElement.removeEventListener("touchmove",this.onPointerMove,this._eventListenerOptions)),this.interactionDOMElement=null,this.eventsAdded=!1}},t.prototype.tickerUpdate=function(r){this._deltaTime+=r,!(this._deltaTime<this.interactionFrequency)&&(this._deltaTime=0,this.update())},t.prototype.update=function(){if(!!this.interactionDOMElement){if(this._didMove){this._didMove=!1;return}this.cursor=null;for(var r in this.activeInteractionData)if(this.activeInteractionData.hasOwnProperty(r)){var n=this.activeInteractionData[r];if(n.originalEvent&&n.pointerType!=="touch"){var i=this.configureInteractionEventForDOMEvent(this.eventData,n.originalEvent,n);this.processInteractive(i,this.lastObjectRendered,this.processPointerOverOut,!0)}}this.setCursorMode(this.cursor)}},t.prototype.setCursorMode=function(r){r=r||"default";var n=!0;if(globalThis.OffscreenCanvas&&this.interactionDOMElement instanceof OffscreenCanvas&&(n=!1),this.currentCursorMode!==r){this.currentCursorMode=r;var i=this.cursorStyles[r];if(i)switch(typeof i){case"string":n&&(this.interactionDOMElement.style.cursor=i);break;case"function":i(r);break;case"object":n&&Object.assign(this.interactionDOMElement.style,i);break}else n&&typeof r=="string"&&!Object.prototype.hasOwnProperty.call(this.cursorStyles,r)&&(this.interactionDOMElement.style.cursor=r)}},t.prototype.dispatchEvent=function(r,n,i){(!i.stopPropagationHint||r===i.stopsPropagatingAt)&&(i.currentTarget=r,i.type=n,r.emit(n,i),r[n]&&r[n](i))},t.prototype.delayDispatchEvent=function(r,n,i){this.delayedEvents.push({displayObject:r,eventString:n,eventData:i})},t.prototype.mapPositionToPoint=function(r,n,i){var o;this.interactionDOMElement.parentElement?o=this.interactionDOMElement.getBoundingClientRect():o={x:0,y:0,width:this.interactionDOMElement.width,height:this.interactionDOMElement.height,left:0,top:0};var s=1/this.resolution;r.x=(n-o.left)*(this.interactionDOMElement.width/o.width)*s,r.y=(i-o.top)*(this.interactionDOMElement.height/o.height)*s},t.prototype.processInteractive=function(r,n,i,o){var s=this.search.findHit(r,n,i,o),a=this.delayedEvents;if(!a.length)return s;r.stopPropagationHint=!1;var l=a.length;this.delayedEvents=[];for(var u=0;u<l;u++){var c=a[u],f=c.displayObject,p=c.eventString,m=c.eventData;m.stopsPropagatingAt===f&&(m.stopPropagationHint=!0),this.dispatchEvent(f,p,m)}return s},t.prototype.onPointerDown=function(r){if(!(this.supportsTouchEvents&&r.pointerType==="touch")){var n=this.normalizeToPointerData(r);if(this.autoPreventDefault&&n[0].isNormalized){var i=r.cancelable||!("cancelable"in r);i&&r.preventDefault()}for(var o=n.length,s=0;s<o;s++){var a=n[s],l=this.getInteractionDataForPointerId(a),u=this.configureInteractionEventForDOMEvent(this.eventData,a,l);if(u.data.originalEvent=r,this.processInteractive(u,this.lastObjectRendered,this.processPointerDown,!0),this.emit("pointerdown",u),a.pointerType==="touch")this.emit("touchstart",u);else if(a.pointerType==="mouse"||a.pointerType==="pen"){var c=a.button===2;this.emit(c?"rightdown":"mousedown",this.eventData)}}}},t.prototype.processPointerDown=function(r,n,i){var o=r.data,s=r.data.identifier;if(i){if(n.trackedPointers[s]||(n.trackedPointers[s]=new a_(s)),this.dispatchEvent(n,"pointerdown",r),o.pointerType==="touch")this.dispatchEvent(n,"touchstart",r);else if(o.pointerType==="mouse"||o.pointerType==="pen"){var a=o.button===2;a?n.trackedPointers[s].rightDown=!0:n.trackedPointers[s].leftDown=!0,this.dispatchEvent(n,a?"rightdown":"mousedown",r)}}},t.prototype.onPointerComplete=function(r,n,i){for(var o=this.normalizeToPointerData(r),s=o.length,a=r.target!==this.interactionDOMElement?"outside":"",l=0;l<s;l++){var u=o[l],c=this.getInteractionDataForPointerId(u),f=this.configureInteractionEventForDOMEvent(this.eventData,u,c);if(f.data.originalEvent=r,this.processInteractive(f,this.lastObjectRendered,i,n||!a),this.emit(n?"pointercancel":"pointerup"+a,f),u.pointerType==="mouse"||u.pointerType==="pen"){var p=u.button===2;this.emit(p?"rightup"+a:"mouseup"+a,f)}else u.pointerType==="touch"&&(this.emit(n?"touchcancel":"touchend"+a,f),this.releaseInteractionDataForPointerId(u.pointerId))}},t.prototype.onPointerCancel=function(r){this.supportsTouchEvents&&r.pointerType==="touch"||this.onPointerComplete(r,!0,this.processPointerCancel)},t.prototype.processPointerCancel=function(r,n){var i=r.data,o=r.data.identifier;n.trackedPointers[o]!==void 0&&(delete n.trackedPointers[o],this.dispatchEvent(n,"pointercancel",r),i.pointerType==="touch"&&this.dispatchEvent(n,"touchcancel",r))},t.prototype.onPointerUp=function(r){this.supportsTouchEvents&&r.pointerType==="touch"||this.onPointerComplete(r,!1,this.processPointerUp)},t.prototype.processPointerUp=function(r,n,i){var o=r.data,s=r.data.identifier,a=n.trackedPointers[s],l=o.pointerType==="touch",u=o.pointerType==="mouse"||o.pointerType==="pen",c=!1;if(u){var f=o.button===2,p=a_.FLAGS,m=f?p.RIGHT_DOWN:p.LEFT_DOWN,g=a!==void 0&&a.flags&m;i?(this.dispatchEvent(n,f?"rightup":"mouseup",r),g&&(this.dispatchEvent(n,f?"rightclick":"click",r),c=!0)):g&&this.dispatchEvent(n,f?"rightupoutside":"mouseupoutside",r),a&&(f?a.rightDown=!1:a.leftDown=!1)}i?(this.dispatchEvent(n,"pointerup",r),l&&this.dispatchEvent(n,"touchend",r),a&&((!u||c)&&this.dispatchEvent(n,"pointertap",r),l&&(this.dispatchEvent(n,"tap",r),a.over=!1))):a&&(this.dispatchEvent(n,"pointerupoutside",r),l&&this.dispatchEvent(n,"touchendoutside",r)),a&&a.none&&delete n.trackedPointers[s]},t.prototype.onPointerMove=function(r){if(!(this.supportsTouchEvents&&r.pointerType==="touch")){var n=this.normalizeToPointerData(r);(n[0].pointerType==="mouse"||n[0].pointerType==="pen")&&(this._didMove=!0,this.cursor=null);for(var i=n.length,o=0;o<i;o++){var s=n[o],a=this.getInteractionDataForPointerId(s),l=this.configureInteractionEventForDOMEvent(this.eventData,s,a);l.data.originalEvent=r,this.processInteractive(l,this.lastObjectRendered,this.processPointerMove,!0),this.emit("pointermove",l),s.pointerType==="touch"&&this.emit("touchmove",l),(s.pointerType==="mouse"||s.pointerType==="pen")&&this.emit("mousemove",l)}n[0].pointerType==="mouse"&&this.setCursorMode(this.cursor)}},t.prototype.processPointerMove=function(r,n,i){var o=r.data,s=o.pointerType==="touch",a=o.pointerType==="mouse"||o.pointerType==="pen";a&&this.processPointerOverOut(r,n,i),(!this.moveWhenInside||i)&&(this.dispatchEvent(n,"pointermove",r),s&&this.dispatchEvent(n,"touchmove",r),a&&this.dispatchEvent(n,"mousemove",r))},t.prototype.onPointerOut=function(r){if(!(this.supportsTouchEvents&&r.pointerType==="touch")){var n=this.normalizeToPointerData(r),i=n[0];i.pointerType==="mouse"&&(this.mouseOverRenderer=!1,this.setCursorMode(null));var o=this.getInteractionDataForPointerId(i),s=this.configureInteractionEventForDOMEvent(this.eventData,i,o);s.data.originalEvent=i,this.processInteractive(s,this.lastObjectRendered,this.processPointerOverOut,!1),this.emit("pointerout",s),i.pointerType==="mouse"||i.pointerType==="pen"?this.emit("mouseout",s):this.releaseInteractionDataForPointerId(o.identifier)}},t.prototype.processPointerOverOut=function(r,n,i){var o=r.data,s=r.data.identifier,a=o.pointerType==="mouse"||o.pointerType==="pen",l=n.trackedPointers[s];i&&!l&&(l=n.trackedPointers[s]=new a_(s)),l!==void 0&&(i&&this.mouseOverRenderer?(l.over||(l.over=!0,this.delayDispatchEvent(n,"pointerover",r),a&&this.delayDispatchEvent(n,"mouseover",r)),a&&this.cursor===null&&(this.cursor=n.cursor)):l.over&&(l.over=!1,this.dispatchEvent(n,"pointerout",this.eventData),a&&this.dispatchEvent(n,"mouseout",r),l.none&&delete n.trackedPointers[s]))},t.prototype.onPointerOver=function(r){var n=this.normalizeToPointerData(r),i=n[0],o=this.getInteractionDataForPointerId(i),s=this.configureInteractionEventForDOMEvent(this.eventData,i,o);s.data.originalEvent=i,i.pointerType==="mouse"&&(this.mouseOverRenderer=!0),this.emit("pointerover",s),(i.pointerType==="mouse"||i.pointerType==="pen")&&this.emit("mouseover",s)},t.prototype.getInteractionDataForPointerId=function(r){var n=r.pointerId,i;return n===xv||r.pointerType==="mouse"?i=this.mouse:this.activeInteractionData[n]?i=this.activeInteractionData[n]:(i=this.interactionDataPool.pop()||new p6,i.identifier=n,this.activeInteractionData[n]=i),i.copyEvent(r),i},t.prototype.releaseInteractionDataForPointerId=function(r){var n=this.activeInteractionData[r];n&&(delete this.activeInteractionData[r],n.reset(),this.interactionDataPool.push(n))},t.prototype.configureInteractionEventForDOMEvent=function(r,n,i){return r.data=i,this.mapPositionToPoint(i.global,n.clientX,n.clientY),n.pointerType==="touch"&&(n.globalX=i.global.x,n.globalY=i.global.y),i.originalEvent=n,r.reset(),r},t.prototype.normalizeToPointerData=function(r){var n=[];if(this.supportsTouchEvents&&r instanceof TouchEvent)for(var i=0,o=r.changedTouches.length;i<o;i++){var s=r.changedTouches[i];typeof s.button>"u"&&(s.button=r.touches.length?1:0),typeof s.buttons>"u"&&(s.buttons=r.touches.length?1:0),typeof s.isPrimary>"u"&&(s.isPrimary=r.touches.length===1&&r.type==="touchstart"),typeof s.width>"u"&&(s.width=s.radiusX||1),typeof s.height>"u"&&(s.height=s.radiusY||1),typeof s.tiltX>"u"&&(s.tiltX=0),typeof s.tiltY>"u"&&(s.tiltY=0),typeof s.pointerType>"u"&&(s.pointerType="touch"),typeof s.pointerId>"u"&&(s.pointerId=s.identifier||0),typeof s.pressure>"u"&&(s.pressure=s.force||.5),typeof s.twist>"u"&&(s.twist=0),typeof s.tangentialPressure>"u"&&(s.tangentialPressure=0),typeof s.layerX>"u"&&(s.layerX=s.offsetX=s.clientX),typeof s.layerY>"u"&&(s.layerY=s.offsetY=s.clientY),s.isNormalized=!0,n.push(s)}else if(!globalThis.MouseEvent||r instanceof MouseEvent&&(!this.supportsPointerEvents||!(r instanceof globalThis.PointerEvent))){var a=r;typeof a.isPrimary>"u"&&(a.isPrimary=!0),typeof a.width>"u"&&(a.width=1),typeof a.height>"u"&&(a.height=1),typeof a.tiltX>"u"&&(a.tiltX=0),typeof a.tiltY>"u"&&(a.tiltY=0),typeof a.pointerType>"u"&&(a.pointerType="mouse"),typeof a.pointerId>"u"&&(a.pointerId=xv),typeof a.pressure>"u"&&(a.pressure=.5),typeof a.twist>"u"&&(a.twist=0),typeof a.tangentialPressure>"u"&&(a.tangentialPressure=0),a.isNormalized=!0,n.push(a)}else n.push(r);return n},t.prototype.destroy=function(){this.removeEvents(),this.removeTickerListener(),this.removeAllListeners(),this.renderer=null,this.mouse=null,this.eventData=null,this.interactionDOMElement=null,this.onPointerDown=null,this.processPointerDown=null,this.onPointerUp=null,this.processPointerUp=null,this.onPointerCancel=null,this.processPointerCancel=null,this.onPointerMove=null,this.processPointerMove=null,this.onPointerOut=null,this.processPointerOverOut=null,this.onPointerOver=null,this.search=null},t}(Oh);/*!
 * @pixi/runner - v6.4.2
 * Compiled Thu, 02 Jun 2022 15:39:26 UTC
 *
 * @pixi/runner is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var Mn=function(){function e(t){this.items=[],this._name=t,this._aliasCount=0}return e.prototype.emit=function(t,r,n,i,o,s,a,l){if(arguments.length>8)throw new Error("max arguments reached");var u=this,c=u.name,f=u.items;this._aliasCount++;for(var p=0,m=f.length;p<m;p++)f[p][c](t,r,n,i,o,s,a,l);return f===this.items&&this._aliasCount--,this},e.prototype.ensureNonAliasedItems=function(){this._aliasCount>0&&this.items.length>1&&(this._aliasCount=0,this.items=this.items.slice(0))},e.prototype.add=function(t){return t[this._name]&&(this.ensureNonAliasedItems(),this.remove(t),this.items.push(t)),this},e.prototype.remove=function(t){var r=this.items.indexOf(t);return r!==-1&&(this.ensureNonAliasedItems(),this.items.splice(r,1)),this},e.prototype.contains=function(t){return this.items.indexOf(t)!==-1},e.prototype.removeAll=function(){return this.ensureNonAliasedItems(),this.items.length=0,this},e.prototype.destroy=function(){this.removeAll(),this.items=null,this._name=null},Object.defineProperty(e.prototype,"empty",{get:function(){return this.items.length===0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"name",{get:function(){return this._name},enumerable:!1,configurable:!0}),e}();Object.defineProperties(Mn.prototype,{dispatch:{value:Mn.prototype.emit},run:{value:Mn.prototype.emit}});/*!
 * @pixi/core - v6.4.2
 * Compiled Thu, 02 Jun 2022 15:39:26 UTC
 *
 * @pixi/core is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */We.PREFER_ENV=Ko.any?Zs.WEBGL:Zs.WEBGL2;We.STRICT_TEXTURE_CACHE=!1;var Fw=[];function OO(e,t){if(!e)return null;var r="";if(typeof e=="string"){var n=/\.(\w{3,4})(?:$|\?|#)/i.exec(e);n&&(r=n[1].toLowerCase())}for(var i=Fw.length-1;i>=0;--i){var o=Fw[i];if(o.test&&o.test(e,r))return new o(e,t)}throw new Error("Unrecognized source type to auto-detect Resource")}/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var Mw=function(e,t){return Mw=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])},Mw(e,t)};function nr(e,t){Mw(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var Bw=function(){return Bw=Object.assign||function(t){for(var r=arguments,n,i=1,o=arguments.length;i<o;i++){n=r[i];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(t[s]=n[s])}return t},Bw.apply(this,arguments)};function hQ(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&(r[n[i]]=e[n[i]]);return r}var tp=function(){function e(t,r){t===void 0&&(t=0),r===void 0&&(r=0),this._width=t,this._height=r,this.destroyed=!1,this.internal=!1,this.onResize=new Mn("setRealSize"),this.onUpdate=new Mn("update"),this.onError=new Mn("onError")}return e.prototype.bind=function(t){this.onResize.add(t),this.onUpdate.add(t),this.onError.add(t),(this._width||this._height)&&this.onResize.emit(this._width,this._height)},e.prototype.unbind=function(t){this.onResize.remove(t),this.onUpdate.remove(t),this.onError.remove(t)},e.prototype.resize=function(t,r){(t!==this._width||r!==this._height)&&(this._width=t,this._height=r,this.onResize.emit(t,r))},Object.defineProperty(e.prototype,"valid",{get:function(){return!!this._width&&!!this._height},enumerable:!1,configurable:!0}),e.prototype.update=function(){this.destroyed||this.onUpdate.emit()},e.prototype.load=function(){return Promise.resolve(this)},Object.defineProperty(e.prototype,"width",{get:function(){return this._width},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this._height},enumerable:!1,configurable:!0}),e.prototype.style=function(t,r,n){return!1},e.prototype.dispose=function(){},e.prototype.destroy=function(){this.destroyed||(this.destroyed=!0,this.dispose(),this.onError.removeAll(),this.onError=null,this.onResize.removeAll(),this.onResize=null,this.onUpdate.removeAll(),this.onUpdate=null)},e.test=function(t,r){return!1},e}(),Gp=function(e){nr(t,e);function t(r,n){var i=this,o=n||{},s=o.width,a=o.height;if(!s||!a)throw new Error("BufferResource width or height invalid");return i=e.call(this,s,a)||this,i.data=r,i}return t.prototype.upload=function(r,n,i){var o=r.gl;o.pixelStorei(o.UNPACK_PREMULTIPLY_ALPHA_WEBGL,n.alphaMode===So.UNPACK);var s=n.realWidth,a=n.realHeight;return i.width===s&&i.height===a?o.texSubImage2D(n.target,0,0,0,s,a,n.format,i.type,this.data):(i.width=s,i.height=a,o.texImage2D(n.target,0,i.internalFormat,s,a,0,n.format,i.type,this.data)),!0},t.prototype.dispose=function(){this.data=null},t.test=function(r){return r instanceof Float32Array||r instanceof Uint8Array||r instanceof Uint32Array},t}(tp),fQ={scaleMode:St.NEAREST,format:Te.RGBA,alphaMode:So.NPM},xt=function(e){nr(t,e);function t(r,n){r===void 0&&(r=null),n===void 0&&(n=null);var i=e.call(this)||this;n=n||{};var o=n.alphaMode,s=n.mipmap,a=n.anisotropicLevel,l=n.scaleMode,u=n.width,c=n.height,f=n.wrapMode,p=n.format,m=n.type,g=n.target,b=n.resolution,y=n.resourceOptions;return r&&!(r instanceof tp)&&(r=OO(r,y),r.internal=!0),i.resolution=b||We.RESOLUTION,i.width=Math.round((u||0)*i.resolution)/i.resolution,i.height=Math.round((c||0)*i.resolution)/i.resolution,i._mipmap=s!==void 0?s:We.MIPMAP_TEXTURES,i.anisotropicLevel=a!==void 0?a:We.ANISOTROPIC_LEVEL,i._wrapMode=f||We.WRAP_MODE,i._scaleMode=l!==void 0?l:We.SCALE_MODE,i.format=p||Te.RGBA,i.type=m||$e.UNSIGNED_BYTE,i.target=g||ru.TEXTURE_2D,i.alphaMode=o!==void 0?o:So.UNPACK,i.uid=gu(),i.touched=0,i.isPowerOfTwo=!1,i._refreshPOT(),i._glTextures={},i.dirtyId=0,i.dirtyStyleId=0,i.cacheId=null,i.valid=u>0&&c>0,i.textureCacheIds=[],i.destroyed=!1,i.resource=null,i._batchEnabled=0,i._batchLocation=0,i.parentTextureArray=null,i.setResource(r),i}return Object.defineProperty(t.prototype,"realWidth",{get:function(){return Math.round(this.width*this.resolution)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"realHeight",{get:function(){return Math.round(this.height*this.resolution)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"mipmap",{get:function(){return this._mipmap},set:function(r){this._mipmap!==r&&(this._mipmap=r,this.dirtyStyleId++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"scaleMode",{get:function(){return this._scaleMode},set:function(r){this._scaleMode!==r&&(this._scaleMode=r,this.dirtyStyleId++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"wrapMode",{get:function(){return this._wrapMode},set:function(r){this._wrapMode!==r&&(this._wrapMode=r,this.dirtyStyleId++)},enumerable:!1,configurable:!0}),t.prototype.setStyle=function(r,n){var i;return r!==void 0&&r!==this.scaleMode&&(this.scaleMode=r,i=!0),n!==void 0&&n!==this.mipmap&&(this.mipmap=n,i=!0),i&&this.dirtyStyleId++,this},t.prototype.setSize=function(r,n,i){return i=i||this.resolution,this.setRealSize(r*i,n*i,i)},t.prototype.setRealSize=function(r,n,i){return this.resolution=i||this.resolution,this.width=Math.round(r)/this.resolution,this.height=Math.round(n)/this.resolution,this._refreshPOT(),this.update(),this},t.prototype._refreshPOT=function(){this.isPowerOfTwo=H5(this.realWidth)&&H5(this.realHeight)},t.prototype.setResolution=function(r){var n=this.resolution;return n===r?this:(this.resolution=r,this.valid&&(this.width=Math.round(this.width*n)/r,this.height=Math.round(this.height*n)/r,this.emit("update",this)),this._refreshPOT(),this)},t.prototype.setResource=function(r){if(this.resource===r)return this;if(this.resource)throw new Error("Resource can be set only once");return r.bind(this),this.resource=r,this},t.prototype.update=function(){this.valid?(this.dirtyId++,this.dirtyStyleId++,this.emit("update",this)):this.width>0&&this.height>0&&(this.valid=!0,this.emit("loaded",this),this.emit("update",this))},t.prototype.onError=function(r){this.emit("error",this,r)},t.prototype.destroy=function(){this.resource&&(this.resource.unbind(this),this.resource.internal&&this.resource.destroy(),this.resource=null),this.cacheId&&(delete Ll[this.cacheId],delete Ns[this.cacheId],this.cacheId=null),this.dispose(),t.removeFromCache(this),this.textureCacheIds=null,this.destroyed=!0},t.prototype.dispose=function(){this.emit("dispose",this)},t.prototype.castToBaseTexture=function(){return this},t.from=function(r,n,i){i===void 0&&(i=We.STRICT_TEXTURE_CACHE);var o=typeof r=="string",s=null;if(o)s=r;else{if(!r._pixiId){var a=n&&n.pixiIdPrefix||"pixiid";r._pixiId=a+"_"+gu()}s=r._pixiId}var l=Ll[s];if(o&&i&&!l)throw new Error('The cacheId "'+s+'" does not exist in BaseTextureCache.');return l||(l=new t(r,n),l.cacheId=s,t.addToCache(l,s)),l},t.fromBuffer=function(r,n,i,o){r=r||new Float32Array(n*i*4);var s=new Gp(r,{width:n,height:i}),a=r instanceof Float32Array?$e.FLOAT:$e.UNSIGNED_BYTE;return new t(s,Object.assign(fQ,o||{width:n,height:i,type:a}))},t.addToCache=function(r,n){n&&(r.textureCacheIds.indexOf(n)===-1&&r.textureCacheIds.push(n),Ll[n]&&console.warn("BaseTexture added to the cache with an id ["+n+"] that already had an entry"),Ll[n]=r)},t.removeFromCache=function(r){if(typeof r=="string"){var n=Ll[r];if(n){var i=n.textureCacheIds.indexOf(r);return i>-1&&n.textureCacheIds.splice(i,1),delete Ll[r],n}}else if(r&&r.textureCacheIds){for(var o=0;o<r.textureCacheIds.length;++o)delete Ll[r.textureCacheIds[o]];return r.textureCacheIds.length=0,r}return null},t._globalBatch=0,t}(Oh),LO=function(e){nr(t,e);function t(r,n){var i=this,o=n||{},s=o.width,a=o.height;i=e.call(this,s,a)||this,i.items=[],i.itemDirtyIds=[];for(var l=0;l<r;l++){var u=new xt;i.items.push(u),i.itemDirtyIds.push(-2)}return i.length=r,i._load=null,i.baseTexture=null,i}return t.prototype.initFromArray=function(r,n){for(var i=0;i<this.length;i++)!r[i]||(r[i].castToBaseTexture?this.addBaseTextureAt(r[i].castToBaseTexture(),i):r[i]instanceof tp?this.addResourceAt(r[i],i):this.addResourceAt(OO(r[i],n),i))},t.prototype.dispose=function(){for(var r=0,n=this.length;r<n;r++)this.items[r].destroy();this.items=null,this.itemDirtyIds=null,this._load=null},t.prototype.addResourceAt=function(r,n){if(!this.items[n])throw new Error("Index "+n+" is out of bounds");return r.valid&&!this.valid&&this.resize(r.width,r.height),this.items[n].setResource(r),this},t.prototype.bind=function(r){if(this.baseTexture!==null)throw new Error("Only one base texture per TextureArray is allowed");e.prototype.bind.call(this,r);for(var n=0;n<this.length;n++)this.items[n].parentTextureArray=r,this.items[n].on("update",r.update,r)},t.prototype.unbind=function(r){e.prototype.unbind.call(this,r);for(var n=0;n<this.length;n++)this.items[n].parentTextureArray=null,this.items[n].off("update",r.update,r)},t.prototype.load=function(){var r=this;if(this._load)return this._load;var n=this.items.map(function(o){return o.resource}).filter(function(o){return o}),i=n.map(function(o){return o.load()});return this._load=Promise.all(i).then(function(){var o=r.items[0],s=o.realWidth,a=o.realHeight;return r.resize(s,a),Promise.resolve(r)}),this._load},t}(tp),dQ=function(e){nr(t,e);function t(r,n){var i=this,o=n||{},s=o.width,a=o.height,l,u;return Array.isArray(r)?(l=r,u=r.length):u=r,i=e.call(this,u,{width:s,height:a})||this,l&&i.initFromArray(l,n),i}return t.prototype.addBaseTextureAt=function(r,n){if(r.resource)this.addResourceAt(r.resource,n);else throw new Error("ArrayResource does not support RenderTexture");return this},t.prototype.bind=function(r){e.prototype.bind.call(this,r),r.target=ru.TEXTURE_2D_ARRAY},t.prototype.upload=function(r,n,i){var o=this,s=o.length,a=o.itemDirtyIds,l=o.items,u=r.gl;i.dirtyId<0&&u.texImage3D(u.TEXTURE_2D_ARRAY,0,i.internalFormat,this._width,this._height,s,0,n.format,i.type,null);for(var c=0;c<s;c++){var f=l[c];a[c]<f.dirtyId&&(a[c]=f.dirtyId,f.valid&&u.texSubImage3D(u.TEXTURE_2D_ARRAY,0,0,0,c,f.resource.width,f.resource.height,1,n.format,i.type,f.resource.source))}return!0},t}(LO),ll=function(e){nr(t,e);function t(r){var n=this,i=r,o=i.naturalWidth||i.videoWidth||i.width,s=i.naturalHeight||i.videoHeight||i.height;return n=e.call(this,o,s)||this,n.source=r,n.noSubImage=!1,n}return t.crossOrigin=function(r,n,i){i===void 0&&n.indexOf("data:")!==0?r.crossOrigin=YJ(n):i!==!1&&(r.crossOrigin=typeof i=="string"?i:"anonymous")},t.prototype.upload=function(r,n,i,o){var s=r.gl,a=n.realWidth,l=n.realHeight;if(o=o||this.source,o instanceof HTMLImageElement){if(!o.complete||o.naturalWidth===0)return!1}else if(o instanceof HTMLVideoElement&&o.readyState<=1)return!1;return s.pixelStorei(s.UNPACK_PREMULTIPLY_ALPHA_WEBGL,n.alphaMode===So.UNPACK),!this.noSubImage&&n.target===s.TEXTURE_2D&&i.width===a&&i.height===l?s.texSubImage2D(s.TEXTURE_2D,0,0,0,n.format,i.type,o):(i.width=a,i.height=l,s.texImage2D(n.target,0,i.internalFormat,n.format,i.type,o)),!0},t.prototype.update=function(){if(!this.destroyed){var r=this.source,n=r.naturalWidth||r.videoWidth||r.width,i=r.naturalHeight||r.videoHeight||r.height;this.resize(n,i),e.prototype.update.call(this)}},t.prototype.dispose=function(){this.source=null},t}(tp),UO=function(e){nr(t,e);function t(r){return e.call(this,r)||this}return t.test=function(r){var n=globalThis.OffscreenCanvas;return n&&r instanceof n?!0:globalThis.HTMLCanvasElement&&r instanceof HTMLCanvasElement},t}(ll),pQ=function(e){nr(t,e);function t(r,n){var i=this,o=n||{},s=o.width,a=o.height,l=o.autoLoad,u=o.linkBaseTexture;if(r&&r.length!==t.SIDES)throw new Error("Invalid length. Got "+r.length+", expected 6");i=e.call(this,6,{width:s,height:a})||this;for(var c=0;c<t.SIDES;c++)i.items[c].target=ru.TEXTURE_CUBE_MAP_POSITIVE_X+c;return i.linkBaseTexture=u!==!1,r&&i.initFromArray(r,n),l!==!1&&i.load(),i}return t.prototype.bind=function(r){e.prototype.bind.call(this,r),r.target=ru.TEXTURE_CUBE_MAP},t.prototype.addBaseTextureAt=function(r,n,i){if(!this.items[n])throw new Error("Index "+n+" is out of bounds");if(!this.linkBaseTexture||r.parentTextureArray||Object.keys(r._glTextures).length>0)if(r.resource)this.addResourceAt(r.resource,n);else throw new Error("CubeResource does not support copying of renderTexture.");else r.target=ru.TEXTURE_CUBE_MAP_POSITIVE_X+n,r.parentTextureArray=this.baseTexture,this.items[n]=r;return r.valid&&!this.valid&&this.resize(r.realWidth,r.realHeight),this.items[n]=r,this},t.prototype.upload=function(r,n,i){for(var o=this.itemDirtyIds,s=0;s<t.SIDES;s++){var a=this.items[s];o[s]<a.dirtyId&&(a.valid&&a.resource?(a.resource.upload(r,a,i),o[s]=a.dirtyId):o[s]<-1&&(r.gl.texImage2D(a.target,0,i.internalFormat,n.realWidth,n.realHeight,0,n.format,i.type,null),o[s]=-1))}return!0},t.test=function(r){return Array.isArray(r)&&r.length===t.SIDES},t.SIDES=6,t}(LO),FO=function(e){nr(t,e);function t(r,n){var i=this;if(n=n||{},!(r instanceof HTMLImageElement)){var o=new Image;ll.crossOrigin(o,r,n.crossorigin),o.src=r,r=o}return i=e.call(this,r)||this,!r.complete&&!!i._width&&!!i._height&&(i._width=0,i._height=0),i.url=r.src,i._process=null,i.preserveBitmap=!1,i.createBitmap=(n.createBitmap!==void 0?n.createBitmap:We.CREATE_IMAGE_BITMAP)&&!!globalThis.createImageBitmap,i.alphaMode=typeof n.alphaMode=="number"?n.alphaMode:null,i.bitmap=null,i._load=null,n.autoLoad!==!1&&i.load(),i}return t.prototype.load=function(r){var n=this;return this._load?this._load:(r!==void 0&&(this.createBitmap=r),this._load=new Promise(function(i,o){var s=n.source;n.url=s.src;var a=function(){n.destroyed||(s.onload=null,s.onerror=null,n.resize(s.width,s.height),n._load=null,n.createBitmap?i(n.process()):i(n))};s.complete&&s.src?a():(s.onload=a,s.onerror=function(l){o(l),n.onError.emit(l)})}),this._load)},t.prototype.process=function(){var r=this,n=this.source;if(this._process!==null)return this._process;if(this.bitmap!==null||!globalThis.createImageBitmap)return Promise.resolve(this);var i=globalThis.createImageBitmap,o=!n.crossOrigin||n.crossOrigin==="anonymous";return this._process=fetch(n.src,{mode:o?"cors":"no-cors"}).then(function(s){return s.blob()}).then(function(s){return i(s,0,0,n.width,n.height,{premultiplyAlpha:r.alphaMode===So.UNPACK?"premultiply":"none"})}).then(function(s){return r.destroyed?Promise.reject():(r.bitmap=s,r.update(),r._process=null,Promise.resolve(r))}),this._process},t.prototype.upload=function(r,n,i){if(typeof this.alphaMode=="number"&&(n.alphaMode=this.alphaMode),!this.createBitmap)return e.prototype.upload.call(this,r,n,i);if(!this.bitmap&&(this.process(),!this.bitmap))return!1;if(e.prototype.upload.call(this,r,n,i,this.bitmap),!this.preserveBitmap){var o=!0,s=n._glTextures;for(var a in s){var l=s[a];if(l!==i&&l.dirtyId!==n.dirtyId){o=!1;break}}o&&(this.bitmap.close&&this.bitmap.close(),this.bitmap=null)}return!0},t.prototype.dispose=function(){this.source.onload=null,this.source.onerror=null,e.prototype.dispose.call(this),this.bitmap&&(this.bitmap.close(),this.bitmap=null),this._process=null,this._load=null},t.test=function(r){return typeof r=="string"||r instanceof HTMLImageElement},t}(ll),mQ=function(e){nr(t,e);function t(r,n){var i=this;return n=n||{},i=e.call(this,document.createElement("canvas"))||this,i._width=0,i._height=0,i.svg=r,i.scale=n.scale||1,i._overrideWidth=n.width,i._overrideHeight=n.height,i._resolve=null,i._crossorigin=n.crossorigin,i._load=null,n.autoLoad!==!1&&i.load(),i}return t.prototype.load=function(){var r=this;return this._load?this._load:(this._load=new Promise(function(n){if(r._resolve=function(){r.resize(r.source.width,r.source.height),n(r)},t.SVG_XML.test(r.svg.trim())){if(!btoa)throw new Error("Your browser doesn't support base64 conversions.");r.svg="data:image/svg+xml;base64,"+btoa(unescape(encodeURIComponent(r.svg)))}r._loadSvg()}),this._load)},t.prototype._loadSvg=function(){var r=this,n=new Image;ll.crossOrigin(n,this.svg,this._crossorigin),n.src=this.svg,n.onerror=function(i){!r._resolve||(n.onerror=null,r.onError.emit(i))},n.onload=function(){if(!!r._resolve){var i=n.width,o=n.height;if(!i||!o)throw new Error("The SVG image must have width and height defined (in pixels), canvas API needs them.");var s=i*r.scale,a=o*r.scale;(r._overrideWidth||r._overrideHeight)&&(s=r._overrideWidth||r._overrideHeight/o*i,a=r._overrideHeight||r._overrideWidth/i*o),s=Math.round(s),a=Math.round(a);var l=r.source;l.width=s,l.height=a,l._pixiId="canvas_"+gu(),l.getContext("2d").drawImage(n,0,0,i,o,0,0,s,a),r._resolve(),r._resolve=null}}},t.getSize=function(r){var n=t.SVG_SIZE.exec(r),i={};return n&&(i[n[1]]=Math.round(parseFloat(n[3])),i[n[5]]=Math.round(parseFloat(n[7]))),i},t.prototype.dispose=function(){e.prototype.dispose.call(this),this._resolve=null,this._crossorigin=null},t.test=function(r,n){return n==="svg"||typeof r=="string"&&/^data:image\/svg\+xml(;(charset=utf8|utf8))?;base64/.test(r)||typeof r=="string"&&t.SVG_XML.test(r)},t.SVG_XML=/^(<\?xml[^?]+\?>)?\s*(<!--[^(-->)]*-->)?\s*\<svg/m,t.SVG_SIZE=/<svg[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*>/i,t}(ll),vQ=function(e){nr(t,e);function t(r,n){var i=this;if(n=n||{},!(r instanceof HTMLVideoElement)){var o=document.createElement("video");o.setAttribute("preload","auto"),o.setAttribute("webkit-playsinline",""),o.setAttribute("playsinline",""),typeof r=="string"&&(r=[r]);var s=r[0].src||r[0];ll.crossOrigin(o,s,n.crossorigin);for(var a=0;a<r.length;++a){var l=document.createElement("source"),u=r[a],c=u.src,f=u.mime;c=c||r[a];var p=c.split("?").shift().toLowerCase(),m=p.slice(p.lastIndexOf(".")+1);f=f||t.MIME_TYPES[m]||"video/"+m,l.src=c,l.type=f,o.appendChild(l)}r=o}return i=e.call(this,r)||this,i.noSubImage=!0,i._autoUpdate=!0,i._isConnectedToTicker=!1,i._updateFPS=n.updateFPS||0,i._msToNextUpdate=0,i.autoPlay=n.autoPlay!==!1,i._load=null,i._resolve=null,i._onCanPlay=i._onCanPlay.bind(i),i._onError=i._onError.bind(i),n.autoLoad!==!1&&i.load(),i}return t.prototype.update=function(r){if(!this.destroyed){var n=an.shared.elapsedMS*this.source.playbackRate;this._msToNextUpdate=Math.floor(this._msToNextUpdate-n),(!this._updateFPS||this._msToNextUpdate<=0)&&(e.prototype.update.call(this),this._msToNextUpdate=this._updateFPS?Math.floor(1e3/this._updateFPS):0)}},t.prototype.load=function(){var r=this;if(this._load)return this._load;var n=this.source;return(n.readyState===n.HAVE_ENOUGH_DATA||n.readyState===n.HAVE_FUTURE_DATA)&&n.width&&n.height&&(n.complete=!0),n.addEventListener("play",this._onPlayStart.bind(this)),n.addEventListener("pause",this._onPlayStop.bind(this)),this._isSourceReady()?this._onCanPlay():(n.addEventListener("canplay",this._onCanPlay),n.addEventListener("canplaythrough",this._onCanPlay),n.addEventListener("error",this._onError,!0)),this._load=new Promise(function(i){r.valid?i(r):(r._resolve=i,n.load())}),this._load},t.prototype._onError=function(r){this.source.removeEventListener("error",this._onError,!0),this.onError.emit(r)},t.prototype._isSourcePlaying=function(){var r=this.source;return r.currentTime>0&&r.paused===!1&&r.ended===!1&&r.readyState>2},t.prototype._isSourceReady=function(){var r=this.source;return r.readyState===3||r.readyState===4},t.prototype._onPlayStart=function(){this.valid||this._onCanPlay(),this.autoUpdate&&!this._isConnectedToTicker&&(an.shared.add(this.update,this),this._isConnectedToTicker=!0)},t.prototype._onPlayStop=function(){this._isConnectedToTicker&&(an.shared.remove(this.update,this),this._isConnectedToTicker=!1)},t.prototype._onCanPlay=function(){var r=this.source;r.removeEventListener("canplay",this._onCanPlay),r.removeEventListener("canplaythrough",this._onCanPlay);var n=this.valid;this.resize(r.videoWidth,r.videoHeight),!n&&this._resolve&&(this._resolve(this),this._resolve=null),this._isSourcePlaying()?this._onPlayStart():this.autoPlay&&r.play()},t.prototype.dispose=function(){this._isConnectedToTicker&&(an.shared.remove(this.update,this),this._isConnectedToTicker=!1);var r=this.source;r&&(r.removeEventListener("error",this._onError,!0),r.pause(),r.src="",r.load()),e.prototype.dispose.call(this)},Object.defineProperty(t.prototype,"autoUpdate",{get:function(){return this._autoUpdate},set:function(r){r!==this._autoUpdate&&(this._autoUpdate=r,!this._autoUpdate&&this._isConnectedToTicker?(an.shared.remove(this.update,this),this._isConnectedToTicker=!1):this._autoUpdate&&!this._isConnectedToTicker&&this._isSourcePlaying()&&(an.shared.add(this.update,this),this._isConnectedToTicker=!0))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"updateFPS",{get:function(){return this._updateFPS},set:function(r){r!==this._updateFPS&&(this._updateFPS=r)},enumerable:!1,configurable:!0}),t.test=function(r,n){return globalThis.HTMLVideoElement&&r instanceof HTMLVideoElement||t.TYPES.indexOf(n)>-1},t.TYPES=["mp4","m4v","webm","ogg","ogv","h264","avi","mov"],t.MIME_TYPES={ogv:"video/ogg",mov:"video/quicktime",m4v:"video/mp4"},t}(ll),gQ=function(e){nr(t,e);function t(r){return e.call(this,r)||this}return t.test=function(r){return!!globalThis.createImageBitmap&&r instanceof ImageBitmap},t}(ll);Fw.push(FO,gQ,UO,vQ,mQ,Gp,pQ,dQ);var yQ=function(e){nr(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.upload=function(r,n,i){var o=r.gl;o.pixelStorei(o.UNPACK_PREMULTIPLY_ALPHA_WEBGL,n.alphaMode===So.UNPACK);var s=n.realWidth,a=n.realHeight;return i.width===s&&i.height===a?o.texSubImage2D(n.target,0,0,0,s,a,n.format,i.type,this.data):(i.width=s,i.height=a,o.texImage2D(n.target,0,i.internalFormat,s,a,0,n.format,i.type,this.data)),!0},t}(Gp),Dw=function(){function e(t,r){this.width=Math.round(t||100),this.height=Math.round(r||100),this.stencil=!1,this.depth=!1,this.dirtyId=0,this.dirtyFormat=0,this.dirtySize=0,this.depthTexture=null,this.colorTextures=[],this.glFramebuffers={},this.disposeRunner=new Mn("disposeFramebuffer"),this.multisample=Ur.NONE}return Object.defineProperty(e.prototype,"colorTexture",{get:function(){return this.colorTextures[0]},enumerable:!1,configurable:!0}),e.prototype.addColorTexture=function(t,r){return t===void 0&&(t=0),this.colorTextures[t]=r||new xt(null,{scaleMode:St.NEAREST,resolution:1,mipmap:Js.OFF,width:this.width,height:this.height}),this.dirtyId++,this.dirtyFormat++,this},e.prototype.addDepthTexture=function(t){return this.depthTexture=t||new xt(new yQ(null,{width:this.width,height:this.height}),{scaleMode:St.NEAREST,resolution:1,width:this.width,height:this.height,mipmap:Js.OFF,format:Te.DEPTH_COMPONENT,type:$e.UNSIGNED_SHORT}),this.dirtyId++,this.dirtyFormat++,this},e.prototype.enableDepth=function(){return this.depth=!0,this.dirtyId++,this.dirtyFormat++,this},e.prototype.enableStencil=function(){return this.stencil=!0,this.dirtyId++,this.dirtyFormat++,this},e.prototype.resize=function(t,r){if(t=Math.round(t),r=Math.round(r),!(t===this.width&&r===this.height)){this.width=t,this.height=r,this.dirtyId++,this.dirtySize++;for(var n=0;n<this.colorTextures.length;n++){var i=this.colorTextures[n],o=i.resolution;i.setSize(t/o,r/o)}if(this.depthTexture){var o=this.depthTexture.resolution;this.depthTexture.setSize(t/o,r/o)}}},e.prototype.dispose=function(){this.disposeRunner.emit(this,!1)},e.prototype.destroyDepthTexture=function(){this.depthTexture&&(this.depthTexture.destroy(),this.depthTexture=null,++this.dirtyId,++this.dirtyFormat)},e}(),MO=function(e){nr(t,e);function t(r){r===void 0&&(r={});var n=this;if(typeof r=="number"){var i=arguments[0],o=arguments[1],s=arguments[2],a=arguments[3];r={width:i,height:o,scaleMode:s,resolution:a}}return r.width=r.width||100,r.height=r.height||100,r.multisample=r.multisample!==void 0?r.multisample:Ur.NONE,n=e.call(this,null,r)||this,n.mipmap=Js.OFF,n.valid=!0,n.clearColor=[0,0,0,0],n.framebuffer=new Dw(n.realWidth,n.realHeight).addColorTexture(0,n),n.framebuffer.multisample=r.multisample,n.maskStack=[],n.filterStack=[{}],n}return t.prototype.resize=function(r,n){this.framebuffer.resize(r*this.resolution,n*this.resolution),this.setRealSize(this.framebuffer.width,this.framebuffer.height)},t.prototype.dispose=function(){this.framebuffer.dispose(),e.prototype.dispose.call(this)},t.prototype.destroy=function(){e.prototype.destroy.call(this),this.framebuffer.destroyDepthTexture(),this.framebuffer=null},t}(xt),BO=function(){function e(){this.x0=0,this.y0=0,this.x1=1,this.y1=0,this.x2=1,this.y2=1,this.x3=0,this.y3=1,this.uvsFloat32=new Float32Array(8)}return e.prototype.set=function(t,r,n){var i=r.width,o=r.height;if(n){var s=t.width/2/i,a=t.height/2/o,l=t.x/i+s,u=t.y/o+a;n=vr.add(n,vr.NW),this.x0=l+s*vr.uX(n),this.y0=u+a*vr.uY(n),n=vr.add(n,2),this.x1=l+s*vr.uX(n),this.y1=u+a*vr.uY(n),n=vr.add(n,2),this.x2=l+s*vr.uX(n),this.y2=u+a*vr.uY(n),n=vr.add(n,2),this.x3=l+s*vr.uX(n),this.y3=u+a*vr.uY(n)}else this.x0=t.x/i,this.y0=t.y/o,this.x1=(t.x+t.width)/i,this.y1=t.y/o,this.x2=(t.x+t.width)/i,this.y2=(t.y+t.height)/o,this.x3=t.x/i,this.y3=(t.y+t.height)/o;this.uvsFloat32[0]=this.x0,this.uvsFloat32[1]=this.y0,this.uvsFloat32[2]=this.x1,this.uvsFloat32[3]=this.y1,this.uvsFloat32[4]=this.x2,this.uvsFloat32[5]=this.y2,this.uvsFloat32[6]=this.x3,this.uvsFloat32[7]=this.y3},e.prototype.toString=function(){return"[@pixi/core:TextureUvs "+("x0="+this.x0+" y0="+this.y0+" ")+("x1="+this.x1+" y1="+this.y1+" x2="+this.x2+" ")+("y2="+this.y2+" x3="+this.x3+" y3="+this.y3)+"]"},e}(),m6=new BO;function Sv(e){e.destroy=function(){},e.on=function(){},e.once=function(){},e.emit=function(){}}var tt=function(e){nr(t,e);function t(r,n,i,o,s,a){var l=e.call(this)||this;if(l.noFrame=!1,n||(l.noFrame=!0,n=new Me(0,0,1,1)),r instanceof t&&(r=r.baseTexture),l.baseTexture=r,l._frame=n,l.trim=o,l.valid=!1,l._uvs=m6,l.uvMatrix=null,l.orig=i||n,l._rotate=Number(s||0),s===!0)l._rotate=2;else if(l._rotate%2!==0)throw new Error("attempt to use diamond-shaped UVs. If you are sure, set rotation manually");return l.defaultAnchor=a?new Gt(a.x,a.y):new Gt(0,0),l._updateID=0,l.textureCacheIds=[],r.valid?l.noFrame?r.valid&&l.onBaseTextureUpdated(r):l.frame=n:r.once("loaded",l.onBaseTextureUpdated,l),l.noFrame&&r.on("update",l.onBaseTextureUpdated,l),l}return t.prototype.update=function(){this.baseTexture.resource&&this.baseTexture.resource.update()},t.prototype.onBaseTextureUpdated=function(r){if(this.noFrame){if(!this.baseTexture.valid)return;this._frame.width=r.width,this._frame.height=r.height,this.valid=!0,this.updateUvs()}else this.frame=this._frame;this.emit("update",this)},t.prototype.destroy=function(r){if(this.baseTexture){if(r){var n=this.baseTexture.resource;n&&n.url&&Ns[n.url]&&t.removeFromCache(n.url),this.baseTexture.destroy()}this.baseTexture.off("loaded",this.onBaseTextureUpdated,this),this.baseTexture.off("update",this.onBaseTextureUpdated,this),this.baseTexture=null}this._frame=null,this._uvs=null,this.trim=null,this.orig=null,this.valid=!1,t.removeFromCache(this),this.textureCacheIds=null},t.prototype.clone=function(){var r=this._frame.clone(),n=this._frame===this.orig?r:this.orig.clone(),i=new t(this.baseTexture,!this.noFrame&&r,n,this.trim&&this.trim.clone(),this.rotate,this.defaultAnchor);return this.noFrame&&(i._frame=r),i},t.prototype.updateUvs=function(){this._uvs===m6&&(this._uvs=new BO),this._uvs.set(this._frame,this.baseTexture,this.rotate),this._updateID++},t.from=function(r,n,i){n===void 0&&(n={}),i===void 0&&(i=We.STRICT_TEXTURE_CACHE);var o=typeof r=="string",s=null;if(o)s=r;else if(r instanceof xt){if(!r.cacheId){var a=n&&n.pixiIdPrefix||"pixiid";r.cacheId=a+"-"+gu(),xt.addToCache(r,r.cacheId)}s=r.cacheId}else{if(!r._pixiId){var a=n&&n.pixiIdPrefix||"pixiid";r._pixiId=a+"_"+gu()}s=r._pixiId}var l=Ns[s];if(o&&i&&!l)throw new Error('The cacheId "'+s+'" does not exist in TextureCache.');return!l&&!(r instanceof xt)?(n.resolution||(n.resolution=Ag(r)),l=new t(new xt(r,n)),l.baseTexture.cacheId=s,xt.addToCache(l.baseTexture,s),t.addToCache(l,s)):!l&&r instanceof xt&&(l=new t(r),t.addToCache(l,s)),l},t.fromURL=function(r,n){var i=Object.assign({autoLoad:!1},n==null?void 0:n.resourceOptions),o=t.from(r,Object.assign({resourceOptions:i},n),!1),s=o.baseTexture.resource;return o.baseTexture.valid?Promise.resolve(o):s.load().then(function(){return Promise.resolve(o)})},t.fromBuffer=function(r,n,i,o){return new t(xt.fromBuffer(r,n,i,o))},t.fromLoader=function(r,n,i,o){var s=new xt(r,Object.assign({scaleMode:We.SCALE_MODE,resolution:Ag(n)},o)),a=s.resource;a instanceof FO&&(a.url=n);var l=new t(s);return i||(i=n),xt.addToCache(l.baseTexture,i),t.addToCache(l,i),i!==n&&(xt.addToCache(l.baseTexture,n),t.addToCache(l,n)),l.baseTexture.valid?Promise.resolve(l):new Promise(function(u){l.baseTexture.once("loaded",function(){return u(l)})})},t.addToCache=function(r,n){n&&(r.textureCacheIds.indexOf(n)===-1&&r.textureCacheIds.push(n),Ns[n]&&console.warn("Texture added to the cache with an id ["+n+"] that already had an entry"),Ns[n]=r)},t.removeFromCache=function(r){if(typeof r=="string"){var n=Ns[r];if(n){var i=n.textureCacheIds.indexOf(r);return i>-1&&n.textureCacheIds.splice(i,1),delete Ns[r],n}}else if(r&&r.textureCacheIds){for(var o=0;o<r.textureCacheIds.length;++o)Ns[r.textureCacheIds[o]]===r&&delete Ns[r.textureCacheIds[o]];return r.textureCacheIds.length=0,r}return null},Object.defineProperty(t.prototype,"resolution",{get:function(){return this.baseTexture.resolution},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"frame",{get:function(){return this._frame},set:function(r){this._frame=r,this.noFrame=!1;var n=r.x,i=r.y,o=r.width,s=r.height,a=n+o>this.baseTexture.width,l=i+s>this.baseTexture.height;if(a||l){var u=a&&l?"and":"or",c="X: "+n+" + "+o+" = "+(n+o)+" > "+this.baseTexture.width,f="Y: "+i+" + "+s+" = "+(i+s)+" > "+this.baseTexture.height;throw new Error("Texture Error: frame does not fit inside the base Texture dimensions: "+(c+" "+u+" "+f))}this.valid=o&&s&&this.baseTexture.valid,!this.trim&&!this.rotate&&(this.orig=r),this.valid&&this.updateUvs()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"rotate",{get:function(){return this._rotate},set:function(r){this._rotate=r,this.valid&&this.updateUvs()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"width",{get:function(){return this.orig.width},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this.orig.height},enumerable:!1,configurable:!0}),t.prototype.castToBaseTexture=function(){return this.baseTexture},Object.defineProperty(t,"EMPTY",{get:function(){return t._EMPTY||(t._EMPTY=new t(new xt),Sv(t._EMPTY),Sv(t._EMPTY.baseTexture)),t._EMPTY},enumerable:!1,configurable:!0}),Object.defineProperty(t,"WHITE",{get:function(){if(!t._WHITE){var r=document.createElement("canvas"),n=r.getContext("2d");r.width=16,r.height=16,n.fillStyle="white",n.fillRect(0,0,16,16),t._WHITE=new t(new xt(new UO(r))),Sv(t._WHITE),Sv(t._WHITE.baseTexture)}return t._WHITE},enumerable:!1,configurable:!0}),t}(Oh),_u=function(e){nr(t,e);function t(r,n){var i=e.call(this,r,n)||this;return i.valid=!0,i.filterFrame=null,i.filterPoolKey=null,i.updateUvs(),i}return Object.defineProperty(t.prototype,"framebuffer",{get:function(){return this.baseTexture.framebuffer},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"multisample",{get:function(){return this.framebuffer.multisample},set:function(r){this.framebuffer.multisample=r},enumerable:!1,configurable:!0}),t.prototype.resize=function(r,n,i){i===void 0&&(i=!0);var o=this.baseTexture.resolution,s=Math.round(r*o)/o,a=Math.round(n*o)/o;this.valid=s>0&&a>0,this._frame.width=this.orig.width=s,this._frame.height=this.orig.height=a,i&&this.baseTexture.resize(s,a),this.updateUvs()},t.prototype.setResolution=function(r){var n=this.baseTexture;n.resolution!==r&&(n.setResolution(r),this.resize(n.width,n.height,!1))},t.create=function(r){for(var n=arguments,i=[],o=1;o<arguments.length;o++)i[o-1]=n[o];return typeof r=="number"&&(ep("6.0.0","Arguments (width, height, scaleMode, resolution) have been deprecated."),r={width:r,height:i[0],scaleMode:i[1],resolution:i[2]}),new t(new MO(r))},t}(tt),_Q=function(){function e(t){this.texturePool={},this.textureOptions=t||{},this.enableFullScreen=!1,this._pixelsWidth=0,this._pixelsHeight=0}return e.prototype.createTexture=function(t,r,n){n===void 0&&(n=Ur.NONE);var i=new MO(Object.assign({width:t,height:r,resolution:1,multisample:n},this.textureOptions));return new _u(i)},e.prototype.getOptimalTexture=function(t,r,n,i){n===void 0&&(n=1),i===void 0&&(i=Ur.NONE);var o;t=Math.ceil(t*n-1e-6),r=Math.ceil(r*n-1e-6),!this.enableFullScreen||t!==this._pixelsWidth||r!==this._pixelsHeight?(t=Pg(t),r=Pg(r),o=((t&65535)<<16|r&65535)>>>0,i>1&&(o+=i*4294967296)):o=i>1?-i:-1,this.texturePool[o]||(this.texturePool[o]=[]);var s=this.texturePool[o].pop();return s||(s=this.createTexture(t,r,i)),s.filterPoolKey=o,s.setResolution(n),s},e.prototype.getFilterTexture=function(t,r,n){var i=this.getOptimalTexture(t.width,t.height,r||t.resolution,n||Ur.NONE);return i.filterFrame=t.filterFrame,i},e.prototype.returnTexture=function(t){var r=t.filterPoolKey;t.filterFrame=null,this.texturePool[r].push(t)},e.prototype.returnFilterTexture=function(t){this.returnTexture(t)},e.prototype.clear=function(t){if(t=t!==!1,t)for(var r in this.texturePool){var n=this.texturePool[r];if(n)for(var i=0;i<n.length;i++)n[i].destroy(!0)}this.texturePool={}},e.prototype.setScreenSize=function(t){if(!(t.width===this._pixelsWidth&&t.height===this._pixelsHeight)){this.enableFullScreen=t.width>0&&t.height>0;for(var r in this.texturePool)if(Number(r)<0){var n=this.texturePool[r];if(n)for(var i=0;i<n.length;i++)n[i].destroy(!0);this.texturePool[r]=[]}this._pixelsWidth=t.width,this._pixelsHeight=t.height}},e.SCREEN_KEY=-1,e}(),v6=function(){function e(t,r,n,i,o,s,a){r===void 0&&(r=0),n===void 0&&(n=!1),i===void 0&&(i=$e.FLOAT),this.buffer=t,this.size=r,this.normalized=n,this.type=i,this.stride=o,this.start=s,this.instance=a}return e.prototype.destroy=function(){this.buffer=null},e.from=function(t,r,n,i,o){return new e(t,r,n,i,o)},e}(),bQ=0,Rr=function(){function e(t,r,n){r===void 0&&(r=!0),n===void 0&&(n=!1),this.data=t||new Float32Array(1),this._glBuffers={},this._updateID=0,this.index=n,this.static=r,this.id=bQ++,this.disposeRunner=new Mn("disposeBuffer")}return e.prototype.update=function(t){t instanceof Array&&(t=new Float32Array(t)),this.data=t||this.data,this._updateID++},e.prototype.dispose=function(){this.disposeRunner.emit(this,!1)},e.prototype.destroy=function(){this.dispose(),this.data=null},Object.defineProperty(e.prototype,"index",{get:function(){return this.type===rs.ELEMENT_ARRAY_BUFFER},set:function(t){this.type=t?rs.ELEMENT_ARRAY_BUFFER:rs.ARRAY_BUFFER},enumerable:!1,configurable:!0}),e.from=function(t){return t instanceof Array&&(t=new Float32Array(t)),new e(t)},e}(),wQ={Float32Array,Uint32Array,Int32Array,Uint8Array};function xQ(e,t){for(var r=0,n=0,i={},o=0;o<e.length;o++)n+=t[o],r+=e[o].length;for(var s=new ArrayBuffer(r*4),a=null,l=0,o=0;o<e.length;o++){var u=t[o],c=e[o],f=EO(c);i[f]||(i[f]=new wQ[f](s)),a=i[f];for(var p=0;p<c.length;p++){var m=(p/u|0)*n+l,g=p%u;a[m+g]=c[p]}l+=u}return new Float32Array(s)}var g6={5126:4,5123:2,5121:1},TQ=0,SQ={Float32Array,Uint32Array,Int32Array,Uint8Array,Uint16Array},Uh=function(){function e(t,r){t===void 0&&(t=[]),r===void 0&&(r={}),this.buffers=t,this.indexBuffer=null,this.attributes=r,this.glVertexArrayObjects={},this.id=TQ++,this.instanced=!1,this.instanceCount=1,this.disposeRunner=new Mn("disposeGeometry"),this.refCount=0}return e.prototype.addAttribute=function(t,r,n,i,o,s,a,l){if(n===void 0&&(n=0),i===void 0&&(i=!1),l===void 0&&(l=!1),!r)throw new Error("You must pass a buffer when creating an attribute");r instanceof Rr||(r instanceof Array&&(r=new Float32Array(r)),r=new Rr(r));var u=t.split("|");if(u.length>1){for(var c=0;c<u.length;c++)this.addAttribute(u[c],r,n,i,o);return this}var f=this.buffers.indexOf(r);return f===-1&&(this.buffers.push(r),f=this.buffers.length-1),this.attributes[t]=new v6(f,n,i,o,s,a,l),this.instanced=this.instanced||l,this},e.prototype.getAttribute=function(t){return this.attributes[t]},e.prototype.getBuffer=function(t){return this.buffers[this.getAttribute(t).buffer]},e.prototype.addIndex=function(t){return t instanceof Rr||(t instanceof Array&&(t=new Uint16Array(t)),t=new Rr(t)),t.type=rs.ELEMENT_ARRAY_BUFFER,this.indexBuffer=t,this.buffers.indexOf(t)===-1&&this.buffers.push(t),this},e.prototype.getIndex=function(){return this.indexBuffer},e.prototype.interleave=function(){if(this.buffers.length===1||this.buffers.length===2&&this.indexBuffer)return this;var t=[],r=[],n=new Rr,i;for(i in this.attributes){var o=this.attributes[i],s=this.buffers[o.buffer];t.push(s.data),r.push(o.size*g6[o.type]/4),o.buffer=0}for(n.data=xQ(t,r),i=0;i<this.buffers.length;i++)this.buffers[i]!==this.indexBuffer&&this.buffers[i].destroy();return this.buffers=[n],this.indexBuffer&&this.buffers.push(this.indexBuffer),this},e.prototype.getSize=function(){for(var t in this.attributes){var r=this.attributes[t],n=this.buffers[r.buffer];return n.data.length/(r.stride/4||r.size)}return 0},e.prototype.dispose=function(){this.disposeRunner.emit(this,!1)},e.prototype.destroy=function(){this.dispose(),this.buffers=null,this.indexBuffer=null,this.attributes=null},e.prototype.clone=function(){for(var t=new e,r=0;r<this.buffers.length;r++)t.buffers[r]=new Rr(this.buffers[r].data.slice(0));for(var r in this.attributes){var n=this.attributes[r];t.attributes[r]=new v6(n.buffer,n.size,n.normalized,n.type,n.stride,n.start,n.instance)}return this.indexBuffer&&(t.indexBuffer=t.buffers[this.buffers.indexOf(this.indexBuffer)],t.indexBuffer.type=rs.ELEMENT_ARRAY_BUFFER),t},e.merge=function(t){for(var r=new e,n=[],i=[],o=[],s,a=0;a<t.length;a++){s=t[a];for(var l=0;l<s.buffers.length;l++)i[l]=i[l]||0,i[l]+=s.buffers[l].data.length,o[l]=0}for(var a=0;a<s.buffers.length;a++)n[a]=new SQ[EO(s.buffers[a].data)](i[a]),r.buffers[a]=new Rr(n[a]);for(var a=0;a<t.length;a++){s=t[a];for(var l=0;l<s.buffers.length;l++)n[l].set(s.buffers[l].data,o[l]),o[l]+=s.buffers[l].data.length}if(r.attributes=s.attributes,s.indexBuffer){r.indexBuffer=r.buffers[s.buffers.indexOf(s.indexBuffer)],r.indexBuffer.type=rs.ELEMENT_ARRAY_BUFFER;for(var u=0,c=0,f=0,p=0,a=0;a<s.buffers.length;a++)if(s.buffers[a]!==s.indexBuffer){p=a;break}for(var a in s.attributes){var m=s.attributes[a];(m.buffer|0)===p&&(c+=m.size*g6[m.type]/4)}for(var a=0;a<t.length;a++){for(var g=t[a].indexBuffer.data,l=0;l<g.length;l++)r.indexBuffer.data[l+f]+=u;u+=t[a].buffers[p].data.length/c,f+=g.length}}return r},e}(),EQ=function(e){nr(t,e);function t(){var r=e.call(this)||this;return r.addAttribute("aVertexPosition",new Float32Array([0,0,1,0,1,1,0,1])).addIndex([0,1,3,2]),r}return t}(Uh),DO=function(e){nr(t,e);function t(){var r=e.call(this)||this;return r.vertices=new Float32Array([-1,-1,1,-1,1,1,-1,1]),r.uvs=new Float32Array([0,0,1,0,1,1,0,1]),r.vertexBuffer=new Rr(r.vertices),r.uvBuffer=new Rr(r.uvs),r.addAttribute("aVertexPosition",r.vertexBuffer).addAttribute("aTextureCoord",r.uvBuffer).addIndex([0,1,2,0,2,3]),r}return t.prototype.map=function(r,n){var i=0,o=0;return this.uvs[0]=i,this.uvs[1]=o,this.uvs[2]=i+n.width/r.width,this.uvs[3]=o,this.uvs[4]=i+n.width/r.width,this.uvs[5]=o+n.height/r.height,this.uvs[6]=i,this.uvs[7]=o+n.height/r.height,i=n.x,o=n.y,this.vertices[0]=i,this.vertices[1]=o,this.vertices[2]=i+n.width,this.vertices[3]=o,this.vertices[4]=i+n.width,this.vertices[5]=o+n.height,this.vertices[6]=i,this.vertices[7]=o+n.height,this.invalidate(),this},t.prototype.invalidate=function(){return this.vertexBuffer._updateID++,this.uvBuffer._updateID++,this},t}(Uh),CQ=0,iu=function(){function e(t,r,n){this.group=!0,this.syncUniforms={},this.dirtyId=0,this.id=CQ++,this.static=!!r,this.ubo=!!n,t instanceof Rr?(this.buffer=t,this.buffer.type=rs.UNIFORM_BUFFER,this.autoManage=!1,this.ubo=!0):(this.uniforms=t,this.ubo&&(this.buffer=new Rr(new Float32Array(1)),this.buffer.type=rs.UNIFORM_BUFFER,this.autoManage=!0))}return e.prototype.update=function(){this.dirtyId++,!this.autoManage&&this.buffer&&this.buffer.update()},e.prototype.add=function(t,r,n){if(!this.ubo)this.uniforms[t]=new e(r,n);else throw new Error("[UniformGroup] uniform groups in ubo mode cannot be modified, or have uniform groups nested in them")},e.from=function(t,r,n){return new e(t,r,n)},e.uboFrom=function(t,r){return new e(t,r!=null?r:!0,!0)},e}(),IQ=function(){function e(){this.renderTexture=null,this.target=null,this.legacy=!1,this.resolution=1,this.multisample=Ur.NONE,this.sourceFrame=new Me,this.destinationFrame=new Me,this.bindingSourceFrame=new Me,this.bindingDestinationFrame=new Me,this.filters=[],this.transform=null}return e.prototype.clear=function(){this.target=null,this.filters=null,this.renderTexture=null},e}(),Ev=[new Gt,new Gt,new Gt,new Gt],l_=new rr,NQ=function(){function e(t){this.renderer=t,this.defaultFilterStack=[{}],this.texturePool=new _Q,this.texturePool.setScreenSize(t.view),this.statePool=[],this.quad=new EQ,this.quadUv=new DO,this.tempRect=new Me,this.activeState={},this.globalUniforms=new iu({outputFrame:new Me,inputSize:new Float32Array(4),inputPixel:new Float32Array(4),inputClamp:new Float32Array(4),resolution:1,filterArea:new Float32Array(4),filterClamp:new Float32Array(4)},!0),this.forceClear=!1,this.useMaxPadding=!1}return e.prototype.push=function(t,r){for(var n,i,o=this.renderer,s=this.defaultFilterStack,a=this.statePool.pop()||new IQ,l=this.renderer.renderTexture,u=r[0].resolution,c=r[0].multisample,f=r[0].padding,p=r[0].autoFit,m=(n=r[0].legacy)!==null&&n!==void 0?n:!0,g=1;g<r.length;g++){var b=r[g];u=Math.min(u,b.resolution),c=Math.min(c,b.multisample),f=this.useMaxPadding?Math.max(f,b.padding):f+b.padding,p=p&&b.autoFit,m=m||((i=b.legacy)!==null&&i!==void 0?i:!0)}s.length===1&&(this.defaultFilterStack[0].renderTexture=l.current),s.push(a),a.resolution=u,a.multisample=c,a.legacy=m,a.target=t,a.sourceFrame.copyFrom(t.filterArea||t.getBounds(!0)),a.sourceFrame.pad(f);var y=this.tempRect.copyFrom(l.sourceFrame);o.projection.transform&&this.transformAABB(l_.copyFrom(o.projection.transform).invert(),y),p?(a.sourceFrame.fit(y),(a.sourceFrame.width<=0||a.sourceFrame.height<=0)&&(a.sourceFrame.width=0,a.sourceFrame.height=0)):a.sourceFrame.intersects(y)||(a.sourceFrame.width=0,a.sourceFrame.height=0),this.roundFrame(a.sourceFrame,l.current?l.current.resolution:o.resolution,l.sourceFrame,l.destinationFrame,o.projection.transform),a.renderTexture=this.getOptimalFilterTexture(a.sourceFrame.width,a.sourceFrame.height,u,c),a.filters=r,a.destinationFrame.width=a.renderTexture.width,a.destinationFrame.height=a.renderTexture.height;var w=this.tempRect;w.x=0,w.y=0,w.width=a.sourceFrame.width,w.height=a.sourceFrame.height,a.renderTexture.filterFrame=a.sourceFrame,a.bindingSourceFrame.copyFrom(l.sourceFrame),a.bindingDestinationFrame.copyFrom(l.destinationFrame),a.transform=o.projection.transform,o.projection.transform=null,l.bind(a.renderTexture,a.sourceFrame,w),o.framebuffer.clear(0,0,0,0)},e.prototype.pop=function(){var t=this.defaultFilterStack,r=t.pop(),n=r.filters;this.activeState=r;var i=this.globalUniforms.uniforms;i.outputFrame=r.sourceFrame,i.resolution=r.resolution;var o=i.inputSize,s=i.inputPixel,a=i.inputClamp;if(o[0]=r.destinationFrame.width,o[1]=r.destinationFrame.height,o[2]=1/o[0],o[3]=1/o[1],s[0]=Math.round(o[0]*r.resolution),s[1]=Math.round(o[1]*r.resolution),s[2]=1/s[0],s[3]=1/s[1],a[0]=.5*s[2],a[1]=.5*s[3],a[2]=r.sourceFrame.width*o[2]-.5*s[2],a[3]=r.sourceFrame.height*o[3]-.5*s[3],r.legacy){var l=i.filterArea;l[0]=r.destinationFrame.width,l[1]=r.destinationFrame.height,l[2]=r.sourceFrame.x,l[3]=r.sourceFrame.y,i.filterClamp=i.inputClamp}this.globalUniforms.update();var u=t[t.length-1];if(this.renderer.framebuffer.blit(),n.length===1)n[0].apply(this,r.renderTexture,u.renderTexture,Ea.BLEND,r),this.returnFilterTexture(r.renderTexture);else{var c=r.renderTexture,f=this.getOptimalFilterTexture(c.width,c.height,r.resolution);f.filterFrame=c.filterFrame;var p=0;for(p=0;p<n.length-1;++p){p===1&&r.multisample>1&&(f=this.getOptimalFilterTexture(c.width,c.height,r.resolution),f.filterFrame=c.filterFrame),n[p].apply(this,c,f,Ea.CLEAR,r);var m=c;c=f,f=m}n[p].apply(this,c,u.renderTexture,Ea.BLEND,r),p>1&&r.multisample>1&&this.returnFilterTexture(r.renderTexture),this.returnFilterTexture(c),this.returnFilterTexture(f)}r.clear(),this.statePool.push(r)},e.prototype.bindAndClear=function(t,r){r===void 0&&(r=Ea.CLEAR);var n=this.renderer,i=n.renderTexture,o=n.state;if(t===this.defaultFilterStack[this.defaultFilterStack.length-1].renderTexture?this.renderer.projection.transform=this.activeState.transform:this.renderer.projection.transform=null,t&&t.filterFrame){var s=this.tempRect;s.x=0,s.y=0,s.width=t.filterFrame.width,s.height=t.filterFrame.height,i.bind(t,t.filterFrame,s)}else t!==this.defaultFilterStack[this.defaultFilterStack.length-1].renderTexture?i.bind(t):this.renderer.renderTexture.bind(t,this.activeState.bindingSourceFrame,this.activeState.bindingDestinationFrame);var a=o.stateId&1||this.forceClear;(r===Ea.CLEAR||r===Ea.BLIT&&a)&&this.renderer.framebuffer.clear(0,0,0,0)},e.prototype.applyFilter=function(t,r,n,i){var o=this.renderer;o.state.set(t.state),this.bindAndClear(n,i),t.uniforms.uSampler=r,t.uniforms.filterGlobals=this.globalUniforms,o.shader.bind(t),t.legacy=!!t.program.attributeData.aTextureCoord,t.legacy?(this.quadUv.map(r._frame,r.filterFrame),o.geometry.bind(this.quadUv),o.geometry.draw(Ni.TRIANGLES)):(o.geometry.bind(this.quad),o.geometry.draw(Ni.TRIANGLE_STRIP))},e.prototype.calculateSpriteMatrix=function(t,r){var n=this.activeState,i=n.sourceFrame,o=n.destinationFrame,s=r._texture.orig,a=t.set(o.width,0,0,o.height,i.x,i.y),l=r.worldTransform.copyTo(rr.TEMP_MATRIX);return l.invert(),a.prepend(l),a.scale(1/s.width,1/s.height),a.translate(r.anchor.x,r.anchor.y),a},e.prototype.destroy=function(){this.renderer=null,this.texturePool.clear(!1)},e.prototype.getOptimalFilterTexture=function(t,r,n,i){return n===void 0&&(n=1),i===void 0&&(i=Ur.NONE),this.texturePool.getOptimalTexture(t,r,n,i)},e.prototype.getFilterTexture=function(t,r,n){if(typeof t=="number"){var i=t;t=r,r=i}t=t||this.activeState.renderTexture;var o=this.texturePool.getOptimalTexture(t.width,t.height,r||t.resolution,n||Ur.NONE);return o.filterFrame=t.filterFrame,o},e.prototype.returnFilterTexture=function(t){this.texturePool.returnTexture(t)},e.prototype.emptyPool=function(){this.texturePool.clear(!0)},e.prototype.resize=function(){this.texturePool.setScreenSize(this.renderer.view)},e.prototype.transformAABB=function(t,r){var n=Ev[0],i=Ev[1],o=Ev[2],s=Ev[3];n.set(r.left,r.top),i.set(r.left,r.bottom),o.set(r.right,r.top),s.set(r.right,r.bottom),t.apply(n,n),t.apply(i,i),t.apply(o,o),t.apply(s,s);var a=Math.min(n.x,i.x,o.x,s.x),l=Math.min(n.y,i.y,o.y,s.y),u=Math.max(n.x,i.x,o.x,s.x),c=Math.max(n.y,i.y,o.y,s.y);r.x=a,r.y=l,r.width=u-a,r.height=c-l},e.prototype.roundFrame=function(t,r,n,i,o){if(!(t.width<=0||t.height<=0||n.width<=0||n.height<=0)){if(o){var s=o.a,a=o.b,l=o.c,u=o.d;if((Math.abs(a)>1e-4||Math.abs(l)>1e-4)&&(Math.abs(s)>1e-4||Math.abs(u)>1e-4))return}o=o?l_.copyFrom(o):l_.identity(),o.translate(-n.x,-n.y).scale(i.width/n.width,i.height/n.height).translate(i.x,i.y),this.transformAABB(o,t),t.ceil(r),this.transformAABB(o.invert(),t)}},e}(),Jy=function(){function e(t){this.renderer=t}return e.prototype.flush=function(){},e.prototype.destroy=function(){this.renderer=null},e.prototype.start=function(){},e.prototype.stop=function(){this.flush()},e.prototype.render=function(t){},e}(),PQ=function(){function e(t){this.renderer=t,this.emptyRenderer=new Jy(t),this.currentRenderer=this.emptyRenderer}return e.prototype.setObjectRenderer=function(t){this.currentRenderer!==t&&(this.currentRenderer.stop(),this.currentRenderer=t,this.currentRenderer.start())},e.prototype.flush=function(){this.setObjectRenderer(this.emptyRenderer)},e.prototype.reset=function(){this.setObjectRenderer(this.emptyRenderer)},e.prototype.copyBoundTextures=function(t,r){for(var n=this.renderer.texture.boundTextures,i=r-1;i>=0;--i)t[i]=n[i]||null,t[i]&&(t[i]._batchLocation=i)},e.prototype.boundArray=function(t,r,n,i){for(var o=t.elements,s=t.ids,a=t.count,l=0,u=0;u<a;u++){var c=o[u],f=c._batchLocation;if(f>=0&&f<i&&r[f]===c){s[u]=f;continue}for(;l<i;){var p=r[l];if(p&&p._batchEnabled===n&&p._batchLocation===l){l++;continue}s[u]=l,c._batchLocation=l,r[l]=c;break}}},e.prototype.destroy=function(){this.renderer=null},e}(),y6=0,AQ=function(){function e(t){this.renderer=t,this.webGLVersion=1,this.extensions={},this.supports={uint32Indices:!1},this.handleContextLost=this.handleContextLost.bind(this),this.handleContextRestored=this.handleContextRestored.bind(this),t.view.addEventListener("webglcontextlost",this.handleContextLost,!1),t.view.addEventListener("webglcontextrestored",this.handleContextRestored,!1)}return Object.defineProperty(e.prototype,"isLost",{get:function(){return!this.gl||this.gl.isContextLost()},enumerable:!1,configurable:!0}),e.prototype.contextChange=function(t){this.gl=t,this.renderer.gl=t,this.renderer.CONTEXT_UID=y6++,t.isContextLost()&&t.getExtension("WEBGL_lose_context")&&t.getExtension("WEBGL_lose_context").restoreContext()},e.prototype.initFromContext=function(t){this.gl=t,this.validateContext(t),this.renderer.gl=t,this.renderer.CONTEXT_UID=y6++,this.renderer.runners.contextChange.emit(t)},e.prototype.initFromOptions=function(t){var r=this.createContext(this.renderer.view,t);this.initFromContext(r)},e.prototype.createContext=function(t,r){var n;if(We.PREFER_ENV>=Zs.WEBGL2&&(n=t.getContext("webgl2",r)),n)this.webGLVersion=2;else if(this.webGLVersion=1,n=t.getContext("webgl",r)||t.getContext("experimental-webgl",r),!n)throw new Error("This browser does not support WebGL. Try using the canvas renderer");return this.gl=n,this.getExtensions(),this.gl},e.prototype.getExtensions=function(){var t=this.gl,r={anisotropicFiltering:t.getExtension("EXT_texture_filter_anisotropic"),floatTextureLinear:t.getExtension("OES_texture_float_linear"),s3tc:t.getExtension("WEBGL_compressed_texture_s3tc"),s3tc_sRGB:t.getExtension("WEBGL_compressed_texture_s3tc_srgb"),etc:t.getExtension("WEBGL_compressed_texture_etc"),etc1:t.getExtension("WEBGL_compressed_texture_etc1"),pvrtc:t.getExtension("WEBGL_compressed_texture_pvrtc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc"),atc:t.getExtension("WEBGL_compressed_texture_atc"),astc:t.getExtension("WEBGL_compressed_texture_astc")};this.webGLVersion===1?Object.assign(this.extensions,r,{drawBuffers:t.getExtension("WEBGL_draw_buffers"),depthTexture:t.getExtension("WEBGL_depth_texture"),loseContext:t.getExtension("WEBGL_lose_context"),vertexArrayObject:t.getExtension("OES_vertex_array_object")||t.getExtension("MOZ_OES_vertex_array_object")||t.getExtension("WEBKIT_OES_vertex_array_object"),uint32ElementIndex:t.getExtension("OES_element_index_uint"),floatTexture:t.getExtension("OES_texture_float"),floatTextureLinear:t.getExtension("OES_texture_float_linear"),textureHalfFloat:t.getExtension("OES_texture_half_float"),textureHalfFloatLinear:t.getExtension("OES_texture_half_float_linear")}):this.webGLVersion===2&&Object.assign(this.extensions,r,{colorBufferFloat:t.getExtension("EXT_color_buffer_float")})},e.prototype.handleContextLost=function(t){t.preventDefault()},e.prototype.handleContextRestored=function(){this.renderer.runners.contextChange.emit(this.gl)},e.prototype.destroy=function(){var t=this.renderer.view;this.renderer=null,t.removeEventListener("webglcontextlost",this.handleContextLost),t.removeEventListener("webglcontextrestored",this.handleContextRestored),this.gl.useProgram(null),this.extensions.loseContext&&this.extensions.loseContext.loseContext()},e.prototype.postrender=function(){this.renderer.renderingToScreen&&this.gl.flush()},e.prototype.validateContext=function(t){var r=t.getContextAttributes(),n="WebGL2RenderingContext"in globalThis&&t instanceof globalThis.WebGL2RenderingContext;n&&(this.webGLVersion=2),r&&!r.stencil&&console.warn("Provided WebGL context does not have a stencil buffer, masks may not render correctly");var i=n||!!t.getExtension("OES_element_index_uint");this.supports.uint32Indices=i,i||console.warn("Provided WebGL context does not support 32 index buffer, complex graphics may not render correctly")},e}(),RQ=function(){function e(t){this.framebuffer=t,this.stencil=null,this.dirtyId=-1,this.dirtyFormat=-1,this.dirtySize=-1,this.multisample=Ur.NONE,this.msaaBuffer=null,this.blitFramebuffer=null,this.mipLevel=0}return e}(),kQ=new Me,OQ=function(){function e(t){this.renderer=t,this.managedFramebuffers=[],this.unknownFramebuffer=new Dw(10,10),this.msaaSamples=null}return e.prototype.contextChange=function(){var t=this.gl=this.renderer.gl;if(this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.current=this.unknownFramebuffer,this.viewport=new Me,this.hasMRT=!0,this.writeDepthTexture=!0,this.disposeAll(!0),this.renderer.context.webGLVersion===1){var r=this.renderer.context.extensions.drawBuffers,n=this.renderer.context.extensions.depthTexture;We.PREFER_ENV===Zs.WEBGL_LEGACY&&(r=null,n=null),r?t.drawBuffers=function(i){return r.drawBuffersWEBGL(i)}:(this.hasMRT=!1,t.drawBuffers=function(){}),n||(this.writeDepthTexture=!1)}else this.msaaSamples=t.getInternalformatParameter(t.RENDERBUFFER,t.RGBA8,t.SAMPLES)},e.prototype.bind=function(t,r,n){n===void 0&&(n=0);var i=this.gl;if(t){var o=t.glFramebuffers[this.CONTEXT_UID]||this.initFramebuffer(t);this.current!==t&&(this.current=t,i.bindFramebuffer(i.FRAMEBUFFER,o.framebuffer)),o.mipLevel!==n&&(t.dirtyId++,t.dirtyFormat++,o.mipLevel=n),o.dirtyId!==t.dirtyId&&(o.dirtyId=t.dirtyId,o.dirtyFormat!==t.dirtyFormat?(o.dirtyFormat=t.dirtyFormat,o.dirtySize=t.dirtySize,this.updateFramebuffer(t,n)):o.dirtySize!==t.dirtySize&&(o.dirtySize=t.dirtySize,this.resizeFramebuffer(t)));for(var s=0;s<t.colorTextures.length;s++){var a=t.colorTextures[s];this.renderer.texture.unbind(a.parentTextureArray||a)}if(t.depthTexture&&this.renderer.texture.unbind(t.depthTexture),r){var l=r.width>>n,u=r.height>>n,c=l/r.width;this.setViewport(r.x*c,r.y*c,l,u)}else{var l=t.width>>n,u=t.height>>n;this.setViewport(0,0,l,u)}}else this.current&&(this.current=null,i.bindFramebuffer(i.FRAMEBUFFER,null)),r?this.setViewport(r.x,r.y,r.width,r.height):this.setViewport(0,0,this.renderer.width,this.renderer.height)},e.prototype.setViewport=function(t,r,n,i){var o=this.viewport;t=Math.round(t),r=Math.round(r),n=Math.round(n),i=Math.round(i),(o.width!==n||o.height!==i||o.x!==t||o.y!==r)&&(o.x=t,o.y=r,o.width=n,o.height=i,this.gl.viewport(t,r,n,i))},Object.defineProperty(e.prototype,"size",{get:function(){return this.current?{x:0,y:0,width:this.current.width,height:this.current.height}:{x:0,y:0,width:this.renderer.width,height:this.renderer.height}},enumerable:!1,configurable:!0}),e.prototype.clear=function(t,r,n,i,o){o===void 0&&(o=Ig.COLOR|Ig.DEPTH);var s=this.gl;s.clearColor(t,r,n,i),s.clear(o)},e.prototype.initFramebuffer=function(t){var r=this.gl,n=new RQ(r.createFramebuffer());return n.multisample=this.detectSamples(t.multisample),t.glFramebuffers[this.CONTEXT_UID]=n,this.managedFramebuffers.push(t),t.disposeRunner.add(this),n},e.prototype.resizeFramebuffer=function(t){var r=this.gl,n=t.glFramebuffers[this.CONTEXT_UID];n.msaaBuffer&&(r.bindRenderbuffer(r.RENDERBUFFER,n.msaaBuffer),r.renderbufferStorageMultisample(r.RENDERBUFFER,n.multisample,r.RGBA8,t.width,t.height)),n.stencil&&(r.bindRenderbuffer(r.RENDERBUFFER,n.stencil),n.msaaBuffer?r.renderbufferStorageMultisample(r.RENDERBUFFER,n.multisample,r.DEPTH24_STENCIL8,t.width,t.height):r.renderbufferStorage(r.RENDERBUFFER,r.DEPTH_STENCIL,t.width,t.height));var i=t.colorTextures,o=i.length;r.drawBuffers||(o=Math.min(o,1));for(var s=0;s<o;s++){var a=i[s],l=a.parentTextureArray||a;this.renderer.texture.bind(l,0)}t.depthTexture&&this.writeDepthTexture&&this.renderer.texture.bind(t.depthTexture,0)},e.prototype.updateFramebuffer=function(t,r){var n=this.gl,i=t.glFramebuffers[this.CONTEXT_UID],o=t.colorTextures,s=o.length;n.drawBuffers||(s=Math.min(s,1)),i.multisample>1&&this.canMultisampleFramebuffer(t)?(i.msaaBuffer=i.msaaBuffer||n.createRenderbuffer(),n.bindRenderbuffer(n.RENDERBUFFER,i.msaaBuffer),n.renderbufferStorageMultisample(n.RENDERBUFFER,i.multisample,n.RGBA8,t.width,t.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.RENDERBUFFER,i.msaaBuffer)):i.msaaBuffer&&(n.deleteRenderbuffer(i.msaaBuffer),i.msaaBuffer=null,i.blitFramebuffer&&(i.blitFramebuffer.dispose(),i.blitFramebuffer=null));for(var a=[],l=0;l<s;l++){var u=o[l],c=u.parentTextureArray||u;this.renderer.texture.bind(c,0),!(l===0&&i.msaaBuffer)&&(n.framebufferTexture2D(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+l,u.target,c._glTextures[this.CONTEXT_UID].texture,r),a.push(n.COLOR_ATTACHMENT0+l))}if(a.length>1&&n.drawBuffers(a),t.depthTexture){var f=this.writeDepthTexture;if(f){var p=t.depthTexture;this.renderer.texture.bind(p,0),n.framebufferTexture2D(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.TEXTURE_2D,p._glTextures[this.CONTEXT_UID].texture,r)}}(t.stencil||t.depth)&&!(t.depthTexture&&this.writeDepthTexture)?(i.stencil=i.stencil||n.createRenderbuffer(),n.bindRenderbuffer(n.RENDERBUFFER,i.stencil),i.msaaBuffer?n.renderbufferStorageMultisample(n.RENDERBUFFER,i.multisample,n.DEPTH24_STENCIL8,t.width,t.height):n.renderbufferStorage(n.RENDERBUFFER,n.DEPTH_STENCIL,t.width,t.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.RENDERBUFFER,i.stencil)):i.stencil&&(n.deleteRenderbuffer(i.stencil),i.stencil=null)},e.prototype.canMultisampleFramebuffer=function(t){return this.renderer.context.webGLVersion!==1&&t.colorTextures.length<=1&&!t.depthTexture},e.prototype.detectSamples=function(t){var r=this.msaaSamples,n=Ur.NONE;if(t<=1||r===null)return n;for(var i=0;i<r.length;i++)if(r[i]<=t){n=r[i];break}return n===1&&(n=Ur.NONE),n},e.prototype.blit=function(t,r,n){var i=this,o=i.current,s=i.renderer,a=i.gl,l=i.CONTEXT_UID;if(s.context.webGLVersion===2&&!!o){var u=o.glFramebuffers[l];if(!!u){if(!t){if(!u.msaaBuffer)return;var c=o.colorTextures[0];if(!c)return;u.blitFramebuffer||(u.blitFramebuffer=new Dw(o.width,o.height),u.blitFramebuffer.addColorTexture(0,c)),t=u.blitFramebuffer,t.colorTextures[0]!==c&&(t.colorTextures[0]=c,t.dirtyId++,t.dirtyFormat++),(t.width!==o.width||t.height!==o.height)&&(t.width=o.width,t.height=o.height,t.dirtyId++,t.dirtySize++)}r||(r=kQ,r.width=o.width,r.height=o.height),n||(n=r);var f=r.width===n.width&&r.height===n.height;this.bind(t),a.bindFramebuffer(a.READ_FRAMEBUFFER,u.framebuffer),a.blitFramebuffer(r.left,r.top,r.right,r.bottom,n.left,n.top,n.right,n.bottom,a.COLOR_BUFFER_BIT,f?a.NEAREST:a.LINEAR)}}},e.prototype.disposeFramebuffer=function(t,r){var n=t.glFramebuffers[this.CONTEXT_UID],i=this.gl;if(!!n){delete t.glFramebuffers[this.CONTEXT_UID];var o=this.managedFramebuffers.indexOf(t);o>=0&&this.managedFramebuffers.splice(o,1),t.disposeRunner.remove(this),r||(i.deleteFramebuffer(n.framebuffer),n.msaaBuffer&&i.deleteRenderbuffer(n.msaaBuffer),n.stencil&&i.deleteRenderbuffer(n.stencil)),n.blitFramebuffer&&n.blitFramebuffer.dispose()}},e.prototype.disposeAll=function(t){var r=this.managedFramebuffers;this.managedFramebuffers=[];for(var n=0;n<r.length;n++)this.disposeFramebuffer(r[n],t)},e.prototype.forceStencil=function(){var t=this.current;if(!!t){var r=t.glFramebuffers[this.CONTEXT_UID];if(!(!r||r.stencil)){t.stencil=!0;var n=t.width,i=t.height,o=this.gl,s=o.createRenderbuffer();o.bindRenderbuffer(o.RENDERBUFFER,s),r.msaaBuffer?o.renderbufferStorageMultisample(o.RENDERBUFFER,r.multisample,o.DEPTH24_STENCIL8,n,i):o.renderbufferStorage(o.RENDERBUFFER,o.DEPTH_STENCIL,n,i),r.stencil=s,o.framebufferRenderbuffer(o.FRAMEBUFFER,o.DEPTH_STENCIL_ATTACHMENT,o.RENDERBUFFER,s)}}},e.prototype.reset=function(){this.current=this.unknownFramebuffer,this.viewport=new Me},e.prototype.destroy=function(){this.renderer=null},e}(),u_={5126:4,5123:2,5121:1},LQ=function(){function e(t){this.renderer=t,this._activeGeometry=null,this._activeVao=null,this.hasVao=!0,this.hasInstance=!0,this.canUseUInt32ElementIndex=!1,this.managedGeometries={}}return e.prototype.contextChange=function(){this.disposeAll(!0);var t=this.gl=this.renderer.gl,r=this.renderer.context;if(this.CONTEXT_UID=this.renderer.CONTEXT_UID,r.webGLVersion!==2){var n=this.renderer.context.extensions.vertexArrayObject;We.PREFER_ENV===Zs.WEBGL_LEGACY&&(n=null),n?(t.createVertexArray=function(){return n.createVertexArrayOES()},t.bindVertexArray=function(o){return n.bindVertexArrayOES(o)},t.deleteVertexArray=function(o){return n.deleteVertexArrayOES(o)}):(this.hasVao=!1,t.createVertexArray=function(){return null},t.bindVertexArray=function(){return null},t.deleteVertexArray=function(){return null})}if(r.webGLVersion!==2){var i=t.getExtension("ANGLE_instanced_arrays");i?(t.vertexAttribDivisor=function(o,s){return i.vertexAttribDivisorANGLE(o,s)},t.drawElementsInstanced=function(o,s,a,l,u){return i.drawElementsInstancedANGLE(o,s,a,l,u)},t.drawArraysInstanced=function(o,s,a,l){return i.drawArraysInstancedANGLE(o,s,a,l)}):this.hasInstance=!1}this.canUseUInt32ElementIndex=r.webGLVersion===2||!!r.extensions.uint32ElementIndex},e.prototype.bind=function(t,r){r=r||this.renderer.shader.shader;var n=this.gl,i=t.glVertexArrayObjects[this.CONTEXT_UID],o=!1;i||(this.managedGeometries[t.id]=t,t.disposeRunner.add(this),t.glVertexArrayObjects[this.CONTEXT_UID]=i={},o=!0);var s=i[r.program.id]||this.initGeometryVao(t,r,o);this._activeGeometry=t,this._activeVao!==s&&(this._activeVao=s,this.hasVao?n.bindVertexArray(s):this.activateVao(t,r.program)),this.updateBuffers()},e.prototype.reset=function(){this.unbind()},e.prototype.updateBuffers=function(){for(var t=this._activeGeometry,r=this.renderer.buffer,n=0;n<t.buffers.length;n++){var i=t.buffers[n];r.update(i)}},e.prototype.checkCompatibility=function(t,r){var n=t.attributes,i=r.attributeData;for(var o in i)if(!n[o])throw new Error('shader and geometry incompatible, geometry missing the "'+o+'" attribute')},e.prototype.getSignature=function(t,r){var n=t.attributes,i=r.attributeData,o=["g",t.id];for(var s in n)i[s]&&o.push(s,i[s].location);return o.join("-")},e.prototype.initGeometryVao=function(t,r,n){n===void 0&&(n=!0);var i=this.gl,o=this.CONTEXT_UID,s=this.renderer.buffer,a=r.program;a.glPrograms[o]||this.renderer.shader.generateProgram(r),this.checkCompatibility(t,a);var l=this.getSignature(t,a),u=t.glVertexArrayObjects[this.CONTEXT_UID],c=u[l];if(c)return u[a.id]=c,c;var f=t.buffers,p=t.attributes,m={},g={};for(var b in f)m[b]=0,g[b]=0;for(var b in p)!p[b].size&&a.attributeData[b]?p[b].size=a.attributeData[b].size:p[b].size||console.warn("PIXI Geometry attribute '"+b+"' size cannot be determined (likely the bound shader does not have the attribute)"),m[p[b].buffer]+=p[b].size*u_[p[b].type];for(var b in p){var y=p[b],w=y.size;y.stride===void 0&&(m[y.buffer]===w*u_[y.type]?y.stride=0:y.stride=m[y.buffer]),y.start===void 0&&(y.start=g[y.buffer],g[y.buffer]+=w*u_[y.type])}c=i.createVertexArray(),i.bindVertexArray(c);for(var x=0;x<f.length;x++){var T=f[x];s.bind(T),n&&T._glBuffers[o].refCount++}return this.activateVao(t,a),this._activeVao=c,u[a.id]=c,u[l]=c,c},e.prototype.disposeGeometry=function(t,r){var n;if(!!this.managedGeometries[t.id]){delete this.managedGeometries[t.id];var i=t.glVertexArrayObjects[this.CONTEXT_UID],o=this.gl,s=t.buffers,a=(n=this.renderer)===null||n===void 0?void 0:n.buffer;if(t.disposeRunner.remove(this),!!i){if(a)for(var l=0;l<s.length;l++){var u=s[l]._glBuffers[this.CONTEXT_UID];u&&(u.refCount--,u.refCount===0&&!r&&a.dispose(s[l],r))}if(!r){for(var c in i)if(c[0]==="g"){var f=i[c];this._activeVao===f&&this.unbind(),o.deleteVertexArray(f)}}delete t.glVertexArrayObjects[this.CONTEXT_UID]}}},e.prototype.disposeAll=function(t){for(var r=Object.keys(this.managedGeometries),n=0;n<r.length;n++)this.disposeGeometry(this.managedGeometries[r[n]],t)},e.prototype.activateVao=function(t,r){var n=this.gl,i=this.CONTEXT_UID,o=this.renderer.buffer,s=t.buffers,a=t.attributes;t.indexBuffer&&o.bind(t.indexBuffer);var l=null;for(var u in a){var c=a[u],f=s[c.buffer],p=f._glBuffers[i];if(r.attributeData[u]){l!==p&&(o.bind(f),l=p);var m=r.attributeData[u].location;if(n.enableVertexAttribArray(m),n.vertexAttribPointer(m,c.size,c.type||n.FLOAT,c.normalized,c.stride,c.start),c.instance)if(this.hasInstance)n.vertexAttribDivisor(m,1);else throw new Error("geometry error, GPU Instancing is not supported on this device")}}},e.prototype.draw=function(t,r,n,i){var o=this.gl,s=this._activeGeometry;if(s.indexBuffer){var a=s.indexBuffer.data.BYTES_PER_ELEMENT,l=a===2?o.UNSIGNED_SHORT:o.UNSIGNED_INT;a===2||a===4&&this.canUseUInt32ElementIndex?s.instanced?o.drawElementsInstanced(t,r||s.indexBuffer.data.length,l,(n||0)*a,i||1):o.drawElements(t,r||s.indexBuffer.data.length,l,(n||0)*a):console.warn("unsupported index buffer type: uint32")}else s.instanced?o.drawArraysInstanced(t,n,r||s.getSize(),i||1):o.drawArrays(t,n,r||s.getSize());return this},e.prototype.unbind=function(){this.gl.bindVertexArray(null),this._activeVao=null,this._activeGeometry=null},e.prototype.destroy=function(){this.renderer=null},e}(),UQ=function(){function e(t){t===void 0&&(t=null),this.type=Ln.NONE,this.autoDetect=!0,this.maskObject=t||null,this.pooled=!1,this.isMaskData=!0,this.resolution=null,this.multisample=We.FILTER_MULTISAMPLE,this.enabled=!0,this._filters=null,this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null,this._scissorRectLocal=null,this._target=null}return Object.defineProperty(e.prototype,"filter",{get:function(){return this._filters?this._filters[0]:null},set:function(t){t?this._filters?this._filters[0]=t:this._filters=[t]:this._filters=null},enumerable:!1,configurable:!0}),e.prototype.reset=function(){this.pooled&&(this.maskObject=null,this.type=Ln.NONE,this.autoDetect=!0),this._target=null,this._scissorRectLocal=null},e.prototype.copyCountersOrReset=function(t){t?(this._stencilCounter=t._stencilCounter,this._scissorCounter=t._scissorCounter,this._scissorRect=t._scissorRect):(this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null)},e}();function _6(e,t,r){var n=e.createShader(t);return e.shaderSource(n,r),e.compileShader(n),n}function b6(e,t){var r=e.getShaderSource(t).split(`
`).map(function(u,c){return c+": "+u}),n=e.getShaderInfoLog(t),i=n.split(`
`),o={},s=i.map(function(u){return parseFloat(u.replace(/^ERROR\: 0\:([\d]+)\:.*$/,"$1"))}).filter(function(u){return u&&!o[u]?(o[u]=!0,!0):!1}),a=[""];s.forEach(function(u){r[u-1]="%c"+r[u-1]+"%c",a.push("background: #FF0000; color:#FFFFFF; font-size: 10px","font-size: 10px")});var l=r.join(`
`);a[0]=l,console.error(n),console.groupCollapsed("click to view full shader code"),console.warn.apply(console,a),console.groupEnd()}function FQ(e,t,r,n){e.getProgramParameter(t,e.LINK_STATUS)||(e.getShaderParameter(r,e.COMPILE_STATUS)||b6(e,r),e.getShaderParameter(n,e.COMPILE_STATUS)||b6(e,n),console.error("PixiJS Error: Could not initialize shader."),e.getProgramInfoLog(t)!==""&&console.warn("PixiJS Warning: gl.getProgramInfoLog()",e.getProgramInfoLog(t)))}function c_(e){for(var t=new Array(e),r=0;r<t.length;r++)t[r]=!1;return t}function GO(e,t){switch(e){case"float":return 0;case"vec2":return new Float32Array(2*t);case"vec3":return new Float32Array(3*t);case"vec4":return new Float32Array(4*t);case"int":case"uint":case"sampler2D":case"sampler2DArray":return 0;case"ivec2":return new Int32Array(2*t);case"ivec3":return new Int32Array(3*t);case"ivec4":return new Int32Array(4*t);case"uvec2":return new Uint32Array(2*t);case"uvec3":return new Uint32Array(3*t);case"uvec4":return new Uint32Array(4*t);case"bool":return!1;case"bvec2":return c_(2*t);case"bvec3":return c_(3*t);case"bvec4":return c_(4*t);case"mat2":return new Float32Array([1,0,0,1]);case"mat3":return new Float32Array([1,0,0,0,1,0,0,0,1]);case"mat4":return new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}return null}var jO={},Uf=jO;function MQ(){if(Uf===jO||Uf&&Uf.isContextLost()){var e=document.createElement("canvas"),t=void 0;We.PREFER_ENV>=Zs.WEBGL2&&(t=e.getContext("webgl2",{})),t||(t=e.getContext("webgl",{})||e.getContext("experimental-webgl",{}),t?t.getExtension("WEBGL_draw_buffers"):t=null),Uf=t}return Uf}var Cv;function BQ(){if(!Cv){Cv=qo.MEDIUM;var e=MQ();if(e&&e.getShaderPrecisionFormat){var t=e.getShaderPrecisionFormat(e.FRAGMENT_SHADER,e.HIGH_FLOAT);Cv=t.precision?qo.HIGH:qo.MEDIUM}}return Cv}function w6(e,t,r){if(e.substring(0,9)!=="precision"){var n=t;return t===qo.HIGH&&r!==qo.HIGH&&(n=qo.MEDIUM),"precision "+n+` float;
`+e}else if(r!==qo.HIGH&&e.substring(0,15)==="precision highp")return e.replace("precision highp","precision mediump");return e}var DQ={float:1,vec2:2,vec3:3,vec4:4,int:1,ivec2:2,ivec3:3,ivec4:4,uint:1,uvec2:2,uvec3:3,uvec4:4,bool:1,bvec2:2,bvec3:3,bvec4:4,mat2:4,mat3:9,mat4:16,sampler2D:1};function $O(e){return DQ[e]}var Iv=null,x6={FLOAT:"float",FLOAT_VEC2:"vec2",FLOAT_VEC3:"vec3",FLOAT_VEC4:"vec4",INT:"int",INT_VEC2:"ivec2",INT_VEC3:"ivec3",INT_VEC4:"ivec4",UNSIGNED_INT:"uint",UNSIGNED_INT_VEC2:"uvec2",UNSIGNED_INT_VEC3:"uvec3",UNSIGNED_INT_VEC4:"uvec4",BOOL:"bool",BOOL_VEC2:"bvec2",BOOL_VEC3:"bvec3",BOOL_VEC4:"bvec4",FLOAT_MAT2:"mat2",FLOAT_MAT3:"mat3",FLOAT_MAT4:"mat4",SAMPLER_2D:"sampler2D",INT_SAMPLER_2D:"sampler2D",UNSIGNED_INT_SAMPLER_2D:"sampler2D",SAMPLER_CUBE:"samplerCube",INT_SAMPLER_CUBE:"samplerCube",UNSIGNED_INT_SAMPLER_CUBE:"samplerCube",SAMPLER_2D_ARRAY:"sampler2DArray",INT_SAMPLER_2D_ARRAY:"sampler2DArray",UNSIGNED_INT_SAMPLER_2D_ARRAY:"sampler2DArray"};function HO(e,t){if(!Iv){var r=Object.keys(x6);Iv={};for(var n=0;n<r.length;++n){var i=r[n];Iv[e[i]]=x6[i]}}return Iv[t]}var Jc=[{test:function(e){return e.type==="float"&&e.size===1},code:function(e){return`
            if(uv["`+e+'"] !== ud["'+e+`"].value)
            {
                ud["`+e+'"].value = uv["'+e+`"]
                gl.uniform1f(ud["`+e+'"].location, uv["'+e+`"])
            }
            `}},{test:function(e){return(e.type==="sampler2D"||e.type==="samplerCube"||e.type==="sampler2DArray")&&e.size===1&&!e.isArray},code:function(e){return`t = syncData.textureCount++;

            renderer.texture.bind(uv["`+e+`"], t);

            if(ud["`+e+`"].value !== t)
            {
                ud["`+e+`"].value = t;
                gl.uniform1i(ud["`+e+`"].location, t);
; // eslint-disable-line max-len
            }`}},{test:function(e,t){return e.type==="mat3"&&e.size===1&&t.a!==void 0},code:function(e){return`
            gl.uniformMatrix3fv(ud["`+e+'"].location, false, uv["'+e+`"].toArray(true));
            `},codeUbo:function(e){return`
                var `+e+"_matrix = uv."+e+`.toArray(true);

                data[offset] = `+e+`_matrix[0];
                data[offset+1] = `+e+`_matrix[1];
                data[offset+2] = `+e+`_matrix[2];
        
                data[offset + 4] = `+e+`_matrix[3];
                data[offset + 5] = `+e+`_matrix[4];
                data[offset + 6] = `+e+`_matrix[5];
        
                data[offset + 8] = `+e+`_matrix[6];
                data[offset + 9] = `+e+`_matrix[7];
                data[offset + 10] = `+e+`_matrix[8];
            `}},{test:function(e,t){return e.type==="vec2"&&e.size===1&&t.x!==void 0},code:function(e){return`
                cv = ud["`+e+`"].value;
                v = uv["`+e+`"];

                if(cv[0] !== v.x || cv[1] !== v.y)
                {
                    cv[0] = v.x;
                    cv[1] = v.y;
                    gl.uniform2f(ud["`+e+`"].location, v.x, v.y);
                }`},codeUbo:function(e){return`
                v = uv.`+e+`;

                data[offset] = v.x;
                data[offset+1] = v.y;
            `}},{test:function(e){return e.type==="vec2"&&e.size===1},code:function(e){return`
                cv = ud["`+e+`"].value;
                v = uv["`+e+`"];

                if(cv[0] !== v[0] || cv[1] !== v[1])
                {
                    cv[0] = v[0];
                    cv[1] = v[1];
                    gl.uniform2f(ud["`+e+`"].location, v[0], v[1]);
                }
            `}},{test:function(e,t){return e.type==="vec4"&&e.size===1&&t.width!==void 0},code:function(e){return`
                cv = ud["`+e+`"].value;
                v = uv["`+e+`"];

                if(cv[0] !== v.x || cv[1] !== v.y || cv[2] !== v.width || cv[3] !== v.height)
                {
                    cv[0] = v.x;
                    cv[1] = v.y;
                    cv[2] = v.width;
                    cv[3] = v.height;
                    gl.uniform4f(ud["`+e+`"].location, v.x, v.y, v.width, v.height)
                }`},codeUbo:function(e){return`
                    v = uv.`+e+`;

                    data[offset] = v.x;
                    data[offset+1] = v.y;
                    data[offset+2] = v.width;
                    data[offset+3] = v.height;
                `}},{test:function(e){return e.type==="vec4"&&e.size===1},code:function(e){return`
                cv = ud["`+e+`"].value;
                v = uv["`+e+`"];

                if(cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
                {
                    cv[0] = v[0];
                    cv[1] = v[1];
                    cv[2] = v[2];
                    cv[3] = v[3];

                    gl.uniform4f(ud["`+e+`"].location, v[0], v[1], v[2], v[3])
                }`}}],GQ={float:`
    if (cv !== v)
    {
        cu.value = v;
        gl.uniform1f(location, v);
    }`,vec2:`
    if (cv[0] !== v[0] || cv[1] !== v[1])
    {
        cv[0] = v[0];
        cv[1] = v[1];

        gl.uniform2f(location, v[0], v[1])
    }`,vec3:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];

        gl.uniform3f(location, v[0], v[1], v[2])
    }`,vec4:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];
        cv[3] = v[3];

        gl.uniform4f(location, v[0], v[1], v[2], v[3]);
    }`,int:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1i(location, v);
    }`,ivec2:`
    if (cv[0] !== v[0] || cv[1] !== v[1])
    {
        cv[0] = v[0];
        cv[1] = v[1];

        gl.uniform2i(location, v[0], v[1]);
    }`,ivec3:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];

        gl.uniform3i(location, v[0], v[1], v[2]);
    }`,ivec4:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];
        cv[3] = v[3];

        gl.uniform4i(location, v[0], v[1], v[2], v[3]);
    }`,uint:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1ui(location, v);
    }`,uvec2:`
    if (cv[0] !== v[0] || cv[1] !== v[1])
    {
        cv[0] = v[0];
        cv[1] = v[1];

        gl.uniform2ui(location, v[0], v[1]);
    }`,uvec3:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];

        gl.uniform3ui(location, v[0], v[1], v[2]);
    }`,uvec4:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];
        cv[3] = v[3];

        gl.uniform4ui(location, v[0], v[1], v[2], v[3]);
    }`,bool:`
    if (cv !== v)
    {
        cu.value = v;
        gl.uniform1i(location, v);
    }`,bvec2:`
    if (cv[0] != v[0] || cv[1] != v[1])
    {
        cv[0] = v[0];
        cv[1] = v[1];

        gl.uniform2i(location, v[0], v[1]);
    }`,bvec3:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];

        gl.uniform3i(location, v[0], v[1], v[2]);
    }`,bvec4:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];
        cv[3] = v[3];

        gl.uniform4i(location, v[0], v[1], v[2], v[3]);
    }`,mat2:"gl.uniformMatrix2fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",sampler2D:"gl.uniform1i(location, v)",samplerCube:"gl.uniform1i(location, v)",sampler2DArray:"gl.uniform1i(location, v)"},jQ={float:"gl.uniform1fv(location, v)",vec2:"gl.uniform2fv(location, v)",vec3:"gl.uniform3fv(location, v)",vec4:"gl.uniform4fv(location, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat2:"gl.uniformMatrix2fv(location, false, v)",int:"gl.uniform1iv(location, v)",ivec2:"gl.uniform2iv(location, v)",ivec3:"gl.uniform3iv(location, v)",ivec4:"gl.uniform4iv(location, v)",uint:"gl.uniform1uiv(location, v)",uvec2:"gl.uniform2uiv(location, v)",uvec3:"gl.uniform3uiv(location, v)",uvec4:"gl.uniform4uiv(location, v)",bool:"gl.uniform1iv(location, v)",bvec2:"gl.uniform2iv(location, v)",bvec3:"gl.uniform3iv(location, v)",bvec4:"gl.uniform4iv(location, v)",sampler2D:"gl.uniform1iv(location, v)",samplerCube:"gl.uniform1iv(location, v)",sampler2DArray:"gl.uniform1iv(location, v)"};function $Q(e,t){var r,n=[`
        var v = null;
        var cv = null;
        var cu = null;
        var t = 0;
        var gl = renderer.gl;
    `];for(var i in e.uniforms){var o=t[i];if(!o){!((r=e.uniforms[i])===null||r===void 0)&&r.group&&(e.uniforms[i].ubo?n.push(`
                        renderer.shader.syncUniformBufferGroup(uv.`+i+", '"+i+`');
                    `):n.push(`
                        renderer.shader.syncUniformGroup(uv.`+i+`, syncData);
                    `));continue}for(var s=e.uniforms[i],a=!1,l=0;l<Jc.length;l++)if(Jc[l].test(o,s)){n.push(Jc[l].code(i,s)),a=!0;break}if(!a){var u=o.size===1?GQ:jQ,c=u[o.type].replace("location",'ud["'+i+'"].location');n.push(`
            cu = ud["`+i+`"];
            cv = cu.value;
            v = uv["`+i+`"];
            `+c+";")}}return new Function("ud","uv","renderer","syncData",n.join(`
`))}var HQ=["precision mediump float;","void main(void){","float test = 0.1;","%forloop%","gl_FragColor = vec4(0.0);","}"].join(`
`);function zQ(e){for(var t="",r=0;r<e;++r)r>0&&(t+=`
else `),r<e-1&&(t+="if(test == "+r+".0){}");return t}function VQ(e,t){if(e===0)throw new Error("Invalid value of `0` passed to `checkMaxIfStatementsInShader`");for(var r=t.createShader(t.FRAGMENT_SHADER);;){var n=HQ.replace(/%forloop%/gi,zQ(e));if(t.shaderSource(r,n),t.compileShader(r),!t.getShaderParameter(r,t.COMPILE_STATUS))e=e/2|0;else break}return e}var Ff;function XQ(){if(typeof Ff=="boolean")return Ff;try{var e=new Function("param1","param2","param3","return param1[param2] === param3;");Ff=e({a:"b"},"a","b")===!0}catch{Ff=!1}return Ff}var WQ=`varying vec2 vTextureCoord;

uniform sampler2D uSampler;

void main(void){
   gl_FragColor *= texture2D(uSampler, vTextureCoord);
}`,YQ=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void){
   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
   vTextureCoord = aTextureCoord;
}
`,KQ=0,Nv={},Fh=function(){function e(t,r,n){n===void 0&&(n="pixi-shader"),this.id=KQ++,this.vertexSrc=t||e.defaultVertexSrc,this.fragmentSrc=r||e.defaultFragmentSrc,this.vertexSrc=this.vertexSrc.trim(),this.fragmentSrc=this.fragmentSrc.trim(),this.vertexSrc.substring(0,8)!=="#version"&&(n=n.replace(/\s+/g,"-"),Nv[n]?(Nv[n]++,n+="-"+Nv[n]):Nv[n]=1,this.vertexSrc="#define SHADER_NAME "+n+`
`+this.vertexSrc,this.fragmentSrc="#define SHADER_NAME "+n+`
`+this.fragmentSrc,this.vertexSrc=w6(this.vertexSrc,We.PRECISION_VERTEX,qo.HIGH),this.fragmentSrc=w6(this.fragmentSrc,We.PRECISION_FRAGMENT,BQ())),this.glPrograms={},this.syncUniforms=null}return Object.defineProperty(e,"defaultVertexSrc",{get:function(){return YQ},enumerable:!1,configurable:!0}),Object.defineProperty(e,"defaultFragmentSrc",{get:function(){return WQ},enumerable:!1,configurable:!0}),e.from=function(t,r,n){var i=t+r,o=X5[i];return o||(X5[i]=o=new e(t,r,n)),o},e}(),Ws=function(){function e(t,r){this.uniformBindCount=0,this.program=t,r?r instanceof iu?this.uniformGroup=r:this.uniformGroup=new iu(r):this.uniformGroup=new iu({})}return e.prototype.checkUniformExists=function(t,r){if(r.uniforms[t])return!0;for(var n in r.uniforms){var i=r.uniforms[n];if(i.group&&this.checkUniformExists(t,i))return!0}return!1},e.prototype.destroy=function(){this.uniformGroup=null},Object.defineProperty(e.prototype,"uniforms",{get:function(){return this.uniformGroup.uniforms},enumerable:!1,configurable:!0}),e.from=function(t,r,n){var i=Fh.from(t,r);return new e(i,n)},e}(),h_=0,f_=1,d_=2,p_=3,m_=4,v_=5,yl=function(){function e(){this.data=0,this.blendMode=Ze.NORMAL,this.polygonOffset=0,this.blend=!0,this.depthMask=!0}return Object.defineProperty(e.prototype,"blend",{get:function(){return!!(this.data&1<<h_)},set:function(t){!!(this.data&1<<h_)!==t&&(this.data^=1<<h_)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"offsets",{get:function(){return!!(this.data&1<<f_)},set:function(t){!!(this.data&1<<f_)!==t&&(this.data^=1<<f_)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"culling",{get:function(){return!!(this.data&1<<d_)},set:function(t){!!(this.data&1<<d_)!==t&&(this.data^=1<<d_)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"depthTest",{get:function(){return!!(this.data&1<<p_)},set:function(t){!!(this.data&1<<p_)!==t&&(this.data^=1<<p_)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"depthMask",{get:function(){return!!(this.data&1<<v_)},set:function(t){!!(this.data&1<<v_)!==t&&(this.data^=1<<v_)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"clockwiseFrontFace",{get:function(){return!!(this.data&1<<m_)},set:function(t){!!(this.data&1<<m_)!==t&&(this.data^=1<<m_)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"blendMode",{get:function(){return this._blendMode},set:function(t){this.blend=t!==Ze.NONE,this._blendMode=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"polygonOffset",{get:function(){return this._polygonOffset},set:function(t){this.offsets=!!t,this._polygonOffset=t},enumerable:!1,configurable:!0}),e.prototype.toString=function(){return"[@pixi/core:State "+("blendMode="+this.blendMode+" ")+("clockwiseFrontFace="+this.clockwiseFrontFace+" ")+("culling="+this.culling+" ")+("depthMask="+this.depthMask+" ")+("polygonOffset="+this.polygonOffset)+"]"},e.for2d=function(){var t=new e;return t.depthTest=!1,t.blend=!0,t},e}(),qQ=`attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

vec2 filterTextureCoord( void )
{
    return aVertexPosition * (outputFrame.zw * inputSize.zw);
}

void main(void)
{
    gl_Position = filterVertexPosition();
    vTextureCoord = filterTextureCoord();
}
`,ZQ=`varying vec2 vTextureCoord;

uniform sampler2D uSampler;

void main(void){
   gl_FragColor = texture2D(uSampler, vTextureCoord);
}
`,_l=function(e){nr(t,e);function t(r,n,i){var o=this,s=Fh.from(r||t.defaultVertexSrc,n||t.defaultFragmentSrc);return o=e.call(this,s,i)||this,o.padding=0,o.resolution=We.FILTER_RESOLUTION,o.multisample=We.FILTER_MULTISAMPLE,o.enabled=!0,o.autoFit=!0,o.state=new yl,o}return t.prototype.apply=function(r,n,i,o,s){r.applyFilter(this,n,i,o)},Object.defineProperty(t.prototype,"blendMode",{get:function(){return this.state.blendMode},set:function(r){this.state.blendMode=r},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"resolution",{get:function(){return this._resolution},set:function(r){this._resolution=r},enumerable:!1,configurable:!0}),Object.defineProperty(t,"defaultVertexSrc",{get:function(){return qQ},enumerable:!1,configurable:!0}),Object.defineProperty(t,"defaultFragmentSrc",{get:function(){return ZQ},enumerable:!1,configurable:!0}),t}(Ws),JQ=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 otherMatrix;

varying vec2 vMaskCoord;
varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = aTextureCoord;
    vMaskCoord = ( otherMatrix * vec3( aTextureCoord, 1.0)  ).xy;
}
`,QQ=`varying vec2 vMaskCoord;
varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform sampler2D mask;
uniform float alpha;
uniform float npmAlpha;
uniform vec4 maskClamp;

void main(void)
{
    float clip = step(3.5,
        step(maskClamp.x, vMaskCoord.x) +
        step(maskClamp.y, vMaskCoord.y) +
        step(vMaskCoord.x, maskClamp.z) +
        step(vMaskCoord.y, maskClamp.w));

    vec4 original = texture2D(uSampler, vTextureCoord);
    vec4 masky = texture2D(mask, vMaskCoord);
    float alphaMul = 1.0 - npmAlpha * (1.0 - masky.a);

    original *= (alphaMul * masky.r * alpha * clip);

    gl_FragColor = original;
}
`,T6=new rr,B4=function(){function e(t,r){this._texture=t,this.mapCoord=new rr,this.uClampFrame=new Float32Array(4),this.uClampOffset=new Float32Array(2),this._textureID=-1,this._updateID=0,this.clampOffset=0,this.clampMargin=typeof r>"u"?.5:r,this.isSimple=!1}return Object.defineProperty(e.prototype,"texture",{get:function(){return this._texture},set:function(t){this._texture=t,this._textureID=-1},enumerable:!1,configurable:!0}),e.prototype.multiplyUvs=function(t,r){r===void 0&&(r=t);for(var n=this.mapCoord,i=0;i<t.length;i+=2){var o=t[i],s=t[i+1];r[i]=o*n.a+s*n.c+n.tx,r[i+1]=o*n.b+s*n.d+n.ty}return r},e.prototype.update=function(t){var r=this._texture;if(!r||!r.valid||!t&&this._textureID===r._updateID)return!1;this._textureID=r._updateID,this._updateID++;var n=r._uvs;this.mapCoord.set(n.x1-n.x0,n.y1-n.y0,n.x3-n.x0,n.y3-n.y0,n.x0,n.y0);var i=r.orig,o=r.trim;o&&(T6.set(i.width/o.width,0,0,i.height/o.height,-o.x/o.width,-o.y/o.height),this.mapCoord.append(T6));var s=r.baseTexture,a=this.uClampFrame,l=this.clampMargin/s.resolution,u=this.clampOffset;return a[0]=(r._frame.x+l+u)/s.width,a[1]=(r._frame.y+l+u)/s.height,a[2]=(r._frame.x+r._frame.width-l+u)/s.width,a[3]=(r._frame.y+r._frame.height-l+u)/s.height,this.uClampOffset[0]=u/s.realWidth,this.uClampOffset[1]=u/s.realHeight,this.isSimple=r._frame.width===s.width&&r._frame.height===s.height&&r.rotate===0,!0},e}(),eee=function(e){nr(t,e);function t(r,n,i){var o=this,s=null;return typeof r!="string"&&n===void 0&&i===void 0&&(s=r,r=void 0,n=void 0,i=void 0),o=e.call(this,r||JQ,n||QQ,i)||this,o.maskSprite=s,o.maskMatrix=new rr,o}return Object.defineProperty(t.prototype,"maskSprite",{get:function(){return this._maskSprite},set:function(r){this._maskSprite=r,this._maskSprite&&(this._maskSprite.renderable=!1)},enumerable:!1,configurable:!0}),t.prototype.apply=function(r,n,i,o){var s=this._maskSprite,a=s._texture;!a.valid||(a.uvMatrix||(a.uvMatrix=new B4(a,0)),a.uvMatrix.update(),this.uniforms.npmAlpha=a.baseTexture.alphaMode?0:1,this.uniforms.mask=a,this.uniforms.otherMatrix=r.calculateSpriteMatrix(this.maskMatrix,s).prepend(a.uvMatrix.mapCoord),this.uniforms.alpha=s.worldAlpha,this.uniforms.maskClamp=a.uvMatrix.uClampFrame,r.applyFilter(this,n,i,o))},t}(_l),tee=function(){function e(t){this.renderer=t,this.enableScissor=!0,this.alphaMaskPool=[],this.maskDataPool=[],this.maskStack=[],this.alphaMaskIndex=0}return e.prototype.setMaskStack=function(t){this.maskStack=t,this.renderer.scissor.setMaskStack(t),this.renderer.stencil.setMaskStack(t)},e.prototype.push=function(t,r){var n=r;if(!n.isMaskData){var i=this.maskDataPool.pop()||new UQ;i.pooled=!0,i.maskObject=r,n=i}var o=this.maskStack.length!==0?this.maskStack[this.maskStack.length-1]:null;if(n.copyCountersOrReset(o),n.autoDetect&&this.detect(n),n._target=t,n.type!==Ln.SPRITE&&this.maskStack.push(n),n.enabled)switch(n.type){case Ln.SCISSOR:this.renderer.scissor.push(n);break;case Ln.STENCIL:this.renderer.stencil.push(n);break;case Ln.SPRITE:n.copyCountersOrReset(null),this.pushSpriteMask(n);break}n.type===Ln.SPRITE&&this.maskStack.push(n)},e.prototype.pop=function(t){var r=this.maskStack.pop();if(!(!r||r._target!==t)){if(r.enabled)switch(r.type){case Ln.SCISSOR:this.renderer.scissor.pop();break;case Ln.STENCIL:this.renderer.stencil.pop(r.maskObject);break;case Ln.SPRITE:this.popSpriteMask(r);break}if(r.reset(),r.pooled&&this.maskDataPool.push(r),this.maskStack.length!==0){var n=this.maskStack[this.maskStack.length-1];n.type===Ln.SPRITE&&n._filters&&(n._filters[0].maskSprite=n.maskObject)}}},e.prototype.detect=function(t){var r=t.maskObject;r.isSprite?t.type=Ln.SPRITE:this.enableScissor&&this.renderer.scissor.testScissor(t)?t.type=Ln.SCISSOR:t.type=Ln.STENCIL},e.prototype.pushSpriteMask=function(t){var r,n,i=t.maskObject,o=t._target,s=t._filters;s||(s=this.alphaMaskPool[this.alphaMaskIndex],s||(s=this.alphaMaskPool[this.alphaMaskIndex]=[new eee]));var a=this.renderer,l=a.renderTexture,u,c;if(l.current){var f=l.current;u=t.resolution||f.resolution,c=(r=t.multisample)!==null&&r!==void 0?r:f.multisample}else u=t.resolution||a.resolution,c=(n=t.multisample)!==null&&n!==void 0?n:a.multisample;s[0].resolution=u,s[0].multisample=c,s[0].maskSprite=i;var p=o.filterArea;o.filterArea=i.getBounds(!0),a.filter.push(o,s),o.filterArea=p,t._filters||this.alphaMaskIndex++},e.prototype.popSpriteMask=function(t){this.renderer.filter.pop(),t._filters?t._filters[0].maskSprite=null:(this.alphaMaskIndex--,this.alphaMaskPool[this.alphaMaskIndex][0].maskSprite=null)},e.prototype.destroy=function(){this.renderer=null},e}(),zO=function(){function e(t){this.renderer=t,this.maskStack=[],this.glConst=0}return e.prototype.getStackLength=function(){return this.maskStack.length},e.prototype.setMaskStack=function(t){var r=this.renderer.gl,n=this.getStackLength();this.maskStack=t;var i=this.getStackLength();i!==n&&(i===0?r.disable(this.glConst):(r.enable(this.glConst),this._useCurrent()))},e.prototype._useCurrent=function(){},e.prototype.destroy=function(){this.renderer=null,this.maskStack=null},e}(),S6=new rr,ree=function(e){nr(t,e);function t(r){var n=e.call(this,r)||this;return n.glConst=WebGLRenderingContext.SCISSOR_TEST,n}return t.prototype.getStackLength=function(){var r=this.maskStack[this.maskStack.length-1];return r?r._scissorCounter:0},t.prototype.calcScissorRect=function(r){if(!r._scissorRectLocal){var n=r._scissorRect,i=r.maskObject,o=this.renderer,s=o.renderTexture;i.renderable=!0;var a=i.getBounds();this.roundFrameToPixels(a,s.current?s.current.resolution:o.resolution,s.sourceFrame,s.destinationFrame,o.projection.transform),i.renderable=!1,n&&a.fit(n),r._scissorRectLocal=a}},t.isMatrixRotated=function(r){if(!r)return!1;var n=r.a,i=r.b,o=r.c,s=r.d;return(Math.abs(i)>1e-4||Math.abs(o)>1e-4)&&(Math.abs(n)>1e-4||Math.abs(s)>1e-4)},t.prototype.testScissor=function(r){var n=r.maskObject;if(!n.isFastRect||!n.isFastRect()||t.isMatrixRotated(n.worldTransform)||t.isMatrixRotated(this.renderer.projection.transform))return!1;this.calcScissorRect(r);var i=r._scissorRectLocal;return i.width>0&&i.height>0},t.prototype.roundFrameToPixels=function(r,n,i,o,s){t.isMatrixRotated(s)||(s=s?S6.copyFrom(s):S6.identity(),s.translate(-i.x,-i.y).scale(o.width/i.width,o.height/i.height).translate(o.x,o.y),this.renderer.filter.transformAABB(s,r),r.fit(o),r.x=Math.round(r.x*n),r.y=Math.round(r.y*n),r.width=Math.round(r.width*n),r.height=Math.round(r.height*n))},t.prototype.push=function(r){r._scissorRectLocal||this.calcScissorRect(r);var n=this.renderer.gl;r._scissorRect||n.enable(n.SCISSOR_TEST),r._scissorCounter++,r._scissorRect=r._scissorRectLocal,this._useCurrent()},t.prototype.pop=function(){var r=this.renderer.gl;this.getStackLength()>0?this._useCurrent():r.disable(r.SCISSOR_TEST)},t.prototype._useCurrent=function(){var r=this.maskStack[this.maskStack.length-1]._scissorRect,n;this.renderer.renderTexture.current?n=r.y:n=this.renderer.height-r.height-r.y,this.renderer.gl.scissor(r.x,n,r.width,r.height)},t}(zO),nee=function(e){nr(t,e);function t(r){var n=e.call(this,r)||this;return n.glConst=WebGLRenderingContext.STENCIL_TEST,n}return t.prototype.getStackLength=function(){var r=this.maskStack[this.maskStack.length-1];return r?r._stencilCounter:0},t.prototype.push=function(r){var n=r.maskObject,i=this.renderer.gl,o=r._stencilCounter;o===0&&(this.renderer.framebuffer.forceStencil(),i.clearStencil(0),i.clear(i.STENCIL_BUFFER_BIT),i.enable(i.STENCIL_TEST)),r._stencilCounter++,i.colorMask(!1,!1,!1,!1),i.stencilFunc(i.EQUAL,o,4294967295),i.stencilOp(i.KEEP,i.KEEP,i.INCR),n.renderable=!0,n.render(this.renderer),this.renderer.batch.flush(),n.renderable=!1,this._useCurrent()},t.prototype.pop=function(r){var n=this.renderer.gl;this.getStackLength()===0?n.disable(n.STENCIL_TEST):(n.colorMask(!1,!1,!1,!1),n.stencilOp(n.KEEP,n.KEEP,n.DECR),r.renderable=!0,r.render(this.renderer),this.renderer.batch.flush(),r.renderable=!1,this._useCurrent())},t.prototype._useCurrent=function(){var r=this.renderer.gl;r.colorMask(!0,!0,!0,!0),r.stencilFunc(r.EQUAL,this.getStackLength(),4294967295),r.stencilOp(r.KEEP,r.KEEP,r.KEEP)},t}(zO),iee=function(){function e(t){this.renderer=t,this.destinationFrame=null,this.sourceFrame=null,this.defaultFrame=null,this.projectionMatrix=new rr,this.transform=null}return e.prototype.update=function(t,r,n,i){this.destinationFrame=t||this.destinationFrame||this.defaultFrame,this.sourceFrame=r||this.sourceFrame||t,this.calculateProjection(this.destinationFrame,this.sourceFrame,n,i),this.transform&&this.projectionMatrix.append(this.transform);var o=this.renderer;o.globalUniforms.uniforms.projectionMatrix=this.projectionMatrix,o.globalUniforms.update(),o.shader.shader&&o.shader.syncUniformGroup(o.shader.shader.uniforms.globals)},e.prototype.calculateProjection=function(t,r,n,i){var o=this.projectionMatrix,s=i?-1:1;o.identity(),o.a=1/r.width*2,o.d=s*(1/r.height*2),o.tx=-1-r.x*o.a,o.ty=-s-r.y*o.d},e.prototype.setTransform=function(t){},e.prototype.destroy=function(){this.renderer=null},e}(),Ul=new Me,Mf=new Me,oee=function(){function e(t){this.renderer=t,this.clearColor=t._backgroundColorRgba,this.defaultMaskStack=[],this.current=null,this.sourceFrame=new Me,this.destinationFrame=new Me,this.viewportFrame=new Me}return e.prototype.bind=function(t,r,n){t===void 0&&(t=null);var i=this.renderer;this.current=t;var o,s,a;t?(o=t.baseTexture,a=o.resolution,r||(Ul.width=t.frame.width,Ul.height=t.frame.height,r=Ul),n||(Mf.x=t.frame.x,Mf.y=t.frame.y,Mf.width=r.width,Mf.height=r.height,n=Mf),s=o.framebuffer):(a=i.resolution,r||(Ul.width=i.screen.width,Ul.height=i.screen.height,r=Ul),n||(n=Ul,n.width=r.width,n.height=r.height));var l=this.viewportFrame;l.x=n.x*a,l.y=n.y*a,l.width=n.width*a,l.height=n.height*a,t||(l.y=i.view.height-(l.y+l.height)),l.ceil(),this.renderer.framebuffer.bind(s,l),this.renderer.projection.update(n,r,a,!s),t?this.renderer.mask.setMaskStack(o.maskStack):this.renderer.mask.setMaskStack(this.defaultMaskStack),this.sourceFrame.copyFrom(r),this.destinationFrame.copyFrom(n)},e.prototype.clear=function(t,r){this.current?t=t||this.current.baseTexture.clearColor:t=t||this.clearColor;var n=this.destinationFrame,i=this.current?this.current.baseTexture:this.renderer.screen,o=n.width!==i.width||n.height!==i.height;if(o){var s=this.viewportFrame,a=s.x,l=s.y,u=s.width,c=s.height;a=Math.round(a),l=Math.round(l),u=Math.round(u),c=Math.round(c),this.renderer.gl.enable(this.renderer.gl.SCISSOR_TEST),this.renderer.gl.scissor(a,l,u,c)}this.renderer.framebuffer.clear(t[0],t[1],t[2],t[3],r),o&&this.renderer.scissor.pop()},e.prototype.resize=function(){this.bind(null)},e.prototype.reset=function(){this.bind(null)},e.prototype.destroy=function(){this.renderer=null},e}();function see(e,t,r,n,i){r.buffer.update(i)}var aee={float:`
        data[offset] = v;
    `,vec2:`
        data[offset] = v[0];
        data[offset+1] = v[1];
    `,vec3:`
        data[offset] = v[0];
        data[offset+1] = v[1];
        data[offset+2] = v[2];

    `,vec4:`
        data[offset] = v[0];
        data[offset+1] = v[1];
        data[offset+2] = v[2];
        data[offset+3] = v[3];
    `,mat2:`
        data[offset] = v[0];
        data[offset+1] = v[1];

        data[offset+4] = v[2];
        data[offset+5] = v[3];
    `,mat3:`
        data[offset] = v[0];
        data[offset+1] = v[1];
        data[offset+2] = v[2];

        data[offset + 4] = v[3];
        data[offset + 5] = v[4];
        data[offset + 6] = v[5];

        data[offset + 8] = v[6];
        data[offset + 9] = v[7];
        data[offset + 10] = v[8];
    `,mat4:`
        for(var i = 0; i < 16; i++)
        {
            data[offset + i] = v[i];
        }
    `},VO={float:4,vec2:8,vec3:12,vec4:16,int:4,ivec2:8,ivec3:12,ivec4:16,uint:4,uvec2:8,uvec3:12,uvec4:16,bool:4,bvec2:8,bvec3:12,bvec4:16,mat2:16*2,mat3:16*3,mat4:16*4};function lee(e){for(var t=e.map(function(l){return{data:l,offset:0,dataLen:0,dirty:0}}),r=0,n=0,i=0,o=0;o<t.length;o++){var s=t[o];if(r=VO[s.data.type],s.data.size>1&&(r=Math.max(r,16)*s.data.size),s.dataLen=r,n%r!==0&&n<16){var a=n%r%16;n+=a,i+=a}n+r>16?(i=Math.ceil(i/16)*16,s.offset=i,i+=r,n=r):(s.offset=i,n+=r,i+=r)}return i=Math.ceil(i/16)*16,{uboElements:t,size:i}}function uee(e,t){var r=[];for(var n in e)t[n]&&r.push(t[n]);return r.sort(function(i,o){return i.index-o.index}),r}function cee(e,t){if(!e.autoManage)return{size:0,syncFunc:see};for(var r=uee(e.uniforms,t),n=lee(r),i=n.uboElements,o=n.size,s=[`
    var v = null;
    var v2 = null;
    var cv = null;
    var t = 0;
    var gl = renderer.gl
    var index = 0;
    var data = buffer.data;
    `],a=0;a<i.length;a++){for(var l=i[a],u=e.uniforms[l.data.name],c=l.data.name,f=!1,p=0;p<Jc.length;p++){var m=Jc[p];if(m.codeUbo&&m.test(l.data,u)){s.push("offset = "+l.offset/4+";",Jc[p].codeUbo(l.data.name,u)),f=!0;break}}if(!f)if(l.data.size>1){var g=$O(l.data.type),b=Math.max(VO[l.data.type]/16,1),y=g/b,w=(4-y%4)%4;s.push(`
                cv = ud.`+c+`.value;
                v = uv.`+c+`;
                offset = `+l.offset/4+`;

                t = 0;

                for(var i=0; i < `+l.data.size*b+`; i++)
                {
                    for(var j = 0; j < `+y+`; j++)
                    {
                        data[offset++] = v[t++];
                    }
                    offset += `+w+`;
                }

                `)}else{var x=aee[l.data.type];s.push(`
                cv = ud.`+c+`.value;
                v = uv.`+c+`;
                offset = `+l.offset/4+`;
                `+x+`;
                `)}}return s.push(`
       renderer.buffer.update(buffer);
    `),{size:o,syncFunc:new Function("ud","uv","renderer","syncData","buffer",s.join(`
`))}}var hee=function(){function e(t,r){this.program=t,this.uniformData=r,this.uniformGroups={},this.uniformDirtyGroups={},this.uniformBufferBindings={}}return e.prototype.destroy=function(){this.uniformData=null,this.uniformGroups=null,this.uniformDirtyGroups=null,this.uniformBufferBindings=null,this.program=null},e}();function fee(e,t){for(var r={},n=t.getProgramParameter(e,t.ACTIVE_ATTRIBUTES),i=0;i<n;i++){var o=t.getActiveAttrib(e,i);if(o.name.indexOf("gl_")!==0){var s=HO(t,o.type),a={type:s,name:o.name,size:$O(s),location:t.getAttribLocation(e,o.name)};r[o.name]=a}}return r}function dee(e,t){for(var r={},n=t.getProgramParameter(e,t.ACTIVE_UNIFORMS),i=0;i<n;i++){var o=t.getActiveUniform(e,i),s=o.name.replace(/\[.*?\]$/,""),a=!!o.name.match(/\[.*?\]$/),l=HO(t,o.type);r[s]={name:s,index:i,type:l,size:o.size,isArray:a,value:GO(l,o.size)}}return r}function pee(e,t){var r=_6(e,e.VERTEX_SHADER,t.vertexSrc),n=_6(e,e.FRAGMENT_SHADER,t.fragmentSrc),i=e.createProgram();if(e.attachShader(i,r),e.attachShader(i,n),e.linkProgram(i),e.getProgramParameter(i,e.LINK_STATUS)||FQ(e,i,r,n),t.attributeData=fee(i,e),t.uniformData=dee(i,e),!/^[ \t]*#[ \t]*version[ \t]+300[ \t]+es[ \t]*$/m.test(t.vertexSrc)){var o=Object.keys(t.attributeData);o.sort(function(c,f){return c>f?1:-1});for(var s=0;s<o.length;s++)t.attributeData[o[s]].location=s,e.bindAttribLocation(i,s,o[s]);e.linkProgram(i)}e.deleteShader(r),e.deleteShader(n);var a={};for(var s in t.uniformData){var l=t.uniformData[s];a[s]={location:e.getUniformLocation(i,s),value:GO(l.type,l.size)}}var u=new hee(i,a);return u}var mee=0,Pv={textureCount:0,uboCount:0},vee=function(){function e(t){this.destroyed=!1,this.renderer=t,this.systemCheck(),this.gl=null,this.shader=null,this.program=null,this.cache={},this._uboCache={},this.id=mee++}return e.prototype.systemCheck=function(){if(!XQ())throw new Error("Current environment does not allow unsafe-eval, please use @pixi/unsafe-eval module to enable support.")},e.prototype.contextChange=function(t){this.gl=t,this.reset()},e.prototype.bind=function(t,r){t.uniforms.globals=this.renderer.globalUniforms;var n=t.program,i=n.glPrograms[this.renderer.CONTEXT_UID]||this.generateProgram(t);return this.shader=t,this.program!==n&&(this.program=n,this.gl.useProgram(i.program)),r||(Pv.textureCount=0,Pv.uboCount=0,this.syncUniformGroup(t.uniformGroup,Pv)),i},e.prototype.setUniforms=function(t){var r=this.shader.program,n=r.glPrograms[this.renderer.CONTEXT_UID];r.syncUniforms(n.uniformData,t,this.renderer)},e.prototype.syncUniformGroup=function(t,r){var n=this.getGlProgram();(!t.static||t.dirtyId!==n.uniformDirtyGroups[t.id])&&(n.uniformDirtyGroups[t.id]=t.dirtyId,this.syncUniforms(t,n,r))},e.prototype.syncUniforms=function(t,r,n){var i=t.syncUniforms[this.shader.program.id]||this.createSyncGroups(t);i(r.uniformData,t.uniforms,this.renderer,n)},e.prototype.createSyncGroups=function(t){var r=this.getSignature(t,this.shader.program.uniformData,"u");return this.cache[r]||(this.cache[r]=$Q(t,this.shader.program.uniformData)),t.syncUniforms[this.shader.program.id]=this.cache[r],t.syncUniforms[this.shader.program.id]},e.prototype.syncUniformBufferGroup=function(t,r){var n=this.getGlProgram();if(!t.static||t.dirtyId!==0||!n.uniformGroups[t.id]){t.dirtyId=0;var i=n.uniformGroups[t.id]||this.createSyncBufferGroup(t,n,r);t.buffer.update(),i(n.uniformData,t.uniforms,this.renderer,Pv,t.buffer)}this.renderer.buffer.bindBufferBase(t.buffer,n.uniformBufferBindings[r])},e.prototype.createSyncBufferGroup=function(t,r,n){var i=this.renderer.gl;this.renderer.buffer.bind(t.buffer);var o=this.gl.getUniformBlockIndex(r.program,n);r.uniformBufferBindings[n]=this.shader.uniformBindCount,i.uniformBlockBinding(r.program,o,this.shader.uniformBindCount),this.shader.uniformBindCount++;var s=this.getSignature(t,this.shader.program.uniformData,"ubo"),a=this._uboCache[s];if(a||(a=this._uboCache[s]=cee(t,this.shader.program.uniformData)),t.autoManage){var l=new Float32Array(a.size/4);t.buffer.update(l)}return r.uniformGroups[t.id]=a.syncFunc,r.uniformGroups[t.id]},e.prototype.getSignature=function(t,r,n){var i=t.uniforms,o=[n+"-"];for(var s in i)o.push(s),r[s]&&o.push(r[s].type);return o.join("-")},e.prototype.getGlProgram=function(){return this.shader?this.shader.program.glPrograms[this.renderer.CONTEXT_UID]:null},e.prototype.generateProgram=function(t){var r=this.gl,n=t.program,i=pee(r,n);return n.glPrograms[this.renderer.CONTEXT_UID]=i,i},e.prototype.reset=function(){this.program=null,this.shader=null},e.prototype.destroy=function(){this.renderer=null,this.destroyed=!0},e}();function gee(e,t){return t===void 0&&(t=[]),t[Ze.NORMAL]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[Ze.ADD]=[e.ONE,e.ONE],t[Ze.MULTIPLY]=[e.DST_COLOR,e.ONE_MINUS_SRC_ALPHA,e.ONE,e.ONE_MINUS_SRC_ALPHA],t[Ze.SCREEN]=[e.ONE,e.ONE_MINUS_SRC_COLOR,e.ONE,e.ONE_MINUS_SRC_ALPHA],t[Ze.OVERLAY]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[Ze.DARKEN]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[Ze.LIGHTEN]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[Ze.COLOR_DODGE]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[Ze.COLOR_BURN]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[Ze.HARD_LIGHT]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[Ze.SOFT_LIGHT]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[Ze.DIFFERENCE]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[Ze.EXCLUSION]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[Ze.HUE]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[Ze.SATURATION]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[Ze.COLOR]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[Ze.LUMINOSITY]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[Ze.NONE]=[0,0],t[Ze.NORMAL_NPM]=[e.SRC_ALPHA,e.ONE_MINUS_SRC_ALPHA,e.ONE,e.ONE_MINUS_SRC_ALPHA],t[Ze.ADD_NPM]=[e.SRC_ALPHA,e.ONE,e.ONE,e.ONE],t[Ze.SCREEN_NPM]=[e.SRC_ALPHA,e.ONE_MINUS_SRC_COLOR,e.ONE,e.ONE_MINUS_SRC_ALPHA],t[Ze.SRC_IN]=[e.DST_ALPHA,e.ZERO],t[Ze.SRC_OUT]=[e.ONE_MINUS_DST_ALPHA,e.ZERO],t[Ze.SRC_ATOP]=[e.DST_ALPHA,e.ONE_MINUS_SRC_ALPHA],t[Ze.DST_OVER]=[e.ONE_MINUS_DST_ALPHA,e.ONE],t[Ze.DST_IN]=[e.ZERO,e.SRC_ALPHA],t[Ze.DST_OUT]=[e.ZERO,e.ONE_MINUS_SRC_ALPHA],t[Ze.DST_ATOP]=[e.ONE_MINUS_DST_ALPHA,e.SRC_ALPHA],t[Ze.XOR]=[e.ONE_MINUS_DST_ALPHA,e.ONE_MINUS_SRC_ALPHA],t[Ze.SUBTRACT]=[e.ONE,e.ONE,e.ONE,e.ONE,e.FUNC_REVERSE_SUBTRACT,e.FUNC_ADD],t}var yee=0,_ee=1,bee=2,wee=3,xee=4,Tee=5,See=function(){function e(){this.gl=null,this.stateId=0,this.polygonOffset=0,this.blendMode=Ze.NONE,this._blendEq=!1,this.map=[],this.map[yee]=this.setBlend,this.map[_ee]=this.setOffset,this.map[bee]=this.setCullFace,this.map[wee]=this.setDepthTest,this.map[xee]=this.setFrontFace,this.map[Tee]=this.setDepthMask,this.checks=[],this.defaultState=new yl,this.defaultState.blend=!0}return e.prototype.contextChange=function(t){this.gl=t,this.blendModes=gee(t),this.set(this.defaultState),this.reset()},e.prototype.set=function(t){if(t=t||this.defaultState,this.stateId!==t.data){for(var r=this.stateId^t.data,n=0;r;)r&1&&this.map[n].call(this,!!(t.data&1<<n)),r=r>>1,n++;this.stateId=t.data}for(var n=0;n<this.checks.length;n++)this.checks[n](this,t)},e.prototype.forceState=function(t){t=t||this.defaultState;for(var r=0;r<this.map.length;r++)this.map[r].call(this,!!(t.data&1<<r));for(var r=0;r<this.checks.length;r++)this.checks[r](this,t);this.stateId=t.data},e.prototype.setBlend=function(t){this.updateCheck(e.checkBlendMode,t),this.gl[t?"enable":"disable"](this.gl.BLEND)},e.prototype.setOffset=function(t){this.updateCheck(e.checkPolygonOffset,t),this.gl[t?"enable":"disable"](this.gl.POLYGON_OFFSET_FILL)},e.prototype.setDepthTest=function(t){this.gl[t?"enable":"disable"](this.gl.DEPTH_TEST)},e.prototype.setDepthMask=function(t){this.gl.depthMask(t)},e.prototype.setCullFace=function(t){this.gl[t?"enable":"disable"](this.gl.CULL_FACE)},e.prototype.setFrontFace=function(t){this.gl.frontFace(this.gl[t?"CW":"CCW"])},e.prototype.setBlendMode=function(t){if(t!==this.blendMode){this.blendMode=t;var r=this.blendModes[t],n=this.gl;r.length===2?n.blendFunc(r[0],r[1]):n.blendFuncSeparate(r[0],r[1],r[2],r[3]),r.length===6?(this._blendEq=!0,n.blendEquationSeparate(r[4],r[5])):this._blendEq&&(this._blendEq=!1,n.blendEquationSeparate(n.FUNC_ADD,n.FUNC_ADD))}},e.prototype.setPolygonOffset=function(t,r){this.gl.polygonOffset(t,r)},e.prototype.reset=function(){this.gl.pixelStorei(this.gl.UNPACK_FLIP_Y_WEBGL,!1),this.forceState(this.defaultState),this._blendEq=!0,this.blendMode=-1,this.setBlendMode(0)},e.prototype.updateCheck=function(t,r){var n=this.checks.indexOf(t);r&&n===-1?this.checks.push(t):!r&&n!==-1&&this.checks.splice(n,1)},e.checkBlendMode=function(t,r){t.setBlendMode(r.blendMode)},e.checkPolygonOffset=function(t,r){t.setPolygonOffset(1,r.polygonOffset)},e.prototype.destroy=function(){this.gl=null},e}(),Eee=function(){function e(t){this.renderer=t,this.count=0,this.checkCount=0,this.maxIdle=We.GC_MAX_IDLE,this.checkCountMax=We.GC_MAX_CHECK_COUNT,this.mode=We.GC_MODE}return e.prototype.postrender=function(){!this.renderer.renderingToScreen||(this.count++,this.mode!==Rw.MANUAL&&(this.checkCount++,this.checkCount>this.checkCountMax&&(this.checkCount=0,this.run())))},e.prototype.run=function(){for(var t=this.renderer.texture,r=t.managedTextures,n=!1,i=0;i<r.length;i++){var o=r[i];!o.framebuffer&&this.count-o.touched>this.maxIdle&&(t.destroyTexture(o,!0),r[i]=null,n=!0)}if(n){for(var s=0,i=0;i<r.length;i++)r[i]!==null&&(r[s++]=r[i]);r.length=s}},e.prototype.unload=function(t){var r=this.renderer.texture,n=t._texture;n&&!n.framebuffer&&r.destroyTexture(n);for(var i=t.children.length-1;i>=0;i--)this.unload(t.children[i])},e.prototype.destroy=function(){this.renderer=null},e}();function Cee(e){var t,r,n,i,o,s,a,l,u,c,f,p,m,g,b,y,w,x,T,I,R,S,O;return"WebGL2RenderingContext"in globalThis&&e instanceof globalThis.WebGL2RenderingContext?O=(t={},t[$e.UNSIGNED_BYTE]=(r={},r[Te.RGBA]=e.RGBA8,r[Te.RGB]=e.RGB8,r[Te.RG]=e.RG8,r[Te.RED]=e.R8,r[Te.RGBA_INTEGER]=e.RGBA8UI,r[Te.RGB_INTEGER]=e.RGB8UI,r[Te.RG_INTEGER]=e.RG8UI,r[Te.RED_INTEGER]=e.R8UI,r[Te.ALPHA]=e.ALPHA,r[Te.LUMINANCE]=e.LUMINANCE,r[Te.LUMINANCE_ALPHA]=e.LUMINANCE_ALPHA,r),t[$e.BYTE]=(n={},n[Te.RGBA]=e.RGBA8_SNORM,n[Te.RGB]=e.RGB8_SNORM,n[Te.RG]=e.RG8_SNORM,n[Te.RED]=e.R8_SNORM,n[Te.RGBA_INTEGER]=e.RGBA8I,n[Te.RGB_INTEGER]=e.RGB8I,n[Te.RG_INTEGER]=e.RG8I,n[Te.RED_INTEGER]=e.R8I,n),t[$e.UNSIGNED_SHORT]=(i={},i[Te.RGBA_INTEGER]=e.RGBA16UI,i[Te.RGB_INTEGER]=e.RGB16UI,i[Te.RG_INTEGER]=e.RG16UI,i[Te.RED_INTEGER]=e.R16UI,i[Te.DEPTH_COMPONENT]=e.DEPTH_COMPONENT16,i),t[$e.SHORT]=(o={},o[Te.RGBA_INTEGER]=e.RGBA16I,o[Te.RGB_INTEGER]=e.RGB16I,o[Te.RG_INTEGER]=e.RG16I,o[Te.RED_INTEGER]=e.R16I,o),t[$e.UNSIGNED_INT]=(s={},s[Te.RGBA_INTEGER]=e.RGBA32UI,s[Te.RGB_INTEGER]=e.RGB32UI,s[Te.RG_INTEGER]=e.RG32UI,s[Te.RED_INTEGER]=e.R32UI,s[Te.DEPTH_COMPONENT]=e.DEPTH_COMPONENT24,s),t[$e.INT]=(a={},a[Te.RGBA_INTEGER]=e.RGBA32I,a[Te.RGB_INTEGER]=e.RGB32I,a[Te.RG_INTEGER]=e.RG32I,a[Te.RED_INTEGER]=e.R32I,a),t[$e.FLOAT]=(l={},l[Te.RGBA]=e.RGBA32F,l[Te.RGB]=e.RGB32F,l[Te.RG]=e.RG32F,l[Te.RED]=e.R32F,l[Te.DEPTH_COMPONENT]=e.DEPTH_COMPONENT32F,l),t[$e.HALF_FLOAT]=(u={},u[Te.RGBA]=e.RGBA16F,u[Te.RGB]=e.RGB16F,u[Te.RG]=e.RG16F,u[Te.RED]=e.R16F,u),t[$e.UNSIGNED_SHORT_5_6_5]=(c={},c[Te.RGB]=e.RGB565,c),t[$e.UNSIGNED_SHORT_4_4_4_4]=(f={},f[Te.RGBA]=e.RGBA4,f),t[$e.UNSIGNED_SHORT_5_5_5_1]=(p={},p[Te.RGBA]=e.RGB5_A1,p),t[$e.UNSIGNED_INT_2_10_10_10_REV]=(m={},m[Te.RGBA]=e.RGB10_A2,m[Te.RGBA_INTEGER]=e.RGB10_A2UI,m),t[$e.UNSIGNED_INT_10F_11F_11F_REV]=(g={},g[Te.RGB]=e.R11F_G11F_B10F,g),t[$e.UNSIGNED_INT_5_9_9_9_REV]=(b={},b[Te.RGB]=e.RGB9_E5,b),t[$e.UNSIGNED_INT_24_8]=(y={},y[Te.DEPTH_STENCIL]=e.DEPTH24_STENCIL8,y),t[$e.FLOAT_32_UNSIGNED_INT_24_8_REV]=(w={},w[Te.DEPTH_STENCIL]=e.DEPTH32F_STENCIL8,w),t):O=(x={},x[$e.UNSIGNED_BYTE]=(T={},T[Te.RGBA]=e.RGBA,T[Te.RGB]=e.RGB,T[Te.ALPHA]=e.ALPHA,T[Te.LUMINANCE]=e.LUMINANCE,T[Te.LUMINANCE_ALPHA]=e.LUMINANCE_ALPHA,T),x[$e.UNSIGNED_SHORT_5_6_5]=(I={},I[Te.RGB]=e.RGB,I),x[$e.UNSIGNED_SHORT_4_4_4_4]=(R={},R[Te.RGBA]=e.RGBA,R),x[$e.UNSIGNED_SHORT_5_5_5_1]=(S={},S[Te.RGBA]=e.RGBA,S),x),O}var g_=function(){function e(t){this.texture=t,this.width=-1,this.height=-1,this.dirtyId=-1,this.dirtyStyleId=-1,this.mipmap=!1,this.wrapMode=33071,this.type=$e.UNSIGNED_BYTE,this.internalFormat=Te.RGBA,this.samplerType=0}return e}(),Iee=function(){function e(t){this.renderer=t,this.boundTextures=[],this.currentLocation=-1,this.managedTextures=[],this._unknownBoundTextures=!1,this.unknownTexture=new xt,this.hasIntegerTextures=!1}return e.prototype.contextChange=function(){var t=this.gl=this.renderer.gl;this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.webGLVersion=this.renderer.context.webGLVersion,this.internalFormats=Cee(t);var r=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS);this.boundTextures.length=r;for(var n=0;n<r;n++)this.boundTextures[n]=null;this.emptyTextures={};var i=new g_(t.createTexture());t.bindTexture(t.TEXTURE_2D,i.texture),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,1,1,0,t.RGBA,t.UNSIGNED_BYTE,new Uint8Array(4)),this.emptyTextures[t.TEXTURE_2D]=i,this.emptyTextures[t.TEXTURE_CUBE_MAP]=new g_(t.createTexture()),t.bindTexture(t.TEXTURE_CUBE_MAP,this.emptyTextures[t.TEXTURE_CUBE_MAP].texture);for(var n=0;n<6;n++)t.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+n,0,t.RGBA,1,1,0,t.RGBA,t.UNSIGNED_BYTE,null);t.texParameteri(t.TEXTURE_CUBE_MAP,t.TEXTURE_MAG_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_CUBE_MAP,t.TEXTURE_MIN_FILTER,t.LINEAR);for(var n=0;n<this.boundTextures.length;n++)this.bind(null,n)},e.prototype.bind=function(t,r){r===void 0&&(r=0);var n=this.gl;if(t=t==null?void 0:t.castToBaseTexture(),t&&t.valid&&!t.parentTextureArray){t.touched=this.renderer.textureGC.count;var i=t._glTextures[this.CONTEXT_UID]||this.initTexture(t);this.boundTextures[r]!==t&&(this.currentLocation!==r&&(this.currentLocation=r,n.activeTexture(n.TEXTURE0+r)),n.bindTexture(t.target,i.texture)),i.dirtyId!==t.dirtyId&&(this.currentLocation!==r&&(this.currentLocation=r,n.activeTexture(n.TEXTURE0+r)),this.updateTexture(t)),this.boundTextures[r]=t}else this.currentLocation!==r&&(this.currentLocation=r,n.activeTexture(n.TEXTURE0+r)),n.bindTexture(n.TEXTURE_2D,this.emptyTextures[n.TEXTURE_2D].texture),this.boundTextures[r]=null},e.prototype.reset=function(){this._unknownBoundTextures=!0,this.hasIntegerTextures=!1,this.currentLocation=-1;for(var t=0;t<this.boundTextures.length;t++)this.boundTextures[t]=this.unknownTexture},e.prototype.unbind=function(t){var r=this,n=r.gl,i=r.boundTextures;if(this._unknownBoundTextures){this._unknownBoundTextures=!1;for(var o=0;o<i.length;o++)i[o]===this.unknownTexture&&this.bind(null,o)}for(var o=0;o<i.length;o++)i[o]===t&&(this.currentLocation!==o&&(n.activeTexture(n.TEXTURE0+o),this.currentLocation=o),n.bindTexture(t.target,this.emptyTextures[t.target].texture),i[o]=null)},e.prototype.ensureSamplerType=function(t){var r=this,n=r.boundTextures,i=r.hasIntegerTextures,o=r.CONTEXT_UID;if(!!i)for(var s=t-1;s>=0;--s){var a=n[s];if(a){var l=a._glTextures[o];l.samplerType!==Ng.FLOAT&&this.renderer.texture.unbind(a)}}},e.prototype.initTexture=function(t){var r=new g_(this.gl.createTexture());return r.dirtyId=-1,t._glTextures[this.CONTEXT_UID]=r,this.managedTextures.push(t),t.on("dispose",this.destroyTexture,this),r},e.prototype.initTextureType=function(t,r){var n,i;r.internalFormat=(i=(n=this.internalFormats[t.type])===null||n===void 0?void 0:n[t.format])!==null&&i!==void 0?i:t.format,this.webGLVersion===2&&t.type===$e.HALF_FLOAT?r.type=this.gl.HALF_FLOAT:r.type=t.type},e.prototype.updateTexture=function(t){var r=t._glTextures[this.CONTEXT_UID];if(!!r){var n=this.renderer;if(this.initTextureType(t,r),t.resource&&t.resource.upload(n,t,r))r.samplerType!==Ng.FLOAT&&(this.hasIntegerTextures=!0);else{var i=t.realWidth,o=t.realHeight,s=n.gl;(r.width!==i||r.height!==o||r.dirtyId<0)&&(r.width=i,r.height=o,s.texImage2D(t.target,0,r.internalFormat,i,o,0,t.format,r.type,null))}t.dirtyStyleId!==r.dirtyStyleId&&this.updateTextureStyle(t),r.dirtyId=t.dirtyId}},e.prototype.destroyTexture=function(t,r){var n=this.gl;if(t=t.castToBaseTexture(),t._glTextures[this.CONTEXT_UID]&&(this.unbind(t),n.deleteTexture(t._glTextures[this.CONTEXT_UID].texture),t.off("dispose",this.destroyTexture,this),delete t._glTextures[this.CONTEXT_UID],!r)){var i=this.managedTextures.indexOf(t);i!==-1&&Xs(this.managedTextures,i,1)}},e.prototype.updateTextureStyle=function(t){var r=t._glTextures[this.CONTEXT_UID];!r||((t.mipmap===Js.POW2||this.webGLVersion!==2)&&!t.isPowerOfTwo?r.mipmap=!1:r.mipmap=t.mipmap>=1,this.webGLVersion!==2&&!t.isPowerOfTwo?r.wrapMode=ts.CLAMP:r.wrapMode=t.wrapMode,t.resource&&t.resource.style(this.renderer,t,r)||this.setStyle(t,r),r.dirtyStyleId=t.dirtyStyleId)},e.prototype.setStyle=function(t,r){var n=this.gl;if(r.mipmap&&t.mipmap!==Js.ON_MANUAL&&n.generateMipmap(t.target),n.texParameteri(t.target,n.TEXTURE_WRAP_S,r.wrapMode),n.texParameteri(t.target,n.TEXTURE_WRAP_T,r.wrapMode),r.mipmap){n.texParameteri(t.target,n.TEXTURE_MIN_FILTER,t.scaleMode===St.LINEAR?n.LINEAR_MIPMAP_LINEAR:n.NEAREST_MIPMAP_NEAREST);var i=this.renderer.context.extensions.anisotropicFiltering;if(i&&t.anisotropicLevel>0&&t.scaleMode===St.LINEAR){var o=Math.min(t.anisotropicLevel,n.getParameter(i.MAX_TEXTURE_MAX_ANISOTROPY_EXT));n.texParameterf(t.target,i.TEXTURE_MAX_ANISOTROPY_EXT,o)}}else n.texParameteri(t.target,n.TEXTURE_MIN_FILTER,t.scaleMode===St.LINEAR?n.LINEAR:n.NEAREST);n.texParameteri(t.target,n.TEXTURE_MAG_FILTER,t.scaleMode===St.LINEAR?n.LINEAR:n.NEAREST)},e.prototype.destroy=function(){this.renderer=null},e}(),y_=new rr,Nee=function(e){nr(t,e);function t(r,n){r===void 0&&(r=Qd.UNKNOWN);var i=e.call(this)||this;return n=Object.assign({},We.RENDER_OPTIONS,n),i.options=n,i.type=r,i.screen=new Me(0,0,n.width,n.height),i.view=n.view||document.createElement("canvas"),i.resolution=n.resolution||We.RESOLUTION,i.useContextAlpha=n.useContextAlpha,i.autoDensity=!!n.autoDensity,i.preserveDrawingBuffer=n.preserveDrawingBuffer,i.clearBeforeRender=n.clearBeforeRender,i._backgroundColor=0,i._backgroundColorRgba=[0,0,0,1],i._backgroundColorString="#000000",i.backgroundColor=n.backgroundColor||i._backgroundColor,i.backgroundAlpha=n.backgroundAlpha,n.transparent!==void 0&&(ep("6.0.0","Option transparent is deprecated, please use backgroundAlpha instead."),i.useContextAlpha=n.transparent,i.backgroundAlpha=n.transparent?0:1),i._lastObjectRendered=null,i.plugins={},i}return t.prototype.initPlugins=function(r){for(var n in r)this.plugins[n]=new r[n](this)},Object.defineProperty(t.prototype,"width",{get:function(){return this.view.width},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this.view.height},enumerable:!1,configurable:!0}),t.prototype.resize=function(r,n){this.view.width=Math.round(r*this.resolution),this.view.height=Math.round(n*this.resolution);var i=this.view.width/this.resolution,o=this.view.height/this.resolution;this.screen.width=i,this.screen.height=o,this.autoDensity&&(this.view.style.width=i+"px",this.view.style.height=o+"px"),this.emit("resize",i,o)},t.prototype.generateTexture=function(r,n,i,o){n===void 0&&(n={}),typeof n=="number"&&(ep("6.1.0","generateTexture options (scaleMode, resolution, region) are now object options."),n={scaleMode:n,resolution:i,region:o});var s=n.region,a=hQ(n,["region"]);o=s||r.getLocalBounds(null,!0),o.width===0&&(o.width=1),o.height===0&&(o.height=1);var l=_u.create(Bw({width:o.width,height:o.height},a));return y_.tx=-o.x,y_.ty=-o.y,this.render(r,{renderTexture:l,clear:!1,transform:y_,skipUpdateTransform:!!r.parent}),l},t.prototype.destroy=function(r){for(var n in this.plugins)this.plugins[n].destroy(),this.plugins[n]=null;r&&this.view.parentNode&&this.view.parentNode.removeChild(this.view);var i=this;i.plugins=null,i.type=Qd.UNKNOWN,i.view=null,i.screen=null,i._tempDisplayObjectParent=null,i.options=null,this._backgroundColorRgba=null,this._backgroundColorString=null,this._lastObjectRendered=null},Object.defineProperty(t.prototype,"backgroundColor",{get:function(){return this._backgroundColor},set:function(r){this._backgroundColor=r,this._backgroundColorString=bO(r),al(r,this._backgroundColorRgba)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"backgroundAlpha",{get:function(){return this._backgroundColorRgba[3]},set:function(r){this._backgroundColorRgba[3]=r},enumerable:!1,configurable:!0}),t}(Oh),Pee=function(){function e(t){this.buffer=t||null,this.updateID=-1,this.byteLength=-1,this.refCount=0}return e}(),Aee=function(){function e(t){this.renderer=t,this.managedBuffers={},this.boundBufferBases={}}return e.prototype.destroy=function(){this.renderer=null},e.prototype.contextChange=function(){this.disposeAll(!0),this.gl=this.renderer.gl,this.CONTEXT_UID=this.renderer.CONTEXT_UID},e.prototype.bind=function(t){var r=this,n=r.gl,i=r.CONTEXT_UID,o=t._glBuffers[i]||this.createGLBuffer(t);n.bindBuffer(t.type,o.buffer)},e.prototype.bindBufferBase=function(t,r){var n=this,i=n.gl,o=n.CONTEXT_UID;if(this.boundBufferBases[r]!==t){var s=t._glBuffers[o]||this.createGLBuffer(t);this.boundBufferBases[r]=t,i.bindBufferBase(i.UNIFORM_BUFFER,r,s.buffer)}},e.prototype.bindBufferRange=function(t,r,n){var i=this,o=i.gl,s=i.CONTEXT_UID;n=n||0;var a=t._glBuffers[s]||this.createGLBuffer(t);o.bindBufferRange(o.UNIFORM_BUFFER,r||0,a.buffer,n*256,256)},e.prototype.update=function(t){var r=this,n=r.gl,i=r.CONTEXT_UID,o=t._glBuffers[i];if(t._updateID!==o.updateID)if(o.updateID=t._updateID,n.bindBuffer(t.type,o.buffer),o.byteLength>=t.data.byteLength)n.bufferSubData(t.type,0,t.data);else{var s=t.static?n.STATIC_DRAW:n.DYNAMIC_DRAW;o.byteLength=t.data.byteLength,n.bufferData(t.type,t.data,s)}},e.prototype.dispose=function(t,r){if(!!this.managedBuffers[t.id]){delete this.managedBuffers[t.id];var n=t._glBuffers[this.CONTEXT_UID],i=this.gl;t.disposeRunner.remove(this),n&&(r||i.deleteBuffer(n.buffer),delete t._glBuffers[this.CONTEXT_UID])}},e.prototype.disposeAll=function(t){for(var r=Object.keys(this.managedBuffers),n=0;n<r.length;n++)this.dispose(this.managedBuffers[r[n]],t)},e.prototype.createGLBuffer=function(t){var r=this,n=r.CONTEXT_UID,i=r.gl;return t._glBuffers[n]=new Pee(i.createBuffer()),this.managedBuffers[t.id]=t,t.disposeRunner.add(this),t._glBuffers[n]},e}(),bl=function(e){nr(t,e);function t(r){var n=e.call(this,Qd.WEBGL,r)||this;return r=n.options,n.gl=null,n.CONTEXT_UID=0,n.runners={destroy:new Mn("destroy"),contextChange:new Mn("contextChange"),reset:new Mn("reset"),update:new Mn("update"),postrender:new Mn("postrender"),prerender:new Mn("prerender"),resize:new Mn("resize")},n.runners.contextChange.add(n),n.globalUniforms=new iu({projectionMatrix:new rr},!0),n.addSystem(tee,"mask").addSystem(AQ,"context").addSystem(See,"state").addSystem(vee,"shader").addSystem(Iee,"texture").addSystem(Aee,"buffer").addSystem(LQ,"geometry").addSystem(OQ,"framebuffer").addSystem(ree,"scissor").addSystem(nee,"stencil").addSystem(iee,"projection").addSystem(Eee,"textureGC").addSystem(NQ,"filter").addSystem(oee,"renderTexture").addSystem(PQ,"batch"),n.initPlugins(t.__plugins),n.multisample=void 0,r.context?n.context.initFromContext(r.context):n.context.initFromOptions({alpha:!!n.useContextAlpha,antialias:r.antialias,premultipliedAlpha:n.useContextAlpha&&n.useContextAlpha!=="notMultiplied",stencil:!0,preserveDrawingBuffer:r.preserveDrawingBuffer,powerPreference:n.options.powerPreference}),n.renderingToScreen=!0,eq(n.context.webGLVersion===2?"WebGL 2":"WebGL 1"),n.resize(n.options.width,n.options.height),n}return t.create=function(r){if(tq())return new t(r);throw new Error('WebGL unsupported in this browser, use "pixi.js-legacy" for fallback canvas2d support.')},t.prototype.contextChange=function(){var r=this.gl,n;if(this.context.webGLVersion===1){var i=r.getParameter(r.FRAMEBUFFER_BINDING);r.bindFramebuffer(r.FRAMEBUFFER,null),n=r.getParameter(r.SAMPLES),r.bindFramebuffer(r.FRAMEBUFFER,i)}else{var i=r.getParameter(r.DRAW_FRAMEBUFFER_BINDING);r.bindFramebuffer(r.DRAW_FRAMEBUFFER,null),n=r.getParameter(r.SAMPLES),r.bindFramebuffer(r.DRAW_FRAMEBUFFER,i)}n>=Ur.HIGH?this.multisample=Ur.HIGH:n>=Ur.MEDIUM?this.multisample=Ur.MEDIUM:n>=Ur.LOW?this.multisample=Ur.LOW:this.multisample=Ur.NONE},t.prototype.addSystem=function(r,n){var i=new r(this);if(this[n])throw new Error('Whoops! The name "'+n+'" is already in use');this[n]=i;for(var o in this.runners)this.runners[o].add(i);return this},t.prototype.render=function(r,n){var i,o,s,a;if(n&&(n instanceof _u?(ep("6.0.0","Renderer#render arguments changed, use options instead."),i=n,o=arguments[2],s=arguments[3],a=arguments[4]):(i=n.renderTexture,o=n.clear,s=n.transform,a=n.skipUpdateTransform)),this.renderingToScreen=!i,this.runners.prerender.emit(),this.emit("prerender"),this.projection.transform=s,!this.context.isLost){if(i||(this._lastObjectRendered=r),!a){var l=r.enableTempParent();r.updateTransform(),r.disableTempParent(l)}this.renderTexture.bind(i),this.batch.currentRenderer.start(),(o!==void 0?o:this.clearBeforeRender)&&this.renderTexture.clear(),r.render(this),this.batch.currentRenderer.flush(),i&&i.baseTexture.update(),this.runners.postrender.emit(),this.projection.transform=null,this.emit("postrender")}},t.prototype.generateTexture=function(r,n,i,o){n===void 0&&(n={});var s=e.prototype.generateTexture.call(this,r,n,i,o);return this.framebuffer.blit(),s},t.prototype.resize=function(r,n){e.prototype.resize.call(this,r,n),this.runners.resize.emit(this.screen.height,this.screen.width)},t.prototype.reset=function(){return this.runners.reset.emit(),this},t.prototype.clear=function(){this.renderTexture.bind(),this.renderTexture.clear()},t.prototype.destroy=function(r){this.runners.destroy.emit();for(var n in this.runners)this.runners[n].destroy();e.prototype.destroy.call(this,r),this.gl=null},Object.defineProperty(t.prototype,"extract",{get:function(){return ep("6.0.0","Renderer#extract has been deprecated, please use Renderer#plugins.extract instead."),this.plugins.extract},enumerable:!1,configurable:!0}),t.registerPlugin=function(r,n){t.__plugins=t.__plugins||{},t.__plugins[r]=n},t}(Nee);function Ree(e){return bl.create(e)}var kee=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
    vTextureCoord = aTextureCoord;
}`,Oee=`attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

vec2 filterTextureCoord( void )
{
    return aVertexPosition * (outputFrame.zw * inputSize.zw);
}

void main(void)
{
    gl_Position = filterVertexPosition();
    vTextureCoord = filterTextureCoord();
}
`,Lee=kee,XO=Oee,Gw=function(){function e(){this.texArray=null,this.blend=0,this.type=Ni.TRIANGLES,this.start=0,this.size=0,this.data=null}return e}(),Rg=function(){function e(){this.elements=[],this.ids=[],this.count=0}return e.prototype.clear=function(){for(var t=0;t<this.count;t++)this.elements[t]=null;this.count=0},e}(),jw=function(){function e(t){typeof t=="number"?this.rawBinaryData=new ArrayBuffer(t):t instanceof Uint8Array?this.rawBinaryData=t.buffer:this.rawBinaryData=t,this.uint32View=new Uint32Array(this.rawBinaryData),this.float32View=new Float32Array(this.rawBinaryData)}return Object.defineProperty(e.prototype,"int8View",{get:function(){return this._int8View||(this._int8View=new Int8Array(this.rawBinaryData)),this._int8View},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"uint8View",{get:function(){return this._uint8View||(this._uint8View=new Uint8Array(this.rawBinaryData)),this._uint8View},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"int16View",{get:function(){return this._int16View||(this._int16View=new Int16Array(this.rawBinaryData)),this._int16View},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"uint16View",{get:function(){return this._uint16View||(this._uint16View=new Uint16Array(this.rawBinaryData)),this._uint16View},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"int32View",{get:function(){return this._int32View||(this._int32View=new Int32Array(this.rawBinaryData)),this._int32View},enumerable:!1,configurable:!0}),e.prototype.view=function(t){return this[t+"View"]},e.prototype.destroy=function(){this.rawBinaryData=null,this._int8View=null,this._uint8View=null,this._int16View=null,this._uint16View=null,this._int32View=null,this.uint32View=null,this.float32View=null},e.sizeOf=function(t){switch(t){case"int8":case"uint8":return 1;case"int16":case"uint16":return 2;case"int32":case"uint32":case"float32":return 4;default:throw new Error(t+" isn't a valid view type")}},e}(),Uee=function(e){nr(t,e);function t(r){var n=e.call(this,r)||this;return n.shaderGenerator=null,n.geometryClass=null,n.vertexSize=null,n.state=yl.for2d(),n.size=We.SPRITE_BATCH_SIZE*4,n._vertexCount=0,n._indexCount=0,n._bufferedElements=[],n._bufferedTextures=[],n._bufferSize=0,n._shader=null,n._packedGeometries=[],n._packedGeometryPoolSize=2,n._flushId=0,n._aBuffers={},n._iBuffers={},n.MAX_TEXTURES=1,n.renderer.on("prerender",n.onPrerender,n),r.runners.contextChange.add(n),n._dcIndex=0,n._aIndex=0,n._iIndex=0,n._attributeBuffer=null,n._indexBuffer=null,n._tempBoundTextures=[],n}return t.prototype.contextChange=function(){var r=this.renderer.gl;We.PREFER_ENV===Zs.WEBGL_LEGACY?this.MAX_TEXTURES=1:(this.MAX_TEXTURES=Math.min(r.getParameter(r.MAX_TEXTURE_IMAGE_UNITS),We.SPRITE_MAX_TEXTURES),this.MAX_TEXTURES=VQ(this.MAX_TEXTURES,r)),this._shader=this.shaderGenerator.generateShader(this.MAX_TEXTURES);for(var n=0;n<this._packedGeometryPoolSize;n++)this._packedGeometries[n]=new this.geometryClass;this.initFlushBuffers()},t.prototype.initFlushBuffers=function(){for(var r=t._drawCallPool,n=t._textureArrayPool,i=this.size/4,o=Math.floor(i/this.MAX_TEXTURES)+1;r.length<i;)r.push(new Gw);for(;n.length<o;)n.push(new Rg);for(var s=0;s<this.MAX_TEXTURES;s++)this._tempBoundTextures[s]=null},t.prototype.onPrerender=function(){this._flushId=0},t.prototype.render=function(r){!r._texture.valid||(this._vertexCount+r.vertexData.length/2>this.size&&this.flush(),this._vertexCount+=r.vertexData.length/2,this._indexCount+=r.indices.length,this._bufferedTextures[this._bufferSize]=r._texture.baseTexture,this._bufferedElements[this._bufferSize++]=r)},t.prototype.buildTexturesAndDrawCalls=function(){var r=this,n=r._bufferedTextures,i=r.MAX_TEXTURES,o=t._textureArrayPool,s=this.renderer.batch,a=this._tempBoundTextures,l=this.renderer.textureGC.count,u=++xt._globalBatch,c=0,f=o[0],p=0;s.copyBoundTextures(a,i);for(var m=0;m<this._bufferSize;++m){var g=n[m];n[m]=null,g._batchEnabled!==u&&(f.count>=i&&(s.boundArray(f,a,u,i),this.buildDrawCalls(f,p,m),p=m,f=o[++c],++u),g._batchEnabled=u,g.touched=l,f.elements[f.count++]=g)}f.count>0&&(s.boundArray(f,a,u,i),this.buildDrawCalls(f,p,this._bufferSize),++c,++u);for(var m=0;m<a.length;m++)a[m]=null;xt._globalBatch=u},t.prototype.buildDrawCalls=function(r,n,i){var o=this,s=o._bufferedElements,a=o._attributeBuffer,l=o._indexBuffer,u=o.vertexSize,c=t._drawCallPool,f=this._dcIndex,p=this._aIndex,m=this._iIndex,g=c[f];g.start=this._iIndex,g.texArray=r;for(var b=n;b<i;++b){var y=s[b],w=y._texture.baseTexture,x=xO[w.alphaMode?1:0][y.blendMode];s[b]=null,n<b&&g.blend!==x&&(g.size=m-g.start,n=b,g=c[++f],g.texArray=r,g.start=m),this.packInterleavedGeometry(y,a,l,p,m),p+=y.vertexData.length/2*u,m+=y.indices.length,g.blend=x}n<i&&(g.size=m-g.start,++f),this._dcIndex=f,this._aIndex=p,this._iIndex=m},t.prototype.bindAndClearTexArray=function(r){for(var n=this.renderer.texture,i=0;i<r.count;i++)n.bind(r.elements[i],r.ids[i]),r.elements[i]=null;r.count=0},t.prototype.updateGeometry=function(){var r=this,n=r._packedGeometries,i=r._attributeBuffer,o=r._indexBuffer;We.CAN_UPLOAD_SAME_BUFFER?(n[this._flushId]._buffer.update(i.rawBinaryData),n[this._flushId]._indexBuffer.update(o),this.renderer.geometry.updateBuffers()):(this._packedGeometryPoolSize<=this._flushId&&(this._packedGeometryPoolSize++,n[this._flushId]=new this.geometryClass),n[this._flushId]._buffer.update(i.rawBinaryData),n[this._flushId]._indexBuffer.update(o),this.renderer.geometry.bind(n[this._flushId]),this.renderer.geometry.updateBuffers(),this._flushId++)},t.prototype.drawBatches=function(){for(var r=this._dcIndex,n=this.renderer,i=n.gl,o=n.state,s=t._drawCallPool,a=null,l=0;l<r;l++){var u=s[l],c=u.texArray,f=u.type,p=u.size,m=u.start,g=u.blend;a!==c&&(a=c,this.bindAndClearTexArray(c)),this.state.blendMode=g,o.set(this.state),i.drawElements(f,p,i.UNSIGNED_SHORT,m*2)}},t.prototype.flush=function(){this._vertexCount!==0&&(this._attributeBuffer=this.getAttributeBuffer(this._vertexCount),this._indexBuffer=this.getIndexBuffer(this._indexCount),this._aIndex=0,this._iIndex=0,this._dcIndex=0,this.buildTexturesAndDrawCalls(),this.updateGeometry(),this.drawBatches(),this._bufferSize=0,this._vertexCount=0,this._indexCount=0)},t.prototype.start=function(){this.renderer.state.set(this.state),this.renderer.texture.ensureSamplerType(this.MAX_TEXTURES),this.renderer.shader.bind(this._shader),We.CAN_UPLOAD_SAME_BUFFER&&this.renderer.geometry.bind(this._packedGeometries[this._flushId])},t.prototype.stop=function(){this.flush()},t.prototype.destroy=function(){for(var r=0;r<this._packedGeometryPoolSize;r++)this._packedGeometries[r]&&this._packedGeometries[r].destroy();this.renderer.off("prerender",this.onPrerender,this),this._aBuffers=null,this._iBuffers=null,this._packedGeometries=null,this._attributeBuffer=null,this._indexBuffer=null,this._shader&&(this._shader.destroy(),this._shader=null),e.prototype.destroy.call(this)},t.prototype.getAttributeBuffer=function(r){var n=Pg(Math.ceil(r/8)),i=z5(n),o=n*8;this._aBuffers.length<=i&&(this._iBuffers.length=i+1);var s=this._aBuffers[o];return s||(this._aBuffers[o]=s=new jw(o*this.vertexSize*4)),s},t.prototype.getIndexBuffer=function(r){var n=Pg(Math.ceil(r/12)),i=z5(n),o=n*12;this._iBuffers.length<=i&&(this._iBuffers.length=i+1);var s=this._iBuffers[i];return s||(this._iBuffers[i]=s=new Uint16Array(o)),s},t.prototype.packInterleavedGeometry=function(r,n,i,o,s){for(var a=n.uint32View,l=n.float32View,u=o/this.vertexSize,c=r.uvs,f=r.indices,p=r.vertexData,m=r._texture.baseTexture._batchLocation,g=Math.min(r.worldAlpha,1),b=g<1&&r._texture.baseTexture.alphaMode?Zy(r._tintRGB,g):r._tintRGB+(g*255<<24),y=0;y<p.length;y+=2)l[o++]=p[y],l[o++]=p[y+1],l[o++]=c[y],l[o++]=c[y+1],a[o++]=b,l[o++]=m;for(var y=0;y<f.length;y++)i[s++]=u+f[y]},t._drawCallPool=[],t._textureArrayPool=[],t}(Jy),Fee=function(){function e(t,r){if(this.vertexSrc=t,this.fragTemplate=r,this.programCache={},this.defaultGroupCache={},r.indexOf("%count%")<0)throw new Error('Fragment template must contain "%count%".');if(r.indexOf("%forloop%")<0)throw new Error('Fragment template must contain "%forloop%".')}return e.prototype.generateShader=function(t){if(!this.programCache[t]){for(var r=new Int32Array(t),n=0;n<t;n++)r[n]=n;this.defaultGroupCache[t]=iu.from({uSamplers:r},!0);var i=this.fragTemplate;i=i.replace(/%count%/gi,""+t),i=i.replace(/%forloop%/gi,this.generateSampleSrc(t)),this.programCache[t]=new Fh(this.vertexSrc,i)}var o={tint:new Float32Array([1,1,1,1]),translationMatrix:new rr,default:this.defaultGroupCache[t]};return new Ws(this.programCache[t],o)},e.prototype.generateSampleSrc=function(t){var r="";r+=`
`,r+=`
`;for(var n=0;n<t;n++)n>0&&(r+=`
else `),n<t-1&&(r+="if(vTextureId < "+n+".5)"),r+=`
{`,r+=`
	color = texture2D(uSamplers[`+n+"], vTextureCoord);",r+=`
}`;return r+=`
`,r+=`
`,r},e}(),WO=function(e){nr(t,e);function t(r){r===void 0&&(r=!1);var n=e.call(this)||this;return n._buffer=new Rr(null,r,!1),n._indexBuffer=new Rr(null,r,!0),n.addAttribute("aVertexPosition",n._buffer,2,!1,$e.FLOAT).addAttribute("aTextureCoord",n._buffer,2,!1,$e.FLOAT).addAttribute("aColor",n._buffer,4,!0,$e.UNSIGNED_BYTE).addAttribute("aTextureId",n._buffer,1,!0,$e.FLOAT).addIndex(n._indexBuffer),n}return t}(Uh),E6=`precision highp float;
attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;
attribute vec4 aColor;
attribute float aTextureId;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform vec4 tint;

varying vec2 vTextureCoord;
varying vec4 vColor;
varying float vTextureId;

void main(void){
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = aTextureCoord;
    vTextureId = aTextureId;
    vColor = aColor * tint;
}
`,C6=`varying vec2 vTextureCoord;
varying vec4 vColor;
varying float vTextureId;
uniform sampler2D uSamplers[%count%];

void main(void){
    vec4 color;
    %forloop%
    gl_FragColor = color * vColor;
}
`,Mee=function(){function e(){}return e.create=function(t){var r=Object.assign({vertex:E6,fragment:C6,geometryClass:WO,vertexSize:6},t),n=r.vertex,i=r.fragment,o=r.vertexSize,s=r.geometryClass;return function(a){nr(l,a);function l(u){var c=a.call(this,u)||this;return c.shaderGenerator=new Fee(n,i),c.geometryClass=s,c.vertexSize=o,c}return l}(Uee)},Object.defineProperty(e,"defaultVertexSrc",{get:function(){return E6},enumerable:!1,configurable:!0}),Object.defineProperty(e,"defaultFragmentTemplate",{get:function(){return C6},enumerable:!1,configurable:!0}),e}(),Bee=Mee.create();/*!
 * @pixi/app - v6.4.2
 * Compiled Thu, 02 Jun 2022 15:39:26 UTC
 *
 * @pixi/app is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var Mh=function(){function e(t){var r=this;this.stage=new Ri,t=Object.assign({forceCanvas:!1},t),this.renderer=Ree(t),e._plugins.forEach(function(n){n.init.call(r,t)})}return e.registerPlugin=function(t){e._plugins.push(t)},e.prototype.render=function(){this.renderer.render(this.stage)},Object.defineProperty(e.prototype,"view",{get:function(){return this.renderer.view},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"screen",{get:function(){return this.renderer.screen},enumerable:!1,configurable:!0}),e.prototype.destroy=function(t,r){var n=this,i=e._plugins.slice(0);i.reverse(),i.forEach(function(o){o.destroy.call(n)}),this.stage.destroy(r),this.stage=null,this.renderer.destroy(t),this.renderer=null},e._plugins=[],e}(),Dee=function(){function e(){}return e.init=function(t){var r=this;Object.defineProperty(this,"resizeTo",{set:function(n){globalThis.removeEventListener("resize",this.queueResize),this._resizeTo=n,n&&(globalThis.addEventListener("resize",this.queueResize),this.resize())},get:function(){return this._resizeTo}}),this.queueResize=function(){!r._resizeTo||(r.cancelResize(),r._resizeId=requestAnimationFrame(function(){return r.resize()}))},this.cancelResize=function(){r._resizeId&&(cancelAnimationFrame(r._resizeId),r._resizeId=null)},this.resize=function(){if(!!r._resizeTo){r.cancelResize();var n,i;if(r._resizeTo===globalThis.window)n=globalThis.innerWidth,i=globalThis.innerHeight;else{var o=r._resizeTo,s=o.clientWidth,a=o.clientHeight;n=s,i=a}r.renderer.resize(n,i)}},this._resizeId=null,this._resizeTo=null,this.resizeTo=t.resizeTo||null},e.destroy=function(){globalThis.removeEventListener("resize",this.queueResize),this.cancelResize(),this.cancelResize=null,this.queueResize=null,this.resizeTo=null,this.resize=null},e}();Mh.registerPlugin(Dee);/*!
 * @pixi/extract - v6.4.2
 * Compiled Thu, 02 Jun 2022 15:39:26 UTC
 *
 * @pixi/extract is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var __=/iPhone/i,I6=/iPod/i,N6=/iPad/i,P6=/\biOS-universal(?:.+)Mac\b/i,b_=/\bAndroid(?:.+)Mobile\b/i,A6=/Android/i,cc=/(?:SD4930UR|\bSilk(?:.+)Mobile\b)/i,Av=/Silk/i,Es=/Windows Phone/i,R6=/\bWindows(?:.+)ARM\b/i,k6=/BlackBerry/i,O6=/BB10/i,L6=/Opera Mini/i,U6=/\b(CriOS|Chrome)(?:.+)Mobile/i,F6=/Mobile(?:.+)Firefox\b/i,M6=function(e){return typeof e<"u"&&e.platform==="MacIntel"&&typeof e.maxTouchPoints=="number"&&e.maxTouchPoints>1&&typeof MSStream>"u"};function Gee(e){return function(t){return t.test(e)}}function jee(e){var t={userAgent:"",platform:"",maxTouchPoints:0};!e&&typeof navigator<"u"?t={userAgent:navigator.userAgent,platform:navigator.platform,maxTouchPoints:navigator.maxTouchPoints||0}:typeof e=="string"?t.userAgent=e:e&&e.userAgent&&(t={userAgent:e.userAgent,platform:e.platform,maxTouchPoints:e.maxTouchPoints||0});var r=t.userAgent,n=r.split("[FBAN");typeof n[1]<"u"&&(r=n[0]),n=r.split("Twitter"),typeof n[1]<"u"&&(r=n[0]);var i=Gee(r),o={apple:{phone:i(__)&&!i(Es),ipod:i(I6),tablet:!i(__)&&(i(N6)||M6(t))&&!i(Es),universal:i(P6),device:(i(__)||i(I6)||i(N6)||i(P6)||M6(t))&&!i(Es)},amazon:{phone:i(cc),tablet:!i(cc)&&i(Av),device:i(cc)||i(Av)},android:{phone:!i(Es)&&i(cc)||!i(Es)&&i(b_),tablet:!i(Es)&&!i(cc)&&!i(b_)&&(i(Av)||i(A6)),device:!i(Es)&&(i(cc)||i(Av)||i(b_)||i(A6))||i(/\bokhttp\b/i)},windows:{phone:i(Es),tablet:i(R6),device:i(Es)||i(R6)},other:{blackberry:i(k6),blackberry10:i(O6),opera:i(L6),firefox:i(F6),chrome:i(U6),device:i(k6)||i(O6)||i(L6)||i(F6)||i(U6)},any:!1,phone:!1,tablet:!1};return o.any=o.apple.device||o.android.device||o.windows.device||o.other.device,o.phone=o.apple.phone||o.android.phone||o.windows.phone,o.tablet=o.apple.tablet||o.android.tablet||o.windows.tablet,o}/*!
 * @pixi/settings - v6.4.2
 * Compiled Thu, 02 Jun 2022 15:39:26 UTC
 *
 * @pixi/settings is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var Mc=jee(globalThis.navigator);function $ee(e){var t=!0;if(Mc.tablet||Mc.phone){if(Mc.apple.device){var r=navigator.userAgent.match(/OS (\d+)_(\d+)?/);if(r){var n=parseInt(r[1],10);n<11&&(t=!1)}}if(Mc.android.device){var r=navigator.userAgent.match(/Android\s([0-9.]*)/);if(r){var n=parseInt(r[1],10);n<7&&(t=!1)}}}return t?e:4}function Hee(){return!Mc.apple.device}/*!
 * @pixi/constants - v6.4.2
 * Compiled Thu, 02 Jun 2022 15:39:26 UTC
 *
 * @pixi/constants is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var B6;(function(e){e[e.WEBGL_LEGACY=0]="WEBGL_LEGACY",e[e.WEBGL=1]="WEBGL",e[e.WEBGL2=2]="WEBGL2"})(B6||(B6={}));var D6;(function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.WEBGL=1]="WEBGL",e[e.CANVAS=2]="CANVAS"})(D6||(D6={}));var G6;(function(e){e[e.COLOR=16384]="COLOR",e[e.DEPTH=256]="DEPTH",e[e.STENCIL=1024]="STENCIL"})(G6||(G6={}));var j6;(function(e){e[e.NORMAL=0]="NORMAL",e[e.ADD=1]="ADD",e[e.MULTIPLY=2]="MULTIPLY",e[e.SCREEN=3]="SCREEN",e[e.OVERLAY=4]="OVERLAY",e[e.DARKEN=5]="DARKEN",e[e.LIGHTEN=6]="LIGHTEN",e[e.COLOR_DODGE=7]="COLOR_DODGE",e[e.COLOR_BURN=8]="COLOR_BURN",e[e.HARD_LIGHT=9]="HARD_LIGHT",e[e.SOFT_LIGHT=10]="SOFT_LIGHT",e[e.DIFFERENCE=11]="DIFFERENCE",e[e.EXCLUSION=12]="EXCLUSION",e[e.HUE=13]="HUE",e[e.SATURATION=14]="SATURATION",e[e.COLOR=15]="COLOR",e[e.LUMINOSITY=16]="LUMINOSITY",e[e.NORMAL_NPM=17]="NORMAL_NPM",e[e.ADD_NPM=18]="ADD_NPM",e[e.SCREEN_NPM=19]="SCREEN_NPM",e[e.NONE=20]="NONE",e[e.SRC_OVER=0]="SRC_OVER",e[e.SRC_IN=21]="SRC_IN",e[e.SRC_OUT=22]="SRC_OUT",e[e.SRC_ATOP=23]="SRC_ATOP",e[e.DST_OVER=24]="DST_OVER",e[e.DST_IN=25]="DST_IN",e[e.DST_OUT=26]="DST_OUT",e[e.DST_ATOP=27]="DST_ATOP",e[e.ERASE=26]="ERASE",e[e.SUBTRACT=28]="SUBTRACT",e[e.XOR=29]="XOR"})(j6||(j6={}));var $6;(function(e){e[e.POINTS=0]="POINTS",e[e.LINES=1]="LINES",e[e.LINE_LOOP=2]="LINE_LOOP",e[e.LINE_STRIP=3]="LINE_STRIP",e[e.TRIANGLES=4]="TRIANGLES",e[e.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",e[e.TRIANGLE_FAN=6]="TRIANGLE_FAN"})($6||($6={}));var H6;(function(e){e[e.RGBA=6408]="RGBA",e[e.RGB=6407]="RGB",e[e.RG=33319]="RG",e[e.RED=6403]="RED",e[e.RGBA_INTEGER=36249]="RGBA_INTEGER",e[e.RGB_INTEGER=36248]="RGB_INTEGER",e[e.RG_INTEGER=33320]="RG_INTEGER",e[e.RED_INTEGER=36244]="RED_INTEGER",e[e.ALPHA=6406]="ALPHA",e[e.LUMINANCE=6409]="LUMINANCE",e[e.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",e[e.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",e[e.DEPTH_STENCIL=34041]="DEPTH_STENCIL"})(H6||(H6={}));var z6;(function(e){e[e.TEXTURE_2D=3553]="TEXTURE_2D",e[e.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",e[e.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",e[e.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",e[e.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",e[e.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",e[e.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",e[e.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",e[e.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z"})(z6||(z6={}));var V6;(function(e){e[e.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",e[e.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",e[e.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",e[e.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",e[e.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",e[e.UNSIGNED_INT=5125]="UNSIGNED_INT",e[e.UNSIGNED_INT_10F_11F_11F_REV=35899]="UNSIGNED_INT_10F_11F_11F_REV",e[e.UNSIGNED_INT_2_10_10_10_REV=33640]="UNSIGNED_INT_2_10_10_10_REV",e[e.UNSIGNED_INT_24_8=34042]="UNSIGNED_INT_24_8",e[e.UNSIGNED_INT_5_9_9_9_REV=35902]="UNSIGNED_INT_5_9_9_9_REV",e[e.BYTE=5120]="BYTE",e[e.SHORT=5122]="SHORT",e[e.INT=5124]="INT",e[e.FLOAT=5126]="FLOAT",e[e.FLOAT_32_UNSIGNED_INT_24_8_REV=36269]="FLOAT_32_UNSIGNED_INT_24_8_REV",e[e.HALF_FLOAT=36193]="HALF_FLOAT"})(V6||(V6={}));var X6;(function(e){e[e.FLOAT=0]="FLOAT",e[e.INT=1]="INT",e[e.UINT=2]="UINT"})(X6||(X6={}));var $w;(function(e){e[e.NEAREST=0]="NEAREST",e[e.LINEAR=1]="LINEAR"})($w||($w={}));var Hw;(function(e){e[e.CLAMP=33071]="CLAMP",e[e.REPEAT=10497]="REPEAT",e[e.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT"})(Hw||(Hw={}));var zw;(function(e){e[e.OFF=0]="OFF",e[e.POW2=1]="POW2",e[e.ON=2]="ON",e[e.ON_MANUAL=3]="ON_MANUAL"})(zw||(zw={}));var W6;(function(e){e[e.NPM=0]="NPM",e[e.UNPACK=1]="UNPACK",e[e.PMA=2]="PMA",e[e.NO_PREMULTIPLIED_ALPHA=0]="NO_PREMULTIPLIED_ALPHA",e[e.PREMULTIPLY_ON_UPLOAD=1]="PREMULTIPLY_ON_UPLOAD",e[e.PREMULTIPLY_ALPHA=2]="PREMULTIPLY_ALPHA",e[e.PREMULTIPLIED_ALPHA=2]="PREMULTIPLIED_ALPHA"})(W6||(W6={}));var Y6;(function(e){e[e.NO=0]="NO",e[e.YES=1]="YES",e[e.AUTO=2]="AUTO",e[e.BLEND=0]="BLEND",e[e.CLEAR=1]="CLEAR",e[e.BLIT=2]="BLIT"})(Y6||(Y6={}));var Vw;(function(e){e[e.AUTO=0]="AUTO",e[e.MANUAL=1]="MANUAL"})(Vw||(Vw={}));var yd;(function(e){e.LOW="lowp",e.MEDIUM="mediump",e.HIGH="highp"})(yd||(yd={}));var K6;(function(e){e[e.NONE=0]="NONE",e[e.SCISSOR=1]="SCISSOR",e[e.STENCIL=2]="STENCIL",e[e.SPRITE=3]="SPRITE"})(K6||(K6={}));var Xw;(function(e){e[e.NONE=0]="NONE",e[e.LOW=2]="LOW",e[e.MEDIUM=4]="MEDIUM",e[e.HIGH=8]="HIGH"})(Xw||(Xw={}));var q6;(function(e){e[e.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",e[e.ARRAY_BUFFER=34962]="ARRAY_BUFFER",e[e.UNIFORM_BUFFER=35345]="UNIFORM_BUFFER"})(q6||(q6={}));var YO={MIPMAP_TEXTURES:zw.POW2,ANISOTROPIC_LEVEL:0,RESOLUTION:1,FILTER_RESOLUTION:1,FILTER_MULTISAMPLE:Xw.NONE,SPRITE_MAX_TEXTURES:$ee(32),SPRITE_BATCH_SIZE:4096,RENDER_OPTIONS:{view:null,antialias:!1,autoDensity:!1,backgroundColor:0,backgroundAlpha:1,useContextAlpha:!0,clearBeforeRender:!0,preserveDrawingBuffer:!1,width:800,height:600,legacy:!1},GC_MODE:Vw.AUTO,GC_MAX_IDLE:60*60,GC_MAX_CHECK_COUNT:60*10,WRAP_MODE:Hw.CLAMP,SCALE_MODE:$w.LINEAR,PRECISION_VERTEX:yd.HIGH,PRECISION_FRAGMENT:Mc.apple.device?yd.HIGH:yd.MEDIUM,CAN_UPLOAD_SAME_BUFFER:Hee(),CREATE_IMAGE_BITMAP:!1,ROUND_PIXELS:!1};/*!
 * @pixi/display - v6.4.2
 * Compiled Thu, 02 Jun 2022 15:39:26 UTC
 *
 * @pixi/display is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */YO.SORTABLE_CHILDREN=!1;var Z6=function(){function e(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0,this.rect=null,this.updateID=-1}return e.prototype.isEmpty=function(){return this.minX>this.maxX||this.minY>this.maxY},e.prototype.clear=function(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0},e.prototype.getRectangle=function(t){return this.minX>this.maxX||this.minY>this.maxY?Me.EMPTY:(t=t||new Me(0,0,1,1),t.x=this.minX,t.y=this.minY,t.width=this.maxX-this.minX,t.height=this.maxY-this.minY,t)},e.prototype.addPoint=function(t){this.minX=Math.min(this.minX,t.x),this.maxX=Math.max(this.maxX,t.x),this.minY=Math.min(this.minY,t.y),this.maxY=Math.max(this.maxY,t.y)},e.prototype.addPointMatrix=function(t,r){var n=t.a,i=t.b,o=t.c,s=t.d,a=t.tx,l=t.ty,u=n*r.x+o*r.y+a,c=i*r.x+s*r.y+l;this.minX=Math.min(this.minX,u),this.maxX=Math.max(this.maxX,u),this.minY=Math.min(this.minY,c),this.maxY=Math.max(this.maxY,c)},e.prototype.addQuad=function(t){var r=this.minX,n=this.minY,i=this.maxX,o=this.maxY,s=t[0],a=t[1];r=s<r?s:r,n=a<n?a:n,i=s>i?s:i,o=a>o?a:o,s=t[2],a=t[3],r=s<r?s:r,n=a<n?a:n,i=s>i?s:i,o=a>o?a:o,s=t[4],a=t[5],r=s<r?s:r,n=a<n?a:n,i=s>i?s:i,o=a>o?a:o,s=t[6],a=t[7],r=s<r?s:r,n=a<n?a:n,i=s>i?s:i,o=a>o?a:o,this.minX=r,this.minY=n,this.maxX=i,this.maxY=o},e.prototype.addFrame=function(t,r,n,i,o){this.addFrameMatrix(t.worldTransform,r,n,i,o)},e.prototype.addFrameMatrix=function(t,r,n,i,o){var s=t.a,a=t.b,l=t.c,u=t.d,c=t.tx,f=t.ty,p=this.minX,m=this.minY,g=this.maxX,b=this.maxY,y=s*r+l*n+c,w=a*r+u*n+f;p=y<p?y:p,m=w<m?w:m,g=y>g?y:g,b=w>b?w:b,y=s*i+l*n+c,w=a*i+u*n+f,p=y<p?y:p,m=w<m?w:m,g=y>g?y:g,b=w>b?w:b,y=s*r+l*o+c,w=a*r+u*o+f,p=y<p?y:p,m=w<m?w:m,g=y>g?y:g,b=w>b?w:b,y=s*i+l*o+c,w=a*i+u*o+f,p=y<p?y:p,m=w<m?w:m,g=y>g?y:g,b=w>b?w:b,this.minX=p,this.minY=m,this.maxX=g,this.maxY=b},e.prototype.addVertexData=function(t,r,n){for(var i=this.minX,o=this.minY,s=this.maxX,a=this.maxY,l=r;l<n;l+=2){var u=t[l],c=t[l+1];i=u<i?u:i,o=c<o?c:o,s=u>s?u:s,a=c>a?c:a}this.minX=i,this.minY=o,this.maxX=s,this.maxY=a},e.prototype.addVertices=function(t,r,n,i){this.addVerticesMatrix(t.worldTransform,r,n,i)},e.prototype.addVerticesMatrix=function(t,r,n,i,o,s){o===void 0&&(o=0),s===void 0&&(s=o);for(var a=t.a,l=t.b,u=t.c,c=t.d,f=t.tx,p=t.ty,m=this.minX,g=this.minY,b=this.maxX,y=this.maxY,w=n;w<i;w+=2){var x=r[w],T=r[w+1],I=a*x+u*T+f,R=c*T+l*x+p;m=Math.min(m,I-o),b=Math.max(b,I+o),g=Math.min(g,R-s),y=Math.max(y,R+s)}this.minX=m,this.minY=g,this.maxX=b,this.maxY=y},e.prototype.addBounds=function(t){var r=this.minX,n=this.minY,i=this.maxX,o=this.maxY;this.minX=t.minX<r?t.minX:r,this.minY=t.minY<n?t.minY:n,this.maxX=t.maxX>i?t.maxX:i,this.maxY=t.maxY>o?t.maxY:o},e.prototype.addBoundsMask=function(t,r){var n=t.minX>r.minX?t.minX:r.minX,i=t.minY>r.minY?t.minY:r.minY,o=t.maxX<r.maxX?t.maxX:r.maxX,s=t.maxY<r.maxY?t.maxY:r.maxY;if(n<=o&&i<=s){var a=this.minX,l=this.minY,u=this.maxX,c=this.maxY;this.minX=n<a?n:a,this.minY=i<l?i:l,this.maxX=o>u?o:u,this.maxY=s>c?s:c}},e.prototype.addBoundsMatrix=function(t,r){this.addFrameMatrix(r,t.minX,t.minY,t.maxX,t.maxY)},e.prototype.addBoundsArea=function(t,r){var n=t.minX>r.x?t.minX:r.x,i=t.minY>r.y?t.minY:r.y,o=t.maxX<r.x+r.width?t.maxX:r.x+r.width,s=t.maxY<r.y+r.height?t.maxY:r.y+r.height;if(n<=o&&i<=s){var a=this.minX,l=this.minY,u=this.maxX,c=this.maxY;this.minX=n<a?n:a,this.minY=i<l?i:l,this.maxX=o>u?o:u,this.maxY=s>c?s:c}},e.prototype.pad=function(t,r){t===void 0&&(t=0),r===void 0&&(r=t),this.isEmpty()||(this.minX-=t,this.maxX+=t,this.minY-=r,this.maxY+=r)},e.prototype.addFramePad=function(t,r,n,i,o,s){t-=o,r-=s,n+=o,i+=s,this.minX=this.minX<t?this.minX:t,this.maxX=this.maxX>n?this.maxX:n,this.minY=this.minY<r?this.minY:r,this.maxY=this.maxY>i?this.maxY:i},e}();/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var Ww=function(e,t){return Ww=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])},Ww(e,t)};function D4(e,t){Ww(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var rp=function(e){D4(t,e);function t(){var r=e.call(this)||this;return r.tempDisplayObjectParent=null,r.transform=new F4,r.alpha=1,r.visible=!0,r.renderable=!0,r.cullable=!1,r.cullArea=null,r.parent=null,r.worldAlpha=1,r._lastSortedIndex=0,r._zIndex=0,r.filterArea=null,r.filters=null,r._enabledFilters=null,r._bounds=new Z6,r._localBounds=null,r._boundsID=0,r._boundsRect=null,r._localBoundsRect=null,r._mask=null,r._maskRefCount=0,r._destroyed=!1,r.isSprite=!1,r.isMask=!1,r}return t.mixin=function(r){for(var n=Object.keys(r),i=0;i<n.length;++i){var o=n[i];Object.defineProperty(t.prototype,o,Object.getOwnPropertyDescriptor(r,o))}},Object.defineProperty(t.prototype,"destroyed",{get:function(){return this._destroyed},enumerable:!1,configurable:!0}),t.prototype._recursivePostUpdateTransform=function(){this.parent?(this.parent._recursivePostUpdateTransform(),this.transform.updateTransform(this.parent.transform)):this.transform.updateTransform(this._tempDisplayObjectParent.transform)},t.prototype.updateTransform=function(){this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha},t.prototype.getBounds=function(r,n){return r||(this.parent?(this._recursivePostUpdateTransform(),this.updateTransform()):(this.parent=this._tempDisplayObjectParent,this.updateTransform(),this.parent=null)),this._bounds.updateID!==this._boundsID&&(this.calculateBounds(),this._bounds.updateID=this._boundsID),n||(this._boundsRect||(this._boundsRect=new Me),n=this._boundsRect),this._bounds.getRectangle(n)},t.prototype.getLocalBounds=function(r){r||(this._localBoundsRect||(this._localBoundsRect=new Me),r=this._localBoundsRect),this._localBounds||(this._localBounds=new Z6);var n=this.transform,i=this.parent;this.parent=null,this.transform=this._tempDisplayObjectParent.transform;var o=this._bounds,s=this._boundsID;this._bounds=this._localBounds;var a=this.getBounds(!1,r);return this.parent=i,this.transform=n,this._bounds=o,this._bounds.updateID+=this._boundsID-s,a},t.prototype.toGlobal=function(r,n,i){return i===void 0&&(i=!1),i||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.apply(r,n)},t.prototype.toLocal=function(r,n,i,o){return n&&(r=n.toGlobal(r,i,o)),o||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.applyInverse(r,i)},t.prototype.setParent=function(r){if(!r||!r.addChild)throw new Error("setParent: Argument must be a Container");return r.addChild(this),r},t.prototype.setTransform=function(r,n,i,o,s,a,l,u,c){return r===void 0&&(r=0),n===void 0&&(n=0),i===void 0&&(i=1),o===void 0&&(o=1),s===void 0&&(s=0),a===void 0&&(a=0),l===void 0&&(l=0),u===void 0&&(u=0),c===void 0&&(c=0),this.position.x=r,this.position.y=n,this.scale.x=i||1,this.scale.y=o||1,this.rotation=s,this.skew.x=a,this.skew.y=l,this.pivot.x=u,this.pivot.y=c,this},t.prototype.destroy=function(r){this.parent&&this.parent.removeChild(this),this._destroyed=!0,this.transform=null,this.parent=null,this._bounds=null,this.mask=null,this.cullArea=null,this.filters=null,this.filterArea=null,this.hitArea=null,this.interactive=!1,this.interactiveChildren=!1,this.emit("destroyed"),this.removeAllListeners()},Object.defineProperty(t.prototype,"_tempDisplayObjectParent",{get:function(){return this.tempDisplayObjectParent===null&&(this.tempDisplayObjectParent=new zee),this.tempDisplayObjectParent},enumerable:!1,configurable:!0}),t.prototype.enableTempParent=function(){var r=this.parent;return this.parent=this._tempDisplayObjectParent,r},t.prototype.disableTempParent=function(r){this.parent=r},Object.defineProperty(t.prototype,"x",{get:function(){return this.position.x},set:function(r){this.transform.position.x=r},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"y",{get:function(){return this.position.y},set:function(r){this.transform.position.y=r},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"worldTransform",{get:function(){return this.transform.worldTransform},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"localTransform",{get:function(){return this.transform.localTransform},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"position",{get:function(){return this.transform.position},set:function(r){this.transform.position.copyFrom(r)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"scale",{get:function(){return this.transform.scale},set:function(r){this.transform.scale.copyFrom(r)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"pivot",{get:function(){return this.transform.pivot},set:function(r){this.transform.pivot.copyFrom(r)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"skew",{get:function(){return this.transform.skew},set:function(r){this.transform.skew.copyFrom(r)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"rotation",{get:function(){return this.transform.rotation},set:function(r){this.transform.rotation=r},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"angle",{get:function(){return this.transform.rotation*CO},set:function(r){this.transform.rotation=r*IO},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"zIndex",{get:function(){return this._zIndex},set:function(r){this._zIndex=r,this.parent&&(this.parent.sortDirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"worldVisible",{get:function(){var r=this;do{if(!r.visible)return!1;r=r.parent}while(r);return!0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"mask",{get:function(){return this._mask},set:function(r){if(this._mask!==r){if(this._mask){var n=this._mask.maskObject||this._mask;n._maskRefCount--,n._maskRefCount===0&&(n.renderable=!0,n.isMask=!1)}if(this._mask=r,this._mask){var n=this._mask.maskObject||this._mask;n._maskRefCount===0&&(n.renderable=!1,n.isMask=!0),n._maskRefCount++}}},enumerable:!1,configurable:!0}),t}(Oh),zee=function(e){D4(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.sortDirty=null,r}return t}(rp);rp.prototype.displayObjectUpdateTransform=rp.prototype.updateTransform;/*!
 * @pixi/constants - v6.4.2
 * Compiled Thu, 02 Jun 2022 15:39:26 UTC
 *
 * @pixi/constants is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var J6;(function(e){e[e.WEBGL_LEGACY=0]="WEBGL_LEGACY",e[e.WEBGL=1]="WEBGL",e[e.WEBGL2=2]="WEBGL2"})(J6||(J6={}));var Q6;(function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.WEBGL=1]="WEBGL",e[e.CANVAS=2]="CANVAS"})(Q6||(Q6={}));var eI;(function(e){e[e.COLOR=16384]="COLOR",e[e.DEPTH=256]="DEPTH",e[e.STENCIL=1024]="STENCIL"})(eI||(eI={}));var tI;(function(e){e[e.NORMAL=0]="NORMAL",e[e.ADD=1]="ADD",e[e.MULTIPLY=2]="MULTIPLY",e[e.SCREEN=3]="SCREEN",e[e.OVERLAY=4]="OVERLAY",e[e.DARKEN=5]="DARKEN",e[e.LIGHTEN=6]="LIGHTEN",e[e.COLOR_DODGE=7]="COLOR_DODGE",e[e.COLOR_BURN=8]="COLOR_BURN",e[e.HARD_LIGHT=9]="HARD_LIGHT",e[e.SOFT_LIGHT=10]="SOFT_LIGHT",e[e.DIFFERENCE=11]="DIFFERENCE",e[e.EXCLUSION=12]="EXCLUSION",e[e.HUE=13]="HUE",e[e.SATURATION=14]="SATURATION",e[e.COLOR=15]="COLOR",e[e.LUMINOSITY=16]="LUMINOSITY",e[e.NORMAL_NPM=17]="NORMAL_NPM",e[e.ADD_NPM=18]="ADD_NPM",e[e.SCREEN_NPM=19]="SCREEN_NPM",e[e.NONE=20]="NONE",e[e.SRC_OVER=0]="SRC_OVER",e[e.SRC_IN=21]="SRC_IN",e[e.SRC_OUT=22]="SRC_OUT",e[e.SRC_ATOP=23]="SRC_ATOP",e[e.DST_OVER=24]="DST_OVER",e[e.DST_IN=25]="DST_IN",e[e.DST_OUT=26]="DST_OUT",e[e.DST_ATOP=27]="DST_ATOP",e[e.ERASE=26]="ERASE",e[e.SUBTRACT=28]="SUBTRACT",e[e.XOR=29]="XOR"})(tI||(tI={}));var rI;(function(e){e[e.POINTS=0]="POINTS",e[e.LINES=1]="LINES",e[e.LINE_LOOP=2]="LINE_LOOP",e[e.LINE_STRIP=3]="LINE_STRIP",e[e.TRIANGLES=4]="TRIANGLES",e[e.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",e[e.TRIANGLE_FAN=6]="TRIANGLE_FAN"})(rI||(rI={}));var nI;(function(e){e[e.RGBA=6408]="RGBA",e[e.RGB=6407]="RGB",e[e.RG=33319]="RG",e[e.RED=6403]="RED",e[e.RGBA_INTEGER=36249]="RGBA_INTEGER",e[e.RGB_INTEGER=36248]="RGB_INTEGER",e[e.RG_INTEGER=33320]="RG_INTEGER",e[e.RED_INTEGER=36244]="RED_INTEGER",e[e.ALPHA=6406]="ALPHA",e[e.LUMINANCE=6409]="LUMINANCE",e[e.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",e[e.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",e[e.DEPTH_STENCIL=34041]="DEPTH_STENCIL"})(nI||(nI={}));var iI;(function(e){e[e.TEXTURE_2D=3553]="TEXTURE_2D",e[e.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",e[e.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",e[e.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",e[e.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",e[e.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",e[e.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",e[e.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",e[e.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z"})(iI||(iI={}));var oI;(function(e){e[e.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",e[e.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",e[e.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",e[e.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",e[e.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",e[e.UNSIGNED_INT=5125]="UNSIGNED_INT",e[e.UNSIGNED_INT_10F_11F_11F_REV=35899]="UNSIGNED_INT_10F_11F_11F_REV",e[e.UNSIGNED_INT_2_10_10_10_REV=33640]="UNSIGNED_INT_2_10_10_10_REV",e[e.UNSIGNED_INT_24_8=34042]="UNSIGNED_INT_24_8",e[e.UNSIGNED_INT_5_9_9_9_REV=35902]="UNSIGNED_INT_5_9_9_9_REV",e[e.BYTE=5120]="BYTE",e[e.SHORT=5122]="SHORT",e[e.INT=5124]="INT",e[e.FLOAT=5126]="FLOAT",e[e.FLOAT_32_UNSIGNED_INT_24_8_REV=36269]="FLOAT_32_UNSIGNED_INT_24_8_REV",e[e.HALF_FLOAT=36193]="HALF_FLOAT"})(oI||(oI={}));var sI;(function(e){e[e.FLOAT=0]="FLOAT",e[e.INT=1]="INT",e[e.UINT=2]="UINT"})(sI||(sI={}));var aI;(function(e){e[e.NEAREST=0]="NEAREST",e[e.LINEAR=1]="LINEAR"})(aI||(aI={}));var lI;(function(e){e[e.CLAMP=33071]="CLAMP",e[e.REPEAT=10497]="REPEAT",e[e.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT"})(lI||(lI={}));var uI;(function(e){e[e.OFF=0]="OFF",e[e.POW2=1]="POW2",e[e.ON=2]="ON",e[e.ON_MANUAL=3]="ON_MANUAL"})(uI||(uI={}));var cI;(function(e){e[e.NPM=0]="NPM",e[e.UNPACK=1]="UNPACK",e[e.PMA=2]="PMA",e[e.NO_PREMULTIPLIED_ALPHA=0]="NO_PREMULTIPLIED_ALPHA",e[e.PREMULTIPLY_ON_UPLOAD=1]="PREMULTIPLY_ON_UPLOAD",e[e.PREMULTIPLY_ALPHA=2]="PREMULTIPLY_ALPHA",e[e.PREMULTIPLIED_ALPHA=2]="PREMULTIPLIED_ALPHA"})(cI||(cI={}));var hI;(function(e){e[e.NO=0]="NO",e[e.YES=1]="YES",e[e.AUTO=2]="AUTO",e[e.BLEND=0]="BLEND",e[e.CLEAR=1]="CLEAR",e[e.BLIT=2]="BLIT"})(hI||(hI={}));var fI;(function(e){e[e.AUTO=0]="AUTO",e[e.MANUAL=1]="MANUAL"})(fI||(fI={}));var dI;(function(e){e.LOW="lowp",e.MEDIUM="mediump",e.HIGH="highp"})(dI||(dI={}));var Yw;(function(e){e[e.NONE=0]="NONE",e[e.SCISSOR=1]="SCISSOR",e[e.STENCIL=2]="STENCIL",e[e.SPRITE=3]="SPRITE"})(Yw||(Yw={}));var pI;(function(e){e[e.NONE=0]="NONE",e[e.LOW=2]="LOW",e[e.MEDIUM=4]="MEDIUM",e[e.HIGH=8]="HIGH"})(pI||(pI={}));var mI;(function(e){e[e.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",e[e.ARRAY_BUFFER=34962]="ARRAY_BUFFER",e[e.UNIFORM_BUFFER=35345]="UNIFORM_BUFFER"})(mI||(mI={}));function Vee(e,t){return e.zIndex===t.zIndex?e._lastSortedIndex-t._lastSortedIndex:e.zIndex-t.zIndex}var vI=function(e){D4(t,e);function t(){var r=e.call(this)||this;return r.children=[],r.sortableChildren=YO.SORTABLE_CHILDREN,r.sortDirty=!1,r}return t.prototype.onChildrenChange=function(r){},t.prototype.addChild=function(){for(var r=arguments,n=[],i=0;i<arguments.length;i++)n[i]=r[i];if(n.length>1)for(var o=0;o<n.length;o++)this.addChild(n[o]);else{var s=n[0];s.parent&&s.parent.removeChild(s),s.parent=this,this.sortDirty=!0,s.transform._parentID=-1,this.children.push(s),this._boundsID++,this.onChildrenChange(this.children.length-1),this.emit("childAdded",s,this,this.children.length-1),s.emit("added",this)}return n[0]},t.prototype.addChildAt=function(r,n){if(n<0||n>this.children.length)throw new Error(r+"addChildAt: The index "+n+" supplied is out of bounds "+this.children.length);return r.parent&&r.parent.removeChild(r),r.parent=this,this.sortDirty=!0,r.transform._parentID=-1,this.children.splice(n,0,r),this._boundsID++,this.onChildrenChange(n),r.emit("added",this),this.emit("childAdded",r,this,n),r},t.prototype.swapChildren=function(r,n){if(r!==n){var i=this.getChildIndex(r),o=this.getChildIndex(n);this.children[i]=n,this.children[o]=r,this.onChildrenChange(i<o?i:o)}},t.prototype.getChildIndex=function(r){var n=this.children.indexOf(r);if(n===-1)throw new Error("The supplied DisplayObject must be a child of the caller");return n},t.prototype.setChildIndex=function(r,n){if(n<0||n>=this.children.length)throw new Error("The index "+n+" supplied is out of bounds "+this.children.length);var i=this.getChildIndex(r);Xs(this.children,i,1),this.children.splice(n,0,r),this.onChildrenChange(n)},t.prototype.getChildAt=function(r){if(r<0||r>=this.children.length)throw new Error("getChildAt: Index ("+r+") does not exist.");return this.children[r]},t.prototype.removeChild=function(){for(var r=arguments,n=[],i=0;i<arguments.length;i++)n[i]=r[i];if(n.length>1)for(var o=0;o<n.length;o++)this.removeChild(n[o]);else{var s=n[0],a=this.children.indexOf(s);if(a===-1)return null;s.parent=null,s.transform._parentID=-1,Xs(this.children,a,1),this._boundsID++,this.onChildrenChange(a),s.emit("removed",this),this.emit("childRemoved",s,this,a)}return n[0]},t.prototype.removeChildAt=function(r){var n=this.getChildAt(r);return n.parent=null,n.transform._parentID=-1,Xs(this.children,r,1),this._boundsID++,this.onChildrenChange(r),n.emit("removed",this),this.emit("childRemoved",n,this,r),n},t.prototype.removeChildren=function(r,n){r===void 0&&(r=0),n===void 0&&(n=this.children.length);var i=r,o=n,s=o-i,a;if(s>0&&s<=o){a=this.children.splice(i,s);for(var l=0;l<a.length;++l)a[l].parent=null,a[l].transform&&(a[l].transform._parentID=-1);this._boundsID++,this.onChildrenChange(r);for(var l=0;l<a.length;++l)a[l].emit("removed",this),this.emit("childRemoved",a[l],this,l);return a}else if(s===0&&this.children.length===0)return[];throw new RangeError("removeChildren: numeric values are outside the acceptable range.")},t.prototype.sortChildren=function(){for(var r=!1,n=0,i=this.children.length;n<i;++n){var o=this.children[n];o._lastSortedIndex=n,!r&&o.zIndex!==0&&(r=!0)}r&&this.children.length>1&&this.children.sort(Vee),this.sortDirty=!1},t.prototype.updateTransform=function(){this.sortableChildren&&this.sortDirty&&this.sortChildren(),this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha;for(var r=0,n=this.children.length;r<n;++r){var i=this.children[r];i.visible&&i.updateTransform()}},t.prototype.calculateBounds=function(){this._bounds.clear(),this._calculateBounds();for(var r=0;r<this.children.length;r++){var n=this.children[r];if(!(!n.visible||!n.renderable))if(n.calculateBounds(),n._mask){var i=n._mask.maskObject||n._mask;i.calculateBounds(),this._bounds.addBoundsMask(n._bounds,i._bounds)}else n.filterArea?this._bounds.addBoundsArea(n._bounds,n.filterArea):this._bounds.addBounds(n._bounds)}this._bounds.updateID=this._boundsID},t.prototype.getLocalBounds=function(r,n){n===void 0&&(n=!1);var i=e.prototype.getLocalBounds.call(this,r);if(!n)for(var o=0,s=this.children.length;o<s;++o){var a=this.children[o];a.visible&&a.updateTransform()}return i},t.prototype._calculateBounds=function(){},t.prototype._renderWithCulling=function(r){var n=r.renderTexture.sourceFrame;if(n.width>0&&n.height>0){var i,o;if(this.cullArea?(i=this.cullArea,o=this.worldTransform):this._render!==t.prototype._render&&(i=this.getBounds(!0)),i&&n.intersects(i,o))this._render(r);else if(this.cullArea)return;for(var s=0,a=this.children.length;s<a;++s){var l=this.children[s],u=l.cullable;l.cullable=u||!this.cullArea,l.render(r),l.cullable=u}}},t.prototype.render=function(r){if(!(!this.visible||this.worldAlpha<=0||!this.renderable))if(this._mask||this.filters&&this.filters.length)this.renderAdvanced(r);else if(this.cullable)this._renderWithCulling(r);else{this._render(r);for(var n=0,i=this.children.length;n<i;++n)this.children[n].render(r)}},t.prototype.renderAdvanced=function(r){var n=this.filters,i=this._mask;if(n){this._enabledFilters||(this._enabledFilters=[]),this._enabledFilters.length=0;for(var o=0;o<n.length;o++)n[o].enabled&&this._enabledFilters.push(n[o])}var s=n&&this._enabledFilters&&this._enabledFilters.length||i&&(!i.isMaskData||i.enabled&&(i.autoDetect||i.type!==Yw.NONE));if(s&&r.batch.flush(),n&&this._enabledFilters&&this._enabledFilters.length&&r.filter.push(this,this._enabledFilters),i&&r.mask.push(this,this._mask),this.cullable)this._renderWithCulling(r);else{this._render(r);for(var o=0,a=this.children.length;o<a;++o)this.children[o].render(r)}s&&r.batch.flush(),i&&r.mask.pop(this),n&&this._enabledFilters&&this._enabledFilters.length&&r.filter.pop()},t.prototype._render=function(r){},t.prototype.destroy=function(r){e.prototype.destroy.call(this),this.sortDirty=!1;var n=typeof r=="boolean"?r:r&&r.children,i=this.removeChildren(0,this.children.length);if(n)for(var o=0;o<i.length;++o)i[o].destroy(r)},Object.defineProperty(t.prototype,"width",{get:function(){return this.scale.x*this.getLocalBounds().width},set:function(r){var n=this.getLocalBounds().width;n!==0?this.scale.x=r/n:this.scale.x=1,this._width=r},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this.scale.y*this.getLocalBounds().height},set:function(r){var n=this.getLocalBounds().height;n!==0?this.scale.y=r/n:this.scale.y=1,this._height=r},enumerable:!1,configurable:!0}),t}(rp);vI.prototype.containerUpdateTransform=vI.prototype.updateTransform;var w_=new Me,gI=4,Xee=function(){function e(t){this.renderer=t}return e.prototype.image=function(t,r,n){var i=new Image;return i.src=this.base64(t,r,n),i},e.prototype.base64=function(t,r,n){return this.canvas(t).toDataURL(r,n)},e.prototype.canvas=function(t){var r=this.renderer,n,i,o=!1,s,a=!1;t&&(t instanceof _u?s=t:(s=this.renderer.generateTexture(t),a=!0)),s?(n=s.baseTexture.resolution,i=s.frame,o=!1,r.renderTexture.bind(s)):(n=this.renderer.resolution,o=!0,i=w_,i.width=this.renderer.width,i.height=this.renderer.height,r.renderTexture.bind(null));var l=Math.floor(i.width*n+1e-4),u=Math.floor(i.height*n+1e-4),c=new W5(l,u,1),f=new Uint8Array(gI*l*u),p=r.gl;p.readPixels(i.x*n,i.y*n,l,u,p.RGBA,p.UNSIGNED_BYTE,f);var m=c.context.getImageData(0,0,l,u);if(e.arrayPostDivide(f,m.data),c.context.putImageData(m,0,0),o){var g=new W5(c.width,c.height,1);g.context.scale(1,-1),g.context.drawImage(c.canvas,0,-u),c.destroy(),c=g}return a&&s.destroy(!0),c.canvas},e.prototype.pixels=function(t,r){var n=this.renderer,i,o,s,a=!1;t&&(t instanceof _u?s=t:t instanceof rp&&(s=this.renderer.generateTexture(t),a=!0)),s?r?(i=r.resolution,o=s.frame,n.renderTexture.bind(s)):(i=s.baseTexture.resolution,o=s.frame,n.renderTexture.bind(s)):r?(i=r.resolution,o=w_,o.width=r.width,o.height=r.height,n.renderTexture.bind(null)):(i=n.resolution,o=w_,o.width=n.width,o.height=n.height,n.renderTexture.bind(null));var l=o.width*i,u=o.height*i,c=new Uint8Array(gI*l*u),f=n.gl;return f.readPixels(o.x*i,o.y*i,l,u,f.RGBA,f.UNSIGNED_BYTE,c),a&&s.destroy(!0),e.arrayPostDivide(c,c),c},e.prototype.destroy=function(){this.renderer=null},e.arrayPostDivide=function(t,r){for(var n=0;n<t.length;n+=4){var i=r[n+3]=t[n+3];i!==0?(r[n]=Math.round(Math.min(t[n]*255/i,255)),r[n+1]=Math.round(Math.min(t[n+1]*255/i,255)),r[n+2]=Math.round(Math.min(t[n+2]*255/i,255))):(r[n]=t[n],r[n+1]=t[n+1],r[n+2]=t[n+2])}},e}();/*!
 * @pixi/loaders - v6.4.2
 * Compiled Thu, 02 Jun 2022 15:39:26 UTC
 *
 * @pixi/loaders is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var Rv=function(){function e(t,r,n){r===void 0&&(r=!1),this._fn=t,this._once=r,this._thisArg=n,this._next=this._prev=this._owner=null}return e.prototype.detach=function(){return this._owner===null?!1:(this._owner.detach(this),!0)},e}();function yI(e,t){return e._head?(e._tail._next=t,t._prev=e._tail,e._tail=t):(e._head=t,e._tail=t),t._owner=e,t}var Ls=function(){function e(){this._head=this._tail=void 0}return e.prototype.handlers=function(t){t===void 0&&(t=!1);var r=this._head;if(t)return!!r;for(var n=[];r;)n.push(r),r=r._next;return n},e.prototype.has=function(t){if(!(t instanceof Rv))throw new Error("MiniSignal#has(): First arg must be a SignalBinding object.");return t._owner===this},e.prototype.dispatch=function(){for(var t=arguments,r=[],n=0;n<arguments.length;n++)r[n]=t[n];var i=this._head;if(!i)return!1;for(;i;)i._once&&this.detach(i),i._fn.apply(i._thisArg,r),i=i._next;return!0},e.prototype.add=function(t,r){if(r===void 0&&(r=null),typeof t!="function")throw new Error("MiniSignal#add(): First arg must be a Function.");return yI(this,new Rv(t,!1,r))},e.prototype.once=function(t,r){if(r===void 0&&(r=null),typeof t!="function")throw new Error("MiniSignal#once(): First arg must be a Function.");return yI(this,new Rv(t,!0,r))},e.prototype.detach=function(t){if(!(t instanceof Rv))throw new Error("MiniSignal#detach(): First arg must be a SignalBinding object.");return t._owner!==this?this:(t._prev&&(t._prev._next=t._next),t._next&&(t._next._prev=t._prev),t===this._head?(this._head=t._next,t._next===null&&(this._tail=null)):t===this._tail&&(this._tail=t._prev,this._tail._next=null),t._owner=null,this)},e.prototype.detachAll=function(){var t=this._head;if(!t)return this;for(this._head=this._tail=null;t;)t._owner=null,t=t._next;return this},e}();function KO(e,t){t=t||{};for(var r={key:["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],q:{name:"queryKey",parser:/(?:^|&)([^&=]*)=?([^&]*)/g},parser:{strict:/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,loose:/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/}},n=r.parser[t.strictMode?"strict":"loose"].exec(e),i={},o=14;o--;)i[r.key[o]]=n[o]||"";return i[r.q.name]={},i[r.key[12]].replace(r.q.parser,function(s,a,l){a&&(i[r.q.name][a]=l)}),i}var x_,kv=null,Wee=0,_I=200,Yee=204,Kee=1223,qee=2;function bI(){}function wI(e,t,r){t&&t.indexOf(".")===0&&(t=t.substring(1)),t&&(e[t]=r)}function T_(e){return e.toString().replace("object ","")}var Tr=function(){function e(t,r,n){if(this._dequeue=bI,this._onLoadBinding=null,this._elementTimer=0,this._boundComplete=null,this._boundOnError=null,this._boundOnProgress=null,this._boundOnTimeout=null,this._boundXhrOnError=null,this._boundXhrOnTimeout=null,this._boundXhrOnAbort=null,this._boundXhrOnLoad=null,typeof t!="string"||typeof r!="string")throw new Error("Both name and url are required for constructing a resource.");n=n||{},this._flags=0,this._setFlag(e.STATUS_FLAGS.DATA_URL,r.indexOf("data:")===0),this.name=t,this.url=r,this.extension=this._getExtension(),this.data=null,this.crossOrigin=n.crossOrigin===!0?"anonymous":n.crossOrigin,this.timeout=n.timeout||0,this.loadType=n.loadType||this._determineLoadType(),this.xhrType=n.xhrType,this.metadata=n.metadata||{},this.error=null,this.xhr=null,this.children=[],this.type=e.TYPE.UNKNOWN,this.progressChunk=0,this._dequeue=bI,this._onLoadBinding=null,this._elementTimer=0,this._boundComplete=this.complete.bind(this),this._boundOnError=this._onError.bind(this),this._boundOnProgress=this._onProgress.bind(this),this._boundOnTimeout=this._onTimeout.bind(this),this._boundXhrOnError=this._xhrOnError.bind(this),this._boundXhrOnTimeout=this._xhrOnTimeout.bind(this),this._boundXhrOnAbort=this._xhrOnAbort.bind(this),this._boundXhrOnLoad=this._xhrOnLoad.bind(this),this.onStart=new Ls,this.onProgress=new Ls,this.onComplete=new Ls,this.onAfterMiddleware=new Ls}return e.setExtensionLoadType=function(t,r){wI(e._loadTypeMap,t,r)},e.setExtensionXhrType=function(t,r){wI(e._xhrTypeMap,t,r)},Object.defineProperty(e.prototype,"isDataUrl",{get:function(){return this._hasFlag(e.STATUS_FLAGS.DATA_URL)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isComplete",{get:function(){return this._hasFlag(e.STATUS_FLAGS.COMPLETE)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isLoading",{get:function(){return this._hasFlag(e.STATUS_FLAGS.LOADING)},enumerable:!1,configurable:!0}),e.prototype.complete=function(){this._clearEvents(),this._finish()},e.prototype.abort=function(t){if(!this.error){if(this.error=new Error(t),this._clearEvents(),this.xhr)this.xhr.abort();else if(this.xdr)this.xdr.abort();else if(this.data)if(this.data.src)this.data.src=e.EMPTY_GIF;else for(;this.data.firstChild;)this.data.removeChild(this.data.firstChild);this._finish()}},e.prototype.load=function(t){var r=this;if(!this.isLoading){if(this.isComplete){t&&setTimeout(function(){return t(r)},1);return}else t&&this.onComplete.once(t);switch(this._setFlag(e.STATUS_FLAGS.LOADING,!0),this.onStart.dispatch(this),(this.crossOrigin===!1||typeof this.crossOrigin!="string")&&(this.crossOrigin=this._determineCrossOrigin(this.url)),this.loadType){case e.LOAD_TYPE.IMAGE:this.type=e.TYPE.IMAGE,this._loadElement("image");break;case e.LOAD_TYPE.AUDIO:this.type=e.TYPE.AUDIO,this._loadSourceElement("audio");break;case e.LOAD_TYPE.VIDEO:this.type=e.TYPE.VIDEO,this._loadSourceElement("video");break;case e.LOAD_TYPE.XHR:default:typeof x_>"u"&&(x_=!!(globalThis.XDomainRequest&&!("withCredentials"in new XMLHttpRequest))),x_&&this.crossOrigin?this._loadXdr():this._loadXhr();break}}},e.prototype._hasFlag=function(t){return(this._flags&t)!==0},e.prototype._setFlag=function(t,r){this._flags=r?this._flags|t:this._flags&~t},e.prototype._clearEvents=function(){clearTimeout(this._elementTimer),this.data&&this.data.removeEventListener&&(this.data.removeEventListener("error",this._boundOnError,!1),this.data.removeEventListener("load",this._boundComplete,!1),this.data.removeEventListener("progress",this._boundOnProgress,!1),this.data.removeEventListener("canplaythrough",this._boundComplete,!1)),this.xhr&&(this.xhr.removeEventListener?(this.xhr.removeEventListener("error",this._boundXhrOnError,!1),this.xhr.removeEventListener("timeout",this._boundXhrOnTimeout,!1),this.xhr.removeEventListener("abort",this._boundXhrOnAbort,!1),this.xhr.removeEventListener("progress",this._boundOnProgress,!1),this.xhr.removeEventListener("load",this._boundXhrOnLoad,!1)):(this.xhr.onerror=null,this.xhr.ontimeout=null,this.xhr.onprogress=null,this.xhr.onload=null))},e.prototype._finish=function(){if(this.isComplete)throw new Error("Complete called again for an already completed resource.");this._setFlag(e.STATUS_FLAGS.COMPLETE,!0),this._setFlag(e.STATUS_FLAGS.LOADING,!1),this.onComplete.dispatch(this)},e.prototype._loadElement=function(t){this.metadata.loadElement?this.data=this.metadata.loadElement:t==="image"&&typeof globalThis.Image<"u"?this.data=new Image:this.data=document.createElement(t),this.crossOrigin&&(this.data.crossOrigin=this.crossOrigin),this.metadata.skipSource||(this.data.src=this.url),this.data.addEventListener("error",this._boundOnError,!1),this.data.addEventListener("load",this._boundComplete,!1),this.data.addEventListener("progress",this._boundOnProgress,!1),this.timeout&&(this._elementTimer=setTimeout(this._boundOnTimeout,this.timeout))},e.prototype._loadSourceElement=function(t){if(this.metadata.loadElement?this.data=this.metadata.loadElement:t==="audio"&&typeof globalThis.Audio<"u"?this.data=new Audio:this.data=document.createElement(t),this.data===null){this.abort("Unsupported element: "+t);return}if(this.crossOrigin&&(this.data.crossOrigin=this.crossOrigin),!this.metadata.skipSource)if(navigator.isCocoonJS)this.data.src=Array.isArray(this.url)?this.url[0]:this.url;else if(Array.isArray(this.url))for(var r=this.metadata.mimeType,n=0;n<this.url.length;++n)this.data.appendChild(this._createSource(t,this.url[n],Array.isArray(r)?r[n]:r));else{var r=this.metadata.mimeType;this.data.appendChild(this._createSource(t,this.url,Array.isArray(r)?r[0]:r))}this.data.addEventListener("error",this._boundOnError,!1),this.data.addEventListener("load",this._boundComplete,!1),this.data.addEventListener("progress",this._boundOnProgress,!1),this.data.addEventListener("canplaythrough",this._boundComplete,!1),this.data.load(),this.timeout&&(this._elementTimer=setTimeout(this._boundOnTimeout,this.timeout))},e.prototype._loadXhr=function(){typeof this.xhrType!="string"&&(this.xhrType=this._determineXhrType());var t=this.xhr=new XMLHttpRequest;this.crossOrigin==="use-credentials"&&(t.withCredentials=!0),t.open("GET",this.url,!0),t.timeout=this.timeout,this.xhrType===e.XHR_RESPONSE_TYPE.JSON||this.xhrType===e.XHR_RESPONSE_TYPE.DOCUMENT?t.responseType=e.XHR_RESPONSE_TYPE.TEXT:t.responseType=this.xhrType,t.addEventListener("error",this._boundXhrOnError,!1),t.addEventListener("timeout",this._boundXhrOnTimeout,!1),t.addEventListener("abort",this._boundXhrOnAbort,!1),t.addEventListener("progress",this._boundOnProgress,!1),t.addEventListener("load",this._boundXhrOnLoad,!1),t.send()},e.prototype._loadXdr=function(){typeof this.xhrType!="string"&&(this.xhrType=this._determineXhrType());var t=this.xhr=new globalThis.XDomainRequest;t.timeout=this.timeout||5e3,t.onerror=this._boundXhrOnError,t.ontimeout=this._boundXhrOnTimeout,t.onprogress=this._boundOnProgress,t.onload=this._boundXhrOnLoad,t.open("GET",this.url,!0),setTimeout(function(){return t.send()},1)},e.prototype._createSource=function(t,r,n){n||(n=t+"/"+this._getExtension(r));var i=document.createElement("source");return i.src=r,i.type=n,i},e.prototype._onError=function(t){this.abort("Failed to load element using: "+t.target.nodeName)},e.prototype._onProgress=function(t){t&&t.lengthComputable&&this.onProgress.dispatch(this,t.loaded/t.total)},e.prototype._onTimeout=function(){this.abort("Load timed out.")},e.prototype._xhrOnError=function(){var t=this.xhr;this.abort(T_(t)+" Request failed. Status: "+t.status+', text: "'+t.statusText+'"')},e.prototype._xhrOnTimeout=function(){var t=this.xhr;this.abort(T_(t)+" Request timed out.")},e.prototype._xhrOnAbort=function(){var t=this.xhr;this.abort(T_(t)+" Request was aborted by the user.")},e.prototype._xhrOnLoad=function(){var t=this.xhr,r="",n=typeof t.status>"u"?_I:t.status;(t.responseType===""||t.responseType==="text"||typeof t.responseType>"u")&&(r=t.responseText),n===Wee&&(r.length>0||t.responseType===e.XHR_RESPONSE_TYPE.BUFFER)?n=_I:n===Kee&&(n=Yee);var i=n/100|0;if(i===qee)if(this.xhrType===e.XHR_RESPONSE_TYPE.TEXT)this.data=r,this.type=e.TYPE.TEXT;else if(this.xhrType===e.XHR_RESPONSE_TYPE.JSON)try{this.data=JSON.parse(r),this.type=e.TYPE.JSON}catch(a){this.abort("Error trying to parse loaded json: "+a);return}else if(this.xhrType===e.XHR_RESPONSE_TYPE.DOCUMENT)try{if(globalThis.DOMParser){var o=new DOMParser;this.data=o.parseFromString(r,"text/xml")}else{var s=document.createElement("div");s.innerHTML=r,this.data=s}this.type=e.TYPE.XML}catch(a){this.abort("Error trying to parse loaded xml: "+a);return}else this.data=t.response||r;else{this.abort("["+t.status+"] "+t.statusText+": "+t.responseURL);return}this.complete()},e.prototype._determineCrossOrigin=function(t,r){if(t.indexOf("data:")===0)return"";if(globalThis.origin!==globalThis.location.origin)return"anonymous";r=r||globalThis.location,kv||(kv=document.createElement("a")),kv.href=t;var n=KO(kv.href,{strictMode:!0}),i=!n.port&&r.port===""||n.port===r.port,o=n.protocol?n.protocol+":":"";return n.host!==r.hostname||!i||o!==r.protocol?"anonymous":""},e.prototype._determineXhrType=function(){return e._xhrTypeMap[this.extension]||e.XHR_RESPONSE_TYPE.TEXT},e.prototype._determineLoadType=function(){return e._loadTypeMap[this.extension]||e.LOAD_TYPE.XHR},e.prototype._getExtension=function(t){t===void 0&&(t=this.url);var r="";if(this.isDataUrl){var n=t.indexOf("/");r=t.substring(n+1,t.indexOf(";",n))}else{var i=t.indexOf("?"),o=t.indexOf("#"),s=Math.min(i>-1?i:t.length,o>-1?o:t.length);t=t.substring(0,s),r=t.substring(t.lastIndexOf(".")+1)}return r.toLowerCase()},e.prototype._getMimeFromXhrType=function(t){switch(t){case e.XHR_RESPONSE_TYPE.BUFFER:return"application/octet-binary";case e.XHR_RESPONSE_TYPE.BLOB:return"application/blob";case e.XHR_RESPONSE_TYPE.DOCUMENT:return"application/xml";case e.XHR_RESPONSE_TYPE.JSON:return"application/json";case e.XHR_RESPONSE_TYPE.DEFAULT:case e.XHR_RESPONSE_TYPE.TEXT:default:return"text/plain"}},e}();(function(e){(function(t){t[t.NONE=0]="NONE",t[t.DATA_URL=1]="DATA_URL",t[t.COMPLETE=2]="COMPLETE",t[t.LOADING=4]="LOADING"})(e.STATUS_FLAGS||(e.STATUS_FLAGS={})),function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.JSON=1]="JSON",t[t.XML=2]="XML",t[t.IMAGE=3]="IMAGE",t[t.AUDIO=4]="AUDIO",t[t.VIDEO=5]="VIDEO",t[t.TEXT=6]="TEXT"}(e.TYPE||(e.TYPE={})),function(t){t[t.XHR=1]="XHR",t[t.IMAGE=2]="IMAGE",t[t.AUDIO=3]="AUDIO",t[t.VIDEO=4]="VIDEO"}(e.LOAD_TYPE||(e.LOAD_TYPE={})),function(t){t.DEFAULT="text",t.BUFFER="arraybuffer",t.BLOB="blob",t.DOCUMENT="document",t.JSON="json",t.TEXT="text"}(e.XHR_RESPONSE_TYPE||(e.XHR_RESPONSE_TYPE={})),e._loadTypeMap={gif:e.LOAD_TYPE.IMAGE,png:e.LOAD_TYPE.IMAGE,bmp:e.LOAD_TYPE.IMAGE,jpg:e.LOAD_TYPE.IMAGE,jpeg:e.LOAD_TYPE.IMAGE,tif:e.LOAD_TYPE.IMAGE,tiff:e.LOAD_TYPE.IMAGE,webp:e.LOAD_TYPE.IMAGE,tga:e.LOAD_TYPE.IMAGE,svg:e.LOAD_TYPE.IMAGE,"svg+xml":e.LOAD_TYPE.IMAGE,mp3:e.LOAD_TYPE.AUDIO,ogg:e.LOAD_TYPE.AUDIO,wav:e.LOAD_TYPE.AUDIO,mp4:e.LOAD_TYPE.VIDEO,webm:e.LOAD_TYPE.VIDEO},e._xhrTypeMap={xhtml:e.XHR_RESPONSE_TYPE.DOCUMENT,html:e.XHR_RESPONSE_TYPE.DOCUMENT,htm:e.XHR_RESPONSE_TYPE.DOCUMENT,xml:e.XHR_RESPONSE_TYPE.DOCUMENT,tmx:e.XHR_RESPONSE_TYPE.DOCUMENT,svg:e.XHR_RESPONSE_TYPE.DOCUMENT,tsx:e.XHR_RESPONSE_TYPE.DOCUMENT,gif:e.XHR_RESPONSE_TYPE.BLOB,png:e.XHR_RESPONSE_TYPE.BLOB,bmp:e.XHR_RESPONSE_TYPE.BLOB,jpg:e.XHR_RESPONSE_TYPE.BLOB,jpeg:e.XHR_RESPONSE_TYPE.BLOB,tif:e.XHR_RESPONSE_TYPE.BLOB,tiff:e.XHR_RESPONSE_TYPE.BLOB,webp:e.XHR_RESPONSE_TYPE.BLOB,tga:e.XHR_RESPONSE_TYPE.BLOB,json:e.XHR_RESPONSE_TYPE.JSON,text:e.XHR_RESPONSE_TYPE.TEXT,txt:e.XHR_RESPONSE_TYPE.TEXT,ttf:e.XHR_RESPONSE_TYPE.BUFFER,otf:e.XHR_RESPONSE_TYPE.BUFFER},e.EMPTY_GIF="data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw=="})(Tr||(Tr={}));function Fl(){}function Zee(e){return function(){for(var r=arguments,n=[],i=0;i<arguments.length;i++)n[i]=r[i];if(e===null)throw new Error("Callback was already called.");var o=e;e=null,o.apply(this,n)}}var Jee=function(){function e(t,r){this.data=t,this.callback=r}return e}(),S_=function(){function e(t,r){var n=this;if(r===void 0&&(r=1),this.workers=0,this.saturated=Fl,this.unsaturated=Fl,this.empty=Fl,this.drain=Fl,this.error=Fl,this.started=!1,this.paused=!1,this._tasks=[],this._insert=function(i,o,s){if(s&&typeof s!="function")throw new Error("task callback must be a function");if(n.started=!0,i==null&&n.idle()){setTimeout(function(){return n.drain()},1);return}var a=new Jee(i,typeof s=="function"?s:Fl);o?n._tasks.unshift(a):n._tasks.push(a),setTimeout(n.process,1)},this.process=function(){for(;!n.paused&&n.workers<n.concurrency&&n._tasks.length;){var i=n._tasks.shift();n._tasks.length===0&&n.empty(),n.workers+=1,n.workers===n.concurrency&&n.saturated(),n._worker(i.data,Zee(n._next(i)))}},this._worker=t,r===0)throw new Error("Concurrency must not be zero");this.concurrency=r,this.buffer=r/4}return e.prototype._next=function(t){var r=this;return function(){for(var n=arguments,i=[],o=0;o<arguments.length;o++)i[o]=n[o];r.workers-=1,t.callback.apply(t,i),i[0]!=null&&r.error(i[0],t.data),r.workers<=r.concurrency-r.buffer&&r.unsaturated(),r.idle()&&r.drain(),r.process()}},e.prototype.push=function(t,r){this._insert(t,!1,r)},e.prototype.kill=function(){this.workers=0,this.drain=Fl,this.started=!1,this._tasks=[]},e.prototype.unshift=function(t,r){this._insert(t,!0,r)},e.prototype.length=function(){return this._tasks.length},e.prototype.running=function(){return this.workers},e.prototype.idle=function(){return this._tasks.length+this.workers===0},e.prototype.pause=function(){this.paused!==!0&&(this.paused=!0)},e.prototype.resume=function(){if(this.paused!==!1){this.paused=!1;for(var t=1;t<=this.concurrency;t++)this.process()}},e.eachSeries=function(t,r,n,i){var o=0,s=t.length;function a(l){if(l||o===s){n&&n(l);return}i?setTimeout(function(){r(t[o++],a)},1):r(t[o++],a)}a()},e.queue=function(t,r){return new e(t,r)},e}(),E_=100,Qee=/(#[\w-]+)?$/,ls=function(){function e(t,r){var n=this;t===void 0&&(t=""),r===void 0&&(r=10),this.progress=0,this.loading=!1,this.defaultQueryString="",this._beforeMiddleware=[],this._afterMiddleware=[],this._resourcesParsing=[],this._boundLoadResource=function(l,u){return n._loadResource(l,u)},this.resources={},this.baseUrl=t,this._beforeMiddleware=[],this._afterMiddleware=[],this._resourcesParsing=[],this._boundLoadResource=function(l,u){return n._loadResource(l,u)},this._queue=S_.queue(this._boundLoadResource,r),this._queue.pause(),this.resources={},this.onProgress=new Ls,this.onError=new Ls,this.onLoad=new Ls,this.onStart=new Ls,this.onComplete=new Ls;for(var i=0;i<e._plugins.length;++i){var o=e._plugins[i],s=o.pre,a=o.use;s&&this.pre(s),a&&this.use(a)}this._protected=!1}return e.prototype._add=function(t,r,n,i){if(this.loading&&(!n||!n.parentResource))throw new Error("Cannot add resources while the loader is running.");if(this.resources[t])throw new Error('Resource named "'+t+'" already exists.');if(r=this._prepareUrl(r),this.resources[t]=new Tr(t,r,n),typeof i=="function"&&this.resources[t].onAfterMiddleware.once(i),this.loading){for(var o=n.parentResource,s=[],a=0;a<o.children.length;++a)o.children[a].isComplete||s.push(o.children[a]);var l=o.progressChunk*(s.length+1),u=l/(s.length+2);o.children.push(this.resources[t]),o.progressChunk=u;for(var a=0;a<s.length;++a)s[a].progressChunk=u;this.resources[t].progressChunk=u}return this._queue.push(this.resources[t]),this},e.prototype.pre=function(t){return this._beforeMiddleware.push(t),this},e.prototype.use=function(t){return this._afterMiddleware.push(t),this},e.prototype.reset=function(){this.progress=0,this.loading=!1,this._queue.kill(),this._queue.pause();for(var t in this.resources){var r=this.resources[t];r._onLoadBinding&&r._onLoadBinding.detach(),r.isLoading&&r.abort("loader reset")}return this.resources={},this},e.prototype.load=function(t){if(typeof t=="function"&&this.onComplete.once(t),this.loading)return this;if(this._queue.idle())this._onStart(),this._onComplete();else{for(var r=this._queue._tasks.length,n=E_/r,i=0;i<this._queue._tasks.length;++i)this._queue._tasks[i].data.progressChunk=n;this._onStart(),this._queue.resume()}return this},Object.defineProperty(e.prototype,"concurrency",{get:function(){return this._queue.concurrency},set:function(t){this._queue.concurrency=t},enumerable:!1,configurable:!0}),e.prototype._prepareUrl=function(t){var r=KO(t,{strictMode:!0}),n;if(r.protocol||!r.path||t.indexOf("//")===0?n=t:this.baseUrl.length&&this.baseUrl.lastIndexOf("/")!==this.baseUrl.length-1&&t.charAt(0)!=="/"?n=this.baseUrl+"/"+t:n=this.baseUrl+t,this.defaultQueryString){var i=Qee.exec(n)[0];n=n.slice(0,n.length-i.length),n.indexOf("?")!==-1?n+="&"+this.defaultQueryString:n+="?"+this.defaultQueryString,n+=i}return n},e.prototype._loadResource=function(t,r){var n=this;t._dequeue=r,S_.eachSeries(this._beforeMiddleware,function(i,o){i.call(n,t,function(){o(t.isComplete?{}:null)})},function(){t.isComplete?n._onLoad(t):(t._onLoadBinding=t.onComplete.once(n._onLoad,n),t.load())},!0)},e.prototype._onStart=function(){this.progress=0,this.loading=!0,this.onStart.dispatch(this)},e.prototype._onComplete=function(){this.progress=E_,this.loading=!1,this.onComplete.dispatch(this,this.resources)},e.prototype._onLoad=function(t){var r=this;t._onLoadBinding=null,this._resourcesParsing.push(t),t._dequeue(),S_.eachSeries(this._afterMiddleware,function(n,i){n.call(r,t,i)},function(){t.onAfterMiddleware.dispatch(t),r.progress=Math.min(E_,r.progress+t.progressChunk),r.onProgress.dispatch(r,t),t.error?r.onError.dispatch(t.error,r,t):r.onLoad.dispatch(r,t),r._resourcesParsing.splice(r._resourcesParsing.indexOf(t),1),r._queue.idle()&&r._resourcesParsing.length===0&&r._onComplete()},!0)},e.prototype.destroy=function(){this._protected||this.reset()},Object.defineProperty(e,"shared",{get:function(){var t=e._shared;return t||(t=new e,t._protected=!0,e._shared=t),t},enumerable:!1,configurable:!0}),e.registerPlugin=function(t){return e._plugins.push(t),t.add&&t.add(),e},e._plugins=[],e}();ls.prototype.add=function(t,r,n,i){if(Array.isArray(t)){for(var o=0;o<t.length;++o)this.add(t[o]);return this}if(typeof t=="object"&&(n=t,i=r||n.callback||n.onComplete,r=n.url,t=n.name||n.key||n.url),typeof r!="string"&&(i=n,n=r,r=t),typeof r!="string")throw new Error("No url passed to add resource to loader.");return typeof n=="function"&&(i=n,n=null),this._add(t,r,n,i)};var ete=function(){function e(){}return e.init=function(t){t=Object.assign({sharedLoader:!1},t),this.loader=t.sharedLoader?ls.shared:new ls},e.destroy=function(){this.loader&&(this.loader.destroy(),this.loader=null)},e}(),tte=function(){function e(){}return e.add=function(){Tr.setExtensionLoadType("svg",Tr.LOAD_TYPE.XHR),Tr.setExtensionXhrType("svg",Tr.XHR_RESPONSE_TYPE.TEXT)},e.use=function(t,r){if(t.data&&(t.type===Tr.TYPE.IMAGE||t.extension==="svg")){var n=t.data,i=t.url,o=t.name,s=t.metadata;tt.fromLoader(n,i,o,s).then(function(a){t.texture=a,r()}).catch(r)}else r()},e}(),rte="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function nte(e){for(var t="",r=0;r<e.length;){for(var n=[0,0,0],i=[0,0,0,0],o=0;o<n.length;++o)r<e.length?n[o]=e.charCodeAt(r++)&255:n[o]=0;i[0]=n[0]>>2,i[1]=(n[0]&3)<<4|n[1]>>4,i[2]=(n[1]&15)<<2|n[2]>>6,i[3]=n[2]&63;var s=r-(e.length-1);switch(s){case 2:i[3]=64,i[2]=64;break;case 1:i[3]=64;break}for(var o=0;o<i.length;++o)t+=rte.charAt(i[o])}return t}function ite(e,t){if(!e.data){t();return}if(e.xhr&&e.xhrType===Tr.XHR_RESPONSE_TYPE.BLOB){if(!self.Blob||typeof e.data=="string"){var r=e.xhr.getResponseHeader("content-type");if(r&&r.indexOf("image")===0){e.data=new Image,e.data.src="data:"+r+";base64,"+nte(e.xhr.responseText),e.type=Tr.TYPE.IMAGE,e.data.onload=function(){e.data.onload=null,t()};return}}else if(e.data.type.indexOf("image")===0){var n=globalThis.URL||globalThis.webkitURL,i=n.createObjectURL(e.data);e.blob=e.data,e.data=new Image,e.data.src=i,e.type=Tr.TYPE.IMAGE,e.data.onload=function(){n.revokeObjectURL(i),e.data.onload=null,t()};return}}t()}ls.registerPlugin({use:ite});ls.registerPlugin(tte);/*!
 * @pixi/compressed-textures - v6.4.2
 * Compiled Thu, 02 Jun 2022 15:39:26 UTC
 *
 * @pixi/compressed-textures is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var Vt,ft;(function(e){e[e.COMPRESSED_RGB_S3TC_DXT1_EXT=33776]="COMPRESSED_RGB_S3TC_DXT1_EXT",e[e.COMPRESSED_RGBA_S3TC_DXT1_EXT=33777]="COMPRESSED_RGBA_S3TC_DXT1_EXT",e[e.COMPRESSED_RGBA_S3TC_DXT3_EXT=33778]="COMPRESSED_RGBA_S3TC_DXT3_EXT",e[e.COMPRESSED_RGBA_S3TC_DXT5_EXT=33779]="COMPRESSED_RGBA_S3TC_DXT5_EXT",e[e.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT=35917]="COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT",e[e.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT=35918]="COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT",e[e.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT=35919]="COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT",e[e.COMPRESSED_SRGB_S3TC_DXT1_EXT=35916]="COMPRESSED_SRGB_S3TC_DXT1_EXT",e[e.COMPRESSED_R11_EAC=37488]="COMPRESSED_R11_EAC",e[e.COMPRESSED_SIGNED_R11_EAC=37489]="COMPRESSED_SIGNED_R11_EAC",e[e.COMPRESSED_RG11_EAC=37490]="COMPRESSED_RG11_EAC",e[e.COMPRESSED_SIGNED_RG11_EAC=37491]="COMPRESSED_SIGNED_RG11_EAC",e[e.COMPRESSED_RGB8_ETC2=37492]="COMPRESSED_RGB8_ETC2",e[e.COMPRESSED_RGBA8_ETC2_EAC=37496]="COMPRESSED_RGBA8_ETC2_EAC",e[e.COMPRESSED_SRGB8_ETC2=37493]="COMPRESSED_SRGB8_ETC2",e[e.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC=37497]="COMPRESSED_SRGB8_ALPHA8_ETC2_EAC",e[e.COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2=37494]="COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2",e[e.COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2=37495]="COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2",e[e.COMPRESSED_RGB_PVRTC_4BPPV1_IMG=35840]="COMPRESSED_RGB_PVRTC_4BPPV1_IMG",e[e.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG=35842]="COMPRESSED_RGBA_PVRTC_4BPPV1_IMG",e[e.COMPRESSED_RGB_PVRTC_2BPPV1_IMG=35841]="COMPRESSED_RGB_PVRTC_2BPPV1_IMG",e[e.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG=35843]="COMPRESSED_RGBA_PVRTC_2BPPV1_IMG",e[e.COMPRESSED_RGB_ETC1_WEBGL=36196]="COMPRESSED_RGB_ETC1_WEBGL",e[e.COMPRESSED_RGB_ATC_WEBGL=35986]="COMPRESSED_RGB_ATC_WEBGL",e[e.COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL=35986]="COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL",e[e.COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL=34798]="COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL"})(ft||(ft={}));var kg=(Vt={},Vt[ft.COMPRESSED_RGB_S3TC_DXT1_EXT]=.5,Vt[ft.COMPRESSED_RGBA_S3TC_DXT1_EXT]=.5,Vt[ft.COMPRESSED_RGBA_S3TC_DXT3_EXT]=1,Vt[ft.COMPRESSED_RGBA_S3TC_DXT5_EXT]=1,Vt[ft.COMPRESSED_SRGB_S3TC_DXT1_EXT]=.5,Vt[ft.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT]=.5,Vt[ft.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT]=1,Vt[ft.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT]=1,Vt[ft.COMPRESSED_R11_EAC]=.5,Vt[ft.COMPRESSED_SIGNED_R11_EAC]=.5,Vt[ft.COMPRESSED_RG11_EAC]=1,Vt[ft.COMPRESSED_SIGNED_RG11_EAC]=1,Vt[ft.COMPRESSED_RGB8_ETC2]=.5,Vt[ft.COMPRESSED_RGBA8_ETC2_EAC]=1,Vt[ft.COMPRESSED_SRGB8_ETC2]=.5,Vt[ft.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC]=1,Vt[ft.COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2]=.5,Vt[ft.COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2]=.5,Vt[ft.COMPRESSED_RGB_PVRTC_4BPPV1_IMG]=.5,Vt[ft.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG]=.5,Vt[ft.COMPRESSED_RGB_PVRTC_2BPPV1_IMG]=.25,Vt[ft.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG]=.25,Vt[ft.COMPRESSED_RGB_ETC1_WEBGL]=.5,Vt[ft.COMPRESSED_RGB_ATC_WEBGL]=.5,Vt[ft.COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL]=1,Vt[ft.COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL]=1,Vt);/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var Kw=function(e,t){return Kw=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])},Kw(e,t)};function qO(e,t){Kw(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}function ote(e,t,r,n){return new(r||(r=Promise))(function(i,o){function s(u){try{l(n.next(u))}catch(c){o(c)}}function a(u){try{l(n.throw(u))}catch(c){o(c)}}function l(u){u.done?i(u.value):new r(function(c){c(u.value)}).then(s,a)}l((n=n.apply(e,t||[])).next())})}function ste(e,t){var r={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,s;return s={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function a(u){return function(c){return l([u,c])}}function l(u){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(o=u[0]&2?i.return:u[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,u[1])).done)return o;switch(i=0,o&&(u=[u[0]&2,o.value]),u[0]){case 0:case 1:o=u;break;case 4:return r.label++,{value:u[1],done:!1};case 5:r.label++,i=u[1],u=[0];continue;case 7:u=r.ops.pop(),r.trys.pop();continue;default:if(o=r.trys,!(o=o.length>0&&o[o.length-1])&&(u[0]===6||u[0]===2)){r=0;continue}if(u[0]===3&&(!o||u[1]>o[0]&&u[1]<o[3])){r.label=u[1];break}if(u[0]===6&&r.label<o[1]){r.label=o[1],o=u;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(u);break}o[2]&&r.ops.pop(),r.trys.pop();continue}u=t.call(e,r)}catch(c){u=[6,c],i=0}finally{n=o=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}var ate=function(e){qO(t,e);function t(r,n){n===void 0&&(n={width:1,height:1,autoLoad:!0});var i=this,o,s;return typeof r=="string"?(o=r,s=new Uint8Array):(o=null,s=r),i=e.call(this,s,n)||this,i.origin=o,i.buffer=s?new jw(s):null,i.origin&&n.autoLoad!==!1&&i.load(),s&&s.length&&(i.loaded=!0,i.onBlobLoaded(i.buffer.rawBinaryData)),i}return t.prototype.onBlobLoaded=function(r){},t.prototype.load=function(){return ote(this,void 0,Promise,function(){var r,n,i;return ste(this,function(o){switch(o.label){case 0:return[4,fetch(this.origin)];case 1:return r=o.sent(),[4,r.blob()];case 2:return n=o.sent(),[4,n.arrayBuffer()];case 3:return i=o.sent(),this.data=new Uint32Array(i),this.buffer=new jw(i),this.loaded=!0,this.onBlobLoaded(i),this.update(),[2,this]}})})},t}(Gp),qw=function(e){qO(t,e);function t(r,n){var i=e.call(this,r,n)||this;return i.format=n.format,i.levels=n.levels||1,i._width=n.width,i._height=n.height,i._extension=t._formatToExtension(i.format),(n.levelBuffers||i.buffer)&&(i._levelBuffers=n.levelBuffers||t._createLevelBuffers(r instanceof Uint8Array?r:i.buffer.uint8View,i.format,i.levels,4,4,i.width,i.height)),i}return t.prototype.upload=function(r,n,i){var o=r.gl,s=r.context.extensions[this._extension];if(!s)throw new Error(this._extension+" textures are not supported on the current machine");if(!this._levelBuffers)return!1;for(var a=0,l=this.levels;a<l;a++){var u=this._levelBuffers[a],c=u.levelID,f=u.levelWidth,p=u.levelHeight,m=u.levelBuffer;o.compressedTexImage2D(o.TEXTURE_2D,c,this.format,f,p,0,m)}return!0},t.prototype.onBlobLoaded=function(){this._levelBuffers=t._createLevelBuffers(this.buffer.uint8View,this.format,this.levels,4,4,this.width,this.height)},t._formatToExtension=function(r){if(r>=33776&&r<=33779)return"s3tc";if(r>=37488&&r<=37497)return"etc";if(r>=35840&&r<=35843)return"pvrtc";if(r>=36196)return"etc1";if(r>=35986&&r<=34798)return"atc";throw new Error("Invalid (compressed) texture format given!")},t._createLevelBuffers=function(r,n,i,o,s,a,l){for(var u=new Array(i),c=r.byteOffset,f=a,p=l,m=f+o-1&~(o-1),g=p+s-1&~(s-1),b=m*g*kg[n],y=0;y<i;y++)u[y]={levelID:y,levelWidth:i>1?f:m,levelHeight:i>1?p:g,levelBuffer:new Uint8Array(r.buffer,c,b)},c+=b,f=f>>1||1,p=p>>1||1,m=f+o-1&~(o-1),g=p+s-1&~(s-1),b=m*g*kg[n];return u},t}(ate),lte=function(){function e(){}return e.use=function(t,r){var n=t.data,i=this;if(t.type===Tr.TYPE.JSON&&n&&n.cacheID&&n.textures){for(var o=n.textures,s=void 0,a=void 0,l=0,u=o.length;l<u;l++){var c=o[l],f=c.src,p=c.format;if(p||(a=f),e.textureFormats[p]){s=f;break}}if(s=s||a,!s){r(new Error("Cannot load compressed-textures in "+t.url+", make sure you provide a fallback"));return}if(s===t.url){r(new Error("URL of compressed texture cannot be the same as the manifest's URL"));return}var m={crossOrigin:t.crossOrigin,metadata:t.metadata.imageMetadata,parentResource:t},g=Uc.resolve(t.url.replace(i.baseUrl,""),s),b=n.cacheID;i.add(b,g,m,function(y){if(y.error){r(y.error);return}var w=y.texture,x=w===void 0?null:w,T=y.textures,I=T===void 0?{}:T;Object.assign(t,{texture:x,textures:I}),r()})}else r()},Object.defineProperty(e,"textureExtensions",{get:function(){if(!e._textureExtensions){var t=document.createElement("canvas"),r=t.getContext("webgl");if(!r)return console.warn("WebGL not available for compressed textures. Silently failing."),{};var n={s3tc:r.getExtension("WEBGL_compressed_texture_s3tc"),s3tc_sRGB:r.getExtension("WEBGL_compressed_texture_s3tc_srgb"),etc:r.getExtension("WEBGL_compressed_texture_etc"),etc1:r.getExtension("WEBGL_compressed_texture_etc1"),pvrtc:r.getExtension("WEBGL_compressed_texture_pvrtc")||r.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc"),atc:r.getExtension("WEBGL_compressed_texture_atc"),astc:r.getExtension("WEBGL_compressed_texture_astc")};e._textureExtensions=n}return e._textureExtensions},enumerable:!1,configurable:!0}),Object.defineProperty(e,"textureFormats",{get:function(){if(!e._textureFormats){var t=e.textureExtensions;e._textureFormats={};for(var r in t){var n=t[r];!n||Object.assign(e._textureFormats,Object.getPrototypeOf(n))}}return e._textureFormats},enumerable:!1,configurable:!0}),e}();function ZO(e,t,r){var n={textures:{},texture:null};if(!t)return n;var i=t.map(function(o){return new tt(new xt(o,Object.assign({mipmap:Js.OFF,alphaMode:So.NO_PREMULTIPLIED_ALPHA},r)))});return i.forEach(function(o,s){var a=o.baseTexture,l=e+"-"+(s+1);xt.addToCache(a,l),tt.addToCache(o,l),s===0&&(xt.addToCache(a,e),tt.addToCache(o,e),n.texture=o),n.textures[l]=o}),n}var Bf,ho;Tr.setExtensionXhrType("dds",Tr.XHR_RESPONSE_TYPE.BUFFER);var C_=4,Ov=124,ute=32,xI=20,cte=542327876,Lv={SIZE:1,FLAGS:2,HEIGHT:3,WIDTH:4,MIPMAP_COUNT:7,PIXEL_FORMAT:19},hte={SIZE:0,FLAGS:1,FOURCC:2,RGB_BITCOUNT:3,R_BIT_MASK:4,G_BIT_MASK:5,B_BIT_MASK:6,A_BIT_MASK:7},Uv={DXGI_FORMAT:0,RESOURCE_DIMENSION:1,MISC_FLAG:2,ARRAY_SIZE:3,MISC_FLAGS2:4},mo;(function(e){e[e.DXGI_FORMAT_UNKNOWN=0]="DXGI_FORMAT_UNKNOWN",e[e.DXGI_FORMAT_R32G32B32A32_TYPELESS=1]="DXGI_FORMAT_R32G32B32A32_TYPELESS",e[e.DXGI_FORMAT_R32G32B32A32_FLOAT=2]="DXGI_FORMAT_R32G32B32A32_FLOAT",e[e.DXGI_FORMAT_R32G32B32A32_UINT=3]="DXGI_FORMAT_R32G32B32A32_UINT",e[e.DXGI_FORMAT_R32G32B32A32_SINT=4]="DXGI_FORMAT_R32G32B32A32_SINT",e[e.DXGI_FORMAT_R32G32B32_TYPELESS=5]="DXGI_FORMAT_R32G32B32_TYPELESS",e[e.DXGI_FORMAT_R32G32B32_FLOAT=6]="DXGI_FORMAT_R32G32B32_FLOAT",e[e.DXGI_FORMAT_R32G32B32_UINT=7]="DXGI_FORMAT_R32G32B32_UINT",e[e.DXGI_FORMAT_R32G32B32_SINT=8]="DXGI_FORMAT_R32G32B32_SINT",e[e.DXGI_FORMAT_R16G16B16A16_TYPELESS=9]="DXGI_FORMAT_R16G16B16A16_TYPELESS",e[e.DXGI_FORMAT_R16G16B16A16_FLOAT=10]="DXGI_FORMAT_R16G16B16A16_FLOAT",e[e.DXGI_FORMAT_R16G16B16A16_UNORM=11]="DXGI_FORMAT_R16G16B16A16_UNORM",e[e.DXGI_FORMAT_R16G16B16A16_UINT=12]="DXGI_FORMAT_R16G16B16A16_UINT",e[e.DXGI_FORMAT_R16G16B16A16_SNORM=13]="DXGI_FORMAT_R16G16B16A16_SNORM",e[e.DXGI_FORMAT_R16G16B16A16_SINT=14]="DXGI_FORMAT_R16G16B16A16_SINT",e[e.DXGI_FORMAT_R32G32_TYPELESS=15]="DXGI_FORMAT_R32G32_TYPELESS",e[e.DXGI_FORMAT_R32G32_FLOAT=16]="DXGI_FORMAT_R32G32_FLOAT",e[e.DXGI_FORMAT_R32G32_UINT=17]="DXGI_FORMAT_R32G32_UINT",e[e.DXGI_FORMAT_R32G32_SINT=18]="DXGI_FORMAT_R32G32_SINT",e[e.DXGI_FORMAT_R32G8X24_TYPELESS=19]="DXGI_FORMAT_R32G8X24_TYPELESS",e[e.DXGI_FORMAT_D32_FLOAT_S8X24_UINT=20]="DXGI_FORMAT_D32_FLOAT_S8X24_UINT",e[e.DXGI_FORMAT_R32_FLOAT_X8X24_TYPELESS=21]="DXGI_FORMAT_R32_FLOAT_X8X24_TYPELESS",e[e.DXGI_FORMAT_X32_TYPELESS_G8X24_UINT=22]="DXGI_FORMAT_X32_TYPELESS_G8X24_UINT",e[e.DXGI_FORMAT_R10G10B10A2_TYPELESS=23]="DXGI_FORMAT_R10G10B10A2_TYPELESS",e[e.DXGI_FORMAT_R10G10B10A2_UNORM=24]="DXGI_FORMAT_R10G10B10A2_UNORM",e[e.DXGI_FORMAT_R10G10B10A2_UINT=25]="DXGI_FORMAT_R10G10B10A2_UINT",e[e.DXGI_FORMAT_R11G11B10_FLOAT=26]="DXGI_FORMAT_R11G11B10_FLOAT",e[e.DXGI_FORMAT_R8G8B8A8_TYPELESS=27]="DXGI_FORMAT_R8G8B8A8_TYPELESS",e[e.DXGI_FORMAT_R8G8B8A8_UNORM=28]="DXGI_FORMAT_R8G8B8A8_UNORM",e[e.DXGI_FORMAT_R8G8B8A8_UNORM_SRGB=29]="DXGI_FORMAT_R8G8B8A8_UNORM_SRGB",e[e.DXGI_FORMAT_R8G8B8A8_UINT=30]="DXGI_FORMAT_R8G8B8A8_UINT",e[e.DXGI_FORMAT_R8G8B8A8_SNORM=31]="DXGI_FORMAT_R8G8B8A8_SNORM",e[e.DXGI_FORMAT_R8G8B8A8_SINT=32]="DXGI_FORMAT_R8G8B8A8_SINT",e[e.DXGI_FORMAT_R16G16_TYPELESS=33]="DXGI_FORMAT_R16G16_TYPELESS",e[e.DXGI_FORMAT_R16G16_FLOAT=34]="DXGI_FORMAT_R16G16_FLOAT",e[e.DXGI_FORMAT_R16G16_UNORM=35]="DXGI_FORMAT_R16G16_UNORM",e[e.DXGI_FORMAT_R16G16_UINT=36]="DXGI_FORMAT_R16G16_UINT",e[e.DXGI_FORMAT_R16G16_SNORM=37]="DXGI_FORMAT_R16G16_SNORM",e[e.DXGI_FORMAT_R16G16_SINT=38]="DXGI_FORMAT_R16G16_SINT",e[e.DXGI_FORMAT_R32_TYPELESS=39]="DXGI_FORMAT_R32_TYPELESS",e[e.DXGI_FORMAT_D32_FLOAT=40]="DXGI_FORMAT_D32_FLOAT",e[e.DXGI_FORMAT_R32_FLOAT=41]="DXGI_FORMAT_R32_FLOAT",e[e.DXGI_FORMAT_R32_UINT=42]="DXGI_FORMAT_R32_UINT",e[e.DXGI_FORMAT_R32_SINT=43]="DXGI_FORMAT_R32_SINT",e[e.DXGI_FORMAT_R24G8_TYPELESS=44]="DXGI_FORMAT_R24G8_TYPELESS",e[e.DXGI_FORMAT_D24_UNORM_S8_UINT=45]="DXGI_FORMAT_D24_UNORM_S8_UINT",e[e.DXGI_FORMAT_R24_UNORM_X8_TYPELESS=46]="DXGI_FORMAT_R24_UNORM_X8_TYPELESS",e[e.DXGI_FORMAT_X24_TYPELESS_G8_UINT=47]="DXGI_FORMAT_X24_TYPELESS_G8_UINT",e[e.DXGI_FORMAT_R8G8_TYPELESS=48]="DXGI_FORMAT_R8G8_TYPELESS",e[e.DXGI_FORMAT_R8G8_UNORM=49]="DXGI_FORMAT_R8G8_UNORM",e[e.DXGI_FORMAT_R8G8_UINT=50]="DXGI_FORMAT_R8G8_UINT",e[e.DXGI_FORMAT_R8G8_SNORM=51]="DXGI_FORMAT_R8G8_SNORM",e[e.DXGI_FORMAT_R8G8_SINT=52]="DXGI_FORMAT_R8G8_SINT",e[e.DXGI_FORMAT_R16_TYPELESS=53]="DXGI_FORMAT_R16_TYPELESS",e[e.DXGI_FORMAT_R16_FLOAT=54]="DXGI_FORMAT_R16_FLOAT",e[e.DXGI_FORMAT_D16_UNORM=55]="DXGI_FORMAT_D16_UNORM",e[e.DXGI_FORMAT_R16_UNORM=56]="DXGI_FORMAT_R16_UNORM",e[e.DXGI_FORMAT_R16_UINT=57]="DXGI_FORMAT_R16_UINT",e[e.DXGI_FORMAT_R16_SNORM=58]="DXGI_FORMAT_R16_SNORM",e[e.DXGI_FORMAT_R16_SINT=59]="DXGI_FORMAT_R16_SINT",e[e.DXGI_FORMAT_R8_TYPELESS=60]="DXGI_FORMAT_R8_TYPELESS",e[e.DXGI_FORMAT_R8_UNORM=61]="DXGI_FORMAT_R8_UNORM",e[e.DXGI_FORMAT_R8_UINT=62]="DXGI_FORMAT_R8_UINT",e[e.DXGI_FORMAT_R8_SNORM=63]="DXGI_FORMAT_R8_SNORM",e[e.DXGI_FORMAT_R8_SINT=64]="DXGI_FORMAT_R8_SINT",e[e.DXGI_FORMAT_A8_UNORM=65]="DXGI_FORMAT_A8_UNORM",e[e.DXGI_FORMAT_R1_UNORM=66]="DXGI_FORMAT_R1_UNORM",e[e.DXGI_FORMAT_R9G9B9E5_SHAREDEXP=67]="DXGI_FORMAT_R9G9B9E5_SHAREDEXP",e[e.DXGI_FORMAT_R8G8_B8G8_UNORM=68]="DXGI_FORMAT_R8G8_B8G8_UNORM",e[e.DXGI_FORMAT_G8R8_G8B8_UNORM=69]="DXGI_FORMAT_G8R8_G8B8_UNORM",e[e.DXGI_FORMAT_BC1_TYPELESS=70]="DXGI_FORMAT_BC1_TYPELESS",e[e.DXGI_FORMAT_BC1_UNORM=71]="DXGI_FORMAT_BC1_UNORM",e[e.DXGI_FORMAT_BC1_UNORM_SRGB=72]="DXGI_FORMAT_BC1_UNORM_SRGB",e[e.DXGI_FORMAT_BC2_TYPELESS=73]="DXGI_FORMAT_BC2_TYPELESS",e[e.DXGI_FORMAT_BC2_UNORM=74]="DXGI_FORMAT_BC2_UNORM",e[e.DXGI_FORMAT_BC2_UNORM_SRGB=75]="DXGI_FORMAT_BC2_UNORM_SRGB",e[e.DXGI_FORMAT_BC3_TYPELESS=76]="DXGI_FORMAT_BC3_TYPELESS",e[e.DXGI_FORMAT_BC3_UNORM=77]="DXGI_FORMAT_BC3_UNORM",e[e.DXGI_FORMAT_BC3_UNORM_SRGB=78]="DXGI_FORMAT_BC3_UNORM_SRGB",e[e.DXGI_FORMAT_BC4_TYPELESS=79]="DXGI_FORMAT_BC4_TYPELESS",e[e.DXGI_FORMAT_BC4_UNORM=80]="DXGI_FORMAT_BC4_UNORM",e[e.DXGI_FORMAT_BC4_SNORM=81]="DXGI_FORMAT_BC4_SNORM",e[e.DXGI_FORMAT_BC5_TYPELESS=82]="DXGI_FORMAT_BC5_TYPELESS",e[e.DXGI_FORMAT_BC5_UNORM=83]="DXGI_FORMAT_BC5_UNORM",e[e.DXGI_FORMAT_BC5_SNORM=84]="DXGI_FORMAT_BC5_SNORM",e[e.DXGI_FORMAT_B5G6R5_UNORM=85]="DXGI_FORMAT_B5G6R5_UNORM",e[e.DXGI_FORMAT_B5G5R5A1_UNORM=86]="DXGI_FORMAT_B5G5R5A1_UNORM",e[e.DXGI_FORMAT_B8G8R8A8_UNORM=87]="DXGI_FORMAT_B8G8R8A8_UNORM",e[e.DXGI_FORMAT_B8G8R8X8_UNORM=88]="DXGI_FORMAT_B8G8R8X8_UNORM",e[e.DXGI_FORMAT_R10G10B10_XR_BIAS_A2_UNORM=89]="DXGI_FORMAT_R10G10B10_XR_BIAS_A2_UNORM",e[e.DXGI_FORMAT_B8G8R8A8_TYPELESS=90]="DXGI_FORMAT_B8G8R8A8_TYPELESS",e[e.DXGI_FORMAT_B8G8R8A8_UNORM_SRGB=91]="DXGI_FORMAT_B8G8R8A8_UNORM_SRGB",e[e.DXGI_FORMAT_B8G8R8X8_TYPELESS=92]="DXGI_FORMAT_B8G8R8X8_TYPELESS",e[e.DXGI_FORMAT_B8G8R8X8_UNORM_SRGB=93]="DXGI_FORMAT_B8G8R8X8_UNORM_SRGB",e[e.DXGI_FORMAT_BC6H_TYPELESS=94]="DXGI_FORMAT_BC6H_TYPELESS",e[e.DXGI_FORMAT_BC6H_UF16=95]="DXGI_FORMAT_BC6H_UF16",e[e.DXGI_FORMAT_BC6H_SF16=96]="DXGI_FORMAT_BC6H_SF16",e[e.DXGI_FORMAT_BC7_TYPELESS=97]="DXGI_FORMAT_BC7_TYPELESS",e[e.DXGI_FORMAT_BC7_UNORM=98]="DXGI_FORMAT_BC7_UNORM",e[e.DXGI_FORMAT_BC7_UNORM_SRGB=99]="DXGI_FORMAT_BC7_UNORM_SRGB",e[e.DXGI_FORMAT_AYUV=100]="DXGI_FORMAT_AYUV",e[e.DXGI_FORMAT_Y410=101]="DXGI_FORMAT_Y410",e[e.DXGI_FORMAT_Y416=102]="DXGI_FORMAT_Y416",e[e.DXGI_FORMAT_NV12=103]="DXGI_FORMAT_NV12",e[e.DXGI_FORMAT_P010=104]="DXGI_FORMAT_P010",e[e.DXGI_FORMAT_P016=105]="DXGI_FORMAT_P016",e[e.DXGI_FORMAT_420_OPAQUE=106]="DXGI_FORMAT_420_OPAQUE",e[e.DXGI_FORMAT_YUY2=107]="DXGI_FORMAT_YUY2",e[e.DXGI_FORMAT_Y210=108]="DXGI_FORMAT_Y210",e[e.DXGI_FORMAT_Y216=109]="DXGI_FORMAT_Y216",e[e.DXGI_FORMAT_NV11=110]="DXGI_FORMAT_NV11",e[e.DXGI_FORMAT_AI44=111]="DXGI_FORMAT_AI44",e[e.DXGI_FORMAT_IA44=112]="DXGI_FORMAT_IA44",e[e.DXGI_FORMAT_P8=113]="DXGI_FORMAT_P8",e[e.DXGI_FORMAT_A8P8=114]="DXGI_FORMAT_A8P8",e[e.DXGI_FORMAT_B4G4R4A4_UNORM=115]="DXGI_FORMAT_B4G4R4A4_UNORM",e[e.DXGI_FORMAT_P208=116]="DXGI_FORMAT_P208",e[e.DXGI_FORMAT_V208=117]="DXGI_FORMAT_V208",e[e.DXGI_FORMAT_V408=118]="DXGI_FORMAT_V408",e[e.DXGI_FORMAT_SAMPLER_FEEDBACK_MIN_MIP_OPAQUE=119]="DXGI_FORMAT_SAMPLER_FEEDBACK_MIN_MIP_OPAQUE",e[e.DXGI_FORMAT_SAMPLER_FEEDBACK_MIP_REGION_USED_OPAQUE=120]="DXGI_FORMAT_SAMPLER_FEEDBACK_MIP_REGION_USED_OPAQUE",e[e.DXGI_FORMAT_FORCE_UINT=121]="DXGI_FORMAT_FORCE_UINT"})(mo||(mo={}));var Zw;(function(e){e[e.DDS_DIMENSION_TEXTURE1D=2]="DDS_DIMENSION_TEXTURE1D",e[e.DDS_DIMENSION_TEXTURE2D=3]="DDS_DIMENSION_TEXTURE2D",e[e.DDS_DIMENSION_TEXTURE3D=6]="DDS_DIMENSION_TEXTURE3D"})(Zw||(Zw={}));var fte=1,dte=2,pte=4,mte=64,vte=512,gte=131072,yte=827611204,_te=861165636,bte=894720068,wte=808540228,xte=4,Tte=(Bf={},Bf[yte]=ft.COMPRESSED_RGBA_S3TC_DXT1_EXT,Bf[_te]=ft.COMPRESSED_RGBA_S3TC_DXT3_EXT,Bf[bte]=ft.COMPRESSED_RGBA_S3TC_DXT5_EXT,Bf),Ste=(ho={},ho[mo.DXGI_FORMAT_BC1_TYPELESS]=ft.COMPRESSED_RGBA_S3TC_DXT1_EXT,ho[mo.DXGI_FORMAT_BC1_UNORM]=ft.COMPRESSED_RGBA_S3TC_DXT1_EXT,ho[mo.DXGI_FORMAT_BC2_TYPELESS]=ft.COMPRESSED_RGBA_S3TC_DXT3_EXT,ho[mo.DXGI_FORMAT_BC2_UNORM]=ft.COMPRESSED_RGBA_S3TC_DXT3_EXT,ho[mo.DXGI_FORMAT_BC3_TYPELESS]=ft.COMPRESSED_RGBA_S3TC_DXT5_EXT,ho[mo.DXGI_FORMAT_BC3_UNORM]=ft.COMPRESSED_RGBA_S3TC_DXT5_EXT,ho[mo.DXGI_FORMAT_BC1_UNORM_SRGB]=ft.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT,ho[mo.DXGI_FORMAT_BC2_UNORM_SRGB]=ft.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT,ho[mo.DXGI_FORMAT_BC3_UNORM_SRGB]=ft.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT,ho),Ete=function(){function e(){}return e.use=function(t,r){if(t.extension==="dds"&&t.data)try{Object.assign(t,ZO(t.name||t.url,e.parse(t.data),t.metadata))}catch(n){r(n);return}r()},e.parse=function(t){var r=new Uint32Array(t),n=r[0];if(n!==cte)throw new Error("Invalid DDS file magic word");var i=new Uint32Array(t,0,Ov/Uint32Array.BYTES_PER_ELEMENT),o=i[Lv.HEIGHT],s=i[Lv.WIDTH],a=i[Lv.MIPMAP_COUNT],l=new Uint32Array(t,Lv.PIXEL_FORMAT*Uint32Array.BYTES_PER_ELEMENT,ute/Uint32Array.BYTES_PER_ELEMENT),u=l[fte];if(u&pte){var c=l[hte.FOURCC];if(c!==wte){var f=Tte[c],p=C_+Ov,m=new Uint8Array(t,p),g=new qw(m,{format:f,width:s,height:o,levels:a});return[g]}var b=C_+Ov,y=new Uint32Array(r.buffer,b,xI/Uint32Array.BYTES_PER_ELEMENT),w=y[Uv.DXGI_FORMAT],x=y[Uv.RESOURCE_DIMENSION],T=y[Uv.MISC_FLAG],I=y[Uv.ARRAY_SIZE],R=Ste[w];if(R===void 0)throw new Error("DDSLoader cannot parse texture data with DXGI format "+w);if(T===xte)throw new Error("DDSLoader does not support cubemap textures");if(x===Zw.DDS_DIMENSION_TEXTURE3D)throw new Error("DDSLoader does not supported 3D texture data");var S=new Array,O=C_+Ov+xI;if(I===1)S.push(new Uint8Array(t,O));else{for(var P=kg[R],N=0,A=s,j=o,X=0;X<a;X++){var G=Math.max(1,A+3&-4),ne=Math.max(1,j+3&-4),W=G*ne*P;N+=W,A=A>>>1,j=j>>>1}for(var Y=O,X=0;X<I;X++)S.push(new Uint8Array(t,Y,N)),Y+=N}return S.map(function(de){return new qw(de,{format:R,width:s,height:o,levels:a})})}throw u&mte?new Error("DDSLoader does not support uncompressed texture data."):u&vte?new Error("DDSLoader does not supported YUV uncompressed texture data."):u&gte?new Error("DDSLoader does not support single-channel (lumninance) texture data!"):u&dte?new Error("DDSLoader does not support single-channel (alpha) texture data!"):new Error("DDSLoader failed to load a texture file due to an unknown reason!")},e}(),ba,Cs,Df;Tr.setExtensionXhrType("ktx",Tr.XHR_RESPONSE_TYPE.BUFFER);var TI=[171,75,84,88,32,49,49,187,13,10,26,10],Cte=67305985,fo={FILE_IDENTIFIER:0,ENDIANNESS:12,GL_TYPE:16,GL_TYPE_SIZE:20,GL_FORMAT:24,GL_INTERNAL_FORMAT:28,GL_BASE_INTERNAL_FORMAT:32,PIXEL_WIDTH:36,PIXEL_HEIGHT:40,PIXEL_DEPTH:44,NUMBER_OF_ARRAY_ELEMENTS:48,NUMBER_OF_FACES:52,NUMBER_OF_MIPMAP_LEVELS:56,BYTES_OF_KEY_VALUE_DATA:60},I_=64,SI=(ba={},ba[$e.UNSIGNED_BYTE]=1,ba[$e.UNSIGNED_SHORT]=2,ba[$e.INT]=4,ba[$e.UNSIGNED_INT]=4,ba[$e.FLOAT]=4,ba[$e.HALF_FLOAT]=8,ba),Ite=(Cs={},Cs[Te.RGBA]=4,Cs[Te.RGB]=3,Cs[Te.RG]=2,Cs[Te.RED]=1,Cs[Te.LUMINANCE]=1,Cs[Te.LUMINANCE_ALPHA]=2,Cs[Te.ALPHA]=1,Cs),Nte=(Df={},Df[$e.UNSIGNED_SHORT_4_4_4_4]=2,Df[$e.UNSIGNED_SHORT_5_5_5_1]=2,Df[$e.UNSIGNED_SHORT_5_6_5]=2,Df),Pte=function(){function e(){}return e.use=function(t,r){if(t.extension==="ktx"&&t.data)try{var n=t.name||t.url,i=e.parse(n,t.data),o=i.compressed,s=i.uncompressed,a=i.kvData;if(o){var l=ZO(n,o,t.metadata);if(a&&l.textures)for(var u in l.textures)l.textures[u].baseTexture.ktxKeyValueData=a;Object.assign(t,l)}else if(s){var c={};s.forEach(function(f,p){var m=new tt(new xt(f.resource,{mipmap:Js.OFF,alphaMode:So.NO_PREMULTIPLIED_ALPHA,type:f.type,format:f.format})),g=n+"-"+(p+1);a&&(m.baseTexture.ktxKeyValueData=a),xt.addToCache(m.baseTexture,g),tt.addToCache(m,g),p===0&&(c[n]=m,xt.addToCache(m.baseTexture,n),tt.addToCache(m,n)),c[g]=m}),Object.assign(t,{textures:c})}}catch(f){r(f);return}r()},e.parse=function(t,r){var n=new DataView(r);if(!e.validate(t,n))return null;var i=n.getUint32(fo.ENDIANNESS,!0)===Cte,o=n.getUint32(fo.GL_TYPE,i),s=n.getUint32(fo.GL_FORMAT,i),a=n.getUint32(fo.GL_INTERNAL_FORMAT,i),l=n.getUint32(fo.PIXEL_WIDTH,i),u=n.getUint32(fo.PIXEL_HEIGHT,i)||1,c=n.getUint32(fo.PIXEL_DEPTH,i)||1,f=n.getUint32(fo.NUMBER_OF_ARRAY_ELEMENTS,i)||1,p=n.getUint32(fo.NUMBER_OF_FACES,i),m=n.getUint32(fo.NUMBER_OF_MIPMAP_LEVELS,i),g=n.getUint32(fo.BYTES_OF_KEY_VALUE_DATA,i);if(u===0||c!==1)throw new Error("Only 2D textures are supported");if(p!==1)throw new Error("CubeTextures are not supported by KTXLoader yet!");if(f!==1)throw new Error("WebGL does not support array textures");var b=4,y=4,w=l+3&-4,x=u+3&-4,T=new Array(f),I=l*u;o===0&&(I=w*x);var R;if(o!==0?SI[o]?R=SI[o]*Ite[s]:R=Nte[o]:R=kg[a],R===void 0)throw new Error("Unable to resolve the pixel format stored in the *.ktx file!");for(var S=e.loadKeyValueData?e.parseKvData(n,g,i):null,O=I*R,P=O,N=l,A=u,j=w,X=x,G=I_+g,ne=0;ne<m;ne++){for(var W=n.getUint32(G,i),Y=G+4,de=0;de<f;de++){var le=T[de];le||(le=T[de]=new Array(m)),le[ne]={levelID:ne,levelWidth:m>1||o!==0?N:j,levelHeight:m>1||o!==0?A:X,levelBuffer:new Uint8Array(r,Y,P)},Y+=P}G+=W+4,G=G%4!==0?G+4-G%4:G,N=N>>1||1,A=A>>1||1,j=N+b-1&~(b-1),X=A+y-1&~(y-1),P=j*X*R}return o!==0?{uncompressed:T.map(function(ie){var Q=ie[0].levelBuffer,ee=!1;return o===$e.FLOAT?Q=new Float32Array(ie[0].levelBuffer.buffer,ie[0].levelBuffer.byteOffset,ie[0].levelBuffer.byteLength/4):o===$e.UNSIGNED_INT?(ee=!0,Q=new Uint32Array(ie[0].levelBuffer.buffer,ie[0].levelBuffer.byteOffset,ie[0].levelBuffer.byteLength/4)):o===$e.INT&&(ee=!0,Q=new Int32Array(ie[0].levelBuffer.buffer,ie[0].levelBuffer.byteOffset,ie[0].levelBuffer.byteLength/4)),{resource:new Gp(Q,{width:ie[0].levelWidth,height:ie[0].levelHeight}),type:o,format:ee?e.convertFormatToInteger(s):s}}),kvData:S}:{compressed:T.map(function(ie){return new qw(null,{format:a,width:l,height:u,levels:m,levelBuffers:ie})}),kvData:S}},e.validate=function(t,r){for(var n=0;n<TI.length;n++)if(r.getUint8(n)!==TI[n])return console.error(t+" is not a valid *.ktx file!"),!1;return!0},e.convertFormatToInteger=function(t){switch(t){case Te.RGBA:return Te.RGBA_INTEGER;case Te.RGB:return Te.RGB_INTEGER;case Te.RG:return Te.RG_INTEGER;case Te.RED:return Te.RED_INTEGER;default:return t}},e.parseKvData=function(t,r,n){for(var i=new Map,o=0;o<r;){var s=t.getUint32(I_+o,n),a=I_+o+4,l=3-(s+3)%4;if(s===0||s>r-o){console.error("KTXLoader: keyAndValueByteSize out of bounds");break}for(var u=0;u<s&&t.getUint8(a+u)!==0;u++);if(u===-1){console.error("KTXLoader: Failed to find null byte terminating kvData key");break}var c=new TextDecoder().decode(new Uint8Array(t.buffer,a,u)),f=new DataView(t.buffer,a+u+1,s-u-1);i.set(c,f),o+=4+s+l}return i},e.loadKeyValueData=!1,e}();/*!
 * @pixi/particle-container - v6.4.2
 * Compiled Thu, 02 Jun 2022 15:39:26 UTC
 *
 * @pixi/particle-container is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var Jw=function(e,t){return Jw=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])},Jw(e,t)};function JO(e,t){Jw(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var Ate=function(e){JO(t,e);function t(r,n,i,o){r===void 0&&(r=1500),i===void 0&&(i=16384),o===void 0&&(o=!1);var s=e.call(this)||this,a=16384;return i>a&&(i=a),s._properties=[!1,!0,!1,!1,!1],s._maxSize=r,s._batchSize=i,s._buffers=null,s._bufferUpdateIDs=[],s._updateID=0,s.interactiveChildren=!1,s.blendMode=Ze.NORMAL,s.autoResize=o,s.roundPixels=!0,s.baseTexture=null,s.setProperties(n),s._tint=0,s.tintRgb=new Float32Array(4),s.tint=16777215,s}return t.prototype.setProperties=function(r){r&&(this._properties[0]="vertices"in r||"scale"in r?!!r.vertices||!!r.scale:this._properties[0],this._properties[1]="position"in r?!!r.position:this._properties[1],this._properties[2]="rotation"in r?!!r.rotation:this._properties[2],this._properties[3]="uvs"in r?!!r.uvs:this._properties[3],this._properties[4]="tint"in r||"alpha"in r?!!r.tint||!!r.alpha:this._properties[4])},t.prototype.updateTransform=function(){this.displayObjectUpdateTransform()},Object.defineProperty(t.prototype,"tint",{get:function(){return this._tint},set:function(r){this._tint=r,al(r,this.tintRgb)},enumerable:!1,configurable:!0}),t.prototype.render=function(r){var n=this;!this.visible||this.worldAlpha<=0||!this.children.length||!this.renderable||(this.baseTexture||(this.baseTexture=this.children[0]._texture.baseTexture,this.baseTexture.valid||this.baseTexture.once("update",function(){return n.onChildrenChange(0)})),r.batch.setObjectRenderer(r.plugins.particle),r.plugins.particle.render(this))},t.prototype.onChildrenChange=function(r){for(var n=Math.floor(r/this._batchSize);this._bufferUpdateIDs.length<n;)this._bufferUpdateIDs.push(0);this._bufferUpdateIDs[n]=++this._updateID},t.prototype.dispose=function(){if(this._buffers){for(var r=0;r<this._buffers.length;++r)this._buffers[r].destroy();this._buffers=null}},t.prototype.destroy=function(r){e.prototype.destroy.call(this,r),this.dispose(),this._properties=null,this._buffers=null,this._bufferUpdateIDs=null},t}(Ri),EI=function(){function e(t,r,n){this.geometry=new Uh,this.indexBuffer=null,this.size=n,this.dynamicProperties=[],this.staticProperties=[];for(var i=0;i<t.length;++i){var o=t[i];o={attributeName:o.attributeName,size:o.size,uploadFunction:o.uploadFunction,type:o.type||$e.FLOAT,offset:o.offset},r[i]?this.dynamicProperties.push(o):this.staticProperties.push(o)}this.staticStride=0,this.staticBuffer=null,this.staticData=null,this.staticDataUint32=null,this.dynamicStride=0,this.dynamicBuffer=null,this.dynamicData=null,this.dynamicDataUint32=null,this._updateID=0,this.initBuffers()}return e.prototype.initBuffers=function(){var t=this.geometry,r=0;this.indexBuffer=new Rr(VJ(this.size),!0,!0),t.addIndex(this.indexBuffer),this.dynamicStride=0;for(var n=0;n<this.dynamicProperties.length;++n){var i=this.dynamicProperties[n];i.offset=r,r+=i.size,this.dynamicStride+=i.size}var o=new ArrayBuffer(this.size*this.dynamicStride*4*4);this.dynamicData=new Float32Array(o),this.dynamicDataUint32=new Uint32Array(o),this.dynamicBuffer=new Rr(this.dynamicData,!1,!1);var s=0;this.staticStride=0;for(var n=0;n<this.staticProperties.length;++n){var i=this.staticProperties[n];i.offset=s,s+=i.size,this.staticStride+=i.size}var a=new ArrayBuffer(this.size*this.staticStride*4*4);this.staticData=new Float32Array(a),this.staticDataUint32=new Uint32Array(a),this.staticBuffer=new Rr(this.staticData,!0,!1);for(var n=0;n<this.dynamicProperties.length;++n){var i=this.dynamicProperties[n];t.addAttribute(i.attributeName,this.dynamicBuffer,0,i.type===$e.UNSIGNED_BYTE,i.type,this.dynamicStride*4,i.offset*4)}for(var n=0;n<this.staticProperties.length;++n){var i=this.staticProperties[n];t.addAttribute(i.attributeName,this.staticBuffer,0,i.type===$e.UNSIGNED_BYTE,i.type,this.staticStride*4,i.offset*4)}},e.prototype.uploadDynamic=function(t,r,n){for(var i=0;i<this.dynamicProperties.length;i++){var o=this.dynamicProperties[i];o.uploadFunction(t,r,n,o.type===$e.UNSIGNED_BYTE?this.dynamicDataUint32:this.dynamicData,this.dynamicStride,o.offset)}this.dynamicBuffer._updateID++},e.prototype.uploadStatic=function(t,r,n){for(var i=0;i<this.staticProperties.length;i++){var o=this.staticProperties[i];o.uploadFunction(t,r,n,o.type===$e.UNSIGNED_BYTE?this.staticDataUint32:this.staticData,this.staticStride,o.offset)}this.staticBuffer._updateID++},e.prototype.destroy=function(){this.indexBuffer=null,this.dynamicProperties=null,this.dynamicBuffer=null,this.dynamicData=null,this.dynamicDataUint32=null,this.staticProperties=null,this.staticBuffer=null,this.staticData=null,this.staticDataUint32=null,this.geometry.destroy()},e}(),Rte=`varying vec2 vTextureCoord;
varying vec4 vColor;

uniform sampler2D uSampler;

void main(void){
    vec4 color = texture2D(uSampler, vTextureCoord) * vColor;
    gl_FragColor = color;
}`,kte=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;
attribute vec4 aColor;

attribute vec2 aPositionCoord;
attribute float aRotation;

uniform mat3 translationMatrix;
uniform vec4 uColor;

varying vec2 vTextureCoord;
varying vec4 vColor;

void main(void){
    float x = (aVertexPosition.x) * cos(aRotation) - (aVertexPosition.y) * sin(aRotation);
    float y = (aVertexPosition.x) * sin(aRotation) + (aVertexPosition.y) * cos(aRotation);

    vec2 v = vec2(x, y);
    v = v + aPositionCoord;

    gl_Position = vec4((translationMatrix * vec3(v, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = aTextureCoord;
    vColor = aColor * uColor;
}
`,Ote=function(e){JO(t,e);function t(r){var n=e.call(this,r)||this;return n.shader=null,n.properties=null,n.tempMatrix=new rr,n.properties=[{attributeName:"aVertexPosition",size:2,uploadFunction:n.uploadVertices,offset:0},{attributeName:"aPositionCoord",size:2,uploadFunction:n.uploadPosition,offset:0},{attributeName:"aRotation",size:1,uploadFunction:n.uploadRotation,offset:0},{attributeName:"aTextureCoord",size:2,uploadFunction:n.uploadUvs,offset:0},{attributeName:"aColor",size:1,type:$e.UNSIGNED_BYTE,uploadFunction:n.uploadTint,offset:0}],n.shader=Ws.from(kte,Rte,{}),n.state=yl.for2d(),n}return t.prototype.render=function(r){var n=r.children,i=r._maxSize,o=r._batchSize,s=this.renderer,a=n.length;if(a!==0){a>i&&!r.autoResize&&(a=i);var l=r._buffers;l||(l=r._buffers=this.generateBuffers(r));var u=n[0]._texture.baseTexture;this.state.blendMode=TO(r.blendMode,u.alphaMode),s.state.set(this.state);var c=s.gl,f=r.worldTransform.copyTo(this.tempMatrix);f.prepend(s.globalUniforms.uniforms.projectionMatrix),this.shader.uniforms.translationMatrix=f.toArray(!0),this.shader.uniforms.uColor=zJ(r.tintRgb,r.worldAlpha,this.shader.uniforms.uColor,u.alphaMode),this.shader.uniforms.uSampler=u,this.renderer.shader.bind(this.shader);for(var p=!1,m=0,g=0;m<a;m+=o,g+=1){var b=a-m;b>o&&(b=o),g>=l.length&&l.push(this._generateOneMoreBuffer(r));var y=l[g];y.uploadDynamic(n,m,b);var w=r._bufferUpdateIDs[g]||0;p=p||y._updateID<w,p&&(y._updateID=r._updateID,y.uploadStatic(n,m,b)),s.geometry.bind(y.geometry),c.drawElements(c.TRIANGLES,b*6,c.UNSIGNED_SHORT,0)}}},t.prototype.generateBuffers=function(r){for(var n=[],i=r._maxSize,o=r._batchSize,s=r._properties,a=0;a<i;a+=o)n.push(new EI(this.properties,s,o));return n},t.prototype._generateOneMoreBuffer=function(r){var n=r._batchSize,i=r._properties;return new EI(this.properties,i,n)},t.prototype.uploadVertices=function(r,n,i,o,s,a){for(var l=0,u=0,c=0,f=0,p=0;p<i;++p){var m=r[n+p],g=m._texture,b=m.scale.x,y=m.scale.y,w=g.trim,x=g.orig;w?(u=w.x-m.anchor.x*x.width,l=u+w.width,f=w.y-m.anchor.y*x.height,c=f+w.height):(l=x.width*(1-m.anchor.x),u=x.width*-m.anchor.x,c=x.height*(1-m.anchor.y),f=x.height*-m.anchor.y),o[a]=u*b,o[a+1]=f*y,o[a+s]=l*b,o[a+s+1]=f*y,o[a+s*2]=l*b,o[a+s*2+1]=c*y,o[a+s*3]=u*b,o[a+s*3+1]=c*y,a+=s*4}},t.prototype.uploadPosition=function(r,n,i,o,s,a){for(var l=0;l<i;l++){var u=r[n+l].position;o[a]=u.x,o[a+1]=u.y,o[a+s]=u.x,o[a+s+1]=u.y,o[a+s*2]=u.x,o[a+s*2+1]=u.y,o[a+s*3]=u.x,o[a+s*3+1]=u.y,a+=s*4}},t.prototype.uploadRotation=function(r,n,i,o,s,a){for(var l=0;l<i;l++){var u=r[n+l].rotation;o[a]=u,o[a+s]=u,o[a+s*2]=u,o[a+s*3]=u,a+=s*4}},t.prototype.uploadUvs=function(r,n,i,o,s,a){for(var l=0;l<i;++l){var u=r[n+l]._texture._uvs;u?(o[a]=u.x0,o[a+1]=u.y0,o[a+s]=u.x1,o[a+s+1]=u.y1,o[a+s*2]=u.x2,o[a+s*2+1]=u.y2,o[a+s*3]=u.x3,o[a+s*3+1]=u.y3,a+=s*4):(o[a]=0,o[a+1]=0,o[a+s]=0,o[a+s+1]=0,o[a+s*2]=0,o[a+s*2+1]=0,o[a+s*3]=0,o[a+s*3+1]=0,a+=s*4)}},t.prototype.uploadTint=function(r,n,i,o,s,a){for(var l=0;l<i;++l){var u=r[n+l],c=u._texture.baseTexture.alphaMode>0,f=u.alpha,p=f<1&&c?Zy(u._tintRGB,f):u._tintRGB+(f*255<<24);o[a]=p,o[a+s]=p,o[a+s*2]=p,o[a+s*3]=p,a+=s*4}},t.prototype.destroy=function(){e.prototype.destroy.call(this),this.shader&&(this.shader.destroy(),this.shader=null),this.tempMatrix=null},t}(Jy);/*!
 * @pixi/graphics - v6.4.2
 * Compiled Thu, 02 Jun 2022 15:39:26 UTC
 *
 * @pixi/graphics is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var li;(function(e){e.MITER="miter",e.BEVEL="bevel",e.ROUND="round"})(li||(li={}));var Wi;(function(e){e.BUTT="butt",e.ROUND="round",e.SQUARE="square"})(Wi||(Wi={}));var np={adaptive:!0,maxLength:10,minSegments:8,maxSegments:2048,epsilon:1e-4,_segmentsCount:function(e,t){if(t===void 0&&(t=20),!this.adaptive||!e||isNaN(e))return t;var r=Math.ceil(e/this.maxLength);return r<this.minSegments?r=this.minSegments:r>this.maxSegments&&(r=this.maxSegments),r}},QO=function(){function e(){this.color=16777215,this.alpha=1,this.texture=tt.WHITE,this.matrix=null,this.visible=!1,this.reset()}return e.prototype.clone=function(){var t=new e;return t.color=this.color,t.alpha=this.alpha,t.texture=this.texture,t.matrix=this.matrix,t.visible=this.visible,t},e.prototype.reset=function(){this.color=16777215,this.alpha=1,this.texture=tt.WHITE,this.matrix=null,this.visible=!1},e.prototype.destroy=function(){this.texture=null,this.matrix=null},e}();/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var Qw=function(e,t){return Qw=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])},Qw(e,t)};function G4(e,t){Qw(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}function CI(e,t){var r,n;t===void 0&&(t=!1);var i=e.length;if(!(i<6)){for(var o=0,s=0,a=e[i-2],l=e[i-1];s<i;s+=2){var u=e[s],c=e[s+1];o+=(u-a)*(c+l),a=u,l=c}if(!t&&o>0||t&&o<=0)for(var f=i/2,s=f+f%2;s<i;s+=2){var p=i-s-2,m=i-s-1,g=s,b=s+1;r=[e[g],e[p]],e[p]=r[0],e[g]=r[1],n=[e[b],e[m]],e[m]=n[0],e[b]=n[1]}}}var j4={build:function(e){e.points=e.shape.points.slice()},triangulate:function(e,t){var r=e.points,n=e.holes,i=t.points,o=t.indices;if(r.length>=6){CI(r,!1);for(var s=[],a=0;a<n.length;a++){var l=n[a];CI(l.points,!0),s.push(r.length/2),r=r.concat(l.points)}var u=Lh.exports(r,s,2);if(!u)return;for(var c=i.length/2,a=0;a<u.length;a+=3)o.push(u[a]+c),o.push(u[a+1]+c),o.push(u[a+2]+c);for(var a=0;a<r.length;a++)i.push(r[a])}}},ip={build:function(e){var t=e.points,r,n,i,o,s,a;if(e.type===gt.CIRC){var l=e.shape;r=l.x,n=l.y,s=a=l.radius,i=o=0}else if(e.type===gt.ELIP){var u=e.shape;r=u.x,n=u.y,s=u.width,a=u.height,i=o=0}else{var c=e.shape,f=c.width/2,p=c.height/2;r=c.x+f,n=c.y+p,s=a=Math.max(0,Math.min(c.radius,Math.min(f,p))),i=f-s,o=p-a}if(!(s>=0&&a>=0&&i>=0&&o>=0)){t.length=0;return}var m=Math.ceil(2.3*Math.sqrt(s+a)),g=m*8+(i?4:0)+(o?4:0);if(t.length=g,g!==0){if(m===0){t.length=8,t[0]=t[6]=r+i,t[1]=t[3]=n+o,t[2]=t[4]=r-i,t[5]=t[7]=n-o;return}var b=0,y=m*4+(i?2:0)+2,w=y,x=g;{var T=i+s,I=o,R=r+T,S=r-T,O=n+I;if(t[b++]=R,t[b++]=O,t[--y]=O,t[--y]=S,o){var P=n-I;t[w++]=S,t[w++]=P,t[--x]=P,t[--x]=R}}for(var N=1;N<m;N++){var A=Math.PI/2*(N/m),T=i+Math.cos(A)*s,I=o+Math.sin(A)*a,R=r+T,S=r-T,O=n+I,P=n-I;t[b++]=R,t[b++]=O,t[--y]=O,t[--y]=S,t[w++]=S,t[w++]=P,t[--x]=P,t[--x]=R}{var T=i,I=o+a,R=r+T,S=r-T,O=n+I,P=n-I;t[b++]=R,t[b++]=O,t[--x]=P,t[--x]=R,i&&(t[b++]=S,t[b++]=O,t[--x]=P,t[--x]=S)}}},triangulate:function(e,t){var r=e.points,n=t.points,i=t.indices,o=n.length/2,s=o,a,l;if(e.type!==gt.RREC){var u=e.shape;a=u.x,l=u.y}else{var c=e.shape;a=c.x+c.width/2,l=c.y+c.height/2}var f=e.matrix;n.push(e.matrix?f.a*a+f.c*l+f.tx:a,e.matrix?f.b*a+f.d*l+f.ty:l),o++,n.push(r[0],r[1]);for(var p=2;p<r.length;p+=2)n.push(r[p],r[p+1]),i.push(o++,s,o);i.push(s+1,s,o)}},e7={build:function(e){var t=e.shape,r=t.x,n=t.y,i=t.width,o=t.height,s=e.points;s.length=0,s.push(r,n,r+i,n,r+i,n+o,r,n+o)},triangulate:function(e,t){var r=e.points,n=t.points,i=n.length/2;n.push(r[0],r[1],r[2],r[3],r[6],r[7],r[4],r[5]),t.indices.push(i,i+1,i+2,i+1,i+2,i+3)}};function hc(e,t,r){var n=t-e;return e+n*r}function Fv(e,t,r,n,i,o,s){s===void 0&&(s=[]);for(var a=20,l=s,u=0,c=0,f=0,p=0,m=0,g=0,b=0,y=0;b<=a;++b)y=b/a,u=hc(e,r,y),c=hc(t,n,y),f=hc(r,i,y),p=hc(n,o,y),m=hc(u,f,y),g=hc(c,p,y),!(b===0&&l[l.length-2]===m&&l[l.length-1]===g)&&l.push(m,g);return l}var t7={build:function(e){if(Ka.nextRoundedRectBehavior){ip.build(e);return}var t=e.shape,r=e.points,n=t.x,i=t.y,o=t.width,s=t.height,a=Math.max(0,Math.min(t.radius,Math.min(o,s)/2));r.length=0,a?(Fv(n,i+a,n,i,n+a,i,r),Fv(n+o-a,i,n+o,i,n+o,i+a,r),Fv(n+o,i+s-a,n+o,i+s,n+o-a,i+s,r),Fv(n+a,i+s,n,i+s,n,i+s-a,r)):r.push(n,i,n+o,i,n+o,i+s,n,i+s)},triangulate:function(e,t){if(Ka.nextRoundedRectBehavior){ip.triangulate(e,t);return}for(var r=e.points,n=t.points,i=t.indices,o=n.length/2,s=Lh.exports(r,null,2),a=0,l=s.length;a<l;a+=3)i.push(s[a]+o),i.push(s[a+1]+o),i.push(s[a+2]+o);for(var a=0,l=r.length;a<l;a++)n.push(r[a],r[++a])}};function II(e,t,r,n,i,o,s,a){var l=e-r*i,u=t-n*i,c=e+r*o,f=t+n*o,p,m;s?(p=n,m=-r):(p=-n,m=r);var g=l+p,b=u+m,y=c+p,w=f+m;return a.push(g,b),a.push(y,w),2}function fc(e,t,r,n,i,o,s,a){var l=r-e,u=n-t,c=Math.atan2(l,u),f=Math.atan2(i-e,o-t);a&&c<f?c+=Math.PI*2:!a&&c>f&&(f+=Math.PI*2);var p=c,m=f-c,g=Math.abs(m),b=Math.sqrt(l*l+u*u),y=(15*g*Math.sqrt(b)/Math.PI>>0)+1,w=m/y;if(p+=w,a){s.push(e,t),s.push(r,n);for(var x=1,T=p;x<y;x++,T+=w)s.push(e,t),s.push(e+Math.sin(T)*b,t+Math.cos(T)*b);s.push(e,t),s.push(i,o)}else{s.push(r,n),s.push(e,t);for(var x=1,T=p;x<y;x++,T+=w)s.push(e+Math.sin(T)*b,t+Math.cos(T)*b),s.push(e,t);s.push(i,o),s.push(e,t)}return y*2}function Lte(e,t){var r=e.shape,n=e.points||r.points.slice(),i=t.closePointEps;if(n.length!==0){var o=e.lineStyle,s=new Gt(n[0],n[1]),a=new Gt(n[n.length-2],n[n.length-1]),l=r.type!==gt.POLY||r.closeStroke,u=Math.abs(s.x-a.x)<i&&Math.abs(s.y-a.y)<i;if(l){n=n.slice(),u&&(n.pop(),n.pop(),a.set(n[n.length-2],n[n.length-1]));var c=(s.x+a.x)*.5,f=(a.y+s.y)*.5;n.unshift(c,f),n.push(c,f)}var p=t.points,m=n.length/2,g=n.length,b=p.length/2,y=o.width/2,w=y*y,x=o.miterLimit*o.miterLimit,T=n[0],I=n[1],R=n[2],S=n[3],O=0,P=0,N=-(I-S),A=T-R,j=0,X=0,G=Math.sqrt(N*N+A*A);N/=G,A/=G,N*=y,A*=y;var ne=o.alignment,W=(1-ne)*2,Y=ne*2;l||(o.cap===Wi.ROUND?g+=fc(T-N*(W-Y)*.5,I-A*(W-Y)*.5,T-N*W,I-A*W,T+N*Y,I+A*Y,p,!0)+2:o.cap===Wi.SQUARE&&(g+=II(T,I,N,A,W,Y,!0,p))),p.push(T-N*W,I-A*W),p.push(T+N*Y,I+A*Y);for(var de=1;de<m-1;++de){T=n[(de-1)*2],I=n[(de-1)*2+1],R=n[de*2],S=n[de*2+1],O=n[(de+1)*2],P=n[(de+1)*2+1],N=-(I-S),A=T-R,G=Math.sqrt(N*N+A*A),N/=G,A/=G,N*=y,A*=y,j=-(S-P),X=R-O,G=Math.sqrt(j*j+X*X),j/=G,X/=G,j*=y,X*=y;var le=R-T,ie=I-S,Q=R-O,ee=P-S,K=ie*Q-ee*le,te=K<0;if(Math.abs(K)<.1){p.push(R-N*W,S-A*W),p.push(R+N*Y,S+A*Y);continue}var ye=(-N+T)*(-A+S)-(-N+R)*(-A+I),Ce=(-j+O)*(-X+S)-(-j+R)*(-X+P),Ie=(le*Ce-Q*ye)/K,Ye=(ee*ye-ie*Ce)/K,pe=(Ie-R)*(Ie-R)+(Ye-S)*(Ye-S),F=R+(Ie-R)*W,$=S+(Ye-S)*W,q=R-(Ie-R)*Y,ve=S-(Ye-S)*Y,ue=Math.min(le*le+ie*ie,Q*Q+ee*ee),Ee=te?W:Y,Pe=ue+Ee*Ee*w,Le=pe<=Pe;Le?o.join===li.BEVEL||pe/w>x?(te?(p.push(F,$),p.push(R+N*Y,S+A*Y),p.push(F,$),p.push(R+j*Y,S+X*Y)):(p.push(R-N*W,S-A*W),p.push(q,ve),p.push(R-j*W,S-X*W),p.push(q,ve)),g+=2):o.join===li.ROUND?te?(p.push(F,$),p.push(R+N*Y,S+A*Y),g+=fc(R,S,R+N*Y,S+A*Y,R+j*Y,S+X*Y,p,!0)+4,p.push(F,$),p.push(R+j*Y,S+X*Y)):(p.push(R-N*W,S-A*W),p.push(q,ve),g+=fc(R,S,R-N*W,S-A*W,R-j*W,S-X*W,p,!1)+4,p.push(R-j*W,S-X*W),p.push(q,ve)):(p.push(F,$),p.push(q,ve)):(p.push(R-N*W,S-A*W),p.push(R+N*Y,S+A*Y),o.join===li.ROUND?te?g+=fc(R,S,R+N*Y,S+A*Y,R+j*Y,S+X*Y,p,!0)+2:g+=fc(R,S,R-N*W,S-A*W,R-j*W,S-X*W,p,!1)+2:o.join===li.MITER&&pe/w<=x&&(te?(p.push(q,ve),p.push(q,ve)):(p.push(F,$),p.push(F,$)),g+=2),p.push(R-j*W,S-X*W),p.push(R+j*Y,S+X*Y),g+=2)}T=n[(m-2)*2],I=n[(m-2)*2+1],R=n[(m-1)*2],S=n[(m-1)*2+1],N=-(I-S),A=T-R,G=Math.sqrt(N*N+A*A),N/=G,A/=G,N*=y,A*=y,p.push(R-N*W,S-A*W),p.push(R+N*Y,S+A*Y),l||(o.cap===Wi.ROUND?g+=fc(R-N*(W-Y)*.5,S-A*(W-Y)*.5,R-N*W,S-A*W,R+N*Y,S+A*Y,p,!1)+2:o.cap===Wi.SQUARE&&(g+=II(R,S,N,A,W,Y,!1,p)));for(var ot=t.indices,It=np.epsilon*np.epsilon,de=b;de<g+b-2;++de)T=p[de*2],I=p[de*2+1],R=p[(de+1)*2],S=p[(de+1)*2+1],O=p[(de+2)*2],P=p[(de+2)*2+1],!(Math.abs(T*(S-P)+R*(P-I)+O*(I-S))<It)&&ot.push(de,de+1,de+2)}}function Ute(e,t){var r=0,n=e.shape,i=e.points||n.points,o=n.type!==gt.POLY||n.closeStroke;if(i.length!==0){var s=t.points,a=t.indices,l=i.length/2,u=s.length/2,c=u;for(s.push(i[0],i[1]),r=1;r<l;r++)s.push(i[r*2],i[r*2+1]),a.push(c,c+1),c++;o&&a.push(c,u)}}function ex(e,t){e.lineStyle.native?Ute(e,t):Lte(e,t)}var tx=function(){function e(){}return e.curveTo=function(t,r,n,i,o,s){var a=s[s.length-2],l=s[s.length-1],u=l-r,c=a-t,f=i-r,p=n-t,m=Math.abs(u*p-c*f);if(m<1e-8||o===0)return(s[s.length-2]!==t||s[s.length-1]!==r)&&s.push(t,r),null;var g=u*u+c*c,b=f*f+p*p,y=u*f+c*p,w=o*Math.sqrt(g)/m,x=o*Math.sqrt(b)/m,T=w*y/g,I=x*y/b,R=w*p+x*c,S=w*f+x*u,O=c*(x+T),P=u*(x+T),N=p*(w+I),A=f*(w+I),j=Math.atan2(P-S,O-R),X=Math.atan2(A-S,N-R);return{cx:R+t,cy:S+r,radius:o,startAngle:j,endAngle:X,anticlockwise:c*f>p*u}},e.arc=function(t,r,n,i,o,s,a,l,u){for(var c=a-s,f=np._segmentsCount(Math.abs(c)*o,Math.ceil(Math.abs(c)/fh)*40),p=c/(f*2),m=p*2,g=Math.cos(p),b=Math.sin(p),y=f-1,w=y%1/y,x=0;x<=y;++x){var T=x+w*x,I=p+s+m*T,R=Math.cos(I),S=-Math.sin(I);u.push((g*R+b*S)*o+n,(g*-S+b*R)*o+i)}},e}(),r7=function(){function e(){}return e.curveLength=function(t,r,n,i,o,s,a,l){for(var u=10,c=0,f=0,p=0,m=0,g=0,b=0,y=0,w=0,x=0,T=0,I=0,R=t,S=r,O=1;O<=u;++O)f=O/u,p=f*f,m=p*f,g=1-f,b=g*g,y=b*g,w=y*t+3*b*f*n+3*g*p*o+m*a,x=y*r+3*b*f*i+3*g*p*s+m*l,T=R-w,I=S-x,R=w,S=x,c+=Math.sqrt(T*T+I*I);return c},e.curveTo=function(t,r,n,i,o,s,a){var l=a[a.length-2],u=a[a.length-1];a.length-=2;var c=np._segmentsCount(e.curveLength(l,u,t,r,n,i,o,s)),f=0,p=0,m=0,g=0,b=0;a.push(l,u);for(var y=1,w=0;y<=c;++y)w=y/c,f=1-w,p=f*f,m=p*f,g=w*w,b=g*w,a.push(m*l+3*p*w*t+3*f*g*n+b*o,m*u+3*p*w*r+3*f*g*i+b*s)},e}(),n7=function(){function e(){}return e.curveLength=function(t,r,n,i,o,s){var a=t-2*n+o,l=r-2*i+s,u=2*n-2*t,c=2*i-2*r,f=4*(a*a+l*l),p=4*(a*u+l*c),m=u*u+c*c,g=2*Math.sqrt(f+p+m),b=Math.sqrt(f),y=2*f*b,w=2*Math.sqrt(m),x=p/b;return(y*g+b*p*(g-w)+(4*m*f-p*p)*Math.log((2*b+x+g)/(x+w)))/(4*y)},e.curveTo=function(t,r,n,i,o){for(var s=o[o.length-2],a=o[o.length-1],l=np._segmentsCount(e.curveLength(s,a,t,r,n,i)),u=0,c=0,f=1;f<=l;++f){var p=f/l;u=s+(t-s)*p,c=a+(r-a)*p,o.push(u+(t+(n-t)*p-u)*p,c+(r+(i-r)*p-c)*p)}},e}(),i7=function(){function e(){this.reset()}return e.prototype.begin=function(t,r,n){this.reset(),this.style=t,this.start=r,this.attribStart=n},e.prototype.end=function(t,r){this.attribSize=r-this.attribStart,this.size=t-this.start},e.prototype.reset=function(){this.style=null,this.size=0,this.start=0,this.attribStart=0,this.attribSize=0},e}(),Ml,g0=(Ml={},Ml[gt.POLY]=j4,Ml[gt.CIRC]=ip,Ml[gt.ELIP]=ip,Ml[gt.RECT]=e7,Ml[gt.RREC]=t7,Ml),rx=[],Yf=[],NI=function(){function e(t,r,n,i){r===void 0&&(r=null),n===void 0&&(n=null),i===void 0&&(i=null),this.points=[],this.holes=[],this.shape=t,this.lineStyle=n,this.fillStyle=r,this.matrix=i,this.type=t.type}return e.prototype.clone=function(){return new e(this.shape,this.fillStyle,this.lineStyle,this.matrix)},e.prototype.destroy=function(){this.shape=null,this.holes.length=0,this.holes=null,this.points.length=0,this.points=null,this.lineStyle=null,this.fillStyle=null},e}(),dc=new Gt,Fte=new yu,Mte=function(e){G4(t,e);function t(){var r=e.call(this)||this;return r.closePointEps=1e-4,r.boundsPadding=0,r.uvsFloat32=null,r.indicesUint16=null,r.batchable=!1,r.points=[],r.colors=[],r.uvs=[],r.indices=[],r.textureIds=[],r.graphicsData=[],r.drawCalls=[],r.batchDirty=-1,r.batches=[],r.dirty=0,r.cacheDirty=-1,r.clearDirty=0,r.shapeIndex=0,r._bounds=new yu,r.boundsDirty=-1,r}return Object.defineProperty(t.prototype,"bounds",{get:function(){return this.boundsDirty!==this.dirty&&(this.boundsDirty=this.dirty,this.calculateBounds()),this._bounds},enumerable:!1,configurable:!0}),t.prototype.invalidate=function(){this.boundsDirty=-1,this.dirty++,this.batchDirty++,this.shapeIndex=0,this.points.length=0,this.colors.length=0,this.uvs.length=0,this.indices.length=0,this.textureIds.length=0;for(var r=0;r<this.drawCalls.length;r++)this.drawCalls[r].texArray.clear(),Yf.push(this.drawCalls[r]);this.drawCalls.length=0;for(var r=0;r<this.batches.length;r++){var n=this.batches[r];n.reset(),rx.push(n)}this.batches.length=0},t.prototype.clear=function(){return this.graphicsData.length>0&&(this.invalidate(),this.clearDirty++,this.graphicsData.length=0),this},t.prototype.drawShape=function(r,n,i,o){n===void 0&&(n=null),i===void 0&&(i=null),o===void 0&&(o=null);var s=new NI(r,n,i,o);return this.graphicsData.push(s),this.dirty++,this},t.prototype.drawHole=function(r,n){if(n===void 0&&(n=null),!this.graphicsData.length)return null;var i=new NI(r,null,null,n),o=this.graphicsData[this.graphicsData.length-1];return i.lineStyle=o.lineStyle,o.holes.push(i),this.dirty++,this},t.prototype.destroy=function(){e.prototype.destroy.call(this);for(var r=0;r<this.graphicsData.length;++r)this.graphicsData[r].destroy();this.points.length=0,this.points=null,this.colors.length=0,this.colors=null,this.uvs.length=0,this.uvs=null,this.indices.length=0,this.indices=null,this.indexBuffer.destroy(),this.indexBuffer=null,this.graphicsData.length=0,this.graphicsData=null,this.drawCalls.length=0,this.drawCalls=null,this.batches.length=0,this.batches=null,this._bounds=null},t.prototype.containsPoint=function(r){for(var n=this.graphicsData,i=0;i<n.length;++i){var o=n[i];if(!!o.fillStyle.visible&&o.shape&&(o.matrix?o.matrix.applyInverse(r,dc):dc.copyFrom(r),o.shape.contains(dc.x,dc.y))){var s=!1;if(o.holes)for(var a=0;a<o.holes.length;a++){var l=o.holes[a];if(l.shape.contains(dc.x,dc.y)){s=!0;break}}if(!s)return!0}}return!1},t.prototype.updateBatches=function(r){if(!this.graphicsData.length){this.batchable=!0;return}if(!!this.validateBatching()){this.cacheDirty=this.dirty;var n=this.uvs,i=this.graphicsData,o=null,s=null;this.batches.length>0&&(o=this.batches[this.batches.length-1],s=o.style);for(var a=this.shapeIndex;a<i.length;a++){this.shapeIndex++;var l=i[a],u=l.fillStyle,c=l.lineStyle,f=g0[l.type];f.build(l),l.matrix&&this.transformPoints(l.points,l.matrix),(u.visible||c.visible)&&this.processHoles(l.holes);for(var p=0;p<2;p++){var m=p===0?u:c;if(!!m.visible){var g=m.texture.baseTexture,b=this.indices.length,y=this.points.length/2;g.wrapMode=ts.REPEAT,p===0?this.processFill(l):this.processLine(l);var w=this.points.length/2-y;w!==0&&(o&&!this._compareStyles(s,m)&&(o.end(b,y),o=null),o||(o=rx.pop()||new i7,o.begin(m,b,y),this.batches.push(o),s=m),this.addUvs(this.points,n,m.texture,y,w,m.matrix))}}}var x=this.indices.length,T=this.points.length/2;if(o&&o.end(x,T),this.batches.length===0){this.batchable=!0;return}if(this.indicesUint16&&this.indices.length===this.indicesUint16.length)this.indicesUint16.set(this.indices);else{var I=T>65535&&r;this.indicesUint16=I?new Uint32Array(this.indices):new Uint16Array(this.indices)}this.batchable=this.isBatchable(),this.batchable?this.packBatches():this.buildDrawCalls()}},t.prototype._compareStyles=function(r,n){return!(!r||!n||r.texture.baseTexture!==n.texture.baseTexture||r.color+r.alpha!==n.color+n.alpha||!!r.native!=!!n.native)},t.prototype.validateBatching=function(){if(this.dirty===this.cacheDirty||!this.graphicsData.length)return!1;for(var r=0,n=this.graphicsData.length;r<n;r++){var i=this.graphicsData[r],o=i.fillStyle,s=i.lineStyle;if(o&&!o.texture.baseTexture.valid||s&&!s.texture.baseTexture.valid)return!1}return!0},t.prototype.packBatches=function(){this.batchDirty++,this.uvsFloat32=new Float32Array(this.uvs);for(var r=this.batches,n=0,i=r.length;n<i;n++)for(var o=r[n],s=0;s<o.size;s++){var a=o.start+s;this.indicesUint16[a]=this.indicesUint16[a]-o.attribStart}},t.prototype.isBatchable=function(){if(this.points.length>65535*2)return!1;for(var r=this.batches,n=0;n<r.length;n++)if(r[n].style.native)return!1;return this.points.length<t.BATCHABLE_SIZE*2},t.prototype.buildDrawCalls=function(){for(var r=++xt._globalBatch,n=0;n<this.drawCalls.length;n++)this.drawCalls[n].texArray.clear(),Yf.push(this.drawCalls[n]);this.drawCalls.length=0;var i=this.colors,o=this.textureIds,s=Yf.pop();s||(s=new Gw,s.texArray=new Rg),s.texArray.count=0,s.start=0,s.size=0,s.type=Ni.TRIANGLES;var a=0,l=null,u=0,c=!1,f=Ni.TRIANGLES,p=0;this.drawCalls.push(s);for(var n=0;n<this.batches.length;n++){var m=this.batches[n],g=8,b=m.style,y=b.texture.baseTexture;c!==!!b.native&&(c=!!b.native,f=c?Ni.LINES:Ni.TRIANGLES,l=null,a=g,r++),l!==y&&(l=y,y._batchEnabled!==r&&(a===g&&(r++,a=0,s.size>0&&(s=Yf.pop(),s||(s=new Gw,s.texArray=new Rg),this.drawCalls.push(s)),s.start=p,s.size=0,s.texArray.count=0,s.type=f),y.touched=1,y._batchEnabled=r,y._batchLocation=a,y.wrapMode=ts.REPEAT,s.texArray.elements[s.texArray.count++]=y,a++)),s.size+=m.size,p+=m.size,u=y._batchLocation,this.addColors(i,b.color,b.alpha,m.attribSize,m.attribStart),this.addTextureIds(o,u,m.attribSize,m.attribStart)}xt._globalBatch=r,this.packAttributes()},t.prototype.packAttributes=function(){for(var r=this.points,n=this.uvs,i=this.colors,o=this.textureIds,s=new ArrayBuffer(r.length*3*4),a=new Float32Array(s),l=new Uint32Array(s),u=0,c=0;c<r.length/2;c++)a[u++]=r[c*2],a[u++]=r[c*2+1],a[u++]=n[c*2],a[u++]=n[c*2+1],l[u++]=i[c],a[u++]=o[c];this._buffer.update(s),this._indexBuffer.update(this.indicesUint16)},t.prototype.processFill=function(r){if(r.holes.length)j4.triangulate(r,this);else{var n=g0[r.type];n.triangulate(r,this)}},t.prototype.processLine=function(r){ex(r,this);for(var n=0;n<r.holes.length;n++)ex(r.holes[n],this)},t.prototype.processHoles=function(r){for(var n=0;n<r.length;n++){var i=r[n],o=g0[i.type];o.build(i),i.matrix&&this.transformPoints(i.points,i.matrix)}},t.prototype.calculateBounds=function(){var r=this._bounds,n=Fte,i=rr.IDENTITY;this._bounds.clear(),n.clear();for(var o=0;o<this.graphicsData.length;o++){var s=this.graphicsData[o],a=s.shape,l=s.type,u=s.lineStyle,c=s.matrix||rr.IDENTITY,f=0;if(u&&u.visible&&(f=u.width,l!==gt.POLY||s.fillStyle.visible?f*=Math.max(0,u.alignment):f*=Math.max(u.alignment,1-u.alignment)),i!==c&&(n.isEmpty()||(r.addBoundsMatrix(n,i),n.clear()),i=c),l===gt.RECT||l===gt.RREC){var p=a;n.addFramePad(p.x,p.y,p.x+p.width,p.y+p.height,f,f)}else if(l===gt.CIRC){var m=a;n.addFramePad(m.x,m.y,m.x,m.y,m.radius+f,m.radius+f)}else if(l===gt.ELIP){var g=a;n.addFramePad(g.x,g.y,g.x,g.y,g.width+f,g.height+f)}else{var b=a;r.addVerticesMatrix(i,b.points,0,b.points.length,f,f)}}n.isEmpty()||r.addBoundsMatrix(n,i),r.pad(this.boundsPadding,this.boundsPadding)},t.prototype.transformPoints=function(r,n){for(var i=0;i<r.length/2;i++){var o=r[i*2],s=r[i*2+1];r[i*2]=n.a*o+n.c*s+n.tx,r[i*2+1]=n.b*o+n.d*s+n.ty}},t.prototype.addColors=function(r,n,i,o,s){s===void 0&&(s=0);var a=(n>>16)+(n&65280)+((n&255)<<16),l=Zy(a,i);r.length=Math.max(r.length,s+o);for(var u=0;u<o;u++)r[s+u]=l},t.prototype.addTextureIds=function(r,n,i,o){o===void 0&&(o=0),r.length=Math.max(r.length,o+i);for(var s=0;s<i;s++)r[o+s]=n},t.prototype.addUvs=function(r,n,i,o,s,a){a===void 0&&(a=null);for(var l=0,u=n.length,c=i.frame;l<s;){var f=r[(o+l)*2],p=r[(o+l)*2+1];if(a){var m=a.a*f+a.c*p+a.tx;p=a.b*f+a.d*p+a.ty,f=m}l++,n.push(f/c.width,p/c.height)}var g=i.baseTexture;(c.width<g.width||c.height<g.height)&&this.adjustUvs(n,i,u,s)},t.prototype.adjustUvs=function(r,n,i,o){for(var s=n.baseTexture,a=1e-6,l=i+o*2,u=n.frame,c=u.width/s.width,f=u.height/s.height,p=u.x/u.width,m=u.y/u.height,g=Math.floor(r[i]+a),b=Math.floor(r[i+1]+a),y=i+2;y<l;y+=2)g=Math.min(g,Math.floor(r[y]+a)),b=Math.min(b,Math.floor(r[y+1]+a));p-=g,m-=b;for(var y=i;y<l;y+=2)r[y]=(r[y]+p)*c,r[y+1]=(r[y+1]+m)*f},t.BATCHABLE_SIZE=100,t}(WO),Bte=function(e){G4(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.width=0,r.alignment=.5,r.native=!1,r.cap=Wi.BUTT,r.join=li.MITER,r.miterLimit=10,r}return t.prototype.clone=function(){var r=new t;return r.color=this.color,r.alpha=this.alpha,r.texture=this.texture,r.matrix=this.matrix,r.visible=this.visible,r.width=this.width,r.alignment=this.alignment,r.native=this.native,r.cap=this.cap,r.join=this.join,r.miterLimit=this.miterLimit,r},t.prototype.reset=function(){e.prototype.reset.call(this),this.color=0,this.alignment=.5,this.width=0,this.native=!1},t}(QO),Dte=new Float32Array(3),N_={},Ka=function(e){G4(t,e);function t(r){r===void 0&&(r=null);var n=e.call(this)||this;return n.shader=null,n.pluginName="batch",n.currentPath=null,n.batches=[],n.batchTint=-1,n.batchDirty=-1,n.vertexData=null,n._fillStyle=new QO,n._lineStyle=new Bte,n._matrix=null,n._holeMode=!1,n.state=yl.for2d(),n._geometry=r||new Mte,n._geometry.refCount++,n._transformID=-1,n.tint=16777215,n.blendMode=Ze.NORMAL,n}return Object.defineProperty(t.prototype,"geometry",{get:function(){return this._geometry},enumerable:!1,configurable:!0}),t.prototype.clone=function(){return this.finishPoly(),new t(this._geometry)},Object.defineProperty(t.prototype,"blendMode",{get:function(){return this.state.blendMode},set:function(r){this.state.blendMode=r},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"tint",{get:function(){return this._tint},set:function(r){this._tint=r},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fill",{get:function(){return this._fillStyle},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"line",{get:function(){return this._lineStyle},enumerable:!1,configurable:!0}),t.prototype.lineStyle=function(r,n,i,o,s){return r===void 0&&(r=null),n===void 0&&(n=0),i===void 0&&(i=1),o===void 0&&(o=.5),s===void 0&&(s=!1),typeof r=="number"&&(r={width:r,color:n,alpha:i,alignment:o,native:s}),this.lineTextureStyle(r)},t.prototype.lineTextureStyle=function(r){r=Object.assign({width:0,texture:tt.WHITE,color:r&&r.texture?16777215:0,alpha:1,matrix:null,alignment:.5,native:!1,cap:Wi.BUTT,join:li.MITER,miterLimit:10},r),this.currentPath&&this.startPoly();var n=r.width>0&&r.alpha>0;return n?(r.matrix&&(r.matrix=r.matrix.clone(),r.matrix.invert()),Object.assign(this._lineStyle,{visible:n},r)):this._lineStyle.reset(),this},t.prototype.startPoly=function(){if(this.currentPath){var r=this.currentPath.points,n=this.currentPath.points.length;n>2&&(this.drawShape(this.currentPath),this.currentPath=new nu,this.currentPath.closeStroke=!1,this.currentPath.points.push(r[n-2],r[n-1]))}else this.currentPath=new nu,this.currentPath.closeStroke=!1},t.prototype.finishPoly=function(){this.currentPath&&(this.currentPath.points.length>2?(this.drawShape(this.currentPath),this.currentPath=null):this.currentPath.points.length=0)},t.prototype.moveTo=function(r,n){return this.startPoly(),this.currentPath.points[0]=r,this.currentPath.points[1]=n,this},t.prototype.lineTo=function(r,n){this.currentPath||this.moveTo(0,0);var i=this.currentPath.points,o=i[i.length-2],s=i[i.length-1];return(o!==r||s!==n)&&i.push(r,n),this},t.prototype._initCurve=function(r,n){r===void 0&&(r=0),n===void 0&&(n=0),this.currentPath?this.currentPath.points.length===0&&(this.currentPath.points=[r,n]):this.moveTo(r,n)},t.prototype.quadraticCurveTo=function(r,n,i,o){this._initCurve();var s=this.currentPath.points;return s.length===0&&this.moveTo(0,0),n7.curveTo(r,n,i,o,s),this},t.prototype.bezierCurveTo=function(r,n,i,o,s,a){return this._initCurve(),r7.curveTo(r,n,i,o,s,a,this.currentPath.points),this},t.prototype.arcTo=function(r,n,i,o,s){this._initCurve(r,n);var a=this.currentPath.points,l=tx.curveTo(r,n,i,o,s,a);if(l){var u=l.cx,c=l.cy,f=l.radius,p=l.startAngle,m=l.endAngle,g=l.anticlockwise;this.arc(u,c,f,p,m,g)}return this},t.prototype.arc=function(r,n,i,o,s,a){if(a===void 0&&(a=!1),o===s)return this;!a&&s<=o?s+=fh:a&&o<=s&&(o+=fh);var l=s-o;if(l===0)return this;var u=r+Math.cos(o)*i,c=n+Math.sin(o)*i,f=this._geometry.closePointEps,p=this.currentPath?this.currentPath.points:null;if(p){var m=Math.abs(p[p.length-2]-u),g=Math.abs(p[p.length-1]-c);m<f&&g<f||p.push(u,c)}else this.moveTo(u,c),p=this.currentPath.points;return tx.arc(u,c,r,n,i,o,s,a,p),this},t.prototype.beginFill=function(r,n){return r===void 0&&(r=0),n===void 0&&(n=1),this.beginTextureFill({texture:tt.WHITE,color:r,alpha:n})},t.prototype.beginTextureFill=function(r){r=Object.assign({texture:tt.WHITE,color:16777215,alpha:1,matrix:null},r),this.currentPath&&this.startPoly();var n=r.alpha>0;return n?(r.matrix&&(r.matrix=r.matrix.clone(),r.matrix.invert()),Object.assign(this._fillStyle,{visible:n},r)):this._fillStyle.reset(),this},t.prototype.endFill=function(){return this.finishPoly(),this._fillStyle.reset(),this},t.prototype.drawRect=function(r,n,i,o){return this.drawShape(new Me(r,n,i,o))},t.prototype.drawRoundedRect=function(r,n,i,o,s){return this.drawShape(new AO(r,n,i,o,s))},t.prototype.drawCircle=function(r,n,i){return this.drawShape(new NO(r,n,i))},t.prototype.drawEllipse=function(r,n,i,o){return this.drawShape(new PO(r,n,i,o))},t.prototype.drawPolygon=function(){for(var r=arguments,n=[],i=0;i<arguments.length;i++)n[i]=r[i];var o,s=!0,a=n[0];a.points?(s=a.closeStroke,o=a.points):Array.isArray(n[0])?o=n[0]:o=n;var l=new nu(o);return l.closeStroke=s,this.drawShape(l),this},t.prototype.drawShape=function(r){return this._holeMode?this._geometry.drawHole(r,this._matrix):this._geometry.drawShape(r,this._fillStyle.clone(),this._lineStyle.clone(),this._matrix),this},t.prototype.clear=function(){return this._geometry.clear(),this._lineStyle.reset(),this._fillStyle.reset(),this._boundsID++,this._matrix=null,this._holeMode=!1,this.currentPath=null,this},t.prototype.isFastRect=function(){var r=this._geometry.graphicsData;return r.length===1&&r[0].shape.type===gt.RECT&&!r[0].matrix&&!r[0].holes.length&&!(r[0].lineStyle.visible&&r[0].lineStyle.width)},t.prototype._render=function(r){this.finishPoly();var n=this._geometry,i=r.context.supports.uint32Indices;n.updateBatches(i),n.batchable?(this.batchDirty!==n.batchDirty&&this._populateBatches(),this._renderBatched(r)):(r.batch.flush(),this._renderDirect(r))},t.prototype._populateBatches=function(){var r=this._geometry,n=this.blendMode,i=r.batches.length;this.batchTint=-1,this._transformID=-1,this.batchDirty=r.batchDirty,this.batches.length=i,this.vertexData=new Float32Array(r.points);for(var o=0;o<i;o++){var s=r.batches[o],a=s.style.color,l=new Float32Array(this.vertexData.buffer,s.attribStart*4*2,s.attribSize*2),u=new Float32Array(r.uvsFloat32.buffer,s.attribStart*4*2,s.attribSize*2),c=new Uint16Array(r.indicesUint16.buffer,s.start*2,s.size),f={vertexData:l,blendMode:n,indices:c,uvs:u,_batchRGB:al(a),_tintRGB:a,_texture:s.style.texture,alpha:s.style.alpha,worldAlpha:1};this.batches[o]=f}},t.prototype._renderBatched=function(r){if(!!this.batches.length){r.batch.setObjectRenderer(r.plugins[this.pluginName]),this.calculateVertices(),this.calculateTints();for(var n=0,i=this.batches.length;n<i;n++){var o=this.batches[n];o.worldAlpha=this.worldAlpha*o.alpha,r.plugins[this.pluginName].render(o)}}},t.prototype._renderDirect=function(r){var n=this._resolveDirectShader(r),i=this._geometry,o=this.tint,s=this.worldAlpha,a=n.uniforms,l=i.drawCalls;a.translationMatrix=this.transform.worldTransform,a.tint[0]=(o>>16&255)/255*s,a.tint[1]=(o>>8&255)/255*s,a.tint[2]=(o&255)/255*s,a.tint[3]=s,r.shader.bind(n),r.geometry.bind(i,n),r.state.set(this.state);for(var u=0,c=l.length;u<c;u++)this._renderDrawCallDirect(r,i.drawCalls[u])},t.prototype._renderDrawCallDirect=function(r,n){for(var i=n.texArray,o=n.type,s=n.size,a=n.start,l=i.count,u=0;u<l;u++)r.texture.bind(i.elements[u],u);r.geometry.draw(o,s,a)},t.prototype._resolveDirectShader=function(r){var n=this.shader,i=this.pluginName;if(!n){if(!N_[i]){for(var o=r.plugins[i].MAX_TEXTURES,s=new Int32Array(o),a=0;a<o;a++)s[a]=a;var l={tint:new Float32Array([1,1,1,1]),translationMatrix:new rr,default:iu.from({uSamplers:s},!0)},u=r.plugins[i]._shader.program;N_[i]=new Ws(u,l)}n=N_[i]}return n},t.prototype._calculateBounds=function(){this.finishPoly();var r=this._geometry;if(!!r.graphicsData.length){var n=r.bounds,i=n.minX,o=n.minY,s=n.maxX,a=n.maxY;this._bounds.addFrame(this.transform,i,o,s,a)}},t.prototype.containsPoint=function(r){return this.worldTransform.applyInverse(r,t._TEMP_POINT),this._geometry.containsPoint(t._TEMP_POINT)},t.prototype.calculateTints=function(){if(this.batchTint!==this.tint){this.batchTint=this.tint;for(var r=al(this.tint,Dte),n=0;n<this.batches.length;n++){var i=this.batches[n],o=i._batchRGB,s=r[0]*o[0]*255,a=r[1]*o[1]*255,l=r[2]*o[2]*255,u=(s<<16)+(a<<8)+(l|0);i._tintRGB=(u>>16)+(u&65280)+((u&255)<<16)}}},t.prototype.calculateVertices=function(){var r=this.transform._worldID;if(this._transformID!==r){this._transformID=r;for(var n=this.transform.worldTransform,i=n.a,o=n.b,s=n.c,a=n.d,l=n.tx,u=n.ty,c=this._geometry.points,f=this.vertexData,p=0,m=0;m<c.length;m+=2){var g=c[m],b=c[m+1];f[p++]=i*g+s*b+l,f[p++]=a*b+o*g+u}}},t.prototype.closePath=function(){var r=this.currentPath;return r&&(r.closeStroke=!0,this.finishPoly()),this},t.prototype.setMatrix=function(r){return this._matrix=r,this},t.prototype.beginHole=function(){return this.finishPoly(),this._holeMode=!0,this},t.prototype.endHole=function(){return this.finishPoly(),this._holeMode=!1,this},t.prototype.destroy=function(r){this._geometry.refCount--,this._geometry.refCount===0&&this._geometry.dispose(),this._matrix=null,this.currentPath=null,this._lineStyle.destroy(),this._lineStyle=null,this._fillStyle.destroy(),this._fillStyle=null,this._geometry=null,this.shader=null,this.vertexData=null,this.batches.length=0,this.batches=null,e.prototype.destroy.call(this,r)},t.nextRoundedRectBehavior=!1,t._TEMP_POINT=new Gt,t}(Ri),Gte={buildPoly:j4,buildCircle:ip,buildRectangle:e7,buildRoundedRectangle:t7,buildLine:ex,ArcUtils:tx,BezierUtils:r7,QuadraticUtils:n7,BatchPart:i7,FILL_COMMANDS:g0,BATCH_POOL:rx,DRAW_CALL_POOL:Yf};/*!
 * @pixi/sprite - v6.4.2
 * Compiled Thu, 02 Jun 2022 15:39:26 UTC
 *
 * @pixi/sprite is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var nx=function(e,t){return nx=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])},nx(e,t)};function jte(e,t){nx(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var Gf=new Gt,$te=new Uint16Array([0,1,2,0,2,3]),bu=function(e){jte(t,e);function t(r){var n=e.call(this)||this;return n._anchor=new ql(n._onAnchorUpdate,n,r?r.defaultAnchor.x:0,r?r.defaultAnchor.y:0),n._texture=null,n._width=0,n._height=0,n._tint=null,n._tintRGB=null,n.tint=16777215,n.blendMode=Ze.NORMAL,n._cachedTint=16777215,n.uvs=null,n.texture=r||tt.EMPTY,n.vertexData=new Float32Array(8),n.vertexTrimmedData=null,n._transformID=-1,n._textureID=-1,n._transformTrimmedID=-1,n._textureTrimmedID=-1,n.indices=$te,n.pluginName="batch",n.isSprite=!0,n._roundPixels=We.ROUND_PIXELS,n}return t.prototype._onTextureUpdate=function(){this._textureID=-1,this._textureTrimmedID=-1,this._cachedTint=16777215,this._width&&(this.scale.x=Fc(this.scale.x)*this._width/this._texture.orig.width),this._height&&(this.scale.y=Fc(this.scale.y)*this._height/this._texture.orig.height)},t.prototype._onAnchorUpdate=function(){this._transformID=-1,this._transformTrimmedID=-1},t.prototype.calculateVertices=function(){var r=this._texture;if(!(this._transformID===this.transform._worldID&&this._textureID===r._updateID)){this._textureID!==r._updateID&&(this.uvs=this._texture._uvs.uvsFloat32),this._transformID=this.transform._worldID,this._textureID=r._updateID;var n=this.transform.worldTransform,i=n.a,o=n.b,s=n.c,a=n.d,l=n.tx,u=n.ty,c=this.vertexData,f=r.trim,p=r.orig,m=this._anchor,g=0,b=0,y=0,w=0;if(f?(b=f.x-m._x*p.width,g=b+f.width,w=f.y-m._y*p.height,y=w+f.height):(b=-m._x*p.width,g=b+p.width,w=-m._y*p.height,y=w+p.height),c[0]=i*b+s*w+l,c[1]=a*w+o*b+u,c[2]=i*g+s*w+l,c[3]=a*w+o*g+u,c[4]=i*g+s*y+l,c[5]=a*y+o*g+u,c[6]=i*b+s*y+l,c[7]=a*y+o*b+u,this._roundPixels)for(var x=We.RESOLUTION,T=0;T<c.length;++T)c[T]=Math.round((c[T]*x|0)/x)}},t.prototype.calculateTrimmedVertices=function(){if(!this.vertexTrimmedData)this.vertexTrimmedData=new Float32Array(8);else if(this._transformTrimmedID===this.transform._worldID&&this._textureTrimmedID===this._texture._updateID)return;this._transformTrimmedID=this.transform._worldID,this._textureTrimmedID=this._texture._updateID;var r=this._texture,n=this.vertexTrimmedData,i=r.orig,o=this._anchor,s=this.transform.worldTransform,a=s.a,l=s.b,u=s.c,c=s.d,f=s.tx,p=s.ty,m=-o._x*i.width,g=m+i.width,b=-o._y*i.height,y=b+i.height;n[0]=a*m+u*b+f,n[1]=c*b+l*m+p,n[2]=a*g+u*b+f,n[3]=c*b+l*g+p,n[4]=a*g+u*y+f,n[5]=c*y+l*g+p,n[6]=a*m+u*y+f,n[7]=c*y+l*m+p},t.prototype._render=function(r){this.calculateVertices(),r.batch.setObjectRenderer(r.plugins[this.pluginName]),r.plugins[this.pluginName].render(this)},t.prototype._calculateBounds=function(){var r=this._texture.trim,n=this._texture.orig;!r||r.width===n.width&&r.height===n.height?(this.calculateVertices(),this._bounds.addQuad(this.vertexData)):(this.calculateTrimmedVertices(),this._bounds.addQuad(this.vertexTrimmedData))},t.prototype.getLocalBounds=function(r){return this.children.length===0?(this._localBounds||(this._localBounds=new yu),this._localBounds.minX=this._texture.orig.width*-this._anchor._x,this._localBounds.minY=this._texture.orig.height*-this._anchor._y,this._localBounds.maxX=this._texture.orig.width*(1-this._anchor._x),this._localBounds.maxY=this._texture.orig.height*(1-this._anchor._y),r||(this._localBoundsRect||(this._localBoundsRect=new Me),r=this._localBoundsRect),this._localBounds.getRectangle(r)):e.prototype.getLocalBounds.call(this,r)},t.prototype.containsPoint=function(r){this.worldTransform.applyInverse(r,Gf);var n=this._texture.orig.width,i=this._texture.orig.height,o=-n*this.anchor.x,s=0;return Gf.x>=o&&Gf.x<o+n&&(s=-i*this.anchor.y,Gf.y>=s&&Gf.y<s+i)},t.prototype.destroy=function(r){e.prototype.destroy.call(this,r),this._texture.off("update",this._onTextureUpdate,this),this._anchor=null;var n=typeof r=="boolean"?r:r&&r.texture;if(n){var i=typeof r=="boolean"?r:r&&r.baseTexture;this._texture.destroy(!!i)}this._texture=null},t.from=function(r,n){var i=r instanceof tt?r:tt.from(r,n);return new t(i)},Object.defineProperty(t.prototype,"roundPixels",{get:function(){return this._roundPixels},set:function(r){this._roundPixels!==r&&(this._transformID=-1),this._roundPixels=r},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"width",{get:function(){return Math.abs(this.scale.x)*this._texture.orig.width},set:function(r){var n=Fc(this.scale.x)||1;this.scale.x=n*r/this._texture.orig.width,this._width=r},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return Math.abs(this.scale.y)*this._texture.orig.height},set:function(r){var n=Fc(this.scale.y)||1;this.scale.y=n*r/this._texture.orig.height,this._height=r},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"anchor",{get:function(){return this._anchor},set:function(r){this._anchor.copyFrom(r)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"tint",{get:function(){return this._tint},set:function(r){this._tint=r,this._tintRGB=(r>>16)+(r&65280)+((r&255)<<16)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"texture",{get:function(){return this._texture},set:function(r){this._texture!==r&&(this._texture&&this._texture.off("update",this._onTextureUpdate,this),this._texture=r||tt.EMPTY,this._cachedTint=16777215,this._textureID=-1,this._textureTrimmedID=-1,r&&(r.baseTexture.valid?this._onTextureUpdate():r.once("update",this._onTextureUpdate,this)))},enumerable:!1,configurable:!0}),t}(Ri);/*!
 * @pixi/text - v6.4.2
 * Compiled Thu, 02 Jun 2022 15:39:26 UTC
 *
 * @pixi/text is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var ix=function(e,t){return ix=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])},ix(e,t)};function Hte(e,t){ix(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var op;(function(e){e[e.LINEAR_VERTICAL=0]="LINEAR_VERTICAL",e[e.LINEAR_HORIZONTAL=1]="LINEAR_HORIZONTAL"})(op||(op={}));var P_={align:"left",breakWords:!1,dropShadow:!1,dropShadowAlpha:1,dropShadowAngle:Math.PI/6,dropShadowBlur:0,dropShadowColor:"black",dropShadowDistance:5,fill:"black",fillGradientType:op.LINEAR_VERTICAL,fillGradientStops:[],fontFamily:"Arial",fontSize:26,fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",letterSpacing:0,lineHeight:0,lineJoin:"miter",miterLimit:10,padding:0,stroke:"black",strokeThickness:0,textBaseline:"alphabetic",trim:!1,whiteSpace:"pre",wordWrap:!1,wordWrapWidth:100,leading:0},zte=["serif","sans-serif","monospace","cursive","fantasy","system-ui"],ea=function(){function e(t){this.styleID=0,this.reset(),R_(this,t,t)}return e.prototype.clone=function(){var t={};return R_(t,this,P_),new e(t)},e.prototype.reset=function(){R_(this,P_,P_)},Object.defineProperty(e.prototype,"align",{get:function(){return this._align},set:function(t){this._align!==t&&(this._align=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"breakWords",{get:function(){return this._breakWords},set:function(t){this._breakWords!==t&&(this._breakWords=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"dropShadow",{get:function(){return this._dropShadow},set:function(t){this._dropShadow!==t&&(this._dropShadow=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"dropShadowAlpha",{get:function(){return this._dropShadowAlpha},set:function(t){this._dropShadowAlpha!==t&&(this._dropShadowAlpha=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"dropShadowAngle",{get:function(){return this._dropShadowAngle},set:function(t){this._dropShadowAngle!==t&&(this._dropShadowAngle=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"dropShadowBlur",{get:function(){return this._dropShadowBlur},set:function(t){this._dropShadowBlur!==t&&(this._dropShadowBlur=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"dropShadowColor",{get:function(){return this._dropShadowColor},set:function(t){var r=A_(t);this._dropShadowColor!==r&&(this._dropShadowColor=r,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"dropShadowDistance",{get:function(){return this._dropShadowDistance},set:function(t){this._dropShadowDistance!==t&&(this._dropShadowDistance=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"fill",{get:function(){return this._fill},set:function(t){var r=A_(t);this._fill!==r&&(this._fill=r,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"fillGradientType",{get:function(){return this._fillGradientType},set:function(t){this._fillGradientType!==t&&(this._fillGradientType=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"fillGradientStops",{get:function(){return this._fillGradientStops},set:function(t){Vte(this._fillGradientStops,t)||(this._fillGradientStops=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"fontFamily",{get:function(){return this._fontFamily},set:function(t){this.fontFamily!==t&&(this._fontFamily=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"fontSize",{get:function(){return this._fontSize},set:function(t){this._fontSize!==t&&(this._fontSize=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"fontStyle",{get:function(){return this._fontStyle},set:function(t){this._fontStyle!==t&&(this._fontStyle=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"fontVariant",{get:function(){return this._fontVariant},set:function(t){this._fontVariant!==t&&(this._fontVariant=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"fontWeight",{get:function(){return this._fontWeight},set:function(t){this._fontWeight!==t&&(this._fontWeight=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"letterSpacing",{get:function(){return this._letterSpacing},set:function(t){this._letterSpacing!==t&&(this._letterSpacing=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"lineHeight",{get:function(){return this._lineHeight},set:function(t){this._lineHeight!==t&&(this._lineHeight=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"leading",{get:function(){return this._leading},set:function(t){this._leading!==t&&(this._leading=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"lineJoin",{get:function(){return this._lineJoin},set:function(t){this._lineJoin!==t&&(this._lineJoin=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"miterLimit",{get:function(){return this._miterLimit},set:function(t){this._miterLimit!==t&&(this._miterLimit=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"padding",{get:function(){return this._padding},set:function(t){this._padding!==t&&(this._padding=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"stroke",{get:function(){return this._stroke},set:function(t){var r=A_(t);this._stroke!==r&&(this._stroke=r,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"strokeThickness",{get:function(){return this._strokeThickness},set:function(t){this._strokeThickness!==t&&(this._strokeThickness=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"textBaseline",{get:function(){return this._textBaseline},set:function(t){this._textBaseline!==t&&(this._textBaseline=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"trim",{get:function(){return this._trim},set:function(t){this._trim!==t&&(this._trim=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"whiteSpace",{get:function(){return this._whiteSpace},set:function(t){this._whiteSpace!==t&&(this._whiteSpace=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"wordWrap",{get:function(){return this._wordWrap},set:function(t){this._wordWrap!==t&&(this._wordWrap=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"wordWrapWidth",{get:function(){return this._wordWrapWidth},set:function(t){this._wordWrapWidth!==t&&(this._wordWrapWidth=t,this.styleID++)},enumerable:!1,configurable:!0}),e.prototype.toFontString=function(){var t=typeof this.fontSize=="number"?this.fontSize+"px":this.fontSize,r=this.fontFamily;Array.isArray(this.fontFamily)||(r=this.fontFamily.split(","));for(var n=r.length-1;n>=0;n--){var i=r[n].trim();!/([\"\'])[^\'\"]+\1/.test(i)&&zte.indexOf(i)<0&&(i='"'+i+'"'),r[n]=i}return this.fontStyle+" "+this.fontVariant+" "+this.fontWeight+" "+t+" "+r.join(",")},e}();function PI(e){return typeof e=="number"?bO(e):(typeof e=="string"&&e.indexOf("0x")===0&&(e=e.replace("0x","#")),e)}function A_(e){if(Array.isArray(e)){for(var t=0;t<e.length;++t)e[t]=PI(e[t]);return e}else return PI(e)}function Vte(e,t){if(!Array.isArray(e)||!Array.isArray(t)||e.length!==t.length)return!1;for(var r=0;r<e.length;++r)if(e[r]!==t[r])return!1;return!0}function R_(e,t,r){for(var n in r)Array.isArray(t[n])?e[n]=t[n].slice():e[n]=t[n]}var cs=function(){function e(t,r,n,i,o,s,a,l,u){this.text=t,this.style=r,this.width=n,this.height=i,this.lines=o,this.lineWidths=s,this.lineHeight=a,this.maxLineWidth=l,this.fontProperties=u}return e.measureText=function(t,r,n,i){i===void 0&&(i=e._canvas),n=n==null?r.wordWrap:n;var o=r.toFontString(),s=e.measureFont(o);s.fontSize===0&&(s.fontSize=r.fontSize,s.ascent=r.fontSize);var a=i.getContext("2d");a.font=o;for(var l=n?e.wordWrap(t,r,i):t,u=l.split(/(?:\r\n|\r|\n)/),c=new Array(u.length),f=0,p=0;p<u.length;p++){var m=a.measureText(u[p]).width+(u[p].length-1)*r.letterSpacing;c[p]=m,f=Math.max(f,m)}var g=f+r.strokeThickness;r.dropShadow&&(g+=r.dropShadowDistance);var b=r.lineHeight||s.fontSize+r.strokeThickness,y=Math.max(b,s.fontSize+r.strokeThickness)+(u.length-1)*(b+r.leading);return r.dropShadow&&(y+=r.dropShadowDistance),new e(t,r,g,y,u,c,b+r.leading,f,s)},e.wordWrap=function(t,r,n){n===void 0&&(n=e._canvas);for(var i=n.getContext("2d"),o=0,s="",a="",l=Object.create(null),u=r.letterSpacing,c=r.whiteSpace,f=e.collapseSpaces(c),p=e.collapseNewlines(c),m=!f,g=r.wordWrapWidth+u,b=e.tokenize(t),y=0;y<b.length;y++){var w=b[y];if(e.isNewline(w)){if(!p){a+=e.addLine(s),m=!f,s="",o=0;continue}w=" "}if(f){var x=e.isBreakingSpace(w),T=e.isBreakingSpace(s[s.length-1]);if(x&&T)continue}var I=e.getFromCache(w,u,l,i);if(I>g)if(s!==""&&(a+=e.addLine(s),s="",o=0),e.canBreakWords(w,r.breakWords))for(var R=e.wordWrapSplit(w),S=0;S<R.length;S++){for(var O=R[S],P=1;R[S+P];){var N=R[S+P],A=O[O.length-1];if(!e.canBreakChars(A,N,w,S,r.breakWords))O+=N;else break;P++}S+=O.length-1;var j=e.getFromCache(O,u,l,i);j+o>g&&(a+=e.addLine(s),m=!1,s="",o=0),s+=O,o+=j}else{s.length>0&&(a+=e.addLine(s),s="",o=0);var X=y===b.length-1;a+=e.addLine(w,!X),m=!1,s="",o=0}else I+o>g&&(m=!1,a+=e.addLine(s),s="",o=0),(s.length>0||!e.isBreakingSpace(w)||m)&&(s+=w,o+=I)}return a+=e.addLine(s,!1),a},e.addLine=function(t,r){return r===void 0&&(r=!0),t=e.trimRight(t),t=r?t+`
`:t,t},e.getFromCache=function(t,r,n,i){var o=n[t];if(typeof o!="number"){var s=t.length*r;o=i.measureText(t).width+s,n[t]=o}return o},e.collapseSpaces=function(t){return t==="normal"||t==="pre-line"},e.collapseNewlines=function(t){return t==="normal"},e.trimRight=function(t){if(typeof t!="string")return"";for(var r=t.length-1;r>=0;r--){var n=t[r];if(!e.isBreakingSpace(n))break;t=t.slice(0,-1)}return t},e.isNewline=function(t){return typeof t!="string"?!1:e._newlines.indexOf(t.charCodeAt(0))>=0},e.isBreakingSpace=function(t,r){return typeof t!="string"?!1:e._breakingSpaces.indexOf(t.charCodeAt(0))>=0},e.tokenize=function(t){var r=[],n="";if(typeof t!="string")return r;for(var i=0;i<t.length;i++){var o=t[i],s=t[i+1];if(e.isBreakingSpace(o,s)||e.isNewline(o)){n!==""&&(r.push(n),n=""),r.push(o);continue}n+=o}return n!==""&&r.push(n),r},e.canBreakWords=function(t,r){return r},e.canBreakChars=function(t,r,n,i,o){return!0},e.wordWrapSplit=function(t){return t.split("")},e.measureFont=function(t){if(e._fonts[t])return e._fonts[t];var r={ascent:0,descent:0,fontSize:0},n=e._canvas,i=e._context;i.font=t;var o=e.METRICS_STRING+e.BASELINE_SYMBOL,s=Math.ceil(i.measureText(o).width),a=Math.ceil(i.measureText(e.BASELINE_SYMBOL).width),l=Math.ceil(e.HEIGHT_MULTIPLIER*a);a=a*e.BASELINE_MULTIPLIER|0,n.width=s,n.height=l,i.fillStyle="#f00",i.fillRect(0,0,s,l),i.font=t,i.textBaseline="alphabetic",i.fillStyle="#000",i.fillText(o,0,a);var u=i.getImageData(0,0,s,l).data,c=u.length,f=s*4,p=0,m=0,g=!1;for(p=0;p<a;++p){for(var b=0;b<f;b+=4)if(u[m+b]!==255){g=!0;break}if(!g)m+=f;else break}for(r.ascent=a-p,m=c-f,g=!1,p=l;p>a;--p){for(var b=0;b<f;b+=4)if(u[m+b]!==255){g=!0;break}if(!g)m-=f;else break}return r.descent=p-a,r.fontSize=r.ascent+r.descent,e._fonts[t]=r,r},e.clearMetrics=function(t){t===void 0&&(t=""),t?delete e._fonts[t]:e._fonts={}},Object.defineProperty(e,"_canvas",{get:function(){if(!e.__canvas){var t=void 0;try{var r=new OffscreenCanvas(0,0),n=r.getContext("2d");if(n&&n.measureText)return e.__canvas=r,r;t=document.createElement("canvas")}catch{t=document.createElement("canvas")}t.width=t.height=10,e.__canvas=t}return e.__canvas},enumerable:!1,configurable:!0}),Object.defineProperty(e,"_context",{get:function(){return e.__context||(e.__context=e._canvas.getContext("2d")),e.__context},enumerable:!1,configurable:!0}),e}();cs._fonts={};cs.METRICS_STRING="|\xC9q\xC5";cs.BASELINE_SYMBOL="M";cs.BASELINE_MULTIPLIER=1.4;cs.HEIGHT_MULTIPLIER=2;cs._newlines=[10,13];cs._breakingSpaces=[9,32,8192,8193,8194,8195,8196,8197,8198,8200,8201,8202,8287,12288];var Xte={texture:!0,children:!1,baseTexture:!0},$4=function(e){Hte(t,e);function t(r,n,i){var o=this,s=!1;i||(i=document.createElement("canvas"),s=!0),i.width=3,i.height=3;var a=tt.from(i);return a.orig=new Me,a.trim=new Me,o=e.call(this,a)||this,o._ownCanvas=s,o.canvas=i,o.context=o.canvas.getContext("2d"),o._resolution=We.RESOLUTION,o._autoResolution=!0,o._text=null,o._style=null,o._styleListener=null,o._font="",o.text=r,o.style=n,o.localStyleID=-1,o}return t.prototype.updateText=function(r){var n=this._style;if(this.localStyleID!==n.styleID&&(this.dirty=!0,this.localStyleID=n.styleID),!(!this.dirty&&r)){this._font=this._style.toFontString();var i=this.context,o=cs.measureText(this._text||" ",this._style,this._style.wordWrap,this.canvas),s=o.width,a=o.height,l=o.lines,u=o.lineHeight,c=o.lineWidths,f=o.maxLineWidth,p=o.fontProperties;this.canvas.width=Math.ceil(Math.ceil(Math.max(1,s)+n.padding*2)*this._resolution),this.canvas.height=Math.ceil(Math.ceil(Math.max(1,a)+n.padding*2)*this._resolution),i.scale(this._resolution,this._resolution),i.clearRect(0,0,this.canvas.width,this.canvas.height),i.font=this._font,i.lineWidth=n.strokeThickness,i.textBaseline=n.textBaseline,i.lineJoin=n.lineJoin,i.miterLimit=n.miterLimit;for(var m,g,b=n.dropShadow?2:1,y=0;y<b;++y){var w=n.dropShadow&&y===0,x=w?Math.ceil(Math.max(1,a)+n.padding*2):0,T=x*this._resolution;if(w){i.fillStyle="black",i.strokeStyle="black";var I=n.dropShadowColor,R=al(typeof I=="number"?I:wO(I)),S=n.dropShadowBlur*this._resolution,O=n.dropShadowDistance*this._resolution;i.shadowColor="rgba("+R[0]*255+","+R[1]*255+","+R[2]*255+","+n.dropShadowAlpha+")",i.shadowBlur=S,i.shadowOffsetX=Math.cos(n.dropShadowAngle)*O,i.shadowOffsetY=Math.sin(n.dropShadowAngle)*O+T}else i.fillStyle=this._generateFillStyle(n,l,o),i.strokeStyle=n.stroke,i.shadowColor="black",i.shadowBlur=0,i.shadowOffsetX=0,i.shadowOffsetY=0;var P=(u-p.fontSize)/2;(!t.nextLineHeightBehavior||u-p.fontSize<0)&&(P=0);for(var N=0;N<l.length;N++)m=n.strokeThickness/2,g=n.strokeThickness/2+N*u+p.ascent+P,n.align==="right"?m+=f-c[N]:n.align==="center"&&(m+=(f-c[N])/2),n.stroke&&n.strokeThickness&&this.drawLetterSpacing(l[N],m+n.padding,g+n.padding-x,!0),n.fill&&this.drawLetterSpacing(l[N],m+n.padding,g+n.padding-x)}this.updateTexture()}},t.prototype.drawLetterSpacing=function(r,n,i,o){o===void 0&&(o=!1);var s=this._style,a=s.letterSpacing,l=t.experimentalLetterSpacing&&("letterSpacing"in CanvasRenderingContext2D.prototype||"textLetterSpacing"in CanvasRenderingContext2D.prototype);if(a===0||l){l&&(this.context.letterSpacing=a,this.context.textLetterSpacing=a),o?this.context.strokeText(r,n,i):this.context.fillText(r,n,i);return}for(var u=n,c=Array.from?Array.from(r):r.split(""),f=this.context.measureText(r).width,p=0,m=0;m<c.length;++m){var g=c[m];o?this.context.strokeText(g,u,i):this.context.fillText(g,u,i);for(var b="",y=m+1;y<c.length;++y)b+=c[y];p=this.context.measureText(b).width,u+=f-p+a,f=p}},t.prototype.updateTexture=function(){var r=this.canvas;if(this._style.trim){var n=WJ(r);n.data&&(r.width=n.width,r.height=n.height,this.context.putImageData(n.data,0,0))}var i=this._texture,o=this._style,s=o.trim?0:o.padding,a=i.baseTexture;i.trim.width=i._frame.width=r.width/this._resolution,i.trim.height=i._frame.height=r.height/this._resolution,i.trim.x=-s,i.trim.y=-s,i.orig.width=i._frame.width-s*2,i.orig.height=i._frame.height-s*2,this._onTextureUpdate(),a.setRealSize(r.width,r.height,this._resolution),i.updateUvs(),this.dirty=!1},t.prototype._render=function(r){this._autoResolution&&this._resolution!==r.resolution&&(this._resolution=r.resolution,this.dirty=!0),this.updateText(!0),e.prototype._render.call(this,r)},t.prototype.updateTransform=function(){this.updateText(!0),e.prototype.updateTransform.call(this)},t.prototype.getBounds=function(r,n){return this.updateText(!0),this._textureID===-1&&(r=!1),e.prototype.getBounds.call(this,r,n)},t.prototype.getLocalBounds=function(r){return this.updateText(!0),e.prototype.getLocalBounds.call(this,r)},t.prototype._calculateBounds=function(){this.calculateVertices(),this._bounds.addQuad(this.vertexData)},t.prototype._generateFillStyle=function(r,n,i){var o=r.fill;if(Array.isArray(o)){if(o.length===1)return o[0]}else return o;var s,a=r.dropShadow?r.dropShadowDistance:0,l=r.padding||0,u=this.canvas.width/this._resolution-a-l*2,c=this.canvas.height/this._resolution-a-l*2,f=o.slice(),p=r.fillGradientStops.slice();if(!p.length)for(var m=f.length+1,g=1;g<m;++g)p.push(g/m);if(f.unshift(o[0]),p.unshift(0),f.push(o[o.length-1]),p.push(1),r.fillGradientType===op.LINEAR_VERTICAL){s=this.context.createLinearGradient(u/2,l,u/2,c+l);for(var b=i.fontProperties.fontSize+r.strokeThickness,g=0;g<n.length;g++){var y=i.lineHeight*(g-1)+b,w=i.lineHeight*g,x=w;g>0&&y>w&&(x=(w+y)/2);var T=w+b,I=i.lineHeight*(g+1),R=T;g+1<n.length&&I<T&&(R=(T+I)/2);for(var S=(R-x)/c,O=0;O<f.length;O++){var P=0;typeof p[O]=="number"?P=p[O]:P=O/f.length;var N=Math.min(1,Math.max(0,x/c+P*S));N=Number(N.toFixed(5)),s.addColorStop(N,f[O])}}}else{s=this.context.createLinearGradient(l,c/2,u+l,c/2);for(var A=f.length+1,j=1,g=0;g<f.length;g++){var X=void 0;typeof p[g]=="number"?X=p[g]:X=j/A,s.addColorStop(X,f[g]),j++}}return s},t.prototype.destroy=function(r){typeof r=="boolean"&&(r={children:r}),r=Object.assign({},Xte,r),e.prototype.destroy.call(this,r),this._ownCanvas&&(this.canvas.height=this.canvas.width=0),this.context=null,this.canvas=null,this._style=null},Object.defineProperty(t.prototype,"width",{get:function(){return this.updateText(!0),Math.abs(this.scale.x)*this._texture.orig.width},set:function(r){this.updateText(!0);var n=Fc(this.scale.x)||1;this.scale.x=n*r/this._texture.orig.width,this._width=r},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this.updateText(!0),Math.abs(this.scale.y)*this._texture.orig.height},set:function(r){this.updateText(!0);var n=Fc(this.scale.y)||1;this.scale.y=n*r/this._texture.orig.height,this._height=r},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"style",{get:function(){return this._style},set:function(r){r=r||{},r instanceof ea?this._style=r:this._style=new ea(r),this.localStyleID=-1,this.dirty=!0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"text",{get:function(){return this._text},set:function(r){r=String(r==null?"":r),this._text!==r&&(this._text=r,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"resolution",{get:function(){return this._resolution},set:function(r){this._autoResolution=!1,this._resolution!==r&&(this._resolution=r,this.dirty=!0)},enumerable:!1,configurable:!0}),t.nextLineHeightBehavior=!1,t.experimentalLetterSpacing=!1,t}(bu);/*!
 * @pixi/prepare - v6.4.2
 * Compiled Thu, 02 Jun 2022 15:39:26 UTC
 *
 * @pixi/prepare is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */We.UPLOADS_PER_FRAME=4;/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var ox=function(e,t){return ox=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])},ox(e,t)};function Wte(e,t){ox(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var Yte=function(){function e(t){this.maxItemsPerFrame=t,this.itemsLeft=0}return e.prototype.beginFrame=function(){this.itemsLeft=this.maxItemsPerFrame},e.prototype.allowedToUpload=function(){return this.itemsLeft-- >0},e}();function Kte(e,t){var r=!1;if(e&&e._textures&&e._textures.length){for(var n=0;n<e._textures.length;n++)if(e._textures[n]instanceof tt){var i=e._textures[n].baseTexture;t.indexOf(i)===-1&&(t.push(i),r=!0)}}return r}function qte(e,t){if(e.baseTexture instanceof xt){var r=e.baseTexture;return t.indexOf(r)===-1&&t.push(r),!0}return!1}function Zte(e,t){if(e._texture&&e._texture instanceof tt){var r=e._texture.baseTexture;return t.indexOf(r)===-1&&t.push(r),!0}return!1}function Jte(e,t){return t instanceof $4?(t.updateText(!0),!0):!1}function Qte(e,t){if(t instanceof ea){var r=t.toFontString();return cs.measureFont(r),!0}return!1}function ere(e,t){if(e instanceof $4){t.indexOf(e.style)===-1&&t.push(e.style),t.indexOf(e)===-1&&t.push(e);var r=e._texture.baseTexture;return t.indexOf(r)===-1&&t.push(r),!0}return!1}function tre(e,t){return e instanceof ea?(t.indexOf(e)===-1&&t.push(e),!0):!1}var rre=function(){function e(t){var r=this;this.limiter=new Yte(We.UPLOADS_PER_FRAME),this.renderer=t,this.uploadHookHelper=null,this.queue=[],this.addHooks=[],this.uploadHooks=[],this.completes=[],this.ticking=!1,this.delayedTick=function(){!r.queue||r.prepareItems()},this.registerFindHook(ere),this.registerFindHook(tre),this.registerFindHook(Kte),this.registerFindHook(qte),this.registerFindHook(Zte),this.registerUploadHook(Jte),this.registerUploadHook(Qte)}return e.prototype.upload=function(t,r){typeof t=="function"&&(r=t,t=null),t&&this.add(t),this.queue.length?(r&&this.completes.push(r),this.ticking||(this.ticking=!0,an.system.addOnce(this.tick,this,Qs.UTILITY))):r&&r()},e.prototype.tick=function(){setTimeout(this.delayedTick,0)},e.prototype.prepareItems=function(){for(this.limiter.beginFrame();this.queue.length&&this.limiter.allowedToUpload();){var t=this.queue[0],r=!1;if(t&&!t._destroyed){for(var n=0,i=this.uploadHooks.length;n<i;n++)if(this.uploadHooks[n](this.uploadHookHelper,t)){this.queue.shift(),r=!0;break}}r||this.queue.shift()}if(this.queue.length)an.system.addOnce(this.tick,this,Qs.UTILITY);else{this.ticking=!1;var o=this.completes.slice(0);this.completes.length=0;for(var n=0,i=o.length;n<i;n++)o[n]()}},e.prototype.registerFindHook=function(t){return t&&this.addHooks.push(t),this},e.prototype.registerUploadHook=function(t){return t&&this.uploadHooks.push(t),this},e.prototype.add=function(t){for(var r=0,n=this.addHooks.length;r<n&&!this.addHooks[r](t,this.queue);r++);if(t instanceof Ri)for(var r=t.children.length-1;r>=0;r--)this.add(t.children[r]);return this},e.prototype.destroy=function(){this.ticking&&an.system.remove(this.tick,this),this.ticking=!1,this.addHooks=null,this.uploadHooks=null,this.renderer=null,this.completes=null,this.queue=null,this.limiter=null,this.uploadHookHelper=null},e}();function o7(e,t){return t instanceof xt?(t._glTextures[e.CONTEXT_UID]||e.texture.bind(t),!0):!1}function nre(e,t){if(!(t instanceof Ka))return!1;var r=t.geometry;t.finishPoly(),r.updateBatches();for(var n=r.batches,i=0;i<n.length;i++){var o=n[i].style.texture;o&&o7(e,o.baseTexture)}return r.batchable||e.geometry.bind(r,t._resolveDirectShader(e)),!0}function ire(e,t){return e instanceof Ka?(t.push(e),!0):!1}var ore=function(e){Wte(t,e);function t(r){var n=e.call(this,r)||this;return n.uploadHookHelper=n.renderer,n.registerFindHook(ire),n.registerUploadHook(o7),n.registerUploadHook(nre),n}return t}(rre);/*!
 * @pixi/spritesheet - v6.4.2
 * Compiled Thu, 02 Jun 2022 15:39:26 UTC
 *
 * @pixi/spritesheet is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var sre=function(){function e(t,r,n){n===void 0&&(n=null),this._texture=t instanceof tt?t:null,this.baseTexture=t instanceof xt?t:this._texture.baseTexture,this.textures={},this.animations={},this.data=r;var i=this.baseTexture.resource;this.resolution=this._updateResolution(n||(i?i.url:null)),this._frames=this.data.frames,this._frameKeys=Object.keys(this._frames),this._batchIndex=0,this._callback=null}return e.prototype._updateResolution=function(t){t===void 0&&(t=null);var r=this.data.meta.scale,n=Ag(t,null);return n===null&&(n=r!==void 0?parseFloat(r):1),n!==1&&this.baseTexture.setResolution(n),n},e.prototype.parse=function(t){this._batchIndex=0,this._callback=t,this._frameKeys.length<=e.BATCH_SIZE?(this._processFrames(0),this._processAnimations(),this._parseComplete()):this._nextBatch()},e.prototype._processFrames=function(t){for(var r=t,n=e.BATCH_SIZE;r-t<n&&r<this._frameKeys.length;){var i=this._frameKeys[r],o=this._frames[i],s=o.frame;if(s){var a=null,l=null,u=o.trimmed!==!1&&o.sourceSize?o.sourceSize:o.frame,c=new Me(0,0,Math.floor(u.w)/this.resolution,Math.floor(u.h)/this.resolution);o.rotated?a=new Me(Math.floor(s.x)/this.resolution,Math.floor(s.y)/this.resolution,Math.floor(s.h)/this.resolution,Math.floor(s.w)/this.resolution):a=new Me(Math.floor(s.x)/this.resolution,Math.floor(s.y)/this.resolution,Math.floor(s.w)/this.resolution,Math.floor(s.h)/this.resolution),o.trimmed!==!1&&o.spriteSourceSize&&(l=new Me(Math.floor(o.spriteSourceSize.x)/this.resolution,Math.floor(o.spriteSourceSize.y)/this.resolution,Math.floor(s.w)/this.resolution,Math.floor(s.h)/this.resolution)),this.textures[i]=new tt(this.baseTexture,a,c,l,o.rotated?2:0,o.anchor),tt.addToCache(this.textures[i],i)}r++}},e.prototype._processAnimations=function(){var t=this.data.animations||{};for(var r in t){this.animations[r]=[];for(var n=0;n<t[r].length;n++){var i=t[r][n];this.animations[r].push(this.textures[i])}}},e.prototype._parseComplete=function(){var t=this._callback;this._callback=null,this._batchIndex=0,t.call(this,this.textures)},e.prototype._nextBatch=function(){var t=this;this._processFrames(this._batchIndex*e.BATCH_SIZE),this._batchIndex++,setTimeout(function(){t._batchIndex*e.BATCH_SIZE<t._frameKeys.length?t._nextBatch():(t._processAnimations(),t._parseComplete())},0)},e.prototype.destroy=function(t){var r;t===void 0&&(t=!1);for(var n in this.textures)this.textures[n].destroy();this._frames=null,this._frameKeys=null,this.data=null,this.textures=null,t&&((r=this._texture)===null||r===void 0||r.destroy(),this.baseTexture.destroy()),this._texture=null,this.baseTexture=null},e.BATCH_SIZE=1e3,e}(),are=function(){function e(){}return e.use=function(t,r){var n,i,o=this,s=t.name+"_image";if(!t.data||t.type!==Tr.TYPE.JSON||!t.data.frames||o.resources[s]){r();return}var a=(i=(n=t.data)===null||n===void 0?void 0:n.meta)===null||i===void 0?void 0:i.related_multi_packs;if(Array.isArray(a))for(var l=function(g){if(typeof g!="string")return"continue";var b=g.replace(".json",""),y=Uc.resolve(t.url.replace(o.baseUrl,""),g);if(o.resources[b]||Object.values(o.resources).some(function(x){return Uc.format(Uc.parse(x.url))===y}))return"continue";var w={crossOrigin:t.crossOrigin,loadType:Tr.LOAD_TYPE.XHR,xhrType:Tr.XHR_RESPONSE_TYPE.JSON,parentResource:t,metadata:t.metadata};o.add(b,y,w)},u=0,c=a;u<c.length;u++){var f=c[u];l(f)}var p={crossOrigin:t.crossOrigin,metadata:t.metadata.imageMetadata,parentResource:t},m=e.getResourcePath(t,o.baseUrl);o.add(s,m,p,function(b){if(b.error){r(b.error);return}var y=new sre(b.texture,t.data,t.url);y.parse(function(){t.spritesheet=y,t.textures=y.textures,r()})})},e.getResourcePath=function(t,r){return t.isDataUrl?t.data.meta.image:Uc.resolve(t.url.replace(r,""),t.data.meta.image)},e}();/*!
 * @pixi/sprite-tiling - v6.4.2
 * Compiled Thu, 02 Jun 2022 15:39:26 UTC
 *
 * @pixi/sprite-tiling is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var sx=function(e,t){return sx=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])},sx(e,t)};function s7(e,t){sx(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var jf=new Gt,lre=function(e){s7(t,e);function t(r,n,i){n===void 0&&(n=100),i===void 0&&(i=100);var o=e.call(this,r)||this;return o.tileTransform=new F4,o._width=n,o._height=i,o.uvMatrix=o.texture.uvMatrix||new B4(r),o.pluginName="tilingSprite",o.uvRespectAnchor=!1,o}return Object.defineProperty(t.prototype,"clampMargin",{get:function(){return this.uvMatrix.clampMargin},set:function(r){this.uvMatrix.clampMargin=r,this.uvMatrix.update(!0)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"tileScale",{get:function(){return this.tileTransform.scale},set:function(r){this.tileTransform.scale.copyFrom(r)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"tilePosition",{get:function(){return this.tileTransform.position},set:function(r){this.tileTransform.position.copyFrom(r)},enumerable:!1,configurable:!0}),t.prototype._onTextureUpdate=function(){this.uvMatrix&&(this.uvMatrix.texture=this._texture),this._cachedTint=16777215},t.prototype._render=function(r){var n=this._texture;!n||!n.valid||(this.tileTransform.updateLocalTransform(),this.uvMatrix.update(),r.batch.setObjectRenderer(r.plugins[this.pluginName]),r.plugins[this.pluginName].render(this))},t.prototype._calculateBounds=function(){var r=this._width*-this._anchor._x,n=this._height*-this._anchor._y,i=this._width*(1-this._anchor._x),o=this._height*(1-this._anchor._y);this._bounds.addFrame(this.transform,r,n,i,o)},t.prototype.getLocalBounds=function(r){return this.children.length===0?(this._bounds.minX=this._width*-this._anchor._x,this._bounds.minY=this._height*-this._anchor._y,this._bounds.maxX=this._width*(1-this._anchor._x),this._bounds.maxY=this._height*(1-this._anchor._y),r||(this._localBoundsRect||(this._localBoundsRect=new Me),r=this._localBoundsRect),this._bounds.getRectangle(r)):e.prototype.getLocalBounds.call(this,r)},t.prototype.containsPoint=function(r){this.worldTransform.applyInverse(r,jf);var n=this._width,i=this._height,o=-n*this.anchor._x;if(jf.x>=o&&jf.x<o+n){var s=-i*this.anchor._y;if(jf.y>=s&&jf.y<s+i)return!0}return!1},t.prototype.destroy=function(r){e.prototype.destroy.call(this,r),this.tileTransform=null,this.uvMatrix=null},t.from=function(r,n){var i=r instanceof tt?r:tt.from(r,n);return new t(i,n.width,n.height)},Object.defineProperty(t.prototype,"width",{get:function(){return this._width},set:function(r){this._width=r},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this._height},set:function(r){this._height=r},enumerable:!1,configurable:!0}),t}(bu),ure=`#version 100
#define SHADER_NAME Tiling-Sprite-Simple-100

precision lowp float;

varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform vec4 uColor;

void main(void)
{
    vec4 texSample = texture2D(uSampler, vTextureCoord);
    gl_FragColor = texSample * uColor;
}
`,AI=`#version 100
#define SHADER_NAME Tiling-Sprite-100

precision lowp float;

attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform mat3 uTransform;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;
}
`,cre=`#version 100
#ifdef GL_EXT_shader_texture_lod
    #extension GL_EXT_shader_texture_lod : enable
#endif
#define SHADER_NAME Tiling-Sprite-100

precision lowp float;

varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform vec4 uColor;
uniform mat3 uMapCoord;
uniform vec4 uClampFrame;
uniform vec2 uClampOffset;

void main(void)
{
    vec2 coord = vTextureCoord + ceil(uClampOffset - vTextureCoord);
    coord = (uMapCoord * vec3(coord, 1.0)).xy;
    vec2 unclamped = coord;
    coord = clamp(coord, uClampFrame.xy, uClampFrame.zw);

    #ifdef GL_EXT_shader_texture_lod
        vec4 texSample = unclamped == coord
            ? texture2D(uSampler, coord) 
            : texture2DLodEXT(uSampler, coord, 0);
    #else
        vec4 texSample = texture2D(uSampler, coord);
    #endif

    gl_FragColor = texSample * uColor;
}
`,hre=`#version 300 es
#define SHADER_NAME Tiling-Sprite-300

precision lowp float;

in vec2 aVertexPosition;
in vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform mat3 uTransform;

out vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;
}
`,fre=`#version 300 es
#define SHADER_NAME Tiling-Sprite-100

precision lowp float;

in vec2 vTextureCoord;

out vec4 fragmentColor;

uniform sampler2D uSampler;
uniform vec4 uColor;
uniform mat3 uMapCoord;
uniform vec4 uClampFrame;
uniform vec2 uClampOffset;

void main(void)
{
    vec2 coord = vTextureCoord + ceil(uClampOffset - vTextureCoord);
    coord = (uMapCoord * vec3(coord, 1.0)).xy;
    vec2 unclamped = coord;
    coord = clamp(coord, uClampFrame.xy, uClampFrame.zw);

    vec4 texSample = texture(uSampler, coord, unclamped == coord ? 0.0f : -32.0f);// lod-bias very negative to force lod 0

    fragmentColor = texSample * uColor;
}
`,Mv=new rr,dre=function(e){s7(t,e);function t(r){var n=e.call(this,r)||this;return r.runners.contextChange.add(n),n.quad=new DO,n.state=yl.for2d(),n}return t.prototype.contextChange=function(){var r=this.renderer,n={globals:r.globalUniforms};this.simpleShader=Ws.from(AI,ure,n),this.shader=r.context.webGLVersion>1?Ws.from(hre,fre,n):Ws.from(AI,cre,n)},t.prototype.render=function(r){var n=this.renderer,i=this.quad,o=i.vertices;o[0]=o[6]=r._width*-r.anchor.x,o[1]=o[3]=r._height*-r.anchor.y,o[2]=o[4]=r._width*(1-r.anchor.x),o[5]=o[7]=r._height*(1-r.anchor.y);var s=r.uvRespectAnchor?r.anchor.x:0,a=r.uvRespectAnchor?r.anchor.y:0;o=i.uvs,o[0]=o[6]=-s,o[1]=o[3]=-a,o[2]=o[4]=1-s,o[5]=o[7]=1-a,i.invalidate();var l=r._texture,u=l.baseTexture,c=r.tileTransform.localTransform,f=r.uvMatrix,p=u.isPowerOfTwo&&l.frame.width===u.width&&l.frame.height===u.height;p&&(u._glTextures[n.CONTEXT_UID]?p=u.wrapMode!==ts.CLAMP:u.wrapMode===ts.CLAMP&&(u.wrapMode=ts.REPEAT));var m=p?this.simpleShader:this.shader,g=l.width,b=l.height,y=r._width,w=r._height;Mv.set(c.a*g/y,c.b*g/w,c.c*b/y,c.d*b/w,c.tx/y,c.ty/w),Mv.invert(),p?Mv.prepend(f.mapCoord):(m.uniforms.uMapCoord=f.mapCoord.toArray(!0),m.uniforms.uClampFrame=f.uClampFrame,m.uniforms.uClampOffset=f.uClampOffset),m.uniforms.uTransform=Mv.toArray(!0),m.uniforms.uColor=SO(r.tint,r.worldAlpha,m.uniforms.uColor,u.alphaMode),m.uniforms.translationMatrix=r.transform.worldTransform.toArray(!0),m.uniforms.uSampler=l,n.shader.bind(m),n.geometry.bind(i),this.state.blendMode=TO(r.blendMode,u.alphaMode),n.state.set(this.state),n.geometry.draw(this.renderer.gl.TRIANGLES,6,0)},t}(Jy);/*!
 * @pixi/mesh - v6.4.2
 * Compiled Thu, 02 Jun 2022 15:39:26 UTC
 *
 * @pixi/mesh is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var ax=function(e,t){return ax=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])},ax(e,t)};function H4(e,t){ax(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var pre=function(){function e(t,r){this.uvBuffer=t,this.uvMatrix=r,this.data=null,this._bufferUpdateId=-1,this._textureUpdateId=-1,this._updateID=0}return e.prototype.update=function(t){if(!(!t&&this._bufferUpdateId===this.uvBuffer._updateID&&this._textureUpdateId===this.uvMatrix._updateID)){this._bufferUpdateId=this.uvBuffer._updateID,this._textureUpdateId=this.uvMatrix._updateID;var r=this.uvBuffer.data;(!this.data||this.data.length!==r.length)&&(this.data=new Float32Array(r.length)),this.uvMatrix.multiplyUvs(r,this.data),this._updateID++}},e}(),k_=new Gt,RI=new nu,sp=function(e){H4(t,e);function t(r,n,i,o){o===void 0&&(o=Ni.TRIANGLES);var s=e.call(this)||this;return s.geometry=r,s.shader=n,s.state=i||yl.for2d(),s.drawMode=o,s.start=0,s.size=0,s.uvs=null,s.indices=null,s.vertexData=new Float32Array(1),s.vertexDirty=-1,s._transformID=-1,s._roundPixels=We.ROUND_PIXELS,s.batchUvs=null,s}return Object.defineProperty(t.prototype,"geometry",{get:function(){return this._geometry},set:function(r){this._geometry!==r&&(this._geometry&&(this._geometry.refCount--,this._geometry.refCount===0&&this._geometry.dispose()),this._geometry=r,this._geometry&&this._geometry.refCount++,this.vertexDirty=-1)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"uvBuffer",{get:function(){return this.geometry.buffers[1]},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"verticesBuffer",{get:function(){return this.geometry.buffers[0]},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"material",{get:function(){return this.shader},set:function(r){this.shader=r},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"blendMode",{get:function(){return this.state.blendMode},set:function(r){this.state.blendMode=r},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"roundPixels",{get:function(){return this._roundPixels},set:function(r){this._roundPixels!==r&&(this._transformID=-1),this._roundPixels=r},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"tint",{get:function(){return"tint"in this.shader?this.shader.tint:null},set:function(r){this.shader.tint=r},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"texture",{get:function(){return"texture"in this.shader?this.shader.texture:null},set:function(r){this.shader.texture=r},enumerable:!1,configurable:!0}),t.prototype._render=function(r){var n=this.geometry.buffers[0].data,i=this.shader;i.batchable&&this.drawMode===Ni.TRIANGLES&&n.length<t.BATCHABLE_SIZE*2?this._renderToBatch(r):this._renderDefault(r)},t.prototype._renderDefault=function(r){var n=this.shader;n.alpha=this.worldAlpha,n.update&&n.update(),r.batch.flush(),n.uniforms.translationMatrix=this.transform.worldTransform.toArray(!0),r.shader.bind(n),r.state.set(this.state),r.geometry.bind(this.geometry,n),r.geometry.draw(this.drawMode,this.size,this.start,this.geometry.instanceCount)},t.prototype._renderToBatch=function(r){var n=this.geometry,i=this.shader;i.uvMatrix&&(i.uvMatrix.update(),this.calculateUvs()),this.calculateVertices(),this.indices=n.indexBuffer.data,this._tintRGB=i._tintRGB,this._texture=i.texture;var o=this.material.pluginName;r.batch.setObjectRenderer(r.plugins[o]),r.plugins[o].render(this)},t.prototype.calculateVertices=function(){var r=this.geometry,n=r.buffers[0],i=n.data,o=n._updateID;if(!(o===this.vertexDirty&&this._transformID===this.transform._worldID)){this._transformID=this.transform._worldID,this.vertexData.length!==i.length&&(this.vertexData=new Float32Array(i.length));for(var s=this.transform.worldTransform,a=s.a,l=s.b,u=s.c,c=s.d,f=s.tx,p=s.ty,m=this.vertexData,g=0;g<m.length/2;g++){var b=i[g*2],y=i[g*2+1];m[g*2]=a*b+u*y+f,m[g*2+1]=l*b+c*y+p}if(this._roundPixels)for(var w=We.RESOLUTION,g=0;g<m.length;++g)m[g]=Math.round((m[g]*w|0)/w);this.vertexDirty=o}},t.prototype.calculateUvs=function(){var r=this.geometry.buffers[1],n=this.shader;n.uvMatrix.isSimple?this.uvs=r.data:(this.batchUvs||(this.batchUvs=new pre(r,n.uvMatrix)),this.batchUvs.update(),this.uvs=this.batchUvs.data)},t.prototype._calculateBounds=function(){this.calculateVertices(),this._bounds.addVertexData(this.vertexData,0,this.vertexData.length)},t.prototype.containsPoint=function(r){if(!this.getBounds().contains(r.x,r.y))return!1;this.worldTransform.applyInverse(r,k_);for(var n=this.geometry.getBuffer("aVertexPosition").data,i=RI.points,o=this.geometry.getIndex().data,s=o.length,a=this.drawMode===4?3:1,l=0;l+2<s;l+=a){var u=o[l]*2,c=o[l+1]*2,f=o[l+2]*2;if(i[0]=n[u],i[1]=n[u+1],i[2]=n[c],i[3]=n[c+1],i[4]=n[f],i[5]=n[f+1],RI.contains(k_.x,k_.y))return!0}return!1},t.prototype.destroy=function(r){e.prototype.destroy.call(this,r),this._cachedTexture&&(this._cachedTexture.destroy(),this._cachedTexture=null),this.geometry=null,this.shader=null,this.state=null,this.uvs=null,this.indices=null,this.vertexData=null},t.BATCHABLE_SIZE=100,t}(Ri),mre=`varying vec2 vTextureCoord;
uniform vec4 uColor;

uniform sampler2D uSampler;

void main(void)
{
    gl_FragColor = texture2D(uSampler, vTextureCoord) * uColor;
}
`,vre=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform mat3 uTextureMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = (uTextureMatrix * vec3(aTextureCoord, 1.0)).xy;
}
`,ap=function(e){H4(t,e);function t(r,n){var i=this,o={uSampler:r,alpha:1,uTextureMatrix:rr.IDENTITY,uColor:new Float32Array([1,1,1,1])};return n=Object.assign({tint:16777215,alpha:1,pluginName:"batch"},n),n.uniforms&&Object.assign(o,n.uniforms),i=e.call(this,n.program||Fh.from(vre,mre),o)||this,i._colorDirty=!1,i.uvMatrix=new B4(r),i.batchable=n.program===void 0,i.pluginName=n.pluginName,i.tint=n.tint,i.alpha=n.alpha,i}return Object.defineProperty(t.prototype,"texture",{get:function(){return this.uniforms.uSampler},set:function(r){this.uniforms.uSampler!==r&&(!this.uniforms.uSampler.baseTexture.alphaMode!=!r.baseTexture.alphaMode&&(this._colorDirty=!0),this.uniforms.uSampler=r,this.uvMatrix.texture=r)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"alpha",{get:function(){return this._alpha},set:function(r){r!==this._alpha&&(this._alpha=r,this._colorDirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"tint",{get:function(){return this._tint},set:function(r){r!==this._tint&&(this._tint=r,this._tintRGB=(r>>16)+(r&65280)+((r&255)<<16),this._colorDirty=!0)},enumerable:!1,configurable:!0}),t.prototype.update=function(){if(this._colorDirty){this._colorDirty=!1;var r=this.texture.baseTexture;SO(this._tint,this._alpha,this.uniforms.uColor,r.alphaMode)}this.uvMatrix.update()&&(this.uniforms.uTextureMatrix=this.uvMatrix.mapCoord)},t}(Ws),Qy=function(e){H4(t,e);function t(r,n,i){var o=e.call(this)||this,s=new Rr(r),a=new Rr(n,!0),l=new Rr(i,!0,!0);return o.addAttribute("aVertexPosition",s,2,!1,$e.FLOAT).addAttribute("aTextureCoord",a,2,!1,$e.FLOAT).addIndex(l),o._updateId=-1,o}return Object.defineProperty(t.prototype,"vertexDirtyId",{get:function(){return this.buffers[0]._updateID},enumerable:!1,configurable:!0}),t}(Uh);/*!
 * @pixi/text-bitmap - v6.4.2
 * Compiled Thu, 02 Jun 2022 15:39:26 UTC
 *
 * @pixi/text-bitmap is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var lx=function(e,t){return lx=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])},lx(e,t)};function gre(e,t){lx(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var Og=function(){function e(){this.info=[],this.common=[],this.page=[],this.char=[],this.kerning=[],this.distanceField=[]}return e}(),yre=function(){function e(){}return e.test=function(t){return typeof t=="string"&&t.indexOf("info face=")===0},e.parse=function(t){var r=t.match(/^[a-z]+\s+.+$/gm),n={info:[],common:[],page:[],char:[],chars:[],kerning:[],kernings:[],distanceField:[]};for(var i in r){var o=r[i].match(/^[a-z]+/gm)[0],s=r[i].match(/[a-zA-Z]+=([^\s"']+|"([^"]*)")/gm),a={};for(var l in s){var u=s[l].split("="),c=u[0],f=u[1].replace(/"/gm,""),p=parseFloat(f),m=isNaN(p)?f:p;a[c]=m}n[o].push(a)}var g=new Og;return n.info.forEach(function(b){return g.info.push({face:b.face,size:parseInt(b.size,10)})}),n.common.forEach(function(b){return g.common.push({lineHeight:parseInt(b.lineHeight,10)})}),n.page.forEach(function(b){return g.page.push({id:parseInt(b.id,10),file:b.file})}),n.char.forEach(function(b){return g.char.push({id:parseInt(b.id,10),page:parseInt(b.page,10),x:parseInt(b.x,10),y:parseInt(b.y,10),width:parseInt(b.width,10),height:parseInt(b.height,10),xoffset:parseInt(b.xoffset,10),yoffset:parseInt(b.yoffset,10),xadvance:parseInt(b.xadvance,10)})}),n.kerning.forEach(function(b){return g.kerning.push({first:parseInt(b.first,10),second:parseInt(b.second,10),amount:parseInt(b.amount,10)})}),n.distanceField.forEach(function(b){return g.distanceField.push({distanceRange:parseInt(b.distanceRange,10),fieldType:b.fieldType})}),g},e}(),ux=function(){function e(){}return e.test=function(t){return t instanceof XMLDocument&&t.getElementsByTagName("page").length&&t.getElementsByTagName("info")[0].getAttribute("face")!==null},e.parse=function(t){for(var r=new Og,n=t.getElementsByTagName("info"),i=t.getElementsByTagName("common"),o=t.getElementsByTagName("page"),s=t.getElementsByTagName("char"),a=t.getElementsByTagName("kerning"),l=t.getElementsByTagName("distanceField"),u=0;u<n.length;u++)r.info.push({face:n[u].getAttribute("face"),size:parseInt(n[u].getAttribute("size"),10)});for(var u=0;u<i.length;u++)r.common.push({lineHeight:parseInt(i[u].getAttribute("lineHeight"),10)});for(var u=0;u<o.length;u++)r.page.push({id:parseInt(o[u].getAttribute("id"),10)||0,file:o[u].getAttribute("file")});for(var u=0;u<s.length;u++){var c=s[u];r.char.push({id:parseInt(c.getAttribute("id"),10),page:parseInt(c.getAttribute("page"),10)||0,x:parseInt(c.getAttribute("x"),10),y:parseInt(c.getAttribute("y"),10),width:parseInt(c.getAttribute("width"),10),height:parseInt(c.getAttribute("height"),10),xoffset:parseInt(c.getAttribute("xoffset"),10),yoffset:parseInt(c.getAttribute("yoffset"),10),xadvance:parseInt(c.getAttribute("xadvance"),10)})}for(var u=0;u<a.length;u++)r.kerning.push({first:parseInt(a[u].getAttribute("first"),10),second:parseInt(a[u].getAttribute("second"),10),amount:parseInt(a[u].getAttribute("amount"),10)});for(var u=0;u<l.length;u++)r.distanceField.push({fieldType:l[u].getAttribute("fieldType"),distanceRange:parseInt(l[u].getAttribute("distanceRange"),10)});return r},e}(),_re=function(){function e(){}return e.test=function(t){if(typeof t=="string"&&t.indexOf("<font>")>-1){var r=new globalThis.DOMParser().parseFromString(t,"text/xml");return ux.test(r)}return!1},e.parse=function(t){var r=new globalThis.DOMParser().parseFromString(t,"text/xml");return ux.parse(r)},e}(),O_=[yre,ux,_re];function a7(e){for(var t=0;t<O_.length;t++)if(O_[t].test(e))return O_[t];return null}function bre(e,t,r,n,i,o){var s=r.fill;if(Array.isArray(s)){if(s.length===1)return s[0]}else return s;var a,l=r.dropShadow?r.dropShadowDistance:0,u=r.padding||0,c=e.width/n-l-u*2,f=e.height/n-l-u*2,p=s.slice(),m=r.fillGradientStops.slice();if(!m.length)for(var g=p.length+1,b=1;b<g;++b)m.push(b/g);if(p.unshift(s[0]),m.unshift(0),p.push(s[s.length-1]),m.push(1),r.fillGradientType===op.LINEAR_VERTICAL){a=t.createLinearGradient(c/2,u,c/2,f+u);for(var y=0,w=o.fontProperties.fontSize+r.strokeThickness,x=w/f,b=0;b<i.length;b++)for(var T=o.lineHeight*b,I=0;I<p.length;I++){var R=0;typeof m[I]=="number"?R=m[I]:R=I/p.length;var S=T/f+R*x,O=Math.max(y,S);O=Math.min(O,1),a.addColorStop(O,p[I]),y=O}}else{a=t.createLinearGradient(u,f/2,c+u,f/2);for(var P=p.length+1,N=1,b=0;b<p.length;b++){var A=void 0;typeof m[b]=="number"?A=m[b]:A=N/P,a.addColorStop(A,p[b]),N++}}return a}function wre(e,t,r,n,i,o,s){var a=r.text,l=r.fontProperties;t.translate(n,i),t.scale(o,o);var u=s.strokeThickness/2,c=-(s.strokeThickness/2);if(t.font=s.toFontString(),t.lineWidth=s.strokeThickness,t.textBaseline=s.textBaseline,t.lineJoin=s.lineJoin,t.miterLimit=s.miterLimit,t.fillStyle=bre(e,t,s,o,[a],r),t.strokeStyle=s.stroke,s.dropShadow){var f=s.dropShadowColor,p=al(typeof f=="number"?f:wO(f)),m=s.dropShadowBlur*o,g=s.dropShadowDistance*o;t.shadowColor="rgba("+p[0]*255+","+p[1]*255+","+p[2]*255+","+s.dropShadowAlpha+")",t.shadowBlur=m,t.shadowOffsetX=Math.cos(s.dropShadowAngle)*g,t.shadowOffsetY=Math.sin(s.dropShadowAngle)*g}else t.shadowColor="black",t.shadowBlur=0,t.shadowOffsetX=0,t.shadowOffsetY=0;s.stroke&&s.strokeThickness&&t.strokeText(a,u,c+r.lineHeight-l.descent),s.fill&&t.fillText(a,u,c+r.lineHeight-l.descent),t.setTransform(1,0,0,1,0,0),t.fillStyle="rgba(0, 0, 0, 0)"}function l7(e){return Array.from?Array.from(e):e.split("")}function xre(e){typeof e=="string"&&(e=[e]);for(var t=[],r=0,n=e.length;r<n;r++){var i=e[r];if(Array.isArray(i)){if(i.length!==2)throw new Error("[BitmapFont]: Invalid character range length, expecting 2 got "+i.length+".");var o=i[0].charCodeAt(0),s=i[1].charCodeAt(0);if(s<o)throw new Error("[BitmapFont]: Invalid character range.");for(var a=o,l=s;a<=l;a++)t.push(String.fromCharCode(a))}else t.push.apply(t,l7(i))}if(t.length===0)throw new Error("[BitmapFont]: Empty set when resolving characters.");return t}function y0(e){return e.codePointAt?e.codePointAt(0):e.charCodeAt(0)}var xc=function(){function e(t,r,n){var i,o,s=t.info[0],a=t.common[0],l=t.page[0],u=t.distanceField[0],c=Ag(l.file),f={};this._ownsTextures=n,this.font=s.face,this.size=s.size,this.lineHeight=a.lineHeight/c,this.chars={},this.pageTextures=f;for(var p=0;p<t.page.length;p++){var m=t.page[p],g=m.id,b=m.file;f[g]=r instanceof Array?r[p]:r[b],(u==null?void 0:u.fieldType)&&u.fieldType!=="none"&&(f[g].baseTexture.alphaMode=So.NO_PREMULTIPLIED_ALPHA)}for(var p=0;p<t.char.length;p++){var y=t.char[p],g=y.id,w=y.page,x=t.char[p],T=x.x,I=x.y,R=x.width,S=x.height,O=x.xoffset,P=x.yoffset,N=x.xadvance;T/=c,I/=c,R/=c,S/=c,O/=c,P/=c,N/=c;var A=new Me(T+f[w].frame.x/c,I+f[w].frame.y/c,R,S);this.chars[g]={xOffset:O,yOffset:P,xAdvance:N,kerning:{},texture:new tt(f[w].baseTexture,A),page:w}}for(var p=0;p<t.kerning.length;p++){var j=t.kerning[p],X=j.first,G=j.second,ne=j.amount;X/=c,G/=c,ne/=c,this.chars[G]&&(this.chars[G].kerning[X]=ne)}this.distanceFieldRange=u==null?void 0:u.distanceRange,this.distanceFieldType=(o=(i=u==null?void 0:u.fieldType)===null||i===void 0?void 0:i.toLowerCase())!==null&&o!==void 0?o:"none"}return e.prototype.destroy=function(){for(var t in this.chars)this.chars[t].texture.destroy(),this.chars[t].texture=null;for(var t in this.pageTextures)this._ownsTextures&&this.pageTextures[t].destroy(!0),this.pageTextures[t]=null;this.chars=null,this.pageTextures=null},e.install=function(t,r,n){var i;if(t instanceof Og)i=t;else{var o=a7(t);if(!o)throw new Error("Unrecognized data format for font.");i=o.parse(t)}r instanceof tt&&(r=[r]);var s=new e(i,r,n);return e.available[s.font]=s,s},e.uninstall=function(t){var r=e.available[t];if(!r)throw new Error("No font found named '"+t+"'");r.destroy(),delete e.available[t]},e.from=function(t,r,n){if(!t)throw new Error("[BitmapFont] Property `name` is required.");var i=Object.assign({},e.defaultOptions,n),o=i.chars,s=i.padding,a=i.resolution,l=i.textureWidth,u=i.textureHeight,c=xre(o),f=r instanceof ea?r:new ea(r),p=l,m=new Og;m.info[0]={face:f.fontFamily,size:f.fontSize},m.common[0]={lineHeight:f.fontSize};for(var g=0,b=0,y,w,x,T=0,I=[],R=0;R<c.length;R++){y||(y=document.createElement("canvas"),y.width=l,y.height=u,w=y.getContext("2d"),x=new xt(y,{resolution:a}),I.push(new tt(x)),m.page.push({id:I.length-1,file:""}));var S=cs.measureText(c[R],f,!1,y),O=S.width,P=Math.ceil(S.height),N=Math.ceil((f.fontStyle==="italic"?2:1)*O);if(b>=u-P*a){if(b===0)throw new Error("[BitmapFont] textureHeight "+u+"px is "+("too small for "+f.fontSize+"px fonts"));--R,y=null,w=null,x=null,b=0,g=0,T=0;continue}if(T=Math.max(P+S.fontProperties.descent,T),N*a+g>=p){--R,b+=T*a,b=Math.ceil(b),g=0,T=0;continue}wre(y,w,S,g,b,a,f);var A=y0(S.text);m.char.push({id:A,page:I.length-1,x:g/a,y:b/a,width:N,height:P,xoffset:0,yoffset:0,xadvance:Math.ceil(O-(f.dropShadow?f.dropShadowDistance:0)-(f.stroke?f.strokeThickness:0))}),g+=(N+2*s)*a,g=Math.ceil(g)}for(var R=0,j=c.length;R<j;R++)for(var X=c[R],G=0;G<j;G++){var ne=c[G],W=w.measureText(X).width,Y=w.measureText(ne).width,de=w.measureText(X+ne).width,le=de-(W+Y);le&&m.kerning.push({first:y0(X),second:y0(ne),amount:le})}var ie=new e(m,I,!0);return e.available[t]!==void 0&&e.uninstall(t),e.available[t]=ie,ie},e.ALPHA=[["a","z"],["A","Z"]," "],e.NUMERIC=[["0","9"]],e.ALPHANUMERIC=[["a","z"],["A","Z"],["0","9"]," "],e.ASCII=[[" ","~"]],e.defaultOptions={resolution:1,textureWidth:512,textureHeight:512,padding:4,chars:e.ALPHANUMERIC},e.available={},e}(),Tre=`// Pixi texture info\r
varying vec2 vTextureCoord;\r
uniform sampler2D uSampler;\r
\r
// Tint\r
uniform vec4 uColor;\r
\r
// on 2D applications fwidth is screenScale / glyphAtlasScale * distanceFieldRange\r
uniform float uFWidth;\r
\r
void main(void) {\r
\r
  // To stack MSDF and SDF we need a non-pre-multiplied-alpha texture.\r
  vec4 texColor = texture2D(uSampler, vTextureCoord);\r
\r
  // MSDF\r
  float median = texColor.r + texColor.g + texColor.b -\r
                  min(texColor.r, min(texColor.g, texColor.b)) -\r
                  max(texColor.r, max(texColor.g, texColor.b));\r
  // SDF\r
  median = min(median, texColor.a);\r
\r
  float screenPxDistance = uFWidth * (median - 0.5);\r
  float alpha = clamp(screenPxDistance + 0.5, 0.0, 1.0);\r
\r
  // NPM Textures, NPM outputs\r
  gl_FragColor = vec4(uColor.rgb, uColor.a * alpha);\r
\r
}\r
`,Sre=`// Mesh material default fragment\r
attribute vec2 aVertexPosition;\r
attribute vec2 aTextureCoord;\r
\r
uniform mat3 projectionMatrix;\r
uniform mat3 translationMatrix;\r
uniform mat3 uTextureMatrix;\r
\r
varying vec2 vTextureCoord;\r
\r
void main(void)\r
{\r
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\r
\r
    vTextureCoord = (uTextureMatrix * vec3(aTextureCoord, 1.0)).xy;\r
}\r
`,Ere=[],Cre=[],kI=[],Ire=function(e){gre(t,e);function t(r,n){n===void 0&&(n={});var i=e.call(this)||this;i._tint=16777215;var o=Object.assign({},t.styleDefaults,n),s=o.align,a=o.tint,l=o.maxWidth,u=o.letterSpacing,c=o.fontName,f=o.fontSize;if(!xc.available[c])throw new Error('Missing BitmapFont "'+c+'"');return i._activePagesMeshData=[],i._textWidth=0,i._textHeight=0,i._align=s,i._tint=a,i._fontName=c,i._fontSize=f||xc.available[c].size,i.text=r,i._maxWidth=l,i._maxLineHeight=0,i._letterSpacing=u,i._anchor=new ql(function(){i.dirty=!0},i,0,0),i._roundPixels=We.ROUND_PIXELS,i.dirty=!0,i._resolution=We.RESOLUTION,i._autoResolution=!0,i._textureCache={},i}return t.prototype.updateText=function(){for(var r,n=xc.available[this._fontName],i=this._fontSize/n.size,o=new Gt,s=[],a=[],l=[],u=this._text.replace(/(?:\r\n|\r)/g,`
`)||" ",c=l7(u),f=this._maxWidth*n.size/this._fontSize,p=n.distanceFieldType==="none"?Ere:Cre,m=null,g=0,b=0,y=0,w=-1,x=0,T=0,I=0,R=0,S=0;S<c.length;S++){var O=c[S],P=y0(O);if(/(?:\s)/.test(O)&&(w=S,x=g,R++),O==="\r"||O===`
`){a.push(g),l.push(-1),b=Math.max(b,g),++y,++T,o.x=0,o.y+=n.lineHeight,m=null,R=0;continue}var N=n.chars[P];if(!!N){m&&N.kerning[m]&&(o.x+=N.kerning[m]);var A=kI.pop()||{texture:tt.EMPTY,line:0,charCode:0,prevSpaces:0,position:new Gt};A.texture=N.texture,A.line=y,A.charCode=P,A.position.x=o.x+N.xOffset+this._letterSpacing/2,A.position.y=o.y+N.yOffset,A.prevSpaces=R,s.push(A),g=A.position.x+Math.max(N.xAdvance,N.texture.orig.width),o.x+=N.xAdvance+this._letterSpacing,I=Math.max(I,N.yOffset+N.texture.height),m=P,w!==-1&&f>0&&o.x>f&&(++T,Xs(s,1+w-T,1+S-w),S=w,w=-1,a.push(x),l.push(s.length>0?s[s.length-1].prevSpaces:0),b=Math.max(b,x),y++,o.x=0,o.y+=n.lineHeight,m=null,R=0)}}var j=c[c.length-1];j!=="\r"&&j!==`
`&&(/(?:\s)/.test(j)&&(g=x),a.push(g),b=Math.max(b,g),l.push(-1));for(var X=[],S=0;S<=y;S++){var G=0;this._align==="right"?G=b-a[S]:this._align==="center"?G=(b-a[S])/2:this._align==="justify"&&(G=l[S]<0?0:(b-a[S])/l[S]),X.push(G)}for(var ne=s.length,W={},Y=[],de=this._activePagesMeshData,S=0;S<de.length;S++)p.push(de[S]);for(var S=0;S<ne;S++){var le=s[S].texture,ie=le.baseTexture.uid;if(!W[ie]){var Q=p.pop();if(!Q){var ee=new Qy,K=void 0,te=void 0;n.distanceFieldType==="none"?(K=new ap(tt.EMPTY),te=Ze.NORMAL):(K=new ap(tt.EMPTY,{program:Fh.from(Sre,Tre),uniforms:{uFWidth:0}}),te=Ze.NORMAL_NPM);var ye=new sp(ee,K);ye.blendMode=te,Q={index:0,indexCount:0,vertexCount:0,uvsCount:0,total:0,mesh:ye,vertices:null,uvs:null,indices:null}}Q.index=0,Q.indexCount=0,Q.vertexCount=0,Q.uvsCount=0,Q.total=0;var Ce=this._textureCache;Ce[ie]=Ce[ie]||new tt(le.baseTexture),Q.mesh.texture=Ce[ie],Q.mesh.tint=this._tint,Y.push(Q),W[ie]=Q}W[ie].total++}for(var S=0;S<de.length;S++)Y.indexOf(de[S])===-1&&this.removeChild(de[S].mesh);for(var S=0;S<Y.length;S++)Y[S].mesh.parent!==this&&this.addChild(Y[S].mesh);this._activePagesMeshData=Y;for(var S in W){var Q=W[S],Ie=Q.total;if(!(((r=Q.indices)===null||r===void 0?void 0:r.length)>6*Ie)||Q.vertices.length<sp.BATCHABLE_SIZE*2)Q.vertices=new Float32Array(4*2*Ie),Q.uvs=new Float32Array(4*2*Ie),Q.indices=new Uint16Array(6*Ie);else for(var Ye=Q.total,pe=Q.vertices,F=Ye*4*2;F<pe.length;F++)pe[F]=0;Q.mesh.size=6*Ie}for(var S=0;S<ne;S++){var O=s[S],$=O.position.x+X[O.line]*(this._align==="justify"?O.prevSpaces:1);this._roundPixels&&($=Math.round($));var q=$*i,ve=O.position.y*i,le=O.texture,ue=W[le.baseTexture.uid],Ee=le.frame,Pe=le._uvs,Le=ue.index++;ue.indices[Le*6+0]=0+Le*4,ue.indices[Le*6+1]=1+Le*4,ue.indices[Le*6+2]=2+Le*4,ue.indices[Le*6+3]=0+Le*4,ue.indices[Le*6+4]=2+Le*4,ue.indices[Le*6+5]=3+Le*4,ue.vertices[Le*8+0]=q,ue.vertices[Le*8+1]=ve,ue.vertices[Le*8+2]=q+Ee.width*i,ue.vertices[Le*8+3]=ve,ue.vertices[Le*8+4]=q+Ee.width*i,ue.vertices[Le*8+5]=ve+Ee.height*i,ue.vertices[Le*8+6]=q,ue.vertices[Le*8+7]=ve+Ee.height*i,ue.uvs[Le*8+0]=Pe.x0,ue.uvs[Le*8+1]=Pe.y0,ue.uvs[Le*8+2]=Pe.x1,ue.uvs[Le*8+3]=Pe.y1,ue.uvs[Le*8+4]=Pe.x2,ue.uvs[Le*8+5]=Pe.y2,ue.uvs[Le*8+6]=Pe.x3,ue.uvs[Le*8+7]=Pe.y3}this._textWidth=b*i,this._textHeight=(o.y+n.lineHeight)*i;for(var S in W){var Q=W[S];if(this.anchor.x!==0||this.anchor.y!==0)for(var ot=0,It=this._textWidth*this.anchor.x,Lt=this._textHeight*this.anchor.y,Kt=0;Kt<Q.total;Kt++)Q.vertices[ot++]-=It,Q.vertices[ot++]-=Lt,Q.vertices[ot++]-=It,Q.vertices[ot++]-=Lt,Q.vertices[ot++]-=It,Q.vertices[ot++]-=Lt,Q.vertices[ot++]-=It,Q.vertices[ot++]-=Lt;this._maxLineHeight=I*i;var qt=Q.mesh.geometry.getBuffer("aVertexPosition"),Tt=Q.mesh.geometry.getBuffer("aTextureCoord"),jr=Q.mesh.geometry.getIndex();qt.data=Q.vertices,Tt.data=Q.uvs,jr.data=Q.indices,qt.update(),Tt.update(),jr.update()}for(var S=0;S<s.length;S++)kI.push(s[S])},t.prototype.updateTransform=function(){this.validate(),this.containerUpdateTransform()},t.prototype._render=function(r){this._autoResolution&&this._resolution!==r.resolution&&(this._resolution=r.resolution,this.dirty=!0);var n=xc.available[this._fontName],i=n.distanceFieldRange,o=n.distanceFieldType,s=n.size;if(o!=="none")for(var a=this.worldTransform,l=a.a,u=a.b,c=a.c,f=a.d,p=Math.sqrt(l*l+u*u),m=Math.sqrt(c*c+f*f),g=(Math.abs(p)+Math.abs(m))/2,b=this._fontSize/s,y=0,w=this._activePagesMeshData;y<w.length;y++){var x=w[y];x.mesh.shader.uniforms.uFWidth=g*i*b*this._resolution}e.prototype._render.call(this,r)},t.prototype.getLocalBounds=function(){return this.validate(),e.prototype.getLocalBounds.call(this)},t.prototype.validate=function(){this.dirty&&(this.updateText(),this.dirty=!1)},Object.defineProperty(t.prototype,"tint",{get:function(){return this._tint},set:function(r){if(this._tint!==r){this._tint=r;for(var n=0;n<this._activePagesMeshData.length;n++)this._activePagesMeshData[n].mesh.tint=r}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"align",{get:function(){return this._align},set:function(r){this._align!==r&&(this._align=r,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fontName",{get:function(){return this._fontName},set:function(r){if(!xc.available[r])throw new Error('Missing BitmapFont "'+r+'"');this._fontName!==r&&(this._fontName=r,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fontSize",{get:function(){return this._fontSize},set:function(r){this._fontSize!==r&&(this._fontSize=r,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"anchor",{get:function(){return this._anchor},set:function(r){typeof r=="number"?this._anchor.set(r):this._anchor.copyFrom(r)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"text",{get:function(){return this._text},set:function(r){r=String(r==null?"":r),this._text!==r&&(this._text=r,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"maxWidth",{get:function(){return this._maxWidth},set:function(r){this._maxWidth!==r&&(this._maxWidth=r,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"maxLineHeight",{get:function(){return this.validate(),this._maxLineHeight},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"textWidth",{get:function(){return this.validate(),this._textWidth},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"letterSpacing",{get:function(){return this._letterSpacing},set:function(r){this._letterSpacing!==r&&(this._letterSpacing=r,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"roundPixels",{get:function(){return this._roundPixels},set:function(r){r!==this._roundPixels&&(this._roundPixels=r,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"textHeight",{get:function(){return this.validate(),this._textHeight},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"resolution",{get:function(){return this._resolution},set:function(r){this._autoResolution=!1,this._resolution!==r&&(this._resolution=r,this.dirty=!0)},enumerable:!1,configurable:!0}),t.prototype.destroy=function(r){var n=this._textureCache;for(var i in n){var o=n[i];o.destroy(),delete n[i]}this._textureCache=null,e.prototype.destroy.call(this,r)},t.styleDefaults={align:"left",tint:16777215,maxWidth:0,letterSpacing:0},t}(Ri),Nre=function(){function e(){}return e.add=function(){Tr.setExtensionXhrType("fnt",Tr.XHR_RESPONSE_TYPE.TEXT)},e.use=function(t,r){var n=a7(t.data);if(!n){r();return}for(var i=e.getBaseUrl(this,t),o=n.parse(t.data),s={},a=function(b){s[b.metadata.pageFile]=b.texture,Object.keys(s).length===o.page.length&&(t.bitmapFont=xc.install(o,s,!0),r())},l=0;l<o.page.length;++l){var u=o.page[l].file,c=i+u,f=!1;for(var p in this.resources){var m=this.resources[p];if(m.url===c){m.metadata.pageFile=u,m.texture?a(m):m.onAfterMiddleware.add(a),f=!0;break}}if(!f){var g={crossOrigin:t.crossOrigin,loadType:Tr.LOAD_TYPE.IMAGE,metadata:Object.assign({pageFile:u},t.metadata.imageMetadata),parentResource:t};this.add(c,g,a)}}},e.getBaseUrl=function(t,r){var n=r.isDataUrl?"":e.dirname(r.url);return r.isDataUrl&&(n==="."&&(n=""),t.baseUrl&&n&&t.baseUrl.charAt(t.baseUrl.length-1)==="/"&&(n+="/")),n=n.replace(t.baseUrl,""),n&&n.charAt(n.length-1)!=="/"&&(n+="/"),n},e.dirname=function(t){var r=t.replace(/\\/g,"/").replace(/\/$/,"").replace(/\/[^\/]*$/,"");return r===t?".":r===""?"/":r},e}();/*!
 * @pixi/filter-alpha - v6.4.2
 * Compiled Thu, 02 Jun 2022 15:39:26 UTC
 *
 * @pixi/filter-alpha is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var cx=function(e,t){return cx=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])},cx(e,t)};function Pre(e,t){cx(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var Are=`varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform float uAlpha;

void main(void)
{
   gl_FragColor = texture2D(uSampler, vTextureCoord) * uAlpha;
}
`;(function(e){Pre(t,e);function t(r){r===void 0&&(r=1);var n=e.call(this,Lee,Are,{uAlpha:1})||this;return n.alpha=r,n}return Object.defineProperty(t.prototype,"alpha",{get:function(){return this.uniforms.uAlpha},set:function(r){this.uniforms.uAlpha=r},enumerable:!1,configurable:!0}),t})(_l);/*!
 * @pixi/filter-blur - v6.4.2
 * Compiled Thu, 02 Jun 2022 15:39:26 UTC
 *
 * @pixi/filter-blur is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var hx=function(e,t){return hx=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])},hx(e,t)};function u7(e,t){hx(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var Rre=`
    attribute vec2 aVertexPosition;

    uniform mat3 projectionMatrix;

    uniform float strength;

    varying vec2 vBlurTexCoords[%size%];

    uniform vec4 inputSize;
    uniform vec4 outputFrame;

    vec4 filterVertexPosition( void )
    {
        vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

        return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
    }

    vec2 filterTextureCoord( void )
    {
        return aVertexPosition * (outputFrame.zw * inputSize.zw);
    }

    void main(void)
    {
        gl_Position = filterVertexPosition();

        vec2 textureCoord = filterTextureCoord();
        %blur%
    }`;function kre(e,t){var r=Math.ceil(e/2),n=Rre,i="",o;t?o="vBlurTexCoords[%index%] =  textureCoord + vec2(%sampleIndex% * strength, 0.0);":o="vBlurTexCoords[%index%] =  textureCoord + vec2(0.0, %sampleIndex% * strength);";for(var s=0;s<e;s++){var a=o.replace("%index%",s.toString());a=a.replace("%sampleIndex%",s-(r-1)+".0"),i+=a,i+=`
`}return n=n.replace("%blur%",i),n=n.replace("%size%",e.toString()),n}var Ore={5:[.153388,.221461,.250301],7:[.071303,.131514,.189879,.214607],9:[.028532,.067234,.124009,.179044,.20236],11:[.0093,.028002,.065984,.121703,.175713,.198596],13:[.002406,.009255,.027867,.065666,.121117,.174868,.197641],15:[489e-6,.002403,.009246,.02784,.065602,.120999,.174697,.197448]},Lre=["varying vec2 vBlurTexCoords[%size%];","uniform sampler2D uSampler;","void main(void)","{","    gl_FragColor = vec4(0.0);","    %blur%","}"].join(`
`);function Ure(e){for(var t=Ore[e],r=t.length,n=Lre,i="",o="gl_FragColor += texture2D(uSampler, vBlurTexCoords[%index%]) * %value%;",s,a=0;a<e;a++){var l=o.replace("%index%",a.toString());s=a,a>=r&&(s=e-a-1),l=l.replace("%value%",t[s].toString()),i+=l,i+=`
`}return n=n.replace("%blur%",i),n=n.replace("%size%",e.toString()),n}/*!
 * @pixi/constants - v6.4.2
 * Compiled Thu, 02 Jun 2022 15:39:26 UTC
 *
 * @pixi/constants is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var OI;(function(e){e[e.WEBGL_LEGACY=0]="WEBGL_LEGACY",e[e.WEBGL=1]="WEBGL",e[e.WEBGL2=2]="WEBGL2"})(OI||(OI={}));var LI;(function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.WEBGL=1]="WEBGL",e[e.CANVAS=2]="CANVAS"})(LI||(LI={}));var UI;(function(e){e[e.COLOR=16384]="COLOR",e[e.DEPTH=256]="DEPTH",e[e.STENCIL=1024]="STENCIL"})(UI||(UI={}));var FI;(function(e){e[e.NORMAL=0]="NORMAL",e[e.ADD=1]="ADD",e[e.MULTIPLY=2]="MULTIPLY",e[e.SCREEN=3]="SCREEN",e[e.OVERLAY=4]="OVERLAY",e[e.DARKEN=5]="DARKEN",e[e.LIGHTEN=6]="LIGHTEN",e[e.COLOR_DODGE=7]="COLOR_DODGE",e[e.COLOR_BURN=8]="COLOR_BURN",e[e.HARD_LIGHT=9]="HARD_LIGHT",e[e.SOFT_LIGHT=10]="SOFT_LIGHT",e[e.DIFFERENCE=11]="DIFFERENCE",e[e.EXCLUSION=12]="EXCLUSION",e[e.HUE=13]="HUE",e[e.SATURATION=14]="SATURATION",e[e.COLOR=15]="COLOR",e[e.LUMINOSITY=16]="LUMINOSITY",e[e.NORMAL_NPM=17]="NORMAL_NPM",e[e.ADD_NPM=18]="ADD_NPM",e[e.SCREEN_NPM=19]="SCREEN_NPM",e[e.NONE=20]="NONE",e[e.SRC_OVER=0]="SRC_OVER",e[e.SRC_IN=21]="SRC_IN",e[e.SRC_OUT=22]="SRC_OUT",e[e.SRC_ATOP=23]="SRC_ATOP",e[e.DST_OVER=24]="DST_OVER",e[e.DST_IN=25]="DST_IN",e[e.DST_OUT=26]="DST_OUT",e[e.DST_ATOP=27]="DST_ATOP",e[e.ERASE=26]="ERASE",e[e.SUBTRACT=28]="SUBTRACT",e[e.XOR=29]="XOR"})(FI||(FI={}));var MI;(function(e){e[e.POINTS=0]="POINTS",e[e.LINES=1]="LINES",e[e.LINE_LOOP=2]="LINE_LOOP",e[e.LINE_STRIP=3]="LINE_STRIP",e[e.TRIANGLES=4]="TRIANGLES",e[e.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",e[e.TRIANGLE_FAN=6]="TRIANGLE_FAN"})(MI||(MI={}));var BI;(function(e){e[e.RGBA=6408]="RGBA",e[e.RGB=6407]="RGB",e[e.RG=33319]="RG",e[e.RED=6403]="RED",e[e.RGBA_INTEGER=36249]="RGBA_INTEGER",e[e.RGB_INTEGER=36248]="RGB_INTEGER",e[e.RG_INTEGER=33320]="RG_INTEGER",e[e.RED_INTEGER=36244]="RED_INTEGER",e[e.ALPHA=6406]="ALPHA",e[e.LUMINANCE=6409]="LUMINANCE",e[e.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",e[e.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",e[e.DEPTH_STENCIL=34041]="DEPTH_STENCIL"})(BI||(BI={}));var DI;(function(e){e[e.TEXTURE_2D=3553]="TEXTURE_2D",e[e.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",e[e.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",e[e.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",e[e.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",e[e.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",e[e.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",e[e.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",e[e.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z"})(DI||(DI={}));var GI;(function(e){e[e.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",e[e.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",e[e.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",e[e.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",e[e.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",e[e.UNSIGNED_INT=5125]="UNSIGNED_INT",e[e.UNSIGNED_INT_10F_11F_11F_REV=35899]="UNSIGNED_INT_10F_11F_11F_REV",e[e.UNSIGNED_INT_2_10_10_10_REV=33640]="UNSIGNED_INT_2_10_10_10_REV",e[e.UNSIGNED_INT_24_8=34042]="UNSIGNED_INT_24_8",e[e.UNSIGNED_INT_5_9_9_9_REV=35902]="UNSIGNED_INT_5_9_9_9_REV",e[e.BYTE=5120]="BYTE",e[e.SHORT=5122]="SHORT",e[e.INT=5124]="INT",e[e.FLOAT=5126]="FLOAT",e[e.FLOAT_32_UNSIGNED_INT_24_8_REV=36269]="FLOAT_32_UNSIGNED_INT_24_8_REV",e[e.HALF_FLOAT=36193]="HALF_FLOAT"})(GI||(GI={}));var jI;(function(e){e[e.FLOAT=0]="FLOAT",e[e.INT=1]="INT",e[e.UINT=2]="UINT"})(jI||(jI={}));var $I;(function(e){e[e.NEAREST=0]="NEAREST",e[e.LINEAR=1]="LINEAR"})($I||($I={}));var HI;(function(e){e[e.CLAMP=33071]="CLAMP",e[e.REPEAT=10497]="REPEAT",e[e.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT"})(HI||(HI={}));var zI;(function(e){e[e.OFF=0]="OFF",e[e.POW2=1]="POW2",e[e.ON=2]="ON",e[e.ON_MANUAL=3]="ON_MANUAL"})(zI||(zI={}));var VI;(function(e){e[e.NPM=0]="NPM",e[e.UNPACK=1]="UNPACK",e[e.PMA=2]="PMA",e[e.NO_PREMULTIPLIED_ALPHA=0]="NO_PREMULTIPLIED_ALPHA",e[e.PREMULTIPLY_ON_UPLOAD=1]="PREMULTIPLY_ON_UPLOAD",e[e.PREMULTIPLY_ALPHA=2]="PREMULTIPLY_ALPHA",e[e.PREMULTIPLIED_ALPHA=2]="PREMULTIPLIED_ALPHA"})(VI||(VI={}));var lp;(function(e){e[e.NO=0]="NO",e[e.YES=1]="YES",e[e.AUTO=2]="AUTO",e[e.BLEND=0]="BLEND",e[e.CLEAR=1]="CLEAR",e[e.BLIT=2]="BLIT"})(lp||(lp={}));var XI;(function(e){e[e.AUTO=0]="AUTO",e[e.MANUAL=1]="MANUAL"})(XI||(XI={}));var WI;(function(e){e.LOW="lowp",e.MEDIUM="mediump",e.HIGH="highp"})(WI||(WI={}));var YI;(function(e){e[e.NONE=0]="NONE",e[e.SCISSOR=1]="SCISSOR",e[e.STENCIL=2]="STENCIL",e[e.SPRITE=3]="SPRITE"})(YI||(YI={}));var KI;(function(e){e[e.NONE=0]="NONE",e[e.LOW=2]="LOW",e[e.MEDIUM=4]="MEDIUM",e[e.HIGH=8]="HIGH"})(KI||(KI={}));var qI;(function(e){e[e.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",e[e.ARRAY_BUFFER=34962]="ARRAY_BUFFER",e[e.UNIFORM_BUFFER=35345]="UNIFORM_BUFFER"})(qI||(qI={}));var ZI=function(e){u7(t,e);function t(r,n,i,o,s){n===void 0&&(n=8),i===void 0&&(i=4),o===void 0&&(o=We.FILTER_RESOLUTION),s===void 0&&(s=5);var a=this,l=kre(s,r),u=Ure(s);return a=e.call(this,l,u)||this,a.horizontal=r,a.resolution=o,a._quality=0,a.quality=i,a.blur=n,a}return t.prototype.apply=function(r,n,i,o){if(i?this.horizontal?this.uniforms.strength=1/i.width*(i.width/n.width):this.uniforms.strength=1/i.height*(i.height/n.height):this.horizontal?this.uniforms.strength=1/r.renderer.width*(r.renderer.width/n.width):this.uniforms.strength=1/r.renderer.height*(r.renderer.height/n.height),this.uniforms.strength*=this.strength,this.uniforms.strength/=this.passes,this.passes===1)r.applyFilter(this,n,i,o);else{var s=r.getFilterTexture(),a=r.renderer,l=n,u=s;this.state.blend=!1,r.applyFilter(this,l,u,lp.CLEAR);for(var c=1;c<this.passes-1;c++){r.bindAndClear(l,lp.BLIT),this.uniforms.uSampler=u;var f=u;u=l,l=f,a.shader.bind(this),a.geometry.draw(5)}this.state.blend=!0,r.applyFilter(this,u,i,o),r.returnFilterTexture(s)}},Object.defineProperty(t.prototype,"blur",{get:function(){return this.strength},set:function(r){this.padding=1+Math.abs(r)*2,this.strength=r},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"quality",{get:function(){return this._quality},set:function(r){this._quality=r,this.passes=r},enumerable:!1,configurable:!0}),t}(_l);(function(e){u7(t,e);function t(r,n,i,o){r===void 0&&(r=8),n===void 0&&(n=4),i===void 0&&(i=We.FILTER_RESOLUTION),o===void 0&&(o=5);var s=e.call(this)||this;return s.blurXFilter=new ZI(!0,r,n,i,o),s.blurYFilter=new ZI(!1,r,n,i,o),s.resolution=i,s.quality=n,s.blur=r,s.repeatEdgePixels=!1,s}return t.prototype.apply=function(r,n,i,o){var s=Math.abs(this.blurXFilter.strength),a=Math.abs(this.blurYFilter.strength);if(s&&a){var l=r.getFilterTexture();this.blurXFilter.apply(r,n,l,lp.CLEAR),this.blurYFilter.apply(r,l,i,o),r.returnFilterTexture(l)}else a?this.blurYFilter.apply(r,n,i,o):this.blurXFilter.apply(r,n,i,o)},t.prototype.updatePadding=function(){this._repeatEdgePixels?this.padding=0:this.padding=Math.max(Math.abs(this.blurXFilter.strength),Math.abs(this.blurYFilter.strength))*2},Object.defineProperty(t.prototype,"blur",{get:function(){return this.blurXFilter.blur},set:function(r){this.blurXFilter.blur=this.blurYFilter.blur=r,this.updatePadding()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"quality",{get:function(){return this.blurXFilter.quality},set:function(r){this.blurXFilter.quality=this.blurYFilter.quality=r},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"blurX",{get:function(){return this.blurXFilter.blur},set:function(r){this.blurXFilter.blur=r,this.updatePadding()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"blurY",{get:function(){return this.blurYFilter.blur},set:function(r){this.blurYFilter.blur=r,this.updatePadding()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"blendMode",{get:function(){return this.blurYFilter.blendMode},set:function(r){this.blurYFilter.blendMode=r},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"repeatEdgePixels",{get:function(){return this._repeatEdgePixels},set:function(r){this._repeatEdgePixels=r,this.updatePadding()},enumerable:!1,configurable:!0}),t})(_l);/*!
 * @pixi/filter-color-matrix - v6.4.2
 * Compiled Thu, 02 Jun 2022 15:39:26 UTC
 *
 * @pixi/filter-color-matrix is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var fx=function(e,t){return fx=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])},fx(e,t)};function Fre(e,t){fx(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var Mre=`varying vec2 vTextureCoord;
uniform sampler2D uSampler;
uniform float m[20];
uniform float uAlpha;

void main(void)
{
    vec4 c = texture2D(uSampler, vTextureCoord);

    if (uAlpha == 0.0) {
        gl_FragColor = c;
        return;
    }

    // Un-premultiply alpha before applying the color matrix. See issue #3539.
    if (c.a > 0.0) {
      c.rgb /= c.a;
    }

    vec4 result;

    result.r = (m[0] * c.r);
        result.r += (m[1] * c.g);
        result.r += (m[2] * c.b);
        result.r += (m[3] * c.a);
        result.r += m[4];

    result.g = (m[5] * c.r);
        result.g += (m[6] * c.g);
        result.g += (m[7] * c.b);
        result.g += (m[8] * c.a);
        result.g += m[9];

    result.b = (m[10] * c.r);
       result.b += (m[11] * c.g);
       result.b += (m[12] * c.b);
       result.b += (m[13] * c.a);
       result.b += m[14];

    result.a = (m[15] * c.r);
       result.a += (m[16] * c.g);
       result.a += (m[17] * c.b);
       result.a += (m[18] * c.a);
       result.a += m[19];

    vec3 rgb = mix(c.rgb, result.rgb, uAlpha);

    // Premultiply alpha again.
    rgb *= result.a;

    gl_FragColor = vec4(rgb, result.a);
}
`,JI=function(e){Fre(t,e);function t(){var r=this,n={m:new Float32Array([1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0]),uAlpha:1};return r=e.call(this,XO,Mre,n)||this,r.alpha=1,r}return t.prototype._loadMatrix=function(r,n){n===void 0&&(n=!1);var i=r;n&&(this._multiply(i,this.uniforms.m,r),i=this._colorMatrix(i)),this.uniforms.m=i},t.prototype._multiply=function(r,n,i){return r[0]=n[0]*i[0]+n[1]*i[5]+n[2]*i[10]+n[3]*i[15],r[1]=n[0]*i[1]+n[1]*i[6]+n[2]*i[11]+n[3]*i[16],r[2]=n[0]*i[2]+n[1]*i[7]+n[2]*i[12]+n[3]*i[17],r[3]=n[0]*i[3]+n[1]*i[8]+n[2]*i[13]+n[3]*i[18],r[4]=n[0]*i[4]+n[1]*i[9]+n[2]*i[14]+n[3]*i[19]+n[4],r[5]=n[5]*i[0]+n[6]*i[5]+n[7]*i[10]+n[8]*i[15],r[6]=n[5]*i[1]+n[6]*i[6]+n[7]*i[11]+n[8]*i[16],r[7]=n[5]*i[2]+n[6]*i[7]+n[7]*i[12]+n[8]*i[17],r[8]=n[5]*i[3]+n[6]*i[8]+n[7]*i[13]+n[8]*i[18],r[9]=n[5]*i[4]+n[6]*i[9]+n[7]*i[14]+n[8]*i[19]+n[9],r[10]=n[10]*i[0]+n[11]*i[5]+n[12]*i[10]+n[13]*i[15],r[11]=n[10]*i[1]+n[11]*i[6]+n[12]*i[11]+n[13]*i[16],r[12]=n[10]*i[2]+n[11]*i[7]+n[12]*i[12]+n[13]*i[17],r[13]=n[10]*i[3]+n[11]*i[8]+n[12]*i[13]+n[13]*i[18],r[14]=n[10]*i[4]+n[11]*i[9]+n[12]*i[14]+n[13]*i[19]+n[14],r[15]=n[15]*i[0]+n[16]*i[5]+n[17]*i[10]+n[18]*i[15],r[16]=n[15]*i[1]+n[16]*i[6]+n[17]*i[11]+n[18]*i[16],r[17]=n[15]*i[2]+n[16]*i[7]+n[17]*i[12]+n[18]*i[17],r[18]=n[15]*i[3]+n[16]*i[8]+n[17]*i[13]+n[18]*i[18],r[19]=n[15]*i[4]+n[16]*i[9]+n[17]*i[14]+n[18]*i[19]+n[19],r},t.prototype._colorMatrix=function(r){var n=new Float32Array(r);return n[4]/=255,n[9]/=255,n[14]/=255,n[19]/=255,n},t.prototype.brightness=function(r,n){var i=[r,0,0,0,0,0,r,0,0,0,0,0,r,0,0,0,0,0,1,0];this._loadMatrix(i,n)},t.prototype.tint=function(r,n){var i=r>>16&255,o=r>>8&255,s=r&255,a=[i/255,0,0,0,0,0,o/255,0,0,0,0,0,s/255,0,0,0,0,0,1,0];this._loadMatrix(a,n)},t.prototype.greyscale=function(r,n){var i=[r,r,r,0,0,r,r,r,0,0,r,r,r,0,0,0,0,0,1,0];this._loadMatrix(i,n)},t.prototype.blackAndWhite=function(r){var n=[.3,.6,.1,0,0,.3,.6,.1,0,0,.3,.6,.1,0,0,0,0,0,1,0];this._loadMatrix(n,r)},t.prototype.hue=function(r,n){r=(r||0)/180*Math.PI;var i=Math.cos(r),o=Math.sin(r),s=Math.sqrt,a=1/3,l=s(a),u=i+(1-i)*a,c=a*(1-i)-l*o,f=a*(1-i)+l*o,p=a*(1-i)+l*o,m=i+a*(1-i),g=a*(1-i)-l*o,b=a*(1-i)-l*o,y=a*(1-i)+l*o,w=i+a*(1-i),x=[u,c,f,0,0,p,m,g,0,0,b,y,w,0,0,0,0,0,1,0];this._loadMatrix(x,n)},t.prototype.contrast=function(r,n){var i=(r||0)+1,o=-.5*(i-1),s=[i,0,0,0,o,0,i,0,0,o,0,0,i,0,o,0,0,0,1,0];this._loadMatrix(s,n)},t.prototype.saturate=function(r,n){r===void 0&&(r=0);var i=r*2/3+1,o=(i-1)*-.5,s=[i,o,o,0,0,o,i,o,0,0,o,o,i,0,0,0,0,0,1,0];this._loadMatrix(s,n)},t.prototype.desaturate=function(){this.saturate(-1)},t.prototype.negative=function(r){var n=[-1,0,0,1,0,0,-1,0,1,0,0,0,-1,1,0,0,0,0,1,0];this._loadMatrix(n,r)},t.prototype.sepia=function(r){var n=[.393,.7689999,.18899999,0,0,.349,.6859999,.16799999,0,0,.272,.5339999,.13099999,0,0,0,0,0,1,0];this._loadMatrix(n,r)},t.prototype.technicolor=function(r){var n=[1.9125277891456083,-.8545344976951645,-.09155508482755585,0,11.793603434377337,-.3087833385928097,1.7658908555458428,-.10601743074722245,0,-70.35205161461398,-.231103377548616,-.7501899197440212,1.847597816108189,0,30.950940869491138,0,0,0,1,0];this._loadMatrix(n,r)},t.prototype.polaroid=function(r){var n=[1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0];this._loadMatrix(n,r)},t.prototype.toBGR=function(r){var n=[0,0,1,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,1,0];this._loadMatrix(n,r)},t.prototype.kodachrome=function(r){var n=[1.1285582396593525,-.3967382283601348,-.03992559172921793,0,63.72958762196502,-.16404339962244616,1.0835251566291304,-.05498805115633132,0,24.732407896706203,-.16786010706155763,-.5603416277695248,1.6014850761964943,0,35.62982807460946,0,0,0,1,0];this._loadMatrix(n,r)},t.prototype.browni=function(r){var n=[.5997023498159715,.34553243048391263,-.2708298674538042,0,47.43192855600873,-.037703249837783157,.8609577587992641,.15059552388459913,0,-36.96841498319127,.24113635128153335,-.07441037908422492,.44972182064877153,0,-7.562075277591283,0,0,0,1,0];this._loadMatrix(n,r)},t.prototype.vintage=function(r){var n=[.6279345635605994,.3202183420819367,-.03965408211312453,0,9.651285835294123,.02578397704808868,.6441188644374771,.03259127616149294,0,7.462829176470591,.0466055556782719,-.0851232987247891,.5241648018700465,0,5.159190588235296,0,0,0,1,0];this._loadMatrix(n,r)},t.prototype.colorTone=function(r,n,i,o,s){r=r||.2,n=n||.15,i=i||16770432,o=o||3375104;var a=(i>>16&255)/255,l=(i>>8&255)/255,u=(i&255)/255,c=(o>>16&255)/255,f=(o>>8&255)/255,p=(o&255)/255,m=[.3,.59,.11,0,0,a,l,u,r,0,c,f,p,n,0,a-c,l-f,u-p,0,0];this._loadMatrix(m,s)},t.prototype.night=function(r,n){r=r||.1;var i=[r*-2,-r,0,0,0,-r,0,r,0,0,0,r,r*2,0,0,0,0,0,1,0];this._loadMatrix(i,n)},t.prototype.predator=function(r,n){var i=[11.224130630493164*r,-4.794486999511719*r,-2.8746118545532227*r,0*r,.40342438220977783*r,-3.6330697536468506*r,9.193157196044922*r,-2.951810836791992*r,0*r,-1.316135048866272*r,-3.2184197902679443*r,-4.2375030517578125*r,7.476448059082031*r,0*r,.8044459223747253*r,0,0,0,1,0];this._loadMatrix(i,n)},t.prototype.lsd=function(r){var n=[2,-.4,.5,0,0,-.5,2,-.4,0,0,-.4,-.5,3,0,0,0,0,0,1,0];this._loadMatrix(n,r)},t.prototype.reset=function(){var r=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0];this._loadMatrix(r,!1)},Object.defineProperty(t.prototype,"matrix",{get:function(){return this.uniforms.m},set:function(r){this.uniforms.m=r},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"alpha",{get:function(){return this.uniforms.uAlpha},set:function(r){this.uniforms.uAlpha=r},enumerable:!1,configurable:!0}),t}(_l);JI.prototype.grayscale=JI.prototype.greyscale;/*!
 * @pixi/filter-displacement - v6.4.2
 * Compiled Thu, 02 Jun 2022 15:39:26 UTC
 *
 * @pixi/filter-displacement is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var dx=function(e,t){return dx=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])},dx(e,t)};function Bre(e,t){dx(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var Dre=`varying vec2 vFilterCoord;
varying vec2 vTextureCoord;

uniform vec2 scale;
uniform mat2 rotation;
uniform sampler2D uSampler;
uniform sampler2D mapSampler;

uniform highp vec4 inputSize;
uniform vec4 inputClamp;

void main(void)
{
  vec4 map =  texture2D(mapSampler, vFilterCoord);

  map -= 0.5;
  map.xy = scale * inputSize.zw * (rotation * map.xy);

  gl_FragColor = texture2D(uSampler, clamp(vec2(vTextureCoord.x + map.x, vTextureCoord.y + map.y), inputClamp.xy, inputClamp.zw));
}
`,Gre=`attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;
uniform mat3 filterMatrix;

varying vec2 vTextureCoord;
varying vec2 vFilterCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

vec2 filterTextureCoord( void )
{
    return aVertexPosition * (outputFrame.zw * inputSize.zw);
}

void main(void)
{
	gl_Position = filterVertexPosition();
	vTextureCoord = filterTextureCoord();
	vFilterCoord = ( filterMatrix * vec3( vTextureCoord, 1.0)  ).xy;
}
`;(function(e){Bre(t,e);function t(r,n){var i=this,o=new rr;return r.renderable=!1,i=e.call(this,Gre,Dre,{mapSampler:r._texture,filterMatrix:o,scale:{x:1,y:1},rotation:new Float32Array([1,0,0,1])})||this,i.maskSprite=r,i.maskMatrix=o,n==null&&(n=20),i.scale=new Gt(n,n),i}return t.prototype.apply=function(r,n,i,o){this.uniforms.filterMatrix=r.calculateSpriteMatrix(this.maskMatrix,this.maskSprite),this.uniforms.scale.x=this.scale.x,this.uniforms.scale.y=this.scale.y;var s=this.maskSprite.worldTransform,a=Math.sqrt(s.a*s.a+s.b*s.b),l=Math.sqrt(s.c*s.c+s.d*s.d);a!==0&&l!==0&&(this.uniforms.rotation[0]=s.a/a,this.uniforms.rotation[1]=s.b/a,this.uniforms.rotation[2]=s.c/l,this.uniforms.rotation[3]=s.d/l),r.applyFilter(this,n,i,o)},Object.defineProperty(t.prototype,"map",{get:function(){return this.uniforms.mapSampler},set:function(r){this.uniforms.mapSampler=r},enumerable:!1,configurable:!0}),t})(_l);/*!
 * @pixi/filter-fxaa - v6.4.2
 * Compiled Thu, 02 Jun 2022 15:39:26 UTC
 *
 * @pixi/filter-fxaa is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var px=function(e,t){return px=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])},px(e,t)};function jre(e,t){px(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var $re=`
attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;

varying vec2 v_rgbNW;
varying vec2 v_rgbNE;
varying vec2 v_rgbSW;
varying vec2 v_rgbSE;
varying vec2 v_rgbM;

varying vec2 vFragCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

void texcoords(vec2 fragCoord, vec2 inverseVP,
               out vec2 v_rgbNW, out vec2 v_rgbNE,
               out vec2 v_rgbSW, out vec2 v_rgbSE,
               out vec2 v_rgbM) {
    v_rgbNW = (fragCoord + vec2(-1.0, -1.0)) * inverseVP;
    v_rgbNE = (fragCoord + vec2(1.0, -1.0)) * inverseVP;
    v_rgbSW = (fragCoord + vec2(-1.0, 1.0)) * inverseVP;
    v_rgbSE = (fragCoord + vec2(1.0, 1.0)) * inverseVP;
    v_rgbM = vec2(fragCoord * inverseVP);
}

void main(void) {

   gl_Position = filterVertexPosition();

   vFragCoord = aVertexPosition * outputFrame.zw;

   texcoords(vFragCoord, inputSize.zw, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);
}
`,Hre=`varying vec2 v_rgbNW;
varying vec2 v_rgbNE;
varying vec2 v_rgbSW;
varying vec2 v_rgbSE;
varying vec2 v_rgbM;

varying vec2 vFragCoord;
uniform sampler2D uSampler;
uniform highp vec4 inputSize;


/**
 Basic FXAA implementation based on the code on geeks3d.com with the
 modification that the texture2DLod stuff was removed since it's
 unsupported by WebGL.

 --

 From:
 https://github.com/mitsuhiko/webgl-meincraft

 Copyright (c) 2011 by Armin Ronacher.

 Some rights reserved.

 Redistribution and use in source and binary forms, with or without
 modification, are permitted provided that the following conditions are
 met:

 * Redistributions of source code must retain the above copyright
 notice, this list of conditions and the following disclaimer.

 * Redistributions in binary form must reproduce the above
 copyright notice, this list of conditions and the following
 disclaimer in the documentation and/or other materials provided
 with the distribution.

 * The names of the contributors may not be used to endorse or
 promote products derived from this software without specific
 prior written permission.

 THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS
 "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT
 LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR
 A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT
 OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
 SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
 LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,
 DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY
 THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
 (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE
 OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 */

#ifndef FXAA_REDUCE_MIN
#define FXAA_REDUCE_MIN   (1.0/ 128.0)
#endif
#ifndef FXAA_REDUCE_MUL
#define FXAA_REDUCE_MUL   (1.0 / 8.0)
#endif
#ifndef FXAA_SPAN_MAX
#define FXAA_SPAN_MAX     8.0
#endif

//optimized version for mobile, where dependent
//texture reads can be a bottleneck
vec4 fxaa(sampler2D tex, vec2 fragCoord, vec2 inverseVP,
          vec2 v_rgbNW, vec2 v_rgbNE,
          vec2 v_rgbSW, vec2 v_rgbSE,
          vec2 v_rgbM) {
    vec4 color;
    vec3 rgbNW = texture2D(tex, v_rgbNW).xyz;
    vec3 rgbNE = texture2D(tex, v_rgbNE).xyz;
    vec3 rgbSW = texture2D(tex, v_rgbSW).xyz;
    vec3 rgbSE = texture2D(tex, v_rgbSE).xyz;
    vec4 texColor = texture2D(tex, v_rgbM);
    vec3 rgbM  = texColor.xyz;
    vec3 luma = vec3(0.299, 0.587, 0.114);
    float lumaNW = dot(rgbNW, luma);
    float lumaNE = dot(rgbNE, luma);
    float lumaSW = dot(rgbSW, luma);
    float lumaSE = dot(rgbSE, luma);
    float lumaM  = dot(rgbM,  luma);
    float lumaMin = min(lumaM, min(min(lumaNW, lumaNE), min(lumaSW, lumaSE)));
    float lumaMax = max(lumaM, max(max(lumaNW, lumaNE), max(lumaSW, lumaSE)));

    mediump vec2 dir;
    dir.x = -((lumaNW + lumaNE) - (lumaSW + lumaSE));
    dir.y =  ((lumaNW + lumaSW) - (lumaNE + lumaSE));

    float dirReduce = max((lumaNW + lumaNE + lumaSW + lumaSE) *
                          (0.25 * FXAA_REDUCE_MUL), FXAA_REDUCE_MIN);

    float rcpDirMin = 1.0 / (min(abs(dir.x), abs(dir.y)) + dirReduce);
    dir = min(vec2(FXAA_SPAN_MAX, FXAA_SPAN_MAX),
              max(vec2(-FXAA_SPAN_MAX, -FXAA_SPAN_MAX),
                  dir * rcpDirMin)) * inverseVP;

    vec3 rgbA = 0.5 * (
                       texture2D(tex, fragCoord * inverseVP + dir * (1.0 / 3.0 - 0.5)).xyz +
                       texture2D(tex, fragCoord * inverseVP + dir * (2.0 / 3.0 - 0.5)).xyz);
    vec3 rgbB = rgbA * 0.5 + 0.25 * (
                                     texture2D(tex, fragCoord * inverseVP + dir * -0.5).xyz +
                                     texture2D(tex, fragCoord * inverseVP + dir * 0.5).xyz);

    float lumaB = dot(rgbB, luma);
    if ((lumaB < lumaMin) || (lumaB > lumaMax))
        color = vec4(rgbA, texColor.a);
    else
        color = vec4(rgbB, texColor.a);
    return color;
}

void main() {

      vec4 color;

      color = fxaa(uSampler, vFragCoord, inputSize.zw, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);

      gl_FragColor = color;
}
`;(function(e){jre(t,e);function t(){return e.call(this,$re,Hre)||this}return t})(_l);/*!
 * @pixi/filter-noise - v6.4.2
 * Compiled Thu, 02 Jun 2022 15:39:26 UTC
 *
 * @pixi/filter-noise is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var mx=function(e,t){return mx=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])},mx(e,t)};function zre(e,t){mx(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var Vre=`precision highp float;

varying vec2 vTextureCoord;
varying vec4 vColor;

uniform float uNoise;
uniform float uSeed;
uniform sampler2D uSampler;

float rand(vec2 co)
{
    return fract(sin(dot(co.xy, vec2(12.9898, 78.233))) * 43758.5453);
}

void main()
{
    vec4 color = texture2D(uSampler, vTextureCoord);
    float randomValue = rand(gl_FragCoord.xy * uSeed);
    float diff = (randomValue - 0.5) * uNoise;

    // Un-premultiply alpha before applying the color matrix. See issue #3539.
    if (color.a > 0.0) {
        color.rgb /= color.a;
    }

    color.r += diff;
    color.g += diff;
    color.b += diff;

    // Premultiply alpha again.
    color.rgb *= color.a;

    gl_FragColor = color;
}
`;(function(e){zre(t,e);function t(r,n){r===void 0&&(r=.5),n===void 0&&(n=Math.random());var i=e.call(this,XO,Vre,{uNoise:0,uSeed:0})||this;return i.noise=r,i.seed=n,i}return Object.defineProperty(t.prototype,"noise",{get:function(){return this.uniforms.uNoise},set:function(r){this.uniforms.uNoise=r},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"seed",{get:function(){return this.uniforms.uSeed},set:function(r){this.uniforms.uSeed=r},enumerable:!1,configurable:!0}),t})(_l);/*!
 * @pixi/mixin-cache-as-bitmap - v6.4.2
 * Compiled Thu, 02 Jun 2022 15:39:26 UTC
 *
 * @pixi/mixin-cache-as-bitmap is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*!
 * @pixi/constants - v6.4.2
 * Compiled Thu, 02 Jun 2022 15:39:26 UTC
 *
 * @pixi/constants is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var QI;(function(e){e[e.WEBGL_LEGACY=0]="WEBGL_LEGACY",e[e.WEBGL=1]="WEBGL",e[e.WEBGL2=2]="WEBGL2"})(QI||(QI={}));var eN;(function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.WEBGL=1]="WEBGL",e[e.CANVAS=2]="CANVAS"})(eN||(eN={}));var tN;(function(e){e[e.COLOR=16384]="COLOR",e[e.DEPTH=256]="DEPTH",e[e.STENCIL=1024]="STENCIL"})(tN||(tN={}));var rN;(function(e){e[e.NORMAL=0]="NORMAL",e[e.ADD=1]="ADD",e[e.MULTIPLY=2]="MULTIPLY",e[e.SCREEN=3]="SCREEN",e[e.OVERLAY=4]="OVERLAY",e[e.DARKEN=5]="DARKEN",e[e.LIGHTEN=6]="LIGHTEN",e[e.COLOR_DODGE=7]="COLOR_DODGE",e[e.COLOR_BURN=8]="COLOR_BURN",e[e.HARD_LIGHT=9]="HARD_LIGHT",e[e.SOFT_LIGHT=10]="SOFT_LIGHT",e[e.DIFFERENCE=11]="DIFFERENCE",e[e.EXCLUSION=12]="EXCLUSION",e[e.HUE=13]="HUE",e[e.SATURATION=14]="SATURATION",e[e.COLOR=15]="COLOR",e[e.LUMINOSITY=16]="LUMINOSITY",e[e.NORMAL_NPM=17]="NORMAL_NPM",e[e.ADD_NPM=18]="ADD_NPM",e[e.SCREEN_NPM=19]="SCREEN_NPM",e[e.NONE=20]="NONE",e[e.SRC_OVER=0]="SRC_OVER",e[e.SRC_IN=21]="SRC_IN",e[e.SRC_OUT=22]="SRC_OUT",e[e.SRC_ATOP=23]="SRC_ATOP",e[e.DST_OVER=24]="DST_OVER",e[e.DST_IN=25]="DST_IN",e[e.DST_OUT=26]="DST_OUT",e[e.DST_ATOP=27]="DST_ATOP",e[e.ERASE=26]="ERASE",e[e.SUBTRACT=28]="SUBTRACT",e[e.XOR=29]="XOR"})(rN||(rN={}));var nN;(function(e){e[e.POINTS=0]="POINTS",e[e.LINES=1]="LINES",e[e.LINE_LOOP=2]="LINE_LOOP",e[e.LINE_STRIP=3]="LINE_STRIP",e[e.TRIANGLES=4]="TRIANGLES",e[e.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",e[e.TRIANGLE_FAN=6]="TRIANGLE_FAN"})(nN||(nN={}));var iN;(function(e){e[e.RGBA=6408]="RGBA",e[e.RGB=6407]="RGB",e[e.RG=33319]="RG",e[e.RED=6403]="RED",e[e.RGBA_INTEGER=36249]="RGBA_INTEGER",e[e.RGB_INTEGER=36248]="RGB_INTEGER",e[e.RG_INTEGER=33320]="RG_INTEGER",e[e.RED_INTEGER=36244]="RED_INTEGER",e[e.ALPHA=6406]="ALPHA",e[e.LUMINANCE=6409]="LUMINANCE",e[e.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",e[e.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",e[e.DEPTH_STENCIL=34041]="DEPTH_STENCIL"})(iN||(iN={}));var oN;(function(e){e[e.TEXTURE_2D=3553]="TEXTURE_2D",e[e.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",e[e.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",e[e.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",e[e.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",e[e.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",e[e.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",e[e.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",e[e.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z"})(oN||(oN={}));var sN;(function(e){e[e.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",e[e.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",e[e.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",e[e.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",e[e.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",e[e.UNSIGNED_INT=5125]="UNSIGNED_INT",e[e.UNSIGNED_INT_10F_11F_11F_REV=35899]="UNSIGNED_INT_10F_11F_11F_REV",e[e.UNSIGNED_INT_2_10_10_10_REV=33640]="UNSIGNED_INT_2_10_10_10_REV",e[e.UNSIGNED_INT_24_8=34042]="UNSIGNED_INT_24_8",e[e.UNSIGNED_INT_5_9_9_9_REV=35902]="UNSIGNED_INT_5_9_9_9_REV",e[e.BYTE=5120]="BYTE",e[e.SHORT=5122]="SHORT",e[e.INT=5124]="INT",e[e.FLOAT=5126]="FLOAT",e[e.FLOAT_32_UNSIGNED_INT_24_8_REV=36269]="FLOAT_32_UNSIGNED_INT_24_8_REV",e[e.HALF_FLOAT=36193]="HALF_FLOAT"})(sN||(sN={}));var aN;(function(e){e[e.FLOAT=0]="FLOAT",e[e.INT=1]="INT",e[e.UINT=2]="UINT"})(aN||(aN={}));var lN;(function(e){e[e.NEAREST=0]="NEAREST",e[e.LINEAR=1]="LINEAR"})(lN||(lN={}));var uN;(function(e){e[e.CLAMP=33071]="CLAMP",e[e.REPEAT=10497]="REPEAT",e[e.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT"})(uN||(uN={}));var cN;(function(e){e[e.OFF=0]="OFF",e[e.POW2=1]="POW2",e[e.ON=2]="ON",e[e.ON_MANUAL=3]="ON_MANUAL"})(cN||(cN={}));var hN;(function(e){e[e.NPM=0]="NPM",e[e.UNPACK=1]="UNPACK",e[e.PMA=2]="PMA",e[e.NO_PREMULTIPLIED_ALPHA=0]="NO_PREMULTIPLIED_ALPHA",e[e.PREMULTIPLY_ON_UPLOAD=1]="PREMULTIPLY_ON_UPLOAD",e[e.PREMULTIPLY_ALPHA=2]="PREMULTIPLY_ALPHA",e[e.PREMULTIPLIED_ALPHA=2]="PREMULTIPLIED_ALPHA"})(hN||(hN={}));var fN;(function(e){e[e.NO=0]="NO",e[e.YES=1]="YES",e[e.AUTO=2]="AUTO",e[e.BLEND=0]="BLEND",e[e.CLEAR=1]="CLEAR",e[e.BLIT=2]="BLIT"})(fN||(fN={}));var dN;(function(e){e[e.AUTO=0]="AUTO",e[e.MANUAL=1]="MANUAL"})(dN||(dN={}));var pN;(function(e){e.LOW="lowp",e.MEDIUM="mediump",e.HIGH="highp"})(pN||(pN={}));var mN;(function(e){e[e.NONE=0]="NONE",e[e.SCISSOR=1]="SCISSOR",e[e.STENCIL=2]="STENCIL",e[e.SPRITE=3]="SPRITE"})(mN||(mN={}));var vx;(function(e){e[e.NONE=0]="NONE",e[e.LOW=2]="LOW",e[e.MEDIUM=4]="MEDIUM",e[e.HIGH=8]="HIGH"})(vx||(vx={}));var vN;(function(e){e[e.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",e[e.ARRAY_BUFFER=34962]="ARRAY_BUFFER",e[e.UNIFORM_BUFFER=35345]="UNIFORM_BUFFER"})(vN||(vN={}));var c7=new rr;Er.prototype._cacheAsBitmap=!1;Er.prototype._cacheData=null;Er.prototype._cacheAsBitmapResolution=null;Er.prototype._cacheAsBitmapMultisample=vx.NONE;var Xre=function(){function e(){this.textureCacheId=null,this.originalRender=null,this.originalRenderCanvas=null,this.originalCalculateBounds=null,this.originalGetLocalBounds=null,this.originalUpdateTransform=null,this.originalDestroy=null,this.originalMask=null,this.originalFilterArea=null,this.originalContainsPoint=null,this.sprite=null}return e}();Object.defineProperties(Er.prototype,{cacheAsBitmapResolution:{get:function(){return this._cacheAsBitmapResolution},set:function(e){e!==this._cacheAsBitmapResolution&&(this._cacheAsBitmapResolution=e,this.cacheAsBitmap&&(this.cacheAsBitmap=!1,this.cacheAsBitmap=!0))}},cacheAsBitmapMultisample:{get:function(){return this._cacheAsBitmapMultisample},set:function(e){e!==this._cacheAsBitmapMultisample&&(this._cacheAsBitmapMultisample=e,this.cacheAsBitmap&&(this.cacheAsBitmap=!1,this.cacheAsBitmap=!0))}},cacheAsBitmap:{get:function(){return this._cacheAsBitmap},set:function(e){if(this._cacheAsBitmap!==e){this._cacheAsBitmap=e;var t;e?(this._cacheData||(this._cacheData=new Xre),t=this._cacheData,t.originalRender=this.render,t.originalRenderCanvas=this.renderCanvas,t.originalUpdateTransform=this.updateTransform,t.originalCalculateBounds=this.calculateBounds,t.originalGetLocalBounds=this.getLocalBounds,t.originalDestroy=this.destroy,t.originalContainsPoint=this.containsPoint,t.originalMask=this._mask,t.originalFilterArea=this.filterArea,this.render=this._renderCached,this.renderCanvas=this._renderCachedCanvas,this.destroy=this._cacheAsBitmapDestroy):(t=this._cacheData,t.sprite&&this._destroyCachedDisplayObject(),this.render=t.originalRender,this.renderCanvas=t.originalRenderCanvas,this.calculateBounds=t.originalCalculateBounds,this.getLocalBounds=t.originalGetLocalBounds,this.destroy=t.originalDestroy,this.updateTransform=t.originalUpdateTransform,this.containsPoint=t.originalContainsPoint,this._mask=t.originalMask,this.filterArea=t.originalFilterArea)}}}});Er.prototype._renderCached=function(t){!this.visible||this.worldAlpha<=0||!this.renderable||(this._initCachedDisplayObject(t),this._cacheData.sprite.transform._worldID=this.transform._worldID,this._cacheData.sprite.worldAlpha=this.worldAlpha,this._cacheData.sprite._render(t))};Er.prototype._initCachedDisplayObject=function(t){var r;if(!(this._cacheData&&this._cacheData.sprite)){var n=this.alpha;this.alpha=1,t.batch.flush();var i=this.getLocalBounds(null,!0).clone();if(this.filters&&this.filters.length){var o=this.filters[0].padding;i.pad(o)}i.ceil(We.RESOLUTION);var s=t.renderTexture.current,a=t.renderTexture.sourceFrame.clone(),l=t.renderTexture.destinationFrame.clone(),u=t.projection.transform,c=_u.create({width:i.width,height:i.height,resolution:this.cacheAsBitmapResolution||t.resolution,multisample:(r=this.cacheAsBitmapMultisample)!==null&&r!==void 0?r:t.multisample}),f="cacheAsBitmap_"+gu();this._cacheData.textureCacheId=f,xt.addToCache(c.baseTexture,f),tt.addToCache(c,f);var p=this.transform.localTransform.copyTo(c7).invert().translate(-i.x,-i.y);this.render=this._cacheData.originalRender,t.render(this,{renderTexture:c,clear:!0,transform:p,skipUpdateTransform:!1}),t.framebuffer.blit(),t.projection.transform=u,t.renderTexture.bind(s,a,l),this.render=this._renderCached,this.updateTransform=this.displayObjectUpdateTransform,this.calculateBounds=this._calculateCachedBounds,this.getLocalBounds=this._getCachedLocalBounds,this._mask=null,this.filterArea=null,this.alpha=n;var m=new bu(c);m.transform.worldTransform=this.transform.worldTransform,m.anchor.x=-(i.x/i.width),m.anchor.y=-(i.y/i.height),m.alpha=n,m._bounds=this._bounds,this._cacheData.sprite=m,this.transform._parentID=-1,this.parent?this.updateTransform():(this.enableTempParent(),this.updateTransform(),this.disableTempParent(null)),this.containsPoint=m.containsPoint.bind(m)}};Er.prototype._renderCachedCanvas=function(t){!this.visible||this.worldAlpha<=0||!this.renderable||(this._initCachedDisplayObjectCanvas(t),this._cacheData.sprite.worldAlpha=this.worldAlpha,this._cacheData.sprite._renderCanvas(t))};Er.prototype._initCachedDisplayObjectCanvas=function(t){if(!(this._cacheData&&this._cacheData.sprite)){var r=this.getLocalBounds(null,!0),n=this.alpha;this.alpha=1;var i=t.context,o=t._projTransform;r.ceil(We.RESOLUTION);var s=_u.create({width:r.width,height:r.height}),a="cacheAsBitmap_"+gu();this._cacheData.textureCacheId=a,xt.addToCache(s.baseTexture,a),tt.addToCache(s,a);var l=c7;this.transform.localTransform.copyTo(l),l.invert(),l.tx-=r.x,l.ty-=r.y,this.renderCanvas=this._cacheData.originalRenderCanvas,t.render(this,{renderTexture:s,clear:!0,transform:l,skipUpdateTransform:!1}),t.context=i,t._projTransform=o,this.renderCanvas=this._renderCachedCanvas,this.updateTransform=this.displayObjectUpdateTransform,this.calculateBounds=this._calculateCachedBounds,this.getLocalBounds=this._getCachedLocalBounds,this._mask=null,this.filterArea=null,this.alpha=n;var u=new bu(s);u.transform.worldTransform=this.transform.worldTransform,u.anchor.x=-(r.x/r.width),u.anchor.y=-(r.y/r.height),u.alpha=n,u._bounds=this._bounds,this._cacheData.sprite=u,this.transform._parentID=-1,this.parent?this.updateTransform():(this.parent=t._tempDisplayObjectParent,this.updateTransform(),this.parent=null),this.containsPoint=u.containsPoint.bind(u)}};Er.prototype._calculateCachedBounds=function(){this._bounds.clear(),this._cacheData.sprite.transform._worldID=this.transform._worldID,this._cacheData.sprite._calculateBounds(),this._bounds.updateID=this._boundsID};Er.prototype._getCachedLocalBounds=function(){return this._cacheData.sprite.getLocalBounds(null)};Er.prototype._destroyCachedDisplayObject=function(){this._cacheData.sprite._texture.destroy(!0),this._cacheData.sprite=null,xt.removeFromCache(this._cacheData.textureCacheId),tt.removeFromCache(this._cacheData.textureCacheId),this._cacheData.textureCacheId=null};Er.prototype._cacheAsBitmapDestroy=function(t){this.cacheAsBitmap=!1,this.destroy(t)};/*!
 * @pixi/mixin-get-child-by-name - v6.4.2
 * Compiled Thu, 02 Jun 2022 15:39:26 UTC
 *
 * @pixi/mixin-get-child-by-name is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */Er.prototype.name=null;Ri.prototype.getChildByName=function(t,r){for(var n=0,i=this.children.length;n<i;n++)if(this.children[n].name===t)return this.children[n];if(r)for(var n=0,i=this.children.length;n<i;n++){var o=this.children[n];if(!!o.getChildByName){var s=this.children[n].getChildByName(t,!0);if(s)return s}}return null};/*!
 * @pixi/mixin-get-global-position - v6.4.2
 * Compiled Thu, 02 Jun 2022 15:39:26 UTC
 *
 * @pixi/mixin-get-global-position is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */Er.prototype.getGlobalPosition=function(t,r){return t===void 0&&(t=new Gt),r===void 0&&(r=!1),this.parent?this.parent.toGlobal(this.position,t,r):(t.x=this.position.x,t.y=this.position.y),t};/*!
 * @pixi/mesh-extras - v6.4.2
 * Compiled Thu, 02 Jun 2022 15:39:26 UTC
 *
 * @pixi/mesh-extras is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var gx=function(e,t){return gx=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])},gx(e,t)};function Bh(e,t){gx(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var Wre=function(e){Bh(t,e);function t(r,n,i,o){r===void 0&&(r=100),n===void 0&&(n=100),i===void 0&&(i=10),o===void 0&&(o=10);var s=e.call(this)||this;return s.segWidth=i,s.segHeight=o,s.width=r,s.height=n,s.build(),s}return t.prototype.build=function(){for(var r=this.segWidth*this.segHeight,n=[],i=[],o=[],s=this.segWidth-1,a=this.segHeight-1,l=this.width/s,u=this.height/a,c=0;c<r;c++){var f=c%this.segWidth,p=c/this.segWidth|0;n.push(f*l,p*u),i.push(f/s,p/a)}for(var m=s*a,c=0;c<m;c++){var g=c%s,b=c/s|0,y=b*this.segWidth+g,w=b*this.segWidth+g+1,x=(b+1)*this.segWidth+g,T=(b+1)*this.segWidth+g+1;o.push(y,w,x,w,T,x)}this.buffers[0].data=new Float32Array(n),this.buffers[1].data=new Float32Array(i),this.indexBuffer.data=new Uint16Array(o),this.buffers[0].update(),this.buffers[1].update(),this.indexBuffer.update()},t}(Qy),Yre=function(e){Bh(t,e);function t(r,n,i){r===void 0&&(r=200),i===void 0&&(i=0);var o=e.call(this,new Float32Array(n.length*4),new Float32Array(n.length*4),new Uint16Array((n.length-1)*6))||this;return o.points=n,o._width=r,o.textureScale=i,o.build(),o}return Object.defineProperty(t.prototype,"width",{get:function(){return this._width},enumerable:!1,configurable:!0}),t.prototype.build=function(){var r=this.points;if(!!r){var n=this.getBuffer("aVertexPosition"),i=this.getBuffer("aTextureCoord"),o=this.getIndex();if(!(r.length<1)){n.data.length/4!==r.length&&(n.data=new Float32Array(r.length*4),i.data=new Float32Array(r.length*4),o.data=new Uint16Array((r.length-1)*6));var s=i.data,a=o.data;s[0]=0,s[1]=0,s[2]=0,s[3]=1;for(var l=0,u=r[0],c=this._width*this.textureScale,f=r.length,p=0;p<f;p++){var m=p*4;if(this.textureScale>0){var g=u.x-r[p].x,b=u.y-r[p].y,y=Math.sqrt(g*g+b*b);u=r[p],l+=y/c}else l=p/(f-1);s[m]=l,s[m+1]=0,s[m+2]=l,s[m+3]=1}for(var w=0,p=0;p<f-1;p++){var m=p*2;a[w++]=m,a[w++]=m+1,a[w++]=m+2,a[w++]=m+2,a[w++]=m+1,a[w++]=m+3}i.update(),o.update(),this.updateVertices()}}},t.prototype.updateVertices=function(){var r=this.points;if(!(r.length<1)){for(var n=r[0],i,o=0,s=0,a=this.buffers[0].data,l=r.length,u=0;u<l;u++){var c=r[u],f=u*4;u<r.length-1?i=r[u+1]:i=c,s=-(i.x-n.x),o=i.y-n.y;var p=Math.sqrt(o*o+s*s),m=this.textureScale>0?this.textureScale*this._width/2:this._width/2;o/=p,s/=p,o*=m,s*=m,a[f]=c.x+o,a[f+1]=c.y+s,a[f+2]=c.x-o,a[f+3]=c.y-s,n=c}this.buffers[0].update()}},t.prototype.update=function(){this.textureScale>0?this.build():this.updateVertices()},t}(Qy),Kre=function(e){Bh(t,e);function t(r,n,i){i===void 0&&(i=0);var o=this,s=new Yre(r.height,n,i),a=new ap(r);return i>0&&(r.baseTexture.wrapMode=ts.REPEAT),o=e.call(this,s,a)||this,o.autoUpdate=!0,o}return t.prototype._render=function(r){var n=this.geometry;(this.autoUpdate||n._width!==this.shader.texture.height)&&(n._width=this.shader.texture.height,n.update()),e.prototype._render.call(this,r)},t}(sp),qre=function(e){Bh(t,e);function t(r,n,i){var o=this,s=new Wre(r.width,r.height,n,i),a=new ap(tt.WHITE);return o=e.call(this,s,a)||this,o.texture=r,o.autoResize=!0,o}return t.prototype.textureUpdated=function(){this._textureID=this.shader.texture._updateID;var r=this.geometry,n=this.shader.texture,i=n.width,o=n.height;this.autoResize&&(r.width!==i||r.height!==o)&&(r.width=this.shader.texture.width,r.height=this.shader.texture.height,r.build())},Object.defineProperty(t.prototype,"texture",{get:function(){return this.shader.texture},set:function(r){this.shader.texture!==r&&(this.shader.texture=r,this._textureID=-1,r.baseTexture.valid?this.textureUpdated():r.once("update",this.textureUpdated,this))},enumerable:!1,configurable:!0}),t.prototype._render=function(r){this._textureID!==this.shader.texture._updateID&&this.textureUpdated(),e.prototype._render.call(this,r)},t.prototype.destroy=function(r){this.shader.texture.off("update",this.textureUpdated,this),e.prototype.destroy.call(this,r)},t}(sp),Zre=function(e){Bh(t,e);function t(r,n,i,o,s){r===void 0&&(r=tt.EMPTY);var a=this,l=new Qy(n,i,o);l.getBuffer("aVertexPosition").static=!1;var u=new ap(r);return a=e.call(this,l,u,null,s)||this,a.autoUpdate=!0,a}return Object.defineProperty(t.prototype,"vertices",{get:function(){return this.geometry.getBuffer("aVertexPosition").data},set:function(r){this.geometry.getBuffer("aVertexPosition").data=r},enumerable:!1,configurable:!0}),t.prototype._render=function(r){this.autoUpdate&&this.geometry.getBuffer("aVertexPosition").update(),e.prototype._render.call(this,r)},t}(sp),Bv=10,Jre=function(e){Bh(t,e);function t(r,n,i,o,s){n===void 0&&(n=Bv),i===void 0&&(i=Bv),o===void 0&&(o=Bv),s===void 0&&(s=Bv);var a=e.call(this,tt.WHITE,4,4)||this;return a._origWidth=r.orig.width,a._origHeight=r.orig.height,a._width=a._origWidth,a._height=a._origHeight,a._leftWidth=n,a._rightWidth=o,a._topHeight=i,a._bottomHeight=s,a.texture=r,a}return t.prototype.textureUpdated=function(){this._textureID=this.shader.texture._updateID,this._refresh()},Object.defineProperty(t.prototype,"vertices",{get:function(){return this.geometry.getBuffer("aVertexPosition").data},set:function(r){this.geometry.getBuffer("aVertexPosition").data=r},enumerable:!1,configurable:!0}),t.prototype.updateHorizontalVertices=function(){var r=this.vertices,n=this._getMinScale();r[9]=r[11]=r[13]=r[15]=this._topHeight*n,r[17]=r[19]=r[21]=r[23]=this._height-this._bottomHeight*n,r[25]=r[27]=r[29]=r[31]=this._height},t.prototype.updateVerticalVertices=function(){var r=this.vertices,n=this._getMinScale();r[2]=r[10]=r[18]=r[26]=this._leftWidth*n,r[4]=r[12]=r[20]=r[28]=this._width-this._rightWidth*n,r[6]=r[14]=r[22]=r[30]=this._width},t.prototype._getMinScale=function(){var r=this._leftWidth+this._rightWidth,n=this._width>r?1:this._width/r,i=this._topHeight+this._bottomHeight,o=this._height>i?1:this._height/i,s=Math.min(n,o);return s},Object.defineProperty(t.prototype,"width",{get:function(){return this._width},set:function(r){this._width=r,this._refresh()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this._height},set:function(r){this._height=r,this._refresh()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"leftWidth",{get:function(){return this._leftWidth},set:function(r){this._leftWidth=r,this._refresh()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"rightWidth",{get:function(){return this._rightWidth},set:function(r){this._rightWidth=r,this._refresh()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"topHeight",{get:function(){return this._topHeight},set:function(r){this._topHeight=r,this._refresh()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"bottomHeight",{get:function(){return this._bottomHeight},set:function(r){this._bottomHeight=r,this._refresh()},enumerable:!1,configurable:!0}),t.prototype._refresh=function(){var r=this.texture,n=this.geometry.buffers[1].data;this._origWidth=r.orig.width,this._origHeight=r.orig.height;var i=1/this._origWidth,o=1/this._origHeight;n[0]=n[8]=n[16]=n[24]=0,n[1]=n[3]=n[5]=n[7]=0,n[6]=n[14]=n[22]=n[30]=1,n[25]=n[27]=n[29]=n[31]=1,n[2]=n[10]=n[18]=n[26]=i*this._leftWidth,n[4]=n[12]=n[20]=n[28]=1-i*this._rightWidth,n[9]=n[11]=n[13]=n[15]=o*this._topHeight,n[17]=n[19]=n[21]=n[23]=1-o*this._bottomHeight,this.updateHorizontalVertices(),this.updateVerticalVertices(),this.geometry.buffers[0].update(),this.geometry.buffers[1].update()},t}(qre);/*!
 * @pixi/sprite-animated - v6.4.2
 * Compiled Thu, 02 Jun 2022 15:39:26 UTC
 *
 * @pixi/sprite-animated is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var yx=function(e,t){return yx=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])},yx(e,t)};function Qre(e,t){yx(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var gN=function(e){Qre(t,e);function t(r,n){n===void 0&&(n=!0);var i=e.call(this,r[0]instanceof tt?r[0]:r[0].texture)||this;return i._textures=null,i._durations=null,i._autoUpdate=n,i._isConnectedToTicker=!1,i.animationSpeed=1,i.loop=!0,i.updateAnchor=!1,i.onComplete=null,i.onFrameChange=null,i.onLoop=null,i._currentTime=0,i._playing=!1,i._previousFrame=null,i.textures=r,i}return t.prototype.stop=function(){!this._playing||(this._playing=!1,this._autoUpdate&&this._isConnectedToTicker&&(an.shared.remove(this.update,this),this._isConnectedToTicker=!1))},t.prototype.play=function(){this._playing||(this._playing=!0,this._autoUpdate&&!this._isConnectedToTicker&&(an.shared.add(this.update,this,Qs.HIGH),this._isConnectedToTicker=!0))},t.prototype.gotoAndStop=function(r){this.stop();var n=this.currentFrame;this._currentTime=r,n!==this.currentFrame&&this.updateTexture()},t.prototype.gotoAndPlay=function(r){var n=this.currentFrame;this._currentTime=r,n!==this.currentFrame&&this.updateTexture(),this.play()},t.prototype.update=function(r){if(!!this._playing){var n=this.animationSpeed*r,i=this.currentFrame;if(this._durations!==null){var o=this._currentTime%1*this._durations[this.currentFrame];for(o+=n/60*1e3;o<0;)this._currentTime--,o+=this._durations[this.currentFrame];var s=Math.sign(this.animationSpeed*r);for(this._currentTime=Math.floor(this._currentTime);o>=this._durations[this.currentFrame];)o-=this._durations[this.currentFrame]*s,this._currentTime+=s;this._currentTime+=o/this._durations[this.currentFrame]}else this._currentTime+=n;this._currentTime<0&&!this.loop?(this.gotoAndStop(0),this.onComplete&&this.onComplete()):this._currentTime>=this._textures.length&&!this.loop?(this.gotoAndStop(this._textures.length-1),this.onComplete&&this.onComplete()):i!==this.currentFrame&&(this.loop&&this.onLoop&&(this.animationSpeed>0&&this.currentFrame<i?this.onLoop():this.animationSpeed<0&&this.currentFrame>i&&this.onLoop()),this.updateTexture())}},t.prototype.updateTexture=function(){var r=this.currentFrame;this._previousFrame!==r&&(this._previousFrame=r,this._texture=this._textures[r],this._textureID=-1,this._textureTrimmedID=-1,this._cachedTint=16777215,this.uvs=this._texture._uvs.uvsFloat32,this.updateAnchor&&this._anchor.copyFrom(this._texture.defaultAnchor),this.onFrameChange&&this.onFrameChange(this.currentFrame))},t.prototype.destroy=function(r){this.stop(),e.prototype.destroy.call(this,r),this.onComplete=null,this.onFrameChange=null,this.onLoop=null},t.fromFrames=function(r){for(var n=[],i=0;i<r.length;++i)n.push(tt.from(r[i]));return new t(n)},t.fromImages=function(r){for(var n=[],i=0;i<r.length;++i)n.push(tt.from(r[i]));return new t(n)},Object.defineProperty(t.prototype,"totalFrames",{get:function(){return this._textures.length},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"textures",{get:function(){return this._textures},set:function(r){if(r[0]instanceof tt)this._textures=r,this._durations=null;else{this._textures=[],this._durations=[];for(var n=0;n<r.length;n++)this._textures.push(r[n].texture),this._durations.push(r[n].time)}this._previousFrame=null,this.gotoAndStop(0),this.updateTexture()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"currentFrame",{get:function(){var r=Math.floor(this._currentTime)%this._textures.length;return r<0&&(r+=this._textures.length),r},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"playing",{get:function(){return this._playing},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"autoUpdate",{get:function(){return this._autoUpdate},set:function(r){r!==this._autoUpdate&&(this._autoUpdate=r,!this._autoUpdate&&this._isConnectedToTicker?(an.shared.remove(this.update,this),this._isConnectedToTicker=!1):this._autoUpdate&&!this._isConnectedToTicker&&this._playing&&(an.shared.add(this.update,this),this._isConnectedToTicker=!0))},enumerable:!1,configurable:!0}),t}(bu);/*!
 * pixi.js - v6.4.2
 * Compiled Thu, 02 Jun 2022 15:39:26 UTC
 *
 * pixi.js is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */bl.registerPlugin("accessibility",iQ);bl.registerPlugin("extract",Xee);bl.registerPlugin("interaction",cQ);bl.registerPlugin("particle",Ote);bl.registerPlugin("prepare",ore);bl.registerPlugin("batch",Bee);bl.registerPlugin("tilingSprite",dre);ls.registerPlugin(Nre);ls.registerPlugin(lte);ls.registerPlugin(Ete);ls.registerPlugin(Pte);ls.registerPlugin(are);Mh.registerPlugin(oQ);Mh.registerPlugin(ete);function yN(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function ui(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?yN(Object(r),!0).forEach(function(n){on(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):yN(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function ul(e){return(ul=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function ene(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function tne(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function on(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function e1(){return(e1=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function _x(e){return(_x=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(e)}function z4(e,t){return(z4=Object.setPrototypeOf||function(r,n){return r.__proto__=n,r})(e,t)}function h7(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function f7(e,t,r){return(f7=h7()?Reflect.construct:function(n,i,o){var s=[null];s.push.apply(s,i);var a=new(Function.bind.apply(n,s));return o&&z4(a,o.prototype),a}).apply(null,arguments)}function wa(e,t){if(e==null)return{};var r,n,i=function(s,a){if(s==null)return{};var l,u,c={},f=Object.keys(s);for(u=0;u<f.length;u++)l=f[u],a.indexOf(l)>=0||(c[l]=s[l]);return c}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function Ps(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function rne(e,t){return!t||typeof t!="object"&&typeof t!="function"?Ps(e):t}function ta(e){return function(t){if(Array.isArray(t))return L_(t)}(e)||function(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}(e)||function(t,r){if(!!t){if(typeof t=="string")return L_(t,r);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return L_(t,r)}}(e)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function L_(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Dr(e,t){for(var r=arguments.length,n=new Array(r>2?r-2:0),i=2;i<r;i++)n[i-2]=arguments[i]}var nne=function(e){return e==null};function Kf(e){var t=[];if(e===void 0)return t;if(typeof e=="string")t=e.split(",");else if(typeof e=="number")t=[e];else if(Array.isArray(e))t=ta(e);else{if(e===null||ul(e)!=="object")return t;t=[e&&(e==null?void 0:e.x)||0,e&&(e==null?void 0:e.y)||0]}return t.filter(function(r){return!nne(r)&&!isNaN(r)}).map(Number)}function _N(e,t){if(e.length!==t.length)return!1;for(var r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0}function U_(e){return e instanceof Gt||e instanceof ql}var Lg=["click","mousedown","mousemove","mouseout","mouseover","mouseup","mouseupoutside","tap","touchstart","touchmove","touchend","touchendoutside","pointercancel","pointerout","pointerover","pointertap","pointerdown","pointerup","pointerupoutside","pointermove","rightclick","rightdown","rightup","rightupoutside","touchcancel","touchendoutside","touchmove","touchstart"];function F_(e,t,r){if(U_(e[t])&&U_(r))e[t].copyFrom(r);else if(U_(e[t])){var n=Kf(r);Dr(n!==void 0&&n.length>0&&n.length<3,"The property `%s` is a `PIXI.Point` or `PIXI.ObservablePoint` and must be set to a comma-separated string of either 1 or 2 coordinates, a 1 or 2 element array containing coordinates, or a PIXI Point/ObservablePoint. If only one coordinate is given then X and Y will be set to the provided value. Received: `%s` of type `%s`.",t,JSON.stringify(r),ul(r)),e[t].set(n.shift(),n.shift())}else e[t]=r}var pc,d7=function(e){var t,r=e;if(!Array.isArray(r)){if(t=e,Object.prototype.toString.call(t)!=="[object Object]")throw new Error("collection needs to be an Array or Object");r=Object.keys(e)}var n={};return r.forEach(function(i){n[i]=!0}),function(i){return n[i]!==void 0}},p7=function(e){return function(){return!e.apply(void 0,arguments)}},ine=(on(pc={},"children",!0),on(pc,"parent",!0),on(pc,"worldAlpha",!0),on(pc,"worldTransform",!0),on(pc,"worldVisible",!0),pc),bx={alpha:1,buttonMode:!1,cacheAsBitmap:!1,cursor:null,filterArea:null,filters:null,hitArea:null,interactive:!1,mask:null,pivot:0,position:0,renderable:!0,rotation:0,scale:1,skew:0,transform:null,visible:!0,x:0,y:0},Bo=function(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},n=function(a){return requestAnimationFrame(function(){var l,u;a==null||(l=a.__reactpixi)===null||l===void 0||(u=l.root)===null||u===void 0||u.emit("__REACT_PIXI_REQUEST_RENDER__")})},i=function(a,l){if(r.hasOwnProperty(a))return Dr(l.typeofs.some(function(u){return ul(r[a])===u})||l.instanceofs.some(function(u){return r[a]instanceof u}),"".concat(e," ").concat(a," prop is invalid")),r[a]};if(r.texture)return Dr(r.texture instanceof tt,"".concat(e," texture needs to be typeof `PIXI.Texture`")),r.texture;var o=i("image",{typeofs:["string"],instanceofs:[HTMLImageElement]})||i("video",{typeofs:["string"],instanceofs:[HTMLVideoElement]})||i("source",{typeofs:["string","number"],instanceofs:[HTMLImageElement,HTMLVideoElement,HTMLCanvasElement,tt]});Dr(!!o,"".concat(e," could not get texture from props"));var s=tt.from(o);return s.__reactpixi={root:t},s.once("update",n),s.once("loaded",n),s.valid&&n(s),s},one=p7(d7([].concat(ta(Object.keys(ine)),ta(Lg))));function Go(e,t,r){var n=!1;if(Dr(Er.prototype.isPrototypeOf(e),"instance needs to be typeof `PIXI.DisplayObject`, got `%s`",ul(e)),!r.ignoreEvents)for(var i=typeof e.removeListener=="function",o=typeof e.on=="function",s=0;s<Lg.length;s++){var a=Lg[s];t[a]!==r[a]&&(n=!0,typeof t[a]=="function"&&i&&e.removeListener(a,t[a]),typeof r[a]=="function"&&o&&e.on(a,r[a]))}var l=Object.keys(r||{});if(!r.overwriteProps){for(var u=l.filter(one),c=0;c<u.length;c++){var f=u[c],p=r[f];r[f]!==t[f]&&(n=!0),p!==void 0?F_(e,f,p):f in bx?(console.warn("setting default value: ".concat(f,", from: ").concat(e[f]," to: ").concat(p," for"),e),n=!0,F_(e,f,bx[f])):console.warn("ignoring prop: ".concat(f,", from ").concat(e[f]," to ").concat(p," for"),e)}return n}for(var m=0;m<l.length;m++){var g=l[m];t[g]!==r[g]&&(n=!0,F_(e,g,r[g]))}}var sne=["draw","geometry"],ane=["image","texture"],lne=["image","texture"],une=["textures","isPlaying","initialFrame"],cne=["tileScale","tilePosition","image","texture"],hne=["image","texture"],fne=["image","texture"],dne=Object.freeze({__proto__:null,BitmapText:function(e,t){var r=t.text,n=t.style;return new Ire(r,n)},Container:function(){return new Ri},Graphics:function(e,t){var r=t.geometry;Dr(!r||r instanceof Ka,"Graphics geometry needs to be a `PIXI.Graphics`");var n=r?new Ka(r.geometry):new Ka;return n.applyProps=function(i,o,s){var a=s.draw;s.geometry;var l=Go(i,o,wa(s,sne));return o.draw!==a&&typeof a=="function"&&(l=!0,a.call(n,n)),l},n},NineSlicePlane:function(e,t){var r=t.leftWidth,n=r===void 0?10:r,i=t.topHeight,o=i===void 0?10:i,s=t.rightWidth,a=s===void 0?10:s,l=t.bottomHeight,u=l===void 0?10:l,c=Bo("NineSlicePlane",e,t),f=new Jre(c,n,o,a,u);return f.applyProps=function(p,m,g){var b=g.image,y=g.texture,w=Go(p,m,wa(g,ane));return(b||y)&&(y!==m.texture&&(w=!0),p.texture=Bo("NineSlicePlane",e,g)),w},f},ParticleContainer:function(e,t){var r=t.maxSize,n=r===void 0?1500:r,i=t.batchSize,o=i===void 0?16384:i,s=t.autoResize,a=s!==void 0&&s,l=ui(ui({},{vertices:!1,scale:!0,position:!0,rotation:!0,uvs:!0,tint:!0}),t.properties||{}),u=ui(ui({},{children:!1,texture:!1,baseTexture:!1}),t.destroyOptions||{}),c=new Ate(n,l,o,a);return c.willUnmount=function(f,p,m){f.destroy(u)},c},Sprite:function(e,t){var r=new bu(Bo("Sprite",e,t));return r.applyProps=function(n,i,o){var s=o.image,a=o.texture,l=Go(n,i,wa(o,lne));return(a&&i.texture!==o.texture||s&&i.image!==o.image)&&(i.texture!==o.texture&&(l=!0),n.texture=Bo("Sprite",e,o)),l},r},Text:function(e,t){var r=t.text,n=r===void 0?"":r,i=t.style,o=i===void 0?{}:i,s=t.isSprite,a=new $4(n,o);return s?(a.updateText(),new bu(a.texture)):a},TilingSprite:function(e,t){var r=t.width,n=r===void 0?100:r,i=t.height,o=i===void 0?100:i,s=Bo("TilingSprite",e,t),a=new lre(s,n,o);return a.applyProps=function(l,u,c){var f=c.tileScale,p=c.tilePosition,m=c.image,g=c.texture,b=Go(l,u,wa(c,cne));if(p){var y,w=Kf(p);(y=l.tilePosition).set.apply(y,ta(w)),b=!_N(Kf(u.tilePosition),w)||b}if(f){var x,T=Kf(f);(x=l.tileScale).set.apply(x,ta(T)),b=!_N(Kf(u.tileScale),T)||b}return(m||g)&&(g!==u.texture&&(b=!0),l.texture=Bo("Sprite",e,c)),b},a},SimpleMesh:function(e,t){var r=Bo("Mesh",e,t),n=t.vertices,i=t.uvs,o=t.indices,s=t.drawMode,a=s===void 0?Ni.TRIANGLES:s,l=new Zre(r,n,i,o,a);return l.applyProps=function(u,c,f){var p=f.image,m=f.texture,g=Go(u,c,wa(f,hne));return(p||m)&&(m!==c.texture&&(g=!0),u.texture=Bo("Mesh",e,f)),g},l},SimpleRope:function(e,t){var r=Bo("SimpleRope",e,t),n=t.points,i=new Kre(r,n);return i.applyProps=function(o,s,a){var l=a.image,u=a.texture,c=wa(a,fne);Dr(Array.isArray(a.points),"SimpleRope points needs to be %s","Array<PIXI.Point>");var f=Go(o,s,c);return(l||u)&&(u!==s.texture&&(f=!0),o.texture=Bo("SimpleRope",e,a)),f},i},AnimatedSprite:function(e,t){var r=t.textures,n=t.images,i=t.isPlaying,o=i===void 0||i,s=t.initialFrame,a=function(u){return u.map(function(c){return Dr(c instanceof tt||(c==null?void 0:c.texture),"AnimationSprite texture needs to be an array of `PIXI.Texture` or `{ texture: PIXI.Texture, time: number }`"),c})},l=n?gN.fromImages(n):new gN(a(r));return l[o?"gotoAndPlay":"gotoAndStop"](s||0),l.applyProps=function(u,c,f){var p=f.textures,m=f.isPlaying,g=f.initialFrame,b=Go(u,c,wa(f,une));if(p&&c.textures!==p&&(u.textures=a(p),b=!0),m!==c.isPlaying||g!==c.initialFrame){var y=typeof g=="number"?g:l.currentFrame||0;l[m?"gotoAndPlay":"gotoAndStop"](y),b=!0}return b},l}}),Ui={BitmapText:"BitmapText",Container:"Container",Graphics:"Graphics",NineSlicePlane:"NineSlicePlane",ParticleContainer:"ParticleContainer",Sprite:"Sprite",AnimatedSprite:"AnimatedSprite",Text:"Text",TilingSprite:"TilingSprite",SimpleMesh:"SimpleMesh",SimpleRope:"SimpleRope"},pne=Object.keys(Ui).reduce(function(e,t){return ui(ui({},e),{},on({},t,dne[t]))},{}),m7={};function mne(e,t){return Dr(!!e,"Expect type to be defined, got `%s`",e),Dr(!Ui[e],"Component `%s` could not be created, already exists in default components.",e),m7[e]=t,e}var vne=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof Ai<"u"?Ai:typeof self<"u"?self:{};function no(e,t){return e(t={exports:{}},t.exports),t.exports;/*
object-assign
(c) Sindre Sorhus
@license MIT
*/}var bN=Object.getOwnPropertySymbols,gne=Object.prototype.hasOwnProperty,yne=Object.prototype.propertyIsEnumerable;function _ne(e){if(e==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}var bne=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de",Object.getOwnPropertyNames(e)[0]==="5")return!1;for(var t={},r=0;r<10;r++)t["_"+String.fromCharCode(r)]=r;if(Object.getOwnPropertyNames(t).map(function(i){return t[i]}).join("")!=="0123456789")return!1;var n={};return"abcdefghijklmnopqrst".split("").forEach(function(i){n[i]=i}),Object.keys(Object.assign({},n)).join("")==="abcdefghijklmnopqrst"}catch{return!1}}()?Object.assign:function(e,t){for(var r,n,i=_ne(e),o=1;o<arguments.length;o++){for(var s in r=Object(arguments[o]))gne.call(r,s)&&(i[s]=r[s]);if(bN){n=bN(r);for(var a=0;a<n.length;a++)yne.call(r,n[a])&&(i[n[a]]=r[n[a]])}}return i},Lr=no(function(e,t){var r,n,i,o;if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var a=Date,l=a.now();t.unstable_now=function(){return a.now()-l}}if(typeof window>"u"||typeof MessageChannel!="function"){var u=null,c=null,f=function(){if(u!==null)try{var K=t.unstable_now();u(!0,K),u=null}catch(te){throw setTimeout(f,0),te}};r=function(K){u!==null?setTimeout(r,0,K):(u=K,setTimeout(f,0))},n=function(K,te){c=setTimeout(K,te)},i=function(){clearTimeout(c)},t.unstable_shouldYield=function(){return!1},o=t.unstable_forceFrameRate=function(){}}else{var p=window.setTimeout,m=window.clearTimeout;if(typeof console<"u"){var g=window.cancelAnimationFrame;typeof window.requestAnimationFrame!="function"&&console.error("This browser doesn't support requestAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills"),typeof g!="function"&&console.error("This browser doesn't support cancelAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills")}var b=!1,y=null,w=-1,x=5,T=0;t.unstable_shouldYield=function(){return t.unstable_now()>=T},o=function(){},t.unstable_forceFrameRate=function(K){0>K||125<K?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):x=0<K?Math.floor(1e3/K):5};var I=new MessageChannel,R=I.port2;I.port1.onmessage=function(){if(y!==null){var K=t.unstable_now();T=K+x;try{y(!0,K)?R.postMessage(null):(b=!1,y=null)}catch(te){throw R.postMessage(null),te}}else b=!1},r=function(K){y=K,b||(b=!0,R.postMessage(null))},n=function(K,te){w=p(function(){K(t.unstable_now())},te)},i=function(){m(w),w=-1}}function S(K,te){var ye=K.length;K.push(te);e:for(;;){var Ce=ye-1>>>1,Ie=K[Ce];if(!(Ie!==void 0&&0<N(Ie,te)))break e;K[Ce]=te,K[ye]=Ie,ye=Ce}}function O(K){return(K=K[0])===void 0?null:K}function P(K){var te=K[0];if(te!==void 0){var ye=K.pop();if(ye!==te){K[0]=ye;e:for(var Ce=0,Ie=K.length;Ce<Ie;){var Ye=2*(Ce+1)-1,pe=K[Ye],F=Ye+1,$=K[F];if(pe!==void 0&&0>N(pe,ye))$!==void 0&&0>N($,pe)?(K[Ce]=$,K[F]=ye,Ce=F):(K[Ce]=pe,K[Ye]=ye,Ce=Ye);else{if(!($!==void 0&&0>N($,ye)))break e;K[Ce]=$,K[F]=ye,Ce=F}}}return te}return null}function N(K,te){var ye=K.sortIndex-te.sortIndex;return ye!==0?ye:K.id-te.id}var A=[],j=[],X=1,G=null,ne=3,W=!1,Y=!1,de=!1;function le(K){for(var te=O(j);te!==null;){if(te.callback===null)P(j);else{if(!(te.startTime<=K))break;P(j),te.sortIndex=te.expirationTime,S(A,te)}te=O(j)}}function ie(K){if(de=!1,le(K),!Y)if(O(A)!==null)Y=!0,r(Q);else{var te=O(j);te!==null&&n(ie,te.startTime-K)}}function Q(K,te){Y=!1,de&&(de=!1,i()),W=!0;var ye=ne;try{for(le(te),G=O(A);G!==null&&(!(G.expirationTime>te)||K&&!t.unstable_shouldYield());){var Ce=G.callback;if(typeof Ce=="function"){G.callback=null,ne=G.priorityLevel;var Ie=Ce(G.expirationTime<=te);te=t.unstable_now(),typeof Ie=="function"?G.callback=Ie:G===O(A)&&P(A),le(te)}else P(A);G=O(A)}if(G!==null)var Ye=!0;else{var pe=O(j);pe!==null&&n(ie,pe.startTime-te),Ye=!1}return Ye}finally{G=null,ne=ye,W=!1}}var ee=o;t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(K){K.callback=null},t.unstable_continueExecution=function(){Y||W||(Y=!0,r(Q))},t.unstable_getCurrentPriorityLevel=function(){return ne},t.unstable_getFirstCallbackNode=function(){return O(A)},t.unstable_next=function(K){switch(ne){case 1:case 2:case 3:var te=3;break;default:te=ne}var ye=ne;ne=te;try{return K()}finally{ne=ye}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=ee,t.unstable_runWithPriority=function(K,te){switch(K){case 1:case 2:case 3:case 4:case 5:break;default:K=3}var ye=ne;ne=K;try{return te()}finally{ne=ye}},t.unstable_scheduleCallback=function(K,te,ye){var Ce=t.unstable_now();switch(typeof ye=="object"&&ye!==null?ye=typeof(ye=ye.delay)=="number"&&0<ye?Ce+ye:Ce:ye=Ce,K){case 1:var Ie=-1;break;case 2:Ie=250;break;case 5:Ie=1073741823;break;case 4:Ie=1e4;break;default:Ie=5e3}return K={id:X++,callback:te,priorityLevel:K,startTime:ye,expirationTime:Ie=ye+Ie,sortIndex:-1},ye>Ce?(K.sortIndex=ye,S(j,K),O(A)===null&&K===O(j)&&(de?i():de=!0,n(ie,ye-Ce))):(K.sortIndex=Ie,S(A,K),Y||W||(Y=!0,r(Q))),K},t.unstable_wrapCallback=function(K){var te=ne;return function(){var ye=ne;ne=te;try{return K.apply(this,arguments)}finally{ne=ye}}}});Lr.unstable_now,Lr.unstable_shouldYield,Lr.unstable_forceFrameRate,Lr.unstable_IdlePriority,Lr.unstable_ImmediatePriority,Lr.unstable_LowPriority,Lr.unstable_NormalPriority,Lr.unstable_Profiling,Lr.unstable_UserBlockingPriority,Lr.unstable_cancelCallback,Lr.unstable_continueExecution,Lr.unstable_getCurrentPriorityLevel,Lr.unstable_getFirstCallbackNode,Lr.unstable_next,Lr.unstable_pauseExecution,Lr.unstable_requestPaint,Lr.unstable_runWithPriority,Lr.unstable_scheduleCallback,Lr.unstable_wrapCallback;var Xr=no(function(e,t){});Xr.unstable_now,Xr.unstable_shouldYield,Xr.unstable_forceFrameRate,Xr.unstable_IdlePriority,Xr.unstable_ImmediatePriority,Xr.unstable_LowPriority,Xr.unstable_NormalPriority,Xr.unstable_Profiling,Xr.unstable_UserBlockingPriority,Xr.unstable_cancelCallback,Xr.unstable_continueExecution,Xr.unstable_getCurrentPriorityLevel,Xr.unstable_getFirstCallbackNode,Xr.unstable_next,Xr.unstable_pauseExecution,Xr.unstable_requestPaint,Xr.unstable_runWithPriority,Xr.unstable_scheduleCallback,Xr.unstable_wrapCallback;var wx=no(function(e){e.exports=Lr});wx.unstable_scheduleCallback,wx.unstable_cancelCallback;var wne=no(function(e){/** @license React v0.26.2
 * react-reconciler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */e.exports=function(t){var r={},n=bne,i=Je,o=wx;function s(h){for(var d="https://reactjs.org/docs/error-decoder.html?invariant="+h,_=1;_<arguments.length;_++)d+="&args[]="+encodeURIComponent(arguments[_]);return"Minified React error #"+h+"; visit "+d+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var a=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,l=60103,u=60106,c=60107,f=60108,p=60114,m=60109,g=60110,b=60112,y=60113,w=60120,x=60115,T=60116,I=60121,R=60129,S=60130,O=60131;if(typeof Symbol=="function"&&Symbol.for){var P=Symbol.for;l=P("react.element"),u=P("react.portal"),c=P("react.fragment"),f=P("react.strict_mode"),p=P("react.profiler"),m=P("react.provider"),g=P("react.context"),b=P("react.forward_ref"),y=P("react.suspense"),w=P("react.suspense_list"),x=P("react.memo"),T=P("react.lazy"),I=P("react.block"),P("react.scope"),R=P("react.debug_trace_mode"),S=P("react.offscreen"),O=P("react.legacy_hidden")}var N=typeof Symbol=="function"&&Symbol.iterator;function A(h){return h===null||typeof h!="object"?null:typeof(h=N&&h[N]||h["@@iterator"])=="function"?h:null}function j(h){if(h==null)return null;if(typeof h=="function")return h.displayName||h.name||null;if(typeof h=="string")return h;switch(h){case c:return"Fragment";case u:return"Portal";case p:return"Profiler";case f:return"StrictMode";case y:return"Suspense";case w:return"SuspenseList"}if(typeof h=="object")switch(h.$$typeof){case g:return(h.displayName||"Context")+".Consumer";case m:return(h._context.displayName||"Context")+".Provider";case b:var d=h.render;return d=d.displayName||d.name||"",h.displayName||(d!==""?"ForwardRef("+d+")":"ForwardRef");case x:return j(h.type);case I:return j(h._render);case T:d=h._payload,h=h._init;try{return j(h(d))}catch{}}return null}function X(h){var d=h,_=h;if(h.alternate)for(;d.return;)d=d.return;else{h=d;do(1026&(d=h).flags)!=0&&(_=d.return),h=d.return;while(h)}return d.tag===3?_:null}function G(h){if(X(h)!==h)throw Error(s(188))}function ne(h){var d=h.alternate;if(!d){if((d=X(h))===null)throw Error(s(188));return d!==h?null:h}for(var _=h,E=d;;){var C=_.return;if(C===null)break;var U=C.alternate;if(U===null){if((E=C.return)!==null){_=E;continue}break}if(C.child===U.child){for(U=C.child;U;){if(U===_)return G(C),h;if(U===E)return G(C),d;U=U.sibling}throw Error(s(188))}if(_.return!==E.return)_=C,E=U;else{for(var z=!1,J=C.child;J;){if(J===_){z=!0,_=C,E=U;break}if(J===E){z=!0,E=C,_=U;break}J=J.sibling}if(!z){for(J=U.child;J;){if(J===_){z=!0,_=U,E=C;break}if(J===E){z=!0,E=U,_=C;break}J=J.sibling}if(!z)throw Error(s(189))}}if(_.alternate!==E)throw Error(s(190))}if(_.tag!==3)throw Error(s(188));return _.stateNode.current===_?h:d}function W(h){if(!(h=ne(h)))return null;for(var d=h;;){if(d.tag===5||d.tag===6)return d;if(d.child)d.child.return=d,d=d.child;else{if(d===h)break;for(;!d.sibling;){if(!d.return||d.return===h)return null;d=d.return}d.sibling.return=d.return,d=d.sibling}}return null}function Y(h,d){for(var _=h.alternate;d!==null;){if(d===h||d===_)return!0;d=d.return}return!1}var de,le=t.getPublicInstance,ie=t.getRootHostContext,Q=t.getChildHostContext,ee=t.prepareForCommit,K=t.resetAfterCommit,te=t.createInstance,ye=t.appendInitialChild,Ce=t.finalizeInitialChildren,Ie=t.prepareUpdate,Ye=t.shouldSetTextContent,pe=t.createTextInstance,F=t.scheduleTimeout,$=t.cancelTimeout,q=t.noTimeout,ve=t.isPrimaryRenderer,ue=t.supportsMutation,Ee=t.supportsPersistence,Pe=t.supportsHydration,Le=t.getInstanceFromNode,ot=t.makeOpaqueHydratingObject,It=t.makeClientId,Lt=t.beforeActiveInstanceBlur,Kt=t.afterActiveInstanceBlur,qt=t.preparePortalMount,Tt=t.supportsTestSelectors,jr=t.findFiberRoot,L=t.getBoundingRect,H=t.getTextContent,Z=t.isHiddenSubtree,be=t.matchAccessibilityRole,Ve=t.setFocusIfFocusable,ht=t.setupIntersectionObserver,B=t.appendChild,V=t.appendChildToContainer,re=t.commitTextUpdate,ge=t.commitMount,Ke=t.commitUpdate,nt=t.insertBefore,et=t.insertInContainerBefore,jt=t.removeChild,_t=t.removeChildFromContainer,Rt=t.resetTextContent,Ut=t.hideInstance,ur=t.hideTextInstance,mi=t.unhideInstance,o1=t.unhideTextInstance,Dh=t.clearContainer,s1=t.cloneInstance,Hp=t.createContainerChildSet,zp=t.appendChildToContainerChildSet,Vp=t.finalizeContainerChildren,Gh=t.replaceContainerChildren,Co=t.cloneHiddenInstance,Xp=t.cloneHiddenTextInstance,a1=t.canHydrateInstance,l1=t.canHydrateTextInstance,u1=t.isSuspenseInstancePending,c1=t.isSuspenseInstanceFallback,vi=t.getNextHydratableSibling,Wp=t.getFirstHydratableChild,h1=t.hydrateInstance,f1=t.hydrateTextInstance,d1=t.getNextHydratableInstanceAfterSuspenseInstance,Yp=t.commitHydratedContainer,sa=t.commitHydratedSuspenseInstance;function xl(h){if(de===void 0)try{throw Error()}catch(_){var d=_.stack.trim().match(/\n( *(at )?)/);de=d&&d[1]||""}return`
`+de+h}var jh=!1;function Mu(h,d){if(!h||jh)return"";jh=!0;var _=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(d)if(d=function(){throw Error()},Object.defineProperty(d.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(d,[])}catch(ce){var E=ce}Reflect.construct(h,[],d)}else{try{d.call()}catch(ce){E=ce}h.call(d.prototype)}else{try{throw Error()}catch(ce){E=ce}h()}}catch(ce){if(ce&&E&&typeof ce.stack=="string"){for(var C=ce.stack.split(`
`),U=E.stack.split(`
`),z=C.length-1,J=U.length-1;1<=z&&0<=J&&C[z]!==U[J];)J--;for(;1<=z&&0<=J;z--,J--)if(C[z]!==U[J]){if(z!==1||J!==1)do if(z--,0>--J||C[z]!==U[J])return`
`+C[z].replace(" at new "," at ");while(1<=z&&0<=J);break}}}finally{jh=!1,Error.prepareStackTrace=_}return(h=h?h.displayName||h.name:"")?xl(h):""}var $h=[],aa=-1;function zn(h){return{current:h}}function Qt(h){0>aa||(h.current=$h[aa],$h[aa]=null,aa--)}function cr(h,d){aa++,$h[aa]=h.current,h.current=d}var Io={},tn=zn(Io),Rn=zn(!1),hs=Io;function fs(h,d){var _=h.type.contextTypes;if(!_)return Io;var E=h.stateNode;if(E&&E.__reactInternalMemoizedUnmaskedChildContext===d)return E.__reactInternalMemoizedMaskedChildContext;var C,U={};for(C in _)U[C]=d[C];return E&&((h=h.stateNode).__reactInternalMemoizedUnmaskedChildContext=d,h.__reactInternalMemoizedMaskedChildContext=U),U}function $r(h){return(h=h.childContextTypes)!=null}function Bu(){Qt(Rn),Qt(tn)}function Du(h,d,_){if(tn.current!==Io)throw Error(s(168));cr(tn,d),cr(Rn,_)}function Kp(h,d,_){var E=h.stateNode;if(h=d.childContextTypes,typeof E.getChildContext!="function")return _;for(var C in E=E.getChildContext())if(!(C in h))throw Error(s(108,j(d)||"Unknown",C));return n({},_,E)}function Gu(h){return h=(h=h.stateNode)&&h.__reactInternalMemoizedMergedChildContext||Io,hs=tn.current,cr(tn,h),cr(Rn,Rn.current),!0}function qp(h,d,_){var E=h.stateNode;if(!E)throw Error(s(169));_?(h=Kp(h,d,hs),E.__reactInternalMemoizedMergedChildContext=h,Qt(Rn),Qt(tn),cr(tn,h)):Qt(Rn),cr(Rn,_)}var Hh=null,ds=null;(0,o.unstable_now)();var ju=0,Ft=8;function ps(h){if((1&h)!=0)return Ft=15,1;if((2&h)!=0)return Ft=14,2;if((4&h)!=0)return Ft=13,4;var d=24&h;return d!==0?(Ft=12,d):(32&h)!=0?(Ft=11,32):(d=192&h)!==0?(Ft=10,d):(256&h)!=0?(Ft=9,256):(d=3584&h)!==0?(Ft=8,d):(4096&h)!=0?(Ft=7,4096):(d=4186112&h)!==0?(Ft=6,d):(d=62914560&h)!==0?(Ft=5,d):67108864&h?(Ft=4,67108864):(134217728&h)!=0?(Ft=3,134217728):(d=805306368&h)!==0?(Ft=2,d):(1073741824&h)!=0?(Ft=1,1073741824):(Ft=8,h)}function Tl(h,d){var _=h.pendingLanes;if(_===0)return Ft=0;var E=0,C=0,U=h.expiredLanes,z=h.suspendedLanes,J=h.pingedLanes;if(U!==0)E=U,C=Ft=15;else if((U=134217727&_)!==0){var ce=U&~z;ce!==0?(E=ps(ce),C=Ft):(J&=U)!==0&&(E=ps(J),C=Ft)}else(U=_&~z)!==0?(E=ps(U),C=Ft):J!==0&&(E=ps(J),C=Ft);if(E===0)return 0;if(E=_&((0>(E=31-ao(E))?0:1<<E)<<1)-1,d!==0&&d!==E&&(d&z)==0){if(ps(d),C<=Ft)return d;Ft=C}if((d=h.entangledLanes)!==0)for(h=h.entanglements,d&=E;0<d;)C=1<<(_=31-ao(d)),E|=h[_],d&=~C;return E}function Zp(h){return(h=-1073741825&h.pendingLanes)!==0?h:1073741824&h?1073741824:0}function $u(h,d){switch(h){case 15:return 1;case 14:return 2;case 12:return(h=la(24&~d))===0?$u(10,d):h;case 10:return(h=la(192&~d))===0?$u(8,d):h;case 8:return(h=la(3584&~d))===0&&(h=la(4186112&~d))===0&&(h=512),h;case 2:return(d=la(805306368&~d))===0&&(d=268435456),d}throw Error(s(358,h))}function la(h){return h&-h}function zh(h){for(var d=[],_=0;31>_;_++)d.push(h);return d}function Hu(h,d,_){h.pendingLanes|=d;var E=d-1;h.suspendedLanes&=E,h.pingedLanes&=E,(h=h.eventTimes)[d=31-ao(d)]=_}var ao=Math.clz32?Math.clz32:function(h){return h===0?32:31-(p1(h)/m1|0)|0},p1=Math.log,m1=Math.LN2,zu=o.unstable_runWithPriority,No=o.unstable_scheduleCallback,Vu=o.unstable_cancelCallback,ms=o.unstable_shouldYield,Jp=o.unstable_requestPaint,Vh=o.unstable_now,v1=o.unstable_getCurrentPriorityLevel,Xu=o.unstable_ImmediatePriority,Qp=o.unstable_UserBlockingPriority,em=o.unstable_NormalPriority,Xh=o.unstable_LowPriority,Po=o.unstable_IdlePriority,Wh={},tm=Jp!==void 0?Jp:function(){},lo=null,ua=null,Wu=!1,rm=Vh(),Hr=1e4>rm?Vh:function(){return Vh()-rm};function vs(){switch(v1()){case Xu:return 99;case Qp:return 98;case em:return 97;case Xh:return 96;case Po:return 95;default:throw Error(s(332))}}function nm(h){switch(h){case 99:return Xu;case 98:return Qp;case 97:return em;case 96:return Xh;case 95:return Po;default:throw Error(s(332))}}function Qn(h,d){return h=nm(h),zu(h,d)}function Sl(h,d,_){return h=nm(h),No(h,d,_)}function kn(){if(ua!==null){var h=ua;ua=null,Vu(h)}im()}function im(){if(!Wu&&lo!==null){Wu=!0;var h=0;try{var d=lo;Qn(99,function(){for(;h<d.length;h++){var _=d[h];do _=_(!0);while(_!==null)}}),lo=null}catch(_){throw lo!==null&&(lo=lo.slice(h+1)),No(Xu,kn),_}finally{Wu=!1}}}var g1=a.ReactCurrentBatchConfig,D=typeof Object.is=="function"?Object.is:function(h,d){return h===d&&(h!==0||1/h==1/d)||h!=h&&d!=d},se=Object.prototype.hasOwnProperty;function fe(h,d){if(D(h,d))return!0;if(typeof h!="object"||h===null||typeof d!="object"||d===null)return!1;var _=Object.keys(h),E=Object.keys(d);if(_.length!==E.length)return!1;for(E=0;E<_.length;E++)if(!se.call(d,_[E])||!D(h[_[E]],d[_[E]]))return!1;return!0}function Ge(h){switch(h.tag){case 5:return xl(h.type);case 16:return xl("Lazy");case 13:return xl("Suspense");case 19:return xl("SuspenseList");case 0:case 2:case 15:return h=Mu(h.type,!1);case 11:return h=Mu(h.type.render,!1);case 22:return h=Mu(h.type._render,!1);case 1:return h=Mu(h.type,!0);default:return""}}function Mt(h,d){if(h&&h.defaultProps){for(var _ in d=n({},d),h=h.defaultProps)d[_]===void 0&&(d[_]=h[_]);return d}return d}var Or=zn(null),gn=null,Ir=null,El=null;function Ao(){El=Ir=gn=null}function Yh(h,d){h=h.type._context,ve?(cr(Or,h._currentValue),h._currentValue=d):(cr(Or,h._currentValue2),h._currentValue2=d)}function Yu(h){var d=Or.current;Qt(Or),h=h.type._context,ve?h._currentValue=d:h._currentValue2=d}function Kh(h,d){for(;h!==null;){var _=h.alternate;if((h.childLanes&d)===d){if(_===null||(_.childLanes&d)===d)break;_.childLanes|=d}else h.childLanes|=d,_!==null&&(_.childLanes|=d);h=h.return}}function Ro(h,d){gn=h,El=Ir=null,(h=h.dependencies)!==null&&h.firstContext!==null&&((h.lanes&d)!=0&&(uo=!0),h.firstContext=null)}function yn(h,d){if(El!==h&&d!==!1&&d!==0)if(typeof d=="number"&&d!==1073741823||(El=h,d=1073741823),d={context:h,observedBits:d,next:null},Ir===null){if(gn===null)throw Error(s(308));Ir=d,gn.dependencies={lanes:0,firstContext:d,responders:null}}else Ir=Ir.next=d;return ve?h._currentValue:h._currentValue2}var ca=!1;function y1(h){h.updateQueue={baseState:h.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null},effects:null}}function K4(h,d){h=h.updateQueue,d.updateQueue===h&&(d.updateQueue={baseState:h.baseState,firstBaseUpdate:h.firstBaseUpdate,lastBaseUpdate:h.lastBaseUpdate,shared:h.shared,effects:h.effects})}function ha(h,d){return{eventTime:h,lane:d,tag:0,payload:null,callback:null,next:null}}function fa(h,d){if((h=h.updateQueue)!==null){var _=(h=h.shared).pending;_===null?d.next=d:(d.next=_.next,_.next=d),h.pending=d}}function q4(h,d){var _=h.updateQueue,E=h.alternate;if(E!==null&&_===(E=E.updateQueue)){var C=null,U=null;if((_=_.firstBaseUpdate)!==null){do{var z={eventTime:_.eventTime,lane:_.lane,tag:_.tag,payload:_.payload,callback:_.callback,next:null};U===null?C=U=z:U=U.next=z,_=_.next}while(_!==null);U===null?C=U=d:U=U.next=d}else C=U=d;return _={baseState:E.baseState,firstBaseUpdate:C,lastBaseUpdate:U,shared:E.shared,effects:E.effects},void(h.updateQueue=_)}(h=_.lastBaseUpdate)===null?_.firstBaseUpdate=d:h.next=d,_.lastBaseUpdate=d}function qh(h,d,_,E){var C=h.updateQueue;ca=!1;var U=C.firstBaseUpdate,z=C.lastBaseUpdate,J=C.shared.pending;if(J!==null){C.shared.pending=null;var ce=J,Ne=ce.next;ce.next=null,z===null?U=Ne:z.next=Ne,z=ce;var ze=h.alternate;if(ze!==null){var rt=(ze=ze.updateQueue).lastBaseUpdate;rt!==z&&(rt===null?ze.firstBaseUpdate=Ne:rt.next=Ne,ze.lastBaseUpdate=ce)}}if(U!==null){for(rt=C.baseState,z=0,ze=Ne=ce=null;;){J=U.lane;var Re=U.eventTime;if((E&J)===J){ze!==null&&(ze=ze.next={eventTime:Re,lane:0,tag:U.tag,payload:U.payload,callback:U.callback,next:null});e:{var ir=h,pr=U;switch(J=d,Re=_,pr.tag){case 1:if(typeof(ir=pr.payload)=="function"){rt=ir.call(Re,rt,J);break e}rt=ir;break e;case 3:ir.flags=-4097&ir.flags|64;case 0:if((J=typeof(ir=pr.payload)=="function"?ir.call(Re,rt,J):ir)==null)break e;rt=n({},rt,J);break e;case 2:ca=!0}}U.callback!==null&&(h.flags|=32,(J=C.effects)===null?C.effects=[U]:J.push(U))}else Re={eventTime:Re,lane:J,tag:U.tag,payload:U.payload,callback:U.callback,next:null},ze===null?(Ne=ze=Re,ce=rt):ze=ze.next=Re,z|=J;if((U=U.next)===null){if((J=C.shared.pending)===null)break;U=J.next,J.next=null,C.lastBaseUpdate=J,C.shared.pending=null}}ze===null&&(ce=rt),C.baseState=ce,C.firstBaseUpdate=Ne,C.lastBaseUpdate=ze,hf|=z,h.lanes=z,h.memoizedState=rt}}function Z4(h,d,_){if(h=d.effects,d.effects=null,h!==null)for(d=0;d<h.length;d++){var E=h[d],C=E.callback;if(C!==null){if(E.callback=null,E=_,typeof C!="function")throw Error(s(191,C));C.call(E)}}}var J4=new i.Component().refs;function om(h,d,_,E){_=(_=_(E,d=h.memoizedState))==null?d:n({},d,_),h.memoizedState=_,h.lanes===0&&(h.updateQueue.baseState=_)}var sm={isMounted:function(h){return!!(h=h._reactInternals)&&X(h)===h},enqueueSetState:function(h,d,_){h=h._reactInternals;var E=ti(),C=ma(h),U=ha(E,C);U.payload=d,_!=null&&(U.callback=_),fa(h,U),ws(h,C,E)},enqueueReplaceState:function(h,d,_){h=h._reactInternals;var E=ti(),C=ma(h),U=ha(E,C);U.tag=1,U.payload=d,_!=null&&(U.callback=_),fa(h,U),ws(h,C,E)},enqueueForceUpdate:function(h,d){h=h._reactInternals;var _=ti(),E=ma(h),C=ha(_,E);C.tag=2,d!=null&&(C.callback=d),fa(h,C),ws(h,E,_)}};function Q4(h,d,_,E,C,U,z){return typeof(h=h.stateNode).shouldComponentUpdate=="function"?h.shouldComponentUpdate(E,U,z):!d.prototype||!d.prototype.isPureReactComponent||!fe(_,E)||!fe(C,U)}function eT(h,d,_){var E=!1,C=Io,U=d.contextType;return typeof U=="object"&&U!==null?U=yn(U):(C=$r(d)?hs:tn.current,U=(E=(E=d.contextTypes)!=null)?fs(h,C):Io),d=new d(_,U),h.memoizedState=d.state!==null&&d.state!==void 0?d.state:null,d.updater=sm,h.stateNode=d,d._reactInternals=h,E&&((h=h.stateNode).__reactInternalMemoizedUnmaskedChildContext=C,h.__reactInternalMemoizedMaskedChildContext=U),d}function tT(h,d,_,E){h=d.state,typeof d.componentWillReceiveProps=="function"&&d.componentWillReceiveProps(_,E),typeof d.UNSAFE_componentWillReceiveProps=="function"&&d.UNSAFE_componentWillReceiveProps(_,E),d.state!==h&&sm.enqueueReplaceState(d,d.state,null)}function _1(h,d,_,E){var C=h.stateNode;C.props=_,C.state=h.memoizedState,C.refs=J4,y1(h);var U=d.contextType;typeof U=="object"&&U!==null?C.context=yn(U):(U=$r(d)?hs:tn.current,C.context=fs(h,U)),qh(h,_,C,E),C.state=h.memoizedState,typeof(U=d.getDerivedStateFromProps)=="function"&&(om(h,d,U,_),C.state=h.memoizedState),typeof d.getDerivedStateFromProps=="function"||typeof C.getSnapshotBeforeUpdate=="function"||typeof C.UNSAFE_componentWillMount!="function"&&typeof C.componentWillMount!="function"||(d=C.state,typeof C.componentWillMount=="function"&&C.componentWillMount(),typeof C.UNSAFE_componentWillMount=="function"&&C.UNSAFE_componentWillMount(),d!==C.state&&sm.enqueueReplaceState(C,C.state,null),qh(h,_,C,E),C.state=h.memoizedState),typeof C.componentDidMount=="function"&&(h.flags|=4)}var am=Array.isArray;function Zh(h,d,_){if((h=_.ref)!==null&&typeof h!="function"&&typeof h!="object"){if(_._owner){if(_=_._owner){if(_.tag!==1)throw Error(s(309));var E=_.stateNode}if(!E)throw Error(s(147,h));var C=""+h;return d!==null&&d.ref!==null&&typeof d.ref=="function"&&d.ref._stringRef===C?d.ref:((d=function(U){var z=E.refs;z===J4&&(z=E.refs={}),U===null?delete z[C]:z[C]=U})._stringRef=C,d)}if(typeof h!="string")throw Error(s(284));if(!_._owner)throw Error(s(290,h))}return h}function lm(h,d){if(h.type!=="textarea")throw Error(s(31,Object.prototype.toString.call(d)==="[object Object]"?"object with keys {"+Object.keys(d).join(", ")+"}":d))}function rT(h){function d(ae,oe){if(h){var he=ae.lastEffect;he!==null?(he.nextEffect=oe,ae.lastEffect=oe):ae.firstEffect=ae.lastEffect=oe,oe.nextEffect=null,oe.flags=8}}function _(ae,oe){if(!h)return null;for(;oe!==null;)d(ae,oe),oe=oe.sibling;return null}function E(ae,oe){for(ae=new Map;oe!==null;)oe.key!==null?ae.set(oe.key,oe):ae.set(oe.index,oe),oe=oe.sibling;return ae}function C(ae,oe){return(ae=ga(ae,oe)).index=0,ae.sibling=null,ae}function U(ae,oe,he){return ae.index=he,h?(he=ae.alternate)!==null?(he=he.index)<oe?(ae.flags=2,oe):he:(ae.flags=2,oe):oe}function z(ae){return h&&ae.alternate===null&&(ae.flags=2),ae}function J(ae,oe,he,ke){return oe===null||oe.tag!==6?((oe=a2(he,ae.mode,ke)).return=ae,oe):((oe=C(oe,he)).return=ae,oe)}function ce(ae,oe,he,ke){return oe!==null&&oe.elementType===he.type?((ke=C(oe,he.props)).ref=Zh(ae,oe,he),ke.return=ae,ke):((ke=Um(he.type,he.key,he.props,null,ae.mode,ke)).ref=Zh(ae,oe,he),ke.return=ae,ke)}function Ne(ae,oe,he,ke){return oe===null||oe.tag!==4||oe.stateNode.containerInfo!==he.containerInfo||oe.stateNode.implementation!==he.implementation?((oe=l2(he,ae.mode,ke)).return=ae,oe):((oe=C(oe,he.children||[])).return=ae,oe)}function ze(ae,oe,he,ke,qe){return oe===null||oe.tag!==7?((oe=rc(he,ae.mode,ke,qe)).return=ae,oe):((oe=C(oe,he)).return=ae,oe)}function rt(ae,oe,he){if(typeof oe=="string"||typeof oe=="number")return(oe=a2(""+oe,ae.mode,he)).return=ae,oe;if(typeof oe=="object"&&oe!==null){switch(oe.$$typeof){case l:return(he=Um(oe.type,oe.key,oe.props,null,ae.mode,he)).ref=Zh(ae,null,oe),he.return=ae,he;case u:return(oe=l2(oe,ae.mode,he)).return=ae,oe}if(am(oe)||A(oe))return(oe=rc(oe,ae.mode,he,null)).return=ae,oe;lm(ae,oe)}return null}function Re(ae,oe,he,ke){var qe=oe!==null?oe.key:null;if(typeof he=="string"||typeof he=="number")return qe!==null?null:J(ae,oe,""+he,ke);if(typeof he=="object"&&he!==null){switch(he.$$typeof){case l:return he.key===qe?he.type===c?ze(ae,oe,he.props.children,ke,qe):ce(ae,oe,he,ke):null;case u:return he.key===qe?Ne(ae,oe,he,ke):null}if(am(he)||A(he))return qe!==null?null:ze(ae,oe,he,ke,null);lm(ae,he)}return null}function ir(ae,oe,he,ke,qe){if(typeof ke=="string"||typeof ke=="number")return J(oe,ae=ae.get(he)||null,""+ke,qe);if(typeof ke=="object"&&ke!==null){switch(ke.$$typeof){case l:return ae=ae.get(ke.key===null?he:ke.key)||null,ke.type===c?ze(oe,ae,ke.props.children,qe,ke.key):ce(oe,ae,ke,qe);case u:return Ne(oe,ae=ae.get(ke.key===null?he:ke.key)||null,ke,qe)}if(am(ke)||A(ke))return ze(oe,ae=ae.get(he)||null,ke,qe,null);lm(oe,ke)}return null}function pr(ae,oe,he,ke){for(var qe=null,er=null,at=oe,zt=oe=0,wn=null;at!==null&&zt<he.length;zt++){at.index>zt?(wn=at,at=null):wn=at.sibling;var Bt=Re(ae,at,he[zt],ke);if(Bt===null){at===null&&(at=wn);break}h&&at&&Bt.alternate===null&&d(ae,at),oe=U(Bt,oe,zt),er===null?qe=Bt:er.sibling=Bt,er=Bt,at=wn}if(zt===he.length)return _(ae,at),qe;if(at===null){for(;zt<he.length;zt++)(at=rt(ae,he[zt],ke))!==null&&(oe=U(at,oe,zt),er===null?qe=at:er.sibling=at,er=at);return qe}for(at=E(ae,at);zt<he.length;zt++)(wn=ir(at,ae,zt,he[zt],ke))!==null&&(h&&wn.alternate!==null&&at.delete(wn.key===null?zt:wn.key),oe=U(wn,oe,zt),er===null?qe=wn:er.sibling=wn,er=wn);return h&&at.forEach(function(ya){return d(ae,ya)}),qe}function Di(ae,oe,he,ke){var qe=A(he);if(typeof qe!="function")throw Error(s(150));if((he=qe.call(he))==null)throw Error(s(151));for(var er=qe=null,at=oe,zt=oe=0,wn=null,Bt=he.next();at!==null&&!Bt.done;zt++,Bt=he.next()){at.index>zt?(wn=at,at=null):wn=at.sibling;var ya=Re(ae,at,Bt.value,ke);if(ya===null){at===null&&(at=wn);break}h&&at&&ya.alternate===null&&d(ae,at),oe=U(ya,oe,zt),er===null?qe=ya:er.sibling=ya,er=ya,at=wn}if(Bt.done)return _(ae,at),qe;if(at===null){for(;!Bt.done;zt++,Bt=he.next())(Bt=rt(ae,Bt.value,ke))!==null&&(oe=U(Bt,oe,zt),er===null?qe=Bt:er.sibling=Bt,er=Bt);return qe}for(at=E(ae,at);!Bt.done;zt++,Bt=he.next())(Bt=ir(at,ae,zt,Bt.value,ke))!==null&&(h&&Bt.alternate!==null&&at.delete(Bt.key===null?zt:Bt.key),oe=U(Bt,oe,zt),er===null?qe=Bt:er.sibling=Bt,er=Bt);return h&&at.forEach(function(x9){return d(ae,x9)}),qe}return function(ae,oe,he,ke){var qe=typeof he=="object"&&he!==null&&he.type===c&&he.key===null;qe&&(he=he.props.children);var er=typeof he=="object"&&he!==null;if(er)switch(he.$$typeof){case l:e:{for(er=he.key,qe=oe;qe!==null;){if(qe.key===er){switch(qe.tag){case 7:if(he.type===c){_(ae,qe.sibling),(oe=C(qe,he.props.children)).return=ae,ae=oe;break e}break;default:if(qe.elementType===he.type){_(ae,qe.sibling),(oe=C(qe,he.props)).ref=Zh(ae,qe,he),oe.return=ae,ae=oe;break e}}_(ae,qe);break}d(ae,qe),qe=qe.sibling}he.type===c?((oe=rc(he.props.children,ae.mode,ke,he.key)).return=ae,ae=oe):((ke=Um(he.type,he.key,he.props,null,ae.mode,ke)).ref=Zh(ae,oe,he),ke.return=ae,ae=ke)}return z(ae);case u:e:{for(qe=he.key;oe!==null;){if(oe.key===qe){if(oe.tag===4&&oe.stateNode.containerInfo===he.containerInfo&&oe.stateNode.implementation===he.implementation){_(ae,oe.sibling),(oe=C(oe,he.children||[])).return=ae,ae=oe;break e}_(ae,oe);break}d(ae,oe),oe=oe.sibling}(oe=l2(he,ae.mode,ke)).return=ae,ae=oe}return z(ae)}if(typeof he=="string"||typeof he=="number")return he=""+he,oe!==null&&oe.tag===6?(_(ae,oe.sibling),(oe=C(oe,he)).return=ae,ae=oe):(_(ae,oe),(oe=a2(he,ae.mode,ke)).return=ae,ae=oe),z(ae);if(am(he))return pr(ae,oe,he,ke);if(A(he))return Di(ae,oe,he,ke);if(er&&lm(ae,he),he===void 0&&!qe)switch(ae.tag){case 1:case 22:case 0:case 11:case 15:throw Error(s(152,j(ae.type)||"Component"))}return _(ae,oe)}}var um=rT(!0),nT=rT(!1),Jh={},Fi=zn(Jh),Qh=zn(Jh),Ku=zn(Jh);function ko(h){if(h===Jh)throw Error(s(174));return h}function b1(h,d){cr(Ku,d),cr(Qh,h),cr(Fi,Jh),h=ie(d),Qt(Fi),cr(Fi,h)}function qu(){Qt(Fi),Qt(Qh),Qt(Ku)}function iT(h){var d=ko(Ku.current),_=ko(Fi.current);_!==(d=Q(_,h.type,d))&&(cr(Qh,h),cr(Fi,d))}function w1(h){Qh.current===h&&(Qt(Fi),Qt(Qh))}var Nr=zn(0);function cm(h){for(var d=h;d!==null;){if(d.tag===13){var _=d.memoizedState;if(_!==null&&((_=_.dehydrated)===null||u1(_)||c1(_)))return d}else if(d.tag===19&&d.memoizedProps.revealOrder!==void 0){if((64&d.flags)!=0)return d}else if(d.child!==null){d.child.return=d,d=d.child;continue}if(d===h)break;for(;d.sibling===null;){if(d.return===null||d.return===h)return null;d=d.return}d.sibling.return=d.return,d=d.sibling}return null}var gs=null,Cl=null,Oo=!1;function oT(h,d){var _=Bi(5,null,null,0);_.elementType="DELETED",_.type="DELETED",_.stateNode=d,_.return=h,_.flags=8,h.lastEffect!==null?(h.lastEffect.nextEffect=_,h.lastEffect=_):h.firstEffect=h.lastEffect=_}function sT(h,d){switch(h.tag){case 5:return(d=a1(d,h.type,h.pendingProps))!==null&&(h.stateNode=d,!0);case 6:return(d=l1(d,h.pendingProps))!==null&&(h.stateNode=d,!0);case 13:default:return!1}}function x1(h){if(Oo){var d=Cl;if(d){var _=d;if(!sT(h,d)){if(!(d=vi(_))||!sT(h,d))return h.flags=-1025&h.flags|2,Oo=!1,void(gs=h);oT(gs,_)}gs=h,Cl=Wp(d)}else h.flags=-1025&h.flags|2,Oo=!1,gs=h}}function aT(h){for(h=h.return;h!==null&&h.tag!==5&&h.tag!==3&&h.tag!==13;)h=h.return;gs=h}function hm(h){if(!Pe||h!==gs)return!1;if(!Oo)return aT(h),Oo=!0,!1;var d=h.type;if(h.tag!==5||d!=="head"&&d!=="body"&&!Ye(d,h.memoizedProps))for(d=Cl;d;)oT(h,d),d=vi(d);if(aT(h),h.tag===13){if(!Pe)throw Error(s(316));if(!(h=(h=h.memoizedState)!==null?h.dehydrated:null))throw Error(s(317));Cl=d1(h)}else Cl=gs?vi(h.stateNode):null;return!0}function T1(){Pe&&(Cl=gs=null,Oo=!1)}var Zu=[];function S1(){for(var h=0;h<Zu.length;h++){var d=Zu[h];ve?d._workInProgressVersionPrimary=null:d._workInProgressVersionSecondary=null}Zu.length=0}var ef=a.ReactCurrentDispatcher,Mi=a.ReactCurrentBatchConfig,tf=0,Pr=null,Vn=null,_n=null,fm=!1,rf=!1;function ei(){throw Error(s(321))}function E1(h,d){if(d===null)return!1;for(var _=0;_<d.length&&_<h.length;_++)if(!D(h[_],d[_]))return!1;return!0}function C1(h,d,_,E,C,U){if(tf=U,Pr=d,d.memoizedState=null,d.updateQueue=null,d.lanes=0,ef.current=h===null||h.memoizedState===null?q7:Z7,h=_(E,C),rf){U=0;do{if(rf=!1,!(25>U))throw Error(s(301));U+=1,_n=Vn=null,d.updateQueue=null,ef.current=J7,h=_(E,C)}while(rf)}if(ef.current=vm,d=Vn!==null&&Vn.next!==null,tf=0,_n=Vn=Pr=null,fm=!1,d)throw Error(s(300));return h}function Il(){var h={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return _n===null?Pr.memoizedState=_n=h:_n=_n.next=h,_n}function Nl(){if(Vn===null){var h=Pr.alternate;h=h!==null?h.memoizedState:null}else h=Vn.next;var d=_n===null?Pr.memoizedState:_n.next;if(d!==null)_n=d,Vn=h;else{if(h===null)throw Error(s(310));h={memoizedState:(Vn=h).memoizedState,baseState:Vn.baseState,baseQueue:Vn.baseQueue,queue:Vn.queue,next:null},_n===null?Pr.memoizedState=_n=h:_n=_n.next=h}return _n}function Lo(h,d){return typeof d=="function"?d(h):d}function nf(h){var d=Nl(),_=d.queue;if(_===null)throw Error(s(311));_.lastRenderedReducer=h;var E=Vn,C=E.baseQueue,U=_.pending;if(U!==null){if(C!==null){var z=C.next;C.next=U.next,U.next=z}E.baseQueue=C=U,_.pending=null}if(C!==null){C=C.next,E=E.baseState;var J=z=U=null,ce=C;do{var Ne=ce.lane;if((tf&Ne)===Ne)J!==null&&(J=J.next={lane:0,action:ce.action,eagerReducer:ce.eagerReducer,eagerState:ce.eagerState,next:null}),E=ce.eagerReducer===h?ce.eagerState:h(E,ce.action);else{var ze={lane:Ne,action:ce.action,eagerReducer:ce.eagerReducer,eagerState:ce.eagerState,next:null};J===null?(z=J=ze,U=E):J=J.next=ze,Pr.lanes|=Ne,hf|=Ne}ce=ce.next}while(ce!==null&&ce!==C);J===null?U=E:J.next=z,D(E,d.memoizedState)||(uo=!0),d.memoizedState=E,d.baseState=U,d.baseQueue=J,_.lastRenderedState=E}return[d.memoizedState,_.dispatch]}function of(h){var d=Nl(),_=d.queue;if(_===null)throw Error(s(311));_.lastRenderedReducer=h;var E=_.dispatch,C=_.pending,U=d.memoizedState;if(C!==null){_.pending=null;var z=C=C.next;do U=h(U,z.action),z=z.next;while(z!==C);D(U,d.memoizedState)||(uo=!0),d.memoizedState=U,d.baseQueue===null&&(d.baseState=U),_.lastRenderedState=U}return[U,E]}function lT(h,d,_){var E=d._getVersion;E=E(d._source);var C=ve?d._workInProgressVersionPrimary:d._workInProgressVersionSecondary;if(C!==null?h=C===E:(h=h.mutableReadLanes,(h=(tf&h)===h)&&(ve?d._workInProgressVersionPrimary=E:d._workInProgressVersionSecondary=E,Zu.push(d))),h)return _(d._source);throw Zu.push(d),Error(s(350))}function uT(h,d,_,E){var C=Xn;if(C===null)throw Error(s(349));var U=d._getVersion,z=U(d._source),J=ef.current,ce=J.useState(function(){return lT(C,d,_)}),Ne=ce[1],ze=ce[0];ce=_n;var rt=h.memoizedState,Re=rt.refs,ir=Re.getSnapshot,pr=rt.source;rt=rt.subscribe;var Di=Pr;return h.memoizedState={refs:Re,source:d,subscribe:E},J.useEffect(function(){Re.getSnapshot=_,Re.setSnapshot=Ne;var ae=U(d._source);if(!D(z,ae)){ae=_(d._source),D(ze,ae)||(Ne(ae),ae=ma(Di),C.mutableReadLanes|=ae&C.pendingLanes),ae=C.mutableReadLanes,C.entangledLanes|=ae;for(var oe=C.entanglements,he=ae;0<he;){var ke=31-ao(he),qe=1<<ke;oe[ke]|=ae,he&=~qe}}},[_,d,E]),J.useEffect(function(){return E(d._source,function(){var ae=Re.getSnapshot,oe=Re.setSnapshot;try{oe(ae(d._source));var he=ma(Di);C.mutableReadLanes|=he&C.pendingLanes}catch(ke){oe(function(){throw ke})}})},[d,E]),D(ir,_)&&D(pr,d)&&D(rt,E)||((h={pending:null,dispatch:null,lastRenderedReducer:Lo,lastRenderedState:ze}).dispatch=Ne=A1.bind(null,Pr,h),ce.queue=h,ce.baseQueue=null,ze=lT(C,d,_),ce.memoizedState=ce.baseState=ze),ze}function cT(h,d,_){return uT(Nl(),h,d,_)}function sf(h){var d=Il();return typeof h=="function"&&(h=h()),d.memoizedState=d.baseState=h,h=(h=d.queue={pending:null,dispatch:null,lastRenderedReducer:Lo,lastRenderedState:h}).dispatch=A1.bind(null,Pr,h),[d.memoizedState,h]}function dm(h,d,_,E){return h={tag:h,create:d,destroy:_,deps:E,next:null},(d=Pr.updateQueue)===null?(d={lastEffect:null},Pr.updateQueue=d,d.lastEffect=h.next=h):(_=d.lastEffect)===null?d.lastEffect=h.next=h:(E=_.next,_.next=h,h.next=E,d.lastEffect=h),h}function hT(h){return h={current:h},Il().memoizedState=h}function pm(){return Nl().memoizedState}function I1(h,d,_,E){var C=Il();Pr.flags|=h,C.memoizedState=dm(1|d,_,void 0,E===void 0?null:E)}function N1(h,d,_,E){var C=Nl();E=E===void 0?null:E;var U=void 0;if(Vn!==null){var z=Vn.memoizedState;if(U=z.destroy,E!==null&&E1(E,z.deps))return void dm(d,_,U,E)}Pr.flags|=h,C.memoizedState=dm(1|d,_,U,E)}function fT(h,d){return I1(516,4,h,d)}function mm(h,d){return N1(516,4,h,d)}function dT(h,d){return N1(4,2,h,d)}function pT(h,d){return typeof d=="function"?(h=h(),d(h),function(){d(null)}):d!=null?(h=h(),d.current=h,function(){d.current=null}):void 0}function mT(h,d,_){return _=_!=null?_.concat([h]):null,N1(4,2,pT.bind(null,d,h),_)}function P1(){}function vT(h,d){var _=Nl();d=d===void 0?null:d;var E=_.memoizedState;return E!==null&&d!==null&&E1(d,E[1])?E[0]:(_.memoizedState=[h,d],h)}function gT(h,d){var _=Nl();d=d===void 0?null:d;var E=_.memoizedState;return E!==null&&d!==null&&E1(d,E[1])?E[0]:(h=h(),_.memoizedState=[h,d],h)}function K7(h,d){var _=vs();Qn(98>_?98:_,function(){h(!0)}),Qn(97<_?97:_,function(){var E=Mi.transition;Mi.transition=1;try{h(!1),d()}finally{Mi.transition=E}})}function A1(h,d,_){var E=ti(),C=ma(h),U={lane:C,action:_,eagerReducer:null,eagerState:null,next:null},z=d.pending;if(z===null?U.next=U:(U.next=z.next,z.next=U),d.pending=U,z=h.alternate,h===Pr||z!==null&&z===Pr)rf=fm=!0;else{if(h.lanes===0&&(z===null||z.lanes===0)&&(z=d.lastRenderedReducer)!==null)try{var J=d.lastRenderedState,ce=z(J,_);if(U.eagerReducer=z,U.eagerState=ce,D(ce,J))return}catch{}ws(h,C,E)}}var vm={readContext:yn,useCallback:ei,useContext:ei,useEffect:ei,useImperativeHandle:ei,useLayoutEffect:ei,useMemo:ei,useReducer:ei,useRef:ei,useState:ei,useDebugValue:ei,useDeferredValue:ei,useTransition:ei,useMutableSource:ei,useOpaqueIdentifier:ei,unstable_isNewReconciler:!1},q7={readContext:yn,useCallback:function(h,d){return Il().memoizedState=[h,d===void 0?null:d],h},useContext:yn,useEffect:fT,useImperativeHandle:function(h,d,_){return _=_!=null?_.concat([h]):null,I1(4,2,pT.bind(null,d,h),_)},useLayoutEffect:function(h,d){return I1(4,2,h,d)},useMemo:function(h,d){var _=Il();return d=d===void 0?null:d,h=h(),_.memoizedState=[h,d],h},useReducer:function(h,d,_){var E=Il();return d=_!==void 0?_(d):d,E.memoizedState=E.baseState=d,h=(h=E.queue={pending:null,dispatch:null,lastRenderedReducer:h,lastRenderedState:d}).dispatch=A1.bind(null,Pr,h),[E.memoizedState,h]},useRef:hT,useState:sf,useDebugValue:P1,useDeferredValue:function(h){var d=sf(h),_=d[0],E=d[1];return fT(function(){var C=Mi.transition;Mi.transition=1;try{E(h)}finally{Mi.transition=C}},[h]),_},useTransition:function(){var h=sf(!1),d=h[0];return hT(h=K7.bind(null,h[1])),[h,d]},useMutableSource:function(h,d,_){var E=Il();return E.memoizedState={refs:{getSnapshot:d,setSnapshot:null},source:h,subscribe:_},uT(E,h,d,_)},useOpaqueIdentifier:function(){if(Oo){var h=!1,d=ot(function(){throw h||(h=!0,_(It())),Error(s(355))}),_=sf(d)[1];return(2&Pr.mode)==0&&(Pr.flags|=516,dm(5,function(){_(It())},void 0,null)),d}return sf(d=It()),d},unstable_isNewReconciler:!1},Z7={readContext:yn,useCallback:vT,useContext:yn,useEffect:mm,useImperativeHandle:mT,useLayoutEffect:dT,useMemo:gT,useReducer:nf,useRef:pm,useState:function(){return nf(Lo)},useDebugValue:P1,useDeferredValue:function(h){var d=nf(Lo),_=d[0],E=d[1];return mm(function(){var C=Mi.transition;Mi.transition=1;try{E(h)}finally{Mi.transition=C}},[h]),_},useTransition:function(){var h=nf(Lo)[0];return[pm().current,h]},useMutableSource:cT,useOpaqueIdentifier:function(){return nf(Lo)[0]},unstable_isNewReconciler:!1},J7={readContext:yn,useCallback:vT,useContext:yn,useEffect:mm,useImperativeHandle:mT,useLayoutEffect:dT,useMemo:gT,useReducer:of,useRef:pm,useState:function(){return of(Lo)},useDebugValue:P1,useDeferredValue:function(h){var d=of(Lo),_=d[0],E=d[1];return mm(function(){var C=Mi.transition;Mi.transition=1;try{E(h)}finally{Mi.transition=C}},[h]),_},useTransition:function(){var h=of(Lo)[0];return[pm().current,h]},useMutableSource:cT,useOpaqueIdentifier:function(){return of(Lo)[0]},unstable_isNewReconciler:!1},Q7=a.ReactCurrentOwner,uo=!1;function gi(h,d,_,E){d.child=h===null?nT(d,null,_,E):um(d,h.child,_,E)}function yT(h,d,_,E,C){_=_.render;var U=d.ref;return Ro(d,C),E=C1(h,d,_,E,U,C),h===null||uo?(d.flags|=1,gi(h,d,E,C),d.child):(d.updateQueue=h.updateQueue,d.flags&=-517,h.lanes&=~C,ys(h,d,C))}function _T(h,d,_,E,C,U){if(h===null){var z=_.type;return typeof z!="function"||o2(z)||z.defaultProps!==void 0||_.compare!==null||_.defaultProps!==void 0?((h=Um(_.type,null,E,d,d.mode,U)).ref=d.ref,h.return=d,d.child=h):(d.tag=15,d.type=z,bT(h,d,z,E,C,U))}return z=h.child,(C&U)==0&&(C=z.memoizedProps,(_=(_=_.compare)!==null?_:fe)(C,E)&&h.ref===d.ref)?ys(h,d,U):(d.flags|=1,(h=ga(z,E)).ref=d.ref,h.return=d,d.child=h)}function bT(h,d,_,E,C,U){if(h!==null&&fe(h.memoizedProps,E)&&h.ref===d.ref){if(uo=!1,(U&C)==0)return d.lanes=h.lanes,ys(h,d,U);(16384&h.flags)!=0&&(uo=!0)}return R1(h,d,_,E,U)}function wT(h,d,_){var E=d.pendingProps,C=E.children,U=h!==null?h.memoizedState:null;if(E.mode==="hidden"||E.mode==="unstable-defer-without-hiding")if((4&d.mode)==0)d.memoizedState={baseLanes:0},km(d,_);else{if((1073741824&_)==0)return h=U!==null?U.baseLanes|_:_,d.lanes=d.childLanes=1073741824,d.memoizedState={baseLanes:h},km(d,h),null;d.memoizedState={baseLanes:0},km(d,U!==null?U.baseLanes:_)}else U!==null?(E=U.baseLanes|_,d.memoizedState=null):E=_,km(d,E);return gi(h,d,C,_),d.child}function xT(h,d){var _=d.ref;(h===null&&_!==null||h!==null&&h.ref!==_)&&(d.flags|=128)}function R1(h,d,_,E,C){var U=$r(_)?hs:tn.current;return U=fs(d,U),Ro(d,C),_=C1(h,d,_,E,U,C),h===null||uo?(d.flags|=1,gi(h,d,_,C),d.child):(d.updateQueue=h.updateQueue,d.flags&=-517,h.lanes&=~C,ys(h,d,C))}function TT(h,d,_,E,C){if($r(_)){var U=!0;Gu(d)}else U=!1;if(Ro(d,C),d.stateNode===null)h!==null&&(h.alternate=null,d.alternate=null,d.flags|=2),eT(d,_,E),_1(d,_,E,C),E=!0;else if(h===null){var z=d.stateNode,J=d.memoizedProps;z.props=J;var ce=z.context,Ne=_.contextType;typeof Ne=="object"&&Ne!==null?Ne=yn(Ne):Ne=fs(d,Ne=$r(_)?hs:tn.current);var ze=_.getDerivedStateFromProps,rt=typeof ze=="function"||typeof z.getSnapshotBeforeUpdate=="function";rt||typeof z.UNSAFE_componentWillReceiveProps!="function"&&typeof z.componentWillReceiveProps!="function"||(J!==E||ce!==Ne)&&tT(d,z,E,Ne),ca=!1;var Re=d.memoizedState;z.state=Re,qh(d,E,z,C),ce=d.memoizedState,J!==E||Re!==ce||Rn.current||ca?(typeof ze=="function"&&(om(d,_,ze,E),ce=d.memoizedState),(J=ca||Q4(d,_,J,E,Re,ce,Ne))?(rt||typeof z.UNSAFE_componentWillMount!="function"&&typeof z.componentWillMount!="function"||(typeof z.componentWillMount=="function"&&z.componentWillMount(),typeof z.UNSAFE_componentWillMount=="function"&&z.UNSAFE_componentWillMount()),typeof z.componentDidMount=="function"&&(d.flags|=4)):(typeof z.componentDidMount=="function"&&(d.flags|=4),d.memoizedProps=E,d.memoizedState=ce),z.props=E,z.state=ce,z.context=Ne,E=J):(typeof z.componentDidMount=="function"&&(d.flags|=4),E=!1)}else{z=d.stateNode,K4(h,d),J=d.memoizedProps,Ne=d.type===d.elementType?J:Mt(d.type,J),z.props=Ne,rt=d.pendingProps,Re=z.context,typeof(ce=_.contextType)=="object"&&ce!==null?ce=yn(ce):ce=fs(d,ce=$r(_)?hs:tn.current);var ir=_.getDerivedStateFromProps;(ze=typeof ir=="function"||typeof z.getSnapshotBeforeUpdate=="function")||typeof z.UNSAFE_componentWillReceiveProps!="function"&&typeof z.componentWillReceiveProps!="function"||(J!==rt||Re!==ce)&&tT(d,z,E,ce),ca=!1,Re=d.memoizedState,z.state=Re,qh(d,E,z,C);var pr=d.memoizedState;J!==rt||Re!==pr||Rn.current||ca?(typeof ir=="function"&&(om(d,_,ir,E),pr=d.memoizedState),(Ne=ca||Q4(d,_,Ne,E,Re,pr,ce))?(ze||typeof z.UNSAFE_componentWillUpdate!="function"&&typeof z.componentWillUpdate!="function"||(typeof z.componentWillUpdate=="function"&&z.componentWillUpdate(E,pr,ce),typeof z.UNSAFE_componentWillUpdate=="function"&&z.UNSAFE_componentWillUpdate(E,pr,ce)),typeof z.componentDidUpdate=="function"&&(d.flags|=4),typeof z.getSnapshotBeforeUpdate=="function"&&(d.flags|=256)):(typeof z.componentDidUpdate!="function"||J===h.memoizedProps&&Re===h.memoizedState||(d.flags|=4),typeof z.getSnapshotBeforeUpdate!="function"||J===h.memoizedProps&&Re===h.memoizedState||(d.flags|=256),d.memoizedProps=E,d.memoizedState=pr),z.props=E,z.state=pr,z.context=ce,E=Ne):(typeof z.componentDidUpdate!="function"||J===h.memoizedProps&&Re===h.memoizedState||(d.flags|=4),typeof z.getSnapshotBeforeUpdate!="function"||J===h.memoizedProps&&Re===h.memoizedState||(d.flags|=256),E=!1)}return k1(h,d,_,E,U,C)}function k1(h,d,_,E,C,U){xT(h,d);var z=(64&d.flags)!=0;if(!E&&!z)return C&&qp(d,_,!1),ys(h,d,U);E=d.stateNode,Q7.current=d;var J=z&&typeof _.getDerivedStateFromError!="function"?null:E.render();return d.flags|=1,h!==null&&z?(d.child=um(d,h.child,null,U),d.child=um(d,null,J,U)):gi(h,d,J,U),d.memoizedState=E.state,C&&qp(d,_,!0),d.child}function ST(h){var d=h.stateNode;d.pendingContext?Du(0,d.pendingContext,d.pendingContext!==d.context):d.context&&Du(0,d.context,!1),b1(h,d.containerInfo)}var af,lf,gm,ym,O1={dehydrated:null,retryLane:0};function ET(h,d,_){var E,C=d.pendingProps,U=Nr.current,z=!1;return(E=(64&d.flags)!=0)||(E=(h===null||h.memoizedState!==null)&&(2&U)!=0),E?(z=!0,d.flags&=-65):h!==null&&h.memoizedState===null||C.fallback===void 0||C.unstable_avoidThisFallback===!0||(U|=1),cr(Nr,1&U),h===null?(C.fallback!==void 0&&x1(d),h=C.children,U=C.fallback,z?(h=CT(d,h,U,_),d.child.memoizedState={baseLanes:_},d.memoizedState=O1,h):typeof C.unstable_expectedLoadTime=="number"?(h=CT(d,h,U,_),d.child.memoizedState={baseLanes:_},d.memoizedState=O1,d.lanes=33554432,h):((_=s2({mode:"visible",children:h},d.mode,_,null)).return=d,d.child=_)):(h.memoizedState,z?(C=t9(h,d,C.children,C.fallback,_),z=d.child,U=h.child.memoizedState,z.memoizedState=U===null?{baseLanes:_}:{baseLanes:U.baseLanes|_},z.childLanes=h.childLanes&~_,d.memoizedState=O1,C):(_=e9(h,d,C.children,_),d.memoizedState=null,_))}function CT(h,d,_,E){var C=h.mode,U=h.child;return d={mode:"hidden",children:d},(2&C)==0&&U!==null?(U.childLanes=0,U.pendingProps=d):U=s2(d,C,0,null),_=rc(_,C,E,null),U.return=h,_.return=h,U.sibling=_,h.child=U,_}function e9(h,d,_,E){var C=h.child;return h=C.sibling,_=ga(C,{mode:"visible",children:_}),(2&d.mode)==0&&(_.lanes=E),_.return=d,_.sibling=null,h!==null&&(h.nextEffect=null,h.flags=8,d.firstEffect=d.lastEffect=h),d.child=_}function t9(h,d,_,E,C){var U=d.mode,z=h.child;h=z.sibling;var J={mode:"hidden",children:_};return(2&U)==0&&d.child!==z?((_=d.child).childLanes=0,_.pendingProps=J,(z=_.lastEffect)!==null?(d.firstEffect=_.firstEffect,d.lastEffect=z,z.nextEffect=null):d.firstEffect=d.lastEffect=null):_=ga(z,J),h!==null?E=ga(h,E):(E=rc(E,U,C,null)).flags|=2,E.return=d,_.return=d,_.sibling=E,d.child=_,E}function IT(h,d){h.lanes|=d;var _=h.alternate;_!==null&&(_.lanes|=d),Kh(h.return,d)}function L1(h,d,_,E,C,U){var z=h.memoizedState;z===null?h.memoizedState={isBackwards:d,rendering:null,renderingStartTime:0,last:E,tail:_,tailMode:C,lastEffect:U}:(z.isBackwards=d,z.rendering=null,z.renderingStartTime=0,z.last=E,z.tail=_,z.tailMode=C,z.lastEffect=U)}function NT(h,d,_){var E=d.pendingProps,C=E.revealOrder,U=E.tail;if(gi(h,d,E.children,_),(2&(E=Nr.current))!=0)E=1&E|2,d.flags|=64;else{if(h!==null&&(64&h.flags)!=0)e:for(h=d.child;h!==null;){if(h.tag===13)h.memoizedState!==null&&IT(h,_);else if(h.tag===19)IT(h,_);else if(h.child!==null){h.child.return=h,h=h.child;continue}if(h===d)break e;for(;h.sibling===null;){if(h.return===null||h.return===d)break e;h=h.return}h.sibling.return=h.return,h=h.sibling}E&=1}if(cr(Nr,E),(2&d.mode)==0)d.memoizedState=null;else switch(C){case"forwards":for(_=d.child,C=null;_!==null;)(h=_.alternate)!==null&&cm(h)===null&&(C=_),_=_.sibling;(_=C)===null?(C=d.child,d.child=null):(C=_.sibling,_.sibling=null),L1(d,!1,C,_,U,d.lastEffect);break;case"backwards":for(_=null,C=d.child,d.child=null;C!==null;){if((h=C.alternate)!==null&&cm(h)===null){d.child=C;break}h=C.sibling,C.sibling=_,_=C,C=h}L1(d,!0,_,null,U,d.lastEffect);break;case"together":L1(d,!1,null,null,void 0,d.lastEffect);break;default:d.memoizedState=null}return d.child}function ys(h,d,_){if(h!==null&&(d.dependencies=h.dependencies),hf|=d.lanes,(_&d.childLanes)!=0){if(h!==null&&d.child!==h.child)throw Error(s(153));if(d.child!==null){for(_=ga(h=d.child,h.pendingProps),d.child=_,_.return=d;h.sibling!==null;)h=h.sibling,(_=_.sibling=ga(h,h.pendingProps)).return=d;_.sibling=null}return d.child}return null}function Uo(h){h.flags|=4}if(ue)af=function(h,d){for(var _=d.child;_!==null;){if(_.tag===5||_.tag===6)ye(h,_.stateNode);else if(_.tag!==4&&_.child!==null){_.child.return=_,_=_.child;continue}if(_===d)break;for(;_.sibling===null;){if(_.return===null||_.return===d)return;_=_.return}_.sibling.return=_.return,_=_.sibling}},lf=function(){},gm=function(h,d,_,E,C){if((h=h.memoizedProps)!==E){var U=d.stateNode,z=ko(Fi.current);_=Ie(U,_,h,E,C,z),(d.updateQueue=_)&&Uo(d)}},ym=function(h,d,_,E){_!==E&&Uo(d)};else if(Ee){af=function(h,d,_,E){for(var C=d.child;C!==null;){if(C.tag===5){var U=C.stateNode;_&&E&&(U=Co(U,C.type,C.memoizedProps,C)),ye(h,U)}else if(C.tag===6)U=C.stateNode,_&&E&&(U=Xp(U,C.memoizedProps,C)),ye(h,U);else if(C.tag!==4){if(C.tag===13&&(4&C.flags)!=0&&(U=C.memoizedState!==null)){var z=C.child;if(z!==null&&(z.child!==null&&(z.child.return=z,af(h,z,!0,U)),(U=z.sibling)!==null)){U.return=C,C=U;continue}}if(C.child!==null){C.child.return=C,C=C.child;continue}}if(C===d)break;for(;C.sibling===null;){if(C.return===null||C.return===d)return;C=C.return}C.sibling.return=C.return,C=C.sibling}};var PT=function(h,d,_,E){for(var C=d.child;C!==null;){if(C.tag===5){var U=C.stateNode;_&&E&&(U=Co(U,C.type,C.memoizedProps,C)),zp(h,U)}else if(C.tag===6)U=C.stateNode,_&&E&&(U=Xp(U,C.memoizedProps,C)),zp(h,U);else if(C.tag!==4){if(C.tag===13&&(4&C.flags)!=0&&(U=C.memoizedState!==null)){var z=C.child;if(z!==null&&(z.child!==null&&(z.child.return=z,PT(h,z,!0,U)),(U=z.sibling)!==null)){U.return=C,C=U;continue}}if(C.child!==null){C.child.return=C,C=C.child;continue}}if(C===d)break;for(;C.sibling===null;){if(C.return===null||C.return===d)return;C=C.return}C.sibling.return=C.return,C=C.sibling}};lf=function(h){var d=h.stateNode;if(h.firstEffect!==null){var _=d.containerInfo,E=Hp(_);PT(E,h,!1,!1),d.pendingChildren=E,Uo(h),Vp(_,E)}},gm=function(h,d,_,E,C){var U=h.stateNode,z=h.memoizedProps;if((h=d.firstEffect===null)&&z===E)d.stateNode=U;else{var J=d.stateNode,ce=ko(Fi.current),Ne=null;z!==E&&(Ne=Ie(J,_,z,E,C,ce)),h&&Ne===null?d.stateNode=U:(U=s1(U,Ne,_,z,E,d,h,J),Ce(U,_,E,C,ce)&&Uo(d),d.stateNode=U,h?Uo(d):af(U,d,!1,!1))}},ym=function(h,d,_,E){_!==E?(h=ko(Ku.current),_=ko(Fi.current),d.stateNode=pe(E,h,_,d),Uo(d)):d.stateNode=h.stateNode}}else lf=function(){},gm=function(){},ym=function(){};function uf(h,d){if(!Oo)switch(h.tailMode){case"hidden":d=h.tail;for(var _=null;d!==null;)d.alternate!==null&&(_=d),d=d.sibling;_===null?h.tail=null:_.sibling=null;break;case"collapsed":_=h.tail;for(var E=null;_!==null;)_.alternate!==null&&(E=_),_=_.sibling;E===null?d||h.tail===null?h.tail=null:h.tail.sibling=null:E.sibling=null}}function r9(h,d,_){var E=d.pendingProps;switch(d.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return null;case 1:return $r(d.type)&&Bu(),null;case 3:return qu(),Qt(Rn),Qt(tn),S1(),(E=d.stateNode).pendingContext&&(E.context=E.pendingContext,E.pendingContext=null),h!==null&&h.child!==null||(hm(d)?Uo(d):E.hydrate||(d.flags|=256)),lf(d),null;case 5:w1(d);var C=ko(Ku.current);if(_=d.type,h!==null&&d.stateNode!=null)gm(h,d,_,E,C),h.ref!==d.ref&&(d.flags|=128);else{if(!E){if(d.stateNode===null)throw Error(s(166));return null}if(h=ko(Fi.current),hm(d)){if(!Pe)throw Error(s(175));h=h1(d.stateNode,d.type,d.memoizedProps,C,h,d),d.updateQueue=h,h!==null&&Uo(d)}else{var U=te(_,E,C,h,d);af(U,d,!1,!1),d.stateNode=U,Ce(U,_,E,C,h)&&Uo(d)}d.ref!==null&&(d.flags|=128)}return null;case 6:if(h&&d.stateNode!=null)ym(h,d,h.memoizedProps,E);else{if(typeof E!="string"&&d.stateNode===null)throw Error(s(166));if(h=ko(Ku.current),C=ko(Fi.current),hm(d)){if(!Pe)throw Error(s(176));f1(d.stateNode,d.memoizedProps,d)&&Uo(d)}else d.stateNode=pe(E,h,C,d)}return null;case 13:return Qt(Nr),E=d.memoizedState,(64&d.flags)!=0?(d.lanes=_,d):(E=E!==null,C=!1,h===null?d.memoizedProps.fallback!==void 0&&hm(d):C=h.memoizedState!==null,E&&!C&&(2&d.mode)!=0&&(h===null&&d.memoizedProps.unstable_avoidThisFallback!==!0||(1&Nr.current)!=0?bn===0&&(bn=3):(bn!==0&&bn!==3||(bn=4),Xn===null||(134217727&hf)==0&&(134217727&Qu)==0||ec(Xn,On))),Ee&&E&&(d.flags|=4),ue&&(E||C)&&(d.flags|=4),null);case 4:return qu(),lf(d),h===null&&qt(d.stateNode.containerInfo),null;case 10:return Yu(d),null;case 17:return $r(d.type)&&Bu(),null;case 19:if(Qt(Nr),(E=d.memoizedState)===null)return null;if(C=(64&d.flags)!=0,(U=E.rendering)===null)if(C)uf(E,!1);else{if(bn!==0||h!==null&&(64&h.flags)!=0)for(h=d.child;h!==null;){if((U=cm(h))!==null){for(d.flags|=64,uf(E,!1),(h=U.updateQueue)!==null&&(d.updateQueue=h,d.flags|=4),E.lastEffect===null&&(d.firstEffect=null),d.lastEffect=E.lastEffect,h=_,E=d.child;E!==null;)_=h,(C=E).flags&=2,C.nextEffect=null,C.firstEffect=null,C.lastEffect=null,(U=C.alternate)===null?(C.childLanes=0,C.lanes=_,C.child=null,C.memoizedProps=null,C.memoizedState=null,C.updateQueue=null,C.dependencies=null,C.stateNode=null):(C.childLanes=U.childLanes,C.lanes=U.lanes,C.child=U.child,C.memoizedProps=U.memoizedProps,C.memoizedState=U.memoizedState,C.updateQueue=U.updateQueue,C.type=U.type,_=U.dependencies,C.dependencies=_===null?null:{lanes:_.lanes,firstContext:_.firstContext}),E=E.sibling;return cr(Nr,1&Nr.current|2),d.child}h=h.sibling}E.tail!==null&&Hr()>q1&&(d.flags|=64,C=!0,uf(E,!1),d.lanes=33554432)}else{if(!C)if((h=cm(U))!==null){if(d.flags|=64,C=!0,(h=h.updateQueue)!==null&&(d.updateQueue=h,d.flags|=4),uf(E,!0),E.tail===null&&E.tailMode==="hidden"&&!U.alternate&&!Oo)return(d=d.lastEffect=E.lastEffect)!==null&&(d.nextEffect=null),null}else 2*Hr()-E.renderingStartTime>q1&&_!==1073741824&&(d.flags|=64,C=!0,uf(E,!1),d.lanes=33554432);E.isBackwards?(U.sibling=d.child,d.child=U):((h=E.last)!==null?h.sibling=U:d.child=U,E.last=U)}return E.tail!==null?(h=E.tail,E.rendering=h,E.tail=h.sibling,E.lastEffect=d.lastEffect,E.renderingStartTime=Hr(),h.sibling=null,d=Nr.current,cr(Nr,C?1&d|2:1&d),h):null;case 23:case 24:return r2(),h!==null&&h.memoizedState!==null!=(d.memoizedState!==null)&&E.mode!=="unstable-defer-without-hiding"&&(d.flags|=4),null}throw Error(s(156,d.tag))}function n9(h){switch(h.tag){case 1:$r(h.type)&&Bu();var d=h.flags;return 4096&d?(h.flags=-4097&d|64,h):null;case 3:if(qu(),Qt(Rn),Qt(tn),S1(),(64&(d=h.flags))!=0)throw Error(s(285));return h.flags=-4097&d|64,h;case 5:return w1(h),null;case 13:return Qt(Nr),4096&(d=h.flags)?(h.flags=-4097&d|64,h):null;case 19:return Qt(Nr),null;case 4:return qu(),null;case 10:return Yu(h),null;case 23:case 24:return r2(),null;default:return null}}function U1(h,d){try{var _="",E=d;do _+=Ge(E),E=E.return;while(E);var C=_}catch(U){C=`
Error generating stack: `+U.message+`
`+U.stack}return{value:h,source:d,stack:C}}function F1(h,d){try{console.error(d.value)}catch(_){setTimeout(function(){throw _})}}var i9=typeof WeakMap=="function"?WeakMap:Map;function AT(h,d,_){(_=ha(-1,_)).tag=3,_.payload={element:null};var E=d.value;return _.callback=function(){Nm||(Nm=!0,Z1=E),F1(0,d)},_}function RT(h,d,_){(_=ha(-1,_)).tag=3;var E=h.type.getDerivedStateFromError;if(typeof E=="function"){var C=d.value;_.payload=function(){return F1(0,d),E(C)}}var U=h.stateNode;return U!==null&&typeof U.componentDidCatch=="function"&&(_.callback=function(){typeof E!="function"&&(Fo===null?Fo=new Set([this]):Fo.add(this),F1(0,d));var z=d.stack;this.componentDidCatch(d.value,{componentStack:z!==null?z:""})}),_}var o9=typeof WeakSet=="function"?WeakSet:Set;function kT(h){var d=h.ref;if(d!==null)if(typeof d=="function")try{d(null)}catch(_){va(h,_)}else d.current=null}function s9(h,d){switch(d.tag){case 0:case 11:case 15:case 22:return;case 1:if(256&d.flags&&h!==null){var _=h.memoizedProps,E=h.memoizedState;d=(h=d.stateNode).getSnapshotBeforeUpdate(d.elementType===d.type?_:Mt(d.type,_),E),h.__reactInternalSnapshotBeforeUpdate=d}return;case 3:return void(ue&&256&d.flags&&Dh(d.stateNode.containerInfo));case 5:case 6:case 4:case 17:return}throw Error(s(163))}function OT(h,d){if((d=(d=d.updateQueue)!==null?d.lastEffect:null)!==null){var _=d=d.next;do{if((_.tag&h)===h){var E=_.destroy;_.destroy=void 0,E!==void 0&&E()}_=_.next}while(_!==d)}}function a9(h,d,_){switch(_.tag){case 0:case 11:case 15:case 22:if((d=(d=_.updateQueue)!==null?d.lastEffect:null)!==null){h=d=d.next;do{if((3&h.tag)==3){var E=h.create;h.destroy=E()}h=h.next}while(h!==d)}if((d=(d=_.updateQueue)!==null?d.lastEffect:null)!==null){h=d=d.next;do{var C=h;E=C.next,(4&(C=C.tag))!=0&&(1&C)!=0&&(ZT(_,h),p9(_,h)),h=E}while(h!==d)}return;case 1:return h=_.stateNode,4&_.flags&&(d===null?h.componentDidMount():(E=_.elementType===_.type?d.memoizedProps:Mt(_.type,d.memoizedProps),h.componentDidUpdate(E,d.memoizedState,h.__reactInternalSnapshotBeforeUpdate))),void((d=_.updateQueue)!==null&&Z4(_,d,h));case 3:if((d=_.updateQueue)!==null){if(h=null,_.child!==null)switch(_.child.tag){case 5:h=le(_.child.stateNode);break;case 1:h=_.child.stateNode}Z4(_,d,h)}return;case 5:return h=_.stateNode,void(d===null&&4&_.flags&&ge(h,_.type,_.memoizedProps,_));case 6:case 4:case 12:return;case 13:return void(Pe&&_.memoizedState===null&&(_=_.alternate,_!==null&&(_=_.memoizedState,_!==null&&(_=_.dehydrated,_!==null&&sa(_)))));case 19:case 17:case 20:case 21:case 23:case 24:return}throw Error(s(163))}function LT(h,d){if(ue)for(var _=h;;){if(_.tag===5){var E=_.stateNode;d?Ut(E):mi(_.stateNode,_.memoizedProps)}else if(_.tag===6)E=_.stateNode,d?ur(E):o1(E,_.memoizedProps);else if((_.tag!==23&&_.tag!==24||_.memoizedState===null||_===h)&&_.child!==null){_.child.return=_,_=_.child;continue}if(_===h)break;for(;_.sibling===null;){if(_.return===null||_.return===h)return;_=_.return}_.sibling.return=_.return,_=_.sibling}}function UT(h,d){if(ds&&typeof ds.onCommitFiberUnmount=="function")try{ds.onCommitFiberUnmount(Hh,d)}catch{}switch(d.tag){case 0:case 11:case 14:case 15:case 22:if((h=d.updateQueue)!==null&&(h=h.lastEffect)!==null){var _=h=h.next;do{var E=_,C=E.destroy;if(E=E.tag,C!==void 0)if((4&E)!=0)ZT(d,_);else{E=d;try{C()}catch(U){va(E,U)}}_=_.next}while(_!==h)}break;case 1:if(kT(d),typeof(h=d.stateNode).componentWillUnmount=="function")try{h.props=d.memoizedProps,h.state=d.memoizedState,h.componentWillUnmount()}catch(U){va(d,U)}break;case 5:kT(d);break;case 4:ue?GT(h,d):Ee&&Ee&&(d=d.stateNode.containerInfo,h=Hp(d),Gh(d,h))}}function FT(h,d){for(var _=d;;)if(UT(h,_),_.child===null||ue&&_.tag===4){if(_===d)break;for(;_.sibling===null;){if(_.return===null||_.return===d)return;_=_.return}_.sibling.return=_.return,_=_.sibling}else _.child.return=_,_=_.child}function MT(h){h.alternate=null,h.child=null,h.dependencies=null,h.firstEffect=null,h.lastEffect=null,h.memoizedProps=null,h.memoizedState=null,h.pendingProps=null,h.return=null,h.updateQueue=null}function BT(h){return h.tag===5||h.tag===3||h.tag===4}function DT(h){if(ue){e:{for(var d=h.return;d!==null;){if(BT(d))break e;d=d.return}throw Error(s(160))}var _=d;switch(d=_.stateNode,_.tag){case 5:var E=!1;break;case 3:case 4:d=d.containerInfo,E=!0;break;default:throw Error(s(161))}16&_.flags&&(Rt(d),_.flags&=-17);e:t:for(_=h;;){for(;_.sibling===null;){if(_.return===null||BT(_.return)){_=null;break e}_=_.return}for(_.sibling.return=_.return,_=_.sibling;_.tag!==5&&_.tag!==6&&_.tag!==18;){if(2&_.flags||_.child===null||_.tag===4)continue t;_.child.return=_,_=_.child}if(!(2&_.flags)){_=_.stateNode;break e}}E?M1(h,_,d):B1(h,_,d)}}function M1(h,d,_){var E=h.tag,C=E===5||E===6;if(C)h=C?h.stateNode:h.stateNode.instance,d?et(_,h,d):V(_,h);else if(E!==4&&(h=h.child)!==null)for(M1(h,d,_),h=h.sibling;h!==null;)M1(h,d,_),h=h.sibling}function B1(h,d,_){var E=h.tag,C=E===5||E===6;if(C)h=C?h.stateNode:h.stateNode.instance,d?nt(_,h,d):B(_,h);else if(E!==4&&(h=h.child)!==null)for(B1(h,d,_),h=h.sibling;h!==null;)B1(h,d,_),h=h.sibling}function GT(h,d){for(var _,E,C=d,U=!1;;){if(!U){U=C.return;e:for(;;){if(U===null)throw Error(s(160));switch(_=U.stateNode,U.tag){case 5:E=!1;break e;case 3:case 4:_=_.containerInfo,E=!0;break e}U=U.return}U=!0}if(C.tag===5||C.tag===6)FT(h,C),E?_t(_,C.stateNode):jt(_,C.stateNode);else if(C.tag===4){if(C.child!==null){_=C.stateNode.containerInfo,E=!0,C.child.return=C,C=C.child;continue}}else if(UT(h,C),C.child!==null){C.child.return=C,C=C.child;continue}if(C===d)break;for(;C.sibling===null;){if(C.return===null||C.return===d)return;(C=C.return).tag===4&&(U=!1)}C.sibling.return=C.return,C=C.sibling}}function D1(h,d){if(ue){switch(d.tag){case 0:case 11:case 14:case 15:case 22:return void OT(3,d);case 1:return;case 5:var _=d.stateNode;if(_!=null){var E=d.memoizedProps;h=h!==null?h.memoizedProps:E;var C=d.type,U=d.updateQueue;d.updateQueue=null,U!==null&&Ke(_,U,C,h,E,d)}return;case 6:if(d.stateNode===null)throw Error(s(162));return _=d.memoizedProps,void re(d.stateNode,h!==null?h.memoizedProps:_,_);case 3:return void(Pe&&(d=d.stateNode,d.hydrate&&(d.hydrate=!1,Yp(d.containerInfo))));case 12:return;case 13:return jT(d),void _m(d);case 19:return void _m(d);case 17:return;case 23:case 24:return void LT(d,d.memoizedState!==null)}throw Error(s(163))}switch(d.tag){case 0:case 11:case 14:case 15:case 22:return void OT(3,d);case 12:return;case 13:return jT(d),void _m(d);case 19:return void _m(d);case 3:Pe&&(_=d.stateNode).hydrate&&(_.hydrate=!1,Yp(_.containerInfo));break;case 23:case 24:return}e:if(Ee){switch(d.tag){case 1:case 5:case 6:case 20:break e;case 3:case 4:d=d.stateNode,Gh(d.containerInfo,d.pendingChildren);break e}throw Error(s(163))}}function jT(h){h.memoizedState!==null&&(K1=Hr(),ue&&LT(h.child,!0))}function _m(h){var d=h.updateQueue;if(d!==null){h.updateQueue=null;var _=h.stateNode;_===null&&(_=h.stateNode=new o9),d.forEach(function(E){var C=g9.bind(null,h,E);_.has(E)||(_.add(E),E.then(C,C))})}}function l9(h,d){return h!==null&&((h=h.memoizedState)===null||h.dehydrated!==null)&&(d=d.memoizedState)!==null&&d.dehydrated===null}var bm=0,wm=1,xm=2,Tm=3,Sm=4;if(typeof Symbol=="function"&&Symbol.for){var cf=Symbol.for;bm=cf("selector.component"),wm=cf("selector.has_pseudo_class"),xm=cf("selector.role"),Tm=cf("selector.test_id"),Sm=cf("selector.text")}function G1(h){var d=Le(h);if(d!=null){if(typeof d.memoizedProps["data-testname"]!="string")throw Error(s(364));return d}if((h=jr(h))===null)throw Error(s(362));return h.stateNode.current}function j1(h,d){switch(d.$$typeof){case bm:if(h.type===d.value)return!0;break;case wm:e:{d=d.value,h=[h,0];for(var _=0;_<h.length;){var E=h[_++],C=h[_++],U=d[C];if(E.tag!==5||!Z(E)){for(;U!=null&&j1(E,U);)U=d[++C];if(C===d.length){d=!0;break e}for(E=E.child;E!==null;)h.push(E,C),E=E.sibling}}d=!1}return d;case xm:if(h.tag===5&&be(h.stateNode,d.value))return!0;break;case Sm:if((h.tag===5||h.tag===6)&&(h=H(h))!==null&&0<=h.indexOf(d.value))return!0;break;case Tm:if(h.tag===5&&typeof(h=h.memoizedProps["data-testname"])=="string"&&h.toLowerCase()===d.value.toLowerCase())return!0;break;default:throw Error(s(365,d))}return!1}function $1(h){switch(h.$$typeof){case bm:return"<"+(j(h.value)||"Unknown")+">";case wm:return":has("+($1(h)||"")+")";case xm:return'[role="'+h.value+'"]';case Sm:return'"'+h.value+'"';case Tm:return'[data-testname="'+h.value+'"]';default:throw Error(s(365,h))}}function $T(h,d){var _=[];h=[h,0];for(var E=0;E<h.length;){var C=h[E++],U=h[E++],z=d[U];if(C.tag!==5||!Z(C)){for(;z!=null&&j1(C,z);)z=d[++U];if(U===d.length)_.push(C);else for(C=C.child;C!==null;)h.push(C,U),C=C.sibling}}return _}function H1(h,d){if(!Tt)throw Error(s(363));h=$T(h=G1(h),d),d=[],h=Array.from(h);for(var _=0;_<h.length;){var E=h[_++];if(E.tag===5)Z(E)||d.push(E.stateNode);else for(E=E.child;E!==null;)h.push(E),E=E.sibling}return d}var Em=null,u9=Math.ceil,Cm=a.ReactCurrentDispatcher,z1=a.ReactCurrentOwner,V1=a.IsSomeRendererActing,st=0,Xn=null,zr=null,On=0,Pl=0,X1=zn(0),bn=0,Im=null,Ju=0,hf=0,Qu=0,W1=0,Y1=null,K1=0,q1=1/0;function da(){q1=Hr()+500}var HT,Ue=null,Nm=!1,Z1=null,Fo=null,pa=!1,ff=null,df=90,J1=[],Q1=[],_s=null,pf=0,e2=null,Pm=-1,bs=0,Am=0,mf=null,vf=!1;function ti(){return(48&st)!=0?Hr():Pm!==-1?Pm:Pm=Hr()}function ma(h){if((2&(h=h.mode))==0)return 1;if((4&h)==0)return vs()===99?1:2;if(bs===0&&(bs=Ju),g1.transition!==0){Am!==0&&(Am=Y1!==null?Y1.pendingLanes:0),h=bs;var d=4186112&~Am;return(d&=-d)===0&&(d=(h=4186112&~h)&-h)===0&&(d=8192),d}return h=vs(),(4&st)!=0&&h===98?h=$u(12,bs):h=$u(h=function(_){switch(_){case 99:return 15;case 98:return 10;case 97:case 96:return 8;case 95:return 2;default:return 0}}(h),bs),h}function ws(h,d,_){if(50<pf)throw pf=0,e2=null,Error(s(185));if((h=Rm(h,d))===null)return null;Hu(h,d,_),h===Xn&&(Qu|=d,bn===4&&ec(h,On));var E=vs();d===1?(8&st)!=0&&(48&st)==0?t2(h):(yi(h,_),st===0&&(da(),kn())):((4&st)==0||E!==98&&E!==99||(_s===null?_s=new Set([h]):_s.add(h)),yi(h,_)),Y1=h}function Rm(h,d){h.lanes|=d;var _=h.alternate;for(_!==null&&(_.lanes|=d),_=h,h=h.return;h!==null;)h.childLanes|=d,(_=h.alternate)!==null&&(_.childLanes|=d),_=h,h=h.return;return _.tag===3?_.stateNode:null}function yi(h,d){for(var _=h.callbackNode,E=h.suspendedLanes,C=h.pingedLanes,U=h.expirationTimes,z=h.pendingLanes;0<z;){var J=31-ao(z),ce=1<<J,Ne=U[J];if(Ne===-1){if((ce&E)==0||(ce&C)!=0){Ne=d,ps(ce);var ze=Ft;U[J]=10<=ze?Ne+250:6<=ze?Ne+5e3:-1}}else Ne<=d&&(h.expiredLanes|=ce);z&=~ce}if(E=Tl(h,h===Xn?On:0),d=Ft,E===0)_!==null&&(_!==Wh&&Vu(_),h.callbackNode=null,h.callbackPriority=0);else{if(_!==null){if(h.callbackPriority===d)return;_!==Wh&&Vu(_)}d===15?(_=t2.bind(null,h),lo===null?(lo=[_],ua=No(Xu,im)):lo.push(_),_=Wh):d===14?_=Sl(99,t2.bind(null,h)):_=Sl(_=function(rt){switch(rt){case 15:case 14:return 99;case 13:case 12:case 11:case 10:return 98;case 9:case 8:case 7:case 6:case 4:case 5:return 97;case 3:case 2:case 1:return 95;case 0:return 90;default:throw Error(s(358,rt))}}(d),zT.bind(null,h)),h.callbackPriority=d,h.callbackNode=_}}function zT(h){if(Pm=-1,Am=bs=0,(48&st)!=0)throw Error(s(327));var d=h.callbackNode;if(xs()&&h.callbackNode!==d)return null;var _=Tl(h,h===Xn?On:0);if(_===0)return null;var E=_,C=st;st|=16;var U=YT();for(Xn===h&&On===E||(da(),tc(h,E));;)try{h9();break}catch(J){WT(h,J)}if(Ao(),Cm.current=U,st=C,zr!==null?E=0:(Xn=null,On=0,E=bn),(Ju&Qu)!=0)tc(h,0);else if(E!==0){if(E===2&&(st|=64,h.hydrate&&(h.hydrate=!1,Dh(h.containerInfo)),(_=Zp(h))!==0&&(E=gf(h,_))),E===1)throw d=Im,tc(h,0),ec(h,_),yi(h,Hr()),d;switch(h.finishedWork=h.current.alternate,h.finishedLanes=_,E){case 0:case 1:throw Error(s(345));case 2:Al(h);break;case 3:if(ec(h,_),(62914560&_)===_&&10<(E=K1+500-Hr())){if(Tl(h,0)!==0)break;if(((C=h.suspendedLanes)&_)!==_){ti(),h.pingedLanes|=h.suspendedLanes&C;break}h.timeoutHandle=F(Al.bind(null,h),E);break}Al(h);break;case 4:if(ec(h,_),(4186112&_)===_)break;for(E=h.eventTimes,C=-1;0<_;){var z=31-ao(_);U=1<<z,(z=E[z])>C&&(C=z),_&=~U}if(_=C,10<(_=(120>(_=Hr()-_)?120:480>_?480:1080>_?1080:1920>_?1920:3e3>_?3e3:4320>_?4320:1960*u9(_/1960))-_)){h.timeoutHandle=F(Al.bind(null,h),_);break}Al(h);break;case 5:Al(h);break;default:throw Error(s(329))}}return yi(h,Hr()),h.callbackNode===d?zT.bind(null,h):null}function ec(h,d){for(d&=~W1,d&=~Qu,h.suspendedLanes|=d,h.pingedLanes&=~d,h=h.expirationTimes;0<d;){var _=31-ao(d),E=1<<_;h[_]=-1,d&=~E}}function t2(h){if((48&st)!=0)throw Error(s(327));if(xs(),h===Xn&&(h.expiredLanes&On)!=0){var d=On,_=gf(h,d);(Ju&Qu)!=0&&(_=gf(h,d=Tl(h,d)))}else _=gf(h,d=Tl(h,0));if(h.tag!==0&&_===2&&(st|=64,h.hydrate&&(h.hydrate=!1,Dh(h.containerInfo)),(d=Zp(h))!==0&&(_=gf(h,d))),_===1)throw _=Im,tc(h,0),ec(h,d),yi(h,Hr()),_;return h.finishedWork=h.current.alternate,h.finishedLanes=d,Al(h),yi(h,Hr()),null}function VT(h,d){var _=st;st|=1;try{return h(d)}finally{(st=_)===0&&(da(),kn())}}function XT(h,d){var _=st;if((48&_)!=0)return h(d);st|=1;try{if(h)return Qn(99,h.bind(null,d))}finally{st=_,kn()}}function km(h,d){cr(X1,Pl),Pl|=d,Ju|=d}function r2(){Pl=X1.current,Qt(X1)}function tc(h,d){h.finishedWork=null,h.finishedLanes=0;var _=h.timeoutHandle;if(_!==q&&(h.timeoutHandle=q,$(_)),zr!==null)for(_=zr.return;_!==null;){var E=_;switch(E.tag){case 1:(E=E.type.childContextTypes)!=null&&Bu();break;case 3:qu(),Qt(Rn),Qt(tn),S1();break;case 5:w1(E);break;case 4:qu();break;case 13:case 19:Qt(Nr);break;case 10:Yu(E);break;case 23:case 24:r2()}_=_.return}Xn=h,zr=ga(h.current,null),On=Pl=Ju=d,bn=0,Im=null,W1=Qu=hf=0}function WT(h,d){for(;;){var _=zr;try{if(Ao(),ef.current=vm,fm){for(var E=Pr.memoizedState;E!==null;){var C=E.queue;C!==null&&(C.pending=null),E=E.next}fm=!1}if(tf=0,_n=Vn=Pr=null,rf=!1,z1.current=null,_===null||_.return===null){bn=1,Im=d,zr=null;break}e:{var U=h,z=_.return,J=_,ce=d;if(d=On,J.flags|=2048,J.firstEffect=J.lastEffect=null,ce!==null&&typeof ce=="object"&&typeof ce.then=="function"){var Ne=ce;if((2&J.mode)==0){var ze=J.alternate;ze?(J.updateQueue=ze.updateQueue,J.memoizedState=ze.memoizedState,J.lanes=ze.lanes):(J.updateQueue=null,J.memoizedState=null)}var rt=(1&Nr.current)!=0,Re=z;do{var ir;if(ir=Re.tag===13){var pr=Re.memoizedState;if(pr!==null)ir=pr.dehydrated!==null;else{var Di=Re.memoizedProps;ir=Di.fallback!==void 0&&(Di.unstable_avoidThisFallback!==!0||!rt)}}if(ir){var ae=Re.updateQueue;if(ae===null){var oe=new Set;oe.add(Ne),Re.updateQueue=oe}else ae.add(Ne);if((2&Re.mode)==0){if(Re.flags|=64,J.flags|=16384,J.flags&=-2981,J.tag===1)if(J.alternate===null)J.tag=17;else{var he=ha(-1,1);he.tag=2,fa(J,he)}J.lanes|=1;break e}ce=void 0,J=d;var ke=U.pingCache;if(ke===null?(ke=U.pingCache=new i9,ce=new Set,ke.set(Ne,ce)):(ce=ke.get(Ne))===void 0&&(ce=new Set,ke.set(Ne,ce)),!ce.has(J)){ce.add(J);var qe=v9.bind(null,U,Ne,J);Ne.then(qe,qe)}Re.flags|=4096,Re.lanes=d;break e}Re=Re.return}while(Re!==null);ce=Error((j(J.type)||"A React component")+` suspended while rendering, but no fallback UI was specified.

Add a <Suspense fallback=...> component higher in the tree to provide a loading indicator or placeholder to display.`)}bn!==5&&(bn=2),ce=U1(ce,J),Re=z;do{switch(Re.tag){case 3:U=ce,Re.flags|=4096,d&=-d,Re.lanes|=d,q4(Re,AT(0,U,d));break e;case 1:U=ce;var er=Re.type,at=Re.stateNode;if((64&Re.flags)==0&&(typeof er.getDerivedStateFromError=="function"||at!==null&&typeof at.componentDidCatch=="function"&&(Fo===null||!Fo.has(at)))){Re.flags|=4096,d&=-d,Re.lanes|=d,q4(Re,RT(Re,U,d));break e}}Re=Re.return}while(Re!==null)}qT(_)}catch(zt){d=zt,zr===_&&_!==null&&(zr=_=_.return);continue}break}}function YT(){var h=Cm.current;return Cm.current=vm,h===null?vm:h}function gf(h,d){var _=st;st|=16;var E=YT();for(Xn===h&&On===d||tc(h,d);;)try{c9();break}catch(C){WT(h,C)}if(Ao(),st=_,Cm.current=E,zr!==null)throw Error(s(261));return Xn=null,On=0,bn}function c9(){for(;zr!==null;)KT(zr)}function h9(){for(;zr!==null&&!ms();)KT(zr)}function KT(h){var d=HT(h.alternate,h,Pl);h.memoizedProps=h.pendingProps,d===null?qT(h):zr=d,z1.current=null}function qT(h){var d=h;do{var _=d.alternate;if(h=d.return,(2048&d.flags)==0){if((_=r9(_,d,Pl))!==null)return void(zr=_);if((_=d).tag!==24&&_.tag!==23||_.memoizedState===null||(1073741824&Pl)!=0||(4&_.mode)==0){for(var E=0,C=_.child;C!==null;)E|=C.lanes|C.childLanes,C=C.sibling;_.childLanes=E}h!==null&&(2048&h.flags)==0&&(h.firstEffect===null&&(h.firstEffect=d.firstEffect),d.lastEffect!==null&&(h.lastEffect!==null&&(h.lastEffect.nextEffect=d.firstEffect),h.lastEffect=d.lastEffect),1<d.flags&&(h.lastEffect!==null?h.lastEffect.nextEffect=d:h.firstEffect=d,h.lastEffect=d))}else{if((_=n9(d))!==null)return _.flags&=2047,void(zr=_);h!==null&&(h.firstEffect=h.lastEffect=null,h.flags|=2048)}if((d=d.sibling)!==null)return void(zr=d);zr=d=h}while(d!==null);bn===0&&(bn=5)}function Al(h){var d=vs();return Qn(99,f9.bind(null,h,d)),null}function f9(h,d){do xs();while(ff!==null);if((48&st)!=0)throw Error(s(327));var _=h.finishedWork;if(_===null)return null;if(h.finishedWork=null,h.finishedLanes=0,_===h.current)throw Error(s(177));h.callbackNode=null;var E=_.lanes|_.childLanes,C=E,U=h.pendingLanes&~C;h.pendingLanes=C,h.suspendedLanes=0,h.pingedLanes=0,h.expiredLanes&=C,h.mutableReadLanes&=C,h.entangledLanes&=C,C=h.entanglements;for(var z=h.eventTimes,J=h.expirationTimes;0<U;){var ce=31-ao(U),Ne=1<<ce;C[ce]=0,z[ce]=-1,J[ce]=-1,U&=~Ne}if(_s!==null&&(24&E)==0&&_s.has(h)&&_s.delete(h),h===Xn&&(zr=Xn=null,On=0),1<_.flags?_.lastEffect!==null?(_.lastEffect.nextEffect=_,E=_.firstEffect):E=_:E=_.firstEffect,E!==null){C=st,st|=32,z1.current=null,mf=ee(h.containerInfo),vf=!1,Ue=E;do try{d9()}catch(oe){if(Ue===null)throw Error(s(330));va(Ue,oe),Ue=Ue.nextEffect}while(Ue!==null);mf=null,Ue=E;do try{for(z=h;Ue!==null;){var ze=Ue.flags;if(16&ze&&ue&&Rt(Ue.stateNode),128&ze){var rt=Ue.alternate;if(rt!==null){var Re=rt.ref;Re!==null&&(typeof Re=="function"?Re(null):Re.current=null)}}switch(1038&ze){case 2:DT(Ue),Ue.flags&=-3;break;case 6:DT(Ue),Ue.flags&=-3,D1(Ue.alternate,Ue);break;case 1024:Ue.flags&=-1025;break;case 1028:Ue.flags&=-1025,D1(Ue.alternate,Ue);break;case 4:D1(Ue.alternate,Ue);break;case 8:J=z,U=Ue,ue?GT(J,U):FT(J,U);var ir=U.alternate;MT(U),ir!==null&&MT(ir)}Ue=Ue.nextEffect}}catch(oe){if(Ue===null)throw Error(s(330));va(Ue,oe),Ue=Ue.nextEffect}while(Ue!==null);vf&&Kt(),K(h.containerInfo),h.current=_,Ue=E;do try{for(ze=h;Ue!==null;){var pr=Ue.flags;if(36&pr&&a9(ze,Ue.alternate,Ue),128&pr){rt=void 0;var Di=Ue.ref;if(Di!==null){var ae=Ue.stateNode;switch(Ue.tag){case 5:rt=le(ae);break;default:rt=ae}typeof Di=="function"?Di(rt):Di.current=rt}}Ue=Ue.nextEffect}}catch(oe){if(Ue===null)throw Error(s(330));va(Ue,oe),Ue=Ue.nextEffect}while(Ue!==null);Ue=null,tm(),st=C}else h.current=_;if(pa)pa=!1,ff=h,df=d;else for(Ue=E;Ue!==null;)d=Ue.nextEffect,Ue.nextEffect=null,8&Ue.flags&&((pr=Ue).sibling=null,pr.stateNode=null),Ue=d;if((E=h.pendingLanes)===0&&(Fo=null),E===1?h===e2?pf++:(pf=0,e2=h):pf=0,_=_.stateNode,ds&&typeof ds.onCommitFiberRoot=="function")try{ds.onCommitFiberRoot(Hh,_,void 0,(64&_.current.flags)==64)}catch{}if(yi(h,Hr()),Nm)throw Nm=!1,h=Z1,Z1=null,h;return(8&st)!=0||kn(),null}function d9(){for(;Ue!==null;){var h=Ue.alternate;vf||mf===null||((8&Ue.flags)!=0?Y(Ue,mf)&&(vf=!0,Lt()):Ue.tag===13&&l9(h,Ue)&&Y(Ue,mf)&&(vf=!0,Lt()));var d=Ue.flags;(256&d)!=0&&s9(h,Ue),(512&d)==0||pa||(pa=!0,Sl(97,function(){return xs(),null})),Ue=Ue.nextEffect}}function xs(){if(df!==90){var h=97<df?97:df;return df=90,Qn(h,m9)}return!1}function p9(h,d){J1.push(d,h),pa||(pa=!0,Sl(97,function(){return xs(),null}))}function ZT(h,d){Q1.push(d,h),pa||(pa=!0,Sl(97,function(){return xs(),null}))}function m9(){if(ff===null)return!1;var h=ff;if(ff=null,(48&st)!=0)throw Error(s(331));var d=st;st|=32;var _=Q1;Q1=[];for(var E=0;E<_.length;E+=2){var C=_[E],U=_[E+1],z=C.destroy;if(C.destroy=void 0,typeof z=="function")try{z()}catch(ce){if(U===null)throw Error(s(330));va(U,ce)}}for(_=J1,J1=[],E=0;E<_.length;E+=2){C=_[E],U=_[E+1];try{var J=C.create;C.destroy=J()}catch(ce){if(U===null)throw Error(s(330));va(U,ce)}}for(J=h.current.firstEffect;J!==null;)h=J.nextEffect,J.nextEffect=null,8&J.flags&&(J.sibling=null,J.stateNode=null),J=h;return st=d,kn(),!0}function JT(h,d,_){fa(h,d=AT(0,d=U1(_,d),1)),d=ti(),(h=Rm(h,1))!==null&&(Hu(h,1,d),yi(h,d))}function va(h,d){if(h.tag===3)JT(h,h,d);else for(var _=h.return;_!==null;){if(_.tag===3){JT(_,h,d);break}if(_.tag===1){var E=_.stateNode;if(typeof _.type.getDerivedStateFromError=="function"||typeof E.componentDidCatch=="function"&&(Fo===null||!Fo.has(E))){var C=RT(_,h=U1(d,h),1);if(fa(_,C),C=ti(),(_=Rm(_,1))!==null)Hu(_,1,C),yi(_,C);else if(typeof E.componentDidCatch=="function"&&(Fo===null||!Fo.has(E)))try{E.componentDidCatch(d,h)}catch{}break}}_=_.return}}function v9(h,d,_){var E=h.pingCache;E!==null&&E.delete(d),d=ti(),h.pingedLanes|=h.suspendedLanes&_,Xn===h&&(On&_)===_&&(bn===4||bn===3&&(62914560&On)===On&&500>Hr()-K1?tc(h,0):W1|=_),yi(h,d)}function g9(h,d){var _=h.stateNode;_!==null&&_.delete(d),(d=0)==0&&((2&(d=h.mode))==0?d=1:(4&d)==0?d=vs()===99?1:2:(bs===0&&(bs=Ju),(d=la(62914560&~bs))===0&&(d=4194304))),_=ti(),(h=Rm(h,d))!==null&&(Hu(h,d,_),yi(h,_))}HT=function(h,d,_){var E=d.lanes;if(h!==null)if(h.memoizedProps!==d.pendingProps||Rn.current)uo=!0;else{if((_&E)==0){switch(uo=!1,d.tag){case 3:ST(d),T1();break;case 5:iT(d);break;case 1:$r(d.type)&&Gu(d);break;case 4:b1(d,d.stateNode.containerInfo);break;case 10:Yh(d,d.memoizedProps.value);break;case 13:if(d.memoizedState!==null)return(_&d.child.childLanes)!=0?ET(h,d,_):(cr(Nr,1&Nr.current),(d=ys(h,d,_))!==null?d.sibling:null);cr(Nr,1&Nr.current);break;case 19:if(E=(_&d.childLanes)!=0,(64&h.flags)!=0){if(E)return NT(h,d,_);d.flags|=64}var C=d.memoizedState;if(C!==null&&(C.rendering=null,C.tail=null,C.lastEffect=null),cr(Nr,Nr.current),E)break;return null;case 23:case 24:return d.lanes=0,wT(h,d,_)}return ys(h,d,_)}uo=(16384&h.flags)!=0}else uo=!1;switch(d.lanes=0,d.tag){case 2:if(E=d.type,h!==null&&(h.alternate=null,d.alternate=null,d.flags|=2),h=d.pendingProps,C=fs(d,tn.current),Ro(d,_),C=C1(null,d,E,h,C,_),d.flags|=1,typeof C=="object"&&C!==null&&typeof C.render=="function"&&C.$$typeof===void 0){if(d.tag=1,d.memoizedState=null,d.updateQueue=null,$r(E)){var U=!0;Gu(d)}else U=!1;d.memoizedState=C.state!==null&&C.state!==void 0?C.state:null,y1(d);var z=E.getDerivedStateFromProps;typeof z=="function"&&om(d,E,z,h),C.updater=sm,d.stateNode=C,C._reactInternals=d,_1(d,E,h,_),d=k1(null,d,E,!0,U,_)}else d.tag=0,gi(null,d,C,_),d=d.child;return d;case 16:C=d.elementType;e:{switch(h!==null&&(h.alternate=null,d.alternate=null,d.flags|=2),h=d.pendingProps,C=(U=C._init)(C._payload),d.type=C,U=d.tag=function(ze){if(typeof ze=="function")return o2(ze)?1:0;if(ze!=null){if((ze=ze.$$typeof)===b)return 11;if(ze===x)return 14}return 2}(C),h=Mt(C,h),U){case 0:d=R1(null,d,C,h,_);break e;case 1:d=TT(null,d,C,h,_);break e;case 11:d=yT(null,d,C,h,_);break e;case 14:d=_T(null,d,C,Mt(C.type,h),E,_);break e}throw Error(s(306,C,""))}return d;case 0:return E=d.type,C=d.pendingProps,R1(h,d,E,C=d.elementType===E?C:Mt(E,C),_);case 1:return E=d.type,C=d.pendingProps,TT(h,d,E,C=d.elementType===E?C:Mt(E,C),_);case 3:if(ST(d),E=d.updateQueue,h===null||E===null)throw Error(s(282));if(E=d.pendingProps,C=(C=d.memoizedState)!==null?C.element:null,K4(h,d),qh(d,E,null,_),(E=d.memoizedState.element)===C)T1(),d=ys(h,d,_);else{if((U=(C=d.stateNode).hydrate)&&(Pe?(Cl=Wp(d.stateNode.containerInfo),gs=d,U=Oo=!0):U=!1),U){if(Pe&&(h=C.mutableSourceEagerHydrationData)!=null)for(C=0;C<h.length;C+=2)U=h[C],z=h[C+1],ve?U._workInProgressVersionPrimary=z:U._workInProgressVersionSecondary=z,Zu.push(U);for(_=nT(d,null,E,_),d.child=_;_;)_.flags=-3&_.flags|1024,_=_.sibling}else gi(h,d,E,_),T1();d=d.child}return d;case 5:return iT(d),h===null&&x1(d),E=d.type,C=d.pendingProps,U=h!==null?h.memoizedProps:null,z=C.children,Ye(E,C)?z=null:U!==null&&Ye(E,U)&&(d.flags|=16),xT(h,d),gi(h,d,z,_),d.child;case 6:return h===null&&x1(d),null;case 13:return ET(h,d,_);case 4:return b1(d,d.stateNode.containerInfo),E=d.pendingProps,h===null?d.child=um(d,null,E,_):gi(h,d,E,_),d.child;case 11:return E=d.type,C=d.pendingProps,yT(h,d,E,C=d.elementType===E?C:Mt(E,C),_);case 7:return gi(h,d,d.pendingProps,_),d.child;case 8:case 12:return gi(h,d,d.pendingProps.children,_),d.child;case 10:e:{if(E=d.type._context,C=d.pendingProps,z=d.memoizedProps,Yh(d,U=C.value),z!==null){var J=z.value;if((U=D(J,U)?0:0|(typeof E._calculateChangedBits=="function"?E._calculateChangedBits(J,U):1073741823))===0){if(z.children===C.children&&!Rn.current){d=ys(h,d,_);break e}}else for((J=d.child)!==null&&(J.return=d);J!==null;){var ce=J.dependencies;if(ce!==null){z=J.child;for(var Ne=ce.firstContext;Ne!==null;){if(Ne.context===E&&(Ne.observedBits&U)!=0){J.tag===1&&((Ne=ha(-1,_&-_)).tag=2,fa(J,Ne)),J.lanes|=_,(Ne=J.alternate)!==null&&(Ne.lanes|=_),Kh(J.return,_),ce.lanes|=_;break}Ne=Ne.next}}else z=J.tag===10&&J.type===d.type?null:J.child;if(z!==null)z.return=J;else for(z=J;z!==null;){if(z===d){z=null;break}if((J=z.sibling)!==null){J.return=z.return,z=J;break}z=z.return}J=z}}gi(h,d,C.children,_),d=d.child}return d;case 9:return C=d.type,E=(U=d.pendingProps).children,Ro(d,_),E=E(C=yn(C,U.unstable_observedBits)),d.flags|=1,gi(h,d,E,_),d.child;case 14:return U=Mt(C=d.type,d.pendingProps),_T(h,d,C,U=Mt(C.type,U),E,_);case 15:return bT(h,d,d.type,d.pendingProps,E,_);case 17:return E=d.type,C=d.pendingProps,C=d.elementType===E?C:Mt(E,C),h!==null&&(h.alternate=null,d.alternate=null,d.flags|=2),d.tag=1,$r(E)?(h=!0,Gu(d)):h=!1,Ro(d,_),eT(d,E,C),_1(d,E,C,_),k1(null,d,E,!0,h,_);case 19:return NT(h,d,_);case 23:case 24:return wT(h,d,_)}throw Error(s(156,d.tag))};var Om={current:!1},n2=o.unstable_flushAllWithoutAsserting,QT=typeof n2=="function";function i2(){if(n2!==void 0)return n2();for(var h=!1;xs();)h=!0;return h}function eS(h){try{i2(),function(d){if(Em===null)try{var _=("require"+Math.random()).slice(0,7);Em=(e&&e[_]).call(e,"timers").setImmediate}catch{Em=function(C){var U=new MessageChannel;U.port1.onmessage=C,U.port2.postMessage(void 0)}}Em(d)}(function(){i2()?eS(h):h()})}catch(d){h(d)}}var Lm=0,tS=!1;function y9(h,d,_,E){this.tag=h,this.key=_,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=d,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=E,this.flags=0,this.lastEffect=this.firstEffect=this.nextEffect=null,this.childLanes=this.lanes=0,this.alternate=null}function Bi(h,d,_,E){return new y9(h,d,_,E)}function o2(h){return!(!(h=h.prototype)||!h.isReactComponent)}function ga(h,d){var _=h.alternate;return _===null?((_=Bi(h.tag,d,h.key,h.mode)).elementType=h.elementType,_.type=h.type,_.stateNode=h.stateNode,_.alternate=h,h.alternate=_):(_.pendingProps=d,_.type=h.type,_.flags=0,_.nextEffect=null,_.firstEffect=null,_.lastEffect=null),_.childLanes=h.childLanes,_.lanes=h.lanes,_.child=h.child,_.memoizedProps=h.memoizedProps,_.memoizedState=h.memoizedState,_.updateQueue=h.updateQueue,d=h.dependencies,_.dependencies=d===null?null:{lanes:d.lanes,firstContext:d.firstContext},_.sibling=h.sibling,_.index=h.index,_.ref=h.ref,_}function Um(h,d,_,E,C,U){var z=2;if(E=h,typeof h=="function")o2(h)&&(z=1);else if(typeof h=="string")z=5;else e:switch(h){case c:return rc(_.children,C,U,d);case R:z=8,C|=16;break;case f:z=8,C|=1;break;case p:return(h=Bi(12,_,d,8|C)).elementType=p,h.type=p,h.lanes=U,h;case y:return(h=Bi(13,_,d,C)).type=y,h.elementType=y,h.lanes=U,h;case w:return(h=Bi(19,_,d,C)).elementType=w,h.lanes=U,h;case S:return s2(_,C,U,d);case O:return(h=Bi(24,_,d,C)).elementType=O,h.lanes=U,h;default:if(typeof h=="object"&&h!==null)switch(h.$$typeof){case m:z=10;break e;case g:z=9;break e;case b:z=11;break e;case x:z=14;break e;case T:z=16,E=null;break e;case I:z=22;break e}throw Error(s(130,h==null?h:typeof h,""))}return(d=Bi(z,_,d,C)).elementType=h,d.type=E,d.lanes=U,d}function rc(h,d,_,E){return(h=Bi(7,h,E,d)).lanes=_,h}function s2(h,d,_,E){return(h=Bi(23,h,E,d)).elementType=S,h.lanes=_,h}function a2(h,d,_){return(h=Bi(6,h,null,d)).lanes=_,h}function l2(h,d,_){return(d=Bi(4,h.children!==null?h.children:[],h.key,d)).lanes=_,d.stateNode={containerInfo:h.containerInfo,pendingChildren:null,implementation:h.implementation},d}function _9(h,d,_){this.tag=d,this.containerInfo=h,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=q,this.pendingContext=this.context=null,this.hydrate=_,this.callbackNode=null,this.callbackPriority=0,this.eventTimes=zh(0),this.expirationTimes=zh(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=zh(0),Pe&&(this.mutableSourceEagerHydrationData=null)}function rS(h){var d=h._reactInternals;if(d===void 0)throw typeof h.render=="function"?Error(s(188)):Error(s(268,Object.keys(h)));return(h=W(d))===null?null:h.stateNode}function nS(h,d){if((h=h.memoizedState)!==null&&h.dehydrated!==null){var _=h.retryLane;h.retryLane=_!==0&&_<d?_:d}}function Fm(h,d){nS(h,d),(h=h.alternate)&&nS(h,d)}function b9(h){return(h=W(h))===null?null:h.stateNode}function w9(){return null}return r.IsThisRendererActing=Om,r.act=function(h){function d(){Lm--,V1.current=_,Om.current=E}tS===!1&&(tS=!0,console.error("act(...) is not supported in production builds of React, and might not behave as expected.")),Lm++;var _=V1.current,E=Om.current;V1.current=!0,Om.current=!0;try{var C=VT(h)}catch(U){throw d(),U}if(C!==null&&typeof C=="object"&&typeof C.then=="function")return{then:function(U,z){C.then(function(){1<Lm||QT===!0&&_===!0?(d(),U()):eS(function(J){d(),J?z(J):U()})},function(J){d(),z(J)})}};try{Lm!==1||QT!==!1&&_!==!1||i2(),d()}catch(U){throw d(),U}return{then:function(U){U()}}},r.attemptContinuousHydration=function(h){h.tag===13&&(ws(h,67108864,ti()),Fm(h,67108864))},r.attemptHydrationAtCurrentPriority=function(h){if(h.tag===13){var d=ti(),_=ma(h);ws(h,_,d),Fm(h,_)}},r.attemptSynchronousHydration=function(h){switch(h.tag){case 3:var d=h.stateNode;if(d.hydrate){var _=ps(d.pendingLanes);d.expiredLanes|=_&d.pendingLanes,yi(d,Hr()),(48&st)==0&&(da(),kn())}break;case 13:var E=ti();XT(function(){return ws(h,1,E)}),Fm(h,4)}},r.attemptUserBlockingHydration=function(h){h.tag===13&&(ws(h,4,ti()),Fm(h,4))},r.batchedEventUpdates=function(h,d){var _=st;st|=2;try{return h(d)}finally{(st=_)===0&&(da(),kn())}},r.batchedUpdates=VT,r.createComponentSelector=function(h){return{$$typeof:bm,value:h}},r.createContainer=function(h,d,_){return h=new _9(h,d,_),d=Bi(3,null,null,d===2?7:d===1?3:0),h.current=d,d.stateNode=h,y1(d),h},r.createHasPsuedoClassSelector=function(h){return{$$typeof:wm,value:h}},r.createPortal=function(h,d,_){var E=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:u,key:E==null?null:""+E,children:h,containerInfo:d,implementation:_}},r.createRoleSelector=function(h){return{$$typeof:xm,value:h}},r.createTestNameSelector=function(h){return{$$typeof:Tm,value:h}},r.createTextSelector=function(h){return{$$typeof:Sm,value:h}},r.deferredUpdates=function(h){return Qn(97,h)},r.discreteUpdates=function(h,d,_,E,C){var U=st;st|=4;try{return Qn(98,h.bind(null,d,_,E,C))}finally{(st=U)===0&&(da(),kn())}},r.findAllNodes=H1,r.findBoundingRects=function(h,d){if(!Tt)throw Error(s(363));d=H1(h,d),h=[];for(var _=0;_<d.length;_++)h.push(L(d[_]));for(d=h.length-1;0<d;d--)for(var E=(_=h[d]).x,C=E+_.width,U=_.y,z=U+_.height,J=d-1;0<=J;J--)if(d!==J){var ce=h[J],Ne=ce.x,ze=Ne+ce.width,rt=ce.y,Re=rt+ce.height;if(E>=Ne&&U>=rt&&C<=ze&&z<=Re){h.splice(d,1);break}if(!(E!==Ne||_.width!==ce.width||Re<U||rt>z)){rt>U&&(ce.height+=rt-U,ce.y=U),Re<z&&(ce.height=z-rt),h.splice(d,1);break}if(!(U!==rt||_.height!==ce.height||ze<E||Ne>C)){Ne>E&&(ce.width+=Ne-E,ce.x=E),ze<C&&(ce.width=C-Ne),h.splice(d,1);break}}return h},r.findHostInstance=rS,r.findHostInstanceWithNoPortals=function(h){return(h=function(d){if(!(d=ne(d)))return null;for(var _=d;;){if(_.tag===5||_.tag===6)return _;if(_.child&&_.tag!==4)_.child.return=_,_=_.child;else{if(_===d)break;for(;!_.sibling;){if(!_.return||_.return===d)return null;_=_.return}_.sibling.return=_.return,_=_.sibling}}return null}(h))===null?null:h.tag===20?h.stateNode.instance:h.stateNode},r.findHostInstanceWithWarning=function(h){return rS(h)},r.flushControlled=function(h){var d=st;st|=1;try{Qn(99,h)}finally{(st=d)===0&&(da(),kn())}},r.flushDiscreteUpdates=function(){(49&st)==0&&(function(){if(_s!==null){var h=_s;_s=null,h.forEach(function(d){d.expiredLanes|=24&d.pendingLanes,yi(d,Hr())})}kn()}(),xs())},r.flushPassiveEffects=xs,r.flushSync=XT,r.focusWithin=function(h,d){if(!Tt)throw Error(s(363));for(d=$T(h=G1(h),d),d=Array.from(d),h=0;h<d.length;){var _=d[h++];if(!Z(_)){if(_.tag===5&&Ve(_.stateNode))return!0;for(_=_.child;_!==null;)d.push(_),_=_.sibling}}return!1},r.getCurrentUpdateLanePriority=function(){return ju},r.getFindAllNodesFailureDescription=function(h,d){if(!Tt)throw Error(s(363));var _=0,E=[];h=[G1(h),0];for(var C=0;C<h.length;){var U=h[C++],z=h[C++],J=d[z];if((U.tag!==5||!Z(U))&&(j1(U,J)&&(E.push($1(J)),++z>_&&(_=z)),z<d.length))for(U=U.child;U!==null;)h.push(U,z),U=U.sibling}if(_<d.length){for(h=[];_<d.length;_++)h.push($1(d[_]));return`findAllNodes was able to match part of the selector:
  `+E.join(" > ")+`

No matching component was found for:
  `+h.join(" > ")}return null},r.getPublicRootInstance=function(h){if(!(h=h.current).child)return null;switch(h.child.tag){case 5:return le(h.child.stateNode);default:return h.child.stateNode}},r.injectIntoDevTools=function(h){if(h={bundleType:h.bundleType,version:h.version,rendererPackageName:h.rendererPackageName,rendererConfig:h.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:a.ReactCurrentDispatcher,findHostInstanceByFiber:b9,findFiberByHostInstance:h.findFiberByHostInstance||w9,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null},typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u")h=!1;else{var d=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!d.isDisabled&&d.supportsFiber)try{Hh=d.inject(h),ds=d}catch{}h=!0}return h},r.observeVisibleRects=function(h,d,_,E){if(!Tt)throw Error(s(363));h=H1(h,d);var C=ht(h,_,E).disconnect;return{disconnect:function(){C()}}},r.registerMutableSourceForHydration=function(h,d){var _=d._getVersion;_=_(d._source),h.mutableSourceEagerHydrationData==null?h.mutableSourceEagerHydrationData=[d,_]:h.mutableSourceEagerHydrationData.push(d,_)},r.runWithPriority=function(h,d){var _=ju;try{return ju=h,d()}finally{ju=_}},r.shouldSuspend=function(){return!1},r.unbatchedUpdates=function(h,d){var _=st;st&=-2,st|=8;try{return h(d)}finally{(st=_)===0&&(da(),kn())}},r.updateContainer=function(h,d,_,E){var C=d.current,U=ti(),z=ma(C);e:if(_){t:{if(X(_=_._reactInternals)!==_||_.tag!==1)throw Error(s(170));var J=_;do{switch(J.tag){case 3:J=J.stateNode.context;break t;case 1:if($r(J.type)){J=J.stateNode.__reactInternalMemoizedMergedChildContext;break t}}J=J.return}while(J!==null);throw Error(s(171))}if(_.tag===1){var ce=_.type;if($r(ce)){_=Kp(_,ce,J);break e}}_=J}else _=Io;return d.context===null?d.context=_:d.pendingContext=_,(d=ha(U,z)).payload={element:h},(E=E===void 0?null:E)!==null&&(d.callback=E),fa(C,d),ws(C,z,U),z},r}}),xne=0,Tne={__interactionsRef:null,__subscriberRef:null,unstable_clear:function(e){return e()},unstable_getCurrent:function(){return null},unstable_getThreadID:function(){return++xne},unstable_subscribe:function(){},unstable_trace:function(e,t,r){return r()},unstable_unsubscribe:function(){},unstable_wrap:function(e){return e}},Is=no(function(e,t){});/** @license React v0.20.2
 * scheduler-tracing.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */Is.__interactionsRef,Is.__subscriberRef,Is.unstable_clear,Is.unstable_getCurrent,Is.unstable_getThreadID,Is.unstable_subscribe,Is.unstable_trace,Is.unstable_unsubscribe,Is.unstable_wrap,no(function(e){e.exports=Tne}),no(function(e){});var Sne=no(function(e){e.exports=wne}),v7={name:"@inlet/react-pixi",version:"6.8.0",description:"Write PixiJS applications using React declarative style.",main:"index.js","umd:main":"umd.js",module:"module.js","jsnext:main":"module.js",author:"Patrick Brouwer <patrick@inlet.nl>",license:"MIT",scripts:{"docz:dev":"rimraf ./docs && docz dev","docz:build":"rimraf ./docs && yarn build:prod && docz build",eslint:"eslint .","build:watch":"cross-env FORMAT=umd NODE_ENV=development rollup -c --watch","build:dev":"cross-env NODE_ENV=development rollup -c","build:prod":"cross-env NODE_ENV=production rollup -c",build:"rimraf ./dist && npm run build:dev && npm run build:prod",test:"jest --silent","test:watch":"jest --silent --watch",prepack:'if-env CI=true && echo "skip build" || (npm run test && npm run eslint && npm run build)'},repository:{type:"git",url:"git+https://github.com/inlet/react-pixi.git"},files:["dist/","animated/","legacy/","LICENSE","index.d.ts","index.js","umd.js","module.js"],typings:"./index.d.ts",devDependencies:{"@babel/cli":"7.14.8","@babel/core":"7.14.8","@babel/plugin-proposal-class-properties":"7.14.5","@babel/plugin-proposal-decorators":"7.14.5","@babel/plugin-proposal-do-expressions":"7.14.5","@babel/plugin-proposal-export-default-from":"7.14.5","@babel/plugin-proposal-export-namespace-from":"7.14.5","@babel/plugin-proposal-function-bind":"7.14.5","@babel/plugin-proposal-function-sent":"7.14.5","@babel/plugin-proposal-json-strings":"7.14.5","@babel/plugin-proposal-logical-assignment-operators":"7.14.5","@babel/plugin-proposal-nullish-coalescing-operator":"7.14.5","@babel/plugin-proposal-numeric-separator":"7.14.5","@babel/plugin-proposal-optional-chaining":"7.14.5","@babel/plugin-proposal-pipeline-operator":"7.14.8","@babel/plugin-proposal-throw-expressions":"7.14.5","@babel/plugin-syntax-dynamic-import":"7.8.3","@babel/plugin-syntax-import-meta":"7.10.4","@babel/plugin-transform-runtime":"7.14.5","@babel/preset-env":"7.14.9","@babel/preset-react":"7.14.5","@babel/runtime":"7.14.8","@rollup/plugin-alias":"3.1.5","@testing-library/react":"12.0.0","@types/jest":"26.0.24","@types/react":"17.0.15","@types/react-dom":"17.0.9","@types/react-reconciler":"0.26.3","babel-core":"7.0.0-beta.3","babel-eslint":"10.1.0","babel-jest":"26.6.3","babel-plugin-module-resolver":"4.1.0",canvas:"2.8.0","cross-env":"7.0.3",docz:"2.3.1",eslint:"7.32.0","eslint-config-prettier":"8.3.0","eslint-plugin-prettier":"3.4.0","eslint-plugin-react":"7.24.0","if-env":"1.0.4",jest:"26.6.3","jest-webgl-canvas-mock":"0.2.3","lodash.isnil":"4.0.0","lodash.times":"4.3.2","performance-now":"2.1.0","pixi.js":"6.1.0",prettier:"2.3.2","prop-types":"15.7.2",react:"17.0.2","react-dom":"17.0.2","react-reconciler":"0.26.2","react-spring":"9.2.4","react-test-renderer":"17.0.2",rimraf:"3.0.2",rollup:"2.55.1","rollup-plugin-babel":"4.4.0","rollup-plugin-commonjs":"10.1.0","rollup-plugin-filesize":"9.1.1","rollup-plugin-json":"4.0.0","rollup-plugin-node-globals":"1.4.0","rollup-plugin-node-resolve":"5.2.0","rollup-plugin-replace":"2.2.0","rollup-plugin-terser":"7.0.2",typescript:"4.3.5"},peerDependencies:{"pixi.js":"^6.0.0","prop-types":"^15.7.2",react:"^17.0.1","react-dom":"^17.0.1"},jest:{collectCoverage:!1,roots:["./test"],setupFiles:["jest-webgl-canvas-mock","<rootDir>/test/bootstrap.js","<rootDir>/test/__mocks__/matchMediaMock.js"]},resolutions:{"get-pkg-repo":"4.1.1","hosted-git-info":"^2.1.4"},dependencies:{}},xx=typeof Ai<"u"?Ai:typeof self<"u"?self:typeof window<"u"?window:{};function g7(){throw new Error("setTimeout has not been defined")}function y7(){throw new Error("clearTimeout has not been defined")}var xa=g7,Ta=y7;function _7(e){if(xa===setTimeout)return setTimeout(e,0);if((xa===g7||!xa)&&setTimeout)return xa=setTimeout,setTimeout(e,0);try{return xa(e,0)}catch{try{return xa.call(null,e,0)}catch{return xa.call(this,e,0)}}}typeof xx.setTimeout=="function"&&(xa=setTimeout),typeof xx.clearTimeout=="function"&&(Ta=clearTimeout);var Zl,Bs=[],Qc=!1,_0=-1;function Ene(){Qc&&Zl&&(Qc=!1,Zl.length?Bs=Zl.concat(Bs):_0=-1,Bs.length&&b7())}function b7(){if(!Qc){var e=_7(Ene);Qc=!0;for(var t=Bs.length;t;){for(Zl=Bs,Bs=[];++_0<t;)Zl&&Zl[_0].run();_0=-1,t=Bs.length}Zl=null,Qc=!1,function(r){if(Ta===clearTimeout)return clearTimeout(r);if((Ta===y7||!Ta)&&clearTimeout)return Ta=clearTimeout,clearTimeout(r);try{Ta(r)}catch{try{return Ta.call(null,r)}catch{return Ta.call(this,r)}}}(e)}}function w7(e,t){this.fun=e,this.array=t}w7.prototype.run=function(){this.fun.apply(null,this.array)};function Fu(){}var Cne=Fu,Ine=Fu,Nne=Fu,Pne=Fu,Ane=Fu,Rne=Fu,kne=Fu,Tc=xx.performance||{},One=Tc.now||Tc.mozNow||Tc.msNow||Tc.oNow||Tc.webkitNow||function(){return new Date().getTime()},Lne=new Date,Dv={nextTick:function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];Bs.push(new w7(e,t)),Bs.length!==1||Qc||_7(b7)},title:"browser",browser:!0,env:{},argv:[],version:"",versions:{},on:Cne,addListener:Ine,once:Nne,off:Pne,removeListener:Ane,removeAllListeners:Rne,emit:kne,binding:function(e){throw new Error("process.binding is not supported")},cwd:function(){return"/"},chdir:function(e){throw new Error("process.chdir is not supported")},umask:function(){return 0},hrtime:function(e){var t=.001*One.call(Tc),r=Math.floor(t),n=Math.floor(t%1*1e9);return e&&(r-=e[0],(n-=e[1])<0&&(r--,n+=1e9)),[r,n]},platform:"browser",release:{},config:{},uptime:function(){return(new Date-Lne)/1e3}},Une=no(function(e){(function(){var t,r,n,i,o,s;typeof performance<"u"&&performance!==null&&performance.now?e.exports=function(){return performance.now()}:Dv!=null&&Dv.hrtime?(e.exports=function(){return(t()-o)/1e6},r=Dv.hrtime,i=(t=function(){var a;return 1e9*(a=r())[0]+a[1]})(),s=1e9*Dv.uptime(),o=i-s):Date.now?(e.exports=function(){return Date.now()-n},n=Date.now()):(e.exports=function(){return new Date().getTime()-n},n=new Date().getTime())}).call(vne)}),wN={};function M_(e,t){e.addChild&&(e.addChild(t),typeof t.didMount=="function"&&t.didMount.call(t,t,e))}function Tx(e,t){var r,n,i;typeof t.willUnmount=="function"&&t.willUnmount.call(t,t,e),(t==null||(r=t.config)===null||r===void 0?void 0:r.destroyChildren)!==!1&&(n=t.children)!==null&&n!==void 0&&n.length&&ta(t.children).forEach(function(o){Tx(t,o)}),e.removeChild(t),(t==null||(i=t.config)===null||i===void 0?void 0:i.destroy)!==!1&&t.destroy()}function xN(e,t,r){Dr(t!==r,"react-pixi: PixiFiber cannot insert node before itself");var n=e.children.indexOf(t)!==-1,i=e.getChildIndex(r);n?e.setChildIndex(t,i):e.addChildAt(t,i)}var TN=null,bo=Sne({getRootHostContext:function(){return wN},getChildHostContext:function(){return wN},getChildHostContextForEventComponent:function(e){return e},getPublicInstance:function(e){return e},prepareForCommit:function(){return null},resetAfterCommit:function(){},createInstance:function(e){var t,r,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null,o=pne[e];if(typeof o=="function"&&(t=o(i,n)),!t){var s=m7[e];s&&((t=s.create(n)).didMount=s.didMount?s.didMount.bind(t):void 0,t.willUnmount=s.willUnmount?s.willUnmount.bind(t):void 0,t.applyProps=s.applyProps?s.applyProps.bind(t):void 0,t.config=s.config)}return t&&((typeof((r=t)===null||r===void 0?void 0:r.applyProps)=="function"?t.applyProps:Go)(t,{},n),t.__reactpixi={root:i}),t},hideInstance:function(e){e.visible=!1},unhideInstance:function(e,t){var r=t==null||!t.hasOwnProperty("visible")||t.visible;e.visible=r},finalizeInitialChildren:function(e,t,r){return!1},prepareUpdate:function(e,t,r,n,i,o){return TN=function(s,a,l,u,c){var f=null;for(var p in l)!u.hasOwnProperty(p)&&l.hasOwnProperty(p)&&l[p]!=null&&(p==="children"||(f||(f=[]),f.push(p,null)));for(var m in u){var g=u[m],b=l!=null?l[m]:void 0;!u.hasOwnProperty(m)||g===b||g==null&&b==null||m==="children"||(f||(f=[]),f.push(m,g))}return f}(0,0,r,n)},shouldSetTextContent:function(e,t){return!1},shouldDeprioritizeSubtree:function(e,t){var r=t.alpha===void 0||t.alpha>0,n=t.renderable===void 0||t.renderable===!0,i=t.visible===void 0||t.visible===!0;return!(r&&n&&i)},createTextInstance:function(e,t,r){Dr(!1,'react-pixi: Error trying to add text node "'+e+'"',"PixiFiber does not support text nodes as children of a Pixi component. To pass a string value to your component, use a property other than children. If you wish to display some text, you can use &lt;Text text={string} /&gt; instead.")},unhideTextInstance:function(e,t){},mountEventComponent:function(){},updateEventComponent:function(){},handleEventTarget:function(){},scheduleTimeout:setTimeout,cancelTimeout:clearTimeout,noTimeout:-1,warnsIfNotActing:!1,now:Une,isPrimaryRenderer:!1,supportsMutation:!0,supportsPersistence:!1,supportsHydration:!1,appendInitialChild:function(){for(var e,t,r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];var o=M_.apply(null,n);return(e=n[0].__reactpixi)===null||e===void 0||(t=e.root)===null||t===void 0||t.emit("__REACT_PIXI_REQUEST_RENDER__",{detail:"appendInitialChild"}),o},appendChild:function(){for(var e,t,r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];var o=M_.apply(null,n);return(e=n[0].__reactpixi)===null||e===void 0||(t=e.root)===null||t===void 0||t.emit("__REACT_PIXI_REQUEST_RENDER__",{detail:"appendChild"}),o},appendChildToContainer:function(){for(var e,t,r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];var o=M_.apply(null,n);return(e=n[0].__reactpixi)===null||e===void 0||(t=e.root)===null||t===void 0||t.emit("__REACT_PIXI_REQUEST_RENDER__",{detail:"appendChildToContainer"}),o},removeChild:function(){for(var e,t,r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];var o=Tx.apply(null,n);return(e=n[0].__reactpixi)===null||e===void 0||(t=e.root)===null||t===void 0||t.emit("__REACT_PIXI_REQUEST_RENDER__",{detail:"removeChild"}),o},removeChildFromContainer:function(){for(var e,t,r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];var o=Tx.apply(null,n);return(e=n[0].__reactpixi)===null||e===void 0||(t=e.root)===null||t===void 0||t.emit("__REACT_PIXI_REQUEST_RENDER__",{detail:"removeChildFromContainer"}),o},insertBefore:xN,insertInContainerBefore:function(){for(var e,t,r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];var o=xN.apply(null,n);return(e=n[0].__reactpixi)===null||e===void 0||(t=e.root)===null||t===void 0||t.emit("__REACT_PIXI_REQUEST_RENDER__",{detail:"insertInContainerBefore"}),o},commitUpdate:function(e,t,r,n,i){var o,s,a=e&&e.applyProps;typeof a!="function"&&(a=Go),(a(e,n,i)||TN)&&((o=e.__reactpixi)===null||o===void 0||(s=o.root)===null||s===void 0||s.emit("__REACT_PIXI_REQUEST_RENDER__",{detail:"commitUpdate"}))},commitMount:function(e,t,r,n,i){},commitTextUpdate:function(e,t,r){},resetTextContent:function(e){},clearContainer:function(e){},getFundamentalComponentInstance:function(e){throw new Error("Not yet implemented.")},mountFundamentalComponent:function(e){throw new Error("Not yet implemented.")},shouldUpdateFundamentalComponent:function(e){throw new Error("Not yet implemented.")},unmountFundamentalComponent:function(e){throw new Error("Not yet implemented.")},getInstanceFromNode:function(e){throw new Error("Not yet implemented.")},isOpaqueHydratingObject:function(e){throw new Error("Not yet implemented")},makeOpaqueHydratingObject:function(e){throw new Error("Not yet implemented.")},makeClientIdInDEV:function(e){throw new Error("Not yet implemented")},beforeActiveInstanceBlur:function(e){},afterActiveInstanceBlur:function(){},preparePortalMount:function(e){}}),Fne=v7.devDependencies["react-dom"].replace(/[^0-9.]/g,""),Mne=v7.name;bo.injectIntoDevTools({bundleType:0,version:Fne,rendererPackageName:Mne,findHostInstanceByFiber:bo.findHostInstance});var _d=new Map;function Bne(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:function(){};Dr(Ri.prototype.isPrototypeOf(t),"Invalid argument `container`, expected instance of `PIXI.Container`.");var n=_d.get(t);return n||(n=bo.createContainer(t),_d.set(t,n)),bo.updateContainer(e,n,void 0,r),bo.getPublicRootInstance(n)}function Dne(e){_d.has(e)&&bo.updateContainer(null,_d.get(e),void 0,function(){_d.delete(e)})}/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var vn=typeof Symbol=="function"&&Symbol.for,Sx=vn?Symbol.for("react.element"):60103,Ex=vn?Symbol.for("react.portal"):60106,b0=vn?Symbol.for("react.fragment"):60107,w0=vn?Symbol.for("react.strict_mode"):60108,x0=vn?Symbol.for("react.profiler"):60114,T0=vn?Symbol.for("react.provider"):60109,S0=vn?Symbol.for("react.context"):60110,Cx=vn?Symbol.for("react.async_mode"):60111,Ug=vn?Symbol.for("react.concurrent_mode"):60111,E0=vn?Symbol.for("react.forward_ref"):60112,C0=vn?Symbol.for("react.suspense"):60113,Gne=vn?Symbol.for("react.suspense_list"):60120,I0=vn?Symbol.for("react.memo"):60115,N0=vn?Symbol.for("react.lazy"):60116,jne=vn?Symbol.for("react.block"):60121,$ne=vn?Symbol.for("react.fundamental"):60117,Hne=vn?Symbol.for("react.responder"):60118,zne=vn?Symbol.for("react.scope"):60119;function _i(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case Sx:switch(e=e.type){case Cx:case Ug:case b0:case x0:case w0:case C0:return e;default:switch(e=e&&e.$$typeof){case S0:case E0:case N0:case I0:case T0:return e;default:return t}}case Ex:return t}}}function SN(e){return _i(e)===Ug}var Vne={AsyncMode:Cx,ConcurrentMode:Ug,ContextConsumer:S0,ContextProvider:T0,Element:Sx,ForwardRef:E0,Fragment:b0,Lazy:N0,Memo:I0,Portal:Ex,Profiler:x0,StrictMode:w0,Suspense:C0,isAsyncMode:function(e){return SN(e)||_i(e)===Cx},isConcurrentMode:SN,isContextConsumer:function(e){return _i(e)===S0},isContextProvider:function(e){return _i(e)===T0},isElement:function(e){return typeof e=="object"&&e!==null&&e.$$typeof===Sx},isForwardRef:function(e){return _i(e)===E0},isFragment:function(e){return _i(e)===b0},isLazy:function(e){return _i(e)===N0},isMemo:function(e){return _i(e)===I0},isPortal:function(e){return _i(e)===Ex},isProfiler:function(e){return _i(e)===x0},isStrictMode:function(e){return _i(e)===w0},isSuspense:function(e){return _i(e)===C0},isValidElementType:function(e){return typeof e=="string"||typeof e=="function"||e===b0||e===Ug||e===x0||e===w0||e===C0||e===Gne||typeof e=="object"&&e!==null&&(e.$$typeof===N0||e.$$typeof===I0||e.$$typeof===T0||e.$$typeof===S0||e.$$typeof===E0||e.$$typeof===$ne||e.$$typeof===Hne||e.$$typeof===zne||e.$$typeof===jne)},typeOf:_i},Xt=no(function(e,t){});Xt.AsyncMode,Xt.ConcurrentMode,Xt.ContextConsumer,Xt.ContextProvider,Xt.Element,Xt.ForwardRef,Xt.Fragment,Xt.Lazy,Xt.Memo,Xt.Portal,Xt.Profiler,Xt.StrictMode,Xt.Suspense,Xt.isAsyncMode,Xt.isConcurrentMode,Xt.isContextConsumer,Xt.isContextProvider,Xt.isElement,Xt.isForwardRef,Xt.isFragment,Xt.isLazy,Xt.isMemo,Xt.isPortal,Xt.isProfiler,Xt.isStrictMode,Xt.isSuspense,Xt.isValidElementType,Xt.typeOf,no(function(e){e.exports=Vne});function x7(){}function T7(){}Function.call.bind(Object.prototype.hasOwnProperty),T7.resetWarningCache=x7;var sr=no(function(e){e.exports=function(){function t(i,o,s,a,l,u){if(u!=="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"){var c=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw c.name="Invariant Violation",c}}function r(){return t}t.isRequired=t;var n={array:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:r,element:t,elementType:t,instanceOf:r,node:t,objectOf:r,oneOf:r,oneOfType:r,shape:r,exact:r,checkPropTypes:T7,resetWarningCache:x7};return n.PropTypes=n,n}()}),t1=Je.createContext(null),S7=t1.Provider,E7=t1.Consumer,Xne=function(e){var t=Je.forwardRef(function(r,n){return Je.createElement(E7,null,function(i){return Je.createElement(e,e1({},r,{ref:n,app:i}))})});return t.displayName="withPIXIApp(".concat(e.displayName||e.name,")"),t},EN=function(){},C7={width:sr.number,height:sr.number,onMount:sr.func,onUnmount:sr.func,raf:sr.bool,renderOnComponentChange:sr.bool,children:sr.node,options:sr.shape({autoStart:sr.bool,width:sr.number,height:sr.number,useContextAlpha:sr.bool,backgroundAlpha:sr.number,autoDensity:sr.bool,antialias:sr.bool,preserveDrawingBuffer:sr.bool,resolution:sr.number,forceCanvas:sr.bool,backgroundColor:sr.number,clearBeforeRender:sr.bool,powerPreference:sr.string,sharedTicker:sr.bool,sharedLoader:sr.bool,resizeTo:function(e,t){var r=e[t];r&&Dr(r===window||r instanceof HTMLElement,"Invalid prop `resizeTo` of type ".concat(ul(r),", expect `window` or an `HTMLElement`."))},view:function(e,t,r){var n=e[t];n&&Dr(n instanceof HTMLCanvasElement,"Invalid prop `view` of type ".concat(ul(n),", supplied to ").concat(r,", expected `<canvas> Element`"))}})},Wne={width:800,height:600,onMount:EN,onUnmount:EN,raf:!0,renderOnComponentChange:!0},Ix=function(e){(function(a,l){if(typeof l!="function"&&l!==null)throw new TypeError("Super expression must either be null or a function");a.prototype=Object.create(l&&l.prototype,{constructor:{value:a,writable:!0,configurable:!0}}),l&&z4(a,l)})(s,Je.Component);var t,r,n,i,o=(t=s,r=h7(),function(){var a,l=_x(t);if(r){var u=_x(this).constructor;a=Reflect.construct(l,arguments,u)}else a=l.apply(this,arguments);return rne(this,a)});function s(){var a;ene(this,s);for(var l=arguments.length,u=new Array(l),c=0;c<l;c++)u[c]=arguments[c];return on(Ps(a=o.call.apply(o,[this].concat(u))),"_canvas",null),on(Ps(a),"_mediaQuery",null),on(Ps(a),"_ticker",null),on(Ps(a),"_needsUpdate",!0),on(Ps(a),"app",null),on(Ps(a),"updateSize",function(){var f=a.props,p=f.width,m=f.height,g=f.options;g!=null&&g.resolution||(a.app.renderer.resolution=window.devicePixelRatio,a.resetInteractionManager()),a.app.renderer.resize(p,m)}),on(Ps(a),"needsRenderUpdate",function(){a._needsUpdate=!0}),on(Ps(a),"renderStage",function(){var f=a.props,p=f.renderOnComponentChange;!f.raf&&p&&a._needsUpdate&&(a._needsUpdate=!1,a.app.renderer.render(a.app.stage))}),a}return n=s,(i=[{key:"componentDidMount",value:function(){var a=this.props,l=a.onMount,u=a.width,c=a.height,f=a.options,p=a.raf,m=a.renderOnComponentChange;this.app=new Mh(ui(ui({width:u,height:c,view:this._canvas},f),{},{autoDensity:(f==null?void 0:f.autoDensity)!==!1})),this.app.ticker.autoStart=!1,this.app.ticker[p?"start":"stop"](),this.app.stage.__reactpixi={root:this.app.stage},this.mountNode=bo.createContainer(this.app.stage),bo.updateContainer(this.getChildren(),this.mountNode,this),l(this.app),f!=null&&f.autoDensity&&window.matchMedia&&(f==null?void 0:f.resolution)===void 0&&(this._mediaQuery=window.matchMedia("(-webkit-min-device-pixel-ratio: 1.3), (min-resolution: 120dpi)"),this._mediaQuery.addListener(this.updateSize)),m&&!p&&(this._ticker=new an,this._ticker.autoStart=!0,this._ticker.add(this.renderStage),this.app.stage.on("__REACT_PIXI_REQUEST_RENDER__",this.needsRenderUpdate)),this.updateSize(),this.renderStage()}},{key:"componentDidUpdate",value:function(a,l,u){var c,f=this.props,p=f.width,m=f.height,g=f.raf,b=f.renderOnComponentChange,y=f.options;(y==null?void 0:y.resolution)!==void 0&&(a==null?void 0:a.options.resolution)!==(y==null?void 0:y.resolution)&&(this.app.renderer.resolution=y.resolution,this.resetInteractionManager()),a.height===m&&a.width===p&&((c=a.options)===null||c===void 0?void 0:c.resolution)===(y==null?void 0:y.resolution)||this.updateSize(),a.raf!==g&&this.app.ticker[g?"start":"stop"](),bo.updateContainer(this.getChildren(),this.mountNode,this),a.width===p&&a.height===m&&a.raf===g&&a.renderOnComponentChange===b&&a.options===y||(this._needsUpdate=!0,this.renderStage())}},{key:"resetInteractionManager",value:function(){"interaction"in this.app.renderer.plugins&&(this.app.renderer.plugins.interaction.resolution=this.app.renderer.resolution)}},{key:"getChildren",value:function(){var a=this.props.children;return Je.createElement(S7,{value:this.app},a)}},{key:"componentDidCatch",value:function(a,l){console.error("Error occurred in `Stage`."),console.error(a),console.error(l)}},{key:"componentWillUnmount",value:function(){this.props.onUnmount(this.app),this._ticker&&(this._ticker.remove(this.renderStage),this._ticker.destroy()),this.app.stage.off("__REACT_PIXI_REQUEST_RENDER__",this.needsRenderUpdate),bo.updateContainer(null,this.mountNode,this),this._mediaQuery&&(this._mediaQuery.removeListener(this.updateSize),this._mediaQuery=null),this.app.destroy()}},{key:"render",value:function(){var a,l,u=this,c=this.props.options;return c&&c.view?(Dr(c.view instanceof HTMLCanvasElement,"options.view needs to be a `HTMLCanvasElement`"),null):Je.createElement("canvas",e1({},(a=this.props,l=[].concat(ta(Object.keys(C7)),ta(Object.keys(bx))),Object.keys(a).filter(function(f){return!l.includes(f)}).reduce(function(f,p){return ui(ui({},f),{},on({},p,a[p]))},{})),{ref:function(f){return u._canvas=f}}))}}])&&tne(n.prototype,i),s}();function I7(){var e=M.exports.useContext(t1);return Dr(e instanceof Mh,"No Context found with `%s`. Make sure to wrap component with `%s`","PIXI.Application","AppProvider"),e}function Yne(e){var t=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1],r=I7();Dr(typeof e=="function","`useTick` needs a callback function."),Dr(r instanceof Mh,"No Context found with `%s`. Make sure to wrap component with `%s`","PIXI.Application","AppProvider");var n=M.exports.useRef(null);M.exports.useEffect(function(){n.current=e},[e]),M.exports.useEffect(function(){if(t){var i=function(o){return n.current.apply(r.ticker,[o,r.ticker])};return r.ticker.add(i),function(){r.ticker&&r.ticker.remove(i)}}},[t])}Ix.propTypes=C7,Ix.defaultProps=Wne;var Kne=["children","apply"],qne=function(e,t){Dr(ul(t)==="object","Second argument needs to be an indexed object with { prop: Filter }");var r=Object.keys(t),n=function(i){var o=i.children,s=i.apply,a=wa(i,Kne),l=M.exports.useRef(M.exports.useMemo(function(){return r.map(function(f){var p,m=(a==null||(p=a[f])===null||p===void 0?void 0:p.construct)||[];return f7(t[f],ta(m))})},[r])),u=M.exports.useMemo(function(){return r.reduce(function(f,p,m){return ui(ui({},f),{},on({},p,l.current[m]))},{})},[r]),c=M.exports.useMemo(function(){return Object.keys(a).filter(p7(d7(r))).reduce(function(f,p){return ui(ui({},f),{},on({},p,a[p]))},{})},[a,r]);return r.forEach(function(f,p){return Object.assign(l.current[p],a[f])}),s&&function(){for(var f=arguments.length,p=new Array(f),m=0;m<f;m++)p[m]=arguments[m];return p.every(function(g){return typeof g=="function"})}(s)&&s.call(e,u),Je.createElement(e,e1({},c,{filters:l.current}),o)};return n.displayName="FilterWrapper",n.propTypes={children:sr.node,apply:sr.func},n},Zne=Ui.BitmapText,Jne=Ui.Container,Qne=Ui.Graphics,eie=Ui.NineSlicePlane,tie=Ui.ParticleContainer,rie=Ui.Sprite,nie=Ui.AnimatedSprite,iie=Ui.Text,oie=Ui.TilingSprite,sie=Ui.SimpleMesh,aie=Ui.SimpleRope;const lie=Object.freeze(Object.defineProperty({__proto__:null,AnimatedSprite:nie,AppConsumer:E7,AppContext:t1,AppProvider:S7,BitmapText:Zne,Container:Jne,Graphics:Qne,NineSlicePlane:eie,ParticleContainer:tie,PixiComponent:mne,PixiFiber:bo,SimpleMesh:sie,SimpleRope:aie,Sprite:rie,Stage:Ix,Text:iie,TilingSprite:oie,applyDefaultProps:Go,eventHandlers:Lg,render:Bne,unmountComponentAtNode:Dne,useApp:I7,useTick:Yne,withFilters:qne,withPixiApp:Xne},Symbol.toStringTag,{value:"Module"})),uie=Lx(lie);(function(e){e.exports=uie})(Qe);function N7(e,t,r=.001){return this===t||Math.abs(e.a-t.a)<r&&Math.abs(e.b-t.b)<r&&Math.abs(e.c-t.c)<r&&Math.abs(e.d-t.d)<r&&Math.abs(e.tx-t.tx)<r&&Math.abs(e.ty-t.ty)<r}class cie{constructor(){this.textureIds=[],this.matrices=[],this.lines=[],this.count=0}clear(){for(let t=0;t<this.count;t++)this.textureIds[t]=null,this.matrices[t]=null;this.count=0}add(t,r,n,i,o,s){const{textureIds:a,matrices:l,lines:u,count:c}=this;t=t*4+o;for(let f=0;f<c;f++)if(u[f*2]===n&&u[f*2+1]===i&&a[f]===t&&N7(l[f],r))return f;return c>=s.maxStyles?-1:(a[c]=t,l[c]=r,u[c*2]=n,u[c*2+1]=i,this.count++,c)}}class CN{constructor(){this.texArray=new Rg,this.styleArray=new cie,this.shader=null,this.blend=Ze.NORMAL,this.start=0,this.size=0,this.TICK=0,this.settings=null,this.data=null}clear(){this.texArray.clear(),this.styleArray.clear(),this.settings=null,this.data=null,this.shader=null}begin(t,r){this.TICK=++xt._globalBatch,this.settings=t,this.shader=r,this.start=0,this.size=0,this.data=null,r&&r.settings&&(this.settings=r.settings)}check(t){return this.size===0?(this.shader=t,!0):this.shader===t}add(t,r,n,i,o){const{texArray:s,TICK:a,styleArray:l,settings:u}=this,{baseTexture:c}=t;if(c._batchEnabled!==a&&s.count===u.maxTextures)return-1;const f=c._batchEnabled!==a?s.count:c._batchLocation,p=l.add(f,r||rr.IDENTITY,n,i,o,u);return p>=0&&c._batchEnabled!==a&&(c._batchEnabled=a,c._batchLocation=s.count,s.elements[s.count++]=c),p}}class hie{constructor(){this.reset()}begin(t,r,n){this.reset(),this.style=t,this.start=r,this.attribStart=n,this.jointEnd=0}end(t,r){this.attribSize=r-this.attribStart,this.size=t-this.start}reset(){this.style=null,this.size=0,this.start=0,this.attribStart=0,this.attribSize=0,this.styleId=-1,this.rgba=0,this.jointEnd=0}}class r1{constructor(){this.reset()}toJSON(){return this.copyTo({})}clone(){return this.copyTo(new r1)}copyTo(t){return t.color=this.color,t.alpha=this.alpha,t.texture=this.texture,t.matrix=this.matrix,t.shader=this.shader,t.visible=this.visible,t.smooth=this.smooth,t.matrixTex=null,t}packLineScale(){return 0}reset(){this.color=16777215,this.alpha=1,this.texture=tt.WHITE,this.matrix=null,this.shader=null,this.visible=!1,this.smooth=!1,this.matrixTex=null}destroy(){this.texture=null,this.matrix=null,this.matrixTex=null}getTextureMatrix(){const t=this.texture;return this.matrix?t.frame.width===t.baseTexture.width&&t.frame.height===t.baseTexture.height?this.matrix:(this.matrixTex?this.matrixTex.copyFrom(this.matrix):this.matrixTex=this.matrix.clone(),this.matrixTex.translate(Number(t.frame.x),Number(t.frame.y)),this.matrixTex):null}}var ci;(function(e){const t="none";e.NONE=t;const r="normal";e.NORMAL=r;const n="horizontal";e.HORIZONTAL=n;const i="vertical";e.VERTICAL=i})(ci||(ci={}));class V4 extends r1{clone(){return this.copyTo(new V4)}copyTo(t){return t.color=this.color,t.alpha=this.alpha,t.texture=this.texture,t.matrix=this.matrix,t.shader=this.shader,t.visible=this.visible,t.width=this.width,t.alignment=this.alignment,t.cap=this.cap,t.join=this.join,t.miterLimit=this.miterLimit,t.scaleMode=this.scaleMode,t}packLineScale(){switch(this.scaleMode){case ci.NORMAL:return 1;case ci.HORIZONTAL:return 2;case ci.VERTICAL:return 3;default:return 0}}reset(){super.reset(),this.smooth=!0,this.color=0,this.width=0,this.alignment=.5,this.cap=Wi.BUTT,this.join=li.MITER,this.miterLimit=10,this.scaleMode=ci.NORMAL}}class Hl{constructor(){Hl.prototype.__init.call(this),Hl.prototype.__init2.call(this),Hl.prototype.__init3.call(this),Hl.prototype.__init4.call(this),Hl.prototype.__init5.call(this)}__init(){this.verts=[]}__init2(){this.joints=[]}__init3(){this.vertexSize=0}__init4(){this.indexSize=0}__init5(){this.closePointEps=1e-4}clear(){this.verts.length=0,this.joints.length=0,this.vertexSize=0,this.indexSize=0}destroy(){this.verts.length=0,this.joints.length=0}}var we;(function(e){e[e.NONE=0]="NONE";const r=1;e[e.FILL=r]="FILL";const n=4;e[e.JOINT_BEVEL=n]="JOINT_BEVEL";const i=8;e[e.JOINT_MITER=i]="JOINT_MITER";const o=12;e[e.JOINT_ROUND=o]="JOINT_ROUND";const s=16;e[e.JOINT_CAP_BUTT=s]="JOINT_CAP_BUTT";const a=18;e[e.JOINT_CAP_SQUARE=a]="JOINT_CAP_SQUARE";const l=20;e[e.JOINT_CAP_ROUND=l]="JOINT_CAP_ROUND";const u=24;e[e.FILL_EXPAND=u]="FILL_EXPAND";const c=1<<5;e[e.CAP_BUTT=c]="CAP_BUTT";const f=2<<5;e[e.CAP_SQUARE=f]="CAP_SQUARE";const p=3<<5;e[e.CAP_ROUND=p]="CAP_ROUND";const m=4<<5;e[e.CAP_BUTT2=m]="CAP_BUTT2"})(we||(we={}));class $i{constructor(){$i.prototype.__init.call(this),$i.prototype.__init2.call(this),$i.prototype.__init3.call(this)}static __initStatic(){this.vertsByJoint=[]}__init(){this.strideFloats=12}updateBufferSize(t,r,n,i){const{joints:o}=i;let s=!1,a=0,l=0;for(let u=t;u<t+r;u++){const c=o[u]&-32,f=o[u]&31;if(f===we.FILL){s=!0,a++;continue}if(f>=we.FILL_EXPAND){a+=3,l+=3;continue}const p=$i.vertsByJoint[f]+$i.vertsByJoint[c];p>=4&&(a+=p,l+=6+3*Math.max(p-6,0))}s&&(l+=n),i.vertexSize+=a,i.indexSize+=l}__init2(){this.bufferPos=0}__init3(){this.indexPos=0}beginPack(t,r,n,i,o=0,s=0){this.buildData=t,this.bufFloat=r,this.bufUint=n,this.indices=i,this.bufferPos=o,this.indexPos=s}endPack(){this.buildData=null,this.bufFloat=null,this.bufUint=null,this.indices=null}packInterleavedGeometry(t,r,n,i,o){const{bufFloat:s,bufUint:a,indices:l,buildData:u,strideFloats:c}=this,{joints:f,verts:p}=u;let m=this.bufferPos,g=this.indexPos,b=this.bufferPos/this.strideFloats,y,w,x,T,I,R,S,O,P=!1,N=0;for(let A=t;A<t+r;A++){const j=f[A],X=f[A]&-32,G=f[A]&31;if(G===we.FILL){P=!0,y=p[A*2],w=p[A*2+1],s[m]=y,s[m+1]=w,s[m+2]=y,s[m+3]=w,s[m+4]=y,s[m+5]=w,s[m+6]=y,s[m+7]=w,s[m+8]=N,s[m+9]=16*G,s[m+10]=i,a[m+11]=o,m+=c;continue}if(G>=we.FILL_EXPAND){I=p[A*2],R=p[A*2+1],y=p[A*2+2],w=p[A*2+3],x=p[A*2+4],T=p[A*2+5];const Y=A+3;for(let de=0;de<3;de++)s[m]=I,s[m+1]=R,s[m+2]=y,s[m+3]=w,s[m+4]=x,s[m+5]=T,s[m+6]=p[(Y+de)*2],s[m+7]=p[(Y+de)*2+1],s[m+8]=N,s[m+9]=16*j+de,s[m+10]=i,a[m+11]=o,m+=c;l[g]=b,l[g+1]=b+1,l[g+2]=b+2,g+=3,b+=3;continue}const ne=$i.vertsByJoint[G]+$i.vertsByJoint[X];if(ne===0)continue;y=p[A*2],w=p[A*2+1],x=p[A*2+2],T=p[A*2+3],I=p[A*2-2],R=p[A*2-1];const W=Math.sqrt((x-y)*(x-y)+(T-w)*(T-w));$i.vertsByJoint[G]===0&&(N-=W),(G&-3)!==we.JOINT_CAP_BUTT?(S=p[A*2+4],O=p[A*2+5]):(S=y,O=w);for(let Y=0;Y<ne;Y++)s[m]=I,s[m+1]=R,s[m+2]=y,s[m+3]=w,s[m+4]=x,s[m+5]=T,s[m+6]=S,s[m+7]=O,s[m+8]=N,s[m+9]=16*j+Y,s[m+10]=i,a[m+11]=o,m+=c;N+=W,l[g]=b,l[g+1]=b+1,l[g+2]=b+2,l[g+3]=b,l[g+4]=b+2,l[g+5]=b+3,g+=6;for(let Y=5;Y+1<ne;Y++)l[g]=b+4,l[g+1]=b+Y,l[g+2]=b+Y+1,g+=3;b+=ne}if(P){for(let A=0;A<n.length;A++)l[g+A]=n[A]+b;g+=n.length}this.bufferPos=m,this.indexPos=g}}$i.__initStatic();const Cr=$i.vertsByJoint;for(let e=0;e<256;e++)Cr.push(0);Cr[we.FILL]=1;for(let e=0;e<8;e++)Cr[we.FILL_EXPAND+e]=3;Cr[we.JOINT_BEVEL]=4+5;Cr[we.JOINT_BEVEL+1]=4+5;Cr[we.JOINT_BEVEL+2]=4+5;Cr[we.JOINT_BEVEL+3]=4+5;Cr[we.JOINT_ROUND]=4+5;Cr[we.JOINT_ROUND+1]=4+5;Cr[we.JOINT_ROUND+2]=4+5;Cr[we.JOINT_ROUND+3]=4+5;Cr[we.JOINT_MITER]=4+5;Cr[we.JOINT_MITER+1]=4+5;Cr[we.JOINT_MITER+2]=4;Cr[we.JOINT_MITER+3]=4;Cr[we.JOINT_CAP_BUTT]=4;Cr[we.JOINT_CAP_BUTT+1]=4;Cr[we.JOINT_CAP_SQUARE]=4;Cr[we.JOINT_CAP_SQUARE+1]=4;Cr[we.JOINT_CAP_ROUND]=4+5;Cr[we.JOINT_CAP_ROUND+1]=4+5;Cr[we.CAP_ROUND]=4;class Fg{constructor(t,r=null,n=null,i=null){this.shape=t,this.lineStyle=n,this.fillStyle=r,this.matrix=i,this.type=t.type,this.points=[],this.holes=[],this.triangles=[],this.closeStroke=!1,this.clearBuild()}clearPath(){this.points.length=0,this.closeStroke=!0}clearBuild(){this.triangles.length=0,this.fillStart=0,this.fillLen=0,this.strokeStart=0,this.strokeLen=0,this.fillAA=!1}clone(){return new Fg(this.shape,this.fillStyle,this.lineStyle,this.matrix)}capType(){let t;switch(this.lineStyle.cap){case Wi.SQUARE:t=we.CAP_SQUARE;break;case Wi.ROUND:t=we.CAP_ROUND;break;default:t=we.CAP_BUTT;break}return t}goodJointType(){let t;switch(this.lineStyle.join){case li.BEVEL:t=we.JOINT_BEVEL;break;case li.ROUND:t=we.JOINT_ROUND;break;default:t=we.JOINT_MITER+3;break}return t}jointType(){let t;switch(this.lineStyle.join){case li.BEVEL:t=we.JOINT_BEVEL;break;case li.ROUND:t=we.JOINT_ROUND;break;default:t=we.JOINT_MITER;break}return t}destroy(){this.shape=null,this.holes.length=0,this.holes=null,this.points.length=0,this.points=null,this.lineStyle=null,this.fillStyle=null,this.triangles=null}}class IN{path(t,r){const n=t.shape,i=t.points,o=n.x,s=n.y;let a,l;if(t.type===gt.CIRC)a=n.radius,l=n.radius;else{const f=t.shape;a=f.width,l=f.height}if(a<=0||l<=0)return;let u=Math.floor(30*Math.sqrt(n.radius))||Math.floor(15*Math.sqrt(a+l));u/=2.3,u<3?u=3:u=Math.ceil(u);const c=Math.PI*2/u;for(let f=0;f<u;f++)i.push(o+Math.sin(-c*f)*a,s+Math.cos(-c*f)*l)}fill(t,r){const{verts:n,joints:i}=r,{points:o,triangles:s}=t;let a=1;const l=0,u=t.shape,c=t.matrix,f=u.x,p=u.y,m=c?c.a*f+c.c*p+c.tx:f,g=c?c.b*f+c.d*p+c.ty:p;if(!t.fillAA){n.push(m,g),i.push(we.FILL);for(let y=0;y<o.length;y+=2)n.push(o[y],o[y+1]),i.push(we.FILL),y>0&&s.push(a++,l,a);s.push(a,l,1);return}const b=u.radius;for(let y=0;y<o.length;y+=2){const w=y,x=y+2<o.length?y+2:0;n.push(m),n.push(g),n.push(o[w]),n.push(o[w+1]),n.push(o[x]),n.push(o[x+1]),n.push(0),n.push(0),n.push((o[w]-m)/b),n.push((o[w+1]-g)/b),n.push((o[x]-m)/b),n.push((o[x+1]-g)/b),i.push(we.FILL_EXPAND+2),i.push(we.NONE),i.push(we.NONE),i.push(we.NONE),i.push(we.NONE),i.push(we.NONE)}}line(t,r){const{verts:n,joints:i}=r,{points:o}=t,s=t.goodJointType(),a=o.length;n.push(o[a-2],o[a-1]),i.push(we.NONE);for(let l=0;l<a;l+=2)n.push(o[l],o[l+1]),i.push(s);n.push(o[0],o[1]),i.push(we.NONE),n.push(o[2],o[3]),i.push(we.NONE)}}class fie{path(t,r){const n=t.shape,i=n.x,o=n.y,s=n.width,a=n.height,l=t.points;l.length=0,l.push(i,o,i+s,o,i+s,o+a,i,o+a)}line(t,r){const{verts:n,joints:i}=r,{points:o}=t,s=t.goodJointType(),a=o.length;n.push(o[a-2],o[a-1]),i.push(we.NONE);for(let l=0;l<a;l+=2)n.push(o[l],o[l+1]),i.push(s);n.push(o[0],o[1]),i.push(we.NONE),n.push(o[2],o[3]),i.push(we.NONE)}fill(t,r){const{verts:n,joints:i}=r,{points:o,triangles:s}=t;s.length=0,n.push(o[0],o[1],o[2],o[3],o[4],o[5],o[6],o[7]),i.push(we.FILL,we.FILL,we.FILL,we.FILL),s.push(0,1,2,0,2,3)}}function mc(e,t,r){const n=t-e;return e+n*r}function Gv(e,t,r,n,i,o,s=[],a=.001){const u=s;let c=0,f=0,p=0,m=0,g=0,b=0;for(let y=0,w=0;y<=20;++y)w=y/20,c=mc(e,r,w),f=mc(t,n,w),p=mc(r,i,w),m=mc(n,o,w),g=mc(c,p,w),b=mc(f,m,w),!(y===0&&Math.abs(g-u[u.length-2])<a&&Math.abs(b-u[u.length-1])<a)&&u.push(g,b);return u}class die{path(t,r){const n=t.shape,{points:i}=t,o=n.x,s=n.y,a=n.width,l=n.height,u=Math.max(0,Math.min(n.radius,Math.min(a,l)/2));if(i.length=0,!u)i.push(o,s,o+a,s,o+a,s+l,o,s+l);else{const c=r.closePointEps;Gv(o,s+u,o,s,o+u,s,i,c),Gv(o+a-u,s,o+a,s,o+a,s+u,i,c),Gv(o+a,s+l-u,o+a,s+l,o+a-u,s+l,i,c),Gv(o+u,s+l,o,s+l,o,s+l-u,i,c),i.length>=4&&Math.abs(i[0]-i[i.length-2])<c&&Math.abs(i[1]-i[i.length-1])<c&&(i.pop(),i.pop())}}line(t,r){const{verts:n,joints:i}=r,{points:o}=t,s=o.length===8?t.goodJointType():we.JOINT_MITER+3,a=o.length;n.push(o[a-2],o[a-1]),i.push(we.NONE);for(let l=0;l<a;l+=2)n.push(o[l],o[l+1]),i.push(s);n.push(o[0],o[1]),i.push(we.NONE),n.push(o[2],o[3]),i.push(we.NONE)}fill(t,r){const{verts:n,joints:i}=r,{points:o}=t;t.triangles=Lh.exports(o,null,2);for(let s=0,a=o.length;s<a;s++)n.push(o[s],o[++s]),i.push(we.FILL)}}const pie=[];class mie{path(t,r){const n=t.shape,i=t.points=n.points.slice(),o=r.closePointEps,s=o*o;if(i.length===0)return;const a=new Gt(i[0],i[1]),l=new Gt(i[i.length-2],i[i.length-1]),u=t.closeStroke=n.closeStroke;let c=i.length,f=2;for(let p=2;p<c;p+=2){const m=i[p-2],g=i[p-1],b=i[p],y=i[p+1];let w=!0;Math.abs(m-b)<o&&Math.abs(g-y)<o&&(w=!1),w&&(i[f]=i[p],i[f+1]=i[p+1],f+=2)}i.length=c=f,f=2;for(let p=2;p+2<c;p+=2){let m=i[p-2],g=i[p-1];const b=i[p],y=i[p+1];let w=i[p+2],x=i[p+3];m-=b,g-=y,w-=b,x-=y;let T=!0;Math.abs(w*g-x*m)<s&&m*w+g*x<-s&&(T=!1),T&&(i[f]=i[p],i[f+1]=i[p+1],f+=2)}i[f]=i[c-2],i[f+1]=i[c-1],f+=2,i.length=c=f,!(c<=2)&&u&&Math.abs(a.x-l.x)<o&&Math.abs(a.y-l.y)<o&&(i.pop(),i.pop())}line(t,r){const{closeStroke:n,points:i}=t,o=r.closePointEps,s=i.length;if(s<=2)return;const{verts:a,joints:l}=r,u=t.jointType(),c=t.capType();let f=0,p,m;n?(p=i[s-2],m=i[s-1],l.push(we.NONE)):(p=i[2],m=i[3],c===we.CAP_ROUND?(a.push(i[0],i[1]),l.push(we.NONE),l.push(we.CAP_ROUND),f=0):(f=c,l.push(we.NONE))),a.push(p,m);for(let g=0;g<s;g+=2){const b=i[g],y=i[g+1];let w,x;g+2<s?(w=i[g+2],x=i[g+3]):(w=i[0],x=i[1]);const T=w-b,I=x-y;let R,S,O=u;g+2>=s?(R=i[2],S=i[3],n||(O=we.NONE)):g+4>=s?(R=i[0],S=i[1],n||(c===we.CAP_ROUND&&(O=we.JOINT_CAP_ROUND),c===we.CAP_BUTT&&(O=we.JOINT_CAP_BUTT),c===we.CAP_SQUARE&&(O=we.JOINT_CAP_SQUARE))):(R=i[g+4],S=i[g+5]);const P=b-p,N=y-m;if(u>=we.JOINT_BEVEL&&u<=we.JOINT_MITER){const A=R-w,j=S-x;if(O>=we.JOINT_BEVEL&&O<=we.JOINT_MITER+3){const X=A*I-j*T;if(Math.abs(X)<o)switch(u&-4){case we.JOINT_ROUND:O=we.JOINT_CAP_ROUND;break;default:O=we.JOINT_CAP_BUTT;break}}if(u===we.JOINT_MITER){let X=0;P*T+N*I>-o&&X++,O===we.JOINT_MITER&&A*T+j*I>-o&&(X+=2),O+=X}}f===0&&Math.abs(P*I-N*T)<o&&(f=we.CAP_BUTT2),O+=f,f=0,a.push(b,y),l.push(O),p=b,m=y}n?(a.push(i[0],i[1]),l.push(we.NONE),a.push(i[2],i[3]),l.push(we.NONE)):(a.push(i[s-4],i[s-3]),l.push(we.NONE))}fill(t,r){let n=t.points;const i=t.holes,o=r.closePointEps,{verts:s,joints:a}=r;if(n.length<6)return;const l=[];let u=n.length;for(let m=0;m<i.length;m++){const g=i[m];l.push(n.length/2),n=n.concat(g.points)}const c=pie;c.length<n.length&&(c.length=n.length);let f=0;for(let m=0;m<=l.length;m++){let g=u/2;m>0&&(m<l.length?g=l[m]:g=n.length>>1),c[f*2]=g-1,c[(g-1)*2+1]=0;for(let b=f;b+1<g;b++)c[b*2+1]=b+1,c[b*2+2]=b;f=g}if(t.triangles=Lh.exports(n,l,2),!t.triangles)return;if(!t.fillAA){for(let m=0;m<n.length;m+=2)s.push(n[m],n[m+1]),a.push(we.FILL);return}const{triangles:p}=t;u=n.length;for(let m=0;m<p.length;m+=3){let g=0;for(let b=0;b<3;b++){const y=p[m+b],w=p[m+(b+1)%3];(c[y*2]===w||c[y*2+1]===w)&&(g|=1<<b)}a.push(we.FILL_EXPAND+g),a.push(we.NONE),a.push(we.NONE),a.push(we.NONE),a.push(we.NONE),a.push(we.NONE)}for(let m=0;m<u/2;m++){const g=c[m*2],b=c[m*2+1];let y=n[b*2+1]-n[m*2+1],w=-(n[b*2]-n[m*2]),x=n[m*2+1]-n[g*2+1],T=-(n[m*2]-n[g*2]);const I=Math.sqrt(y*y+w*w);y/=I,w/=I;const R=Math.sqrt(x*x+T*T);x/=R,T/=R;let S=y+x,O=w+T;const P=S*y+O*w;Math.abs(P)<o?(S=y,O=w):(S/=P,O/=P),c[m*2]=S,c[m*2+1]=O}for(let m=0;m<p.length;m+=3){const g=p[m],b=p[m+1],y=p[m+2],w=n[y*2+1]-n[b*2+1],x=-(n[y*2]-n[b*2]),T=n[b*2+1]-n[g*2+1],I=-(n[b*2]-n[g*2]);let R=1;w*I-T*x>0&&(R=2);for(let S=0;S<3;S++){const O=p[m+S*R%3];s.push(n[O*2],n[O*2+1])}for(let S=0;S<3;S++){const O=p[m+S*R%3];s.push(c[O*2],c[O*2+1])}}}}const jv={[gt.POLY]:new mie,[gt.CIRC]:new IN,[gt.ELIP]:new IN,[gt.RECT]:new fie,[gt.RREC]:new die},NN=[],$v=[],vc=new Gt,vie=new yu;class n1 extends Uh{static __initStatic(){this.BATCHABLE_SIZE=100}__init(){this.indicesUint16=null}get points(){return this.buildData.verts}get closePointEps(){return this.buildData.closePointEps}initAttributes(t){this._buffer=new Rr(null,t,!1),this._bufferFloats=new Float32Array,this._bufferUint=new Uint32Array,this._indexBuffer=new Rr(null,t,!0),this.addAttribute("aPrev",this._buffer,2,!1,$e.FLOAT).addAttribute("aPoint1",this._buffer,2,!1,$e.FLOAT).addAttribute("aPoint2",this._buffer,2,!1,$e.FLOAT).addAttribute("aNext",this._buffer,2,!1,$e.FLOAT).addAttribute("aTravel",this._buffer,1,!1,$e.FLOAT).addAttribute("aVertexJoint",this._buffer,1,!1,$e.FLOAT).addAttribute("aStyleId",this._buffer,1,!1,$e.FLOAT).addAttribute("aColor",this._buffer,4,!0,$e.UNSIGNED_BYTE).addIndex(this._indexBuffer),this.strideFloats=12}constructor(){super(),n1.prototype.__init.call(this),this.initAttributes(!1),this.buildData=new Hl,this.graphicsData=[],this.dirty=0,this.batchDirty=-1,this.cacheDirty=-1,this.clearDirty=0,this.drawCalls=[],this.batches=[],this.shapeBuildIndex=0,this.shapeBatchIndex=0,this._bounds=new yu,this.boundsDirty=-1,this.boundsPadding=0,this.batchable=!1,this.indicesUint16=null,this.packer=null,this.packSize=0,this.pack32index=null}checkInstancing(t,r){this.packer||(this.packer=new $i,this.pack32index=r)}get bounds(){return this.boundsDirty!==this.dirty&&(this.boundsDirty=this.dirty,this.calculateBounds()),this._bounds}invalidate(){this.boundsDirty=-1,this.dirty++,this.batchDirty++,this.shapeBuildIndex=0,this.shapeBatchIndex=0,this.packSize=0,this.buildData.clear();for(let t=0;t<this.drawCalls.length;t++)this.drawCalls[t].clear(),$v.push(this.drawCalls[t]);this.drawCalls.length=0;for(let t=0;t<this.batches.length;t++){const r=this.batches[t];r.reset(),NN.push(r)}this.batches.length=0}clear(){return this.graphicsData.length>0&&(this.invalidate(),this.clearDirty++,this.graphicsData.length=0),this}drawShape(t,r=null,n=null,i=null){const o=new Fg(t,r,n,i);return this.graphicsData.push(o),this.dirty++,this}drawHole(t,r=null){if(!this.graphicsData.length)return null;const n=new Fg(t,null,null,r),i=this.graphicsData[this.graphicsData.length-1];return n.lineStyle=i.lineStyle,i.holes.push(n),this.dirty++,this}destroy(){super.destroy();for(let t=0;t<this.graphicsData.length;++t)this.graphicsData[t].destroy();this.buildData.destroy(),this.buildData=null,this.indexBuffer.destroy(),this.indexBuffer=null,this.graphicsData.length=0,this.graphicsData=null,this.drawCalls.length=0,this.drawCalls=null,this.batches.length=0,this.batches=null,this._bounds=null}containsPoint(t){const r=this.graphicsData;for(let n=0;n<r.length;++n){const i=r[n];if(!!i.fillStyle.visible&&i.shape&&(i.matrix?i.matrix.applyInverse(t,vc):vc.copyFrom(t),i.shape.contains(vc.x,vc.y))){let o=!1;if(i.holes){for(let s=0;s<i.holes.length;s++)if(i.holes[s].shape.contains(vc.x,vc.y)){o=!0;break}}if(!o)return!0}}return!1}updatePoints(){}updateBufferSize(){this._buffer.update(new Float32Array)}updateBuild(){const{graphicsData:t,buildData:r}=this,n=t.length;for(let i=this.shapeBuildIndex;i<n;i++){const o=t[i];o.strokeStart=0,o.strokeLen=0,o.fillStart=0,o.fillLen=0;const{fillStyle:s,lineStyle:a,holes:l}=o;if(!s.visible&&!a.visible)continue;const u=jv[o.type];if(o.clearPath(),u.path(o,r),o.matrix&&this.transformPoints(o.points,o.matrix),o.clearBuild(),!(o.points.length<=2)&&(s.visible&&(o.fillAA=o.fillStyle.smooth&&!(o.lineStyle.visible&&o.lineStyle.alpha>=.99&&o.lineStyle.width>=.99),o.fillStart=r.joints.length,l.length?(this.processHoles(l),jv[gt.POLY].fill(o,r)):o.fillAA&&(o.type===gt.RECT||o.type===gt.RREC)?jv[gt.POLY].fill(o,r):u.fill(o,r),o.fillLen=r.joints.length-o.fillStart),a.visible)){o.strokeStart=r.joints.length,u.line(o,r);for(let c=0;c<l.length;c++)u.line(l[c],r);o.strokeLen=r.joints.length-o.strokeStart}}this.shapeBuildIndex=n}updateBatches(t){if(!this.graphicsData.length){this.batchable=!0;return}if(this.updateBuild(),!this.validateBatching())return;const{buildData:r,graphicsData:n}=this,i=n.length;this.cacheDirty=this.dirty;let o=null,s=null;this.batches.length>0&&(o=this.batches[this.batches.length-1],s=o.style);for(let a=this.shapeBatchIndex;a<i;a++){const l=n[a],u=l.fillStyle,c=l.lineStyle;if(l.matrix&&this.transformPoints(l.points,l.matrix),!(!u.visible&&!c.visible))for(let f=0;f<2;f++){const p=f===0?u:c;if(!p.visible)continue;const m=p.texture.baseTexture,g=r.vertexSize,b=r.indexSize;m.wrapMode=ts.REPEAT,f===0?this.packer.updateBufferSize(l.fillStart,l.fillLen,l.triangles.length,r):this.packer.updateBufferSize(l.strokeStart,l.strokeLen,l.triangles.length,r),r.vertexSize!==g&&(o&&!this._compareStyles(s,p)&&(o.end(b,g),o=null),o||(o=NN.pop()||new hie,o.begin(p,b,g),this.batches.push(o),s=p),f===0?o.jointEnd=l.fillStart+l.fillLen:o.jointEnd=l.strokeStart+l.strokeLen)}}if(this.shapeBatchIndex=i,o&&o.end(r.indexSize,r.vertexSize),this.batches.length===0){this.batchable=!0;return}this.batchable=this.isBatchable(),this.batchable?this.packBatches():(this.buildDrawCalls(t),this.updatePack())}updatePack(){const{vertexSize:t,indexSize:r}=this.buildData;if(this.packSize===t)return;const{strideFloats:n,packer:i,buildData:o,batches:s}=this,a=this._buffer,l=this._indexBuffer,u=t*n;if(a.data.length!==u){const f=new ArrayBuffer(u*4);this._bufferFloats=new Float32Array(f),this._bufferUint=new Uint32Array(f),a.data=this._bufferFloats}l.data.length!==r&&(t>65535&&this.pack32index?l.data=new Uint32Array(r):l.data=new Uint16Array(r)),i.beginPack(o,this._bufferFloats,this._bufferUint,l.data);let c=0;for(let f=0;f<this.graphicsData.length;f++){const p=this.graphicsData[f];if(p.fillLen){for(;s[c].jointEnd<=p.fillStart;)c++;i.packInterleavedGeometry(p.fillStart,p.fillLen,p.triangles,s[c].styleId,s[c].rgba)}if(p.strokeLen){for(;s[c].jointEnd<=p.strokeStart;)c++;i.packInterleavedGeometry(p.strokeStart,p.strokeLen,p.triangles,s[c].styleId,s[c].rgba)}}a.update(),l.update(),this.packSize=t}_compareStyles(t,r){if(!t||!r||t.texture.baseTexture!==r.texture.baseTexture||t.color+t.alpha!==r.color+r.alpha||t.width!==r.width||t.scaleMode!==r.scaleMode||t.alignment!==r.alignment)return!1;const n=t.matrix||rr.IDENTITY,i=r.matrix||rr.IDENTITY;return N7(n,i)}validateBatching(){if(this.dirty===this.cacheDirty||!this.graphicsData.length)return!1;for(let t=0,r=this.graphicsData.length;t<r;t++){const n=this.graphicsData[t],i=n.fillStyle,o=n.lineStyle;if(i&&!i.texture.baseTexture.valid||o&&!o.texture.baseTexture.valid)return!1}return!0}packBatches(){this.batchDirty++;const t=this.batches;for(let r=0,n=t.length;r<n;r++){const i=t[r];for(let o=0;o<i.size;o++){const s=i.start+o;this.indicesUint16[s]=this.indicesUint16[s]-i.attribStart}}}isBatchable(){return!1}buildDrawCalls(t){for(let i=0;i<this.drawCalls.length;i++)this.drawCalls[i].clear(),$v.push(this.drawCalls[i]);this.drawCalls.length=0;let r=$v.pop()||new CN;r.begin(t,null);let n=0;this.drawCalls.push(r);for(let i=0;i<this.batches.length;i++){const o=this.batches[i],s=o.style;if(o.attribSize===0)continue;let a=-1;const l=s.getTextureMatrix();r.check(s.shader)&&(a=r.add(s.texture,l,s.width,s.alignment||0,s.packLineScale())),a<0&&(r=$v.pop()||new CN,this.drawCalls.push(r),r.begin(t,s.shader),r.start=n,a=r.add(s.texture,l,s.width,s.alignment||0,s.packLineScale())),r.size+=o.size,n+=o.size;const{color:u,alpha:c}=s,f=(u>>16)+(u&65280)+((u&255)<<16);o.rgba=Zy(f,c),o.styleId=a}}processHoles(t){for(let r=0;r<t.length;r++){const n=t[r];jv[n.type].path(n,this.buildData),n.matrix&&this.transformPoints(n.points,n.matrix)}}calculateBounds(){const t=this._bounds,r=vie;let n=rr.IDENTITY;this._bounds.clear(),r.clear();for(let i=0;i<this.graphicsData.length;i++){const o=this.graphicsData[i],s=o.shape,a=o.type,l=o.lineStyle,u=o.matrix||rr.IDENTITY;let c=0;if(l&&l.visible){const f=l.alignment;c=l.width,a===gt.POLY?c=c*(.5+Math.abs(.5-f)):c=c*Math.max(0,f)}if(n!==u&&(r.isEmpty()||(t.addBoundsMatrix(r,n),r.clear()),n=u),a===gt.RECT||a===gt.RREC){const f=s;r.addFramePad(f.x,f.y,f.x+f.width,f.y+f.height,c,c)}else if(a===gt.CIRC){const f=s;r.addFramePad(f.x,f.y,f.x,f.y,f.radius+c,f.radius+c)}else if(a===gt.ELIP){const f=s;r.addFramePad(f.x,f.y,f.x,f.y,f.width+c,f.height+c)}else{const f=s;t.addVerticesMatrix(n,f.points,0,f.points.length,c,c)}}r.isEmpty()||t.addBoundsMatrix(r,n),t.pad(this.boundsPadding,this.boundsPadding)}transformPoints(t,r){for(let n=0;n<t.length/2;n++){const i=t[n*2],o=t[n*2+1];t[n*2]=r.a*i+r.c*o+r.tx,t[n*2+1]=r.b*i+r.d*o+r.ty}}}n1.__initStatic();const gie=`#version 100
precision highp float;
const float FILL = 1.0;
const float BEVEL = 4.0;
const float MITER = 8.0;
const float ROUND = 12.0;
const float JOINT_CAP_BUTT = 16.0;
const float JOINT_CAP_SQUARE = 18.0;
const float JOINT_CAP_ROUND = 20.0;

const float FILL_EXPAND = 24.0;

const float CAP_BUTT = 1.0;
const float CAP_SQUARE = 2.0;
const float CAP_ROUND = 3.0;
const float CAP_BUTT2 = 4.0;

const float MITER_LIMIT = 10.0;

// === geom ===
attribute vec2 aPrev;
attribute vec2 aPoint1;
attribute vec2 aPoint2;
attribute vec2 aNext;
attribute float aVertexJoint;
attribute float aTravel;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform vec4 tint;

varying vec4 vLine1;
varying vec4 vLine2;
varying vec4 vArc;
varying float vType;

uniform float resolution;
uniform float expand;

// === style ===
attribute float aStyleId;
attribute vec4 aColor;

varying float vTextureId;
varying vec4 vColor;
varying vec2 vTextureCoord;
varying float vTravel;

uniform vec2 styleLine[%MAX_STYLES%];
uniform vec3 styleMatrix[2 * %MAX_STYLES%];
uniform float styleTextureId[%MAX_STYLES%];
uniform vec2 samplerSize[%MAX_TEXTURES%];

vec2 doBisect(vec2 norm, float len, vec2 norm2, float len2,
    float dy, float inner) {
    vec2 bisect = (norm + norm2) / 2.0;
    bisect /= dot(norm, bisect);
    vec2 shift = dy * bisect;
    if (inner > 0.5) {
        if (len < len2) {
            if (abs(dy * (bisect.x * norm.y - bisect.y * norm.x)) > len) {
                return dy * norm;
            }
        } else {
            if (abs(dy * (bisect.x * norm2.y - bisect.y * norm2.x)) > len2) {
                return dy * norm;
            }
        }
    }
    return dy * bisect;
}

void main(void){
    vec2 pointA = (translationMatrix * vec3(aPoint1, 1.0)).xy;
    vec2 pointB = (translationMatrix * vec3(aPoint2, 1.0)).xy;

    vec2 xBasis = pointB - pointA;
    float len = length(xBasis);
    vec2 forward = xBasis / len;
    vec2 norm = vec2(forward.y, -forward.x);

    float type = floor(aVertexJoint / 16.0);
    float vertexNum = aVertexJoint - type * 16.0;
    float dx = 0.0, dy = 1.0;

    float capType = floor(type / 32.0);
    type -= capType * 32.0;

    int styleId = int(aStyleId + 0.5);
    float lineWidth = styleLine[styleId].x;
    vTextureId = floor(styleTextureId[styleId] / 4.0);
    float scaleMode = styleTextureId[styleId] - vTextureId * 4.0;
    float avgScale = 1.0;
    if (scaleMode > 2.5) {
        avgScale = length(translationMatrix * vec3(1.0, 0.0, 0.0));
    } else if (scaleMode > 1.5) {
        avgScale = length(translationMatrix * vec3(0.0, 1.0, 0.0));
    } else if (scaleMode > 0.5) {
        vec2 avgDiag = (translationMatrix * vec3(1.0, 1.0, 0.0)).xy;
        avgScale = sqrt(dot(avgDiag, avgDiag) * 0.5);
    }
    lineWidth *= 0.5 * avgScale;
    float lineAlignment = 2.0 * styleLine[styleId].y - 1.0;
    vTextureCoord = vec2(0.0);

    vec2 pos;

    if (capType == CAP_ROUND) {
        vertexNum += 4.0;
        type = JOINT_CAP_ROUND;
        capType = 0.0;
        lineAlignment = -lineAlignment;
    }

    vLine1 = vec4(0.0, 10.0, 1.0, 0.0);
    vLine2 = vec4(0.0, 10.0, 1.0, 0.0);
    vArc = vec4(0.0);
    if (type == FILL) {
        pos = pointA;
        vType = 0.0;
        vLine2 = vec4(-2.0, -2.0, -2.0, 0.0);
        vec2 vTexturePixel;
        vTexturePixel.x = dot(vec3(aPoint1, 1.0), styleMatrix[styleId * 2]);
        vTexturePixel.y = dot(vec3(aPoint1, 1.0), styleMatrix[styleId * 2 + 1]);
        vTextureCoord = vTexturePixel / samplerSize[int(vTextureId)];
    } else if (type >= FILL_EXPAND && type < FILL_EXPAND + 7.5) {
        // expand vertices
        float flags = type - FILL_EXPAND;
        float flag3 = floor(flags / 4.0);
        float flag2 = floor((flags - flag3 * 4.0) / 2.0);
        float flag1 = flags - flag3 * 4.0 - flag2 * 2.0;

        vec2 prev = (translationMatrix * vec3(aPrev, 1.0)).xy;

        vec2 n1 = normalize(vec2(pointA.y - prev.y, -(pointA.x - prev.x)));
        vec2 n2 = normalize(vec2(pointB.y - pointA.y, -(pointB.x - pointA.x)));
        vec2 n3 = normalize(vec2(prev.y - pointB.y, -(prev.x - pointB.x)));

        if (n1.x * n2.y - n1.y * n2.x < 0.0) {
            n1 = -n1;
            n2 = -n2;
            n3 = -n3;
        }

        float len2 = length(aNext);
        vec2 bisect = (translationMatrix * vec3(aNext, 0.0)).xy;

        if (vertexNum < 0.5) {
            pos = prev;

            if (flag1 < 0.5 && flag3 < 0.5) {
                bisect = vec2(0.0);
            } else if (flag1 < 0.5) {
                bisect = vec2(n1.y, -n1.x) + n1 / 8.0;
            } else if (flag3 < 0.5) {
                bisect = vec2(-n3.y, n3.x) + n3 / 8.0;
            }
        } else if (vertexNum < 1.5) {
            pos = pointA;

            if (flag1 < 0.5 && flag2 < 0.5) {
                bisect = vec2(0.0);
            } else if (flag1 < 0.5) {
                bisect = vec2(-n1.y, n1.x) + n1 / 8.0;
            } else if (flag2 < 0.5) {
                bisect = vec2(n2.y, -n2.x) + n2 / 8.0;
            }
        } else {
            pos = pointB;

            if (flag2 < 0.5 && flag3 < 0.5) {
                bisect = vec2(0.0);
            } else if (flag2 < 0.5) {
                bisect = vec2(-n2.y, n2.x) + n2 / 8.0;
            } else if (flag3 < 0.5) {
                bisect = vec2(n3.y, -n3.x) + n3 / 8.0;
            }
        }

        if (length(bisect) > 0.0) {
            bisect = normalize(bisect) * len2;
        }

        pos += bisect * expand;

        vLine1 = vec4(16.0, 16.0, 16.0, -1.0);
        if (flag1 > 0.5) {
            vLine1.x = -dot(pos - prev, n1);
        }
        if (flag2 > 0.5) {
            vLine1.y = -dot(pos - pointA, n2);
        }
        if (flag3 > 0.5) {
            vLine1.z = -dot(pos - pointB, n3);
        }
        vLine1.xyz *= resolution;
        vType = 2.0;
    } else if (type >= BEVEL) {
        float dy = lineWidth + expand;
        float shift = lineWidth * lineAlignment;
        float inner = 0.0;
        if (vertexNum >= 1.5) {
            dy = -dy;
            inner = 1.0;
        }

        vec2 base, next, xBasis2, bisect;
        float flag = 0.0;
        float side2 = 1.0;
        if (vertexNum < 0.5 || vertexNum > 2.5 && vertexNum < 3.5) {
            next = (translationMatrix * vec3(aPrev, 1.0)).xy;
            base = pointA;
            flag = type - floor(type / 2.0) * 2.0;
            side2 = -1.0;
        } else {
            next = (translationMatrix * vec3(aNext, 1.0)).xy;
            base = pointB;
            if (type >= MITER && type < MITER + 3.5) {
                flag = step(MITER + 1.5, type);
                // check miter limit here?
            }
        }
        xBasis2 = next - base;
        float len2 = length(xBasis2);
        vec2 norm2 = vec2(xBasis2.y, -xBasis2.x) / len2;
        float D = norm.x * norm2.y - norm.y * norm2.x;
        if (D < 0.0) {
            inner = 1.0 - inner;
        }

        norm2 *= side2;

        float collinear = step(0.0, dot(norm, norm2));

        vType = 0.0;
        float dy2 = -1000.0;

        if (abs(D) < 0.01 && collinear < 0.5) {
            if (type >= ROUND && type < ROUND + 1.5) {
                type = JOINT_CAP_ROUND;
            }
            //TODO: BUTT here too
        }

        vLine1 = vec4(0.0, lineWidth, max(abs(norm.x), abs(norm.y)), min(abs(norm.x), abs(norm.y)));
        vLine2 = vec4(0.0, lineWidth, max(abs(norm2.x), abs(norm2.y)), min(abs(norm2.x), abs(norm2.y)));

        if (vertexNum < 3.5) {
            if (abs(D) < 0.01 && collinear < 0.5) {
                pos = (shift + dy) * norm;
            } else {
                if (flag < 0.5 && inner < 0.5) {
                    pos = (shift + dy) * norm;
                } else {
                    pos = doBisect(norm, len, norm2, len2, shift + dy, inner);
                }
            }
            vLine2.y = -1000.0;
            if (capType >= CAP_BUTT && capType < CAP_ROUND) {
                float extra = step(CAP_SQUARE, capType) * lineWidth;
                vec2 back = -forward;
                if (vertexNum < 0.5 || vertexNum > 2.5) {
                    pos += back * (expand + extra);
                    dy2 = expand;
                } else {
                    dy2 = dot(pos + base - pointA, back) - extra;
                }
            }
            if (type >= JOINT_CAP_BUTT && type < JOINT_CAP_SQUARE + 0.5) {
                float extra = step(JOINT_CAP_SQUARE, type) * lineWidth;
                if (vertexNum < 0.5 || vertexNum > 2.5) {
                    vLine2.y = dot(pos + base - pointB, forward) - extra;
                } else {
                    pos += forward * (expand + extra);
                    vLine2.y = expand;
                    if (capType >= CAP_BUTT) {
                        dy2 -= expand + extra;
                    }
                }
            }
        } else if (type >= JOINT_CAP_ROUND && type < JOINT_CAP_ROUND + 1.5) {
            base += shift * norm;
            if (inner > 0.5) {
                dy = -dy;
                inner = 0.0;
            }
            vec2 d2 = abs(dy) * forward;
            if (vertexNum < 4.5) {
                dy = -dy;
                pos = dy * norm;
            } else if (vertexNum < 5.5) {
                pos = dy * norm;
            } else if (vertexNum < 6.5) {
                pos = dy * norm + d2;
                vArc.x = abs(dy);
            } else {
                dy = -dy;
                pos = dy * norm + d2;
                vArc.x = abs(dy);
            }
            vLine2 = vec4(0.0, lineWidth * 2.0 + 10.0, 1.0  , 0.0); // forget about line2 with type=3
            vArc.y = dy;
            vArc.z = 0.0;
            vArc.w = lineWidth;
            vType = 3.0;
        } else if (abs(D) < 0.01 && collinear < 0.5) {
            pos = dy * norm;
        } else {
            if (inner > 0.5) {
                dy = -dy;
                inner = 0.0;
            }
            float side = sign(dy);
            vec2 norm3 = normalize(norm + norm2);

            if (type >= MITER && type < MITER + 3.5) {
                vec2 farVertex = doBisect(norm, len, norm2, len2, shift + dy, 0.0);
                if (length(farVertex) > abs(shift + dy) * MITER_LIMIT) {
                    type = BEVEL;
                }
            }

            if (vertexNum < 4.5) {
                pos = doBisect(norm, len, norm2, len2, shift - dy, 1.0);
            } else if (vertexNum < 5.5) {
                pos = (shift + dy) * norm;
            } else if (vertexNum > 7.5) {
                pos = (shift + dy) * norm2;
            } else {
                if (type >= ROUND && type < ROUND + 1.5) {
                    pos = doBisect(norm, len, norm2, len2, shift + dy, 0.0);
                    float d2 = abs(shift + dy);
                    if (length(pos) > abs(shift + dy) * 1.5) {
                        if (vertexNum < 6.5) {
                            pos.x = (shift + dy) * norm.x - d2 * norm.y;
                            pos.y = (shift + dy) * norm.y + d2 * norm.x;
                        } else {
                            pos.x = (shift + dy) * norm2.x + d2 * norm2.y;
                            pos.y = (shift + dy) * norm2.y - d2 * norm2.x;
                        }
                    }
                } else if (type >= MITER && type < MITER + 3.5) {
                    pos = doBisect(norm, len, norm2, len2, shift + dy, 0.0); //farVertex
                } else if (type >= BEVEL && type < BEVEL + 1.5) {
                    float d2 = side / resolution;
                    if (vertexNum < 6.5) {
                        pos = (shift + dy) * norm + d2 * norm3;
                    } else {
                        pos = (shift + dy) * norm2 + d2 * norm3;
                    }
                }
            }

            if (type >= ROUND && type < ROUND + 1.5) {
                vArc.x = side * dot(pos, norm3);
                vArc.y = pos.x * norm3.y - pos.y * norm3.x;
                vArc.z = dot(norm, norm3) * (lineWidth + side * shift);
                vArc.w = lineWidth + side * shift;
                vType = 3.0;
            } else if (type >= MITER && type < MITER + 3.5) {
                vType = 1.0;
            } else if (type >= BEVEL && type < BEVEL + 1.5) {
                vType = 4.0;
                vArc.z = dot(norm, norm3) * (lineWidth + side * shift) - side * dot(pos, norm3);
            }

            dy = side * (dot(pos, norm) - shift);
            dy2 = side * (dot(pos, norm2) - shift);
        }

        pos += base;
        vLine1.xy = vec2(dy, vLine1.y) * resolution;
        vLine2.xy = vec2(dy2, vLine2.y) * resolution;
        vArc = vArc * resolution;
        vTravel = aTravel * avgScale + dot(pos - pointA, vec2(-norm.y, norm.x));
    }

    gl_Position = vec4((projectionMatrix * vec3(pos, 1.0)).xy, 0.0, 1.0);

    vColor = aColor * tint;
}`,yie=`#version 100
#ifdef GL_FRAGMENT_PRECISION_HIGH
  precision highp float;
#else
  precision mediump float;
#endif
`,_ie=`%PRECISION%
varying vec4 vColor;
varying vec4 vLine1;
varying vec4 vLine2;
varying vec4 vArc;
varying float vType;
varying float vTextureId;
varying vec2 vTextureCoord;
varying float vTravel;
uniform sampler2D uSamplers[%MAX_TEXTURES%];

%PIXEL_LINE%

void main(void){
    %PIXEL_COVERAGE%

    vec4 texColor;
    float textureId = floor(vTextureId+0.5);
    %FOR_LOOP%

    gl_FragColor = vColor * texColor * alpha;
}
`,bie=[`
float pixelLine(float x, float A, float B) {
    return clamp(x + 0.5, 0.0, 1.0);
}
`,`
float pixelLine(float x, float A, float B) {
    float y = abs(x), s = sign(x);
    if (y * 2.0 < A - B) {
        return 0.5 + s * y / A;
    }
    y -= (A - B) * 0.5;
    y = max(1.0 - y / B, 0.0);
    return (1.0 + s * (1.0 - y * y)) * 0.5;
    //return clamp(x + 0.5, 0.0, 1.0);
}
`],wie=`float alpha = 1.0;
if (vType < 0.5) {
    float left = pixelLine(-vLine1.y - vLine1.x, vLine1.z, vLine1.w);
    float right = pixelLine(vLine1.y - vLine1.x, vLine1.z, vLine1.w);
    float near = vLine2.x - 0.5;
    float far = min(vLine2.x + 0.5, 0.0);
    float top = vLine2.y - 0.5;
    float bottom = min(vLine2.y + 0.5, 0.0);
    alpha = (right - left) * max(bottom - top, 0.0) * max(far - near, 0.0);
} else if (vType < 1.5) {
    float a1 = pixelLine(- vLine1.y - vLine1.x, vLine1.z, vLine1.w);
    float a2 = pixelLine(vLine1.y - vLine1.x, vLine1.z, vLine1.w);
    float b1 = pixelLine(- vLine2.y - vLine2.x, vLine2.z, vLine2.w);
    float b2 = pixelLine(vLine2.y - vLine2.x, vLine2.z, vLine2.w);
    alpha = a2 * b2 - a1 * b1;
} else if (vType < 2.5) {
    alpha *= max(min(vLine1.x + 0.5, 1.0), 0.0);
    alpha *= max(min(vLine1.y + 0.5, 1.0), 0.0);
    alpha *= max(min(vLine1.z + 0.5, 1.0), 0.0);
} else if (vType < 3.5) {
    float a1 = pixelLine(- vLine1.y - vLine1.x, vLine1.z, vLine1.w);
    float a2 = pixelLine(vLine1.y - vLine1.x, vLine1.z, vLine1.w);
    float b1 = pixelLine(- vLine2.y - vLine2.x, vLine2.z, vLine2.w);
    float b2 = pixelLine(vLine2.y - vLine2.x, vLine2.z, vLine2.w);
    float alpha_miter = a2 * b2 - a1 * b1;
    float alpha_plane = clamp(vArc.z - vArc.x + 0.5, 0.0, 1.0);
    float d = length(vArc.xy);
    float circle_hor = max(min(vArc.w, d + 0.5) - max(-vArc.w, d - 0.5), 0.0);
    float circle_vert = min(vArc.w * 2.0, 1.0);
    float alpha_circle = circle_hor * circle_vert;
    alpha = min(alpha_miter, max(alpha_circle, alpha_plane));
} else {
    float a1 = pixelLine(- vLine1.y - vLine1.x, vLine1.z, vLine1.w);
    float a2 = pixelLine(vLine1.y - vLine1.x, vLine1.z, vLine1.w);
    float b1 = pixelLine(- vLine2.y - vLine2.x, vLine2.z, vLine2.w);
    float b2 = pixelLine(vLine2.y - vLine2.x, vLine2.z, vLine2.w);
    alpha = a2 * b2 - a1 * b1;
    alpha *= clamp(vArc.z + 0.5, 0.0, 1.0);
}
`;class xie extends Fh{constructor(t,r=gie,n=_ie,i={}){const{maxStyles:o,maxTextures:s,pixelLine:a}=t;r=r.replace(/%MAX_TEXTURES%/gi,`${s}`).replace(/%MAX_STYLES%/gi,`${o}`),n=n.replace(/%PRECISION%/gi,yie).replace(/%PIXEL_LINE%/gi,bie[a]).replace(/%PIXEL_COVERAGE%/gi,wie).replace(/%MAX_TEXTURES%/gi,`${s}`).replace(/%FOR_LOOP%/gi,P7.generateSampleSrc(s)),super(r,n),this.settings=t}}class P7 extends Ws{constructor(t,r=new xie(t),n={}){const{maxStyles:i,maxTextures:o}=t,s=new Int32Array(o);for(let a=0;a<o;a++)s[a]=a;super(r,Object.assign(n,{styleMatrix:new Float32Array(6*i),styleTextureId:new Float32Array(i),styleLine:new Float32Array(2*i),samplerSize:new Float32Array(2*o),uSamplers:s,tint:new Float32Array([1,1,1,1]),resolution:1,expand:1})),this.settings=t}static generateSampleSrc(t){let r="";r+=`
`,r+=`
`;for(let n=0;n<t;n++)n>0&&(r+=`
else `),n<t-1&&(r+=`if(textureId < ${n}.5)`),r+=`
{`,r+=`
	texColor = texture2D(uSamplers[${n}], vTextureCoord);`,r+=`
}`;return r+=`
`,r+=`
`,r}}const Pa={LINE_SCALE_MODE:ci.NORMAL,SHADER_MAX_STYLES:24,SHADER_MAX_TEXTURES:4,PIXEL_LINE:0},{BezierUtils:Tie,QuadraticUtils:Sie,ArcUtils:PN}=Gte,Eie=new Float32Array(3),B_={};class ar extends Ri{static __initStatic(){this._TEMP_POINT=new Gt}get geometry(){return this._geometry}constructor(t=null){super(),this._geometry=t||new n1,this._geometry.refCount++,this.shader=null,this.shaderSettings={maxStyles:Pa.SHADER_MAX_STYLES,maxTextures:Pa.SHADER_MAX_TEXTURES,pixelLine:Pa.PIXEL_LINE},this.state=yl.for2d(),this._fillStyle=new r1,this._lineStyle=new V4,this._matrix=null,this._holeMode=!1,this.currentPath=null,this.batches=[],this.batchTint=-1,this.batchDirty=-1,this.vertexData=null,this.pluginName="smooth",this._transformID=-1,this.tint=16777215,this.blendMode=Ze.NORMAL}clone(){return this.finishPoly(),new ar(this._geometry)}set blendMode(t){this.state.blendMode=t}get blendMode(){return this.state.blendMode}get tint(){return this._tint}set tint(t){this._tint=t}get fill(){return this._fillStyle}get line(){return this._lineStyle}lineStyle(t=null,r=0,n=1,i=.5,o=Pa.LINE_SCALE_MODE){if(typeof t=="number")typeof o=="boolean"&&(o=o?ci.NONE:ci.NORMAL),t={width:t,color:r,alpha:n,alignment:i,scaleMode:o};else{const s=t.native;s!==void 0&&(t.scaleMode=s?ci.NONE:ci.NORMAL)}return this.lineTextureStyle(t)}lineTextureStyle(t){t=Object.assign({width:0,texture:tt.WHITE,color:t&&t.texture?16777215:0,alpha:1,matrix:null,alignment:.5,native:!1,cap:Wi.BUTT,join:li.MITER,miterLimit:10,shader:null,scaleMode:Pa.LINE_SCALE_MODE},t),this.currentPath&&this.startPoly();const r=t.width>0&&t.alpha>0;return r?(t.matrix&&(t.matrix=t.matrix.clone(),t.matrix.invert()),Object.assign(this._lineStyle,{visible:r},t)):this._lineStyle.reset(),this}startPoly(){if(this.currentPath){const t=this.currentPath.points,r=this.currentPath.points.length;r>2&&(this.drawShape(this.currentPath),this.currentPath=new nu,this.currentPath.closeStroke=!1,this.currentPath.points.push(t[r-2],t[r-1]))}else this.currentPath=new nu,this.currentPath.closeStroke=!1}finishPoly(){this.currentPath&&(this.currentPath.points.length>2?(this.drawShape(this.currentPath),this.currentPath=null):this.currentPath.points.length=0)}moveTo(t,r){return this.startPoly(),this.currentPath.points[0]=t,this.currentPath.points[1]=r,this}lineTo(t,r){this.currentPath||this.moveTo(0,0);const n=this.currentPath.points,i=n[n.length-2],o=n[n.length-1];return(i!==t||o!==r)&&n.push(t,r),this}_initCurve(t=0,r=0){this.currentPath?this.currentPath.points.length===0&&(this.currentPath.points=[t,r]):this.moveTo(t,r)}quadraticCurveTo(t,r,n,i){this._initCurve();const o=this.currentPath.points;return o.length===0&&this.moveTo(0,0),Sie.curveTo(t,r,n,i,o),this}bezierCurveTo(t,r,n,i,o,s){return this._initCurve(),Tie.curveTo(t,r,n,i,o,s,this.currentPath.points),this}arcTo(t,r,n,i,o){this._initCurve(t,r);const s=this.currentPath.points,a=PN.curveTo(t,r,n,i,o,s);if(a){const{cx:l,cy:u,radius:c,startAngle:f,endAngle:p,anticlockwise:m}=a;this.arc(l,u,c,f,p,m)}return this}arc(t,r,n,i,o,s=!1){if(i===o)return this;if(!s&&o<=i?o+=fh:s&&i<=o&&(i+=fh),o-i===0)return this;const l=t+Math.cos(i)*n,u=r+Math.sin(i)*n,c=this._geometry.closePointEps;let f=this.currentPath?this.currentPath.points:null;if(f){const p=Math.abs(f[f.length-2]-l),m=Math.abs(f[f.length-1]-u);p<c&&m<c||f.push(l,u)}else this.moveTo(l,u),f=this.currentPath.points;return PN.arc(l,u,t,r,n,i,o,s,f),this}beginFill(t=0,r=1,n=!1){return this.beginTextureFill({texture:tt.WHITE,color:t,alpha:r,smooth:n})}beginTextureFill(t){t=Object.assign({texture:tt.WHITE,color:16777215,alpha:1,matrix:null,smooth:!1},t),this.currentPath&&this.startPoly();const r=t.alpha>0;return r?(t.matrix&&(t.matrix=t.matrix.clone(),t.matrix.invert()),Object.assign(this._fillStyle,{visible:r},t)):this._fillStyle.reset(),this}endFill(){return this.finishPoly(),this._fillStyle.reset(),this}drawRect(t,r,n,i){return this.drawShape(new Me(t,r,n,i))}drawRoundedRect(t,r,n,i,o){return this.drawShape(new AO(t,r,n,i,o))}drawCircle(t,r,n){return this.drawShape(new NO(t,r,n))}drawEllipse(t,r,n,i){return this.drawShape(new PO(t,r,n,i))}drawPolygon(...t){let r,n=!0;const i=t[0];i.points?(n=i.closeStroke,r=i.points):Array.isArray(t[0])?r=t[0]:r=t;const o=new nu(r);return o.closeStroke=n,this.drawShape(o),this}drawShape(t){return this._holeMode?this._geometry.drawHole(t,this._matrix):this._geometry.drawShape(t,this._fillStyle.clone(),this._lineStyle.clone(),this._matrix),this}clear(){return this._geometry.clear(),this._lineStyle.reset(),this._fillStyle.reset(),this._boundsID++,this._matrix=null,this._holeMode=!1,this.currentPath=null,this}isFastRect(){const t=this._geometry.graphicsData;return t.length===1&&t[0].shape.type===gt.RECT&&!t[0].matrix&&!t[0].holes.length&&!(t[0].lineStyle.visible&&t[0].lineStyle.width)}_renderCanvas(t){Ka.prototype._renderCanvas.call(this,t)}_render(t){this.finishPoly();const r=this._geometry,n=t.context.supports.uint32Indices;r.checkInstancing(t.geometry.hasInstance,n),r.updateBatches(this.shaderSettings),r.batchable?(this.batchDirty!==r.batchDirty&&this._populateBatches(),this._renderBatched(t)):(t.batch.flush(),this._renderDirect(t))}_populateBatches(){const t=this._geometry,r=this.blendMode,n=t.batches.length;this.batchTint=-1,this._transformID=-1,this.batchDirty=t.batchDirty,this.batches.length=n,this.vertexData=new Float32Array(t.points);for(let i=0;i<n;i++){const o=t.batches[i],s=o.style.color,l={vertexData:new Float32Array(this.vertexData.buffer,o.attribStart*4*2,o.attribSize*2),blendMode:r,_batchRGB:al(s),_tintRGB:s,_texture:o.style.texture,alpha:o.style.alpha,worldAlpha:1};this.batches[i]=l}}_renderBatched(t){if(!!this.batches.length){t.batch.setObjectRenderer(t.plugins[this.pluginName]),this.calculateVertices(),this.calculateTints();for(let r=0,n=this.batches.length;r<n;r++){const i=this.batches[r];i.worldAlpha=this.worldAlpha*i.alpha,t.plugins[this.pluginName].render(i)}}}_renderDirect(t){const r=this._resolveDirectShader(t);let n=r;const i=this._geometry,o=this.tint,s=this.worldAlpha,a=n.uniforms,l=i.drawCalls;a.translationMatrix=this.transform.worldTransform,a.tint[0]=(o>>16&255)/255*s,a.tint[1]=(o>>8&255)/255*s,a.tint[2]=(o&255)/255*s,a.tint[3]=s,a.resolution=t.renderTexture.current?t.renderTexture.current.resolution:t.resolution;const u=t.projection.transform;if(u){const c=Math.sqrt(u.a*u.a+u.b*u.b);a.resolution*=c}a.expand=(t.options.antialias?2:1)/a.resolution,t.shader.bind(n),t.geometry.bind(i,n),t.state.set(this.state),n=null;for(let c=0,f=l.length;c<f;c++){const p=i.drawCalls[c],m=n!==p.shader;m&&(n=p.shader,n&&(n.uniforms.translationMatrix=this.transform.worldTransform,n.uniforms.tint&&(n.uniforms.tint[0]=a.tint[0],n.uniforms.tint[1]=a.tint[1],n.uniforms.tint[2]=a.tint[2],n.uniforms.tint[3]=a.tint[3])));const{texArray:g,styleArray:b,size:y,start:w}=p,x=g.count,T=n||r,I=T.uniforms.styleTextureId,R=T.uniforms.styleMatrix,S=T.uniforms.styleLine;for(let P=0;P<b.count;P++){I[P]=b.textureIds[P],S[P*2]=b.lines[P*2],S[P*2+1]=b.lines[P*2+1];const N=b.matrices[P];R[P*6]=N.a,R[P*6+1]=N.c,R[P*6+2]=N.tx,R[P*6+3]=N.b,R[P*6+4]=N.d,R[P*6+5]=N.ty}const O=T.uniforms.samplerSize;for(let P=0;P<x;P++)O[P*2]=g.elements[P].width,O[P*2+1]=g.elements[P].height;t.shader.bind(T),m&&t.geometry.bind(i);for(let P=0;P<x;P++)t.texture.bind(g.elements[P],P);t.geometry.draw(Ni.TRIANGLES,y,w)}}_resolveDirectShader(t){let r=this.shader;const n=this.pluginName;return r||(B_[n]||(B_[n]=new P7(this.shaderSettings)),r=B_[n]),r}_calculateBounds(){this.finishPoly();const t=this._geometry;if(!t.graphicsData.length)return;const{minX:r,minY:n,maxX:i,maxY:o}=t.bounds;this._bounds.addFrame(this.transform,r,n,i,o)}containsPoint(t){return this.worldTransform.applyInverse(t,ar._TEMP_POINT),this._geometry.containsPoint(ar._TEMP_POINT)}calculateTints(){if(this.batchTint!==this.tint){this.batchTint=this.tint;const t=al(this.tint,Eie);for(let r=0;r<this.batches.length;r++){const n=this.batches[r],i=n._batchRGB,o=t[0]*i[0]*255,s=t[1]*i[1]*255,a=t[2]*i[2]*255,l=(o<<16)+(s<<8)+(a|0);n._tintRGB=(l>>16)+(l&65280)+((l&255)<<16)}}}calculateVertices(){const t=this.transform._worldID;if(this._transformID===t)return;this._transformID=t;const r=this.transform.worldTransform,n=r.a,i=r.b,o=r.c,s=r.d,a=r.tx,l=r.ty,u=this._geometry.points,c=this.vertexData;let f=0;for(let p=0;p<u.length;p+=2){const m=u[p],g=u[p+1];c[f++]=n*m+o*g+a,c[f++]=s*g+i*m+l}}closePath(){const t=this.currentPath;return t&&(t.closeStroke=!0),this}setMatrix(t){return this._matrix=t,this}beginHole(){return this.finishPoly(),this._holeMode=!0,this}endHole(){return this.finishPoly(),this._holeMode=!1,this}destroy(t){this._geometry.refCount--,this._geometry.refCount===0&&this._geometry.dispose(),this._matrix=null,this.currentPath=null,this._lineStyle.destroy(),this._lineStyle=null,this._fillStyle.destroy(),this._fillStyle=null,this._geometry=null,this.shader=null,this.vertexData=null,this.batches.length=0,this.batches=null,super.destroy(t)}}ar.__initStatic();Pa.LINE_SCALE_MODE=ci.NORMAL;const{noteData:gc,horizontalLineBreak:Cie,standards:Iie,layersCombination:Nie,breakpoints:Pie}=_M;class Aie{constructor({width:t,height:r,margin:n=4,timelineHeight:i=30,standardsColors:o,app:s,breakpointsApp:a,composerAccent:l}){this.destroy=()=>{this.cache.columns.forEach(u=>u.destroy(!0)),this.cache.standard.forEach(u=>u.destroy(!0)),this.cache.columnsLarger.forEach(u=>u.destroy(!0)),this.cache.standardLarger.forEach(u=>u.destroy(!0)),this.cache.breakpoints.forEach(u=>u.destroy(!0)),Object.entries(this.cache.notes).forEach(([u,c])=>{c.destroy(!0)}),this.app=null,this.breakpointsApp=null},this.generate=()=>{rl.forEach(u=>{const c=this.drawColumn(u,1);c&&this.cache.columns.push(c)}),this.standardsColors.forEach(u=>{const c=this.drawColumn(u,1);c&&this.cache.standard.push(c)}),this.standardsColors.forEach(u=>{const c=this.drawColumn(u,3);c&&this.cache.standardLarger.push(c)}),Nie.forEach(u=>{const c=this.noteWidth,f=this.noteHeight,p=this.noteWidth>20?3:2,m=new Ki(u),g=new ar;if(m.test(0)&&g.beginFill(new Et(gc.background).rgbNumber()).lineStyle(1,new Et(gc.background).rgbNumber()).drawRoundedRect(this.margin/2-.25,this.margin/2,Math.ceil(c-this.margin),Math.ceil(f-this.margin),p).endFill(),m.test(1)&&g.lineStyle(this.margin===4?3:2,new Et(gc.border).rgbNumber()).drawRoundedRect(this.margin/2-.25,this.margin/2,Math.ceil(c-this.margin),Math.ceil(f-this.margin),p).endFill(),m.test(2)&&g.beginFill(new Et(gc.center).rgbNumber()).lineStyle(1,new Et(gc.center).rgbNumber()).drawCircle(c/2-.25,f/2,f/3-.5).endFill(),m.test(3)){const y=this.margin===4?3:2;g.lineStyle(y,new Et(gc.border).darken(.15).rgbNumber()).moveTo(this.margin/2+.5,f/2).lineTo(c-this.margin+.5,f/2).endFill()}if(!this.app)return;const b=this.app.renderer.generateTexture(g,{resolution:2,scaleMode:St.LINEAR,region:new Me(0,0,this.noteWidth,this.noteHeight)});this.cache.notes[u]=b,g.destroy(!0)}),rl.forEach(u=>{const c=this.drawColumn(u,2);c&&this.cache.columnsLarger.push(c)}),Pie.forEach(u=>{const c=new ar,f=this.timelineHeight/6;if(u.type==="short"){if(c.beginFill(this.composerAccent.rgbNumber()),c.drawCircle(f,this.timelineHeight/2,f).endFill(),!this.breakpointsApp)return;const p=this.breakpointsApp.renderer.generateTexture(c,{scaleMode:St.LINEAR,resolution:2,region:new Me(0,0,f*2,this.timelineHeight)});this.cache.breakpoints.push(p),c.destroy(!0)}else{if(c.beginFill(this.composerAccent.rgbNumber()).moveTo(0,this.height).lineTo(this.noteWidth/2,this.height).lineTo(0,this.height-this.noteHeight).endFill(),c.beginFill(this.composerAccent.rgbNumber()).moveTo(this.width,this.height).lineTo(this.noteWidth/2,this.height).lineTo(this.width,this.height-this.noteHeight).endFill(),c.beginFill(this.composerAccent.rgbNumber()).moveTo(0,0).lineTo(this.noteWidth/2,0).lineTo(0,this.noteHeight).endFill(),c.beginFill(this.composerAccent.rgbNumber()).moveTo(this.width,0).lineTo(this.noteWidth/2,0).lineTo(this.width,this.noteHeight).endFill(),!this.app)return;const p=this.app.renderer.generateTexture(c,{scaleMode:St.LINEAR,resolution:2});this.cache.breakpoints.push(p),c.destroy(!0)}})},this.drawColumn=(u,c)=>{const f=new ar;f.beginFill(u.color),f.drawRect(0,0,this.width,this.height),f.lineStyle(c,3355443).moveTo(this.width,0).lineTo(this.width,this.height),f.lineStyle(1,3355443);for(let m=1;m<3;m++){const g=this.noteHeight*Cie*m;f.moveTo(0,g),f.lineTo(this.width,g)}if(!this.app)return;const p=this.app.renderer.generateTexture(f,{scaleMode:St.LINEAR,resolution:(window==null?void 0:window.devicePixelRatio)||1,region:new Me(0,0,this.width,this.height)});return f.destroy(!0),p},this.cache={columns:[],notes:{},standard:[],columnsLarger:[],standardLarger:[],breakpoints:[]},this.width=t,this.height=r,this.timelineHeight=i,this.margin=n,this.noteWidth=this.width,this.noteHeight=this.height/Y3,this.standardsColors=o||Iie,this.app=s,this.breakpointsApp=a,this.composerAccent=l,this.generate()}}function Rie({notes:e,index:t,sizes:r,onClick:n,cache:i,instruments:o,backgroundCache:s,isBreakpoint:a,isSelected:l,isToolsSelected:u,currentLayer:c}){const f=M.exports.useCallback(()=>{n(t)},[t,n]);return k(Qe.exports.Container,{pointertap:f,interactive:!0,x:r.width*t,children:[k(Qe.exports.Sprite,{texture:s,interactiveChildren:!1,children:[(l||u)&&v(Qe.exports.Sprite,{texture:u&&!l?i.standard[3]:i.standard[2],alpha:u&&!l?.4:.8,zIndex:1}),a&&v(Qe.exports.Sprite,{texture:i.breakpoints[1]})]}),e.map(p=>{const m=p.layer.toLayerStatus(c,o);return m===0?null:v(Qe.exports.Sprite,{texture:i.notes[m],y:Gb[p.index]*r.height/Y3},p.index)})]})}function kie(e,t,r){const n=r/2+2;return t-n<e&&e<t+n}function D_({onClick:e,children:t,tooltip:r,style:n,ariaLabel:i}){return k("button",{className:`timeline-button ${Pn(r)}`,onClick:e,style:n,"aria-label":i,children:[t,r&&v(hn,{children:r})]})}class Oie extends M.exports.Component{constructor(t){super(t),this.resetPointerDown=()=>{this.stageSelected=!1,this.sliderSelected=!1,this.stagePreviousPositon=0},this.recalculateCacheAndSizes=()=>{this.cacheRecalculateDebounce&&clearTimeout(this.cacheRecalculateDebounce),this.cacheRecalculateDebounce=setTimeout(()=>{var f,p;if(!((f=this.notesStageRef)!=null&&f.current)||!((p=this.breakpointsStageRef)!=null&&p.current))return;const o=document.body.getBoundingClientRect(),{numberOfColumnsPerCanvas:s}=this.state,{inPreview:a}=this.props.data;let l=Mo(o.width*.85-45),u=Mo(o.height*.45);u=Mo(u*.95),a&&(l=Mo(l*(o.width<900?.8:.55)),u=Mo(u*(o.width<900?.8:.6)));let c=Mo(l/s);this.setState({width:Math.floor(l),height:Math.floor(u),column:{width:c,height:u},cache:this.getCache(c,u,Wn.exports()?2:4,Wn.exports()?25:30)})},50)},this.handleKeyboard=({code:o})=>{o==="ArrowRight"?this.handleBreakpoints(1):o==="ArrowLeft"&&this.handleBreakpoints(-1)},this.handleWheel=o=>{this.props.functions.selectColumn(this.props.data.selected+Math.sign(o.deltaY),!0)},this.handleClick=(o,s)=>{const a=o.data.global.x,{width:l,numberOfColumnsPerCanvas:u}=this.state,{data:c}=this.props;if(s==="up"&&(this.sliderSelected=!1),s==="down"){this.sliderSelected=!0;const f=l/c.columns.length,p=f*(u+1),m=f*c.selected-u/2*f;this.onSlider=a>m&&a<m+p,this.sliderOffset=m+p/2-a,this.throttleScroll=Number.MAX_SAFE_INTEGER,this.handleSlide(o)}s==="downStage"&&(this.stagePreviousPositon=a,this.stageSelected=!0)},this.handleStageSlide=o=>{const s=o.data.global.x;if(this.stageSelected===!0){if(this.throttleScroll++<5)return;this.throttleScroll=0;const{data:a,functions:l}=this.props,u=ai(Math.ceil(Math.abs(this.stagePreviousPositon-s)/8),0,4),c=this.stagePreviousPositon<s?-1:1;this.stagePreviousPositon=s;const f=a.selected+c*u;if(a.selected===f)return;l.selectColumn(ai(f,0,a.columns.length-1),!0)}},this.handleBreakpoints=o=>{const{selected:s,columns:a,breakpoints:l}=this.props.data,u=o===1?l.filter(c=>c>s).sort((c,f)=>c-f):l.filter(c=>c<s).sort((c,f)=>f-c);u.length!==0&&a.length>=u[0]&&u[0]>=0&&this.props.functions.selectColumn(u[0])},this.handleSlide=o=>{const s=o.data.global.x;if(this.sliderSelected){if(this.throttleScroll++<4)return;const{width:a,column:l}=this.state,{data:u}=this.props;this.hasSlided=!0,this.throttleScroll=0;const c=l.width*u.columns.length,f=this.onSlider?s+this.sliderOffset:s,p=Math.floor(f/a*c/l.width);this.props.functions.selectColumn(p,!0)}},this.sizes=document.body.getBoundingClientRect();const r=Number(this.props.data.settings.columnsPerCanvas.value);let n=Mo(this.sizes.width*.85-45),i=Mo(this.sizes.height*.45);i=Mo(i*.95),this.state={width:Math.floor(n),height:Math.floor(i),numberOfColumnsPerCanvas:r,column:{width:Mo(n/r),height:i},timelineHeight:Wn.exports()?25:30,currentBreakpoint:-1,theme:{timeline:{hex:Se.layer("primary",.1).toString(),hexNumber:Se.layer("primary",.1).rgbNumber(),selected:Se.get("composer_accent").negate().rgbNumber(),border:Se.get("composer_accent").rgbNumber()},sideButtons:{hex:Se.get("primary").darken(.08).toString(),rgb:Se.get("primary").darken(.08).rgb().array().map(o=>Math.floor(o)).join(",")}},cache:null},this.notesStageRef=M.exports.createRef(),this.breakpointsStageRef=M.exports.createRef(),this.stageSelected=!1,this.sliderSelected=!1,this.hasSlided=!1,this.stagePreviousPositon=0,this.sliderOffset=0,this.throttleScroll=0,this.onSlider=!1,this.dispose=()=>{},this.cacheRecalculateDebounce=0}componentDidMount(){var t,r,n;window.addEventListener("pointerup",this.resetPointerDown),window.addEventListener("resize",this.recalculateCacheAndSizes),Xe.listen(this.handleKeyboard),(n=(r=(t=this.notesStageRef)==null?void 0:t.current)==null?void 0:r._canvas)==null||n.addEventListener("wheel",this.handleWheel),this.recalculateCacheAndSizes(),this.dispose=Vy(()=>{this.recalculateCacheAndSizes(),this.setState({theme:{timeline:{hex:Se.layer("primary",.1).toString(),hexNumber:Se.layer("primary",.1).rgbNumber(),selected:Se.get("composer_accent").negate().rgbNumber(),border:Se.get("composer_accent").rgbNumber()},sideButtons:{hex:Se.get("primary").darken(.08).toString(),rgb:Se.get("primary").darken(.08).rgb().array().map(i=>Math.floor(i)).join(",")}}})})}componentWillUnmount(){var t,r,n,i;window.removeEventListener("pointerup",this.resetPointerDown),window.removeEventListener("resize",this.recalculateCacheAndSizes),this.cacheRecalculateDebounce&&clearTimeout(this.cacheRecalculateDebounce),Xe.unlisten(this.handleKeyboard),(n=(r=(t=this.notesStageRef)==null?void 0:t.current)==null?void 0:r._canvas)==null||n.removeEventListener("wheel",this.handleWheel),this.dispose(),(i=this.state.cache)==null||i.destroy(),this.notesStageRef=null,this.breakpointsStageRef=null}getCache(t,r,n,i){var a,l,u,c;const o={l:Se.get("primary"),d:Se.get("primary")};if(o.l=o.l.luminosity()<.05?o.l.lighten(.4):o.l.lighten(.1),o.d=o.d.luminosity()<.05?o.d.lighten(.15):o.d.darken(.03),!((a=this.notesStageRef)!=null&&a.current)||!((l=this.breakpointsStageRef)!=null&&l.current))return null;const s=new Aie({width:t,height:r,margin:n,timelineHeight:i,app:this.notesStageRef.current.app,breakpointsApp:this.breakpointsStageRef.current.app,composerAccent:Se.get("composer_accent").rotate(20).darken(.5),standardsColors:[{color:o.l.rgbNumber()},{color:o.d.rgbNumber()},{color:Se.get("composer_accent").rgbNumber()},{color:Se.get("composer_accent").negate().rgbNumber()}]});return(c=(u=this.state.cache)==null?void 0:u.destroy)==null||c.call(u),s}render(){var x;const{width:t,timelineHeight:r,height:n,theme:i,numberOfColumnsPerCanvas:o}=this.state,{data:s,functions:a}=this.props,l=(x=this.state.cache)==null?void 0:x.cache,u=this.state.column,c=(s.selected-o/2+1)*-u.width,f=Number(s.settings.beatMarks.value),p=f===0?12:4*f,m=t/s.columns.length,g=Math.floor(m*(t/u.width+1)),b=m*s.selected-m*(o/2),y=s.breakpoints.includes(s.selected),w=i.sideButtons.rgb;return k("div",{className:"canvas-wrapper",style:{width:t},children:[k("div",{className:"canvas-relative",children:[!s.settings.useKeyboardSideButtons.value&&k(je,{children:[v("button",{onPointerDown:()=>a.selectColumn(s.selected-1),className:`canvas-buttons ${s.isPlaying?"":"canvas-buttons-visible"}`,style:{left:"0",paddingRight:"0.5rem",justifyContent:"flex-start",background:`linear-gradient(90deg, rgba(${w},0.80) 30%, rgba(${w},0.30) 80%, rgba(${w},0) 100%)`},children:v(oA,{})}),v("button",{onPointerDown:()=>a.selectColumn(s.selected+1),className:`canvas-buttons ${s.isPlaying?"":"canvas-buttons-visible"}`,style:{right:"0",paddingLeft:"0.5rem",justifyContent:"flex-end",background:`linear-gradient(270deg, rgba(${w},0.80) 30%, rgba(${w},0.30) 80%, rgba(${w},0) 100%)`},children:v(sA,{})})]}),v(Qe.exports.Stage,{width:t,height:n,raf:!1,renderOnComponentChange:!0,options:{backgroundAlpha:0,autoDensity:!0,resolution:(window==null?void 0:window.devicePixelRatio)||1.4},ref:this.notesStageRef,children:l&&!s.isRecordingAudio&&v(Qe.exports.Container,{x:c,interactive:!0,pointerdown:T=>this.handleClick(T,"downStage"),pointermove:this.handleStageSlide,children:s.columns.map((T,I)=>{if(!kie(I,s.selected,o))return null;const R=(I+1)%4===0?l.columnsLarger:l.columns,S=(I+1)%4===0?l.standardLarger:l.standard,O=T.tempoChanger===0?S[Number(I%(p*2)>=p)]:R[T.tempoChanger];return v(Rie,{cache:l,notes:T.notes,index:I,sizes:u,instruments:s.song.instruments,currentLayer:s.currentLayer,backgroundCache:O,isToolsSelected:s.selectedColumns.includes(I),onClick:a.selectColumn,isSelected:I===s.selected,isBreakpoint:s.breakpoints.includes(I)},I)})})})]}),k("div",{className:"timeline-wrapper",style:{height:this.state.timelineHeight},children:[v(D_,{onClick:()=>this.handleBreakpoints(-1),tooltip:"Previous Breakpoint",style:{backgroundColor:i.timeline.hex},ariaLabel:"Previous Breakpoint",children:v(Ct,{children:v(pA,{size:16})})}),v(D_,{onClick:()=>this.handleBreakpoints(1),tooltip:"Next breakpoint",style:{marginLeft:0,backgroundColor:i.timeline.hex},ariaLabel:"Next Breakpoint",children:v(Ct,{children:v(mA,{size:16})})}),v("div",{className:"timeline-scroll",style:{backgroundColor:i.timeline.hex},children:k(Qe.exports.Stage,{width:t,height:r,options:{backgroundAlpha:0,autoDensity:!0,resolution:(window==null?void 0:window.devicePixelRatio)||1},raf:!1,ref:this.breakpointsStageRef,renderOnComponentChange:!0,children:[l&&k(Qe.exports.Container,{width:t,height:r,interactive:!0,pointerdown:T=>this.handleClick(T,"down"),pointerup:T=>this.handleClick(T,"up"),pointermove:this.handleSlide,children:[v(Qe.exports.Graphics,{draw:T=>{T.clear(),T.beginFill(i.timeline.hexNumber),T.drawRect(0,0,t,r)}}),s.selectedColumns.length?v(Qe.exports.Graphics,{draw:T=>{const I=s.selectedColumns[0]||0,R=s.selectedColumns[s.selectedColumns.length-1],S=I*m,P=R*m-S;T.clear(),T.beginFill(i.timeline.selected,.6),T.drawRect(S,0,P,r)}}):null,s.breakpoints.map(T=>v(Qe.exports.Sprite,{texture:l.breakpoints[0],anchor:[.5,0],x:t/(s.columns.length-1)*T},T))]}),v(Qe.exports.Graphics,{draw:T=>{T.clear(),T.lineStyle(3,i.timeline.border,.8),T.drawRoundedRect(0,0,g,r-3,6)},x:b,y:1.5})]})}),v(D_,{onClick:a.toggleBreakpoint,style:{backgroundColor:i.timeline.hex},tooltip:y?"Remove breakpoint":"Add breakpoint",ariaLabel:y?"Remove breakpoint":"Add breakpoint",children:v(Ct,{children:y?v(nM,{size:16},"minus"):v(oM,{size:16},"plus")})})]})]})}}const Lie=["vsrg"];function Uie({data:e,functions:t}){const[r,n]=M.exports.useState(!1),[i,o]=M.exports.useState(!1),[s]=Uu(),[a]=Mp(),[l,u]=M.exports.useState("Settings"),{loadSong:c,changePage:f,renameSong:p,handleSettingChange:m,changeVolume:g,createNewSong:b,changeMidiVisibility:y,updateThisSong:w}=t,[x]=en(),T=oa(ne=>{cu?o(!1):n(!1)},{active:r&&i,ignoreFocusable:!0});M.exports.useEffect(()=>(Xe.register("Escape",()=>{o(!1)},{id:"composer_menu"}),()=>Xe.unregisterById("composer_menu")),[]);const I=M.exports.useCallback(ne=>{typeof ne!="boolean"&&(ne=void 0),o(W=>ne!==void 0?ne:!W)},[]),R=M.exports.useCallback(async(ne,W)=>{await Br("Are you sure you want to delete the song: "+ne)&&(await At.removeSong(W),Cn.userSongs("delete",{name:ne,page:"composer"}))},[]),S=M.exports.useCallback(async()=>{const ne=await En("Write the folder name");!ne||Zi.createFolder(ne)},[]),O=M.exports.useCallback(ne=>{if(ne===l&&r)return n(!1);n(!0),ne&&(u(ne),Cn.UIEvent("menu",{tab:ne}))},[r,l]),P=M.exports.useCallback(async ne=>{var W,Y;for(const de of ne)try{const le=Array.isArray(de.data)?de.data:[de.data];await fr.importAndLog(le)}catch(le){if(console.error(le),(Y=(W=de.file.name).includes)!=null&&Y.call(W,".mid"))return me.error("Midi files should be imported in the composer");le&&console.error(le),me.error("Error importing file, invalid format",8e3)}},[]),N=M.exports.useCallback(async ne=>{try{if(ne instanceof Np.Midi)return await Br("If you use MIDI, the song will loose some information, if you want to share the song with others, use the other format (button above). Do you still want to download?")?fr.downloadMidi(ne):void 0;ne.data.appName=Ae;const W=ne.name,Y=it.parseSong(ne),de=[Ae==="Sky"&&(Y instanceof Kr||Y instanceof Nn)?Y.toOldFormat():Y.serialize()];fr.downloadSong(de,`${W}.${Ae.toLowerCase()}sheet`),me.success("Song downloaded"),Cn.userSongs("download",{name:Y.name,page:"composer"})}catch(W){console.log(W),me.error("Error downloading song")}},[]),A=r&&i?"side-menu menu-open":"side-menu",j={loadSong:c,removeSong:R,toggleMenu:I,downloadSong:N,renameSong:p},X=e.hasChanges?"margin-top-auto not-saved":"margin-top-auto";return k(je,{children:[v("div",{className:"hamburger",onClick:()=>o(!i),children:v(Ct,{children:v(uy,{})})}),k("div",{className:"menu-wrapper",ref:T,children:[k("div",{className:i?"menu menu-visible":"menu",children:[v(Nt,{onClick:()=>I(),className:"close-menu",ariaLabel:"Close menu",children:v(eo,{className:"icon"})}),v(Nt,{onClick:w,className:X,ariaLabel:"Save",children:v(Ct,{children:v(dA,{className:"icon"})})}),v(Nt,{onClick:()=>O("Songs"),isActive:r&&l==="Songs",ariaLabel:"Song menu",children:v(Ct,{children:v(yp,{className:"icon"})})}),v(Nt,{onClick:()=>O("Settings"),isActive:r&&l==="Settings",ariaLabel:"Settings menu",children:v(Ct,{children:v(Eu,{className:"icon"})})}),v(Nt,{onClick:()=>f("Home"),ariaLabel:"Open home menu",children:v(Ct,{children:v(Cu,{className:"icon"})})})]}),k("div",{className:A,children:[k(si,{current:l,id:"Songs",children:[k("div",{className:"songs-buttons-wrapper",children:[v(Lu,{children:k("ul",{children:[v("li",{children:"Click the song name to load it"}),v("li",{children:"You can use different instruments for each layer"}),v("li",{children:"Tempo changers help you make faster parts of a song without having very high bpm"}),v("li",{children:"You can quickly create a song by importing a MIDI file and editing it"}),v("li",{children:"You can add breakpoints to the timeline (the bar below the composer) to quickly jump between parts of a song"})]})}),v(Be,{onClick:()=>{y(!0),I()},style:{marginLeft:"auto"},children:"Create from MIDI"}),v(Be,{onClick:b,children:"Create new song"})]}),v(mu,{songs:s,exclude:Lie,SongComponent:Fie,style:{marginTop:"0.6rem"},componentProps:{theme:x,folders:a,functions:j}}),k("div",{className:"row",style:{justifyContent:"flex-end",gap:"0.2rem"},children:[v(Bp,{onPick:P,onError:(ne,W)=>{ne&&console.error(ne);const Y=W==null?void 0:W.some(le=>{var ie;return(ie=le==null?void 0:le.name)==null?void 0:ie.endsWith(".mid")}),de=(W==null?void 0:W.length)===1;Y&&de?(me.warn("Opening the midi importer to import a MIDI file, please reselect the file",6e3),y(!0),I()):me.error(`Error importing file, invalid format, if it's a MIDI file, use the "Create from MIDI" button`,8e3)},as:"json",multiple:!0,children:v(Be,{children:"Import song sheet"})}),v(Be,{onClick:S,children:"Create folder"})]}),v("div",{className:"songs-buttons-wrapper",style:{marginTop:"auto"},children:v(Be,{style:{marginTop:"0.5rem"},className:"record-btn",onClick:()=>t.startRecordingAudio(!e.isRecordingAudio),toggled:e.isRecordingAudio,children:e.isRecordingAudio?"Stop recording audio":"Start recording audio"})})]}),k(si,{current:l,id:"Settings",children:[v(Dp,{settings:e.settings,onUpdate:m,changeVolume:g}),k("div",{className:"settings-row-wrap",children:[Bb&&v(Be,{onClick:()=>f("MidiSetup"),style:{width:"fit-content"},children:"Connect MIDI keyboard"}),v(Be,{onClick:()=>f("Theme"),style:{width:"fit-content"},children:"Change app theme"})]}),v(mw,{})]})]})]})]})}function Fie({data:e,functions:t,theme:r,folders:n}){const{removeSong:i,toggleMenu:o,renameSong:s,loadSong:a,downloadSong:l}=t,u={backgroundColor:r.layer("primary",.15).hex()},[c,f]=M.exports.useState(!1),[p,m]=M.exports.useState(e.name);return M.exports.useEffect(()=>{m(e.name)},[e.name]),e.type==="vsrg"?v("div",{className:"row",children:"Invalid song"}):k("div",{className:"song-row",children:[k("div",{className:`song-name ${Pn(!0)}`,onClick:async()=>{if(c)return;me.showPill("Loading song...");const g=await it.getOneSerializedFromStorable(e);if(me.hidePill(),!g)return me.error("Could not find song");a(g),o(!1)},children:[c?v("input",{className:`song-name-input ${c?"song-rename":""}`,disabled:!c,onChange:g=>m(g.target.value),style:{width:"100%",color:"var(--primary-text)"},value:p}):v("div",{style:{marginLeft:"0.3rem"},children:p}),v(hn,{children:c?"Song name":"Open in composer"})]}),v("div",{className:"song-buttons-wrapper",children:k(Fp,{Icon:Eh,ignoreClickOutside:c,style:u,tooltip:"More options",onClose:()=>f(!1),children:[k(Be,{className:"row row-centered",style:{padding:"0.4rem"},onClick:()=>{c&&(s(p,e.id),f(!1)),f(!c)},children:[v(_p,{style:{marginRight:"0.4rem"}}),v(Fr,{text:c?"Save":"Rename"})]}),k(hr,{style:{padding:"0 0.4rem"},children:[v(cy,{style:{marginRight:"0.4rem"}}),k("select",{className:"dropdown-select",value:e.folderId||"_None",onChange:async g=>{const b=g.target.value,y=await it.getOneSerializedFromStorable(e);if(!y)return me.error("Could not find song");At.addSongToFolder(y,b!=="_None"?b:null)},children:[v("option",{value:"_None",children:"None"}),n.map(g=>v("option",{value:g.id,children:g.name},g.id))]})]}),k(hr,{style:{width:"100%"},onClick:async()=>{(e==null?void 0:e.type)==="recorded"&&me.warn("Converting recorded song to composed, audio might not be accurate");const g=await it.getOneSerializedFromStorable(e);if(!g)return me.error("Could not find song");a(g),o(!1)},children:[v(lA,{style:{marginRight:"0.4rem"},size:14}),v(Fr,{text:"Edit song"})]}),k(hr,{onClick:async()=>{const g=await it.getOneSerializedFromStorable(e);if(!g)return me.error("Could not find song");l(g)},children:[v(ns,{style:{marginRight:"0.4rem"}}),v(Fr,{text:"Download"})]}),(e.type==="recorded"||e.type==="composed")&&k(hr,{onClick:async()=>{const g=await it.fromStorableSong(e);l(g.toMidi())},children:[v(ns,{style:{marginRight:"0.4rem"},size:14}),v(Fr,{text:"Download MIDI"})]}),k(hr,{onClick:async()=>{const g=await it.fromStorableSong(e);await At.addSong(g),me.log(`Cloned song: ${e.name}`),o(!1)},children:[v(KF,{style:{marginRight:"0.4rem"}}),v(Fr,{text:"Clone song"})]}),k(hr,{onClick:()=>i(e.name,e.id),children:[v(to,{color:"#ed4557",style:{marginRight:"0.4rem"}}),v(Fr,{text:"Delete"})]})]})})]})}const Mie=M.exports.memo(Uie,(e,t)=>e.data.settings===t.data.settings&&e.data.hasChanges===t.data.hasChanges&&e.data.isRecordingAudio===t.data.isRecordingAudio);function Hv({children:e,tooltip:t,onClick:r,style:n,ariaLabel:i}){return k("button",{className:`tool ${Pn(t)}`,onClick:r,style:n,"aria-label":i,children:[e,t&&v(hn,{children:t})]})}function Bie(e){return De({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M17 2H7C4.243 2 2 4.243 2 7v10c0 2.757 2.243 5 5 5h10c2.757 0 5-2.243 5-5V7c0-2.757-2.243-5-5-5zm3 15c0 1.654-1.346 3-3 3H7c-1.654 0-3-1.346-3-3V7c0-1.654 1.346-3 3-3h10c1.654 0 3 1.346 3 3v10z"}}]})(e)}const Nx=[],Px=[];for(const e of Ar)e.startsWith("SFX")?Px.push(e):Nx.push(e);function A7({selected:e,onChange:t,style:r}){return v("select",{className:"select",style:{width:"100%",padding:"0.3rem",...r},onChange:n=>t(n.target.value),value:e,children:Px.length===0?v(je,{children:Nx.map(n=>v("option",{value:n,children:n.replace("-"," ")},n))}):k(je,{children:[v("optgroup",{label:"Instruments",children:Nx.map(n=>v("option",{value:n,children:n.replace("-"," ")},n))}),v("optgroup",{label:"SFX",children:Px.map(n=>v("option",{value:n,children:n.replace("-"," ").replace("SFX_","")},n))})]})})}const Die=["circle","border","line"];function Gie({instrument:e,onChange:t,onDelete:r,onClose:n,onChangePosition:i,currentLayer:o,instruments:s}){const a=oa(n,{active:!0,ignoreFocusable:!0});return e?k("div",{className:"floating-instrument-settings box-shadow",ref:a,children:[k("div",{className:"row space-between",children:["Layer name",v("input",{type:"text",maxLength:50,className:"input",style:{width:"7.4rem"},value:e.alias,onChange:l=>t(e.set({alias:l.target.value})),placeholder:e.name})]}),k("div",{className:"row space-between",style:{marginTop:"0.4rem"},children:["Instrument",v(A7,{style:{width:"8rem"},selected:e.name,onChange:l=>t(e.set({name:l}))})]}),k("div",{className:"row space-between",style:{marginTop:"0.4rem"},children:["Pitch",v(k4,{style:{padding:"0.3rem",width:"8rem"},selected:e.pitch,onChange:l=>t(e.set({pitch:l})),children:v("option",{value:"",children:"Use song pitch"})})]}),k("div",{className:"row space-between",style:{marginTop:"0.4rem"},children:["Note icon",v("select",{className:"select",style:{padding:"0.3rem",width:"8rem"},value:e.icon,onChange:l=>t(e.set({icon:l.target.value})),children:Die.map(l=>v("option",{value:l,children:ky(l)},l))})]}),k("div",{className:"row",style:{marginTop:"1rem",alignItems:"center"},children:["Volume",k("span",{style:{marginLeft:"0.4rem",width:"3rem",...e.volume>100&&{color:`hsl(0, ${-40+e.volume}%, 61%)`,marginLeft:"0.4rem"}},children:[e.volume,"%"]}),v(Lu,{buttonStyle:{width:"1.2rem",height:"1.2rem"},width:10,children:"If you hear distortion, reduce the volume"})]}),k("div",{className:"row",children:[v("input",{type:"range",style:{flex:"1",opacity:e.muted?"0.6":"1"},min:0,max:125,value:e.volume,onChange:l=>t(e.set({volume:Number(l.target.value)}))}),v(Be,{className:"flex-centered",toggled:e.muted,style:{padding:0,minWidth:"unset",width:"1.6rem",height:"1.6rem",borderRadius:"2rem"},onClick:()=>{e.volume===0&&!e.muted||t(e.set({muted:!e.muted}))},children:e.muted||e.volume===0?v(fy,{}):v(yA,{})})]}),k("div",{className:"row space-between",style:{marginTop:"1rem"},children:[k(Be,{onClick:()=>i(-1),disabled:o===0,className:"flex-centered",style:{padding:"0.5rem",flex:"1",marginRight:"0.4rem"},children:[v(nA,{style:{marginRight:"0.2rem"}})," Move up"]}),k(Be,{onClick:()=>i(1),disabled:o===s.length-1,className:"flex-centered",style:{padding:"0.5rem",flex:"1"},children:[v(tA,{style:{marginRight:"0.2rem"}})," Move down"]})]}),k("div",{className:"row space-between",style:{marginTop:"0.4rem"},children:[k(Be,{className:"row-centered",style:{padding:"0.4rem",width:"fit-content"},onClick:r,children:[v(to,{color:"var(--red)",style:{marginRight:"0.3rem"}}),"Delete"]}),v(Be,{onClick:n,style:{padding:"0.4rem",width:"fit-content"},children:"Ok"})]})]}):v("div",{className:"floating-instrument-settings  box-shadow",children:"No instrument selected"})}function jie({instruments:e,onInstrumentAdd:t,onInstrumentChange:r,onInstrumentDelete:n,selected:i,onLayerSelect:o,onChangePosition:s}){const[a]=en(),[l,u]=M.exports.useState(!1),c=M.exports.useCallback(()=>{u(!1)},[]);return k(je,{children:[l&&v(Gie,{instrument:e[i],currentLayer:i,instruments:e,onChange:f=>r(f,i),onDelete:()=>{n(i),c()},onChangePosition:s,onClose:c}),k("div",{className:"column instruments-button-wrapper",children:[e.map((f,p)=>v(Hie,{theme:a,instrument:f,isSelected:p===i,onEditClick:()=>u(!l),onClick:()=>o(p),onVisibleToggle:m=>r(f.set({visible:m}),p)},f.name+p)),v("div",{style:{minHeight:"1rem"}}),v(Be,{onClick:f=>{t(),setTimeout(()=>{var p;(p=f.target)==null||p.scrollIntoView()},50)},ariaLabel:"Add new instrument",className:"new-instrument-button flex-centered",children:v(uu,{size:16,color:"var(--icon-color)"})})]})]})}const $ie=M.exports.memo(jie,(e,t)=>e.instruments===t.instruments&&e.selected===t.selected);function Hie({instrument:e,onClick:t,isSelected:r,theme:n,onEditClick:i,onVisibleToggle:o}){const s=M.exports.useRef(null);M.exports.useEffect(()=>{!r||!s.current||s.current.scrollIntoView({behavior:"auto",block:"nearest"})},[r,s]);let a=n.getText("primary");return a=a.isDark()?a.lighten(.2):a.darken(.15),k("div",{ref:s,className:`instrument-button flex-centered ${r?"instrument-button-selected":""}`,style:r?{backgroundColor:n.get("primary").mix(n.get("accent")).toString()}:{},children:[!r&&k("div",{className:"row",style:{position:"absolute",gap:"0.2rem",top:"0.2rem",left:"0.3rem"},children:[!e.visible&&v(Mb,{color:a.hex(),size:14}),e.muted&&v(fy,{color:a.hex(),size:14})]}),!r&&k("div",{style:{position:"absolute",top:"0.4rem",right:"0.4rem",height:"fit-content"},children:[e.icon==="circle"&&v(YF,{size:8,style:{display:"block"},color:a.hex()}),e.icon==="border"&&v(Bie,{size:12,style:{display:"block",marginRight:"-2px",marginTop:"-2px",strokeWidth:"2px"},color:a.hex()}),e.icon==="line"&&v(hy,{size:8,style:{display:"block"},color:a.hex()})]}),v(Be,{onClick:t,style:{backgroundColor:"transparent",width:"100%"},className:"flex-grow flex-centered instrument-name-button",children:v("span",{className:"text-ellipsis",style:{width:"6rem"},children:e.alias||e.name})}),r&&k("div",{className:"instrument-settings",children:[v(Be,{onClick:()=>i(),ariaLabel:"Settings",className:"flex-centered",children:v(Eu,{size:15})}),v(Be,{onClick:()=>o(!e.visible),ariaLabel:e.visible?"Hide":"Show",className:"flex-centered",children:e.visible?v(uA,{size:16}):v(Mb,{size:16})})]})]})}class zie extends M.exports.Component{constructor(t){super(t),this.init=async()=>{var i,o,s;const{settings:n}=this.state;await this.syncInstruments(),this.mounted&&await bt.init(),bt.setReverb(n.caveMode.value),gr.addListener(this.handleMidi),this.registerKeyboardListeners();try{const a=(s=(o=(i=this.props)==null?void 0:i.history)==null?void 0:o.location)==null?void 0:s.state,l=a==null?void 0:a.songId;if(!l)return;const u=await it.getSongById(l);if(!u)return;this.loadSong(u)}catch(a){console.log("Error loading song"),console.error(a)}},this.registerKeyboardListeners=()=>{const n="composer";Xe.registerLetter("D",()=>{this.state.isPlaying||this.selectColumn(this.state.song.selected+1)},{id:n}),Xe.registerLetter("A",()=>{this.state.isPlaying||this.selectColumn(this.state.song.selected-1)},{id:n}),Xe.registerLetter("Q",()=>{this.state.isPlaying||this.removeColumns(1,this.state.song.selected)},{id:n}),Xe.registerLetter("E",()=>{this.state.isPlaying||this.addColumns(1,this.state.song.selected)},{id:n}),rl.forEach((i,o)=>{Xe.registerNumber(o+1,()=>this.handleTempoChanger(i),{id:n})}),Xe.register("ArrowUp",()=>{const i=this.state.layer-1;i>=0&&this.changeLayer(i)},{id:n}),Xe.register("ArrowDown",()=>{const i=this.state.layer+1;i<this.state.layers.length&&this.changeLayer(i)},{id:n}),Xe.register("Space",({event:i})=>{var o,s,a,l;i.repeat||(((o=i.target)==null?void 0:o.tagName)==="BUTTON"&&((s=i.target)==null||s.blur()),this.togglePlay(),this.state.settings.syncTabs.value&&((l=(a=this.broadcastChannel)==null?void 0:a.postMessage)==null||l.call(a,this.state.isPlaying?"play":"stop")))},{id:n}),Xe.listen(({event:i,letter:o})=>{if(i.repeat)return;const{isPlaying:s}=this.state;if(s||i.shiftKey){const l=this.currentInstrument.getNoteFromCode(o);l!==null&&this.handleClick(l)}},{id:n})},this.handleUnload=n=>{n.preventDefault(),n.returnValue=""},this.handleAutoSave=()=>{this.changes++,this.changes>5&&this.state.settings.autosave.value&&this.state.song.name!=="Untitled"&&this.updateSong(this.state.song)},this.handleMidi=([n,i,o])=>{if(!this.mounted)return;const{song:s,layer:a}=this.state;if(gr.isDown(n)&&o!==0){gr.settings.notes.filter(c=>c.midi===i).forEach(c=>{this.handleClick(this.currentInstrument.notes[c.index])});const u=gr.settings.shortcuts.find(c=>c.midi===i);if(!u)return;switch(u.type){case"toggle_play":this.togglePlay();break;case"next_column":this.selectColumn(s.selected+1);break;case"previous_column":this.selectColumn(s.selected-1);break;case"add_column":this.addColumns(1,s.selected);break;case"remove_column":this.removeColumns(1,s.selected);break;case"change_layer":{let c=a+1;c>=this.state.layers.length&&(c=0),this.changeLayer(c);break}}}},this.updateSettings=n=>{fn.updateComposerSettings(n!==void 0?n:this.state.settings)},this.handleSettingChange=({data:n,key:i})=>{const{song:o,settings:s}=this.state;s[i]={...s[i],value:n.value},n.songSetting&&(o[i]=n.value),i==="caveMode"&&bt.setReverb(n.value),this.setState({settings:{...s},song:o},this.updateSettings)},this.addInstrument=()=>{const{song:n}=this.state;if(n.instruments.length>=30)return me.error("You can't add more than 30 instruments!");n.addInstrument(Ar[0]),this.setState({song:n}),this.syncInstruments(n)},this.removeInstrument=async n=>{const{song:i,layers:o}=this.state;if(o.length<=1)return me.warn("You can't remove all layers!");await Br(`Are you sure you want to remove ${o[n].name}? ALL NOTES OF THIS LAYER WILL BE DELETED`)&&(i.removeInstrument(n),this.syncInstruments(i),this.setState({song:i,layer:Math.max(0,n-1)}))},this.editInstrument=(n,i)=>{const{song:o}=this.state;o.instruments[i]=n.clone(),o.instruments=[...o.instruments],this.syncInstruments(o),this.setState({song:o})},this.syncInstruments=async n=>{const{layers:i}=this.state;n||(n=this.state.song),i.splice(n.instruments.length).forEach(l=>{bt.disconnect(l.endNode),l.dispose()});const s=n.instruments.map(async(l,u)=>{if(i[u]===void 0){const c=new Gn(l.name);return i[u]=c,await c.load()||me.error("There was an error loading the instrument"),this.mounted?(bt.connect(c.endNode),c.changeVolume(l.volume),c):c.dispose()}if(i[u].name===l.name)return i[u].changeVolume(l.volume),i[u];{const c=i[u];bt.disconnect(c.endNode),c.dispose();const f=new Gn(l.name);return i[u]=f,await f.load()||me.error("There was an error loading the instrument"),this.mounted?(bt.connect(f.endNode),f.changeVolume(l.volume),f):f.dispose()}});if(!this.mounted)return;const a=await Promise.all(s);this.setState({layers:a})},this.changeVolume=n=>{const i=this.state.settings,o=Number(n.key.split("layer")[1])-1;i[n.key]={...i[n.key],volume:n.value},this.state.layers[o].changeVolume(n.value),this.setState({settings:{...i}},this.updateSettings)},this.startRecordingAudio=async n=>{if(!this.mounted)return;if(!n)return this.setState({isRecordingAudio:!1}),this.togglePlay(!1);if(bt.startRecording(),this.setState({isRecordingAudio:!0}),await Ks(300),await this.togglePlay(!0),!this.mounted)return;this.setState({isRecordingAudio:!1});const i=await bt.stopRecording();if(!i)return;const o=await En("Write the song name, press cancel to ignore");o&&R4.downloadBlob(i.data,o+".wav")},this.playSound=(n,i)=>{const o=this.state.layers[n],s=o==null?void 0:o.notes[i];if(s===void 0||this.state.song.instruments[n].muted)return;const a=this.state.song.instruments[n].pitch||this.state.settings.pitch.value;o.play(s.index,a)},this.changePitch=n=>{const{settings:i}=this.state;i.pitch={...i.pitch,value:n},this.setState({settings:{...i}},this.updateSettings)},this.handleClick=n=>{const{song:i,layer:o}=this.state,s=i.selectedColumn,a=s.getNoteIndex(n.index);if(a===null)s.addNote(n.index).setLayer(o,!0);else{const l=s.notes[a];l.toggleLayer(o),l.layer.isEmpty()&&s.removeAtIndex(a)}this.setState({song:i}),this.handleAutoSave(),this.playSound(o,n.index)},this.renameSong=async(n,i)=>{const{song:o}=this.state;await At.renameSong(i,n),this.state.song.id===i&&(o.name=n,this.setState({song:o}))},this.addSong=async n=>{const i=await At.addSong(n);return n.id=i,n},this.updateSong=async n=>{if(n.name==="Untitled"){const i=await En("Write song name, press cancel to ignore");return i===null||!this.mounted?!1:(n.name=i,this.changes=0,this.setState({}),await this.addSong(n),!0)}return new Promise(async i=>{const o=await it.getSongById(n.id);if(o)n.folderId=o.folderId,await At.updateSong(n),console.log("song saved:",n.name),this.changes=0,this.setState({});else{if(n.name.includes("- Composed")){const s=await En("Write the song name for the composed version, press cancel to ignore");return s===null?i(!1):(n.name=s,this.addSong(n),i(!0))}console.log("song doesn't exist"),n.name="Untitled",this.updateSong(n)}i(!0)})},this.updateThisSong=async()=>{this.updateSong(this.state.song)},this.askForSongUpdate=async()=>await Br(`You have unsaved changes to the song: "${this.state.song.name}" do you want to save now?`,!1),this.createNewSong=async()=>{if(this.state.song.name!=="Untitled"&&this.changes>0){const s=await this.askForSongUpdate();if(s===null)return;s&&await this.updateSong(this.state.song)}const n=await En("Write song name, press cancel to ignore");if(n===null)return;const i=new Kr(n,[Ar[0],Ar[0],Ar[0]]);if(this.changes=0,!this.mounted)return;const o=await this.addSong(i);!this.mounted||(this.setState({song:o,layer:0}),Cn.songEvent({type:"create"}))},this.loadSong=async n=>{const i=this.state;let o=null;if(n instanceof Kr?o=n:(n.type==="recorded"&&(o=Nn.deserialize(n).toComposedSong(4),o.name+=" - Composed"),n.type==="composed"&&(o=Kr.deserialize(n))),!o)return;if(this.changes!==0){let a=i.settings.autosave.value&&i.song.name!=="Untitled";if(!a&&i.song.columns.length>0){const l=await Br(`You have unsaved changes to the song: "${i.song.name}" do you want to save? UNSAVED CHANGES WILL BE LOST`,!1);if(l===null)return;a=l}if(a&&(await this.updateSong(i.song),i.song.name===o.name))return}const s=this.state.settings;s.bpm={...s.bpm,value:n.bpm},s.pitch={...s.pitch,value:n.pitch},this.mounted&&(this.changes=0,console.log("song loaded"),this.setState({layer:0,song:o,settings:{...s},selectedColumns:[]},()=>this.syncInstruments()))},this.addColumns=(n=1,i="end")=>new Promise(o=>{const{song:s}=this.state;s.addColumns(n,i),n===1&&this.selectColumn(s.selected+1),this.handleAutoSave(),this.setState({song:s},o)}),this.removeColumns=(n,i)=>{const{song:o,settings:s}=this.state;o.columns.length<s.beatMarks.value*4||(o.removeColumns(n,i),o.columns.length<=o.selected&&this.selectColumn(o.selected-1),this.handleAutoSave(),this.setState({song:o}))},this.togglePlay=async n=>new Promise(i=>{const o=typeof n=="boolean"?n:!this.state.isPlaying;this.setState({isPlaying:o},async()=>{this.state.isPlaying&&this.selectColumn(this.state.song.selected);let s=0,a=Date.now();for(;this.state.isPlaying;){const{song:l,settings:u}=this.state,c=l.selectedColumn.getTempoChanger().changer,f=Math.floor(6e4/u.bpm.value*c)+s;if(a=Date.now(),await Ks(f),!this.state.isPlaying||!this.mounted)break;this.handleTick(),s=a+f-Date.now()}i()})}),this.handleTick=()=>{const n=this.state.song.selected+1;if(this.state.isPlaying&&n>this.state.song.columns.length-1)return this.togglePlay(!1);this.selectColumn(n)},this.toggleBreakpoint=n=>{const{song:i}=this.state;i.toggleBreakpoint(n),this.validateBreakpoints(),this.setState({song:i})},this.handleTempoChanger=n=>{const{song:i,selectedColumns:o}=this.state;o.length?(this.addToHistory(),o.forEach(s=>{var a;(a=i.columns[s])==null||a.setTempoChanger(n)})):i.selectedColumn.setTempoChanger(n),this.handleAutoSave(),this.setState({song:i})},this.changePage=async n=>{const{song:i,settings:o}=this.state;if(n==="Home")return ln.open();if(this.changes!==0){if(o.autosave.value)await this.updateSong(i);else if(await Br(`You have unsaved changes to the song: "${i.name}" do you want to save? UNSAVED CHANGES WILL BE LOST`,!1)&&!await this.updateSong(i))return console.log("Blocking redirect")}this.unblock(),this.props.history.push(n)},this.selectColumn=(n,i)=>{const{song:o,isToolsVisible:s,layers:a,copiedColumns:l}=this.state;let u=this.state.selectedColumns;if(!(n<0||n>o.columns.length-1)){if(o.selected=n,s&&l.length===0){u.push(n);const c=Math.min(...u),f=Math.max(...u);u=new Array(f-c+1).fill(0).map((p,m)=>c+m)}this.setState({song:o,selectedColumns:u}),!i&&o.selectedColumn.notes.forEach(c=>{a.forEach((f,p)=>{c.isLayerToggled(p)&&this.playSound(p,c.index)})})}},this.selectColumnFromDirection=n=>{this.selectColumn(this.state.song.selected+n)},this.changeLayer=n=>{this.setState({layer:n})},this.toggleTools=()=>{this.setState({isToolsVisible:!this.state.isToolsVisible,selectedColumns:this.state.isToolsVisible?[]:[this.state.song.selected],copiedColumns:[],undoHistory:[]})},this.resetSelection=()=>{this.setState({copiedColumns:[],selectedColumns:[this.state.song.selected]})},this.addToHistory=()=>{const{song:n,undoHistory:i,isToolsVisible:o}=this.state;!o||this.setState({undoHistory:[...i,n.clone().columns]})},this.undo=()=>{const{undoHistory:n,song:i}=this.state,o=n.pop();!o||(i.columns=o,i.selected=i.columns.length>i.selected?i.selected:i.columns.length-1,this.setState({undoHistory:[...n],song:i}))},this.copyColumns=n=>{const{selectedColumns:i,song:o}=this.state,s=o.copyColumns(i,n);this.changes++,this.setState({selectedColumns:[],copiedColumns:s})},this.pasteColumns=async(n,i)=>{const{song:o,copiedColumns:s}=this.state;this.addToHistory(),i==="all"?o.pasteColumns(s,n):Number.isFinite(i)&&o.pasteLayer(s,n,i),this.syncInstruments(),this.changes++,this.setState({song:o})},this.eraseColumns=n=>{const{song:i,selectedColumns:o}=this.state;this.addToHistory(),i.eraseColumns(o,n),this.changes++,this.setState({song:i,selectedColumns:[i.selected]})},this.moveNotesBy=(n,i)=>{const{song:o,selectedColumns:s}=this.state;this.addToHistory(),o.moveNotesBy(s,n,i),this.changes++,this.setState({song:o})},this.switchLayerPosition=n=>{const{song:i,layer:o}=this.state,s=o+n;if(s<0||s>i.instruments.length-1)return;i.swapLayer(i.columns.length,0,o,s);const a=i.instruments[o];i.instruments[o]=i.instruments[s],i.instruments[s]=a,i.instruments=[...i.instruments],this.changes++,this.syncInstruments(),this.setState({song:i,layer:s})},this.deleteColumns=async()=>{const{song:n,selectedColumns:i}=this.state;this.addToHistory(),n.deleteColumns(i),this.changes++,this.setState({song:n,selectedColumns:[n.selected]},this.validateBreakpoints)},this.validateBreakpoints=()=>{const{song:n}=this.state;n.validateBreakpoints(),this.setState({song:n})},this.changeMidiVisibility=n=>{this.setState({isMidiVisible:n}),n&&Cn.songEvent({type:"create_MIDI"})};const r=fn.getComposerSettings();this.state={layers:[new Gn(Ar[1])],isPlaying:!1,song:new Kr("Untitled",[Ar[0],Ar[0],Ar[0]]),settings:r,layer:0,selectedColumns:[],undoHistory:[],copiedColumns:[],isToolsVisible:!1,isMidiVisible:!1,isRecordingAudio:!1,theme:Se},this.state.song.bpm=r.bpm.value,this.mounted=!1,this.changes=0,this.broadcastChannel=null,this.unblock=()=>{}}get currentInstrument(){return this.state.layers[this.state.layer]}componentDidMount(){this.mounted=!0,this.init(),this.broadcastChannel=window.BroadcastChannel?new BroadcastChannel(Ae+"_composer"):null,this.broadcastChannel&&this.broadcastChannel.addEventListener("message",t=>{!this.state.settings.syncTabs.value||!["play","stop"].includes(t==null?void 0:t.data)||this.togglePlay(t.data==="play")}),this.unblock=this.props.history.block(t=>{if(this.changes!==0)return this.changePage(t.pathname),!1}),window.location.hostname!=="localhost"&&window.addEventListener("beforeunload",this.handleUnload)}componentWillUnmount(){var n,i;const{state:t}=this,{layers:r}=t;this.mounted=!1,bt.clear(),r.forEach(o=>o.dispose()),(i=(n=this.broadcastChannel)==null?void 0:n.close)==null||i.call(n),t.isPlaying=!1,this.unblock(),Xe.unregisterById("composer"),gr.removeListener(this.handleMidi),bt.isRecording&&bt.stopRecording(),window.location.hostname!=="localhost"&&window.removeEventListener("beforeunload",this.handleUnload)}render(){var m;const{isMidiVisible:t,song:r,isPlaying:n,copiedColumns:i,settings:o,isRecordingAudio:s,isToolsVisible:a,layer:l,selectedColumns:u,layers:c,undoHistory:f}=this.state,p=bG(r.columns,o.bpm.value,r.selected);return k(je,{children:[v(An,{text:`Composer - ${r.name}`}),t&&v(WY,{functions:this,data:{instruments:r.instruments,selectedColumn:r.selected}}),k("div",{className:"composer-grid",children:[k("div",{className:"column composer-left-control",children:[v(Be,{className:"flex-centered",style:{height:"3rem",borderRadius:"0.3rem",backgroundColor:"var(--primary-darken-10)"},onClick:g=>{var b,y;this.togglePlay(),o.syncTabs.value&&((y=(b=this.broadcastChannel)==null?void 0:b.postMessage)==null||y.call(b,n?"stop":"play"))},ariaLabel:n?"Pause":"Play",children:v(Ct,{children:n?v(hA,{size:18,color:"var(--icon-color)"},"pause"):v(fA,{size:18,color:"var(--icon-color)"},"play")})}),v($ie,{instruments:r.instruments,selected:l,onLayerSelect:this.changeLayer,onInstrumentAdd:this.addInstrument,onInstrumentChange:this.editInstrument,onInstrumentDelete:this.removeInstrument,onChangePosition:this.switchLayerPosition})]}),v("div",{className:"top-panel-composer",style:{gridArea:"b"},children:k("div",{className:"row",style:{height:"fit-content",width:"100%"},children:[v(Oie,{functions:this,data:{inPreview:this.props.inPreview,isRecordingAudio:s,currentLayer:l,isPlaying:n,song:r,settings:o,selectedColumns:u,columns:r.columns,selected:r.selected,breakpoints:r.breakpoints}},o.columnsPerCanvas.value),k("div",{className:"buttons-composer-wrapper-right",children:[v(Hv,{onClick:()=>this.addColumns(1,r.selected),tooltip:"Add column",ariaLabel:"Add column",children:v(Ct,{children:v(zY,{className:"tool-icon"})})}),v(Hv,{onClick:()=>this.removeColumns(1,r.selected),tooltip:"Remove column",ariaLabel:"Remove column",children:v(Ct,{children:v(VY,{className:"tool-icon"})})}),v(Hv,{onClick:()=>this.addColumns(Number(o.beatMarks.value)*4,"end"),tooltip:"Add new page",ariaLabel:"Add new page",children:v(Ct,{children:v(uu,{size:16})})}),v(Hv,{onClick:this.toggleTools,tooltip:"Open tools",ariaLabel:"Open tools",children:v(Ct,{children:v(uM,{size:16})})})]})]})}),v(JY,{functions:this,data:{isPlaying:n,settings:o,isRecordingAudio:s,currentLayer:l,instruments:r.instruments,keyboard:c[l],currentColumn:r.selectedColumn,pitch:((m=r.instruments[l])==null?void 0:m.pitch)||o.pitch.value,noteNameType:o.noteNameType.value}})]}),v(Mie,{data:{isRecordingAudio:s,settings:o,hasChanges:this.changes>0},functions:this}),v(qY,{data:{isToolsVisible:a,layer:l,hasCopiedColumns:i.length>0,selectedColumns:u,undoHistory:f},functions:this}),k("div",{className:"song-info",children:[v("div",{className:"text-ellipsis",children:r.name}),k("div",{children:[uC(p.current),"/",uC(p.total)]})]})]})}}const R7=Th(zie);function k7({children:e=void 0,className:t=""}){const r=H3();return v("div",{className:"menu-wrapper "+t,children:k("div",{className:"menu menu-visible",style:{justifyContent:"flex-end"},children:[E4.hasNavigated&&v(Nt,{style:{marginBottom:"auto"},onClick:()=>{r.goBack()},ariaLabel:"Go back",children:v(rA,{className:"icon"})}),e,v(Nt,{ariaLabel:"Go to discord",children:v("a",{href:"https://discord.gg/Arsf65YYHq",target:"_blank",rel:"noreferrer",children:v(Q8,{className:"icon"})})}),v(Nt,{onClick:ln.open,ariaLabel:"Open home menu",children:v(Cu,{className:"icon"})})]})})}function so({excludeMenu:e=!1,children:t,className:r="",style:n}){return k("div",{className:"default-page "+r,style:n,children:[!e&&v(k7,{}),v("div",{className:"default-content",children:t})]})}function Vie(){const[e]=Uu(),t=Ya(Vd.logs);return k(so,{className:"error-page",children:[v(An,{text:"Error"}),k("div",{style:{textAlign:"center"},children:["If you unexpectedly see this page it means an error has occoured. Here you can download or delete your songs, if one caused an error, delete it. If you need help, join our",v("a",{href:"https://discord.gg/Arsf65YYHq",target:"_blank",rel:"noreferrer",style:{margin:"0 0.4rem",color:"var(--accent)"},children:"Discord"}),"and send the log file below."]}),k("div",{className:"error-buttons-wrapper",children:[v(Be,{onClick:()=>{localStorage.removeItem(Ae+"_Composer_Settings"),localStorage.removeItem(Ae+"_Main_Settings"),me.success("Settings have been reset")},children:"Reset settings"}),v(Be,{onClick:async()=>{await Br("Are you sure you want to delete ALL SONGS?")&&await At._DANGEROUS_CLEAR_ALL_SONGS()},children:"Delete all songs"})]}),v("div",{className:"error-songs-wrapper",children:v(mu,{SongComponent:Xie,songs:e,componentProps:{deleteSong:async(s,a)=>{await Br("Are you sure you want to delete the song: "+s)&&await At.removeSong(a)},download:s=>{try{const a=s.name,l=it.parseSong(s),u=[Ae==="Sky"&&(l instanceof Kr||l instanceof Nn)?l.toOldFormat():l.serialize()];fr.downloadSong(u,`${a}.${Ae.toLowerCase()}sheet`),me.success("Song downloaded")}catch(a){console.error(a),me.error("Error downloading song")}}}})}),k("div",{className:"row space-between",style:{margin:"1rem 0"},children:[v("div",{style:{fontSize:"2rem"},children:"Error logs"}),v(Be,{onClick:()=>{const s=Vd.logs.map(a=>a.message);fr.downloadObject(s,`${Ae}_logs`)},children:"Download logs"})]}),v("div",{className:"error-logs",children:t.map((s,a)=>v("div",{className:"error-log-row row",children:s.message},a))})]})}function Xie({data:e,deleteSong:t,download:r}){return k("div",{className:"song-row",children:[v("div",{className:"song-name",children:e.name}),k("div",{className:"song-buttons-wrapper",children:[v("button",{className:"song-button",onClick:async()=>{const n=await it.getOneSerializedFromStorable(e);if(!n)return me.error("Could not find song");r(n)},"aria-label":`Download song ${e.name}`,children:v(ns,{})}),v("button",{className:"song-button",onClick:()=>t(e.name,e.id),"aria-label":`Delete song ${e.name}`,children:v(to,{color:"#ed4557"})})]})]})}function Wie({version:e,title:t,changes:r,date:n}){return k("div",{children:[k("div",{className:"changelog-title",children:[v("div",{className:"clt-1",children:e}),v("div",{className:"clt-2",children:n})]}),k("div",{className:"changelog-list",children:[v("div",{className:"cll-1",children:t}),v("ul",{children:r.map((i,o)=>v("li",{children:i.split("$l").map((s,a)=>a===0?v("div",{children:s},a):v("p",{className:"cll-new-line",children:s},a))},o))})]})]})}const Yie=[{version:"3.1.0",title:"Aurora, transparency and layouts",date:"2022 - 16/02",changes:["Added aurora (Sky)","Added switch/playstation layouts (Sky)","Added backup warnings","Added tranparency to themes","Bug fixes and improvements"]},{version:"3.0.1",title:"Performance and bug fixes",date:"2022 - 01/11",changes:["Fixed an IOS bug preventing audio from playing","Improved performance for users that have many songs","Added tempo changer quick selection in the composer tools","Other bug fixes and improvements"]},{version:"3.0",title:"VSRG mode, Zen keyboard, Calls and more!",date:"2022 - 18/09",changes:["Added VSRG mode to compose and play vsrg songs","Added Zen keyboard, where you can simply focus on playing by hand","Added Visual sheet to the player","Added app scaling","Added alphabetical folder ordering","Added backup page","(Genshin) added vintage lyre","(Sky) Added SFX of the calls and dance emote","Changed metronome sounds","Improved player performance","Multi type export, you can now export/import songs, folders, themes etc","Fixed bug that would remove a song from the folder when saved","Fixed bug that would not play audio","Fixed issues when opening/saving songs in the composer","Fixed bug in pasting notes in the composer","Exporting a song would not work in sky music and sky studio","Other bug fixes and features..."]},{version:"2.8",title:"More Composer layers and UI rework",date:"2022 - 7/07",changes:["Increased instrument limit in the composer to 30","Redesigned the tools in the composer","Added UNDO to the composer tools","Added paste/insert to certain layer","Added tool to move notes up/down","Added metronome in player","Added multiple instruments in player","Added more tooltips, also for mobile","Bug fixes and improvements"]},{version:"2.7",title:"Song rename, MIDI export, folders",date:"2022 - 15/06",changes:["Added option to rename songs","Song names are not unique anymore","Added folders and new song menu UI","Added MIDI export of a song (DO NOT USE INSTEAD OF NORMAL FORMAT)","Improved song playback in the player","Fixed some bugs"]},{version:"2.6",title:"Light guitar & Tooltips",date:"2022 - 30/05",changes:["Added tooltips","Added help buttons","Added Light guitar (Sky, notes can't be held)","Bug fixes for main page loading songs","Added drag and drop in the composer","Composer on pc now resizes with the page","Fixed some bugs"]},{version:"2.5",title:"Composer improvements",date:"2022 - 27/03",changes:["Improved the rendering of the composer to be sherper and easier to see on mobile","Improved performance in the composer","Added 4th layer in the composer","Added theming of more parts of the composer","App rewrite in TypeScript","Bug fixes"]},{version:"2.4",title:"Multi Slider and Themes",date:"2022 - 15/02",changes:["Added app themes, fully customise the look of the app","Added start and end slider for selecting which part of the song to play/practice","Bug fixes"]},{version:"2.3",title:"MIDI Keyboard and Performance",date:"2022 - 3/02",changes:["Added MIDI Keyboard support on all pages with custom layouts and shortcuts","Big performance improvements of main page","Added note names to sheet visualizer and empty cells","Added ABC format","Added Panflute (Sky)","UI improvements and bug fixes"]},{version:"2.2",title:"Sheet visualizer",date:"2022 - 17/01",changes:["Added sheet visualizer","Changed timeline behaviour when dragging the scroll bar","Improved performance by 2 times in some places","UI improvements and bug fixes"]},{version:"2.1.1",title:"Zither and icons",date:"2021 - 16/12",changes:["Changed note icon and animation (Genshin)","Added Help page","Changed zither audio (Genshin)","UI improvements"]},{version:"2.1",title:"Home menu and pages",date:"2021 - 11/12",changes:["Restructured code","Added opacity to some elements","Changed margins and padding of some elements","Added home page","Added Partners page","Added shortcuts for main page","Fixed loading bug in composer and main page","Added Donate page"]},{version:"2.0",title:"Approaching circles",date:"2021 - 28/11",changes:[`Added Approaching cirlces mode, a new way to learn a song, or a way to challange yourself.
            You can find it in the main page, next to the practice button`,"Rewrite of the main page to increase overall performance","Added changelog page","Added audio recording feature in main page and composer","Added tabs autoplay (composer) on pc as a setting","Added note animations when pressing the note","Added possibility to change background image from URL","Updated info page","In the composer you can now press shift + note name to add a note","In the composer you can press up/down keys to change layer",'While in the composer on PC, you can now add new notes by simply pressing the PC keyboard while in "playing" mode']},{version:"1.7",title:"Zither",date:"2021 - 20/10",changes:["(For genshin) Added Zither",'Added back "do re mi" format']},{version:"1.6",title:"Performance tweaks",date:"2021 - 17/10",changes:["Performance of composer improved by 2x","Added note names for genshin (made it a setting)","Fixed instrument volume bug","Fixed keyboard layout issues","Fixed other small bugs"]},{version:"1.5",title:"MIDI import",date:"2021 - 14/10",changes:[`Added to both Sky and Genshin music nightly the MIDI import feature $l
            - Music track selection (select or deselect which tracks to include) $l
            - Instrument track selection (select what instrument to give to each track) $l
            - Track info (get info on how successful your parsing was, accidentals and notes out of range) $l
            - Change note offset (in case that the song is outside of the octaves available) 
            `]},{version:"1.4",title:"Song library",date:"2021 - 28/08",changes:["Added song library integration, directly import songs from the app (700+ songs)","Bug fixes"]},{version:"1.3",title:"New audio files",date:"2021 - 25/08",changes:["Changed audio files","Added ocarina","Removed support button in TWA","Bug fixes"]},{version:"1.2",title:"Bug fixes and PWA",date:"2021 - 18/08",changes:["(For sky) Fixed bug where sheets couldn't be imported in sky studio","Changed app install to more modern approach with description and images"]},{version:"1.1",title:"Sheets compatibility",date:"2021 - 07/08",changes:["(For sky) Added backwards compatibility for sheets, now sheets made in sky music nightly can be imported into sky music and sky studio (with some losses)","Bug fixes","General improvement in performance"]},{version:"1.0",title:"Release",date:"2021 - 22/05",changes:["3 Instruments composition","Better performance than previous version","Better practice tool","Better interface","Breakpoints for the composer","New features for both composer and main page","Feature rich customisability to make learning and composition easier"]}],Kie="2023-1-17-16-5-52";function qie(){return k(so,{excludeMenu:!0,children:[v(k7,{children:v(Nt,{ariaLabel:"Go to github",children:v("a",{href:"https://github.com/Specy/genshin-music",className:"icon",target:"_blank",rel:"noreferrer",children:v(eA,{})})})}),v(An,{text:`Changelog V${ks}`}),k("div",{className:"changelog-page-title",children:["Changelog",k("span",{style:{fontSize:"1.2rem",marginLeft:"1rem"},children:["v",ks]})]}),k("div",{className:"row",style:{fontSize:"0.8rem",justifyContent:"space-between",alignItems:"center"},children:["Cache: ",Kie,v(di,{to:"/Error",children:v(Be,{children:"View Error logs"})})]}),v("div",{style:{marginTop:"2rem"}}),Yie.map(e=>M.exports.createElement(Wie,{...e,key:e.version})),v("div",{className:"changelog-ending"})]})}function Zie(){return k(so,{className:"partners-page",children:[v(An,{text:"Partners"}),k("div",{className:"partner-wrapper",children:[v(zv,{name:"Specy",description:"The youtube channel that collects videos created by users of this app",children:v(G_,{src:"https://www.youtube.com/embed/Sh7kqYVMjwM",title:"Specy"})}),v(zv,{name:"ChaconneScott_ACG",description:"YouTube pianist and arranger, features Genshin Impact OST",children:v(G_,{src:"https://www.youtube.com/embed/ltE8zfGfUVo",title:"ChaconneScott_ACG"})}),v(zv,{name:"uma\u273F",description:"Arranges music, primarily from anime and games for Sky and Genshin.",children:v(G_,{src:"https://www.youtube.com/embed/7aIkAGvp9Y0",title:"uma"})}),v(zv,{name:"Windsong DB",description:"A Genshin Impact Database for Instrument Gadget Keymaps",children:v(Jie,{img:"./assets/images/partners/windsong-db.jpg",to:"https://genshin-lyre.notion.site/genshin-lyre/Windsong-DB-8012b5f6939b486d857552c7b60e917f",alt:"Windsong DB"})})]})]})}function Jie({to:e,img:t,alt:r}){return v("a",{href:e,style:{width:"18.8rem",height:"10.5rem",overflow:"hidden",borderRadius:"0.3rem"},target:"_blank",rel:"noreferrer",children:v("img",{loading:"lazy",src:t,style:{width:"100%",objectFit:"cover"},alt:r})})}function G_({src:e,title:t}){return v("iframe",{src:e,title:t,frameBorder:"0",allow:"autoplay; picture-in-picture",allowFullScreen:!0})}function zv({name:e,description:t,children:r}){return k("div",{className:"partner",children:[v("div",{className:"partner-title",children:e}),v("div",{className:"partner-description",children:t}),r]})}function Qie(){return k(so,{children:[v(An,{text:"Help"}),k("div",{children:[v("div",{style:{fontSize:"2rem",margin:"1rem 0"},children:"Info about the app"}),k("div",{style:{marginLeft:"1rem"},children:["In this page you will find an explaination for what all the buttons in the app do and how to use them.",v("br",{}),v("br",{}),"If you Have issues, bugs, or suggestions, please join our",k("a",{href:"https://discord.gg/Arsf65YYHq",style:{color:"var(--accent)"},children:[v(je,{children:"\xA0"})," Discord server"]}),". ",v("br",{})]}),v(nO,{})]})]})}function eoe({currentSong:e,onSongLoaded:t}){const[r]=Uu(),n=H3(),[i,o]=M.exports.useState(""),s=i==="Songs"?"side-menu menu-open":"side-menu",a=oa(()=>{o("")},{ignoreFocusable:!0,active:i!==""});return k("div",{className:"menu-wrapper noprint",ref:a,children:[k("div",{className:"menu menu-visible",style:{justifyContent:"flex-end"},children:[E4.hasNavigated&&i===""&&v(Nt,{ariaLabel:"Go back",style:{marginBottom:"auto"},onClick:()=>{n.goBack()},children:v(rA,{className:"icon"})}),i!==""&&v(Nt,{ariaLabel:"Close menu",style:{marginBottom:"auto"},onClick:()=>o(""),children:v(eo,{className:"icon"})}),v(Nt,{onClick:()=>{o(i==="Songs"?"":"Songs")},ariaLabel:"Open songs menu",children:v(yp,{className:"icon"})}),v(Nt,{onClick:ln.open,ariaLabel:"Open home menu",children:v(Cu,{className:"icon"})})]}),v("div",{className:s,children:v(si,{children:v(mu,{songs:r,className:"noprint",exclude:["vsrg"],SongComponent:toe,componentProps:{current:e,onClick:t}})})})]})}function toe({data:e,current:t,onClick:r}){const n=(t==null?void 0:t.id)===e.id?{backgroundColor:"rgb(124, 116, 106)"}:{};return v("div",{className:"song-row",style:{...n,padding:"0.5rem 0.8rem"},onClick:async()=>{me.showPill("Loading song...");const i=await it.getOneSerializedFromStorable(e);if(!i)return me.error("Could not load song");r(i),setTimeout(()=>me.hidePill(),300)},children:v("div",{className:"song-name",children:e.name})})}class AN{constructor(t=[],r=0){this.notes=[],this.delay=0,this.notes=t,this.delay=r}}const RN={joined:50,pause:400},roe=new Gn;function noe(){const[e]=en(),[t,r]=M.exports.useState([]),[n,i]=M.exports.useState(7),[o,s]=M.exports.useState(null),[a,l]=M.exports.useState(!1),[u,c]=M.exports.useState(""),[f,p]=M.exports.useState("ABC");function m(y){const w=n+y,x=document.querySelector(".frame-outer");!x||w<1||x.getBoundingClientRect().width<50&&y===1||i(w)}const g=M.exports.useCallback((y,w)=>roe.getNoteText(y,w,"C").toUpperCase(),[]),b=M.exports.useCallback((y,w)=>{try{const x=it.parseSong(y);if(!pG(x))return;const R=(x instanceof Nn?x:x.toRecordedSong()).notes,S=[];let O=0,P="";for(let N=0;R.length>0;N++){const A=new AN([R.shift()]),j=A.notes.length>0?A.notes[0].time:0;for(let G=0;G<R.length&&G<20;G++)R[G].time-A.notes[0].time-RN.joined<0&&(A.notes.push(R.shift()),G--);A.delay=O,O=R.length>0?R[0].time-j:0;const X=Math.floor(A.delay/RN.pause);if(S.push(...new Array(X).fill(0).map(()=>new AN)),S.push(A),P+=X>2?` 

`:"- ".repeat(X),A.notes.length>1){const G=A.notes.map(ne=>g(ne.index,w)).join("");P+=Ae==="Genshin"?`[${G}] `:`${G} `}else A.notes.length>0&&(P+=`${g(A.notes[0].index,w)} `)}c(P),r(S)}catch(x){console.error(x),me.error("Error visualizing song")}Cn.songEvent({type:"visualize"})},[g]);return M.exports.useEffect(()=>{o&&b(o,f)},[o,a,f,b]),k(so,{style:{overflowY:"scroll"},excludeMenu:!0,children:[v(An,{text:"Sheet Visualizer"}),k("div",{style:{display:"flex",alignItems:"center",flexDirection:"column"},children:[v(eoe,{onSongLoaded:s,currentSong:o}),k("div",{className:"displayer-buttons-wrapper noprint",children:[k("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[v("div",{children:"Note names"}),v(Eg,{checked:a,onChange:l}),a&&v(Cg,{value:f,onChange:y=>p(y.target.value),children:dy.map(y=>v("option",{value:y,children:y},y))})]}),k("div",{style:{display:"flex",alignItems:"center"},children:["Per row: ",n,v("button",{className:"displayer-plus-minus",onClick:()=>m(-1),children:"-"}),v("button",{className:"displayer-plus-minus",onClick:()=>m(1),children:"+"})]})]}),v("h1",{className:"onprint",children:o?o==null?void 0:o.name:""}),k("div",{style:{width:"100%"},className:"noprint",children:[k("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[v("h2",{className:"text-ellipsis",children:o?o.name:"No song selected"}),o&&v(Be,{onClick:()=>window.print(),style:{minWidth:"fit-content",marginLeft:"0.4rem"},children:"Print as PDF"})]}),v("div",{style:{color:"var(--background-text)"},children:"Select a song from the menu on the left. Remember that you can learn a song with the interactive practice tool in the Player"})]}),v("div",{className:"displayer-frame-wrapper",style:{gridTemplateColumns:`repeat(${n},1fr)`},children:t.map((y,w)=>v(sO,{keyboardLayout:f,chunk:y,rows:3,theme:e,hasText:a},w))}),u.trim().length>0&&v("pre",{className:"text-notation-wrapper",children:u})]})]})}function ioe({data:e,noteText:t="A",handleClick:r,noteImage:n,clickClass:i="",noteClass:o="",noteRef:s}){const[a,l]=M.exports.useState(kN());M.exports.useEffect(()=>Hn(Se.state.data,()=>{l(kN())}),[]);const u=ooe(e.status,i)+` ${o}`;return v("button",{onPointerDown:c=>{c.preventDefault(),r(e)},className:"button-hitbox-bigger",children:k("div",{ref:s,className:u,style:{borderColor:soe(e.status)},children:[Ae==="Genshin",n&&v(Wy,{name:n,background:e.status==="clicked"?"var(--accent)":"var(--note-background)"}),v("div",{className:Gs.noteName,style:{color:a},children:t})]})})}function ooe(e,t){let r=Gs.note;switch(e){case"clicked":r+=` click-event ${t}`;break}return r}function soe(e){let t="";return e==="clicked"?t="transparent":e==="wrong"?t="#d66969":e==="right"&&(t="#358a55"),t}function kN(){return Se.get("note_background").isDark()?vt.text.light:vt.text.dark}function aoe({status:e,onClick:t,type:r,selected:n,midi:i}){return v(Be,{className:`midi-shortcut ${e}`,toggled:n,onClick:()=>t(r),children:loe(r)+` (${i===-1?"NA":i})`})}function loe(e){var t;return(((t=e[0])==null?void 0:t.toUpperCase())+e.substring(1)).split("_").join(" ")}class up{constructor(t){this.instruments=[],this.audioInstruments=[],this.basePitch="C",this.basePitch=t}destroy(){this.audioInstruments.forEach(t=>{bt.disconnect(t.endNode),t.dispose()})}syncInstruments(t){return this.instruments=t,this.loadInstruments()}async loadInstruments(){const{instruments:t,audioInstruments:r}=this;r.splice(t.length).forEach(o=>{bt.disconnect(o.endNode),o.dispose()});const i=t.map(async(o,s)=>{if(r[s]===void 0){const a=new Gn(o.name);return r[s]=a,await a.load(),bt.connect(a.endNode),a.changeVolume(o.volume),a}if(r[s].name===o.name)return r[s].changeVolume(o.volume),r[s];{const a=r[s];bt.disconnect(a.endNode),a.dispose();const l=new Gn(o.name);return r[s]=l,await l.load(),bt.connect(l.endNode),l.changeVolume(o.volume),l}});return Promise.all(i)}playNoteOfInstrument(t,r,n){const i=this.instruments[t];this.audioInstruments[t].play(r,n!=null?n:i.pitch||this.basePitch)}playNotesOfInstrument(t,r,n){r.forEach(i=>this.playNoteOfInstrument(t,i,n))}}const uoe=new Gn;class coe extends M.exports.Component{constructor(t){super(t),this.init=async()=>{await this.loadInstrument(Ar[0]),await gr.enable(),gr.addInputsListener(this.midiStateChange),gr.addListener(this.handleMidi),this.setState({sources:gr.inputs,selectedSource:gr.currentMIDISource})},this.midiStateChange=r=>{if(!this.mounted)return;const{sources:n}=this.state;n.length>r.length?me.warn("Device disconnected"):r.length>0&&me.warn("Device connected"),this.setState({sources:r})},this.selectMidi=r=>{!this.mounted||!r||(gr.selectSource(r),this.setState({selectedSource:r}),gr.saveSettings())},this.deselectNotes=()=>{const{settings:r}=this.state;r.notes.forEach(n=>{n.status=n.midi<0?"wrong":"right"}),this.setState({settings:r})},this.loadInstrument=async r=>{const{audioPlayer:n}=this.state;if((await n.syncInstruments([new Bn({name:r})])).some(o=>!o))return me.error("Error loading instrument");if(!this.mounted)return n.destroy();this.setState({audioPlayer:n})},this.checkIfUsed=(r,n)=>{const{shortcuts:i,notes:o}=this.state.settings;return!!(i.find(s=>s.midi===r)&&["all","shortcuts"].includes(n)||o.find(s=>s.midi===r)&&["all","notes"].includes(n))},this.handleMidi=([r,n,i])=>{const{selectedNote:o,settings:s,selectedShortcut:a}=this.state;if(gr.isDown(r)&&i!==0){if(o){if(this.checkIfUsed(n,"shortcuts"))return me.warn("Key already used");o.midi=n,this.deselectNotes(),this.setState({selectedNote:null}),gr.saveSettings()}if(a){const c=s.shortcuts.find(f=>f.type===a);if(this.checkIfUsed(n,"all"))return me.warn("Key already used");c&&(c.midi=n,c.status=n<0?"wrong":"right",this.setState({settings:s}),gr.saveSettings())}const l=s.shortcuts.find(c=>c.midi===n);l&&(l.status="clicked",setTimeout(()=>{l.status=n<0?"wrong":"right",this.setState({settings:s})},150),this.setState({settings:s})),s.notes.filter(c=>c.midi===n).forEach(c=>{this.handleClick(c,!0)})}},this.handleClick=(r,n=!1)=>{const{settings:i}=this.state;n||this.deselectNotes(),r.status="clicked",n?(setTimeout(()=>{r.status=r.midi<0?"wrong":"right",this.setState({settings:i})},200),this.setState({settings:i,selectedShortcut:null})):this.setState({settings:i,selectedNote:r,selectedShortcut:null}),this.playSound(r)},this.handleShortcutClick=r=>{if(this.deselectNotes(),this.state.selectedShortcut===r)return this.setState({selectedShortcut:null,selectedNote:null});this.setState({selectedShortcut:r,selectedNote:null})},this.playSound=r=>{if(r===void 0)return;const{audioPlayer:n}=this.state;n.playNoteOfInstrument(0,r.index)},this.state={audioPlayer:new up("C"),settings:gr.settings,selectedNote:null,selectedShortcut:null,sources:[],selectedSource:null},this.mounted=!0}componentDidMount(){this.init()}componentWillUnmount(){this.mounted=!1,this.state.audioPlayer.destroy(),gr.clear(),bt.clear()}render(){const{settings:t,sources:r,selectedShortcut:n,selectedSource:i}=this.state;return k(so,{children:[v(An,{text:"MIDI Setup"}),k("div",{className:"column midi-setup-column",children:[k("div",{children:["Select MIDI device:",k("select",{className:"midi-select",style:{marginLeft:"0.5rem"},value:i?i.id:"None",onChange:o=>{this.selectMidi(r.find(s=>s.id===o.target.value))},children:[v("option",{disabled:!0,value:"None",children:" None"}),r.map((o,s)=>k("option",{value:o.id,children:[o.name," - ",o.id]},o.id))]})]}),v("div",{style:{margin:"0.5rem 0"},children:"Click on the note to map, then press your MIDI keyboard"})]}),k("div",{className:"midi-setup-content",children:[v("div",{className:"keyboard keyboard-5",style:{marginTop:"auto",width:"fit-content"},children:t.notes.map((o,s)=>v(ioe,{handleClick:()=>this.handleClick(o),data:o,noteImage:uoe.notes[s].noteImage,noteText:o.midi<0?"NA":String(o.midi)},s))}),k("div",{className:"midi-shortcuts-wrapper",children:[v("div",{style:{fontSize:"1.5rem"},children:"Shortcuts"}),v("div",{className:"midi-shortcuts",children:t.shortcuts.map(o=>v(aoe,{type:o.type,status:o.status,midi:o.midi,selected:n===o.type,onClick:this.handleShortcutClick},o.type))})]})]})]})}}const hoe=""+new URL("paypalme.64ab6d76.png",import.meta.url).href,foe=""+new URL("buymeacoffee.05e7f5d3.svg",import.meta.url).href,doe=""+new URL("kofi.bc6b1e15.png",import.meta.url).href;function poe(){return k(so,{children:[v(An,{text:"Donate"}),k("div",{className:"donate-text",children:["Each App I make takes months of learning and development. Added to that are also the costs of hosting. With a higher budget I can afford to not worry so much about how much I spend on the server, giving you the best possible experience.",v("br",{}),"I care about giving users all features without having to pay for it, neither having intrusive ads which can be annoying. For this same reason, there is no source of income except donations.",v("br",{}),v("br",{}),"I would be really thankful if you could consider donating in order to fund development and costs."]}),k("div",{className:"donation-wrapper",children:[v("a",{href:"https://paypal.me/specyDev",target:"_blank",className:"paypal",rel:"noreferrer",children:v("img",{src:hoe,alt:"paypalme",style:{height:"3rem"},loading:"lazy"})}),v("a",{href:"https://ko-fi.com/specy",target:"_blank",className:"kofi",rel:"noreferrer",children:v("img",{src:doe,alt:"kofi",style:{height:"2rem"},loading:"lazy"})}),v("a",{href:"https://www.buymeacoffee.com/specy",target:"_blank",rel:"noreferrer",children:v("img",{src:foe,alt:"buymeacoffee",style:{height:"3rem"},loading:"lazy"})})]})]})}function moe(){return k(so,{children:[v(An,{text:"404"}),k(di,{to:"./",className:"link",style:{textAlign:"center"},children:[v("div",{style:{fontSize:"6rem"},children:"404"}),v("div",{children:"No page found, open the menu to change page"})]})]})}function wl(){return(wl=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function jp(e,t){if(e==null)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)t.indexOf(r=o[n])>=0||(i[r]=e[r]);return i}function cp(e){var t=M.exports.useRef(e),r=M.exports.useRef(function(n){t.current&&t.current(n)});return t.current=e,r.current}var dh=function(e,t,r){return t===void 0&&(t=0),r===void 0&&(r=1),e>r?r:e<t?t:e},bd=function(e){return"touches"in e},Ax=function(e){return e&&e.ownerDocument.defaultView||self},ON=function(e,t,r){var n=e.getBoundingClientRect(),i=bd(t)?function(o,s){for(var a=0;a<o.length;a++)if(o[a].identifier===s)return o[a];return o[0]}(t.touches,r):t;return{left:dh((i.pageX-(n.left+Ax(e).pageXOffset))/n.width),top:dh((i.pageY-(n.top+Ax(e).pageYOffset))/n.height)}},LN=function(e){!bd(e)&&e.preventDefault()},X4=Je.memo(function(e){var t=e.onMove,r=e.onKey,n=jp(e,["onMove","onKey"]),i=M.exports.useRef(null),o=cp(t),s=cp(r),a=M.exports.useRef(null),l=M.exports.useRef(!1),u=M.exports.useMemo(function(){var m=function(y){LN(y),(bd(y)?y.touches.length>0:y.buttons>0)&&i.current?o(ON(i.current,y,a.current)):b(!1)},g=function(){return b(!1)};function b(y){var w=l.current,x=Ax(i.current),T=y?x.addEventListener:x.removeEventListener;T(w?"touchmove":"mousemove",m),T(w?"touchend":"mouseup",g)}return[function(y){var w=y.nativeEvent,x=i.current;if(x&&(LN(w),!function(I,R){return R&&!bd(I)}(w,l.current)&&x)){if(bd(w)){l.current=!0;var T=w.changedTouches||[];T.length&&(a.current=T[0].identifier)}x.focus(),o(ON(x,w,a.current)),b(!0)}},function(y){var w=y.which||y.keyCode;w<37||w>40||(y.preventDefault(),s({left:w===39?.05:w===37?-.05:0,top:w===40?.05:w===38?-.05:0}))},b]},[s,o]),c=u[0],f=u[1],p=u[2];return M.exports.useEffect(function(){return p},[p]),v("div",{...wl({},n,{onTouchStart:c,onMouseDown:c,className:"react-colorful__interactive",ref:i,onKeyDown:f,tabIndex:0,role:"slider"})})}),$p=function(e){return e.filter(Boolean).join(" ")},W4=function(e){var t=e.color,r=e.left,n=e.top,i=n===void 0?.5:n,o=$p(["react-colorful__pointer",e.className]);return v("div",{className:o,style:{top:100*i+"%",left:100*r+"%"},children:v("div",{className:"react-colorful__pointer-fill",style:{backgroundColor:t}})})},un=function(e,t,r){return t===void 0&&(t=0),r===void 0&&(r=Math.pow(10,t)),Math.round(r*e)/r},O7=function(e){return yoe(Rx(e))},Rx=function(e){return e[0]==="#"&&(e=e.substring(1)),e.length<6?{r:parseInt(e[0]+e[0],16),g:parseInt(e[1]+e[1],16),b:parseInt(e[2]+e[2],16),a:e.length===4?un(parseInt(e[3]+e[3],16)/255,2):1}:{r:parseInt(e.substring(0,2),16),g:parseInt(e.substring(2,4),16),b:parseInt(e.substring(4,6),16),a:e.length===8?un(parseInt(e.substring(6,8),16)/255,2):1}},L7=function(e){return goe(voe(e))},U7=function(e){var t=e.s,r=e.v,n=e.a,i=(200-t)*r/100;return{h:un(e.h),s:un(i>0&&i<200?t*r/100/(i<=100?i:200-i)*100:0),l:un(i/2),a:un(n,2)}},kx=function(e){var t=U7(e);return"hsl("+t.h+", "+t.s+"%, "+t.l+"%)"},j_=function(e){var t=U7(e);return"hsla("+t.h+", "+t.s+"%, "+t.l+"%, "+t.a+")"},voe=function(e){var t=e.h,r=e.s,n=e.v,i=e.a;t=t/360*6,r/=100,n/=100;var o=Math.floor(t),s=n*(1-r),a=n*(1-(t-o)*r),l=n*(1-(1-t+o)*r),u=o%6;return{r:un(255*[n,a,s,s,l,n][u]),g:un(255*[l,n,n,a,s,s][u]),b:un(255*[s,s,l,n,n,a][u]),a:un(i,2)}},Vv=function(e){var t=e.toString(16);return t.length<2?"0"+t:t},goe=function(e){var t=e.r,r=e.g,n=e.b,i=e.a,o=i<1?Vv(un(255*i)):"";return"#"+Vv(t)+Vv(r)+Vv(n)+o},yoe=function(e){var t=e.r,r=e.g,n=e.b,i=e.a,o=Math.max(t,r,n),s=o-Math.min(t,r,n),a=s?o===t?(r-n)/s:o===r?2+(n-t)/s:4+(t-r)/s:0;return{h:un(60*(a<0?a+6:a)),s:un(o?s/o*100:0),v:un(o/255*100),a:i}},F7=Je.memo(function(e){var t=e.hue,r=e.onChange,n=$p(["react-colorful__hue",e.className]);return Je.createElement("div",{className:n},Je.createElement(X4,{onMove:function(i){r({h:360*i.left})},onKey:function(i){r({h:dh(t+360*i.left,0,360)})},"aria-label":"Hue","aria-valuenow":un(t),"aria-valuemax":"360","aria-valuemin":"0"},Je.createElement(W4,{className:"react-colorful__hue-pointer",left:t/360,color:kx({h:t,s:100,v:100,a:1})})))}),M7=Je.memo(function(e){var t=e.hsva,r=e.onChange,n={backgroundColor:kx({h:t.h,s:100,v:100,a:1})};return Je.createElement("div",{className:"react-colorful__saturation",style:n},Je.createElement(X4,{onMove:function(i){r({s:100*i.left,v:100-100*i.top})},onKey:function(i){r({s:dh(t.s+100*i.left,0,100),v:dh(t.v-100*i.top,0,100)})},"aria-label":"Color","aria-valuetext":"Saturation "+un(t.s)+"%, Brightness "+un(t.v)+"%"},Je.createElement(W4,{className:"react-colorful__saturation-pointer",top:1-t.v/100,left:t.s/100,color:kx(t)})))}),B7=function(e,t){if(e===t)return!0;for(var r in e)if(e[r]!==t[r])return!1;return!0},D7=function(e,t){return e.toLowerCase()===t.toLowerCase()||B7(Rx(e),Rx(t))};function G7(e,t,r){var n=cp(r),i=M.exports.useState(function(){return e.toHsva(t)}),o=i[0],s=i[1],a=M.exports.useRef({color:t,hsva:o});M.exports.useEffect(function(){if(!e.equal(t,a.current.color)){var u=e.toHsva(t);a.current={hsva:u,color:t},s(u)}},[t,e]),M.exports.useEffect(function(){var u;B7(o,a.current.hsva)||e.equal(u=e.fromHsva(o),a.current.color)||(a.current={hsva:o,color:u},n(u))},[o,e,n]);var l=M.exports.useCallback(function(u){s(function(c){return Object.assign({},c,u)})},[]);return[o,l]}var _oe=typeof window<"u"?M.exports.useLayoutEffect:M.exports.useEffect,boe=function(){return typeof __webpack_nonce__<"u"?__webpack_nonce__:void 0},UN=new Map,j7=function(e){_oe(function(){var t=e.current?e.current.ownerDocument:document;if(t!==void 0&&!UN.has(t)){var r=t.createElement("style");r.innerHTML=`.react-colorful{position:relative;display:flex;flex-direction:column;width:200px;height:200px;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:default}.react-colorful__saturation{position:relative;flex-grow:1;border-color:transparent;border-bottom:12px solid #000;border-radius:8px 8px 0 0;background-image:linear-gradient(0deg,#000,transparent),linear-gradient(90deg,#fff,hsla(0,0%,100%,0))}.react-colorful__alpha-gradient,.react-colorful__pointer-fill{content:"";position:absolute;left:0;top:0;right:0;bottom:0;pointer-events:none;border-radius:inherit}.react-colorful__alpha-gradient,.react-colorful__saturation{box-shadow:inset 0 0 0 1px rgba(0,0,0,.05)}.react-colorful__alpha,.react-colorful__hue{position:relative;height:24px}.react-colorful__hue{background:linear-gradient(90deg,red 0,#ff0 17%,#0f0 33%,#0ff 50%,#00f 67%,#f0f 83%,red)}.react-colorful__last-control{border-radius:0 0 8px 8px}.react-colorful__interactive{position:absolute;left:0;top:0;right:0;bottom:0;border-radius:inherit;outline:none;touch-action:none}.react-colorful__pointer{position:absolute;z-index:1;box-sizing:border-box;width:28px;height:28px;transform:translate(-50%,-50%);background-color:#fff;border:2px solid #fff;border-radius:50%;box-shadow:0 2px 4px rgba(0,0,0,.2)}.react-colorful__interactive:focus .react-colorful__pointer{transform:translate(-50%,-50%) scale(1.1)}.react-colorful__alpha,.react-colorful__alpha-pointer{background-color:#fff;background-image:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill-opacity=".05"><path d="M8 0h8v8H8zM0 8h8v8H0z"/></svg>')}.react-colorful__saturation-pointer{z-index:3}.react-colorful__hue-pointer{z-index:2}`,UN.set(t,r);var n=boe();n&&r.setAttribute("nonce",n),t.head.appendChild(r)}},[])},woe=function(e){var t=e.className,r=e.colorModel,n=e.color,i=n===void 0?r.defaultColor:n,o=e.onChange,s=jp(e,["className","colorModel","color","onChange"]),a=M.exports.useRef(null);j7(a);var l=G7(r,i,o),u=l[0],c=l[1],f=$p(["react-colorful",t]);return k("div",{...wl({},s,{ref:a,className:f}),children:[v(M7,{hsva:u,onChange:c}),v(F7,{hue:u.h,onChange:c,className:"react-colorful__last-control"})]})},xoe={defaultColor:"000",toHsva:O7,fromHsva:function(e){return L7({h:e.h,s:e.s,v:e.v,a:1})},equal:D7},Toe=function(e){return v(woe,{...wl({},e,{colorModel:xoe})})},Soe=function(e){var t=e.className,r=e.hsva,n=e.onChange,i={backgroundImage:"linear-gradient(90deg, "+j_(Object.assign({},r,{a:0}))+", "+j_(Object.assign({},r,{a:1}))+")"},o=$p(["react-colorful__alpha",t]),s=un(100*r.a);return Je.createElement("div",{className:o},v("div",{className:"react-colorful__alpha-gradient",style:i}),Je.createElement(X4,{onMove:function(a){n({a:a.left})},onKey:function(a){n({a:dh(r.a+a.left)})},"aria-label":"Alpha","aria-valuetext":s+"%","aria-valuenow":s,"aria-valuemin":"0","aria-valuemax":"100"},Je.createElement(W4,{className:"react-colorful__alpha-pointer",left:r.a,color:j_(r)})))},Eoe=function(e){var t=e.className,r=e.colorModel,n=e.color,i=n===void 0?r.defaultColor:n,o=e.onChange,s=jp(e,["className","colorModel","color","onChange"]),a=M.exports.useRef(null);j7(a);var l=G7(r,i,o),u=l[0],c=l[1],f=$p(["react-colorful",t]);return Je.createElement("div",wl({},s,{ref:a,className:f}),v(M7,{hsva:u,onChange:c}),v(F7,{hue:u.h,onChange:c}),Je.createElement(Soe,{hsva:u,onChange:c,className:"react-colorful__last-control"}))},Coe={defaultColor:"0001",toHsva:O7,fromHsva:L7,equal:D7},Ioe=function(e){return Je.createElement(Eoe,wl({},e,{colorModel:Coe}))},Noe=/^#?([0-9A-F]{3,8})$/i,Poe=function(e){var t=e.color,r=t===void 0?"":t,n=e.onChange,i=e.onBlur,o=e.escape,s=e.validate,a=e.format,l=e.process,u=jp(e,["color","onChange","onBlur","escape","validate","format","process"]),c=M.exports.useState(function(){return o(r)}),f=c[0],p=c[1],m=cp(n),g=cp(i),b=M.exports.useCallback(function(w){var x=o(w.target.value);p(x),s(x)&&m(l?l(x):x)},[o,l,s,m]),y=M.exports.useCallback(function(w){s(w.target.value)||p(o(r)),g(w)},[r,o,s,g]);return M.exports.useEffect(function(){p(o(r))},[r,o]),v("input",{...wl({},u,{value:a?a(f):f,spellCheck:"false",onChange:b,onBlur:y})})},FN=function(e){return"#"+e},$7=function(e){var t=e.prefixed,r=e.alpha,n=jp(e,["prefixed","alpha"]),i=M.exports.useCallback(function(s){return s.replace(/([^0-9A-F]+)/gi,"").substring(0,r?8:6)},[r]),o=M.exports.useCallback(function(s){return function(a,l){var u=Noe.exec(a),c=u?u[1].length:0;return c===3||c===6||!!l&&c===4||!!l&&c===8}(s,r)},[r]);return Je.createElement(Poe,wl({},n,{escape:i,format:t?FN:void 0,process:FN,validate:o}))};function Aoe({name:e,value:t,onChange:r,isModified:n,setSelectedProp:i,isSelected:o,handlePropReset:s,canReset:a}){const[l,u]=M.exports.useState(Et(t));M.exports.useEffect(()=>{u(Et(t))},[t]);function c(p){u(Et(p))}function f(){const p=l.alpha()===1?l.hex():l.hexa();r(e,p),i("")}return k("div",{className:`theme-row ${o?"selected":""}`,style:o?{backgroundColor:l.toString(),color:l.isDark()?vt.text.light:vt.text.dark}:{},children:[v("div",{children:ky(e.split("_").join(" "))}),k("div",{className:"color-input-wrapper",children:[a&&n&&v(Be,{onClick:()=>s(e),toggled:n,className:"theme-reset",children:"RESET"}),o?k("div",{className:"color-picker",children:[v(Ioe,{onChange:c,color:l.hexa()}),k("div",{className:"color-picker-row",children:[v("div",{className:"color-picker-input",style:{backgroundColor:l.toString(),color:l.isDark()?vt.text.light:vt.text.dark},children:v($7,{prefixed:!0,alpha:!0,onChange:c,color:l.alpha()===1?l.hex():l.hexa(),style:{color:l.isDark()?vt.text.light:vt.text.dark}})}),v("button",{className:"color-picker-check",onClick:()=>{u(Et(t)),r(e,t),i("")},style:{backgroundColor:l.toString(),color:l.isDark()?vt.text.light:vt.text.dark},children:v(eo,{size:16})}),v("button",{className:"color-picker-check",onClick:f,style:{backgroundColor:l.toString(),color:l.isDark()?vt.text.light:vt.text.dark},children:v(iA,{size:16})})]})]}):v("div",{onClick:()=>i(e),className:"color-preview",style:{backgroundColor:Se.get(e).toString(),color:Se.getText(e).toString()},children:"Text"})]})]})}function MN({theme:e,onClick:t,onDelete:r,current:n,downloadable:i}){const o=e.other.backgroundImageMain||e.other.backgroundImageComposer;return k("div",{className:"theme-preview",onClick:()=>{t&&t(e)},style:{backgroundColor:e.data.background.value,color:e.data.background.text,...n?{outline:"solid 0.2rem var(--accent)"}:{boxShadow:"0px 0px 10px 0px rgba(0,0,0,0.4)"}},children:[v("div",{className:"theme-preview-bg",style:{backgroundImage:`url(${o})`,zIndex:1}}),k("div",{className:"theme-preview-row",style:{backgroundColor:Et(e.data.background.value).fade(.3).toString(),zIndex:2,textShadow:o?"0px 0px 10px rgba(0,0,0,0.4)":"none"},children:[v("div",{className:"text-ellipsis",style:{zIndex:2,padding:"0.4rem 0.2rem"},children:e.other.name}),k("div",{style:{display:"flex",marginLeft:"0.2rem",zIndex:2,padding:"0.4rem 0.2rem"},children:[i&&v(ns,{color:e.data.background.text,onClick:s=>{s.stopPropagation(),me.success(`The theme "${e.other.name}" was downloaded`),fr.downloadTheme(e,`${e.other.name||Ae}.theme`)},size:18,cursor:"pointer"}),r&&v(to,{onClick:s=>{s.stopPropagation(),r(e)},size:18,style:{marginLeft:"0.5rem"},color:"var(--red)",cursor:"pointer"})]})]}),v("div",{className:"theme-preview-colors",style:{zIndex:2},children:Object.entries(e.data).map(([s,a])=>v("div",{style:{backgroundColor:a.value,color:a.text}},s))})]})}function $_({name:e,onChange:t,disabled:r,value:n,onLeave:i}){return k("div",{className:"theme-row",children:[v("div",{children:e}),v("input",{className:"theme-input",style:{width:"9rem"},placeholder:"Write here",disabled:r,value:n,onPointerDown:()=>{r&&me.warn("Create a new theme first")},onBlur:()=>{i&&i()},onChange:o=>t(o.target.value)})]})}function Roe(){const[e,t]=M.exports.useState(Se);return M.exports.useEffect(()=>Hn(Se.state.other,()=>{t({...Se})}),[]),[e,t]}function Ca({children:e,page:t}){const[r]=Roe();return v("div",{className:"app bg-image",style:{backgroundImage:`url(${r.getOther("backgroundImage"+t)}`},children:e})}function koe(){const[e]=en(),t=Ya(zs.themes),[r,n]=M.exports.useState(""),[i,o]=M.exports.useState("player");async function s(g,b){if(!Se.isEditable()){if(b===Se.get(g).toString())return;const y=await En("Creating a new theme from this default theme, write the name:");if(y===null)return;await c(y)}Se.set(g,b),await Se.save()}async function a(g){Se.reset(g),await Se.save()}async function l(g){for(const b of g){const y=b.data;try{await fr.importAndLog(y)}catch{u()}}}const u=M.exports.useCallback(g=>{g&&console.error(g),me.error("There was an error importing this theme, is it the correct file?",4e3)},[]);async function c(g){const b=new YC(g);b.state=wi(Se.state),b.state.other.name=g,b.state.editable=!0,await p(b)}async function f(){const g=await En("How do you want to name the theme?");if(g!=null){const b=new YC(g);await p(b)}}async function p(g){const b=g.serialize(),y=await zs.addTheme(b);return b.id=y,Se.loadFromJson(b,y),Se.save(),y}async function m(g){await Br(`Are you sure you want to delete the theme ${g.other.name}?`)&&(Se.getId()===g.id&&Se.wipe(),await zs.removeThemeById(g.id))}return k(so,{children:[v(An,{text:"Themes"}),k("div",{style:{display:"flex",alignItems:"center"},children:[v(Bp,{onPick:l,as:"json",onError:u,children:v(Be,{style:{margin:"0.25rem"},children:"Import Theme"})}),v("div",{style:{marginLeft:"1rem"},children:Se.getOther("name")})]}),v("div",{style:{marginTop:"2.2rem"}}),e.toArray().map(g=>M.exports.createElement(Aoe,{...g,key:g.name,isSelected:r===g.name,canReset:Se.isEditable(),isModified:!e.isDefault(g.name),onChange:s,setSelectedProp:n,handlePropReset:a})),v($_,{name:"Background image (URL)",value:e.getOther("backgroundImageMain"),disabled:!Se.isEditable(),onChange:g=>Se.setBackground(g,"Main")}),v($_,{name:"Composer Background image (URL)",value:e.getOther("backgroundImageComposer"),disabled:!Se.isEditable(),onChange:g=>Se.setBackground(g,"Composer")}),v($_,{name:"Theme name",value:e.getOther("name"),disabled:!Se.isEditable(),onChange:g=>Se.setOther("name",g),onLeave:()=>Se.save()}),k("div",{style:{textAlign:"center",marginTop:"1rem"},children:[v("span",{style:{color:"var(--red)"},children:"Warning"}),": GIF backgrounds and opaque (transparent) colors could reduce performance"]}),v("div",{style:{fontSize:"1.5rem",marginTop:"2rem"},children:"Your Themes"}),k("div",{className:"theme-preview-wrapper",children:[t.map(g=>v(MN,{onDelete:m,current:g.id===Se.getId(),theme:g,downloadable:!0,onClick:b=>{Se.loadFromTheme(b),Se.save()}},g.id)),k("button",{className:"new-theme",onClick:f,children:[v(uu,{size:30}),"New theme"]})]}),v("div",{style:{fontSize:"1.5rem",marginTop:"2rem"},children:"Default Themes"}),v("div",{className:"theme-preview-wrapper",children:S4.map(g=>v(MN,{theme:g,current:g.id===Se.getId(),onClick:b=>{Se.loadFromTheme(b),Se.save()}},g.id))}),v("div",{style:{fontSize:"1.5rem",marginTop:"2rem"},children:"Preview"}),k("div",{className:"theme-app-preview",children:[v(Be,{className:"box-shadow",toggled:!0,style:{position:"absolute",right:0,top:0,zIndex:90},onClick:()=>o(i==="composer"?"player":"composer"),children:i==="composer"?"View player":"View composer"}),i==="player"&&v(Ca,{page:"Main",children:v(vw,{})}),i==="composer"&&v(Ca,{page:"Composer",children:v(R7,{inPreview:!0})})]})]})}function Ooe({onSongSelect:e,settings:t,onSettingsUpdate:r}){const[n,i]=M.exports.useState(!1),[o,s]=M.exports.useState(!0),[a,l]=M.exports.useState("Settings"),[u]=Mp(),[c]=Uu(),[f]=en(),p=oa(b=>{if(cu)return s(!1);i(!1)},{active:n&&o,ignoreFocusable:!0}),m=M.exports.useCallback(b=>{if(b===a&&n)return i(!1);i(!0),b&&(l(b),Cn.UIEvent("menu",{tab:b}))},[n,a]);return v(je,{children:k("div",{className:"menu-wrapper",ref:p,children:[v("div",{className:"hamburger-top",onClick:()=>s(!o),children:v(Ct,{children:v(uy,{})})}),k("div",{className:`menu ${o?"menu-visible":""}`,children:[v(Nt,{onClick:()=>{s(!1)},ariaLabel:"Close Menu",children:v(eo,{className:"icon"})}),v(Nt,{style:{marginTop:"auto"},onClick:()=>m("Songs"),isActive:n&&a==="Songs",ariaLabel:"Song menu",children:v(Ct,{children:v(yp,{className:"icon"})})}),v(Nt,{onClick:()=>m("Settings"),isActive:n&&a==="Settings",ariaLabel:"Settings menu",children:v(Ct,{children:v(Eu,{className:"icon"})})}),v(Nt,{onClick:()=>ln.open(),ariaLabel:"Open home menu",children:v(Ct,{children:v(Cu,{className:"icon"})})})]}),k("div",{className:n&&o?"side-menu menu-open":"side-menu",children:[k(si,{current:a,id:"Songs",children:[v("div",{className:"row",children:v(di,{to:"/VsrgComposer",children:v(Be,{children:"Create song"})})}),v(mu,{songs:c,exclude:["composed","recorded"],style:{marginTop:"0.6rem"},SongComponent:Uoe,componentProps:{theme:f,folders:u,functions:{setMenuVisible:s,onSongSelect:e}}})]}),k(si,{current:a,id:"Settings",children:[v(Dp,{settings:t,onUpdate:r}),v("div",{className:"row",style:{marginTop:"0.6rem",justifyContent:"flex-end"},children:!cu&&v(di,{to:"/Keybinds",children:v(Be,{children:"Change keybinds"})})})]})]})]})})}const Loe=M.exports.memo(Ooe,(e,t)=>e.settings===t.settings);function Uoe({data:e,functions:t,theme:r,folders:n}){const{setMenuVisible:i,onSongSelect:o}=t,s={backgroundColor:r.layer("primary",.15).hex()},[a,l]=M.exports.useState(!1),[u,c]=M.exports.useState(e.name);return M.exports.useEffect(()=>{c(e.name)},[e.name]),e.type!=="vsrg"?v("div",{className:"row",children:"Invalid song"}):k("div",{className:"song-row",children:[k("div",{className:`song-name ${Pn(!0)}`,onClick:async()=>{if(a)return;const f=await it.fromStorableSong(e);if(!f)return me.error("Could not find song");o(f,"play"),i(!1)},children:[a?v("input",{className:`song-name-input ${a?"song-rename":""}`,disabled:!a,onChange:f=>c(f.target.value),style:{width:"100%",color:"var(--primary-text)"},value:u}):v("div",{style:{marginLeft:"0.3rem"},children:u}),v(hn,{children:a?"Song name":"Play song"})]}),v("div",{className:"song-buttons-wrapper",children:k(Fp,{Icon:Eh,style:s,ignoreClickOutside:a,tooltip:"More options",onClose:()=>l(!1),children:[k(hr,{onClick:()=>{a&&(At.renameSong(e.id,u),l(!1)),l(!a)},children:[v(_p,{style:{marginRight:"0.4rem"},size:14}),v(Fr,{text:a?"Save":"Rename"})]}),k(hr,{style:{padding:"0 0.4rem"},children:[v(cy,{style:{marginRight:"0.4rem"}}),k("select",{className:"dropdown-select",value:e.folderId||"_None",onChange:async f=>{const p=f.target.value,m=await it.getOneSerializedFromStorable(e);if(!m)return me.error("Could not find song");At.addSongToFolder(m,p!=="_None"?p:null)},children:[v("option",{value:"_None",children:"None"}),n.map(f=>v("option",{value:f.id,children:f.name},f.id))]})]}),k(hr,{onClick:async()=>{const f=await it.getOneSerializedFromStorable(e);if(!f)return me.error("Could not find song");fr.downloadSong(f,e.name)},children:[v(ns,{style:{marginRight:"0.4rem"},size:14}),v(Fr,{text:"Download"})]}),k(hr,{onClick:async()=>{!await Br("Are you sure you want to delete this song?")||At.removeSong(e.id)},children:[v(to,{color:"#ed4557",style:{marginRight:"0.4rem"},size:14}),v(Fr,{text:"Delete"})]})]})})]})}var Foe=Object.defineProperty,Moe=Object.getOwnPropertyDescriptor,Y4=(e,t,r,n)=>{for(var i=n>1?void 0:n?Moe(t,r):t,o=e.length-1,s;o>=0;o--)(s=e[o])&&(i=(n?s(t,r,i):s(i))||i);return n&&i&&Foe(t,r,i),i};const Boe={amazing:300,perfect:200,great:100,good:50,bad:25,miss:0};class i1{constructor(){this.keyboard=[],this.currentSong={song:null,type:"stop"},this.score={scoreVisible:!1,combo:0,score:0,amazing:0,perfect:0,great:0,good:0,bad:0,miss:0,lastScore:{timestamp:0,type:"",combo:0}},this.listeners=[],this.keyboardListeners=[],this.setLayout=t=>{this.keyboard.splice(0,this.keyboard.length,...t.map((r,n)=>({key:r,index:n,isPressed:!1})))},this.addEventListener=(t,r)=>{this.listeners.push({callback:t,id:r})},this.emitEvent=t=>{this.listeners.forEach(r=>r.callback(t))},this.removeEventListener=t=>{this.listeners=this.listeners.filter(r=>r.id!==t)},this.resetScore=()=>{const t={scoreVisible:!1,score:0,amazing:0,perfect:0,great:0,good:0,bad:0,miss:0,combo:0,lastScore:{timestamp:0,type:"",combo:0}};Object.assign(this.score,t)},this.incrementScore=t=>{const r=t==="miss"?0:this.score.combo+1;Object.assign(this.score,{[t]:this.score[t]+1,combo:r,score:this.score.score+this.getScore(t)*r,lastScore:{timestamp:Date.now(),type:t,combo:r}})},this.getScore=t=>{var r;return(r=Boe[t])!=null?r:0},this.playSong=t=>{this.currentSong.type="play",this.currentSong.song=t.clone()},this.showScore=()=>{this.score.scoreVisible=!0},this.stopSong=()=>{this.currentSong.type="stop",this.currentSong.song=null},this.pressKey=t=>{this.keyboard[t].isPressed=!0,this.emitKeyboardEvent(this.keyboard[t],"down")},this.releaseKey=t=>{this.keyboard[t].isPressed=!1,this.emitKeyboardEvent(this.keyboard[t],"up")},this.addKeyboardListener=t=>{this.keyboardListeners.push(t)},this.removeKeyboardListener=t=>{const r=this.keyboardListeners.findIndex(n=>n.id===t.id||n.callback===t.callback);r!==-1&&this.keyboardListeners.splice(r,1)},this.emitKeyboardEvent=(t,r)=>{this.keyboardListeners.forEach(n=>n.callback(t,r))},Li(this)}}Y4([yt],i1.prototype,"keyboard",2);Y4([yt.shallow],i1.prototype,"currentSong",2);Y4([yt],i1.prototype,"score",2);const dt=new i1;function Doe(e){return Hn(dt.currentSong,()=>{e(dt.currentSong)})}function Goe(e){return Hn(dt.score,()=>{e({...dt.score})})}function joe(e){return Hn(dt.score,()=>{e({...dt.score.lastScore})})}function $oe(e,t){const[r,n]=M.exports.useState(dt.keyboard[e]);return M.exports.useEffect(()=>Hoe(e,n),[e,t]),r}function Hoe(e,t){const r=Hn(dt.keyboard[e],()=>{t({...dt.keyboard[e]}),t({...dt.keyboard[e]})});return t({...dt.keyboard[e]}),r}function zoe(){const[e,t]=M.exports.useState(dt.keyboard);return M.exports.useEffect(()=>Voe(t),[]),e}function Voe(e){const t=Hn(dt.keyboard,()=>{e([...dt.keyboard])});return e([...dt.keyboard]),t}function Xoe({hitObjectSize:e,offset:t,keyboardLayout:r,verticalOffset:n,horizontalOffset:i}){const o=zoe();M.exports.useEffect(()=>(Xe.listen(({letter:c,event:f})=>{if(f.repeat)return;const p=o.findIndex(m=>m.key===c);p>=0&&dt.pressKey(p)},{type:"keydown",id:"vsrg-player-keyboard"}),Xe.listen(({letter:c,event:f})=>{if(f.repeat)return;const p=o.findIndex(m=>m.key===c);p>=0&&dt.releaseKey(p)},{type:"keyup",id:"vsrg-player-keyboard"}),()=>{Xe.unregisterById("vsrg-player-keyboard")}),[o]);const s=Math.ceil(o.length/2),a=o.length-s*2,l=o.slice(0,s),u=o.slice(s+a);return k(je,{children:[r==="line"&&k(je,{children:[v("div",{className:"vsrg-player-keyboard-control-left",style:{"--vertical-offset":`calc(-${l.length*2}vw + ${n*.1}rem)`,"--horizontal-offset":`${i*.1+1}rem`},children:l.map(c=>v(H_,{index:c.index,layout:o,offset:t,layoutType:"circles",size:e},`${c.key}-${o.length}`))}),v("div",{className:"vsrg-player-keyboard-control-right",style:{"--vertical-offset":`calc(-${l.length*2}vw + ${n*.1}rem)`,"--horizontal-offset":`${i*.1+1}rem`},children:u.map(c=>v(H_,{index:c.index,layout:o,offset:t,layoutType:"circles",size:e},`${c.key}-${o.length}`))})]}),v("div",{className:"vsrg-player-keyboard-circles",children:o.map(c=>v(H_,{index:c.index,layout:o,offset:t,layoutType:r,size:e},`${c.key}-${o.length}`))})]})}function H_({index:e,layout:t,size:r,layoutType:n,offset:i}){const o=$oe(e,t),s=M.exports.useCallback(()=>{dt.pressKey(e)},[e]),a=M.exports.useCallback(()=>{dt.releaseKey(e)},[e]);return n==="circles"?v("button",{className:"vsrg-player-key-hitbox-circle flex-centered",style:{paddingBottom:`${i}px`},onPointerDown:s,onPointerUp:a,children:v("div",{className:`vsrg-player-key-circle ${o.isPressed?"vsrg-key-pressed":""}`,style:{width:r,height:r},children:o.key})}):n==="line"?v("button",{className:"vsrg-player-key-hitbox-line",onPointerDown:s,onPointerUp:a,children:v("div",{className:`vsrg-player-key-line ${o.isPressed?"vsrg-key-pressed":""}`,style:{height:`${i}px`}})}):null}class H7{constructor(t,r){this.nextTick=0,this.maxFpsInterval=0,this.deltaTime=0,this.raf=0,this.duration=0,this.previousTickTime=0,this.tick=()=>{const n=Date.now();this.deltaTime=n-this.nextTick,this.deltaTime>=this.maxFpsInterval&&(this.nextTick=n-this.deltaTime%this.maxFpsInterval,this.callback(this.elapsed,n-this.previousTickTime),this.previousTickTime=n),this.elapsed=n-this.startTime,this.elapsed<this.duration&&(this.raf=setTimeout(this.tick,8))},this.callback=t,this.startTime=0,this.elapsed=0,this.maxFps=r,this.maxFpsInterval=1e3/r}get fps(){return this.maxFps}changeMaxFps(t){this.maxFps=t,this.maxFpsInterval=1e3/t}setCallback(t){this.callback=t}start(t){this.stop(),this.startTime=Date.now(),this.nextTick=Date.now(),this.previousTickTime=0,this.duration=t!=null?t:Number.MAX_SAFE_INTEGER,this.tick()}stop(){clearTimeout(this.raf)}}Pa.LINE_SCALE_MODE=ci.NORMAL;class Woe{constructor({app:t,colors:r,sizes:n,trackColors:i}){this.destroy=()=>{Object.values(this.textures.hitObjects).forEach(o=>o==null?void 0:o.destroy()),Object.values(this.textures.heldHitObjects).forEach(o=>o==null?void 0:o.destroy()),Object.values(this.textures.trails).forEach(o=>o==null?void 0:o.destroy()),this.app=null},this.textures={hitObjects:{},heldHitObjects:{},trails:{},lines:{},sizes:{hitObject:0,trail:0}},this.trackColors=i,this.colors=r,this.sizes=n,this.app=t,this.generate()}generate(){const{app:t}=this;!t||(this.generateTrackCache(t),this.generateTrailsCache(t),this.generateLinesCache(t))}getHitObjectCache(t){return this.textures.hitObjects[t]||this.textures.hitObjects["#FF0000"]}getHeldTrailCache(t){return this.textures.trails[t]||this.textures.trails["#FF0000"]}getHeldHitObjectCache(t){return this.textures.heldHitObjects[t]||this.textures.heldHitObjects["#FF0000"]}getLinesCache(t){return this.textures.lines[t]||this.textures.lines["#FF0000"]}generateTrailsCache(t){const{sizes:r,trackColors:n}=this,i=[...n,"#FF0000"],o=r.hitObjectSize,s=o/3;i.forEach(a=>{const l=new ar;l.beginFill(Et(a).rgbNumber()).drawRect(s/2,0,o-s,o);const u=t.renderer.generateTexture(l,{resolution:1,scaleMode:St.LINEAR,region:new Me(0,0,o,o)});this.textures.trails[a]=u,l.destroy(!0)}),this.textures.sizes.trail=o}generateLinesCache(t){const{sizes:r,trackColors:n}=this,i=[...n,"#FF0000"],o=5;i.forEach(s=>{const a=new ar;a.lineStyle(o,Et(s).rgbNumber()).moveTo(0,0).lineTo(r.width,0);const l=t.renderer.generateTexture(a,{resolution:2,scaleMode:St.LINEAR,region:new Me(0,0,r.width,o)});this.textures.lines[s]=l,a.destroy(!0)})}generateTrackCache(t){const{colors:r,sizes:n,trackColors:i}=this,o=n.hitObjectSize;[...i,"#FF0000"].forEach(a=>{const l=new ar,u=o/2;l.lineStyle(5,Et(a).rgbNumber()).beginFill(r.background_10[1]).drawCircle(u,u,u-5);const c=t.renderer.generateTexture(l,{resolution:2,scaleMode:St.LINEAR,region:new Me(0,0,o,o)});this.textures.hitObjects[a]=c,l.destroy(!0);const f=new ar,p=o*.7,m=(o-p)/2;f.lineStyle(5,Et(a).rgbNumber()).beginFill(r.background_10[1]).drawRoundedRect(m,m,p,p,6);const g=t.renderer.generateTexture(f,{resolution:2,scaleMode:St.LINEAR,region:new Me(0,0,o,o)});this.textures.heldHitObjects[a]=g,f.destroy(!0)}),this.textures.sizes.hitObject=o}}function Yoe({timestamp:e,renderableHitObjects:t,cache:r,sizes:n,offset:i}){const o=n.scaling,s=n.hitObjectSize/2;return v(je,{children:v(Qe.exports.Container,{x:0,y:e*o+n.height-i,sortableChildren:!0,children:t.map((a,l)=>{const u=a.hitObject,c=u.index*n.keyWidth+n.keyWidth/2,f=-(u.timestamp*o);if((a.status===qf.Hit||a.status===qf.Missed)&&!u.isHeld)return null;let p=a.hitObject.index,m=p;for(const g of t)g===a||g.status===qf.Missed||g.status===qf.Hit||g.hitObject.timestamp===u.timestamp&&(g.hitObject.index<p&&(p=g.hitObject.index),g.hitObject.index>m&&(m=g.hitObject.index));return k(M.exports.Fragment,{children:[p!==m&&v(Qe.exports.Sprite,{texture:r.getLinesCache(a.color),x:p*n.keyWidth+n.keyWidth/2,width:(m-p)*n.keyWidth,zIndex:-1,y:f-s}),u.isHeld?k(je,{children:[v(Qe.exports.Sprite,{texture:r.getHeldTrailCache(a.color),anchor:o0,width:r.textures.sizes.trail,height:u.holdDuration*o,x:c,y:f-s}),v(Qe.exports.Sprite,{texture:r.getHeldHitObjectCache(a.color),anchor:.5,angle:45,x:c,y:f-s}),v(Qe.exports.Sprite,{texture:r.getHeldHitObjectCache(a.color),anchor:o0,x:c,y:f-u.holdDuration*o})]}):v(Qe.exports.Sprite,{texture:r.getHitObjectCache(a.color),y:f,anchor:o0,x:c},a.hitObject.renderId)]},u.renderId)})})})}function Koe({time:e}){const t=M.exports.useRef(null);return M.exports.useEffect(()=>{const r=t.current;r&&r.animate([{transform:"scale(1.4)"},{transform:"scale(1)"}],{duration:500,iterations:1})},[e]),v(je,{children:v("div",{className:"vsrg-player-countdown flex-centered",ref:t,children:e})})}const qoe=M.exports.memo(Koe,(e,t)=>e.time===t.time);var qf=(e=>(e[e.Idle=0]="Idle",e[e.Pressed=1]="Pressed",e[e.Missed=2]="Missed",e[e.Hit=3]="Hit",e))(qf||{});class Zoe{constructor(t){this.color="#FFFFFF",this.status=0,this.instrumentIndex=0,this.heldScoreTimeout=0,this.hitObject=t}}const z7={el:new DOMRect,rawWidth:0,rawHeight:0,width:0,height:0,keyWidth:0,hitObjectSize:0,scaling:0,verticalOffset:0};class Joe extends M.exports.Component{constructor(t){super(t),this.toDispose=[],this.onSongPick=({type:r,song:n})=>{dt.resetScore();const{scrollSpeed:i}=this.props;r==="play"&&n&&this.setState({song:n,timestamp:-1500-i,renderableHitObjects:[]},()=>{n.startPlayback(0),this.calculateSizes(),this.generateAccuracyBounds()}),r==="stop"&&this.setState({song:new qs(""),timestamp:0,renderableHitObjects:[]})},this.handleVsrgEvent=r=>{r==="fpsChange"&&this.throttledEventLoop.changeMaxFps(this.props.maxFps)},this.handleKeyboard=(r,n)=>{const{renderableHitObjects:i,timestamp:o,accuracy:s}=this.state,a=i.find(l=>l.hitObject.index===r.index);if(!!a){if(n==="down"){const l=lC(a.hitObject.timestamp,o,s),u=a.status===0;l&&u&&(a.hitObject.isHeld?a.status=1:a.status=3,this.props.playHitObject(a.hitObject,a.instrumentIndex),dt.incrementScore(this.getHitRating(a.hitObject,o)))}n==="up"&&a.hitObject.isHeld&&(lC(a.hitObject.timestamp+a.hitObject.holdDuration,o,s)?a.status=3:(a.status=2,dt.incrementScore("miss")))}},this.calculateSizes=()=>{const r=this.wrapperRef.current;if(!r)return;const n=r.clientWidth,i=n/this.state.song.keys,o=i*.6,s={width:n,height:r.clientHeight,rawWidth:n,rawHeight:r.clientHeight,el:r.getBoundingClientRect(),keyWidth:i,hitObjectSize:o,scaling:r.clientHeight/this.props.scrollSpeed,verticalOffset:15},a=r.querySelector("canvas");a&&(a.style.width=`${s.width}px`,a.style.height=`${s.height}px`),this.props.onSizeChange(s),this.setState({sizes:s},this.generateCache)},this.generateCache=()=>{const{colors:r,sizes:n,cache:i}=this.state,o=this.stageRef.current.app,s=new Woe({app:o,colors:r,sizes:n,trackColors:this.state.song.tracks.map(a=>a.color)});this.setState({cache:s},()=>{i==null||i.destroy()})},this.generateAccuracyBounds=()=>{const{song:r}=this.state;this.setState({accuracyBounds:r.getAccuracyBounds()})},this.getHitRating=(r,n)=>{const{accuracyBounds:i}=this.state,o=Math.abs(n-r.timestamp);return o<i[0]?"amazing":o<i[1]?"perfect":o<i[2]?"great":o<i[3]?"good":o<i[4]?"bad":"miss"},this.handleThemeChange=r=>{const n=r.get("primary"),i=r.getText("primary"),o=i.darken(.5).desaturate(1),s=r.layer("background",.18,.06),a=n.darken(.15),l=a.darken(.1),u=r.get("secondary"),c=r.get("accent");this.setState({colors:{background_plain:[n.hex(),n.rgbNumber()],background_layer_10:[s.hex(),s.rgbNumber()],background:[a.hex(),a.rgbNumber()],background_10:[l.hex(),l.rgbNumber()],secondary:[u.hex(),u.rgbNumber()],lineColor:[i.hex(),i.rgbNumber()],lineColor_10:[o.hex(),o.rgbNumber()],accent:[c.hex(),c.rgbNumber()]}},this.generateCache)},this.handleTick=(r,n)=>{const{isPlaying:i,scrollSpeed:o}=this.props,{song:s,renderableHitObjects:a,sizes:l}=this.state;if(!i)return;const u=this.state.timestamp+n,f=s.tickPlayback(u+o+l.height).map((p,m)=>p.map(b=>{const y=new Zoe(b);return y.instrumentIndex=m,y.color=s.tracks[m].color,y})).flat();this.validateHitObjects(u,a.concat(f),this.state.timestamp),this.props.onTick(u)},this.validateHitObjects=(r,n,i)=>{const{accuracy:o}=this.state,s=dt.keyboard;for(let l=0;l<n.length;l++){const u=n[l],c=s[u.hitObject.index];if(!c)continue;const f=u.status===0;if(!c.isPressed&&f&&u.hitObject.timestamp<r-o){u.status=2,dt.incrementScore("miss");continue}if(c.isPressed&&u.status===1){const p=u.hitObject.timestamp+u.hitObject.holdDuration<r-o;u.heldScoreTimeout-=r-i,p?(u.status=2,dt.incrementScore("miss")):u.heldScoreTimeout<=0&&(u.heldScoreTimeout=300,dt.incrementScore("perfect"));continue}}const a=n.filter(l=>l.hitObject.timestamp+l.hitObject.holdDuration>r-o);this.setState({timestamp:r,renderableHitObjects:a})},this.state={song:new qs(""),timestamp:0,accuracy:150,sizes:z7,colors:{background_plain:["#000000",1],background_layer_10:["#000000",1],background:["#000000",1],background_10:["#000000",1],secondary:["#000000",1],lineColor:["#000000",1],lineColor_10:["#000000",1],accent:["#000000",1]},accuracyBounds:[0,0,0,0,0],cache:null,renderableHitObjects:[]},this.throttledEventLoop=new H7(()=>{},this.props.maxFps),this.wrapperRef=M.exports.createRef(),this.stageRef=M.exports.createRef()}componentDidMount(){this.throttledEventLoop.setCallback(this.handleTick),this.throttledEventLoop.start(),dt.addKeyboardListener({callback:this.handleKeyboard,id:"vsrg-player-canvas"}),this.toDispose.push(()=>dt.removeKeyboardListener({id:"vsrg-player-canvas"})),this.toDispose.push(Doe(this.onSongPick)),this.toDispose.push(Vy(this.handleThemeChange)),dt.addEventListener(this.handleVsrgEvent,"vsrg-player-canvas"),this.toDispose.push(()=>dt.removeEventListener("vsrg-player-canvas")),window.addEventListener("resize",this.calculateSizes),this.toDispose.push(()=>window.removeEventListener("resize",this.calculateSizes)),this.calculateSizes()}componentWillUnmount(){this.throttledEventLoop.stop(),dt.setLayout(Ho.getVsrgKeybinds(4)),this.toDispose.forEach(t=>t())}render(){const{sizes:t,cache:r,renderableHitObjects:n,timestamp:i,colors:o}=this.state,{scrollSpeed:s}=this.props;return v(je,{children:k("div",{className:"vsrg-player-canvas box-shadow",style:{backgroundColor:o.background_layer_10[0]},ref:this.wrapperRef,children:[i+s<0&&v(qoe,{time:Math.abs(Math.ceil((i+s)/1e3*2))+1}),v(Qe.exports.Stage,{ref:this.stageRef,raf:!1,width:t.width,height:t.height,options:{backgroundAlpha:0,autoDensity:!1,resolution:(window==null?void 0:window.devicePixelRatio)||1},onMount:this.calculateSizes,children:r&&v(je,{children:v(Yoe,{sizes:t,offset:t.verticalOffset,cache:r,renderableHitObjects:n,timestamp:i})})})]})})}}function Qoe(){const[e,t]=M.exports.useState(dt.score);return M.exports.useEffect(()=>Goe(t),[]),e}function ese(){const e=Qoe();return k(je,{children:[v("div",{className:"vsrg-player-score",children:v("div",{className:"column space-between",children:v("div",{children:e.score})})}),e.scoreVisible&&k("div",{className:"vsrg-final-score box-shadow",children:[v($f,{text:"Amazing",number:e.amazing,color:Na.amazing,gridArea:"a"}),v($f,{text:"Perfect",number:e.perfect,color:Na.perfect,gridArea:"b"}),v($f,{text:"Great",number:e.great,color:Na.great,gridArea:"c"}),v($f,{text:"Good",number:e.good,color:Na.good,gridArea:"d"}),v($f,{text:"Miss",number:e.miss,color:Na.miss,gridArea:"e"}),k("div",{className:"row space-between",style:{width:"100%",alignItems:"center",gridArea:"f"},children:[k("div",{style:{fontSize:"1.2rem"},children:["Combo: ",e.combo,"x"]}),v("div",{className:"flex",style:{fontSize:"0.8rem",alignItems:"center"},children:e.score})]})]})]})}const tse=M.exports.memo(ese,(e,t)=>!1);function $f({text:e,color:t,number:r,gridArea:n}){return k("div",{className:"row floating-score-element",style:{gridArea:n},children:[v("span",{style:{color:t},children:e}),v("span",{children:r})]})}function rse({song:e,onStopSong:t,onRetrySong:r}){return e?k(je,{children:[v("div",{className:"vsrg-player-right",children:k("div",{className:"row space-between",style:{gap:"0.2rem"},children:[v(tu,{onClick:t,children:v(Ct,{children:v(vA,{})})}),v(tu,{onClick:r,children:v(Ct,{children:v(gA,{})})})]})}),v(tse,{})]}):null}const nse={transform:"rotate(0) scale(1)",color:"var(--primary-text)"};function ise(){const[e,t]=M.exports.useState(dt.score.lastScore),r=M.exports.useRef(null),[n,i]=M.exports.useState(nse);return M.exports.useEffect(()=>{let o=0;const s=joe(a=>{t(a),clearTimeout(o),o=setTimeout(()=>{t({...a,type:""})},800)});return()=>{s(),clearTimeout(o)}},[]),M.exports.useEffect(()=>{const o=r.current;if(!o)return;const s=Math.floor(Math.random()*25-12.5);o.animate([n,{transform:`rotate(${s}deg) scale(1.3)`,color:Na[e.type]},{transform:"rotate(0) scale(1)",color:Na[e.type]}],{duration:150,easing:"ease-out"}),i({transform:`rotate(${s}deg)`,color:Na[e.type]})},[e]),k(je,{children:[v("div",{ref:r,style:n,className:"vsrg-floating-score",children:e.type}),v("div",{className:"vsrg-floating-combo",children:e.combo>0&&`${e.combo}x`})]})}const ose=M.exports.memo(ise,(e,t)=>!1);class sse extends M.exports.Component{constructor(t){super(t),this.lastTimestamp=0,this.onSongSelect=async(r,n)=>{const{songAudioPlayer:i,keyboardAudioPlayer:o}=this.state,s=await At.getSongById(r.audioSongId);if(me.showPill("Loading instruments..."),s){const a=it.parseSong(s);if(i.basePitch=a.pitch,a instanceof Nn&&(this.setState({audioSong:a}),await i.syncInstruments(a.instruments)),a instanceof Kr){const l=a.toRecordedSong(0);this.setState({audioSong:l}),await i.syncInstruments(l.instruments)}}else this.setState({audioSong:null});await o.syncInstruments(r.tracks.map(a=>a.instrument)),me.hidePill(),this.setState({song:r,isPlaying:!0},()=>{n==="play"&&(dt.setLayout(Ho.getVsrgKeybinds(r.keys)),dt.playSong(r))})},this.handleSettingChange=r=>{const{settings:n}=this.state,{data:i}=r;n[r.key]={...n[r.key],value:i.value},this.setState({settings:{...n}},()=>{this.updateSettings(),r.key==="maxFps"&&dt.emitEvent("fpsChange")})},this.updateSettings=r=>{fn.updateVsrgPlayerSettings(r!==void 0?r:this.state.settings)},this.onSizeChange=r=>{this.setState({canvasSizes:r})},this.onStopSong=()=>{this.setState({isPlaying:!1,song:null},()=>{dt.stopSong()})},this.onRetrySong=()=>{const{song:r}=this.state;!r||this.onSongSelect(r,"play")},this.handleTick=r=>{const{audioSong:n,songAudioPlayer:i,song:o,settings:s}=this.state;this.lastTimestamp=r,o&&(this.lastTimestamp>=o.duration+2e3&&(this.setState({isPlaying:!1}),dt.showScore()),!(this.lastTimestamp>=o.duration||r<0)&&n&&n.tickPlayback(r+s.offset.value).forEach(l=>{l.layer.toArray().forEach((c,f)=>{c===0||o.trackModifiers[f].muted||i.playNoteOfInstrument(f,l.index)})}))},this.playHitObject=(r,n)=>{const{keyboardAudioPlayer:i}=this.state;i&&r.notes.forEach(o=>{i.playNoteOfInstrument(n,o)})},this.state={song:null,audioSong:null,settings:fn.getVsrgPlayerSettings(),canvasSizes:z7,songAudioPlayer:new up("C"),keyboardAudioPlayer:new up("C"),currentLayout:Ho.getVsrgKeybinds(4),isPlaying:!1}}componentDidMount(){dt.setLayout(this.state.currentLayout)}componentWillUnmount(){const{songAudioPlayer:t,keyboardAudioPlayer:r}=this.state;t.destroy(),r.destroy(),dt.resetScore(),me.hidePill()}render(){const{canvasSizes:t,settings:r}=this.state;return k(je,{children:[v(An,{text:"Vsrg Player"}),k("div",{className:"vsrg-player-page",children:[v(Loe,{settings:r,onSettingsUpdate:this.handleSettingChange,onSongSelect:this.onSongSelect}),k("div",{className:"vsrg-player-grid",children:[v(Joe,{keyboardLayout:r.keyboardLayout.value,onTick:this.handleTick,maxFps:r.maxFps.value,scrollSpeed:r.approachTime.value,onSizeChange:this.onSizeChange,playHitObject:this.playHitObject,isPlaying:this.state.isPlaying}),v(Xoe,{keyboardLayout:r.keyboardLayout.value,offset:t.verticalOffset,hitObjectSize:t.hitObjectSize,verticalOffset:r.verticalOffset.value,horizontalOffset:r.horizontalOffset.value})]}),v(rse,{song:this.state.song,onStopSong:this.onStopSong,onRetrySong:this.onRetrySong}),v(ose,{})]})]})}}const ase=Th(sse);function lse({data:e,onChange:t,onVisibilityChange:r,theme:n,style:i}){const o=n.layer("menu_background",.2).desaturate(.5);return v(je,{children:k("div",{className:"row-centered space-between track-modifier",style:{backgroundColor:o.hex(),...i},children:[v("span",{className:"text-ellipsis",children:e.alias}),k("div",{className:"row-centered",style:{justifyContent:"flex-end"},children:[v(Be,{className:"flex-centered vsrg-track-modifier-button",onClick:()=>r(!e.hidden),children:e.hidden?v(Mb,{}):v(uA,{})}),v(Be,{className:"flex-centered vsrg-track-modifier-button",style:{marginLeft:"0.3rem"},onClick:()=>t(e.set({muted:!e.muted})),children:e.muted?v(fy,{}):v(yA,{})})]})]})})}const use=""+new URL("help-vsrg-composer.2989e7d1.png",import.meta.url).href;function cse(){const e=Ho.getVsrgKeybinds(6);return v(je,{children:k("div",{className:"column",children:[k("div",{className:"column",style:{padding:"0.4rem"},children:[v("h2",{style:{margin:0},children:"Vsrg Composer info"}),v("p",{style:{marginLeft:"0.4rem"},children:"This is a composer to create beatmaps for the songs you have in the app. Here are explained how the composer works and how to use it."}),v("h2",{style:{margin:0},children:"How to use"}),k("p",{style:{marginLeft:"0.4rem"},children:['You start off by selecting the song you want to create a beatmap for, you can find it in the Settings as "background song", you can mute and hide the layers of the song, the shown layers will have the notes appear in the timeline above the composer.',v("br",{}),v("br",{}),"Then you can select the bpm of the beatmap, usually it should be the same of the song or /2 or /4 of it. You can then select the different snap points, it's where the notes will be placed when you click on the editor. Then you can add notes to the editor by clicking them or using the keyboard. Once finished you can test the song in the vsrg player"]})]}),v("img",{src:use,className:"help-img",alt:"tutorial for the vsrg composer page",loading:"lazy"}),k("ol",{children:[v("li",{children:"Selected hit object"}),v("li",{children:"Held hit object"}),v("li",{children:"Background song notes"}),v("li",{children:"Instruments"}),v("li",{children:"Selected hit object's notes"}),v("li",{children:"Hit object type"}),v("li",{children:"Horizontal scaling"}),v("li",{children:"Slow down / Speed up the playback"}),v("li",{children:"BPM Snap points"}),v("li",{children:"Current timestamp in the timeline"}),v("li",{children:"Add/Remove breakpoint"})]}),v("div",{style:{marginBottom:"0.5rem"},children:"The main page has shortcuts for PC users:"}),v("table",{className:"keys-table",children:k("tbody",{children:[k("tr",{children:[v("td",{children:v(br,{children:"Space"})}),v("td",{children:" toggle playback "})]}),k("tr",{children:[v("td",{children:v(br,{children:"Arrow Left/Right"})}),v("td",{children:"Move to Previous/Next breakpoint"})]}),k("tr",{children:[v("td",{children:v(br,{children:"Arrow Up/Down"})}),v("td",{children:"Select instrument"})]}),k("tr",{children:[v("td",{children:v(br,{children:e.join("/")})}),v("td",{children:"Add hit object (syncs to the registered keybinds)"})]}),k("tr",{children:[v("td",{children:v(br,{children:"1/2/3"})}),v("td",{children:"Select tap/hold/delete"})]}),k("tr",{children:[v("td",{children:v(br,{children:"Shift + W/A/S/D"})}),v("td",{children:"Move the selected hit object up / left / down / right, inverts if the editor is horizontal"})]}),k("tr",{children:[v("td",{children:v(br,{children:"Esc"})}),v("td",{children:" Deselect current hitObject "})]})]})})]})})}const hse=Wn.exports();function fse({onSave:e,onSongOpen:t,settings:r,handleSettingChange:n,hasChanges:i,onCreateSong:o,setAudioSong:s,audioSong:a,trackModifiers:l,onTrackModifierChange:u}){const[c,f]=M.exports.useState(!1),[p,m]=M.exports.useState(!1),[g,b]=M.exports.useState("Settings"),[y]=Mp(),[w]=Uu(),[x]=en(),T=oa(P=>{f(!1),hse&&m(!1)},{active:c&&p,ignoreFocusable:!0}),I=M.exports.useCallback(P=>{typeof P!="boolean"&&(P=void 0),m(N=>P!==void 0?P:!N)},[]),R=M.exports.useCallback(P=>{if(P===g&&c)return f(!1);f(!0),P&&(b(P),Cn.UIEvent("menu",{tab:P}))},[c,g]);return k(je,{children:[v("div",{className:"hamburger vsrg-hamburger",onClick:()=>m(!p),children:v(Ct,{children:v(uy,{})})}),k("div",{className:"menu-wrapper",ref:T,children:[k("div",{className:p?"menu menu-visible":"menu",children:[v(Nt,{onClick:()=>I(!1),className:"close-menu",ariaLabel:"Close menu",children:v(eo,{className:"icon"})}),v(Nt,{onClick:e,className:`margin-top-auto ${i?"not-saved":""}`,ariaLabel:"Save",children:v(Ct,{children:v(dA,{className:"icon"})})}),v(Nt,{onClick:()=>R("Help"),isActive:c&&g==="Help",ariaLabel:"Help",children:v(Ct,{children:v(cA,{className:"icon"})})}),v(Nt,{onClick:()=>R("Songs"),isActive:c&&g==="Songs",ariaLabel:"Song menu",children:v(Ct,{children:v(yp,{className:"icon"})})}),v(Nt,{onClick:()=>R("Settings"),isActive:c&&g==="Settings",ariaLabel:"Settings menu",children:v(Ct,{children:v(Eu,{className:"icon"})})}),v(Nt,{onClick:()=>ln.open(),ariaLabel:"Open home menu",children:v(Ct,{children:v(Cu,{className:"icon"})})})]}),k("div",{className:c&&p?"side-menu menu-open":"side-menu",children:[v(si,{current:g,id:"Help",children:v(cse,{})}),k(si,{current:g,id:"Songs",children:[v("div",{className:"row",children:v(Be,{onClick:o,children:"Create song"})}),v(mu,{songs:w,exclude:["composed","recorded"],style:{marginTop:"0.6rem"},SongComponent:mse,componentProps:{theme:x,folders:y,functions:{onClick:t,toggleMenu:I}}})]}),k(si,{current:g,id:"Settings",children:[v(Dp,{settings:r,onUpdate:n}),k("div",{className:"column vsrg-select-song-wrapper",children:[k("h1",{className:"settings-group-title row-centered",children:["Background Song",v(Lu,{buttonStyle:{width:"1.2rem",height:"1.2rem",marginLeft:"0.5rem"},children:"You can select one of your songs to be played on the background"})]}),a===null?v("span",{children:"No background song selected"}):k("div",{className:"column vsrg-composer-selected-song",children:[k("div",{className:"row",style:{borderBottom:"2px solid var(--secondary)",paddingBottom:"0.4rem",marginBottom:"0.4rem"},children:[v("span",{className:"song-name",style:{cursor:"default"},children:a.name}),v(Sg,{onClick:()=>s(null),ariaLabel:"Remove background song",tooltip:"Remove background song",style:{backgroundColor:"var(--red-bg)",margin:0},children:v(eo,{})})]}),k("div",{className:"row-centered space-between",children:[v("span",{children:"Pitch"}),v("span",{children:a.pitch})]}),k("div",{className:"row-centered space-between",children:[v("span",{children:"BPM"}),v("span",{children:a.bpm})]}),v("span",{style:{marginTop:"0.4rem"},children:"Instrument modifiers"}),l.map((P,N)=>v(lse,{theme:x,data:P,onChange:A=>u(A,N,!1),onVisibilityChange:A=>{u(P.set({hidden:A}),N,!0)}},N))]}),v(mu,{songs:w,exclude:["vsrg"],style:{marginTop:"0.6rem"},SongComponent:pse,componentProps:{onClick:s}})]})]})]})]})]})}const dse=M.exports.memo(fse,(e,t)=>e.settings===t.settings&&e.hasChanges===t.hasChanges&&e.audioSong===t.audioSong&&e.trackModifiers===t.trackModifiers);function pse({data:e,onClick:t}){return v(je,{children:k("div",{className:`song-row ${Pn(!0)}`,onClick:async()=>{const r=await it.getOneSerializedFromStorable(e);if(!r)return me.error("Could not find song");t(r)},style:{cursor:"pointer"},children:[v("div",{className:"song-name",children:e.name}),v(hn,{children:"Click to select as background song"})]})})}function mse({data:e,functions:t,theme:r,folders:n}){const{toggleMenu:i,onClick:o}=t,s={backgroundColor:r.layer("primary",.15).hex()},[a,l]=M.exports.useState(!1),[u,c]=M.exports.useState(e.name);return M.exports.useEffect(()=>{c(e.name)},[e.name]),e.type!=="vsrg"?v("div",{className:"row",children:"Invalid song"}):k("div",{className:"song-row",children:[k("div",{className:`song-name ${Pn(!0)}`,onClick:async()=>{if(a)return;const f=await it.fromStorableSong(e);if(!f)return me.error("Could not find song");o(f),i(!1)},children:[a?v("input",{className:`song-name-input ${a?"song-rename":""}`,disabled:!a,onChange:f=>c(f.target.value),style:{width:"100%",color:"var(--primary-text)"},value:u}):v("div",{style:{marginLeft:"0.3rem"},children:u}),v(hn,{children:a?"Song name":"Play song"})]}),v("div",{className:"song-buttons-wrapper",children:k(Fp,{Icon:Eh,style:s,ignoreClickOutside:a,tooltip:"More options",onClose:()=>l(!1),children:[k(hr,{onClick:()=>{a&&(At.renameSong(e.id,u),l(!1)),l(!a)},children:[v(_p,{style:{marginRight:"0.4rem"},size:14}),v(Fr,{text:a?"Save":"Rename"})]}),k(hr,{style:{padding:"0 0.4rem"},children:[v(cy,{style:{marginRight:"0.4rem"}}),k("select",{className:"dropdown-select",value:e.folderId||"_None",onChange:async f=>{const p=f.target.value,m=await it.getOneSerializedFromStorable(e);if(!m)return me.error("Could not find song");At.addSongToFolder(m,p!=="_None"?p:null)},children:[v("option",{value:"_None",children:"None"}),n.map(f=>v("option",{value:f.id,children:f.name},f.id))]})]}),k(hr,{onClick:async()=>{const f=await it.getOneSerializedFromStorable(e);if(!f)return me.error("Could not find song");fr.downloadSong(f,e.name)},children:[v(ns,{style:{marginRight:"0.4rem"},size:14}),v(Fr,{text:"Download"})]}),k(hr,{onClick:async()=>{!await Br("Are you sure you want to delete this song?")||At.removeSong(e.id)},children:[v(to,{color:"#ed4557",style:{marginRight:"0.4rem"},size:14}),v(Fr,{text:"Delete"})]})]})})]})}function vse({options:e,selected:t,onChange:r}){const n=M.exports.useRef(null),i=e.find(a=>a.value===t),[o,s]=M.exports.useState({width:0,left:0});return M.exports.useEffect(()=>{var f;const a=(f=n.current)==null?void 0:f.querySelectorAll("button"),l=e.findIndex(p=>p.value===t);if(!a||l<0)return;const u=a[l].getBoundingClientRect(),c=n.current.getBoundingClientRect();s({width:u.width,left:u.left-c.left})},[n,e,t]),k("div",{className:"multiple-option-slider",ref:n,children:[e.map(a=>v("button",{onClick:()=>r(a.value),className:a===i?"multiple-options-selected":"",children:ky(a.value)},a.value)),v("div",{className:"multiple-option-slider-overlay",style:{width:`${o.width}px`,left:`${o.left}px`,backgroundColor:i==null?void 0:i.color}})]})}const gse=[{value:"tap",color:"var(--accent)"},{value:"hold",color:"#8569a9"},{value:"delete",color:"var(--red)"}],yse=[1,2,4,8,16];function _se({onSnapPointChange:e,onHitObjectTypeChange:t,selectedSnapPoint:r,isPlaying:n,togglePlay:i,selectedHitObjectType:o,vsrg:s,onScalingChange:a,scaling:l,tempoChanger:u,onTempoChangerChange:c}){return v(je,{children:k("div",{className:"vsrg-bottom",children:[v(vse,{options:gse,selected:o,onChange:f=>{t(f)}}),v("div",{className:"vsrg-name text-ellipsis",children:s.name}),v("div",{className:"flex-centered",style:{flex:"1",padding:"0 1rem"},children:v("input",{type:"range",min:10,style:{width:"100%"},max:120,value:l,onPointerUp:f=>{var p;(p=f.target)==null||p.blur()},onChange:f=>a(parseInt(f.target.value))})}),k("div",{className:"flex-centered",style:{height:"100%"},children:[v(Cg,{value:u,onChange:f=>c(Number(f.target.value)),style:{width:"5rem",height:"100%",borderRadius:"0.4rem",marginRight:"0.6rem"},children:bM.map(f=>k("option",{value:f,children:[f*100,"%"]},f))}),v(Cg,{value:r,onChange:f=>{const p=parseInt(f.target.value);e(p)},style:{width:"6rem",height:"100%",borderRadius:"0.4rem"},children:yse.map(f=>k("option",{value:f,children:["Snap: 1/",f]},f))}),v(Be,{className:"vsrg-play-button flex-centered",onClick:i,children:n?v(hA,{size:20}):v(fA,{size:20})})]})]})})}function bse({elements:e,perRow:t,onClick:r,selected:n}){return v(je,{children:v("div",{className:"vsrg-keyboard",style:{gridTemplateColumns:`repeat(${t}, 1fr)`,gridTemplateRows:`repeat(${Math.ceil(e.length/t)}, 1fr)`,opacity:n?1:.5,pointerEvents:n?"all":"none",cursor:n?"pointer":"not-allowed"},children:e.map(i=>v("button",{onClick:()=>r(i),style:n!=null&&n.includes(i)?{backgroundColor:"var(--accent)"}:{}},i))})})}function wse({onChange:e,value:t,absolute:r=!0,style:n}){const[i,o]=M.exports.useState(Et(t));M.exports.useEffect(()=>{o(Et(t))},[t]);function s(l){o(Et(l))}function a(){e==null||e(i.toString())}return v(je,{children:k("div",{className:"color-picker",style:{position:r?"absolute":"unset",...n},children:[v(Toe,{onChange:s,color:i.hex()}),k("div",{className:"color-picker-row",children:[k("div",{className:"color-picker-input",style:{backgroundColor:i.toString(),color:i.isDark()?vt.text.light:vt.text.dark},children:[v("div",{style:{fontFamily:"Arial"},children:"#"}),v($7,{onChange:s,color:i.hex(),style:{color:i.isDark()?vt.text.light:vt.text.dark}})]}),v("button",{className:"color-picker-check",onClick:()=>{o(Et(t)),e==null||e(t)},style:{backgroundColor:i.toString(),color:i.isDark()?vt.text.light:vt.text.dark},children:v(eo,{size:16})}),v("button",{className:"color-picker-check",onClick:a,style:{backgroundColor:i.toString(),color:i.isDark()?vt.text.light:vt.text.dark},children:v(iA,{size:16})})]})]})})}class xse{constructor(){this.listeners=new Map}addEventListener(t,r){this.listeners.has(t)||this.listeners.set(t,[]),this.listeners.get(t).push(r)}removeEventListener(t,r){const n=this.listeners.get(t);if(!n)return;const i=n.findIndex(o=>o.id===r.id||o.callback===r.callback);i!==-1&&n.splice(i,1)}emitEvent(t,r){var i,o;[...(i=this.listeners.get(t))!=null?i:[],...(o=this.listeners.get("ALL"))!=null?o:[]].forEach(s=>s.callback(t,r))}}const bi=new xse;function Tse({track:e,onSave:t,onDelete:r,onChange:n}){const[i,o]=M.exports.useState(!1);return e?k(je,{children:[k("div",{className:"vsrg-floating-settings box-shadow",children:[k("div",{className:"row-centered space-between",children:["Track name",v("input",{type:"text",maxLength:50,className:"input",style:{width:"7.4rem"},value:e.instrument.alias,onChange:s=>{e.instrument.set({alias:s.target.value}),n(e)},placeholder:e.instrument.name})]}),k("div",{className:"row-centered space-between",style:{marginTop:"0.4rem"},children:["Instrument",v(A7,{style:{width:"8rem"},selected:e.instrument.name,onChange:s=>{e.instrument.set({name:s}),n(e)}})]}),k("div",{className:"row-centered space-between",style:{marginTop:"0.4rem"},children:["Pitch",v(k4,{style:{width:"8rem"},selected:e.instrument.pitch,onChange:s=>{e.instrument.set({pitch:s}),n(e)},children:v("option",{value:"",children:"Use song pitch"})})]}),k("div",{className:"row-centered",style:{marginTop:"1rem",alignItems:"center"},children:["Volume",k("span",{style:{marginLeft:"0.4rem",width:"3rem",...e.instrument.volume>100&&{color:`hsl(0, ${-40+e.instrument.volume}%, 61%)`,marginLeft:"0.4rem"}},children:[e.instrument.volume,"%"]}),v(Lu,{buttonStyle:{width:"1.2rem",height:"1.2rem"},width:10,children:"If you hear distortion, reduce the volume"})]}),v("div",{className:"row-centered",children:v("input",{type:"range",style:{flex:"1"},min:0,max:125,value:e.instrument.volume,onChange:s=>{e.instrument.set({volume:parseInt(s.target.value)}),n(e)}})}),v("div",{className:"column",children:k("div",{className:"row-centered space-between",children:["Color",v(Be,{onClick:()=>o(!0),ariaLabel:"Change color",style:{backgroundColor:e.color,color:Et(e.color).isDark()?"#fff":"#000"},children:"Change"})]})}),k("div",{className:"row space-between",style:{marginTop:"0.4rem"},children:[k(Be,{className:"row-centered",style:{padding:"0.4rem",width:"fit-content"},onClick:r,children:[v(to,{color:"var(--red)",style:{marginRight:"0.3rem"}}),"Delete"]}),v(Be,{onClick:t,style:{padding:"0.4rem",width:"fit-content"},children:"Ok"})]})]}),i&&v(wse,{style:{right:"0.8rem",top:"0.5rem"},value:e.color,onChange:s=>{n(e.set({color:s})),o(!1),bi.emitEvent("colorChange")}})]}):null}function Sse({vsrg:e,selectedTrack:t,children:r,onTrackAdd:n,onTrackChange:i,onTrackSelect:o,onTrackDelete:s,onNoteSelect:a,onBreakpointChange:l,onBreakpointSelect:u,lastCreatedHitObject:c,selectedHitObject:f}){const[p]=en(),[m,g]=M.exports.useState([]),[b,y]=M.exports.useState(!1),w=e.tracks[t];return M.exports.useEffect(()=>{g(new Array(15).fill(0).map((x,T)=>T))},[]),k(je,{children:[r,k("div",{className:`vsrg-top-right ${c!==null?"vsrg-top-right-disabled":""}`,children:[b&&v(Tse,{track:w,onSave:()=>y(!1),onDelete:()=>s(t),onChange:x=>i(x,t)}),k("div",{className:"row-centered vsrg-breakpoints-buttons",style:{marginBottom:"0.4rem"},children:[v(Be,{style:{marginLeft:0},onClick:()=>u(-1),children:v(Ct,{children:v(pA,{})})}),v(Be,{onClick:()=>l(!0),children:v(Ct,{children:v(hy,{})})}),v(Be,{onClick:()=>l(!1),children:v(Ct,{children:v(uu,{})})}),v(Be,{onClick:()=>u(1),children:v(Ct,{children:v(mA,{})})})]}),k("div",{className:"vsrg-track-wrapper column",children:[e.tracks.map((x,T)=>v(Ese,{track:x,selected:T===t,theme:p,onSettingsClick:()=>y(!b),onTrackClick:()=>o(T)},T)),v("div",{style:{width:"100%",height:"1.4rem"}}),v(Be,{onClick:x=>{setTimeout(()=>{var T;n(),(T=x.target)==null||T.scrollIntoView()},50)},ariaLabel:"Add new instrument",className:"flex-centered",style:{marginTop:"auto",padding:"0.3rem"},children:v(uu,{size:16,color:"var(--icon-color)"})})]}),v(bse,{elements:m,selected:f==null?void 0:f.notes,perRow:5,onClick:a})]})]})}function Ese({track:e,selected:t,theme:r,onSettingsClick:n,onTrackClick:i}){const[o,s]=M.exports.useState({background:"var(--primary)",text:"var(--primary-text)"}),[a,l]=M.exports.useState({background:"var(--primary)",text:"var(--primary-text)"});return M.exports.useEffect(()=>{const c=r.get("primary").mix(new Et(e.color),.3);s({background:c.toString(),text:c.isDark()?"var(--text-light)":"var(--text-dark)"});const f=new Et(e.color);l({background:f.toString(),text:f.isDark()?"rgb(220 219 216)":"rgb(55 55 55)"})},[r,e.color]),v(je,{children:k("div",{className:"vsrg-track row-centered",style:{backgroundColor:t?o.background:"var(--primary)",color:t?o.text:"var(--primary-text)"},onClick:i,children:[v("span",{className:"text-ellipsis",style:{color:t?o.text:"var(--text-color)",paddingLeft:"0.6rem",paddingRight:"0.2rem",flex:1},children:e.instrument.alias||e.instrument.name}),v(Be,{onClick:()=>t&&n(),style:{backgroundColor:a.background},className:"vsrg-track-left flex-centered",children:t&&v(Eu,{color:a.text})})]})})}Pa.LINE_SCALE_MODE=ci.NORMAL;class Cse{constructor({app:t,colors:r,sizes:n,trackColors:i,isHorizontal:o}){this.destroy=()=>{var s,a,l,u;(s=this.textures.snapPoints.small)==null||s.destroy(),(a=this.textures.snapPoints.large)==null||a.destroy(),(l=this.textures.snapPoints.empty)==null||l.destroy(),Object.values(this.textures.hitObjects).forEach(c=>c==null?void 0:c.destroy()),Object.values(this.textures.heldHitObjects).forEach(c=>c==null?void 0:c.destroy()),Object.values(this.textures.trails).forEach(c=>c==null?void 0:c.destroy()),Object.values(this.textures.selectionRings).forEach(c=>c==null?void 0:c.destroy()),Object.values(this.textures.timeline).forEach(c=>c==null?void 0:c.destroy()),(u=this.textures.buttons.time)==null||u.destroy(),this.app=null},this.textures={hitObjects:{},heldHitObjects:{},selectionRings:{},trails:{},buttons:{width:0,height:0,time:null},snapPoints:{size:0,small:null,large:null,empty:null},timeline:{breakpoint:null,currentTime:null,note:null,square:null,thumb:null},sizes:{hitObject:0,trail:0}},this.trackColors=i,this.colors=r,this.isHorizontal=o,this.sizes=n,this.app=t,this.generate()}generate(){const{app:t}=this;!t||(this.generateSnapPoints(t),this.generateTrackCache(t),this.generateTrails(t),this.generateSelectionRings(t),this.generateOthers(t))}getHitObjectCache(t){return this.textures.hitObjects[t]||this.textures.hitObjects["#FF0000"]}getHeldTrailCache(t){return this.textures.trails[t]||this.textures.trails["#FF0000"]}getHeldHitObjectCache(t){return this.textures.heldHitObjects[t]||this.textures.heldHitObjects["#FF0000"]}getSelectionRingsCache(t){return this.textures.selectionRings[t]||this.textures.selectionRings["#FF0000"]}generateOthers(t){const{sizes:r,colors:n,isHorizontal:i}=this,o=new ar;o.beginFill(this.colors.background_plain[1]).drawRect(0,0,this.sizes.width,this.sizes.timelineSize).lineStyle(3,this.colors.secondary[1],1).moveTo(0,r.timelineSize).lineTo(this.sizes.width,r.timelineSize);const s=t.renderer.generateTexture(o,{resolution:1,scaleMode:St.LINEAR,region:new Me(0,0,this.sizes.width,this.sizes.timelineSize)});this.textures.timeline.square=s;const a=i?r.height/16:r.width/16,l=ai(r.timelineSize/4,8,100),u=new ar;u.beginFill(n.accent[1]).moveTo(0,0).lineTo(l,0).lineTo(l/2,l).lineTo(0,0).moveTo(0,0).lineTo(l,0).lineTo(l/2,-l).lineTo(0,0).endFill().lineStyle(3,n.accent[1],1).moveTo(l/2,0).lineTo(l/2,r.timelineSize).lineStyle(0).beginFill(n.accent[1]).moveTo(0,r.timelineSize).lineTo(l,r.timelineSize).lineTo(l/2,r.timelineSize).lineTo(0,r.timelineSize).moveTo(0,r.timelineSize).lineTo(l,r.timelineSize).lineTo(l/2,r.timelineSize-l).lineTo(0,r.timelineSize);const c=r.timelineSize/2,f=new ar;f.lineStyle(Wn.exports()?2:3,n.secondary[1],1).drawCircle(r.timelineSize/2+1,r.timelineSize/2,c/2);const p=t.renderer.generateTexture(f,{resolution:1,scaleMode:St.LINEAR,region:new Me(0,0,r.timelineSize,r.timelineSize)});this.textures.timeline.note=p;const m=new ar;m.lineStyle(12,n.accent[1],1).moveTo(0,0).lineTo(0,r.timelineSize);const g=t.renderer.generateTexture(m,{resolution:1,scaleMode:St.LINEAR,region:new Me(0,0,12,r.timelineSize)});this.textures.timeline.currentTime=g;const b=t.renderer.generateTexture(u,{resolution:2,scaleMode:St.LINEAR,region:new Me(0,0,l,r.timelineSize)});this.textures.timeline.thumb=b;const y=new ar;y.beginFill(n.accent[1]).moveTo(0,0).lineTo(l,0).lineTo(l/2,l).lineTo(0,0).moveTo(0,0).lineTo(l,0).lineTo(l/2,-l).lineTo(0,0);const w=t.renderer.generateTexture(y,{resolution:1,scaleMode:St.LINEAR,region:new Me(0,0,l,l)});this.textures.timeline.breakpoint=w;const x=new ar;if(x.beginFill(n.background_10[1]),i){x.drawRoundedRect(a/2,a/2,r.width/2-a,r.height/2-a,16);const T=t.renderer.generateTexture(x,{resolution:1,scaleMode:St.LINEAR,region:new Me(0,0,r.width/2,r.height/2)});this.textures.buttons.width=r.width/2,this.textures.buttons.height=r.height/2,this.textures.buttons.time=T}else{x.drawRoundedRect(a/2,a/2,r.width/2-a,r.height/3-a,8);const T=t.renderer.generateTexture(x,{resolution:1,scaleMode:St.LINEAR,region:new Me(0,0,r.width/2,r.height/3)});this.textures.buttons.width=r.width/2,this.textures.buttons.height=r.height/3,this.textures.buttons.time=T}}generateTrails(t){const{sizes:r,trackColors:n}=this,i=[...n,"#FF0000"],o=ai(r.keyHeight/2*r.scaling,r.keyHeight/(Wn.exports()?3:4),100),s=o/2;i.forEach(a=>{const l=new ar;this.isHorizontal?l.beginFill(Et(a).rgbNumber()).drawRect(0,s/2,o,o-s):l.beginFill(Et(a).rgbNumber()).drawRect(s/2,0,o-s,o);const u=t.renderer.generateTexture(l,{resolution:1,scaleMode:St.LINEAR,region:new Me(0,0,o,o)});this.textures.trails[a]=u,l.destroy(!0)}),this.textures.sizes.trail=o}generateSelectionRings(t){const{sizes:r,trackColors:n}=this,i=[...n,"#FF0000"],o=ai(r.keyHeight/1.5*r.scaling,r.keyHeight/(Wn.exports()?1.2:2),150);i.forEach(s=>{const a=new ar;a.lineStyle(3,Et(s).rgbNumber()).drawCircle(o/2,o/2,o/2-3);const l=t.renderer.generateTexture(a,{resolution:1,scaleMode:St.LINEAR,region:new Me(0,0,o,o)});this.textures.selectionRings[s]=l,a.destroy(!0)})}generateTrackCache(t){const{colors:r,sizes:n,trackColors:i}=this,o=ai(n.keyHeight/1.8*n.scaling,n.keyHeight/(Wn.exports()?2:3.5),100);[...i,"#FF0000"].forEach(a=>{const l=new ar,u=o/2;l.lineStyle(5,Et(a).rgbNumber()).beginFill(r.background_10[1]).drawCircle(u,u,u-5);const c=t.renderer.generateTexture(l,{resolution:2,scaleMode:St.LINEAR,region:new Me(0,0,o,o)});this.textures.hitObjects[a]=c,l.destroy(!0);const f=new ar,p=o*.7,m=(o-p)/2;f.width=p,f.height=p,f.lineStyle(5,Et(a).rgbNumber()).beginFill(r.background_10[1]).drawRoundedRect(m,m,p,p,6);const g=t.renderer.generateTexture(f,{resolution:2,scaleMode:St.LINEAR,region:new Me(0,0,o,o)});this.textures.heldHitObjects[a]=g,f.destroy(!0)}),this.textures.sizes.hitObject=o}generateSnapPoints(t){const{colors:r,sizes:n,isHorizontal:i}=this,o=new ar,s=new ar,a=new ar;if(i){o.lineStyle(2,r.lineColor[1]).moveTo(0,0).lineTo(0,n.height);const l=t.renderer.generateTexture(o,{resolution:1,scaleMode:St.LINEAR,region:new Me(0,0,n.snapPointWidth,n.height)});s.lineStyle(4,r.secondary[1]).moveTo(0,0).lineTo(0,n.height);const u=t.renderer.generateTexture(s,{resolution:1,scaleMode:St.LINEAR,region:new Me(0,0,n.snapPointWidth,n.height)}),c=10,f=n.height/c;a.lineStyle(2,r.secondary[1]);for(let m=0;m<c+2;m++){const b=f*m-f;a.moveTo(Wr,b),a.lineTo(0,b+f)}const p=t.renderer.generateTexture(a,{resolution:1,scaleMode:St.LINEAR,region:new Me(0,0,Wr,n.height)});this.textures.snapPoints.size=n.snapPointWidth,this.textures.snapPoints.small=l,this.textures.snapPoints.large=u,this.textures.snapPoints.empty=p}else{o.lineStyle(2,r.lineColor[1]).moveTo(0,n.snapPointWidth).lineTo(n.width,n.snapPointWidth);const l=t.renderer.generateTexture(o,{resolution:1,scaleMode:St.LINEAR,region:new Me(0,0,n.width,n.snapPointWidth)});s.lineStyle(4,r.secondary[1]).moveTo(0,n.snapPointWidth).lineTo(n.width,n.snapPointWidth);const u=t.renderer.generateTexture(s,{resolution:1,scaleMode:St.LINEAR,region:new Me(0,0,n.width,n.snapPointWidth)}),c=20,f=n.width/c;a.lineStyle(2,r.secondary[1]);for(let m=0;m<c+2;m++){const b=f*m-f;a.moveTo(b,Wr),a.lineTo(b+f,0)}const p=t.renderer.generateTexture(a,{resolution:1,scaleMode:St.LINEAR,region:new Me(0,0,n.width,Wr)});this.textures.snapPoints.size=n.snapPointWidth,this.textures.snapPoints.large=u,this.textures.snapPoints.empty=p,this.textures.snapPoints.small=l}o.destroy(!0),s.destroy(!0),a.destroy(!0)}}var V7={exports:{}};(function(e){(function(){function t(y,w){document.addEventListener?y.addEventListener("scroll",w,!1):y.attachEvent("scroll",w)}function r(y){document.body?y():document.addEventListener?document.addEventListener("DOMContentLoaded",function w(){document.removeEventListener("DOMContentLoaded",w),y()}):document.attachEvent("onreadystatechange",function w(){(document.readyState=="interactive"||document.readyState=="complete")&&(document.detachEvent("onreadystatechange",w),y())})}function n(y){this.a=document.createElement("div"),this.a.setAttribute("aria-hidden","true"),this.a.appendChild(document.createTextNode(y)),this.b=document.createElement("span"),this.c=document.createElement("span"),this.h=document.createElement("span"),this.f=document.createElement("span"),this.g=-1,this.b.style.cssText="max-width:none;display:inline-block;position:absolute;height:100%;width:100%;overflow:scroll;font-size:16px;",this.c.style.cssText="max-width:none;display:inline-block;position:absolute;height:100%;width:100%;overflow:scroll;font-size:16px;",this.f.style.cssText="max-width:none;display:inline-block;position:absolute;height:100%;width:100%;overflow:scroll;font-size:16px;",this.h.style.cssText="display:inline-block;width:200%;height:200%;font-size:16px;max-width:none;",this.b.appendChild(this.h),this.c.appendChild(this.f),this.a.appendChild(this.b),this.a.appendChild(this.c)}function i(y,w){y.a.style.cssText="max-width:none;min-width:20px;min-height:20px;display:inline-block;overflow:hidden;position:absolute;width:auto;margin:0;padding:0;top:-999px;white-space:nowrap;font-synthesis:none;font:"+w+";"}function o(y){var w=y.a.offsetWidth,x=w+100;return y.f.style.width=x+"px",y.c.scrollLeft=x,y.b.scrollLeft=y.b.scrollWidth+100,y.g!==w?(y.g=w,!0):!1}function s(y,w){function x(){var I=T;o(I)&&I.a.parentNode&&w(I.g)}var T=y;t(y.b,x),t(y.c,x),o(y)}function a(y,w){var x=w||{};this.family=y,this.style=x.style||"normal",this.weight=x.weight||"normal",this.stretch=x.stretch||"normal"}var l=null,u=null,c=null,f=null;function p(){if(u===null)if(m()&&/Apple/.test(window.navigator.vendor)){var y=/AppleWebKit\/([0-9]+)(?:\.([0-9]+))(?:\.([0-9]+))/.exec(window.navigator.userAgent);u=!!y&&603>parseInt(y[1],10)}else u=!1;return u}function m(){return f===null&&(f=!!document.fonts),f}function g(){if(c===null){var y=document.createElement("div");try{y.style.font="condensed 100px sans-serif"}catch{}c=y.style.font!==""}return c}function b(y,w){return[y.style,y.weight,g()?y.stretch:"","100px",w].join(" ")}a.prototype.load=function(y,w){var x=this,T=y||"BESbswy",I=0,R=w||3e3,S=new Date().getTime();return new Promise(function(O,P){if(m()&&!p()){var N=new Promise(function(j,X){function G(){new Date().getTime()-S>=R?X(Error(""+R+"ms timeout exceeded")):document.fonts.load(b(x,'"'+x.family+'"'),T).then(function(ne){1<=ne.length?j():setTimeout(G,25)},X)}G()}),A=new Promise(function(j,X){I=setTimeout(function(){X(Error(""+R+"ms timeout exceeded"))},R)});Promise.race([A,N]).then(function(){clearTimeout(I),O(x)},P)}else r(function(){function j(){var te;(te=Y!=-1&&de!=-1||Y!=-1&&le!=-1||de!=-1&&le!=-1)&&((te=Y!=de&&Y!=le&&de!=le)||(l===null&&(te=/AppleWebKit\/([0-9]+)(?:\.([0-9]+))/.exec(window.navigator.userAgent),l=!!te&&(536>parseInt(te[1],10)||parseInt(te[1],10)===536&&11>=parseInt(te[2],10))),te=l&&(Y==ie&&de==ie&&le==ie||Y==Q&&de==Q&&le==Q||Y==ee&&de==ee&&le==ee)),te=!te),te&&(K.parentNode&&K.parentNode.removeChild(K),clearTimeout(I),O(x))}function X(){if(new Date().getTime()-S>=R)K.parentNode&&K.parentNode.removeChild(K),P(Error(""+R+"ms timeout exceeded"));else{var te=document.hidden;(te===!0||te===void 0)&&(Y=G.a.offsetWidth,de=ne.a.offsetWidth,le=W.a.offsetWidth,j()),I=setTimeout(X,50)}}var G=new n(T),ne=new n(T),W=new n(T),Y=-1,de=-1,le=-1,ie=-1,Q=-1,ee=-1,K=document.createElement("div");K.dir="ltr",i(G,b(x,"sans-serif")),i(ne,b(x,"serif")),i(W,b(x,"monospace")),K.appendChild(G.a),K.appendChild(ne.a),K.appendChild(W.a),document.body.appendChild(K),ie=G.a.offsetWidth,Q=ne.a.offsetWidth,ee=W.a.offsetWidth,X(),s(G,function(te){Y=te,j()}),i(G,b(x,'"'+x.family+'",sans-serif')),s(ne,function(te){de=te,j()}),i(ne,b(x,'"'+x.family+'",serif')),s(W,function(te){le=te,j()}),i(W,b(x,'"'+x.family+'",monospace'))})})},e.exports=a})()})(V7);const Ise=V7.exports;function X7(e=[],{testString:t,timeout:r}={},{showErrors:n}={showErrors:!1}){const[i,o]=M.exports.useState(!1),s=JSON.stringify(e);return M.exports.useEffect(()=>{const a=JSON.parse(s).map(({family:l,weight:u,style:c,stretch:f})=>new Ise(l,{weight:u,style:c,stretch:f}).load(t,r));Promise.all(a).then(()=>o(!0)).catch(()=>{n&&console.error("An error occurred during font loading")})},[s,t,r,n]),i}const W7=new ea({fontFamily:'"Source Sans Pro", Helvetica, sans-serif',fontSize:30,fill:"#ffffff"}),Nse=[{family:"Bonobo"}];function Pse({keys:e,sizes:t,colors:r,isHorizontal:n,onKeyDown:i,onKeyUp:o}){const[s,a]=M.exports.useState(W7),l=X7(Nse);M.exports.useEffect(()=>{a(new ea({fontFamily:l?'"Bonobo"':'"Source Sans Pro", Helvetica, sans-serif',fontSize:l?25:30,fill:r.lineColor[1]}))},[r,t,e,l]);const u=t.height/e.length,c=t.width/e.length;return k(Qe.exports.Container,{x:0,y:t.timelineSize,children:[v(Qe.exports.Graphics,{draw:f=>{if(f.clear(),f.beginFill(r.background_plain[1]),n){f.drawRect(0,0,60,t.height),f.lineStyle(2,r.lineColor_10[1]);for(let p=0;p<e.length-1;p++)f.moveTo(0,u*(p+1)),f.lineTo(t.width,u*(p+1));f.lineStyle(2,r.secondary[1]),f.moveTo(59,0),f.lineTo(59,t.height)}else{f.drawRect(0,t.height-60,t.width,60),f.lineStyle(2,r.lineColor_10[1]);for(let p=0;p<e.length-1;p++)f.moveTo(c*(p+1),0),f.lineTo(c*(p+1),t.height);f.lineStyle(2,r.secondary[1]),f.moveTo(0,t.height-60),f.lineTo(t.width,t.height-60)}}}),v(Qe.exports.Graphics,{draw:f=>{if(f.clear(),f.lineStyle(6,r.accent[1]),n){f.moveTo(Wr+1,0),f.lineTo(Wr+1,t.height);for(let p=0;p<e.length;p++)f.drawCircle(Wr+1,u*(p+.5),4)}else{const p=t.height-Wr-1-t.timelineSize;f.moveTo(0,p),f.lineTo(t.width,p);for(let m=0;m<e.length;m++)f.drawCircle(c*(m+.5)+1,p,4)}}}),e.map((f,p)=>{const m=new Me(n?0:c*p,n?u*p:t.height-60,n?60:t.width,n?u:60);return v(Qe.exports.Container,{hitArea:m,interactive:!0,pointerdown:()=>i(p),pointerup:()=>o(p),pointerupoutside:()=>o(p),children:v(Qe.exports.Text,{x:n?30:c*p+c/2,y:n?u*p+u/2:t.height-30,anchor:.5,text:`${p+1}`,style:s})},f)})]})}const Ase=M.exports.memo(Pse,(e,t)=>e.keys===t.keys&&e.sizes===t.sizes&&e.colors===t.colors&&e.isHorizontal===t.isHorizontal);function Rse({track:e,sizes:t,keys:r,cache:n,isHorizontal:i,selectedHitObject:o,selectHitObject:s,trackIndex:a,timestamp:l}){const u=t.scaling,c=t.height/r,f=t.width/r,p=l-Wr/u-n.textures.sizes.hitObject,m=l+(i?t.width:t.height)/u-Wr+n.textures.sizes.hitObject;return v(je,{children:e.hitObjects.map(g=>{if(p>g.timestamp+g.holdDuration||g.timestamp>m)return null;const b=i?g.timestamp*u:f*g.index+f/2,y=i?c*g.index+c/2:-(g.timestamp*u-t.height);return g.isHeld?k(Qe.exports.Container,{interactive:!0,pointerdown:w=>{s(g,a,hg(w.data.button))},children:[i?v(Qe.exports.Sprite,{texture:n.getHeldTrailCache(e.color),anchor:[0,.5],height:n.textures.sizes.trail,width:g.holdDuration*u,x:b,y}):v(Qe.exports.Sprite,{texture:n.getHeldTrailCache(e.color),anchor:o0,width:n.textures.sizes.trail,height:g.holdDuration*u,x:b,y}),v(Qe.exports.Sprite,{texture:n.getHeldHitObjectCache(e.color),anchor:.5,x:b,angle:45,y}),v(Qe.exports.Sprite,{texture:n.getHeldHitObjectCache(e.color),anchor:.5,x:i?(g.timestamp+g.holdDuration)*u:b,y:i?y:y-g.holdDuration*u}),g===o&&v(Qe.exports.Sprite,{texture:n.getSelectionRingsCache(e.color),anchor:.5,x:b,y})]},g.renderId):k(M.exports.Fragment,{children:[g===o&&v(Qe.exports.Sprite,{texture:n.getSelectionRingsCache(e.color),anchor:.5,x:b,y}),v(Qe.exports.Sprite,{texture:n.getHitObjectCache(e.color),interactive:!0,pointerdown:w=>{s(g,a,hg(w.data.button))},anchor:.5,x:b,y})]},g.renderId)})})}const kse=[{family:"Bonobo"}];function Ose({vsrg:e,sizes:t,snapPoint:r,timestamp:n,snapPoints:i,colors:o,cache:s,onSnapPointSelect:a,preventClick:l,isHorizontal:u,selectedHitObject:c,selectHitObject:f,onAddTime:p,onRemoveTime:m}){const g=t.scaling,b=n-(Wr+s.textures.snapPoints.size)/g,y=n+((u?t.width:t.height)-Wr)/g,w=s.textures.snapPoints.size,[x,T]=M.exports.useState(W7),I=X7(kse);M.exports.useEffect(()=>{T(new ea({fontFamily:I?'"Bonobo"':'"Source Sans Pro", Helvetica, sans-serif',fontSize:I?25:30,fill:o.lineColor[1]}))},[I,o.lineColor]);function R(S){if(!l)if(u){const O=S.data.global.y-t.timelineSize,P=S.target.x/g;a(P,Math.floor(O/t.keyHeight),hg(S.data.button))}else{const O=Math.abs(Math.floor(S.target.y-t.height+w)/g),P=S.data.global.x;a(O,Math.floor(P/t.keyWidth),hg(S.data.button))}}return k(Qe.exports.Container,{x:u?-n*g+Wr:0,y:u?t.timelineSize:n*g-Wr,interactive:!0,interactiveChildren:!0,children:[i.map((S,O)=>b>S||S>y?null:v(Qe.exports.Sprite,{interactive:!0,pointertap:R,x:u?S*g:0,y:u?0:-(S*g-t.height+w),texture:O%r?s.textures.snapPoints.small:s.textures.snapPoints.large},S)),b<0&&v(Qe.exports.Sprite,{x:u?-Wr:0,y:u?0:t.height,texture:s.textures.snapPoints.empty}),e.tracks.map((S,O)=>v(Rse,{track:S,cache:s,keys:e.keys,colors:o,sizes:t,timestamp:n,trackIndex:O,selectHitObject:f,selectedHitObject:c,isHorizontal:u},O)),n>=e.duration-(u?t.width:t.height)/g&&k(je,{children:[k(Qe.exports.Container,{pointertap:p,interactive:!0,x:u?e.duration*g:0,anchor:.5,y:u?0:-(e.duration*g-t.height+s.textures.buttons.height),children:[v(Qe.exports.Sprite,{texture:s.textures.buttons.time}),v(Qe.exports.Text,{x:s.textures.buttons.width/2,anchor:.5,y:s.textures.buttons.height/2,text:"Click to add time",style:x})]}),k(Qe.exports.Container,{pointertap:m,interactive:!0,x:u?e.duration*g:t.width/2,anchor:.5,y:u?t.height/2:-(e.duration*g-t.height+s.textures.buttons.height),children:[v(Qe.exports.Sprite,{texture:s.textures.buttons.time}),v(Qe.exports.Text,{x:s.textures.buttons.width/2,anchor:.5,y:s.textures.buttons.height/2,text:"Click to remove time",style:x})]})]})]})}function Lse({cache:e,breakpoints:t,sizes:r,duration:n}){return v(je,{children:v(Qe.exports.Container,{children:t.map(i=>v(Qe.exports.Sprite,{texture:e.textures.timeline.breakpoint,x:i/n*r.width},i))})})}const Use=M.exports.memo(Lse,(e,t)=>e.breakpoints===t.breakpoints&&e.cache===t.cache&&e.sizes===t.sizes&&e.duration===t.duration),Fse=new Me(0,0,0,0);function Mse({sizes:e,timestamp:t,song:r,cache:n,hidden:i,notes:o,onTimelineClick:s}){const[a,l]=M.exports.useState(Fse),[u,c]=M.exports.useState(!1),f=t-(Wr+e.timelineSize)/e.scaling,p=t+(e.width-Wr+e.timelineSize)/e.scaling,m=M.exports.useCallback(()=>c(!1),[]);M.exports.useEffect(()=>{l(new Me(0,0,e.width,e.timelineSize))},[e]),M.exports.useEffect(()=>{function w(){c(!1)}return window.addEventListener("blur",w),()=>window.removeEventListener("blur",w)},[]);const g=M.exports.useCallback((w,x)=>{if(!u&&x!==!0)return;const I=w.data.global.x/e.width*r.duration;s(ai(I,0,r.duration))},[e,r.duration,s,u]),b=M.exports.useCallback(w=>{c(!0),g(w,!0)},[g]);if(i)return null;const y=t/r.duration;return v(je,{children:k(Qe.exports.Container,{x:0,y:0,interactive:!0,pointermove:g,pointerdown:b,pointerup:m,pointerupoutside:m,hitArea:a,children:[v(Qe.exports.Sprite,{x:0,y:0,width:e.width,texture:n.textures.timeline.square}),v(Qe.exports.Container,{x:-t*e.scaling+Wr,y:0,children:o.map((w,x)=>w.time<f||w.time>p?null:v(Qe.exports.Sprite,{x:w.time*e.scaling,anchor:xM,texture:n.textures.timeline.note},x))}),v(Use,{breakpoints:r.breakpoints,cache:n,sizes:e,duration:r.duration}),v(Qe.exports.Sprite,{x:Wr-2,y:0,texture:n.textures.timeline.currentTime}),v(Qe.exports.Sprite,{y:0,x:y*e.width,texture:n.textures.timeline.thumb})]})})}class Bse extends M.exports.Component{constructor(t){super(t),this.wrapperRef=M.exports.createRef(),this.stageRef=M.exports.createRef(),this.toDispose=[],this.throttledEventLoop=new H7(()=>{},48),this.cumulativeScroll=0,this.handleEvent=(r,n)=>{r==="colorChange"&&this.generateCache(),r==="updateKeys"&&this.calculateSizes(),r==="updateOrientation"&&this.calculateSizes(),r==="snapPointChange"&&this.calculateSizes(),r==="tracksChange"&&this.generateCache(),r==="songLoad"&&this.calculateSizes(),r==="scaleChange"&&this.calculateSizes(),r==="maxFpsChange"&&this.throttledEventLoop.changeMaxFps(this.props.maxFps),r==="timestampChange"&&this.setTimestamp(n)},this.handleTick=(r,n)=>{if(this.props.isPlaying){const i=this.state.timestamp+n*this.props.tempoChanger;this.setTimestamp(i)}},this.handleBlur=()=>{this.setState({isPressing:!1})},this.calculateSizes=()=>{const{wrapperRef:r}=this;if(!r.current)return console.warn("no wrapper");const n=r.current.getBoundingClientRect(),{scaling:i}=this.props,o=Wn.exports()?20:40,s=n.height-o,a={el:n,rawWidth:n.width,rawHeight:n.height,width:n.width,height:s,keyHeight:s/cd[this.props.vsrg.keys].length,keyWidth:n.width/cd[this.props.vsrg.keys].length,snapPointWidth:6e4/this.props.vsrg.bpm/this.props.snapPoint*i/100,scaling:i/100,timelineSize:o},l=r.current.querySelector("canvas");l&&(l.style.width=`${a.width}px`,l.style.height=`${a.height+o}px`),this.setState({sizes:a},this.generateCache)},this.handleWheel=r=>{if(this.props.scrollSnap){if(this.cumulativeScroll+=r.deltaY,Math.abs(this.cumulativeScroll)<100)return;const{snapPoints:o}=this.props,s=o.findIndex(u=>u>this.state.timestamp),a=(s<0?o.length:s)-1+(this.cumulativeScroll<0?-1:1);if(this.cumulativeScroll=0,a<0||a>=o.length)return;const l=o[a];return this.setTimestamp(l)}const n=Math.max(0,this.state.timestamp+r.deltaY/1.2),i=Math.min(n,this.props.vsrg.duration);this.setState({timestamp:i},()=>{const{draggedHitObject:o,timestamp:s}=this.state;this.props.onTimestampChange(this.state.timestamp),!(!o||s<=0)&&this.props.dragHitObject(o.timestamp+r.deltaY/1.2)})},this.setIsDragging=r=>{const{sizes:n}=this.state;r.clientY-n.el.top>n.timelineSize&&this.setState({isPressing:!0,previousPosition:this.props.isHorizontal?r.clientX:-r.clientY})},this.setIsNotDragging=r=>{if(!this.state.isPressing)return;const n=this.state.draggedHitObject;this.setState({isPressing:!1,totalMovement:0,draggedHitObject:null},()=>{if(n&&this.props.releaseHitObject(),setTimeout(()=>this.setState({preventClick:!1}),200),this.props.scrollSnap){const{snapPoints:i}=this.props,o=i.findIndex(u=>u>this.state.timestamp);if(!o||o<0)return;const s=i[o],a=i[o-1];if(s===void 0||a===void 0)return;const l=hG(this.state.timestamp,a,s);this.setTimestamp(l)}})},this.handleDrag=r=>{if(!this.state.isPressing)return;const{previousPosition:n,draggedHitObject:i,sizes:o,timestamp:s}=this.state,{isHorizontal:a,vsrg:l}=this.props,u=a?r.clientX:-r.clientY,c=a?r.clientY-o.el.top-o.timelineSize:r.clientX-o.el.left,f=Math.floor(c/(a?o.keyHeight:o.keyWidth)),p=(n-u)/o.scaling,m=this.state.totalMovement+Math.abs(p);if(i!==null){const y=i.timestamp-p;return this.setState({previousPosition:u},()=>this.props.dragHitObject(Math.max(0,y),f))}const g=Math.max(0,s+p),b=Math.min(g,l.duration);this.setState({previousPosition:u,preventClick:m>50,totalMovement:m,timestamp:b},()=>this.props.onTimestampChange(this.state.timestamp))},this.generateCache=()=>{const{sizes:r,canvasColors:n,cache:i}=this.state,o=this.props.vsrg.tracks.map(a=>a.color);if(!this.stageRef.current)return;const s=new Cse({app:this.stageRef.current.app,sizes:r,colors:n,trackColors:o,isHorizontal:this.props.isHorizontal});this.setState({cache:s},()=>{i==null||i.destroy()})},this.selectHitObject=(r,n,i)=>{i!==2&&this.setState({draggedHitObject:r}),this.props.selectHitObject(r,n,i)},this.setTimestamp=r=>{this.setState({timestamp:r}),this.props.onTimestampChange(r)},this.handleThemeChange=r=>{const n=r.get("primary"),i=r.getText("primary"),o=i.darken(.5).desaturate(1),s=n.darken(.15),a=s.darken(.1),l=r.get("secondary"),u=r.get("accent");this.setState({canvasColors:{background_plain:[n.hex(),n.rgbNumber()],background:[s.hex(),s.rgbNumber()],background_10:[a.hex(),a.rgbNumber()],secondary:[l.hex(),l.rgbNumber()],lineColor:[i.hex(),i.rgbNumber()],lineColor_10:[o.hex(),o.rgbNumber()],accent:[u.hex(),u.rgbNumber()]}},this.generateCache)},this.state={canvasColors:{background_plain:["#000000",0],background:["#000000",0],background_10:["#000000",0],secondary:["#ffffff",16777215],lineColor:["#ffffff",16777215],lineColor_10:["#ffffff",16777215],accent:["#ffffff",16777215]},timestamp:0,sizes:{el:new DOMRect,rawWidth:0,rawHeight:0,width:0,height:0,snapPointWidth:0,keyHeight:0,keyWidth:0,timelineSize:0,scaling:0},draggedHitObject:null,isPressing:!1,totalMovement:0,previousPosition:0,preventClick:!1,cache:null},this.wrapperRef=M.exports.createRef(),this.stageRef=M.exports.createRef()}componentDidMount(){var t;this.toDispose.push(Vy(this.handleThemeChange)),window.addEventListener("resize",this.calculateSizes),this.toDispose.push(()=>window.removeEventListener("resize",this.calculateSizes)),bi.addEventListener("ALL",{callback:this.handleEvent,id:"vsrg-canvas-color-change"}),this.toDispose.push(()=>bi.removeEventListener("ALL",{id:"vsrg-canvas-color-change"})),this.calculateSizes(),this.throttledEventLoop.setCallback(this.handleTick),this.throttledEventLoop.changeMaxFps(this.props.maxFps),this.throttledEventLoop.start(),window.addEventListener("blur",this.handleBlur),(t=this.state.cache)==null||t.destroy(),this.toDispose.push(()=>window.removeEventListener("blur",this.handleBlur)),this.handleThemeChange(Se)}componentWillUnmount(){var t;this.toDispose.forEach(r=>r()),(t=this.state.cache)==null||t.destroy(),this.throttledEventLoop.stop()}render(){const{canvasColors:t,sizes:r,cache:n,timestamp:i,preventClick:o}=this.state,{vsrg:s,isHorizontal:a,audioSong:l,snapPoint:u,snapPoints:c,selectedHitObject:f}=this.props;return v("div",{className:"vsrg-top-canvas-wrapper",ref:this.wrapperRef,children:this.wrapperRef.current&&k(Qe.exports.Stage,{onMount:this.calculateSizes,ref:this.stageRef,raf:!1,width:r.rawWidth,height:r.rawHeight,onWheel:this.handleWheel,onPointerDown:this.setIsDragging,onPointerUp:this.setIsNotDragging,onPointerLeave:this.setIsNotDragging,onPointerMove:this.handleDrag,onContextMenu:p=>p.preventDefault(),options:{backgroundColor:t.background[1],autoDensity:!1,resolution:(window==null?void 0:window.devicePixelRatio)||1},children:[n&&v(Ose,{vsrg:s,cache:n,selectedHitObject:f,snapPoint:u,snapPoints:c,timestamp:i,preventClick:o,sizes:r,colors:t,isHorizontal:a,onAddTime:this.props.onAddTime,onRemoveTime:this.props.onRemoveTime,selectHitObject:this.selectHitObject,onSnapPointSelect:this.props.onSnapPointSelect}),v(Ase,{isHorizontal:a,keys:cd[s.keys],sizes:r,colors:t,onKeyDown:this.props.onKeyDown,onKeyUp:this.props.onKeyUp}),n&&v(Mse,{hidden:!1,notes:this.props.renderableNotes,cache:n,timestamp:i,onTimelineClick:this.setTimestamp,isHorizontal:a,song:s,audioSong:l,sizes:r,colors:t})]})})}}class Dse extends M.exports.Component{constructor(t){super(t),this.lastTimestamp=0,this.changes=0,this.playbackTimestamp=0,this.mounted=!1,this.heldKeys=[],this.pressedDownHitObjects=[],this.unblock=()=>{},this.addTrack=()=>{const{vsrg:n}=this.state;n.addTrack(),this.setState({vsrg:n},()=>bi.emitEvent("tracksChange"))},this.updateSettings=n=>{fn.updateVsrgComposerSettings(n!==void 0?n:this.state.settings)},this.syncInstruments=()=>{const{vsrg:n,audioPlayer:i}=this.state;i.syncInstruments(n.tracks.map(o=>o.instrument))},this.syncAudioSongInstruments=()=>{const{audioSong:n,audioPlaybackPlayer:i}=this.state;n!==null&&(i.syncInstruments(n.instruments),i.basePitch=n.pitch)},this.handleKeyboardDown=({event:n,letter:i,shift:o})=>{var l;const{vsrg:s}=this.state;if(o)return;const a=(l=cd[s.keys])==null?void 0:l.indexOf(i);if(a>=0){if(n.repeat)return;this.startHitObjectTap(a)}},this.handleKeyboardUp=({letter:n})=>{var s;const{vsrg:i}=this.state,o=(s=cd[i.keys])==null?void 0:s.indexOf(n);o>=0&&this.endHitObjectTap(o)},this.startHitObjectTap=n=>{const{vsrg:i,selectedTrack:o,selectedType:s}=this.state;this.heldKeys[n]=!0,this.changes++;const a=this.findClosestSnapPoint(this.lastTimestamp);if(s==="delete")return i.removeHitObjectInTrackAtTimestamp(o,a,n),this.setState({vsrg:i,selectedHitObject:null});const l=i.createHitObjectInTrack(o,a,n);this.pressedDownHitObjects[n]=l,this.setState({vsrg:i,selectedHitObject:l})},this.endHitObjectTap=n=>{const{vsrg:i,selectedTrack:o}=this.state,s=this.pressedDownHitObjects[n];if(this.heldKeys[n]&&s){const a=this.findClosestSnapPoint(s.timestamp+s.holdDuration);i.setHeldHitObjectTail(o,s,a-s.timestamp)}this.heldKeys[n]=!1,this.pressedDownHitObjects[n]=void 0},this.handleSettingChange=n=>{const{settings:i,vsrg:o}=this.state,{data:s}=n;i[n.key]={...i[n.key],value:s.value},n.key==="keys"&&o.changeKeys(s.value),n.key==="bpm"&&(o.set({bpm:s.value}),this.calculateSnapPoints()),n.key==="difficulty"&&o.set({difficulty:s.value}),this.setState({settings:{...i}},()=>{this.updateSettings(),n.key==="keys"&&bi.emitEvent("updateKeys"),n.key==="isVertical"&&bi.emitEvent("updateOrientation"),n.key==="maxFps"&&bi.emitEvent("maxFpsChange")})},this.changePage=async n=>{const{vsrg:i,settings:o}=this.state;if(n==="Home")return ln.open();if(this.changes!==0)if(o.autosave.value)await this.saveSong();else{const s=await Br(`You have unsaved changes to the song: "${i.name}" do you want to save? UNSAVED CHANGES WILL BE LOST`,!1);if(s===null)return;s&&await this.saveSong()}this.unblock(),this.props.history.push(n)},this.onSnapPointChange=n=>{const{vsrg:i}=this.state;i.set({snapPoint:n}),this.setState({snapPoint:n,vsrg:i},()=>{this.calculateSnapPoints(),bi.emitEvent("snapPointChange")})},this.selectHitObject=(n,i,o)=>{const s=n.isHeld?"hold":"tap";if(this.state.selectedType==="delete"||o===jo.Right){this.state.vsrg.removeHitObjectInTrack(i,n),this.setState({selectedHitObject:null,vsrg:this.state.vsrg});return}this.state.selectedType==="hold"&&o===jo.Left&&this.setState({selectedHitObject:n,lastCreatedHitObject:n,selectedType:s}),this.setState({selectedHitObject:n,selectedTrack:i,selectedType:s})},this.onSnapPointSelect=(n,i,o)=>{const{vsrg:s,selectedType:a,lastCreatedHitObject:l,selectedTrack:u,selectedHitObject:c}=this.state;if(this.changes++,n<0)return console.warn("Timestamp is less than 0");const p=s.getHitObjectsAt(n,i).find(m=>m!==null);if(o===jo.Unknown&&console.warn("unknown click type"),a==="tap"&&o===jo.Left){if(p)return this.setState({selectedHitObject:p});const m=s.createHitObjectInTrack(u,n,i);this.playHitObject(m,u),this.setState({selectedHitObject:m})}if(a==="hold"&&o===jo.Left)if(l!==null)s.setHeldHitObjectTail(u,l,n-l.timestamp),this.setState({lastCreatedHitObject:null,selectedHitObject:null});else{if(p)return this.setState({selectedHitObject:p});const m=s.createHeldHitObject(u,n,i);this.setState({lastCreatedHitObject:m,selectedHitObject:m})}(a==="delete"||o===jo.Right)&&(s.removeHitObjectInTrackAtTimestamp(u,n,i),this.setState({selectedHitObject:null})),this.setState({vsrg:s})},this.selectTrack=n=>{this.setState({selectedTrack:n})},this.setAudioSong=n=>{const{vsrg:i}=this.state;if(this.changes++,n===null)return i.setAudioSong(null),this.setState({audioSong:null,renderableNotes:[]});const o=it.parseSong(n);if(o instanceof Nn){i.setAudioSong(o),o.startPlayback(this.lastTimestamp),i.setDurationFromNotes(o.notes);const s=i.getRenderableNotes(o);this.setState({audioSong:o,renderableNotes:s},()=>{this.syncAudioSongInstruments(),this.calculateSnapPoints()})}if(o instanceof Kr){const s=o.toRecordedSong(0);i.setDurationFromNotes(s.notes),s.startPlayback(this.lastTimestamp),i.setAudioSong(o);const a=i.getRenderableNotes(s);this.setState({audioSong:s,renderableNotes:a},()=>{this.syncAudioSongInstruments(),this.calculateSnapPoints()})}},this.askForSongUpdate=async()=>await Br(`You have unsaved changes to the song: "${this.state.vsrg.name}" do you want to save now?`,!1),this.createNewSong=async()=>{if(this.state.vsrg.name!=="Untitled"&&this.changes>0){const i=await this.askForSongUpdate();if(i===null)return;i&&await this.saveSong()}const n=await En("Enter song name");if(n){const i=new qs(n);i.set({bpm:this.state.settings.bpm.value,keys:this.state.settings.keys.value,pitch:this.state.settings.pitch.value,snapPoint:this.state.snapPoint}),i.addTrack();const o=await At.addSong(i);i.set({id:o}),this.setState({vsrg:i,renderableNotes:[]},()=>{bi.emitEvent("songLoad"),this.calculateSnapPoints(),this.syncInstruments()})}},this.calculateSnapPoints=()=>{const{vsrg:n,snapPoint:i}=this.state,o=n.duration/Math.floor(6e4/n.bpm)*i,s=n.duration/o,a=new Array(Math.floor(o)).fill(0).map((l,u)=>u*s);this.setState({snapPoints:a,snapPointDuration:s})},this.dragHitObject=(n,i)=>{const{selectedHitObject:o,vsrg:s,settings:a}=this.state;o!==null&&(o.timestamp=n,i!==void 0&&i<a.keys.value&&(o.index=i),this.setState({vsrg:s,selectedHitObject:o}))},this.findClosestSnapPoint=n=>{const{snapPoints:i}=this.state;return i.reduce((s,a)=>Math.abs(a-n)<Math.abs(s-n)?a:s)},this.releaseHitObject=()=>{const{selectedHitObject:n,vsrg:i}=this.state;if(n===null)return;n.timestamp=this.findClosestSnapPoint(n.timestamp),i.getHitObjectsBetween(n.timestamp,n.timestamp+n.holdDuration,n.index).forEach((s,a)=>s.forEach(l=>l!==n&&i.removeHitObjectInTrackAtTimestamp(a,l.timestamp,l.index))),this.changes++,this.setState({vsrg:i})},this.onTrackChange=(n,i)=>{const{vsrg:o}=this.state;o.tracks[i]=n,this.setState({vsrg:o},this.syncInstruments)},this.onNoteSelect=n=>{const{selectedHitObject:i,audioPlayer:o,selectedTrack:s}=this.state;i==null||i.toggleNote(n),o.playNoteOfInstrument(s,n),this.setState({selectedHitObject:i})},this.togglePlay=()=>{const{isPlaying:n,vsrg:i,audioSong:o}=this.state;if(i.startPlayback(this.lastTimestamp),this.lastTimestamp>=i.duration)return this.setState({isPlaying:!1});o&&o.startPlayback(this.lastTimestamp),this.setState({isPlaying:!n})},this.playHitObject=(n,i)=>{const{audioPlayer:o}=this.state;o.playNotesOfInstrument(i,n.notes)},this.onTimestampChange=n=>{const{vsrg:i,isPlaying:o,audioSong:s,audioPlaybackPlayer:a,snapPointDuration:l}=this.state;if(this.lastTimestamp=n,o){if(this.lastTimestamp>=i.duration)return this.setState({isPlaying:!1});this.heldKeys.forEach((c,f)=>{if(c){const p=this.pressedDownHitObjects[f];if(!p)return;const m=n-p.timestamp;m>l&&(p.holdDuration=m,p.isHeld=!0)}}),s&&s.tickPlayback(n).forEach(f=>{f.layer.toArray().forEach((m,g)=>{m===0||i.trackModifiers[g].muted||a.playNoteOfInstrument(g,f.index)})}),i.tickPlayback(n).forEach((c,f)=>c.forEach(p=>this.playHitObject(p,f)))}},this.deleteTrack=async n=>{const{vsrg:i}=this.state;if(i.tracks.length===1)return me.error("Cannot delete last track");!await Br("Are you sure you want to remove this track? All notes will be deleted.")||!this.mounted||(this.changes++,i.deleteTrack(n),this.setState({vsrg:i,selectedTrack:Math.max(0,n-1)},()=>bi.emitEvent("tracksChange")))},this.onSongOpen=async n=>{const{settings:i,vsrg:o}=this.state;if(this.changes!==0){let s=i.autosave.value&&o.name!=="Untitled";if(!s){const a=await Br(`You have unsaved changes to the song: "${o.name}" do you want to save? UNSAVED CHANGES WILL BE LOST`,!1);if(a===null)return;s=a}s&&await this.saveSong()}i.bpm={...i.bpm,value:n.bpm},i.keys={...i.keys,value:n.keys},i.pitch={...i.pitch,value:n.pitch},this.updateSettings(),this.changes++,this.setState({vsrg:n,snapPoint:n.snapPoint,selectedTrack:0,selectedHitObject:null,lastCreatedHitObject:null},async()=>{bi.emitEvent("songLoad"),this.syncInstruments();const s=await At.getSongById(n.audioSongId);this.setAudioSong(s),this.calculateSnapPoints()})},this.addTime=()=>{const{vsrg:n}=this.state;n.duration+=1e3,this.calculateSnapPoints(),this.changes++,this.setState({vsrg:n})},this.removeTime=()=>{const{vsrg:n}=this.state;n.duration-=1e3,this.calculateSnapPoints(),this.changes++,this.setState({vsrg:n})},this.onScalingChange=n=>{this.setState({scaling:n},()=>bi.emitEvent("scaleChange"))},this.saveSong=async()=>{const{vsrg:n}=this.state,i=n.id!==null?n.name:await En("Enter song name");if(i!==null){if(n.set({name:i}),n.id===null){const o=await At.addSong(n);n.set({id:o})}else At.updateSong(n);this.changes=0,this.setState({vsrg:n})}},this.onTrackModifierChange=(n,i,o)=>{const{vsrg:s,audioSong:a}=this.state;if(s.trackModifiers[i]=n,s.trackModifiers=[...s.trackModifiers],this.changes++,o&&a){const l=s.getRenderableNotes(a);return this.setState({renderableNotes:l,vsrg:s})}this.setState({vsrg:s})},this.onTempoChangerChange=n=>{this.setState({tempoChanger:n})},this.selectType=n=>{this.setState({selectedType:n,lastCreatedHitObject:null})},this.onBreakpointChange=n=>{const{vsrg:i}=this.state,o=this.findClosestSnapPoint(this.lastTimestamp);i.setBreakpoint(o,!n),this.setState({vsrg:i})},this.onBreakpointSelect=n=>{const{vsrg:i,isPlaying:o,audioSong:s}=this.state,a=i.getClosestBreakpoint(this.lastTimestamp,n);o&&(s==null||s.startPlayback(a),i.startPlayback(a)),bi.emitEvent("timestampChange",a)};const r=fn.getVsrgComposerSettings();this.state={vsrg:new qs("Untitled"),audioPlayer:new up(r.pitch.value),audioPlaybackPlayer:new up(r.pitch.value),selectedTrack:0,snapPoint:1,snapPoints:[0],snapPointDuration:0,selectedHitObject:null,scaling:60,selectedType:"tap",isPlaying:!1,lastCreatedHitObject:null,settings:r,audioSong:null,renderableNotes:[],tempoChanger:1},this.state.vsrg.addTrack("DunDun"),this.state.vsrg.set({bpm:r.bpm.value,keys:r.keys.value}),this.mounted=!1}componentDidMount(){this.mounted=!0;const t="vsrg-composer";this.calculateSnapPoints(),this.syncInstruments(),this.unblock=this.props.history.block(r=>{if(this.changes!==0)return this.changePage(r.pathname),!1}),Xe.listen(this.handleKeyboardDown,{id:t,type:"keydown"}),Xe.registerNumber(1,()=>{this.setState({selectedType:"tap"})},{id:t}),Xe.registerLetter("W",()=>{const{selectedHitObject:r,vsrg:n,snapPointDuration:i}=this.state;!r||(this.state.settings.isVertical.value?r.timestamp=r.timestamp+i:r.index=ai(r.index-1,0,n.keys),this.releaseHitObject())},{id:t,shift:!0}),Xe.registerLetter("A",()=>{const{selectedHitObject:r,vsrg:n,snapPointDuration:i}=this.state;!r||(this.state.settings.isVertical.value?r.index=ai(r.index-1,0,n.keys):r.timestamp=r.timestamp-i,this.releaseHitObject())},{id:t,shift:!0}),Xe.registerLetter("S",()=>{const{selectedHitObject:r,vsrg:n,snapPointDuration:i}=this.state;!r||(this.state.settings.isVertical.value?r.timestamp=r.timestamp-i:r.index=ai(r.index+1,0,n.keys),this.releaseHitObject())},{id:t,shift:!0}),Xe.registerLetter("D",()=>{const{selectedHitObject:r,vsrg:n,snapPointDuration:i}=this.state;!r||(this.state.settings.isVertical.value?r.index=ai(r.index+1,0,n.keys):r.timestamp=r.timestamp+i,this.releaseHitObject())},{id:t,shift:!0}),Xe.register("Escape",()=>{this.setState({selectedHitObject:null,lastCreatedHitObject:null})},{id:t}),Xe.register("Backspace",()=>{const{selectedHitObject:r,vsrg:n,selectedTrack:i}=this.state;!r||(n.removeHitObjectInTrackAtTimestamp(i,r.timestamp,r.index),this.setState({selectedHitObject:null,lastCreatedHitObject:null}))}),Xe.registerNumber(2,()=>{this.setState({selectedType:"hold"})},{id:t}),Xe.registerNumber(3,()=>{this.setState({selectedType:"delete"})},{id:t}),Xe.register("ArrowLeft",()=>{this.onBreakpointSelect(-1)},{id:t}),Xe.register("ArrowRight",()=>{this.onBreakpointSelect(1)},{id:t}),Xe.register("ArrowUp",()=>{this.selectTrack(Math.max(0,this.state.selectedTrack-1))},{id:t}),Xe.register("ArrowDown",()=>{this.selectTrack(Math.min(this.state.vsrg.tracks.length-1,this.state.selectedTrack+1))},{id:t}),Xe.listen(this.handleKeyboardUp,{id:t,type:"keyup"}),Xe.register("Space",({event:r})=>{var n;r.repeat||(dG(document.activeElement)&&((n=document.activeElement)==null||n.blur()),this.togglePlay())},{id:"vsrg-composer"})}componentWillUnmount(){this.mounted=!1,Xe.unregisterById("vsrg-composer");const{audioPlaybackPlayer:t,audioPlayer:r}=this.state;t.destroy(),r.destroy()}render(){var g;const{settings:t,selectedTrack:r,vsrg:n,lastCreatedHitObject:i,snapPoints:o,isPlaying:s,snapPoint:a,selectedHitObject:l,selectedType:u,audioSong:c,scaling:f,renderableNotes:p,tempoChanger:m}=this.state;return k(je,{children:[v(An,{text:`Vsrg Composer - ${(g=n.name)!=null?g:"Unnamed"}`}),v(dse,{trackModifiers:n.trackModifiers,hasChanges:this.changes>0,settings:t,audioSong:c,onTrackModifierChange:this.onTrackModifierChange,onSongOpen:this.onSongOpen,onSave:this.saveSong,onCreateSong:this.createNewSong,setAudioSong:this.setAudioSong,handleSettingChange:this.handleSettingChange}),k("div",{className:"vsrg-page",children:[v(Sse,{vsrg:n,onBreakpointSelect:this.onBreakpointSelect,onBreakpointChange:this.onBreakpointChange,selectedHitObject:l,isHorizontal:!t.isVertical.value,selectedTrack:r,lastCreatedHitObject:i,onTrackAdd:this.addTrack,onTrackChange:this.onTrackChange,onTrackDelete:this.deleteTrack,onTrackSelect:this.selectTrack,onNoteSelect:this.onNoteSelect,children:v(Bse,{vsrg:n,renderableNotes:p,onTimestampChange:this.onTimestampChange,selectedHitObject:l,isHorizontal:!t.isVertical.value,tempoChanger:m,scrollSnap:t.scrollSnap.value,maxFps:t.maxFps.value,scaling:f,audioSong:c,snapPoint:a,snapPoints:o,isPlaying:s,onRemoveTime:this.removeTime,onAddTime:this.addTime,onKeyDown:this.startHitObjectTap,onKeyUp:this.endHitObjectTap,dragHitObject:this.dragHitObject,releaseHitObject:this.releaseHitObject,selectHitObject:this.selectHitObject,onSnapPointSelect:this.onSnapPointSelect})}),v(_se,{vsrg:n,scaling:f,tempoChanger:m,onTempoChangerChange:this.onTempoChangerChange,onScalingChange:this.onScalingChange,isPlaying:s,togglePlay:this.togglePlay,selectedSnapPoint:a,onSnapPointChange:this.onSnapPointChange,selectedHitObjectType:u,onHitObjectTypeChange:this.selectType})]})]})}}const Gse=Th(Dse);function jse({children:e}){M.exports.useEffect(()=>{Se.load()},[]);const[t]=en(),r=t.get("accent").isDark()?t.get("accent").lighten(.1):t.get("accent").saturate(.2).lighten(.25);return k(je,{children:[v("style",{children:`:root{
                ${t.toArray().map(n=>`--${n.css}:${n.value};
                            --${n.css}-rgb:${Se.get(n.name).rgb().array().join(",")};
                            --${n.css}-text: ${n.text};
                            ${new Array(2).fill(0).map((i,o)=>`--${n.css}-darken-${o*10+10}: ${Se.get(n.name).darken(o*.1+.1).hex()};`).join(`
`)}
                            ${new Array(2).fill(0).map((i,o)=>`--${n.css}-lighten-${o*10+10}: ${Se.get(n.name).lighten(o*.1+.1).hex()};`).join(`
`)}
                            `).join(`
`)}
                --clicked-note:${r};
            }`}),e]})}function BN(e){var t;return(t=e==null?void 0:e.dataTransfer)==null?void 0:t.types.includes("Files")}function $se({onHoverChange:e,onDrop:t,onError:r,as:n,showDropArea:i=!1,dropAreaStyle:o={}}){const[s,a]=M.exports.useState(!1),l=M.exports.useCallback(()=>{a(!1),e==null||e(!1)},[e]),u=M.exports.useCallback(p=>{p.preventDefault(),BN(p)&&(a(!0),e==null||e(!0))},[e]),c=M.exports.useCallback(p=>{!BN(p)||(p.preventDefault(),a(!0),e==null||e(!0))},[e]),f=M.exports.useCallback(async p=>{var g;l(),p.preventDefault();const m=Array.from(((g=p.dataTransfer)==null?void 0:g.files)||[]).map(b=>new Promise((y,w)=>{const x=new FileReader;function T(){try{const I=x.result;y({data:n==="json"?JSON.parse(I):I,file:b})}catch(I){w(I)}}try{x.addEventListener("loadend",T,{once:!0}),(n==="text"||n==="json")&&x.readAsText(b),n==="buffer"&&x.readAsArrayBuffer(b)}catch(I){w(I)}}));try{const b=await Promise.all(m);t(b)}catch(b){console.error(b),r==null||r(b)}},[l,t,r,n]);return M.exports.useEffect(()=>(document.body.addEventListener("drop",f),()=>document.body.removeEventListener("drop",f)),[f]),M.exports.useEffect(()=>(document.body.addEventListener("dragenter",c),document.body.addEventListener("dragleave",l),document.body.addEventListener("dragover",u),()=>{document.body.removeEventListener("dragenter",c),document.body.removeEventListener("dragleave",l),document.body.removeEventListener("dragover",u)}),[l,c,u]),v(je,{children:i&&v(Hse,{isHovering:s,style:o,children:"Drop files here"})})}const Hse=M.exports.memo(({isHovering:e,children:t,style:r})=>v(je,{children:e&&v("div",{className:"drag-n-drop",style:r,children:t})}),(e,t)=>e.children===t.children&&e.isHovering===t.isHovering),zse=M.exports.memo($se,(e,t)=>e.as===t.as&&e.onDrop===t.onDrop&&e.onError===t.onError&&e.onHoverChange===t.onHoverChange&&e.showDropArea===t.showDropArea);function Vse({children:e}){const t=async n=>{try{for(const i of n){const o=i.data;await fr.importAndLog(o)}}catch(i){console.error(i),me.error("Error importing file")}};function r(){me.error("There was an error importing the file! Was it the correct format?")}return k(je,{children:[v(zse,{showDropArea:!0,dropAreaStyle:{paddingTop:"15vh"},onDrop:t,as:"json",onError:r}),e]})}function Xse(){return k(so,{children:[v(An,{text:"Privacy"}),k("span",{children:["This website uses cookies to collect data about usage of the app through IP anonymized Google Analytics. We use this information to improve user experience and find how our users use the app. All data (songs, themes, folders, etc) produced by you is stored in the browser. If you wish to see how Google Analytics collects data, please visit",v("a",{href:"https://support.google.com/analytics/answer/11593727",target:"_blank",rel:"noreferrer",style:{color:"var(--primary-text)",textDecoration:"underline",marginLeft:"0.3rem"},children:"here."})]})]})}class Wse extends M.exports.Component{componentDidCatch(t,r){if(console.error(t,r),window.location.hostname==="localhost")return console.error("Prevent localhost redirect");this.props.history.push(this.props.onErrorGoTo)}render(){return this.props.children}}const Yse=Th(Wse);new Gn;function Kse(){Ya(Ho.getKeyboardKeybinds());const[e,t]=M.exports.useState({type:"",index:-1});M.exports.useEffect(()=>(Xe.listen(({letter:i})=>{if(i==="Escape")return t({type:"",index:-1});const{type:o,index:s}=e;if(o==="keyboard"&&s!==-1&&(Ho.setKeyboardKeybind(s,i),t({type:"",index:-1})),["k4","k6","k8"].includes(o)&&s!==-1){const a=Number(o.replace("k",""));Ho.setVsrgKeybind(a,s,i),t({type:"",index:-1})}},{id:"keybinds"}),()=>Xe.unregisterById("keybinds")),[e]);const r=Ya(Ho.getVsrgKeybinds(4)),n=Ya(Ho.getVsrgKeybinds(6));return k(so,{children:[v(An,{text:"Keybinds"}),!1,v("h1",{children:"Vsrg keybinds"}),v("div",{className:"column",style:{marginLeft:"1rem"},children:[r,n].map((i,o)=>k(M.exports.Fragment,{children:[k("h2",{children:[i.length," keys"]}),v("div",{className:"row",children:i.map((s,a)=>v(qse,{letter:s,isActive:e.type===`k${i.length}`&&e.index===a,handleClick:l=>t({type:`k${i.length}`,index:l?a:-1})},a))})]},o))})]})}function qse({letter:e,isActive:t,handleClick:r}){const n=oa(()=>r(!1),{ignoreFocusable:!0,active:t});return v("button",{className:"vsrg-player-key-circle",ref:n,style:{width:"3.5rem",fontSize:"1rem",height:"3.5rem",margin:"0.4rem",border:"none",backgroundColor:t?"var(--accent)":"var(--primary)",color:t?"var(--accent-text)":"var(--primary-text)",cursor:"pointer"},onClick:()=>r(!t),children:e})}var Zse=Object.defineProperty,Jse=Object.getOwnPropertyDescriptor,Qse=(e,t,r,n)=>{for(var i=n>1?void 0:n?Jse(t,r):t,o=e.length-1,s;o>=0;o--)(s=e[o])&&(i=(n?s(t,r,i):s(i))||i);return n&&i&&Zse(t,r,i),i};class Y7{constructor(){this.keyboard=[],this.setKeyboardLayout=t=>{this.keyboard.splice(0,this.keyboard.length,...t)},this.animateNote=(t,r)=>{this.keyboard[t].triggerAnimation(r)},this.resetKeyboardLayout=()=>{this.keyboard.forEach(t=>t.setState({status:"",delay:200}))},this.resetOutgoingAnimation=()=>{this.keyboard.forEach(t=>t.setState({animationId:0}))},this.setNoteState=(t,r)=>{this.keyboard[t].setState(r)},Li(this)}}Qse([yt],Y7.prototype,"keyboard",2);const Ox=new Y7,eae=[{transform:"rotateY(0deg) scale(0.8)"},{transform:"rotateY(180deg) scale(0.8)"},{transform:"rotateY(360deg) scale(1)"}];function tae({note:e,onClick:t,noteImage:r,noteText:n,instrumentName:i}){var m,g;const[o,s]=M.exports.useState("");M.exports.useState(0);const[a,l]=M.exports.useState(vt.text.light),u=M.exports.useRef(null),c=M.exports.useCallback(b=>{b.preventDefault(),t(e)},[t,e]);M.exports.useEffect(()=>{function b(){{const y=u.current;if(!y)return;y.animate(eae,{duration:400})}}return zd(e.data,b)},[e,u]),M.exports.useEffect(()=>zd(Se.state.data,()=>{l(nae())}),[]);const f=rae(o)+" sky-zen-note",p=(m=tl[i])==null?void 0:m.clickColor;return k("button",{onPointerDown:c,className:"button-hitbox-bigger",children:[Ae==="Genshin",k("div",{ref:u,className:f,children:[Ae==="Genshin",r&&v(Wy,{name:e.noteImage,color:Se.isDefault("accent")?(g=tl[i])==null?void 0:g.fill:void 0,background:o==="clicked"?p&&Se.isDefault("accent")?p:"var(--accent)":"var(--note-background)"}),v("div",{className:Gs.noteName,style:{color:a},children:n})]})]})}function rae(e){let t=Gs.note;switch(e){case"clicked":t+=" click-event";break}return t}function nae(){return Se.get("note_background").isDark()?vt.text.light:vt.text.dark}function iae({onNoteClick:e,instrument:t,pitch:r,verticalOffset:n,scale:i,noteNameType:o}){const s=Ya(Ox.keyboard);M.exports.useEffect(()=>(Xe.listen(({letter:l,event:u})=>{if(u.repeat)return;const c=t.getNoteFromCode(l);c!==null&&e(c)},{id:"ZenKeyboard"}),()=>Xe.unregisterById("ZenKeyboard")),[e,t]);let a="keyboard zen-keyboard";return t.notes.length===15&&(a+=" keyboard-5"),t.notes.length===14&&(a+=" keyboard-5"),t.notes.length===8&&(a+=" keyboard-4"),t.notes.length===6&&(a+=" keyboard-3"),v("div",{className:a,style:{transform:`scale(${i/100}) translateY(${n}px)`},children:s.map((l,u)=>v(tae,{instrumentName:t.name,noteText:t.getNoteText(u,o,r),noteImage:l.noteImage,note:l,onClick:e},u))})}function oae({settings:e,handleSettingChange:t,onVolumeChange:r}){const[n,i]=M.exports.useState("Settings"),[o,s]=M.exports.useState(!0),[a,l]=M.exports.useState(!1),u=oa(()=>{l(!1)},{ignoreFocusable:!0,active:n!==""}),c=o&&a?"side-menu menu-open":"side-menu";function f(){s(!o)}return k("div",{className:"menu-wrapper",ref:u,children:[v("div",{className:"hamburger-top",onClick:()=>l(!a),children:v(Ct,{children:v(uy,{})})}),k("div",{className:`menu ${a?"menu-visible":""}`,style:{justifyContent:"flex-end"},children:[v(Nt,{ariaLabel:"Close menu",style:{marginBottom:"auto"},onClick:()=>l(!a),children:v(eo,{className:"icon"})}),v(Nt,{onClick:()=>{i("Settings"),f()},isActive:n==="Settings"&&o,ariaLabel:"Open settings",children:v(Eu,{className:"icon"})}),v(Nt,{onClick:ln.open,ariaLabel:"Open home menu",children:v(Cu,{className:"icon"})})]}),v("div",{className:c,children:v(si,{title:"Settings",current:n,id:"Settings",children:v(Dp,{settings:e,onUpdate:t,changeVolume:r})})})]})}function sae(){const[e,t]=M.exports.useState(qb.data),[r,n]=M.exports.useState(new Gn),[i,o]=M.exports.useState(!1);M.exports.useEffect(()=>{const c=fn.getZenKeyboardSettings();return Un.bpm=c.metronomeBpm.value,n(new Gn(c.instrument.value)),t(c),bt.setReverb(c.caveMode.value),()=>me.hidePill()},[]);const s=M.exports.useCallback(c=>{fn.updateZenKeyboardSettings(c)},[]);M.exports.useEffect(()=>{Ox.setKeyboardLayout(r.notes)},[r]);const a=async c=>{const{data:f}=c;e[c.key]={...e[c.key],value:f.value},c.key==="instrument"&&n(new Gn(f.value)),c.key==="caveMode"&&bt.setReverb(f.value),c.key==="metronomeBpm"&&(Un.bpm=f.value),c.key==="metronomeBeats"&&(Un.beats=f.value),c.key==="metronomeVolume"&&Un.changeVolume(f.value),t({...e}),s(e)};M.exports.useEffect(()=>{async function c(){me.showPill(`Loading instrument: ${r.name}...`),await r.load(),me.hidePill(),bt.connect(r.endNode)}return c(),()=>{bt.disconnect(r.endNode)}},[r]);const l=c=>{r.play(c.index,e.pitch.value),Ox.animateNote(c.index)};M.exports.useEffect(()=>{i?Un.start():Un.stop()},[i]);const u=M.exports.useCallback(c=>{r.changeVolume(c.value)},[r]);return k(je,{children:[v(An,{text:"Zen Keyboard"}),v(oae,{settings:e,onVolumeChange:u,handleSettingChange:a}),v(iae,{instrument:r,onNoteClick:l,noteNameType:e.noteNameType.value,pitch:e.pitch.value,scale:e.keyboardSize.value,verticalOffset:e.keyboardYPosition.value}),v(tu,{toggled:i,onClick:()=>o(!i),className:"metronome-button",style:{position:"absolute",bottom:"0.8rem",right:"0.8rem"},ariaLabel:"Toggle metronome",children:v(oO,{size:22})})]})}function aae(){const e={marginRight:"0.3rem",marginLeft:"-0.4rem"},[t]=Uu(),r=Ya(zs.themes);M.exports.useEffect(()=>()=>me.hidePill(),[]);async function n(){me.showPill("Validating songs...");const u=await it.getSongs(),c=[];for(const f of u)try{it.parseSong(f)}catch(p){console.error(p),c.push(f),me.error(`Error validating song "${f==null?void 0:f.name}"`)}return c.length>0&&!await En("There were errors validating some songs. Do you want to continue downloading?")?null:(me.hidePill(),[...u])}async function i(){me.showPill("Validating folders...");const u=[],c=await Do.getFolders();for(const f of c)try{To.deserialize(f)}catch(p){console.error(p),u.push(f),me.error(`Error validating folder "${f==null?void 0:f.name}"`)}return u.length>0&&!await En("There were errors validating some folders. Do you want to continue downloading?")?null:(me.hidePill(),[...c])}async function o(){me.showPill("Validating themes...");const u=await ji.getThemes(),c=[];for(const f of u);return c.length>0&&!await En("There were errors validating some themes. Do you want to continue downloading?")?null:(me.hidePill(),[...u])}async function s(u){var c;for(const f of u)try{const p=Array.isArray(f.data)?f.data:[f.data];await fr.importAndLog(p)}catch(p){console.error(p),me.error(`Error importing file "${(c=f.file)==null?void 0:c.name}"`)}}async function a(){if(await En("Write 'delete' if you want to delete all songs, press cancel to ignore")!=="delete"||(await Ks(200),!await Br("Are you REALLY sure you want to delete all songs?")))return me.warn("Action cancelled");await At._DANGEROUS_CLEAR_ALL_SONGS(),await Zi._DANGEROUS_CLEAR_ALL_FOLDERS(),me.success("Deleted all songs")}async function l(){if(await En("Write 'delete' if you want to delete all themes")!=="delete"||(await Ks(200),!await Br("Are you REALLY sure you want to delete all themes?")))return me.warn("Action cancelled");await zs._DANGEROUS_CLEAR_ALL_THEMES(),me.success("Deleted all themes")}return k(so,{children:[v(An,{text:"Backup"}),v("h1",{children:"Backup"}),v("div",{children:"Make sure you create a backup every now and then. Especially if you just finished a new song. The browser shouldn't delete your data, especially if you installed the app, but there is always a chance."}),k("div",{className:"row space-between",style:{marginTop:"2rem"},children:[k(Be,{tooltip:"Download all the data of the app, aka themes, songs, folders",className:"flex-centered",onClick:async()=>{const u=await n();if(!u)return;const c=await i();if(!c)return;const f=await o();!f||(fr.downloadFiles([...u,...c,...f],`${Ae}-all-backup-${z_()}.json`),me.success("Downloaded backup"),fn.setLastBackupWarningTime(Date.now()))},children:[v(B2,{style:e}),"Download all backup"]}),k(Be,{tooltip:"Downloads a backup containing all songs and folders",className:"flex-centered",onClick:async()=>{const u=await n();if(!u)return;const c=await i();!c||(fr.downloadFiles([...u,...c],`${Ae}-song-backup-${z_()}.json`),me.success("Downloaded songs backup"),fn.setLastBackupWarningTime(Date.now()))},children:[v(B2,{style:e}),"Download song backup"]}),k(Be,{tooltip:"Downloads a backup of all the custom themes",className:"flex-centered",onClick:async()=>{const u=await o();!u||(fr.downloadFiles(u,`${Ae}-themes-backup-${z_()}.json`),me.success("Downloaded themes backup"))},children:[v(B2,{style:e}),"Download themes backup"]})]}),v("div",{style:{marginTop:"2rem"},children:"If you have a backup, you can import it here, they will be added to your existing data. (if you already have the same song, a duplicate will be created)."}),v("div",{className:"flex-centered",children:v(Bp,{onPick:s,as:"json",onError:()=>me.error("There was an error reading the file"),children:k(Be,{className:"flex-centered",tooltip:"Here you can import any backup you have",style:{marginTop:"1rem",backgroundColor:"var(--accent)",color:"var(--accent-text)",padding:"0.8rem"},children:[v(tM,{style:{...e,fontSize:"1rem",marginRight:"0.5rem"}}),"Import backup"]})})}),v("div",{className:"column",style:{flex:"1",justifyContent:"center",padding:"2rem 1rem"},children:k("div",{className:"column",style:{width:"fit-content"},children:[k("span",{children:[t.length," ",t.length===1?"song":"songs"]}),k("span",{children:[r.length," ",r.length===1?"theme":"themes"]})]})}),v("div",{style:{marginTop:"1rem"},children:"If you want, you can also delete all your data here, once deleted it can't be recovered. Don't worry you will be asked to confirm before anything is deleted."}),k("div",{className:"row space-around",style:{marginTop:"1rem"},children:[k(Be,{className:"flex-centered",tooltip:"Here you can delete all your songs and folders",tooltipPosition:"top",style:{backgroundColor:"var(--red-bg)",color:"var(--red-text)"},onClick:a,children:[v(to,{style:e}),"Delete songs and folders"]}),k(Be,{className:"flex-centered",tooltip:"Here you can delete all your themes",tooltipPosition:"top",style:{backgroundColor:"var(--red-bg)",color:"var(--red-text)"},onClick:l,children:[v(to,{style:e}),"Delete themes"]})]})]})}function z_(){const e=new Date;return`${e.getFullYear()}-${e.getMonth()}-${e.getDate()}`}function ni(e,t,r){return{name:e,description:t,shortcut:r}}class lae{constructor(){this.meta={version:"1.0.0"},this.families={composer:{name:"composer",shortcuts:new Map([["Space",ni("Toggle Playback","Toggle Playback","TogglePlayback")],["D",ni("Next Column","Next Column","NextColumn")],["A",ni("Previous Column","Previous Column","PreviousColumn")],["Q",ni("Remove Column","Remove Column","RemoveColumn")],["E",ni("Add Column","Add Column","AddColumn")],["ArrowUp",ni("Previous Layer","Previous Layer","PreviousLayer")],["ArrowDown",ni("Next Layer","Next Layer","NextLayer")],["ArrowRight",ni("Next Breakpoint","Next Breakpoint","NextBreakpoint")],["ArrowLeft",ni("Previous Breakpoint","Previous Breakpoint","PreviousBreakpoint")]])},player:{name:"player",shortcuts:new Map([["ShiftLeft+C",ni("Toggle Recording","Toggle Recording","ToggleRecording")],["ShiftLeft+S",ni("Stop","Stop","Stop")],["ShiftLeft+R",ni("Restart","Restart","Restart")],["ShiftLeft+M",ni("Toggle Menu","Toggle Menu","ToggleMenu")],["Escape",ni("Close Menu","Close Menu","CloseMenu")]])},vsrgComposer:{name:"vsrgComposer",shortcuts:new Map([])}}}get(t,r){var n;return Array.isArray(r)?this.get(t,r.join("+")):(n=this.families[t].shortcuts.get(r))!=null?n:null}has(t,r){return Array.isArray(r)?this.has(t,r.join("+")):this.families[t].shortcuts.has(r)}update(t,r,n){const i=this.families[t].shortcuts,o=i.get(r);if(o&&!i.has(n))i.set(n,o),i.delete(r);else return!1;return this.store(),!0}getComposer(t){return this.get("composer",t)}getPlayer(t){return this.get("player",t)}load(){var t,r,n;try{const i=JSON.parse((t=localStorage.getItem(`${Ae}_shortcuts`))!=null?t:"{}");if(((r=i==null?void 0:i.meta)==null?void 0:r.version)===this.meta.version){const o=Object.keys(this.families);for(const s of o)(n=i.families[s])==null||n.shortcuts.forEach(([a,l])=>{var c,f;const u=(c=this.families[s])==null?void 0:c.shortcuts.get(a);!u||(u.shortcut=l,(f=this.families[s])==null||f.shortcuts.set(a,u))})}}catch(i){console.error(i)}}store(){const t={meta:this.meta,families:{composer:{name:"composer",shortcuts:Array.from(this.families.composer.shortcuts.entries()).map(([r,n])=>[r,n.shortcut])},player:{name:"player",shortcuts:Array.from(this.families.player.shortcuts.entries()).map(([r,n])=>[r,n.shortcut])},vsrgComposer:{name:"vsrgComposer",shortcuts:Array.from(this.families.vsrgComposer.shortcuts.entries()).map(([r,n])=>[r,n.shortcut])}}};localStorage.setItem(`${Ae}_shortcuts`,JSON.stringify(t))}}const uae=new lae;function cae({children:e}){return M.exports.useEffect(()=>(bt.init(),Xe.create(),gr.create(),uae.load(),()=>{bt.destroy(),Xe.destroy(),gr.destroy()}),[]),v(je,{children:e})}function hae(){return M.exports.useEffect(()=>{try{"virtualKeyboard"in navigator?(navigator.virtualKeyboard.overlaysContent=!0,console.log("virtual keyboard supported")):console.log("virtual keyboard not supported")}catch(e){console.error(e)}},[]),v(OF,{children:v(Vse,{children:v(jse,{children:k(cae,{children:[v(FW,{}),k(RF,{children:[v(nn,{exact:!0,path:"/Error",children:v(Vie,{})}),k(Yse,{onErrorGoTo:"/Error",onError:()=>me.error("There was an error with the app!"),children:[v(nn,{exact:!0,path:"/",children:v(Ca,{page:"Main",children:v(vw,{})})}),v(nn,{exact:!0,path:"/Player",children:v(Ca,{page:"Main",children:v(vw,{})})}),v(nn,{exact:!0,path:"/VsrgComposer",children:v(Ca,{page:"Composer",children:v(Gse,{})})}),v(nn,{exact:!0,path:"/VsrgPlayer",children:v(Ca,{page:"Main",children:v(ase,{})})}),v(nn,{exact:!0,path:"/Composer",children:v(Ca,{page:"Composer",children:v(R7,{})})}),v(nn,{exact:!0,path:"/Donate",children:v(poe,{})}),v(nn,{exact:!0,path:"/Changelog",children:v(qie,{})}),v(nn,{exact:!0,path:"/Partners",children:v(Zie,{})}),v(nn,{exact:!0,path:"/Help",children:v(Qie,{})}),v(nn,{exact:!0,path:"/SheetVisualizer",children:v(noe,{})}),v(nn,{exact:!0,path:"/MidiSetup",children:v(coe,{})}),v(nn,{exact:!0,path:"/Theme",children:v(koe,{})}),v(nn,{exact:!0,path:"/Privacy",children:v(Xse,{})}),v(nn,{exact:!0,path:"/Keybinds",children:v(Kse,{})}),v(nn,{exact:!0,path:"/ZenKeyboard",children:v(Ca,{page:"Main",children:v(sae,{})})}),v(nn,{exact:!0,path:"/Backup",children:v(aae,{})})]}),v(nn,{path:"*",children:v(moe,{})})]})]})})})})}JN.exports.render(v(M.exports.StrictMode,{children:v(hae,{})}),document.getElementById("root"));W3||(mG(),PU());
//# sourceMappingURL=app-ba0322b7.js.map
