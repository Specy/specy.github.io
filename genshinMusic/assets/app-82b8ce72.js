(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const s of o.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&n(s)}).observe(document,{childList:!0,subtree:!0});function r(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerpolicy&&(o.referrerPolicy=i.referrerpolicy),i.crossorigin==="use-credentials"?o.credentials="include":i.crossorigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function n(i){if(i.ep)return;i.ep=!0;const o=r(i);fetch(i.href,o)}})();var vo=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function m9(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function Px(e){var t=e.default;if(typeof t=="function"){var r=function(){return t.apply(this,arguments)};r.prototype=t.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(e).forEach(function(n){var i=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(r,n,i.get?i:{enumerable:!0,get:function(){return e[n]}})}),r}var v9={exports:{}};/*!
 * PEP v0.5.1 | https://github.com/jquery/PEP
 * Copyright jQuery Foundation and other contributors | http://jquery.org/license
 */(function(e,t){(function(r,n){e.exports=n()})(vo,function(){var r=["bubbles","cancelable","view","screenX","screenY","clientX","clientY","ctrlKey","altKey","shiftKey","metaKey","button","relatedTarget","pageX","pageY"],n=[!1,!1,null,0,0,0,0,!1,!1,!1,!1,0,null,0,0];function i(L,H){H=H||Object.create(null);var Z=document.createEvent("Event");Z.initEvent(L,H.bubbles||!1,H.cancelable||!1);for(var _e=2,Ve;_e<r.length;_e++)Ve=r[_e],Z[Ve]=H[Ve]||n[_e];Z.buttons=H.buttons||0;var ht=0;return H.pressure!==void 0&&Z.buttons?ht=H.pressure:ht=Z.buttons?.5:0,Z.x=Z.clientX,Z.y=Z.clientY,Z.pointerId=H.pointerId||0,Z.width=H.width||1,Z.height=H.height||1,Z.pressure=ht,Z.tiltX=H.tiltX||0,Z.tiltY=H.tiltY||0,Z.twist=H.twist||0,Z.tangentialPressure=H.tangentialPressure||0,Z.pointerType=H.pointerType||"",Z.hwTimestamp=H.hwTimestamp||0,Z.isPrimary=H.isPrimary||!1,Z.detail=0,Z}var o=window.Map&&window.Map.prototype.forEach,s=o?Map:a;function a(){this.array=[],this.size=0}a.prototype={set:function(L,H){if(H===void 0)return this.delete(L);this.has(L)||this.size++,this.array[L]=H},has:function(L){return this.array[L]!==void 0},delete:function(L){this.has(L)&&(delete this.array[L],this.size--)},get:function(L){return this.array[L]},clear:function(){this.array.length=0,this.size=0},forEach:function(L,H){return this.array.forEach(function(Z,_e){L.call(H,Z,_e,this)},this)}};var l=["bubbles","cancelable","view","detail","screenX","screenY","clientX","clientY","ctrlKey","altKey","shiftKey","metaKey","button","relatedTarget","buttons","pointerId","width","height","pressure","tiltX","tiltY","pointerType","hwTimestamp","isPrimary","type","target","currentTarget","which","pageX","pageY","timeStamp"],u=[!1,!1,null,null,0,0,0,0,!1,!1,!1,!1,0,null,0,0,0,0,0,0,0,"",0,!1,"",null,null,0,0,0,0],c={pointerover:1,pointerout:1,pointerenter:1,pointerleave:1},f=typeof SVGElementInstance<"u",p={pointermap:new s,eventMap:Object.create(null),captureInfo:Object.create(null),eventSources:Object.create(null),eventSourceList:[],registerSource:function(L,H){var Z=H,_e=Z.events;_e&&(_e.forEach(function(Ve){Z[Ve]&&(this.eventMap[Ve]=Z[Ve].bind(Z))},this),this.eventSources[L]=Z,this.eventSourceList.push(Z))},register:function(L){for(var H=this.eventSourceList.length,Z=0,_e;Z<H&&(_e=this.eventSourceList[Z]);Z++)_e.register.call(_e,L)},unregister:function(L){for(var H=this.eventSourceList.length,Z=0,_e;Z<H&&(_e=this.eventSourceList[Z]);Z++)_e.unregister.call(_e,L)},contains:function(L,H){try{return L.contains(H)}catch{return!1}},down:function(L){L.bubbles=!0,this.fireEvent("pointerdown",L)},move:function(L){L.bubbles=!0,this.fireEvent("pointermove",L)},up:function(L){L.bubbles=!0,this.fireEvent("pointerup",L)},enter:function(L){L.bubbles=!1,this.fireEvent("pointerenter",L)},leave:function(L){L.bubbles=!1,this.fireEvent("pointerleave",L)},over:function(L){L.bubbles=!0,this.fireEvent("pointerover",L)},out:function(L){L.bubbles=!0,this.fireEvent("pointerout",L)},cancel:function(L){L.bubbles=!0,this.fireEvent("pointercancel",L)},leaveOut:function(L){this.out(L),this.propagate(L,this.leave,!1)},enterOver:function(L){this.over(L),this.propagate(L,this.enter,!0)},eventHandler:function(L){if(!L._handledByPE){var H=L.type,Z=this.eventMap&&this.eventMap[H];Z&&Z(L),L._handledByPE=!0}},listen:function(L,H){H.forEach(function(Z){this.addEvent(L,Z)},this)},unlisten:function(L,H){H.forEach(function(Z){this.removeEvent(L,Z)},this)},addEvent:function(L,H){L.addEventListener(H,this.boundHandler)},removeEvent:function(L,H){L.removeEventListener(H,this.boundHandler)},makeEvent:function(L,H){this.captureInfo[H.pointerId]&&(H.relatedTarget=null);var Z=new i(L,H);return H.preventDefault&&(Z.preventDefault=H.preventDefault),Z._target=Z._target||H.target,Z},fireEvent:function(L,H){var Z=this.makeEvent(L,H);return this.dispatchEvent(Z)},cloneEvent:function(L){for(var H=Object.create(null),Z,_e=0;_e<l.length;_e++)Z=l[_e],H[Z]=L[Z]||u[_e],f&&(Z==="target"||Z==="relatedTarget")&&H[Z]instanceof SVGElementInstance&&(H[Z]=H[Z].correspondingUseElement);return L.preventDefault&&(H.preventDefault=function(){L.preventDefault()}),H},getTarget:function(L){var H=this.captureInfo[L.pointerId];if(!H)return L._target;if(L._target===H||!(L.type in c))return H},propagate:function(L,H,Z){for(var _e=L.target,Ve=[];_e!=null&&_e!==document&&!_e.contains(L.relatedTarget);)if(Ve.push(_e),_e=_e.parentNode,!_e)return;Z&&Ve.reverse(),Ve.forEach(function(ht){L.target=ht,H.call(this,L)},this)},setCapture:function(L,H,Z){this.captureInfo[L]&&this.releaseCapture(L,Z),this.captureInfo[L]=H,this.implicitRelease=this.releaseCapture.bind(this,L,Z),document.addEventListener("pointerup",this.implicitRelease),document.addEventListener("pointercancel",this.implicitRelease);var _e=new i("gotpointercapture",{bubbles:!0});_e.pointerId=L,_e._target=H,Z||this.asyncDispatchEvent(_e)},releaseCapture:function(L,H){var Z=this.captureInfo[L];if(!!Z){this.captureInfo[L]=void 0,document.removeEventListener("pointerup",this.implicitRelease),document.removeEventListener("pointercancel",this.implicitRelease);var _e=new i("lostpointercapture",{bubbles:!0});_e.pointerId=L,_e._target=Z,H||this.asyncDispatchEvent(_e)}},dispatchEvent:function(L){var H=this.getTarget(L);if(H)return H.dispatchEvent(L)},asyncDispatchEvent:function(L){requestAnimationFrame(this.dispatchEvent.bind(this,L))}};p.boundHandler=p.eventHandler.bind(p);var v={shadow:function(L){if(L)return L.shadowRoot||L.webkitShadowRoot},canTarget:function(L){return L&&Boolean(L.elementFromPoint)},targetingShadow:function(L){var H=this.shadow(L);if(this.canTarget(H))return H},olderShadow:function(L){var H=L.olderShadowRoot;if(!H){var Z=L.querySelector("shadow");Z&&(H=Z.olderShadowRoot)}return H},allShadows:function(L){for(var H=[],Z=this.shadow(L);Z;)H.push(Z),Z=this.olderShadow(Z);return H},searchRoot:function(L,H,Z){if(L){var _e=L.elementFromPoint(H,Z),Ve,ht;for(ht=this.targetingShadow(_e);ht;)if(Ve=ht.elementFromPoint(H,Z),!Ve)ht=this.olderShadow(ht);else{var D=this.targetingShadow(Ve);return this.searchRoot(D,H,Z)||Ve}return _e}},owner:function(L){for(var H=L;H.parentNode;)H=H.parentNode;return H.nodeType!==Node.DOCUMENT_NODE&&H.nodeType!==Node.DOCUMENT_FRAGMENT_NODE&&(H=document),H},findTarget:function(L){var H=L.clientX,Z=L.clientY,_e=this.owner(L.target);return _e.elementFromPoint(H,Z)||(_e=document),this.searchRoot(_e,H,Z)}},g=Array.prototype.forEach.call.bind(Array.prototype.forEach),b=Array.prototype.map.call.bind(Array.prototype.map),_=Array.prototype.slice.call.bind(Array.prototype.slice),w=Array.prototype.filter.call.bind(Array.prototype.filter),x=window.MutationObserver||window.WebKitMutationObserver,T="[touch-action]",I={subtree:!0,childList:!0,attributes:!0,attributeOldValue:!0,attributeFilter:["touch-action"]};function R(L,H,Z,_e){this.addCallback=L.bind(_e),this.removeCallback=H.bind(_e),this.changedCallback=Z.bind(_e),x&&(this.observer=new x(this.mutationWatcher.bind(this)))}R.prototype={watchSubtree:function(L){this.observer&&v.canTarget(L)&&this.observer.observe(L,I)},enableOnSubtree:function(L){this.watchSubtree(L),L===document&&document.readyState!=="complete"?this.installOnLoad():this.installNewSubtree(L)},installNewSubtree:function(L){g(this.findElements(L),this.addElement,this)},findElements:function(L){return L.querySelectorAll?L.querySelectorAll(T):[]},removeElement:function(L){this.removeCallback(L)},addElement:function(L){this.addCallback(L)},elementChanged:function(L,H){this.changedCallback(L,H)},concatLists:function(L,H){return L.concat(_(H))},installOnLoad:function(){document.addEventListener("readystatechange",function(){document.readyState==="complete"&&this.installNewSubtree(document)}.bind(this))},isElement:function(L){return L.nodeType===Node.ELEMENT_NODE},flattenMutationTree:function(L){var H=b(L,this.findElements,this);return H.push(w(L,this.isElement)),H.reduce(this.concatLists,[])},mutationWatcher:function(L){L.forEach(this.mutationHandler,this)},mutationHandler:function(L){if(L.type==="childList"){var H=this.flattenMutationTree(L.addedNodes);H.forEach(this.addElement,this);var Z=this.flattenMutationTree(L.removedNodes);Z.forEach(this.removeElement,this)}else L.type==="attributes"&&this.elementChanged(L.target,L.oldValue)}};function E(L){return"body /shadow-deep/ "+L}function O(L){return"{ -ms-touch-action: "+L+"; touch-action: "+L+"; }"}var P=[{selector:'[touch-action="none"]',value:"none"},{selector:'[touch-action="auto"]',value:"auto"},{selector:'[touch-action~="pan-x"]',value:"pan-x"},{selector:'[touch-action~="pan-y"]',value:"pan-y"},{selector:'[touch-action~="pan-up"]',value:"pan-up"},{selector:'[touch-action~="pan-down"]',value:"pan-down"},{selector:'[touch-action~="pan-left"]',value:"pan-left"},{selector:'[touch-action~="pan-right"]',value:"pan-right"}],N="",A=window.PointerEvent||window.MSPointerEvent,j=!window.ShadowDOMPolyfill&&document.head.createShadowRoot;function X(){if(A){P.forEach(function(H){N+=H.selector+O(H.value)+`
`,j&&(N+=E(H.selector)+O(H.value)+`
`)});var L=document.createElement("style");L.textContent=N,document.head.appendChild(L)}}var B=p.pointermap,ae=25,Y=[1,4,2,8,16],K=!1;try{K=new MouseEvent("test",{buttons:1}).buttons===1}catch{}var me={POINTER_ID:1,POINTER_TYPE:"mouse",events:["mousedown","webkitmouseforcechanged","mousemove","mouseup","mouseover","mouseout"],register:function(L){p.listen(L,this.events)},unregister:function(L){p.unlisten(L,this.events)},lastTouches:[],isEventSimulatedFromTouch:function(L){for(var H=this.lastTouches,Z=L.clientX,_e=L.clientY,Ve=0,ht=H.length,D;Ve<ht&&(D=H[Ve]);Ve++){var V=Math.abs(Z-D.x),re=Math.abs(_e-D.y);if(V<=ae&&re<=ae)return!0}},prepareEvent:function(L){var H=p.cloneEvent(L),Z=H.preventDefault;return H.preventDefault=function(){L.preventDefault(),Z()},H.pointerId=this.POINTER_ID,H.isPrimary=!0,H.pointerType=this.POINTER_TYPE,"webkitForce"in L&&(H.pressure=L.webkitForce-MouseEvent.WEBKIT_FORCE_AT_MOUSE_DOWN),H},prepareButtonsForMove:function(L,H){var Z=B.get(this.POINTER_ID);H.which===0||!Z?L.buttons=0:L.buttons=Z.buttons,H.buttons=L.buttons},mousedown:function(L){if(!this.isEventSimulatedFromTouch(L)){var H=B.get(this.POINTER_ID),Z=this.prepareEvent(L);K||(Z.buttons=Y[Z.button],H&&(Z.buttons|=H.buttons),L.buttons=Z.buttons),B.set(this.POINTER_ID,L),!H||H.buttons===0?p.down(Z):p.move(Z)}},webkitmouseforcechanged:function(L){this.mousemove(L)},mousemove:function(L){if(!this.isEventSimulatedFromTouch(L)){var H=this.prepareEvent(L);K||this.prepareButtonsForMove(H,L),H.button=-1,B.set(this.POINTER_ID,L),p.move(H)}},mouseup:function(L){if(!this.isEventSimulatedFromTouch(L)){var H=B.get(this.POINTER_ID),Z=this.prepareEvent(L);if(!K){var _e=Y[Z.button];Z.buttons=H?H.buttons&~_e:0,L.buttons=Z.buttons}B.set(this.POINTER_ID,L),Z.buttons&=~Y[Z.button],Z.buttons===0?p.up(Z):p.move(Z)}},mouseover:function(L){if(!this.isEventSimulatedFromTouch(L)){var H=this.prepareEvent(L);K||this.prepareButtonsForMove(H,L),H.button=-1,B.set(this.POINTER_ID,L),p.enterOver(H)}},mouseout:function(L){if(!this.isEventSimulatedFromTouch(L)){var H=this.prepareEvent(L);K||this.prepareButtonsForMove(H,L),H.button=-1,p.leaveOut(H)}},cancel:function(L){var H=this.prepareEvent(L);p.cancel(H),this.deactivateMouse()},deactivateMouse:function(){B.delete(this.POINTER_ID)}},ue=p.captureInfo,ie=v.findTarget.bind(v),Q=v.allShadows.bind(v),ee=p.pointermap,W=2500,te="touch-action",ye,Ce=1,Ie=2,Ye=4,de=8,F=Ce|Ie|Ye|de,$={events:["touchstart","touchmove","touchforcechange","touchend","touchcancel"],register:function(L){ye.enableOnSubtree(L)},unregister:function(){},elementAdded:function(L){var H=L.getAttribute(te),Z=this.touchActionToScrollType(H);typeof Z=="number"&&(L._scrollType=Z,p.listen(L,this.events),Q(L).forEach(function(_e){_e._scrollType=Z,p.listen(_e,this.events)},this))},elementRemoved:function(L){if(ee.size>0){var H=this.events;L.addEventListener("touchend",function(){L._scrollType=void 0,p.unlisten(L,H)})}else L._scrollType=void 0,p.unlisten(L,this.events);Q(L).forEach(function(Z){Z._scrollType=void 0,p.unlisten(Z,this.events)},this)},elementChanged:function(L,H){var Z=L.getAttribute(te),_e=this.touchActionToScrollType(Z),Ve=this.touchActionToScrollType(H);typeof _e=="number"&&typeof Ve=="number"?(L._scrollType=_e,Q(L).forEach(function(ht){ht._scrollType=_e},this)):typeof Ve=="number"?this.elementRemoved(L):typeof _e=="number"&&this.elementAdded(L)},scrollTypes:{UP:function(L){return L.includes("pan-y")||L.includes("pan-up")?Ce:0},DOWN:function(L){return L.includes("pan-y")||L.includes("pan-down")?Ie:0},LEFT:function(L){return L.includes("pan-x")||L.includes("pan-left")?Ye:0},RIGHT:function(L){return L.includes("pan-x")||L.includes("pan-right")?de:0}},touchActionToScrollType:function(L){if(!!L){if(L==="auto")return F;if(L==="none")return 0;var H=L.split(" "),Z=this.scrollTypes;return Z.UP(H)|Z.DOWN(H)|Z.LEFT(H)|Z.RIGHT(H)}},POINTER_TYPE:"touch",firstTouch:null,isPrimaryTouch:function(L){return this.firstTouch===L.identifier},setPrimaryTouch:function(L){(ee.size===0||ee.size===1&&ee.has(1))&&(this.firstTouch=L.identifier,this.firstXY={X:L.clientX,Y:L.clientY},this.scrolling=!1)},removePrimaryPointer:function(L){L.isPrimary&&(this.firstTouch=null,this.firstXY=null)},typeToButtons:function(L){var H=0;return(L==="touchstart"||L==="touchmove"||L==="touchforcechange")&&(H=1),H},touchToPointer:function(L){var H=this.currentTouchEvent,Z=p.cloneEvent(L),_e=Z.pointerId=L.identifier+2;if(Z.target=ue[_e]||ie(Z),Z.bubbles=!0,Z.cancelable=!0,Z.button=0,Z.buttons=this.typeToButtons(H.type),Z.width=(L.radiusX||L.webkitRadiusX||0)*2,Z.height=(L.radiusY||L.webkitRadiusY||0)*2,Z.pressure=L.force!==void 0?L.force:L.webkitForce!==void 0?L.webkitForce:void 0,Z.isPrimary=this.isPrimaryTouch(L),L.altitudeAngle){var Ve=Math.tan(L.altitudeAngle),ht=180/Math.PI;Z.tiltX=Math.atan(Math.cos(L.azimuthAngle)/Ve)*ht,Z.tiltY=Math.atan(Math.sin(L.azimuthAngle)/Ve)*ht}else Z.tiltX=0,Z.tiltY=0;L.touchType==="stylus"?Z.pointerType="pen":Z.pointerType=this.POINTER_TYPE,Z.altKey=H.altKey,Z.ctrlKey=H.ctrlKey,Z.metaKey=H.metaKey,Z.shiftKey=H.shiftKey;var D=this;return Z.preventDefault=function(){D.scrolling=!1,D.firstXY=null,H.preventDefault()},Z},processTouches:function(L,H){var Z=L.changedTouches;this.currentTouchEvent=L;for(var _e=0,Ve;_e<Z.length;_e++)Ve=Z[_e],H.call(this,this.touchToPointer(Ve))},shouldScroll:function(L){if(this.firstXY){var H,Z=L.currentTarget._scrollType;if(Z===0)H=!1;else if(Z===F)H=!0;else{var _e=L.changedTouches[0],Ve=_e.clientY-this.firstXY.Y,ht=Math.abs(Ve),D=_e.clientX-this.firstXY.X,V=Math.abs(D),re=Z&Ce,ve=Z&Ie,Ke=Z&Ye,rt=Z&de;Ke&&rt?H=V>ht:Ke?H=V>ht&&D>0:rt&&(H=V>ht&&D<0),H||(re&&ve?H=V<ht:re?H=V<ht&&Ve>0:ve&&(H=V<ht&&Ve<0))}return this.firstXY=null,H}},findTouch:function(L,H){for(var Z=0,_e=L.length,Ve;Z<_e&&(Ve=L[Z]);Z++)if(Ve.identifier===H)return!0},vacuumTouches:function(L){var H=L.touches;if(ee.size>=H.length){var Z=[];ee.forEach(function(_e,Ve){if(Ve!==1&&!this.findTouch(H,Ve-2)){var ht=_e.out;Z.push(ht)}},this),Z.forEach(this.cancelOut,this)}},touchstart:function(L){this.vacuumTouches(L),this.setPrimaryTouch(L.changedTouches[0]),this.dedupSynthMouse(L),this.scrolling||this.processTouches(L,this.overDown)},overDown:function(L){ee.set(L.pointerId,{target:L.target,out:L,outTarget:L.target}),p.enterOver(L),p.down(L)},touchforcechange:function(L){this.touchmove(L)},touchmove:function(L){this.scrolling||(this.shouldScroll(L)?(this.scrolling=!0,this.touchcancel(L)):(L.type!=="touchforcechange"&&L.preventDefault(),this.processTouches(L,this.moveOverOut)))},moveOverOut:function(L){var H=L,Z=ee.get(H.pointerId);if(!!Z){var _e=Z.out,Ve=Z.outTarget;p.move(H),_e&&Ve!==H.target&&(_e.relatedTarget=H.target,H.relatedTarget=Ve,_e.target=Ve,H.target?(p.leaveOut(_e),p.enterOver(H)):(H.target=Ve,H.relatedTarget=null,this.cancelOut(H))),Z.out=H,Z.outTarget=H.target}},touchend:function(L){this.dedupSynthMouse(L),this.processTouches(L,this.upOut)},upOut:function(L){this.scrolling||(p.up(L),p.leaveOut(L)),this.cleanUpPointer(L)},touchcancel:function(L){this.processTouches(L,this.cancelOut)},cancelOut:function(L){p.cancel(L),p.leaveOut(L),this.cleanUpPointer(L)},cleanUpPointer:function(L){ee.delete(L.pointerId),this.removePrimaryPointer(L)},dedupSynthMouse:function(L){var H=me.lastTouches,Z=L.changedTouches[0];if(this.isPrimaryTouch(Z)){var _e={x:Z.clientX,y:Z.clientY};H.push(_e);var Ve=function(ht,D){var V=ht.indexOf(D);V>-1&&ht.splice(V,1)}.bind(null,H,_e);setTimeout(Ve,W)}}};ye=new R($.elementAdded,$.elementRemoved,$.elementChanged,$);var q=p.pointermap,pe=window.MSPointerEvent&&typeof window.MSPointerEvent.MSPOINTER_TYPE_MOUSE=="number",le={events:["MSPointerDown","MSPointerMove","MSPointerUp","MSPointerOut","MSPointerOver","MSPointerCancel","MSGotPointerCapture","MSLostPointerCapture"],register:function(L){p.listen(L,this.events)},unregister:function(L){p.unlisten(L,this.events)},POINTER_TYPES:["","unavailable","touch","pen","mouse"],prepareEvent:function(L){var H=L;return pe&&(H=p.cloneEvent(L),H.pointerType=this.POINTER_TYPES[L.pointerType]),H},cleanup:function(L){q.delete(L)},MSPointerDown:function(L){q.set(L.pointerId,L);var H=this.prepareEvent(L);p.down(H)},MSPointerMove:function(L){var H=this.prepareEvent(L);p.move(H)},MSPointerUp:function(L){var H=this.prepareEvent(L);p.up(H),this.cleanup(L.pointerId)},MSPointerOut:function(L){var H=this.prepareEvent(L);p.leaveOut(H)},MSPointerOver:function(L){var H=this.prepareEvent(L);p.enterOver(H)},MSPointerCancel:function(L){var H=this.prepareEvent(L);p.cancel(H),this.cleanup(L.pointerId)},MSLostPointerCapture:function(L){var H=p.makeEvent("lostpointercapture",L);p.dispatchEvent(H)},MSGotPointerCapture:function(L){var H=p.makeEvent("gotpointercapture",L);p.dispatchEvent(H)}};function Ee(){if(!window.PointerEvent){if(window.PointerEvent=i,window.navigator.msPointerEnabled){var L=window.navigator.msMaxTouchPoints;Object.defineProperty(window.navigator,"maxTouchPoints",{value:L,enumerable:!0}),p.registerSource("ms",le)}else Object.defineProperty(window.navigator,"maxTouchPoints",{value:0,enumerable:!0}),p.registerSource("mouse",me),window.ontouchstart!==void 0&&p.registerSource("touch",$);p.register(document)}}var Pe=window.navigator,Oe,it,Et;function Ot(L){if(!p.pointermap.has(L)){var H=new Error("NotFoundError");throw H.name="NotFoundError",H}}function Yt(L){for(var H=L.parentNode;H&&H!==L.ownerDocument;)H=H.parentNode;if(!H){var Z=new Error("InvalidStateError");throw Z.name="InvalidStateError",Z}}function Kt(L){var H=p.pointermap.get(L);return H.buttons!==0}Pe.msPointerEnabled?(Oe=function(L){Ot(L),Yt(this),Kt(L)&&(p.setCapture(L,this,!0),this.msSetPointerCapture(L))},it=function(L){Ot(L),p.releaseCapture(L,!0),this.msReleasePointerCapture(L)}):(Oe=function(H){Ot(H),Yt(this),Kt(H)&&p.setCapture(H,this)},it=function(H){Ot(H),p.releaseCapture(H)}),Et=function(H){return!!p.captureInfo[H]};function xt(){window.Element&&!window.Element.prototype.setPointerCapture&&Object.defineProperties(window.Element.prototype,{setPointerCapture:{value:Oe},releasePointerCapture:{value:it},hasPointerCapture:{value:Et}})}X(),Ee(),xt();var Gr={dispatcher:p,Installer:R,PointerEvent:i,PointerMap:s,targetFinding:v};return Gr})})(v9);var M={exports:{}},It={};/*
object-assign
(c) Sindre Sorhus
@license MIT
*/var eS=Object.getOwnPropertySymbols,g9=Object.prototype.hasOwnProperty,y9=Object.prototype.propertyIsEnumerable;function _9(e){if(e==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}function b9(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de",Object.getOwnPropertyNames(e)[0]==="5")return!1;for(var t={},r=0;r<10;r++)t["_"+String.fromCharCode(r)]=r;var n=Object.getOwnPropertyNames(t).map(function(o){return t[o]});if(n.join("")!=="0123456789")return!1;var i={};return"abcdefghijklmnopqrst".split("").forEach(function(o){i[o]=o}),Object.keys(Object.assign({},i)).join("")==="abcdefghijklmnopqrst"}catch{return!1}}var Ax=b9()?Object.assign:function(e,t){for(var r,n=_9(e),i,o=1;o<arguments.length;o++){r=Object(arguments[o]);for(var s in r)g9.call(r,s)&&(n[s]=r[s]);if(eS){i=eS(r);for(var a=0;a<i.length;a++)y9.call(r,i[a])&&(n[i[a]]=r[i[a]])}}return n};/** @license React v17.0.2
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Rx=Ax,hh=60103,BN=60106;It.Fragment=60107;It.StrictMode=60108;It.Profiler=60114;var DN=60109,GN=60110,jN=60112;It.Suspense=60113;var $N=60115,HN=60116;if(typeof Symbol=="function"&&Symbol.for){var lo=Symbol.for;hh=lo("react.element"),BN=lo("react.portal"),It.Fragment=lo("react.fragment"),It.StrictMode=lo("react.strict_mode"),It.Profiler=lo("react.profiler"),DN=lo("react.provider"),GN=lo("react.context"),jN=lo("react.forward_ref"),It.Suspense=lo("react.suspense"),$N=lo("react.memo"),HN=lo("react.lazy")}var tS=typeof Symbol=="function"&&Symbol.iterator;function w9(e){return e===null||typeof e!="object"?null:(e=tS&&e[tS]||e["@@iterator"],typeof e=="function"?e:null)}function up(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var zN={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},VN={};function fh(e,t,r){this.props=e,this.context=t,this.refs=VN,this.updater=r||zN}fh.prototype.isReactComponent={};fh.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error(up(85));this.updater.enqueueSetState(this,e,t,"setState")};fh.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function XN(){}XN.prototype=fh.prototype;function kx(e,t,r){this.props=e,this.context=t,this.refs=VN,this.updater=r||zN}var Ox=kx.prototype=new XN;Ox.constructor=kx;Rx(Ox,fh.prototype);Ox.isPureReactComponent=!0;var Lx={current:null},WN=Object.prototype.hasOwnProperty,YN={key:!0,ref:!0,__self:!0,__source:!0};function KN(e,t,r){var n,i={},o=null,s=null;if(t!=null)for(n in t.ref!==void 0&&(s=t.ref),t.key!==void 0&&(o=""+t.key),t)WN.call(t,n)&&!YN.hasOwnProperty(n)&&(i[n]=t[n]);var a=arguments.length-2;if(a===1)i.children=r;else if(1<a){for(var l=Array(a),u=0;u<a;u++)l[u]=arguments[u+2];i.children=l}if(e&&e.defaultProps)for(n in a=e.defaultProps,a)i[n]===void 0&&(i[n]=a[n]);return{$$typeof:hh,type:e,key:o,ref:s,props:i,_owner:Lx.current}}function x9(e,t){return{$$typeof:hh,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function Ux(e){return typeof e=="object"&&e!==null&&e.$$typeof===hh}function T9(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(r){return t[r]})}var rS=/\/+/g;function i2(e,t){return typeof e=="object"&&e!==null&&e.key!=null?T9(""+e.key):t.toString(36)}function Dv(e,t,r,n,i){var o=typeof e;(o==="undefined"||o==="boolean")&&(e=null);var s=!1;if(e===null)s=!0;else switch(o){case"string":case"number":s=!0;break;case"object":switch(e.$$typeof){case hh:case BN:s=!0}}if(s)return s=e,i=i(s),e=n===""?"."+i2(s,0):n,Array.isArray(i)?(r="",e!=null&&(r=e.replace(rS,"$&/")+"/"),Dv(i,t,r,"",function(u){return u})):i!=null&&(Ux(i)&&(i=x9(i,r+(!i.key||s&&s.key===i.key?"":(""+i.key).replace(rS,"$&/")+"/")+e)),t.push(i)),1;if(s=0,n=n===""?".":n+":",Array.isArray(e))for(var a=0;a<e.length;a++){o=e[a];var l=n+i2(o,a);s+=Dv(o,t,r,l,i)}else if(l=w9(e),typeof l=="function")for(e=l.call(e),a=0;!(o=e.next()).done;)o=o.value,l=n+i2(o,a++),s+=Dv(o,t,r,l,i);else if(o==="object")throw t=""+e,Error(up(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t));return s}function km(e,t,r){if(e==null)return e;var n=[],i=0;return Dv(e,n,"","",function(o){return t.call(r,o,i++)}),n}function S9(e){if(e._status===-1){var t=e._result;t=t(),e._status=0,e._result=t,t.then(function(r){e._status===0&&(r=r.default,e._status=1,e._result=r)},function(r){e._status===0&&(e._status=2,e._result=r)})}if(e._status===1)return e._result;throw e._result}var qN={current:null};function Qs(){var e=qN.current;if(e===null)throw Error(up(321));return e}var E9={ReactCurrentDispatcher:qN,ReactCurrentBatchConfig:{transition:0},ReactCurrentOwner:Lx,IsSomeRendererActing:{current:!1},assign:Rx};It.Children={map:km,forEach:function(e,t,r){km(e,function(){t.apply(this,arguments)},r)},count:function(e){var t=0;return km(e,function(){t++}),t},toArray:function(e){return km(e,function(t){return t})||[]},only:function(e){if(!Ux(e))throw Error(up(143));return e}};It.Component=fh;It.PureComponent=kx;It.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=E9;It.cloneElement=function(e,t,r){if(e==null)throw Error(up(267,e));var n=Rx({},e.props),i=e.key,o=e.ref,s=e._owner;if(t!=null){if(t.ref!==void 0&&(o=t.ref,s=Lx.current),t.key!==void 0&&(i=""+t.key),e.type&&e.type.defaultProps)var a=e.type.defaultProps;for(l in t)WN.call(t,l)&&!YN.hasOwnProperty(l)&&(n[l]=t[l]===void 0&&a!==void 0?a[l]:t[l])}var l=arguments.length-2;if(l===1)n.children=r;else if(1<l){a=Array(l);for(var u=0;u<l;u++)a[u]=arguments[u+2];n.children=a}return{$$typeof:hh,type:e.type,key:i,ref:o,props:n,_owner:s}};It.createContext=function(e,t){return t===void 0&&(t=null),e={$$typeof:GN,_calculateChangedBits:t,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null},e.Provider={$$typeof:DN,_context:e},e.Consumer=e};It.createElement=KN;It.createFactory=function(e){var t=KN.bind(null,e);return t.type=e,t};It.createRef=function(){return{current:null}};It.forwardRef=function(e){return{$$typeof:jN,render:e}};It.isValidElement=Ux;It.lazy=function(e){return{$$typeof:HN,_payload:{_status:-1,_result:e},_init:S9}};It.memo=function(e,t){return{$$typeof:$N,type:e,compare:t===void 0?null:t}};It.useCallback=function(e,t){return Qs().useCallback(e,t)};It.useContext=function(e,t){return Qs().useContext(e,t)};It.useDebugValue=function(){};It.useEffect=function(e,t){return Qs().useEffect(e,t)};It.useImperativeHandle=function(e,t,r){return Qs().useImperativeHandle(e,t,r)};It.useLayoutEffect=function(e,t){return Qs().useLayoutEffect(e,t)};It.useMemo=function(e,t){return Qs().useMemo(e,t)};It.useReducer=function(e,t,r){return Qs().useReducer(e,t,r)};It.useRef=function(e){return Qs().useRef(e)};It.useState=function(e){return Qs().useState(e)};It.version="17.0.2";(function(e){e.exports=It})(M);const nt=m9(M.exports);var ZN={exports:{}},ro={},JN={exports:{}},QN={};/** @license React v0.20.2
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){var t,r,n,i;if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;e.unstable_now=function(){return o.now()}}else{var s=Date,a=s.now();e.unstable_now=function(){return s.now()-a}}if(typeof window>"u"||typeof MessageChannel!="function"){var l=null,u=null,c=function(){if(l!==null)try{var ee=e.unstable_now();l(!0,ee),l=null}catch(W){throw setTimeout(c,0),W}};t=function(ee){l!==null?setTimeout(t,0,ee):(l=ee,setTimeout(c,0))},r=function(ee,W){u=setTimeout(ee,W)},n=function(){clearTimeout(u)},e.unstable_shouldYield=function(){return!1},i=e.unstable_forceFrameRate=function(){}}else{var f=window.setTimeout,p=window.clearTimeout;if(typeof console<"u"){var v=window.cancelAnimationFrame;typeof window.requestAnimationFrame!="function"&&console.error("This browser doesn't support requestAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills"),typeof v!="function"&&console.error("This browser doesn't support cancelAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills")}var g=!1,b=null,_=-1,w=5,x=0;e.unstable_shouldYield=function(){return e.unstable_now()>=x},i=function(){},e.unstable_forceFrameRate=function(ee){0>ee||125<ee?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):w=0<ee?Math.floor(1e3/ee):5};var T=new MessageChannel,I=T.port2;T.port1.onmessage=function(){if(b!==null){var ee=e.unstable_now();x=ee+w;try{b(!0,ee)?I.postMessage(null):(g=!1,b=null)}catch(W){throw I.postMessage(null),W}}else g=!1},t=function(ee){b=ee,g||(g=!0,I.postMessage(null))},r=function(ee,W){_=f(function(){ee(e.unstable_now())},W)},n=function(){p(_),_=-1}}function R(ee,W){var te=ee.length;ee.push(W);e:for(;;){var ye=te-1>>>1,Ce=ee[ye];if(Ce!==void 0&&0<P(Ce,W))ee[ye]=W,ee[te]=Ce,te=ye;else break e}}function E(ee){return ee=ee[0],ee===void 0?null:ee}function O(ee){var W=ee[0];if(W!==void 0){var te=ee.pop();if(te!==W){ee[0]=te;e:for(var ye=0,Ce=ee.length;ye<Ce;){var Ie=2*(ye+1)-1,Ye=ee[Ie],de=Ie+1,F=ee[de];if(Ye!==void 0&&0>P(Ye,te))F!==void 0&&0>P(F,Ye)?(ee[ye]=F,ee[de]=te,ye=de):(ee[ye]=Ye,ee[Ie]=te,ye=Ie);else if(F!==void 0&&0>P(F,te))ee[ye]=F,ee[de]=te,ye=de;else break e}}return W}return null}function P(ee,W){var te=ee.sortIndex-W.sortIndex;return te!==0?te:ee.id-W.id}var N=[],A=[],j=1,X=null,B=3,ae=!1,Y=!1,K=!1;function me(ee){for(var W=E(A);W!==null;){if(W.callback===null)O(A);else if(W.startTime<=ee)O(A),W.sortIndex=W.expirationTime,R(N,W);else break;W=E(A)}}function ue(ee){if(K=!1,me(ee),!Y)if(E(N)!==null)Y=!0,t(ie);else{var W=E(A);W!==null&&r(ue,W.startTime-ee)}}function ie(ee,W){Y=!1,K&&(K=!1,n()),ae=!0;var te=B;try{for(me(W),X=E(N);X!==null&&(!(X.expirationTime>W)||ee&&!e.unstable_shouldYield());){var ye=X.callback;if(typeof ye=="function"){X.callback=null,B=X.priorityLevel;var Ce=ye(X.expirationTime<=W);W=e.unstable_now(),typeof Ce=="function"?X.callback=Ce:X===E(N)&&O(N),me(W)}else O(N);X=E(N)}if(X!==null)var Ie=!0;else{var Ye=E(A);Ye!==null&&r(ue,Ye.startTime-W),Ie=!1}return Ie}finally{X=null,B=te,ae=!1}}var Q=i;e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(ee){ee.callback=null},e.unstable_continueExecution=function(){Y||ae||(Y=!0,t(ie))},e.unstable_getCurrentPriorityLevel=function(){return B},e.unstable_getFirstCallbackNode=function(){return E(N)},e.unstable_next=function(ee){switch(B){case 1:case 2:case 3:var W=3;break;default:W=B}var te=B;B=W;try{return ee()}finally{B=te}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=Q,e.unstable_runWithPriority=function(ee,W){switch(ee){case 1:case 2:case 3:case 4:case 5:break;default:ee=3}var te=B;B=ee;try{return W()}finally{B=te}},e.unstable_scheduleCallback=function(ee,W,te){var ye=e.unstable_now();switch(typeof te=="object"&&te!==null?(te=te.delay,te=typeof te=="number"&&0<te?ye+te:ye):te=ye,ee){case 1:var Ce=-1;break;case 2:Ce=250;break;case 5:Ce=1073741823;break;case 4:Ce=1e4;break;default:Ce=5e3}return Ce=te+Ce,ee={id:j++,callback:W,priorityLevel:ee,startTime:te,expirationTime:Ce,sortIndex:-1},te>ye?(ee.sortIndex=te,R(A,ee),E(N)===null&&ee===E(A)&&(K?n():K=!0,r(ue,te-ye))):(ee.sortIndex=Ce,R(N,ee),Y||ae||(Y=!0,t(ie))),ee},e.unstable_wrapCallback=function(ee){var W=B;return function(){var te=B;B=W;try{return ee.apply(this,arguments)}finally{B=te}}}})(QN);(function(e){e.exports=QN})(JN);/** @license React v17.0.2
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ag=M.exports,fr=Ax,ln=JN.exports;function Te(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}if(!Ag)throw Error(Te(227));var e8=new Set,_d={};function _u(e,t){Jc(e,t),Jc(e+"Capture",t)}function Jc(e,t){for(_d[e]=t,e=0;e<t.length;e++)e8.add(t[e])}var Xs=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),C9=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,nS=Object.prototype.hasOwnProperty,iS={},oS={};function I9(e){return nS.call(oS,e)?!0:nS.call(iS,e)?!1:C9.test(e)?oS[e]=!0:(iS[e]=!0,!1)}function N9(e,t,r,n){if(r!==null&&r.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return n?!1:r!==null?!r.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function P9(e,t,r,n){if(t===null||typeof t>"u"||N9(e,t,r,n))return!0;if(n)return!1;if(r!==null)switch(r.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Yn(e,t,r,n,i,o,s){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=n,this.attributeNamespace=i,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=o,this.removeEmptyString=s}var Cn={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Cn[e]=new Yn(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];Cn[t]=new Yn(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){Cn[e]=new Yn(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Cn[e]=new Yn(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Cn[e]=new Yn(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){Cn[e]=new Yn(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){Cn[e]=new Yn(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){Cn[e]=new Yn(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){Cn[e]=new Yn(e,5,!1,e.toLowerCase(),null,!1,!1)});var Fx=/[\-:]([a-z])/g;function Mx(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(Fx,Mx);Cn[t]=new Yn(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(Fx,Mx);Cn[t]=new Yn(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(Fx,Mx);Cn[t]=new Yn(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){Cn[e]=new Yn(e,1,!1,e.toLowerCase(),null,!1,!1)});Cn.xlinkHref=new Yn("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){Cn[e]=new Yn(e,1,!1,e.toLowerCase(),null,!0,!0)});function Bx(e,t,r,n){var i=Cn.hasOwnProperty(t)?Cn[t]:null,o=i!==null?i.type===0:n?!1:!(!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N");o||(P9(t,r,i,n)&&(r=null),n||i===null?I9(t)&&(r===null?e.removeAttribute(t):e.setAttribute(t,""+r)):i.mustUseProperty?e[i.propertyName]=r===null?i.type===3?!1:"":r:(t=i.attributeName,n=i.attributeNamespace,r===null?e.removeAttribute(t):(i=i.type,r=i===3||i===4&&r===!0?"":""+r,n?e.setAttributeNS(n,t,r):e.setAttribute(t,r))))}var bu=Ag.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,jf=60103,$l=60106,Ea=60107,Dx=60108,Kf=60114,Gx=60109,jx=60110,Rg=60112,qf=60113,x0=60120,kg=60115,$x=60116,Hx=60121,zx=60128,t8=60129,Vx=60130,j_=60131;if(typeof Symbol=="function"&&Symbol.for){var en=Symbol.for;jf=en("react.element"),$l=en("react.portal"),Ea=en("react.fragment"),Dx=en("react.strict_mode"),Kf=en("react.profiler"),Gx=en("react.provider"),jx=en("react.context"),Rg=en("react.forward_ref"),qf=en("react.suspense"),x0=en("react.suspense_list"),kg=en("react.memo"),$x=en("react.lazy"),Hx=en("react.block"),en("react.scope"),zx=en("react.opaque.id"),t8=en("react.debug_trace_mode"),Vx=en("react.offscreen"),j_=en("react.legacy_hidden")}var sS=typeof Symbol=="function"&&Symbol.iterator;function vf(e){return e===null||typeof e!="object"?null:(e=sS&&e[sS]||e["@@iterator"],typeof e=="function"?e:null)}var o2;function $f(e){if(o2===void 0)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);o2=t&&t[1]||""}return`
`+o2+e}var s2=!1;function Om(e,t){if(!e||s2)return"";s2=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(l){var n=l}Reflect.construct(e,[],t)}else{try{t.call()}catch(l){n=l}e.call(t.prototype)}else{try{throw Error()}catch(l){n=l}e()}}catch(l){if(l&&n&&typeof l.stack=="string"){for(var i=l.stack.split(`
`),o=n.stack.split(`
`),s=i.length-1,a=o.length-1;1<=s&&0<=a&&i[s]!==o[a];)a--;for(;1<=s&&0<=a;s--,a--)if(i[s]!==o[a]){if(s!==1||a!==1)do if(s--,a--,0>a||i[s]!==o[a])return`
`+i[s].replace(" at new "," at ");while(1<=s&&0<=a);break}}}finally{s2=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?$f(e):""}function A9(e){switch(e.tag){case 5:return $f(e.type);case 16:return $f("Lazy");case 13:return $f("Suspense");case 19:return $f("SuspenseList");case 0:case 2:case 15:return e=Om(e.type,!1),e;case 11:return e=Om(e.type.render,!1),e;case 22:return e=Om(e.type._render,!1),e;case 1:return e=Om(e.type,!0),e;default:return""}}function Fc(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Ea:return"Fragment";case $l:return"Portal";case Kf:return"Profiler";case Dx:return"StrictMode";case qf:return"Suspense";case x0:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case jx:return(e.displayName||"Context")+".Consumer";case Gx:return(e._context.displayName||"Context")+".Provider";case Rg:var t=e.render;return t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case kg:return Fc(e.type);case Hx:return Fc(e._render);case $x:t=e._payload,e=e._init;try{return Fc(e(t))}catch{}}return null}function Ka(e){switch(typeof e){case"boolean":case"number":case"object":case"string":case"undefined":return e;default:return""}}function r8(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function R9(e){var t=r8(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),n=""+e[t];if(!e.hasOwnProperty(t)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var i=r.get,o=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(s){n=""+s,o.call(this,s)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(s){n=""+s},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Lm(e){e._valueTracker||(e._valueTracker=R9(e))}function n8(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),n="";return e&&(n=r8(e)?e.checked?"true":"false":e.value),e=n,e!==r?(t.setValue(e),!0):!1}function T0(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function $_(e,t){var r=t.checked;return fr({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r!=null?r:e._wrapperState.initialChecked})}function aS(e,t){var r=t.defaultValue==null?"":t.defaultValue,n=t.checked!=null?t.checked:t.defaultChecked;r=Ka(t.value!=null?t.value:r),e._wrapperState={initialChecked:n,initialValue:r,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function i8(e,t){t=t.checked,t!=null&&Bx(e,"checked",t,!1)}function H_(e,t){i8(e,t);var r=Ka(t.value),n=t.type;if(r!=null)n==="number"?(r===0&&e.value===""||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if(n==="submit"||n==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?z_(e,t.type,r):t.hasOwnProperty("defaultValue")&&z_(e,t.type,Ka(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function lS(e,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var n=t.type;if(!(n!=="submit"&&n!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,r||t===e.value||(e.value=t),e.defaultValue=t}r=e.name,r!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,r!==""&&(e.name=r)}function z_(e,t,r){(t!=="number"||T0(e.ownerDocument)!==e)&&(r==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}function k9(e){var t="";return Ag.Children.forEach(e,function(r){r!=null&&(t+=r)}),t}function V_(e,t){return e=fr({children:void 0},t),(t=k9(t.children))&&(e.children=t),e}function Mc(e,t,r,n){if(e=e.options,t){t={};for(var i=0;i<r.length;i++)t["$"+r[i]]=!0;for(r=0;r<e.length;r++)i=t.hasOwnProperty("$"+e[r].value),e[r].selected!==i&&(e[r].selected=i),i&&n&&(e[r].defaultSelected=!0)}else{for(r=""+Ka(r),t=null,i=0;i<e.length;i++){if(e[i].value===r){e[i].selected=!0,n&&(e[i].defaultSelected=!0);return}t!==null||e[i].disabled||(t=e[i])}t!==null&&(t.selected=!0)}}function X_(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(Te(91));return fr({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function uS(e,t){var r=t.value;if(r==null){if(r=t.children,t=t.defaultValue,r!=null){if(t!=null)throw Error(Te(92));if(Array.isArray(r)){if(!(1>=r.length))throw Error(Te(93));r=r[0]}t=r}t==null&&(t=""),r=t}e._wrapperState={initialValue:Ka(r)}}function o8(e,t){var r=Ka(t.value),n=Ka(t.defaultValue);r!=null&&(r=""+r,r!==e.value&&(e.value=r),t.defaultValue==null&&e.defaultValue!==r&&(e.defaultValue=r)),n!=null&&(e.defaultValue=""+n)}function cS(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}var W_={html:"http://www.w3.org/1999/xhtml",mathml:"http://www.w3.org/1998/Math/MathML",svg:"http://www.w3.org/2000/svg"};function s8(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Y_(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?s8(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Um,a8=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,r,n,i){MSApp.execUnsafeLocalFunction(function(){return e(t,r,n,i)})}:e}(function(e,t){if(e.namespaceURI!==W_.svg||"innerHTML"in e)e.innerHTML=t;else{for(Um=Um||document.createElement("div"),Um.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Um.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function bd(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&r.nodeType===3){r.nodeValue=t;return}}e.textContent=t}var Zf={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},O9=["Webkit","ms","Moz","O"];Object.keys(Zf).forEach(function(e){O9.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Zf[t]=Zf[e]})});function l8(e,t,r){return t==null||typeof t=="boolean"||t===""?"":r||typeof t!="number"||t===0||Zf.hasOwnProperty(e)&&Zf[e]?(""+t).trim():t+"px"}function u8(e,t){e=e.style;for(var r in t)if(t.hasOwnProperty(r)){var n=r.indexOf("--")===0,i=l8(r,t[r],n);r==="float"&&(r="cssFloat"),n?e.setProperty(r,i):e[r]=i}}var L9=fr({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function K_(e,t){if(t){if(L9[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(Te(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(Te(60));if(!(typeof t.dangerouslySetInnerHTML=="object"&&"__html"in t.dangerouslySetInnerHTML))throw Error(Te(61))}if(t.style!=null&&typeof t.style!="object")throw Error(Te(62))}}function q_(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}function Xx(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Z_=null,Bc=null,Dc=null;function hS(e){if(e=hp(e)){if(typeof Z_!="function")throw Error(Te(280));var t=e.stateNode;t&&(t=Bg(t),Z_(e.stateNode,e.type,t))}}function c8(e){Bc?Dc?Dc.push(e):Dc=[e]:Bc=e}function h8(){if(Bc){var e=Bc,t=Dc;if(Dc=Bc=null,hS(e),t)for(e=0;e<t.length;e++)hS(t[e])}}function Wx(e,t){return e(t)}function f8(e,t,r,n,i){return e(t,r,n,i)}function Yx(){}var d8=Wx,Hl=!1,a2=!1;function Kx(){(Bc!==null||Dc!==null)&&(Yx(),h8())}function U9(e,t,r){if(a2)return e(t,r);a2=!0;try{return d8(e,t,r)}finally{a2=!1,Kx()}}function wd(e,t){var r=e.stateNode;if(r===null)return null;var n=Bg(r);if(n===null)return null;r=n[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(e=e.type,n=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!n;break e;default:e=!1}if(e)return null;if(r&&typeof r!="function")throw Error(Te(231,t,typeof r));return r}var J_=!1;if(Xs)try{var gf={};Object.defineProperty(gf,"passive",{get:function(){J_=!0}}),window.addEventListener("test",gf,gf),window.removeEventListener("test",gf,gf)}catch{J_=!1}function F9(e,t,r,n,i,o,s,a,l){var u=Array.prototype.slice.call(arguments,3);try{t.apply(r,u)}catch(c){this.onError(c)}}var Jf=!1,S0=null,E0=!1,Q_=null,M9={onError:function(e){Jf=!0,S0=e}};function B9(e,t,r,n,i,o,s,a,l){Jf=!1,S0=null,F9.apply(M9,arguments)}function D9(e,t,r,n,i,o,s,a,l){if(B9.apply(this,arguments),Jf){if(Jf){var u=S0;Jf=!1,S0=null}else throw Error(Te(198));E0||(E0=!0,Q_=u)}}function wu(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,(t.flags&1026)!==0&&(r=t.return),e=t.return;while(e)}return t.tag===3?r:null}function p8(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function fS(e){if(wu(e)!==e)throw Error(Te(188))}function G9(e){var t=e.alternate;if(!t){if(t=wu(e),t===null)throw Error(Te(188));return t!==e?null:e}for(var r=e,n=t;;){var i=r.return;if(i===null)break;var o=i.alternate;if(o===null){if(n=i.return,n!==null){r=n;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===r)return fS(i),e;if(o===n)return fS(i),t;o=o.sibling}throw Error(Te(188))}if(r.return!==n.return)r=i,n=o;else{for(var s=!1,a=i.child;a;){if(a===r){s=!0,r=i,n=o;break}if(a===n){s=!0,n=i,r=o;break}a=a.sibling}if(!s){for(a=o.child;a;){if(a===r){s=!0,r=o,n=i;break}if(a===n){s=!0,n=o,r=i;break}a=a.sibling}if(!s)throw Error(Te(189))}}if(r.alternate!==n)throw Error(Te(190))}if(r.tag!==3)throw Error(Te(188));return r.stateNode.current===r?e:t}function m8(e){if(e=G9(e),!e)return null;for(var t=e;;){if(t.tag===5||t.tag===6)return t;if(t.child)t.child.return=t,t=t.child;else{if(t===e)break;for(;!t.sibling;){if(!t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}}return null}function dS(e,t){for(var r=e.alternate;t!==null;){if(t===e||t===r)return!0;t=t.return}return!1}var v8,qx,g8,y8,eb=!1,Go=[],Oa=null,La=null,Ua=null,xd=new Map,Td=new Map,yf=[],pS="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function tb(e,t,r,n,i){return{blockedOn:e,domEventName:t,eventSystemFlags:r|16,nativeEvent:i,targetContainers:[n]}}function mS(e,t){switch(e){case"focusin":case"focusout":Oa=null;break;case"dragenter":case"dragleave":La=null;break;case"mouseover":case"mouseout":Ua=null;break;case"pointerover":case"pointerout":xd.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Td.delete(t.pointerId)}}function _f(e,t,r,n,i,o){return e===null||e.nativeEvent!==o?(e=tb(t,r,n,i,o),t!==null&&(t=hp(t),t!==null&&qx(t)),e):(e.eventSystemFlags|=n,t=e.targetContainers,i!==null&&t.indexOf(i)===-1&&t.push(i),e)}function j9(e,t,r,n,i){switch(t){case"focusin":return Oa=_f(Oa,e,t,r,n,i),!0;case"dragenter":return La=_f(La,e,t,r,n,i),!0;case"mouseover":return Ua=_f(Ua,e,t,r,n,i),!0;case"pointerover":var o=i.pointerId;return xd.set(o,_f(xd.get(o)||null,e,t,r,n,i)),!0;case"gotpointercapture":return o=i.pointerId,Td.set(o,_f(Td.get(o)||null,e,t,r,n,i)),!0}return!1}function $9(e){var t=zl(e.target);if(t!==null){var r=wu(t);if(r!==null){if(t=r.tag,t===13){if(t=p8(r),t!==null){e.blockedOn=t,y8(e.lanePriority,function(){ln.unstable_runWithPriority(e.priority,function(){g8(r)})});return}}else if(t===3&&r.stateNode.hydrate){e.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Gv(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var r=e3(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(r!==null)return t=hp(r),t!==null&&qx(t),e.blockedOn=r,!1;t.shift()}return!0}function vS(e,t,r){Gv(e)&&r.delete(t)}function H9(){for(eb=!1;0<Go.length;){var e=Go[0];if(e.blockedOn!==null){e=hp(e.blockedOn),e!==null&&v8(e);break}for(var t=e.targetContainers;0<t.length;){var r=e3(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(r!==null){e.blockedOn=r;break}t.shift()}e.blockedOn===null&&Go.shift()}Oa!==null&&Gv(Oa)&&(Oa=null),La!==null&&Gv(La)&&(La=null),Ua!==null&&Gv(Ua)&&(Ua=null),xd.forEach(vS),Td.forEach(vS)}function bf(e,t){e.blockedOn===t&&(e.blockedOn=null,eb||(eb=!0,ln.unstable_scheduleCallback(ln.unstable_NormalPriority,H9)))}function _8(e){function t(i){return bf(i,e)}if(0<Go.length){bf(Go[0],e);for(var r=1;r<Go.length;r++){var n=Go[r];n.blockedOn===e&&(n.blockedOn=null)}}for(Oa!==null&&bf(Oa,e),La!==null&&bf(La,e),Ua!==null&&bf(Ua,e),xd.forEach(t),Td.forEach(t),r=0;r<yf.length;r++)n=yf[r],n.blockedOn===e&&(n.blockedOn=null);for(;0<yf.length&&(r=yf[0],r.blockedOn===null);)$9(r),r.blockedOn===null&&yf.shift()}function Fm(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var xc={animationend:Fm("Animation","AnimationEnd"),animationiteration:Fm("Animation","AnimationIteration"),animationstart:Fm("Animation","AnimationStart"),transitionend:Fm("Transition","TransitionEnd")},l2={},b8={};Xs&&(b8=document.createElement("div").style,"AnimationEvent"in window||(delete xc.animationend.animation,delete xc.animationiteration.animation,delete xc.animationstart.animation),"TransitionEvent"in window||delete xc.transitionend.transition);function Og(e){if(l2[e])return l2[e];if(!xc[e])return e;var t=xc[e],r;for(r in t)if(t.hasOwnProperty(r)&&r in b8)return l2[e]=t[r];return e}var w8=Og("animationend"),x8=Og("animationiteration"),T8=Og("animationstart"),S8=Og("transitionend"),E8=new Map,Zx=new Map,z9=["abort","abort",w8,"animationEnd",x8,"animationIteration",T8,"animationStart","canplay","canPlay","canplaythrough","canPlayThrough","durationchange","durationChange","emptied","emptied","encrypted","encrypted","ended","ended","error","error","gotpointercapture","gotPointerCapture","load","load","loadeddata","loadedData","loadedmetadata","loadedMetadata","loadstart","loadStart","lostpointercapture","lostPointerCapture","playing","playing","progress","progress","seeking","seeking","stalled","stalled","suspend","suspend","timeupdate","timeUpdate",S8,"transitionEnd","waiting","waiting"];function Jx(e,t){for(var r=0;r<e.length;r+=2){var n=e[r],i=e[r+1];i="on"+(i[0].toUpperCase()+i.slice(1)),Zx.set(n,t),E8.set(n,i),_u(i,[n])}}var V9=ln.unstable_now;V9();var Qt=8;function vc(e){if((1&e)!==0)return Qt=15,1;if((2&e)!==0)return Qt=14,2;if((4&e)!==0)return Qt=13,4;var t=24&e;return t!==0?(Qt=12,t):(e&32)!==0?(Qt=11,32):(t=192&e,t!==0?(Qt=10,t):(e&256)!==0?(Qt=9,256):(t=3584&e,t!==0?(Qt=8,t):(e&4096)!==0?(Qt=7,4096):(t=4186112&e,t!==0?(Qt=6,t):(t=62914560&e,t!==0?(Qt=5,t):e&67108864?(Qt=4,67108864):(e&134217728)!==0?(Qt=3,134217728):(t=805306368&e,t!==0?(Qt=2,t):(1073741824&e)!==0?(Qt=1,1073741824):(Qt=8,e))))))}function X9(e){switch(e){case 99:return 15;case 98:return 10;case 97:case 96:return 8;case 95:return 2;default:return 0}}function W9(e){switch(e){case 15:case 14:return 99;case 13:case 12:case 11:case 10:return 98;case 9:case 8:case 7:case 6:case 4:case 5:return 97;case 3:case 2:case 1:return 95;case 0:return 90;default:throw Error(Te(358,e))}}function Sd(e,t){var r=e.pendingLanes;if(r===0)return Qt=0;var n=0,i=0,o=e.expiredLanes,s=e.suspendedLanes,a=e.pingedLanes;if(o!==0)n=o,i=Qt=15;else if(o=r&134217727,o!==0){var l=o&~s;l!==0?(n=vc(l),i=Qt):(a&=o,a!==0&&(n=vc(a),i=Qt))}else o=r&~s,o!==0?(n=vc(o),i=Qt):a!==0&&(n=vc(a),i=Qt);if(n===0)return 0;if(n=31-qa(n),n=r&((0>n?0:1<<n)<<1)-1,t!==0&&t!==n&&(t&s)===0){if(vc(t),i<=Qt)return t;Qt=i}if(t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=n;0<t;)r=31-qa(t),i=1<<r,n|=e[r],t&=~i;return n}function C8(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function C0(e,t){switch(e){case 15:return 1;case 14:return 2;case 12:return e=gc(24&~t),e===0?C0(10,t):e;case 10:return e=gc(192&~t),e===0?C0(8,t):e;case 8:return e=gc(3584&~t),e===0&&(e=gc(4186112&~t),e===0&&(e=512)),e;case 2:return t=gc(805306368&~t),t===0&&(t=268435456),t}throw Error(Te(358,e))}function gc(e){return e&-e}function u2(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function Lg(e,t,r){e.pendingLanes|=t;var n=t-1;e.suspendedLanes&=n,e.pingedLanes&=n,e=e.eventTimes,t=31-qa(t),e[t]=r}var qa=Math.clz32?Math.clz32:q9,Y9=Math.log,K9=Math.LN2;function q9(e){return e===0?32:31-(Y9(e)/K9|0)|0}var Z9=ln.unstable_UserBlockingPriority,J9=ln.unstable_runWithPriority,jv=!0;function Q9(e,t,r,n){Hl||Yx();var i=Qx,o=Hl;Hl=!0;try{f8(i,e,t,r,n)}finally{(Hl=o)||Kx()}}function eL(e,t,r,n){J9(Z9,Qx.bind(null,e,t,r,n))}function Qx(e,t,r,n){if(jv){var i;if((i=(t&4)===0)&&0<Go.length&&-1<pS.indexOf(e))e=tb(null,e,t,r,n),Go.push(e);else{var o=e3(e,t,r,n);if(o===null)i&&mS(e,n);else{if(i){if(-1<pS.indexOf(e)){e=tb(o,e,t,r,n),Go.push(e);return}if(j9(o,e,t,r,n))return;mS(e,n)}D8(e,t,n,null,r)}}}}function e3(e,t,r,n){var i=Xx(n);if(i=zl(i),i!==null){var o=wu(i);if(o===null)i=null;else{var s=o.tag;if(s===13){if(i=p8(o),i!==null)return i;i=null}else if(s===3){if(o.stateNode.hydrate)return o.tag===3?o.stateNode.containerInfo:null;i=null}else o!==i&&(i=null)}}return D8(e,t,n,i,r),null}var Na=null,t3=null,$v=null;function I8(){if($v)return $v;var e,t=t3,r=t.length,n,i="value"in Na?Na.value:Na.textContent,o=i.length;for(e=0;e<r&&t[e]===i[e];e++);var s=r-e;for(n=1;n<=s&&t[r-n]===i[o-n];n++);return $v=i.slice(e,1<n?1-n:void 0)}function Hv(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Mm(){return!0}function gS(){return!1}function Ai(e){function t(r,n,i,o,s){this._reactName=r,this._targetInst=i,this.type=n,this.nativeEvent=o,this.target=s,this.currentTarget=null;for(var a in e)e.hasOwnProperty(a)&&(r=e[a],this[a]=r?r(o):o[a]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?Mm:gS,this.isPropagationStopped=gS,this}return fr(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=Mm)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=Mm)},persist:function(){},isPersistent:Mm}),t}var dh={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},r3=Ai(dh),cp=fr({},dh,{view:0,detail:0}),tL=Ai(cp),c2,h2,wf,Ug=fr({},cp,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:n3,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==wf&&(wf&&e.type==="mousemove"?(c2=e.screenX-wf.screenX,h2=e.screenY-wf.screenY):h2=c2=0,wf=e),c2)},movementY:function(e){return"movementY"in e?e.movementY:h2}}),yS=Ai(Ug),rL=fr({},Ug,{dataTransfer:0}),nL=Ai(rL),iL=fr({},cp,{relatedTarget:0}),f2=Ai(iL),oL=fr({},dh,{animationName:0,elapsedTime:0,pseudoElement:0}),sL=Ai(oL),aL=fr({},dh,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),lL=Ai(aL),uL=fr({},dh,{data:0}),_S=Ai(uL),cL={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},hL={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},fL={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function dL(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=fL[e])?!!t[e]:!1}function n3(){return dL}var pL=fr({},cp,{key:function(e){if(e.key){var t=cL[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Hv(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?hL[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:n3,charCode:function(e){return e.type==="keypress"?Hv(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Hv(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),mL=Ai(pL),vL=fr({},Ug,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),bS=Ai(vL),gL=fr({},cp,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:n3}),yL=Ai(gL),_L=fr({},dh,{propertyName:0,elapsedTime:0,pseudoElement:0}),bL=Ai(_L),wL=fr({},Ug,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),xL=Ai(wL),TL=[9,13,27,32],i3=Xs&&"CompositionEvent"in window,Qf=null;Xs&&"documentMode"in document&&(Qf=document.documentMode);var SL=Xs&&"TextEvent"in window&&!Qf,N8=Xs&&(!i3||Qf&&8<Qf&&11>=Qf),wS=String.fromCharCode(32),xS=!1;function P8(e,t){switch(e){case"keyup":return TL.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function A8(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Tc=!1;function EL(e,t){switch(e){case"compositionend":return A8(t);case"keypress":return t.which!==32?null:(xS=!0,wS);case"textInput":return e=t.data,e===wS&&xS?null:e;default:return null}}function CL(e,t){if(Tc)return e==="compositionend"||!i3&&P8(e,t)?(e=I8(),$v=t3=Na=null,Tc=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return N8&&t.locale!=="ko"?null:t.data;default:return null}}var IL={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function TS(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!IL[e.type]:t==="textarea"}function R8(e,t,r,n){c8(n),t=I0(t,"onChange"),0<t.length&&(r=new r3("onChange","change",null,r,n),e.push({event:r,listeners:t}))}var ed=null,Ed=null;function NL(e){F8(e,0)}function Fg(e){var t=Ec(e);if(n8(t))return e}function PL(e,t){if(e==="change")return t}var k8=!1;if(Xs){var d2;if(Xs){var p2="oninput"in document;if(!p2){var SS=document.createElement("div");SS.setAttribute("oninput","return;"),p2=typeof SS.oninput=="function"}d2=p2}else d2=!1;k8=d2&&(!document.documentMode||9<document.documentMode)}function ES(){ed&&(ed.detachEvent("onpropertychange",O8),Ed=ed=null)}function O8(e){if(e.propertyName==="value"&&Fg(Ed)){var t=[];if(R8(t,Ed,e,Xx(e)),e=NL,Hl)e(t);else{Hl=!0;try{Wx(e,t)}finally{Hl=!1,Kx()}}}}function AL(e,t,r){e==="focusin"?(ES(),ed=t,Ed=r,ed.attachEvent("onpropertychange",O8)):e==="focusout"&&ES()}function RL(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Fg(Ed)}function kL(e,t){if(e==="click")return Fg(t)}function OL(e,t){if(e==="input"||e==="change")return Fg(t)}function LL(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Gi=typeof Object.is=="function"?Object.is:LL,UL=Object.prototype.hasOwnProperty;function Cd(e,t){if(Gi(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++)if(!UL.call(t,r[n])||!Gi(e[r[n]],t[r[n]]))return!1;return!0}function CS(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function IS(e,t){var r=CS(e);e=0;for(var n;r;){if(r.nodeType===3){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=CS(r)}}function L8(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?L8(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function NS(){for(var e=window,t=T0();t instanceof e.HTMLIFrameElement;){try{var r=typeof t.contentWindow.location.href=="string"}catch{r=!1}if(r)e=t.contentWindow;else break;t=T0(e.document)}return t}function rb(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}var FL=Xs&&"documentMode"in document&&11>=document.documentMode,Sc=null,nb=null,td=null,ib=!1;function PS(e,t,r){var n=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;ib||Sc==null||Sc!==T0(n)||(n=Sc,"selectionStart"in n&&rb(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),td&&Cd(td,n)||(td=n,n=I0(nb,"onSelect"),0<n.length&&(t=new r3("onSelect","select",null,t,r),e.push({event:t,listeners:n}),t.target=Sc)))}Jx("cancel cancel click click close close contextmenu contextMenu copy copy cut cut auxclick auxClick dblclick doubleClick dragend dragEnd dragstart dragStart drop drop focusin focus focusout blur input input invalid invalid keydown keyDown keypress keyPress keyup keyUp mousedown mouseDown mouseup mouseUp paste paste pause pause play play pointercancel pointerCancel pointerdown pointerDown pointerup pointerUp ratechange rateChange reset reset seeked seeked submit submit touchcancel touchCancel touchend touchEnd touchstart touchStart volumechange volumeChange".split(" "),0);Jx("drag drag dragenter dragEnter dragexit dragExit dragleave dragLeave dragover dragOver mousemove mouseMove mouseout mouseOut mouseover mouseOver pointermove pointerMove pointerout pointerOut pointerover pointerOver scroll scroll toggle toggle touchmove touchMove wheel wheel".split(" "),1);Jx(z9,2);for(var AS="change selectionchange textInput compositionstart compositionend compositionupdate".split(" "),m2=0;m2<AS.length;m2++)Zx.set(AS[m2],0);Jc("onMouseEnter",["mouseout","mouseover"]);Jc("onMouseLeave",["mouseout","mouseover"]);Jc("onPointerEnter",["pointerout","pointerover"]);Jc("onPointerLeave",["pointerout","pointerover"]);_u("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));_u("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));_u("onBeforeInput",["compositionend","keypress","textInput","paste"]);_u("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));_u("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));_u("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Hf="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),U8=new Set("cancel close invalid load scroll toggle".split(" ").concat(Hf));function RS(e,t,r){var n=e.type||"unknown-event";e.currentTarget=r,D9(n,t,void 0,e),e.currentTarget=null}function F8(e,t){t=(t&4)!==0;for(var r=0;r<e.length;r++){var n=e[r],i=n.event;n=n.listeners;e:{var o=void 0;if(t)for(var s=n.length-1;0<=s;s--){var a=n[s],l=a.instance,u=a.currentTarget;if(a=a.listener,l!==o&&i.isPropagationStopped())break e;RS(i,a,u),o=l}else for(s=0;s<n.length;s++){if(a=n[s],l=a.instance,u=a.currentTarget,a=a.listener,l!==o&&i.isPropagationStopped())break e;RS(i,a,u),o=l}}}if(E0)throw e=Q_,E0=!1,Q_=null,e}function nr(e,t){var r=j8(t),n=e+"__bubble";r.has(n)||(B8(t,e,2,!1),r.add(n))}var kS="_reactListening"+Math.random().toString(36).slice(2);function M8(e){e[kS]||(e[kS]=!0,e8.forEach(function(t){U8.has(t)||OS(t,!1,e,null),OS(t,!0,e,null)}))}function OS(e,t,r,n){var i=4<arguments.length&&arguments[4]!==void 0?arguments[4]:0,o=r;if(e==="selectionchange"&&r.nodeType!==9&&(o=r.ownerDocument),n!==null&&!t&&U8.has(e)){if(e!=="scroll")return;i|=2,o=n}var s=j8(o),a=e+"__"+(t?"capture":"bubble");s.has(a)||(t&&(i|=4),B8(o,e,i,t),s.add(a))}function B8(e,t,r,n){var i=Zx.get(t);switch(i===void 0?2:i){case 0:i=Q9;break;case 1:i=eL;break;default:i=Qx}r=i.bind(null,t,r,e),i=void 0,!J_||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(i=!0),n?i!==void 0?e.addEventListener(t,r,{capture:!0,passive:i}):e.addEventListener(t,r,!0):i!==void 0?e.addEventListener(t,r,{passive:i}):e.addEventListener(t,r,!1)}function D8(e,t,r,n,i){var o=n;if((t&1)===0&&(t&2)===0&&n!==null)e:for(;;){if(n===null)return;var s=n.tag;if(s===3||s===4){var a=n.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(s===4)for(s=n.return;s!==null;){var l=s.tag;if((l===3||l===4)&&(l=s.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;s=s.return}for(;a!==null;){if(s=zl(a),s===null)return;if(l=s.tag,l===5||l===6){n=o=s;continue e}a=a.parentNode}}n=n.return}U9(function(){var u=o,c=Xx(r),f=[];e:{var p=E8.get(e);if(p!==void 0){var v=r3,g=e;switch(e){case"keypress":if(Hv(r)===0)break e;case"keydown":case"keyup":v=mL;break;case"focusin":g="focus",v=f2;break;case"focusout":g="blur",v=f2;break;case"beforeblur":case"afterblur":v=f2;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":v=yS;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":v=nL;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":v=yL;break;case w8:case x8:case T8:v=sL;break;case S8:v=bL;break;case"scroll":v=tL;break;case"wheel":v=xL;break;case"copy":case"cut":case"paste":v=lL;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":v=bS}var b=(t&4)!==0,_=!b&&e==="scroll",w=b?p!==null?p+"Capture":null:p;b=[];for(var x=u,T;x!==null;){T=x;var I=T.stateNode;if(T.tag===5&&I!==null&&(T=I,w!==null&&(I=wd(x,w),I!=null&&b.push(Id(x,I,T)))),_)break;x=x.return}0<b.length&&(p=new v(p,g,null,r,c),f.push({event:p,listeners:b}))}}if((t&7)===0){e:{if(p=e==="mouseover"||e==="pointerover",v=e==="mouseout"||e==="pointerout",p&&(t&16)===0&&(g=r.relatedTarget||r.fromElement)&&(zl(g)||g[ph]))break e;if((v||p)&&(p=c.window===c?c:(p=c.ownerDocument)?p.defaultView||p.parentWindow:window,v?(g=r.relatedTarget||r.toElement,v=u,g=g?zl(g):null,g!==null&&(_=wu(g),g!==_||g.tag!==5&&g.tag!==6)&&(g=null)):(v=null,g=u),v!==g)){if(b=yS,I="onMouseLeave",w="onMouseEnter",x="mouse",(e==="pointerout"||e==="pointerover")&&(b=bS,I="onPointerLeave",w="onPointerEnter",x="pointer"),_=v==null?p:Ec(v),T=g==null?p:Ec(g),p=new b(I,x+"leave",v,r,c),p.target=_,p.relatedTarget=T,I=null,zl(c)===u&&(b=new b(w,x+"enter",g,r,c),b.target=T,b.relatedTarget=_,I=b),_=I,v&&g)t:{for(b=v,w=g,x=0,T=b;T;T=tc(T))x++;for(T=0,I=w;I;I=tc(I))T++;for(;0<x-T;)b=tc(b),x--;for(;0<T-x;)w=tc(w),T--;for(;x--;){if(b===w||w!==null&&b===w.alternate)break t;b=tc(b),w=tc(w)}b=null}else b=null;v!==null&&LS(f,p,v,b,!1),g!==null&&_!==null&&LS(f,_,g,b,!0)}}e:{if(p=u?Ec(u):window,v=p.nodeName&&p.nodeName.toLowerCase(),v==="select"||v==="input"&&p.type==="file")var R=PL;else if(TS(p))if(k8)R=OL;else{R=RL;var E=AL}else(v=p.nodeName)&&v.toLowerCase()==="input"&&(p.type==="checkbox"||p.type==="radio")&&(R=kL);if(R&&(R=R(e,u))){R8(f,R,r,c);break e}E&&E(e,p,u),e==="focusout"&&(E=p._wrapperState)&&E.controlled&&p.type==="number"&&z_(p,"number",p.value)}switch(E=u?Ec(u):window,e){case"focusin":(TS(E)||E.contentEditable==="true")&&(Sc=E,nb=u,td=null);break;case"focusout":td=nb=Sc=null;break;case"mousedown":ib=!0;break;case"contextmenu":case"mouseup":case"dragend":ib=!1,PS(f,r,c);break;case"selectionchange":if(FL)break;case"keydown":case"keyup":PS(f,r,c)}var O;if(i3)e:{switch(e){case"compositionstart":var P="onCompositionStart";break e;case"compositionend":P="onCompositionEnd";break e;case"compositionupdate":P="onCompositionUpdate";break e}P=void 0}else Tc?P8(e,r)&&(P="onCompositionEnd"):e==="keydown"&&r.keyCode===229&&(P="onCompositionStart");P&&(N8&&r.locale!=="ko"&&(Tc||P!=="onCompositionStart"?P==="onCompositionEnd"&&Tc&&(O=I8()):(Na=c,t3="value"in Na?Na.value:Na.textContent,Tc=!0)),E=I0(u,P),0<E.length&&(P=new _S(P,e,null,r,c),f.push({event:P,listeners:E}),O?P.data=O:(O=A8(r),O!==null&&(P.data=O)))),(O=SL?EL(e,r):CL(e,r))&&(u=I0(u,"onBeforeInput"),0<u.length&&(c=new _S("onBeforeInput","beforeinput",null,r,c),f.push({event:c,listeners:u}),c.data=O))}F8(f,t)})}function Id(e,t,r){return{instance:e,listener:t,currentTarget:r}}function I0(e,t){for(var r=t+"Capture",n=[];e!==null;){var i=e,o=i.stateNode;i.tag===5&&o!==null&&(i=o,o=wd(e,r),o!=null&&n.unshift(Id(e,o,i)),o=wd(e,t),o!=null&&n.push(Id(e,o,i))),e=e.return}return n}function tc(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function LS(e,t,r,n,i){for(var o=t._reactName,s=[];r!==null&&r!==n;){var a=r,l=a.alternate,u=a.stateNode;if(l!==null&&l===n)break;a.tag===5&&u!==null&&(a=u,i?(l=wd(r,o),l!=null&&s.unshift(Id(r,l,a))):i||(l=wd(r,o),l!=null&&s.push(Id(r,l,a)))),r=r.return}s.length!==0&&e.push({event:t,listeners:s})}function N0(){}var v2=null,g2=null;function G8(e,t){switch(e){case"button":case"input":case"select":case"textarea":return!!t.autoFocus}return!1}function ob(e,t){return e==="textarea"||e==="option"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var US=typeof setTimeout=="function"?setTimeout:void 0,ML=typeof clearTimeout=="function"?clearTimeout:void 0;function o3(e){e.nodeType===1?e.textContent="":e.nodeType===9&&(e=e.body,e!=null&&(e.textContent=""))}function Gc(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break}return e}function FS(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="$"||r==="$!"||r==="$?"){if(t===0)return e;t--}else r==="/$"&&t++}e=e.previousSibling}return null}var y2=0;function BL(e){return{$$typeof:zx,toString:e,valueOf:e}}var Mg=Math.random().toString(36).slice(2),Pa="__reactFiber$"+Mg,P0="__reactProps$"+Mg,ph="__reactContainer$"+Mg,MS="__reactEvents$"+Mg;function zl(e){var t=e[Pa];if(t)return t;for(var r=e.parentNode;r;){if(t=r[ph]||r[Pa]){if(r=t.alternate,t.child!==null||r!==null&&r.child!==null)for(e=FS(e);e!==null;){if(r=e[Pa])return r;e=FS(e)}return t}e=r,r=e.parentNode}return null}function hp(e){return e=e[Pa]||e[ph],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Ec(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(Te(33))}function Bg(e){return e[P0]||null}function j8(e){var t=e[MS];return t===void 0&&(t=e[MS]=new Set),t}var sb=[],Cc=-1;function ul(e){return{current:e}}function lr(e){0>Cc||(e.current=sb[Cc],sb[Cc]=null,Cc--)}function br(e,t){Cc++,sb[Cc]=e.current,e.current=t}var Za={},Dn=ul(Za),ui=ul(!1),nu=Za;function Qc(e,t){var r=e.type.contextTypes;if(!r)return Za;var n=e.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===t)return n.__reactInternalMemoizedMaskedChildContext;var i={},o;for(o in r)i[o]=t[o];return n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=i),i}function ci(e){return e=e.childContextTypes,e!=null}function A0(){lr(ui),lr(Dn)}function BS(e,t,r){if(Dn.current!==Za)throw Error(Te(168));br(Dn,t),br(ui,r)}function $8(e,t,r){var n=e.stateNode;if(e=t.childContextTypes,typeof n.getChildContext!="function")return r;n=n.getChildContext();for(var i in n)if(!(i in e))throw Error(Te(108,Fc(t)||"Unknown",i));return fr({},r,n)}function zv(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Za,nu=Dn.current,br(Dn,e),br(ui,ui.current),!0}function DS(e,t,r){var n=e.stateNode;if(!n)throw Error(Te(169));r?(e=$8(e,t,nu),n.__reactInternalMemoizedMergedChildContext=e,lr(ui),lr(Dn),br(Dn,e)):lr(ui),br(ui,r)}var s3=null,ql=null,DL=ln.unstable_runWithPriority,a3=ln.unstable_scheduleCallback,ab=ln.unstable_cancelCallback,GL=ln.unstable_shouldYield,GS=ln.unstable_requestPaint,lb=ln.unstable_now,jL=ln.unstable_getCurrentPriorityLevel,Dg=ln.unstable_ImmediatePriority,H8=ln.unstable_UserBlockingPriority,z8=ln.unstable_NormalPriority,V8=ln.unstable_LowPriority,X8=ln.unstable_IdlePriority,_2={},$L=GS!==void 0?GS:function(){},Ps=null,Vv=null,b2=!1,jS=lb(),Fn=1e4>jS?lb:function(){return lb()-jS};function eh(){switch(jL()){case Dg:return 99;case H8:return 98;case z8:return 97;case V8:return 96;case X8:return 95;default:throw Error(Te(332))}}function W8(e){switch(e){case 99:return Dg;case 98:return H8;case 97:return z8;case 96:return V8;case 95:return X8;default:throw Error(Te(332))}}function iu(e,t){return e=W8(e),DL(e,t)}function Nd(e,t,r){return e=W8(e),a3(e,t,r)}function as(){if(Vv!==null){var e=Vv;Vv=null,ab(e)}Y8()}function Y8(){if(!b2&&Ps!==null){b2=!0;var e=0;try{var t=Ps;iu(99,function(){for(;e<t.length;e++){var r=t[e];do r=r(!0);while(r!==null)}}),Ps=null}catch(r){throw Ps!==null&&(Ps=Ps.slice(e+1)),a3(Dg,as),r}finally{b2=!1}}}var HL=bu.ReactCurrentBatchConfig;function po(e,t){if(e&&e.defaultProps){t=fr({},t),e=e.defaultProps;for(var r in e)t[r]===void 0&&(t[r]=e[r]);return t}return t}var R0=ul(null),k0=null,Ic=null,O0=null;function l3(){O0=Ic=k0=null}function u3(e){var t=R0.current;lr(R0),e.type._context._currentValue=t}function K8(e,t){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)===t){if(r===null||(r.childLanes&t)===t)break;r.childLanes|=t}else e.childLanes|=t,r!==null&&(r.childLanes|=t);e=e.return}}function jc(e,t){k0=e,O0=Ic=null,e=e.dependencies,e!==null&&e.firstContext!==null&&((e.lanes&t)!==0&&(go=!0),e.firstContext=null)}function Ki(e,t){if(O0!==e&&t!==!1&&t!==0)if((typeof t!="number"||t===1073741823)&&(O0=e,t=1073741823),t={context:e,observedBits:t,next:null},Ic===null){if(k0===null)throw Error(Te(308));Ic=t,k0.dependencies={lanes:0,firstContext:t,responders:null}}else Ic=Ic.next=t;return e._currentValue}var xa=!1;function c3(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null},effects:null}}function q8(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Fa(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Ma(e,t){if(e=e.updateQueue,e!==null){e=e.shared;var r=e.pending;r===null?t.next=t:(t.next=r.next,r.next=t),e.pending=t}}function $S(e,t){var r=e.updateQueue,n=e.alternate;if(n!==null&&(n=n.updateQueue,r===n)){var i=null,o=null;if(r=r.firstBaseUpdate,r!==null){do{var s={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};o===null?i=o=s:o=o.next=s,r=r.next}while(r!==null);o===null?i=o=t:o=o.next=t}else i=o=t;r={baseState:n.baseState,firstBaseUpdate:i,lastBaseUpdate:o,shared:n.shared,effects:n.effects},e.updateQueue=r;return}e=r.lastBaseUpdate,e===null?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}function Pd(e,t,r,n){var i=e.updateQueue;xa=!1;var o=i.firstBaseUpdate,s=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var l=a,u=l.next;l.next=null,s===null?o=u:s.next=u,s=l;var c=e.alternate;if(c!==null){c=c.updateQueue;var f=c.lastBaseUpdate;f!==s&&(f===null?c.firstBaseUpdate=u:f.next=u,c.lastBaseUpdate=l)}}if(o!==null){f=i.baseState,s=0,c=u=l=null;do{a=o.lane;var p=o.eventTime;if((n&a)===a){c!==null&&(c=c.next={eventTime:p,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var v=e,g=o;switch(a=t,p=r,g.tag){case 1:if(v=g.payload,typeof v=="function"){f=v.call(p,f,a);break e}f=v;break e;case 3:v.flags=v.flags&-4097|64;case 0:if(v=g.payload,a=typeof v=="function"?v.call(p,f,a):v,a==null)break e;f=fr({},f,a);break e;case 2:xa=!0}}o.callback!==null&&(e.flags|=32,a=i.effects,a===null?i.effects=[o]:a.push(o))}else p={eventTime:p,lane:a,tag:o.tag,payload:o.payload,callback:o.callback,next:null},c===null?(u=c=p,l=f):c=c.next=p,s|=a;if(o=o.next,o===null){if(a=i.shared.pending,a===null)break;o=a.next,a.next=null,i.lastBaseUpdate=a,i.shared.pending=null}}while(1);c===null&&(l=f),i.baseState=l,i.firstBaseUpdate=u,i.lastBaseUpdate=c,dp|=s,e.lanes=s,e.memoizedState=f}}function HS(e,t,r){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var n=e[t],i=n.callback;if(i!==null){if(n.callback=null,n=r,typeof i!="function")throw Error(Te(191,i));i.call(n)}}}var Z8=new Ag.Component().refs;function L0(e,t,r,n){t=e.memoizedState,r=r(n,t),r=r==null?t:fr({},t,r),e.memoizedState=r,e.lanes===0&&(e.updateQueue.baseState=r)}var Gg={isMounted:function(e){return(e=e._reactInternals)?wu(e)===e:!1},enqueueSetState:function(e,t,r){e=e._reactInternals;var n=Ii(),i=Ba(e),o=Fa(n,i);o.payload=t,r!=null&&(o.callback=r),Ma(e,o),Da(e,i,n)},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var n=Ii(),i=Ba(e),o=Fa(n,i);o.tag=1,o.payload=t,r!=null&&(o.callback=r),Ma(e,o),Da(e,i,n)},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=Ii(),n=Ba(e),i=Fa(r,n);i.tag=2,t!=null&&(i.callback=t),Ma(e,i),Da(e,n,r)}};function zS(e,t,r,n,i,o,s){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(n,o,s):t.prototype&&t.prototype.isPureReactComponent?!Cd(r,n)||!Cd(i,o):!0}function J8(e,t,r){var n=!1,i=Za,o=t.contextType;return typeof o=="object"&&o!==null?o=Ki(o):(i=ci(t)?nu:Dn.current,n=t.contextTypes,o=(n=n!=null)?Qc(e,i):Za),t=new t(r,o),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Gg,e.stateNode=t,t._reactInternals=e,n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=o),t}function VS(e,t,r,n){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(r,n),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(r,n),t.state!==e&&Gg.enqueueReplaceState(t,t.state,null)}function ub(e,t,r,n){var i=e.stateNode;i.props=r,i.state=e.memoizedState,i.refs=Z8,c3(e);var o=t.contextType;typeof o=="object"&&o!==null?i.context=Ki(o):(o=ci(t)?nu:Dn.current,i.context=Qc(e,o)),Pd(e,r,i,n),i.state=e.memoizedState,o=t.getDerivedStateFromProps,typeof o=="function"&&(L0(e,t,o,r),i.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(t=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),t!==i.state&&Gg.enqueueReplaceState(i,i.state,null),Pd(e,r,i,n),i.state=e.memoizedState),typeof i.componentDidMount=="function"&&(e.flags|=4)}var Bm=Array.isArray;function xf(e,t,r){if(e=r.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(Te(309));var n=r.stateNode}if(!n)throw Error(Te(147,e));var i=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===i?t.ref:(t=function(o){var s=n.refs;s===Z8&&(s=n.refs={}),o===null?delete s[i]:s[i]=o},t._stringRef=i,t)}if(typeof e!="string")throw Error(Te(284));if(!r._owner)throw Error(Te(290,e))}return e}function Dm(e,t){if(e.type!=="textarea")throw Error(Te(31,Object.prototype.toString.call(t)==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":t))}function Q8(e){function t(_,w){if(e){var x=_.lastEffect;x!==null?(x.nextEffect=w,_.lastEffect=w):_.firstEffect=_.lastEffect=w,w.nextEffect=null,w.flags=8}}function r(_,w){if(!e)return null;for(;w!==null;)t(_,w),w=w.sibling;return null}function n(_,w){for(_=new Map;w!==null;)w.key!==null?_.set(w.key,w):_.set(w.index,w),w=w.sibling;return _}function i(_,w){return _=Qa(_,w),_.index=0,_.sibling=null,_}function o(_,w,x){return _.index=x,e?(x=_.alternate,x!==null?(x=x.index,x<w?(_.flags=2,w):x):(_.flags=2,w)):w}function s(_){return e&&_.alternate===null&&(_.flags=2),_}function a(_,w,x,T){return w===null||w.tag!==6?(w=E2(x,_.mode,T),w.return=_,w):(w=i(w,x),w.return=_,w)}function l(_,w,x,T){return w!==null&&w.elementType===x.type?(T=i(w,x.props),T.ref=xf(_,w,x),T.return=_,T):(T=Kv(x.type,x.key,x.props,null,_.mode,T),T.ref=xf(_,w,x),T.return=_,T)}function u(_,w,x,T){return w===null||w.tag!==4||w.stateNode.containerInfo!==x.containerInfo||w.stateNode.implementation!==x.implementation?(w=C2(x,_.mode,T),w.return=_,w):(w=i(w,x.children||[]),w.return=_,w)}function c(_,w,x,T,I){return w===null||w.tag!==7?(w=Vc(x,_.mode,T,I),w.return=_,w):(w=i(w,x),w.return=_,w)}function f(_,w,x){if(typeof w=="string"||typeof w=="number")return w=E2(""+w,_.mode,x),w.return=_,w;if(typeof w=="object"&&w!==null){switch(w.$$typeof){case jf:return x=Kv(w.type,w.key,w.props,null,_.mode,x),x.ref=xf(_,null,w),x.return=_,x;case $l:return w=C2(w,_.mode,x),w.return=_,w}if(Bm(w)||vf(w))return w=Vc(w,_.mode,x,null),w.return=_,w;Dm(_,w)}return null}function p(_,w,x,T){var I=w!==null?w.key:null;if(typeof x=="string"||typeof x=="number")return I!==null?null:a(_,w,""+x,T);if(typeof x=="object"&&x!==null){switch(x.$$typeof){case jf:return x.key===I?x.type===Ea?c(_,w,x.props.children,T,I):l(_,w,x,T):null;case $l:return x.key===I?u(_,w,x,T):null}if(Bm(x)||vf(x))return I!==null?null:c(_,w,x,T,null);Dm(_,x)}return null}function v(_,w,x,T,I){if(typeof T=="string"||typeof T=="number")return _=_.get(x)||null,a(w,_,""+T,I);if(typeof T=="object"&&T!==null){switch(T.$$typeof){case jf:return _=_.get(T.key===null?x:T.key)||null,T.type===Ea?c(w,_,T.props.children,I,T.key):l(w,_,T,I);case $l:return _=_.get(T.key===null?x:T.key)||null,u(w,_,T,I)}if(Bm(T)||vf(T))return _=_.get(x)||null,c(w,_,T,I,null);Dm(w,T)}return null}function g(_,w,x,T){for(var I=null,R=null,E=w,O=w=0,P=null;E!==null&&O<x.length;O++){E.index>O?(P=E,E=null):P=E.sibling;var N=p(_,E,x[O],T);if(N===null){E===null&&(E=P);break}e&&E&&N.alternate===null&&t(_,E),w=o(N,w,O),R===null?I=N:R.sibling=N,R=N,E=P}if(O===x.length)return r(_,E),I;if(E===null){for(;O<x.length;O++)E=f(_,x[O],T),E!==null&&(w=o(E,w,O),R===null?I=E:R.sibling=E,R=E);return I}for(E=n(_,E);O<x.length;O++)P=v(E,_,O,x[O],T),P!==null&&(e&&P.alternate!==null&&E.delete(P.key===null?O:P.key),w=o(P,w,O),R===null?I=P:R.sibling=P,R=P);return e&&E.forEach(function(A){return t(_,A)}),I}function b(_,w,x,T){var I=vf(x);if(typeof I!="function")throw Error(Te(150));if(x=I.call(x),x==null)throw Error(Te(151));for(var R=I=null,E=w,O=w=0,P=null,N=x.next();E!==null&&!N.done;O++,N=x.next()){E.index>O?(P=E,E=null):P=E.sibling;var A=p(_,E,N.value,T);if(A===null){E===null&&(E=P);break}e&&E&&A.alternate===null&&t(_,E),w=o(A,w,O),R===null?I=A:R.sibling=A,R=A,E=P}if(N.done)return r(_,E),I;if(E===null){for(;!N.done;O++,N=x.next())N=f(_,N.value,T),N!==null&&(w=o(N,w,O),R===null?I=N:R.sibling=N,R=N);return I}for(E=n(_,E);!N.done;O++,N=x.next())N=v(E,_,O,N.value,T),N!==null&&(e&&N.alternate!==null&&E.delete(N.key===null?O:N.key),w=o(N,w,O),R===null?I=N:R.sibling=N,R=N);return e&&E.forEach(function(j){return t(_,j)}),I}return function(_,w,x,T){var I=typeof x=="object"&&x!==null&&x.type===Ea&&x.key===null;I&&(x=x.props.children);var R=typeof x=="object"&&x!==null;if(R)switch(x.$$typeof){case jf:e:{for(R=x.key,I=w;I!==null;){if(I.key===R){switch(I.tag){case 7:if(x.type===Ea){r(_,I.sibling),w=i(I,x.props.children),w.return=_,_=w;break e}break;default:if(I.elementType===x.type){r(_,I.sibling),w=i(I,x.props),w.ref=xf(_,I,x),w.return=_,_=w;break e}}r(_,I);break}else t(_,I);I=I.sibling}x.type===Ea?(w=Vc(x.props.children,_.mode,T,x.key),w.return=_,_=w):(T=Kv(x.type,x.key,x.props,null,_.mode,T),T.ref=xf(_,w,x),T.return=_,_=T)}return s(_);case $l:e:{for(I=x.key;w!==null;){if(w.key===I)if(w.tag===4&&w.stateNode.containerInfo===x.containerInfo&&w.stateNode.implementation===x.implementation){r(_,w.sibling),w=i(w,x.children||[]),w.return=_,_=w;break e}else{r(_,w);break}else t(_,w);w=w.sibling}w=C2(x,_.mode,T),w.return=_,_=w}return s(_)}if(typeof x=="string"||typeof x=="number")return x=""+x,w!==null&&w.tag===6?(r(_,w.sibling),w=i(w,x),w.return=_,_=w):(r(_,w),w=E2(x,_.mode,T),w.return=_,_=w),s(_);if(Bm(x))return g(_,w,x,T);if(vf(x))return b(_,w,x,T);if(R&&Dm(_,x),typeof x>"u"&&!I)switch(_.tag){case 1:case 22:case 0:case 11:case 15:throw Error(Te(152,Fc(_.type)||"Component"))}return r(_,w)}}var U0=Q8(!0),eP=Q8(!1),fp={},Wo=ul(fp),Ad=ul(fp),Rd=ul(fp);function Vl(e){if(e===fp)throw Error(Te(174));return e}function cb(e,t){switch(br(Rd,t),br(Ad,e),br(Wo,fp),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Y_(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=Y_(t,e)}lr(Wo),br(Wo,t)}function th(){lr(Wo),lr(Ad),lr(Rd)}function XS(e){Vl(Rd.current);var t=Vl(Wo.current),r=Y_(t,e.type);t!==r&&(br(Ad,e),br(Wo,r))}function h3(e){Ad.current===e&&(lr(Wo),lr(Ad))}var _r=ul(0);function F0(e){for(var t=e;t!==null;){if(t.tag===13){var r=t.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if((t.flags&64)!==0)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Us=null,Aa=null,Yo=!1;function tP(e,t){var r=ji(5,null,null,0);r.elementType="DELETED",r.type="DELETED",r.stateNode=t,r.return=e,r.flags=8,e.lastEffect!==null?(e.lastEffect.nextEffect=r,e.lastEffect=r):e.firstEffect=e.lastEffect=r}function WS(e,t){switch(e.tag){case 5:var r=e.type;return t=t.nodeType!==1||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,!0):!1;case 13:return!1;default:return!1}}function hb(e){if(Yo){var t=Aa;if(t){var r=t;if(!WS(e,t)){if(t=Gc(r.nextSibling),!t||!WS(e,t)){e.flags=e.flags&-1025|2,Yo=!1,Us=e;return}tP(Us,r)}Us=e,Aa=Gc(t.firstChild)}else e.flags=e.flags&-1025|2,Yo=!1,Us=e}}function YS(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Us=e}function Gm(e){if(e!==Us)return!1;if(!Yo)return YS(e),Yo=!0,!1;var t=e.type;if(e.tag!==5||t!=="head"&&t!=="body"&&!ob(t,e.memoizedProps))for(t=Aa;t;)tP(e,t),t=Gc(t.nextSibling);if(YS(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(Te(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="/$"){if(t===0){Aa=Gc(e.nextSibling);break e}t--}else r!=="$"&&r!=="$!"&&r!=="$?"||t++}e=e.nextSibling}Aa=null}}else Aa=Us?Gc(e.stateNode.nextSibling):null;return!0}function w2(){Aa=Us=null,Yo=!1}var $c=[];function f3(){for(var e=0;e<$c.length;e++)$c[e]._workInProgressVersionPrimary=null;$c.length=0}var rd=bu.ReactCurrentDispatcher,Vi=bu.ReactCurrentBatchConfig,kd=0,Rr=null,On=null,_n=null,M0=!1,nd=!1;function ei(){throw Error(Te(321))}function d3(e,t){if(t===null)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!Gi(e[r],t[r]))return!1;return!0}function p3(e,t,r,n,i,o){if(kd=o,Rr=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,rd.current=e===null||e.memoizedState===null?VL:XL,e=r(n,i),nd){o=0;do{if(nd=!1,!(25>o))throw Error(Te(301));o+=1,_n=On=null,t.updateQueue=null,rd.current=WL,e=r(n,i)}while(nd)}if(rd.current=j0,t=On!==null&&On.next!==null,kd=0,_n=On=Rr=null,M0=!1,t)throw Error(Te(300));return e}function Xl(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return _n===null?Rr.memoizedState=_n=e:_n=_n.next=e,_n}function xu(){if(On===null){var e=Rr.alternate;e=e!==null?e.memoizedState:null}else e=On.next;var t=_n===null?Rr.memoizedState:_n.next;if(t!==null)_n=t,On=e;else{if(e===null)throw Error(Te(310));On=e,e={memoizedState:On.memoizedState,baseState:On.baseState,baseQueue:On.baseQueue,queue:On.queue,next:null},_n===null?Rr.memoizedState=_n=e:_n=_n.next=e}return _n}function jo(e,t){return typeof t=="function"?t(e):t}function Tf(e){var t=xu(),r=t.queue;if(r===null)throw Error(Te(311));r.lastRenderedReducer=e;var n=On,i=n.baseQueue,o=r.pending;if(o!==null){if(i!==null){var s=i.next;i.next=o.next,o.next=s}n.baseQueue=i=o,r.pending=null}if(i!==null){i=i.next,n=n.baseState;var a=s=o=null,l=i;do{var u=l.lane;if((kd&u)===u)a!==null&&(a=a.next={lane:0,action:l.action,eagerReducer:l.eagerReducer,eagerState:l.eagerState,next:null}),n=l.eagerReducer===e?l.eagerState:e(n,l.action);else{var c={lane:u,action:l.action,eagerReducer:l.eagerReducer,eagerState:l.eagerState,next:null};a===null?(s=a=c,o=n):a=a.next=c,Rr.lanes|=u,dp|=u}l=l.next}while(l!==null&&l!==i);a===null?o=n:a.next=s,Gi(n,t.memoizedState)||(go=!0),t.memoizedState=n,t.baseState=o,t.baseQueue=a,r.lastRenderedState=n}return[t.memoizedState,r.dispatch]}function Sf(e){var t=xu(),r=t.queue;if(r===null)throw Error(Te(311));r.lastRenderedReducer=e;var n=r.dispatch,i=r.pending,o=t.memoizedState;if(i!==null){r.pending=null;var s=i=i.next;do o=e(o,s.action),s=s.next;while(s!==i);Gi(o,t.memoizedState)||(go=!0),t.memoizedState=o,t.baseQueue===null&&(t.baseState=o),r.lastRenderedState=o}return[o,n]}function KS(e,t,r){var n=t._getVersion;n=n(t._source);var i=t._workInProgressVersionPrimary;if(i!==null?e=i===n:(e=e.mutableReadLanes,(e=(kd&e)===e)&&(t._workInProgressVersionPrimary=n,$c.push(t))),e)return r(t._source);throw $c.push(t),Error(Te(350))}function rP(e,t,r,n){var i=Vn;if(i===null)throw Error(Te(349));var o=t._getVersion,s=o(t._source),a=rd.current,l=a.useState(function(){return KS(i,t,r)}),u=l[1],c=l[0];l=_n;var f=e.memoizedState,p=f.refs,v=p.getSnapshot,g=f.source;f=f.subscribe;var b=Rr;return e.memoizedState={refs:p,source:t,subscribe:n},a.useEffect(function(){p.getSnapshot=r,p.setSnapshot=u;var _=o(t._source);if(!Gi(s,_)){_=r(t._source),Gi(c,_)||(u(_),_=Ba(b),i.mutableReadLanes|=_&i.pendingLanes),_=i.mutableReadLanes,i.entangledLanes|=_;for(var w=i.entanglements,x=_;0<x;){var T=31-qa(x),I=1<<T;w[T]|=_,x&=~I}}},[r,t,n]),a.useEffect(function(){return n(t._source,function(){var _=p.getSnapshot,w=p.setSnapshot;try{w(_(t._source));var x=Ba(b);i.mutableReadLanes|=x&i.pendingLanes}catch(T){w(function(){throw T})}})},[t,n]),Gi(v,r)&&Gi(g,t)&&Gi(f,n)||(e={pending:null,dispatch:null,lastRenderedReducer:jo,lastRenderedState:c},e.dispatch=u=g3.bind(null,Rr,e),l.queue=e,l.baseQueue=null,c=KS(i,t,r),l.memoizedState=l.baseState=c),c}function nP(e,t,r){var n=xu();return rP(n,e,t,r)}function Ef(e){var t=Xl();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e=t.queue={pending:null,dispatch:null,lastRenderedReducer:jo,lastRenderedState:e},e=e.dispatch=g3.bind(null,Rr,e),[t.memoizedState,e]}function B0(e,t,r,n){return e={tag:e,create:t,destroy:r,deps:n,next:null},t=Rr.updateQueue,t===null?(t={lastEffect:null},Rr.updateQueue=t,t.lastEffect=e.next=e):(r=t.lastEffect,r===null?t.lastEffect=e.next=e:(n=r.next,r.next=e,e.next=n,t.lastEffect=e)),e}function qS(e){var t=Xl();return e={current:e},t.memoizedState=e}function D0(){return xu().memoizedState}function fb(e,t,r,n){var i=Xl();Rr.flags|=e,i.memoizedState=B0(1|t,r,void 0,n===void 0?null:n)}function m3(e,t,r,n){var i=xu();n=n===void 0?null:n;var o=void 0;if(On!==null){var s=On.memoizedState;if(o=s.destroy,n!==null&&d3(n,s.deps)){B0(t,r,o,n);return}}Rr.flags|=e,i.memoizedState=B0(1|t,r,o,n)}function ZS(e,t){return fb(516,4,e,t)}function G0(e,t){return m3(516,4,e,t)}function iP(e,t){return m3(4,2,e,t)}function oP(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function sP(e,t,r){return r=r!=null?r.concat([e]):null,m3(4,2,oP.bind(null,t,e),r)}function v3(){}function aP(e,t){var r=xu();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&d3(t,n[1])?n[0]:(r.memoizedState=[e,t],e)}function lP(e,t){var r=xu();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&d3(t,n[1])?n[0]:(e=e(),r.memoizedState=[e,t],e)}function zL(e,t){var r=eh();iu(98>r?98:r,function(){e(!0)}),iu(97<r?97:r,function(){var n=Vi.transition;Vi.transition=1;try{e(!1),t()}finally{Vi.transition=n}})}function g3(e,t,r){var n=Ii(),i=Ba(e),o={lane:i,action:r,eagerReducer:null,eagerState:null,next:null},s=t.pending;if(s===null?o.next=o:(o.next=s.next,s.next=o),t.pending=o,s=e.alternate,e===Rr||s!==null&&s===Rr)nd=M0=!0;else{if(e.lanes===0&&(s===null||s.lanes===0)&&(s=t.lastRenderedReducer,s!==null))try{var a=t.lastRenderedState,l=s(a,r);if(o.eagerReducer=s,o.eagerState=l,Gi(l,a))return}catch{}finally{}Da(e,i,n)}}var j0={readContext:Ki,useCallback:ei,useContext:ei,useEffect:ei,useImperativeHandle:ei,useLayoutEffect:ei,useMemo:ei,useReducer:ei,useRef:ei,useState:ei,useDebugValue:ei,useDeferredValue:ei,useTransition:ei,useMutableSource:ei,useOpaqueIdentifier:ei,unstable_isNewReconciler:!1},VL={readContext:Ki,useCallback:function(e,t){return Xl().memoizedState=[e,t===void 0?null:t],e},useContext:Ki,useEffect:ZS,useImperativeHandle:function(e,t,r){return r=r!=null?r.concat([e]):null,fb(4,2,oP.bind(null,t,e),r)},useLayoutEffect:function(e,t){return fb(4,2,e,t)},useMemo:function(e,t){var r=Xl();return t=t===void 0?null:t,e=e(),r.memoizedState=[e,t],e},useReducer:function(e,t,r){var n=Xl();return t=r!==void 0?r(t):t,n.memoizedState=n.baseState=t,e=n.queue={pending:null,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},e=e.dispatch=g3.bind(null,Rr,e),[n.memoizedState,e]},useRef:qS,useState:Ef,useDebugValue:v3,useDeferredValue:function(e){var t=Ef(e),r=t[0],n=t[1];return ZS(function(){var i=Vi.transition;Vi.transition=1;try{n(e)}finally{Vi.transition=i}},[e]),r},useTransition:function(){var e=Ef(!1),t=e[0];return e=zL.bind(null,e[1]),qS(e),[e,t]},useMutableSource:function(e,t,r){var n=Xl();return n.memoizedState={refs:{getSnapshot:t,setSnapshot:null},source:e,subscribe:r},rP(n,e,t,r)},useOpaqueIdentifier:function(){if(Yo){var e=!1,t=BL(function(){throw e||(e=!0,r("r:"+(y2++).toString(36))),Error(Te(355))}),r=Ef(t)[1];return(Rr.mode&2)===0&&(Rr.flags|=516,B0(5,function(){r("r:"+(y2++).toString(36))},void 0,null)),t}return t="r:"+(y2++).toString(36),Ef(t),t},unstable_isNewReconciler:!1},XL={readContext:Ki,useCallback:aP,useContext:Ki,useEffect:G0,useImperativeHandle:sP,useLayoutEffect:iP,useMemo:lP,useReducer:Tf,useRef:D0,useState:function(){return Tf(jo)},useDebugValue:v3,useDeferredValue:function(e){var t=Tf(jo),r=t[0],n=t[1];return G0(function(){var i=Vi.transition;Vi.transition=1;try{n(e)}finally{Vi.transition=i}},[e]),r},useTransition:function(){var e=Tf(jo)[0];return[D0().current,e]},useMutableSource:nP,useOpaqueIdentifier:function(){return Tf(jo)[0]},unstable_isNewReconciler:!1},WL={readContext:Ki,useCallback:aP,useContext:Ki,useEffect:G0,useImperativeHandle:sP,useLayoutEffect:iP,useMemo:lP,useReducer:Sf,useRef:D0,useState:function(){return Sf(jo)},useDebugValue:v3,useDeferredValue:function(e){var t=Sf(jo),r=t[0],n=t[1];return G0(function(){var i=Vi.transition;Vi.transition=1;try{n(e)}finally{Vi.transition=i}},[e]),r},useTransition:function(){var e=Sf(jo)[0];return[D0().current,e]},useMutableSource:nP,useOpaqueIdentifier:function(){return Sf(jo)[0]},unstable_isNewReconciler:!1},YL=bu.ReactCurrentOwner,go=!1;function ti(e,t,r,n){t.child=e===null?eP(t,null,r,n):U0(t,e.child,r,n)}function JS(e,t,r,n,i){r=r.render;var o=t.ref;return jc(t,i),n=p3(e,t,r,n,o,i),e!==null&&!go?(t.updateQueue=e.updateQueue,t.flags&=-517,e.lanes&=~i,Fs(e,t,i)):(t.flags|=1,ti(e,t,n,i),t.child)}function QS(e,t,r,n,i,o){if(e===null){var s=r.type;return typeof s=="function"&&!T3(s)&&s.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(t.tag=15,t.type=s,uP(e,t,s,n,i,o)):(e=Kv(r.type,null,n,t,t.mode,o),e.ref=t.ref,e.return=t,t.child=e)}return s=e.child,(i&o)===0&&(i=s.memoizedProps,r=r.compare,r=r!==null?r:Cd,r(i,n)&&e.ref===t.ref)?Fs(e,t,o):(t.flags|=1,e=Qa(s,n),e.ref=t.ref,e.return=t,t.child=e)}function uP(e,t,r,n,i,o){if(e!==null&&Cd(e.memoizedProps,n)&&e.ref===t.ref)if(go=!1,(o&i)!==0)(e.flags&16384)!==0&&(go=!0);else return t.lanes=e.lanes,Fs(e,t,o);return db(e,t,r,n,o)}function x2(e,t,r){var n=t.pendingProps,i=n.children,o=e!==null?e.memoizedState:null;if(n.mode==="hidden"||n.mode==="unstable-defer-without-hiding")if((t.mode&4)===0)t.memoizedState={baseLanes:0},$m(t,r);else if((r&1073741824)!==0)t.memoizedState={baseLanes:0},$m(t,o!==null?o.baseLanes:r);else return e=o!==null?o.baseLanes|r:r,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e},$m(t,e),null;else o!==null?(n=o.baseLanes|r,t.memoizedState=null):n=r,$m(t,n);return ti(e,t,i,r),t.child}function cP(e,t){var r=t.ref;(e===null&&r!==null||e!==null&&e.ref!==r)&&(t.flags|=128)}function db(e,t,r,n,i){var o=ci(r)?nu:Dn.current;return o=Qc(t,o),jc(t,i),r=p3(e,t,r,n,o,i),e!==null&&!go?(t.updateQueue=e.updateQueue,t.flags&=-517,e.lanes&=~i,Fs(e,t,i)):(t.flags|=1,ti(e,t,r,i),t.child)}function eE(e,t,r,n,i){if(ci(r)){var o=!0;zv(t)}else o=!1;if(jc(t,i),t.stateNode===null)e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2),J8(t,r,n),ub(t,r,n,i),n=!0;else if(e===null){var s=t.stateNode,a=t.memoizedProps;s.props=a;var l=s.context,u=r.contextType;typeof u=="object"&&u!==null?u=Ki(u):(u=ci(r)?nu:Dn.current,u=Qc(t,u));var c=r.getDerivedStateFromProps,f=typeof c=="function"||typeof s.getSnapshotBeforeUpdate=="function";f||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(a!==n||l!==u)&&VS(t,s,n,u),xa=!1;var p=t.memoizedState;s.state=p,Pd(t,n,s,i),l=t.memoizedState,a!==n||p!==l||ui.current||xa?(typeof c=="function"&&(L0(t,r,c,n),l=t.memoizedState),(a=xa||zS(t,r,a,n,p,l,u))?(f||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount()),typeof s.componentDidMount=="function"&&(t.flags|=4)):(typeof s.componentDidMount=="function"&&(t.flags|=4),t.memoizedProps=n,t.memoizedState=l),s.props=n,s.state=l,s.context=u,n=a):(typeof s.componentDidMount=="function"&&(t.flags|=4),n=!1)}else{s=t.stateNode,q8(e,t),a=t.memoizedProps,u=t.type===t.elementType?a:po(t.type,a),s.props=u,f=t.pendingProps,p=s.context,l=r.contextType,typeof l=="object"&&l!==null?l=Ki(l):(l=ci(r)?nu:Dn.current,l=Qc(t,l));var v=r.getDerivedStateFromProps;(c=typeof v=="function"||typeof s.getSnapshotBeforeUpdate=="function")||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(a!==f||p!==l)&&VS(t,s,n,l),xa=!1,p=t.memoizedState,s.state=p,Pd(t,n,s,i);var g=t.memoizedState;a!==f||p!==g||ui.current||xa?(typeof v=="function"&&(L0(t,r,v,n),g=t.memoizedState),(u=xa||zS(t,r,u,n,p,g,l))?(c||typeof s.UNSAFE_componentWillUpdate!="function"&&typeof s.componentWillUpdate!="function"||(typeof s.componentWillUpdate=="function"&&s.componentWillUpdate(n,g,l),typeof s.UNSAFE_componentWillUpdate=="function"&&s.UNSAFE_componentWillUpdate(n,g,l)),typeof s.componentDidUpdate=="function"&&(t.flags|=4),typeof s.getSnapshotBeforeUpdate=="function"&&(t.flags|=256)):(typeof s.componentDidUpdate!="function"||a===e.memoizedProps&&p===e.memoizedState||(t.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&p===e.memoizedState||(t.flags|=256),t.memoizedProps=n,t.memoizedState=g),s.props=n,s.state=g,s.context=l,n=u):(typeof s.componentDidUpdate!="function"||a===e.memoizedProps&&p===e.memoizedState||(t.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&p===e.memoizedState||(t.flags|=256),n=!1)}return pb(e,t,r,n,o,i)}function pb(e,t,r,n,i,o){cP(e,t);var s=(t.flags&64)!==0;if(!n&&!s)return i&&DS(t,r,!1),Fs(e,t,o);n=t.stateNode,YL.current=t;var a=s&&typeof r.getDerivedStateFromError!="function"?null:n.render();return t.flags|=1,e!==null&&s?(t.child=U0(t,e.child,null,o),t.child=U0(t,null,a,o)):ti(e,t,a,o),t.memoizedState=n.state,i&&DS(t,r,!0),t.child}function tE(e){var t=e.stateNode;t.pendingContext?BS(e,t.pendingContext,t.pendingContext!==t.context):t.context&&BS(e,t.context,!1),cb(e,t.containerInfo)}var jm={dehydrated:null,retryLane:0};function rE(e,t,r){var n=t.pendingProps,i=_r.current,o=!1,s;return(s=(t.flags&64)!==0)||(s=e!==null&&e.memoizedState===null?!1:(i&2)!==0),s?(o=!0,t.flags&=-65):e!==null&&e.memoizedState===null||n.fallback===void 0||n.unstable_avoidThisFallback===!0||(i|=1),br(_r,i&1),e===null?(n.fallback!==void 0&&hb(t),e=n.children,i=n.fallback,o?(e=nE(t,e,i,r),t.child.memoizedState={baseLanes:r},t.memoizedState=jm,e):typeof n.unstable_expectedLoadTime=="number"?(e=nE(t,e,i,r),t.child.memoizedState={baseLanes:r},t.memoizedState=jm,t.lanes=33554432,e):(r=S3({mode:"visible",children:e},t.mode,r,null),r.return=t,t.child=r)):e.memoizedState!==null?o?(n=oE(e,t,n.children,n.fallback,r),o=t.child,i=e.child.memoizedState,o.memoizedState=i===null?{baseLanes:r}:{baseLanes:i.baseLanes|r},o.childLanes=e.childLanes&~r,t.memoizedState=jm,n):(r=iE(e,t,n.children,r),t.memoizedState=null,r):o?(n=oE(e,t,n.children,n.fallback,r),o=t.child,i=e.child.memoizedState,o.memoizedState=i===null?{baseLanes:r}:{baseLanes:i.baseLanes|r},o.childLanes=e.childLanes&~r,t.memoizedState=jm,n):(r=iE(e,t,n.children,r),t.memoizedState=null,r)}function nE(e,t,r,n){var i=e.mode,o=e.child;return t={mode:"hidden",children:t},(i&2)===0&&o!==null?(o.childLanes=0,o.pendingProps=t):o=S3(t,i,0,null),r=Vc(r,i,n,null),o.return=e,r.return=e,o.sibling=r,e.child=o,r}function iE(e,t,r,n){var i=e.child;return e=i.sibling,r=Qa(i,{mode:"visible",children:r}),(t.mode&2)===0&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(e.nextEffect=null,e.flags=8,t.firstEffect=t.lastEffect=e),t.child=r}function oE(e,t,r,n,i){var o=t.mode,s=e.child;e=s.sibling;var a={mode:"hidden",children:r};return(o&2)===0&&t.child!==s?(r=t.child,r.childLanes=0,r.pendingProps=a,s=r.lastEffect,s!==null?(t.firstEffect=r.firstEffect,t.lastEffect=s,s.nextEffect=null):t.firstEffect=t.lastEffect=null):r=Qa(s,a),e!==null?n=Qa(e,n):(n=Vc(n,o,i,null),n.flags|=2),n.return=t,r.return=t,r.sibling=n,t.child=r,n}function sE(e,t){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),K8(e.return,t)}function T2(e,t,r,n,i,o){var s=e.memoizedState;s===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:i,lastEffect:o}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=n,s.tail=r,s.tailMode=i,s.lastEffect=o)}function aE(e,t,r){var n=t.pendingProps,i=n.revealOrder,o=n.tail;if(ti(e,t,n.children,r),n=_r.current,(n&2)!==0)n=n&1|2,t.flags|=64;else{if(e!==null&&(e.flags&64)!==0)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&sE(e,r);else if(e.tag===19)sE(e,r);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}n&=1}if(br(_r,n),(t.mode&2)===0)t.memoizedState=null;else switch(i){case"forwards":for(r=t.child,i=null;r!==null;)e=r.alternate,e!==null&&F0(e)===null&&(i=r),r=r.sibling;r=i,r===null?(i=t.child,t.child=null):(i=r.sibling,r.sibling=null),T2(t,!1,i,r,o,t.lastEffect);break;case"backwards":for(r=null,i=t.child,t.child=null;i!==null;){if(e=i.alternate,e!==null&&F0(e)===null){t.child=i;break}e=i.sibling,i.sibling=r,r=i,i=e}T2(t,!0,r,null,o,t.lastEffect);break;case"together":T2(t,!1,null,null,void 0,t.lastEffect);break;default:t.memoizedState=null}return t.child}function Fs(e,t,r){if(e!==null&&(t.dependencies=e.dependencies),dp|=t.lanes,(r&t.childLanes)!==0){if(e!==null&&t.child!==e.child)throw Error(Te(153));if(t.child!==null){for(e=t.child,r=Qa(e,e.pendingProps),t.child=r,r.return=t;e.sibling!==null;)e=e.sibling,r=r.sibling=Qa(e,e.pendingProps),r.return=t;r.sibling=null}return t.child}return null}var hP,mb,fP,dP;hP=function(e,t){for(var r=t.child;r!==null;){if(r.tag===5||r.tag===6)e.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};mb=function(){};fP=function(e,t,r,n){var i=e.memoizedProps;if(i!==n){e=t.stateNode,Vl(Wo.current);var o=null;switch(r){case"input":i=$_(e,i),n=$_(e,n),o=[];break;case"option":i=V_(e,i),n=V_(e,n),o=[];break;case"select":i=fr({},i,{value:void 0}),n=fr({},n,{value:void 0}),o=[];break;case"textarea":i=X_(e,i),n=X_(e,n),o=[];break;default:typeof i.onClick!="function"&&typeof n.onClick=="function"&&(e.onclick=N0)}K_(r,n);var s;r=null;for(u in i)if(!n.hasOwnProperty(u)&&i.hasOwnProperty(u)&&i[u]!=null)if(u==="style"){var a=i[u];for(s in a)a.hasOwnProperty(s)&&(r||(r={}),r[s]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(_d.hasOwnProperty(u)?o||(o=[]):(o=o||[]).push(u,null));for(u in n){var l=n[u];if(a=i!=null?i[u]:void 0,n.hasOwnProperty(u)&&l!==a&&(l!=null||a!=null))if(u==="style")if(a){for(s in a)!a.hasOwnProperty(s)||l&&l.hasOwnProperty(s)||(r||(r={}),r[s]="");for(s in l)l.hasOwnProperty(s)&&a[s]!==l[s]&&(r||(r={}),r[s]=l[s])}else r||(o||(o=[]),o.push(u,r)),r=l;else u==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(o=o||[]).push(u,l)):u==="children"?typeof l!="string"&&typeof l!="number"||(o=o||[]).push(u,""+l):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(_d.hasOwnProperty(u)?(l!=null&&u==="onScroll"&&nr("scroll",e),o||a===l||(o=[])):typeof l=="object"&&l!==null&&l.$$typeof===zx?l.toString():(o=o||[]).push(u,l))}r&&(o=o||[]).push("style",r);var u=o;(t.updateQueue=u)&&(t.flags|=4)}};dP=function(e,t,r,n){r!==n&&(t.flags|=4)};function Cf(e,t){if(!Yo)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:n.sibling=null}}function KL(e,t,r){var n=t.pendingProps;switch(t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return null;case 1:return ci(t.type)&&A0(),null;case 3:return th(),lr(ui),lr(Dn),f3(),n=t.stateNode,n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(e===null||e.child===null)&&(Gm(t)?t.flags|=4:n.hydrate||(t.flags|=256)),mb(t),null;case 5:h3(t);var i=Vl(Rd.current);if(r=t.type,e!==null&&t.stateNode!=null)fP(e,t,r,n,i),e.ref!==t.ref&&(t.flags|=128);else{if(!n){if(t.stateNode===null)throw Error(Te(166));return null}if(e=Vl(Wo.current),Gm(t)){n=t.stateNode,r=t.type;var o=t.memoizedProps;switch(n[Pa]=t,n[P0]=o,r){case"dialog":nr("cancel",n),nr("close",n);break;case"iframe":case"object":case"embed":nr("load",n);break;case"video":case"audio":for(e=0;e<Hf.length;e++)nr(Hf[e],n);break;case"source":nr("error",n);break;case"img":case"image":case"link":nr("error",n),nr("load",n);break;case"details":nr("toggle",n);break;case"input":aS(n,o),nr("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!o.multiple},nr("invalid",n);break;case"textarea":uS(n,o),nr("invalid",n)}K_(r,o),e=null;for(var s in o)o.hasOwnProperty(s)&&(i=o[s],s==="children"?typeof i=="string"?n.textContent!==i&&(e=["children",i]):typeof i=="number"&&n.textContent!==""+i&&(e=["children",""+i]):_d.hasOwnProperty(s)&&i!=null&&s==="onScroll"&&nr("scroll",n));switch(r){case"input":Lm(n),lS(n,o,!0);break;case"textarea":Lm(n),cS(n);break;case"select":case"option":break;default:typeof o.onClick=="function"&&(n.onclick=N0)}n=e,t.updateQueue=n,n!==null&&(t.flags|=4)}else{switch(s=i.nodeType===9?i:i.ownerDocument,e===W_.html&&(e=s8(r)),e===W_.html?r==="script"?(e=s.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof n.is=="string"?e=s.createElement(r,{is:n.is}):(e=s.createElement(r),r==="select"&&(s=e,n.multiple?s.multiple=!0:n.size&&(s.size=n.size))):e=s.createElementNS(e,r),e[Pa]=t,e[P0]=n,hP(e,t,!1,!1),t.stateNode=e,s=q_(r,n),r){case"dialog":nr("cancel",e),nr("close",e),i=n;break;case"iframe":case"object":case"embed":nr("load",e),i=n;break;case"video":case"audio":for(i=0;i<Hf.length;i++)nr(Hf[i],e);i=n;break;case"source":nr("error",e),i=n;break;case"img":case"image":case"link":nr("error",e),nr("load",e),i=n;break;case"details":nr("toggle",e),i=n;break;case"input":aS(e,n),i=$_(e,n),nr("invalid",e);break;case"option":i=V_(e,n);break;case"select":e._wrapperState={wasMultiple:!!n.multiple},i=fr({},n,{value:void 0}),nr("invalid",e);break;case"textarea":uS(e,n),i=X_(e,n),nr("invalid",e);break;default:i=n}K_(r,i);var a=i;for(o in a)if(a.hasOwnProperty(o)){var l=a[o];o==="style"?u8(e,l):o==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&a8(e,l)):o==="children"?typeof l=="string"?(r!=="textarea"||l!=="")&&bd(e,l):typeof l=="number"&&bd(e,""+l):o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&o!=="autoFocus"&&(_d.hasOwnProperty(o)?l!=null&&o==="onScroll"&&nr("scroll",e):l!=null&&Bx(e,o,l,s))}switch(r){case"input":Lm(e),lS(e,n,!1);break;case"textarea":Lm(e),cS(e);break;case"option":n.value!=null&&e.setAttribute("value",""+Ka(n.value));break;case"select":e.multiple=!!n.multiple,o=n.value,o!=null?Mc(e,!!n.multiple,o,!1):n.defaultValue!=null&&Mc(e,!!n.multiple,n.defaultValue,!0);break;default:typeof i.onClick=="function"&&(e.onclick=N0)}G8(r,n)&&(t.flags|=4)}t.ref!==null&&(t.flags|=128)}return null;case 6:if(e&&t.stateNode!=null)dP(e,t,e.memoizedProps,n);else{if(typeof n!="string"&&t.stateNode===null)throw Error(Te(166));r=Vl(Rd.current),Vl(Wo.current),Gm(t)?(n=t.stateNode,r=t.memoizedProps,n[Pa]=t,n.nodeValue!==r&&(t.flags|=4)):(n=(r.nodeType===9?r:r.ownerDocument).createTextNode(n),n[Pa]=t,t.stateNode=n)}return null;case 13:return lr(_r),n=t.memoizedState,(t.flags&64)!==0?(t.lanes=r,t):(n=n!==null,r=!1,e===null?t.memoizedProps.fallback!==void 0&&Gm(t):r=e.memoizedState!==null,n&&!r&&(t.mode&2)!==0&&(e===null&&t.memoizedProps.unstable_avoidThisFallback!==!0||(_r.current&1)!==0?wn===0&&(wn=3):((wn===0||wn===3)&&(wn=4),Vn===null||(dp&134217727)===0&&(vh&134217727)===0||Hc(Vn,Bn))),(n||r)&&(t.flags|=4),null);case 4:return th(),mb(t),e===null&&M8(t.stateNode.containerInfo),null;case 10:return u3(t),null;case 17:return ci(t.type)&&A0(),null;case 19:if(lr(_r),n=t.memoizedState,n===null)return null;if(o=(t.flags&64)!==0,s=n.rendering,s===null)if(o)Cf(n,!1);else{if(wn!==0||e!==null&&(e.flags&64)!==0)for(e=t.child;e!==null;){if(s=F0(e),s!==null){for(t.flags|=64,Cf(n,!1),o=s.updateQueue,o!==null&&(t.updateQueue=o,t.flags|=4),n.lastEffect===null&&(t.firstEffect=null),t.lastEffect=n.lastEffect,n=r,r=t.child;r!==null;)o=r,e=n,o.flags&=2,o.nextEffect=null,o.firstEffect=null,o.lastEffect=null,s=o.alternate,s===null?(o.childLanes=0,o.lanes=e,o.child=null,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=s.childLanes,o.lanes=s.lanes,o.child=s.child,o.memoizedProps=s.memoizedProps,o.memoizedState=s.memoizedState,o.updateQueue=s.updateQueue,o.type=s.type,e=s.dependencies,o.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return br(_r,_r.current&1|2),t.child}e=e.sibling}n.tail!==null&&Fn()>wb&&(t.flags|=64,o=!0,Cf(n,!1),t.lanes=33554432)}else{if(!o)if(e=F0(s),e!==null){if(t.flags|=64,o=!0,r=e.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),Cf(n,!0),n.tail===null&&n.tailMode==="hidden"&&!s.alternate&&!Yo)return t=t.lastEffect=n.lastEffect,t!==null&&(t.nextEffect=null),null}else 2*Fn()-n.renderingStartTime>wb&&r!==1073741824&&(t.flags|=64,o=!0,Cf(n,!1),t.lanes=33554432);n.isBackwards?(s.sibling=t.child,t.child=s):(r=n.last,r!==null?r.sibling=s:t.child=s,n.last=s)}return n.tail!==null?(r=n.tail,n.rendering=r,n.tail=r.sibling,n.lastEffect=t.lastEffect,n.renderingStartTime=Fn(),r.sibling=null,t=_r.current,br(_r,o?t&1|2:t&1),r):null;case 23:case 24:return x3(),e!==null&&e.memoizedState!==null!=(t.memoizedState!==null)&&n.mode!=="unstable-defer-without-hiding"&&(t.flags|=4),null}throw Error(Te(156,t.tag))}function qL(e){switch(e.tag){case 1:ci(e.type)&&A0();var t=e.flags;return t&4096?(e.flags=t&-4097|64,e):null;case 3:if(th(),lr(ui),lr(Dn),f3(),t=e.flags,(t&64)!==0)throw Error(Te(285));return e.flags=t&-4097|64,e;case 5:return h3(e),null;case 13:return lr(_r),t=e.flags,t&4096?(e.flags=t&-4097|64,e):null;case 19:return lr(_r),null;case 4:return th(),null;case 10:return u3(e),null;case 23:case 24:return x3(),null;default:return null}}function y3(e,t){try{var r="",n=t;do r+=A9(n),n=n.return;while(n);var i=r}catch(o){i=`
Error generating stack: `+o.message+`
`+o.stack}return{value:e,source:t,stack:i}}function vb(e,t){try{console.error(t.value)}catch(r){setTimeout(function(){throw r})}}var ZL=typeof WeakMap=="function"?WeakMap:Map;function pP(e,t,r){r=Fa(-1,r),r.tag=3,r.payload={element:null};var n=t.value;return r.callback=function(){H0||(H0=!0,xb=n),vb(e,t)},r}function mP(e,t,r){r=Fa(-1,r),r.tag=3;var n=e.type.getDerivedStateFromError;if(typeof n=="function"){var i=t.value;r.payload=function(){return vb(e,t),n(i)}}var o=e.stateNode;return o!==null&&typeof o.componentDidCatch=="function"&&(r.callback=function(){typeof n!="function"&&($o===null?$o=new Set([this]):$o.add(this),vb(e,t));var s=t.stack;this.componentDidCatch(t.value,{componentStack:s!==null?s:""})}),r}var JL=typeof WeakSet=="function"?WeakSet:Set;function lE(e){var t=e.ref;if(t!==null)if(typeof t=="function")try{t(null)}catch(r){Ga(e,r)}else t.current=null}function QL(e,t){switch(t.tag){case 0:case 11:case 15:case 22:return;case 1:if(t.flags&256&&e!==null){var r=e.memoizedProps,n=e.memoizedState;e=t.stateNode,t=e.getSnapshotBeforeUpdate(t.elementType===t.type?r:po(t.type,r),n),e.__reactInternalSnapshotBeforeUpdate=t}return;case 3:t.flags&256&&o3(t.stateNode.containerInfo);return;case 5:case 6:case 4:case 17:return}throw Error(Te(163))}function eU(e,t,r){switch(r.tag){case 0:case 11:case 15:case 22:if(t=r.updateQueue,t=t!==null?t.lastEffect:null,t!==null){e=t=t.next;do{if((e.tag&3)===3){var n=e.create;e.destroy=n()}e=e.next}while(e!==t)}if(t=r.updateQueue,t=t!==null?t.lastEffect:null,t!==null){e=t=t.next;do{var i=e;n=i.next,i=i.tag,(i&4)!==0&&(i&1)!==0&&(SP(r,e),lU(r,e)),e=n}while(e!==t)}return;case 1:e=r.stateNode,r.flags&4&&(t===null?e.componentDidMount():(n=r.elementType===r.type?t.memoizedProps:po(r.type,t.memoizedProps),e.componentDidUpdate(n,t.memoizedState,e.__reactInternalSnapshotBeforeUpdate))),t=r.updateQueue,t!==null&&HS(r,t,e);return;case 3:if(t=r.updateQueue,t!==null){if(e=null,r.child!==null)switch(r.child.tag){case 5:e=r.child.stateNode;break;case 1:e=r.child.stateNode}HS(r,t,e)}return;case 5:e=r.stateNode,t===null&&r.flags&4&&G8(r.type,r.memoizedProps)&&e.focus();return;case 6:return;case 4:return;case 12:return;case 13:r.memoizedState===null&&(r=r.alternate,r!==null&&(r=r.memoizedState,r!==null&&(r=r.dehydrated,r!==null&&_8(r))));return;case 19:case 17:case 20:case 21:case 23:case 24:return}throw Error(Te(163))}function uE(e,t){for(var r=e;;){if(r.tag===5){var n=r.stateNode;if(t)n=n.style,typeof n.setProperty=="function"?n.setProperty("display","none","important"):n.display="none";else{n=r.stateNode;var i=r.memoizedProps.style;i=i!=null&&i.hasOwnProperty("display")?i.display:null,n.style.display=l8("display",i)}}else if(r.tag===6)r.stateNode.nodeValue=t?"":r.memoizedProps;else if((r.tag!==23&&r.tag!==24||r.memoizedState===null||r===e)&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===e)break;for(;r.sibling===null;){if(r.return===null||r.return===e)return;r=r.return}r.sibling.return=r.return,r=r.sibling}}function cE(e,t){if(ql&&typeof ql.onCommitFiberUnmount=="function")try{ql.onCommitFiberUnmount(s3,t)}catch{}switch(t.tag){case 0:case 11:case 14:case 15:case 22:if(e=t.updateQueue,e!==null&&(e=e.lastEffect,e!==null)){var r=e=e.next;do{var n=r,i=n.destroy;if(n=n.tag,i!==void 0)if((n&4)!==0)SP(t,r);else{n=t;try{i()}catch(o){Ga(n,o)}}r=r.next}while(r!==e)}break;case 1:if(lE(t),e=t.stateNode,typeof e.componentWillUnmount=="function")try{e.props=t.memoizedProps,e.state=t.memoizedState,e.componentWillUnmount()}catch(o){Ga(t,o)}break;case 5:lE(t);break;case 4:vP(e,t)}}function hE(e){e.alternate=null,e.child=null,e.dependencies=null,e.firstEffect=null,e.lastEffect=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.return=null,e.updateQueue=null}function fE(e){return e.tag===5||e.tag===3||e.tag===4}function dE(e){e:{for(var t=e.return;t!==null;){if(fE(t))break e;t=t.return}throw Error(Te(160))}var r=t;switch(t=r.stateNode,r.tag){case 5:var n=!1;break;case 3:t=t.containerInfo,n=!0;break;case 4:t=t.containerInfo,n=!0;break;default:throw Error(Te(161))}r.flags&16&&(bd(t,""),r.flags&=-17);e:t:for(r=e;;){for(;r.sibling===null;){if(r.return===null||fE(r.return)){r=null;break e}r=r.return}for(r.sibling.return=r.return,r=r.sibling;r.tag!==5&&r.tag!==6&&r.tag!==18;){if(r.flags&2||r.child===null||r.tag===4)continue t;r.child.return=r,r=r.child}if(!(r.flags&2)){r=r.stateNode;break e}}n?gb(e,r,t):yb(e,r,t)}function gb(e,t,r){var n=e.tag,i=n===5||n===6;if(i)e=i?e.stateNode:e.stateNode.instance,t?r.nodeType===8?r.parentNode.insertBefore(e,t):r.insertBefore(e,t):(r.nodeType===8?(t=r.parentNode,t.insertBefore(e,r)):(t=r,t.appendChild(e)),r=r._reactRootContainer,r!=null||t.onclick!==null||(t.onclick=N0));else if(n!==4&&(e=e.child,e!==null))for(gb(e,t,r),e=e.sibling;e!==null;)gb(e,t,r),e=e.sibling}function yb(e,t,r){var n=e.tag,i=n===5||n===6;if(i)e=i?e.stateNode:e.stateNode.instance,t?r.insertBefore(e,t):r.appendChild(e);else if(n!==4&&(e=e.child,e!==null))for(yb(e,t,r),e=e.sibling;e!==null;)yb(e,t,r),e=e.sibling}function vP(e,t){for(var r=t,n=!1,i,o;;){if(!n){n=r.return;e:for(;;){if(n===null)throw Error(Te(160));switch(i=n.stateNode,n.tag){case 5:o=!1;break e;case 3:i=i.containerInfo,o=!0;break e;case 4:i=i.containerInfo,o=!0;break e}n=n.return}n=!0}if(r.tag===5||r.tag===6){e:for(var s=e,a=r,l=a;;)if(cE(s,l),l.child!==null&&l.tag!==4)l.child.return=l,l=l.child;else{if(l===a)break e;for(;l.sibling===null;){if(l.return===null||l.return===a)break e;l=l.return}l.sibling.return=l.return,l=l.sibling}o?(s=i,a=r.stateNode,s.nodeType===8?s.parentNode.removeChild(a):s.removeChild(a)):i.removeChild(r.stateNode)}else if(r.tag===4){if(r.child!==null){i=r.stateNode.containerInfo,o=!0,r.child.return=r,r=r.child;continue}}else if(cE(e,r),r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return;r=r.return,r.tag===4&&(n=!1)}r.sibling.return=r.return,r=r.sibling}}function S2(e,t){switch(t.tag){case 0:case 11:case 14:case 15:case 22:var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var n=r=r.next;do(n.tag&3)===3&&(e=n.destroy,n.destroy=void 0,e!==void 0&&e()),n=n.next;while(n!==r)}return;case 1:return;case 5:if(r=t.stateNode,r!=null){n=t.memoizedProps;var i=e!==null?e.memoizedProps:n;e=t.type;var o=t.updateQueue;if(t.updateQueue=null,o!==null){for(r[P0]=n,e==="input"&&n.type==="radio"&&n.name!=null&&i8(r,n),q_(e,i),t=q_(e,n),i=0;i<o.length;i+=2){var s=o[i],a=o[i+1];s==="style"?u8(r,a):s==="dangerouslySetInnerHTML"?a8(r,a):s==="children"?bd(r,a):Bx(r,s,a,t)}switch(e){case"input":H_(r,n);break;case"textarea":o8(r,n);break;case"select":e=r._wrapperState.wasMultiple,r._wrapperState.wasMultiple=!!n.multiple,o=n.value,o!=null?Mc(r,!!n.multiple,o,!1):e!==!!n.multiple&&(n.defaultValue!=null?Mc(r,!!n.multiple,n.defaultValue,!0):Mc(r,!!n.multiple,n.multiple?[]:"",!1))}}}return;case 6:if(t.stateNode===null)throw Error(Te(162));t.stateNode.nodeValue=t.memoizedProps;return;case 3:r=t.stateNode,r.hydrate&&(r.hydrate=!1,_8(r.containerInfo));return;case 12:return;case 13:t.memoizedState!==null&&(w3=Fn(),uE(t.child,!0)),pE(t);return;case 19:pE(t);return;case 17:return;case 23:case 24:uE(t,t.memoizedState!==null);return}throw Error(Te(163))}function pE(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var r=e.stateNode;r===null&&(r=e.stateNode=new JL),t.forEach(function(n){var i=hU.bind(null,e,n);r.has(n)||(r.add(n),n.then(i,i))})}}function tU(e,t){return e!==null&&(e=e.memoizedState,e===null||e.dehydrated!==null)?(t=t.memoizedState,t!==null&&t.dehydrated===null):!1}var rU=Math.ceil,$0=bu.ReactCurrentDispatcher,_3=bu.ReactCurrentOwner,at=0,Vn=null,Wr=null,Bn=0,ou=0,_b=ul(0),wn=0,jg=null,mh=0,dp=0,vh=0,b3=0,bb=null,w3=0,wb=1/0;function gh(){wb=Fn()+500}var Ue=null,H0=!1,xb=null,$o=null,Ja=!1,id=null,zf=90,Tb=[],Sb=[],Ds=null,od=0,Eb=null,Xv=-1,As=0,Wv=0,sd=null,Yv=!1;function Ii(){return(at&48)!==0?Fn():Xv!==-1?Xv:Xv=Fn()}function Ba(e){if(e=e.mode,(e&2)===0)return 1;if((e&4)===0)return eh()===99?1:2;if(As===0&&(As=mh),HL.transition!==0){Wv!==0&&(Wv=bb!==null?bb.pendingLanes:0),e=As;var t=4186112&~Wv;return t&=-t,t===0&&(e=4186112&~e,t=e&-e,t===0&&(t=8192)),t}return e=eh(),(at&4)!==0&&e===98?e=C0(12,As):(e=X9(e),e=C0(e,As)),e}function Da(e,t,r){if(50<od)throw od=0,Eb=null,Error(Te(185));if(e=$g(e,t),e===null)return null;Lg(e,t,r),e===Vn&&(vh|=t,wn===4&&Hc(e,Bn));var n=eh();t===1?(at&8)!==0&&(at&48)===0?Cb(e):(qi(e,r),at===0&&(gh(),as())):((at&4)===0||n!==98&&n!==99||(Ds===null?Ds=new Set([e]):Ds.add(e)),qi(e,r)),bb=e}function $g(e,t){e.lanes|=t;var r=e.alternate;for(r!==null&&(r.lanes|=t),r=e,e=e.return;e!==null;)e.childLanes|=t,r=e.alternate,r!==null&&(r.childLanes|=t),r=e,e=e.return;return r.tag===3?r.stateNode:null}function qi(e,t){for(var r=e.callbackNode,n=e.suspendedLanes,i=e.pingedLanes,o=e.expirationTimes,s=e.pendingLanes;0<s;){var a=31-qa(s),l=1<<a,u=o[a];if(u===-1){if((l&n)===0||(l&i)!==0){u=t,vc(l);var c=Qt;o[a]=10<=c?u+250:6<=c?u+5e3:-1}}else u<=t&&(e.expiredLanes|=l);s&=~l}if(n=Sd(e,e===Vn?Bn:0),t=Qt,n===0)r!==null&&(r!==_2&&ab(r),e.callbackNode=null,e.callbackPriority=0);else{if(r!==null){if(e.callbackPriority===t)return;r!==_2&&ab(r)}t===15?(r=Cb.bind(null,e),Ps===null?(Ps=[r],Vv=a3(Dg,Y8)):Ps.push(r),r=_2):t===14?r=Nd(99,Cb.bind(null,e)):(r=W9(t),r=Nd(r,gP.bind(null,e))),e.callbackPriority=t,e.callbackNode=r}}function gP(e){if(Xv=-1,Wv=As=0,(at&48)!==0)throw Error(Te(327));var t=e.callbackNode;if(cl()&&e.callbackNode!==t)return null;var r=Sd(e,e===Vn?Bn:0);if(r===0)return null;var n=r,i=at;at|=16;var o=wP();(Vn!==e||Bn!==n)&&(gh(),zc(e,n));do try{oU();break}catch(a){bP(e,a)}while(1);if(l3(),$0.current=o,at=i,Wr!==null?n=0:(Vn=null,Bn=0,n=wn),(mh&vh)!==0)zc(e,0);else if(n!==0){if(n===2&&(at|=64,e.hydrate&&(e.hydrate=!1,o3(e.containerInfo)),r=C8(e),r!==0&&(n=Vf(e,r))),n===1)throw t=jg,zc(e,0),Hc(e,r),qi(e,Fn()),t;switch(e.finishedWork=e.current.alternate,e.finishedLanes=r,n){case 0:case 1:throw Error(Te(345));case 2:Fl(e);break;case 3:if(Hc(e,r),(r&62914560)===r&&(n=w3+500-Fn(),10<n)){if(Sd(e,0)!==0)break;if(i=e.suspendedLanes,(i&r)!==r){Ii(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=US(Fl.bind(null,e),n);break}Fl(e);break;case 4:if(Hc(e,r),(r&4186112)===r)break;for(n=e.eventTimes,i=-1;0<r;){var s=31-qa(r);o=1<<s,s=n[s],s>i&&(i=s),r&=~o}if(r=i,r=Fn()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*rU(r/1960))-r,10<r){e.timeoutHandle=US(Fl.bind(null,e),r);break}Fl(e);break;case 5:Fl(e);break;default:throw Error(Te(329))}}return qi(e,Fn()),e.callbackNode===t?gP.bind(null,e):null}function Hc(e,t){for(t&=~b3,t&=~vh,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var r=31-qa(t),n=1<<r;e[r]=-1,t&=~n}}function Cb(e){if((at&48)!==0)throw Error(Te(327));if(cl(),e===Vn&&(e.expiredLanes&Bn)!==0){var t=Bn,r=Vf(e,t);(mh&vh)!==0&&(t=Sd(e,t),r=Vf(e,t))}else t=Sd(e,0),r=Vf(e,t);if(e.tag!==0&&r===2&&(at|=64,e.hydrate&&(e.hydrate=!1,o3(e.containerInfo)),t=C8(e),t!==0&&(r=Vf(e,t))),r===1)throw r=jg,zc(e,0),Hc(e,t),qi(e,Fn()),r;return e.finishedWork=e.current.alternate,e.finishedLanes=t,Fl(e),qi(e,Fn()),null}function nU(){if(Ds!==null){var e=Ds;Ds=null,e.forEach(function(t){t.expiredLanes|=24&t.pendingLanes,qi(t,Fn())})}as()}function yP(e,t){var r=at;at|=1;try{return e(t)}finally{at=r,at===0&&(gh(),as())}}function _P(e,t){var r=at;at&=-2,at|=8;try{return e(t)}finally{at=r,at===0&&(gh(),as())}}function $m(e,t){br(_b,ou),ou|=t,mh|=t}function x3(){ou=_b.current,lr(_b)}function zc(e,t){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(r!==-1&&(e.timeoutHandle=-1,ML(r)),Wr!==null)for(r=Wr.return;r!==null;){var n=r;switch(n.tag){case 1:n=n.type.childContextTypes,n!=null&&A0();break;case 3:th(),lr(ui),lr(Dn),f3();break;case 5:h3(n);break;case 4:th();break;case 13:lr(_r);break;case 19:lr(_r);break;case 10:u3(n);break;case 23:case 24:x3()}r=r.return}Vn=e,Wr=Qa(e.current,null),Bn=ou=mh=t,wn=0,jg=null,b3=vh=dp=0}function bP(e,t){do{var r=Wr;try{if(l3(),rd.current=j0,M0){for(var n=Rr.memoizedState;n!==null;){var i=n.queue;i!==null&&(i.pending=null),n=n.next}M0=!1}if(kd=0,_n=On=Rr=null,nd=!1,_3.current=null,r===null||r.return===null){wn=1,jg=t,Wr=null;break}e:{var o=e,s=r.return,a=r,l=t;if(t=Bn,a.flags|=2048,a.firstEffect=a.lastEffect=null,l!==null&&typeof l=="object"&&typeof l.then=="function"){var u=l;if((a.mode&2)===0){var c=a.alternate;c?(a.updateQueue=c.updateQueue,a.memoizedState=c.memoizedState,a.lanes=c.lanes):(a.updateQueue=null,a.memoizedState=null)}var f=(_r.current&1)!==0,p=s;do{var v;if(v=p.tag===13){var g=p.memoizedState;if(g!==null)v=g.dehydrated!==null;else{var b=p.memoizedProps;v=b.fallback===void 0?!1:b.unstable_avoidThisFallback!==!0?!0:!f}}if(v){var _=p.updateQueue;if(_===null){var w=new Set;w.add(u),p.updateQueue=w}else _.add(u);if((p.mode&2)===0){if(p.flags|=64,a.flags|=16384,a.flags&=-2981,a.tag===1)if(a.alternate===null)a.tag=17;else{var x=Fa(-1,1);x.tag=2,Ma(a,x)}a.lanes|=1;break e}l=void 0,a=t;var T=o.pingCache;if(T===null?(T=o.pingCache=new ZL,l=new Set,T.set(u,l)):(l=T.get(u),l===void 0&&(l=new Set,T.set(u,l))),!l.has(a)){l.add(a);var I=cU.bind(null,o,u,a);u.then(I,I)}p.flags|=4096,p.lanes=t;break e}p=p.return}while(p!==null);l=Error((Fc(a.type)||"A React component")+` suspended while rendering, but no fallback UI was specified.

Add a <Suspense fallback=...> component higher in the tree to provide a loading indicator or placeholder to display.`)}wn!==5&&(wn=2),l=y3(l,a),p=s;do{switch(p.tag){case 3:o=l,p.flags|=4096,t&=-t,p.lanes|=t;var R=pP(p,o,t);$S(p,R);break e;case 1:o=l;var E=p.type,O=p.stateNode;if((p.flags&64)===0&&(typeof E.getDerivedStateFromError=="function"||O!==null&&typeof O.componentDidCatch=="function"&&($o===null||!$o.has(O)))){p.flags|=4096,t&=-t,p.lanes|=t;var P=mP(p,o,t);$S(p,P);break e}}p=p.return}while(p!==null)}TP(r)}catch(N){t=N,Wr===r&&r!==null&&(Wr=r=r.return);continue}break}while(1)}function wP(){var e=$0.current;return $0.current=j0,e===null?j0:e}function Vf(e,t){var r=at;at|=16;var n=wP();Vn===e&&Bn===t||zc(e,t);do try{iU();break}catch(i){bP(e,i)}while(1);if(l3(),at=r,$0.current=n,Wr!==null)throw Error(Te(261));return Vn=null,Bn=0,wn}function iU(){for(;Wr!==null;)xP(Wr)}function oU(){for(;Wr!==null&&!GL();)xP(Wr)}function xP(e){var t=EP(e.alternate,e,ou);e.memoizedProps=e.pendingProps,t===null?TP(e):Wr=t,_3.current=null}function TP(e){var t=e;do{var r=t.alternate;if(e=t.return,(t.flags&2048)===0){if(r=KL(r,t,ou),r!==null){Wr=r;return}if(r=t,r.tag!==24&&r.tag!==23||r.memoizedState===null||(ou&1073741824)!==0||(r.mode&4)===0){for(var n=0,i=r.child;i!==null;)n|=i.lanes|i.childLanes,i=i.sibling;r.childLanes=n}e!==null&&(e.flags&2048)===0&&(e.firstEffect===null&&(e.firstEffect=t.firstEffect),t.lastEffect!==null&&(e.lastEffect!==null&&(e.lastEffect.nextEffect=t.firstEffect),e.lastEffect=t.lastEffect),1<t.flags&&(e.lastEffect!==null?e.lastEffect.nextEffect=t:e.firstEffect=t,e.lastEffect=t))}else{if(r=qL(t),r!==null){r.flags&=2047,Wr=r;return}e!==null&&(e.firstEffect=e.lastEffect=null,e.flags|=2048)}if(t=t.sibling,t!==null){Wr=t;return}Wr=t=e}while(t!==null);wn===0&&(wn=5)}function Fl(e){var t=eh();return iu(99,sU.bind(null,e,t)),null}function sU(e,t){do cl();while(id!==null);if((at&48)!==0)throw Error(Te(327));var r=e.finishedWork;if(r===null)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(Te(177));e.callbackNode=null;var n=r.lanes|r.childLanes,i=n,o=e.pendingLanes&~i;e.pendingLanes=i,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=i,e.mutableReadLanes&=i,e.entangledLanes&=i,i=e.entanglements;for(var s=e.eventTimes,a=e.expirationTimes;0<o;){var l=31-qa(o),u=1<<l;i[l]=0,s[l]=-1,a[l]=-1,o&=~u}if(Ds!==null&&(n&24)===0&&Ds.has(e)&&Ds.delete(e),e===Vn&&(Wr=Vn=null,Bn=0),1<r.flags?r.lastEffect!==null?(r.lastEffect.nextEffect=r,n=r.firstEffect):n=r:n=r.firstEffect,n!==null){if(i=at,at|=32,_3.current=null,v2=jv,s=NS(),rb(s)){if("selectionStart"in s)a={start:s.selectionStart,end:s.selectionEnd};else e:if(a=(a=s.ownerDocument)&&a.defaultView||window,(u=a.getSelection&&a.getSelection())&&u.rangeCount!==0){a=u.anchorNode,o=u.anchorOffset,l=u.focusNode,u=u.focusOffset;try{a.nodeType,l.nodeType}catch{a=null;break e}var c=0,f=-1,p=-1,v=0,g=0,b=s,_=null;t:for(;;){for(var w;b!==a||o!==0&&b.nodeType!==3||(f=c+o),b!==l||u!==0&&b.nodeType!==3||(p=c+u),b.nodeType===3&&(c+=b.nodeValue.length),(w=b.firstChild)!==null;)_=b,b=w;for(;;){if(b===s)break t;if(_===a&&++v===o&&(f=c),_===l&&++g===u&&(p=c),(w=b.nextSibling)!==null)break;b=_,_=b.parentNode}b=w}a=f===-1||p===-1?null:{start:f,end:p}}else a=null;a=a||{start:0,end:0}}else a=null;g2={focusedElem:s,selectionRange:a},jv=!1,sd=null,Yv=!1,Ue=n;do try{aU()}catch(N){if(Ue===null)throw Error(Te(330));Ga(Ue,N),Ue=Ue.nextEffect}while(Ue!==null);sd=null,Ue=n;do try{for(s=e;Ue!==null;){var x=Ue.flags;if(x&16&&bd(Ue.stateNode,""),x&128){var T=Ue.alternate;if(T!==null){var I=T.ref;I!==null&&(typeof I=="function"?I(null):I.current=null)}}switch(x&1038){case 2:dE(Ue),Ue.flags&=-3;break;case 6:dE(Ue),Ue.flags&=-3,S2(Ue.alternate,Ue);break;case 1024:Ue.flags&=-1025;break;case 1028:Ue.flags&=-1025,S2(Ue.alternate,Ue);break;case 4:S2(Ue.alternate,Ue);break;case 8:a=Ue,vP(s,a);var R=a.alternate;hE(a),R!==null&&hE(R)}Ue=Ue.nextEffect}}catch(N){if(Ue===null)throw Error(Te(330));Ga(Ue,N),Ue=Ue.nextEffect}while(Ue!==null);if(I=g2,T=NS(),x=I.focusedElem,s=I.selectionRange,T!==x&&x&&x.ownerDocument&&L8(x.ownerDocument.documentElement,x)){for(s!==null&&rb(x)&&(T=s.start,I=s.end,I===void 0&&(I=T),"selectionStart"in x?(x.selectionStart=T,x.selectionEnd=Math.min(I,x.value.length)):(I=(T=x.ownerDocument||document)&&T.defaultView||window,I.getSelection&&(I=I.getSelection(),a=x.textContent.length,R=Math.min(s.start,a),s=s.end===void 0?R:Math.min(s.end,a),!I.extend&&R>s&&(a=s,s=R,R=a),a=IS(x,R),o=IS(x,s),a&&o&&(I.rangeCount!==1||I.anchorNode!==a.node||I.anchorOffset!==a.offset||I.focusNode!==o.node||I.focusOffset!==o.offset)&&(T=T.createRange(),T.setStart(a.node,a.offset),I.removeAllRanges(),R>s?(I.addRange(T),I.extend(o.node,o.offset)):(T.setEnd(o.node,o.offset),I.addRange(T)))))),T=[],I=x;I=I.parentNode;)I.nodeType===1&&T.push({element:I,left:I.scrollLeft,top:I.scrollTop});for(typeof x.focus=="function"&&x.focus(),x=0;x<T.length;x++)I=T[x],I.element.scrollLeft=I.left,I.element.scrollTop=I.top}jv=!!v2,g2=v2=null,e.current=r,Ue=n;do try{for(x=e;Ue!==null;){var E=Ue.flags;if(E&36&&eU(x,Ue.alternate,Ue),E&128){T=void 0;var O=Ue.ref;if(O!==null){var P=Ue.stateNode;switch(Ue.tag){case 5:T=P;break;default:T=P}typeof O=="function"?O(T):O.current=T}}Ue=Ue.nextEffect}}catch(N){if(Ue===null)throw Error(Te(330));Ga(Ue,N),Ue=Ue.nextEffect}while(Ue!==null);Ue=null,$L(),at=i}else e.current=r;if(Ja)Ja=!1,id=e,zf=t;else for(Ue=n;Ue!==null;)t=Ue.nextEffect,Ue.nextEffect=null,Ue.flags&8&&(E=Ue,E.sibling=null,E.stateNode=null),Ue=t;if(n=e.pendingLanes,n===0&&($o=null),n===1?e===Eb?od++:(od=0,Eb=e):od=0,r=r.stateNode,ql&&typeof ql.onCommitFiberRoot=="function")try{ql.onCommitFiberRoot(s3,r,void 0,(r.current.flags&64)===64)}catch{}if(qi(e,Fn()),H0)throw H0=!1,e=xb,xb=null,e;return(at&8)!==0||as(),null}function aU(){for(;Ue!==null;){var e=Ue.alternate;Yv||sd===null||((Ue.flags&8)!==0?dS(Ue,sd)&&(Yv=!0):Ue.tag===13&&tU(e,Ue)&&dS(Ue,sd)&&(Yv=!0));var t=Ue.flags;(t&256)!==0&&QL(e,Ue),(t&512)===0||Ja||(Ja=!0,Nd(97,function(){return cl(),null})),Ue=Ue.nextEffect}}function cl(){if(zf!==90){var e=97<zf?97:zf;return zf=90,iu(e,uU)}return!1}function lU(e,t){Tb.push(t,e),Ja||(Ja=!0,Nd(97,function(){return cl(),null}))}function SP(e,t){Sb.push(t,e),Ja||(Ja=!0,Nd(97,function(){return cl(),null}))}function uU(){if(id===null)return!1;var e=id;if(id=null,(at&48)!==0)throw Error(Te(331));var t=at;at|=32;var r=Sb;Sb=[];for(var n=0;n<r.length;n+=2){var i=r[n],o=r[n+1],s=i.destroy;if(i.destroy=void 0,typeof s=="function")try{s()}catch(l){if(o===null)throw Error(Te(330));Ga(o,l)}}for(r=Tb,Tb=[],n=0;n<r.length;n+=2){i=r[n],o=r[n+1];try{var a=i.create;i.destroy=a()}catch(l){if(o===null)throw Error(Te(330));Ga(o,l)}}for(a=e.current.firstEffect;a!==null;)e=a.nextEffect,a.nextEffect=null,a.flags&8&&(a.sibling=null,a.stateNode=null),a=e;return at=t,as(),!0}function mE(e,t,r){t=y3(r,t),t=pP(e,t,1),Ma(e,t),t=Ii(),e=$g(e,1),e!==null&&(Lg(e,1,t),qi(e,t))}function Ga(e,t){if(e.tag===3)mE(e,e,t);else for(var r=e.return;r!==null;){if(r.tag===3){mE(r,e,t);break}else if(r.tag===1){var n=r.stateNode;if(typeof r.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&($o===null||!$o.has(n))){e=y3(t,e);var i=mP(r,e,1);if(Ma(r,i),i=Ii(),r=$g(r,1),r!==null)Lg(r,1,i),qi(r,i);else if(typeof n.componentDidCatch=="function"&&($o===null||!$o.has(n)))try{n.componentDidCatch(t,e)}catch{}break}}r=r.return}}function cU(e,t,r){var n=e.pingCache;n!==null&&n.delete(t),t=Ii(),e.pingedLanes|=e.suspendedLanes&r,Vn===e&&(Bn&r)===r&&(wn===4||wn===3&&(Bn&62914560)===Bn&&500>Fn()-w3?zc(e,0):b3|=r),qi(e,t)}function hU(e,t){var r=e.stateNode;r!==null&&r.delete(t),t=0,t===0&&(t=e.mode,(t&2)===0?t=1:(t&4)===0?t=eh()===99?1:2:(As===0&&(As=mh),t=gc(62914560&~As),t===0&&(t=4194304))),r=Ii(),e=$g(e,t),e!==null&&(Lg(e,t,r),qi(e,r))}var EP;EP=function(e,t,r){var n=t.lanes;if(e!==null)if(e.memoizedProps!==t.pendingProps||ui.current)go=!0;else if((r&n)!==0)go=(e.flags&16384)!==0;else{switch(go=!1,t.tag){case 3:tE(t),w2();break;case 5:XS(t);break;case 1:ci(t.type)&&zv(t);break;case 4:cb(t,t.stateNode.containerInfo);break;case 10:n=t.memoizedProps.value;var i=t.type._context;br(R0,i._currentValue),i._currentValue=n;break;case 13:if(t.memoizedState!==null)return(r&t.child.childLanes)!==0?rE(e,t,r):(br(_r,_r.current&1),t=Fs(e,t,r),t!==null?t.sibling:null);br(_r,_r.current&1);break;case 19:if(n=(r&t.childLanes)!==0,(e.flags&64)!==0){if(n)return aE(e,t,r);t.flags|=64}if(i=t.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),br(_r,_r.current),n)break;return null;case 23:case 24:return t.lanes=0,x2(e,t,r)}return Fs(e,t,r)}else go=!1;switch(t.lanes=0,t.tag){case 2:if(n=t.type,e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2),e=t.pendingProps,i=Qc(t,Dn.current),jc(t,r),i=p3(null,t,n,e,i,r),t.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0){if(t.tag=1,t.memoizedState=null,t.updateQueue=null,ci(n)){var o=!0;zv(t)}else o=!1;t.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,c3(t);var s=n.getDerivedStateFromProps;typeof s=="function"&&L0(t,n,s,e),i.updater=Gg,t.stateNode=i,i._reactInternals=t,ub(t,n,e,r),t=pb(null,t,n,!0,o,r)}else t.tag=0,ti(null,t,i,r),t=t.child;return t;case 16:i=t.elementType;e:{switch(e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2),e=t.pendingProps,o=i._init,i=o(i._payload),t.type=i,o=t.tag=dU(i),e=po(i,e),o){case 0:t=db(null,t,i,e,r);break e;case 1:t=eE(null,t,i,e,r);break e;case 11:t=JS(null,t,i,e,r);break e;case 14:t=QS(null,t,i,po(i.type,e),n,r);break e}throw Error(Te(306,i,""))}return t;case 0:return n=t.type,i=t.pendingProps,i=t.elementType===n?i:po(n,i),db(e,t,n,i,r);case 1:return n=t.type,i=t.pendingProps,i=t.elementType===n?i:po(n,i),eE(e,t,n,i,r);case 3:if(tE(t),n=t.updateQueue,e===null||n===null)throw Error(Te(282));if(n=t.pendingProps,i=t.memoizedState,i=i!==null?i.element:null,q8(e,t),Pd(t,n,null,r),n=t.memoizedState.element,n===i)w2(),t=Fs(e,t,r);else{if(i=t.stateNode,(o=i.hydrate)&&(Aa=Gc(t.stateNode.containerInfo.firstChild),Us=t,o=Yo=!0),o){if(e=i.mutableSourceEagerHydrationData,e!=null)for(i=0;i<e.length;i+=2)o=e[i],o._workInProgressVersionPrimary=e[i+1],$c.push(o);for(r=eP(t,null,n,r),t.child=r;r;)r.flags=r.flags&-3|1024,r=r.sibling}else ti(e,t,n,r),w2();t=t.child}return t;case 5:return XS(t),e===null&&hb(t),n=t.type,i=t.pendingProps,o=e!==null?e.memoizedProps:null,s=i.children,ob(n,i)?s=null:o!==null&&ob(n,o)&&(t.flags|=16),cP(e,t),ti(e,t,s,r),t.child;case 6:return e===null&&hb(t),null;case 13:return rE(e,t,r);case 4:return cb(t,t.stateNode.containerInfo),n=t.pendingProps,e===null?t.child=U0(t,null,n,r):ti(e,t,n,r),t.child;case 11:return n=t.type,i=t.pendingProps,i=t.elementType===n?i:po(n,i),JS(e,t,n,i,r);case 7:return ti(e,t,t.pendingProps,r),t.child;case 8:return ti(e,t,t.pendingProps.children,r),t.child;case 12:return ti(e,t,t.pendingProps.children,r),t.child;case 10:e:{n=t.type._context,i=t.pendingProps,s=t.memoizedProps,o=i.value;var a=t.type._context;if(br(R0,a._currentValue),a._currentValue=o,s!==null)if(a=s.value,o=Gi(a,o)?0:(typeof n._calculateChangedBits=="function"?n._calculateChangedBits(a,o):1073741823)|0,o===0){if(s.children===i.children&&!ui.current){t=Fs(e,t,r);break e}}else for(a=t.child,a!==null&&(a.return=t);a!==null;){var l=a.dependencies;if(l!==null){s=a.child;for(var u=l.firstContext;u!==null;){if(u.context===n&&(u.observedBits&o)!==0){a.tag===1&&(u=Fa(-1,r&-r),u.tag=2,Ma(a,u)),a.lanes|=r,u=a.alternate,u!==null&&(u.lanes|=r),K8(a.return,r),l.lanes|=r;break}u=u.next}}else s=a.tag===10&&a.type===t.type?null:a.child;if(s!==null)s.return=a;else for(s=a;s!==null;){if(s===t){s=null;break}if(a=s.sibling,a!==null){a.return=s.return,s=a;break}s=s.return}a=s}ti(e,t,i.children,r),t=t.child}return t;case 9:return i=t.type,o=t.pendingProps,n=o.children,jc(t,r),i=Ki(i,o.unstable_observedBits),n=n(i),t.flags|=1,ti(e,t,n,r),t.child;case 14:return i=t.type,o=po(i,t.pendingProps),o=po(i.type,o),QS(e,t,i,o,n,r);case 15:return uP(e,t,t.type,t.pendingProps,n,r);case 17:return n=t.type,i=t.pendingProps,i=t.elementType===n?i:po(n,i),e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2),t.tag=1,ci(n)?(e=!0,zv(t)):e=!1,jc(t,r),J8(t,n,i),ub(t,n,i,r),pb(null,t,n,!0,e,r);case 19:return aE(e,t,r);case 23:return x2(e,t,r);case 24:return x2(e,t,r)}throw Error(Te(156,t.tag))};function fU(e,t,r,n){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.flags=0,this.lastEffect=this.firstEffect=this.nextEffect=null,this.childLanes=this.lanes=0,this.alternate=null}function ji(e,t,r,n){return new fU(e,t,r,n)}function T3(e){return e=e.prototype,!(!e||!e.isReactComponent)}function dU(e){if(typeof e=="function")return T3(e)?1:0;if(e!=null){if(e=e.$$typeof,e===Rg)return 11;if(e===kg)return 14}return 2}function Qa(e,t){var r=e.alternate;return r===null?(r=ji(e.tag,t,e.key,e.mode),r.elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.nextEffect=null,r.firstEffect=null,r.lastEffect=null),r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function Kv(e,t,r,n,i,o){var s=2;if(n=e,typeof e=="function")T3(e)&&(s=1);else if(typeof e=="string")s=5;else e:switch(e){case Ea:return Vc(r.children,i,o,t);case t8:s=8,i|=16;break;case Dx:s=8,i|=1;break;case Kf:return e=ji(12,r,t,i|8),e.elementType=Kf,e.type=Kf,e.lanes=o,e;case qf:return e=ji(13,r,t,i),e.type=qf,e.elementType=qf,e.lanes=o,e;case x0:return e=ji(19,r,t,i),e.elementType=x0,e.lanes=o,e;case Vx:return S3(r,i,o,t);case j_:return e=ji(24,r,t,i),e.elementType=j_,e.lanes=o,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case Gx:s=10;break e;case jx:s=9;break e;case Rg:s=11;break e;case kg:s=14;break e;case $x:s=16,n=null;break e;case Hx:s=22;break e}throw Error(Te(130,e==null?e:typeof e,""))}return t=ji(s,r,t,i),t.elementType=e,t.type=n,t.lanes=o,t}function Vc(e,t,r,n){return e=ji(7,e,n,t),e.lanes=r,e}function S3(e,t,r,n){return e=ji(23,e,n,t),e.elementType=Vx,e.lanes=r,e}function E2(e,t,r){return e=ji(6,e,null,t),e.lanes=r,e}function C2(e,t,r){return t=ji(4,e.children!==null?e.children:[],e.key,t),t.lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function pU(e,t,r){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.pendingContext=this.context=null,this.hydrate=r,this.callbackNode=null,this.callbackPriority=0,this.eventTimes=u2(0),this.expirationTimes=u2(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=u2(0),this.mutableSourceEagerHydrationData=null}function mU(e,t,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:$l,key:n==null?null:""+n,children:e,containerInfo:t,implementation:r}}function z0(e,t,r,n){var i=t.current,o=Ii(),s=Ba(i);e:if(r){r=r._reactInternals;t:{if(wu(r)!==r||r.tag!==1)throw Error(Te(170));var a=r;do{switch(a.tag){case 3:a=a.stateNode.context;break t;case 1:if(ci(a.type)){a=a.stateNode.__reactInternalMemoizedMergedChildContext;break t}}a=a.return}while(a!==null);throw Error(Te(171))}if(r.tag===1){var l=r.type;if(ci(l)){r=$8(r,l,a);break e}}r=a}else r=Za;return t.context===null?t.context=r:t.pendingContext=r,t=Fa(o,s),t.payload={element:e},n=n===void 0?null:n,n!==null&&(t.callback=n),Ma(i,t),Da(i,s,o),s}function I2(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function vE(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var r=e.retryLane;e.retryLane=r!==0&&r<t?r:t}}function E3(e,t){vE(e,t),(e=e.alternate)&&vE(e,t)}function vU(){return null}function C3(e,t,r){var n=r!=null&&r.hydrationOptions!=null&&r.hydrationOptions.mutableSources||null;if(r=new pU(e,t,r!=null&&r.hydrate===!0),t=ji(3,null,null,t===2?7:t===1?3:0),r.current=t,t.stateNode=r,c3(t),e[ph]=r.current,M8(e.nodeType===8?e.parentNode:e),n)for(e=0;e<n.length;e++){t=n[e];var i=t._getVersion;i=i(t._source),r.mutableSourceEagerHydrationData==null?r.mutableSourceEagerHydrationData=[t,i]:r.mutableSourceEagerHydrationData.push(t,i)}this._internalRoot=r}C3.prototype.render=function(e){z0(e,this._internalRoot,null,null)};C3.prototype.unmount=function(){var e=this._internalRoot,t=e.containerInfo;z0(null,e,null,function(){t[ph]=null})};function pp(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function gU(e,t){if(t||(t=e?e.nodeType===9?e.documentElement:e.firstChild:null,t=!(!t||t.nodeType!==1||!t.hasAttribute("data-reactroot"))),!t)for(var r;r=e.lastChild;)e.removeChild(r);return new C3(e,0,t?{hydrate:!0}:void 0)}function Hg(e,t,r,n,i){var o=r._reactRootContainer;if(o){var s=o._internalRoot;if(typeof i=="function"){var a=i;i=function(){var u=I2(s);a.call(u)}}z0(t,s,e,i)}else{if(o=r._reactRootContainer=gU(r,n),s=o._internalRoot,typeof i=="function"){var l=i;i=function(){var u=I2(s);l.call(u)}}_P(function(){z0(t,s,e,i)})}return I2(s)}v8=function(e){if(e.tag===13){var t=Ii();Da(e,4,t),E3(e,4)}};qx=function(e){if(e.tag===13){var t=Ii();Da(e,67108864,t),E3(e,67108864)}};g8=function(e){if(e.tag===13){var t=Ii(),r=Ba(e);Da(e,r,t),E3(e,r)}};y8=function(e,t){return t()};Z_=function(e,t,r){switch(t){case"input":if(H_(e,r),t=r.name,r.type==="radio"&&t!=null){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<r.length;t++){var n=r[t];if(n!==e&&n.form===e.form){var i=Bg(n);if(!i)throw Error(Te(90));n8(n),H_(n,i)}}}break;case"textarea":o8(e,r);break;case"select":t=r.value,t!=null&&Mc(e,!!r.multiple,t,!1)}};Wx=yP;f8=function(e,t,r,n,i){var o=at;at|=4;try{return iu(98,e.bind(null,t,r,n,i))}finally{at=o,at===0&&(gh(),as())}};Yx=function(){(at&49)===0&&(nU(),cl())};d8=function(e,t){var r=at;at|=2;try{return e(t)}finally{at=r,at===0&&(gh(),as())}};function CP(e,t){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!pp(t))throw Error(Te(200));return mU(e,t,null,r)}var yU={Events:[hp,Ec,Bg,c8,h8,cl,{current:!1}]},If={findFiberByHostInstance:zl,bundleType:0,version:"17.0.2",rendererPackageName:"react-dom"},_U={bundleType:If.bundleType,version:If.version,rendererPackageName:If.rendererPackageName,rendererConfig:If.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:bu.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=m8(e),e===null?null:e.stateNode},findFiberByHostInstance:If.findFiberByHostInstance||vU,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Hm=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Hm.isDisabled&&Hm.supportsFiber)try{s3=Hm.inject(_U),ql=Hm}catch{}}ro.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=yU;ro.createPortal=CP;ro.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(Te(188)):Error(Te(268,Object.keys(e)));return e=m8(t),e=e===null?null:e.stateNode,e};ro.flushSync=function(e,t){var r=at;if((r&48)!==0)return e(t);at|=1;try{if(e)return iu(99,e.bind(null,t))}finally{at=r,as()}};ro.hydrate=function(e,t,r){if(!pp(t))throw Error(Te(200));return Hg(null,e,t,!0,r)};ro.render=function(e,t,r){if(!pp(t))throw Error(Te(200));return Hg(null,e,t,!1,r)};ro.unmountComponentAtNode=function(e){if(!pp(e))throw Error(Te(40));return e._reactRootContainer?(_P(function(){Hg(null,null,e,!1,function(){e._reactRootContainer=null,e[ph]=null})}),!0):!1};ro.unstable_batchedUpdates=yP;ro.unstable_createPortal=function(e,t){return CP(e,t,2<arguments.length&&arguments[2]!==void 0?arguments[2]:null)};ro.unstable_renderSubtreeIntoContainer=function(e,t,r,n){if(!pp(r))throw Error(Te(200));if(e==null||e._reactInternals===void 0)throw Error(Te(38));return Hg(e,t,r,!1,n)};ro.version="17.0.2";(function(e){function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(r){console.error(r)}}t(),e.exports=ro})(ZN);const bU=Boolean(window.location.hostname==="localhost"||window.location.hostname==="[::1]"||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function wU(e){if("serviceWorker"in navigator){if(new URL(window.location.href).origin!==window.location.origin)return;window.addEventListener("load",()=>{const r="./service-worker.js";bU?(xU(r,e),navigator.serviceWorker.ready.then(()=>{console.log("This web app is being served cache-first by a service worker. To learn more, visit https://cra.link/PWA")})):IP(r,e)})}}function IP(e,t){navigator.serviceWorker.register(e).then(r=>{r.onupdatefound=()=>{const n=r.installing;n!=null&&(n.onstatechange=()=>{n.state==="installed"&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://cra.link/PWA."),t&&t.onUpdate&&t.onUpdate(r)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(r)))})}}).catch(r=>{console.error("Error during service worker registration:",r)})}function xU(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then(r=>{const n=r.headers.get("content-type");r.status===404||n!=null&&n.indexOf("javascript")===-1?navigator.serviceWorker.ready.then(i=>{i.unregister().then(()=>{window.location.reload()})}):IP(e,t)}).catch(()=>{console.log("No internet connection found. App is running in offline mode.")})}function Ib(e,t){return Ib=Object.setPrototypeOf||function(n,i){return n.__proto__=i,n},Ib(e,t)}function yh(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,Ib(e,t)}var Nb={exports:{}},TU="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",SU=TU,EU=SU;function NP(){}function PP(){}PP.resetWarningCache=NP;var CU=function(){function e(n,i,o,s,a,l){if(l!==EU){var u=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw u.name="Invariant Violation",u}}e.isRequired=e;function t(){return e}var r={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:PP,resetWarningCache:NP};return r.PropTypes=r,r};Nb.exports=CU();function rh(){return rh=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},rh.apply(this,arguments)}function zm(e){return e.charAt(0)==="/"}function N2(e,t){for(var r=t,n=r+1,i=e.length;n<i;r+=1,n+=1)e[r]=e[n];e.pop()}function IU(e,t){t===void 0&&(t="");var r=e&&e.split("/")||[],n=t&&t.split("/")||[],i=e&&zm(e),o=t&&zm(t),s=i||o;if(e&&zm(e)?n=r:r.length&&(n.pop(),n=n.concat(r)),!n.length)return"/";var a;if(n.length){var l=n[n.length-1];a=l==="."||l===".."||l===""}else a=!1;for(var u=0,c=n.length;c>=0;c--){var f=n[c];f==="."?N2(n,c):f===".."?(N2(n,c),u++):u&&(N2(n,c),u--)}if(!s)for(;u--;u)n.unshift("..");s&&n[0]!==""&&(!n[0]||!zm(n[0]))&&n.unshift("");var p=n.join("/");return a&&p.substr(-1)!=="/"&&(p+="/"),p}var NU=!0,P2="Invariant failed";function hl(e,t){if(!e){if(NU)throw new Error(P2);var r=typeof t=="function"?t():t,n=r?P2+": "+r:P2;throw new Error(n)}}function ad(e){return e.charAt(0)==="/"?e:"/"+e}function gE(e){return e.charAt(0)==="/"?e.substr(1):e}function PU(e,t){return e.toLowerCase().indexOf(t.toLowerCase())===0&&"/?#".indexOf(e.charAt(t.length))!==-1}function AP(e,t){return PU(e,t)?e.substr(t.length):e}function RP(e){return e.charAt(e.length-1)==="/"?e.slice(0,-1):e}function AU(e){var t=e||"/",r="",n="",i=t.indexOf("#");i!==-1&&(n=t.substr(i),t=t.substr(0,i));var o=t.indexOf("?");return o!==-1&&(r=t.substr(o),t=t.substr(0,o)),{pathname:t,search:r==="?"?"":r,hash:n==="#"?"":n}}function ri(e){var t=e.pathname,r=e.search,n=e.hash,i=t||"/";return r&&r!=="?"&&(i+=r.charAt(0)==="?"?r:"?"+r),n&&n!=="#"&&(i+=n.charAt(0)==="#"?n:"#"+n),i}function wi(e,t,r,n){var i;typeof e=="string"?(i=AU(e),i.state=t):(i=rh({},e),i.pathname===void 0&&(i.pathname=""),i.search?i.search.charAt(0)!=="?"&&(i.search="?"+i.search):i.search="",i.hash?i.hash.charAt(0)!=="#"&&(i.hash="#"+i.hash):i.hash="",t!==void 0&&i.state===void 0&&(i.state=t));try{i.pathname=decodeURI(i.pathname)}catch(o){throw o instanceof URIError?new URIError('Pathname "'+i.pathname+'" could not be decoded. This is likely caused by an invalid percent-encoding.'):o}return r&&(i.key=r),n?i.pathname?i.pathname.charAt(0)!=="/"&&(i.pathname=IU(i.pathname,n.pathname)):i.pathname=n.pathname:i.pathname||(i.pathname="/"),i}function I3(){var e=null;function t(s){return e=s,function(){e===s&&(e=null)}}function r(s,a,l,u){if(e!=null){var c=typeof e=="function"?e(s,a):e;typeof c=="string"?typeof l=="function"?l(c,u):u(!0):u(c!==!1)}else u(!0)}var n=[];function i(s){var a=!0;function l(){a&&s.apply(void 0,arguments)}return n.push(l),function(){a=!1,n=n.filter(function(u){return u!==l})}}function o(){for(var s=arguments.length,a=new Array(s),l=0;l<s;l++)a[l]=arguments[l];n.forEach(function(u){return u.apply(void 0,a)})}return{setPrompt:t,confirmTransitionTo:r,appendListener:i,notifyListeners:o}}var kP=!!(typeof window<"u"&&window.document&&window.document.createElement);function OP(e,t){t(window.confirm(e))}function RU(){var e=window.navigator.userAgent;return(e.indexOf("Android 2.")!==-1||e.indexOf("Android 4.0")!==-1)&&e.indexOf("Mobile Safari")!==-1&&e.indexOf("Chrome")===-1&&e.indexOf("Windows Phone")===-1?!1:window.history&&"pushState"in window.history}function kU(){return window.navigator.userAgent.indexOf("Trident")===-1}function OU(){return window.navigator.userAgent.indexOf("Firefox")===-1}function LU(e){return e.state===void 0&&navigator.userAgent.indexOf("CriOS")===-1}var yE="popstate",_E="hashchange";function bE(){try{return window.history.state||{}}catch{return{}}}function UU(e){e===void 0&&(e={}),kP||hl(!1);var t=window.history,r=RU(),n=!kU(),i=e,o=i.forceRefresh,s=o===void 0?!1:o,a=i.getUserConfirmation,l=a===void 0?OP:a,u=i.keyLength,c=u===void 0?6:u,f=e.basename?RP(ad(e.basename)):"";function p(ie){var Q=ie||{},ee=Q.key,W=Q.state,te=window.location,ye=te.pathname,Ce=te.search,Ie=te.hash,Ye=ye+Ce+Ie;return f&&(Ye=AP(Ye,f)),wi(Ye,W,ee)}function v(){return Math.random().toString(36).substr(2,c)}var g=I3();function b(ie){rh(ue,ie),ue.length=t.length,g.notifyListeners(ue.location,ue.action)}function _(ie){LU(ie)||T(p(ie.state))}function w(){T(p(bE()))}var x=!1;function T(ie){if(x)x=!1,b();else{var Q="POP";g.confirmTransitionTo(ie,Q,l,function(ee){ee?b({action:Q,location:ie}):I(ie)})}}function I(ie){var Q=ue.location,ee=E.indexOf(Q.key);ee===-1&&(ee=0);var W=E.indexOf(ie.key);W===-1&&(W=0);var te=ee-W;te&&(x=!0,A(te))}var R=p(bE()),E=[R.key];function O(ie){return f+ri(ie)}function P(ie,Q){var ee="PUSH",W=wi(ie,Q,v(),ue.location);g.confirmTransitionTo(W,ee,l,function(te){if(!!te){var ye=O(W),Ce=W.key,Ie=W.state;if(r)if(t.pushState({key:Ce,state:Ie},null,ye),s)window.location.href=ye;else{var Ye=E.indexOf(ue.location.key),de=E.slice(0,Ye+1);de.push(W.key),E=de,b({action:ee,location:W})}else window.location.href=ye}})}function N(ie,Q){var ee="REPLACE",W=wi(ie,Q,v(),ue.location);g.confirmTransitionTo(W,ee,l,function(te){if(!!te){var ye=O(W),Ce=W.key,Ie=W.state;if(r)if(t.replaceState({key:Ce,state:Ie},null,ye),s)window.location.replace(ye);else{var Ye=E.indexOf(ue.location.key);Ye!==-1&&(E[Ye]=W.key),b({action:ee,location:W})}else window.location.replace(ye)}})}function A(ie){t.go(ie)}function j(){A(-1)}function X(){A(1)}var B=0;function ae(ie){B+=ie,B===1&&ie===1?(window.addEventListener(yE,_),n&&window.addEventListener(_E,w)):B===0&&(window.removeEventListener(yE,_),n&&window.removeEventListener(_E,w))}var Y=!1;function K(ie){ie===void 0&&(ie=!1);var Q=g.setPrompt(ie);return Y||(ae(1),Y=!0),function(){return Y&&(Y=!1,ae(-1)),Q()}}function me(ie){var Q=g.appendListener(ie);return ae(1),function(){ae(-1),Q()}}var ue={length:t.length,action:"POP",location:R,createHref:O,push:P,replace:N,go:A,goBack:j,goForward:X,block:K,listen:me};return ue}var wE="hashchange",FU={hashbang:{encodePath:function(t){return t.charAt(0)==="!"?t:"!/"+gE(t)},decodePath:function(t){return t.charAt(0)==="!"?t.substr(1):t}},noslash:{encodePath:gE,decodePath:ad},slash:{encodePath:ad,decodePath:ad}};function LP(e){var t=e.indexOf("#");return t===-1?e:e.slice(0,t)}function Nf(){var e=window.location.href,t=e.indexOf("#");return t===-1?"":e.substring(t+1)}function MU(e){window.location.hash=e}function A2(e){window.location.replace(LP(window.location.href)+"#"+e)}function BU(e){e===void 0&&(e={}),kP||hl(!1);var t=window.history;OU();var r=e,n=r.getUserConfirmation,i=n===void 0?OP:n,o=r.hashType,s=o===void 0?"slash":o,a=e.basename?RP(ad(e.basename)):"",l=FU[s],u=l.encodePath,c=l.decodePath;function f(){var Q=c(Nf());return a&&(Q=AP(Q,a)),wi(Q)}var p=I3();function v(Q){rh(ie,Q),ie.length=t.length,p.notifyListeners(ie.location,ie.action)}var g=!1,b=null;function _(Q,ee){return Q.pathname===ee.pathname&&Q.search===ee.search&&Q.hash===ee.hash}function w(){var Q=Nf(),ee=u(Q);if(Q!==ee)A2(ee);else{var W=f(),te=ie.location;if(!g&&_(te,W)||b===ri(W))return;b=null,x(W)}}function x(Q){if(g)g=!1,v();else{var ee="POP";p.confirmTransitionTo(Q,ee,i,function(W){W?v({action:ee,location:Q}):T(Q)})}}function T(Q){var ee=ie.location,W=O.lastIndexOf(ri(ee));W===-1&&(W=0);var te=O.lastIndexOf(ri(Q));te===-1&&(te=0);var ye=W-te;ye&&(g=!0,j(ye))}var I=Nf(),R=u(I);I!==R&&A2(R);var E=f(),O=[ri(E)];function P(Q){var ee=document.querySelector("base"),W="";return ee&&ee.getAttribute("href")&&(W=LP(window.location.href)),W+"#"+u(a+ri(Q))}function N(Q,ee){var W="PUSH",te=wi(Q,void 0,void 0,ie.location);p.confirmTransitionTo(te,W,i,function(ye){if(!!ye){var Ce=ri(te),Ie=u(a+Ce),Ye=Nf()!==Ie;if(Ye){b=Ce,MU(Ie);var de=O.lastIndexOf(ri(ie.location)),F=O.slice(0,de+1);F.push(Ce),O=F,v({action:W,location:te})}else v()}})}function A(Q,ee){var W="REPLACE",te=wi(Q,void 0,void 0,ie.location);p.confirmTransitionTo(te,W,i,function(ye){if(!!ye){var Ce=ri(te),Ie=u(a+Ce),Ye=Nf()!==Ie;Ye&&(b=Ce,A2(Ie));var de=O.indexOf(ri(ie.location));de!==-1&&(O[de]=Ce),v({action:W,location:te})}})}function j(Q){t.go(Q)}function X(){j(-1)}function B(){j(1)}var ae=0;function Y(Q){ae+=Q,ae===1&&Q===1?window.addEventListener(wE,w):ae===0&&window.removeEventListener(wE,w)}var K=!1;function me(Q){Q===void 0&&(Q=!1);var ee=p.setPrompt(Q);return K||(Y(1),K=!0),function(){return K&&(K=!1,Y(-1)),ee()}}function ue(Q){var ee=p.appendListener(Q);return Y(1),function(){Y(-1),ee()}}var ie={length:t.length,action:"POP",location:E,createHref:P,push:N,replace:A,go:j,goBack:X,goForward:B,block:me,listen:ue};return ie}function xE(e,t,r){return Math.min(Math.max(e,t),r)}function DU(e){e===void 0&&(e={});var t=e,r=t.getUserConfirmation,n=t.initialEntries,i=n===void 0?["/"]:n,o=t.initialIndex,s=o===void 0?0:o,a=t.keyLength,l=a===void 0?6:a,u=I3();function c(P){rh(O,P),O.length=O.entries.length,u.notifyListeners(O.location,O.action)}function f(){return Math.random().toString(36).substr(2,l)}var p=xE(s,0,i.length-1),v=i.map(function(P){return typeof P=="string"?wi(P,void 0,f()):wi(P,void 0,P.key||f())}),g=ri;function b(P,N){var A="PUSH",j=wi(P,N,f(),O.location);u.confirmTransitionTo(j,A,r,function(X){if(!!X){var B=O.index,ae=B+1,Y=O.entries.slice(0);Y.length>ae?Y.splice(ae,Y.length-ae,j):Y.push(j),c({action:A,location:j,index:ae,entries:Y})}})}function _(P,N){var A="REPLACE",j=wi(P,N,f(),O.location);u.confirmTransitionTo(j,A,r,function(X){!X||(O.entries[O.index]=j,c({action:A,location:j}))})}function w(P){var N=xE(O.index+P,0,O.entries.length-1),A="POP",j=O.entries[N];u.confirmTransitionTo(j,A,r,function(X){X?c({action:A,location:j,index:N}):c()})}function x(){w(-1)}function T(){w(1)}function I(P){var N=O.index+P;return N>=0&&N<O.entries.length}function R(P){return P===void 0&&(P=!1),u.setPrompt(P)}function E(P){return u.appendListener(P)}var O={length:v.length,action:"POP",location:v[p],index:p,entries:v,createHref:g,push:b,replace:_,go:w,goBack:x,goForward:T,canGo:I,block:R,listen:E};return O}const Ni=typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{};function Pb(e,t){return Pb=Object.setPrototypeOf||function(n,i){return n.__proto__=i,n},Pb(e,t)}function TE(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,Pb(e,t)}var R2=1073741823,SE=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof Ni<"u"?Ni:{};function GU(){var e="__global_unique_id__";return SE[e]=(SE[e]||0)+1}function jU(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}function $U(e){var t=[];return{on:function(n){t.push(n)},off:function(n){t=t.filter(function(i){return i!==n})},get:function(){return e},set:function(n,i){e=n,t.forEach(function(o){return o(e,i)})}}}function HU(e){return Array.isArray(e)?e[0]:e}function zU(e,t){var r,n,i="__create-react-context-"+GU()+"__",o=function(a){TE(l,a);function l(){var c;return c=a.apply(this,arguments)||this,c.emitter=$U(c.props.value),c}var u=l.prototype;return u.getChildContext=function(){var f;return f={},f[i]=this.emitter,f},u.componentWillReceiveProps=function(f){if(this.props.value!==f.value){var p=this.props.value,v=f.value,g;jU(p,v)?g=0:(g=typeof t=="function"?t(p,v):R2,g|=0,g!==0&&this.emitter.set(f.value,g))}},u.render=function(){return this.props.children},l}(M.exports.Component);o.childContextTypes=(r={},r[i]=Nb.exports.object.isRequired,r);var s=function(a){TE(l,a);function l(){var c;return c=a.apply(this,arguments)||this,c.state={value:c.getValue()},c.onUpdate=function(f,p){var v=c.observedBits|0;(v&p)!==0&&c.setState({value:c.getValue()})},c}var u=l.prototype;return u.componentWillReceiveProps=function(f){var p=f.observedBits;this.observedBits=p==null?R2:p},u.componentDidMount=function(){this.context[i]&&this.context[i].on(this.onUpdate);var f=this.props.observedBits;this.observedBits=f==null?R2:f},u.componentWillUnmount=function(){this.context[i]&&this.context[i].off(this.onUpdate)},u.getValue=function(){return this.context[i]?this.context[i].get():e},u.render=function(){return HU(this.props.children)(this.state.value)},l}(M.exports.Component);return s.contextTypes=(n={},n[i]=Nb.exports.object,n),{Provider:o,Consumer:s}}var VU=nt.createContext||zU;function nh(){return nh=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},nh.apply(this,arguments)}var _h={exports:{}},XU=Array.isArray||function(e){return Object.prototype.toString.call(e)=="[object Array]"},V0=XU;_h.exports=MP;_h.exports.parse=N3;_h.exports.compile=YU;_h.exports.tokensToFunction=UP;_h.exports.tokensToRegExp=FP;var WU=new RegExp(["(\\\\.)","([\\/.])?(?:(?:\\:(\\w+)(?:\\(((?:\\\\.|[^\\\\()])+)\\))?|\\(((?:\\\\.|[^\\\\()])+)\\))([+*?])?|(\\*))"].join("|"),"g");function N3(e,t){for(var r=[],n=0,i=0,o="",s=t&&t.delimiter||"/",a;(a=WU.exec(e))!=null;){var l=a[0],u=a[1],c=a.index;if(o+=e.slice(i,c),i=c+l.length,u){o+=u[1];continue}var f=e[i],p=a[2],v=a[3],g=a[4],b=a[5],_=a[6],w=a[7];o&&(r.push(o),o="");var x=p!=null&&f!=null&&f!==p,T=_==="+"||_==="*",I=_==="?"||_==="*",R=a[2]||s,E=g||b;r.push({name:v||n++,prefix:p||"",delimiter:R,optional:I,repeat:T,partial:x,asterisk:!!w,pattern:E?ZU(E):w?".*":"[^"+qv(R)+"]+?"})}return i<e.length&&(o+=e.substr(i)),o&&r.push(o),r}function YU(e,t){return UP(N3(e,t),t)}function KU(e){return encodeURI(e).replace(/[\/?#]/g,function(t){return"%"+t.charCodeAt(0).toString(16).toUpperCase()})}function qU(e){return encodeURI(e).replace(/[?#]/g,function(t){return"%"+t.charCodeAt(0).toString(16).toUpperCase()})}function UP(e,t){for(var r=new Array(e.length),n=0;n<e.length;n++)typeof e[n]=="object"&&(r[n]=new RegExp("^(?:"+e[n].pattern+")$",A3(t)));return function(i,o){for(var s="",a=i||{},l=o||{},u=l.pretty?KU:encodeURIComponent,c=0;c<e.length;c++){var f=e[c];if(typeof f=="string"){s+=f;continue}var p=a[f.name],v;if(p==null)if(f.optional){f.partial&&(s+=f.prefix);continue}else throw new TypeError('Expected "'+f.name+'" to be defined');if(V0(p)){if(!f.repeat)throw new TypeError('Expected "'+f.name+'" to not repeat, but received `'+JSON.stringify(p)+"`");if(p.length===0){if(f.optional)continue;throw new TypeError('Expected "'+f.name+'" to not be empty')}for(var g=0;g<p.length;g++){if(v=u(p[g]),!r[c].test(v))throw new TypeError('Expected all "'+f.name+'" to match "'+f.pattern+'", but received `'+JSON.stringify(v)+"`");s+=(g===0?f.prefix:f.delimiter)+v}continue}if(v=f.asterisk?qU(p):u(p),!r[c].test(v))throw new TypeError('Expected "'+f.name+'" to match "'+f.pattern+'", but received "'+v+'"');s+=f.prefix+v}return s}}function qv(e){return e.replace(/([.+*?=^!:${}()[\]|\/\\])/g,"\\$1")}function ZU(e){return e.replace(/([=!:$\/()])/g,"\\$1")}function P3(e,t){return e.keys=t,e}function A3(e){return e&&e.sensitive?"":"i"}function JU(e,t){var r=e.source.match(/\((?!\?)/g);if(r)for(var n=0;n<r.length;n++)t.push({name:n,prefix:null,delimiter:null,optional:!1,repeat:!1,partial:!1,asterisk:!1,pattern:null});return P3(e,t)}function QU(e,t,r){for(var n=[],i=0;i<e.length;i++)n.push(MP(e[i],t,r).source);var o=new RegExp("(?:"+n.join("|")+")",A3(r));return P3(o,t)}function eF(e,t,r){return FP(N3(e,r),t,r)}function FP(e,t,r){V0(t)||(r=t||r,t=[]),r=r||{};for(var n=r.strict,i=r.end!==!1,o="",s=0;s<e.length;s++){var a=e[s];if(typeof a=="string")o+=qv(a);else{var l=qv(a.prefix),u="(?:"+a.pattern+")";t.push(a),a.repeat&&(u+="(?:"+l+u+")*"),a.optional?a.partial?u=l+"("+u+")?":u="(?:"+l+"("+u+"))?":u=l+"("+u+")",o+=u}}var c=qv(r.delimiter||"/"),f=o.slice(-c.length)===c;return n||(o=(f?o.slice(0,-c.length):o)+"(?:"+c+"(?=$))?"),i?o+="$":o+=n&&f?"":"(?="+c+"|$)",P3(new RegExp("^"+o,A3(r)),t)}function MP(e,t,r){return V0(t)||(r=t||r,t=[]),r=r||{},e instanceof RegExp?JU(e,t):V0(e)?QU(e,t,r):eF(e,t,r)}var BP={exports:{}},$t={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var un=typeof Symbol=="function"&&Symbol.for,R3=un?Symbol.for("react.element"):60103,k3=un?Symbol.for("react.portal"):60106,zg=un?Symbol.for("react.fragment"):60107,Vg=un?Symbol.for("react.strict_mode"):60108,Xg=un?Symbol.for("react.profiler"):60114,Wg=un?Symbol.for("react.provider"):60109,Yg=un?Symbol.for("react.context"):60110,O3=un?Symbol.for("react.async_mode"):60111,Kg=un?Symbol.for("react.concurrent_mode"):60111,qg=un?Symbol.for("react.forward_ref"):60112,Zg=un?Symbol.for("react.suspense"):60113,tF=un?Symbol.for("react.suspense_list"):60120,Jg=un?Symbol.for("react.memo"):60115,Qg=un?Symbol.for("react.lazy"):60116,rF=un?Symbol.for("react.block"):60121,nF=un?Symbol.for("react.fundamental"):60117,iF=un?Symbol.for("react.responder"):60118,oF=un?Symbol.for("react.scope"):60119;function Ri(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case R3:switch(e=e.type,e){case O3:case Kg:case zg:case Xg:case Vg:case Zg:return e;default:switch(e=e&&e.$$typeof,e){case Yg:case qg:case Qg:case Jg:case Wg:return e;default:return t}}case k3:return t}}}function DP(e){return Ri(e)===Kg}$t.AsyncMode=O3;$t.ConcurrentMode=Kg;$t.ContextConsumer=Yg;$t.ContextProvider=Wg;$t.Element=R3;$t.ForwardRef=qg;$t.Fragment=zg;$t.Lazy=Qg;$t.Memo=Jg;$t.Portal=k3;$t.Profiler=Xg;$t.StrictMode=Vg;$t.Suspense=Zg;$t.isAsyncMode=function(e){return DP(e)||Ri(e)===O3};$t.isConcurrentMode=DP;$t.isContextConsumer=function(e){return Ri(e)===Yg};$t.isContextProvider=function(e){return Ri(e)===Wg};$t.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===R3};$t.isForwardRef=function(e){return Ri(e)===qg};$t.isFragment=function(e){return Ri(e)===zg};$t.isLazy=function(e){return Ri(e)===Qg};$t.isMemo=function(e){return Ri(e)===Jg};$t.isPortal=function(e){return Ri(e)===k3};$t.isProfiler=function(e){return Ri(e)===Xg};$t.isStrictMode=function(e){return Ri(e)===Vg};$t.isSuspense=function(e){return Ri(e)===Zg};$t.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===zg||e===Kg||e===Xg||e===Vg||e===Zg||e===tF||typeof e=="object"&&e!==null&&(e.$$typeof===Qg||e.$$typeof===Jg||e.$$typeof===Wg||e.$$typeof===Yg||e.$$typeof===qg||e.$$typeof===nF||e.$$typeof===iF||e.$$typeof===oF||e.$$typeof===rF)};$t.typeOf=Ri;(function(e){e.exports=$t})(BP);function GP(e,t){if(e==null)return{};var r={},n=Object.keys(e),i,o;for(o=0;o<n.length;o++)i=n[o],!(t.indexOf(i)>=0)&&(r[i]=e[i]);return r}var L3=BP.exports,sF={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},aF={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},lF={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},jP={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},U3={};U3[L3.ForwardRef]=lF;U3[L3.Memo]=jP;function EE(e){return L3.isMemo(e)?jP:U3[e.$$typeof]||sF}var uF=Object.defineProperty,cF=Object.getOwnPropertyNames,CE=Object.getOwnPropertySymbols,hF=Object.getOwnPropertyDescriptor,fF=Object.getPrototypeOf,IE=Object.prototype;function $P(e,t,r){if(typeof t!="string"){if(IE){var n=fF(t);n&&n!==IE&&$P(e,n,r)}var i=cF(t);CE&&(i=i.concat(CE(t)));for(var o=EE(e),s=EE(t),a=0;a<i.length;++a){var l=i[a];if(!aF[l]&&!(r&&r[l])&&!(s&&s[l])&&!(o&&o[l])){var u=hF(t,l);try{uF(e,l,u)}catch{}}}}return e}var dF=$P,ey={exports:{}},mp={};/** @license React v17.0.2
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var pF=M.exports,HP=60103;mp.Fragment=60107;if(typeof Symbol=="function"&&Symbol.for){var NE=Symbol.for;HP=NE("react.element"),mp.Fragment=NE("react.fragment")}var mF=pF.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,vF=Object.prototype.hasOwnProperty,gF={key:!0,ref:!0,__self:!0,__source:!0};function zP(e,t,r){var n,i={},o=null,s=null;r!==void 0&&(o=""+r),t.key!==void 0&&(o=""+t.key),t.ref!==void 0&&(s=t.ref);for(n in t)vF.call(t,n)&&!gF.hasOwnProperty(n)&&(i[n]=t[n]);if(e&&e.defaultProps)for(n in t=e.defaultProps,t)i[n]===void 0&&(i[n]=t[n]);return{$$typeof:HP,type:e,key:o,ref:s,props:i,_owner:mF.current}}mp.jsx=zP;mp.jsxs=zP;(function(e){e.exports=mp})(ey);const De=ey.exports.Fragment,m=ey.exports.jsx,k=ey.exports.jsxs;var VP=function(t){var r=VU();return r.displayName=t,r},XP=VP("Router-History"),su=VP("Router"),ty=function(e){yh(t,e),t.computeRootMatch=function(i){return{path:"/",url:"/",params:{},isExact:i==="/"}};function t(n){var i;return i=e.call(this,n)||this,i.state={location:n.history.location},i._isMounted=!1,i._pendingLocation=null,n.staticContext||(i.unlisten=n.history.listen(function(o){i._isMounted?i.setState({location:o}):i._pendingLocation=o})),i}var r=t.prototype;return r.componentDidMount=function(){this._isMounted=!0,this._pendingLocation&&this.setState({location:this._pendingLocation})},r.componentWillUnmount=function(){this.unlisten&&(this.unlisten(),this._isMounted=!1,this._pendingLocation=null)},r.render=function(){return nt.createElement(su.Provider,{value:{history:this.props.history,location:this.state.location,match:t.computeRootMatch(this.state.location.pathname),staticContext:this.props.staticContext}},nt.createElement(XP.Provider,{children:this.props.children||null,value:this.props.history}))},t}(nt.Component);nt.Component;nt.Component;var PE={},yF=1e4,AE=0;function _F(e,t){var r=""+t.end+t.strict+t.sensitive,n=PE[r]||(PE[r]={});if(n[e])return n[e];var i=[],o=_h.exports(e,i,t),s={regexp:o,keys:i};return AE<yF&&(n[e]=s,AE++),s}function F3(e,t){t===void 0&&(t={}),(typeof t=="string"||Array.isArray(t))&&(t={path:t});var r=t,n=r.path,i=r.exact,o=i===void 0?!1:i,s=r.strict,a=s===void 0?!1:s,l=r.sensitive,u=l===void 0?!1:l,c=[].concat(n);return c.reduce(function(f,p){if(!p&&p!=="")return null;if(f)return f;var v=_F(p,{end:o,strict:a,sensitive:u}),g=v.regexp,b=v.keys,_=g.exec(e);if(!_)return null;var w=_[0],x=_.slice(1),T=e===w;return o&&!T?null:{path:p,url:p==="/"&&w===""?"/":w,isExact:T,params:b.reduce(function(I,R,E){return I[R.name]=x[E],I},{})}},null)}function bF(e){return nt.Children.count(e)===0}var tn=function(e){yh(t,e);function t(){return e.apply(this,arguments)||this}var r=t.prototype;return r.render=function(){var i=this;return nt.createElement(su.Consumer,null,function(o){o||hl(!1);var s=i.props.location||o.location,a=i.props.computedMatch?i.props.computedMatch:i.props.path?F3(s.pathname,i.props):o.match,l=nh({},o,{location:s,match:a}),u=i.props,c=u.children,f=u.component,p=u.render;return Array.isArray(c)&&bF(c)&&(c=null),nt.createElement(su.Provider,{value:l},l.match?c?typeof c=="function"?c(l):c:f?nt.createElement(f,l):p?p(l):null:typeof c=="function"?c(l):null)})},t}(nt.Component);function M3(e){return e.charAt(0)==="/"?e:"/"+e}function wF(e,t){return e?nh({},t,{pathname:M3(e)+t.pathname}):t}function xF(e,t){if(!e)return t;var r=M3(e);return t.pathname.indexOf(r)!==0?t:nh({},t,{pathname:t.pathname.substr(r.length)})}function RE(e){return typeof e=="string"?e:ri(e)}function k2(e){return function(){hl(!1)}}function kE(){}nt.Component;var TF=function(e){yh(t,e);function t(){return e.apply(this,arguments)||this}var r=t.prototype;return r.render=function(){var i=this;return nt.createElement(su.Consumer,null,function(o){o||hl(!1);var s=i.props.location||o.location,a,l;return nt.Children.forEach(i.props.children,function(u){if(l==null&&nt.isValidElement(u)){a=u;var c=u.props.path||u.props.from;l=c?F3(s.pathname,nh({},u.props,{path:c})):o.match}}),l?nt.cloneElement(a,{location:s,computedMatch:l}):null})},t}(nt.Component);function bh(e){var t="withRouter("+(e.displayName||e.name)+")",r=function(i){var o=i.wrappedComponentRef,s=GP(i,["wrappedComponentRef"]);return nt.createElement(su.Consumer,null,function(a){return a||hl(!1),m(e,{...s,...a,ref:o})})};return r.displayName=t,r.WrappedComponent=e,dF(r,e)}var SF=nt.useContext;function B3(){return SF(XP)}function Ab(e,t){return Ab=Object.setPrototypeOf||function(n,i){return n.__proto__=i,n},Ab(e,t)}function WP(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,Ab(e,t)}function ih(){return ih=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},ih.apply(this,arguments)}function D3(e,t){if(e==null)return{};var r={},n=Object.keys(e),i,o;for(o=0;o<n.length;o++)i=n[o],!(t.indexOf(i)>=0)&&(r[i]=e[i]);return r}nt.Component;var EF=function(e){WP(t,e);function t(){for(var n,i=arguments.length,o=new Array(i),s=0;s<i;s++)o[s]=arguments[s];return n=e.call.apply(e,[this].concat(o))||this,n.history=BU(n.props),n}var r=t.prototype;return r.render=function(){return m(ty,{history:this.history,children:this.props.children})},t}(nt.Component),Rb=function(t,r){return typeof t=="function"?t(r):t},kb=function(t,r){return typeof t=="string"?wi(t,null,null,r):t},G3=function(t){return t},oh=nt.forwardRef;typeof oh>"u"&&(oh=G3);function CF(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}var IF=oh(function(e,t){var r=e.innerRef,n=e.navigate,i=e.onClick,o=D3(e,["innerRef","navigate","onClick"]),s=o.target,a=ih({},o,{onClick:function(u){try{i&&i(u)}catch(c){throw u.preventDefault(),c}!u.defaultPrevented&&u.button===0&&(!s||s==="_self")&&!CF(u)&&(u.preventDefault(),n())}});return G3!==oh?a.ref=t||r:a.ref=r,m("a",{...a})}),hi=oh(function(e,t){var r=e.component,n=r===void 0?IF:r,i=e.replace,o=e.to,s=e.innerRef,a=D3(e,["component","replace","to","innerRef"]);return nt.createElement(su.Consumer,null,function(l){l||hl(!1);var u=l.history,c=kb(Rb(o,l.location),l.location),f=c?u.createHref(c):"",p=ih({},a,{href:f,navigate:function(){var g=Rb(o,l.location),b=ri(l.location)===ri(kb(g)),_=i||b?u.replace:u.push;_(g)}});return G3!==oh?p.ref=t||s:p.innerRef=s,nt.createElement(n,p)})}),YP=function(t){return t},X0=nt.forwardRef;typeof X0>"u"&&(X0=YP);function NF(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.filter(function(n){return n}).join(" ")}X0(function(e,t){var r=e["aria-current"],n=r===void 0?"page":r,i=e.activeClassName,o=i===void 0?"active":i,s=e.activeStyle,a=e.className,l=e.exact,u=e.isActive,c=e.location,f=e.sensitive,p=e.strict,v=e.style,g=e.to,b=e.innerRef,_=D3(e,["aria-current","activeClassName","activeStyle","className","exact","isActive","location","sensitive","strict","style","to","innerRef"]);return nt.createElement(su.Consumer,null,function(w){w||hl(!1);var x=c||w.location,T=kb(Rb(g,x),x),I=T.pathname,R=I&&I.replace(/([.+*?=^!:${}()[\]|/\\])/g,"\\$1"),E=R?F3(x.pathname,{path:R,exact:l,sensitive:f,strict:p}):null,O=!!(u?u(E,x):E),P=typeof a=="function"?a(O):a,N=typeof v=="function"?v(O):v;O&&(P=NF(P,o),N=ih({},N,s));var A=ih({"aria-current":O&&n||null,className:P,style:N,to:T},_);return YP!==X0?A.ref=t||b:A.innerRef=b,m(hi,{...A})})});const KP=window==null?void 0:window.gtag;async function PF(e){try{return{data:await e()}}catch(t){return KP&&console.log("Error with GA"),{error:t}}}function wh(e,t){return PF(()=>KP("event",e,t))}function AF(e,t){return wh("songs_"+e,t)}function RF(e){return wh("song_search",e)}function kF(e,t){return wh("UI_"+e,t)}function OF(e){return wh("song_event",e)}function LF(e){return wh("page_view",e)}const Sn={pageView:LF,event:wh,songEvent:OF,userSongs:AF,songSearch:RF,UIEvent:kF};var qP={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},OE=nt.createContext&&nt.createContext(qP),ja=globalThis&&globalThis.__assign||function(){return ja=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},ja.apply(this,arguments)},UF=globalThis&&globalThis.__rest||function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]]);return r};function ZP(e){return e&&e.map(function(t,r){return nt.createElement(t.tag,ja({key:r},t.attr),ZP(t.child))})}function Me(e){return function(t){return m(FF,{...ja({attr:ja({},e.attr)},t),children:ZP(e.child)})}}function FF(e){var t=function(r){var n=e.attr,i=e.size,o=e.title,s=UF(e,["attr","size","title"]),a=i||r.size||"1em",l;return r.className&&(l=r.className),e.className&&(l=(l?l+" ":"")+e.className),k("svg",{...ja({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},r.attr,n,s,{className:l,style:ja(ja({color:e.color||r.color},r.style),e.style),height:a,width:a,xmlns:"http://www.w3.org/2000/svg"}),children:[o&&m("title",{children:o}),e.children]})};return OE!==void 0?m(OE.Consumer,{children:function(r){return t(r)}}):t(qP)}function JP(e){return Me({tag:"svg",attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M524.531,69.836a1.5,1.5,0,0,0-.764-.7A485.065,485.065,0,0,0,404.081,32.03a1.816,1.816,0,0,0-1.923.91,337.461,337.461,0,0,0-14.9,30.6,447.848,447.848,0,0,0-134.426,0,309.541,309.541,0,0,0-15.135-30.6,1.89,1.89,0,0,0-1.924-.91A483.689,483.689,0,0,0,116.085,69.137a1.712,1.712,0,0,0-.788.676C39.068,183.651,18.186,294.69,28.43,404.354a2.016,2.016,0,0,0,.765,1.375A487.666,487.666,0,0,0,176.02,479.918a1.9,1.9,0,0,0,2.063-.676A348.2,348.2,0,0,0,208.12,430.4a1.86,1.86,0,0,0-1.019-2.588,321.173,321.173,0,0,1-45.868-21.853,1.885,1.885,0,0,1-.185-3.126c3.082-2.309,6.166-4.711,9.109-7.137a1.819,1.819,0,0,1,1.9-.256c96.229,43.917,200.41,43.917,295.5,0a1.812,1.812,0,0,1,1.924.233c2.944,2.426,6.027,4.851,9.132,7.16a1.884,1.884,0,0,1-.162,3.126,301.407,301.407,0,0,1-45.89,21.83,1.875,1.875,0,0,0-1,2.611,391.055,391.055,0,0,0,30.014,48.815,1.864,1.864,0,0,0,2.063.7A486.048,486.048,0,0,0,610.7,405.729a1.882,1.882,0,0,0,.765-1.352C623.729,277.594,590.933,167.465,524.531,69.836ZM222.491,337.58c-28.972,0-52.844-26.587-52.844-59.239S193.056,219.1,222.491,219.1c29.665,0,53.306,26.82,52.843,59.239C275.334,310.993,251.924,337.58,222.491,337.58Zm195.38,0c-28.971,0-52.843-26.587-52.843-59.239S388.437,219.1,417.871,219.1c29.667,0,53.307,26.82,52.844,59.239C470.715,310.993,447.538,337.58,417.871,337.58Z"}}]})(e)}function QP(e){return Me({tag:"svg",attr:{viewBox:"0 0 496 512"},child:[{tag:"path",attr:{d:"M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"}}]})(e)}function MF(e){return Me({tag:"svg",attr:{viewBox:"0 0 320 512"},child:[{tag:"path",attr:{d:"M143 352.3L7 216.3c-9.4-9.4-9.4-24.6 0-33.9l22.6-22.6c9.4-9.4 24.6-9.4 33.9 0l96.4 96.4 96.4-96.4c9.4-9.4 24.6-9.4 33.9 0l22.6 22.6c9.4 9.4 9.4 24.6 0 33.9l-136 136c-9.2 9.4-24.4 9.4-33.8 0z"}}]})(e)}function BF(e){return Me({tag:"svg",attr:{viewBox:"0 0 320 512"},child:[{tag:"path",attr:{d:"M177 159.7l136 136c9.4 9.4 9.4 24.6 0 33.9l-22.6 22.6c-9.4 9.4-24.6 9.4-33.9 0L160 255.9l-96.4 96.4c-9.4 9.4-24.6 9.4-33.9 0L7 329.7c-9.4-9.4-9.4-24.6 0-33.9l136-136c9.4-9.5 24.6-9.5 34-.1z"}}]})(e)}function eA(e){return Me({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M413.1 222.5l22.2 22.2c9.4 9.4 9.4 24.6 0 33.9L241 473c-9.4 9.4-24.6 9.4-33.9 0L12.7 278.6c-9.4-9.4-9.4-24.6 0-33.9l22.2-22.2c9.5-9.5 25-9.3 34.3.4L184 343.4V56c0-13.3 10.7-24 24-24h32c13.3 0 24 10.7 24 24v287.4l114.8-120.5c9.3-9.8 24.8-10 34.3-.4z"}}]})(e)}function tA(e){return Me({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M257.5 445.1l-22.2 22.2c-9.4 9.4-24.6 9.4-33.9 0L7 273c-9.4-9.4-9.4-24.6 0-33.9L201.4 44.7c9.4-9.4 24.6-9.4 33.9 0l22.2 22.2c9.5 9.5 9.3 25-.4 34.3L136.6 216H424c13.3 0 24 10.7 24 24v32c0 13.3-10.7 24-24 24H136.6l120.5 114.8c9.8 9.3 10 24.8.4 34.3z"}}]})(e)}function rA(e){return Me({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M34.9 289.5l-22.2-22.2c-9.4-9.4-9.4-24.6 0-33.9L207 39c9.4-9.4 24.6-9.4 33.9 0l194.3 194.3c9.4 9.4 9.4 24.6 0 33.9L413 289.4c-9.5 9.5-25 9.3-34.3-.4L264 168.6V456c0 13.3-10.7 24-24 24h-32c-13.3 0-24-10.7-24-24V168.6L69.2 289.1c-9.3 9.8-24.8 10-34.3.4z"}}]})(e)}function ry(e){return Me({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M16 132h416c8.837 0 16-7.163 16-16V76c0-8.837-7.163-16-16-16H16C7.163 60 0 67.163 0 76v40c0 8.837 7.163 16 16 16zm0 160h416c8.837 0 16-7.163 16-16v-40c0-8.837-7.163-16-16-16H16c-8.837 0-16 7.163-16 16v40c0 8.837 7.163 16 16 16zm0 160h416c8.837 0 16-7.163 16-16v-40c0-8.837-7.163-16-16-16H16c-8.837 0-16 7.163-16 16v40c0 8.837 7.163 16 16 16z"}}]})(e)}function DF(e){return Me({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M504 256c0 136.967-111.033 248-248 248S8 392.967 8 256 119.033 8 256 8s248 111.033 248 248zM227.314 387.314l184-184c6.248-6.248 6.248-16.379 0-22.627l-22.627-22.627c-6.248-6.249-16.379-6.249-22.628 0L216 308.118l-70.059-70.059c-6.248-6.248-16.379-6.248-22.628 0l-22.627 22.627c-6.248 6.248-6.248 16.379 0 22.627l104 104c6.249 6.249 16.379 6.249 22.628.001z"}}]})(e)}function nA(e){return Me({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M173.898 439.404l-166.4-166.4c-9.997-9.997-9.997-26.206 0-36.204l36.203-36.204c9.997-9.998 26.207-9.998 36.204 0L192 312.69 432.095 72.596c9.997-9.997 26.207-9.997 36.204 0l36.203 36.204c9.997 9.997 9.997 26.206 0 36.204l-294.4 294.401c-9.998 9.997-26.207 9.997-36.204-.001z"}}]})(e)}function GF(e){return Me({tag:"svg",attr:{viewBox:"0 0 320 512"},child:[{tag:"path",attr:{d:"M34.52 239.03L228.87 44.69c9.37-9.37 24.57-9.37 33.94 0l22.67 22.67c9.36 9.36 9.37 24.52.04 33.9L131.49 256l154.02 154.75c9.34 9.38 9.32 24.54-.04 33.9l-22.67 22.67c-9.37 9.37-24.57 9.37-33.94 0L34.52 272.97c-9.37-9.37-9.37-24.57 0-33.94z"}}]})(e)}function jF(e){return Me({tag:"svg",attr:{viewBox:"0 0 320 512"},child:[{tag:"path",attr:{d:"M285.476 272.971L91.132 467.314c-9.373 9.373-24.569 9.373-33.941 0l-22.667-22.667c-9.357-9.357-9.375-24.522-.04-33.901L188.505 256 34.484 101.255c-9.335-9.379-9.317-24.544.04-33.901l22.667-22.667c9.373-9.373 24.569-9.373 33.941 0L285.475 239.03c9.373 9.372 9.373 24.568.001 33.941z"}}]})(e)}function $F(e){return Me({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M256 8C119 8 8 119 8 256s111 248 248 248 248-111 248-248S393 8 256 8z"}}]})(e)}function HF(e){return Me({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M464 0c26.51 0 48 21.49 48 48v288c0 26.51-21.49 48-48 48H176c-26.51 0-48-21.49-48-48V48c0-26.51 21.49-48 48-48h288M176 416c-44.112 0-80-35.888-80-80V128H48c-26.51 0-48 21.49-48 48v288c0 26.51 21.49 48 48 48h288c26.51 0 48-21.49 48-48v-48H176z"}}]})(e)}function Tu(e){return Me({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M487.4 315.7l-42.6-24.6c4.3-23.2 4.3-47 0-70.2l42.6-24.6c4.9-2.8 7.1-8.6 5.5-14-11.1-35.6-30-67.8-54.7-94.6-3.8-4.1-10-5.1-14.8-2.3L380.8 110c-17.9-15.4-38.5-27.3-60.8-35.1V25.8c0-5.6-3.9-10.5-9.4-11.7-36.7-8.2-74.3-7.8-109.2 0-5.5 1.2-9.4 6.1-9.4 11.7V75c-22.2 7.9-42.8 19.8-60.8 35.1L88.7 85.5c-4.9-2.8-11-1.9-14.8 2.3-24.7 26.7-43.6 58.9-54.7 94.6-1.7 5.4.6 11.2 5.5 14L67.3 221c-4.3 23.2-4.3 47 0 70.2l-42.6 24.6c-4.9 2.8-7.1 8.6-5.5 14 11.1 35.6 30 67.8 54.7 94.6 3.8 4.1 10 5.1 14.8 2.3l42.6-24.6c17.9 15.4 38.5 27.3 60.8 35.1v49.2c0 5.6 3.9 10.5 9.4 11.7 36.7 8.2 74.3 7.8 109.2 0 5.5-1.2 9.4-6.1 9.4-11.7v-49.2c22.2-7.9 42.8-19.8 60.8-35.1l42.6 24.6c4.9 2.8 11 1.9 14.8-2.3 24.7-26.7 43.6-58.9 54.7-94.6 1.5-5.5-.7-11.3-5.6-14.1zM256 336c-44.1 0-80-35.9-80-80s35.9-80 80-80 80 35.9 80 80-35.9 80-80 80z"}}]})(e)}function zF(e){return Me({tag:"svg",attr:{viewBox:"0 0 496 512"},child:[{tag:"path",attr:{d:"M248 8C111 8 0 119 0 256s111 248 248 248 248-111 248-248S385 8 248 8zM88 256H56c0-105.9 86.1-192 192-192v32c-88.2 0-160 71.8-160 160zm160 96c-53 0-96-43-96-96s43-96 96-96 96 43 96 96-43 96-96 96zm0-128c-17.7 0-32 14.3-32 32s14.3 32 32 32 32-14.3 32-32-14.3-32-32-32z"}}]})(e)}function VF(e){return Me({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M320 448v40c0 13.255-10.745 24-24 24H24c-13.255 0-24-10.745-24-24V120c0-13.255 10.745-24 24-24h72v296c0 30.879 25.121 56 56 56h168zm0-344V0H152c-13.255 0-24 10.745-24 24v368c0 13.255 10.745 24 24 24h272c13.255 0 24-10.745 24-24V128H344c-13.2 0-24-10.8-24-24zm120.971-31.029L375.029 7.029A24 24 0 0 0 358.059 0H352v96h96v-6.059a24 24 0 0 0-7.029-16.97z"}}]})(e)}function iA(e){return Me({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M500 224h-30.364C455.724 130.325 381.675 56.276 288 42.364V12c0-6.627-5.373-12-12-12h-40c-6.627 0-12 5.373-12 12v30.364C130.325 56.276 56.276 130.325 42.364 224H12c-6.627 0-12 5.373-12 12v40c0 6.627 5.373 12 12 12h30.364C56.276 381.675 130.325 455.724 224 469.636V500c0 6.627 5.373 12 12 12h40c6.627 0 12-5.373 12-12v-30.364C381.675 455.724 455.724 381.675 469.636 288H500c6.627 0 12-5.373 12-12v-40c0-6.627-5.373-12-12-12zM288 404.634V364c0-6.627-5.373-12-12-12h-40c-6.627 0-12 5.373-12 12v40.634C165.826 392.232 119.783 346.243 107.366 288H148c6.627 0 12-5.373 12-12v-40c0-6.627-5.373-12-12-12h-40.634C119.768 165.826 165.757 119.783 224 107.366V148c0 6.627 5.373 12 12 12h40c6.627 0 12-5.373 12-12v-40.634C346.174 119.768 392.217 165.757 404.634 224H364c-6.627 0-12 5.373-12 12v40c0 6.627 5.373 12 12 12h40.634C392.232 346.174 346.243 392.217 288 404.634zM288 256c0 17.673-14.327 32-32 32s-32-14.327-32-32c0-17.673 14.327-32 32-32s32 14.327 32 32z"}}]})(e)}function es(e){return Me({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M216 0h80c13.3 0 24 10.7 24 24v168h87.7c17.8 0 26.7 21.5 14.1 34.1L269.7 378.3c-7.5 7.5-19.8 7.5-27.3 0L90.1 226.1c-12.6-12.6-3.7-34.1 14.1-34.1H192V24c0-13.3 10.7-24 24-24zm296 376v112c0 13.3-10.7 24-24 24H24c-13.3 0-24-10.7-24-24V376c0-13.3 10.7-24 24-24h146.7l49 49c20.1 20.1 52.5 20.1 72.6 0l49-49H488c13.3 0 24 10.7 24 24zm-124 88c0-11-9-20-20-20s-20 9-20 20 9 20 20 20 20-9 20-20zm64 0c0-11-9-20-20-20s-20 9-20 20 9 20 20 20 20-9 20-20z"}}]})(e)}function oA(e){return Me({tag:"svg",attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M402.6 83.2l90.2 90.2c3.8 3.8 3.8 10 0 13.8L274.4 405.6l-92.8 10.3c-12.4 1.4-22.9-9.1-21.5-21.5l10.3-92.8L388.8 83.2c3.8-3.8 10-3.8 13.8 0zm162-22.9l-48.8-48.8c-15.2-15.2-39.9-15.2-55.2 0l-35.4 35.4c-3.8 3.8-3.8 10 0 13.8l90.2 90.2c3.8 3.8 10 3.8 13.8 0l35.4-35.4c15.2-15.3 15.2-40 0-55.2zM384 346.2V448H64V128h229.8c3.2 0 6.2-1.3 8.5-3.5l40-40c7.6-7.6 2.2-20.5-8.5-20.5H48C21.5 64 0 85.5 0 112v352c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V306.2c0-10.7-12.9-16-20.5-8.5l-40 40c-2.2 2.3-3.5 5.3-3.5 8.5z"}}]})(e)}function xh(e){return Me({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M328 256c0 39.8-32.2 72-72 72s-72-32.2-72-72 32.2-72 72-72 72 32.2 72 72zm104-72c-39.8 0-72 32.2-72 72s32.2 72 72 72 72-32.2 72-72-32.2-72-72-72zm-352 0c-39.8 0-72 32.2-72 72s32.2 72 72 72 72-32.2 72-72-32.2-72-72-72z"}}]})(e)}function XF(e){return Me({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M497.941 273.941c18.745-18.745 18.745-49.137 0-67.882l-160-160c-18.745-18.745-49.136-18.746-67.883 0l-256 256c-18.745 18.745-18.745 49.137 0 67.882l96 96A48.004 48.004 0 0 0 144 480h356c6.627 0 12-5.373 12-12v-40c0-6.627-5.373-12-12-12H355.883l142.058-142.059zm-302.627-62.627l137.373 137.373L265.373 416H150.628l-80-80 124.686-124.686z"}}]})(e)}function WF(e){return Me({tag:"svg",attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M569.517 440.013C587.975 472.007 564.806 512 527.94 512H48.054c-36.937 0-59.999-40.055-41.577-71.987L246.423 23.985c18.467-32.009 64.72-31.951 83.154 0l239.94 416.028zM288 354c-25.405 0-46 20.595-46 46s20.595 46 46 46 46-20.595 46-46-20.595-46-46-46zm-43.673-165.346l7.418 136c.347 6.364 5.609 11.346 11.982 11.346h48.546c6.373 0 11.635-4.982 11.982-11.346l7.418-136c.375-6.874-5.098-12.654-11.982-12.654h-63.383c-6.884 0-12.356 5.78-11.981 12.654z"}}]})(e)}function YF(e){return Me({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M212.686 315.314L120 408l32.922 31.029c15.12 15.12 4.412 40.971-16.97 40.971h-112C10.697 480 0 469.255 0 456V344c0-21.382 25.803-32.09 40.922-16.971L72 360l92.686-92.686c6.248-6.248 16.379-6.248 22.627 0l25.373 25.373c6.249 6.248 6.249 16.378 0 22.627zm22.628-118.628L328 104l-32.922-31.029C279.958 57.851 290.666 32 312.048 32h112C437.303 32 448 42.745 448 56v112c0 21.382-25.803 32.09-40.922 16.971L376 152l-92.686 92.686c-6.248 6.248-16.379 6.248-22.627 0l-25.373-25.373c-6.249-6.248-6.249-16.378 0-22.627z"}}]})(e)}function Ob(e){return Me({tag:"svg",attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M320 400c-75.85 0-137.25-58.71-142.9-133.11L72.2 185.82c-13.79 17.3-26.48 35.59-36.72 55.59a32.35 32.35 0 0 0 0 29.19C89.71 376.41 197.07 448 320 448c26.91 0 52.87-4 77.89-10.46L346 397.39a144.13 144.13 0 0 1-26 2.61zm313.82 58.1l-110.55-85.44a331.25 331.25 0 0 0 81.25-102.07 32.35 32.35 0 0 0 0-29.19C550.29 135.59 442.93 64 320 64a308.15 308.15 0 0 0-147.32 37.7L45.46 3.37A16 16 0 0 0 23 6.18L3.37 31.45A16 16 0 0 0 6.18 53.9l588.36 454.73a16 16 0 0 0 22.46-2.81l19.64-25.27a16 16 0 0 0-2.82-22.45zm-183.72-142l-39.3-30.38A94.75 94.75 0 0 0 416 256a94.76 94.76 0 0 0-121.31-92.21A47.65 47.65 0 0 1 304 192a46.64 46.64 0 0 1-1.54 10l-73.61-56.89A142.31 142.31 0 0 1 320 112a143.92 143.92 0 0 1 144 144c0 21.63-5.29 41.79-13.9 60.11z"}}]})(e)}function sA(e){return Me({tag:"svg",attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M572.52 241.4C518.29 135.59 410.93 64 288 64S57.68 135.64 3.48 241.41a32.35 32.35 0 0 0 0 29.19C57.71 376.41 165.07 448 288 448s230.32-71.64 284.52-177.41a32.35 32.35 0 0 0 0-29.19zM288 400a144 144 0 1 1 144-144 143.93 143.93 0 0 1-144 144zm0-240a95.31 95.31 0 0 0-25.31 3.79 47.85 47.85 0 0 1-66.9 66.9A95.78 95.78 0 1 0 288 160z"}}]})(e)}function O2(e){return Me({tag:"svg",attr:{viewBox:"0 0 384 512"},child:[{tag:"path",attr:{d:"M224 136V0H24C10.7 0 0 10.7 0 24v464c0 13.3 10.7 24 24 24h336c13.3 0 24-10.7 24-24V160H248c-13.2 0-24-10.8-24-24zm76.45 211.36l-96.42 95.7c-6.65 6.61-17.39 6.61-24.04 0l-96.42-95.7C73.42 337.29 80.54 320 94.82 320H160v-80c0-8.84 7.16-16 16-16h32c8.84 0 16 7.16 16 16v80h65.18c14.28 0 21.4 17.29 11.27 27.36zM377 105L279.1 7c-4.5-4.5-10.6-7-17-7H256v128h128v-6.1c0-6.3-2.5-12.4-7-16.9z"}}]})(e)}function KF(e){return Me({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M16 288c-8.8 0-16 7.2-16 16v32c0 8.8 7.2 16 16 16h112v-64zm489-183L407.1 7c-4.5-4.5-10.6-7-17-7H384v128h128v-6.1c0-6.3-2.5-12.4-7-16.9zm-153 31V0H152c-13.3 0-24 10.7-24 24v264h128v-65.2c0-14.3 17.3-21.4 27.4-11.3L379 308c6.6 6.7 6.6 17.4 0 24l-95.7 96.4c-10.1 10.1-27.4 3-27.4-11.3V352H128v136c0 13.3 10.7 24 24 24h336c13.3 0 24-10.7 24-24V160H376c-13.2 0-24-10.8-24-24z"}}]})(e)}function qF(e){return Me({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M487.976 0H24.028C2.71 0-8.047 25.866 7.058 40.971L192 225.941V432c0 7.831 3.821 15.17 10.237 19.662l80 55.98C298.02 518.69 320 507.493 320 487.98V225.941l184.947-184.97C520.021 25.896 509.338 0 487.976 0z"}}]})(e)}function ny(e){return Me({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M464 128H272l-64-64H48C21.49 64 0 85.49 0 112v288c0 26.51 21.49 48 48 48h416c26.51 0 48-21.49 48-48V176c0-26.51-21.49-48-48-48z"}}]})(e)}function Su(e){return Me({tag:"svg",attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M280.37 148.26L96 300.11V464a16 16 0 0 0 16 16l112.06-.29a16 16 0 0 0 15.92-16V368a16 16 0 0 1 16-16h64a16 16 0 0 1 16 16v95.64a16 16 0 0 0 16 16.05L464 480a16 16 0 0 0 16-16V300L295.67 148.26a12.19 12.19 0 0 0-15.3 0zM571.6 251.47L488 182.56V44.05a12 12 0 0 0-12-12h-56a12 12 0 0 0-12 12v72.61L318.47 43a48 48 0 0 0-61 0L4.34 251.47a12 12 0 0 0-1.6 16.9l25.5 31A12 12 0 0 0 45.15 301l235.22-193.74a12.19 12.19 0 0 1 15.3 0L530.9 301a12 12 0 0 0 16.9-1.6l25.5-31a12 12 0 0 0-1.7-16.93z"}}]})(e)}function aA(e){return Me({tag:"svg",attr:{viewBox:"0 0 192 512"},child:[{tag:"path",attr:{d:"M20 424.229h20V279.771H20c-11.046 0-20-8.954-20-20V212c0-11.046 8.954-20 20-20h112c11.046 0 20 8.954 20 20v212.229h20c11.046 0 20 8.954 20 20V492c0 11.046-8.954 20-20 20H20c-11.046 0-20-8.954-20-20v-47.771c0-11.046 8.954-20 20-20zM96 0C56.235 0 24 32.235 24 72s32.235 72 72 72 72-32.235 72-72S135.764 0 96 0z"}}]})(e)}function ZF(e){return Me({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M256 8C119 8 8 119 8 256s111 248 248 248 248-111 248-248S393 8 256 8zM124 296c-6.6 0-12-5.4-12-12v-56c0-6.6 5.4-12 12-12h264c6.6 0 12 5.4 12 12v56c0 6.6-5.4 12-12 12H124z"}}]})(e)}function iy(e){return Me({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M416 208H32c-17.67 0-32 14.33-32 32v32c0 17.67 14.33 32 32 32h384c17.67 0 32-14.33 32-32v-32c0-17.67-14.33-32-32-32z"}}]})(e)}function vp(e){return Me({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M470.38 1.51L150.41 96A32 32 0 0 0 128 126.51v261.41A139 139 0 0 0 96 384c-53 0-96 28.66-96 64s43 64 96 64 96-28.66 96-64V214.32l256-75v184.61a138.4 138.4 0 0 0-32-3.93c-53 0-96 28.66-96 64s43 64 96 64 96-28.65 96-64V32a32 32 0 0 0-41.62-30.49z"}}]})(e)}function JF(e){return Me({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M128 184c0-30.879 25.122-56 56-56h136V56c0-13.255-10.745-24-24-24h-80.61C204.306 12.89 183.637 0 160 0s-44.306 12.89-55.39 32H24C10.745 32 0 42.745 0 56v336c0 13.255 10.745 24 24 24h104V184zm32-144c13.255 0 24 10.745 24 24s-10.745 24-24 24-24-10.745-24-24 10.745-24 24-24zm184 248h104v200c0 13.255-10.745 24-24 24H184c-13.255 0-24-10.745-24-24V184c0-13.255 10.745-24 24-24h136v104c0 13.2 10.8 24 24 24zm104-38.059V256h-96v-96h6.059a24 24 0 0 1 16.97 7.029l65.941 65.941a24.002 24.002 0 0 1 7.03 16.971z"}}]})(e)}function lA(e){return Me({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M144 479H48c-26.5 0-48-21.5-48-48V79c0-26.5 21.5-48 48-48h96c26.5 0 48 21.5 48 48v352c0 26.5-21.5 48-48 48zm304-48V79c0-26.5-21.5-48-48-48h-96c-26.5 0-48 21.5-48 48v352c0 26.5 21.5 48 48 48h96c26.5 0 48-21.5 48-48z"}}]})(e)}function gp(e){return Me({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M290.74 93.24l128.02 128.02-277.99 277.99-114.14 12.6C11.35 513.54-1.56 500.62.14 485.34l12.7-114.22 277.9-277.88zm207.2-19.06l-60.11-60.11c-18.75-18.75-49.16-18.75-67.91 0l-56.55 56.55 128.02 128.02 56.55-56.55c18.75-18.76 18.75-49.16 0-67.91z"}}]})(e)}function uA(e){return Me({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M424.4 214.7L72.4 6.6C43.8-10.3 0 6.1 0 47.9V464c0 37.5 40.7 60.1 72.4 41.3l352-208c31.4-18.5 31.5-64.1 0-82.6z"}}]})(e)}function QF(e){return Me({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M256 8C119 8 8 119 8 256s111 248 248 248 248-111 248-248S393 8 256 8zm144 276c0 6.6-5.4 12-12 12h-92v92c0 6.6-5.4 12-12 12h-56c-6.6 0-12-5.4-12-12v-92h-92c-6.6 0-12-5.4-12-12v-56c0-6.6 5.4-12 12-12h92v-92c0-6.6 5.4-12 12-12h56c6.6 0 12 5.4 12 12v92h92c6.6 0 12 5.4 12 12v56z"}}]})(e)}function au(e){return Me({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M416 208H272V64c0-17.67-14.33-32-32-32h-32c-17.67 0-32 14.33-32 32v144H32c-17.67 0-32 14.33-32 32v32c0 17.67 14.33 32 32 32h144v144c0 17.67 14.33 32 32 32h32c17.67 0 32-14.33 32-32V304h144c17.67 0 32-14.33 32-32v-32c0-17.67-14.33-32-32-32z"}}]})(e)}function cA(e){return Me({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M433.941 129.941l-83.882-83.882A48 48 0 0 0 316.118 32H48C21.49 32 0 53.49 0 80v352c0 26.51 21.49 48 48 48h352c26.51 0 48-21.49 48-48V163.882a48 48 0 0 0-14.059-33.941zM224 416c-35.346 0-64-28.654-64-64 0-35.346 28.654-64 64-64s64 28.654 64 64c0 35.346-28.654 64-64 64zm96-304.52V212c0 6.627-5.373 12-12 12H76c-6.627 0-12-5.373-12-12V108c0-6.627 5.373-12 12-12h228.52c3.183 0 6.235 1.264 8.485 3.515l3.48 3.48A11.996 11.996 0 0 1 320 111.48z"}}]})(e)}function eM(e){return Me({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M505 442.7L405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9 0 208 0S0 93.1 0 208s93.1 208 208 208c48.3 0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9 0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7 0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7 0 128 57.2 128 128 0 70.7-57.2 128-128 128z"}}]})(e)}function tM(e){return Me({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M304 48c0 26.51-21.49 48-48 48s-48-21.49-48-48 21.49-48 48-48 48 21.49 48 48zm-48 368c-26.51 0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48-21.49-48-48-48zm208-208c-26.51 0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48-21.49-48-48-48zM96 256c0-26.51-21.49-48-48-48S0 229.49 0 256s21.49 48 48 48 48-21.49 48-48zm12.922 99.078c-26.51 0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48c0-26.509-21.491-48-48-48zm294.156 0c-26.51 0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48c0-26.509-21.49-48-48-48zM108.922 60.922c-26.51 0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48-21.491-48-48-48z"}}]})(e)}function hA(e){return Me({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M64 468V44c0-6.6 5.4-12 12-12h48c6.6 0 12 5.4 12 12v176.4l195.5-181C352.1 22.3 384 36.6 384 64v384c0 27.4-31.9 41.7-52.5 24.6L136 292.7V468c0 6.6-5.4 12-12 12H76c-6.6 0-12-5.4-12-12z"}}]})(e)}function fA(e){return Me({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M384 44v424c0 6.6-5.4 12-12 12h-48c-6.6 0-12-5.4-12-12V291.6l-195.5 181C95.9 489.7 64 475.4 64 448V64c0-27.4 31.9-41.7 52.5-24.6L312 219.3V44c0-6.6 5.4-12 12-12h48c6.6 0 12 5.4 12 12z"}}]})(e)}function dA(e){return Me({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M400 32H48C21.5 32 0 53.5 0 80v352c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V80c0-26.5-21.5-48-48-48z"}}]})(e)}function pA(e){return Me({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M370.72 133.28C339.458 104.008 298.888 87.962 255.848 88c-77.458.068-144.328 53.178-162.791 126.85-1.344 5.363-6.122 9.15-11.651 9.15H24.103c-7.498 0-13.194-6.807-11.807-14.176C33.933 94.924 134.813 8 256 8c66.448 0 126.791 26.136 171.315 68.685L463.03 40.97C478.149 25.851 504 36.559 504 57.941V192c0 13.255-10.745 24-24 24H345.941c-21.382 0-32.09-25.851-16.971-40.971l41.75-41.749zM32 296h134.059c21.382 0 32.09 25.851 16.971 40.971l-41.75 41.75c31.262 29.273 71.835 45.319 114.876 45.28 77.418-.07 144.315-53.144 162.787-126.849 1.344-5.363 6.122-9.15 11.651-9.15h57.304c7.498 0 13.194 6.807 11.807 14.176C478.067 417.076 377.187 504 256 504c-66.448 0-126.791-26.136-171.315-68.685L48.97 471.03C33.851 486.149 8 475.441 8 454.059V320c0-13.255 10.745-24 24-24z"}}]})(e)}function rM(e){return Me({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M256 8C119 8 8 119 8 256s111 248 248 248 248-111 248-248S393 8 256 8zm121.6 313.1c4.7 4.7 4.7 12.3 0 17L338 377.6c-4.7 4.7-12.3 4.7-17 0L256 312l-65.1 65.6c-4.7 4.7-12.3 4.7-17 0L134.4 338c-4.7-4.7-4.7-12.3 0-17l65.6-65-65.6-65.1c-4.7-4.7-4.7-12.3 0-17l39.6-39.6c4.7-4.7 12.3-4.7 17 0l65 65.7 65.1-65.6c4.7-4.7 12.3-4.7 17 0l39.6 39.6c4.7 4.7 4.7 12.3 0 17L312 256l65.6 65.1z"}}]})(e)}function Zi(e){return Me({tag:"svg",attr:{viewBox:"0 0 352 512"},child:[{tag:"path",attr:{d:"M242.72 256l100.07-100.07c12.28-12.28 12.28-32.19 0-44.48l-22.24-22.24c-12.28-12.28-32.19-12.28-44.48 0L176 189.28 75.93 89.21c-12.28-12.28-32.19-12.28-44.48 0L9.21 111.45c-12.28 12.28-12.28 32.19 0 44.48L109.28 256 9.21 356.07c-12.28 12.28-12.28 32.19 0 44.48l22.24 22.24c12.28 12.28 32.2 12.28 44.48 0L176 322.72l100.07 100.07c12.28 12.28 32.2 12.28 44.48 0l22.24-22.24c12.28-12.28 12.28-32.19 0-44.48L242.72 256z"}}]})(e)}function nM(e){return Me({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M501.1 395.7L384 278.6c-23.1-23.1-57.6-27.6-85.4-13.9L192 158.1V96L64 0 0 64l96 128h62.1l106.6 106.6c-13.6 27.8-9.2 62.3 13.9 85.4l117.1 117.1c14.6 14.6 38.2 14.6 52.7 0l52.7-52.7c14.5-14.6 14.5-38.2 0-52.7zM331.7 225c28.3 0 54.9 11 74.9 31l19.4 19.4c15.8-6.9 30.8-16.5 43.8-29.5 37.1-37.1 49.7-89.3 37.9-136.7-2.2-9-13.5-12.1-20.1-5.5l-74.4 74.4-67.9-11.3L334 98.9l74.4-74.4c6.6-6.6 3.4-17.9-5.7-20.2-47.4-11.7-99.6.9-136.6 37.9-28.5 28.5-41.9 66.1-41.2 103.6l82.1 82.1c8.1-1.9 16.5-2.9 24.7-2.9zm-103.9 82l-56.7-56.7L18.7 402.8c-25 25-25 65.5 0 90.5s65.5 25 90.5 0l123.6-123.6c-7.6-19.9-9.9-41.6-5-62.7zM64 472c-13.2 0-24-10.8-24-24 0-13.3 10.7-24 24-24s24 10.7 24 24c0 13.2-10.7 24-24 24z"}}]})(e)}function Ji(e){return Me({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M432 32H312l-9.4-18.7A24 24 0 0 0 281.1 0H166.8a23.72 23.72 0 0 0-21.4 13.3L136 32H16A16 16 0 0 0 0 48v32a16 16 0 0 0 16 16h416a16 16 0 0 0 16-16V48a16 16 0 0 0-16-16zM53.2 467a48 48 0 0 0 47.9 45h245.8a48 48 0 0 0 47.9-45L416 128H32z"}}]})(e)}function oy(e){return Me({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M215.03 71.05L126.06 160H24c-13.26 0-24 10.74-24 24v144c0 13.25 10.74 24 24 24h102.06l88.97 88.95c15.03 15.03 40.97 4.47 40.97-16.97V88.02c0-21.46-25.96-31.98-40.97-16.97zM461.64 256l45.64-45.64c6.3-6.3 6.3-16.52 0-22.82l-22.82-22.82c-6.3-6.3-16.52-6.3-22.82 0L416 210.36l-45.64-45.64c-6.3-6.3-16.52-6.3-22.82 0l-22.82 22.82c-6.3 6.3-6.3 16.52 0 22.82L370.36 256l-45.63 45.63c-6.3 6.3-6.3 16.52 0 22.82l22.82 22.82c6.3 6.3 16.52 6.3 22.82 0L416 301.64l45.64 45.64c6.3 6.3 16.52 6.3 22.82 0l22.82-22.82c6.3-6.3 6.3-16.52 0-22.82L461.64 256z"}}]})(e)}function mA(e){return Me({tag:"svg",attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M215.03 71.05L126.06 160H24c-13.26 0-24 10.74-24 24v144c0 13.25 10.74 24 24 24h102.06l88.97 88.95c15.03 15.03 40.97 4.47 40.97-16.97V88.02c0-21.46-25.96-31.98-40.97-16.97zm233.32-51.08c-11.17-7.33-26.18-4.24-33.51 6.95-7.34 11.17-4.22 26.18 6.95 33.51 66.27 43.49 105.82 116.6 105.82 195.58 0 78.98-39.55 152.09-105.82 195.58-11.17 7.32-14.29 22.34-6.95 33.5 7.04 10.71 21.93 14.56 33.51 6.95C528.27 439.58 576 351.33 576 256S528.27 72.43 448.35 19.97zM480 256c0-63.53-32.06-121.94-85.77-156.24-11.19-7.14-26.03-3.82-33.12 7.46s-3.78 26.21 7.41 33.36C408.27 165.97 432 209.11 432 256s-23.73 90.03-63.48 115.42c-11.19 7.14-14.5 22.07-7.41 33.36 6.51 10.36 21.12 15.14 33.12 7.46C447.94 377.94 480 319.54 480 256zm-141.77-76.87c-11.58-6.33-26.19-2.16-32.61 9.45-6.39 11.61-2.16 26.2 9.45 32.61C327.98 228.28 336 241.63 336 256c0 14.38-8.02 27.72-20.92 34.81-11.61 6.41-15.84 21-9.45 32.61 6.43 11.66 21.05 15.8 32.61 9.45 28.23-15.55 45.77-45 45.77-76.88s-17.54-61.32-45.78-76.86z"}}]})(e)}function vA(e){return Me({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M256 8C119 8 8 119 8 256s111 248 248 248 248-111 248-248S393 8 256 8zm0 448c-110.5 0-200-89.5-200-200S145.5 56 256 56s200 89.5 200 200-89.5 200-200 200z"}}]})(e)}function iM(e){return Me({tag:"svg",attr:{fill:"currentColor",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M4.646 1.646a.5.5 0 0 1 .708 0l6 6a.5.5 0 0 1 0 .708l-6 6a.5.5 0 0 1-.708-.708L10.293 8 4.646 2.354a.5.5 0 0 1 0-.708z"}}]})(e)}function oM(e){return Me({tag:"svg",attr:{fill:"currentColor",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M8 12a1 1 0 1 0 0-2 1 1 0 0 0 0 2z"}},{tag:"path",attr:{d:"M4 0a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2H4zm1 2h6a1 1 0 0 1 1 1v2.5a1 1 0 0 1-1 1H5a1 1 0 0 1-1-1V3a1 1 0 0 1 1-1zm3 12a3 3 0 1 1 0-6 3 3 0 0 1 0 6z"}}]})(e)}function LE(e){return Me({tag:"svg",attr:{fill:"currentColor",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M7.022 1.566a1.13 1.13 0 0 1 1.96 0l6.857 11.667c.457.778-.092 1.767-.98 1.767H1.144c-.889 0-1.437-.99-.98-1.767L7.022 1.566z"}}]})(e)}var Tn={exports:{}};Tn.exports=$3;var j3=Tn.exports.isMobile=$3;Tn.exports.default=$3;const sM=/(android|bb\d+|meego).+mobile|armv7l|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series[46]0|samsungbrowser|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i,aM=/CrOS/,lM=/android|ipad|playbook|silk/i;function $3(e){e||(e={});let t=e.ua;if(!t&&typeof navigator<"u"&&(t=navigator.userAgent),t&&t.headers&&typeof t.headers["user-agent"]=="string"&&(t=t.headers["user-agent"]),typeof t!="string")return!1;let r=sM.test(t)&&!aM.test(t)||!!e.tablet&&lM.test(t);return!r&&e.tablet&&e.featureDetect&&navigator&&navigator.maxTouchPoints>1&&t.indexOf("Macintosh")!==-1&&t.indexOf("Safari")!==-1&&(r=!0),r}const je="Genshin",Rs="3.0";console.log(`${je}-V${Rs}`);const uM=`
        Added VSRG mode, zen keyboard, visual sheet in the player and more!
        Check the changelog page for more info
    `.trim(),cM="https://raw.githubusercontent.com/Specy/genshin-music/main/public/updates.json",Zv=window==null?void 0:window.__TAURI__,H3=!!Zv,Ko={noteComposer:"note-composer",note:"note",noteAnimation:"note-animation",approachCircle:"approach-circle",noteName:"note-name"},sn=new(window.AudioContext||window.webkitAudioContext),ut={text:{light:"#edeae5",dark:"#151414",note:"#aaaa82"}},z3={up:128,down:144},Lb=!!navigator.requestMIDIAccess,Pr=["Lyre","Vintage-Lyre","Zither","Old-Zither","DunDun"],Xr=200,V3=21,gA={Cb:["Cb","Dbb","Db","Ebb","Eb","Fb","Gbb","Gb","Abb","Ab","Bbb","Bb"],C:["C","Db","D","Eb","E","F","Gb","G","Ab","A","Bb","B"],"C#":["C#","D","D#","E","E#","F#","G","G#","A","A#","B","B#"],Db:["Db","Ebb","Eb","Fb","F","Gb","Abb","Ab","Bbb","Bb","Cb","C"],D:["D","Eb","E","F","F#","G","Ab","A","Bb","B","C","C#"],"D#":["D#","E","E#","F#","F##","G#","A","A#","B","B#","C#","C##"],Eb:["Eb","Fb","F","Gb","G","Ab","Bbb","Bb","Cb","C","Db","D"],E:["E","F","F#","G","G#","A","Bb","B","C","C#","D","D#"],"E#":["E#","F#","F##","G#","G##","A#","B","B#","C#","C##","D#","D##"],Fb:["Fb","Gbb","Gb","Abb","Ab","Bbb","Cbb","Cb","Dbb","Db","Ebb","Eb"],F:["F","Gb","G","Ab","A","Bb","Cb","C","Db","D","Eb","E"],"F#":["F#","G","G#","A","A#","B","C","C#","D","D#","E","E#"],Gb:["Gb","Abb","Ab","Bbb","Bb","Cb","Dbb","Db","Ebb","Eb","Fb","F"],G:["G","Ab","A","Bb","B","C","Db","D","Eb","E","F","F#"],"G#":["G#","A","A#","B","B#","C#","D","D#","E","E#","F#","F##"],Ab:["Ab","Bbb","Bb","Cb","C","Db","Ebb","Eb","Fb","F","Gb","G"],A:["A","Bb","B","C","C#","D","Eb","E","F","F#","G","G#"],"A#":["A#","B","B#","C#","C##","D#","E","E#","F#","F##","G#","G##"],Bb:["Bb","Cb","C","Db","D","Eb","Fb","F","Gb","G","Ab","A"],B:["B","C","C#","D","D#","E","F","F#","G","G#","A","A#"],"B#":["B#","C#","C##","D#","D##","E#","F#","F##","G#","G##","A#","A##"],"":["","","","","","","","","","","",""]},Jt={defaultSky:["C","D","E","F","G","A","B","C","D","E","F","G","A","B","C"],defaultGenshin:["C","D","E","F","G","A","B","C","D","E","F","G","A","B","C","D","E","F","G","A","B"],skyBell:["C","D","G","A","C","D","G","A"],skyHandpan:["D","A","C","D","F","G","A","C"],defaultDrums:["C","D","E","F","G","A","B","C"],skySFX6:["","","","","",""],skySFX14:["C#","E","G","A#","C#","E","G","A#","C#","E","G","A#","C#","E"],genshinVintageLyre:["C","Db","Eb","F","G","Ab","Bb","C","D","Eb","F","G","A","Bb","C","D","Eb","F","G","A","Bb"]};Object.freeze(gA);Object.freeze(Jt);const ir={defaultGenshin:{keyboardLayout:"Q W E R T Y U A S D F G H J Z X C V B N M".split(" "),mobileLayout:"do re mi fa so la ti do re mi fa so la ti do re mi fa so la ti".split(" "),abcLayout:"A1 A2 A3 A4 A5 A6 A7 B1 B2 B3 B4 B5 B6 B7 C1 C2 C3 C4 C5 C6 C7".split(" ")},defaultDrums:{keyboardLayout:"Q W E R A S D F".split(" "),mobileLayout:"do re mi fa do re mi fa".split(" "),abcLayout:"A1 A2 A3 A4B1 B2 B3 B4".split(" ")},defaultSky:{keyboardLayout:"Q W E R T A S D F G Z X C V B".split(" "),mobileLayout:"do re mi fa so do re mi fa so do re mi fa so".split(" "),abcLayout:"A1 A2 A3 A4 A5 B1 B2 B3 B4 B5 C1 C2 C3 C4 C5".split(" ")},skySFX6:{keyboardLayout:"Q W E A S D".split(" "),mobileLayout:"do re mi do re mi".split(" "),abcLayout:"A1 A2 A3 B1 B2 B3".split(" ")}},or={defaultSky:"dmcr dm cr dm cr cr dm dmcr dm cr cr dm cr dm dmcr".split(" "),defaultSkyDrums:"cr dm cr dm cr dm cr dm".split(" "),defaultGenshinDrums:"do re mi fa do re mi fa".split(" "),skySFX6:"cr dm cr cr dm cr".split(" "),defaultGenshin:"do re mi fa so la ti do re mi fa so la ti do re mi fa so la ti".split(" "),genshinVintageLyre:"do reb mib fa so lab tib do re mib fa so la tib do re mib fa so la tib".split(" ")},Pl={notes:15,family:"percussive",midiName:"synth drum",baseNotes:Jt.defaultSky,layout:ir.defaultSky,icons:or.defaultSky},hM={Lyre:{notes:21,family:"strings",midiName:"pizzicato strings",baseNotes:Jt.defaultGenshin,layout:ir.defaultGenshin,icons:or.defaultGenshin},Zither:{notes:21,fill:"#cdb68e",family:"strings",midiName:"pizzicato strings",clickColor:"#ddcba8",baseNotes:Jt.defaultGenshin,layout:ir.defaultGenshin,icons:or.defaultGenshin},"Vintage-Lyre":{notes:21,family:"strings",midiName:"pizzicato strings",fill:"#7FB363",clickColor:"#7FB363",baseNotes:Jt.genshinVintageLyre,layout:ir.defaultGenshin,icons:or.genshinVintageLyre},"Old-Zither":{notes:21,fill:"#cdb68e",family:"strings",midiName:"pizzicato strings",clickColor:"#ddcba8",baseNotes:Jt.defaultGenshin,layout:ir.defaultGenshin,icons:or.defaultGenshin},DunDun:{notes:8,family:"percussive",midiName:"synth drum",fill:"#F99C55",clickColor:"#f5a262",baseNotes:Jt.defaultDrums,layout:ir.defaultDrums,icons:or.defaultGenshinDrums},SFX_Dance:{notes:6,family:"percussive",midiName:"synth drum",baseNotes:Jt.skySFX6,layout:ir.skySFX6,icons:or.skySFX6},SFX_BirdCall:Pl,SFX_CrabCall:Pl,SFX_FishCall:Pl,SFX_SpiritMantaCall:Pl,SFX_JellyCall:Pl,SFX_MantaCall:Pl,SFX_MothCall:Pl,Panflute:{notes:15,family:"pipe",midiName:"pan flute",baseNotes:Jt.defaultSky,layout:ir.defaultSky,icons:or.defaultSky},LightGuitar:{notes:15,family:"guitar",midiName:"electric guitar (clean)",baseNotes:Jt.defaultSky,layout:ir.defaultSky,icons:or.defaultSky},Bells:{notes:8,family:"chromatic percussion",midiName:"tubular bells",baseNotes:Jt.skyBell,layout:ir.defaultDrums,icons:or.defaultSkyDrums},Trumpet:{notes:15,family:"brass",midiName:"trumpet",baseNotes:Jt.defaultSky,layout:ir.defaultSky,icons:or.defaultSky},Contrabass:{notes:15,family:"guitar",midiName:"contrabass",baseNotes:Jt.defaultSky,layout:ir.defaultSky,icons:or.defaultSky},Drum:{notes:8,family:"percussive",midiName:"synth drum",baseNotes:Jt.defaultDrums,layout:ir.defaultDrums,icons:or.defaultSkyDrums},Flute:{notes:15,family:"pipe",midiName:"flute",baseNotes:Jt.defaultSky,layout:ir.defaultSky,icons:or.defaultSky},Guitar:{notes:15,family:"guitar",midiName:"acoustic guitar (steel)",baseNotes:Jt.defaultSky,layout:ir.defaultSky,icons:or.defaultSky},HandPan:{notes:8,family:"percussive",midiName:"steel drums",baseNotes:Jt.skyHandpan,layout:ir.defaultDrums,icons:or.defaultSkyDrums},ToyUkulele:{notes:15,family:"guitar",midiName:"acoustic guitar (nylon)",baseNotes:Jt.defaultSky,layout:ir.defaultSky,icons:or.defaultSky},Harp:{notes:15,family:"strings",midiName:"orchestral harp",baseNotes:Jt.defaultSky,layout:ir.defaultSky,icons:or.defaultSky},Horn:{notes:15,family:"brass",midiName:"tuba",baseNotes:Jt.defaultSky,layout:ir.defaultSky,icons:or.defaultSky},Piano:{notes:15,family:"piano",midiName:"acoustic grand piano",baseNotes:Jt.defaultSky,layout:ir.defaultSky,icons:or.defaultSky},Pipa:{notes:15,family:"reed",midiName:"oboe",baseNotes:Jt.defaultSky,layout:ir.defaultSky,icons:or.defaultSky},Kalimba:{notes:15,family:"piano",midiName:"bright acoustic piano",baseNotes:Jt.defaultSky,layout:ir.defaultSky,icons:or.defaultSky},WinterPiano:{notes:15,family:"piano",midiName:"bright acoustic piano",baseNotes:Jt.defaultSky,layout:ir.defaultSky,icons:or.defaultSky},Xylophone:{notes:15,family:"chromatic percussion",midiName:"xylophone",baseNotes:Jt.defaultSky,layout:ir.defaultSky,icons:or.defaultSky},Ocarina:{notes:15,family:"pipe",midiName:"pan flute",baseNotes:Jt.defaultSky,layout:ir.defaultSky,icons:or.defaultSky}},el=hM,Ub=[.25,.5,.75,1,1.25,1.5,2].map(e=>({name:`x${e}`,value:e})),no=["C","Db","D","Eb","E","F","Gb","G","Ab","A","Bb","B"],fM=new Map(no.map((e,t)=>[e,t])),Fb=[14,15,16,17,18,19,20,7,8,9,10,11,12,13,0,1,2,3,4,5,6].reverse(),sy=[14,15,16,17,18,19,20,7,8,9,10,11,12,13,0],dM={noteData:{background:"#d3bd8e",border:"#de6b45",center:"#de6b45"},horizontalLineBreak:V3/3,standards:[{color:5332079},{color:4739939},{color:1742475},{color:14053935}],layersCombination:new Array(16).fill(0).map((e,t)=>t),breakpoints:[{type:"short",color:"#282875"},{type:"long",color:"#282875"}]},tl=[{id:0,text:"1",changer:1,color:5332079},{id:1,text:"1/2",changer:1/2,color:5338451},{id:2,text:"1/4",changer:1/4,color:4410493},{id:3,text:"1/8",changer:1/8,color:7818605}];function W0(){return JSON.parse((sessionStorage==null?void 0:sessionStorage.getItem("isTwa"))||"null")}const lu=Tn.exports(),pM=[2,1.75,1.5,1.25,1,.75,.5,.25],yA=new Map(Object.entries({48:[14,!1],49:[14,!0],50:[15,!1],51:[15,!0],52:[16,!1],53:[17,!1],54:[17,!0],55:[18,!1],56:[18,!0],57:[19,!1],58:[19,!0],59:[20,!1],60:[7,!1],61:[7,!0],62:[8,!1],63:[8,!0],64:[9,!1],65:[10,!1],66:[10,!0],67:[11,!1],68:[11,!0],69:[12,!1],70:[12,!0],71:[13,!1],72:[0,!1],73:[0,!0],74:[1,!1],75:[1,!0],76:[2,!1],77:[3,!1],78:[3,!0],79:[4,!1],80:[4,!0],81:[5,!1],82:[5,!0],83:[6,!1],84:[6,!1]})),ld={4:["A","S","G","H"],6:["A","S","D","G","H","J"]},Ca={amazing:"#cff3e3",perfect:"#d9af0a",great:"#358a55 ",good:"#380cc4",bad:"#dd8d46",miss:"#f24b5b","":"#ffffff"},mM=["alphabetical","date-created"],UE={upper:84,lower:48},vM=[.5,0],Jv=[.5,1],gM=Object.entries(Object.fromEntries(yA)).filter(([e,t])=>t[1]===!1),yM=new Map(gM.map(([e,t])=>[t[0],Number(e)])),_M=new DOMRect;function Rt(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];throw new Error(typeof e=="number"?"[MobX] minified error nr: "+e+(r.length?" "+r.map(String).join(","):"")+". Find the full error at: https://github.com/mobxjs/mobx/blob/main/packages/mobx/src/errors.ts":"[MobX] "+e)}var bM={};function _A(){return typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof Ni<"u"?Ni:typeof self<"u"?self:bM}var wM=Object.assign,Y0=Object.getOwnPropertyDescriptor,Gs=Object.defineProperty,ay=Object.prototype,Mb=[];Object.freeze(Mb);var bA={};Object.freeze(bA);var xM=typeof Proxy<"u",TM=Object.toString();function wA(){xM||Rt("Proxy not available")}function xA(e){var t=!1;return function(){if(!t)return t=!0,e.apply(this,arguments)}}var Nc=function(){};function Qi(e){return typeof e=="function"}function uu(e){var t=typeof e;switch(t){case"string":case"symbol":case"number":return!0}return!1}function ly(e){return e!==null&&typeof e=="object"}function rl(e){if(!ly(e))return!1;var t=Object.getPrototypeOf(e);if(t==null)return!0;var r=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return typeof r=="function"&&r.toString()===TM}function TA(e){var t=e==null?void 0:e.constructor;return t?t.name==="GeneratorFunction"||t.displayName==="GeneratorFunction":!1}function uy(e,t,r){Gs(e,t,{enumerable:!1,writable:!0,configurable:!0,value:r})}function SA(e,t,r){Gs(e,t,{enumerable:!1,writable:!1,configurable:!0,value:r})}function Eu(e,t){var r="isMobX"+e;return t.prototype[r]=!0,function(n){return ly(n)&&n[r]===!0}}function Th(e){return e instanceof Map}function yp(e){return e instanceof Set}var EA=typeof Object.getOwnPropertySymbols<"u";function SM(e){var t=Object.keys(e);if(!EA)return t;var r=Object.getOwnPropertySymbols(e);return r.length?[].concat(t,r.filter(function(n){return ay.propertyIsEnumerable.call(e,n)})):t}var cy=typeof Reflect<"u"&&Reflect.ownKeys?Reflect.ownKeys:EA?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Object.getOwnPropertyNames;function CA(e){return e===null?null:typeof e=="object"?""+e:e}function js(e,t){return ay.hasOwnProperty.call(e,t)}var EM=Object.getOwnPropertyDescriptors||function(t){var r={};return cy(t).forEach(function(n){r[n]=Y0(t,n)}),r};function FE(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function X3(e,t,r){return t&&FE(e.prototype,t),r&&FE(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function sh(){return sh=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},sh.apply(this,arguments)}function IA(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,Bb(e,t)}function Bb(e,t){return Bb=Object.setPrototypeOf||function(n,i){return n.__proto__=i,n},Bb(e,t)}function ME(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function CM(e,t){if(!!e){if(typeof e=="string")return BE(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return BE(e,t)}}function BE(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Pc(e,t){var r=typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r)return(r=r.call(e)).next.bind(r);if(Array.isArray(e)||(r=CM(e))||t&&e&&typeof e.length=="number"){r&&(e=r);var n=0;return function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var Ho=Symbol("mobx-stored-annotations");function qo(e){function t(r,n){_p(r,n,e)}return Object.assign(t,e)}function _p(e,t,r){js(e,Ho)||uy(e,Ho,sh({},e[Ho])),UM(r)||(e[Ho][t]=r)}function IM(e){return js(e,Ho)||uy(e,Ho,sh({},e[Ho])),e[Ho]}var ct=Symbol("mobx administration"),bp=function(){function e(r){r===void 0&&(r="Atom"),this.name_=void 0,this.isPendingUnobservation_=!1,this.isBeingObserved_=!1,this.observers_=new Set,this.diffValue_=0,this.lastAccessedBy_=0,this.lowestObserverState_=At.NOT_TRACKING_,this.onBOL=void 0,this.onBUOL=void 0,this.name_=r}var t=e.prototype;return t.onBO=function(){this.onBOL&&this.onBOL.forEach(function(n){return n()})},t.onBUO=function(){this.onBUOL&&this.onBUOL.forEach(function(n){return n()})},t.reportObserved=function(){return XA(this)},t.reportChanged=function(){xi(),WA(this),Ti()},t.toString=function(){return this.name_},e}(),W3=Eu("Atom",bp);function NA(e,t,r){t===void 0&&(t=Nc),r===void 0&&(r=Nc);var n=new bp(e);return t!==Nc&&LB(n,t),r!==Nc&&eR(n,r),n}function NM(e,t){return e===t}function PM(e,t){return Q3(e,t)}function AM(e,t){return Q3(e,t,1)}function RM(e,t){return Object.is?Object.is(e,t):e===t?e!==0||1/e===1/t:e!==e&&t!==t}var K0={identity:NM,structural:PM,default:RM,shallow:AM};function ah(e,t,r){return nR(e)?e:Array.isArray(e)?gt.array(e,{name:r}):rl(e)?gt.object(e,void 0,{name:r}):Th(e)?gt.map(e,{name:r}):yp(e)?gt.set(e,{name:r}):typeof e=="function"&&!q3(e)&&!Q0(e)?TA(e)?Ud(e):Ld(r,e):e}function kM(e,t,r){if(e==null||Fd(e)||my(e)||Cu(e)||Eh(e))return e;if(Array.isArray(e))return gt.array(e,{name:r,deep:!1});if(rl(e))return gt.object(e,void 0,{name:r,deep:!1});if(Th(e))return gt.map(e,{name:r,deep:!1});if(yp(e))return gt.set(e,{name:r,deep:!1})}function hy(e){return e}function OM(e,t){return Q3(e,t)?t:e}var LM="override";function UM(e){return e.annotationType_===LM}function wp(e,t){return{annotationType_:e,options_:t,make_:FM,extend_:MM}}function FM(e,t,r,n){var i;if((i=this.options_)!=null&&i.bound)return this.extend_(e,t,r,!1)===null?0:1;if(n===e.target_)return this.extend_(e,t,r,!1)===null?0:2;if(q3(r.value))return 1;var o=PA(e,this,t,r,!1);return Gs(n,t,o),2}function MM(e,t,r,n){var i=PA(e,this,t,r);return e.defineProperty_(t,i,n)}function BM(e,t,r,n){t.annotationType_,n.value}function PA(e,t,r,n,i){var o,s,a,l,u,c,f;i===void 0&&(i=ke.safeDescriptors),BM(e,t,r,n);var p=n.value;if((o=t.options_)!=null&&o.bound){var v;p=p.bind((v=e.proxy_)!=null?v:e.target_)}return{value:lh((s=(a=t.options_)==null?void 0:a.name)!=null?s:r.toString(),p,(l=(u=t.options_)==null?void 0:u.autoAction)!=null?l:!1,(c=t.options_)!=null&&c.bound?(f=e.proxy_)!=null?f:e.target_:void 0),configurable:i?e.isPlainObject_:!0,enumerable:!1,writable:!i}}function AA(e,t){return{annotationType_:e,options_:t,make_:DM,extend_:GM}}function DM(e,t,r,n){var i;if(n===e.target_)return this.extend_(e,t,r,!1)===null?0:2;if((i=this.options_)!=null&&i.bound&&(!js(e.target_,t)||!Q0(e.target_[t]))&&this.extend_(e,t,r,!1)===null)return 0;if(Q0(r.value))return 1;var o=RA(e,this,t,r,!1,!1);return Gs(n,t,o),2}function GM(e,t,r,n){var i,o=RA(e,this,t,r,(i=this.options_)==null?void 0:i.bound);return e.defineProperty_(t,o,n)}function jM(e,t,r,n){t.annotationType_,n.value}function RA(e,t,r,n,i,o){o===void 0&&(o=ke.safeDescriptors),jM(e,t,r,n);var s=n.value;if(Q0(s)||(s=Ud(s)),i){var a;s=s.bind((a=e.proxy_)!=null?a:e.target_),s.isMobXFlow=!0}return{value:s,configurable:o?e.isPlainObject_:!0,enumerable:!1,writable:!o}}function Y3(e,t){return{annotationType_:e,options_:t,make_:$M,extend_:HM}}function $M(e,t,r){return this.extend_(e,t,r,!1)===null?0:1}function HM(e,t,r,n){return zM(e,this,t,r),e.defineComputedProperty_(t,sh({},this.options_,{get:r.get,set:r.set}),n)}function zM(e,t,r,n){t.annotationType_,n.get}function fy(e,t){return{annotationType_:e,options_:t,make_:VM,extend_:XM}}function VM(e,t,r){return this.extend_(e,t,r,!1)===null?0:1}function XM(e,t,r,n){var i,o;return WM(e,this),e.defineObservableProperty_(t,r.value,(i=(o=this.options_)==null?void 0:o.enhancer)!=null?i:ah,n)}function WM(e,t,r,n){t.annotationType_}var YM="true",KM=kA();function kA(e){return{annotationType_:YM,options_:e,make_:qM,extend_:ZM}}function qM(e,t,r,n){var i,o;if(r.get)return dy.make_(e,t,r,n);if(r.set){var s=lh(t.toString(),r.set);return n===e.target_?e.defineProperty_(t,{configurable:ke.safeDescriptors?e.isPlainObject_:!0,set:s})===null?0:2:(Gs(n,t,{configurable:!0,set:s}),2)}if(n!==e.target_&&typeof r.value=="function"){var a;if(TA(r.value)){var l,u=(l=this.options_)!=null&&l.autoBind?Ud.bound:Ud;return u.make_(e,t,r,n)}var c=(a=this.options_)!=null&&a.autoBind?Ld.bound:Ld;return c.make_(e,t,r,n)}var f=((i=this.options_)==null?void 0:i.deep)===!1?gt.ref:gt;if(typeof r.value=="function"&&(o=this.options_)!=null&&o.autoBind){var p;r.value=r.value.bind((p=e.proxy_)!=null?p:e.target_)}return f.make_(e,t,r,n)}function ZM(e,t,r,n){var i,o;if(r.get)return dy.extend_(e,t,r,n);if(r.set)return e.defineProperty_(t,{configurable:ke.safeDescriptors?e.isPlainObject_:!0,set:lh(t.toString(),r.set)},n);if(typeof r.value=="function"&&(i=this.options_)!=null&&i.autoBind){var s;r.value=r.value.bind((s=e.proxy_)!=null?s:e.target_)}var a=((o=this.options_)==null?void 0:o.deep)===!1?gt.ref:gt;return a.extend_(e,t,r,n)}var JM="observable",QM="observable.ref",eB="observable.shallow",tB="observable.struct",OA={deep:!0,name:void 0,defaultDecorator:void 0,proxy:!0};Object.freeze(OA);function Vm(e){return e||OA}var LA=fy(JM),rB=fy(QM,{enhancer:hy}),nB=fy(eB,{enhancer:kM}),iB=fy(tB,{enhancer:OM}),UA=qo(LA);function Xm(e){return e.deep===!0?ah:e.deep===!1?hy:sB(e.defaultDecorator)}function oB(e){var t;return e?(t=e.defaultDecorator)!=null?t:kA(e):void 0}function sB(e){var t,r;return e&&(t=(r=e.options_)==null?void 0:r.enhancer)!=null?t:ah}function FA(e,t,r){if(uu(t)){_p(e,t,LA);return}return nR(e)?e:rl(e)?gt.object(e,t,r):Array.isArray(e)?gt.array(e,t):Th(e)?gt.map(e,t):yp(e)?gt.set(e,t):typeof e=="object"&&e!==null?e:gt.box(e,t)}Object.assign(FA,UA);var aB={box:function(t,r){var n=Vm(r);return new Xc(t,Xm(n),n.name,!0,n.equals)},array:function(t,r){var n=Vm(r);return(ke.useProxies===!1||n.proxy===!1?rD:WB)(t,Xm(n),n.name)},map:function(t,r){var n=Vm(r);return new aR(t,Xm(n),n.name)},set:function(t,r){var n=Vm(r);return new cR(t,Xm(n),n.name)},object:function(t,r,n){return UB(ke.useProxies===!1||(n==null?void 0:n.proxy)===!1?vy({},n):zB({},n),t,r)},ref:qo(rB),shallow:qo(nB),deep:UA,struct:qo(iB)},gt=wM(FA,aB),MA="computed",lB="computed.struct",BA=Y3(MA),uB=Y3(lB,{equals:K0.structural}),dy=function(t,r){if(uu(r))return _p(t,r,BA);if(rl(t))return qo(Y3(MA,t));var n=rl(r)?r:{};return n.get=t,n.name||(n.name=t.name||""),new Od(n)};Object.assign(dy,BA);dy.struct=qo(uB);var DE,GE,q0=0,cB=1,hB=(DE=(GE=Y0(function(){},"name"))==null?void 0:GE.configurable)!=null?DE:!1,jE={value:"action",configurable:!0,writable:!1,enumerable:!1};function lh(e,t,r,n){r===void 0&&(r=!1);function i(){return fB(e,r,t,n||this,arguments)}return i.isMobxAction=!0,hB&&(jE.value=e,Object.defineProperty(i,"name",jE)),i}function fB(e,t,r,n,i){var o=dB(e,t);try{return r.apply(n,i)}catch(s){throw o.error_=s,s}finally{pB(o)}}function dB(e,t,r,n){var i=!1,o=0,s=ke.trackingDerivation,a=!t||!s;xi();var l=ke.allowStateChanges;a&&(Sh(),l=xp(!0));var u=K3(!0),c={runAsAction_:a,prevDerivation_:s,prevAllowStateChanges_:l,prevAllowStateReads_:u,notifySpy_:i,startTime_:o,actionId_:cB++,parentActionId_:q0};return q0=c.actionId_,c}function pB(e){q0!==e.actionId_&&Rt(30),q0=e.parentActionId_,e.error_!==void 0&&(ke.suppressReactionErrors=!0),Tp(e.prevAllowStateChanges_),ud(e.prevAllowStateReads_),Ti(),e.runAsAction_&&$a(e.prevDerivation_),ke.suppressReactionErrors=!1}function mB(e,t){var r=xp(e);try{return t()}finally{Tp(r)}}function xp(e){var t=ke.allowStateChanges;return ke.allowStateChanges=e,t}function Tp(e){ke.allowStateChanges=e}var DA;DA=Symbol.toPrimitive;var Xc=function(e){IA(t,e);function t(n,i,o,s,a){var l;return o===void 0&&(o="ObservableValue"),a===void 0&&(a=K0.default),l=e.call(this,o)||this,l.enhancer=void 0,l.name_=void 0,l.equals=void 0,l.hasUnreportedChange_=!1,l.interceptors_=void 0,l.changeListeners_=void 0,l.value_=void 0,l.dehancer=void 0,l.enhancer=i,l.name_=o,l.equals=a,l.value_=i(n,void 0,o),l}var r=t.prototype;return r.dehanceValue=function(i){return this.dehancer!==void 0?this.dehancer(i):i},r.set=function(i){this.value_,i=this.prepareNewValue_(i),i!==ke.UNCHANGED&&this.setNewValue_(i)},r.prepareNewValue_=function(i){if($i(this)){var o=Hi(this,{object:this,type:Zo,newValue:i});if(!o)return ke.UNCHANGED;i=o.newValue}return i=this.enhancer(i,this.value_,this.name_),this.equals(this.value_,i)?ke.UNCHANGED:i},r.setNewValue_=function(i){var o=this.value_;this.value_=i,this.reportChanged(),bo(this)&&wo(this,{type:Zo,object:this,newValue:i,oldValue:o})},r.get=function(){return this.reportObserved(),this.dehanceValue(this.value_)},r.intercept_=function(i){return Sp(this,i)},r.observe_=function(i,o){return o&&i({observableKind:"value",debugObjectName:this.name_,object:this,type:Zo,newValue:this.value_,oldValue:void 0}),Ep(this,i)},r.raw=function(){return this.value_},r.toJSON=function(){return this.get()},r.toString=function(){return this.name_+"["+this.value_+"]"},r.valueOf=function(){return CA(this.get())},r[DA]=function(){return this.valueOf()},t}(bp),GA;GA=Symbol.toPrimitive;var Od=function(){function e(r){this.dependenciesState_=At.NOT_TRACKING_,this.observing_=[],this.newObserving_=null,this.isBeingObserved_=!1,this.isPendingUnobservation_=!1,this.observers_=new Set,this.diffValue_=0,this.runId_=0,this.lastAccessedBy_=0,this.lowestObserverState_=At.UP_TO_DATE_,this.unboundDepsCount_=0,this.value_=new Z0(null),this.name_=void 0,this.triggeredBy_=void 0,this.isComputing_=!1,this.isRunningSetter_=!1,this.derivation=void 0,this.setter_=void 0,this.isTracing_=Zl.NONE,this.scope_=void 0,this.equals_=void 0,this.requiresReaction_=void 0,this.keepAlive_=void 0,this.onBOL=void 0,this.onBUOL=void 0,r.get||Rt(31),this.derivation=r.get,this.name_=r.name||"ComputedValue",r.set&&(this.setter_=lh("ComputedValue-setter",r.set)),this.equals_=r.equals||(r.compareStructural||r.struct?K0.structural:K0.default),this.scope_=r.context,this.requiresReaction_=r.requiresReaction,this.keepAlive_=!!r.keepAlive}var t=e.prototype;return t.onBecomeStale_=function(){_B(this)},t.onBO=function(){this.onBOL&&this.onBOL.forEach(function(n){return n()})},t.onBUO=function(){this.onBUOL&&this.onBUOL.forEach(function(n){return n()})},t.get=function(){if(this.isComputing_&&Rt(32,this.name_,this.derivation),ke.inBatch===0&&this.observers_.size===0&&!this.keepAlive_)Db(this)&&(this.warnAboutUntrackedRead_(),xi(),this.value_=this.computeValue_(!1),Ti());else if(XA(this),Db(this)){var n=ke.trackingContext;this.keepAlive_&&!n&&(ke.trackingContext=this),this.trackAndCompute()&&yB(this),ke.trackingContext=n}var i=this.value_;if(Qv(i))throw i.cause;return i},t.set=function(n){if(this.setter_){this.isRunningSetter_&&Rt(33,this.name_),this.isRunningSetter_=!0;try{this.setter_.call(this.scope_,n)}finally{this.isRunningSetter_=!1}}else Rt(34,this.name_)},t.trackAndCompute=function(){var n=this.value_,i=this.dependenciesState_===At.NOT_TRACKING_,o=this.computeValue_(!0),s=i||Qv(n)||Qv(o)||!this.equals_(n,o);return s&&(this.value_=o),s},t.computeValue_=function(n){this.isComputing_=!0;var i=xp(!1),o;if(n)o=jA(this,this.derivation,this.scope_);else if(ke.disableErrorBoundaries===!0)o=this.derivation.call(this.scope_);else try{o=this.derivation.call(this.scope_)}catch(s){o=new Z0(s)}return Tp(i),this.isComputing_=!1,o},t.suspend_=function(){this.keepAlive_||(Gb(this),this.value_=void 0)},t.observe_=function(n,i){var o=this,s=!0,a=void 0;return PB(function(){var l=o.get();if(!s||i){var u=Sh();n({observableKind:"computed",debugObjectName:o.name_,type:Zo,object:o,newValue:l,oldValue:a}),$a(u)}s=!1,a=l})},t.warnAboutUntrackedRead_=function(){},t.toString=function(){return this.name_+"["+this.derivation.toString()+"]"},t.valueOf=function(){return CA(this.get())},t[GA]=function(){return this.valueOf()},e}(),py=Eu("ComputedValue",Od),At;(function(e){e[e.NOT_TRACKING_=-1]="NOT_TRACKING_",e[e.UP_TO_DATE_=0]="UP_TO_DATE_",e[e.POSSIBLY_STALE_=1]="POSSIBLY_STALE_",e[e.STALE_=2]="STALE_"})(At||(At={}));var Zl;(function(e){e[e.NONE=0]="NONE",e[e.LOG=1]="LOG",e[e.BREAK=2]="BREAK"})(Zl||(Zl={}));var Z0=function(t){this.cause=void 0,this.cause=t};function Qv(e){return e instanceof Z0}function Db(e){switch(e.dependenciesState_){case At.UP_TO_DATE_:return!1;case At.NOT_TRACKING_:case At.STALE_:return!0;case At.POSSIBLY_STALE_:{for(var t=K3(!0),r=Sh(),n=e.observing_,i=n.length,o=0;o<i;o++){var s=n[o];if(py(s)){if(ke.disableErrorBoundaries)s.get();else try{s.get()}catch{return $a(r),ud(t),!0}if(e.dependenciesState_===At.STALE_)return $a(r),ud(t),!0}}return HA(e),$a(r),ud(t),!1}}}function jA(e,t,r){var n=K3(!0);HA(e),e.newObserving_=new Array(e.observing_.length+100),e.unboundDepsCount_=0,e.runId_=++ke.runId;var i=ke.trackingDerivation;ke.trackingDerivation=e,ke.inBatch++;var o;if(ke.disableErrorBoundaries===!0)o=t.call(r);else try{o=t.call(r)}catch(s){o=new Z0(s)}return ke.inBatch--,ke.trackingDerivation=i,vB(e),ud(n),o}function vB(e){for(var t=e.observing_,r=e.observing_=e.newObserving_,n=At.UP_TO_DATE_,i=0,o=e.unboundDepsCount_,s=0;s<o;s++){var a=r[s];a.diffValue_===0&&(a.diffValue_=1,i!==s&&(r[i]=a),i++),a.dependenciesState_>n&&(n=a.dependenciesState_)}for(r.length=i,e.newObserving_=null,o=t.length;o--;){var l=t[o];l.diffValue_===0&&zA(l,e),l.diffValue_=0}for(;i--;){var u=r[i];u.diffValue_===1&&(u.diffValue_=0,gB(u,e))}n!==At.UP_TO_DATE_&&(e.dependenciesState_=n,e.onBecomeStale_())}function Gb(e){var t=e.observing_;e.observing_=[];for(var r=t.length;r--;)zA(t[r],e);e.dependenciesState_=At.NOT_TRACKING_}function $A(e){var t=Sh();try{return e()}finally{$a(t)}}function Sh(){var e=ke.trackingDerivation;return ke.trackingDerivation=null,e}function $a(e){ke.trackingDerivation=e}function K3(e){var t=ke.allowStateReads;return ke.allowStateReads=e,t}function ud(e){ke.allowStateReads=e}function HA(e){if(e.dependenciesState_!==At.UP_TO_DATE_){e.dependenciesState_=At.UP_TO_DATE_;for(var t=e.observing_,r=t.length;r--;)t[r].lowestObserverState_=At.UP_TO_DATE_}}var L2=function(){this.version=6,this.UNCHANGED={},this.trackingDerivation=null,this.trackingContext=null,this.runId=0,this.mobxGuid=0,this.inBatch=0,this.pendingUnobservations=[],this.pendingReactions=[],this.isRunningReactions=!1,this.allowStateChanges=!1,this.allowStateReads=!0,this.enforceActions=!0,this.spyListeners=[],this.globalReactionErrorHandlers=[],this.computedRequiresReaction=!1,this.reactionRequiresObservable=!1,this.observableRequiresReaction=!1,this.disableErrorBoundaries=!1,this.suppressReactionErrors=!1,this.useProxies=!0,this.verifyProxies=!1,this.safeDescriptors=!0},U2=!0,ke=function(){var e=_A();return e.__mobxInstanceCount>0&&!e.__mobxGlobals&&(U2=!1),e.__mobxGlobals&&e.__mobxGlobals.version!==new L2().version&&(U2=!1),U2?e.__mobxGlobals?(e.__mobxInstanceCount+=1,e.__mobxGlobals.UNCHANGED||(e.__mobxGlobals.UNCHANGED={}),e.__mobxGlobals):(e.__mobxInstanceCount=1,e.__mobxGlobals=new L2):(setTimeout(function(){Rt(35)},1),new L2)}();function gB(e,t){e.observers_.add(t),e.lowestObserverState_>t.dependenciesState_&&(e.lowestObserverState_=t.dependenciesState_)}function zA(e,t){e.observers_.delete(t),e.observers_.size===0&&VA(e)}function VA(e){e.isPendingUnobservation_===!1&&(e.isPendingUnobservation_=!0,ke.pendingUnobservations.push(e))}function xi(){ke.inBatch++}function Ti(){if(--ke.inBatch===0){YA();for(var e=ke.pendingUnobservations,t=0;t<e.length;t++){var r=e[t];r.isPendingUnobservation_=!1,r.observers_.size===0&&(r.isBeingObserved_&&(r.isBeingObserved_=!1,r.onBUO()),r instanceof Od&&r.suspend_())}ke.pendingUnobservations=[]}}function XA(e){var t=ke.trackingDerivation;return t!==null?(t.runId_!==e.lastAccessedBy_&&(e.lastAccessedBy_=t.runId_,t.newObserving_[t.unboundDepsCount_++]=e,!e.isBeingObserved_&&ke.trackingContext&&(e.isBeingObserved_=!0,e.onBO())),!0):(e.observers_.size===0&&ke.inBatch>0&&VA(e),!1)}function WA(e){e.lowestObserverState_!==At.STALE_&&(e.lowestObserverState_=At.STALE_,e.observers_.forEach(function(t){t.dependenciesState_===At.UP_TO_DATE_&&t.onBecomeStale_(),t.dependenciesState_=At.STALE_}))}function yB(e){e.lowestObserverState_!==At.STALE_&&(e.lowestObserverState_=At.STALE_,e.observers_.forEach(function(t){t.dependenciesState_===At.POSSIBLY_STALE_?t.dependenciesState_=At.STALE_:t.dependenciesState_===At.UP_TO_DATE_&&(e.lowestObserverState_=At.UP_TO_DATE_)}))}function _B(e){e.lowestObserverState_===At.UP_TO_DATE_&&(e.lowestObserverState_=At.POSSIBLY_STALE_,e.observers_.forEach(function(t){t.dependenciesState_===At.UP_TO_DATE_&&(t.dependenciesState_=At.POSSIBLY_STALE_,t.onBecomeStale_())}))}var jb=function(){function e(r,n,i,o){r===void 0&&(r="Reaction"),this.name_=void 0,this.onInvalidate_=void 0,this.errorHandler_=void 0,this.requiresObservable_=void 0,this.observing_=[],this.newObserving_=[],this.dependenciesState_=At.NOT_TRACKING_,this.diffValue_=0,this.runId_=0,this.unboundDepsCount_=0,this.isDisposed_=!1,this.isScheduled_=!1,this.isTrackPending_=!1,this.isRunning_=!1,this.isTracing_=Zl.NONE,this.name_=r,this.onInvalidate_=n,this.errorHandler_=i,this.requiresObservable_=o}var t=e.prototype;return t.onBecomeStale_=function(){this.schedule_()},t.schedule_=function(){this.isScheduled_||(this.isScheduled_=!0,ke.pendingReactions.push(this),YA())},t.isScheduled=function(){return this.isScheduled_},t.runReaction_=function(){if(!this.isDisposed_){xi(),this.isScheduled_=!1;var n=ke.trackingContext;if(ke.trackingContext=this,Db(this)){this.isTrackPending_=!0;try{this.onInvalidate_()}catch(i){this.reportExceptionInDerivation_(i)}}ke.trackingContext=n,Ti()}},t.track=function(n){if(!this.isDisposed_){xi(),this.isRunning_=!0;var i=ke.trackingContext;ke.trackingContext=this;var o=jA(this,n,void 0);ke.trackingContext=i,this.isRunning_=!1,this.isTrackPending_=!1,this.isDisposed_&&Gb(this),Qv(o)&&this.reportExceptionInDerivation_(o.cause),Ti()}},t.reportExceptionInDerivation_=function(n){var i=this;if(this.errorHandler_){this.errorHandler_(n,this);return}if(ke.disableErrorBoundaries)throw n;var o="[mobx] uncaught error in '"+this+"'";ke.suppressReactionErrors||console.error(o,n),ke.globalReactionErrorHandlers.forEach(function(s){return s(n,i)})},t.dispose=function(){this.isDisposed_||(this.isDisposed_=!0,this.isRunning_||(xi(),Gb(this),Ti()))},t.getDisposer_=function(){var n=this.dispose.bind(this);return n[ct]=this,n},t.toString=function(){return"Reaction["+this.name_+"]"},t.trace=function(n){n===void 0&&(n=!1),jB(this,n)},e}(),bB=100,wB=function(t){return t()};function YA(){ke.inBatch>0||ke.isRunningReactions||wB(xB)}function xB(){ke.isRunningReactions=!0;for(var e=ke.pendingReactions,t=0;e.length>0;){++t===bB&&(console.error("[mobx] cycle in reaction: "+e[0]),e.splice(0));for(var r=e.splice(0),n=0,i=r.length;n<i;n++)r[n].runReaction_()}ke.isRunningReactions=!1}var J0=Eu("Reaction",jb);function cd(){return!1}function TB(e){return console.warn("[mobx.spy] Is a no-op in production builds"),function(){}}var KA="action",SB="action.bound",qA="autoAction",EB="autoAction.bound",CB="<unnamed action>",ZA=wp(KA),IB=wp(SB,{bound:!0}),JA=wp(qA,{autoAction:!0}),NB=wp(EB,{autoAction:!0,bound:!0});function QA(e){var t=function(n,i){if(Qi(n))return lh(n.name||CB,n,e);if(Qi(i))return lh(n,i,e);if(uu(i))return _p(n,i,e?JA:ZA);if(uu(n))return qo(wp(e?qA:KA,{name:n,autoAction:e}))};return t}var yo=QA(!1);Object.assign(yo,ZA);var Ld=QA(!0);Object.assign(Ld,JA);yo.bound=qo(IB);Ld.bound=qo(NB);function q3(e){return Qi(e)&&e.isMobxAction===!0}function PB(e,t){var r,n;t===void 0&&(t=bA);var i=(r=(n=t)==null?void 0:n.name)!=null?r:"Autorun",o=!t.scheduler&&!t.delay,s;if(o)s=new jb(i,function(){this.track(u)},t.onError,t.requiresObservable);else{var a=RB(t),l=!1;s=new jb(i,function(){l||(l=!0,a(function(){l=!1,s.isDisposed_||s.track(u)}))},t.onError,t.requiresObservable)}function u(){e(s)}return s.schedule_(),s.getDisposer_()}var AB=function(t){return t()};function RB(e){return e.scheduler?e.scheduler:e.delay?function(t){return setTimeout(t,e.delay)}:AB}var kB="onBO",OB="onBUO";function LB(e,t,r){return tR(kB,e,t,r)}function eR(e,t,r){return tR(OB,e,t,r)}function tR(e,t,r,n){var i=typeof n=="function"?cu(t,r):cu(t),o=Qi(n)?n:r,s=e+"L";return i[s]?i[s].add(o):i[s]=new Set([o]),function(){var a=i[s];a&&(a.delete(o),a.size===0&&delete i[s])}}function UB(e,t,r,n){var i=EM(t),o=vy(e,n)[ct];xi();try{cy(i).forEach(function(s){o.extend_(s,i[s],r&&s in r?r[s]:!0)})}finally{Ti()}return e}var FB=0;function rR(){this.message="FLOW_CANCELLED"}rR.prototype=Object.create(Error.prototype);var $E=AA("flow"),MB=AA("flow.bound",{bound:!0}),Ud=Object.assign(function(t,r){if(uu(r))return _p(t,r,$E);var n=t,i=n.name||"<unnamed flow>",o=function(){var a=this,l=arguments,u=++FB,c=yo(i+" - runid: "+u+" - init",n).apply(a,l),f,p=void 0,v=new Promise(function(g,b){var _=0;f=b;function w(I){p=void 0;var R;try{R=yo(i+" - runid: "+u+" - yield "+_++,c.next).call(c,I)}catch(E){return b(E)}T(R)}function x(I){p=void 0;var R;try{R=yo(i+" - runid: "+u+" - yield "+_++,c.throw).call(c,I)}catch(E){return b(E)}T(R)}function T(I){if(Qi(I==null?void 0:I.then)){I.then(T,b);return}return I.done?g(I.value):(p=Promise.resolve(I.value),p.then(w,x))}w(void 0)});return v.cancel=yo(i+" - runid: "+u+" - cancel",function(){try{p&&HE(p);var g=c.return(void 0),b=Promise.resolve(g.value);b.then(Nc,Nc),HE(b),f(new rR)}catch(_){f(_)}}),v};return o.isMobXFlow=!0,o},$E);Ud.bound=qo(MB);function HE(e){Qi(e.cancel)&&e.cancel()}function Q0(e){return(e==null?void 0:e.isMobXFlow)===!0}function BB(e,t){return e?t!==void 0?Fd(e)?e[ct].values_.has(t):!1:Fd(e)||!!e[ct]||W3(e)||J0(e)||py(e):!1}function nR(e){return BB(e)}function jn(e,t,r,n){return Qi(r)?GB(e,t,r,n):DB(e,t,r)}function DB(e,t,r){return gy(e).observe_(t,r)}function GB(e,t,r,n){return gy(e,t).observe_(r,n)}function jB(){Rt("trace() is not available in production builds");for(var e=!1,t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];typeof r[r.length-1]=="boolean"&&(e=r.pop());var i=$B(r);if(!i)return Rt("'trace(break?)' can only be used inside a tracked computed value or a Reaction. Consider passing in the computed value or reaction explicitly");i.isTracing_===Zl.NONE&&console.log("[mobx.trace] '"+i.name_+"' tracing enabled"),i.isTracing_=e?Zl.BREAK:Zl.LOG}function $B(e){switch(e.length){case 0:return ke.trackingDerivation;case 1:return cu(e[0]);case 2:return cu(e[0],e[1])}}function ks(e,t){t===void 0&&(t=void 0),xi();try{return e.apply(t)}finally{Ti()}}function rc(e){return e[ct]}var HB={has:function(t,r){return rc(t).has_(r)},get:function(t,r){return rc(t).get_(r)},set:function(t,r,n){var i;return uu(r)?(i=rc(t).set_(r,n,!0))!=null?i:!0:!1},deleteProperty:function(t,r){var n;return uu(r)?(n=rc(t).delete_(r,!0))!=null?n:!0:!1},defineProperty:function(t,r,n){var i;return(i=rc(t).defineProperty_(r,n))!=null?i:!0},ownKeys:function(t){return rc(t).ownKeys_()},preventExtensions:function(t){Rt(13)}};function zB(e,t){var r,n;return wA(),e=vy(e,t),(n=(r=e[ct]).proxy_)!=null?n:r.proxy_=new Proxy(e,HB)}function $i(e){return e.interceptors_!==void 0&&e.interceptors_.length>0}function Sp(e,t){var r=e.interceptors_||(e.interceptors_=[]);return r.push(t),xA(function(){var n=r.indexOf(t);n!==-1&&r.splice(n,1)})}function Hi(e,t){var r=Sh();try{for(var n=[].concat(e.interceptors_||[]),i=0,o=n.length;i<o&&(t=n[i](t),t&&!t.type&&Rt(14),!!t);i++);return t}finally{$a(r)}}function bo(e){return e.changeListeners_!==void 0&&e.changeListeners_.length>0}function Ep(e,t){var r=e.changeListeners_||(e.changeListeners_=[]);return r.push(t),xA(function(){var n=r.indexOf(t);n!==-1&&r.splice(n,1)})}function wo(e,t){var r=Sh(),n=e.changeListeners_;if(!!n){n=n.slice();for(var i=0,o=n.length;i<o;i++)n[i](t);$a(r)}}function ki(e,t,r){var n=vy(e,r)[ct];xi();try{var i;(i=t)!=null||(t=IM(e)),cy(t).forEach(function(o){return n.make_(o,t[o])})}finally{Ti()}return e}var zE="splice",Zo="update",VB=1e4,XB={get:function(t,r){var n=t[ct];return r===ct?n:r==="length"?n.getArrayLength_():typeof r=="string"&&!isNaN(r)?n.get_(parseInt(r)):js(eg,r)?eg[r]:t[r]},set:function(t,r,n){var i=t[ct];return r==="length"&&i.setArrayLength_(n),typeof r=="symbol"||isNaN(r)?t[r]=n:i.set_(parseInt(r),n),!0},preventExtensions:function(){Rt(15)}},Z3=function(){function e(r,n,i,o){r===void 0&&(r="ObservableArray"),this.owned_=void 0,this.legacyMode_=void 0,this.atom_=void 0,this.values_=[],this.interceptors_=void 0,this.changeListeners_=void 0,this.enhancer_=void 0,this.dehancer=void 0,this.proxy_=void 0,this.lastKnownLength_=0,this.owned_=i,this.legacyMode_=o,this.atom_=new bp(r),this.enhancer_=function(s,a){return n(s,a,"ObservableArray[..]")}}var t=e.prototype;return t.dehanceValue_=function(n){return this.dehancer!==void 0?this.dehancer(n):n},t.dehanceValues_=function(n){return this.dehancer!==void 0&&n.length>0?n.map(this.dehancer):n},t.intercept_=function(n){return Sp(this,n)},t.observe_=function(n,i){return i===void 0&&(i=!1),i&&n({observableKind:"array",object:this.proxy_,debugObjectName:this.atom_.name_,type:"splice",index:0,added:this.values_.slice(),addedCount:this.values_.length,removed:[],removedCount:0}),Ep(this,n)},t.getArrayLength_=function(){return this.atom_.reportObserved(),this.values_.length},t.setArrayLength_=function(n){(typeof n!="number"||isNaN(n)||n<0)&&Rt("Out of range: "+n);var i=this.values_.length;if(n!==i)if(n>i){for(var o=new Array(n-i),s=0;s<n-i;s++)o[s]=void 0;this.spliceWithArray_(i,0,o)}else this.spliceWithArray_(n,i-n)},t.updateArrayLength_=function(n,i){n!==this.lastKnownLength_&&Rt(16),this.lastKnownLength_+=i,this.legacyMode_&&i>0&&dR(n+i+1)},t.spliceWithArray_=function(n,i,o){var s=this;this.atom_;var a=this.values_.length;if(n===void 0?n=0:n>a?n=a:n<0&&(n=Math.max(0,a+n)),arguments.length===1?i=a-n:i==null?i=0:i=Math.max(0,Math.min(i,a-n)),o===void 0&&(o=Mb),$i(this)){var l=Hi(this,{object:this.proxy_,type:zE,index:n,removedCount:i,added:o});if(!l)return Mb;i=l.removedCount,o=l.added}if(o=o.length===0?o:o.map(function(f){return s.enhancer_(f,void 0)}),this.legacyMode_){var u=o.length-i;this.updateArrayLength_(a,u)}var c=this.spliceItemsIntoValues_(n,i,o);return(i!==0||o.length!==0)&&this.notifyArraySplice_(n,o,c),this.dehanceValues_(c)},t.spliceItemsIntoValues_=function(n,i,o){if(o.length<VB){var s;return(s=this.values_).splice.apply(s,[n,i].concat(o))}else{var a=this.values_.slice(n,n+i),l=this.values_.slice(n+i);this.values_.length+=o.length-i;for(var u=0;u<o.length;u++)this.values_[n+u]=o[u];for(var c=0;c<l.length;c++)this.values_[n+o.length+c]=l[c];return a}},t.notifyArrayChildUpdate_=function(n,i,o){var s=!this.owned_&&cd(),a=bo(this),l=a||s?{observableKind:"array",object:this.proxy_,type:Zo,debugObjectName:this.atom_.name_,index:n,newValue:i,oldValue:o}:null;this.atom_.reportChanged(),a&&wo(this,l)},t.notifyArraySplice_=function(n,i,o){var s=!this.owned_&&cd(),a=bo(this),l=a||s?{observableKind:"array",object:this.proxy_,debugObjectName:this.atom_.name_,type:zE,index:n,removed:o,added:i,removedCount:o.length,addedCount:i.length}:null;this.atom_.reportChanged(),a&&wo(this,l)},t.get_=function(n){if(n<this.values_.length)return this.atom_.reportObserved(),this.dehanceValue_(this.values_[n]);console.warn("[mobx.array] Attempt to read an array index ("+n+") that is out of bounds ("+this.values_.length+"). Please check length first. Out of bound indices will not be tracked by MobX")},t.set_=function(n,i){var o=this.values_;if(n<o.length){this.atom_;var s=o[n];if($i(this)){var a=Hi(this,{type:Zo,object:this.proxy_,index:n,newValue:i});if(!a)return;i=a.newValue}i=this.enhancer_(i,s);var l=i!==s;l&&(o[n]=i,this.notifyArrayChildUpdate_(n,i,s))}else n===o.length?this.spliceWithArray_(n,0,[i]):Rt(17,n,o.length)},e}();function WB(e,t,r,n){r===void 0&&(r="ObservableArray"),n===void 0&&(n=!1),wA();var i=new Z3(r,t,n,!1);SA(i.values_,ct,i);var o=new Proxy(i.values_,XB);if(i.proxy_=o,e&&e.length){var s=xp(!0);i.spliceWithArray_(0,0,e),Tp(s)}return o}var eg={clear:function(){return this.splice(0)},replace:function(t){var r=this[ct];return r.spliceWithArray_(0,r.values_.length,t)},toJSON:function(){return this.slice()},splice:function(t,r){for(var n=arguments.length,i=new Array(n>2?n-2:0),o=2;o<n;o++)i[o-2]=arguments[o];var s=this[ct];switch(arguments.length){case 0:return[];case 1:return s.spliceWithArray_(t);case 2:return s.spliceWithArray_(t,r)}return s.spliceWithArray_(t,r,i)},spliceWithArray:function(t,r,n){return this[ct].spliceWithArray_(t,r,n)},push:function(){for(var t=this[ct],r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];return t.spliceWithArray_(t.values_.length,0,n),t.values_.length},pop:function(){return this.splice(Math.max(this[ct].values_.length-1,0),1)[0]},shift:function(){return this.splice(0,1)[0]},unshift:function(){for(var t=this[ct],r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];return t.spliceWithArray_(0,0,n),t.values_.length},reverse:function(){return ke.trackingDerivation&&Rt(37,"reverse"),this.replace(this.slice().reverse()),this},sort:function(){ke.trackingDerivation&&Rt(37,"sort");var t=this.slice();return t.sort.apply(t,arguments),this.replace(t),this},remove:function(t){var r=this[ct],n=r.dehanceValues_(r.values_).indexOf(t);return n>-1?(this.splice(n,1),!0):!1}};qr("concat",ea);qr("flat",ea);qr("includes",ea);qr("indexOf",ea);qr("join",ea);qr("lastIndexOf",ea);qr("slice",ea);qr("toString",ea);qr("toLocaleString",ea);qr("every",fl);qr("filter",fl);qr("find",fl);qr("findIndex",fl);qr("flatMap",fl);qr("forEach",fl);qr("map",fl);qr("some",fl);qr("reduce",iR);qr("reduceRight",iR);function qr(e,t){typeof Array.prototype[e]=="function"&&(eg[e]=t(e))}function ea(e){return function(){var t=this[ct];t.atom_.reportObserved();var r=t.dehanceValues_(t.values_);return r[e].apply(r,arguments)}}function fl(e){return function(t,r){var n=this,i=this[ct];i.atom_.reportObserved();var o=i.dehanceValues_(i.values_);return o[e](function(s,a){return t.call(r,s,a,n)})}}function iR(e){return function(){var t=this,r=this[ct];r.atom_.reportObserved();var n=r.dehanceValues_(r.values_),i=arguments[0];return arguments[0]=function(o,s,a){return i(o,s,a,t)},n[e].apply(n,arguments)}}var YB=Eu("ObservableArrayAdministration",Z3);function my(e){return ly(e)&&YB(e[ct])}var oR,sR,KB={},Ra="add",tg="delete";oR=Symbol.iterator;sR=Symbol.toStringTag;var aR=function(){function e(r,n,i){var o=this;n===void 0&&(n=ah),i===void 0&&(i="ObservableMap"),this.enhancer_=void 0,this.name_=void 0,this[ct]=KB,this.data_=void 0,this.hasMap_=void 0,this.keysAtom_=void 0,this.interceptors_=void 0,this.changeListeners_=void 0,this.dehancer=void 0,this.enhancer_=n,this.name_=i,Qi(Map)||Rt(18),this.keysAtom_=NA("ObservableMap.keys()"),this.data_=new Map,this.hasMap_=new Map,mB(!0,function(){o.merge(r)})}var t=e.prototype;return t.has_=function(n){return this.data_.has(n)},t.has=function(n){var i=this;if(!ke.trackingDerivation)return this.has_(n);var o=this.hasMap_.get(n);if(!o){var s=o=new Xc(this.has_(n),hy,"ObservableMap.key?",!1);this.hasMap_.set(n,s),eR(s,function(){return i.hasMap_.delete(n)})}return o.get()},t.set=function(n,i){var o=this.has_(n);if($i(this)){var s=Hi(this,{type:o?Zo:Ra,object:this,newValue:i,name:n});if(!s)return this;i=s.newValue}return o?this.updateValue_(n,i):this.addValue_(n,i),this},t.delete=function(n){var i=this;if(this.keysAtom_,$i(this)){var o=Hi(this,{type:tg,object:this,name:n});if(!o)return!1}if(this.has_(n)){var s=cd(),a=bo(this),l=a||s?{observableKind:"map",debugObjectName:this.name_,type:tg,object:this,oldValue:this.data_.get(n).value_,name:n}:null;return ks(function(){var u;i.keysAtom_.reportChanged(),(u=i.hasMap_.get(n))==null||u.setNewValue_(!1);var c=i.data_.get(n);c.setNewValue_(void 0),i.data_.delete(n)}),a&&wo(this,l),!0}return!1},t.updateValue_=function(n,i){var o=this.data_.get(n);if(i=o.prepareNewValue_(i),i!==ke.UNCHANGED){var s=cd(),a=bo(this),l=a||s?{observableKind:"map",debugObjectName:this.name_,type:Zo,object:this,oldValue:o.value_,name:n,newValue:i}:null;o.setNewValue_(i),a&&wo(this,l)}},t.addValue_=function(n,i){var o=this;this.keysAtom_,ks(function(){var u,c=new Xc(i,o.enhancer_,"ObservableMap.key",!1);o.data_.set(n,c),i=c.value_,(u=o.hasMap_.get(n))==null||u.setNewValue_(!0),o.keysAtom_.reportChanged()});var s=cd(),a=bo(this),l=a||s?{observableKind:"map",debugObjectName:this.name_,type:Ra,object:this,name:n,newValue:i}:null;a&&wo(this,l)},t.get=function(n){return this.has(n)?this.dehanceValue_(this.data_.get(n).get()):this.dehanceValue_(void 0)},t.dehanceValue_=function(n){return this.dehancer!==void 0?this.dehancer(n):n},t.keys=function(){return this.keysAtom_.reportObserved(),this.data_.keys()},t.values=function(){var n=this,i=this.keys();return Md({next:function(){var s=i.next(),a=s.done,l=s.value;return{done:a,value:a?void 0:n.get(l)}}})},t.entries=function(){var n=this,i=this.keys();return Md({next:function(){var s=i.next(),a=s.done,l=s.value;return{done:a,value:a?void 0:[l,n.get(l)]}}})},t[oR]=function(){return this.entries()},t.forEach=function(n,i){for(var o=Pc(this),s;!(s=o()).done;){var a=s.value,l=a[0],u=a[1];n.call(i,u,l,this)}},t.merge=function(n){var i=this;return Cu(n)&&(n=new Map(n)),ks(function(){rl(n)?SM(n).forEach(function(o){return i.set(o,n[o])}):Array.isArray(n)?n.forEach(function(o){var s=o[0],a=o[1];return i.set(s,a)}):Th(n)?(n.constructor!==Map&&Rt(19,n),n.forEach(function(o,s){return i.set(s,o)})):n!=null&&Rt(20,n)}),this},t.clear=function(){var n=this;ks(function(){$A(function(){for(var i=Pc(n.keys()),o;!(o=i()).done;){var s=o.value;n.delete(s)}})})},t.replace=function(n){var i=this;return ks(function(){for(var o=qB(n),s=new Map,a=!1,l=Pc(i.data_.keys()),u;!(u=l()).done;){var c=u.value;if(!o.has(c)){var f=i.delete(c);if(f)a=!0;else{var p=i.data_.get(c);s.set(c,p)}}}for(var v=Pc(o.entries()),g;!(g=v()).done;){var b=g.value,_=b[0],w=b[1],x=i.data_.has(_);if(i.set(_,w),i.data_.has(_)){var T=i.data_.get(_);s.set(_,T),x||(a=!0)}}if(!a)if(i.data_.size!==s.size)i.keysAtom_.reportChanged();else for(var I=i.data_.keys(),R=s.keys(),E=I.next(),O=R.next();!E.done;){if(E.value!==O.value){i.keysAtom_.reportChanged();break}E=I.next(),O=R.next()}i.data_=s}),this},t.toString=function(){return"[object ObservableMap]"},t.toJSON=function(){return Array.from(this)},t.observe_=function(n,i){return Ep(this,n)},t.intercept_=function(n){return Sp(this,n)},X3(e,[{key:"size",get:function(){return this.keysAtom_.reportObserved(),this.data_.size}},{key:sR,get:function(){return"Map"}}]),e}(),Cu=Eu("ObservableMap",aR);function qB(e){if(Th(e)||Cu(e))return e;if(Array.isArray(e))return new Map(e);if(rl(e)){var t=new Map;for(var r in e)t.set(r,e[r]);return t}else return Rt(21,e)}var lR,uR,ZB={};lR=Symbol.iterator;uR=Symbol.toStringTag;var cR=function(){function e(r,n,i){n===void 0&&(n=ah),i===void 0&&(i="ObservableSet"),this.name_=void 0,this[ct]=ZB,this.data_=new Set,this.atom_=void 0,this.changeListeners_=void 0,this.interceptors_=void 0,this.dehancer=void 0,this.enhancer_=void 0,this.name_=i,Qi(Set)||Rt(22),this.atom_=NA(this.name_),this.enhancer_=function(o,s){return n(o,s,i)},r&&this.replace(r)}var t=e.prototype;return t.dehanceValue_=function(n){return this.dehancer!==void 0?this.dehancer(n):n},t.clear=function(){var n=this;ks(function(){$A(function(){for(var i=Pc(n.data_.values()),o;!(o=i()).done;){var s=o.value;n.delete(s)}})})},t.forEach=function(n,i){for(var o=Pc(this),s;!(s=o()).done;){var a=s.value;n.call(i,a,a,this)}},t.add=function(n){var i=this;if(this.atom_,$i(this)){var o=Hi(this,{type:Ra,object:this,newValue:n});if(!o)return this}if(!this.has(n)){ks(function(){i.data_.add(i.enhancer_(n,void 0)),i.atom_.reportChanged()});var s=!1,a=bo(this),l=a||s?{observableKind:"set",debugObjectName:this.name_,type:Ra,object:this,newValue:n}:null;a&&wo(this,l)}return this},t.delete=function(n){var i=this;if($i(this)){var o=Hi(this,{type:tg,object:this,oldValue:n});if(!o)return!1}if(this.has(n)){var s=!1,a=bo(this),l=a||s?{observableKind:"set",debugObjectName:this.name_,type:tg,object:this,oldValue:n}:null;return ks(function(){i.atom_.reportChanged(),i.data_.delete(n)}),a&&wo(this,l),!0}return!1},t.has=function(n){return this.atom_.reportObserved(),this.data_.has(this.dehanceValue_(n))},t.entries=function(){var n=0,i=Array.from(this.keys()),o=Array.from(this.values());return Md({next:function(){var a=n;return n+=1,a<o.length?{value:[i[a],o[a]],done:!1}:{done:!0}}})},t.keys=function(){return this.values()},t.values=function(){this.atom_.reportObserved();var n=this,i=0,o=Array.from(this.data_.values());return Md({next:function(){return i<o.length?{value:n.dehanceValue_(o[i++]),done:!1}:{done:!0}}})},t.replace=function(n){var i=this;return Eh(n)&&(n=new Set(n)),ks(function(){Array.isArray(n)?(i.clear(),n.forEach(function(o){return i.add(o)})):yp(n)?(i.clear(),n.forEach(function(o){return i.add(o)})):n!=null&&Rt("Cannot initialize set from "+n)}),this},t.observe_=function(n,i){return Ep(this,n)},t.intercept_=function(n){return Sp(this,n)},t.toJSON=function(){return Array.from(this)},t.toString=function(){return"[object ObservableSet]"},t[lR]=function(){return this.values()},X3(e,[{key:"size",get:function(){return this.atom_.reportObserved(),this.data_.size}},{key:uR,get:function(){return"Set"}}]),e}(),Eh=Eu("ObservableSet",cR),VE=Object.create(null),XE="remove",hR=function(){function e(r,n,i,o){n===void 0&&(n=new Map),o===void 0&&(o=KM),this.target_=void 0,this.values_=void 0,this.name_=void 0,this.defaultAnnotation_=void 0,this.keysAtom_=void 0,this.changeListeners_=void 0,this.interceptors_=void 0,this.proxy_=void 0,this.isPlainObject_=void 0,this.appliedAnnotations_=void 0,this.pendingKeys_=void 0,this.target_=r,this.values_=n,this.name_=i,this.defaultAnnotation_=o,this.keysAtom_=new bp("ObservableObject.keys"),this.isPlainObject_=rl(this.target_)}var t=e.prototype;return t.getObservablePropValue_=function(n){return this.values_.get(n).get()},t.setObservablePropValue_=function(n,i){var o=this.values_.get(n);if(o instanceof Od)return o.set(i),!0;if($i(this)){var s=Hi(this,{type:Zo,object:this.proxy_||this.target_,name:n,newValue:i});if(!s)return null;i=s.newValue}if(i=o.prepareNewValue_(i),i!==ke.UNCHANGED){var a=bo(this),l=!1,u=a||l?{type:Zo,observableKind:"object",debugObjectName:this.name_,object:this.proxy_||this.target_,oldValue:o.value_,name:n,newValue:i}:null;o.setNewValue_(i),a&&wo(this,u)}return!0},t.get_=function(n){return ke.trackingDerivation&&!js(this.target_,n)&&this.has_(n),this.target_[n]},t.set_=function(n,i,o){return o===void 0&&(o=!1),js(this.target_,n)?this.values_.has(n)?this.setObservablePropValue_(n,i):o?Reflect.set(this.target_,n,i):(this.target_[n]=i,!0):this.extend_(n,{value:i,enumerable:!0,writable:!0,configurable:!0},this.defaultAnnotation_,o)},t.has_=function(n){if(!ke.trackingDerivation)return n in this.target_;this.pendingKeys_||(this.pendingKeys_=new Map);var i=this.pendingKeys_.get(n);return i||(i=new Xc(n in this.target_,hy,"ObservableObject.key?",!1),this.pendingKeys_.set(n,i)),i.get()},t.make_=function(n,i){if(i===!0&&(i=this.defaultAnnotation_),i!==!1){if(!(n in this.target_)){var o;if((o=this.target_[Ho])!=null&&o[n])return;Rt(1,i.annotationType_,this.name_+"."+n.toString())}for(var s=this.target_;s&&s!==ay;){var a=Y0(s,n);if(a){var l=i.make_(this,n,a,s);if(l===0)return;if(l===1)break}s=Object.getPrototypeOf(s)}YE(this,i,n)}},t.extend_=function(n,i,o,s){if(s===void 0&&(s=!1),o===!0&&(o=this.defaultAnnotation_),o===!1)return this.defineProperty_(n,i,s);var a=o.extend_(this,n,i,s);return a&&YE(this,o,n),a},t.defineProperty_=function(n,i,o){o===void 0&&(o=!1);try{xi();var s=this.delete_(n);if(!s)return s;if($i(this)){var a=Hi(this,{object:this.proxy_||this.target_,name:n,type:Ra,newValue:i.value});if(!a)return null;var l=a.newValue;i.value!==l&&(i=sh({},i,{value:l}))}if(o){if(!Reflect.defineProperty(this.target_,n,i))return!1}else Gs(this.target_,n,i);this.notifyPropertyAddition_(n,i.value)}finally{Ti()}return!0},t.defineObservableProperty_=function(n,i,o,s){s===void 0&&(s=!1);try{xi();var a=this.delete_(n);if(!a)return a;if($i(this)){var l=Hi(this,{object:this.proxy_||this.target_,name:n,type:Ra,newValue:i});if(!l)return null;i=l.newValue}var u=WE(n),c={configurable:ke.safeDescriptors?this.isPlainObject_:!0,enumerable:!0,get:u.get,set:u.set};if(s){if(!Reflect.defineProperty(this.target_,n,c))return!1}else Gs(this.target_,n,c);var f=new Xc(i,o,"ObservableObject.key",!1);this.values_.set(n,f),this.notifyPropertyAddition_(n,f.value_)}finally{Ti()}return!0},t.defineComputedProperty_=function(n,i,o){o===void 0&&(o=!1);try{xi();var s=this.delete_(n);if(!s)return s;if($i(this)){var a=Hi(this,{object:this.proxy_||this.target_,name:n,type:Ra,newValue:void 0});if(!a)return null}i.name||(i.name="ObservableObject.key"),i.context=this.proxy_||this.target_;var l=WE(n),u={configurable:ke.safeDescriptors?this.isPlainObject_:!0,enumerable:!1,get:l.get,set:l.set};if(o){if(!Reflect.defineProperty(this.target_,n,u))return!1}else Gs(this.target_,n,u);this.values_.set(n,new Od(i)),this.notifyPropertyAddition_(n,void 0)}finally{Ti()}return!0},t.delete_=function(n,i){if(i===void 0&&(i=!1),!js(this.target_,n))return!0;if($i(this)){var o=Hi(this,{object:this.proxy_||this.target_,name:n,type:XE});if(!o)return null}try{var s,a;xi();var l=bo(this),u=!1,c=this.values_.get(n),f=void 0;if(!c&&(l||u)){var p;f=(p=Y0(this.target_,n))==null?void 0:p.value}if(i){if(!Reflect.deleteProperty(this.target_,n))return!1}else delete this.target_[n];if(c&&(this.values_.delete(n),c instanceof Xc&&(f=c.value_),WA(c)),this.keysAtom_.reportChanged(),(s=this.pendingKeys_)==null||(a=s.get(n))==null||a.set(n in this.target_),l||u){var v={type:XE,observableKind:"object",object:this.proxy_||this.target_,debugObjectName:this.name_,oldValue:f,name:n};l&&wo(this,v)}}finally{Ti()}return!0},t.observe_=function(n,i){return Ep(this,n)},t.intercept_=function(n){return Sp(this,n)},t.notifyPropertyAddition_=function(n,i){var o,s,a=bo(this),l=!1;if(a||l){var u=a||l?{type:Ra,observableKind:"object",debugObjectName:this.name_,object:this.proxy_||this.target_,name:n,newValue:i}:null;a&&wo(this,u)}(o=this.pendingKeys_)==null||(s=o.get(n))==null||s.set(!0),this.keysAtom_.reportChanged()},t.ownKeys_=function(){return this.keysAtom_.reportObserved(),cy(this.target_)},t.keys_=function(){return this.keysAtom_.reportObserved(),Object.keys(this.target_)},e}();function vy(e,t){var r;if(js(e,ct))return e;var n=(r=t==null?void 0:t.name)!=null?r:"ObservableObject",i=new hR(e,new Map,String(n),oB(t));return uy(e,ct,i),e}var JB=Eu("ObservableObjectAdministration",hR);function WE(e){return VE[e]||(VE[e]={get:function(){return this[ct].getObservablePropValue_(e)},set:function(r){return this[ct].setObservablePropValue_(e,r)}})}function Fd(e){return ly(e)?JB(e[ct]):!1}function YE(e,t,r){var n;(n=e.target_[Ho])==null||delete n[r]}var F2=0,fR=function(){};function QB(e,t){Object.setPrototypeOf?Object.setPrototypeOf(e.prototype,t):e.prototype.__proto__!==void 0?e.prototype.__proto__=t:e.prototype=t}QB(fR,Array.prototype);var J3=function(e,t,r){IA(n,e);function n(o,s,a,l){var u;a===void 0&&(a="ObservableArray"),l===void 0&&(l=!1),u=e.call(this)||this;var c=new Z3(a,s,l,!0);if(c.proxy_=ME(u),SA(ME(u),ct,c),o&&o.length){var f=xp(!0);u.spliceWithArray(0,0,o),Tp(f)}return u}var i=n.prototype;return i.concat=function(){this[ct].atom_.reportObserved();for(var s=arguments.length,a=new Array(s),l=0;l<s;l++)a[l]=arguments[l];return Array.prototype.concat.apply(this.slice(),a.map(function(u){return my(u)?u.slice():u}))},i[r]=function(){var o=this,s=0;return Md({next:function(){return s<o.length?{value:o[s++],done:!1}:{done:!0,value:void 0}}})},X3(n,[{key:"length",get:function(){return this[ct].getArrayLength_()},set:function(s){this[ct].setArrayLength_(s)}},{key:t,get:function(){return"Array"}}]),n}(fR,Symbol.toStringTag,Symbol.iterator);Object.entries(eg).forEach(function(e){var t=e[0],r=e[1];t!=="concat"&&uy(J3.prototype,t,r)});function eD(e){return{enumerable:!1,configurable:!0,get:function(){return this[ct].get_(e)},set:function(r){this[ct].set_(e,r)}}}function tD(e){Gs(J3.prototype,""+e,eD(e))}function dR(e){if(e>F2){for(var t=F2;t<e+100;t++)tD(t);F2=e}}dR(1e3);function rD(e,t,r){return new J3(e,t,r)}function cu(e,t){if(typeof e=="object"&&e!==null){if(my(e))return t!==void 0&&Rt(23),e[ct].atom_;if(Eh(e))return e[ct];if(Cu(e)){if(t===void 0)return e.keysAtom_;var r=e.data_.get(t)||e.hasMap_.get(t);return r||Rt(25,t,$b(e)),r}if(Fd(e)){if(!t)return Rt(26);var n=e[ct].values_.get(t);return n||Rt(27,t,$b(e)),n}if(W3(e)||py(e)||J0(e))return e}else if(Qi(e)&&J0(e[ct]))return e[ct];Rt(28)}function gy(e,t){if(e||Rt(29),t!==void 0)return gy(cu(e,t));if(W3(e)||py(e)||J0(e)||Cu(e)||Eh(e))return e;if(e[ct])return e[ct];Rt(24,e)}function $b(e,t){var r;if(t!==void 0)r=cu(e,t);else{if(q3(e))return e.name;Fd(e)||Cu(e)||Eh(e)?r=gy(e):r=cu(e)}return r.name_}var KE=ay.toString;function Q3(e,t,r){return r===void 0&&(r=-1),Hb(e,t,r)}function Hb(e,t,r,n,i){if(e===t)return e!==0||1/e===1/t;if(e==null||t==null)return!1;if(e!==e)return t!==t;var o=typeof e;if(o!=="function"&&o!=="object"&&typeof t!="object")return!1;var s=KE.call(e);if(s!==KE.call(t))return!1;switch(s){case"[object RegExp]":case"[object String]":return""+e==""+t;case"[object Number]":return+e!=+e?+t!=+t:+e==0?1/+e===1/t:+e==+t;case"[object Date]":case"[object Boolean]":return+e==+t;case"[object Symbol]":return typeof Symbol<"u"&&Symbol.valueOf.call(e)===Symbol.valueOf.call(t);case"[object Map]":case"[object Set]":r>=0&&r++;break}e=qE(e),t=qE(t);var a=s==="[object Array]";if(!a){if(typeof e!="object"||typeof t!="object")return!1;var l=e.constructor,u=t.constructor;if(l!==u&&!(Qi(l)&&l instanceof l&&Qi(u)&&u instanceof u)&&"constructor"in e&&"constructor"in t)return!1}if(r===0)return!1;r<0&&(r=-1),n=n||[],i=i||[];for(var c=n.length;c--;)if(n[c]===e)return i[c]===t;if(n.push(e),i.push(t),a){if(c=e.length,c!==t.length)return!1;for(;c--;)if(!Hb(e[c],t[c],r-1,n,i))return!1}else{var f=Object.keys(e),p;if(c=f.length,Object.keys(t).length!==c)return!1;for(;c--;)if(p=f[c],!(js(t,p)&&Hb(e[p],t[p],r-1,n,i)))return!1}return n.pop(),i.pop(),!0}function qE(e){return my(e)?e.slice():Th(e)||Cu(e)||yp(e)||Eh(e)?Array.from(e.entries()):e}function Md(e){return e[Symbol.iterator]=nD,e}function nD(){return this}["Symbol","Map","Set"].forEach(function(e){var t=_A();typeof t[e]>"u"&&Rt("MobX requires global '"+e+"' to be available or polyfilled")});typeof __MOBX_DEVTOOLS_GLOBAL_HOOK__=="object"&&__MOBX_DEVTOOLS_GLOBAL_HOOK__.injectMobx({spy:TB,extras:{getDebugName:$b},$mobx:ct});const iD=e=>(t,r)=>(e.set(t,r),r),ZE=Number.MAX_SAFE_INTEGER===void 0?9007199254740991:Number.MAX_SAFE_INTEGER,pR=536870912,JE=pR*2,oD=(e,t)=>r=>{const n=t.get(r);let i=n===void 0?r.size:n<JE?n+1:0;if(!r.has(i))return e(r,i);if(r.size<pR){for(;r.has(i);)i=Math.floor(Math.random()*JE);return e(r,i)}if(r.size>ZE)throw new Error("Congratulations, you created a collection of unique numbers which uses all available integers!");for(;r.has(i);)i=Math.floor(Math.random()*ZE);return e(r,i)},mR=new WeakMap,sD=iD(mR),Wm=oD(sD,mR),aD=e=>e.method!==void 0&&e.method==="call",lD=e=>e.error===null&&typeof e.id=="number",uD=e=>{const t=new Map([[0,()=>{}]]),r=new Map([[0,()=>{}]]),n=new Map,i=new Worker(e);return i.addEventListener("message",({data:u})=>{if(aD(u)){const{params:{timerId:c,timerType:f}}=u;if(f==="interval"){const p=t.get(c);if(typeof p=="number"){const v=n.get(p);if(v===void 0||v.timerId!==c||v.timerType!==f)throw new Error("The timer is in an undefined state.")}else if(typeof p<"u")p();else throw new Error("The timer is in an undefined state.")}else if(f==="timeout"){const p=r.get(c);if(typeof p=="number"){const v=n.get(p);if(v===void 0||v.timerId!==c||v.timerType!==f)throw new Error("The timer is in an undefined state.")}else if(typeof p<"u")p(),r.delete(c);else throw new Error("The timer is in an undefined state.")}}else if(lD(u)){const{id:c}=u,f=n.get(c);if(f===void 0)throw new Error("The timer is in an undefined state.");const{timerId:p,timerType:v}=f;n.delete(c),v==="interval"?t.delete(p):r.delete(p)}else{const{error:{message:c}}=u;throw new Error(c)}}),{clearInterval:u=>{const c=Wm(n);n.set(c,{timerId:u,timerType:"interval"}),t.set(u,c),i.postMessage({id:c,method:"clear",params:{timerId:u,timerType:"interval"}})},clearTimeout:u=>{const c=Wm(n);n.set(c,{timerId:u,timerType:"timeout"}),r.set(u,c),i.postMessage({id:c,method:"clear",params:{timerId:u,timerType:"timeout"}})},setInterval:(u,c)=>{const f=Wm(t);return t.set(f,()=>{u(),typeof t.get(f)=="function"&&i.postMessage({id:null,method:"set",params:{delay:c,now:performance.now(),timerId:f,timerType:"interval"}})}),i.postMessage({id:null,method:"set",params:{delay:c,now:performance.now(),timerId:f,timerType:"interval"}}),f},setTimeout:(u,c)=>{const f=Wm(r);return r.set(f,u),i.postMessage({id:null,method:"set",params:{delay:c,now:performance.now(),timerId:f,timerType:"timeout"}}),f}}};let Pf=null;const cD=(e,t)=>()=>{if(Pf!==null)return Pf;const r=new Blob([t],{type:"application/javascript; charset=utf-8"}),n=URL.createObjectURL(r);return Pf=e(n),Pf.setTimeout(()=>URL.revokeObjectURL(n),0),Pf},hD=`(()=>{"use strict";const e=new Map,t=new Map,r=(e,t)=>{let r,o;const i=performance.now();r=i,o=e-Math.max(0,i-t);return{expected:r+o,remainingDelay:o}},o=(e,t,r,i)=>{const s=performance.now();s>r?postMessage({id:null,method:"call",params:{timerId:t,timerType:i}}):e.set(t,setTimeout(o,r-s,e,t,r,i))};addEventListener("message",(i=>{let{data:s}=i;try{if("clear"===s.method){const{id:r,params:{timerId:o,timerType:i}}=s;if("interval"===i)(t=>{const r=e.get(t);if(void 0===r)throw new Error('There is no interval scheduled with the given id "'.concat(t,'".'));clearTimeout(r),e.delete(t)})(o),postMessage({error:null,id:r});else{if("timeout"!==i)throw new Error('The given type "'.concat(i,'" is not supported'));(e=>{const r=t.get(e);if(void 0===r)throw new Error('There is no timeout scheduled with the given id "'.concat(e,'".'));clearTimeout(r),t.delete(e)})(o),postMessage({error:null,id:r})}}else{if("set"!==s.method)throw new Error('The given method "'.concat(s.method,'" is not supported'));{const{params:{delay:i,now:n,timerId:a,timerType:d}}=s;if("interval"===d)((t,i,s)=>{const{expected:n,remainingDelay:a}=r(t,s);e.set(i,setTimeout(o,a,e,i,n,"interval"))})(i,a,n);else{if("timeout"!==d)throw new Error('The given type "'.concat(d,'" is not supported'));((e,i,s)=>{const{expected:n,remainingDelay:a}=r(e,s);t.set(i,setTimeout(o,a,t,i,n,"timeout"))})(i,a,n)}}}}catch(e){postMessage({error:{message:e.message},id:s.id,result:null})}}))})();`,fD=cD(uD,hD),dD=(e,t)=>fD().setTimeout(e,t),Ac=class{constructor(e=0){this.data=e}setData(e){this.data=e}asNumber(){return this.data}set(e,t){t?this.data|=1<<e:this.data&=~(1<<e)}toggle(e){this.data^=1<<e}test(e){return(this.data&1<<e)!==0}toLayerStatus(e,t){if(t){const r=this.toArray().map((i,o)=>+(o!==e&&i&&t[o].visible));let n=this.test(e)?1:0;return r.forEach((i,o)=>{n|=i?1<<t[o].toNoteIcon():0}),n}else{const r=this.test(e);return this.data===1<<e?1:r?3:2}}toArray(){return this.serializeBin().split("").map(e=>parseInt(e)).reverse()}isEmpty(){return this.data===0}serializeHex(){return this.data.toString(16)}serializeBin(){return this.data.toString(2)}static deserializeHex(e){return new Ac(parseInt(e,16))}static deserializeBin(e){return new Ac(parseInt(e,2))}static deserializeDec(e){return new Ac(parseInt(e,10))}clone(){return new Ac(this.data)}};let Xi=Ac;Xi.EMPTY_LAYER=new Ac(0);class Si{constructor(){this.addColumnNote=t=>{this.notes.push(t.clone())},this.removeAtIndex=t=>{this.notes.splice(t,1)},this.getNoteIndex=t=>{const r=this.notes.findIndex(n=>t===n.index);return r===-1?null:r},this.notes=[],this.tempoChanger=0}clone(){const t=new Si;return t.tempoChanger=this.tempoChanger,t.notes=this.notes.map(r=>r.clone()),t}addNote(t,r){if(t instanceof $s)return this.notes.push(t),t;const n=new $s(t,r);return this.notes.push(n),n}serialize(){return[this.tempoChanger,this.notes.map(t=>t.serialize())]}static deserialize(t){const r=new Si;return r.tempoChanger=t[0],r.notes=t[1].map(n=>$s.deserialize(n)).filter(n=>!n.layer.isEmpty()),r}setTempoChanger(t){this.tempoChanger=t.id}getTempoChanger(){return tl[this.tempoChanger]}}const pD=new Map([["border",1],["circle",2],["line",3]]);class Un{constructor(t={}){this.name=Pr[0],this.volume=90,this.pitch="",this.visible=!0,this.icon="circle",this.alias="",this.muted=!1,Object.assign(this,t)}serialize(){return{name:this.name,volume:this.volume,pitch:this.pitch,visible:this.visible,icon:this.icon,alias:this.alias,muted:this.muted}}static deserialize(t){var r,n,i,o,s,a,l;return new Un().set({name:(r=t.name)!=null?r:Pr[0],volume:(n=t.volume)!=null?n:100,pitch:(i=t.pitch)!=null?i:"C",visible:(o=t.visible)!=null?o:!0,icon:(s=t.icon)!=null?s:"circle",alias:(a=t.alias)!=null?a:"",muted:(l=t.muted)!=null?l:!1})}set(t){return Object.assign(this,t),this}toNoteIcon(){return pD.get(this.icon)||0}clone(){return new Un(this)}}const QE="0000".split(""),zb=class{constructor(e,t){this.index=e,this.layer=t||new Xi}static deserialize(e){return new zb(e[0],Xi.deserializeHex(e[1]))}serialize(){return[this.index,this.layer.serializeHex()]}switchLayer(e,t){this.layer.test(e)&&this.layer.set(t,!0),this.layer.set(e,!1)}swapLayer(e,t){const r=this.layer.test(e);this.layer.set(e,this.layer.test(t)),this.layer.set(t,r)}clearLayer(){this.layer.setData(0)}setLayer(e,t){return this.layer.set(e,t),this.layer}toggleLayer(e){return this.layer.toggle(e),this.layer}isLayerToggled(e){return this.layer.test(e)}clone(){return new zb(this.index,this.layer.clone())}};let $s=zb;$s.deserializeLayer=e=>{for(let t=0;t<e.length;t++)QE[t]=e[t];return QE.join("")};class e5{constructor({time:t,index:r,clicked:n=!1,id:i=0}){this.time=t,this.index=r,this.clicked=n,this.id=i}}class nl{constructor(t,r,n){this.index=t||0,this.time=r||0,this.layer=n||new Xi(1)}setLayer(t,r){this.layer.set(t,r)}toMidi(){return yM.get(this.index)}serialize(){return[this.index,this.time,this.layer.serializeHex()]}static deserialize(t){return new nl(t[0],t[1],Xi.deserializeHex(t[2]))}clone(){return new nl(this.index,this.time,this.layer.clone())}}class t5{constructor(){this.start=()=>{this.startTimestamp=Date.now()-100,console.log("Started new recording")},this.addNote=t=>{this.notes.length===0&&this.start();const r=Date.now(),n=new nl(t,r-this.startTimestamp);this.notes.push(n)},this.startTimestamp=Date.now(),this.notes=[]}}class e4{constructor(t,r,n){this.time=t,this.data=n||{note:-1,isAccidental:!1,outOfRangeBound:0},this.layer=r}static fromMidi(t,r,n){const i=new e4(r,t),o=yA.get(`${n}`)||[-1,!1];return i.data={note:o[0],isAccidental:o[1],outOfRangeBound:0},n>UE.upper&&(i.data.outOfRangeBound=1),n<UE.lower&&(i.data.outOfRangeBound=-1),i}}var Vb={exports:{}};(function(e,t){var r=200,n="__lodash_hash_undefined__",i=9007199254740991,o="[object Arguments]",s="[object Array]",a="[object Boolean]",l="[object Date]",u="[object Error]",c="[object Function]",f="[object GeneratorFunction]",p="[object Map]",v="[object Number]",g="[object Object]",b="[object Promise]",_="[object RegExp]",w="[object Set]",x="[object String]",T="[object Symbol]",I="[object WeakMap]",R="[object ArrayBuffer]",E="[object DataView]",O="[object Float32Array]",P="[object Float64Array]",N="[object Int8Array]",A="[object Int16Array]",j="[object Int32Array]",X="[object Uint8Array]",B="[object Uint8ClampedArray]",ae="[object Uint16Array]",Y="[object Uint32Array]",K=/[\\^$.*+?()[\]{}|]/g,me=/\w*$/,ue=/^\[object .+?Constructor\]$/,ie=/^(?:0|[1-9]\d*)$/,Q={};Q[o]=Q[s]=Q[R]=Q[E]=Q[a]=Q[l]=Q[O]=Q[P]=Q[N]=Q[A]=Q[j]=Q[p]=Q[v]=Q[g]=Q[_]=Q[w]=Q[x]=Q[T]=Q[X]=Q[B]=Q[ae]=Q[Y]=!0,Q[u]=Q[c]=Q[I]=!1;var ee=typeof vo=="object"&&vo&&vo.Object===Object&&vo,W=typeof self=="object"&&self&&self.Object===Object&&self,te=ee||W||Function("return this")(),ye=t&&!t.nodeType&&t,Ce=ye&&!0&&e&&!e.nodeType&&e,Ie=Ce&&Ce.exports===ye;function Ye(G,oe){return G.set(oe[0],oe[1]),G}function de(G,oe){return G.add(oe),G}function F(G,oe){for(var fe=-1,Ge=G?G.length:0;++fe<Ge&&oe(G[fe],fe,G)!==!1;);return G}function $(G,oe){for(var fe=-1,Ge=oe.length,Mt=G.length;++fe<Ge;)G[Mt+fe]=oe[fe];return G}function q(G,oe,fe,Ge){var Mt=-1,kr=G?G.length:0;for(Ge&&kr&&(fe=G[++Mt]);++Mt<kr;)fe=oe(fe,G[Mt],Mt,G);return fe}function pe(G,oe){for(var fe=-1,Ge=Array(G);++fe<G;)Ge[fe]=oe(fe);return Ge}function le(G,oe){return G==null?void 0:G[oe]}function Ee(G){var oe=!1;if(G!=null&&typeof G.toString!="function")try{oe=!!(G+"")}catch{}return oe}function Pe(G){var oe=-1,fe=Array(G.size);return G.forEach(function(Ge,Mt){fe[++oe]=[Mt,Ge]}),fe}function Oe(G,oe){return function(fe){return G(oe(fe))}}function it(G){var oe=-1,fe=Array(G.size);return G.forEach(function(Ge){fe[++oe]=Ge}),fe}var Et=Array.prototype,Ot=Function.prototype,Yt=Object.prototype,Kt=te["__core-js_shared__"],xt=function(){var G=/[^.]+$/.exec(Kt&&Kt.keys&&Kt.keys.IE_PROTO||"");return G?"Symbol(src)_1."+G:""}(),Gr=Ot.toString,L=Yt.hasOwnProperty,H=Yt.toString,Z=RegExp("^"+Gr.call(L).replace(K,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),_e=Ie?te.Buffer:void 0,Ve=te.Symbol,ht=te.Uint8Array,D=Oe(Object.getPrototypeOf,Object),V=Object.create,re=Yt.propertyIsEnumerable,ve=Et.splice,Ke=Object.getOwnPropertySymbols,rt=_e?_e.isBuffer:void 0,Qe=Oe(Object.keys,Object),jt=Io(te,"DataView"),yt=Io(te,"Map"),Nt=Io(te,"Promise"),Ut=Io(te,"Set"),ur=Io(te,"WeakMap"),di=Io(Object,"create"),e1=No(jt),Mh=No(yt),t1=No(Nt),Bp=No(Ut),Dp=No(ur),Gp=Ve?Ve.prototype:void 0,Bh=Gp?Gp.valueOf:void 0;function Eo(G){var oe=-1,fe=G?G.length:0;for(this.clear();++oe<fe;){var Ge=G[oe];this.set(Ge[0],Ge[1])}}function jp(){this.__data__=di?di(null):{}}function r1(G){return this.has(G)&&delete this.__data__[G]}function n1(G){var oe=this.__data__;if(di){var fe=oe[G];return fe===n?void 0:fe}return L.call(oe,G)?oe[G]:void 0}function i1(G){var oe=this.__data__;return di?oe[G]!==void 0:L.call(oe,G)}function o1(G,oe){var fe=this.__data__;return fe[G]=di&&oe===void 0?n:oe,this}Eo.prototype.clear=jp,Eo.prototype.delete=r1,Eo.prototype.get=n1,Eo.prototype.has=i1,Eo.prototype.set=o1;function pi(G){var oe=-1,fe=G?G.length:0;for(this.clear();++oe<fe;){var Ge=G[oe];this.set(Ge[0],Ge[1])}}function $p(){this.__data__=[]}function s1(G){var oe=this.__data__,fe=jr(oe,G);if(fe<0)return!1;var Ge=oe.length-1;return fe==Ge?oe.pop():ve.call(oe,fe,1),!0}function a1(G){var oe=this.__data__,fe=jr(oe,G);return fe<0?void 0:oe[fe][1]}function l1(G){return jr(this.__data__,G)>-1}function Hp(G,oe){var fe=this.__data__,Ge=jr(fe,G);return Ge<0?fe.push([G,oe]):fe[Ge][1]=oe,this}pi.prototype.clear=$p,pi.prototype.delete=s1,pi.prototype.get=a1,pi.prototype.has=l1,pi.prototype.set=Hp;function na(G){var oe=-1,fe=G?G.length:0;for(this.clear();++oe<fe;){var Ge=G[oe];this.set(Ge[0],Ge[1])}}function bl(){this.__data__={hash:new Eo,map:new(yt||pi),string:new Eo}}function Dh(G){return $u(this,G).delete(G)}function Uu(G){return $u(this,G).get(G)}function Gh(G){return $u(this,G).has(G)}function ia(G,oe){return $u(this,G).set(G,oe),this}na.prototype.clear=bl,na.prototype.delete=Dh,na.prototype.get=Uu,na.prototype.has=Gh,na.prototype.set=ia;function $n(G){this.__data__=new pi(G)}function qt(){this.__data__=new pi}function cr(G){return this.__data__.delete(G)}function Co(G){return this.__data__.get(G)}function Qr(G){return this.__data__.has(G)}function Nn(G,oe){var fe=this.__data__;if(fe instanceof pi){var Ge=fe.__data__;if(!yt||Ge.length<r-1)return Ge.push([G,oe]),this;fe=this.__data__=new na(Ge)}return fe.set(G,oe),this}$n.prototype.clear=qt,$n.prototype.delete=cr,$n.prototype.get=Co,$n.prototype.has=Qr,$n.prototype.set=Nn;function us(G,oe){var fe=sa(G)||so(G)?pe(G.length,String):[],Ge=fe.length,Mt=!!Ge;for(var kr in G)(oe||L.call(G,kr))&&!(Mt&&(kr=="length"||zu(kr,Ge)))&&fe.push(kr);return fe}function cs(G,oe,fe){var Ge=G[oe];(!(L.call(G,oe)&&qp(Ge,fe))||fe===void 0&&!(oe in G))&&(G[oe]=fe)}function jr(G,oe){for(var fe=G.length;fe--;)if(qp(G[fe][0],oe))return fe;return-1}function Fu(G,oe){return G&&oo(oe,Pn(oe),G)}function Mu(G,oe,fe,Ge,Mt,kr,pn){var Cr;if(Ge&&(Cr=kr?Ge(G,Mt,kr,pn):Ge(G)),Cr!==void 0)return Cr;if(!Zn(G))return G;var Tl=sa(G);if(Tl){if(Cr=Wp(G),!oe)return ju(G,Cr)}else{var Po=ds(G),Xh=Po==c||Po==f;if($r(G))return Du(G,oe);if(Po==g||Po==o||Xh&&!kr){if(Ee(G))return kr?G:{};if(Cr=Hh(Xh?{}:G),!oe)return u1(G,Fu(Cr,G))}else{if(!Q[Po])return kr?G:{};Cr=h1(G,Po,Mu,oe)}}pn||(pn=new $n);var Xu=pn.get(G);if(Xu)return Xu;if(pn.set(G,Cr),!Tl)var Wh=fe?c1(G):Pn(G);return F(Wh||G,function(Ao,mn){Wh&&(mn=Ao,Ao=G[mn]),cs(Cr,mn,Mu(Ao,oe,fe,Ge,mn,G,pn))}),Cr}function zp(G){return Zn(G)?V(G):{}}function Bu(G,oe,fe){var Ge=oe(G);return sa(G)?Ge:$(Ge,fe(G))}function Vp(G){return H.call(G)}function jh(G){if(!Zn(G)||Kp(G))return!1;var oe=ps(G)||Ee(G)?Z:ue;return oe.test(No(G))}function hs(G){if(!zh(G))return Qe(G);var oe=[];for(var fe in Object(G))L.call(G,fe)&&fe!="constructor"&&oe.push(fe);return oe}function Du(G,oe){if(oe)return G.slice();var fe=new G.constructor(G.length);return G.copy(fe),fe}function Ft(G){var oe=new G.constructor(G.byteLength);return new ht(oe).set(new ht(G)),oe}function fs(G,oe){var fe=oe?Ft(G.buffer):G.buffer;return new G.constructor(fe,G.byteOffset,G.byteLength)}function wl(G,oe,fe){var Ge=oe?fe(Pe(G),!0):Pe(G);return q(Ge,Ye,new G.constructor)}function Xp(G){var oe=new G.constructor(G.source,me.exec(G));return oe.lastIndex=G.lastIndex,oe}function Gu(G,oe,fe){var Ge=oe?fe(it(G),!0):it(G);return q(Ge,de,new G.constructor)}function oa(G){return Bh?Object(Bh.call(G)):{}}function $h(G,oe){var fe=oe?Ft(G.buffer):G.buffer;return new G.constructor(fe,G.byteOffset,G.length)}function ju(G,oe){var fe=-1,Ge=G.length;for(oe||(oe=Array(Ge));++fe<Ge;)oe[fe]=G[fe];return oe}function oo(G,oe,fe,Ge){fe||(fe={});for(var Mt=-1,kr=oe.length;++Mt<kr;){var pn=oe[Mt],Cr=Ge?Ge(fe[pn],G[pn],pn,fe,G):void 0;cs(fe,pn,Cr===void 0?G[pn]:Cr)}return fe}function u1(G,oe){return oo(G,Hu(G),oe)}function c1(G){return Bu(G,Pn,Hu)}function $u(G,oe){var fe=G.__data__;return Yp(oe)?fe[typeof oe=="string"?"string":"hash"]:fe.map}function Io(G,oe){var fe=le(G,oe);return jh(fe)?fe:void 0}var Hu=Ke?Oe(Ke,Object):Qp,ds=Vp;(jt&&ds(new jt(new ArrayBuffer(1)))!=E||yt&&ds(new yt)!=p||Nt&&ds(Nt.resolve())!=b||Ut&&ds(new Ut)!=w||ur&&ds(new ur)!=I)&&(ds=function(G){var oe=H.call(G),fe=oe==g?G.constructor:void 0,Ge=fe?No(fe):void 0;if(Ge)switch(Ge){case e1:return E;case Mh:return p;case t1:return b;case Bp:return w;case Dp:return I}return oe});function Wp(G){var oe=G.length,fe=G.constructor(oe);return oe&&typeof G[0]=="string"&&L.call(G,"index")&&(fe.index=G.index,fe.input=G.input),fe}function Hh(G){return typeof G.constructor=="function"&&!zh(G)?zp(D(G)):{}}function h1(G,oe,fe,Ge){var Mt=G.constructor;switch(oe){case R:return Ft(G);case a:case l:return new Mt(+G);case E:return fs(G,Ge);case O:case P:case N:case A:case j:case X:case B:case ae:case Y:return $h(G,Ge);case p:return wl(G,Ge,fe);case v:case x:return new Mt(G);case _:return Xp(G);case w:return Gu(G,Ge,fe);case T:return oa(G)}}function zu(G,oe){return oe=oe==null?i:oe,!!oe&&(typeof G=="number"||ie.test(G))&&G>-1&&G%1==0&&G<oe}function Yp(G){var oe=typeof G;return oe=="string"||oe=="number"||oe=="symbol"||oe=="boolean"?G!=="__proto__":G===null}function Kp(G){return!!xt&&xt in G}function zh(G){var oe=G&&G.constructor,fe=typeof oe=="function"&&oe.prototype||Yt;return G===fe}function No(G){if(G!=null){try{return Gr.call(G)}catch{}try{return G+""}catch{}}return""}function Vh(G){return Mu(G,!0,!0)}function qp(G,oe){return G===oe||G!==G&&oe!==oe}function so(G){return Zp(G)&&L.call(G,"callee")&&(!re.call(G,"callee")||H.call(G)==o)}var sa=Array.isArray;function Vu(G){return G!=null&&Jp(G.length)&&!ps(G)}function Zp(G){return xl(G)&&Vu(G)}var $r=rt||f1;function ps(G){var oe=Zn(G)?H.call(G):"";return oe==c||oe==f}function Jp(G){return typeof G=="number"&&G>-1&&G%1==0&&G<=i}function Zn(G){var oe=typeof G;return!!G&&(oe=="object"||oe=="function")}function xl(G){return!!G&&typeof G=="object"}function Pn(G){return Vu(G)?us(G):hs(G)}function Qp(){return[]}function f1(){return!1}e.exports=Vh})(Vb,Vb.exports);const _i=Vb.exports;var Cp={},yy={};function mD(e){var t=new Kn(e),r=t.readChunk();if(r.id!="MThd")throw"Bad MIDI file.  Expected 'MHdr', got: '"+r.id+"'";for(var n=vD(r.data),i=[],o=0;!t.eof()&&o<n.numTracks;o++){var s=t.readChunk();if(s.id!="MTrk")throw"Bad MIDI file.  Expected 'MTrk', got: '"+s.id+"'";var a=gD(s.data);i.push(a)}return{header:n,tracks:i}}function vD(e){var t=new Kn(e),r=t.readUInt16(),n=t.readUInt16(),i={format:r,numTracks:n},o=t.readUInt16();return o&32768?(i.framesPerSecond=256-(o>>8),i.ticksPerFrame=o&255):i.ticksPerBeat=o,i}function gD(e){for(var t=new Kn(e),r=[];!t.eof();){var n=o();r.push(n)}return r;var i;function o(){var s={};s.deltaTime=t.readVarInt();var a=t.readUInt8();if((a&240)===240)if(a===255){s.meta=!0;var l=t.readUInt8(),u=t.readVarInt();switch(l){case 0:if(s.type="sequenceNumber",u!==2)throw"Expected length for sequenceNumber event is 2, got "+u;return s.number=t.readUInt16(),s;case 1:return s.type="text",s.text=t.readString(u),s;case 2:return s.type="copyrightNotice",s.text=t.readString(u),s;case 3:return s.type="trackName",s.text=t.readString(u),s;case 4:return s.type="instrumentName",s.text=t.readString(u),s;case 5:return s.type="lyrics",s.text=t.readString(u),s;case 6:return s.type="marker",s.text=t.readString(u),s;case 7:return s.type="cuePoint",s.text=t.readString(u),s;case 32:if(s.type="channelPrefix",u!=1)throw"Expected length for channelPrefix event is 1, got "+u;return s.channel=t.readUInt8(),s;case 33:if(s.type="portPrefix",u!=1)throw"Expected length for portPrefix event is 1, got "+u;return s.port=t.readUInt8(),s;case 47:if(s.type="endOfTrack",u!=0)throw"Expected length for endOfTrack event is 0, got "+u;return s;case 81:if(s.type="setTempo",u!=3)throw"Expected length for setTempo event is 3, got "+u;return s.microsecondsPerBeat=t.readUInt24(),s;case 84:if(s.type="smpteOffset",u!=5)throw"Expected length for smpteOffset event is 5, got "+u;var c=t.readUInt8(),f={0:24,32:25,64:29,96:30};return s.frameRate=f[c&96],s.hour=c&31,s.min=t.readUInt8(),s.sec=t.readUInt8(),s.frame=t.readUInt8(),s.subFrame=t.readUInt8(),s;case 88:if(s.type="timeSignature",u!=4)throw"Expected length for timeSignature event is 4, got "+u;return s.numerator=t.readUInt8(),s.denominator=1<<t.readUInt8(),s.metronome=t.readUInt8(),s.thirtyseconds=t.readUInt8(),s;case 89:if(s.type="keySignature",u!=2)throw"Expected length for keySignature event is 2, got "+u;return s.key=t.readInt8(),s.scale=t.readUInt8(),s;case 127:return s.type="sequencerSpecific",s.data=t.readBytes(u),s;default:return s.type="unknownMeta",s.data=t.readBytes(u),s.metatypeByte=l,s}}else if(a==240){s.type="sysEx";var u=t.readVarInt();return s.data=t.readBytes(u),s}else if(a==247){s.type="endSysEx";var u=t.readVarInt();return s.data=t.readBytes(u),s}else throw"Unrecognised MIDI event type byte: "+a;else{var p;if((a&128)===0){if(i===null)throw"Running status byte encountered before status byte";p=a,a=i,s.running=!0}else p=t.readUInt8(),i=a;var v=a>>4;switch(s.channel=a&15,v){case 8:return s.type="noteOff",s.noteNumber=p,s.velocity=t.readUInt8(),s;case 9:var g=t.readUInt8();return s.type=g===0?"noteOff":"noteOn",s.noteNumber=p,s.velocity=g,g===0&&(s.byte9=!0),s;case 10:return s.type="noteAftertouch",s.noteNumber=p,s.amount=t.readUInt8(),s;case 11:return s.type="controller",s.controllerType=p,s.value=t.readUInt8(),s;case 12:return s.type="programChange",s.programNumber=p,s;case 13:return s.type="channelAftertouch",s.amount=p,s;case 14:return s.type="pitchBend",s.value=p+(t.readUInt8()<<7)-8192,s;default:throw"Unrecognised MIDI event type: "+v}}}}function Kn(e){this.buffer=e,this.bufferLen=this.buffer.length,this.pos=0}Kn.prototype.eof=function(){return this.pos>=this.bufferLen};Kn.prototype.readUInt8=function(){var e=this.buffer[this.pos];return this.pos+=1,e};Kn.prototype.readInt8=function(){var e=this.readUInt8();return e&128?e-256:e};Kn.prototype.readUInt16=function(){var e=this.readUInt8(),t=this.readUInt8();return(e<<8)+t};Kn.prototype.readInt16=function(){var e=this.readUInt16();return e&32768?e-65536:e};Kn.prototype.readUInt24=function(){var e=this.readUInt8(),t=this.readUInt8(),r=this.readUInt8();return(e<<16)+(t<<8)+r};Kn.prototype.readInt24=function(){var e=this.readUInt24();return e&8388608?e-16777216:e};Kn.prototype.readUInt32=function(){var e=this.readUInt8(),t=this.readUInt8(),r=this.readUInt8(),n=this.readUInt8();return(e<<24)+(t<<16)+(r<<8)+n};Kn.prototype.readBytes=function(e){var t=this.buffer.slice(this.pos,this.pos+e);return this.pos+=e,t};Kn.prototype.readString=function(e){var t=this.readBytes(e);return String.fromCharCode.apply(null,t)};Kn.prototype.readVarInt=function(){for(var e=0;!this.eof();){var t=this.readUInt8();if(t&128)e+=t&127,e<<=7;else return e+t}return e};Kn.prototype.readChunk=function(){var e=this.readString(4),t=this.readUInt32(),r=this.readBytes(t);return{id:e,length:t,data:r}};var yD=mD;function _D(e,t){if(typeof e!="object")throw"Invalid MIDI data";t=t||{};var r=e.header||{},n=e.tracks||[],i,o=n.length,s=new Kr;for(bD(s,r,o),i=0;i<o;i++)wD(s,n[i],t);return s.buffer}function bD(e,t,r){var n=t.format==null?1:t.format,i=128;t.timeDivision?i=t.timeDivision:t.ticksPerFrame&&t.framesPerSecond?i=-(t.framesPerSecond&255)<<8|t.ticksPerFrame&255:t.ticksPerBeat&&(i=t.ticksPerBeat&32767);var o=new Kr;o.writeUInt16(n),o.writeUInt16(r),o.writeUInt16(i),e.writeChunk("MThd",o.buffer)}function wD(e,t,r){var n=new Kr,i,o=t.length,s=null;for(i=0;i<o;i++)(r.running===!1||!r.running&&!t[i].running)&&(s=null),s=xD(n,t[i],s,r.useByte9ForNoteOff);e.writeChunk("MTrk",n.buffer)}function xD(e,t,r,n){var i=t.type,o=t.deltaTime,s=t.text||"",a=t.data||[],l=null;switch(e.writeVarInt(o),i){case"sequenceNumber":e.writeUInt8(255),e.writeUInt8(0),e.writeVarInt(2),e.writeUInt16(t.number);break;case"text":e.writeUInt8(255),e.writeUInt8(1),e.writeVarInt(s.length),e.writeString(s);break;case"copyrightNotice":e.writeUInt8(255),e.writeUInt8(2),e.writeVarInt(s.length),e.writeString(s);break;case"trackName":e.writeUInt8(255),e.writeUInt8(3),e.writeVarInt(s.length),e.writeString(s);break;case"instrumentName":e.writeUInt8(255),e.writeUInt8(4),e.writeVarInt(s.length),e.writeString(s);break;case"lyrics":e.writeUInt8(255),e.writeUInt8(5),e.writeVarInt(s.length),e.writeString(s);break;case"marker":e.writeUInt8(255),e.writeUInt8(6),e.writeVarInt(s.length),e.writeString(s);break;case"cuePoint":e.writeUInt8(255),e.writeUInt8(7),e.writeVarInt(s.length),e.writeString(s);break;case"channelPrefix":e.writeUInt8(255),e.writeUInt8(32),e.writeVarInt(1),e.writeUInt8(t.channel);break;case"portPrefix":e.writeUInt8(255),e.writeUInt8(33),e.writeVarInt(1),e.writeUInt8(t.port);break;case"endOfTrack":e.writeUInt8(255),e.writeUInt8(47),e.writeVarInt(0);break;case"setTempo":e.writeUInt8(255),e.writeUInt8(81),e.writeVarInt(3),e.writeUInt24(t.microsecondsPerBeat);break;case"smpteOffset":e.writeUInt8(255),e.writeUInt8(84),e.writeVarInt(5);var u={24:0,25:32,29:64,30:96},c=t.hour&31|u[t.frameRate];e.writeUInt8(c),e.writeUInt8(t.min),e.writeUInt8(t.sec),e.writeUInt8(t.frame),e.writeUInt8(t.subFrame);break;case"timeSignature":e.writeUInt8(255),e.writeUInt8(88),e.writeVarInt(4),e.writeUInt8(t.numerator);var f=Math.floor(Math.log(t.denominator)/Math.LN2)&255;e.writeUInt8(f),e.writeUInt8(t.metronome),e.writeUInt8(t.thirtyseconds||8);break;case"keySignature":e.writeUInt8(255),e.writeUInt8(89),e.writeVarInt(2),e.writeInt8(t.key),e.writeUInt8(t.scale);break;case"sequencerSpecific":e.writeUInt8(255),e.writeUInt8(127),e.writeVarInt(a.length),e.writeBytes(a);break;case"unknownMeta":t.metatypeByte!=null&&(e.writeUInt8(255),e.writeUInt8(t.metatypeByte),e.writeVarInt(a.length),e.writeBytes(a));break;case"sysEx":e.writeUInt8(240),e.writeVarInt(a.length),e.writeBytes(a);break;case"endSysEx":e.writeUInt8(247),e.writeVarInt(a.length),e.writeBytes(a);break;case"noteOff":var p=n!==!1&&t.byte9||n&&t.velocity==0?144:128;l=p|t.channel,l!==r&&e.writeUInt8(l),e.writeUInt8(t.noteNumber),e.writeUInt8(t.velocity);break;case"noteOn":l=144|t.channel,l!==r&&e.writeUInt8(l),e.writeUInt8(t.noteNumber),e.writeUInt8(t.velocity);break;case"noteAftertouch":l=160|t.channel,l!==r&&e.writeUInt8(l),e.writeUInt8(t.noteNumber),e.writeUInt8(t.amount);break;case"controller":l=176|t.channel,l!==r&&e.writeUInt8(l),e.writeUInt8(t.controllerType),e.writeUInt8(t.value);break;case"programChange":l=192|t.channel,l!==r&&e.writeUInt8(l),e.writeUInt8(t.programNumber);break;case"channelAftertouch":l=208|t.channel,l!==r&&e.writeUInt8(l),e.writeUInt8(t.amount);break;case"pitchBend":l=224|t.channel,l!==r&&e.writeUInt8(l);var v=8192+t.value,g=v&127,b=v>>7&127;e.writeUInt8(g),e.writeUInt8(b);break;default:throw"Unrecognized event type: "+i}return l}function Kr(){this.buffer=[]}Kr.prototype.writeUInt8=function(e){this.buffer.push(e&255)};Kr.prototype.writeInt8=Kr.prototype.writeUInt8;Kr.prototype.writeUInt16=function(e){var t=e>>8&255,r=e&255;this.writeUInt8(t),this.writeUInt8(r)};Kr.prototype.writeInt16=Kr.prototype.writeUInt16;Kr.prototype.writeUInt24=function(e){var t=e>>16&255,r=e>>8&255,n=e&255;this.writeUInt8(t),this.writeUInt8(r),this.writeUInt8(n)};Kr.prototype.writeInt24=Kr.prototype.writeUInt24;Kr.prototype.writeUInt32=function(e){var t=e>>24&255,r=e>>16&255,n=e>>8&255,i=e&255;this.writeUInt8(t),this.writeUInt8(r),this.writeUInt8(n),this.writeUInt8(i)};Kr.prototype.writeInt32=Kr.prototype.writeUInt32;Kr.prototype.writeBytes=function(e){this.buffer=this.buffer.concat(Array.prototype.slice.call(e,0))};Kr.prototype.writeString=function(e){var t,r=e.length,n=[];for(t=0;t<r;t++)n.push(e.codePointAt(t));this.writeBytes(n)};Kr.prototype.writeVarInt=function(e){if(e<0)throw"Cannot write negative variable-length integer";if(e<=127)this.writeUInt8(e);else{var t=e,r=[];for(r.push(t&127),t>>=7;t;){var n=t&127|128;r.push(n),t>>=7}this.writeBytes(r.reverse())}};Kr.prototype.writeChunk=function(e,t){this.writeString(e),this.writeUInt32(t.length),this.writeBytes(t)};var TD=_D;yy.parseMidi=yD;yy.writeMidi=TD;var rg={},hu={};Object.defineProperty(hu,"__esModule",{value:!0});hu.insert=hu.search=void 0;function vR(e,t,r){r===void 0&&(r="ticks");var n=0,i=e.length,o=i;if(i>0&&e[i-1][r]<=t)return i-1;for(;n<o;){var s=Math.floor(n+(o-n)/2),a=e[s],l=e[s+1];if(a[r]===t){for(var u=s;u<e.length;u++){var c=e[u];c[r]===t&&(s=u)}return s}else{if(a[r]<t&&l[r]>t)return s;a[r]>t?o=s:a[r]<t&&(n=s+1)}}return-1}hu.search=vR;function SD(e,t,r){if(r===void 0&&(r="ticks"),e.length){var n=vR(e,t[r],r);e.splice(n+1,0,t)}else e.push(t)}hu.insert=SD;(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.Header=e.keySignatureKeys=void 0;var t=hu,r=new WeakMap;e.keySignatureKeys=["Cb","Gb","Db","Ab","Eb","Bb","F","C","G","D","A","E","B","F#","C#"];var n=function(){function i(o){var s=this;if(this.tempos=[],this.timeSignatures=[],this.keySignatures=[],this.meta=[],this.name="",r.set(this,480),o){r.set(this,o.header.ticksPerBeat),o.tracks.forEach(function(l){l.forEach(function(u){u.meta&&(u.type==="timeSignature"?s.timeSignatures.push({ticks:u.absoluteTime,timeSignature:[u.numerator,u.denominator]}):u.type==="setTempo"?s.tempos.push({bpm:6e7/u.microsecondsPerBeat,ticks:u.absoluteTime}):u.type==="keySignature"&&s.keySignatures.push({key:e.keySignatureKeys[u.key+7],scale:u.scale===0?"major":"minor",ticks:u.absoluteTime}))})});var a=0;o.tracks[0].forEach(function(l){a+=l.deltaTime,l.meta&&(l.type==="trackName"?s.name=l.text:(l.type==="text"||l.type==="cuePoint"||l.type==="marker"||l.type==="lyrics")&&s.meta.push({text:l.text,ticks:a,type:l.type}))}),this.update()}}return i.prototype.update=function(){var o=this,s=0,a=0;this.tempos.sort(function(l,u){return l.ticks-u.ticks}),this.tempos.forEach(function(l,u){var c=u>0?o.tempos[u-1].bpm:o.tempos[0].bpm,f=l.ticks/o.ppq-a,p=60/c*f;l.time=p+s,s=l.time,a+=f}),this.timeSignatures.sort(function(l,u){return l.ticks-u.ticks}),this.timeSignatures.forEach(function(l,u){var c=u>0?o.timeSignatures[u-1]:o.timeSignatures[0],f=(l.ticks-c.ticks)/o.ppq,p=f/c.timeSignature[0]/(c.timeSignature[1]/4);c.measures=c.measures||0,l.measures=p+c.measures})},i.prototype.ticksToSeconds=function(o){var s=(0,t.search)(this.tempos,o);if(s!==-1){var a=this.tempos[s],l=a.time,u=(o-a.ticks)/this.ppq;return l+60/a.bpm*u}else{var c=o/this.ppq;return 60/120*c}},i.prototype.ticksToMeasures=function(o){var s=(0,t.search)(this.timeSignatures,o);if(s!==-1){var a=this.timeSignatures[s],l=(o-a.ticks)/this.ppq;return a.measures+l/(a.timeSignature[0]/a.timeSignature[1])/4}else return o/this.ppq/4},Object.defineProperty(i.prototype,"ppq",{get:function(){return r.get(this)},enumerable:!1,configurable:!0}),i.prototype.secondsToTicks=function(o){var s=(0,t.search)(this.tempos,o,"time");if(s!==-1){var a=this.tempos[s],l=a.time,u=o-l,c=u/(60/a.bpm);return Math.round(a.ticks+c*this.ppq)}else{var f=o/.5;return Math.round(f*this.ppq)}},i.prototype.toJSON=function(){return{keySignatures:this.keySignatures,meta:this.meta,name:this.name,ppq:this.ppq,tempos:this.tempos.map(function(o){return{bpm:o.bpm,ticks:o.ticks}}),timeSignatures:this.timeSignatures}},i.prototype.fromJSON=function(o){this.name=o.name,this.tempos=o.tempos.map(function(s){return Object.assign({},s)}),this.timeSignatures=o.timeSignatures.map(function(s){return Object.assign({},s)}),this.keySignatures=o.keySignatures.map(function(s){return Object.assign({},s)}),this.meta=o.meta.map(function(s){return Object.assign({},s)}),r.set(this,o.ppq),this.update()},i.prototype.setTempo=function(o){this.tempos=[{bpm:o,ticks:0}],this.update()},i}();e.Header=n})(rg);var Bd={},t4={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.ControlChange=e.controlChangeIds=e.controlChangeNames=void 0,e.controlChangeNames={1:"modulationWheel",2:"breath",4:"footController",5:"portamentoTime",7:"volume",8:"balance",10:"pan",64:"sustain",65:"portamentoTime",66:"sostenuto",67:"softPedal",68:"legatoFootswitch",84:"portamentoControl"},e.controlChangeIds=Object.keys(e.controlChangeNames).reduce(function(i,o){return i[e.controlChangeNames[o]]=o,i},{});var t=new WeakMap,r=new WeakMap,n=function(){function i(o,s){t.set(this,s),r.set(this,o.controllerType),this.ticks=o.absoluteTime,this.value=o.value}return Object.defineProperty(i.prototype,"number",{get:function(){return r.get(this)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"name",{get:function(){return e.controlChangeNames[this.number]?e.controlChangeNames[this.number]:null},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"time",{get:function(){var o=t.get(this);return o.ticksToSeconds(this.ticks)},set:function(o){var s=t.get(this);this.ticks=s.secondsToTicks(o)},enumerable:!1,configurable:!0}),i.prototype.toJSON=function(){return{number:this.number,ticks:this.ticks,time:this.time,value:this.value}},i}();e.ControlChange=n})(t4);var _y={};Object.defineProperty(_y,"__esModule",{value:!0});_y.createControlChanges=void 0;var Ym=t4;function ED(){return new Proxy({},{get:function(e,t){if(e[t])return e[t];if(Ym.controlChangeIds.hasOwnProperty(t))return e[Ym.controlChangeIds[t]]},set:function(e,t,r){return Ym.controlChangeIds.hasOwnProperty(t)?e[Ym.controlChangeIds[t]]=r:e[t]=r,!0}})}_y.createControlChanges=ED;var by={};Object.defineProperty(by,"__esModule",{value:!0});by.PitchBend=void 0;var M2=new WeakMap,CD=function(){function e(t,r){M2.set(this,r),this.ticks=t.absoluteTime,this.value=t.value}return Object.defineProperty(e.prototype,"time",{get:function(){var t=M2.get(this);return t.ticksToSeconds(this.ticks)},set:function(t){var r=M2.get(this);this.ticks=r.secondsToTicks(t)},enumerable:!1,configurable:!0}),e.prototype.toJSON=function(){return{ticks:this.ticks,time:this.time,value:this.value}},e}();by.PitchBend=CD;var wy={},Ha={};Object.defineProperty(Ha,"__esModule",{value:!0});Ha.DrumKitByPatchID=Ha.InstrumentFamilyByID=Ha.instrumentByPatchID=void 0;Ha.instrumentByPatchID=["acoustic grand piano","bright acoustic piano","electric grand piano","honky-tonk piano","electric piano 1","electric piano 2","harpsichord","clavi","celesta","glockenspiel","music box","vibraphone","marimba","xylophone","tubular bells","dulcimer","drawbar organ","percussive organ","rock organ","church organ","reed organ","accordion","harmonica","tango accordion","acoustic guitar (nylon)","acoustic guitar (steel)","electric guitar (jazz)","electric guitar (clean)","electric guitar (muted)","overdriven guitar","distortion guitar","guitar harmonics","acoustic bass","electric bass (finger)","electric bass (pick)","fretless bass","slap bass 1","slap bass 2","synth bass 1","synth bass 2","violin","viola","cello","contrabass","tremolo strings","pizzicato strings","orchestral harp","timpani","string ensemble 1","string ensemble 2","synthstrings 1","synthstrings 2","choir aahs","voice oohs","synth voice","orchestra hit","trumpet","trombone","tuba","muted trumpet","french horn","brass section","synthbrass 1","synthbrass 2","soprano sax","alto sax","tenor sax","baritone sax","oboe","english horn","bassoon","clarinet","piccolo","flute","recorder","pan flute","blown bottle","shakuhachi","whistle","ocarina","lead 1 (square)","lead 2 (sawtooth)","lead 3 (calliope)","lead 4 (chiff)","lead 5 (charang)","lead 6 (voice)","lead 7 (fifths)","lead 8 (bass + lead)","pad 1 (new age)","pad 2 (warm)","pad 3 (polysynth)","pad 4 (choir)","pad 5 (bowed)","pad 6 (metallic)","pad 7 (halo)","pad 8 (sweep)","fx 1 (rain)","fx 2 (soundtrack)","fx 3 (crystal)","fx 4 (atmosphere)","fx 5 (brightness)","fx 6 (goblins)","fx 7 (echoes)","fx 8 (sci-fi)","sitar","banjo","shamisen","koto","kalimba","bag pipe","fiddle","shanai","tinkle bell","agogo","steel drums","woodblock","taiko drum","melodic tom","synth drum","reverse cymbal","guitar fret noise","breath noise","seashore","bird tweet","telephone ring","helicopter","applause","gunshot"];Ha.InstrumentFamilyByID=["piano","chromatic percussion","organ","guitar","bass","strings","ensemble","brass","reed","pipe","synth lead","synth pad","synth effects","world","percussive","sound effects"];Ha.DrumKitByPatchID={0:"standard kit",8:"room kit",16:"power kit",24:"electronic kit",25:"tr-808 kit",32:"jazz kit",40:"brush kit",48:"orchestra kit",56:"sound fx kit"};Object.defineProperty(wy,"__esModule",{value:!0});wy.Instrument=void 0;var Km=Ha,r5=new WeakMap,ID=function(){function e(t,r){if(this.number=0,r5.set(this,r),this.number=0,t){var n=t.find(function(i){return i.type==="programChange"});n&&(this.number=n.programNumber)}}return Object.defineProperty(e.prototype,"name",{get:function(){return this.percussion?Km.DrumKitByPatchID[this.number]:Km.instrumentByPatchID[this.number]},set:function(t){var r=Km.instrumentByPatchID.indexOf(t);r!==-1&&(this.number=r)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"family",{get:function(){return this.percussion?"drums":Km.InstrumentFamilyByID[Math.floor(this.number/8)]},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"percussion",{get:function(){var t=r5.get(this);return t.channel===9},enumerable:!1,configurable:!0}),e.prototype.toJSON=function(){return{family:this.family,number:this.number,name:this.name}},e.prototype.fromJSON=function(t){this.number=t.number},e}();wy.Instrument=ID;var xy={};Object.defineProperty(xy,"__esModule",{value:!0});xy.Note=void 0;function ND(e){var t=Math.floor(e/12)-1;return gR(e)+t.toString()}function gR(e){var t=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"],r=e%12;return t[r]}function PD(e){var t=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"];return t.indexOf(e)}var AD=function(){var e=/^([a-g]{1}(?:b|#|x|bb)?)(-?[0-9]+)/i,t={cbb:-2,cb:-1,c:0,"c#":1,cx:2,dbb:0,db:1,d:2,"d#":3,dx:4,ebb:2,eb:3,e:4,"e#":5,ex:6,fbb:3,fb:4,f:5,"f#":6,fx:7,gbb:5,gb:6,g:7,"g#":8,gx:9,abb:7,ab:8,a:9,"a#":10,ax:11,bbb:9,bb:10,b:11,"b#":12,bx:13};return function(r){var n=e.exec(r),i=n[1],o=n[2],s=t[i.toLowerCase()];return s+(parseInt(o,10)+1)*12}}(),nc=new WeakMap,RD=function(){function e(t,r,n){nc.set(this,n),this.midi=t.midi,this.velocity=t.velocity,this.noteOffVelocity=r.velocity,this.ticks=t.ticks,this.durationTicks=r.ticks-t.ticks}return Object.defineProperty(e.prototype,"name",{get:function(){return ND(this.midi)},set:function(t){this.midi=AD(t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"octave",{get:function(){return Math.floor(this.midi/12)-1},set:function(t){var r=t-this.octave;this.midi+=r*12},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"pitch",{get:function(){return gR(this.midi)},set:function(t){this.midi=12*(this.octave+1)+PD(t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"duration",{get:function(){var t=nc.get(this);return t.ticksToSeconds(this.ticks+this.durationTicks)-t.ticksToSeconds(this.ticks)},set:function(t){var r=nc.get(this),n=r.secondsToTicks(this.time+t);this.durationTicks=n-this.ticks},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"time",{get:function(){var t=nc.get(this);return t.ticksToSeconds(this.ticks)},set:function(t){var r=nc.get(this);this.ticks=r.secondsToTicks(t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"bars",{get:function(){var t=nc.get(this);return t.ticksToMeasures(this.ticks)},enumerable:!1,configurable:!0}),e.prototype.toJSON=function(){return{duration:this.duration,durationTicks:this.durationTicks,midi:this.midi,name:this.name,ticks:this.ticks,time:this.time,velocity:this.velocity}},e}();xy.Note=RD;Object.defineProperty(Bd,"__esModule",{value:!0});Bd.Track=void 0;var B2=hu,kD=t4,OD=_y,LD=by,n5=wy,UD=xy,qm=new WeakMap,FD=function(){function e(t,r){var n=this;if(this.name="",this.notes=[],this.controlChanges=(0,OD.createControlChanges)(),this.pitchBends=[],qm.set(this,r),t){var i=t.find(function(p){return p.type==="trackName"});this.name=i?i.text:""}if(this.instrument=new n5.Instrument(t,this),this.channel=0,t){for(var o=t.filter(function(p){return p.type==="noteOn"}),s=t.filter(function(p){return p.type==="noteOff"}),a=function(){var p=o.shift();l.channel=p.channel;var v=s.findIndex(function(b){return b.noteNumber===p.noteNumber&&b.absoluteTime>=p.absoluteTime});if(v!==-1){var g=s.splice(v,1)[0];l.addNote({durationTicks:g.absoluteTime-p.absoluteTime,midi:p.noteNumber,noteOffVelocity:g.velocity/127,ticks:p.absoluteTime,velocity:p.velocity/127})}},l=this;o.length;)a();var u=t.filter(function(p){return p.type==="controller"});u.forEach(function(p){n.addCC({number:p.controllerType,ticks:p.absoluteTime,value:p.value/127})});var c=t.filter(function(p){return p.type==="pitchBend"});c.forEach(function(p){n.addPitchBend({ticks:p.absoluteTime,value:p.value/Math.pow(2,13)})});var f=t.find(function(p){return p.type==="endOfTrack"});this.endOfTrackTicks=f!==void 0?f.absoluteTime:void 0}}return e.prototype.addNote=function(t){var r=qm.get(this),n=new UD.Note({midi:0,ticks:0,velocity:1},{ticks:0,velocity:0},r);return Object.assign(n,t),(0,B2.insert)(this.notes,n,"ticks"),this},e.prototype.addCC=function(t){var r=qm.get(this),n=new kD.ControlChange({controllerType:t.number},r);return delete t.number,Object.assign(n,t),Array.isArray(this.controlChanges[n.number])||(this.controlChanges[n.number]=[]),(0,B2.insert)(this.controlChanges[n.number],n,"ticks"),this},e.prototype.addPitchBend=function(t){var r=qm.get(this),n=new LD.PitchBend({},r);return Object.assign(n,t),(0,B2.insert)(this.pitchBends,n,"ticks"),this},Object.defineProperty(e.prototype,"duration",{get:function(){if(!this.notes.length)return 0;for(var t=this.notes[this.notes.length-1].time+this.notes[this.notes.length-1].duration,r=0;r<this.notes.length-1;r++){var n=this.notes[r].time+this.notes[r].duration;t<n&&(t=n)}return t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"durationTicks",{get:function(){if(!this.notes.length)return 0;for(var t=this.notes[this.notes.length-1].ticks+this.notes[this.notes.length-1].durationTicks,r=0;r<this.notes.length-1;r++){var n=this.notes[r].ticks+this.notes[r].durationTicks;t<n&&(t=n)}return t},enumerable:!1,configurable:!0}),e.prototype.fromJSON=function(t){var r=this;this.name=t.name,this.channel=t.channel,this.instrument=new n5.Instrument(void 0,this),this.instrument.fromJSON(t.instrument),t.endOfTrackTicks!==void 0&&(this.endOfTrackTicks=t.endOfTrackTicks);for(var n in t.controlChanges)t.controlChanges[n]&&t.controlChanges[n].forEach(function(i){r.addCC({number:i.number,ticks:i.ticks,value:i.value})});t.notes.forEach(function(i){r.addNote({durationTicks:i.durationTicks,midi:i.midi,ticks:i.ticks,velocity:i.velocity})})},e.prototype.toJSON=function(){for(var t={},r=0;r<127;r++)this.controlChanges.hasOwnProperty(r)&&(t[r]=this.controlChanges[r].map(function(i){return i.toJSON()}));var n={channel:this.channel,controlChanges:t,pitchBends:this.pitchBends.map(function(i){return i.toJSON()}),instrument:this.instrument.toJSON(),name:this.name,notes:this.notes.map(function(i){return i.toJSON()})};return this.endOfTrackTicks!==void 0&&(n.endOfTrackTicks=this.endOfTrackTicks),n},e}();Bd.Track=FD;var Ty={};function MD(e){var t=[];return yR(e,t),t}function yR(e,t){for(var r=0;r<e.length;r++){var n=e[r];Array.isArray(n)?yR(n,t):t.push(n)}}const BD=Object.freeze(Object.defineProperty({__proto__:null,flatten:MD},Symbol.toStringTag,{value:"Module"})),DD=Px(BD);var va=vo&&vo.__spreadArray||function(e,t,r){if(r||arguments.length===2)for(var n=0,i=t.length,o;n<i;n++)(o||!(n in t))&&(o||(o=Array.prototype.slice.call(t,0,n)),o[n]=t[n]);return e.concat(o||Array.prototype.slice.call(t))};Object.defineProperty(Ty,"__esModule",{value:!0});Ty.encode=void 0;var GD=yy,jD=rg,$D=DD;function HD(e,t){return[{absoluteTime:e.ticks,channel:t,deltaTime:0,noteNumber:e.midi,type:"noteOn",velocity:Math.floor(e.velocity*127)},{absoluteTime:e.ticks+e.durationTicks,channel:t,deltaTime:0,noteNumber:e.midi,type:"noteOff",velocity:Math.floor(e.noteOffVelocity*127)}]}function zD(e){return(0,$D.flatten)(e.notes.map(function(t){return HD(t,e.channel)}))}function VD(e,t){return{absoluteTime:e.ticks,channel:t,controllerType:e.number,deltaTime:0,type:"controller",value:Math.floor(e.value*127)}}function XD(e){for(var t=[],r=0;r<127;r++)e.controlChanges.hasOwnProperty(r)&&e.controlChanges[r].forEach(function(n){t.push(VD(n,e.channel))});return t}function WD(e,t){return{absoluteTime:e.ticks,channel:t,deltaTime:0,type:"pitchBend",value:e.value}}function YD(e){var t=[];return e.pitchBends.forEach(function(r){t.push(WD(r,e.channel))}),t}function KD(e){return{absoluteTime:0,channel:e.channel,deltaTime:0,programNumber:e.instrument.number,type:"programChange"}}function qD(e){return{absoluteTime:0,deltaTime:0,meta:!0,text:e,type:"trackName"}}function ZD(e){return{absoluteTime:e.ticks,deltaTime:0,meta:!0,microsecondsPerBeat:Math.floor(6e7/e.bpm),type:"setTempo"}}function JD(e){return{absoluteTime:e.ticks,deltaTime:0,denominator:e.timeSignature[1],meta:!0,metronome:24,numerator:e.timeSignature[0],thirtyseconds:8,type:"timeSignature"}}function QD(e){var t=jD.keySignatureKeys.indexOf(e.key);return{absoluteTime:e.ticks,deltaTime:0,key:t+7,meta:!0,scale:e.scale==="major"?0:1,type:"keySignature"}}function eG(e){return{absoluteTime:e.ticks,deltaTime:0,meta:!0,text:e.text,type:e.type}}function tG(e){var t={header:{format:1,numTracks:e.tracks.length+1,ticksPerBeat:e.header.ppq},tracks:va([va(va(va(va([{absoluteTime:0,deltaTime:0,meta:!0,text:e.header.name,type:"trackName"}],e.header.keySignatures.map(function(r){return QD(r)}),!0),e.header.meta.map(function(r){return eG(r)}),!0),e.header.tempos.map(function(r){return ZD(r)}),!0),e.header.timeSignatures.map(function(r){return JD(r)}),!0)],e.tracks.map(function(r){return va(va(va([qD(r.name),KD(r)],zD(r),!0),XD(r),!0),YD(r),!0)}),!0)};return t.tracks=t.tracks.map(function(r){r=r.sort(function(i,o){return i.absoluteTime-o.absoluteTime});var n=0;return r.forEach(function(i){i.deltaTime=i.absoluteTime-n,n=i.absoluteTime,delete i.absoluteTime}),r.push({deltaTime:0,meta:!0,type:"endOfTrack"}),r}),new Uint8Array((0,GD.writeMidi)(t))}Ty.encode=tG;(function(e){var t=vo&&vo.__awaiter||function(f,p,v,g){function b(_){return _ instanceof v?_:new v(function(w){w(_)})}return new(v||(v=Promise))(function(_,w){function x(R){try{I(g.next(R))}catch(E){w(E)}}function T(R){try{I(g.throw(R))}catch(E){w(E)}}function I(R){R.done?_(R.value):b(R.value).then(x,T)}I((g=g.apply(f,p||[])).next())})},r=vo&&vo.__generator||function(f,p){var v={label:0,sent:function(){if(_[0]&1)throw _[1];return _[1]},trys:[],ops:[]},g,b,_,w;return w={next:x(0),throw:x(1),return:x(2)},typeof Symbol=="function"&&(w[Symbol.iterator]=function(){return this}),w;function x(I){return function(R){return T([I,R])}}function T(I){if(g)throw new TypeError("Generator is already executing.");for(;v;)try{if(g=1,b&&(_=I[0]&2?b.return:I[0]?b.throw||((_=b.return)&&_.call(b),0):b.next)&&!(_=_.call(b,I[1])).done)return _;switch(b=0,_&&(I=[I[0]&2,_.value]),I[0]){case 0:case 1:_=I;break;case 4:return v.label++,{value:I[1],done:!1};case 5:v.label++,b=I[1],I=[0];continue;case 7:I=v.ops.pop(),v.trys.pop();continue;default:if(_=v.trys,!(_=_.length>0&&_[_.length-1])&&(I[0]===6||I[0]===2)){v=0;continue}if(I[0]===3&&(!_||I[1]>_[0]&&I[1]<_[3])){v.label=I[1];break}if(I[0]===6&&v.label<_[1]){v.label=_[1],_=I;break}if(_&&v.label<_[2]){v.label=_[2],v.ops.push(I);break}_[2]&&v.ops.pop(),v.trys.pop();continue}I=p.call(f,v)}catch(R){I=[6,R],b=0}finally{g=_=0}if(I[0]&5)throw I[1];return{value:I[0]?I[1]:void 0,done:!0}}};Object.defineProperty(e,"__esModule",{value:!0}),e.Header=e.Track=e.Midi=void 0;var n=yy,i=rg,o=Bd,s=Ty,a=function(){function f(p){var v=this,g=null;if(p){var b=p instanceof ArrayBuffer?new Uint8Array(p):p;g=(0,n.parseMidi)(b),g.tracks.forEach(function(_){var w=0;_.forEach(function(x){w+=x.deltaTime,x.absoluteTime=w})}),g.tracks=c(g.tracks)}this.header=new i.Header(g),this.tracks=[],p&&(this.tracks=g.tracks.map(function(_){return new o.Track(_,v.header)}),g.header.format===1&&this.tracks[0].duration===0&&this.tracks.shift())}return f.fromUrl=function(p){return t(this,void 0,void 0,function(){var v,g;return r(this,function(b){switch(b.label){case 0:return[4,fetch(p)];case 1:return v=b.sent(),v.ok?[4,v.arrayBuffer()]:[3,3];case 2:return g=b.sent(),[2,new f(g)];case 3:throw new Error("Could not load '".concat(p,"'"))}})})},Object.defineProperty(f.prototype,"name",{get:function(){return this.header.name},set:function(p){this.header.name=p},enumerable:!1,configurable:!0}),Object.defineProperty(f.prototype,"duration",{get:function(){var p=this.tracks.map(function(v){return v.duration});return Math.max.apply(Math,p)},enumerable:!1,configurable:!0}),Object.defineProperty(f.prototype,"durationTicks",{get:function(){var p=this.tracks.map(function(v){return v.durationTicks});return Math.max.apply(Math,p)},enumerable:!1,configurable:!0}),f.prototype.addTrack=function(){var p=new o.Track(void 0,this.header);return this.tracks.push(p),p},f.prototype.toArray=function(){return(0,s.encode)(this)},f.prototype.toJSON=function(){return{header:this.header.toJSON(),tracks:this.tracks.map(function(p){return p.toJSON()})}},f.prototype.fromJSON=function(p){var v=this;this.header=new i.Header,this.header.fromJSON(p.header),this.tracks=p.tracks.map(function(g){var b=new o.Track(void 0,v.header);return b.fromJSON(g),b})},f.prototype.clone=function(){var p=new f;return p.fromJSON(this.toJSON()),p},f}();e.Midi=a;var l=Bd;Object.defineProperty(e,"Track",{enumerable:!0,get:function(){return l.Track}});var u=rg;Object.defineProperty(e,"Header",{enumerable:!0,get:function(){return u.Header}});function c(f){for(var p=[],v=0;v<f.length;v++)for(var g=p.length,b=new Map,_=Array(16).fill(0),w=0,x=f[v];w<x.length;w++){var T=x[w],I=g,R=T.channel;if(R!==void 0){T.type==="programChange"&&(_[R]=T.programNumber);var E=_[R],O="".concat(E," ").concat(R);b.has(O)?I=b.get(O):(I=g+b.size,b.set(O,I))}p[I]||p.push([]),p[I].push(T)}return p}})(Cp);class ts{constructor(t,r,n,i){this.id=null,this.folderId=null,this.bpm=220,this.pitch="C",this.instruments=[],this.name=t,this.version=r,this.type=n,this.data={isComposed:!1,isComposedVersion:!1,appName:je,...i}}static stripMetadata(t){const r={...t};return delete r._id,r}static getSongType(t){return t.type?t.type:t.data.isComposedVersion===!0?"composed":t.data.isComposedVersion===!1?"recorded":null}static deserializeTo(t,r){var o,s,a;const n=Number(r.bpm),i=Array.isArray(r.instruments)?r.instruments.map(Un.deserialize):[];return t.id=(o=r.id)!=null?o:null,t.folderId=(s=r.folderId)!=null?s:null,t.name=(a=r.name)!=null?a:"Untitled",t.data={...t.data,...r.data},t.bpm=Number.isFinite(n)?n:220,t.pitch=no.includes(r.pitch)?r.pitch:"C",t.instruments=i,t}}const ng=class extends ts{constructor(e,t,r=[]){super(e,2,"recorded",{isComposed:!1,isComposedVersion:!1,appName:je}),this.timestamp=0,this.lastPlayedNote=-1,this.toOldFormat=()=>({...this.serialize(),isComposed:!1,pitchLevel:no.indexOf(this.pitch),bitsPerPage:16,isEncrypted:!1,songNotes:this.notes.map(i=>({time:i.time,key:"1Key"+i.index}))}),this.serialize=()=>({name:this.name,type:"recorded",folderId:this.folderId,instruments:this.instruments.map(n=>n.serialize()),version:this.version,pitch:this.pitch,bpm:this.bpm,data:{...this.data},notes:this.notes.map(n=>n.serialize()),id:this.id}),this.addInstrument=n=>{const i=new Un({name:n});this.instruments=[...this.instruments,i]},this.toComposedSong=(n=4)=>{const i=Math.floor(6e4/this.bpm),o=new Yr(this.name,this.instruments.map(u=>u.name));o.bpm=this.bpm,o.pitch=this.pitch;const s=this.notes.map(u=>u.clone());let a=[];if(n===1){const u=[];let c=s[0].time;for(;s.length>0;){const p=s.length>0?[s.shift()]:[];let v=0;if(p[0]!==void 0)for(let g=0;g<s.length;g++)p[0].time>s[g].time-i/9&&v++;u.push([...p,...s.splice(0,v)])}const f=[];u.forEach(p=>{const v=p[0];if(!v)return;const g=v.time-c;c=v.time;const b=Math.floor((g-i)/i);b>-1&&new Array(b).fill(0).forEach(()=>f.push(new Si));const _=new Si;_.notes=p.map(w=>new $s(w.index,w.layer.clone())),f.push(_)}),f.forEach(p=>{const v=bR(p);p.notes=v.map(g=>(g[0].layer=_R(g),g[0]))}),a=f}else{const u=cG(s,i/9),c=[i,Math.floor(i/2),Math.floor(i/4),Math.floor(i/8)];for(let f=0;f<u.length;f++){const p=new Si;p.notes=u[f].map(w=>new $s(w.index,w.layer.clone()));const v=u[f+1]||[[0,0,0]],g=[];let b=v[0].time-u[f][0].time;for(;b>=c[3];)if(b/c[0]>=1)b-=c[0],g.push(0);else if(b/c[1]>=1){if(b-=c[1],n<=1)continue;g.push(1)}else if(b/c[2]>=1){if(b-=c[2],n<=2)continue;g.push(2)}else if(b/c[3]>=1){if(b-=c[3],n<=3)continue;g.push(3)}p.tempoChanger=g.shift()||0;const _=g.map((w,x)=>{const T=new Si;return T.tempoChanger=w,T});a.push(p,..._)}}o.columns=a;const l=Math.max(0,...o.columns.map(u=>Math.max(...u.notes.map(c=>c.layer.asNumber()))));return o.instruments=l.toString(2).split("").map((u,c)=>{const f=new Un;return f.icon=e0[c%3],f}),this.instruments.forEach((u,c)=>{o.instruments[c]=u}),o},this.toRecordedSong=()=>this.clone(),this.toGenshin=()=>{const n=this.clone();return n.data.appName==="Genshin"?(console.warn("Song already in Genshin format"),n):(n.data.appName="Genshin",n.notes=n.notes.map(i=>(i.index=sy[i.index],i)),n)},this.clone=()=>{const n=new ng(this.name);return n.id=this.id,n.folderId=this.folderId,n.version=this.version,n.bpm=this.bpm,n.pitch=this.pitch,n.instruments=this.instruments.map(i=>i.clone()),n.data={...this.data},n.notes=this.notes.map(i=>i.clone()),n},this.notes=t||[],this.instruments=[],r.forEach(n=>this.addInstrument(n))}get isComposed(){return!1}static deserialize(e){const{notes:t,name:r}=e,n=e.version||1,i=ts.deserializeTo(new ng(r||"Untitled"),e);if(i.instruments.length===0&&(i.instruments=[new Un]),n===1){const o=Array.isArray(t)?_i(t):[];i.notes=o.map(s=>nl.deserialize([s[0],s[1],s[2]||1]))}else n===2&&(i.notes=t.map(o=>nl.deserialize(o)));return i}static isSerializedType(e){var t;return typeof e!="object"?!1:e.type==="recorded"||((t=e==null?void 0:e.data)==null?void 0:t.isComposedVersion)===!1}static isOldFormatSerializedType(e){return typeof e!="object"||e.type?!1:!!(Array.isArray(e.songNotes)&&!e.composedSong)}startPlayback(e){this.lastPlayedNote=-1;for(let t=0;t<this.notes.length&&!(this.notes[t].time>=e);t++)this.lastPlayedNote=t}tickPlayback(e){const t=[];for(let r=this.lastPlayedNote+1;r<this.notes.length;r++){if(this.notes[r].time<=e){t.push(this.notes[r]),this.lastPlayedNote=r;continue}break}return t}static mergeNotesIntoChunks(e){const t=[];let r=0;for(let n=0;e.length>0;n++){const i=new r4([e.shift()],0),o=i.notes.length>0?i.notes[0].time:0;for(let s=0;s<e.length&&s<20;s++)e[s].time-i.notes[0].time-50<0&&(i.notes.push(e.shift()),s--);i.delay=r,r=e.length>0?e[0].time-o:0,t.push(i)}return t}toMidi(){var n;const e=new Cp.Midi;e.header.setTempo(this.bpm/4),e.header.keySignatures.push({key:this.pitch,scale:"major",ticks:0}),e.name=this.name;const r=Math.max(...this.notes.map(i=>i.layer.asNumber())).toString(2).length;for(let i=0;i<r;i++){const o=this.notes.filter(a=>a.layer.test(i));if(!o.length)continue;const s=e.addTrack();s.name=`Layer ${i+1}`,o.forEach(a=>{s.addNote({time:a.time/1e3,duration:1,midi:a.toMidi()||0})})}return e.tracks.length===1&&(e.tracks[0].name=(n=el[this.instruments[0].name])==null?void 0:n.midiName),e}};let En=ng;En.fromOldFormat=e=>{try{const t=new ng(e.name||"Untitled"),r=Number(e.bpm);t.bpm=Number.isFinite(r)?r:220,t.pitch=no[e.pitchLevel||0]||"C",e.songNotes.filter((s,a,l)=>a===l.findIndex(u=>u.key.split("Key")[1]===s.key.split("Key")[1]&&u.time===s.time)).forEach(s=>{var c;const a=s.key.split("Key"),l=new Xi(((c=s.l)!=null?c:Number(a[0]))||1),u=new nl(sy[Number(a[1])],s.time,l);t.notes.push(u)});const o=Math.max(...t.notes.map(s=>s.layer.asNumber())).toString(2).length;return t.instruments=new Array(o).fill(0).map(s=>new Un),[!0,"true"].includes(e.isComposed)?t.toComposedSong():t}catch(t){return console.log(t),null}};class r4{constructor(t,r){this.notes=t,this.delay=r}clone(){return new r4(this.notes.map(t=>t.clone()),this.delay)}}const e0=["border","circle","line"];class Yr extends ts{constructor(t,r=[]){super(t,3,"composed",{appName:je,isComposed:!0,isComposedVersion:!0}),this.notes=[],this.toRecordedSong=(n=100)=>{const i=new En(this.name);i.bpm=this.bpm,i.pitch=this.pitch;const o=Math.floor(6e4/this.bpm);let s=n;return this.columns.forEach(a=>{a.notes.forEach(l=>{i.notes.push(new nl(l.index,s,l.layer.clone()))}),s+=Math.floor(o*tl[a.tempoChanger].changer)}),i.instruments=this.instruments.map(a=>a.clone()),i},this.toComposedSong=()=>this.clone(),this.addInstrument=n=>{const i=new Un({name:n});i.icon=e0[this.instruments.length%3],this.instruments=[...this.instruments,i]},this.removeInstrument=async n=>{this.eraseColumns(Yr.selection(0,this.columns.length),n),n!==this.instruments.length-1&&this.instruments.slice(n).forEach((o,s)=>{this.switchLayer(this.columns.length,0,n+s,n+s-1)}),this.instruments.splice(n,1),this.instruments=[...this.instruments]},this.serialize=()=>{let n=parseInt(this.bpm);return{name:this.name,type:"composed",bpm:Number.isFinite(n)?n:220,pitch:this.pitch,version:this.version,folderId:this.folderId,data:{...this.data,appName:je},breakpoints:[...this.breakpoints],instruments:this.instruments.map(i=>i.serialize()),columns:this.columns.map(i=>i.serialize()),id:this.id}},this.toOldFormat=()=>{const n={...this.serialize(),pitchLevel:no.indexOf(this.pitch),isComposed:!0,bitsPerPage:16,isEncrypted:!1,songNotes:[]},i=[],o=Math.floor(6e4/n.bpm);let s=100;return n.columns.forEach(a=>{a[1].forEach(l=>{var v;const c=Xi.deserializeHex(l[1]).toArray().join("").padEnd(4,"0").substring(0,4),f=(v=rG[c])!=null?v:1;if(f===0)return;const p={key:(f>2?2:f)+"Key"+l[0],time:s,...f>2?{l:3}:{}};i.push(p)}),s+=Math.floor(o*tl[a[0]].changer)}),n.songNotes=i,n},this.addColumns=(n,i)=>{const o=new Array(n).fill(0).map(()=>new Si);i==="end"?this.columns.push(...o):this.columns.splice(i+1,0,...o)},this.removeColumns=(n,i)=>{this.columns.splice(i,n),this.validateBreakpoints()},this.toggleBreakpoint=n=>{const i=typeof n=="number"?n:this.selected,o=this.breakpoints.indexOf(i);o>=0&&this.columns.length>i?this.breakpoints.splice(o,1):this.columns.length>i&&this.breakpoints.push(i)},this.eraseColumns=(n,i)=>(i==="all"?n.forEach(o=>{this.columns[o]!==void 0&&(this.columns[o].notes=[])}):n.forEach(o=>{const s=this.columns[o];s!==void 0&&(s.notes.forEach(a=>{a.setLayer(i,!1)}),s.notes=s.notes.filter(a=>!a.layer.isEmpty()))}),this),this.pasteColumns=async(n,i)=>{const o=n.map(s=>s.clone());return i?o.forEach((s,a)=>{const l=this.columns[this.selected+a];l!==void 0&&s.notes.forEach(u=>{const c=l.getNoteIndex(u.index);if(c===null)l.addColumnNote(u);else for(let f=0;f<this.instruments.length;f++)u.isLayerToggled(f)&&l.notes[c].setLayer(f,!0)})}):this.columns.splice(this.selected,0,...o),this.ensureInstruments(),this},this.copyColumns=(n,i)=>{let o=[];return n.forEach(s=>{const a=this.columns[s];a!==void 0&&o.push(a.clone())}),i!=="all"&&(o=o.map(s=>(s.notes=s.notes.filter(a=>a.isLayerToggled(i)),s.notes=s.notes.map(a=>(a.clearLayer(),a.setLayer(i,!0),a)),s))),o},this.deleteColumns=n=>{this.columns=this.columns.filter((o,s)=>!n.includes(s));let i=Math.min(...n);return this.selected=ii(i,0,this.columns.length-1),this.columns.length===0&&this.addColumns(12,0),this},this.validateBreakpoints=()=>{this.breakpoints=this.breakpoints.filter(n=>n<this.columns.length)},this.toGenshin=()=>{const n=this.clone();return n.data.appName==="Genshin"?(console.warn("Song already in Genshin format"),n):(n.data.appName="Genshin",n.instruments=[],this.instruments.map(i=>n.addInstrument(Pr[0])),n.columns=n.columns.map(i=>(i.notes=i.notes.map(o=>(o.index=sy[o.index],o)),i)),n)},this.toMidi=()=>{const i=this.toRecordedSong().toMidi();return this.instruments.forEach((o,s)=>{var l;const a=el[o.name];!a||!i.tracks[s]||(i.tracks[s].instrument.name=a.midiName,i.tracks[s].name=`${o.pitch} | ${(l=o.alias)!=null?l:o.name}`)}),i},this.clone=()=>{const n=new Yr(this.name);return n.id=this.id,n.folderId=this.folderId,n.bpm=this.bpm,n.data={...this.data},n.version=this.version,n.pitch=this.pitch,n.instruments=this.instruments.map(i=>i.clone()),n.breakpoints=[...this.breakpoints],n.selected=this.selected,n.columns=this.columns.map(i=>i.clone()),n},this.instruments=[],this.breakpoints=[0],this.selected=0,this.columns=new Array(100).fill(0).map(n=>new Si),r.forEach(this.addInstrument)}static deserialize(t){var i;t.version===void 0&&(t.version=1);const r=ts.deserializeTo(new Yr(t.name),t);r.breakpoints=((i=t.breakpoints)!=null?i:[]).filter(Number.isFinite),t.version===1&&(r.columns=t.columns.map(o=>{const s=new Si;return s.tempoChanger=o[0],o[1].forEach(a=>{const l=a[1].split("").reverse().join(""),u=new $s(a[0],Xi.deserializeBin(l));return s.notes.push(u)}),s})),(t.version===2||t.version===3)&&(r.columns=t.columns.map(o=>Si.deserialize(o)));const n=Math.max(0,...r.columns.map(o=>Math.max(...o.notes.map(s=>s.layer.asNumber()))));return r.instruments=n.toString(2).split("").map((o,s)=>{const a=new Un;return a.icon=e0[s%3],a}),t.version===1||t.version===2?(Array.isArray(t.instruments)?t.instruments:[]).forEach((s,a)=>{const l=new Un({name:s});l.icon=e0[a%3],r.instruments[a]=l}):t.version===3&&t.instruments.forEach((o,s)=>{r.instruments[s]=Un.deserialize(o)}),r}static isSerializedType(t){var r;return typeof t!="object"?!1:t.type==="composed"||((r=t==null?void 0:t.data)==null?void 0:r.isComposedVersion)===!0}static isOldFormatSerializedType(t){return typeof t!="object"||t.type?!1:!!(Array.isArray(t.songNotes)&&t.composedSong)}get isComposed(){return!0}get lastInstrument(){return this.instruments[this.instruments.length-1]}ensureInstruments(){const{columns:t,instruments:r}=this,n=Math.max(0,...t.map(i=>Math.max(...i.notes.map(o=>o.layer.asNumber())))).toString(2).split("").length;if(n>r.length){const i=new Array(n-r.length).fill(0).map(o=>new Un);this.instruments=[...r,...i]}}static selection(t,r){return new Array(r-t).fill(0).map((n,i)=>i-t)}get selectedColumn(){return this.columns[this.selected]}switchLayer(t,r,n,i){this.columns.slice(r,r+t).forEach(s=>{s.notes.forEach(a=>{a.switchLayer(n,i)})})}swapLayer(t,r,n,i){this.columns.slice(r,r+t).forEach(s=>{s.notes.forEach(a=>{a.swapLayer(n,i)})})}pasteLayer(t,r,n){const i=t.map(o=>{const s=o.clone();return s.notes=s.notes.map(a=>(a.layer.setData(0),a.layer.set(n,!0),a)).filter(a=>!a.layer.isEmpty()),s});this.ensureInstruments(),this.pasteColumns(i,r)}moveNotesBy(t,r,n){const o=new Map([...Fb].reverse().map((a,l)=>[a,l])),s=new Map([...Fb].reverse().map((a,l)=>[l,a]));n==="all"?t.forEach(a=>{const l=this.columns[a];!l||(l.notes.forEach(u=>{const c=o.get(u.index),f=s.get(c+r);u.index=f!=null?f:-1}),l.notes=l.notes.filter(u=>u.index>=0&&u.index<21))}):t.forEach(a=>{const l=this.columns[a];l.notes.sort((u,c)=>r<0?u.index-c.index:c.index-u.index),l&&(l.notes.forEach(u=>{if(u=l.notes.find(v=>v.index===u.index),!u.layer.test(n))return;const c=o.get(u.index),f=s.get(c+r),p=l.notes.find(v=>v.index===f);if(p)p.setLayer(n,!0),u.setLayer(n,!1);else{if(!u.layer.test(n))return;u.setLayer(n,!1);const v=new $s(f!=null?f:-1,new Xi);v.setLayer(n,!0),l.notes.push(v)}}),l.notes=l.notes.filter(u=>u.index>=0&&u.index<21&&!u.layer.isEmpty()))})}}const rG={"0000":1,"0010":2,"0110":2,"0100":2,1010:3,1e3:1,1110:3,1100:3,"0001":2,"0011":2,"0111":2,"0101":2,1011:3,1001:1,1111:3,1101:3};var Bo=(e=>(e[e.Left=1]="Left",e[e.Right=2]="Right",e[e.Unknown=-1]="Unknown",e))(Bo||{});class Af{static download(t,r,n="text/json"){const i=document.createElement("a");if(i.style.display="none",i.className="ignore_click_outside",i.download=r,document.body.appendChild(i),typeof t=="string"&&(i.href=`data:${n};charset=utf-8,${encodeURIComponent(t)}`,i.click()),t instanceof Blob){const o=URL.createObjectURL(t);i.href=o,i.click(),URL.revokeObjectURL(o)}i.remove()}}class nG{constructor(t=0,r=0){this.index=t,this.midi=r,this.status=r<0?"wrong":"right"}}class ic{constructor(t,r){this.type=t,this.midi=r,this.status=r<0?"wrong":"right"}}function i5(e,t){let r=[];for(let n=0;n<e.length;n+=t)r.push(e.slice(n,n+t));return r}function iG(e,t,r){return Math.abs(e-t)<Math.abs(e-r)?t:r}function o5(e,t,r){return e>=t-r&&e<=t+r}function Sy(e){return e.charAt(0).toUpperCase()+e.slice(1)}function oG(e){var t,r;(r=(t=e==null?void 0:e.target)==null?void 0:t.blur)==null||r.call(t)}function sG(e){const t=["INPUT","SELECT","TEXTAREA","BUTTON","A"];return e?t.includes(e.tagName):!1}function ig(e){return e===0?Bo.Left:e===2?Bo.Right:Bo.Unknown}class D2{static from(t){return new Array(t).fill(0).map(()=>[])}}function aG(e){return e instanceof Yr||e instanceof En}function s5(e){const t=Math.floor(e/6e4),r=Number((e%6e4/1e3).toFixed(0));return r===60?t+1+":00":t+":"+(r<10?"0":"")+r}function lG(){if(W0())return console.log("inTWA");const e=document.referrer.includes("android-app://");sessionStorage.setItem("isTwa",JSON.stringify(e))}function uG(e){try{if(e.data===void 0){if(e.pitchLevel=e.pitchLevel||0,e.songNotes!==void 0)return"oldSky"}else{if(e.type==="vsrg")return"vsrg";if(e.type==="composed"||e.data.isComposedVersion===!0)return Array.isArray(e.columns)?"newComposed":"none";if(e.type==="recorded"||e.data.isComposedVersion===!1)return Array.isArray(e.notes)?"newRecorded":"none"}}catch(t){return console.log(t),"none"}return"none"}function hd(...e){return e.map(r=>{var n;return typeof r=="string"?r:r[0]?r[1]:(n=r[2])!=null?n:""}).join(" ")}function cG(e,t){const r=[];for(;e.length>0;){const n=[e.shift()];let i=0;for(let o=0;o<e.length;o++)n[0].time>e[o].time-t&&i++;r.push([...n,...e.splice(0,i)])}return r}const hG=new Map(no.map((e,t)=>[e,t]));function fG(e){var r;const t=(r=hG.get(e))!=null?r:0;return Number(Math.pow(2,t/12).toFixed(4))}function dG(e,t,r){const n=Math.floor(6e4/t);let i=0,o=0,s=0;for(let a=0;a<e.length;a++)s=n*tl[e[a].tempoChanger].changer,a<r&&(o+=s),i+=s;return{total:i,current:o}}function _R(e){const t=new Xi;return e.forEach(r=>{r.layer.toArray().forEach((n,i)=>{n===1&&t.set(i,!0)})}),t}function bR(e){const t=[];return e.notes.forEach(r=>{t[r.index]?t[r.index].push(r):t[r.index]=[r]}),t.filter(r=>Array.isArray(r))}function Ws(e){return new Promise(t=>{dD(t,e)})}function ga(e){return 2*Math.round(e/2)}const ii=(e,t,r)=>Math.min(Math.max(e,t),r),a5={other:{settingVersion:je+52},data:{bpm:{name:"Bpm",tooltip:"Beats per minute, the speed of the song",type:"number",songSetting:!0,increment:5,threshold:[0,3600],value:220,category:"Song Settings"},pitch:{name:"Base pitch",tooltip:"The main pitch of the song",type:"select",songSetting:!0,value:"C",category:"Song Settings",options:[...no]},beatMarks:{name:"Beat marks",type:"select",songSetting:!1,value:3,category:"Composer Settings",options:[3,4]},noteNameType:{name:"Note name type",tooltip:"The type of text which will be written on the note",type:"select",songSetting:!1,category:"Composer Settings",value:j3()?"Do Re Mi":"Keyboard layout",options:["Note name","Keyboard layout","Do Re Mi","ABC","No Text"]},columnsPerCanvas:{name:"Number of visible columns",tooltip:"How many columns are visible at a time, more columns might cause lag",type:"select",songSetting:!1,category:"Composer Settings",value:35,options:[20,25,30,35,40,45,50]},caveMode:{name:"Reverb (cave mode)",tooltip:"Makes it sound like you are in a cave",category:"Composer Settings",type:"checkbox",songSetting:!1,value:!1},autosave:{name:"Autosave changes",tooltip:"Autosaves the changes to a song every 5 edits, and when you change page/change song",type:"checkbox",category:"Composer Settings",songSetting:!1,value:!1},syncTabs:{name:"Autoplay in all tabs (pc only)",tooltip:"Advanced feature, it syncs other browser tabs to all play at the same time",type:"checkbox",category:"Composer Settings",songSetting:!1,value:!1}}},l5={other:{settingVersion:je+52},data:{instrument:{name:"Instrument",tooltip:"The main instrument of the player, will also be saved in the song you record",type:"instrument",songSetting:!0,value:Pr[0],volume:100,options:[...Pr],category:"Song Settings"},pitch:{name:"Pitch",tooltip:"The pitch of the player, will also be saved in the song you record",type:"select",songSetting:!0,value:"C",category:"Song Settings",options:[...no]},bpm:{name:"Bpm",tooltip:"Beats per minute, used by the metronome and will be used when converting the song with the compsoer",type:"number",songSetting:!0,increment:5,threshold:[0,3600],value:220,category:"Song Settings"},syncSongData:{name:"Auto sync the song's instruments and pitch",tooltip:"Whenever you load a song, the instruments and pitch of that song will be loaded too",type:"checkbox",songSetting:!1,value:!0,category:"Player Settings"},metronomeBeats:{name:"Metronome beats",tooltip:"After how many times a stronger beat is played",type:"number",songSetting:!1,increment:1,value:4,threshold:[0,16],category:"Player Settings"},metronomeVolume:{name:"Metronome volume",tooltip:"The volume of the metronome",type:"slider",songSetting:!1,value:50,category:"Player Settings",threshold:[0,120]},caveMode:{name:"Reverb (cave mode)",tooltip:"Makes it sound like you are in a cave",type:"checkbox",songSetting:!1,value:!1,category:"Player Settings"},noteNameType:{name:"Note name type",tooltip:"The type of text which will be written on the note",type:"select",songSetting:!1,category:"Player Settings",value:j3()?"Do Re Mi":"Keyboard layout",options:["Note name","Keyboard layout","Do Re Mi","ABC","No Text"]},keyboardSize:{name:"Keyboard size",tooltip:"Scales the keyboard size",type:"slider",songSetting:!1,value:100,category:"Player Settings",threshold:[80,150]},keyboardYPosition:{name:"Vertical position",tooltip:"The vertical position of the keyboard",type:"slider",songSetting:!1,value:-20,category:"Player Settings",threshold:[-60,80]},approachSpeed:{name:"Approach Rate (AR)",tooltip:"The time between when the notes appear and when they reach the end (in ms)",type:"number",increment:50,songSetting:!1,value:1500,category:"Player Settings",threshold:[0,5e3]},noteAnimation:{name:"Note animation",tooltip:"Toggle the animation of the notes (will reduce performance)",type:"checkbox",category:"Player Settings",songSetting:!1,value:!1},showVisualSheet:{name:"Show visual sheet",tooltip:"Show the sheet above the keyboard (might reduce performance)",type:"checkbox",songSetting:!1,value:!0,category:"Player Settings"}}},G2={settingVersion:je+4,enabled:!1,currentSource:"",notes:new Array(21).fill(0).map((e,t)=>new nG(t,-1)),shortcuts:[new ic("toggle_play",-1),new ic("next_column",-1),new ic("previous_column",-1),new ic("add_column",-1),new ic("remove_column",-1),new ic("change_layer",-1)]},wR={editable:!1,id:null,type:"theme",other:{backgroundImageMain:"",backgroundImageComposer:"",name:"Default"},data:{background:{name:"background",css:"background",value:"#394248",text:ut.text.light},primary:{name:"primary",css:"primary",value:"#495466",text:ut.text.light},secondary:{name:"secondary",css:"secondary",value:"#8c7063",text:ut.text.light},accent:{name:"accent",css:"accent",value:"#63aea7",text:ut.text.dark},composer_accent:{name:"composer_accent",css:"composer-accent",value:"#2A8C84",text:ut.text.dark},icon_color:{name:"icon_color",css:"icon-color",value:"#d3bd8e",text:ut.text.dark},menu_background:{name:"menu_background",css:"menu-background",value:"rgba(237, 229, 216, 0.95)",text:ut.text.dark},note_background:{name:"note_background",css:"note-background",value:"#fff9ef",text:ut.text.note}}},u5={other:{settingVersion:je+9},data:{keys:{name:"Keys",tooltip:"How many keys the song has",type:"select",songSetting:!0,value:6,category:"Song Settings",options:[4,6]},bpm:{name:"Bpm",tooltip:"Beats per minute, the speed of the song",type:"number",songSetting:!0,increment:5,threshold:[0,3600],value:220,category:"Song Settings"},pitch:{name:"Base pitch",tooltip:"The main pitch of the song",type:"select",songSetting:!0,value:"C",category:"Song Settings",options:[...no]},isVertical:{name:"Vertical editor",tooltip:"If the editor is set horizontally or vertically",type:"checkbox",songSetting:!1,value:!1,category:"Editor Settings"},maxFps:{name:"Max FPS (high values could lag)",tooltip:"The FPS limiter of the editor, higher values could more lag",type:"select",songSetting:!0,value:48,category:"Song Settings",options:[24,30,48,60,90,120]},scrollSnap:{name:"Snap scroll to snap point",tooltip:"When scrolling, snap the timestamp to the closest snap point",type:"checkbox",category:"Editor Settings",songSetting:!1,value:!1},autosave:{name:"Autosave changes",tooltip:"Autosaves the changes to a song every 5 edits, and when you change page/change song",type:"checkbox",category:"Editor Settings",songSetting:!1,value:!1},difficulty:{name:"Difficulty",tooltip:"Higher values means the notes need to be pressed more accurately",type:"select",songSetting:!0,value:5,category:"Song Settings",options:new Array(10).fill(0).map((e,t)=>t+1)}}},c5={other:{settingVersion:je+2},data:{approachTime:{name:"Approaching time",tooltip:"The time between when the notes appear and when they reach the end (in ms)",type:"number",songSetting:!0,increment:100,threshold:[1,5e3],value:2e3,category:"Player Settings"},maxFps:{name:"Max FPS",tooltip:"The FPS limiter of the player, too high values could cause lag or stutters",type:"select",songSetting:!0,value:lu?48:60,category:"Song Settings",options:[24,30,48,60,90,120]},keyboardLayout:{name:"Keyboard layout",tooltip:"The keyboard layout of the player",type:"select",songSetting:!0,value:lu?"line":"circles",category:"Player Settings",options:["circles","line"]},offset:{name:"Audio Offset",tooltip:"An offset to the audio if it plays too early/late (in ms)",type:"number",songSetting:!0,increment:2,threshold:[-1e3,1e3],value:0,category:"Player Settings"},verticalOffset:{name:"Vertical position",tooltip:"The Vertical offset for the line layout",type:"slider",songSetting:!1,value:-0,category:"Layout Settings",threshold:[-40,40]},horizontalOffset:{name:"Horizontal position",tooltip:"The Horizontal offset for the line layout",type:"slider",songSetting:!1,value:0,category:"Layout Settings",threshold:[-40,40]}}},Xb={other:{settingVersion:je+5},data:{instrument:{name:"Instrument",tooltip:"The main instrument of the keyboard",type:"instrument",songSetting:!1,value:Pr[0],volume:100,options:[...Pr],category:"Keyboard"},pitch:{name:"Pitch",tooltip:"The pitch of the keyboard",type:"select",songSetting:!1,value:"C",category:"Keyboard",options:[...no]},metronomeBeats:{name:"Metronome beats",tooltip:"After how many times a stronger beat is played",type:"number",songSetting:!1,increment:1,value:4,threshold:[0,16],category:"Metronome"},metronomeVolume:{name:"Metronome volume",tooltip:"The volume of the metronome",type:"slider",songSetting:!1,value:50,category:"Metronome",threshold:[0,120]},metronomeBpm:{name:"Metronome bpm",tooltip:"The bpm of the metronome",type:"number",songSetting:!1,value:200,increment:5,category:"Metronome",threshold:[0,3600]},caveMode:{name:"Reverb (cave mode)",tooltip:"Makes it sound like you are in a cave",type:"checkbox",songSetting:!1,value:!1,category:"Keyboard"},noteNameType:{name:"Note name type",tooltip:"The type of text which will be written on the note",type:"select",songSetting:!1,category:"Keyboard",value:j3()?"Do Re Mi":"Keyboard layout",options:["Note name","Keyboard layout","Do Re Mi","ABC","No Text"]},keyboardSize:{name:"Keyboard size",tooltip:"Scales the keyboard size",type:"slider",songSetting:!1,value:100,category:"Keyboard",threshold:[70,150]},keyboardYPosition:{name:"Vertical position",tooltip:"The vertical position of the keyboard",type:"slider",songSetting:!1,value:0,category:"Keyboard",threshold:[-100,100]}}};var xR={exports:{}},TR={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]},SR={exports:{}},pG=function(t){return!t||typeof t=="string"?!1:t instanceof Array||Array.isArray(t)||t.length>=0&&(t.splice instanceof Function||Object.getOwnPropertyDescriptor(t,t.length-1)&&t.constructor.name!=="String")},mG=pG,vG=Array.prototype.concat,gG=Array.prototype.slice,h5=SR.exports=function(t){for(var r=[],n=0,i=t.length;n<i;n++){var o=t[n];mG(o)?r=vG.call(r,gG.call(o)):r.push(o)}return r};h5.wrap=function(e){return function(){return e(h5(arguments))}};var fd=TR,Ip=SR.exports,ER=Object.hasOwnProperty,CR=Object.create(null);for(var j2 in fd)ER.call(fd,j2)&&(CR[fd[j2]]=j2);var Ei=xR.exports={to:{},get:{}};Ei.get=function(e){var t=e.substring(0,3).toLowerCase(),r,n;switch(t){case"hsl":r=Ei.get.hsl(e),n="hsl";break;case"hwb":r=Ei.get.hwb(e),n="hwb";break;default:r=Ei.get.rgb(e),n="rgb";break}return r?{model:n,value:r}:null};Ei.get.rgb=function(e){if(!e)return null;var t=/^#([a-f0-9]{3,4})$/i,r=/^#([a-f0-9]{6})([a-f0-9]{2})?$/i,n=/^rgba?\(\s*([+-]?\d+)(?=[\s,])\s*(?:,\s*)?([+-]?\d+)(?=[\s,])\s*(?:,\s*)?([+-]?\d+)\s*(?:[,|\/]\s*([+-]?[\d\.]+)(%?)\s*)?\)$/,i=/^rgba?\(\s*([+-]?[\d\.]+)\%\s*,?\s*([+-]?[\d\.]+)\%\s*,?\s*([+-]?[\d\.]+)\%\s*(?:[,|\/]\s*([+-]?[\d\.]+)(%?)\s*)?\)$/,o=/^(\w+)$/,s=[0,0,0,1],a,l,u;if(a=e.match(r)){for(u=a[2],a=a[1],l=0;l<3;l++){var c=l*2;s[l]=parseInt(a.slice(c,c+2),16)}u&&(s[3]=parseInt(u,16)/255)}else if(a=e.match(t)){for(a=a[1],u=a[3],l=0;l<3;l++)s[l]=parseInt(a[l]+a[l],16);u&&(s[3]=parseInt(u+u,16)/255)}else if(a=e.match(n)){for(l=0;l<3;l++)s[l]=parseInt(a[l+1],0);a[4]&&(a[5]?s[3]=parseFloat(a[4])*.01:s[3]=parseFloat(a[4]))}else if(a=e.match(i)){for(l=0;l<3;l++)s[l]=Math.round(parseFloat(a[l+1])*2.55);a[4]&&(a[5]?s[3]=parseFloat(a[4])*.01:s[3]=parseFloat(a[4]))}else return(a=e.match(o))?a[1]==="transparent"?[0,0,0,0]:ER.call(fd,a[1])?(s=fd[a[1]],s[3]=1,s):null:null;for(l=0;l<3;l++)s[l]=za(s[l],0,255);return s[3]=za(s[3],0,1),s};Ei.get.hsl=function(e){if(!e)return null;var t=/^hsla?\(\s*([+-]?(?:\d{0,3}\.)?\d+)(?:deg)?\s*,?\s*([+-]?[\d\.]+)%\s*,?\s*([+-]?[\d\.]+)%\s*(?:[,|\/]\s*([+-]?(?=\.\d|\d)(?:0|[1-9]\d*)?(?:\.\d*)?(?:[eE][+-]?\d+)?)\s*)?\)$/,r=e.match(t);if(r){var n=parseFloat(r[4]),i=(parseFloat(r[1])%360+360)%360,o=za(parseFloat(r[2]),0,100),s=za(parseFloat(r[3]),0,100),a=za(isNaN(n)?1:n,0,1);return[i,o,s,a]}return null};Ei.get.hwb=function(e){if(!e)return null;var t=/^hwb\(\s*([+-]?\d{0,3}(?:\.\d+)?)(?:deg)?\s*,\s*([+-]?[\d\.]+)%\s*,\s*([+-]?[\d\.]+)%\s*(?:,\s*([+-]?(?=\.\d|\d)(?:0|[1-9]\d*)?(?:\.\d*)?(?:[eE][+-]?\d+)?)\s*)?\)$/,r=e.match(t);if(r){var n=parseFloat(r[4]),i=(parseFloat(r[1])%360+360)%360,o=za(parseFloat(r[2]),0,100),s=za(parseFloat(r[3]),0,100),a=za(isNaN(n)?1:n,0,1);return[i,o,s,a]}return null};Ei.to.hex=function(){var e=Ip(arguments);return"#"+Zm(e[0])+Zm(e[1])+Zm(e[2])+(e[3]<1?Zm(Math.round(e[3]*255)):"")};Ei.to.rgb=function(){var e=Ip(arguments);return e.length<4||e[3]===1?"rgb("+Math.round(e[0])+", "+Math.round(e[1])+", "+Math.round(e[2])+")":"rgba("+Math.round(e[0])+", "+Math.round(e[1])+", "+Math.round(e[2])+", "+e[3]+")"};Ei.to.rgb.percent=function(){var e=Ip(arguments),t=Math.round(e[0]/255*100),r=Math.round(e[1]/255*100),n=Math.round(e[2]/255*100);return e.length<4||e[3]===1?"rgb("+t+"%, "+r+"%, "+n+"%)":"rgba("+t+"%, "+r+"%, "+n+"%, "+e[3]+")"};Ei.to.hsl=function(){var e=Ip(arguments);return e.length<4||e[3]===1?"hsl("+e[0]+", "+e[1]+"%, "+e[2]+"%)":"hsla("+e[0]+", "+e[1]+"%, "+e[2]+"%, "+e[3]+")"};Ei.to.hwb=function(){var e=Ip(arguments),t="";return e.length>=4&&e[3]!==1&&(t=", "+e[3]),"hwb("+e[0]+", "+e[1]+"%, "+e[2]+"%"+t+")"};Ei.to.keyword=function(e){return CR[e.slice(0,3)]};function za(e,t,r){return Math.min(Math.max(t,e),r)}function Zm(e){var t=Math.round(e).toString(16).toUpperCase();return t.length<2?"0"+t:t}const Dd=TR,IR={};for(const e of Object.keys(Dd))IR[Dd[e]]=e;const He={rgb:{channels:3,labels:"rgb"},hsl:{channels:3,labels:"hsl"},hsv:{channels:3,labels:"hsv"},hwb:{channels:3,labels:"hwb"},cmyk:{channels:4,labels:"cmyk"},xyz:{channels:3,labels:"xyz"},lab:{channels:3,labels:"lab"},lch:{channels:3,labels:"lch"},hex:{channels:1,labels:["hex"]},keyword:{channels:1,labels:["keyword"]},ansi16:{channels:1,labels:["ansi16"]},ansi256:{channels:1,labels:["ansi256"]},hcg:{channels:3,labels:["h","c","g"]},apple:{channels:3,labels:["r16","g16","b16"]},gray:{channels:1,labels:["gray"]}};var NR=He;for(const e of Object.keys(He)){if(!("channels"in He[e]))throw new Error("missing channels property: "+e);if(!("labels"in He[e]))throw new Error("missing channel labels property: "+e);if(He[e].labels.length!==He[e].channels)throw new Error("channel and label counts mismatch: "+e);const{channels:t,labels:r}=He[e];delete He[e].channels,delete He[e].labels,Object.defineProperty(He[e],"channels",{value:t}),Object.defineProperty(He[e],"labels",{value:r})}He.rgb.hsl=function(e){const t=e[0]/255,r=e[1]/255,n=e[2]/255,i=Math.min(t,r,n),o=Math.max(t,r,n),s=o-i;let a,l;o===i?a=0:t===o?a=(r-n)/s:r===o?a=2+(n-t)/s:n===o&&(a=4+(t-r)/s),a=Math.min(a*60,360),a<0&&(a+=360);const u=(i+o)/2;return o===i?l=0:u<=.5?l=s/(o+i):l=s/(2-o-i),[a,l*100,u*100]};He.rgb.hsv=function(e){let t,r,n,i,o;const s=e[0]/255,a=e[1]/255,l=e[2]/255,u=Math.max(s,a,l),c=u-Math.min(s,a,l),f=function(p){return(u-p)/6/c+1/2};return c===0?(i=0,o=0):(o=c/u,t=f(s),r=f(a),n=f(l),s===u?i=n-r:a===u?i=1/3+t-n:l===u&&(i=2/3+r-t),i<0?i+=1:i>1&&(i-=1)),[i*360,o*100,u*100]};He.rgb.hwb=function(e){const t=e[0],r=e[1];let n=e[2];const i=He.rgb.hsl(e)[0],o=1/255*Math.min(t,Math.min(r,n));return n=1-1/255*Math.max(t,Math.max(r,n)),[i,o*100,n*100]};He.rgb.cmyk=function(e){const t=e[0]/255,r=e[1]/255,n=e[2]/255,i=Math.min(1-t,1-r,1-n),o=(1-t-i)/(1-i)||0,s=(1-r-i)/(1-i)||0,a=(1-n-i)/(1-i)||0;return[o*100,s*100,a*100,i*100]};function yG(e,t){return(e[0]-t[0])**2+(e[1]-t[1])**2+(e[2]-t[2])**2}He.rgb.keyword=function(e){const t=IR[e];if(t)return t;let r=1/0,n;for(const i of Object.keys(Dd)){const o=Dd[i],s=yG(e,o);s<r&&(r=s,n=i)}return n};He.keyword.rgb=function(e){return Dd[e]};He.rgb.xyz=function(e){let t=e[0]/255,r=e[1]/255,n=e[2]/255;t=t>.04045?((t+.055)/1.055)**2.4:t/12.92,r=r>.04045?((r+.055)/1.055)**2.4:r/12.92,n=n>.04045?((n+.055)/1.055)**2.4:n/12.92;const i=t*.4124+r*.3576+n*.1805,o=t*.2126+r*.7152+n*.0722,s=t*.0193+r*.1192+n*.9505;return[i*100,o*100,s*100]};He.rgb.lab=function(e){const t=He.rgb.xyz(e);let r=t[0],n=t[1],i=t[2];r/=95.047,n/=100,i/=108.883,r=r>.008856?r**(1/3):7.787*r+16/116,n=n>.008856?n**(1/3):7.787*n+16/116,i=i>.008856?i**(1/3):7.787*i+16/116;const o=116*n-16,s=500*(r-n),a=200*(n-i);return[o,s,a]};He.hsl.rgb=function(e){const t=e[0]/360,r=e[1]/100,n=e[2]/100;let i,o,s;if(r===0)return s=n*255,[s,s,s];n<.5?i=n*(1+r):i=n+r-n*r;const a=2*n-i,l=[0,0,0];for(let u=0;u<3;u++)o=t+1/3*-(u-1),o<0&&o++,o>1&&o--,6*o<1?s=a+(i-a)*6*o:2*o<1?s=i:3*o<2?s=a+(i-a)*(2/3-o)*6:s=a,l[u]=s*255;return l};He.hsl.hsv=function(e){const t=e[0];let r=e[1]/100,n=e[2]/100,i=r;const o=Math.max(n,.01);n*=2,r*=n<=1?n:2-n,i*=o<=1?o:2-o;const s=(n+r)/2,a=n===0?2*i/(o+i):2*r/(n+r);return[t,a*100,s*100]};He.hsv.rgb=function(e){const t=e[0]/60,r=e[1]/100;let n=e[2]/100;const i=Math.floor(t)%6,o=t-Math.floor(t),s=255*n*(1-r),a=255*n*(1-r*o),l=255*n*(1-r*(1-o));switch(n*=255,i){case 0:return[n,l,s];case 1:return[a,n,s];case 2:return[s,n,l];case 3:return[s,a,n];case 4:return[l,s,n];case 5:return[n,s,a]}};He.hsv.hsl=function(e){const t=e[0],r=e[1]/100,n=e[2]/100,i=Math.max(n,.01);let o,s;s=(2-r)*n;const a=(2-r)*i;return o=r*i,o/=a<=1?a:2-a,o=o||0,s/=2,[t,o*100,s*100]};He.hwb.rgb=function(e){const t=e[0]/360;let r=e[1]/100,n=e[2]/100;const i=r+n;let o;i>1&&(r/=i,n/=i);const s=Math.floor(6*t),a=1-n;o=6*t-s,(s&1)!==0&&(o=1-o);const l=r+o*(a-r);let u,c,f;switch(s){default:case 6:case 0:u=a,c=l,f=r;break;case 1:u=l,c=a,f=r;break;case 2:u=r,c=a,f=l;break;case 3:u=r,c=l,f=a;break;case 4:u=l,c=r,f=a;break;case 5:u=a,c=r,f=l;break}return[u*255,c*255,f*255]};He.cmyk.rgb=function(e){const t=e[0]/100,r=e[1]/100,n=e[2]/100,i=e[3]/100,o=1-Math.min(1,t*(1-i)+i),s=1-Math.min(1,r*(1-i)+i),a=1-Math.min(1,n*(1-i)+i);return[o*255,s*255,a*255]};He.xyz.rgb=function(e){const t=e[0]/100,r=e[1]/100,n=e[2]/100;let i,o,s;return i=t*3.2406+r*-1.5372+n*-.4986,o=t*-.9689+r*1.8758+n*.0415,s=t*.0557+r*-.204+n*1.057,i=i>.0031308?1.055*i**(1/2.4)-.055:i*12.92,o=o>.0031308?1.055*o**(1/2.4)-.055:o*12.92,s=s>.0031308?1.055*s**(1/2.4)-.055:s*12.92,i=Math.min(Math.max(0,i),1),o=Math.min(Math.max(0,o),1),s=Math.min(Math.max(0,s),1),[i*255,o*255,s*255]};He.xyz.lab=function(e){let t=e[0],r=e[1],n=e[2];t/=95.047,r/=100,n/=108.883,t=t>.008856?t**(1/3):7.787*t+16/116,r=r>.008856?r**(1/3):7.787*r+16/116,n=n>.008856?n**(1/3):7.787*n+16/116;const i=116*r-16,o=500*(t-r),s=200*(r-n);return[i,o,s]};He.lab.xyz=function(e){const t=e[0],r=e[1],n=e[2];let i,o,s;o=(t+16)/116,i=r/500+o,s=o-n/200;const a=o**3,l=i**3,u=s**3;return o=a>.008856?a:(o-16/116)/7.787,i=l>.008856?l:(i-16/116)/7.787,s=u>.008856?u:(s-16/116)/7.787,i*=95.047,o*=100,s*=108.883,[i,o,s]};He.lab.lch=function(e){const t=e[0],r=e[1],n=e[2];let i;i=Math.atan2(n,r)*360/2/Math.PI,i<0&&(i+=360);const s=Math.sqrt(r*r+n*n);return[t,s,i]};He.lch.lab=function(e){const t=e[0],r=e[1],i=e[2]/360*2*Math.PI,o=r*Math.cos(i),s=r*Math.sin(i);return[t,o,s]};He.rgb.ansi16=function(e,t=null){const[r,n,i]=e;let o=t===null?He.rgb.hsv(e)[2]:t;if(o=Math.round(o/50),o===0)return 30;let s=30+(Math.round(i/255)<<2|Math.round(n/255)<<1|Math.round(r/255));return o===2&&(s+=60),s};He.hsv.ansi16=function(e){return He.rgb.ansi16(He.hsv.rgb(e),e[2])};He.rgb.ansi256=function(e){const t=e[0],r=e[1],n=e[2];return t===r&&r===n?t<8?16:t>248?231:Math.round((t-8)/247*24)+232:16+36*Math.round(t/255*5)+6*Math.round(r/255*5)+Math.round(n/255*5)};He.ansi16.rgb=function(e){let t=e%10;if(t===0||t===7)return e>50&&(t+=3.5),t=t/10.5*255,[t,t,t];const r=(~~(e>50)+1)*.5,n=(t&1)*r*255,i=(t>>1&1)*r*255,o=(t>>2&1)*r*255;return[n,i,o]};He.ansi256.rgb=function(e){if(e>=232){const o=(e-232)*10+8;return[o,o,o]}e-=16;let t;const r=Math.floor(e/36)/5*255,n=Math.floor((t=e%36)/6)/5*255,i=t%6/5*255;return[r,n,i]};He.rgb.hex=function(e){const r=(((Math.round(e[0])&255)<<16)+((Math.round(e[1])&255)<<8)+(Math.round(e[2])&255)).toString(16).toUpperCase();return"000000".substring(r.length)+r};He.hex.rgb=function(e){const t=e.toString(16).match(/[a-f0-9]{6}|[a-f0-9]{3}/i);if(!t)return[0,0,0];let r=t[0];t[0].length===3&&(r=r.split("").map(a=>a+a).join(""));const n=parseInt(r,16),i=n>>16&255,o=n>>8&255,s=n&255;return[i,o,s]};He.rgb.hcg=function(e){const t=e[0]/255,r=e[1]/255,n=e[2]/255,i=Math.max(Math.max(t,r),n),o=Math.min(Math.min(t,r),n),s=i-o;let a,l;return s<1?a=o/(1-s):a=0,s<=0?l=0:i===t?l=(r-n)/s%6:i===r?l=2+(n-t)/s:l=4+(t-r)/s,l/=6,l%=1,[l*360,s*100,a*100]};He.hsl.hcg=function(e){const t=e[1]/100,r=e[2]/100,n=r<.5?2*t*r:2*t*(1-r);let i=0;return n<1&&(i=(r-.5*n)/(1-n)),[e[0],n*100,i*100]};He.hsv.hcg=function(e){const t=e[1]/100,r=e[2]/100,n=t*r;let i=0;return n<1&&(i=(r-n)/(1-n)),[e[0],n*100,i*100]};He.hcg.rgb=function(e){const t=e[0]/360,r=e[1]/100,n=e[2]/100;if(r===0)return[n*255,n*255,n*255];const i=[0,0,0],o=t%1*6,s=o%1,a=1-s;let l=0;switch(Math.floor(o)){case 0:i[0]=1,i[1]=s,i[2]=0;break;case 1:i[0]=a,i[1]=1,i[2]=0;break;case 2:i[0]=0,i[1]=1,i[2]=s;break;case 3:i[0]=0,i[1]=a,i[2]=1;break;case 4:i[0]=s,i[1]=0,i[2]=1;break;default:i[0]=1,i[1]=0,i[2]=a}return l=(1-r)*n,[(r*i[0]+l)*255,(r*i[1]+l)*255,(r*i[2]+l)*255]};He.hcg.hsv=function(e){const t=e[1]/100,r=e[2]/100,n=t+r*(1-t);let i=0;return n>0&&(i=t/n),[e[0],i*100,n*100]};He.hcg.hsl=function(e){const t=e[1]/100,n=e[2]/100*(1-t)+.5*t;let i=0;return n>0&&n<.5?i=t/(2*n):n>=.5&&n<1&&(i=t/(2*(1-n))),[e[0],i*100,n*100]};He.hcg.hwb=function(e){const t=e[1]/100,r=e[2]/100,n=t+r*(1-t);return[e[0],(n-t)*100,(1-n)*100]};He.hwb.hcg=function(e){const t=e[1]/100,r=e[2]/100,n=1-r,i=n-t;let o=0;return i<1&&(o=(n-i)/(1-i)),[e[0],i*100,o*100]};He.apple.rgb=function(e){return[e[0]/65535*255,e[1]/65535*255,e[2]/65535*255]};He.rgb.apple=function(e){return[e[0]/255*65535,e[1]/255*65535,e[2]/255*65535]};He.gray.rgb=function(e){return[e[0]/100*255,e[0]/100*255,e[0]/100*255]};He.gray.hsl=function(e){return[0,0,e[0]]};He.gray.hsv=He.gray.hsl;He.gray.hwb=function(e){return[0,100,e[0]]};He.gray.cmyk=function(e){return[0,0,0,e[0]]};He.gray.lab=function(e){return[e[0],0,0]};He.gray.hex=function(e){const t=Math.round(e[0]/100*255)&255,n=((t<<16)+(t<<8)+t).toString(16).toUpperCase();return"000000".substring(n.length)+n};He.rgb.gray=function(e){return[(e[0]+e[1]+e[2])/3/255*100]};const og=NR;function _G(){const e={},t=Object.keys(og);for(let r=t.length,n=0;n<r;n++)e[t[n]]={distance:-1,parent:null};return e}function bG(e){const t=_G(),r=[e];for(t[e].distance=0;r.length;){const n=r.pop(),i=Object.keys(og[n]);for(let o=i.length,s=0;s<o;s++){const a=i[s],l=t[a];l.distance===-1&&(l.distance=t[n].distance+1,l.parent=n,r.unshift(a))}}return t}function wG(e,t){return function(r){return t(e(r))}}function xG(e,t){const r=[t[e].parent,e];let n=og[t[e].parent][e],i=t[e].parent;for(;t[i].parent;)r.unshift(t[i].parent),n=wG(og[t[i].parent][i],n),i=t[i].parent;return n.conversion=r,n}var TG=function(e){const t=bG(e),r={},n=Object.keys(t);for(let i=n.length,o=0;o<i;o++){const s=n[o];t[s].parent!==null&&(r[s]=xG(s,t))}return r};const Wb=NR,SG=TG,yc={},EG=Object.keys(Wb);function CG(e){const t=function(...r){const n=r[0];return n==null?n:(n.length>1&&(r=n),e(r))};return"conversion"in e&&(t.conversion=e.conversion),t}function IG(e){const t=function(...r){const n=r[0];if(n==null)return n;n.length>1&&(r=n);const i=e(r);if(typeof i=="object")for(let o=i.length,s=0;s<o;s++)i[s]=Math.round(i[s]);return i};return"conversion"in e&&(t.conversion=e.conversion),t}EG.forEach(e=>{yc[e]={},Object.defineProperty(yc[e],"channels",{value:Wb[e].channels}),Object.defineProperty(yc[e],"labels",{value:Wb[e].labels});const t=SG(e);Object.keys(t).forEach(n=>{const i=t[n];yc[e][n]=IG(i),yc[e][n].raw=CG(i)})});var NG=yc;const _c=xR.exports,bi=NG,PR=["keyword","gray","hex"],Yb={};for(const e of Object.keys(bi))Yb[[...bi[e].labels].sort().join("")]=e;const sg={};function nn(e,t){if(!(this instanceof nn))return new nn(e,t);if(t&&t in PR&&(t=null),t&&!(t in bi))throw new Error("Unknown model: "+t);let r,n;if(e==null)this.model="rgb",this.color=[0,0,0],this.valpha=1;else if(e instanceof nn)this.model=e.model,this.color=[...e.color],this.valpha=e.valpha;else if(typeof e=="string"){const i=_c.get(e);if(i===null)throw new Error("Unable to parse color from string: "+e);this.model=i.model,n=bi[this.model].channels,this.color=i.value.slice(0,n),this.valpha=typeof i.value[n]=="number"?i.value[n]:1}else if(e.length>0){this.model=t||"rgb",n=bi[this.model].channels;const i=Array.prototype.slice.call(e,0,n);this.color=Kb(i,n),this.valpha=typeof e[n]=="number"?e[n]:1}else if(typeof e=="number")this.model="rgb",this.color=[e>>16&255,e>>8&255,e&255],this.valpha=1;else{this.valpha=1;const i=Object.keys(e);"alpha"in e&&(i.splice(i.indexOf("alpha"),1),this.valpha=typeof e.alpha=="number"?e.alpha:0);const o=i.sort().join("");if(!(o in Yb))throw new Error("Unable to parse color from object: "+JSON.stringify(e));this.model=Yb[o];const{labels:s}=bi[this.model],a=[];for(r=0;r<s.length;r++)a.push(e[s[r]]);this.color=Kb(a)}if(sg[this.model])for(n=bi[this.model].channels,r=0;r<n;r++){const i=sg[this.model][r];i&&(this.color[r]=i(this.color[r]))}this.valpha=Math.max(0,Math.min(1,this.valpha)),Object.freeze&&Object.freeze(this)}nn.prototype={toString(){return this.string()},toJSON(){return this[this.model]()},string(e){let t=this.model in _c.to?this:this.rgb();t=t.round(typeof e=="number"?e:1);const r=t.valpha===1?t.color:[...t.color,this.valpha];return _c.to[t.model](r)},percentString(e){const t=this.rgb().round(typeof e=="number"?e:1),r=t.valpha===1?t.color:[...t.color,this.valpha];return _c.to.rgb.percent(r)},array(){return this.valpha===1?[...this.color]:[...this.color,this.valpha]},object(){const e={},{channels:t}=bi[this.model],{labels:r}=bi[this.model];for(let n=0;n<t;n++)e[r[n]]=this.color[n];return this.valpha!==1&&(e.alpha=this.valpha),e},unitArray(){const e=this.rgb().color;return e[0]/=255,e[1]/=255,e[2]/=255,this.valpha!==1&&e.push(this.valpha),e},unitObject(){const e=this.rgb().object();return e.r/=255,e.g/=255,e.b/=255,this.valpha!==1&&(e.alpha=this.valpha),e},round(e){return e=Math.max(e||0,0),new nn([...this.color.map(AG(e)),this.valpha],this.model)},alpha(e){return e!==void 0?new nn([...this.color,Math.max(0,Math.min(1,e))],this.model):this.valpha},red:gr("rgb",0,zr(255)),green:gr("rgb",1,zr(255)),blue:gr("rgb",2,zr(255)),hue:gr(["hsl","hsv","hsl","hwb","hcg"],0,e=>(e%360+360)%360),saturationl:gr("hsl",1,zr(100)),lightness:gr("hsl",2,zr(100)),saturationv:gr("hsv",1,zr(100)),value:gr("hsv",2,zr(100)),chroma:gr("hcg",1,zr(100)),gray:gr("hcg",2,zr(100)),white:gr("hwb",1,zr(100)),wblack:gr("hwb",2,zr(100)),cyan:gr("cmyk",0,zr(100)),magenta:gr("cmyk",1,zr(100)),yellow:gr("cmyk",2,zr(100)),black:gr("cmyk",3,zr(100)),x:gr("xyz",0,zr(95.047)),y:gr("xyz",1,zr(100)),z:gr("xyz",2,zr(108.833)),l:gr("lab",0,zr(100)),a:gr("lab",1),b:gr("lab",2),keyword(e){return e!==void 0?new nn(e):bi[this.model].keyword(this.color)},hex(e){return e!==void 0?new nn(e):_c.to.hex(this.rgb().round().color)},hexa(e){if(e!==void 0)return new nn(e);const t=this.rgb().round().color;let r=Math.round(this.valpha*255).toString(16).toUpperCase();return r.length===1&&(r="0"+r),_c.to.hex(t)+r},rgbNumber(){const e=this.rgb().color;return(e[0]&255)<<16|(e[1]&255)<<8|e[2]&255},luminosity(){const e=this.rgb().color,t=[];for(const[r,n]of e.entries()){const i=n/255;t[r]=i<=.04045?i/12.92:((i+.055)/1.055)**2.4}return .2126*t[0]+.7152*t[1]+.0722*t[2]},contrast(e){const t=this.luminosity(),r=e.luminosity();return t>r?(t+.05)/(r+.05):(r+.05)/(t+.05)},level(e){const t=this.contrast(e);return t>=7?"AAA":t>=4.5?"AA":""},isDark(){const e=this.rgb().color;return(e[0]*2126+e[1]*7152+e[2]*722)/1e4<128},isLight(){return!this.isDark()},negate(){const e=this.rgb();for(let t=0;t<3;t++)e.color[t]=255-e.color[t];return e},lighten(e){const t=this.hsl();return t.color[2]+=t.color[2]*e,t},darken(e){const t=this.hsl();return t.color[2]-=t.color[2]*e,t},saturate(e){const t=this.hsl();return t.color[1]+=t.color[1]*e,t},desaturate(e){const t=this.hsl();return t.color[1]-=t.color[1]*e,t},whiten(e){const t=this.hwb();return t.color[1]+=t.color[1]*e,t},blacken(e){const t=this.hwb();return t.color[2]+=t.color[2]*e,t},grayscale(){const e=this.rgb().color,t=e[0]*.3+e[1]*.59+e[2]*.11;return nn.rgb(t,t,t)},fade(e){return this.alpha(this.valpha-this.valpha*e)},opaquer(e){return this.alpha(this.valpha+this.valpha*e)},rotate(e){const t=this.hsl();let r=t.color[0];return r=(r+e)%360,r=r<0?360+r:r,t.color[0]=r,t},mix(e,t){if(!e||!e.rgb)throw new Error('Argument to "mix" was not a Color instance, but rather an instance of '+typeof e);const r=e.rgb(),n=this.rgb(),i=t===void 0?.5:t,o=2*i-1,s=r.alpha()-n.alpha(),a=((o*s===-1?o:(o+s)/(1+o*s))+1)/2,l=1-a;return nn.rgb(a*r.red()+l*n.red(),a*r.green()+l*n.green(),a*r.blue()+l*n.blue(),r.alpha()*i+n.alpha()*(1-i))}};for(const e of Object.keys(bi)){if(PR.includes(e))continue;const{channels:t}=bi[e];nn.prototype[e]=function(...r){return this.model===e?new nn(this):r.length>0?new nn(r,e):new nn([...RG(bi[this.model][e].raw(this.color)),this.valpha],e)},nn[e]=function(...r){let n=r[0];return typeof n=="number"&&(n=Kb(r,t)),new nn(n,e)}}function PG(e,t){return Number(e.toFixed(t))}function AG(e){return function(t){return PG(t,e)}}function gr(e,t,r){e=Array.isArray(e)?e:[e];for(const n of e)(sg[n]||(sg[n]=[]))[t]=r;return e=e[0],function(n){let i;return n!==void 0?(r&&(n=r(n)),i=this[e](),i.color[t]=n,i):(i=this[e]().color[t],r&&(i=r(i)),i)}}function zr(e){return function(t){return Math.max(0,Math.min(e,t))}}function RG(e){return Array.isArray(e)?e:[e]}function Kb(e,t){for(let r=0;r<t;r++)typeof e[r]!="number"&&(e[r]=0);return e}var kG=nn;const Lt=kG;class ka extends Error{constructor(t,r){super(t),this.type="",this.type=r!=null?r:""}static getMessageFromAny(t){return t instanceof ka||t instanceof Error?t.message:typeof t=="string"?t:"Unknown error"}}var OG=Object.defineProperty,LG=Object.getOwnPropertyDescriptor,AR=(e,t,r,n)=>{for(var i=n>1?void 0:n?LG(t,r):t,o=e.length-1,s;o>=0;o--)(s=e[o])&&(i=(n?s(t,r,i):s(i))||i);return n&&i&&OG(t,r,i),i},t0=(e=>(e.ERROR="var(--red)",e.WARN="var(--orange)",e.SUCCESS="var(--accent)",e))(t0||{});class n4{constructor(){this.lastId=0,this.toasts=[],this.pillState={visible:!1,text:""},this.log=(t,r=3500,n="var(--accent)")=>{const i=++this.lastId;this.toasts.push({text:t,timestamp:Date.now(),timeout:r,visible:!0,id:i,type:n}),setTimeout(()=>this.hideToast(i),r),setTimeout(()=>this.removeToast(i),r+300)},this.error=(t,r)=>{this.log(t,r,"var(--red)")},this.logAppError=t=>{t instanceof ka?this.error(t.message):console.error(t)},this.success=(t,r)=>{this.log(t,r,"var(--accent)")},this.warn=(t,r)=>{this.log(t,r,"var(--orange)")},this.clearToasts=()=>{this.toasts.splice(0,this.toasts.length)},this.hideToast=t=>{this.setState(t,{visible:!1})},this.removeToast=t=>{this.toasts.splice(0,this.toasts.length,...this.toasts.filter(r=>r.id!==t))},this.setState=(t,r)=>{const n=this.toasts.find(i=>i.id===t);n&&Object.assign(n,r)},this.setPillState=t=>{Object.assign(this.pillState,t)},this.showPill=t=>{this.setPillState({text:t,visible:!0})},this.hidePill=()=>{this.setPillState({visible:!1})},ki(this)}}AR([gt],n4.prototype,"toasts",2);AR([gt],n4.prototype,"pillState",2);const we=new n4,UG=[{id:"Pink",type:"theme",editable:!1,other:{backgroundImageMain:"",backgroundImageComposer:"",name:"Pink"},data:{background:{name:"background",css:"background",value:"rgb(48, 49, 64)",text:"#edeae5"},primary:{name:"primary",css:"primary",value:"rgb(23, 14, 46)",text:"#edeae5"},secondary:{name:"secondary",css:"secondary",value:"rgb(212, 171, 171)",text:"#151414"},accent:{name:"accent",css:"accent",value:"#DC45B4",text:"#edeae5"},composer_accent:{name:"composer_accent",css:"composer-accent",value:"rgb(132, 28, 104)",text:"#edeae5"},icon_color:{name:"icon_color",css:"icon-color",value:"#FBDDFF",text:"#151414"},menu_background:{name:"menu_background",css:"menu-background",value:"rgb(212, 173, 194)",text:"#151414"},note_background:{name:"note_background",css:"note-background",value:"rgb(13, 6, 33)",text:"#edeae5"}}},{editable:!1,id:"Blue",type:"theme",other:{backgroundImageMain:"",backgroundImageComposer:"",name:"Blue"},data:{background:{name:"background",css:"background",value:"rgb(48, 49, 64)",text:"#edeae5"},primary:{name:"primary",css:"primary",value:"rgb(14, 32, 46)",text:"#edeae5"},secondary:{name:"secondary",css:"secondary",value:"rgb(171, 212, 206)",text:"#151414"},accent:{name:"accent",css:"accent",value:"rgb(56, 94, 201)",text:"#edeae5"},composer_accent:{name:"composer_accent",css:"composer-accent",value:"rgb(56, 94, 201)",text:"#edeae5"},icon_color:{name:"icon_color",css:"icon-color",value:"rgb(135, 179, 255)",text:"#151414"},menu_background:{name:"menu_background",css:"menu-background",value:"#c4cfd4",text:"#151414"},note_background:{name:"note_background",css:"note-background",value:"rgb(14, 32, 46)",text:"#edeae5"}}},{editable:!1,id:"Rainy_Lullaby",type:"theme",other:{backgroundImageMain:"./assets/images/Rainy_Theme.png",backgroundImageComposer:"./assets/images/Rainy_Theme.png",name:"Rainy Lullaby"},data:{background:{name:"background",css:"background",value:"#394248",text:"#edeae5"},primary:{name:"primary",css:"primary",value:"#1a212a",text:"#edeae5"},secondary:{name:"secondary",css:"secondary",value:"#113244",text:"#edeae5"},accent:{name:"accent",css:"accent",value:"#88a8a4",text:"#151414"},composer_accent:{name:"composer_accent",css:"composer-accent",value:"#6D8582",text:"#edeae5"},icon_color:{name:"icon_color",css:"icon-color",value:"#5e7775",text:"#edeae5"},menu_background:{name:"menu_background",css:"menu-background",value:"rgba(237, 229, 216, 0.95)",text:"#151414"},note_background:{name:"note_background",css:"note-background",value:"#203141",text:"#edeae5"}}},{editable:!1,id:"Liyue",type:"theme",other:{backgroundImageMain:"./assets/images/Liyue_Theme.jpg",backgroundImageComposer:"./assets/images/Liyue_Theme.jpg",name:"Liyue"},data:{background:{name:"background",css:"background",value:"#3B5A62",text:"#edeae5"},primary:{name:"primary",css:"primary",value:"#486D78",text:"#edeae5"},secondary:{name:"secondary",css:"secondary",value:"rgb(228, 183, 119)",text:"#151414"},accent:{name:"accent",css:"accent",value:"#54928C",text:"#151414"},composer_accent:{name:"composer_accent",css:"composer-accent",value:"#54928C",text:"#edeae5"},icon_color:{name:"icon_color",css:"icon-color",value:"rgb(155, 220, 230)",text:"#151414"},menu_background:{name:"menu_background",css:"menu-background",value:"#E4D6C8",text:"#151414"},note_background:{name:"note_background",css:"note-background",value:"rgb(255, 229, 209)",text:"#151414"}}},{editable:!1,id:"Hacker_Theme",type:"theme",other:{backgroundImageMain:"",backgroundImageComposer:"",name:"Hacker"},data:{background:{name:"background",css:"background",value:"#070707",text:"#edeae5"},primary:{name:"primary",css:"primary",value:"#141a14",text:"#edeae5"},secondary:{name:"secondary",css:"secondary",value:"#00ff00",text:"#151414"},accent:{name:"accent",css:"accent",value:"#00ff00",text:"#151414"},composer_accent:{name:"composer_accent",css:"composer-accent",value:"#005700",text:"#edeae5"},icon_color:{name:"icon_color",css:"icon-color",value:"#00ff00",text:"#151414"},menu_background:{name:"menu_background",css:"menu-background",value:"#202820",text:"#edeae5"},note_background:{name:"note_background",css:"note-background",value:"#141a14",text:"#edeae5"}}},{editable:!1,id:"Snowy Night",type:"theme",other:{backgroundImageMain:"./assets/images/Snow_Theme.gif",backgroundImageComposer:"./assets/images/Snow_Theme.gif",name:"Snowy Night"},data:{background:{name:"background",css:"background",value:"rgb(0, 0, 0)",text:"#edeae5"},primary:{name:"primary",css:"primary",value:"#141414",text:"#edeae5"},secondary:{name:"secondary",css:"secondary",value:"rgb(255, 255, 255)",text:"#151414"},accent:{name:"accent",css:"accent",value:"rgb(255, 255, 255)",text:"#151414"},composer_accent:{name:"composer_accent",css:"composer-accent",value:"rgb(255, 255, 255)",text:"#858585"},icon_color:{name:"icon_color",css:"icon-color",value:"rgb(255, 255, 255)",text:"#151414"},menu_background:{name:"menu_background",css:"menu-background",value:"rgb(21, 21, 21)",text:"#edeae5"},note_background:{name:"note_background",css:"note-background",value:"rgb(0, 0, 0)",text:"#edeae5"}}}];var FG;function Va(){}Va.prototype=Object.create(null);function Wt(){Wt.init.call(this)}Wt.EventEmitter=Wt;Wt.usingDomains=!1;Wt.prototype.domain=void 0;Wt.prototype._events=void 0;Wt.prototype._maxListeners=void 0;Wt.defaultMaxListeners=10;Wt.init=function(){this.domain=null,Wt.usingDomains&&FG.active,(!this._events||this._events===Object.getPrototypeOf(this)._events)&&(this._events=new Va,this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};Wt.prototype.setMaxListeners=function(t){if(typeof t!="number"||t<0||isNaN(t))throw new TypeError('"n" argument must be a positive number');return this._maxListeners=t,this};function RR(e){return e._maxListeners===void 0?Wt.defaultMaxListeners:e._maxListeners}Wt.prototype.getMaxListeners=function(){return RR(this)};function MG(e,t,r){if(t)e.call(r);else for(var n=e.length,i=Np(e,n),o=0;o<n;++o)i[o].call(r)}function BG(e,t,r,n){if(t)e.call(r,n);else for(var i=e.length,o=Np(e,i),s=0;s<i;++s)o[s].call(r,n)}function DG(e,t,r,n,i){if(t)e.call(r,n,i);else for(var o=e.length,s=Np(e,o),a=0;a<o;++a)s[a].call(r,n,i)}function GG(e,t,r,n,i,o){if(t)e.call(r,n,i,o);else for(var s=e.length,a=Np(e,s),l=0;l<s;++l)a[l].call(r,n,i,o)}function jG(e,t,r,n){if(t)e.apply(r,n);else for(var i=e.length,o=Np(e,i),s=0;s<i;++s)o[s].apply(r,n)}Wt.prototype.emit=function(t){var r,n,i,o,s,a,l,u=t==="error";if(a=this._events,a)u=u&&a.error==null;else if(!u)return!1;if(l=this.domain,u){if(r=arguments[1],l)r||(r=new Error('Uncaught, unspecified "error" event')),r.domainEmitter=this,r.domain=l,r.domainThrown=!1,l.emit("error",r);else{if(r instanceof Error)throw r;var c=new Error('Uncaught, unspecified "error" event. ('+r+")");throw c.context=r,c}return!1}if(n=a[t],!n)return!1;var f=typeof n=="function";switch(i=arguments.length,i){case 1:MG(n,f,this);break;case 2:BG(n,f,this,arguments[1]);break;case 3:DG(n,f,this,arguments[1],arguments[2]);break;case 4:GG(n,f,this,arguments[1],arguments[2],arguments[3]);break;default:for(o=new Array(i-1),s=1;s<i;s++)o[s-1]=arguments[s];jG(n,f,this,o)}return!0};function kR(e,t,r,n){var i,o,s;if(typeof r!="function")throw new TypeError('"listener" argument must be a function');if(o=e._events,o?(o.newListener&&(e.emit("newListener",t,r.listener?r.listener:r),o=e._events),s=o[t]):(o=e._events=new Va,e._eventsCount=0),!s)s=o[t]=r,++e._eventsCount;else if(typeof s=="function"?s=o[t]=n?[r,s]:[s,r]:n?s.unshift(r):s.push(r),!s.warned&&(i=RR(e),i&&i>0&&s.length>i)){s.warned=!0;var a=new Error("Possible EventEmitter memory leak detected. "+s.length+" "+t+" listeners added. Use emitter.setMaxListeners() to increase limit");a.name="MaxListenersExceededWarning",a.emitter=e,a.type=t,a.count=s.length,$G(a)}return e}function $G(e){typeof console.warn=="function"?console.warn(e):console.log(e)}Wt.prototype.addListener=function(t,r){return kR(this,t,r,!1)};Wt.prototype.on=Wt.prototype.addListener;Wt.prototype.prependListener=function(t,r){return kR(this,t,r,!0)};function OR(e,t,r){var n=!1;function i(){e.removeListener(t,i),n||(n=!0,r.apply(e,arguments))}return i.listener=r,i}Wt.prototype.once=function(t,r){if(typeof r!="function")throw new TypeError('"listener" argument must be a function');return this.on(t,OR(this,t,r)),this};Wt.prototype.prependOnceListener=function(t,r){if(typeof r!="function")throw new TypeError('"listener" argument must be a function');return this.prependListener(t,OR(this,t,r)),this};Wt.prototype.removeListener=function(t,r){var n,i,o,s,a;if(typeof r!="function")throw new TypeError('"listener" argument must be a function');if(i=this._events,!i)return this;if(n=i[t],!n)return this;if(n===r||n.listener&&n.listener===r)--this._eventsCount===0?this._events=new Va:(delete i[t],i.removeListener&&this.emit("removeListener",t,n.listener||r));else if(typeof n!="function"){for(o=-1,s=n.length;s-- >0;)if(n[s]===r||n[s].listener&&n[s].listener===r){a=n[s].listener,o=s;break}if(o<0)return this;if(n.length===1){if(n[0]=void 0,--this._eventsCount===0)return this._events=new Va,this;delete i[t]}else HG(n,o);i.removeListener&&this.emit("removeListener",t,a||r)}return this};Wt.prototype.removeAllListeners=function(t){var r,n;if(n=this._events,!n)return this;if(!n.removeListener)return arguments.length===0?(this._events=new Va,this._eventsCount=0):n[t]&&(--this._eventsCount===0?this._events=new Va:delete n[t]),this;if(arguments.length===0){for(var i=Object.keys(n),o=0,s;o<i.length;++o)s=i[o],s!=="removeListener"&&this.removeAllListeners(s);return this.removeAllListeners("removeListener"),this._events=new Va,this._eventsCount=0,this}if(r=n[t],typeof r=="function")this.removeListener(t,r);else if(r)do this.removeListener(t,r[r.length-1]);while(r[0]);return this};Wt.prototype.listeners=function(t){var r,n,i=this._events;return i?(r=i[t],r?typeof r=="function"?n=[r.listener||r]:n=zG(r):n=[]):n=[],n};Wt.listenerCount=function(e,t){return typeof e.listenerCount=="function"?e.listenerCount(t):LR.call(e,t)};Wt.prototype.listenerCount=LR;function LR(e){var t=this._events;if(t){var r=t[e];if(typeof r=="function")return 1;if(r)return r.length}return 0}Wt.prototype.eventNames=function(){return this._eventsCount>0?Reflect.ownKeys(this._events):[]};function HG(e,t){for(var r=t,n=r+1,i=e.length;n<i;r+=1,n+=1)e[r]=e[n];e.pop()}function Np(e,t){for(var r=new Array(t);t--;)r[t]=e[t];return r}function zG(e){for(var t=new Array(e.length),r=0;r<t.length;++r)t[r]=e[r].listener||e[r];return t}const VG=Object.freeze(Object.defineProperty({__proto__:null,default:Wt,EventEmitter:Wt},Symbol.toStringTag,{value:"Module"})),UR=Px(VG),pr={};var Ey={exports:{}};(function(e,t){/*!
 *
 * Copyright 2009-2017 Kris Kowal under the terms of the MIT
 * license found at https://github.com/kriskowal/q/blob/v1/LICENSE
 *
 * With parts by Tyler Close
 * Copyright 2007-2009 Tyler Close under the terms of the MIT X license found
 * at http://www.opensource.org/licenses/mit-license.html
 * Forked at ref_send.js version: 2009-05-11
 *
 * With parts by Mark Miller
 * Copyright (C) 2011 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 */(function(r){typeof bootstrap=="function"?bootstrap("promise",r):e.exports=r()})(function(){var r=!1;try{throw new Error}catch(D){r=!!D.stack}var n=j(),i,o=function(){},s=function(){var D={task:void 0,next:null},V=D,re=!1,ve=void 0,Ke=!1,rt=[];function Qe(){for(var Ut,ur;D.next;)D=D.next,Ut=D.task,D.task=void 0,ur=D.domain,ur&&(D.domain=void 0,ur.enter()),jt(Ut,ur);for(;rt.length;)Ut=rt.pop(),jt(Ut);re=!1}function jt(Ut,ur){try{Ut()}catch(di){if(Ke)throw ur&&ur.exit(),setTimeout(Qe,0),ur&&ur.enter(),di;setTimeout(function(){throw di},0)}ur&&ur.exit()}if(s=function(Ut){V=V.next={task:Ut,domain:Ke&&pr.domain,next:null},re||(re=!0,ve())},typeof pr=="object"&&pr.toString()==="[object process]"&&pr.nextTick)Ke=!0,ve=function(){pr.nextTick(Qe)};else if(typeof setImmediate=="function")typeof window<"u"?ve=setImmediate.bind(window,Qe):ve=function(){setImmediate(Qe)};else if(typeof MessageChannel<"u"){var yt=new MessageChannel;yt.port1.onmessage=function(){ve=Nt,yt.port1.onmessage=Qe,Qe()};var Nt=function(){yt.port2.postMessage(0)};ve=function(){setTimeout(Qe,0),Nt()}}else ve=function(){setTimeout(Qe,0)};return s.runAfter=function(Ut){rt.push(Ut),re||(re=!0,ve())},s}(),a=Function.call;function l(D){return function(){return a.apply(D,arguments)}}var u=l(Array.prototype.slice),c=l(Array.prototype.reduce||function(D,V){var re=0,ve=this.length;if(arguments.length===1)do{if(re in this){V=this[re++];break}if(++re>=ve)throw new TypeError}while(1);for(;re<ve;re++)re in this&&(V=D(V,this[re],re));return V}),f=l(Array.prototype.indexOf||function(D){for(var V=0;V<this.length;V++)if(this[V]===D)return V;return-1}),p=l(Array.prototype.map||function(D,V){var re=this,ve=[];return c(re,function(Ke,rt,Qe){ve.push(D.call(V,rt,Qe,re))},void 0),ve}),v=Object.create||function(D){function V(){}return V.prototype=D,new V},g=Object.defineProperty||function(D,V,re){return D[V]=re.value,D},b=l(Object.prototype.hasOwnProperty),_=Object.keys||function(D){var V=[];for(var re in D)b(D,re)&&V.push(re);return V},w=l(Object.prototype.toString);function x(D){return D===Object(D)}function T(D){return w(D)==="[object StopIteration]"||D instanceof I}var I;typeof ReturnValue<"u"?I=ReturnValue:I=function(D){this.value=D};var R="From previous event:";function E(D,V){if(r&&V.stack&&typeof D=="object"&&D!==null&&D.stack){for(var re=[],ve=V;ve;ve=ve.source)ve.stack&&(!D.__minimumStackCounter__||D.__minimumStackCounter__>ve.stackCounter)&&(g(D,"__minimumStackCounter__",{value:ve.stackCounter,configurable:!0}),re.unshift(ve.stack));re.unshift(D.stack);var Ke=re.join(`
`+R+`
`),rt=O(Ke);g(D,"stack",{value:rt,configurable:!0})}}function O(D){for(var V=D.split(`
`),re=[],ve=0;ve<V.length;++ve){var Ke=V[ve];!A(Ke)&&!P(Ke)&&Ke&&re.push(Ke)}return re.join(`
`)}function P(D){return D.indexOf("(module.js:")!==-1||D.indexOf("(node.js:")!==-1}function N(D){var V=/at .+ \((.+):(\d+):(?:\d+)\)$/.exec(D);if(V)return[V[1],Number(V[2])];var re=/at ([^ ]+):(\d+):(?:\d+)$/.exec(D);if(re)return[re[1],Number(re[2])];var ve=/.*@(.+):(\d+)$/.exec(D);if(ve)return[ve[1],Number(ve[2])]}function A(D){var V=N(D);if(!V)return!1;var re=V[0],ve=V[1];return re===i&&ve>=n&&ve<=ht}function j(){if(!!r)try{throw new Error}catch(ve){var D=ve.stack.split(`
`),V=D[0].indexOf("@")>0?D[1]:D[2],re=N(V);return re?(i=re[0],re[1]):void 0}}function X(D,V,re){return function(){return typeof console<"u"&&typeof console.warn=="function"&&console.warn(V+" is deprecated, use "+re+" instead.",new Error("").stack),D.apply(D,arguments)}}function B(D){return D instanceof ue?D:W(D)?Pe(D):Ee(D)}B.resolve=B,B.nextTick=s,B.longStackSupport=!1;var ae=1;typeof pr=="object"&&pr&&pr.env&&pr.env.Q_DEBUG&&(B.longStackSupport=!0),B.defer=Y;function Y(){var D=[],V=[],re,ve=v(Y.prototype),Ke=v(ue.prototype);if(Ke.promiseDispatch=function(Qe,jt,yt){var Nt=u(arguments);D?(D.push(Nt),jt==="when"&&yt[1]&&V.push(yt[1])):B.nextTick(function(){re.promiseDispatch.apply(re,Nt)})},Ke.valueOf=function(){if(D)return Ke;var Qe=Q(re);return ee(Qe)&&(re=Qe),Qe},Ke.inspect=function(){return re?re.inspect():{state:"pending"}},B.longStackSupport&&r)try{throw new Error}catch(Qe){Ke.stack=Qe.stack.substring(Qe.stack.indexOf(`
`)+1),Ke.stackCounter=ae++}function rt(Qe){re=Qe,B.longStackSupport&&r&&(Ke.source=Qe),c(D,function(jt,yt){B.nextTick(function(){Qe.promiseDispatch.apply(Qe,yt)})},void 0),D=void 0,V=void 0}return ve.promise=Ke,ve.resolve=function(Qe){re||rt(B(Qe))},ve.fulfill=function(Qe){re||rt(Ee(Qe))},ve.reject=function(Qe){re||rt(le(Qe))},ve.notify=function(Qe){re||c(V,function(jt,yt){B.nextTick(function(){yt(Qe)})},void 0)},ve}Y.prototype.makeNodeResolver=function(){var D=this;return function(V,re){V?D.reject(V):arguments.length>2?D.resolve(u(arguments,1)):D.resolve(re)}},B.Promise=K,B.promise=K;function K(D){if(typeof D!="function")throw new TypeError("resolver must be a function.");var V=Y();try{D(V.resolve,V.reject,V.notify)}catch(re){V.reject(re)}return V.promise}K.race=me,K.all=Gr,K.reject=le,K.resolve=B,B.passByCopy=function(D){return D},ue.prototype.passByCopy=function(){return this},B.join=function(D,V){return B(D).join(V)},ue.prototype.join=function(D){return B([this,D]).spread(function(V,re){if(V===re)return V;throw new Error("Q can't join: not the same: "+V+" "+re)})},B.race=me;function me(D){return K(function(V,re){for(var ve=0,Ke=D.length;ve<Ke;ve++)B(D[ve]).then(V,re)})}ue.prototype.race=function(){return this.then(B.race)},B.makePromise=ue;function ue(D,V,re){V===void 0&&(V=function(rt){return le(new Error("Promise does not support operation: "+rt))}),re===void 0&&(re=function(){return{state:"unknown"}});var ve=v(ue.prototype);if(ve.promiseDispatch=function(rt,Qe,jt){var yt;try{D[Qe]?yt=D[Qe].apply(ve,jt):yt=V.call(ve,Qe,jt)}catch(Nt){yt=le(Nt)}rt&&rt(yt)},ve.inspect=re,re){var Ke=re();Ke.state==="rejected"&&(ve.exception=Ke.reason),ve.valueOf=function(){var rt=re();return rt.state==="pending"||rt.state==="rejected"?ve:rt.value}}return ve}ue.prototype.toString=function(){return"[object Promise]"},ue.prototype.then=function(D,V,re){var ve=this,Ke=Y(),rt=!1;function Qe(Nt){try{return typeof D=="function"?D(Nt):Nt}catch(Ut){return le(Ut)}}function jt(Nt){if(typeof V=="function"){E(Nt,ve);try{return V(Nt)}catch(Ut){return le(Ut)}}return le(Nt)}function yt(Nt){return typeof re=="function"?re(Nt):Nt}return B.nextTick(function(){ve.promiseDispatch(function(Nt){rt||(rt=!0,Ke.resolve(Qe(Nt)))},"when",[function(Nt){rt||(rt=!0,Ke.resolve(jt(Nt)))}])}),ve.promiseDispatch(void 0,"when",[void 0,function(Nt){var Ut,ur=!1;try{Ut=yt(Nt)}catch(di){if(ur=!0,B.onerror)B.onerror(di);else throw di}ur||Ke.notify(Ut)}]),Ke.promise},B.tap=function(D,V){return B(D).tap(V)},ue.prototype.tap=function(D){return D=B(D),this.then(function(V){return D.fcall(V).thenResolve(V)})},B.when=ie;function ie(D,V,re,ve){return B(D).then(V,re,ve)}ue.prototype.thenResolve=function(D){return this.then(function(){return D})},B.thenResolve=function(D,V){return B(D).thenResolve(V)},ue.prototype.thenReject=function(D){return this.then(function(){throw D})},B.thenReject=function(D,V){return B(D).thenReject(V)},B.nearer=Q;function Q(D){if(ee(D)){var V=D.inspect();if(V.state==="fulfilled")return V.value}return D}B.isPromise=ee;function ee(D){return D instanceof ue}B.isPromiseAlike=W;function W(D){return x(D)&&typeof D.then=="function"}B.isPending=te;function te(D){return ee(D)&&D.inspect().state==="pending"}ue.prototype.isPending=function(){return this.inspect().state==="pending"},B.isFulfilled=ye;function ye(D){return!ee(D)||D.inspect().state==="fulfilled"}ue.prototype.isFulfilled=function(){return this.inspect().state==="fulfilled"},B.isRejected=Ce;function Ce(D){return ee(D)&&D.inspect().state==="rejected"}ue.prototype.isRejected=function(){return this.inspect().state==="rejected"};var Ie=[],Ye=[],de=[],F=!0;function $(){Ie.length=0,Ye.length=0,F||(F=!0)}function q(D,V){!F||(typeof pr=="object"&&typeof pr.emit=="function"&&B.nextTick.runAfter(function(){f(Ye,D)!==-1&&(pr.emit("unhandledRejection",V,D),de.push(D))}),Ye.push(D),V&&typeof V.stack<"u"?Ie.push(V.stack):Ie.push("(no stack) "+V))}function pe(D){if(!!F){var V=f(Ye,D);V!==-1&&(typeof pr=="object"&&typeof pr.emit=="function"&&B.nextTick.runAfter(function(){var re=f(de,D);re!==-1&&(pr.emit("rejectionHandled",Ie[V],D),de.splice(re,1))}),Ye.splice(V,1),Ie.splice(V,1))}}B.resetUnhandledRejections=$,B.getUnhandledReasons=function(){return Ie.slice()},B.stopUnhandledRejectionTracking=function(){$(),F=!1},$(),B.reject=le;function le(D){var V=ue({when:function(re){return re&&pe(this),re?re(D):this}},function(){return this},function(){return{state:"rejected",reason:D}});return q(V,D),V}B.fulfill=Ee;function Ee(D){return ue({when:function(){return D},get:function(V){return D[V]},set:function(V,re){D[V]=re},delete:function(V){delete D[V]},post:function(V,re){return V==null?D.apply(void 0,re):D[V].apply(D,re)},apply:function(V,re){return D.apply(V,re)},keys:function(){return _(D)}},void 0,function(){return{state:"fulfilled",value:D}})}function Pe(D){var V=Y();return B.nextTick(function(){try{D.then(V.resolve,V.reject,V.notify)}catch(re){V.reject(re)}}),V.promise}B.master=Oe;function Oe(D){return ue({isDef:function(){}},function(re,ve){return xt(D,re,ve)},function(){return B(D).inspect()})}B.spread=it;function it(D,V,re){return B(D).spread(V,re)}ue.prototype.spread=function(D,V){return this.all().then(function(re){return D.apply(void 0,re)},V)},B.async=Et;function Et(D){return function(){function V(rt,Qe){var jt;if(typeof StopIteration>"u"){try{jt=re[rt](Qe)}catch(yt){return le(yt)}return jt.done?B(jt.value):ie(jt.value,ve,Ke)}else{try{jt=re[rt](Qe)}catch(yt){return T(yt)?B(yt.value):le(yt)}return ie(jt,ve,Ke)}}var re=D.apply(this,arguments),ve=V.bind(V,"next"),Ke=V.bind(V,"throw");return ve()}}B.spawn=Ot;function Ot(D){B.done(B.async(D)())}B.return=Yt;function Yt(D){throw new I(D)}B.promised=Kt;function Kt(D){return function(){return it([this,Gr(arguments)],function(V,re){return D.apply(V,re)})}}B.dispatch=xt;function xt(D,V,re){return B(D).dispatch(V,re)}ue.prototype.dispatch=function(D,V){var re=this,ve=Y();return B.nextTick(function(){re.promiseDispatch(ve.resolve,D,V)}),ve.promise},B.get=function(D,V){return B(D).dispatch("get",[V])},ue.prototype.get=function(D){return this.dispatch("get",[D])},B.set=function(D,V,re){return B(D).dispatch("set",[V,re])},ue.prototype.set=function(D,V){return this.dispatch("set",[D,V])},B.del=B.delete=function(D,V){return B(D).dispatch("delete",[V])},ue.prototype.del=ue.prototype.delete=function(D){return this.dispatch("delete",[D])},B.mapply=B.post=function(D,V,re){return B(D).dispatch("post",[V,re])},ue.prototype.mapply=ue.prototype.post=function(D,V){return this.dispatch("post",[D,V])},B.send=B.mcall=B.invoke=function(D,V){return B(D).dispatch("post",[V,u(arguments,2)])},ue.prototype.send=ue.prototype.mcall=ue.prototype.invoke=function(D){return this.dispatch("post",[D,u(arguments,1)])},B.fapply=function(D,V){return B(D).dispatch("apply",[void 0,V])},ue.prototype.fapply=function(D){return this.dispatch("apply",[void 0,D])},B.try=B.fcall=function(D){return B(D).dispatch("apply",[void 0,u(arguments,1)])},ue.prototype.fcall=function(){return this.dispatch("apply",[void 0,u(arguments)])},B.fbind=function(D){var V=B(D),re=u(arguments,1);return function(){return V.dispatch("apply",[this,re.concat(u(arguments))])}},ue.prototype.fbind=function(){var D=this,V=u(arguments);return function(){return D.dispatch("apply",[this,V.concat(u(arguments))])}},B.keys=function(D){return B(D).dispatch("keys",[])},ue.prototype.keys=function(){return this.dispatch("keys",[])},B.all=Gr;function Gr(D){return ie(D,function(V){var re=0,ve=Y();return c(V,function(Ke,rt,Qe){var jt;ee(rt)&&(jt=rt.inspect()).state==="fulfilled"?V[Qe]=jt.value:(++re,ie(rt,function(yt){V[Qe]=yt,--re===0&&ve.resolve(V)},ve.reject,function(yt){ve.notify({index:Qe,value:yt})}))},void 0),re===0&&ve.resolve(V),ve.promise})}ue.prototype.all=function(){return Gr(this)},B.any=L;function L(D){if(D.length===0)return B.resolve();var V=B.defer(),re=0;return c(D,function(ve,Ke,rt){var Qe=D[rt];re++,ie(Qe,jt,yt,Nt);function jt(Ut){V.resolve(Ut)}function yt(Ut){if(re--,re===0){var ur=Ut||new Error(""+Ut);ur.message="Q can't get fulfillment value from any promise, all promises were rejected. Last error message: "+ur.message,V.reject(ur)}}function Nt(Ut){V.notify({index:rt,value:Ut})}},void 0),V.promise}ue.prototype.any=function(){return L(this)},B.allResolved=X(H,"allResolved","allSettled");function H(D){return ie(D,function(V){return V=p(V,B),ie(Gr(p(V,function(re){return ie(re,o,o)})),function(){return V})})}ue.prototype.allResolved=function(){return H(this)},B.allSettled=Z;function Z(D){return B(D).allSettled()}ue.prototype.allSettled=function(){return this.then(function(D){return Gr(p(D,function(V){V=B(V);function re(){return V.inspect()}return V.then(re,re)}))})},B.fail=B.catch=function(D,V){return B(D).then(void 0,V)},ue.prototype.fail=ue.prototype.catch=function(D){return this.then(void 0,D)},B.progress=_e;function _e(D,V){return B(D).then(void 0,void 0,V)}ue.prototype.progress=function(D){return this.then(void 0,void 0,D)},B.fin=B.finally=function(D,V){return B(D).finally(V)},ue.prototype.fin=ue.prototype.finally=function(D){if(!D||typeof D.apply!="function")throw new Error("Q can't apply finally callback");return D=B(D),this.then(function(V){return D.fcall().then(function(){return V})},function(V){return D.fcall().then(function(){throw V})})},B.done=function(D,V,re,ve){return B(D).done(V,re,ve)},ue.prototype.done=function(D,V,re){var ve=function(rt){B.nextTick(function(){if(E(rt,Ke),B.onerror)B.onerror(rt);else throw rt})},Ke=D||V||re?this.then(D,V,re):this;typeof pr=="object"&&pr&&pr.domain&&(ve=pr.domain.bind(ve)),Ke.then(void 0,ve)},B.timeout=function(D,V,re){return B(D).timeout(V,re)},ue.prototype.timeout=function(D,V){var re=Y(),ve=setTimeout(function(){(!V||typeof V=="string")&&(V=new Error(V||"Timed out after "+D+" ms"),V.code="ETIMEDOUT"),re.reject(V)},D);return this.then(function(Ke){clearTimeout(ve),re.resolve(Ke)},function(Ke){clearTimeout(ve),re.reject(Ke)},re.notify),re.promise},B.delay=function(D,V){return V===void 0&&(V=D,D=void 0),B(D).delay(V)},ue.prototype.delay=function(D){return this.then(function(V){var re=Y();return setTimeout(function(){re.resolve(V)},D),re.promise})},B.nfapply=function(D,V){return B(D).nfapply(V)},ue.prototype.nfapply=function(D){var V=Y(),re=u(D);return re.push(V.makeNodeResolver()),this.fapply(re).fail(V.reject),V.promise},B.nfcall=function(D){var V=u(arguments,1);return B(D).nfapply(V)},ue.prototype.nfcall=function(){var D=u(arguments),V=Y();return D.push(V.makeNodeResolver()),this.fapply(D).fail(V.reject),V.promise},B.nfbind=B.denodeify=function(D){if(D===void 0)throw new Error("Q can't wrap an undefined function");var V=u(arguments,1);return function(){var re=V.concat(u(arguments)),ve=Y();return re.push(ve.makeNodeResolver()),B(D).fapply(re).fail(ve.reject),ve.promise}},ue.prototype.nfbind=ue.prototype.denodeify=function(){var D=u(arguments);return D.unshift(this),B.denodeify.apply(void 0,D)},B.nbind=function(D,V){var re=u(arguments,2);return function(){var ve=re.concat(u(arguments)),Ke=Y();ve.push(Ke.makeNodeResolver());function rt(){return D.apply(V,arguments)}return B(rt).fapply(ve).fail(Ke.reject),Ke.promise}},ue.prototype.nbind=function(){var D=u(arguments,0);return D.unshift(this),B.nbind.apply(void 0,D)},B.nmapply=B.npost=function(D,V,re){return B(D).npost(V,re)},ue.prototype.nmapply=ue.prototype.npost=function(D,V){var re=u(V||[]),ve=Y();return re.push(ve.makeNodeResolver()),this.dispatch("post",[D,re]).fail(ve.reject),ve.promise},B.nsend=B.nmcall=B.ninvoke=function(D,V){var re=u(arguments,2),ve=Y();return re.push(ve.makeNodeResolver()),B(D).dispatch("post",[V,re]).fail(ve.reject),ve.promise},ue.prototype.nsend=ue.prototype.nmcall=ue.prototype.ninvoke=function(D){var V=u(arguments,1),re=Y();return V.push(re.makeNodeResolver()),this.dispatch("post",[D,V]).fail(re.reject),re.promise},B.nodeify=Ve;function Ve(D,V){return B(D).nodeify(V)}ue.prototype.nodeify=function(D){if(D)this.then(function(V){B.nextTick(function(){D(null,V)})},function(V){B.nextTick(function(){D(V)})});else return this},B.noConflict=function(){throw new Error("Q.noConflict only works when Q is used as a global")};var ht=j();return B})})(Ey);var Ht={},XG=function(t){return WG(t)&&!YG(t)};function WG(e){return!!e&&typeof e=="object"}function YG(e){var t=Object.prototype.toString.call(e);return t==="[object RegExp]"||t==="[object Date]"||ZG(e)}var KG=typeof Symbol=="function"&&Symbol.for,qG=KG?Symbol.for("react.element"):60103;function ZG(e){return e.$$typeof===qG}function JG(e){return Array.isArray(e)?[]:{}}function Gd(e,t){return t.clone!==!1&&t.isMergeableObject(e)?uh(JG(e),e,t):e}function QG(e,t,r){return e.concat(t).map(function(n){return Gd(n,r)})}function ej(e,t){if(!t.customMerge)return uh;var r=t.customMerge(e);return typeof r=="function"?r:uh}function tj(e){return Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(e).filter(function(t){return e.propertyIsEnumerable(t)}):[]}function f5(e){return Object.keys(e).concat(tj(e))}function FR(e,t){try{return t in e}catch{return!1}}function rj(e,t){return FR(e,t)&&!(Object.hasOwnProperty.call(e,t)&&Object.propertyIsEnumerable.call(e,t))}function nj(e,t,r){var n={};return r.isMergeableObject(e)&&f5(e).forEach(function(i){n[i]=Gd(e[i],r)}),f5(t).forEach(function(i){rj(e,i)||(FR(e,i)&&r.isMergeableObject(t[i])?n[i]=ej(i,r)(e[i],t[i],r):n[i]=Gd(t[i],r))}),n}function uh(e,t,r){r=r||{},r.arrayMerge=r.arrayMerge||QG,r.isMergeableObject=r.isMergeableObject||XG,r.cloneUnlessOtherwiseSpecified=Gd;var n=Array.isArray(t),i=Array.isArray(e),o=n===i;return o?n?r.arrayMerge(e,t,r):nj(e,t,r):Gd(t,r)}uh.all=function(t,r){if(!Array.isArray(t))throw new Error("first argument should be an array");return t.reduce(function(n,i){return uh(n,i,r)},{})};var ij=uh,MR=ij,Do=[],Bi=[],oj=typeof Uint8Array<"u"?Uint8Array:Array,i4=!1;function BR(){i4=!0;for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",t=0,r=e.length;t<r;++t)Do[t]=e[t],Bi[e.charCodeAt(t)]=t;Bi["-".charCodeAt(0)]=62,Bi["_".charCodeAt(0)]=63}function sj(e){i4||BR();var t,r,n,i,o,s,a=e.length;if(a%4>0)throw new Error("Invalid string. Length must be a multiple of 4");o=e[a-2]==="="?2:e[a-1]==="="?1:0,s=new oj(a*3/4-o),n=o>0?a-4:a;var l=0;for(t=0,r=0;t<n;t+=4,r+=3)i=Bi[e.charCodeAt(t)]<<18|Bi[e.charCodeAt(t+1)]<<12|Bi[e.charCodeAt(t+2)]<<6|Bi[e.charCodeAt(t+3)],s[l++]=i>>16&255,s[l++]=i>>8&255,s[l++]=i&255;return o===2?(i=Bi[e.charCodeAt(t)]<<2|Bi[e.charCodeAt(t+1)]>>4,s[l++]=i&255):o===1&&(i=Bi[e.charCodeAt(t)]<<10|Bi[e.charCodeAt(t+1)]<<4|Bi[e.charCodeAt(t+2)]>>2,s[l++]=i>>8&255,s[l++]=i&255),s}function aj(e){return Do[e>>18&63]+Do[e>>12&63]+Do[e>>6&63]+Do[e&63]}function lj(e,t,r){for(var n,i=[],o=t;o<r;o+=3)n=(e[o]<<16)+(e[o+1]<<8)+e[o+2],i.push(aj(n));return i.join("")}function d5(e){i4||BR();for(var t,r=e.length,n=r%3,i="",o=[],s=16383,a=0,l=r-n;a<l;a+=s)o.push(lj(e,a,a+s>l?l:a+s));return n===1?(t=e[r-1],i+=Do[t>>2],i+=Do[t<<4&63],i+="=="):n===2&&(t=(e[r-2]<<8)+e[r-1],i+=Do[t>>10],i+=Do[t>>4&63],i+=Do[t<<2&63],i+="="),o.push(i),o.join("")}function Cy(e,t,r,n,i){var o,s,a=i*8-n-1,l=(1<<a)-1,u=l>>1,c=-7,f=r?i-1:0,p=r?-1:1,v=e[t+f];for(f+=p,o=v&(1<<-c)-1,v>>=-c,c+=a;c>0;o=o*256+e[t+f],f+=p,c-=8);for(s=o&(1<<-c)-1,o>>=-c,c+=n;c>0;s=s*256+e[t+f],f+=p,c-=8);if(o===0)o=1-u;else{if(o===l)return s?NaN:(v?-1:1)*(1/0);s=s+Math.pow(2,n),o=o-u}return(v?-1:1)*s*Math.pow(2,o-n)}function DR(e,t,r,n,i,o){var s,a,l,u=o*8-i-1,c=(1<<u)-1,f=c>>1,p=i===23?Math.pow(2,-24)-Math.pow(2,-77):0,v=n?0:o-1,g=n?1:-1,b=t<0||t===0&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(a=isNaN(t)?1:0,s=c):(s=Math.floor(Math.log(t)/Math.LN2),t*(l=Math.pow(2,-s))<1&&(s--,l*=2),s+f>=1?t+=p/l:t+=p*Math.pow(2,1-f),t*l>=2&&(s++,l/=2),s+f>=c?(a=0,s=c):s+f>=1?(a=(t*l-1)*Math.pow(2,i),s=s+f):(a=t*Math.pow(2,f-1)*Math.pow(2,i),s=0));i>=8;e[r+v]=a&255,v+=g,a/=256,i-=8);for(s=s<<i|a,u+=i;u>0;e[r+v]=s&255,v+=g,s/=256,u-=8);e[r+v-g]|=b*128}var uj={}.toString,GR=Array.isArray||function(e){return uj.call(e)=="[object Array]"};/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
 * @license  MIT
 */var cj=50;ge.TYPED_ARRAY_SUPPORT=Ni.TYPED_ARRAY_SUPPORT!==void 0?Ni.TYPED_ARRAY_SUPPORT:!0;ag();function ag(){return ge.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function Ms(e,t){if(ag()<t)throw new RangeError("Invalid typed array length");return ge.TYPED_ARRAY_SUPPORT?(e=new Uint8Array(t),e.__proto__=ge.prototype):(e===null&&(e=new ge(t)),e.length=t),e}function ge(e,t,r){if(!ge.TYPED_ARRAY_SUPPORT&&!(this instanceof ge))return new ge(e,t,r);if(typeof e=="number"){if(typeof t=="string")throw new Error("If encoding is specified then the first argument must be a string");return o4(this,e)}return jR(this,e,t,r)}ge.poolSize=8192;ge._augment=function(e){return e.__proto__=ge.prototype,e};function jR(e,t,r,n){if(typeof t=="number")throw new TypeError('"value" argument must not be a number');return typeof ArrayBuffer<"u"&&t instanceof ArrayBuffer?dj(e,t,r,n):typeof t=="string"?fj(e,t,r):pj(e,t)}ge.from=function(e,t,r){return jR(null,e,t,r)};ge.TYPED_ARRAY_SUPPORT&&(ge.prototype.__proto__=Uint8Array.prototype,ge.__proto__=Uint8Array);function $R(e){if(typeof e!="number")throw new TypeError('"size" argument must be a number');if(e<0)throw new RangeError('"size" argument must not be negative')}function hj(e,t,r,n){return $R(t),t<=0?Ms(e,t):r!==void 0?typeof n=="string"?Ms(e,t).fill(r,n):Ms(e,t).fill(r):Ms(e,t)}ge.alloc=function(e,t,r){return hj(null,e,t,r)};function o4(e,t){if($R(t),e=Ms(e,t<0?0:s4(t)|0),!ge.TYPED_ARRAY_SUPPORT)for(var r=0;r<t;++r)e[r]=0;return e}ge.allocUnsafe=function(e){return o4(null,e)};ge.allocUnsafeSlow=function(e){return o4(null,e)};function fj(e,t,r){if((typeof r!="string"||r==="")&&(r="utf8"),!ge.isEncoding(r))throw new TypeError('"encoding" must be a valid string encoding');var n=HR(t,r)|0;e=Ms(e,n);var i=e.write(t,r);return i!==n&&(e=e.slice(0,i)),e}function qb(e,t){var r=t.length<0?0:s4(t.length)|0;e=Ms(e,r);for(var n=0;n<r;n+=1)e[n]=t[n]&255;return e}function dj(e,t,r,n){if(t.byteLength,r<0||t.byteLength<r)throw new RangeError("'offset' is out of bounds");if(t.byteLength<r+(n||0))throw new RangeError("'length' is out of bounds");return r===void 0&&n===void 0?t=new Uint8Array(t):n===void 0?t=new Uint8Array(t,r):t=new Uint8Array(t,r,n),ge.TYPED_ARRAY_SUPPORT?(e=t,e.__proto__=ge.prototype):e=qb(e,t),e}function pj(e,t){if(rs(t)){var r=s4(t.length)|0;return e=Ms(e,r),e.length===0||t.copy(e,0,0,r),e}if(t){if(typeof ArrayBuffer<"u"&&t.buffer instanceof ArrayBuffer||"length"in t)return typeof t.length!="number"||Oj(t.length)?Ms(e,0):qb(e,t);if(t.type==="Buffer"&&GR(t.data))return qb(e,t.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}function s4(e){if(e>=ag())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+ag().toString(16)+" bytes");return e|0}ge.isBuffer=Lj;function rs(e){return!!(e!=null&&e._isBuffer)}ge.compare=function(t,r){if(!rs(t)||!rs(r))throw new TypeError("Arguments must be Buffers");if(t===r)return 0;for(var n=t.length,i=r.length,o=0,s=Math.min(n,i);o<s;++o)if(t[o]!==r[o]){n=t[o],i=r[o];break}return n<i?-1:i<n?1:0};ge.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}};ge.concat=function(t,r){if(!GR(t))throw new TypeError('"list" argument must be an Array of Buffers');if(t.length===0)return ge.alloc(0);var n;if(r===void 0)for(r=0,n=0;n<t.length;++n)r+=t[n].length;var i=ge.allocUnsafe(r),o=0;for(n=0;n<t.length;++n){var s=t[n];if(!rs(s))throw new TypeError('"list" argument must be an Array of Buffers');s.copy(i,o),o+=s.length}return i};function HR(e,t){if(rs(e))return e.length;if(typeof ArrayBuffer<"u"&&typeof ArrayBuffer.isView=="function"&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer))return e.byteLength;typeof e!="string"&&(e=""+e);var r=e.length;if(r===0)return 0;for(var n=!1;;)switch(t){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":case void 0:return lg(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return r*2;case"hex":return r>>>1;case"base64":return qR(e).length;default:if(n)return lg(e).length;t=(""+t).toLowerCase(),n=!0}}ge.byteLength=HR;function mj(e,t,r){var n=!1;if((t===void 0||t<0)&&(t=0),t>this.length||((r===void 0||r>this.length)&&(r=this.length),r<=0)||(r>>>=0,t>>>=0,r<=t))return"";for(e||(e="utf8");;)switch(e){case"hex":return Ej(this,t,r);case"utf8":case"utf-8":return XR(this,t,r);case"ascii":return Tj(this,t,r);case"latin1":case"binary":return Sj(this,t,r);case"base64":return wj(this,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Cj(this,t,r);default:if(n)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),n=!0}}ge.prototype._isBuffer=!0;function Wl(e,t,r){var n=e[t];e[t]=e[r],e[r]=n}ge.prototype.swap16=function(){var t=this.length;if(t%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var r=0;r<t;r+=2)Wl(this,r,r+1);return this};ge.prototype.swap32=function(){var t=this.length;if(t%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var r=0;r<t;r+=4)Wl(this,r,r+3),Wl(this,r+1,r+2);return this};ge.prototype.swap64=function(){var t=this.length;if(t%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var r=0;r<t;r+=8)Wl(this,r,r+7),Wl(this,r+1,r+6),Wl(this,r+2,r+5),Wl(this,r+3,r+4);return this};ge.prototype.toString=function(){var t=this.length|0;return t===0?"":arguments.length===0?XR(this,0,t):mj.apply(this,arguments)};ge.prototype.equals=function(t){if(!rs(t))throw new TypeError("Argument must be a Buffer");return this===t?!0:ge.compare(this,t)===0};ge.prototype.inspect=function(){var t="",r=cj;return this.length>0&&(t=this.toString("hex",0,r).match(/.{2}/g).join(" "),this.length>r&&(t+=" ... ")),"<Buffer "+t+">"};ge.prototype.compare=function(t,r,n,i,o){if(!rs(t))throw new TypeError("Argument must be a Buffer");if(r===void 0&&(r=0),n===void 0&&(n=t?t.length:0),i===void 0&&(i=0),o===void 0&&(o=this.length),r<0||n>t.length||i<0||o>this.length)throw new RangeError("out of range index");if(i>=o&&r>=n)return 0;if(i>=o)return-1;if(r>=n)return 1;if(r>>>=0,n>>>=0,i>>>=0,o>>>=0,this===t)return 0;for(var s=o-i,a=n-r,l=Math.min(s,a),u=this.slice(i,o),c=t.slice(r,n),f=0;f<l;++f)if(u[f]!==c[f]){s=u[f],a=c[f];break}return s<a?-1:a<s?1:0};function zR(e,t,r,n,i){if(e.length===0)return-1;if(typeof r=="string"?(n=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),r=+r,isNaN(r)&&(r=i?0:e.length-1),r<0&&(r=e.length+r),r>=e.length){if(i)return-1;r=e.length-1}else if(r<0)if(i)r=0;else return-1;if(typeof t=="string"&&(t=ge.from(t,n)),rs(t))return t.length===0?-1:p5(e,t,r,n,i);if(typeof t=="number")return t=t&255,ge.TYPED_ARRAY_SUPPORT&&typeof Uint8Array.prototype.indexOf=="function"?i?Uint8Array.prototype.indexOf.call(e,t,r):Uint8Array.prototype.lastIndexOf.call(e,t,r):p5(e,[t],r,n,i);throw new TypeError("val must be string, number or Buffer")}function p5(e,t,r,n,i){var o=1,s=e.length,a=t.length;if(n!==void 0&&(n=String(n).toLowerCase(),n==="ucs2"||n==="ucs-2"||n==="utf16le"||n==="utf-16le")){if(e.length<2||t.length<2)return-1;o=2,s/=2,a/=2,r/=2}function l(v,g){return o===1?v[g]:v.readUInt16BE(g*o)}var u;if(i){var c=-1;for(u=r;u<s;u++)if(l(e,u)===l(t,c===-1?0:u-c)){if(c===-1&&(c=u),u-c+1===a)return c*o}else c!==-1&&(u-=u-c),c=-1}else for(r+a>s&&(r=s-a),u=r;u>=0;u--){for(var f=!0,p=0;p<a;p++)if(l(e,u+p)!==l(t,p)){f=!1;break}if(f)return u}return-1}ge.prototype.includes=function(t,r,n){return this.indexOf(t,r,n)!==-1};ge.prototype.indexOf=function(t,r,n){return zR(this,t,r,n,!0)};ge.prototype.lastIndexOf=function(t,r,n){return zR(this,t,r,n,!1)};function vj(e,t,r,n){r=Number(r)||0;var i=e.length-r;n?(n=Number(n),n>i&&(n=i)):n=i;var o=t.length;if(o%2!==0)throw new TypeError("Invalid hex string");n>o/2&&(n=o/2);for(var s=0;s<n;++s){var a=parseInt(t.substr(s*2,2),16);if(isNaN(a))return s;e[r+s]=a}return s}function gj(e,t,r,n){return Py(lg(t,e.length-r),e,r,n)}function VR(e,t,r,n){return Py(Rj(t),e,r,n)}function yj(e,t,r,n){return VR(e,t,r,n)}function _j(e,t,r,n){return Py(qR(t),e,r,n)}function bj(e,t,r,n){return Py(kj(t,e.length-r),e,r,n)}ge.prototype.write=function(t,r,n,i){if(r===void 0)i="utf8",n=this.length,r=0;else if(n===void 0&&typeof r=="string")i=r,n=this.length,r=0;else if(isFinite(r))r=r|0,isFinite(n)?(n=n|0,i===void 0&&(i="utf8")):(i=n,n=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var o=this.length-r;if((n===void 0||n>o)&&(n=o),t.length>0&&(n<0||r<0)||r>this.length)throw new RangeError("Attempt to write outside buffer bounds");i||(i="utf8");for(var s=!1;;)switch(i){case"hex":return vj(this,t,r,n);case"utf8":case"utf-8":return gj(this,t,r,n);case"ascii":return VR(this,t,r,n);case"latin1":case"binary":return yj(this,t,r,n);case"base64":return _j(this,t,r,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return bj(this,t,r,n);default:if(s)throw new TypeError("Unknown encoding: "+i);i=(""+i).toLowerCase(),s=!0}};ge.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function wj(e,t,r){return t===0&&r===e.length?d5(e):d5(e.slice(t,r))}function XR(e,t,r){r=Math.min(e.length,r);for(var n=[],i=t;i<r;){var o=e[i],s=null,a=o>239?4:o>223?3:o>191?2:1;if(i+a<=r){var l,u,c,f;switch(a){case 1:o<128&&(s=o);break;case 2:l=e[i+1],(l&192)===128&&(f=(o&31)<<6|l&63,f>127&&(s=f));break;case 3:l=e[i+1],u=e[i+2],(l&192)===128&&(u&192)===128&&(f=(o&15)<<12|(l&63)<<6|u&63,f>2047&&(f<55296||f>57343)&&(s=f));break;case 4:l=e[i+1],u=e[i+2],c=e[i+3],(l&192)===128&&(u&192)===128&&(c&192)===128&&(f=(o&15)<<18|(l&63)<<12|(u&63)<<6|c&63,f>65535&&f<1114112&&(s=f))}}s===null?(s=65533,a=1):s>65535&&(s-=65536,n.push(s>>>10&1023|55296),s=56320|s&1023),n.push(s),i+=a}return xj(n)}var m5=4096;function xj(e){var t=e.length;if(t<=m5)return String.fromCharCode.apply(String,e);for(var r="",n=0;n<t;)r+=String.fromCharCode.apply(String,e.slice(n,n+=m5));return r}function Tj(e,t,r){var n="";r=Math.min(e.length,r);for(var i=t;i<r;++i)n+=String.fromCharCode(e[i]&127);return n}function Sj(e,t,r){var n="";r=Math.min(e.length,r);for(var i=t;i<r;++i)n+=String.fromCharCode(e[i]);return n}function Ej(e,t,r){var n=e.length;(!t||t<0)&&(t=0),(!r||r<0||r>n)&&(r=n);for(var i="",o=t;o<r;++o)i+=Aj(e[o]);return i}function Cj(e,t,r){for(var n=e.slice(t,r),i="",o=0;o<n.length;o+=2)i+=String.fromCharCode(n[o]+n[o+1]*256);return i}ge.prototype.slice=function(t,r){var n=this.length;t=~~t,r=r===void 0?n:~~r,t<0?(t+=n,t<0&&(t=0)):t>n&&(t=n),r<0?(r+=n,r<0&&(r=0)):r>n&&(r=n),r<t&&(r=t);var i;if(ge.TYPED_ARRAY_SUPPORT)i=this.subarray(t,r),i.__proto__=ge.prototype;else{var o=r-t;i=new ge(o,void 0);for(var s=0;s<o;++s)i[s]=this[s+t]}return i};function cn(e,t,r){if(e%1!==0||e<0)throw new RangeError("offset is not uint");if(e+t>r)throw new RangeError("Trying to access beyond buffer length")}ge.prototype.readUIntLE=function(t,r,n){t=t|0,r=r|0,n||cn(t,r,this.length);for(var i=this[t],o=1,s=0;++s<r&&(o*=256);)i+=this[t+s]*o;return i};ge.prototype.readUIntBE=function(t,r,n){t=t|0,r=r|0,n||cn(t,r,this.length);for(var i=this[t+--r],o=1;r>0&&(o*=256);)i+=this[t+--r]*o;return i};ge.prototype.readUInt8=function(t,r){return r||cn(t,1,this.length),this[t]};ge.prototype.readUInt16LE=function(t,r){return r||cn(t,2,this.length),this[t]|this[t+1]<<8};ge.prototype.readUInt16BE=function(t,r){return r||cn(t,2,this.length),this[t]<<8|this[t+1]};ge.prototype.readUInt32LE=function(t,r){return r||cn(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+this[t+3]*16777216};ge.prototype.readUInt32BE=function(t,r){return r||cn(t,4,this.length),this[t]*16777216+(this[t+1]<<16|this[t+2]<<8|this[t+3])};ge.prototype.readIntLE=function(t,r,n){t=t|0,r=r|0,n||cn(t,r,this.length);for(var i=this[t],o=1,s=0;++s<r&&(o*=256);)i+=this[t+s]*o;return o*=128,i>=o&&(i-=Math.pow(2,8*r)),i};ge.prototype.readIntBE=function(t,r,n){t=t|0,r=r|0,n||cn(t,r,this.length);for(var i=r,o=1,s=this[t+--i];i>0&&(o*=256);)s+=this[t+--i]*o;return o*=128,s>=o&&(s-=Math.pow(2,8*r)),s};ge.prototype.readInt8=function(t,r){return r||cn(t,1,this.length),this[t]&128?(255-this[t]+1)*-1:this[t]};ge.prototype.readInt16LE=function(t,r){r||cn(t,2,this.length);var n=this[t]|this[t+1]<<8;return n&32768?n|4294901760:n};ge.prototype.readInt16BE=function(t,r){r||cn(t,2,this.length);var n=this[t+1]|this[t]<<8;return n&32768?n|4294901760:n};ge.prototype.readInt32LE=function(t,r){return r||cn(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24};ge.prototype.readInt32BE=function(t,r){return r||cn(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]};ge.prototype.readFloatLE=function(t,r){return r||cn(t,4,this.length),Cy(this,t,!0,23,4)};ge.prototype.readFloatBE=function(t,r){return r||cn(t,4,this.length),Cy(this,t,!1,23,4)};ge.prototype.readDoubleLE=function(t,r){return r||cn(t,8,this.length),Cy(this,t,!0,52,8)};ge.prototype.readDoubleBE=function(t,r){return r||cn(t,8,this.length),Cy(this,t,!1,52,8)};function fi(e,t,r,n,i,o){if(!rs(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>i||t<o)throw new RangeError('"value" argument is out of bounds');if(r+n>e.length)throw new RangeError("Index out of range")}ge.prototype.writeUIntLE=function(t,r,n,i){if(t=+t,r=r|0,n=n|0,!i){var o=Math.pow(2,8*n)-1;fi(this,t,r,n,o,0)}var s=1,a=0;for(this[r]=t&255;++a<n&&(s*=256);)this[r+a]=t/s&255;return r+n};ge.prototype.writeUIntBE=function(t,r,n,i){if(t=+t,r=r|0,n=n|0,!i){var o=Math.pow(2,8*n)-1;fi(this,t,r,n,o,0)}var s=n-1,a=1;for(this[r+s]=t&255;--s>=0&&(a*=256);)this[r+s]=t/a&255;return r+n};ge.prototype.writeUInt8=function(t,r,n){return t=+t,r=r|0,n||fi(this,t,r,1,255,0),ge.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),this[r]=t&255,r+1};function Iy(e,t,r,n){t<0&&(t=65535+t+1);for(var i=0,o=Math.min(e.length-r,2);i<o;++i)e[r+i]=(t&255<<8*(n?i:1-i))>>>(n?i:1-i)*8}ge.prototype.writeUInt16LE=function(t,r,n){return t=+t,r=r|0,n||fi(this,t,r,2,65535,0),ge.TYPED_ARRAY_SUPPORT?(this[r]=t&255,this[r+1]=t>>>8):Iy(this,t,r,!0),r+2};ge.prototype.writeUInt16BE=function(t,r,n){return t=+t,r=r|0,n||fi(this,t,r,2,65535,0),ge.TYPED_ARRAY_SUPPORT?(this[r]=t>>>8,this[r+1]=t&255):Iy(this,t,r,!1),r+2};function Ny(e,t,r,n){t<0&&(t=4294967295+t+1);for(var i=0,o=Math.min(e.length-r,4);i<o;++i)e[r+i]=t>>>(n?i:3-i)*8&255}ge.prototype.writeUInt32LE=function(t,r,n){return t=+t,r=r|0,n||fi(this,t,r,4,4294967295,0),ge.TYPED_ARRAY_SUPPORT?(this[r+3]=t>>>24,this[r+2]=t>>>16,this[r+1]=t>>>8,this[r]=t&255):Ny(this,t,r,!0),r+4};ge.prototype.writeUInt32BE=function(t,r,n){return t=+t,r=r|0,n||fi(this,t,r,4,4294967295,0),ge.TYPED_ARRAY_SUPPORT?(this[r]=t>>>24,this[r+1]=t>>>16,this[r+2]=t>>>8,this[r+3]=t&255):Ny(this,t,r,!1),r+4};ge.prototype.writeIntLE=function(t,r,n,i){if(t=+t,r=r|0,!i){var o=Math.pow(2,8*n-1);fi(this,t,r,n,o-1,-o)}var s=0,a=1,l=0;for(this[r]=t&255;++s<n&&(a*=256);)t<0&&l===0&&this[r+s-1]!==0&&(l=1),this[r+s]=(t/a>>0)-l&255;return r+n};ge.prototype.writeIntBE=function(t,r,n,i){if(t=+t,r=r|0,!i){var o=Math.pow(2,8*n-1);fi(this,t,r,n,o-1,-o)}var s=n-1,a=1,l=0;for(this[r+s]=t&255;--s>=0&&(a*=256);)t<0&&l===0&&this[r+s+1]!==0&&(l=1),this[r+s]=(t/a>>0)-l&255;return r+n};ge.prototype.writeInt8=function(t,r,n){return t=+t,r=r|0,n||fi(this,t,r,1,127,-128),ge.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),t<0&&(t=255+t+1),this[r]=t&255,r+1};ge.prototype.writeInt16LE=function(t,r,n){return t=+t,r=r|0,n||fi(this,t,r,2,32767,-32768),ge.TYPED_ARRAY_SUPPORT?(this[r]=t&255,this[r+1]=t>>>8):Iy(this,t,r,!0),r+2};ge.prototype.writeInt16BE=function(t,r,n){return t=+t,r=r|0,n||fi(this,t,r,2,32767,-32768),ge.TYPED_ARRAY_SUPPORT?(this[r]=t>>>8,this[r+1]=t&255):Iy(this,t,r,!1),r+2};ge.prototype.writeInt32LE=function(t,r,n){return t=+t,r=r|0,n||fi(this,t,r,4,2147483647,-2147483648),ge.TYPED_ARRAY_SUPPORT?(this[r]=t&255,this[r+1]=t>>>8,this[r+2]=t>>>16,this[r+3]=t>>>24):Ny(this,t,r,!0),r+4};ge.prototype.writeInt32BE=function(t,r,n){return t=+t,r=r|0,n||fi(this,t,r,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),ge.TYPED_ARRAY_SUPPORT?(this[r]=t>>>24,this[r+1]=t>>>16,this[r+2]=t>>>8,this[r+3]=t&255):Ny(this,t,r,!1),r+4};function WR(e,t,r,n,i,o){if(r+n>e.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function YR(e,t,r,n,i){return i||WR(e,t,r,4),DR(e,t,r,n,23,4),r+4}ge.prototype.writeFloatLE=function(t,r,n){return YR(this,t,r,!0,n)};ge.prototype.writeFloatBE=function(t,r,n){return YR(this,t,r,!1,n)};function KR(e,t,r,n,i){return i||WR(e,t,r,8),DR(e,t,r,n,52,8),r+8}ge.prototype.writeDoubleLE=function(t,r,n){return KR(this,t,r,!0,n)};ge.prototype.writeDoubleBE=function(t,r,n){return KR(this,t,r,!1,n)};ge.prototype.copy=function(t,r,n,i){if(n||(n=0),!i&&i!==0&&(i=this.length),r>=t.length&&(r=t.length),r||(r=0),i>0&&i<n&&(i=n),i===n||t.length===0||this.length===0)return 0;if(r<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(i<0)throw new RangeError("sourceEnd out of bounds");i>this.length&&(i=this.length),t.length-r<i-n&&(i=t.length-r+n);var o=i-n,s;if(this===t&&n<r&&r<i)for(s=o-1;s>=0;--s)t[s+r]=this[s+n];else if(o<1e3||!ge.TYPED_ARRAY_SUPPORT)for(s=0;s<o;++s)t[s+r]=this[s+n];else Uint8Array.prototype.set.call(t,this.subarray(n,n+o),r);return o};ge.prototype.fill=function(t,r,n,i){if(typeof t=="string"){if(typeof r=="string"?(i=r,r=0,n=this.length):typeof n=="string"&&(i=n,n=this.length),t.length===1){var o=t.charCodeAt(0);o<256&&(t=o)}if(i!==void 0&&typeof i!="string")throw new TypeError("encoding must be a string");if(typeof i=="string"&&!ge.isEncoding(i))throw new TypeError("Unknown encoding: "+i)}else typeof t=="number"&&(t=t&255);if(r<0||this.length<r||this.length<n)throw new RangeError("Out of range index");if(n<=r)return this;r=r>>>0,n=n===void 0?this.length:n>>>0,t||(t=0);var s;if(typeof t=="number")for(s=r;s<n;++s)this[s]=t;else{var a=rs(t)?t:lg(new ge(t,i).toString()),l=a.length;for(s=0;s<n-r;++s)this[s+r]=a[s%l]}return this};var Ij=/[^+\/0-9A-Za-z-_]/g;function Nj(e){if(e=Pj(e).replace(Ij,""),e.length<2)return"";for(;e.length%4!==0;)e=e+"=";return e}function Pj(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}function Aj(e){return e<16?"0"+e.toString(16):e.toString(16)}function lg(e,t){t=t||1/0;for(var r,n=e.length,i=null,o=[],s=0;s<n;++s){if(r=e.charCodeAt(s),r>55295&&r<57344){if(!i){if(r>56319){(t-=3)>-1&&o.push(239,191,189);continue}else if(s+1===n){(t-=3)>-1&&o.push(239,191,189);continue}i=r;continue}if(r<56320){(t-=3)>-1&&o.push(239,191,189),i=r;continue}r=(i-55296<<10|r-56320)+65536}else i&&(t-=3)>-1&&o.push(239,191,189);if(i=null,r<128){if((t-=1)<0)break;o.push(r)}else if(r<2048){if((t-=2)<0)break;o.push(r>>6|192,r&63|128)}else if(r<65536){if((t-=3)<0)break;o.push(r>>12|224,r>>6&63|128,r&63|128)}else if(r<1114112){if((t-=4)<0)break;o.push(r>>18|240,r>>12&63|128,r>>6&63|128,r&63|128)}else throw new Error("Invalid code point")}return o}function Rj(e){for(var t=[],r=0;r<e.length;++r)t.push(e.charCodeAt(r)&255);return t}function kj(e,t){for(var r,n,i,o=[],s=0;s<e.length&&!((t-=2)<0);++s)r=e.charCodeAt(s),n=r>>8,i=r%256,o.push(i),o.push(n);return o}function qR(e){return sj(Nj(e))}function Py(e,t,r,n){for(var i=0;i<n&&!(i+r>=t.length||i>=e.length);++i)t[i+r]=e[i];return i}function Oj(e){return e!==e}function Lj(e){return e!=null&&(!!e._isBuffer||ZR(e)||Uj(e))}function ZR(e){return!!e.constructor&&typeof e.constructor.isBuffer=="function"&&e.constructor.isBuffer(e)}function Uj(e){return typeof e.readFloatLE=="function"&&typeof e.slice=="function"&&ZR(e.slice(0,0))}var JR={exports:{}};(function(e){var t=function(){function r(p,v){return v!=null&&p instanceof v}var n;try{n=Map}catch{n=function(){}}var i;try{i=Set}catch{i=function(){}}var o;try{o=Promise}catch{o=function(){}}function s(p,v,g,b,_){typeof v=="object"&&(g=v.depth,b=v.prototype,_=v.includeNonEnumerable,v=v.circular);var w=[],x=[],T=typeof ge<"u";typeof v>"u"&&(v=!0),typeof g>"u"&&(g=1/0);function I(R,E){if(R===null)return null;if(E===0)return R;var O,P;if(typeof R!="object")return R;if(r(R,n))O=new n;else if(r(R,i))O=new i;else if(r(R,o))O=new o(function(me,ue){R.then(function(ie){me(I(ie,E-1))},function(ie){ue(I(ie,E-1))})});else if(s.__isArray(R))O=[];else if(s.__isRegExp(R))O=new RegExp(R.source,f(R)),R.lastIndex&&(O.lastIndex=R.lastIndex);else if(s.__isDate(R))O=new Date(R.getTime());else{if(T&&ge.isBuffer(R))return ge.allocUnsafe?O=ge.allocUnsafe(R.length):O=new ge(R.length),R.copy(O),O;r(R,Error)?O=Object.create(R):typeof b>"u"?(P=Object.getPrototypeOf(R),O=Object.create(P)):(O=Object.create(b),P=b)}if(v){var N=w.indexOf(R);if(N!=-1)return x[N];w.push(R),x.push(O)}r(R,n)&&R.forEach(function(me,ue){var ie=I(ue,E-1),Q=I(me,E-1);O.set(ie,Q)}),r(R,i)&&R.forEach(function(me){var ue=I(me,E-1);O.add(ue)});for(var A in R){var j;P&&(j=Object.getOwnPropertyDescriptor(P,A)),!(j&&j.set==null)&&(O[A]=I(R[A],E-1))}if(Object.getOwnPropertySymbols)for(var X=Object.getOwnPropertySymbols(R),A=0;A<X.length;A++){var B=X[A],ae=Object.getOwnPropertyDescriptor(R,B);ae&&!ae.enumerable&&!_||(O[B]=I(R[B],E-1),ae.enumerable||Object.defineProperty(O,B,{enumerable:!1}))}if(_)for(var Y=Object.getOwnPropertyNames(R),A=0;A<Y.length;A++){var K=Y[A],ae=Object.getOwnPropertyDescriptor(R,K);ae&&ae.enumerable||(O[K]=I(R[K],E-1),Object.defineProperty(O,K,{enumerable:!1}))}return O}return I(p,g)}s.clonePrototype=function(v){if(v===null)return null;var g=function(){};return g.prototype=v,new g};function a(p){return Object.prototype.toString.call(p)}s.__objToStr=a;function l(p){return typeof p=="object"&&a(p)==="[object Date]"}s.__isDate=l;function u(p){return typeof p=="object"&&a(p)==="[object Array]"}s.__isArray=u;function c(p){return typeof p=="object"&&a(p)==="[object RegExp]"}s.__isRegExp=c;function f(p){var v="";return p.global&&(v+="g"),p.ignoreCase&&(v+="i"),p.multiline&&(v+="m"),v}return s.__getRegExpFlags=f,s}();e.exports&&(e.exports=t)})(JR);function Jm(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var QR={exports:{}};(function(e,t){(function(r){e.exports=r()})(function(){return function r(n,i,o){function s(u,c){if(!i[u]){if(!n[u]){var f=typeof Jm=="function"&&Jm;if(!c&&f)return f(u,!0);if(a)return a(u,!0);throw new Error("Cannot find module '"+u+"'")}var p=i[u]={exports:{}};n[u][0].call(p.exports,function(v){var g=n[u][1][v];return s(g||v)},p,p.exports,r,n,i,o)}return i[u].exports}for(var a=typeof Jm=="function"&&Jm,l=0;l<o.length;l++)s(o[l]);return s}({1:[function(r,n,i){(function(o,s,a,l,u,c,f,p,v){var g=r("crypto");function b(E,O){return function(P,N){var A;if(A=N.algorithm!=="passthrough"?g.createHash(N.algorithm):new R,A.write===void 0&&(A.write=A.update,A.end=A.update),I(N,A).dispatch(P),A.update||A.end(""),A.digest)return A.digest(N.encoding==="buffer"?void 0:N.encoding);var j=A.read();return N.encoding!=="buffer"?j.toString(N.encoding):j}(E,O=x(E,O))}(i=n.exports=b).sha1=function(E){return b(E)},i.keys=function(E){return b(E,{excludeValues:!0,algorithm:"sha1",encoding:"hex"})},i.MD5=function(E){return b(E,{algorithm:"md5",encoding:"hex"})},i.keysMD5=function(E){return b(E,{algorithm:"md5",encoding:"hex",excludeValues:!0})};var _=g.getHashes?g.getHashes().slice():["sha1","md5"];_.push("passthrough");var w=["buffer","hex","binary","base64"];function x(E,O){O=O||{};var P={};if(P.algorithm=O.algorithm||"sha1",P.encoding=O.encoding||"hex",P.excludeValues=!!O.excludeValues,P.algorithm=P.algorithm.toLowerCase(),P.encoding=P.encoding.toLowerCase(),P.ignoreUnknown=O.ignoreUnknown===!0,P.respectType=O.respectType!==!1,P.respectFunctionNames=O.respectFunctionNames!==!1,P.respectFunctionProperties=O.respectFunctionProperties!==!1,P.unorderedArrays=O.unorderedArrays===!0,P.unorderedSets=O.unorderedSets!==!1,P.unorderedObjects=O.unorderedObjects!==!1,P.replacer=O.replacer||void 0,P.excludeKeys=O.excludeKeys||void 0,E===void 0)throw new Error("Object argument required.");for(var N=0;N<_.length;++N)_[N].toLowerCase()===P.algorithm.toLowerCase()&&(P.algorithm=_[N]);if(_.indexOf(P.algorithm)===-1)throw new Error('Algorithm "'+P.algorithm+'"  not supported. supported values: '+_.join(", "));if(w.indexOf(P.encoding)===-1&&P.algorithm!=="passthrough")throw new Error('Encoding "'+P.encoding+'"  not supported. supported values: '+w.join(", "));return P}function T(E){if(typeof E=="function")return/^function\s+\w*\s*\(\s*\)\s*{\s+\[native code\]\s+}$/i.exec(Function.prototype.toString.call(E))!=null}function I(E,O,P){P=P||[];function N(A){return O.update?O.update(A,"utf8"):O.write(A,"utf8")}return{dispatch:function(A){return E.replacer&&(A=E.replacer(A)),this["_"+(A===null?"null":typeof A)](A)},_object:function(A){var j=Object.prototype.toString.call(A),X=/\[object (.*)\]/i.exec(j);X=(X=X?X[1]:"unknown:["+j+"]").toLowerCase();var B;if(0<=(B=P.indexOf(A)))return this.dispatch("[CIRCULAR:"+B+"]");if(P.push(A),a!==void 0&&a.isBuffer&&a.isBuffer(A))return N("buffer:"),N(A);if(X==="object"||X==="function"||X==="asyncfunction"){var ae=Object.keys(A);E.unorderedObjects&&(ae=ae.sort()),E.respectType===!1||T(A)||ae.splice(0,0,"prototype","__proto__","constructor"),E.excludeKeys&&(ae=ae.filter(function(K){return!E.excludeKeys(K)})),N("object:"+ae.length+":");var Y=this;return ae.forEach(function(K){Y.dispatch(K),N(":"),E.excludeValues||Y.dispatch(A[K]),N(",")})}if(!this["_"+X]){if(E.ignoreUnknown)return N("["+X+"]");throw new Error('Unknown object type "'+X+'"')}this["_"+X](A)},_array:function(A,j){j=j!==void 0?j:E.unorderedArrays!==!1;var X=this;if(N("array:"+A.length+":"),!j||A.length<=1)return A.forEach(function(Y){return X.dispatch(Y)});var B=[],ae=A.map(function(Y){var K=new R,me=P.slice();return I(E,K,me).dispatch(Y),B=B.concat(me.slice(P.length)),K.read().toString()});return P=P.concat(B),ae.sort(),this._array(ae,!1)},_date:function(A){return N("date:"+A.toJSON())},_symbol:function(A){return N("symbol:"+A.toString())},_error:function(A){return N("error:"+A.toString())},_boolean:function(A){return N("bool:"+A.toString())},_string:function(A){N("string:"+A.length+":"),N(A.toString())},_function:function(A){N("fn:"),T(A)?this.dispatch("[native]"):this.dispatch(A.toString()),E.respectFunctionNames!==!1&&this.dispatch("function-name:"+String(A.name)),E.respectFunctionProperties&&this._object(A)},_number:function(A){return N("number:"+A.toString())},_xml:function(A){return N("xml:"+A.toString())},_null:function(){return N("Null")},_undefined:function(){return N("Undefined")},_regexp:function(A){return N("regex:"+A.toString())},_uint8array:function(A){return N("uint8array:"),this.dispatch(Array.prototype.slice.call(A))},_uint8clampedarray:function(A){return N("uint8clampedarray:"),this.dispatch(Array.prototype.slice.call(A))},_int8array:function(A){return N("uint8array:"),this.dispatch(Array.prototype.slice.call(A))},_uint16array:function(A){return N("uint16array:"),this.dispatch(Array.prototype.slice.call(A))},_int16array:function(A){return N("uint16array:"),this.dispatch(Array.prototype.slice.call(A))},_uint32array:function(A){return N("uint32array:"),this.dispatch(Array.prototype.slice.call(A))},_int32array:function(A){return N("uint32array:"),this.dispatch(Array.prototype.slice.call(A))},_float32array:function(A){return N("float32array:"),this.dispatch(Array.prototype.slice.call(A))},_float64array:function(A){return N("float64array:"),this.dispatch(Array.prototype.slice.call(A))},_arraybuffer:function(A){return N("arraybuffer:"),this.dispatch(new Uint8Array(A))},_url:function(A){return N("url:"+A.toString())},_map:function(A){N("map:");var j=Array.from(A);return this._array(j,E.unorderedSets!==!1)},_set:function(A){N("set:");var j=Array.from(A);return this._array(j,E.unorderedSets!==!1)},_file:function(A){return N("file:"),this.dispatch([A.name,A.size,A.type,A.lastModfied])},_blob:function(){if(E.ignoreUnknown)return N("[blob]");throw Error(`Hashing Blob objects is currently not supported
(see https://github.com/puleos/object-hash/issues/26)
Use "options.replacer" or "options.ignoreUnknown"
`)},_domwindow:function(){return N("domwindow")},_bigint:function(A){return N("bigint:"+A.toString())},_process:function(){return N("process")},_timer:function(){return N("timer")},_pipe:function(){return N("pipe")},_tcp:function(){return N("tcp")},_udp:function(){return N("udp")},_tty:function(){return N("tty")},_statwatcher:function(){return N("statwatcher")},_securecontext:function(){return N("securecontext")},_connection:function(){return N("connection")},_zlib:function(){return N("zlib")},_context:function(){return N("context")},_nodescript:function(){return N("nodescript")},_httpparser:function(){return N("httpparser")},_dataview:function(){return N("dataview")},_signal:function(){return N("signal")},_fsevent:function(){return N("fsevent")},_tlswrap:function(){return N("tlswrap")}}}function R(){return{buf:"",write:function(E){this.buf+=E},end:function(E){this.buf+=E},read:function(){return this.buf}}}i.writeToStream=function(E,O,P){return P===void 0&&(P=O,O={}),I(O=x(E,O),P).dispatch(E)}}).call(this,r("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},r("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/fake_7eac155c.js","/")},{buffer:3,crypto:5,lYpoI2:10}],2:[function(r,n,i){(function(o,s,a,l,u,c,f,p,v){(function(g){var b=typeof Uint8Array<"u"?Uint8Array:Array,_="+".charCodeAt(0),w="/".charCodeAt(0),x="0".charCodeAt(0),T="a".charCodeAt(0),I="A".charCodeAt(0),R="-".charCodeAt(0),E="_".charCodeAt(0);function O(P){var N=P.charCodeAt(0);return N===_||N===R?62:N===w||N===E?63:N<x?-1:N<x+10?N-x+26+26:N<I+26?N-I:N<T+26?N-T+26:void 0}g.toByteArray=function(P){var N,A;if(0<P.length%4)throw new Error("Invalid string. Length must be a multiple of 4");var j=P.length,X=P.charAt(j-2)==="="?2:P.charAt(j-1)==="="?1:0,B=new b(3*P.length/4-X),ae=0<X?P.length-4:P.length,Y=0;function K(me){B[Y++]=me}for(N=0;N<ae;N+=4,0)K((16711680&(A=O(P.charAt(N))<<18|O(P.charAt(N+1))<<12|O(P.charAt(N+2))<<6|O(P.charAt(N+3))))>>16),K((65280&A)>>8),K(255&A);return X==2?K(255&(A=O(P.charAt(N))<<2|O(P.charAt(N+1))>>4)):X==1&&(K((A=O(P.charAt(N))<<10|O(P.charAt(N+1))<<4|O(P.charAt(N+2))>>2)>>8&255),K(255&A)),B},g.fromByteArray=function(P){var N,A,j,X,B=P.length%3,ae="";function Y(K){return"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(K)}for(N=0,j=P.length-B;N<j;N+=3)A=(P[N]<<16)+(P[N+1]<<8)+P[N+2],ae+=Y((X=A)>>18&63)+Y(X>>12&63)+Y(X>>6&63)+Y(63&X);switch(B){case 1:ae+=Y((A=P[P.length-1])>>2),ae+=Y(A<<4&63),ae+="==";break;case 2:ae+=Y((A=(P[P.length-2]<<8)+P[P.length-1])>>10),ae+=Y(A>>4&63),ae+=Y(A<<2&63),ae+="="}return ae}})(i===void 0?this.base64js={}:i)}).call(this,r("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},r("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/base64-js/lib/b64.js","/node_modules/gulp-browserify/node_modules/base64-js/lib")},{buffer:3,lYpoI2:10}],3:[function(r,n,i){(function(o,s,_,l,u,c,f,p,v){var g=r("base64-js"),b=r("ieee754");function _(F,$,q){if(!(this instanceof _))return new _(F,$,q);var pe,le,Ee,Pe,Oe,it=typeof F;if($==="base64"&&it=="string")for(F=(pe=F).trim?pe.trim():pe.replace(/^\s+|\s+$/g,"");F.length%4!=0;)F+="=";if(it=="number")le=ue(F);else if(it=="string")le=_.byteLength(F,$);else{if(it!="object")throw new Error("First argument needs to be a number, array or string.");le=ue(F.length)}if(_._useTypedArrays?Ee=_._augment(new Uint8Array(le)):((Ee=this).length=le,Ee._isBuffer=!0),_._useTypedArrays&&typeof F.byteLength=="number")Ee._set(F);else if(ie(Oe=F)||_.isBuffer(Oe)||Oe&&typeof Oe=="object"&&typeof Oe.length=="number")for(Pe=0;Pe<le;Pe++)_.isBuffer(F)?Ee[Pe]=F.readUInt8(Pe):Ee[Pe]=F[Pe];else if(it=="string")Ee.write(F,0,$);else if(it=="number"&&!_._useTypedArrays&&!q)for(Pe=0;Pe<le;Pe++)Ee[Pe]=0;return Ee}function w(F,$,q,pe){return _._charsWritten=te(function(le){for(var Ee=[],Pe=0;Pe<le.length;Pe++)Ee.push(255&le.charCodeAt(Pe));return Ee}($),F,q,pe)}function x(F,$,q,pe){return _._charsWritten=te(function(le){for(var Ee,Pe,Oe,it=[],Et=0;Et<le.length;Et++)Ee=le.charCodeAt(Et),Pe=Ee>>8,Oe=Ee%256,it.push(Oe),it.push(Pe);return it}($),F,q,pe)}function T(F,$,q){var pe="";q=Math.min(F.length,q);for(var le=$;le<q;le++)pe+=String.fromCharCode(F[le]);return pe}function I(F,$,q,pe){pe||(de(typeof q=="boolean","missing or invalid endian"),de($!=null,"missing offset"),de($+1<F.length,"Trying to read beyond buffer length"));var le,Ee=F.length;if(!(Ee<=$))return q?(le=F[$],$+1<Ee&&(le|=F[$+1]<<8)):(le=F[$]<<8,$+1<Ee&&(le|=F[$+1])),le}function R(F,$,q,pe){pe||(de(typeof q=="boolean","missing or invalid endian"),de($!=null,"missing offset"),de($+3<F.length,"Trying to read beyond buffer length"));var le,Ee=F.length;if(!(Ee<=$))return q?($+2<Ee&&(le=F[$+2]<<16),$+1<Ee&&(le|=F[$+1]<<8),le|=F[$],$+3<Ee&&(le+=F[$+3]<<24>>>0)):($+1<Ee&&(le=F[$+1]<<16),$+2<Ee&&(le|=F[$+2]<<8),$+3<Ee&&(le|=F[$+3]),le+=F[$]<<24>>>0),le}function E(F,$,q,pe){if(pe||(de(typeof q=="boolean","missing or invalid endian"),de($!=null,"missing offset"),de($+1<F.length,"Trying to read beyond buffer length")),!(F.length<=$)){var le=I(F,$,q,!0);return 32768&le?-1*(65535-le+1):le}}function O(F,$,q,pe){if(pe||(de(typeof q=="boolean","missing or invalid endian"),de($!=null,"missing offset"),de($+3<F.length,"Trying to read beyond buffer length")),!(F.length<=$)){var le=R(F,$,q,!0);return 2147483648&le?-1*(4294967295-le+1):le}}function P(F,$,q,pe){return pe||(de(typeof q=="boolean","missing or invalid endian"),de($+3<F.length,"Trying to read beyond buffer length")),b.read(F,$,q,23,4)}function N(F,$,q,pe){return pe||(de(typeof q=="boolean","missing or invalid endian"),de($+7<F.length,"Trying to read beyond buffer length")),b.read(F,$,q,52,8)}function A(F,$,q,pe,le){le||(de($!=null,"missing value"),de(typeof pe=="boolean","missing or invalid endian"),de(q!=null,"missing offset"),de(q+1<F.length,"trying to write beyond buffer length"),Ce($,65535));var Ee=F.length;if(!(Ee<=q))for(var Pe=0,Oe=Math.min(Ee-q,2);Pe<Oe;Pe++)F[q+Pe]=($&255<<8*(pe?Pe:1-Pe))>>>8*(pe?Pe:1-Pe)}function j(F,$,q,pe,le){le||(de($!=null,"missing value"),de(typeof pe=="boolean","missing or invalid endian"),de(q!=null,"missing offset"),de(q+3<F.length,"trying to write beyond buffer length"),Ce($,4294967295));var Ee=F.length;if(!(Ee<=q))for(var Pe=0,Oe=Math.min(Ee-q,4);Pe<Oe;Pe++)F[q+Pe]=$>>>8*(pe?Pe:3-Pe)&255}function X(F,$,q,pe,le){le||(de($!=null,"missing value"),de(typeof pe=="boolean","missing or invalid endian"),de(q!=null,"missing offset"),de(q+1<F.length,"Trying to write beyond buffer length"),Ie($,32767,-32768)),F.length<=q||A(F,0<=$?$:65535+$+1,q,pe,le)}function B(F,$,q,pe,le){le||(de($!=null,"missing value"),de(typeof pe=="boolean","missing or invalid endian"),de(q!=null,"missing offset"),de(q+3<F.length,"Trying to write beyond buffer length"),Ie($,2147483647,-2147483648)),F.length<=q||j(F,0<=$?$:4294967295+$+1,q,pe,le)}function ae(F,$,q,pe,le){le||(de($!=null,"missing value"),de(typeof pe=="boolean","missing or invalid endian"),de(q!=null,"missing offset"),de(q+3<F.length,"Trying to write beyond buffer length"),Ye($,34028234663852886e22,-34028234663852886e22)),F.length<=q||b.write(F,$,q,pe,23,4)}function Y(F,$,q,pe,le){le||(de($!=null,"missing value"),de(typeof pe=="boolean","missing or invalid endian"),de(q!=null,"missing offset"),de(q+7<F.length,"Trying to write beyond buffer length"),Ye($,17976931348623157e292,-17976931348623157e292)),F.length<=q||b.write(F,$,q,pe,52,8)}i.Buffer=_,i.SlowBuffer=_,i.INSPECT_MAX_BYTES=50,_.poolSize=8192,_._useTypedArrays=function(){try{var F=new ArrayBuffer(0),$=new Uint8Array(F);return $.foo=function(){return 42},$.foo()===42&&typeof $.subarray=="function"}catch{return!1}}(),_.isEncoding=function(F){switch(String(F).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"raw":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},_.isBuffer=function(F){return!(F==null||!F._isBuffer)},_.byteLength=function(F,$){var q;switch(F+="",$||"utf8"){case"hex":q=F.length/2;break;case"utf8":case"utf-8":q=ee(F).length;break;case"ascii":case"binary":case"raw":q=F.length;break;case"base64":q=W(F).length;break;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":q=2*F.length;break;default:throw new Error("Unknown encoding")}return q},_.concat=function(F,$){if(de(ie(F),`Usage: Buffer.concat(list, [totalLength])
list should be an Array.`),F.length===0)return new _(0);if(F.length===1)return F[0];if(typeof $!="number")for(le=$=0;le<F.length;le++)$+=F[le].length;for(var q=new _($),pe=0,le=0;le<F.length;le++){var Ee=F[le];Ee.copy(q,pe),pe+=Ee.length}return q},_.prototype.write=function(F,$,q,pe){var le;isFinite($)?isFinite(q)||(pe=q,q=void 0):(le=pe,pe=$,$=q,q=le),$=Number($)||0;var Ee,Pe,Oe,it,Et,Ot,Yt,Kt,xt,Gr=this.length-$;switch((!q||Gr<(q=Number(q)))&&(q=Gr),pe=String(pe||"utf8").toLowerCase()){case"hex":Ee=function(L,H,Z,_e){Z=Number(Z)||0;var Ve=L.length-Z;(!_e||Ve<(_e=Number(_e)))&&(_e=Ve);var ht=H.length;de(ht%2==0,"Invalid hex string"),ht/2<_e&&(_e=ht/2);for(var D=0;D<_e;D++){var V=parseInt(H.substr(2*D,2),16);de(!isNaN(V),"Invalid hex string"),L[Z+D]=V}return _._charsWritten=2*D,D}(this,F,$,q);break;case"utf8":case"utf-8":Ot=this,Yt=F,Kt=$,xt=q,Ee=_._charsWritten=te(ee(Yt),Ot,Kt,xt);break;case"ascii":case"binary":Ee=w(this,F,$,q);break;case"base64":Pe=this,Oe=F,it=$,Et=q,Ee=_._charsWritten=te(W(Oe),Pe,it,Et);break;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":Ee=x(this,F,$,q);break;default:throw new Error("Unknown encoding")}return Ee},_.prototype.toString=function(F,$,q){var pe,le,Ee,Pe,Oe=this;if(F=String(F||"utf8").toLowerCase(),$=Number($)||0,(q=q!==void 0?Number(q):q=Oe.length)===$)return"";switch(F){case"hex":pe=function(it,Et,Ot){var Yt=it.length;(!Et||Et<0)&&(Et=0),(!Ot||Ot<0||Yt<Ot)&&(Ot=Yt);for(var Kt="",xt=Et;xt<Ot;xt++)Kt+=Q(it[xt]);return Kt}(Oe,$,q);break;case"utf8":case"utf-8":pe=function(it,Et,Ot){var Yt="",Kt="";Ot=Math.min(it.length,Ot);for(var xt=Et;xt<Ot;xt++)it[xt]<=127?(Yt+=ye(Kt)+String.fromCharCode(it[xt]),Kt=""):Kt+="%"+it[xt].toString(16);return Yt+ye(Kt)}(Oe,$,q);break;case"ascii":case"binary":pe=T(Oe,$,q);break;case"base64":le=Oe,Pe=q,pe=(Ee=$)===0&&Pe===le.length?g.fromByteArray(le):g.fromByteArray(le.slice(Ee,Pe));break;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":pe=function(it,Et,Ot){for(var Yt=it.slice(Et,Ot),Kt="",xt=0;xt<Yt.length;xt+=2)Kt+=String.fromCharCode(Yt[xt]+256*Yt[xt+1]);return Kt}(Oe,$,q);break;default:throw new Error("Unknown encoding")}return pe},_.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}},_.prototype.copy=function(F,$,q,pe){if(q=q||0,pe||pe===0||(pe=this.length),$=$||0,pe!==q&&F.length!==0&&this.length!==0){de(q<=pe,"sourceEnd < sourceStart"),de(0<=$&&$<F.length,"targetStart out of bounds"),de(0<=q&&q<this.length,"sourceStart out of bounds"),de(0<=pe&&pe<=this.length,"sourceEnd out of bounds"),pe>this.length&&(pe=this.length),F.length-$<pe-q&&(pe=F.length-$+q);var le=pe-q;if(le<100||!_._useTypedArrays)for(var Ee=0;Ee<le;Ee++)F[Ee+$]=this[Ee+q];else F._set(this.subarray(q,q+le),$)}},_.prototype.slice=function(F,$){var q=this.length;if(F=me(F,q,0),$=me($,q,q),_._useTypedArrays)return _._augment(this.subarray(F,$));for(var pe=$-F,le=new _(pe,void 0,!0),Ee=0;Ee<pe;Ee++)le[Ee]=this[Ee+F];return le},_.prototype.get=function(F){return console.log(".get() is deprecated. Access using array indexes instead."),this.readUInt8(F)},_.prototype.set=function(F,$){return console.log(".set() is deprecated. Access using array indexes instead."),this.writeUInt8(F,$)},_.prototype.readUInt8=function(F,$){if($||(de(F!=null,"missing offset"),de(F<this.length,"Trying to read beyond buffer length")),!(F>=this.length))return this[F]},_.prototype.readUInt16LE=function(F,$){return I(this,F,!0,$)},_.prototype.readUInt16BE=function(F,$){return I(this,F,!1,$)},_.prototype.readUInt32LE=function(F,$){return R(this,F,!0,$)},_.prototype.readUInt32BE=function(F,$){return R(this,F,!1,$)},_.prototype.readInt8=function(F,$){if($||(de(F!=null,"missing offset"),de(F<this.length,"Trying to read beyond buffer length")),!(F>=this.length))return 128&this[F]?-1*(255-this[F]+1):this[F]},_.prototype.readInt16LE=function(F,$){return E(this,F,!0,$)},_.prototype.readInt16BE=function(F,$){return E(this,F,!1,$)},_.prototype.readInt32LE=function(F,$){return O(this,F,!0,$)},_.prototype.readInt32BE=function(F,$){return O(this,F,!1,$)},_.prototype.readFloatLE=function(F,$){return P(this,F,!0,$)},_.prototype.readFloatBE=function(F,$){return P(this,F,!1,$)},_.prototype.readDoubleLE=function(F,$){return N(this,F,!0,$)},_.prototype.readDoubleBE=function(F,$){return N(this,F,!1,$)},_.prototype.writeUInt8=function(F,$,q){q||(de(F!=null,"missing value"),de($!=null,"missing offset"),de($<this.length,"trying to write beyond buffer length"),Ce(F,255)),$>=this.length||(this[$]=F)},_.prototype.writeUInt16LE=function(F,$,q){A(this,F,$,!0,q)},_.prototype.writeUInt16BE=function(F,$,q){A(this,F,$,!1,q)},_.prototype.writeUInt32LE=function(F,$,q){j(this,F,$,!0,q)},_.prototype.writeUInt32BE=function(F,$,q){j(this,F,$,!1,q)},_.prototype.writeInt8=function(F,$,q){q||(de(F!=null,"missing value"),de($!=null,"missing offset"),de($<this.length,"Trying to write beyond buffer length"),Ie(F,127,-128)),$>=this.length||(0<=F?this.writeUInt8(F,$,q):this.writeUInt8(255+F+1,$,q))},_.prototype.writeInt16LE=function(F,$,q){X(this,F,$,!0,q)},_.prototype.writeInt16BE=function(F,$,q){X(this,F,$,!1,q)},_.prototype.writeInt32LE=function(F,$,q){B(this,F,$,!0,q)},_.prototype.writeInt32BE=function(F,$,q){B(this,F,$,!1,q)},_.prototype.writeFloatLE=function(F,$,q){ae(this,F,$,!0,q)},_.prototype.writeFloatBE=function(F,$,q){ae(this,F,$,!1,q)},_.prototype.writeDoubleLE=function(F,$,q){Y(this,F,$,!0,q)},_.prototype.writeDoubleBE=function(F,$,q){Y(this,F,$,!1,q)},_.prototype.fill=function(F,$,q){if(F=F||0,$=$||0,q=q||this.length,typeof F=="string"&&(F=F.charCodeAt(0)),de(typeof F=="number"&&!isNaN(F),"value is not a number"),de($<=q,"end < start"),q!==$&&this.length!==0){de(0<=$&&$<this.length,"start out of bounds"),de(0<=q&&q<=this.length,"end out of bounds");for(var pe=$;pe<q;pe++)this[pe]=F}},_.prototype.inspect=function(){for(var F=[],$=this.length,q=0;q<$;q++)if(F[q]=Q(this[q]),q===i.INSPECT_MAX_BYTES){F[q+1]="...";break}return"<Buffer "+F.join(" ")+">"},_.prototype.toArrayBuffer=function(){if(typeof Uint8Array>"u")throw new Error("Buffer.toArrayBuffer not supported in this browser");if(_._useTypedArrays)return new _(this).buffer;for(var F=new Uint8Array(this.length),$=0,q=F.length;$<q;$+=1)F[$]=this[$];return F.buffer};var K=_.prototype;function me(F,$,q){return typeof F!="number"?q:$<=(F=~~F)?$:0<=F||0<=(F+=$)?F:0}function ue(F){return(F=~~Math.ceil(+F))<0?0:F}function ie(F){return(Array.isArray||function($){return Object.prototype.toString.call($)==="[object Array]"})(F)}function Q(F){return F<16?"0"+F.toString(16):F.toString(16)}function ee(F){for(var $=[],q=0;q<F.length;q++){var pe=F.charCodeAt(q);if(pe<=127)$.push(F.charCodeAt(q));else{var le=q;55296<=pe&&pe<=57343&&q++;for(var Ee=encodeURIComponent(F.slice(le,q+1)).substr(1).split("%"),Pe=0;Pe<Ee.length;Pe++)$.push(parseInt(Ee[Pe],16))}}return $}function W(F){return g.toByteArray(F)}function te(F,$,q,pe){for(var le=0;le<pe&&!(le+q>=$.length||le>=F.length);le++)$[le+q]=F[le];return le}function ye(F){try{return decodeURIComponent(F)}catch{return String.fromCharCode(65533)}}function Ce(F,$){de(typeof F=="number","cannot write a non-number as a number"),de(0<=F,"specified a negative value for writing an unsigned value"),de(F<=$,"value is larger than maximum value for type"),de(Math.floor(F)===F,"value has a fractional component")}function Ie(F,$,q){de(typeof F=="number","cannot write a non-number as a number"),de(F<=$,"value larger than maximum allowed value"),de(q<=F,"value smaller than minimum allowed value"),de(Math.floor(F)===F,"value has a fractional component")}function Ye(F,$,q){de(typeof F=="number","cannot write a non-number as a number"),de(F<=$,"value larger than maximum allowed value"),de(q<=F,"value smaller than minimum allowed value")}function de(F,$){if(!F)throw new Error($||"Failed assertion")}_._augment=function(F){return F._isBuffer=!0,F._get=F.get,F._set=F.set,F.get=K.get,F.set=K.set,F.write=K.write,F.toString=K.toString,F.toLocaleString=K.toString,F.toJSON=K.toJSON,F.copy=K.copy,F.slice=K.slice,F.readUInt8=K.readUInt8,F.readUInt16LE=K.readUInt16LE,F.readUInt16BE=K.readUInt16BE,F.readUInt32LE=K.readUInt32LE,F.readUInt32BE=K.readUInt32BE,F.readInt8=K.readInt8,F.readInt16LE=K.readInt16LE,F.readInt16BE=K.readInt16BE,F.readInt32LE=K.readInt32LE,F.readInt32BE=K.readInt32BE,F.readFloatLE=K.readFloatLE,F.readFloatBE=K.readFloatBE,F.readDoubleLE=K.readDoubleLE,F.readDoubleBE=K.readDoubleBE,F.writeUInt8=K.writeUInt8,F.writeUInt16LE=K.writeUInt16LE,F.writeUInt16BE=K.writeUInt16BE,F.writeUInt32LE=K.writeUInt32LE,F.writeUInt32BE=K.writeUInt32BE,F.writeInt8=K.writeInt8,F.writeInt16LE=K.writeInt16LE,F.writeInt16BE=K.writeInt16BE,F.writeInt32LE=K.writeInt32LE,F.writeInt32BE=K.writeInt32BE,F.writeFloatLE=K.writeFloatLE,F.writeFloatBE=K.writeFloatBE,F.writeDoubleLE=K.writeDoubleLE,F.writeDoubleBE=K.writeDoubleBE,F.fill=K.fill,F.inspect=K.inspect,F.toArrayBuffer=K.toArrayBuffer,F}}).call(this,r("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},r("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/buffer/index.js","/node_modules/gulp-browserify/node_modules/buffer")},{"base64-js":2,buffer:3,ieee754:11,lYpoI2:10}],4:[function(r,n,i){(function(o,s,g,l,u,c,f,p,v){var g=r("buffer").Buffer,b=4,_=new g(b);_.fill(0),n.exports={hash:function(w,x,T,I){return g.isBuffer(w)||(w=new g(w)),function(R,E,O){for(var P=new g(E),N=O?P.writeInt32BE:P.writeInt32LE,A=0;A<R.length;A++)N.call(P,R[A],4*A,!0);return P}(x(function(R,E){var O;R.length%b!=0&&(O=R.length+(b-R.length%b),R=g.concat([R,_],O));for(var P=[],N=E?R.readInt32BE:R.readInt32LE,A=0;A<R.length;A+=b)P.push(N.call(R,A));return P}(w,I),8*w.length),T,I)}}}).call(this,r("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},r("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/crypto-browserify/helpers.js","/node_modules/gulp-browserify/node_modules/crypto-browserify")},{buffer:3,lYpoI2:10}],5:[function(r,n,i){(function(o,s,g,l,u,c,f,p,v){var g=r("buffer").Buffer,b=r("./sha"),_=r("./sha256"),w=r("./rng"),x={sha1:b,sha256:_,md5:r("./md5")},T=64,I=new g(T);function R(O,P){var N=x[O=O||"sha1"],A=[];return N||E("algorithm:",O,"is not yet supported"),{update:function(j){return g.isBuffer(j)||(j=new g(j)),A.push(j),j.length,this},digest:function(j){var X=g.concat(A),B=P?function(ae,Y,K){g.isBuffer(Y)||(Y=new g(Y)),g.isBuffer(K)||(K=new g(K)),Y.length>T?Y=ae(Y):Y.length<T&&(Y=g.concat([Y,I],T));for(var me=new g(T),ue=new g(T),ie=0;ie<T;ie++)me[ie]=54^Y[ie],ue[ie]=92^Y[ie];var Q=ae(g.concat([me,K]));return ae(g.concat([ue,Q]))}(N,P,X):N(X);return A=null,j?B.toString(j):B}}}function E(){var O=[].slice.call(arguments).join(" ");throw new Error([O,"we accept pull requests","http://github.com/dominictarr/crypto-browserify"].join(`
`))}I.fill(0),i.createHash=function(O){return R(O)},i.createHmac=R,i.randomBytes=function(O,P){if(!P||!P.call)return new g(w(O));try{P.call(this,void 0,new g(w(O)))}catch(N){P(N)}},function(O,P){for(var N in O)P(O[N],N)}(["createCredentials","createCipher","createCipheriv","createDecipher","createDecipheriv","createSign","createVerify","createDiffieHellman","pbkdf2"],function(O){i[O]=function(){E("sorry,",O,"is not implemented yet")}})}).call(this,r("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},r("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/crypto-browserify/index.js","/node_modules/gulp-browserify/node_modules/crypto-browserify")},{"./md5":6,"./rng":7,"./sha":8,"./sha256":9,buffer:3,lYpoI2:10}],6:[function(r,n,i){(function(o,s,a,l,u,c,f,p,v){var g=r("./helpers");function b(E,O){E[O>>5]|=128<<O%32,E[14+(O+64>>>9<<4)]=O;for(var P=1732584193,N=-271733879,A=-1732584194,j=271733878,X=0;X<E.length;X+=16){var B=P,ae=N,Y=A,K=j,P=w(P,N,A,j,E[X+0],7,-680876936),j=w(j,P,N,A,E[X+1],12,-389564586),A=w(A,j,P,N,E[X+2],17,606105819),N=w(N,A,j,P,E[X+3],22,-1044525330);P=w(P,N,A,j,E[X+4],7,-176418897),j=w(j,P,N,A,E[X+5],12,1200080426),A=w(A,j,P,N,E[X+6],17,-1473231341),N=w(N,A,j,P,E[X+7],22,-45705983),P=w(P,N,A,j,E[X+8],7,1770035416),j=w(j,P,N,A,E[X+9],12,-1958414417),A=w(A,j,P,N,E[X+10],17,-42063),N=w(N,A,j,P,E[X+11],22,-1990404162),P=w(P,N,A,j,E[X+12],7,1804603682),j=w(j,P,N,A,E[X+13],12,-40341101),A=w(A,j,P,N,E[X+14],17,-1502002290),P=x(P,N=w(N,A,j,P,E[X+15],22,1236535329),A,j,E[X+1],5,-165796510),j=x(j,P,N,A,E[X+6],9,-1069501632),A=x(A,j,P,N,E[X+11],14,643717713),N=x(N,A,j,P,E[X+0],20,-373897302),P=x(P,N,A,j,E[X+5],5,-701558691),j=x(j,P,N,A,E[X+10],9,38016083),A=x(A,j,P,N,E[X+15],14,-660478335),N=x(N,A,j,P,E[X+4],20,-405537848),P=x(P,N,A,j,E[X+9],5,568446438),j=x(j,P,N,A,E[X+14],9,-1019803690),A=x(A,j,P,N,E[X+3],14,-187363961),N=x(N,A,j,P,E[X+8],20,1163531501),P=x(P,N,A,j,E[X+13],5,-1444681467),j=x(j,P,N,A,E[X+2],9,-51403784),A=x(A,j,P,N,E[X+7],14,1735328473),P=T(P,N=x(N,A,j,P,E[X+12],20,-1926607734),A,j,E[X+5],4,-378558),j=T(j,P,N,A,E[X+8],11,-2022574463),A=T(A,j,P,N,E[X+11],16,1839030562),N=T(N,A,j,P,E[X+14],23,-35309556),P=T(P,N,A,j,E[X+1],4,-1530992060),j=T(j,P,N,A,E[X+4],11,1272893353),A=T(A,j,P,N,E[X+7],16,-155497632),N=T(N,A,j,P,E[X+10],23,-1094730640),P=T(P,N,A,j,E[X+13],4,681279174),j=T(j,P,N,A,E[X+0],11,-358537222),A=T(A,j,P,N,E[X+3],16,-722521979),N=T(N,A,j,P,E[X+6],23,76029189),P=T(P,N,A,j,E[X+9],4,-640364487),j=T(j,P,N,A,E[X+12],11,-421815835),A=T(A,j,P,N,E[X+15],16,530742520),P=I(P,N=T(N,A,j,P,E[X+2],23,-995338651),A,j,E[X+0],6,-198630844),j=I(j,P,N,A,E[X+7],10,1126891415),A=I(A,j,P,N,E[X+14],15,-1416354905),N=I(N,A,j,P,E[X+5],21,-57434055),P=I(P,N,A,j,E[X+12],6,1700485571),j=I(j,P,N,A,E[X+3],10,-1894986606),A=I(A,j,P,N,E[X+10],15,-1051523),N=I(N,A,j,P,E[X+1],21,-2054922799),P=I(P,N,A,j,E[X+8],6,1873313359),j=I(j,P,N,A,E[X+15],10,-30611744),A=I(A,j,P,N,E[X+6],15,-1560198380),N=I(N,A,j,P,E[X+13],21,1309151649),P=I(P,N,A,j,E[X+4],6,-145523070),j=I(j,P,N,A,E[X+11],10,-1120210379),A=I(A,j,P,N,E[X+2],15,718787259),N=I(N,A,j,P,E[X+9],21,-343485551),P=R(P,B),N=R(N,ae),A=R(A,Y),j=R(j,K)}return Array(P,N,A,j)}function _(E,O,P,N,A,j){return R((X=R(R(O,E),R(N,j)))<<(B=A)|X>>>32-B,P);var X,B}function w(E,O,P,N,A,j,X){return _(O&P|~O&N,E,O,A,j,X)}function x(E,O,P,N,A,j,X){return _(O&N|P&~N,E,O,A,j,X)}function T(E,O,P,N,A,j,X){return _(O^P^N,E,O,A,j,X)}function I(E,O,P,N,A,j,X){return _(P^(O|~N),E,O,A,j,X)}function R(E,O){var P=(65535&E)+(65535&O);return(E>>16)+(O>>16)+(P>>16)<<16|65535&P}n.exports=function(E){return g.hash(E,b,16)}}).call(this,r("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},r("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/crypto-browserify/md5.js","/node_modules/gulp-browserify/node_modules/crypto-browserify")},{"./helpers":4,buffer:3,lYpoI2:10}],7:[function(r,n,i){(function(o,s,a,l,u,c,f,p,v){var g;g=function(b){for(var _,w=new Array(b),x=0;x<b;x++)(3&x)==0&&(_=4294967296*Math.random()),w[x]=_>>>((3&x)<<3)&255;return w},n.exports=g}).call(this,r("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},r("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/crypto-browserify/rng.js","/node_modules/gulp-browserify/node_modules/crypto-browserify")},{buffer:3,lYpoI2:10}],8:[function(r,n,i){(function(o,s,a,l,u,c,f,p,v){var g=r("./helpers");function b(x,T){x[T>>5]|=128<<24-T%32,x[15+(T+64>>9<<4)]=T;for(var I,R,E,O,P,N=Array(80),A=1732584193,j=-271733879,X=-1732584194,B=271733878,ae=-1009589776,Y=0;Y<x.length;Y+=16){for(var K=A,me=j,ue=X,ie=B,Q=ae,ee=0;ee<80;ee++){N[ee]=ee<16?x[Y+ee]:w(N[ee-3]^N[ee-8]^N[ee-14]^N[ee-16],1);var W=_(_(w(A,5),(E=j,O=X,P=B,(R=ee)<20?E&O|~E&P:!(R<40)&&R<60?E&O|E&P|O&P:E^O^P)),_(_(ae,N[ee]),(I=ee)<20?1518500249:I<40?1859775393:I<60?-1894007588:-899497514)),ae=B,B=X,X=w(j,30),j=A,A=W}A=_(A,K),j=_(j,me),X=_(X,ue),B=_(B,ie),ae=_(ae,Q)}return Array(A,j,X,B,ae)}function _(x,T){var I=(65535&x)+(65535&T);return(x>>16)+(T>>16)+(I>>16)<<16|65535&I}function w(x,T){return x<<T|x>>>32-T}n.exports=function(x){return g.hash(x,b,20,!0)}}).call(this,r("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},r("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/crypto-browserify/sha.js","/node_modules/gulp-browserify/node_modules/crypto-browserify")},{"./helpers":4,buffer:3,lYpoI2:10}],9:[function(r,n,i){(function(o,s,a,l,u,c,f,p,v){function g(x,T){var I=(65535&x)+(65535&T);return(x>>16)+(T>>16)+(I>>16)<<16|65535&I}function b(x,T){return x>>>T|x<<32-T}function _(x,T){var I,R,E,O,P,N,A,j,X,B,ae=new Array(1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298),Y=new Array(1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225),K=new Array(64);x[T>>5]|=128<<24-T%32,x[15+(T+64>>9<<4)]=T;for(var me,ue,ie,Q,ee,W,te,ye,Ce=0;Ce<x.length;Ce+=16){I=Y[0],R=Y[1],E=Y[2],O=Y[3],P=Y[4],N=Y[5],A=Y[6],j=Y[7];for(var Ie=0;Ie<64;Ie++)K[Ie]=Ie<16?x[Ie+Ce]:g(g(g((ye=K[Ie-2],b(ye,17)^b(ye,19)^ye>>>10),K[Ie-7]),(te=K[Ie-15],b(te,7)^b(te,18)^te>>>3)),K[Ie-16]),X=g(g(g(g(j,b(W=P,6)^b(W,11)^b(W,25)),(ee=P)&N^~ee&A),ae[Ie]),K[Ie]),B=g(b(Q=I,2)^b(Q,13)^b(Q,22),(me=I)&(ue=R)^me&(ie=E)^ue&ie),j=A,A=N,N=P,P=g(O,X),O=E,E=R,R=I,I=g(X,B);Y[0]=g(I,Y[0]),Y[1]=g(R,Y[1]),Y[2]=g(E,Y[2]),Y[3]=g(O,Y[3]),Y[4]=g(P,Y[4]),Y[5]=g(N,Y[5]),Y[6]=g(A,Y[6]),Y[7]=g(j,Y[7])}return Y}var w=r("./helpers");n.exports=function(x){return w.hash(x,_,32,!0)}}).call(this,r("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},r("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/crypto-browserify/sha256.js","/node_modules/gulp-browserify/node_modules/crypto-browserify")},{"./helpers":4,buffer:3,lYpoI2:10}],10:[function(r,n,i){(function(o,s,a,l,u,c,f,p,v){function g(){}(o=n.exports={}).nextTick=function(){var b=typeof window<"u"&&window.setImmediate,_=typeof window<"u"&&window.postMessage&&window.addEventListener;if(b)return function(x){return window.setImmediate(x)};if(_){var w=[];return window.addEventListener("message",function(x){var T=x.source;T!==window&&T!==null||x.data!=="process-tick"||(x.stopPropagation(),0<w.length&&w.shift()())},!0),function(x){w.push(x),window.postMessage("process-tick","*")}}return function(x){setTimeout(x,0)}}(),o.title="browser",o.browser=!0,o.env={},o.argv=[],o.on=g,o.addListener=g,o.once=g,o.off=g,o.removeListener=g,o.removeAllListeners=g,o.emit=g,o.binding=function(b){throw new Error("process.binding is not supported")},o.cwd=function(){return"/"},o.chdir=function(b){throw new Error("process.chdir is not supported")}}).call(this,r("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},r("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/process/browser.js","/node_modules/gulp-browserify/node_modules/process")},{buffer:3,lYpoI2:10}],11:[function(r,n,i){(function(o,s,a,l,u,c,f,p,v){i.read=function(g,b,_,w,x){var T,I,R=8*x-w-1,E=(1<<R)-1,O=E>>1,P=-7,N=_?x-1:0,A=_?-1:1,j=g[b+N];for(N+=A,T=j&(1<<-P)-1,j>>=-P,P+=R;0<P;T=256*T+g[b+N],N+=A,P-=8);for(I=T&(1<<-P)-1,T>>=-P,P+=w;0<P;I=256*I+g[b+N],N+=A,P-=8);if(T===0)T=1-O;else{if(T===E)return I?NaN:1/0*(j?-1:1);I+=Math.pow(2,w),T-=O}return(j?-1:1)*I*Math.pow(2,T-w)},i.write=function(g,b,_,w,x,T){var I,R,E,O=8*T-x-1,P=(1<<O)-1,N=P>>1,A=x===23?Math.pow(2,-24)-Math.pow(2,-77):0,j=w?0:T-1,X=w?1:-1,B=b<0||b===0&&1/b<0?1:0;for(b=Math.abs(b),isNaN(b)||b===1/0?(R=isNaN(b)?1:0,I=P):(I=Math.floor(Math.log(b)/Math.LN2),b*(E=Math.pow(2,-I))<1&&(I--,E*=2),2<=(b+=1<=I+N?A/E:A*Math.pow(2,1-N))*E&&(I++,E/=2),P<=I+N?(R=0,I=P):1<=I+N?(R=(b*E-1)*Math.pow(2,x),I+=N):(R=b*Math.pow(2,N-1)*Math.pow(2,x),I=0));8<=x;g[_+j]=255&R,j+=X,R/=256,x-=8);for(I=I<<x|R,O+=x;0<O;g[_+j]=255&I,j+=X,I/=256,O-=8);g[_+j-X]|=128*B}}).call(this,r("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},r("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/ieee754/index.js","/node_modules/ieee754")},{buffer:3,lYpoI2:10}]},{},[1])(1)})})(QR);function ek(e,t){var r;if(typeof Symbol>"u"||e[Symbol.iterator]==null){if(Array.isArray(e)||(r=Fj(e))||t&&e&&typeof e.length=="number"){r&&(e=r);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(u){throw u},f:i}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var o=!0,s=!1,a;return{s:function(){r=e[Symbol.iterator]()},n:function(){var u=r.next();return o=u.done,u},e:function(u){s=!0,a=u},f:function(){try{!o&&r.return!=null&&r.return()}finally{if(s)throw a}}}}function Fj(e,t){if(!!e){if(typeof e=="string")return v5(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return v5(e,t)}}function v5(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function r0(e){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?r0=function(r){return typeof r}:r0=function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},r0(e)}var Mj=MR,Bj=JR.exports,Dj=QR.exports,Gj=function(t){return t.split(".")},tk=function(t,r){for(var n=0;n<r.length-1;n++){var i=r[n];if(!t.hasOwnProperty(i)||(t=t[i],!Pp(t)))return}if(t.hasOwnProperty(r[n]))return t},jj=function(t,r){return!!tk(t,r)},rk=function(t,r,n){for(var i=n;i<r.length-1;i++)t[r[i]]={},t=t[r[i]];return t},nk=function(t,r,n){(t=tk(t,r))&&n(t,r[r.length-1])},$j=function(t,r,n){var i=function(s,a){return s[a]=n};ik(t,r,i,i)},Pp=function(t){return r0(t)==="object"&&t!==null},ik=function(t,r,n,i){var o=r[r.length-1],s=function(c){t=rk(t,r,c),i(t,o)};if(!t.hasOwnProperty(r[0]))return s(0);if(r.length>1){t=t[r[0]];for(var a=1;a<r.length-1;a++){var l=r[a];if(!Pp(t[l])||Array.isArray(t)&&l<0)return;if(!t.hasOwnProperty(l))return s(a);t=t[l]}}n(t,o)},Hj=function(t,r){for(var n=0;n<r.length-1;n++)if(t=t[r[n]],!Pp(t))return;if(Array.isArray(t)){var i=Number.parseFloat(r[n]);Number.isInteger(i)&&t.splice(i,1)}else delete t[r[n]]},zj=function e(t,r,n){var i=function(a){var l=[],u=ek(n),c;try{for(u.s();!(c=u.n()).done;){var f=c.value;if(f[0]===a){if(f.length===1)return;l.push(f.slice(1))}}}catch(v){u.e(v)}finally{u.f()}if(!l.length)r[a]=Bj(t[a]);else{var p=t[a];r[a]=new p.constructor,e(p,r[a],l)}};for(var o in t)i(o)},Vj=function(t,r){var n=new t.constructor;return zj(t,n,r),n},Xj=function(t,r,n){nk(t,r,function(i,o){i[n]=i[o],delete i[o]})},Wj=function(t,r,n){for(var i=0;i<n.length-1;i++){var o=n[i];if(t=t[o],!Pp(t))return;r[o]=new t.constructor,r=r[o]}if(t.hasOwnProperty(n[i]))return r[n[i]]=t[n[i]],t},Yj=function(t,r){var n=[],i=ek(r),o;try{for(i.s();!(o=i.n()).done;){var s=o.value,a=new t.constructor;Wj(t,a,s)&&n.push(a)}}catch(l){i.e(l)}finally{i.f()}return n.reduce(Mj,{})},Kj=function(t,r){return Zb(t)===Zb(r)},qj=function(t){throw Error("unknown operator '".concat(t,"'"))},Zb=function(t){if(t!==void 0)return Dj(t)},Zj=function(t){return Error(t.target.error.message)};Ht.toPathPieces=Gj;Ht.exists=jj;Ht.create=rk;Ht.get=nk;Ht.set=$j;Ht.isObject=Pp;Ht.modify=ik;Ht.remove1=Hj;Ht.remove2=Vj;Ht.rename=Xj;Ht.copy=Yj;Ht.equal=Kj;Ht.unknownOp=qj;Ht.hashify=Zb;Ht.getIDBError=Zj;var a4=Symbol("missing");function Jj(e,t){var r;if(typeof Symbol>"u"||e[Symbol.iterator]==null){if(Array.isArray(e)||(r=Qj(e))||t&&e&&typeof e.length=="number"){r&&(e=r);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(u){throw u},f:i}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var o=!0,s=!1,a;return{s:function(){r=e[Symbol.iterator]()},n:function(){var u=r.next();return o=u.done,u},e:function(u){s=!0,a=u},f:function(){try{!o&&r.return!=null&&r.return()}finally{if(s)throw a}}}}function Qj(e,t){if(!!e){if(typeof e=="string")return g5(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return g5(e,t)}}function g5(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function e$(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function y5(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function t$(e,t,r){return t&&y5(e.prototype,t),r&&y5(e,r),e}var r$=Ht,n$=r$.get,_5=a4,i$=function(){function e(t){e$(this,e),this._doc=t}return t$(e,[{key:"get",value:function(r){var n=_5;return n$(this._doc,r.pieces,function(i,o){n=i[o]}),n}},{key:"ensure",value:function(r){var n=Jj(r),i;try{for(n.s();!(i=n.n()).done;){var o=i.value;if(this.get(o)===_5)return!1}}catch(s){n.e(s)}finally{n.f()}return!0}}]),e}(),Ay=i$,o$=Ay,ok=function(e,t){return function(r){(function n(){e(function(i,o,s){o?t.run(new o$(o))?r(null,o,s):n():r(i)})})()}};function s$(e,t){return u$(e)||l$(e,t)||sk(e,t)||a$()}function a$(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function l$(e,t){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(e)))){var r=[],n=!0,i=!1,o=void 0;try{for(var s=e[Symbol.iterator](),a;!(n=(a=s.next()).done)&&(r.push(a.value),!(t&&r.length===t));n=!0);}catch(l){i=!0,o=l}finally{try{!n&&s.return!=null&&s.return()}finally{if(i)throw o}}return r}}function u$(e){if(Array.isArray(e))return e}function c$(e,t){var r;if(typeof Symbol>"u"||e[Symbol.iterator]==null){if(Array.isArray(e)||(r=sk(e))||t&&e&&typeof e.length=="number"){r&&(e=r);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(u){throw u},f:i}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var o=!0,s=!1,a;return{s:function(){r=e[Symbol.iterator]()},n:function(){var u=r.next();return o=u.done,u},e:function(u){s=!0,a=u},f:function(){try{!o&&r.return!=null&&r.return()}finally{if(s)throw a}}}}function sk(e,t){if(!!e){if(typeof e=="string")return b5(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return b5(e,t)}}function b5(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var l4=Ht,h$=l4.toPathPieces,$2=l4.isObject,f$=l4.equal,d$=function(t,r,n,i){for(var o=0;o<n.length-1;o++){var s=n[o];if(t=t[s],r=r[s],$2(t)){if($2(r))continue}else if(!$2(r))return null;return i}var a=n[o];if(t.hasOwnProperty(a)){if(r.hasOwnProperty(a))return t=t[a],r=r[a],f$(t,r)?0:(t<r?1:-1)*i}else if(!r.hasOwnProperty(a))return null;return i},ak=function(e,t){var r=[];for(var n in t)r.push([h$(n),t[n]]);var i=function(u,c){var f=c$(r),p;try{for(f.s();!(p=f.n()).done;){var v=s$(p.value,2),g=v[0],b=v[1],_=d$(u,c,g,b);if(_>0||_<0)return _}}catch(w){f.e(w)}finally{f.f()}return-b},o=[],s=function(u){return u(null,o.pop())},a=function(u){var c=function(p){if(p)return u(p);o=o.sort(i),(a=s)(u)};(function f(){e(function(p,v){if(!v)return c(p);o.push(v),f()})})()};return function(l){return a(l)}},Ap={};function p$(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var m$=Ht,v$=m$.toPathPieces,g$=function e(t){p$(this,e),this.pieces=v$(t),this.literal=t},lk=g$;function n0(e){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?n0=function(r){return typeof r}:n0=function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},n0(e)}function y$(e){return b$(e)||uk(e)||u4(e)||_$()}function _$(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function b$(e){if(Array.isArray(e))return e}function dd(e,t,r){return typeof Reflect<"u"&&Reflect.get?dd=Reflect.get:dd=function(i,o,s){var a=w$(i,o);if(!!a){var l=Object.getOwnPropertyDescriptor(a,o);return l.get?l.get.call(s):l.value}},dd(e,t,r||e)}function w$(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&(e=fu(e),e!==null););return e}function So(e){return T$(e)||uk(e)||u4(e)||x$()}function x$(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function uk(e){if(typeof Symbol<"u"&&Symbol.iterator in Object(e))return Array.from(e)}function T$(e){if(Array.isArray(e))return Qb(e)}function Zr(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Jb(e,t)}function Jb(e,t){return Jb=Object.setPrototypeOf||function(n,i){return n.__proto__=i,n},Jb(e,t)}function Jr(e){var t=C$();return function(){var n=fu(e),i;if(t){var o=fu(this).constructor;i=Reflect.construct(n,arguments,o)}else i=n.apply(this,arguments);return S$(this,i)}}function S$(e,t){return t&&(n0(t)==="object"||typeof t=="function")?t:E$(e)}function E$(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function C$(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}function fu(e){return fu=Object.setPrototypeOf?Object.getPrototypeOf:function(r){return r.__proto__||Object.getPrototypeOf(r)},fu(e)}function Dr(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function w5(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function hn(e,t,r){return t&&w5(e.prototype,t),r&&w5(e,r),e}function Wi(e,t){var r;if(typeof Symbol>"u"||e[Symbol.iterator]==null){if(Array.isArray(e)||(r=u4(e))||t&&e&&typeof e.length=="number"){r&&(e=r);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(u){throw u},f:i}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var o=!0,s=!1,a;return{s:function(){r=e[Symbol.iterator]()},n:function(){var u=r.next();return o=u.done,u},e:function(u){s=!0,a=u},f:function(){try{!o&&r.return!=null&&r.return()}finally{if(s)throw a}}}}function u4(e,t){if(!!e){if(typeof e=="string")return Qb(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Qb(e,t)}}function Qb(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var c4=Ht,I$=c4.isObject,N$=c4.equal,ck=c4.unknownOp,Ry=a4,P$=lk,A$=Ay,hk=function e(t){if(typeof t=="number")return!isNaN(t);if(typeof t=="string"||typeof t=="boolean")return!0;if(!t||t.constructor===Object)return!1;if(Array.isArray(t)){var r=Wi(t),n;try{for(r.s();!(n=r.n()).done;){var i=n.value;if(!e(i))return!1}}catch(o){r.e(o)}finally{r.f()}return!0}return t instanceof Date?!isNaN(t.valueOf()):!1},Ch=function(){function e(){Dr(this,e)}return hn(e,[{key:"getClauses",value:function(){return this.is_index_matchable?[this]:[]}}]),e}(),ew=function(e){Zr(r,e);var t=Jr(r);function r(n){var i;return Dr(this,r),i=t.call(this),i.args=n,i}return r}(Ch),ky=function(e){Zr(r,e);var t=Jr(r);function r(){return Dr(this,r),t.apply(this,arguments)}return hn(r,[{key:"getClauses",value:function(){for(var i=[],o=0;o<this.args.length;o++){var s=this.args[o];s instanceof ew?i.push.apply(i,So(s.getClauses())):s.is_index_matchable&&(s.parent=this,s.index=o,i.push(s))}return i}},{key:"run",value:function(i){var o=Wi(this.args),s;try{for(o.s();!(s=o.n()).done;){var a=s.value;if(!a.run(i))return!1}}catch(l){o.e(l)}finally{o.f()}return!0}}]),r}(ew),ug=function(e){Zr(r,e);var t=Jr(r);function r(){return Dr(this,r),t.apply(this,arguments)}return hn(r,[{key:"getClauses",value:function(){return[]}},{key:"run",value:function(i){var o=Wi(this.args),s;try{for(o.s();!(s=o.n()).done;){var a=s.value;if(a.run(i))return!0}}catch(l){o.e(l)}finally{o.f()}return!1}}]),r}(ew),R$=function(e){Zr(r,e);var t=Jr(r);function r(){return Dr(this,r),t.apply(this,arguments)}return hn(r,[{key:"getClauses",value:function(){return[]}},{key:"run",value:function(i){return!dd(fu(r.prototype),"run",this).call(this,i)}}]),r}(ky),tw=function(e){Zr(r,e);var t=Jr(r);function r(n,i){var o;return Dr(this,r),o=t.call(this),o.path=n,o.bool=i,o}return hn(r,[{key:"run",value:function(i){return i.get(this.path)!==Ry===this.bool}},{key:"is_index_matchable",get:function(){return!!this.bool}}]),r}(Ch),i0=function(e){Zr(r,e);var t=Jr(r);function r(n,i){var o;return Dr(this,r),o=t.call(this),o.path=n,o.value=i,o}return hn(r,[{key:"run",value:function(i){var o=i.get(this.path);return o===Ry?!1:N$(o,this.value)}},{key:"is_index_matchable",get:function(){return hk(this.value)}},{key:"idb_key_range",get:function(){return IDBKeyRange.only(this.value)}}]),r}(Ch),x5=function(e){Zr(r,e);var t=Jr(r);function r(){return Dr(this,r),t.apply(this,arguments)}return hn(r,[{key:"run",value:function(i){return!dd(fu(r.prototype),"run",this).call(this,i)}},{key:"is_index_matchable",get:function(){return!1}}]),r}(i0),k$=function(e){Zr(r,e);var t=Jr(r);function r(n,i,o){var s;return Dr(this,r),s=t.call(this),s.path=n,s.fns=i,s.values=o,s}return hn(r,[{key:"run",value:function(i){var o=i.get(this.path);if(o===Ry||o==null)return!1;for(var s=this.fns,a=this.values,l=0;l<s.length;l++)if(!s[l](o,a[l]))return!1;return!0}},{key:"is_index_matchable",get:function(){return!0}}]),r}(Ch),dl=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return function(i){Zr(s,i);var o=Jr(s);function s(a,l){return Dr(this,s),o.call(this,a,r,l)}return s}(k$)},h4=function(t,r){return t>r},f4=function(t,r){return t>=r},d4=function(t,r){return t<r},p4=function(t,r){return t<=r},O$=function(e){Zr(r,e);var t=Jr(r);function r(){return Dr(this,r),t.apply(this,arguments)}return hn(r,[{key:"idb_key_range",get:function(){var i;return(i=IDBKeyRange).lowerBound.apply(i,So(this.values).concat([!0]))}}]),r}(dl(h4)),L$=function(e){Zr(r,e);var t=Jr(r);function r(){return Dr(this,r),t.apply(this,arguments)}return hn(r,[{key:"idb_key_range",get:function(){var i;return(i=IDBKeyRange).lowerBound.apply(i,So(this.values))}}]),r}(dl(f4)),U$=function(e){Zr(r,e);var t=Jr(r);function r(){return Dr(this,r),t.apply(this,arguments)}return hn(r,[{key:"idb_key_range",get:function(){var i;return(i=IDBKeyRange).upperBound.apply(i,So(this.values).concat([!0]))}}]),r}(dl(d4)),F$=function(e){Zr(r,e);var t=Jr(r);function r(){return Dr(this,r),t.apply(this,arguments)}return hn(r,[{key:"idb_key_range",get:function(){var i;return(i=IDBKeyRange).upperBound.apply(i,So(this.values))}}]),r}(dl(p4)),M$=function(e){Zr(r,e);var t=Jr(r);function r(){return Dr(this,r),t.apply(this,arguments)}return hn(r,[{key:"idb_key_range",get:function(){var i;return(i=IDBKeyRange).bound.apply(i,So(this.values).concat([!0,!0]))}}]),r}(dl(h4,d4)),B$=function(e){Zr(r,e);var t=Jr(r);function r(){return Dr(this,r),t.apply(this,arguments)}return hn(r,[{key:"idb_key_range",get:function(){var i;return(i=IDBKeyRange).bound.apply(i,So(this.values).concat([!1,!0]))}}]),r}(dl(f4,d4)),D$=function(e){Zr(r,e);var t=Jr(r);function r(){return Dr(this,r),t.apply(this,arguments)}return hn(r,[{key:"idb_key_range",get:function(){var i;return(i=IDBKeyRange).bound.apply(i,So(this.values).concat([!0,!1]))}}]),r}(dl(h4,p4)),G$=function(e){Zr(r,e);var t=Jr(r);function r(){return Dr(this,r),t.apply(this,arguments)}return hn(r,[{key:"idb_key_range",get:function(){var i;return(i=IDBKeyRange).bound.apply(i,So(this.values))}}]),r}(dl(f4,p4)),j$=function(e){Zr(r,e);var t=Jr(r);function r(n,i){var o;return Dr(this,r),o=t.call(this),o.path=n,o.op=i,o}return hn(r,[{key:"run",value:function(i){var o=i.get(this.path);if(!o||!o[Symbol.iterator])return!1;var s=this.op,a=Wi(o),l;try{for(a.s();!(l=a.n()).done;){var u=l.value;if(I$(u)&&s.run(new A$(u)))return!0}}catch(c){a.e(c)}finally{a.f()}return!1}},{key:"is_index_matchable",get:function(){return!1}}]),r}(Ch),$$=function(e){Zr(r,e);var t=Jr(r);function r(n,i){var o;return Dr(this,r),o=t.call(this),o.path=n,o.expr=i,o}return hn(r,[{key:"run",value:function(i){var o=i.get(this.path);return o===Ry?!1:this.expr.test(o)}},{key:"is_index_matchable",get:function(){return!1}}]),r}(Ch),H$=function(t,r){var n=Wi(r),i;try{for(n.s();!(i=n.n()).done;){var o=i.value,s=Rp(o);if(s===!1)return!1;!s||(s.constructor===ky?t.push.apply(t,So(s.args)):t.push(s))}}catch(a){n.e(a)}finally{n.f()}return!0},z$=function(t,r){var n=[],i,o=Wi(r),s;try{for(o.s();!(s=o.n()).done;){var a=s.value,l=Rp(a);if(!l){l===!1&&(i=!0);continue}l.constructor===ug?n.push.apply(n,So(l.args)):n.push(l)}}catch(u){o.e(u)}finally{o.f()}if(n.length>1)t.push(new ug(n));else if(n.length)t.push(n[0]);else if(i)return!1;return!0},T5=function(t,r){var n=[],i=Wi(r),o;try{for(i.s();!(o=i.n()).done;){var s=o.value,a=Rp(s);a&&n.push(a)}}catch(l){i.e(l)}finally{i.f()}return n.length&&t.push(new R$(n)),!0},V$={$and:H$,$or:z$,$not:T5,$nor:T5},X$=[[M$,"$gt","$lt"],[B$,"$gte","$lt"],[D$,"$gt","$lte"],[G$,"$gte","$lte"],[O$,"$gt"],[L$,"$gte"],[U$,"$lt"],[F$,"$lte"]],W$=function(t,r,n,i){var o=function(v,g){var b=[],_=Wi(g),w;try{for(_.s();!(w=_.n()).done;){var x=w.value;if(!i.has(x))return;var T=n[x];if(!hk(T))return!1;b.push(T)}}catch(I){_.e(I)}finally{_.f()}return t.push(new v(r,b)),!0},s=Wi(X$),a;try{for(s.s();!(a=s.n()).done;){var l=y$(a.value),u=l[0],c=l.slice(1),f=o(u,c);if(f===!1)return;if(!!f){i.delete("$gt"),i.delete("$gte"),i.delete("$lt"),i.delete("$lte");break}}}catch(p){s.e(p)}finally{s.f()}return!0},Y$=function(t,r,n){var i=function(){return t.push(new i0(r,n)),!0};if(n==null||n.constructor!==Object)return i();var o=new Set(Object.keys(n));if(o.has("$exists")&&!n.$exists)return t.push(new tw(r,!1)),!0;var s=[];if(o.has("$eq")&&(s.push(new i0(r,n.$eq)),o.delete("$eq")),o.has("$ne")&&(s.push(new x5(r,n.$ne)),o.delete("$ne")),!W$(s,r,n,o))return!1;if(o.has("$in")){var a=[],l=Wi(n.$in),u;try{for(l.s();!(u=l.n()).done;){var c=u.value;a.push(new i0(r,c))}}catch(T){l.e(T)}finally{l.f()}a.length>1?s.push(new ug(a)):a.length&&s.push(a[0]),o.delete("$in")}if(o.has("$nin")){var f=Wi(n.$nin),p;try{for(f.s();!(p=f.n()).done;){var v=p.value;s.push(new x5(r,v))}}catch(T){f.e(T)}finally{f.f()}o.delete("$nin")}if(o.has("$elemMatch")){var g=Rp(n.$elemMatch);g&&s.push(new j$(r,g)),o.delete("$elemMatch")}if(o.has("$regex")){var b=new RegExp(n.$regex,n.$options);s.push(new $$(r,b)),o.delete("$regex"),o.delete("$options")}n.$exists&&!s.length&&(s.push(new tw(r,!0)),o.delete("$exists"));var _=Wi(o),w;try{for(_.s();!(w=_.n()).done;){var x=w.value;x[0]==="$"&&ck(x)}}catch(T){_.e(T)}finally{_.f()}return s.length?(t.push.apply(t,s),!0):i()},Rp=function(t){var r=[];for(var n in t){var i=t[n],o=void 0;if(n[0]!=="$")o=Y$(r,new P$(n),i);else{Array.isArray(i)||(i=[i]);var s=V$[n];s||ck(n),o=s(r,i)}if(!o)return o}if(!!r.length)return r.length===1?r[0]:new ky(r)};Ap.build=Rp;Ap.Conjunction=ky;Ap.Disjunction=ug;Ap.Exists=tw;function m4(e,t){return Z$(e)||q$(e,t)||fk(e,t)||K$()}function K$(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function q$(e,t){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(e)))){var r=[],n=!0,i=!1,o=void 0;try{for(var s=e[Symbol.iterator](),a;!(n=(a=s.next()).done)&&(r.push(a.value),!(t&&r.length===t));n=!0);}catch(l){i=!0,o=l}finally{try{!n&&s.return!=null&&s.return()}finally{if(i)throw o}}return r}}function Z$(e){if(Array.isArray(e))return e}function Ih(e,t){var r;if(typeof Symbol>"u"||e[Symbol.iterator]==null){if(Array.isArray(e)||(r=fk(e))||t&&e&&typeof e.length=="number"){r&&(e=r);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(u){throw u},f:i}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var o=!0,s=!1,a;return{s:function(){r=e[Symbol.iterator]()},n:function(){var u=r.next();return o=u.done,u},e:function(u){s=!0,a=u},f:function(){try{!o&&r.return!=null&&r.return()}finally{if(s)throw a}}}}function fk(e,t){if(!!e){if(typeof e=="string")return S5(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return S5(e,t)}}function S5(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var J$=MR,dk=Ht,Q$=dk.hashify,pk=dk.getIDBError,v4=ok,g4=ak,Oy=Ap,eH=Oy.build,tH=Oy.Conjunction,rH=Oy.Disjunction,nH=Oy.Exists,iH=function(t){return t>0?"next":"prev"},oH=function(t){return t.length>1?new tH(t):t[0]},sH=function(t){var r=t.parent,n=t.index;r.args.splice(n,1)},aH=function(t,r){var n=t.col,i=t.read_pref;n._db._getConn(function(o,s){if(o)return r(o);var a=n._name;try{var l=s.transaction([a],i);l.onerror=function(u){return r(pk(u))},r(null,l.objectStore(a))}catch(u){r(u)}})},lH=function(t,r){var n=r.idb_key_range||null,i=r.idb_direction||"next",o=r.path.literal,s;return o==="_id"?s=t:s=t.index(o),s.openCursor(n,i)},uH=function(t){return t.openCursor()},cH=function(t){var r=[],n=Ih(t),i;try{for(n.s();!(i=n.n()).done;){var o=m4(i.value,2),s=o[0],a=o[1];if(s===v4){var l=eH(a);if(l===!1)return;if(!l)continue;a=l}r.push([s,a])}}catch(u){n.e(u)}finally{n.f()}return r},hH=function(t){var r=t.pipeline,n=[],i=[],o=0,s=Ih(r),a;try{for(s.s();!(a=s.n()).done;){var l=m4(a.value,2),u=l[0],c=l[1];if(u===g4)i.push(c);else if(u===v4)n.push(c);else break;o++}}catch(f){s.e(f)}finally{s.f()}r.splice(0,o),t.pred=oH(n),i.length&&(t.sort_spec=i.reduce(J$,{}))},fH=function(t,r){if(!r)return[];var n=[],i=[],o=Ih(r.getClauses()),s;try{for(o.s();!(s=o.n()).done;){var a=s.value;t._isIndexed(a.path.literal)&&(a instanceof nH?i.push(a):n.push(a))}}catch(l){o.e(l)}finally{o.f()}return n.length?n:i},mk=function(t){var r=t.col,n=t.pred;t.clauses=fH(r,n)},dH=function(t){if(!!t.hint){var r=t.clauses,n=t.hint,i=[],o=Ih(r),s;try{for(o.s();!(s=o.n()).done;){var a=s.value;a.path.literal===n&&i.push(a)}}catch(l){o.e(l)}finally{o.f()}i.length||(i=[{path:{literal:n}}]),t.clauses=i}},pH=function(t){if(!!t.sort_spec){var r=t.clauses,n=t.sort_spec,i=t.pipeline,o=[],s=Ih(r),a;try{for(s.s();!(a=s.n()).done;){var l=a.value,u=l.path.literal;if(!!n.hasOwnProperty(u)){var c=n[u];l.idb_direction=iH(c),o.push(l)}}}catch(f){s.e(f)}finally{s.f()}o.length?t.clauses=o:i.unshift([g4,n])}},mH=function(t){var r=t.pred,n=t.clauses,i=t.pipeline,o;if(n.length){var s=n[0];if(o=function(l){return lH(l,s)},!r||s===r)return o;sH(s)}else if(o=uH,!r)return o;return i.unshift([v4,r]),o},vH=function(t){var r,n,i=mH(t),o=function(u){n.onsuccess=function(c){r=c.target.result,u()},n.onerror=function(c){return u(pk(c))}},s=function(u){o(u),r.continue()},a=function(u){aH(t,function(c,f){if(c)return u(c);n=i(f),o(function(p){r&&(a=s),u(p)})})};return function(l){return a(function(u){return l(u,r)})}},vk=function(t,r){var n=t.pipeline,i=Ih(n),o;try{for(i.s();!(o=i.n()).done;){var s=m4(o.value,2),a=s[0],l=s[1];r=a(r,l)}}catch(u){i.e(u)}finally{i.f()}return r},gH=function(t){for(var r=[],n=t.pred.args,i=n.length-1;i>=0;i--){var o={col:t.col,read_pref:t.read_pref,pred:n[i],pipeline:[]};mk(o);var s=gk(o);r.push(vk(o,s))}var a=new Set,l=function(b){var _=Q$(b._id);if(!a.has(_))return a.add(_)},u=function(){return r.pop()},c=u(),f=function(b){(c=u())?p(b):b()},p=function g(b){c(function(_,w,x){_?b(_):w?l(w)?b(null,w,x):g(b):f(b)})},v=t.sort_spec;return v&&t.pipeline.push([g4,v]),p},gk=function(t){var r=vH(t),n=function(o){r(function(s,a){a?o(null,a.value,a):o(s)})};return n},yH=function(e){var t;try{t=cH(e._pipeline)}catch(i){return function(o){return o(i)}}if(!t)return function(i){return i()};var r={col:e._col,read_pref:e._read_pref,hint:e._hint,pipeline:t};hH(r);var n;return r.pred instanceof rH?n=gH(r):(mk(r),dH(r),pH(r),n=gk(r)),vk(r,n)};function o0(e){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?o0=function(r){return typeof r}:o0=function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},o0(e)}function rw(e,t){var r;if(typeof Symbol>"u"||e[Symbol.iterator]==null){if(Array.isArray(e)||(r=yk(e))||t&&e&&typeof e.length=="number"){r&&(e=r);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(u){throw u},f:i}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var o=!0,s=!1,a;return{s:function(){r=e[Symbol.iterator]()},n:function(){var u=r.next();return o=u.done,u},e:function(u){s=!0,a=u},f:function(){try{!o&&r.return!=null&&r.return()}finally{if(s)throw a}}}}function _H(e){return xH(e)||wH(e)||yk(e)||bH()}function bH(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function yk(e,t){if(!!e){if(typeof e=="string")return nw(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return nw(e,t)}}function wH(e){if(typeof Symbol<"u"&&Symbol.iterator in Object(e))return Array.from(e)}function xH(e){if(Array.isArray(e))return nw(e)}function nw(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function pt(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&iw(e,t)}function iw(e,t){return iw=Object.setPrototypeOf||function(n,i){return n.__proto__=i,n},iw(e,t)}function mt(e){var t=EH();return function(){var n=cg(e),i;if(t){var o=cg(this).constructor;i=Reflect.construct(n,arguments,o)}else i=n.apply(this,arguments);return TH(this,i)}}function TH(e,t){return t&&(o0(t)==="object"||typeof t=="function")?t:SH(e)}function SH(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function EH(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}function cg(e){return cg=Object.setPrototypeOf?Object.getPrototypeOf:function(r){return r.__proto__||Object.getPrototypeOf(r)},cg(e)}function lt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function E5(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function qn(e,t,r){return t&&E5(e.prototype,t),r&&E5(e,r),e}var CH=Ht,IH=CH.unknownOp,NH=a4,PH=lk,ns=function(){function e(t){lt(this,e),this.value=t}return qn(e,[{key:"run",value:function(){return this.value}},{key:"ResultType",get:function(){return this.constructor}}],[{key:"any",value:function(r){return typeof r=="number"?new Ly(r):typeof r=="string"?new hg(r):Array.isArray(r)?new _k(r):r instanceof Date?new bk(r):new e(r)}},{key:"literal",value:function(r){return new AH(e.any(r))}}]),e}(),Ly=function(e){pt(r,e);var t=mt(r);function r(){return lt(this,r),t.apply(this,arguments)}return qn(r,null,[{key:"isType",value:function(i){return typeof i=="number"}}]),r}(ns),hg=function(e){pt(r,e);var t=mt(r);function r(){return lt(this,r),t.apply(this,arguments)}return qn(r,null,[{key:"isType",value:function(i){return typeof i=="string"}}]),r}(ns),_k=function(e){pt(r,e);var t=mt(r);function r(){return lt(this,r),t.apply(this,arguments)}return qn(r,null,[{key:"isType",value:function(i){return Array.isArray(i)}}]),r}(ns),bk=function(e){pt(r,e);var t=mt(r);function r(){return lt(this,r),t.apply(this,arguments)}return qn(r,null,[{key:"isType",value:function(i){return i instanceof Date}}]),r}(ns),AH=function(e){pt(r,e);var t=mt(r);function r(){return lt(this,r),t.apply(this,arguments)}return qn(r,[{key:"run",value:function(){return this.value.run()}},{key:"ResultType",get:function(){return this.value.ResultType}}]),r}(ns),RH=function(){function e(t){lt(this,e),this.path=t}return qn(e,[{key:"run",value:function(r){var n=r.get(this.path);return n===NH?null:n}}]),e}(),kH=function(e){pt(r,e);var t=mt(r);function r(){return lt(this,r),t.apply(this,arguments)}return qn(r,[{key:"run",value:function(i){var o={},s=this.value;for(var a in s)o[a]=s[a].run(i);return o}}]),r}(ns),OH=function(){function e(){lt(this,e),this.args=[]}return qn(e,[{key:"add",value:function(r){this.args.push(r)}},{key:"alt",get:function(){return new ns(null)}}]),e}(),kp=function(e){pt(r,e);var t=mt(r);function r(n){var i;return lt(this,r),i=t.call(this),i.fn=n,i}return qn(r,[{key:"run",value:function(i){var o=this.args,s=this.fn;return o.map(function(a){return a.run(i)}).reduce(s)}},{key:"length",get:function(){return 1/0}}]),r}(OH),wk=function(e){pt(r,e);var t=mt(r);function r(){return lt(this,r),t.apply(this,arguments)}return qn(r,[{key:"run",value:function(i){return this.fn(this.args[0].run(i))}},{key:"length",get:function(){return 1}}]),r}(kp),Iu=function(t,r){return function(n){pt(o,n);var i=mt(o);function o(){return lt(this,o),i.call(this,r)}return o}(t)},Nh=function(t,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:r,i=function(o){pt(a,o);var s=mt(a);function a(){return lt(this,a),s.apply(this,arguments)}return a}(t);return i.prototype.InputType=r,i.prototype.ResultType=n,i},LH=function(e){pt(r,e);var t=mt(r);function r(){return lt(this,r),t.apply(this,arguments)}return r}(Nh(kp,Ly)),Op=function(t){return Iu(LH,t)},UH=function(e){pt(r,e);var t=mt(r);function r(){return lt(this,r),t.apply(this,arguments)}return r}(Op(function(e,t){return e+t})),FH=function(e){pt(r,e);var t=mt(r);function r(){return lt(this,r),t.apply(this,arguments)}return r}(Op(function(e,t){return e-t})),MH=function(e){pt(r,e);var t=mt(r);function r(){return lt(this,r),t.apply(this,arguments)}return r}(Op(function(e,t){return e*t})),BH=function(e){pt(r,e);var t=mt(r);function r(){return lt(this,r),t.apply(this,arguments)}return r}(Op(function(e,t){return e/t})),DH=function(e){pt(r,e);var t=mt(r);function r(){return lt(this,r),t.apply(this,arguments)}return r}(Op(function(e,t){return e%t})),GH=function(e){pt(r,e);var t=mt(r);function r(){return lt(this,r),t.apply(this,arguments)}return qn(r,[{key:"run",value:function(i){return this.fn.apply(this,_H(this.args.map(function(o){return o.run(i)})))}},{key:"length",get:function(){return this.fn.length}}]),r}(Nh(kp,Ly)),pl=function(t){return Iu(GH,t)},jH=function(e){pt(r,e);var t=mt(r);function r(){return lt(this,r),t.apply(this,arguments)}return r}(pl(Math.abs)),$H=function(e){pt(r,e);var t=mt(r);function r(){return lt(this,r),t.apply(this,arguments)}return r}(pl(Math.ceil)),HH=function(e){pt(r,e);var t=mt(r);function r(){return lt(this,r),t.apply(this,arguments)}return r}(pl(Math.floor)),zH=function(e){pt(r,e);var t=mt(r);function r(){return lt(this,r),t.apply(this,arguments)}return r}(pl(Math.log)),VH=function(e){pt(r,e);var t=mt(r);function r(){return lt(this,r),t.apply(this,arguments)}return r}(pl(Math.log10)),XH=function(e){pt(r,e);var t=mt(r);function r(){return lt(this,r),t.apply(this,arguments)}return r}(pl(Math.pow)),WH=function(e){pt(r,e);var t=mt(r);function r(){return lt(this,r),t.apply(this,arguments)}return r}(pl(Math.sqrt)),YH=function(e){pt(r,e);var t=mt(r);function r(){return lt(this,r),t.apply(this,arguments)}return r}(pl(Math.trunc)),KH=function(e){pt(r,e);var t=mt(r);function r(){return lt(this,r),t.apply(this,arguments)}return r}(Nh(kp,hg)),qH=function(e){pt(r,e);var t=mt(r);function r(){return lt(this,r),t.apply(this,arguments)}return r}(Iu(KH,function(e,t){return e+t})),xk=function(e){pt(r,e);var t=mt(r);function r(){return lt(this,r),t.apply(this,arguments)}return qn(r,[{key:"alt",get:function(){return new hg("")}}]),r}(Nh(wk,hg)),ZH=function(e){pt(r,e);var t=mt(r);function r(){return lt(this,r),t.apply(this,arguments)}return r}(Iu(xk,function(e){return e.toLowerCase()})),JH=function(e){pt(r,e);var t=mt(r);function r(){return lt(this,r),t.apply(this,arguments)}return r}(Iu(xk,function(e){return e.toUpperCase()})),QH=function(e){pt(r,e);var t=mt(r);function r(){return lt(this,r),t.apply(this,arguments)}return r}(Nh(kp,_k)),ez=function(e){pt(r,e);var t=mt(r);function r(){return lt(this,r),t.apply(this,arguments)}return r}(Iu(QH,function(e,t){return e.concat(t)})),tz=function(e){pt(r,e);var t=mt(r);function r(){return lt(this,r),t.apply(this,arguments)}return r}(Nh(wk,bk,Ly)),Nu=function(t){return Iu(tz,t)},rz=function(e){pt(r,e);var t=mt(r);function r(){return lt(this,r),t.apply(this,arguments)}return r}(Nu(function(e){return e.getDate()})),nz=function(e){pt(r,e);var t=mt(r);function r(){return lt(this,r),t.apply(this,arguments)}return r}(Nu(function(e){return e.getUTCFullYear()})),iz=function(e){pt(r,e);var t=mt(r);function r(){return lt(this,r),t.apply(this,arguments)}return r}(Nu(function(e){return e.getUTCMonth()+1})),oz=function(e){pt(r,e);var t=mt(r);function r(){return lt(this,r),t.apply(this,arguments)}return r}(Nu(function(e){return e.getUTCHours()})),sz=function(e){pt(r,e);var t=mt(r);function r(){return lt(this,r),t.apply(this,arguments)}return r}(Nu(function(e){return e.getUTCMinutes()})),az=function(e){pt(r,e);var t=mt(r);function r(){return lt(this,r),t.apply(this,arguments)}return r}(Nu(function(e){return e.getUTCSeconds()})),lz=function(e){pt(r,e);var t=mt(r);function r(){return lt(this,r),t.apply(this,arguments)}return r}(Nu(function(e){return e.getUTCMilliseconds()})),C5=function(){function e(t,r,n){lt(this,e);var i=n.InputType,o=n.alt;this.result_types=new Set([n.ResultType,o.ResultType]),this.stack=t,this.isType=i.isType,this.args=r,this.op=n,this.alt_value=o.value}return qn(e,[{key:"run",value:function(r){var n=this.stack,i=this.isType,o=this.op,s=[],a=rw(this.args),l;try{for(a.s();!(l=a.n()).done;){var u=l.value,c=u.run(r);if(!i(c))return this.alt_value;s.push(c)}}catch(p){a.e(p)}finally{a.f()}for(var f=s.length-1;f>=0;f--)n.push(s[f]);return o.run(r)}}]),e}(),uz=function(){function e(t){lt(this,e),this.stack=t}return qn(e,[{key:"run",value:function(){return this.stack.pop()}}]),e}(),cz={$add:UH,$subtract:FH,$multiply:MH,$divide:BH,$mod:DH,$abs:jH,$ceil:$H,$floor:HH,$ln:zH,$log10:VH,$pow:XH,$sqrt:WH,$trunc:YH,$concat:qH,$toLower:ZH,$toUpper:JH,$concatArrays:ez,$dayOfMonth:rz,$year:nz,$month:iz,$hour:oz,$minute:sz,$second:az,$millisecond:lz},hz=function(t,r,n){var i=cz[r];i||IH(r),Array.isArray(n)||(n=[n]);for(var o=new i,s=[],a=[],l=[],u=0;u<n.length&&u<o.length;u++){var c=y4(a,n[u]);if(c.ResultType){if(c.ResultType!==o.InputType)return o.alt;o.add(c);continue}if(c instanceof C5){if(!c.result_types.has(o.InputType))return o.alt;if(c.result_types.size===1){o.add(c);continue}}s.push(c),o.add(new uz(l))}return a.length?(t.push.apply(t,a),s.length?new C5(l,s,o):o):new o.ResultType(o.run())},fz=function(t,r){var n=new Set,i=new Set;for(var o in r)(o[0]==="$"?n:i).add(o);if(n.size>1)throw Error("objects cannot have more than one operator");if(n.size){var s=rw(i),a;try{for(s.s();!(a=s.n()).done;){var l=a.value;throw Error("unexpected field '".concat(l,"'"))}}catch(_){s.e(_)}finally{s.f()}var u=rw(n),c;try{for(u.s();!(c=u.n()).done;){var f=c.value;return f==="$literal"?ns.literal(r[f]):hz(t,f,r[f])}}catch(_){u.e(_)}finally{u.f()}}var p=[],v={};for(var g in r)v[g]=y4(p,r[g]);var b=new kH(v);return p.length?(t.push.apply(t,p),b):new ns(b.run())},y4=function(t,r){if(typeof r=="string"&&r[0]==="$"){var n=new PH(r.substring(1));return t.push(n),new RH(n)}return r==null||r.constructor!==Object?ns.any(r):fz(t,r)},Tk=function(e){var t=[],r=y4(t,e);return{ast:r,paths:t,has_refs:!!t.length}};function dz(e,t){return vz(e)||mz(e,t)||Ek(e,t)||pz()}function pz(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function mz(e,t){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(e)))){var r=[],n=!0,i=!1,o=void 0;try{for(var s=e[Symbol.iterator](),a;!(n=(a=s.next()).done)&&(r.push(a.value),!(t&&r.length===t));n=!0);}catch(l){i=!0,o=l}finally{try{!n&&s.return!=null&&s.return()}finally{if(i)throw o}}return r}}function vz(e){if(Array.isArray(e))return e}function Sk(e,t){var r;if(typeof Symbol>"u"||e[Symbol.iterator]==null){if(Array.isArray(e)||(r=Ek(e))||t&&e&&typeof e.length=="number"){r&&(e=r);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(u){throw u},f:i}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var o=!0,s=!1,a;return{s:function(){r=e[Symbol.iterator]()},n:function(){var u=r.next();return o=u.done,u},e:function(u){s=!0,a=u},f:function(){try{!o&&r.return!=null&&r.return()}finally{if(s)throw a}}}}function Ek(e,t){if(!!e){if(typeof e=="string")return I5(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return I5(e,t)}}function I5(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var Uy=Ht,gz=Uy.toPathPieces,N5=Uy.set,yz=Uy.remove2,_z=Uy.copy,bz=Tk,wz=Ay,xz=function(t,r,n){var i=Sk(n),o;try{for(i.s();!(o=i.n()).done;){var s=dz(o.value,2),a=s[0],l=s[1];l(t,r,a)}}catch(u){i.e(u)}finally{i.f()}return r},Tz=function(t){var r=bz(t),n=r.ast,i=r.paths,o=r.has_refs;if(!o){var s=n.run();return function(a){for(var l=arguments.length,u=new Array(l>1?l-1:0),c=1;c<l;c++)u[c-1]=arguments[c];return N5.apply(void 0,u.concat([s]))}}return function(a){var l=new wz(a);if(l.ensure(i)){for(var u=arguments.length,c=new Array(u>1?u-1:0),f=1;f<u;f++)c[f-1]=arguments[f];N5.apply(void 0,c.concat([n.run(l)]))}}},Sz=function(t,r){var n=function(x){return!!r[x]},i=!0;r.hasOwnProperty("_id")&&(i=n("_id"),delete r._id);var o=[],s=[],a=!0,l=function(x){if(n(x)!==a)throw Error("cannot mix inclusions and exclusions")},u=function(x){a=n(x),u=l};for(var c in r){var f=r[c],p=gz(c);typeof f=="boolean"||f===1||f===0?(u(c),o.push(p)):s.push([p,Tz(f)])}var v=[];if(s.length&&v.push(function(w,x){return xz(w,x,s)}),o.length){a===i&&o.push(["_id"]);var b=a?_z:yz;v.push(function(w){return b(w,o)})}else{var g;i?g=function(x,T){x.hasOwnProperty("_id")&&(T._id=x._id)}:g=function(x,T){delete T._id},v.push(function(w,x){return g(w,x),x})}var _=function(x){t(function(T,I){if(!I)return x(T);var R=I,E=Sk(v),O;try{for(E.s();!(O=E.n()).done;){var P=O.value;R=P(I,R)}}catch(N){E.e(N)}finally{E.f()}x(null,R)})};return _},Ez=Sz;function s0(e){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?s0=function(r){return typeof r}:s0=function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},s0(e)}function Ck(e,t){var r;if(typeof Symbol>"u"||e[Symbol.iterator]==null){if(Array.isArray(e)||(r=Cz(e))||t&&e&&typeof e.length=="number"){r&&(e=r);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(u){throw u},f:i}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var o=!0,s=!1,a;return{s:function(){r=e[Symbol.iterator]()},n:function(){var u=r.next();return o=u.done,u},e:function(u){s=!0,a=u},f:function(){try{!o&&r.return!=null&&r.return()}finally{if(s)throw a}}}}function Cz(e,t){if(!!e){if(typeof e=="string")return P5(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return P5(e,t)}}function P5(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Wc(e,t,r){return typeof Reflect<"u"&&Reflect.get?Wc=Reflect.get:Wc=function(i,o,s){var a=Iz(i,o);if(!!a){var l=Object.getOwnPropertyDescriptor(a,o);return l.get?l.get.call(s):l.value}},Wc(e,t,r||e)}function Iz(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&(e=il(e),e!==null););return e}function Pu(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ow(e,t)}function ow(e,t){return ow=Object.setPrototypeOf||function(n,i){return n.__proto__=i,n},ow(e,t)}function Au(e){var t=Az();return function(){var n=il(e),i;if(t){var o=il(this).constructor;i=Reflect.construct(n,arguments,o)}else i=n.apply(this,arguments);return Nz(this,i)}}function Nz(e,t){return t&&(s0(t)==="object"||typeof t=="function")?t:Pz(e)}function Pz(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Az(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}function il(e){return il=Object.setPrototypeOf?Object.getPrototypeOf:function(r){return r.__proto__||Object.getPrototypeOf(r)},il(e)}function ml(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function A5(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Ph(e,t,r){return t&&A5(e.prototype,t),r&&A5(e,r),e}var Ik=Ht,Rz=Ik.unknownOp,sw=Ik.hashify,Nk=Tk,Pk=Ay,Fy=function(){function e(){ml(this,e)}return Ph(e,[{key:"getOpValueWithRefs",value:function(r,n,i){var o=r.ast,s=r.fields;i(o.run(s))}},{key:"value",get:function(){return this._value}}],[{key:"getNoRefsSteps",value:function(r){return r.in_iter}},{key:"getOpValue",value:function(r,n){n(r.ast.run())}}]),e}(),Ak=function(e){Pu(r,e);var t=Au(r);function r(){var n;return ml(this,r),n=t.call(this),n._value=0,n}return Ph(r,[{key:"getOpValueWithRefs",value:function(i,o,s){Wc(il(r.prototype),"getOpValueWithRefs",this).call(this,i,o,function(a){r._verify(a,s)})}},{key:"add",value:function(i){this._value+=i}}],[{key:"_verify",value:function(i,o){typeof i=="number"&&o(i)}},{key:"getOpValue",value:function(i,o){Wc(il(r),"getOpValue",this).call(this,i,function(s){return r._verify(s,o)})}}]),r}(Fy),kz=function(e){Pu(r,e);var t=Au(r);function r(){var n;return ml(this,r),n=t.call(this),n._count=0,n}return Ph(r,[{key:"add",value:function(i){this._count++,Wc(il(r.prototype),"add",this).call(this,i)}},{key:"value",get:function(){return this._value/this._count||0}}]),r}(Ak),Rk=function(e){Pu(r,e);var t=Au(r);function r(n){var i;return ml(this,r),i=t.call(this),i._value=null,i._fn=n,i._add=i._add1,i}return Ph(r,[{key:"_add1",value:function(i){this._value=i,this._add=this._add2}},{key:"_add2",value:function(i){this._fn(i,this._value)&&(this._value=i)}},{key:"add",value:function(i){i!=null&&this._add(i)}}],[{key:"getNoRefsSteps",value:function(i){return i.in_end}}]),r}(Fy),Oz=function(e){Pu(r,e);var t=Au(r);function r(){return ml(this,r),t.call(this,function(n,i){return n<i})}return r}(Rk),Lz=function(e){Pu(r,e);var t=Au(r);function r(){return ml(this,r),t.call(this,function(n,i){return n>i})}return r}(Rk),Uz=function(e){Pu(r,e);var t=Au(r);function r(){var n;return ml(this,r),n=t.call(this),n._value=[],n}return Ph(r,[{key:"add",value:function(i){this._value.push(i)}}]),r}(Fy),Fz=function(e){Pu(r,e);var t=Au(r);function r(){var n;return ml(this,r),n=t.call(this),n._hashes={},n}return Ph(r,[{key:"add",value:function(i){this._hashes[sw(i)]=i}},{key:"value",get:function(){var i=[];for(var o in this._hashes)i.push(this._hashes[o]);return i}}],[{key:"getNoRefsSteps",value:function(i){return i.in_end}}]),r}(Fy),jd=function(t){for(var r=arguments.length,n=new Array(r>1?r-1:0),i=1;i<r;i++)n[i-1]=arguments[i];var o=Ck(t),s;try{for(o.s();!(s=o.n()).done;){var a=s.value;a.apply(void 0,n)}}catch(l){o.e(l)}finally{o.f()}},kk=function(t,r){var n=Ck(r),i;try{for(n.s();!(i=n.n()).done;){var o=i.value;jd(t,o)}}catch(s){n.e(s)}finally{n.f()}},Ok=function(t,r,n,i){return function(o){var s=function(l){l||kk(r,n),o(l,n)};(function a(){t(function(l,u){if(!u)return s(l);i(u),a()})})()}},Mz=function(t,r,n){var i=n.in_start,o=n.in_iter,s=n.in_end,a=[],l=function(v,g){var b={_id:g};return a.push(b),jd(i,b),b},u=r.ast,c=function(v){return u.run(new Pk(v))},f;return o.length?f=function(v){var g=c(v),b=l(sw(g),g);jd(o,b,v)}:f=function(v){var g=c(v);l(sw(g),g)},Ok(t,s,a,f)},Bz=function(t,r,n){if(r.has_refs)return Mz(t,r,n);var i=n.in_start,o=n.in_iter,s=n.in_end,a=[],l=function(){var f={_id:r.ast.run()};return jd(i,f),a.push(f),f};if(o.length){var u=function(){return l()};return Ok(t,s,a,function(c){jd(o,u(),c)})}return function(c){t(function(f,p){p&&(l(),kk(s,a)),c(f,a)})}},Dz={$sum:Ak,$avg:kz,$min:Oz,$max:Lz,$push:Uz,$addToSet:Fz},Gz=function(t,r,n){var i=t.in_start,o=t.in_iter,s=t.in_end,a=Object.keys(n);if(a.length>1)throw Error("fields must have only one operator");var l=a[0],u=Dz[l];if(!u)throw l[0]==="$"&&Rz(l),Error("unexpected field '".concat(l,"'"));var c=Nk(n[l]);i.push(function(f){f[r]=new u(c)}),c.has_refs?o.push(function(f,p){var v=new Pk(p);if(!!v.ensure(c.paths)){var g=f[r],b=Object.assign({fields:v},c),_=function(x){return g.add(x)};g.getOpValueWithRefs(b,p,_)}}):u.getOpValue(c,function(f){u.getNoRefsSteps(t).push(function(p){p[r].add(f)})}),s.push(function(f){f[r]=f[r].value})},jz=function(e,t){if(!t.hasOwnProperty("_id"))throw Error("the '_id' field is missing");var r=Nk(t._id),n=Object.assign({},t);delete n._id;var i={in_start:[],in_iter:[],in_end:[]};for(var o in n)Gz(i,o,n[o]);var s=Bz(e,r,i),a=function(u){s(function(c,f){c?u(c):(a=function(v){return v(null,f.pop())})(u)})};return function(l){return a(l)}};function $z(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Hz(e,t){var r;if(typeof Symbol>"u"||e[Symbol.iterator]==null){if(Array.isArray(e)||(r=zz(e))||t&&e&&typeof e.length=="number"){r&&(e=r);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(u){throw u},f:i}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var o=!0,s=!1,a;return{s:function(){r=e[Symbol.iterator]()},n:function(){var u=r.next();return o=u.done,u},e:function(u){s=!0,a=u},f:function(){try{!o&&r.return!=null&&r.return()}finally{if(s)throw a}}}}function zz(e,t){if(!!e){if(typeof e=="string")return R5(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return R5(e,t)}}function R5(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var Lk=Ht,Vz=Lk.toPathPieces,Xz=Lk.get,Wz=function(e,t){var r=Vz(t.substring(1)),n=[],i=function(l){return l(null,n.pop())},o=function(l,u){var c=n.length;if(Xz(l,r,function(f,p){var v=f[p];if(!!v&&v[Symbol.iterator]){var g=Hz(v),b;try{for(g.s();!(b=g.n()).done;){var _=b.value;n.push($z({},p,_))}}catch(w){g.e(w)}finally{g.f()}}}),c===n.length)return s(u);i(u)},s=function(l){e(function(u,c){u?l(u):c?o(c,l):(s=i)(l)})};return function(a){return s(a)}},Yz=function(e,t){var r=0,n=function i(o){e(function(s,a){a?++r>t?o(null,a):i(o):o(s)})};return n},Kz=function(e,t){var r=0,n=function(o){r++<t?e(o):o()};return n};function a0(e){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?a0=function(r){return typeof r}:a0=function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},a0(e)}function qz(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function k5(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Zz(e,t,r){return t&&k5(e.prototype,t),r&&k5(e,r),e}function Jz(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&aw(e,t)}function aw(e,t){return aw=Object.setPrototypeOf||function(n,i){return n.__proto__=i,n},aw(e,t)}function Qz(e){var t=rV();return function(){var n=fg(e),i;if(t){var o=fg(this).constructor;i=Reflect.construct(n,arguments,o)}else i=n.apply(this,arguments);return eV(this,i)}}function eV(e,t){return t&&(a0(t)==="object"||typeof t=="function")?t:tV(e)}function tV(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function rV(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}function fg(e){return fg=Object.setPrototypeOf?Object.getPrototypeOf:function(r){return r.__proto__||Object.getPrototypeOf(r)},fg(e)}var nV=UR,O5=Ey.exports,iV=yH,oV=ok,sV=Ez,aV=jz,lV=Wz,uV=ak,cV=Yz,hV=Kz,fV=function(e){Jz(r,e);var t=Qz(r);function r(n,i){var o;return qz(this,r),o=t.call(this),o._col=n,o._read_pref=i,o._pipeline=[],o._next=o._init,o}return Zz(r,[{key:"_forEach",value:function(i,o){var s=this;this._next(function(a,l){l?(i(l),s.emit("data",l),s._forEach(i,o)):(s.emit("end"),o(a))})}},{key:"forEach",value:function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:function(){},o=arguments.length>1?arguments[1]:void 0,s=O5.defer();return this._forEach(i,function(a){a?s.reject(a):s.resolve()}),s.promise.nodeify(o),s.promise}},{key:"_toArray",value:function(i){var o=[];this._forEach(function(s){o.push(s)},function(s){return i(s,o)})}},{key:"toArray",value:function(i){var o=O5.defer();return this._toArray(function(s,a){s?o.reject(s):o.resolve(a)}),o.promise.nodeify(i),o.promise}},{key:"_assertUnopened",value:function(){if(this._opened)throw Error("cursor has already been opened")}},{key:"hint",value:function(i){if(this._assertUnopened(),!this._col._isIndexed(i))throw Error("index '".concat(i,"' does not exist"));return this._hint=i,this}},{key:"_addStage",value:function(i,o){return this._assertUnopened(),this._pipeline.push([i,o]),this}},{key:"filter",value:function(i){return this._addStage(oV,i)}},{key:"limit",value:function(i){return this._addStage(hV,i)}},{key:"skip",value:function(i){return this._addStage(cV,i)}},{key:"project",value:function(i){return this._addStage(sV,i)}},{key:"group",value:function(i){return this._addStage(aV,i)}},{key:"unwind",value:function(i){return this._addStage(lV,i)}},{key:"sort",value:function(i){return this._addStage(uV,i)}},{key:"_init",value:function(i){this._opened=!0,this._next=iV(this),this._next(i)}}]),r}(nV),Uk=fV;function dV(e,t){return vV(e)||mV(e,t)||Fk(e,t)||pV()}function pV(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function mV(e,t){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(e)))){var r=[],n=!0,i=!1,o=void 0;try{for(var s=e[Symbol.iterator](),a;!(n=(a=s.next()).done)&&(r.push(a.value),!(t&&r.length===t));n=!0);}catch(l){i=!0,o=l}finally{try{!n&&s.return!=null&&s.return()}finally{if(i)throw o}}return r}}function vV(e){if(Array.isArray(e))return e}function gV(e,t){var r;if(typeof Symbol>"u"||e[Symbol.iterator]==null){if(Array.isArray(e)||(r=Fk(e))||t&&e&&typeof e.length=="number"){r&&(e=r);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(u){throw u},f:i}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var o=!0,s=!1,a;return{s:function(){r=e[Symbol.iterator]()},n:function(){var u=r.next();return o=u.done,u},e:function(u){s=!0,a=u},f:function(){try{!o&&r.return!=null&&r.return()}finally{if(s)throw a}}}}function Fk(e,t){if(!!e){if(typeof e=="string")return L5(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return L5(e,t)}}function L5(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var yV=Ht,_V=yV.unknownOp,bV=Uk,wV={$match:function(t,r){return t.filter(r)},$project:function(t,r){return t.project(r)},$group:function(t,r){return t.group(r)},$unwind:function(t,r){return t.unwind(r)},$sort:function(t,r){return t.sort(r)},$skip:function(t,r){return t.skip(r)},$limit:function(t,r){return t.limit(r)}},xV=function(t){var r=Object.keys(t);if(r.length>1)throw Error("stages must be passed only one operator");var n=r[0],i=wV[n];return i||_V(n),[i,t[n]]},TV=function(t,r){var n=new bV(t,"readonly"),i=gV(r),o;try{for(i.s();!(o=i.n()).done;){var s=o.value,a=xV(s),l=dV(a,2),u=l[0],c=l[1];u(n,c)}}catch(f){i.e(f)}finally{i.f()}return n},SV=TV;function dg(e,t){var r;if(typeof Symbol>"u"||e[Symbol.iterator]==null){if(Array.isArray(e)||(r=EV(e))||t&&e&&typeof e.length=="number"){r&&(e=r);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(u){throw u},f:i}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var o=!0,s=!1,a;return{s:function(){r=e[Symbol.iterator]()},n:function(){var u=r.next();return o=u.done,u},e:function(u){s=!0,a=u},f:function(){try{!o&&r.return!=null&&r.return()}finally{if(s)throw a}}}}function EV(e,t){if(!!e){if(typeof e=="string")return U5(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return U5(e,t)}}function U5(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var ta=Ht,F5=ta.toPathPieces,_4=ta.get,CV=ta.set,IV=ta.modify,NV=ta.remove1,PV=ta.rename,Mk=ta.equal,AV=ta.unknownOp,RV=ta.getIDBError,Xn={};Xn.$set=function(e,t){return function(r){CV(r,e,t)}};Xn.$unset=function(e){return function(t){return NV(t,e)}};Xn.$rename=function(e,t){return function(r){PV(r,e,t)}};var b4=function(t,r,n){return function(i){IV(i,t,r,n)}},Bk=function(t){return function(r,n){var i=function(a,l){var u=a[l];typeof u=="number"&&(a[l]=t(n,u))},o=function(a,l){return a[l]=0};return b4(r,i,o)}};Xn.$inc=Bk(function(e,t){return e+t});Xn.$mul=Bk(function(e,t){return e*t});var Dk=function(t){return function(r,n){var i=function(a,l){t(n,a[l])&&(a[l]=n)},o=function(a,l){return a[l]=n};return b4(r,i,o)}};Xn.$min=Dk(function(e,t){return e<t});Xn.$max=Dk(function(e,t){return e>t});Xn.$push=function(e,t){var r=function(o,s){var a=o[s];Array.isArray(a)&&a.push(t)},n=function(o,s){return o[s]=[t]};return b4(e,r,n)};Xn.$pop=function(e,t){var r;return t<1?r=function(i){return i.shift()}:r=function(i){return i.pop()},function(n){_4(n,e,function(i,o){var s=i[o];Array.isArray(s)&&r(s)})}};Xn.$pullAll=function(e,t){return function(r){_4(r,e,function(n,i){var o=n[i];if(!!Array.isArray(o)){var s=[],a=function(p){var v=dg(t),g;try{for(v.s();!(g=v.n()).done;){var b=g.value;if(Mk(p,b))return!0}}catch(_){v.e(_)}finally{v.f()}},l=dg(o),u;try{for(l.s();!(u=l.n()).done;){var c=u.value;a(c)||s.push(c)}}catch(f){l.e(f)}finally{l.f()}n[i]=s}})}};Xn.$pull=function(e,t){return Xn.$pullAll(e,[t])};Xn.$addToSet=function(e,t){return function(r){_4(r,e,function(n,i){var o=n[i];if(!!Array.isArray(o)){var s=dg(o),a;try{for(s.s();!(a=s.n()).done;){var l=a.value;if(Mk(l,t))return}}catch(u){s.e(u)}finally{s.f()}o.push(t)}})}};var kV=function(t,r,n){if(r[0]!=="$")return t.push(Xn.$set(F5(r),n));var i=Xn[r];i||AV(r);for(var o in n)t.push(i(F5(o),n[o]))},OV=function(e,t,r){var n=[];for(var i in t)kV(n,i,t[i]);if(!n.length)return r(null);(function o(){e._next(function(s,a,l){if(!a)return r(s);var u=dg(n),c;try{for(u.s();!(c=u.n()).done;){var f=c.value;f(a)}}catch(v){u.e(v)}finally{u.f()}var p=l.update(a);p.onsuccess=o,p.onerror=function(v){return r(RV(v))}})})()},LV=Ht,UV=LV.getIDBError,FV=function(e,t){(function r(){e._next(function(n,i,o){if(!i)return t(n);var s=o.delete();s.onsuccess=r,s.onerror=function(a){return t(UV(a))}})})()};function l0(e){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?l0=function(r){return typeof r}:l0=function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},l0(e)}function MV(e,t){var r;if(typeof Symbol>"u"||e[Symbol.iterator]==null){if(Array.isArray(e)||(r=BV(e))||t&&e&&typeof e.length=="number"){r&&(e=r);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(u){throw u},f:i}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var o=!0,s=!1,a;return{s:function(){r=e[Symbol.iterator]()},n:function(){var u=r.next();return o=u.done,u},e:function(u){s=!0,a=u},f:function(){try{!o&&r.return!=null&&r.return()}finally{if(s)throw a}}}}function BV(e,t){if(!!e){if(typeof e=="string")return M5(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return M5(e,t)}}function M5(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function DV(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function B5(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function GV(e,t,r){return t&&B5(e.prototype,t),r&&B5(e,r),e}var H2=Ey.exports,jV=Ht,$V=jV.getIDBError,D5=Uk,HV=SV,zV=OV,VV=FV,XV=function(){function e(t,r){DV(this,e),this._db=t,this._name=r,this._indexes=new Set}return GV(e,[{key:"_isIndexed",value:function(r){return this._indexes.has(r)||r==="_id"}},{key:"find",value:function(r,n){var i=new D5(this,"readonly");return i.filter(r),n&&i.project(n),i}},{key:"findOne",value:function(r,n,i){typeof n=="function"&&(i=n,n=null);var o=H2.defer(),s=this.find(r,n).limit(1);return s.toArray(function(a,l){a?o.reject(a):o.resolve(l[0])}),o.promise.nodeify(i),o.promise}},{key:"aggregate",value:function(r){return HV(this,r)}},{key:"_validate",value:function(r){for(var n in r){if(n[0]==="$")throw Error("field name cannot start with '$'");var i=r[n];if(Array.isArray(i)){var o=MV(i),s;try{for(o.s();!(s=o.n()).done;){var a=s.value;this._validate(a)}}catch(l){o.e(l)}finally{o.f()}}else l0(i)==="object"&&this._validate(i)}}},{key:"insert",value:function(r,n){var i=this;Array.isArray(r)||(r=[r]);var o=H2.defer();return this._db._getConn(function(s,a){var l,u=i._name;try{l=a.transaction([u],"readwrite")}catch(v){return o.reject(v)}l.oncomplete=function(){return o.resolve()},l.onerror=function(v){return o.reject($V(v))};var c=l.objectStore(u),f=0,p=function v(){var g=r[f];try{i._validate(g)}catch(_){return o.reject(_)}var b=c.add(g);b.onsuccess=function(){f++,f<r.length&&v()}};p()}),o.promise.nodeify(n),o.promise}},{key:"_modify",value:function(r,n,i){var o=H2.defer(),s=new D5(this,"readwrite");return s.filter(n),r(s,function(a){a?o.reject(a):o.resolve()}),o.promise.nodeify(i),o.promise}},{key:"update",value:function(r,n,i){var o=function(a,l){return zV(a,n,l)};return this._modify(o,r,i)}},{key:"remove",value:function(r,n){return this._modify(VV,r,n)}},{key:"name",get:function(){return this._name}}]),e}(),WV=XV;function G5(e,t){var r;if(typeof Symbol>"u"||e[Symbol.iterator]==null){if(Array.isArray(e)||(r=YV(e))||t&&e&&typeof e.length=="number"){r&&(e=r);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(u){throw u},f:i}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var o=!0,s=!1,a;return{s:function(){r=e[Symbol.iterator]()},n:function(){var u=r.next();return o=u.done,u},e:function(u){s=!0,a=u},f:function(){try{!o&&r.return!=null&&r.return()}finally{if(s)throw a}}}}function YV(e,t){if(!!e){if(typeof e=="string")return j5(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return j5(e,t)}}function j5(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Yc(e){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Yc=function(r){return typeof r}:Yc=function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},Yc(e)}function KV(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function $5(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function qV(e,t,r){return t&&$5(e.prototype,t),r&&$5(e,r),e}function ZV(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&lw(e,t)}function lw(e,t){return lw=Object.setPrototypeOf||function(n,i){return n.__proto__=i,n},lw(e,t)}function JV(e){var t=tX();return function(){var n=pg(e),i;if(t){var o=pg(this).constructor;i=Reflect.construct(n,arguments,o)}else i=n.apply(this,arguments);return QV(this,i)}}function QV(e,t){return t&&(Yc(t)==="object"||typeof t=="function")?t:eX(e)}function eX(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function tX(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}function pg(e){return pg=Object.setPrototypeOf?Object.getPrototypeOf:function(r){return r.__proto__||Object.getPrototypeOf(r)},pg(e)}var rX=UR,H5=Ey.exports,nX=Ht,z5=nX.getIDBError,iX=WV,oX=function(e){ZV(r,e);var t=JV(r);function r(n,i,o){var s;if(KV(this,r),s=t.call(this),s._name=n,Yc(i)==="object"?o=i:s._version=i,s._cols={},s._config={},s._initGetConn(),Array.isArray(o)){var a=G5(o),l;try{for(a.s();!(l=a.n()).done;){var u=l.value;s._addCollection(u),s._config[u]=!0}}catch(f){a.e(f)}finally{a.f()}}else for(var c in o)s._addCollection(c),s._addIndex(o[c],c);return s}return qV(r,[{key:"_addCollection",value:function(i){this._cols[i]=new iX(this,i)}},{key:"_addIndex",value:function(i,o){var s=this._config;if(!i)return s[o]=!1;if(Yc(i)!=="object")return s[o]={};var a=this._cols[o];if(Array.isArray(i)){var l={},u=G5(i),c;try{for(u.s();!(c=u.n()).done;){var f=c.value;l[f]=!0,a._indexes.add(f)}}catch(v){u.e(v)}finally{u.f()}s[o]=l}else{for(var p in i)i[p]&&a._indexes.add(p);s[o]=i}}},{key:"_addStore",value:function(i,o){var s=i.createObjectStore(o,{keyPath:"_id",autoIncrement:!0}),a=this._config[o];for(var l in a)a[l]?s.createIndex(l,l,{unique:!1}):s.deleteIndex(l)}},{key:"_getConn",value:function(i){var o=this,s;this._version?s=indexedDB.open(this._name,this._version):s=indexedDB.open(this._name),s.onsuccess=function(a){var l=a.target.result;o._idb=l,o._version=l.version,o._open=!0,i(null,l)},s.onerror=function(a){return i(z5(a))},s.onupgradeneeded=function(a){var l=a.target.result;for(var u in o._config)try{o._config[u]?l.objectStoreNames.contains(u)||o._addStore(l,u):l.deleteObjectStore(u)}catch(c){return i(c)}},s.onblocked=function(){return o.emit("blocked")}}},{key:"_initGetConn",value:function(){}},{key:"collection",value:function(i){var o=this._cols[i];if(!o)throw Error("collection '".concat(i,"' does not exist"));return o}},{key:"open",value:function(i){var o=this,s=H5.defer();return this._getConn(function(a){a?s.reject(a):s.resolve(o)}),s.promise.nodeify(i),s.promise}},{key:"close",value:function(){this._open&&(this._idb.close(),this._open=!1,this._initGetConn())}},{key:"drop",value:function(i){this.close();var o=H5.defer(),s=indexedDB.deleteDatabase(this._name);return s.onsuccess=function(){return o.resolve()},s.onerror=function(a){return o.reject(z5(a))},o.promise.nodeify(i),o.promise}},{key:"name",get:function(){return this._name}},{key:"version",get:function(){return this._version}}]),r}(rX),sX=oX,aX={Db:sX};class z2{constructor(t){this.instance=t}insert(t){return this.instance.insert(t)}update(t,r){return this.instance.update(t,r)}updateById(t,r){return this.instance.update({id:t},r)}findOne(t){return this.instance.findOne(t)}find(t){return this.instance.find(t).toArray()}findOneById(t){return this.instance.findOne({id:t})}remove(t){return this.instance.remove(t)}removeById(t){return this.instance.remove({id:t})}}class V2{constructor(t){this.fs=Zv==null?void 0:Zv.fs,this.table=t,this.baseSettings={dir:this.fs.BaseDirectory.App},this.initializing=!1,this.init()}async init(){this.initializing=this.fs.createDir(this.table,{...this.baseSettings,recursive:!0}),await this.initializing,this.initializing=!1}async ensureInitialized(){this.initializing&&await this.initializing}async getDirAsArray(){await this.ensureInitialized();const t=await this.fs.readDir(this.table,this.baseSettings),r=[];for(const n of t)n.children||r.push(this.fs.readTextFile(`${this.table}/${n.name}`,this.baseSettings));return(await Promise.all(r)).map(n=>JSON.parse(n))}async remove(t){const n=(await this.getDirAsArray()).filter(i=>this.queryElement(t,i));for(const i of n)await this.fs.removeFile(`${this.table}/${i.id}.json`,this.baseSettings)}async removeById(t){await this.fs.removeFile(`${this.table}/${t}.json`,this.baseSettings)}async insert(t){await this.fs.writeTextFile(`${this.table}/${t.id}.json`,JSON.stringify(t),this.baseSettings)}async updateById(t,r){await this.fs.writeTextFile(`${this.table}/${t}.json`,JSON.stringify(r),this.baseSettings)}async update(t,r){const i=(await this.getDirAsArray()).find(o=>this.queryElement(t,o));!i||await this.fs.writeTextFile(`${this.table}/${i.id}.json`,JSON.stringify(r),this.baseSettings)}async findOne(t){return(await this.getDirAsArray()).find(n=>this.queryElement(t,n))||null}async findOneById(t){await this.ensureInitialized();try{const r=await this.fs.readTextFile(`${this.table}/${t}.json`,this.baseSettings);return JSON.parse(r)}catch(r){return console.error(r),null}}async find(t){return(await this.getDirAsArray()).filter(n=>this.queryElement(t,n))}queryElement(t,r){const n=Object.entries(t).map(([i,o])=>({key:i,value:o}));for(const i of n)if(r[i.key]!==i.value)return!1;return!0}}class lX{constructor(){this.instance=new aX.Db(je,3,{songs:[],themes:[],folders:[]}),H3?this.collections={songs:new V2("songs"),themes:new V2("themes"),folders:new V2("folders")}:this.collections={songs:new z2(this.instance.collection("songs")),themes:new z2(this.instance.collection("themes")),folders:new z2(this.instance.collection("folders"))}}generateId(){function t(){return Math.floor((1+Math.random())*65536).toString(16).substring(1)}return t()+t()+"-"+t()+"-"+t()+"-"+t()}}const Jl=new lX;class uX{constructor(){this.themeCollection=Jl.collections.themes}async getTheme(t){var n;const r=await this.themeCollection.findOneById(t);if(r){const i=r.other.id;r.type="theme",r.id=(n=r.id||i)!=null?n:null,delete r._id}return r}async getThemes(){const t=await this.themeCollection.find({});return t.forEach(r=>{var i;const n=r.other.id;r.type="theme",r.id=(i=r.id||n)!=null?i:null,delete r._id}),t}async addTheme(t){const r=Jl.generateId();return t.id=r,await this.themeCollection.insert(t),r}updateTheme(t,r){return r.id=t,this.themeCollection.updateById(t,r)}removeTheme(t){return this.themeCollection.remove(t)}removeThemeById(t){return this.themeCollection.removeById(t)}getCurrentThemeId(){return localStorage.getItem(je+"_Theme")}setCurrentThemeId(t){localStorage.setItem(je+"_Theme",t!=null?t:"")}_clearAll(){return this.themeCollection.remove({})}}const mo=new uX;var cX=Object.defineProperty,hX=Object.getOwnPropertyDescriptor,fX=(e,t,r,n)=>{for(var i=n>1?void 0:n?hX(t,r):t,o=e.length-1,s;o>=0;o--)(s=e[o])&&(i=(n?s(t,r,i):s(i))||i);return n&&i&&cX(t,r,i),i};class Gk{constructor(){this.themes=[],ki(this),this.sync()}async sync(){const t=await mo.getThemes();this.themes.splice(0,this.themes.length,...t)}async addTheme(t){const r=await mo.addTheme(t);return await this.sync(),r}async updateTheme(t,r){await mo.updateTheme(t,r),await this.sync()}async removeTheme(t){await mo.removeTheme(t),await this.sync()}async removeThemeById(t){await mo.removeThemeById(t),await this.sync()}async _DANGEROUS_CLEAR_ALL_THEMES(){await mo._clearAll(),await this.sync()}getCurrentThemeId(){return mo.getCurrentThemeId()}setCurrentThemeId(t){return mo.setCurrentThemeId(t)}}fX([gt.shallow],Gk.prototype,"themes",2);const Xa=new Gk;class V5{constructor(t){this.toJson=()=>JSON.stringify(this.state),this.state=_i(wR),this.state.other.name=t,this.state.editable=!0}serialize(){return{..._i(this.state),id:null,type:"theme"}}}const w4=[wR,...UG];class jk{constructor(t){this.load=async()=>{try{const r=mo.getCurrentThemeId();if(r!==null){const n=w4.find(o=>o.id===r);if(n)return this.loadFromTheme(n);const i=await mo.getTheme(r);if(i)return this.loadFromTheme(i)}}catch(r){console.error(r)}},this.getId=()=>this.state.id,this.get=r=>Lt(this.state.data[r].value),this.getText=r=>Lt(this.state.data[r].text),this.getOther=r=>this.state.other[r],this.getValue=r=>this.state.data[r].value,this.toArray=()=>Object.values(this.state.data),this.reset=r=>{this.state.data[r]={...this.baseTheme.data[r]}},this.isDefault=r=>this.state.data[r].value.toLowerCase()===this.baseTheme.data[r].value.toLowerCase(),this.isEditable=()=>this.state.editable,this.layer=(r,n,i)=>{const o=this.get(r);return i?o.luminosity()<i?o.darken(n):o.lighten(n):o.isDark()?o.lighten(n*1.1):o.darken(n)},this.serialize=()=>{var r;return{..._i(this.state),id:(r=this.state.id)!=null?r:null,type:"theme"}},this.setBackground=(r,n)=>{this.setOther("backgroundImage"+n,r),this.save()},this.loadFromJson=r=>{try{this.toArray().forEach(n=>{this.reset(n.name)}),Object.entries(r.data).forEach(([n,i])=>{if(this.baseTheme.data[n]!==void 0){const o=Lt(i.value);this.set(n,i.value.includes("rgba")?o.rgb().toString():o.toString())}}),Object.entries(r.other).forEach(([n,i])=>{this.baseTheme.other[n]!==void 0&&this.setOther(n,i)}),this.state.editable=Boolean(r.editable)}catch(n){console.error(n),we.error("There was an error loading the theme",4e3)}},this.loadFromTheme=r=>{for(const[n,i]of Object.entries(r.data))this.set(n,i.value);for(const[n,i]of Object.entries(r.other))this.setOther(n,i);this.state.editable=Boolean(r.editable),this.state.id=r.id},this.sanitize=r=>{const n=_i(this.baseTheme);return Object.entries(r.data).forEach(([i,o])=>{if(n.data[i]!==void 0){const s=Lt(o.value);n.data[i].value=s.toString(),n.data[i].text=s.isDark()?ut.text.light:ut.text.dark}}),Object.entries(r.other).forEach(([i,o])=>{n.other[i]!==void 0&&(n.other[i]=o)}),n.editable=Boolean(r.editable),n},this.wipe=()=>{this.loadFromJson(_i(this.baseTheme))},this.setOther=(r,n)=>{this.state.other[r]=n},this.set=(r,n)=>{this.state.data[r]={...this.state.data[r],name:r,value:n.toLowerCase(),text:Lt(n).isDark()?ut.text.light:ut.text.dark}},this.save=()=>{if(Xa.setCurrentThemeId(this.getId()),!!this.state.editable)return Xa.updateTheme(this.state.id,_i(this.state))},this.baseTheme=_i(t),this.state=gt(_i(t)),this.load()}static isSerializedType(t){return typeof t!="object"?!1:!!(t.type==="theme"||t.data&&t.other)}}const xe=new jk(w4[0]);function fn(){const[e,t]=M.exports.useState(xe);return M.exports.useEffect(()=>My(t),[]),[e,t]}function My(e){const t=jn(xe.state.data,()=>{e({...xe})});return e({...xe}),t}function Ct({className:e="",onClick:t,children:r,data:n,style:i,isActive:o,ariaLabel:s}){const[a]=fn();return m("button",{className:`menu-item ${e}`,style:{backgroundColor:o?a.layer("primary",.2).toString():a.layer("primary",0).toString(),...i},"aria-label":s,onClick:l=>{oG(l),t==null||t(n)},children:r})}class mg{constructor(){this.listeners=[],this.create=()=>{window.addEventListener("keydown",this.handleEvent),window.addEventListener("keyup",this.handleEvent),window.addEventListener("keypress",this.handleEvent)},this.destroy=()=>{this.clear(),window.removeEventListener("keydown",this.handleEvent),window.removeEventListener("keyup",this.handleEvent),window.removeEventListener("keypress",this.handleEvent)},this.clear=()=>{this.handlers.clear(),this.listeners=[]},this.listen=(t,r)=>{const n=mg.emptyHandler;return n.callback=t,r&&Object.assign(n.options,r),this.listeners.push(n),t},this.unlisten=t=>{this.listeners=this.listeners.filter(r=>r.callback!==t)},this.unregister=(t,r)=>{var i;const n=this.handlers.get(t);n&&(this.handlers.set(t,n.filter(o=>o.callback!==r)),((i=this.handlers.get(t))==null?void 0:i.length)===0&&this.handlers.delete(t))},this.unregisterById=t=>{this.handlers.forEach((r,n)=>{var i;this.handlers.set(n,r.filter(o=>o.options.id!==t)),((i=this.handlers.get(n))==null?void 0:i.length)===0&&this.handlers.delete(n)}),this.listeners=this.listeners.filter(r=>r.options.id!==t)},this.register=(t,r,n)=>{var o;const i=mg.emptyHandler;return i.callback=r,n&&Object.assign(i.options,n),this.handlers.has(t)?(o=this.handlers.get(t))==null||o.push(i):this.handlers.set(t,[i]),r},this.registerLetter=(t,r,n)=>(this.register(`Key${t}`,r,n),r),this.registerNumber=(t,r,n)=>{const i=t.toString();return this.register(`Digit${i}`,r,n),r},this.handleEvent=t=>{var l,u;if(((l=document.activeElement)==null?void 0:l.tagName)==="INPUT")return;const r=t.code,n=t.type==="keyup",i=t.type==="keydown",o=r.replace("Key",""),s=t.shiftKey,a={letter:o,shift:s,event:t,code:r};this.listeners.forEach(c=>{c.options.type==="keydown"&&i&&c.callback(a),c.options.type==="keyup"&&n&&c.callback(a)}),this.handlers.has(r)&&((u=this.handlers.get(r))==null||u.forEach(c=>{(s&&c.options.shift||!s&&!c.options.shift)&&(c.options.type==="keydown"&&i&&c.callback(a),c.options.type==="keyup"&&n&&c.callback(a))}))},this.handlers=new Map}static get emptyHandler(){return{callback:()=>{},options:{shift:!1,id:"",type:"keydown"}}}}const Xe=new mg;function Gn({children:e,position:t="bottom",style:r}){return m("span",{className:`tooltip tooltip-${t}`,style:r,children:e})}function Wn(e){return e?"has-tooltip":""}function Be({style:e={},className:t="",children:r,toggled:n=!1,onClick:i,disabled:o=!1,visible:s=!0,tooltip:a,ariaLabel:l,tooltipPosition:u}){return k("button",{className:`app-button ${t} ${n?"active":""} ${Wn(a)}`,style:{...e,...s?{}:{display:"none"}},"aria-label":l,onClick:c=>i==null?void 0:i(c),disabled:o,children:[r,a&&m(Gn,{position:u,children:a})]})}function dX({className:e}){return k("svg",{width:"1em",height:"1em",viewBox:"0 0 222 211",fill:"currentColor",className:e,xmlns:"http://www.w3.org/2000/svg",children:[m("path",{d:"M190 176C190 191.464 177.464 204 162 204C146.536 204 134 191.464 134 176C134 160.536 146.536 148 162 148C177.464 148 190 160.536 190 176Z"}),m("path",{d:"M32.4832 178.489C31.1118 177.118 31.1118 174.894 32.4832 173.523L63.5229 142.483C64.8943 141.112 67.1179 141.112 68.4893 142.483L99.529 173.523C100.9 174.894 100.9 177.118 99.529 178.489L68.4893 209.529C67.1179 210.9 64.8943 210.9 63.5229 209.529L32.4832 178.489Z"}),m("path",{d:"M41 3.51175C41 1.57226 42.5723 0 44.5117 0H88.4086C90.3481 0 91.9203 1.57226 91.9203 3.51175V47.4086C91.9203 49.3481 90.3481 50.9203 88.4086 50.9203H44.5117C42.5723 50.9203 41 49.3481 41 47.4086V3.51175Z"}),m("path",{d:"M49 36C49 34.8954 49.8954 34 51 34H81C82.1046 34 83 34.8954 83 36V162C83 163.105 82.1046 164 81 164H51C49.8954 164 49 163.105 49 162V36Z"}),m("path",{d:"M33.551 160.54C34.0997 159.957 33.6863 159 32.8858 159H17C7.61116 159 0 166.611 0 176C0 185.389 7.61116 193 17 193H32.8858C33.6863 193 34.0997 192.043 33.551 191.46L19.6451 176.685C19.2827 176.3 19.2827 175.7 19.6451 175.315L33.551 160.54Z"}),m("path",{d:"M98.5862 160.685C97.9856 160.047 98.4381 159 99.3144 159H128.338C129.064 159 129.508 159.796 129.127 160.414C123.226 169.967 123.226 182.033 129.127 191.586C129.508 192.204 129.064 193 128.338 193H99.3144C98.4381 193 97.9856 191.953 98.5862 191.315L112.355 176.685C112.717 176.3 112.717 175.7 112.355 175.315L98.5862 160.685Z"}),m("path",{d:"M221.5 176C221.5 166.611 213.889 159 204.5 159H195.662C194.936 159 194.492 159.796 194.873 160.414C200.774 169.967 200.774 182.033 194.873 191.586C194.492 192.204 194.936 193 195.662 193H204.5C213.889 193 221.5 185.389 221.5 176Z"})]})}function pX({className:e}){return k("svg",{width:"1em",height:"1em",viewBox:"0 0 192 177",className:e,fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",children:[m("path",{d:"M71 129C71 141.15 61.1503 151 49 151C36.8497 151 27 141.15 27 129C27 116.85 36.8497 107 49 107C61.1503 107 71 116.85 71 129Z"}),m("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M16.7385 0H175.262C184.506 0 192 7.36161 192 16.4426V160.557C192 169.638 184.506 177 175.262 177H16.7385C7.49406 177 0 169.638 0 160.557V16.4426C0 7.36161 7.49407 0 16.7385 0ZM15.7538 75.9262V20.3115C15.7538 17.6406 17.958 15.4754 20.6769 15.4754H171.323C174.042 15.4754 176.246 17.6406 176.246 20.3115V75.9262C176.246 78.5971 174.042 80.7623 171.323 80.7623H20.6769C17.958 80.7623 15.7538 78.5971 15.7538 75.9262ZM171.323 96.2377H20.6769C17.958 96.2377 15.7538 98.4029 15.7538 101.074V156.689C15.7538 159.359 17.958 161.525 20.6769 161.525H171.323C174.042 161.525 176.246 159.359 176.246 156.689V101.074C176.246 98.4029 174.042 96.2377 171.323 96.2377Z"}),m("path",{d:"M167 46.5C167 58.6503 157.15 68.5 145 68.5C132.85 68.5 123 58.6503 123 46.5C123 34.3497 132.85 24.5 145 24.5C157.15 24.5 167 34.3497 167 46.5Z"})]})}function is(e){const[t,r]=M.exports.useState(e);return M.exports.useEffect(()=>$d(e,r),[e]),t}function Wa(e){const[t,r]=M.exports.useState(e);return M.exports.useEffect(()=>$k(e,r),[e]),t}function $k(e,t){const r=jn(e,()=>{t([...e])});return t([...e]),r}function $d(e,t){const r=jn(e,n=>{t({...e},n)});return t({...e}),r}var mX=Object.defineProperty,vX=Object.getOwnPropertyDescriptor,gX=(e,t,r,n)=>{for(var i=n>1?void 0:n?vX(t,r):t,o=e.length-1,s;o>=0;o--)(s=e[o])&&(i=(n?s(t,r,i):s(i))||i);return n&&i&&mX(t,r,i),i};class Hk{constructor(){this.state={canShow:!1,visible:!1,isInPosition:!1,hasPersistentStorage:!1},this.open=()=>{this.setState({visible:!0,isInPosition:!1})},this.close=()=>{this.setState({isInPosition:!0}),setTimeout(()=>{this.setState({visible:!1})},150)},this.override=t=>{t?this.open():this.close()},this.setState=t=>{Object.assign(this.state,t)},ki(this)}}gX([gt],Hk.prototype,"state",2);const an=new Hk;function yX({askForStorage:e,hasVisited:t,setDontShowHome:r,closeWelcomeScreen:n}){const i=is(an.state),[o,s]=M.exports.useState(100),[a,l]=M.exports.useState("Unknown"),[u,c]=M.exports.useState(!1),f=i.isInPosition?"home":"home home-visible",p=B3(),[v]=fn();return M.exports.useEffect(()=>{const g=JSON.parse(localStorage.getItem(je+"-font-size")||"100");if(g<75||g>125)return s(100);s(g)},[]),M.exports.useEffect(()=>{const g=document.querySelector("html");if(!!g){if(localStorage.setItem(je+"-font-size",`${o}`),o===100){g.style.removeProperty("font-size");return}g.style.fontSize=`${o}%`}},[o]),M.exports.useEffect(()=>{const g=p.listen(b=>{l(b.pathname.replace("/",""))});return l(window.location.hash.replace("#/","")),Xe.register("Escape",()=>{an.state.visible&&an.close()},{id:"home"}),c(window.innerWidth>900),()=>{g(),Xe.unregisterById("home")}},[p]),k("div",{className:`${f} ignore_click_outside column`,style:{...i.visible?{}:{display:"none"},backgroundColor:v.get("background").fade(.1).toString()},children:[m(Ct,{className:"close-home",onClick:an.close,ariaLabel:"Close home menu",children:m(Zi,{size:25})}),k("div",{className:"home-padded column",children:[(u||!t)&&k("div",{className:"home-top",children:[k("div",{className:"home-title",children:[je," Music Nightly"]}),k("div",{className:"home-top-text",children:["An app where you can create, practice and play songs for ",je]})]}),!t&&k("div",{className:"home-welcome",children:[k("div",{children:[!W0()&&m("div",{className:"home-spacing",children:"To have the webapp fullscreen and better view, please add the website to the home screen"}),k("div",{className:"home-spacing",children:[m("div",{className:"red-text",children:"WARNING"}),": Clearing your browser cache / storage might delete your songs, make sure you make backups"]}),i.hasPersistentStorage?k("div",{children:[m("div",{className:"red-text",children:"WARNING"}),": ","Click the button below to make sure that your browser won't delete your songs if you lack storage"]}):null,k("div",{children:[m("span",{style:{marginRight:"0.2rem"},children:"We use cookies for analytics, by continuing to use this app, you agree to our use of cookies, learn more"}),m(hi,{to:"Privacy",style:{color:"var(--primary-text)",textDecoration:"underline"},onClick:an.close,children:"here"})]})]}),m("div",{style:{display:"flex",justifyContent:"flex-end"},children:m("button",{className:"home-accept-storage",onClick:()=>{n(),e()},children:"Confirm"})})]}),k("div",{className:"home-content",children:[m(W5,{icon:m(zF,{}),title:"Composer",style:{backgroundColor:v.layer("primary",.15,.2).fade(.15).toString()},background:"./manifestData/composer.webp",href:"Composer",isCurrent:a==="Composer",children:"Create or edit songs with a fully fledged music composer. Also with MIDI."}),m(W5,{icon:m(oM,{}),title:"Player",style:{backgroundColor:v.layer("primary",.15,.2).fade(.15).toString()},background:"./manifestData/main.webp",href:"",isCurrent:a===""||a==="Player",children:"Play, download, record and import songs. Learn a song with approaching circle mode and practice mode."})]}),k("div",{className:"row space-around middle-size-pages-wrapper",children:[m(X5,{Icon:pX,current:a==="VsrgComposer",href:"VsrgComposer",children:k("span",{style:{fontSize:"1rem"},className:"row-centered",children:["Vsrg Composer",m("span",{style:{fontSize:"0.7rem",marginLeft:"0.3rem"},children:"(beta)"})]})}),m(X5,{Icon:dX,current:a==="VsrgPlayer",href:"VsrgPlayer",children:k("span",{style:{fontSize:"1rem"},className:"row-centered",children:["Vsrg Player",m("span",{style:{fontSize:"0.7rem",marginLeft:"0.3rem"},children:"(beta)"})]})})]}),m(_X,{}),k("div",{className:"page-redirect-wrapper",children:[!W0()&&m(ws,{href:"Donate",current:a==="Donate",children:"Donate"}),m(ws,{href:"ZenKeyboard",current:a==="ZenKeyboard",children:"Zen Keyboard"}),m(ws,{href:"SheetVisualizer",current:a==="SheetVisualizer",children:"Sheet Visualizer"}),m(ws,{href:"Theme",current:a==="Theme",children:"App Theme"}),m(ws,{href:"Changelog",current:a==="Changelog",children:"Changelog"}),m(ws,{href:"Partners",current:a==="Partners",children:"Partners"}),m(ws,{href:"Help",current:a==="Help",children:"Help"}),m(ws,{href:"Backup",current:a==="Backup",children:"Backup"}),!lu&&m(ws,{href:"Keybinds",current:a==="Keybinds",children:"Keybinds"})]})]}),k("div",{className:"home-bottom",children:[k("div",{className:"home-app-scaling row-centered",children:[m("span",{children:"App scale"}),m(Be,{className:"flex-centered",onClick:()=>{const g=o-2;g<75||s(g)},children:m(iy,{})}),m(Be,{className:"flex-centered",style:{marginRight:"0.5rem"},onClick:()=>{const g=o+2;g>125||s(g)},children:m(au,{})}),o,"%"]}),k("span",{style:{padding:"0 1rem",textAlign:"center"},children:["\xA9 All rights reserved by ","HoYoverse",". Other properties belong to their respective owners."]}),k("div",{className:"home-dont-show-again row-centered",onClick:()=>r(!i.canShow),children:[m("input",{type:"checkbox",checked:!i.canShow,readOnly:!0}),m("span",{children:"Hide on open"})]})]})]})}function X5({href:e,children:t,Icon:r,current:n}){return k(hi,{to:e,onClick:an.close,className:`middle-size-page row ${n?"current-page":""}`,children:[m(r,{className:"middle-size-page-icon"}),t]})}function ws({children:e,current:t,href:r}){return m(hi,{onClick:an.close,to:r,className:t?"current-page":"",children:e})}function W5({title:e,icon:t,children:r,background:n,isCurrent:i,href:o,style:s={}}){return k(hi,{className:`home-content-element ${i?"current-page":""}`,to:o,onClick:an.close,children:[m("div",{className:"home-content-background",style:{backgroundImage:`url(${n})`}}),k("div",{className:"home-content-main",style:s,children:[k("div",{className:"home-content-title",children:[t," ",e]}),m("div",{className:"home-content-text",children:r}),m("div",{className:"home-content-open",children:m("button",{children:"OPEN"})})]})]})}function _X({children:e}){return m("div",{className:"home-separator",children:e})}function bX({decorationColor:e,size:t,offset:r="0"}){const n={position:"absolute",width:t!=null?t:"0.8rem",height:t!=null?t:"0.8rem",color:e!=null?e:"var(--secondary)"};return k(De,{children:[m(Qm,{style:{...n,top:r,right:r,transform:"translate(50%, -50%) rotate(-135deg)"}}),m(Qm,{style:{...n,top:r,left:r,transform:"translate(-50%, -50%) rotate(135deg)"}}),m(Qm,{style:{...n,bottom:r,right:r,transform:"translate(50%, 50%) rotate(-45deg)"}}),m(Qm,{style:{...n,bottom:r,left:r,transform:"translate(-50%, 50%) rotate(45deg)"}})]})}const By=M.exports.forwardRef(function(t,r){var i,o,s;const n=(i=t.isRelative)!=null?i:!0;return k("div",{...t.boxProps,ref:r,style:{...n?{position:"relative"}:{},...(s=(o=t.boxProps)==null?void 0:o.style)!=null?s:{}},onClick:t.onClick,children:[t.children,m(bX,{decorationColor:t.decorationColor,size:t.size,offset:t.offset})]})});function Qm({style:e}){return m("svg",{style:e,viewBox:"0 0 121 121",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",children:m("path",{d:"M115.674 57.8647C117.754 58.9629 117.77 61.9275 115.739 63.113C89.4847 78.4378 76.7901 90.8857 63.8487 114.065C62.3174 116.808 58.346 116.913 56.6888 114.244C41.4088 89.6383 28.3853 77.334 3.39872 62.2065C2.08229 61.4095 2.11774 59.4753 3.467 58.7352C46.8754 34.9254 72.7237 35.1787 115.674 57.8647Z"})})}function wX(){const e=Wa(we.toasts),t=is(we.pillState);return k(De,{children:[m("div",{className:"logger-wrapper",children:e.map(r=>m(xX,{toast:r},r.id))}),m("div",{className:`flex-centered pill ${t.visible?"pill-visible":""}`,children:t.text})]})}function xX({toast:e}){const t=is(e),{text:r,type:n,id:i,timeout:o,visible:s}=t,a=r.length>150;return k(By,{boxProps:{className:s?"logger-toast":"logger-toast logger-toast-hidden",style:{maxWidth:a?"24rem":"19rem"}},onClick:()=>{we.removeToast(i)},children:[k("div",{className:"logger-content",children:[!a&&k("div",{className:"logger-status",children:[n===t0.ERROR&&m(rM,{color:n,size:20}),n===t0.SUCCESS&&m(DF,{color:n,size:20}),n===t0.WARN&&m(WF,{color:n,size:20})]}),m("div",{className:"logger-text",children:r})]}),m("div",{className:"logger-progress-outer",children:m("div",{className:"logger-progress-bar",style:{animation:`logger-animation ${o}ms linear forwards`,backgroundColor:n}},i)})]},i)}const TX=""+new URL("rotate.3e4d8401.svg",import.meta.url).href;class SX{constructor(){this.pages=[]}get lastPage(){return this.pages[this.pages.length-1]}get hasNavigated(){return this.pages.length>0}addPage(t){this.pages.push(t)}}const x4=new SX;function Ql(e){var t,r,n,i,o;return m(Be,{...e,style:{width:(t=e.size)!=null?t:"2rem",height:(r=e.size)!=null?r:"2rem",minWidth:(n=e.size)!=null?n:"2rem",minHeight:(i=e.size)!=null?i:"2rem",...e.style},className:`icon-app-button flex-centered ${(o=e.className)!=null?o:""}`,children:e.children})}var EX=Object.defineProperty,CX=Object.getOwnPropertyDescriptor,IX=(e,t,r,n)=>{for(var i=n>1?void 0:n?CX(t,r):t,o=e.length-1,s;o>=0;o--)(s=e[o])&&(i=(n?s(t,r,i):s(i))||i);return n&&i&&EX(t,r,i),i};const ev=new Map;class Mn{constructor(t=Pr[0]){this.volumeNode=null,this.notes=[],this.layouts={keyboard:[],mobile:[],abc:[]},this.buffers=[],this.isDeleted=!1,this.isLoaded=!1,this.getNoteFromCode=n=>{const i=this.getNoteIndexFromCode(n);return i!==-1?this.notes[i]:null},this.getNoteIndexFromCode=n=>this.layouts.keyboard.findIndex(i=>i===n),this.getNoteText=(n,i,o)=>{var a;const s=this.layouts;try{if(i==="Note name"){const l=this.notes[n].baseNote;return gA[l][(a=fM.get(o))!=null?a:0]}if(i==="Keyboard layout")return s.keyboard[n];if(i==="Do Re Mi")return s.mobile[n];if(i==="ABC")return s.abc[n];if(i==="No Text")return""}catch{}return""},this.changeVolume=n=>{let i=Number((n/135).toFixed(2));n<5&&(i=0),this.volumeNode&&(this.volumeNode.gain.value=i)},this.play=(n,i)=>{if(this.isDeleted||!this.volumeNode)return;const o=fG(i),s=sn.createBufferSource();s.buffer=this.buffers[n],s.connect(this.volumeNode),s.playbackRate.value=o,s.start(0);function a(){s.stop(),s.disconnect()}s.addEventListener("ended",a,{once:!0})},this.load=async()=>{this.volumeNode=sn.createGain(),this.volumeNode.gain.value=.8;let n=!0;if(ev.has(this.name))this.buffers=ev.get(this.name);else{const i=sn.createBuffer(2,sn.sampleRate,sn.sampleRate),o=this.notes.map(s=>uw(s.url).catch(()=>(n=!1,i)));this.buffers=await Promise.all(o),n&&ev.set(this.name,this.buffers)}return this.isLoaded=!0,n},this.disconnect=n=>{var i,o;if(n)return(i=this.volumeNode)==null?void 0:i.disconnect(n);(o=this.volumeNode)==null||o.disconnect()},this.connect=n=>{var i;(i=this.volumeNode)==null||i.connect(n)},this.dispose=()=>{this.disconnect(),this.isDeleted=!0,this.buffers=[],this.volumeNode=null},this.name=t,Pr.includes(this.name)||(this.name=Pr[0]),this.instrumentData={...el[this.name]};const r=this.instrumentData.layout;this.layouts={keyboard:[...r.keyboardLayout],mobile:[...r.mobileLayout],abc:[...r.abcLayout]};for(let n=0;n<this.instrumentData.notes;n++){const o={keyboard:this.layouts.keyboard[n],mobile:this.layouts.mobile[n]},s=`./assets/audio/${this.name}/${n}.mp3`,a=new Vk(n,o,s,this.instrumentData.baseNotes[n]);a.instrument=this.name,a.noteImage=this.instrumentData.icons[n],this.notes.push(a)}}get endNode(){return this.volumeNode}static clearPool(){ev.clear()}}function uw(e){return new Promise((t,r)=>{fetch(e).then(n=>n.arrayBuffer()).then(n=>{sn.decodeAudioData(n,t,i=>{console.error(i),r()}).catch(i=>{console.error(i),r()})})})}const zk=class{constructor(e,t,r,n){this.noteImage="do",this.instrument=Pr[0],this.baseNote="C",this.buffer=new ArrayBuffer(8),this.data={status:"",delay:0,animationId:0},this.index=e,this.noteNames=t,this.url=r,this.baseNote=n,ki(this)}get status(){return this.data.status}setStatus(e){return this.setState({status:e})}triggerAnimation(e){this.setState({animationId:this.data.animationId+1,status:e})}setState(e){Object.assign(this.data,e)}clone(){const e=new zk(this.index,this.noteNames,this.url,this.baseNote);return e.buffer=this.buffer,e.noteImage=this.noteImage,e.instrument=this.instrument,e.setState(this.data),e}};let Vk=zk;IX([gt],Vk.prototype,"data",2);const tv=sn.createBuffer(2,sn.sampleRate,sn.sampleRate);class NX{constructor(t){this.beats=4,this.volume=50,this.currentTick=0,this.running=!1,this.indicatorBuffer=tv,this.crochetBuffer=tv,this.volumeNode=sn.createGain(),this.bpm=t!=null?t:220,this.loadBuffers(),this.volumeNode.connect(sn.destination),this.changeVolume(this.volume)}destroy(){this.volumeNode.disconnect()}changeVolume(t){this.volume=t,this.volumeNode.gain.value=t/100}async loadBuffers(){const t=[uw("./assets/audio/MetronomeSFX/bar.mp3").catch(()=>tv),uw("./assets/audio/MetronomeSFX/quarter.mp3").catch(()=>tv)],r=await Promise.all(t);this.indicatorBuffer=r[0],this.crochetBuffer=r[1]}async start(){if(!this.running)for(this.running=!0,this.currentTick=0;this.running;)this.tick(),await Ws(6e4/this.bpm)}stop(){this.running=!1}toggle(){this.running?this.stop():this.start()}tick(){const t=sn.createBufferSource();this.currentTick%this.beats===0?(t.buffer=this.crochetBuffer,this.currentTick=0):t.buffer=this.indicatorBuffer,this.currentTick++,t.connect(this.volumeNode),t.start(0);function r(){t.stop(),t.disconnect()}t.addEventListener("ended",r,{once:!0})}}const kn=new NX;var PX=Object.defineProperty,AX=Object.getOwnPropertyDescriptor,RX=(e,t,r,n)=>{for(var i=n>1?void 0:n?AX(t,r):t,o=e.length-1,s;o>=0;o--)(s=e[o])&&(i=(n?s(t,r,i):s(i))||i);return n&&i&&PX(t,r,i),i};class Xk{constructor(){this.logs=[],ki(this)}addLog(t){this.logs.find(r=>r.error===t.error)||this.logs.push(t)}clearLogs(){this.logs.splice(0,this.logs.length)}}RX([gt],Xk.prototype,"logs",2);const vg=new Xk,kX=typeof pr=="object"&&pr.env&&pr.env.NODE_DEBUG&&/\bsemver\b/i.test(pr.env.NODE_DEBUG)?(...e)=>console.error("SEMVER",...e):()=>{};var Wk=kX;const OX="2.0.0",LX=256,UX=Number.MAX_SAFE_INTEGER||9007199254740991,FX=16;var T4={SEMVER_SPEC_VERSION:OX,MAX_LENGTH:LX,MAX_SAFE_INTEGER:UX,MAX_SAFE_COMPONENT_LENGTH:FX},Hd={exports:{}};(function(e,t){const{MAX_SAFE_COMPONENT_LENGTH:r}=T4,n=Wk;t=e.exports={};const i=t.re=[],o=t.src=[],s=t.t={};let a=0;const l=(u,c,f)=>{const p=a++;n(u,p,c),s[u]=p,o[p]=c,i[p]=new RegExp(c,f?"g":void 0)};l("NUMERICIDENTIFIER","0|[1-9]\\d*"),l("NUMERICIDENTIFIERLOOSE","[0-9]+"),l("NONNUMERICIDENTIFIER","\\d*[a-zA-Z-][a-zA-Z0-9-]*"),l("MAINVERSION",`(${o[s.NUMERICIDENTIFIER]})\\.(${o[s.NUMERICIDENTIFIER]})\\.(${o[s.NUMERICIDENTIFIER]})`),l("MAINVERSIONLOOSE",`(${o[s.NUMERICIDENTIFIERLOOSE]})\\.(${o[s.NUMERICIDENTIFIERLOOSE]})\\.(${o[s.NUMERICIDENTIFIERLOOSE]})`),l("PRERELEASEIDENTIFIER",`(?:${o[s.NUMERICIDENTIFIER]}|${o[s.NONNUMERICIDENTIFIER]})`),l("PRERELEASEIDENTIFIERLOOSE",`(?:${o[s.NUMERICIDENTIFIERLOOSE]}|${o[s.NONNUMERICIDENTIFIER]})`),l("PRERELEASE",`(?:-(${o[s.PRERELEASEIDENTIFIER]}(?:\\.${o[s.PRERELEASEIDENTIFIER]})*))`),l("PRERELEASELOOSE",`(?:-?(${o[s.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${o[s.PRERELEASEIDENTIFIERLOOSE]})*))`),l("BUILDIDENTIFIER","[0-9A-Za-z-]+"),l("BUILD",`(?:\\+(${o[s.BUILDIDENTIFIER]}(?:\\.${o[s.BUILDIDENTIFIER]})*))`),l("FULLPLAIN",`v?${o[s.MAINVERSION]}${o[s.PRERELEASE]}?${o[s.BUILD]}?`),l("FULL",`^${o[s.FULLPLAIN]}$`),l("LOOSEPLAIN",`[v=\\s]*${o[s.MAINVERSIONLOOSE]}${o[s.PRERELEASELOOSE]}?${o[s.BUILD]}?`),l("LOOSE",`^${o[s.LOOSEPLAIN]}$`),l("GTLT","((?:<|>)?=?)"),l("XRANGEIDENTIFIERLOOSE",`${o[s.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`),l("XRANGEIDENTIFIER",`${o[s.NUMERICIDENTIFIER]}|x|X|\\*`),l("XRANGEPLAIN",`[v=\\s]*(${o[s.XRANGEIDENTIFIER]})(?:\\.(${o[s.XRANGEIDENTIFIER]})(?:\\.(${o[s.XRANGEIDENTIFIER]})(?:${o[s.PRERELEASE]})?${o[s.BUILD]}?)?)?`),l("XRANGEPLAINLOOSE",`[v=\\s]*(${o[s.XRANGEIDENTIFIERLOOSE]})(?:\\.(${o[s.XRANGEIDENTIFIERLOOSE]})(?:\\.(${o[s.XRANGEIDENTIFIERLOOSE]})(?:${o[s.PRERELEASELOOSE]})?${o[s.BUILD]}?)?)?`),l("XRANGE",`^${o[s.GTLT]}\\s*${o[s.XRANGEPLAIN]}$`),l("XRANGELOOSE",`^${o[s.GTLT]}\\s*${o[s.XRANGEPLAINLOOSE]}$`),l("COERCE",`(^|[^\\d])(\\d{1,${r}})(?:\\.(\\d{1,${r}}))?(?:\\.(\\d{1,${r}}))?(?:$|[^\\d])`),l("COERCERTL",o[s.COERCE],!0),l("LONETILDE","(?:~>?)"),l("TILDETRIM",`(\\s*)${o[s.LONETILDE]}\\s+`,!0),t.tildeTrimReplace="$1~",l("TILDE",`^${o[s.LONETILDE]}${o[s.XRANGEPLAIN]}$`),l("TILDELOOSE",`^${o[s.LONETILDE]}${o[s.XRANGEPLAINLOOSE]}$`),l("LONECARET","(?:\\^)"),l("CARETTRIM",`(\\s*)${o[s.LONECARET]}\\s+`,!0),t.caretTrimReplace="$1^",l("CARET",`^${o[s.LONECARET]}${o[s.XRANGEPLAIN]}$`),l("CARETLOOSE",`^${o[s.LONECARET]}${o[s.XRANGEPLAINLOOSE]}$`),l("COMPARATORLOOSE",`^${o[s.GTLT]}\\s*(${o[s.LOOSEPLAIN]})$|^$`),l("COMPARATOR",`^${o[s.GTLT]}\\s*(${o[s.FULLPLAIN]})$|^$`),l("COMPARATORTRIM",`(\\s*)${o[s.GTLT]}\\s*(${o[s.LOOSEPLAIN]}|${o[s.XRANGEPLAIN]})`,!0),t.comparatorTrimReplace="$1$2$3",l("HYPHENRANGE",`^\\s*(${o[s.XRANGEPLAIN]})\\s+-\\s+(${o[s.XRANGEPLAIN]})\\s*$`),l("HYPHENRANGELOOSE",`^\\s*(${o[s.XRANGEPLAINLOOSE]})\\s+-\\s+(${o[s.XRANGEPLAINLOOSE]})\\s*$`),l("STAR","(<|>)?=?\\s*\\*"),l("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$"),l("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")})(Hd,Hd.exports);const MX=["includePrerelease","loose","rtl"],BX=e=>e?typeof e!="object"?{loose:!0}:MX.filter(t=>e[t]).reduce((t,r)=>(t[r]=!0,t),{}):{};var Yk=BX;const Y5=/^[0-9]+$/,Kk=(e,t)=>{const r=Y5.test(e),n=Y5.test(t);return r&&n&&(e=+e,t=+t),e===t?0:r&&!n?-1:n&&!r?1:e<t?-1:1},DX=(e,t)=>Kk(t,e);var GX={compareIdentifiers:Kk,rcompareIdentifiers:DX};const rv=Wk,{MAX_LENGTH:K5,MAX_SAFE_INTEGER:nv}=T4,{re:q5,t:Z5}=Hd.exports,jX=Yk,{compareIdentifiers:oc}=GX;class ho{constructor(t,r){if(r=jX(r),t instanceof ho){if(t.loose===!!r.loose&&t.includePrerelease===!!r.includePrerelease)return t;t=t.version}else if(typeof t!="string")throw new TypeError(`Invalid Version: ${t}`);if(t.length>K5)throw new TypeError(`version is longer than ${K5} characters`);rv("SemVer",t,r),this.options=r,this.loose=!!r.loose,this.includePrerelease=!!r.includePrerelease;const n=t.trim().match(r.loose?q5[Z5.LOOSE]:q5[Z5.FULL]);if(!n)throw new TypeError(`Invalid Version: ${t}`);if(this.raw=t,this.major=+n[1],this.minor=+n[2],this.patch=+n[3],this.major>nv||this.major<0)throw new TypeError("Invalid major version");if(this.minor>nv||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>nv||this.patch<0)throw new TypeError("Invalid patch version");n[4]?this.prerelease=n[4].split(".").map(i=>{if(/^[0-9]+$/.test(i)){const o=+i;if(o>=0&&o<nv)return o}return i}):this.prerelease=[],this.build=n[5]?n[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(t){if(rv("SemVer.compare",this.version,this.options,t),!(t instanceof ho)){if(typeof t=="string"&&t===this.version)return 0;t=new ho(t,this.options)}return t.version===this.version?0:this.compareMain(t)||this.comparePre(t)}compareMain(t){return t instanceof ho||(t=new ho(t,this.options)),oc(this.major,t.major)||oc(this.minor,t.minor)||oc(this.patch,t.patch)}comparePre(t){if(t instanceof ho||(t=new ho(t,this.options)),this.prerelease.length&&!t.prerelease.length)return-1;if(!this.prerelease.length&&t.prerelease.length)return 1;if(!this.prerelease.length&&!t.prerelease.length)return 0;let r=0;do{const n=this.prerelease[r],i=t.prerelease[r];if(rv("prerelease compare",r,n,i),n===void 0&&i===void 0)return 0;if(i===void 0)return 1;if(n===void 0)return-1;if(n===i)continue;return oc(n,i)}while(++r)}compareBuild(t){t instanceof ho||(t=new ho(t,this.options));let r=0;do{const n=this.build[r],i=t.build[r];if(rv("prerelease compare",r,n,i),n===void 0&&i===void 0)return 0;if(i===void 0)return 1;if(n===void 0)return-1;if(n===i)continue;return oc(n,i)}while(++r)}inc(t,r){switch(t){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",r);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",r);break;case"prepatch":this.prerelease.length=0,this.inc("patch",r),this.inc("pre",r);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",r),this.inc("pre",r);break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":if(this.prerelease.length===0)this.prerelease=[0];else{let n=this.prerelease.length;for(;--n>=0;)typeof this.prerelease[n]=="number"&&(this.prerelease[n]++,n=-2);n===-1&&this.prerelease.push(0)}r&&(oc(this.prerelease[0],r)===0?isNaN(this.prerelease[1])&&(this.prerelease=[r,0]):this.prerelease=[r,0]);break;default:throw new Error(`invalid increment argument: ${t}`)}return this.format(),this.raw=this.version,this}}var S4=ho;const J5=S4,$X=(e,t,r)=>new J5(e,r).compare(new J5(t,r));var HX=$X;const zX=HX,VX=(e,t,r)=>zX(e,t,r)<0;var XX=VX;const{MAX_LENGTH:WX}=T4,{re:Q5,t:eC}=Hd.exports,tC=S4,YX=Yk,KX=(e,t)=>{if(t=YX(t),e instanceof tC)return e;if(typeof e!="string"||e.length>WX||!(t.loose?Q5[eC.LOOSE]:Q5[eC.FULL]).test(e))return null;try{return new tC(e,t)}catch{return null}};var qX=KX;const ZX=S4,JX=qX,{re:iv,t:ov}=Hd.exports,QX=(e,t)=>{if(e instanceof ZX)return e;if(typeof e=="number"&&(e=String(e)),typeof e!="string")return null;t=t||{};let r=null;if(!t.rtl)r=e.match(iv[ov.COERCE]);else{let n;for(;(n=iv[ov.COERCERTL].exec(e))&&(!r||r.index+r[0].length!==e.length);)(!r||n.index+n[0].length!==r.index+r[0].length)&&(r=n),iv[ov.COERCERTL].lastIndex=n.index+n[1].length+n[2].length;iv[ov.COERCERTL].lastIndex=-1}return r===null?null:JX(`${r[2]}.${r[3]||"0"}.${r[4]||"0"}`,t)};var rC=QX;async function eW(){try{await Ws(2e3);const e=await fetch(cM).then(n=>n.json()),t=rC(Rs),r=rC(e[je].version);if(t&&r&&XX(t,r)){const{message:n,urgentMessage:i}=e[je];n&&we.warn(`A New version of the app is available.
                        ${H3?"":"Please restart the app to update."} 
                    ${n?`Update Message: "${n}"`:""}
                    `.trim(),2e4),i&&we.error(i,2e4)}}catch(e){console.error(e)}}var tW=Object.defineProperty,rW=Object.getOwnPropertyDescriptor,qk=(e,t,r,n)=>{for(var i=n>1?void 0:n?rW(t,r):t,o=e.length-1,s;o>=0;o--)(s=e[o])&&(i=(n?s(t,r,i):s(i))||i);return n&&i&&tW(t,r,i),i};async function xn(e){return bn.prompt(e)}async function Mr(e,t=!0){return bn.confirm(e,t)}class E4{constructor(){this.promptState={question:"",cancellable:!0,deferred:null},this.confirmState={question:"",cancellable:!0,deferred:null},ki(this)}prompt(t,r=!0){return this.promptState.deferred&&this.promptState.deferred(null),new Promise(n=>{Object.assign(this.promptState,{question:t,cancellable:r,deferred:n})})}answerPrompt(t){this.promptState.deferred?this.promptState.deferred(t):console.warn("No deferred prompt"),this.promptState.deferred=null}confirm(t,r=!0){return this.confirmState.deferred&&this.confirmState.deferred(null),new Promise(n=>{Object.assign(this.confirmState,{question:t,cancellable:r,deferred:n})})}answerConfirm(t){this.confirmState.deferred?this.confirmState.deferred(t):console.warn("No deferred confirm"),this.confirmState.deferred=null}clearAll(){this.promptState.deferred&&this.promptState.deferred(null),this.confirmState.deferred&&this.confirmState.deferred(null)}}qk([gt],E4.prototype,"promptState",2);qk([gt],E4.prototype,"confirmState",2);const bn=new E4;function ra(e,t){const r=M.exports.useRef(),n=M.exports.useRef(null);return M.exports.useEffect(()=>{r.current=e}),M.exports.useEffect(()=>{if(!(t!=null&&t.active))return;function i(o){var a,l;if(!((a=n.current)!=null&&a.contains(o.target))){if((t==null?void 0:t.ignoreFocusable)&&nW(o))return;(l=r.current)==null||l.call(r,o)}}return document.addEventListener("click",i),()=>{document.removeEventListener("click",i)}},[t==null?void 0:t.active,t==null?void 0:t.ignoreFocusable]),n}function nW(e){return e.composedPath().some(r=>{var n,i,o,s;return r.tagName==="INPUT"||r.tagName==="BUTTON"?!((i=(n=r.classList)==null?void 0:n.contains)!=null&&i.call(n,"include_click_outside")):(s=(o=r.classList)==null?void 0:o.contains)==null?void 0:s.call(o,"ignore_click_outside")})}const gg="ignore_click_outside";function iW(){const e=is(bn.confirmState),t=is(bn.promptState);return M.exports.useEffect(()=>()=>{bn.clearAll()},[]),k(De,{children:[m(sW,{...t}),m(oW,{...e})]})}function oW({question:e,deferred:t,cancellable:r}){const n=!t,[i,o]=M.exports.useState(!1),s=M.exports.useRef(null);M.exports.useEffect(()=>{if(!n)return o(!0);const l=setTimeout(()=>o(!1),300);return()=>clearTimeout(l)},[n]),M.exports.useEffect(()=>{if(!!t)return Xe.register("Escape",()=>{!r||bn.answerConfirm(!1)},{id:"AsyncConfirm"}),Xe.register("Enter",()=>{bn.answerConfirm(!0)},{id:"AsyncConfirm"}),()=>Xe.unregisterById("AsyncConfirm")},[r,t]);function a(l){l.nativeEvent.composedPath()[0]!==s.current||!r||bn.answerConfirm(!1)}return m("div",{style:i?{}:{display:"none"},onClick:a,className:hd(`prompt-overlay ${gg}`,[n,"prompt-overlay-hidden"]),ref:s,children:k(By,{boxProps:{className:hd(`floating-prompt ${gg}`,[!t,"floating-prompt-hidden"])},isRelative:!1,size:"1.1rem",children:[m("div",{children:e}),k("div",{className:"prompt-row",children:[m("button",{className:"prompt-button",style:{backgroundColor:"rgb(169, 82, 90)",color:"white"},onClick:()=>bn.answerConfirm(!1),children:"No"}),m("button",{className:"prompt-button",style:{backgroundColor:"rgb(98, 140, 131)",color:"white"},onClick:()=>bn.answerConfirm(!0),children:"Yes"})]})]})})}function sW({question:e,deferred:t,cancellable:r}){const[n,i]=M.exports.useState(""),o=M.exports.useRef(null),[s]=fn(),[a,l]=M.exports.useState("var(--primary)"),u=!t,[c,f]=M.exports.useState(!1),p=M.exports.useRef(null);M.exports.useEffect(()=>{if(!u)return f(!0);const g=setTimeout(()=>f(!1),200);return()=>clearTimeout(g)},[u]),M.exports.useEffect(()=>{l(s.layer("primary",.1).hex())},[s]),M.exports.useEffect(()=>{i("")},[t]),M.exports.useEffect(()=>{if(!lu&&t){const g=setTimeout(()=>{var b;return(b=o.current)==null?void 0:b.focus()},300);return()=>clearTimeout(g)}},[o,t]),M.exports.useEffect(()=>{if(!!t)return Xe.register("Escape",()=>{!r||bn.answerPrompt(null)},{id:"AsyncPrompt"}),Xe.register("Enter",()=>{!n||bn.answerPrompt(n)},{id:"AsyncPrompt"}),()=>Xe.unregisterById("AsyncPrompt")},[r,n,t]);function v(g){g.nativeEvent.composedPath()[0]!==p.current||!r||bn.answerPrompt(null)}return m("div",{ref:p,style:c?{}:{display:"none"},onClick:v,className:hd(`prompt-overlay ${gg}`,[u,"prompt-overlay-hidden"]),children:k(By,{boxProps:{className:hd(`floating-prompt ${gg}`,[!t,"floating-prompt-hidden"])},isRelative:!1,size:"1.1rem",children:[m("div",{children:e}),m("input",{ref:o,className:"prompt-input",value:n,onKeyDown:g=>{g.key==="Enter"&&n&&bn.answerPrompt(n),g.key==="Escape"&&r&&bn.answerPrompt(null)},onChange:g=>i(g.target.value)}),k("div",{className:"prompt-row",children:[m("button",{className:"prompt-button",style:{backgroundColor:a,color:"white"},onClick:()=>bn.answerPrompt(null),children:"Cancel"}),m("button",{className:hd("prompt-button",[!n,"disabled"]),disabled:!n,style:{backgroundColor:a,color:"white"},onClick:()=>bn.answerPrompt(n),children:"Ok"})]})]})})}function aW({history:e}){const[t,r]=M.exports.useState(!1),[n,i]=M.exports.useState(sn.state),[o,s]=M.exports.useState(!1),[a,l]=M.exports.useState(0),[u,c]=M.exports.useState(!1),f=M.exports.useCallback(()=>{i(sn.state)},[]);M.exports.useEffect(()=>(sn.addEventListener("statechange",f),()=>{sn.removeEventListener("statechange",f)}),[f]),M.exports.useEffect(()=>{if(window.location.hostname==="localhost")return;const I=console.error.bind(console);console.error=(...E)=>{I(...E),vg.addLog({error:E.find(O=>O instanceof Error),message:E.map(O=>O instanceof Error?O.stack:typeof O=="object"?JSON.stringify(O,null,4):O).join(" ")})};const R=E=>{vg.addLog({error:E.error,message:E.error.stack})};return window.addEventListener("error",R),()=>{console.error=I,window.removeEventListener("error",R)}},[]),M.exports.useEffect(()=>{const I=localStorage.getItem(je+"_Visited");let R=localStorage.getItem(je+"_ShowHome");R=R===null?"true":R,an.setState({canShow:R==="true",visible:R==="true",isInPosition:!1,hasPersistentStorage:Boolean(navigator.storage&&navigator.storage.persist)}),c(Tn.exports()),r(I==="true"),l(window.innerHeight),eW()},[]);const p=M.exports.useCallback(I=>{document.body.style.minHeight=I+"px"},[]),v=M.exports.useCallback(()=>{document.body.style=""},[]),g=M.exports.useCallback(()=>{var I;if(((I=document.activeElement)==null?void 0:I.tagName)==="INPUT")return a===window.innerHeight||a===0?void 0:p(a);p(window.innerHeight),v(),c(Tn.exports())},[a,v,p]),b=M.exports.useCallback(()=>{const I=document.activeElement;I&&I.tagName==="INPUT"&&(I==null||I.blur()),v()},[v]),_=M.exports.useCallback((I=!1)=>{localStorage.setItem(je+"_ShowHome",JSON.stringify(I)),an.setState({canShow:I})},[]),w=async()=>{try{navigator.storage&&navigator.storage.persist&&await navigator.storage.persist()&&we.success("Storage permission allowed")}catch(I){console.log(I),we.error("There was an error with setting up persistent storage")}x()},x=()=>{localStorage.setItem(je+"_Visited",JSON.stringify(!0)),r(!0)},T=M.exports.useCallback(async()=>{await Ws(1e3);const I=localStorage.getItem(je+"_Visited");if(o)return;const R=localStorage.getItem(je+"_Version");if(!I)return localStorage.setItem(je+"_Version",Rs);if(Rs!==R&&(we.log("Update V"+Rs+`
`+uM,6e3),localStorage.setItem(je+"_Version",Rs)),s(!0),!!I&&navigator.storage&&navigator.storage.persist){let E=await navigator.storage.persisted();E||(E=await navigator.storage.persist()),console.log(E?"Storage Persisted":"Storage Not persisted")}},[o]);return M.exports.useEffect(()=>(window.addEventListener("resize",g),window.addEventListener("blur",b),T(),()=>{window.removeEventListener("resize",g),window.removeEventListener("blur",b)}),[T,g,b]),M.exports.useEffect(()=>(Sn.UIEvent("version",{version:Rs}),Sn.pageView(e.location.pathname.replace("/","")),e.listen(I=>{Sn.pageView({page_title:I.pathName}),x4.addPage(I.pathName)})),[e]),k(De,{children:[m(wX,{}),m(yX,{hasVisited:t,closeWelcomeScreen:x,setDontShowHome:_,askForStorage:w}),m(iW,{}),n!=="running"&&m(Ql,{className:"resume-audio-context box-shadow",size:"3rem",onClick:()=>{kn.tick()},children:m(oy,{style:{width:"1.4rem",height:"1.4rem"}})}),k("div",{className:"rotate-screen",children:[u&&k(De,{children:[m("img",{src:TX,alt:"icon for the rotating screen"}),m("p",{children:"For a better experience, add the website to the home screen, and rotate your device"})]}),!u&&k(De,{children:[m(YF,{}),m("p",{children:"Please increase your window size"})]})]})]})}const lW=bh(aW);function Dy({fill:e,className:t}){return m("svg",{width:"156mm",height:"156mm",className:t,viewBox:"0 0 156 156",xmlns:"http://www.w3.org/2000/svg",style:{fill:e||"#eae5ce"},children:m("path",{d:"M 78.00026,10.550111 C 51.476969,10.181626 25.897505,27.22936 15.85058,51.745551 5.361171,75.829889 10.788685,105.74811 29.175285,124.53663 46.865842,143.57562 76.01089,150.52219 100.41467,141.63611 125.70972,133.0432 144.35989,108.19482 145.36211,81.471209 147.04137,55.492614 131.98362,29.525813 108.70692,17.929174 99.25071,13.06968 88.62966,10.533948 78.00026,10.550111 Z m 0,0.140044 c 2.58037,3.675401 5.16075,7.3508 7.74113,11.026201 24.63414,2.976727 45.57649,23.919913 48.5469,48.555693 3.66955,2.57607 7.33909,5.15214 11.00864,7.72821 -3.6711,2.57728 -7.34219,5.15455 -11.01328,7.73183 -2.97314,24.642991 -23.92605,45.594011 -48.5712,48.558271 -2.57073,3.66162 -5.14146,7.32324 -7.71219,10.98486 -2.57073,-3.66162 -5.141461,-7.32324 -7.712192,-10.98486 -24.643357,-2.96412 -45.595396,-23.91214 -48.570678,-48.553111 -3.673332,-2.57899 -7.346667,-5.15799 -11.019999,-7.73699 3.677467,-2.58193 7.354932,-5.16386 11.0324,-7.74578 2.977996,-24.622822 23.903746,-45.560994 48.529337,-48.537607 2.580378,-3.675573 5.160752,-7.351144 7.741132,-11.026717 z"})})}function uW({style:e}){return m("svg",{viewBox:"0 0 63.87 63.87",style:e,className:"svg-note",xmlns:"http://www.w3.org/2000/svg",children:m("path",{d:"M 31.939164,9.4384766 A 22.500162,22.500162 0 0 0 9.4384767,31.939165 22.500162,22.500162 0 0 0 31.939164,54.438477 22.500162,22.500162 0 0 0 54.438476,31.939165 22.500162,22.500162 0 0 0 31.939164,9.4384766 Z m 0,2.5303484 A 19.969496,19.969496 0 0 1 51.908129,31.939165 19.969496,19.969496 0 0 1 31.939164,51.90813 19.969496,19.969496 0 0 1 11.968824,31.939165 19.969496,19.969496 0 0 1 31.939164,11.968825 Z"})})}function cW({style:e}){return m("svg",{style:e,version:"0.0",viewBox:"0 0 63.97 63.87",className:"svg-note",xmlns:"http://www.w3.org/2000/svg",children:m("path",{d:"M 30.878793,1.0626133 1.0626133,30.878793 a 1.4999541,1.4999541 89.999124 0 0 3.24e-5,2.121288 L 30.87876,62.814372 a 1.5000459,1.5000459 179.99912 0 0 2.121353,-3.2e-5 L 62.81434,33.000113 a 1.5000459,1.5000459 90.000876 0 0 3.2e-5,-2.121353 L 33.000081,1.0626457 a 1.4999541,1.4999541 8.7588976e-4 0 0 -2.121288,-3.24e-5 z m 2.121284,3.400427 26.413908,26.4157167 a 1.5000513,1.5000513 90.00098 0 1 -3.6e-5,2.121356 L 33.000113,59.413949 a 1.5000513,1.5000513 179.99902 0 1 -2.121356,3.6e-5 L 4.4630403,33.000077 A 1.4999487,1.4999487 89.99902 0 1 4.463004,30.878793 L 30.878793,4.463004 a 1.4999487,1.4999487 9.804247e-4 0 1 2.121284,3.63e-5 z"})})}function hW({style:e}){return k("svg",{style:e,className:"svg-note",viewBox:"0 0 63.87 63.87",xmlns:"http://www.w3.org/2000/svg",children:[m("path",{d:"M 31.939164,9.4384766 A 22.500162,22.500162 0 0 0 9.4384767,31.939165 22.500162,22.500162 0 0 0 31.939164,54.438477 22.500162,22.500162 0 0 0 54.438476,31.939165 22.500162,22.500162 0 0 0 31.939164,9.4384766 Z m 0,2.5303484 A 19.969496,19.969496 0 0 1 51.908129,31.939165 19.969496,19.969496 0 0 1 31.939164,51.90813 19.969496,19.969496 0 0 1 11.968824,31.939165 19.969496,19.969496 0 0 1 31.939164,11.968825 Z"}),m("path",{d:"M 30.878793,1.0626133 1.0626133,30.878793 a 1.4999541,1.4999541 89.999124 0 0 3.24e-5,2.121288 L 30.87876,62.814372 a 1.5000459,1.5000459 179.99912 0 0 2.121353,-3.2e-5 L 62.81434,33.000113 a 1.5000459,1.5000459 90.000876 0 0 3.2e-5,-2.121353 L 33.000081,1.0626457 a 1.4999541,1.4999541 8.7588976e-4 0 0 -2.121288,-3.24e-5 z m 2.121284,3.400427 26.413908,26.4157167 a 1.5000513,1.5000513 90.00098 0 1 -3.6e-5,2.121356 L 33.000113,59.413949 a 1.5000513,1.5000513 179.99902 0 1 -2.121356,3.6e-5 L 4.4630403,33.000077 A 1.4999487,1.4999487 89.99902 0 1 4.463004,30.878793 L 30.878793,4.463004 a 1.4999487,1.4999487 9.804247e-4 0 1 2.121284,3.63e-5 z"})]})}function fW({style:e}){return m("svg",{style:e,className:"svg-note",viewBox:"0 0 311.9 311.9",xmlns:"http://www.w3.org/2000/svg",children:m("path",{style:{strokeWidth:6},d:"m 226.69,150.93 h -10.17 c -4.19354,-29.95167 -30.35627,-51.882064 -60.58,-50.78 -30.22373,-1.102064 -56.386455,20.82833 -60.58,50.78 l -10.504617,0.0243 c -3.891382,0.0264 -6.394603,2.88715 -6.411077,4.78546 0.02751,3.7114 3.034299,5.28795 6.745694,5.26023 h 10.17 c 4.193545,29.95167 30.35627,51.88206 60.58,50.78 30.22373,1.10206 56.38646,-20.82833 60.58,-50.78 l 10.32017,0.0243 c 4.15875,-0.0993 6.61336,-2.81424 6.62983,-4.71255 -0.0164,-3.72003 -3.0602,-5.42621 -6.78,-5.38176 z M 113.36,120.82 c 13.67,-16.56 43.82,-14.22 67.33,5.2 8.33131,6.76474 15.04502,15.30636 19.65,25 H 108 c -3.14876,-10.34257 -1.15212,-21.56762 5.37,-30.19 z m 85.16,70.34 c -13.67,16.55 -43.82,14.22 -67.34,-5.2 -8.32624,-6.76973 -15.03898,-15.3101 -19.65,-25 h 92.36 c 3.12094,10.31692 1.12951,21.50388 -5.36,30.11 z"})})}function dW({style:e}){return m("svg",{style:e,className:"svg-note",viewBox:"0 0 311.9 311.9",xmlns:"http://www.w3.org/2000/svg",children:m("path",{style:{strokeWidth:6},d:"m 226.7,202.2 h -37.58 c 16.84847,-9.59024 27.369,-27.3755 27.66,-46.76 0,-30.82 -27.24,-55.81 -60.83,-55.81 -33.59,0 -60.83,25 -60.83,55.81 0.290998,19.3845 10.81153,37.16976 27.66,46.76 l -37.720165,0.0972 c -4.162017,-0.20555 -6.686251,2.56369 -6.702754,4.46517 0.03294,3.70275 3.140296,5.53203 6.842919,5.4876 l 141.786,0.0243 c 3.91733,-0.27504 6.4675,-2.65252 6.484,-4.55241 -0.0196,-2.84891 -3.0702,-5.54969 -6.77,-5.5219 z M 113.37,120.28 c 13.67,-16.56 43.81,-14.23 67.34,5.19 23.53,19.42 31.49,48.59 17.82,65.14 -13.67,16.55 -43.82,14.23 -67.34,-5.2 -23.52,-19.43 -31.5,-48.58 -17.82,-65.13 z"})})}function pW({style:e,background:t}){return k("svg",{style:e,className:"svg-note",viewBox:"0 0 311.9 311.9",xmlns:"http://www.w3.org/2000/svg",children:[m("path",{fillRule:"evenodd",className:"svg-b",d:"M10.6585 31.4143C14.0665 31.4143 16.8292 34.177 16.8292 37.585V113.54C16.8292 114.368 17.8162 114.816 18.4912 114.337C62.4503 83.1278 100.485 146.958 6.00837 199.981C5.34458 200.354 4.48779 199.895 4.48779 199.134V37.585C4.48779 34.177 7.2505 31.4143 10.6585 31.4143V31.4143ZM17.3901 131.108C17.3901 130.85 17.4993 130.592 17.6794 130.407C43.1371 104.333 68.853 142.392 18.9059 171.355C18.2453 171.738 17.3901 171.277 17.3901 170.513V131.108Z",style:{strokeWidth:24,paintOrder:"stroke",stroke:t}}),m("path",{style:{strokeWidth:6},d:"m 226.7,202.2 h -37.58 c 16.84847,-9.59024 27.369,-27.3755 27.66,-46.76 0,-30.82 -27.24,-55.81 -60.83,-55.81 -33.59,0 -60.83,25 -60.83,55.81 0.290998,19.3845 10.81153,37.16976 27.66,46.76 l -37.720165,0.0972 c -4.162017,-0.20555 -6.686251,2.56369 -6.702754,4.46517 0.03294,3.70275 3.140296,5.53203 6.842919,5.4876 l 141.786,0.0243 c 3.91733,-0.27504 6.4675,-2.65252 6.484,-4.55241 -0.0196,-2.84891 -3.0702,-5.54969 -6.77,-5.5219 z M 113.37,120.28 c 13.67,-16.56 43.81,-14.23 67.34,5.19 23.53,19.42 31.49,48.59 17.82,65.14 -13.67,16.55 -43.82,14.23 -67.34,-5.2 -23.52,-19.43 -31.5,-48.58 -17.82,-65.13 z"})]})}function mW({style:e}){return m("svg",{style:e,className:"svg-note",viewBox:"0 0 311.9 311.9",xmlns:"http://www.w3.org/2000/svg",children:m("path",{style:{strokeWidth:6},d:"m 226.7,202.2 h -37.6 c 15.25395,-8.75987 25.42508,-24.2598 27.39,-41.74 l 10.35017,-0.0729 c 1.89602,0.0167 6.63216,-1.21235 6.60552,-4.44518 -0.0439,-3.69964 -3.04589,-5.54969 -6.74569,-5.5219 H 216.49 C 212.29646,120.46833 186.13373,98.537936 155.91,99.64 125.69003,98.543179 99.533183,120.47226 95.34,150.42 l -10.674762,0.12153 c -3.599144,0.0805 -6.247808,2.71775 -6.275238,4.61532 0.03846,3.70592 3.074088,5.34201 6.78,5.30315 h 10.18 c 1.965558,17.4827 12.14108,32.98366 27.4,41.74 l -38.187681,0.19445 c -4.333822,0.11041 -6.228962,2.53779 -6.250932,4.44087 0.03846,3.70039 3.118224,5.45354 6.818613,5.41468 h 142.24491 c 3.87036,-0.12918 6.05881,-2.89397 6.08078,-4.79547 -0.0439,-3.70357 -3.052,-5.28786 -6.75569,-5.25453 z M 113.37,120.28 c 13.67,-16.56 43.81,-14.23 67.34,5.19 8.32039,6.75538 15.03271,15.27815 19.65,24.95 H 108 c -3.13335,-10.32731 -1.13732,-21.53036 5.37,-30.14 z m 38.86,40.19 h 51.67 c 3.108,10.32332 1.10174,21.51011 -5.4,30.11 -13.67,16.56 -43.82,14.22 -67.33,-5.2 -8.32907,-6.74932 -15.04585,-15.27341 -19.66,-24.95 z"})})}function vW({style:e,background:t}){return k("svg",{style:e,className:"svg-note",viewBox:"0 0 311.9 311.9",xmlns:"http://www.w3.org/2000/svg",children:[m("path",{fillRule:"evenodd",className:"svg-b",d:"M10.6585 31.4143C14.0665 31.4143 16.8292 34.177 16.8292 37.585V113.54C16.8292 114.368 17.8162 114.816 18.4912 114.337C62.4503 83.1278 100.485 146.958 6.00837 199.981C5.34458 200.354 4.48779 199.895 4.48779 199.134V37.585C4.48779 34.177 7.2505 31.4143 10.6585 31.4143V31.4143ZM17.3901 131.108C17.3901 130.85 17.4993 130.592 17.6794 130.407C43.1371 104.333 68.853 142.392 18.9059 171.355C18.2453 171.738 17.3901 171.277 17.3901 170.513V131.108Z",style:{strokeWidth:24,paintOrder:"stroke",stroke:t}}),m("path",{style:{strokeWidth:6},d:"m 226.7,202.2 h -37.6 c 15.25395,-8.75987 25.42508,-24.2598 27.39,-41.74 l 10.35017,-0.0729 c 1.89602,0.0167 6.63216,-1.21235 6.60552,-4.44518 -0.0439,-3.69964 -3.04589,-5.54969 -6.74569,-5.5219 H 216.49 C 212.29646,120.46833 186.13373,98.537936 155.91,99.64 125.69003,98.543179 99.533183,120.47226 95.34,150.42 l -10.674762,0.12153 c -3.599144,0.0805 -6.247808,2.71775 -6.275238,4.61532 0.03846,3.70592 3.074088,5.34201 6.78,5.30315 h 10.18 c 1.965558,17.4827 12.14108,32.98366 27.4,41.74 l -38.187681,0.19445 c -4.333822,0.11041 -6.228962,2.53779 -6.250932,4.44087 0.03846,3.70039 3.118224,5.45354 6.818613,5.41468 h 142.24491 c 3.87036,-0.12918 6.05881,-2.89397 6.08078,-4.79547 -0.0439,-3.70357 -3.052,-5.28786 -6.75569,-5.25453 z M 113.37,120.28 c 13.67,-16.56 43.81,-14.23 67.34,5.19 8.32039,6.75538 15.03271,15.27815 19.65,24.95 H 108 c -3.13335,-10.32731 -1.13732,-21.53036 5.37,-30.14 z m 38.86,40.19 h 51.67 c 3.108,10.32332 1.10174,21.51011 -5.4,30.11 -13.67,16.56 -43.82,14.22 -67.33,-5.2 -8.32907,-6.74932 -15.04585,-15.27341 -19.66,-24.95 z"})]})}function gW({style:e}){return m("svg",{style:e,className:"svg-note",viewBox:"0 0 311.9 311.9",xmlns:"http://www.w3.org/2000/svg",children:m("path",{style:{strokeWidth:6},d:"m 226.7,202.72 h -37.58 c 16.8363,-9.58302 27.35494,-27.34986 27.66,-46.72 -0.29956,-19.38469 -10.81729,-37.16901 -27.66,-46.77 l 37.83786,-0.0688 c 4.7358,-0.13246 6.4658,-2.47976 6.48777,-4.37967 -0.033,-3.70432 -3.03137,-5.63043 -6.73563,-5.59158 L 85.181367,99.165694 c -4.426124,-0.04652 -6.759199,2.911456 -6.775673,4.809776 0.03299,3.70037 3.083938,5.28782 6.784306,5.25453 h 37.59 c -16.84564,9.59801 -27.364464,27.38418 -27.66,46.77 0.290998,19.3845 10.81153,37.16976 27.66,46.76 l -38.011842,0.0972 c -3.554356,-0.10833 -6.321655,2.78245 -6.338158,4.68393 0.03294,3.70274 3.067377,5.31327 6.77,5.26884 l 141.77505,-0.0344 c 3.58424,-0.0865 6.47845,-2.6101 6.49495,-4.50999 -0.0564,-2.82157 -2.33286,-5.57335 -6.77,-5.54564 z M 113.37,120.8 c 13.63,-16.56 43.81,-14.23 67.33,5.2 23.52,19.43 31.49,48.59 17.82,65.14 -13.67,16.55 -43.81,14.23 -67.34,-5.19 -23.53,-19.42 -31.49,-48.6 -17.81,-65.16 z"})})}function yW({style:e}){return m("svg",{style:e,className:"svg-note",viewBox:"0 0 311.9 311.9",xmlns:"http://www.w3.org/2000/svg",children:m("path",{style:{strokeWidth:6},d:"m 216.53,161 10.35878,0.0486 c 4.67084,-0.24517 6.56926,-2.73971 6.59122,-4.63962 -0.0439,-3.69964 -3.67786,-5.5497 -6.77,-5.44899 h -10.18 c -1.97243,-17.48294 -12.15066,-32.98236 -27.41,-41.74 l 38.15768,-0.31598 c 3.79745,-0.0319 6.13174,-2.38354 6.15371,-4.28503 -0.0385,-3.70039 -3.021,-5.477853 -6.72139,-5.43899 L 84.88969,99.2043 c -3.478174,-0.04652 -6.443216,3.0816 -6.45969,4.97991 0.0573,3.0441 3.399922,5.02046 6.76,5.03578 h 37.59 c -15.25934,8.75764 -25.437568,24.25706 -27.41,41.74 l -10.334472,0.12153 c -3.988607,0.0264 -6.61336,2.57117 -6.629834,4.46948 0.02744,3.70668 3.087806,5.49343 6.794306,5.449 h 10.18 c 1.965558,17.4827 12.14108,32.98366 27.4,41.74 l -38.211987,0.0729 c -4.747032,0.0375 -6.156043,2.9753 -6.178013,4.87839 0.03844,3.02376 3.075723,5.14312 6.78,5.09869 l 141.96184,-0.0243 c 4.25762,-0.12924 6.29735,-2.9928 6.31385,-4.89269 0.029,-2.84892 -3.04589,-5.1608 -6.74569,-5.13301 h -37.58 c 15.26162,-8.75522 25.44069,-24.25593 27.41,-41.74 z M 113.37,120.8 c 13.68,-16.55 43.82,-14.22 67.34,5.2 8.33204,6.76652 15.04868,15.30751 19.66,25 H 108 c -3.13175,-10.33064 -1.13598,-21.53593 5.37,-30.15 z m 17.83,65.14 C 122.87571,179.18998 116.15972,170.6703 111.54,161 h 92.36 c 3.108,10.32332 1.10174,21.51011 -5.4,30.11 -13.64,16.6 -43.79,14.28 -67.31,-5.15 z"})})}function _W({style:e}){return k("svg",{style:e,className:"svg-note",viewBox:"0 0 311.9 311.9",xmlns:"http://www.w3.org/2000/svg",children:[m("path",{style:{strokeWidth:6},d:"m 226.7,190.83 h -37.58 c 17.06075,-9.37792 27.66156,-27.3017 27.66156,-46.77 0,-19.4683 -10.60081,-37.39208 -27.66156,-46.77 l 38.16442,-0.103123 c 4.26786,0.01666 6.09486,-2.741511 6.11683,-4.637481 C 233.39173,89.915363 230.3998,87.22221 226.7,87.25 l -141.713085,0.07292 c -3.964301,0.0021 -6.540441,2.838539 -6.556915,4.736853 -0.04545,3.167971 3.05739,5.269074 6.76,5.230228 h 37.59 c -17.06075,9.37792 -27.661558,27.3017 -27.661558,46.77 0,19.4683 10.600808,37.39208 27.661558,46.77 l -38.032545,0.0687 c -3.964604,0.25279 -6.346493,2.47025 -6.357455,4.37248 0.04394,3.69964 3.070203,5.63656 6.77,5.60877 l 142.06907,-0.0486 c 3.82173,0.0111 6.22443,-2.53939 6.24093,-4.44087 -0.0385,-3.70039 -3.06961,-5.59938 -6.77,-5.56052 z M 113.37,108.9 c 13.67,-16.56 43.81,-14.23 67.34,5.19 23.53,19.42 31.49,48.59 17.82,65.14 -13.67,16.55 -43.82,14.23 -67.33,-5.23 -23.51,-19.46 -31.51,-48.55 -17.83,-65.1 z"}),m("path",{style:{strokeWidth:6},d:"m 226.7,224.61 -142.95,0.05 c -3.046024,-0.16666 -5.248026,3.05403 -5.27,4.95 0.02747,3.70271 3.00739,5.07885 6.71,5.04 l 141.41589,-0.0354 c 4.22947,0.0167 6.84214,-2.60004 6.86411,-4.49601 -0.0439,-3.69964 -3.0702,-5.53642 -6.77,-5.50863 z"})]})}function bW({style:e,background:t}){return k("svg",{style:e,className:"svg-note",viewBox:"0 0 311.9 311.9",xmlns:"http://www.w3.org/2000/svg",children:[m("path",{fillRule:"evenodd",className:"svg-b",d:"M10.6585 31.4143C14.0665 31.4143 16.8292 34.177 16.8292 37.585V113.54C16.8292 114.368 17.8162 114.816 18.4912 114.337C62.4503 83.1278 100.485 146.958 6.00837 199.981C5.34458 200.354 4.48779 199.895 4.48779 199.134V37.585C4.48779 34.177 7.2505 31.4143 10.6585 31.4143V31.4143ZM17.3901 131.108C17.3901 130.85 17.4993 130.592 17.6794 130.407C43.1371 104.333 68.853 142.392 18.9059 171.355C18.2453 171.738 17.3901 171.277 17.3901 170.513V131.108Z",style:{strokeWidth:24,paintOrder:"stroke",stroke:t}}),m("path",{style:{strokeWidth:6},d:"m 226.7,190.83 h -37.58 c 17.06075,-9.37792 27.66156,-27.3017 27.66156,-46.77 0,-19.4683 -10.60081,-37.39208 -27.66156,-46.77 l 38.16442,-0.103123 c 4.26786,0.01666 6.09486,-2.741511 6.11683,-4.637481 C 233.39173,89.915363 230.3998,87.22221 226.7,87.25 l -141.713085,0.07292 c -3.964301,0.0021 -6.540441,2.838539 -6.556915,4.736853 -0.04545,3.167971 3.05739,5.269074 6.76,5.230228 h 37.59 c -17.06075,9.37792 -27.661558,27.3017 -27.661558,46.77 0,19.4683 10.600808,37.39208 27.661558,46.77 l -38.032545,0.0687 c -3.964604,0.25279 -6.346493,2.47025 -6.357455,4.37248 0.04394,3.69964 3.070203,5.63656 6.77,5.60877 l 142.06907,-0.0486 c 3.82173,0.0111 6.22443,-2.53939 6.24093,-4.44087 -0.0385,-3.70039 -3.06961,-5.59938 -6.77,-5.56052 z M 113.37,108.9 c 13.67,-16.56 43.81,-14.23 67.34,5.19 23.53,19.42 31.49,48.59 17.82,65.14 -13.67,16.55 -43.82,14.23 -67.33,-5.23 -23.51,-19.46 -31.51,-48.55 -17.83,-65.1 z"}),m("path",{style:{strokeWidth:6},d:"m 226.7,224.61 -142.95,0.05 c -3.046024,-0.16666 -5.248026,3.05403 -5.27,4.95 0.02747,3.70271 3.00739,5.07885 6.71,5.04 l 141.41589,-0.0354 c 4.22947,0.0167 6.84214,-2.60004 6.86411,-4.49601 -0.0439,-3.69964 -3.0702,-5.53642 -6.77,-5.50863 z"})]})}function wW({style:e}){return k("svg",{style:e,className:"svg-note",viewBox:"0 0 311.9 311.9",xmlns:"http://www.w3.org/2000/svg",children:[m("path",{style:{strokeWidth:6},d:"m 216.53,149.37 10.64555,-0.0504 c 4.5708,-0.11496 6.27248,-2.88856 6.29445,-4.78612 -0.0385,-3.7004 -3.06961,-5.2423 -6.77,-5.20344 h -10.18 c -1.9694,-17.48661 -12.14801,-32.99034 -27.41,-41.75 h 38.28652 c 4.5374,-0.405759 6.02134,-3.035241 6.03782,-4.933555 C 233.39039,88.946804 230.3998,87.51221 226.7,87.54 L 84.646133,87.664824 c -4.647718,0.108052 -6.227366,2.727071 -6.216133,4.646528 0.03297,3.698792 3.061265,5.357498 6.76,5.318648 h 37.59 c -15.25929,8.76078 -25.434357,24.26476 -27.4,41.75 H 84.825323 c -4.319212,0.20475 -6.346244,2.57869 -6.362718,4.477 0.03297,3.70432 3.033137,5.60185 6.737395,5.563 h 10.16 c 1.968677,17.48157 12.14335,32.98124 27.4,41.74 l -38.009042,0.0357 c -4.128894,0.42916 -6.288797,2.75836 -6.305294,4.65825 0.04394,3.69964 3.034539,5.38388 6.734336,5.35609 l 141.5164,0.0252 c 5.50611,-0.18511 6.7571,-3.02321 6.7736,-4.9231 -0.0439,-3.69964 -3.0702,-5.17991 -6.77,-5.15212 h -37.58 c 15.27484,-8.76535 25.45587,-24.28761 27.41,-41.79 z M 108,139.33 c -3.06159,-10.26129 -1.05653,-21.36713 5.4,-29.91 13.67,-16.56 43.82,-14.23 67.33,5.19 8.25742,6.69841 14.93601,15.13543 19.56,24.71 H 108 Z m 23.25,35.23 c -8.38883,-6.80804 -15.14164,-15.41309 -19.76,-25.18 h 92.41 c 3.21387,10.3884 1.23814,21.68843 -5.31,30.37 -13.68,16.54 -43.83,14.22 -67.35,-5.18 z"}),m("path",{style:{strokeWidth:6},d:"m 226.7,224.32 -141.217602,0.0126 c -3.919227,-0.0677 -6.908324,2.57912 -6.924821,4.47901 0.03297,3.70432 2.128938,5.51633 6.642423,5.55843 h 141.54684 c 4.29339,-0.26627 6.54988,-2.72292 6.57185,-4.62048 -0.0439,-3.69964 -2.61627,-4.87729 -6.61869,-5.42952 z"})]})}function xW({style:e,background:t}){return k("svg",{style:e,className:"svg-note",viewBox:"0 0 311.9 311.9",xmlns:"http://www.w3.org/2000/svg",children:[m("path",{fillRule:"evenodd",className:"svg-b",d:"M10.6585 31.4143C14.0665 31.4143 16.8292 34.177 16.8292 37.585V113.54C16.8292 114.368 17.8162 114.816 18.4912 114.337C62.4503 83.1278 100.485 146.958 6.00837 199.981C5.34458 200.354 4.48779 199.895 4.48779 199.134V37.585C4.48779 34.177 7.2505 31.4143 10.6585 31.4143V31.4143ZM17.3901 131.108C17.3901 130.85 17.4993 130.592 17.6794 130.407C43.1371 104.333 68.853 142.392 18.9059 171.355C18.2453 171.738 17.3901 171.277 17.3901 170.513V131.108Z",style:{strokeWidth:24,paintOrder:"stroke",stroke:t}}),m("path",{style:{strokeWidth:6},d:"m 216.53,149.37 10.64555,-0.0504 c 4.5708,-0.11496 6.27248,-2.88856 6.29445,-4.78612 -0.0385,-3.7004 -3.06961,-5.2423 -6.77,-5.20344 h -10.18 c -1.9694,-17.48661 -12.14801,-32.99034 -27.41,-41.75 h 38.28652 c 4.5374,-0.405759 6.02134,-3.035241 6.03782,-4.933555 C 233.39039,88.946804 230.3998,87.51221 226.7,87.54 L 84.646133,87.664824 c -4.647718,0.108052 -6.227366,2.727071 -6.216133,4.646528 0.03297,3.698792 3.061265,5.357498 6.76,5.318648 h 37.59 c -15.25929,8.76078 -25.434357,24.26476 -27.4,41.75 H 84.825323 c -4.319212,0.20475 -6.346244,2.57869 -6.362718,4.477 0.03297,3.70432 3.033137,5.60185 6.737395,5.563 h 10.16 c 1.968677,17.48157 12.14335,32.98124 27.4,41.74 l -38.009042,0.0357 c -4.128894,0.42916 -6.288797,2.75836 -6.305294,4.65825 0.04394,3.69964 3.034539,5.38388 6.734336,5.35609 l 141.5164,0.0252 c 5.50611,-0.18511 6.7571,-3.02321 6.7736,-4.9231 -0.0439,-3.69964 -3.0702,-5.17991 -6.77,-5.15212 h -37.58 c 15.27484,-8.76535 25.45587,-24.28761 27.41,-41.79 z M 108,139.33 c -3.06159,-10.26129 -1.05653,-21.36713 5.4,-29.91 13.67,-16.56 43.82,-14.23 67.33,5.19 8.25742,6.69841 14.93601,15.13543 19.56,24.71 H 108 Z m 23.25,35.23 c -8.38883,-6.80804 -15.14164,-15.41309 -19.76,-25.18 h 92.41 c 3.21387,10.3884 1.23814,21.68843 -5.31,30.37 -13.68,16.54 -43.83,14.22 -67.35,-5.18 z"}),m("path",{style:{strokeWidth:6},d:"m 226.7,224.32 -141.217602,0.0126 c -3.919227,-0.0677 -6.908324,2.57912 -6.924821,4.47901 0.03297,3.70432 2.128938,5.51633 6.642423,5.55843 h 141.54684 c 4.29339,-0.26627 6.54988,-2.72292 6.57185,-4.62048 -0.0439,-3.69964 -2.61627,-4.87729 -6.61869,-5.42952 z"})]})}const TW={cr:uW,dm:cW,dmcr:hW,do:fW,re:dW,reb:pW,mi:mW,mib:vW,fa:gW,so:yW,la:_W,lab:bW,ti:wW,tib:xW};function SW({name:e,color:t="currentColor",background:r}){const n=TW[e];return n?m(n,{style:{fill:t,stroke:t},background:r}):m(De,{})}const Gy=M.exports.memo(SW,(e,t)=>e.color===t.color&&e.background===t.background&&e.name===t.name);function nC(){const e=xe.get("note_background");return e.luminosity()>.65?ut.text.note:e.isDark()?ut.text.light:ut.text.dark}function EW({note:e,approachingNotes:t,handleClick:r,noteText:n,data:i}){var p,v;const[o,s]=M.exports.useState(nC());M.exports.useEffect(()=>jn(xe.state.data,()=>{s(nC())}),[]);const a=is(e.data),{approachRate:l,instrument:u}=i,c={transition:`background-color ${a.delay}ms  ${a.delay===100?"ease":"linear"} , transform 0.15s, border-color 100ms`},f=(p=el[u])==null?void 0:p.clickColor;return k("button",{onPointerDown:g=>{g.preventDefault(),r(e)},className:"button-hitbox-bigger",children:[t.map(g=>m(NW,{index:g.index,approachRate:l},g.id)),a.animationId!==0&&m("div",{style:f&&xe.isDefault("accent")?{borderColor:f}:{},className:Ko.noteAnimation},a.animationId),k("div",{className:`${Ko.note} ${AW(e.status)}`,style:{...c,...f&&a.status==="clicked"&&xe.isDefault("accent")?{backgroundColor:f}:{}},children:[m(Dy,{className:"genshin-border",fill:PW(a.status)}),m(Gy,{name:e.noteImage,color:xe.isDefault("accent")?(v=el[u])==null?void 0:v.fill:void 0,background:a.status==="clicked"?f&&xe.isDefault("accent")?f:"var(--accent)":"var(--note-background)"}),m("div",{className:Ko.noteName,style:{color:o},children:n})]})]})}const CW=M.exports.memo(EW,(e,t)=>e.note===t.note&&e.data.approachRate===t.data.approachRate&&e.data.instrument===t.data.instrument&&e.handleClick===t.handleClick&&e.noteText===t.noteText&&e.approachingNotes===t.approachingNotes);function IW(e){const r=Math.floor(e/7);return r===0?"var(--accent)":r===1?xe.get("accent").rotate(180).hex():(r===2,"var(--accent)")}const NW=M.exports.memo(function({approachRate:t,index:r}){return m("div",{className:Ko.approachCircle,style:{animation:`approach ${t}ms linear`,borderColor:IW(r)}})},(e,t)=>e.approachRate===t.approachRate&&e.index===t.index);function PW(e){if(e==="clicked")return"transparent";if(e==="toClickNext"||e==="toClickAndNext")return"#63aea7";const t=xe.get("note_background").desaturate(.6);return t.isDark()?t.lighten(.45).hex():t.darken(.18).hex()}function AW(e){switch(e){case"clicked":return"click-event";case"toClick":return"note-red";case"toClickNext":return"note-border-click";case"toClickAndNext":return"note-red note-border-click";case"approach-wrong":return"click-event approach-wrong";case"approach-correct":return"click-event approach-correct";default:return""}}var RW=Object.defineProperty,kW=Object.getOwnPropertyDescriptor,Ru=(e,t,r,n)=>{for(var i=n>1?void 0:n?kW(t,r):t,o=e.length-1,s;o>=0;o--)(s=e[o])&&(i=(n?s(t,r,i):s(i))||i);return n&&i&&RW(t,r,i),i};class vl{constructor(){this.state={song:null,playId:0,eventType:"stop",start:0,end:0},this.keyboard=[],this.setKeyboardLayout=t=>{this.keyboard.splice(0,this.keyboard.length,...t)},this.resetKeyboardLayout=()=>{this.keyboard.forEach(t=>t.setState({status:"",delay:100}))},this.resetOutgoingAnimation=()=>{this.keyboard.forEach(t=>t.setState({animationId:0}))},this.setNoteState=(t,r)=>{this.keyboard[t].setState(r)},this.setState=t=>{Object.assign(this.state,t)},this.play=(t,r=0,n)=>{this.setState({song:t,start:r,eventType:"play",end:n,playId:this.state.playId+1})},this.practice=(t,r=0,n)=>{this.setState({song:t,start:r,eventType:"practice",end:n,playId:this.state.playId+1})},this.approaching=(t,r=0,n)=>{this.setState({song:t,start:r,eventType:"approaching",end:n,playId:this.state.playId+1})},this.resetSong=()=>{this.setState({song:null,eventType:"stop",start:0,end:0,playId:0})},this.restartSong=(t,r)=>{this.setState({start:t,end:r,playId:this.state.playId+1})},ki(this)}get song(){return this.state.song}get eventType(){return this.state.eventType}get start(){return this.state.start}}Ru([gt],vl.prototype,"state",2);Ru([gt],vl.prototype,"keyboard",2);Ru([yo],vl.prototype,"setKeyboardLayout",2);Ru([yo],vl.prototype,"resetKeyboardLayout",2);Ru([yo],vl.prototype,"resetOutgoingAnimation",2);Ru([yo],vl.prototype,"setNoteState",2);Ru([yo],vl.prototype,"setState",2);const bt=new vl;var OW=Object.defineProperty,LW=Object.getOwnPropertyDescriptor,C4=(e,t,r,n)=>{for(var i=n>1?void 0:n?LW(t,r):t,o=e.length-1,s;o>=0;o--)(s=e[o])&&(i=(n?s(t,r,i):s(i))||i);return n&&i&&OW(t,r,i),i};class jy{constructor(){this.state={position:0,current:0,size:0,end:0},this.pagesState={pages:[],currentPageIndex:0,currentChunkIndex:0,currentPage:[]},this.score={correct:1,wrong:1,score:0,combo:0},this.setSong=t=>{this.setState({size:t.notes.length,position:0,current:0}),this.setPages([])},this.resetScore=()=>{this.setScoreState({correct:1,wrong:1,score:0,combo:0})},this.increaseScore=(t,r)=>{const{score:n}=this;t?this.setScoreState({correct:n.correct+1,combo:n.combo+1,score:n.score+n.combo*(r!=null?r:1)}):this.setScoreState({wrong:n.wrong+1,combo:0})},this.setPages=t=>{var n;const r=t.map(i=>i.map(o=>o.clone()));this.setPagesState({pages:r,currentPageIndex:0,currentChunkIndex:0,currentPage:(n=r[0])!=null?n:[]})},this.clearPages=()=>{this.setPagesState({pages:[],currentPageIndex:0,currentChunkIndex:0,currentPage:[]})},this.setState=t=>{Object.assign(this.state,t)},this.setScoreState=t=>{Object.assign(this.score,t)},this.setPagesState=t=>{Object.assign(this.pagesState,t)},this.setPosition=t=>{this.setState({position:t})},this.incrementCurrent=()=>{this.setState({current:this.current+1})},this.incrementChunkPositionAndSetCurrent=t=>{var o,s;const{pages:r,currentPageIndex:n}=this.pagesState;t=t!=null?t:this.current;const i=this.currentChunkIndex+1;if(i>=((s=(o=r[n])==null?void 0:o.length)!=null?s:0)){if(n===r.length-1)return;this.setPagesState({currentPageIndex:n+1,currentChunkIndex:0,currentPage:r[n+1]}),this.setState({current:t})}else this.setPagesState({currentChunkIndex:i}),this.setState({current:t})},this.setCurrent=t=>{this.setState({current:t})},this.setEnd=t=>{this.setState({end:t})},this.setSize=t=>{this.setState({size:t})},ki(this)}get currentChunkIndex(){return this.pagesState.currentChunkIndex}get currentChunk(){return this.pagesState.currentPage[this.pagesState.currentChunkIndex]}get position(){return this.state.position}get current(){return this.state.current}get size(){return this.state.size}get end(){return this.state.end}}C4([gt],jy.prototype,"state",2);C4([gt],jy.prototype,"pagesState",2);C4([gt],jy.prototype,"score",2);const Dt=new jy;class UW{getLatestSettings(t,r){var o;const n=localStorage.getItem(r),i={data:t.data,hadUpdate:!1};try{const s=JSON.parse(n||"null");if(s){if(((o=s.other)==null?void 0:o.settingVersion)!==t.other.settingVersion)return i.data=t.data,i.hadUpdate=!0,i;i.data=s.data}}catch(s){console.error(s)}return i}getComposerSettings(){const{data:t,hadUpdate:r}=this.getLatestSettings(a5,je+"_Composer_Settings");return r&&this.updateComposerSettings(t),t}getZenKeyboardSettings(){const{data:t,hadUpdate:r}=this.getLatestSettings(Xb,je+"_ZenKeyboard_Settings");return r&&this.updateZenKeyboardSettings(t),t}getVsrgComposerSettings(){const{data:t,hadUpdate:r}=this.getLatestSettings(u5,je+"_VsrgComposer_Settings");return r&&this.updateVsrgComposerSettings(t),t}getVsrgPlayerSettings(){const{data:t,hadUpdate:r}=this.getLatestSettings(c5,je+"_VsrgPlayer_Settings");return r&&this.updateVsrgPlayerSettings(t),t}getPlayerSettings(){const{data:t,hadUpdate:r}=this.getLatestSettings(l5,je+"_Player_Settings");return r&&this.updatePlayerSettings(t),t}getMIDISettings(){try{const t=JSON.parse(localStorage.getItem(`${je}_MIDI_Settings`)||"null");return t!==null&&t.settingVersion===G2.settingVersion?t:G2}catch(t){return console.error(t),G2}}updateVsrgComposerSettings(t){const r={other:u5.other,data:t};localStorage.setItem(je+"_VsrgComposer_Settings",JSON.stringify(r))}updateZenKeyboardSettings(t){const r={other:Xb.other,data:t};localStorage.setItem(je+"_ZenKeyboard_Settings",JSON.stringify(r))}updatePlayerSettings(t){const r={other:l5.other,data:t};localStorage.setItem(je+"_Player_Settings",JSON.stringify(r))}updateComposerSettings(t){const r={other:a5.other,data:t};localStorage.setItem(je+"_Composer_Settings",JSON.stringify(r))}updateVsrgPlayerSettings(t){const r={other:c5.other,data:t};localStorage.setItem(je+"_VsrgPlayer_Settings",JSON.stringify(r))}updateMIDISettings(t){localStorage.setItem(`${je}_MIDI_Settings`,JSON.stringify(t))}}const eo=new UW;class FW{constructor(){this.listeners=[],this.inputsListeners=[],this.MIDIAccess=null,this.currentMIDISource=null,this.inputs=[],this.create=async()=>{if(this.MIDIAccess)return this.MIDIAccess;if(navigator.requestMIDIAccess)try{const t=await navigator.requestMIDIAccess();return this.handleMIDIState(t),t}catch(t){return console.error(t),null}else return console.log("Midi not available"),null},this.enable=()=>(this.settings.enabled=!0,this.saveSettings(),this.create()),this.destroy=()=>{var t,r;this.listeners=[],this.inputs=[],(t=this.MIDIAccess)==null||t.removeEventListener("statechange",this.reloadMidiAccess),(r=this.currentMIDISource)==null||r.removeEventListener("midimessage",this.handleEvent),this.MIDIAccess=null},this.handleMIDIState=t=>{var o;(o=this.MIDIAccess)==null||o.removeEventListener("statechange",this.reloadMidiAccess),this.MIDIAccess=t,t.addEventListener("statechange",this.reloadMidiAccess);const r=this.MIDIAccess.inputs.values(),n=[];for(let s=r.next();s&&!s.done;s=r.next())n.push(s.value);this.inputs=n;const i=n.find(s=>s.name+" "+s.manufacturer===this.settings.currentSource)||null;this.dispatchInputs(),n.length&&this.selectSource(i||n[0])},this.reloadMidiAccess=()=>{this.MIDIAccess&&this.handleMIDIState(this.MIDIAccess),this.dispatchInputs()},this.dispatchInputs=()=>{this.inputsListeners.forEach(t=>t(this.inputs))},this.selectSource=t=>{var r;this.settings.currentSource=t.name+" "+t.manufacturer,this.saveSettings(),(r=this.currentMIDISource)==null||r.removeEventListener("midimessage",this.handleEvent),this.currentMIDISource=t,this.currentMIDISource.addEventListener("midimessage",this.handleEvent)},this.saveSettings=()=>{eo.updateMIDISettings(this.settings)},this.handleEvent=t=>{const{data:r}=t,n=[r[0],r[1],r[2]];this.listeners.forEach(i=>i(n))},this.addListener=t=>{this.listeners.push(t)},this.addInputsListener=t=>{this.inputsListeners.push(t)},this.removeInputsListener=t=>{this.inputsListeners=this.inputsListeners.filter(r=>r!==t)},this.removeListener=t=>{this.listeners=this.listeners.filter(r=>r!==t)},this.clear=()=>{this.listeners=[],this.inputsListeners=[]},this.settings=eo.getMIDISettings(),this.settings.enabled&&this.create()}}const Lr=new FW;class MW extends M.exports.Component{constructor(t){super(t),this.approachRate=1500,this.approachingNotesList=[],this.nextChunkDelay=0,this.tickTime=50,this.tickInterval=0,this.songTimestamp=0,this.toDispose=[],this.timeouts=[],this.debouncedStateUpdate=0,this.handleMidi=([r,n,i])=>{if(!this.mounted)return;const o=this.props.data.instrument;z3.down===r&&i!==0&&Lr.settings.notes.filter(a=>a.midi===n).forEach(a=>{this.handleClick(o.notes[a.index])})},this.handleKeyboard=async({letter:r,shift:n,event:i})=>{if(!i.repeat&&!n){const o=this.props.data.instrument.getNoteFromCode(r);o!==null&&this.handleClick(o)}},this.approachingSong=async(r,n=0,i)=>{i=i||r.notes.length;const{speedChanger:o}=this.props.data,s=[];this.approachRate=this.props.data.approachRate||1500;const a=this.approachRate,l=r.notes[n]!==void 0?r.notes[n].time:0;for(let u=n;u<i&&u<r.notes.length;u++){const c=r.notes[u],f=new e5({time:Math.floor((c.time-l)/o.value+a),index:c.index});s.push(f)}Dt.setSong(r),Dt.clearPages(),Dt.resetScore(),this.setState({approachingNotes:D2.from(21)}),this.approachingNotesList=s},this.tick=()=>{if(!this.props.data.hasSong)return;const{approachingNotes:r}=this.state,{speedChanger:n}=this.props.data,i=r,o=this.approachingNotesList;o.forEach(l=>{l.time-=this.tickTime});let s=!1,a=0;for(let l=0;l<o.length&&o[l].time<this.approachRate;l++){const u=new e5({time:this.approachRate,index:o[l].index,id:Math.floor(Math.random()*1e4)});i[o[l].index].push(u),o.splice(l,1),l--,s=!0}i.forEach(l=>{for(let u=0;u<l.length;u++){const c=l[u];c.time-=this.tickTime,c.clicked&&(c.time<this.approachRate/3?Dt.increaseScore(!0,n.value):Dt.increaseScore(!1),c.time=-1),c.time<0&&(c.clicked||Dt.increaseScore(!1),l.splice(u,1),u--,s=!0,a++)}}),s&&(Dt.setCurrent(Dt.current+a),this.setState({approachingNotes:i.map(l=>l.slice())}))},this.playSong=async(r,n=0,i)=>{var v,g;i=i||r.notes.length,this.songTimestamp=r.timestamp;const{keyboard:o}=this.state,s=this.applySpeedChange(r.notes).slice(n,i),a=En.mergeNotesIntoChunks(s.map(b=>b.clone()));Dt.setPages(i5(a,10)),await Ws(200);const l=s[0].time;let u=l,c=0,f=Date.now(),p=0;for(let b=0;b<s.length;b++){const _=s[b].time-u;if(u=s[b].time,_>16&&await Ws(_+c),!this.mounted||this.songTimestamp!==r.timestamp)return;this.handleClick(o[s[b].index],s[b].layer),p>=((g=(v=Dt.currentChunk)==null?void 0:v.notes.length)!=null?g:0)?(p=1,Dt.incrementChunkPositionAndSetCurrent(n+b+1)):(p++,Dt.setCurrent(n+b+1)),c=f+u-l-Date.now()}},this.applySpeedChange=r=>{const{speedChanger:n}=this.props.data;return r.map(i=>(i.time=i.time/n.value,i))},this.practiceSong=(r,n=0,i)=>{i=i||r.notes.length;const{keyboard:o}=this.state,s=this.applySpeedChange(r.notes).slice(n,i),a=En.mergeNotesIntoChunks(s.map(c=>c.clone()));if(a.length===0)return;this.nextChunkDelay=0,a[0].notes.forEach(c=>{bt.setNoteState(c.index,{status:"toClick",delay:100})});const u=a[1];u==null||u.notes.forEach(c=>{const f=o[c.index];if(f.status==="toClick")return f.setStatus("toClickAndNext");f.setStatus("toClickNext")}),this.props.functions.setHasSong(!0),Dt.setPages(i5(a,10)),this.setState({songToPractice:a})},this.restartSong=async r=>{await this.stopSong(),this.mounted&&bt.restartSong(typeof r=="number"?r:Dt.position,Dt.end)},this.stopSong=()=>(this.songTimestamp=0,new Promise(r=>{bt.resetKeyboardLayout(),this.approachingNotesList=[],this.setState({songToPractice:[],approachingNotes:D2.from(21)},r),this.props.functions.setHasSong(!1)})),this.stopAndClear=()=>{this.stopSong(),bt.resetSong()},this.handleApproachClick=r=>{const{approachingNotes:n}=this.state,i=n[r.index][0];return i&&(i.clicked=!0,i.time<this.approachRate/3)?"approach-correct":"approach-wrong"},this.handlePracticeClick=r=>{var o;const{keyboard:n,songToPractice:i}=this.state;if(i.length>0){const s=(o=i[0])==null?void 0:o.notes.findIndex(a=>a.index===r.index);if(s!==-1){if(i[0].notes.splice(s,1),i[0].notes.length===0&&(i.shift(),Dt.incrementChunkPositionAndSetCurrent()),i.length>0){const a=i[0],l=i[1];a.notes.forEach(u=>{bt.setNoteState(u.index,{status:"toClick",delay:a.delay})}),l&&(l==null||l.notes.forEach(u=>{const c=n[u.index];if(c.status==="toClick")return c.setStatus("toClickAndNext");c.setStatus("toClickNext")}))}Dt.incrementCurrent(),this.setState({songToPractice:i})}}},this.handleClick=(r,n)=>{const{keyboard:i}=this.state,o=this.props.data.hasAnimation;if(!r)return;const s=i[r.index].status;bt.setNoteState(r.index,{status:"clicked",delay:bt.eventType!=="play"?100:0,animationId:o&&bt.eventType!=="approaching"?Math.floor(Math.random()*1e4)+Date.now():0}),this.handlePracticeClick(r),this.props.functions.playSound(r.index,n);const a=this.handleApproachClick(r);bt.eventType==="approaching"&&(bt.setNoteState(r.index,{status:a}),a==="approach-wrong"&&Dt.increaseScore(!1)),this.timeouts[r.index]>0&&bt.eventType==="play"&&clearTimeout(this.timeouts[r.index]),this.timeouts[r.index]=setTimeout(()=>{if(this.timeouts[r.index]=0,!!["clicked","approach-wrong","approach-correct"].includes(i[r.index].status)){if(s==="toClickNext")return bt.setNoteState(r.index,{status:s});bt.setNoteState(r.index,{status:""})}},100)},this.state={playTimestamp:Date.now(),songToPractice:[],approachingNotes:D2.from(21),keyboard:bt.keyboard},this.mounted=!0}componentDidMount(){const t="keyboard-player";this.tickInterval=setInterval(this.tick,this.tickTime),Xe.registerLetter("S",()=>{this.props.data.hasSong&&this.stopAndClear()},{shift:!0,id:t}),Xe.registerLetter("R",()=>{!this.props.data.hasSong||["practice","play","approaching"].includes(bt.eventType)&&this.restartSong(0)},{shift:!0,id:t}),Xe.listen(this.handleKeyboard,{id:t}),Lr.addListener(this.handleMidi),this.toDispose.push($d(bt.state,async()=>{this.debouncedStateUpdate&&clearTimeout(this.debouncedStateUpdate),this.debouncedStateUpdate=setTimeout(async()=>{var o,s;const r=bt.state,n=bt.song,i=bt.eventType;if(await this.stopSong(),!!this.mounted)if(i==="stop")this.props.functions.setHasSong(!1);else{if(!n)return;const a=n.isComposed?n.toRecordedSong().clone():n.clone();a.timestamp=Date.now();const l=r.end||((o=a==null?void 0:a.notes)==null?void 0:o.length)||0;i==="play"&&this.playSong(a,r.start,l),i==="practice"&&this.practiceSong(a,r.start,l),i==="approaching"&&this.approachingSong(a,r.start,l),this.props.functions.setHasSong(!0),Sn.songEvent({type:i}),Dt.setState({size:((s=a==null?void 0:a.notes)==null?void 0:s.length)||1,position:r.start,end:l,current:r.start})}},4)})),this.toDispose.push($k(bt.keyboard,()=>{this.setState({keyboard:bt.keyboard})}))}componentWillUnmount(){Lr.removeListener(this.handleMidi),this.toDispose.forEach(t=>t()),Xe.unregisterById("keyboard-player"),this.songTimestamp=0,bt.resetSong(),this.mounted=!1,clearInterval(this.tickInterval)}render(){const{state:t,props:r}=this,{data:n}=r,{instrument:i,noteNameType:o,pitch:s}=n,{keyboard:a}=t,l=ii(n.keyboardSize/100,.5,1.5);let u="keyboard"+(bt.eventType==="play"?" keyboard-playback":"");a.length===15&&(u+=" keyboard-5"),a.length===14&&(u+=" keyboard-5"),a.length===8&&(u+=" keyboard-4"),a.length===6&&(u+=" keyboard-3");const c=l!==1?{transform:`scale(${l})`}:{};return m(De,{children:m("div",{className:u,style:{...c,zIndex:2,marginBottom:`${l*6+n.keyboardYPosition/10}vh`},children:n.isLoading?m("div",{className:"loading",children:"Loading..."}):a.map(f=>m(CW,{note:f,data:{approachRate:this.approachRate,instrument:i.name},approachingNotes:t.approachingNotes[f.index],handleClick:this.handleClick,noteText:i.getNoteText(f.index,o,s)},f.index))})})}}function BW(e){return Me({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"g",attr:{},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"}},{tag:"path",attr:{d:"M2 18h10v2H2v-2zm0-7h14v2H2v-2zm0-7h20v2H2V4zm17 11.17V9h5v2h-3v7a3 3 0 1 1-2-2.83z"}}]}]})(e)}const DW=""+new URL("help-composer.e8769a3a.png",import.meta.url).href,GW=""+new URL("help-player.d766aecd.png",import.meta.url).href;function jW(e){return Me({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"}},{tag:"path",attr:{d:"M11 18h2v-2h-2v2zm1-16C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8zm0-14c-2.21 0-4 1.79-4 4h2c0-1.1.9-2 2-2s2 .9 2 2c0 2-3 1.75-3 5h2c0-2.25 3-2.5 3-5 0-2.21-1.79-4-4-4z"}}]})(e)}function $W(e){return Me({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"}},{tag:"path",attr:{d:"M3 5h2V3c-1.1 0-2 .9-2 2zm0 8h2v-2H3v2zm4 8h2v-2H7v2zM3 9h2V7H3v2zm10-6h-2v2h2V3zm6 0v2h2c0-1.1-.9-2-2-2zM5 21v-2H3c0 1.1.9 2 2 2zm-2-4h2v-2H3v2zM9 3H7v2h2V3zm2 18h2v-2h-2v2zm8-8h2v-2h-2v2zm0 8c1.1 0 2-.9 2-2h-2v2zm0-12h2V7h-2v2zm0 8h2v-2h-2v2zm-4 4h2v-2h-2v2zm0-16h2V3h-2v2zM7 17h10V7H7v10zm2-8h6v6H9V9z"}}]})(e)}function HW(e){return Me({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0V0zm24 24H0V0h24v24z"}},{tag:"path",attr:{d:"M23 15h-2v2h2v-2zm0-4h-2v2h2v-2zm0 8h-2v2c1 0 2-1 2-2zM15 3h-2v2h2V3zm8 4h-2v2h2V7zm-2-4v2h2c0-1-1-2-2-2zM3 21h8v-6H1v4c0 1.1.9 2 2 2zM3 7H1v2h2V7zm12 12h-2v2h2v-2zm4-16h-2v2h2V3zm0 16h-2v2h2v-2zM3 3C2 3 1 4 1 5h2V3zm0 8H1v2h2v-2zm8-8H9v2h2V3zM7 3H5v2h2V3z"}}]})(e)}function ku({children:e,maxWidth:t=20,buttonStyle:r,parentStyle:n,width:i}){const o=M.exports.useRef(null);return k("div",{className:"help-tooltip",style:n,children:[m("button",{ref:o,className:"help-tooltip-button",style:r,"aria-label":"Help",onClick:()=>{var s;return(s=o.current)==null?void 0:s.focus()},children:m(jW,{style:{width:"100%",height:"100%"}})}),m("div",{className:"help-tooltip-content",style:{maxWidth:`${t}rem`,width:i!==void 0?`${i}rem`:"unset"},children:e})]})}function Zk(){return k(De,{children:[k("span",{children:["If you are on PC, hover over the buttons to see a tooltip, if you are on mobile, long press the buttons. When clicking the",m(ku,{parentStyle:{display:"inline-flex"},buttonStyle:{width:"1.2rem",height:"1.2rem",margin:"0 0.4rem"},children:"Example help"}),"it will show you more info."]}),je==="Sky",m("div",{className:"help-title",children:"Main page"}),k("div",{children:[m("img",{src:GW,className:"help-img",alt:"tutorial for the main page",loading:"lazy"}),k("ol",{children:[m("li",{children:"Record the keyboard as an audio file"}),m("li",{children:"The selection where you want the song to start/end"}),m("li",{children:"Playback speed"}),m("li",{children:"Restart the song from the selected starting point"}),m("li",{children:"Practice tool note, you should press this note"}),m("li",{children:"Practice tool note, this will need to be clicked after all the red ones"}),m("li",{children:"Public Song library"}),m("li",{children:"Your songs"}),m("li",{children:"Open the Page selection menu"})]})]}),!Tn.exports()&&k(De,{children:[m("div",{className:"help-title",children:"Main page shortcuts"}),k("div",{className:"help-margin-left",children:[m("div",{style:{marginBottom:"0.5rem"},children:"The main page has shortcuts for PC users:"}),m("table",{className:"keys-table",children:k("tbody",{children:[k("tr",{children:[m("td",{children:m(yr,{children:"Shift + R"})}),m("td",{children:"reload song "})]}),k("tr",{children:[m("td",{children:m(yr,{children:"Shift + C"})}),m("td",{children:"Start/Stop recording when there are no songs playing"})]}),k("tr",{children:[m("td",{children:m(yr,{children:"Shift + M"})}),m("td",{children:"Open/Close the menu"})]}),k("tr",{children:[m("td",{children:m(yr,{children:"Esc"})}),m("td",{children:" Close the menu "})]}),k("tr",{children:[m("td",{children:m(yr,{children:"Shift + S"})}),m("td",{children:"stop song "})]})]})})]})]}),m("div",{className:"help-title",children:"Composer"}),k("div",{children:[m("img",{src:DW,className:"help-img",alt:"tutorial for composer",loading:"lazy"}),k("ol",{children:[m("li",{children:"Go to the next / previous breakpoint"}),m("li",{children:"Timeline of the breakpoints"}),m("li",{children:"Open the tools"}),m("li",{children:"Add 16 columns to the end"}),m("li",{children:"Remove the current selected column"}),m("li",{children:"Add column after the current one"}),m("li",{children:"Layer (instrument) selection"}),m("li",{children:"Change column's duration"})]})]}),!Tn.exports()&&k(De,{children:[m("div",{className:"help-title",children:"Composer shortcuts"}),k("div",{className:"help-margin-left",children:[m("div",{style:{marginBottom:"0.5rem"},children:"The composer has shortcuts for PC users:"}),m("table",{children:k("tbody",{children:[k("tr",{children:[m("td",{children:m(yr,{children:"A / D"})}),m("td",{children:"move left / right"})]}),k("tr",{children:[m("td",{children:m(yr,{children:"1 / 2 / 3 / 4"})}),m("td",{children:"change tempo"})]}),k("tr",{children:[m("td",{children:m(yr,{children:"Space bar"})}),m("td",{children:"play / pause song"})]}),k("tr",{children:[m("td",{children:m(yr,{children:"Arrow Left"})}),m("td",{children:"go to previous breakpoint"})]}),k("tr",{children:[m("td",{children:m(yr,{children:"Arrow Right"})}),m("td",{children:"go to next breakpoint"})]}),k("tr",{children:[m("td",{children:m(yr,{children:"Arrow Up"})}),m("td",{children:"select previous layer"})]}),k("tr",{children:[m("td",{children:m(yr,{children:"Arrow Down"})}),m("td",{children:"select next layer "})]}),k("tr",{children:[m("td",{children:m(yr,{children:"Shift + Note"})}),m("td",{children:"Adds/remove a note in the column "})]}),k("tr",{children:[m("td",{children:m(yr,{children:"Q"})}),m("td",{children:"remove current column"})]}),k("tr",{children:[m("td",{children:m(yr,{children:"E"})}),m("td",{children:"add column "})]})]})}),"When playing a song, you can press on the PC keyboard to add notes",m("div",{style:{marginBottom:"1rem"}})]})]})]})}function yr({children:e}){return m("div",{className:"keyboard-key",children:e})}function ni({title:e,current:t,children:r,id:n}){return k("div",{className:t===n?"menu-panel menu-panel-visible":"menu-panel",children:[e&&m("div",{className:"menu-title",children:e}),m("div",{className:"panel-content-wrapper",children:r})]})}function cw(){return W0()?m(De,{}):m(hi,{className:"donate-button",to:"Donate",children:"Donate"})}class os extends ts{constructor(t){super(t,1,"vsrg"),this.tracks=[],this.keys=4,this.duration=6e4,this.audioSongId=null,this.trackModifiers=[],this.breakpoints=[],this.difficulty=5,this.snapPoint=1,this.bpm=100}static deserialize(t){var n,i,o,s,a,l,u,c;const r=ts.deserializeTo(new os(t.name),t);return r.tracks=((n=t.tracks)!=null?n:[]).map(f=>Vd.deserialize(f)),r.audioSongId=(i=t.audioSongId)!=null?i:null,r.trackModifiers=((o=t.trackModifiers)!=null?o:[]).map(f=>zd.deserialize(f)),r.duration=(s=t.duration)!=null?s:6e4,r.keys=(a=t.keys)!=null?a:4,r.breakpoints=(l=t.breakpoints)!=null?l:[],r.difficulty=(u=t.difficulty)!=null?u:5,r.snapPoint=(c=t.snapPoint)!=null?c:1,r}static isSerializedType(t){return(t==null?void 0:t.type)==="vsrg"}setAudioSong(t){if(t===null){this.audioSongId=null;return}this.audioSongId!==t.id&&(this.audioSongId=t.id,this.trackModifiers=t.instruments.map(r=>{const n=new zd;return n.alias=r.alias||r.name,n}))}setDurationFromNotes(t){const r=t.reduce((n,i)=>Math.max(n,i.time),0);return this.duration=this.duration<r?r:this.duration,r}toGenshin(){const t=this.clone();return t.tracks.forEach(r=>{r.instrument.name="DunDun",r.hitObjects.forEach(n=>{n.notes=n.notes.map(i=>sy[i])})}),t}startPlayback(t){this.tracks.forEach(r=>r.startPlayback(t))}tickPlayback(t){return this.tracks.map(r=>r.tickPlayback(t))}addTrack(t){const r=new Vd(t!=null?t:"DunDun");return this.tracks.push(r),this.tracks=[...this.tracks],r}validateBreakpoints(){const t=this.breakpoints.filter(r=>r<this.duration);t.sort((r,n)=>r-n),this.breakpoints=t}setBreakpoint(t,r){const n=this.breakpoints.findIndex(i=>i===t);n===-1&&r?this.breakpoints.push(t):n!==-1&&!r&&this.breakpoints.splice(n,1),this.validateBreakpoints()}getClosestBreakpoint(t,r){const{breakpoints:n}=this,i=r===1?n.filter(o=>o>t):n.filter(o=>o<t);return i.length===0?r===1?this.duration:0:i[r===1?0:i.length-1]}getRenderableNotes(t){const r=[],n=this.trackModifiers.map(i=>!i.hidden);return t.notes.forEach(i=>{n.some((s,a)=>s?i.layer.test(a):!1)&&r.push(i)}),r}getHitObjectsAt(t,r){return this.tracks.map(n=>n.getHitObjectAt(t,r))}getHitObjectsBetween(t,r,n){return this.tracks.map(i=>i.getObjectsBetween(t,r,n))}removeHitObjectsBetween(t,r,n){this.tracks.forEach(i=>i.removeObjectsBetween(t,r,n))}getHitObjectInTrack(t,r,n){return this.tracks[t].getHitObjectAt(r,n)}addHitObjectInTrack(t,r){this.tracks[t].addHitObject(r)}createHitObjectInTrack(t,r,n){const i=this.tracks[t].createHitObjectAt(r,n);return this.duration=Math.max(this.duration,r),i}createHeldHitObject(t,r,n){const i=this.createHitObjectInTrack(t,r,n);return i.isHeld=!0,i}setHeldHitObjectTail(t,r,n){this.tracks.forEach((i,o)=>o!==t&&i.removeObjectsBetween(r.timestamp,r.timestamp+n,r.index)),this.tracks[t].setHeldHitObjectTail(r,n)}removeHitObjectInTrack(t,r){this.tracks[t].removeHitObject(r)}removeHitObjectInTrackAtTimestamp(t,r,n){this.tracks[t].removeHitObjectAt(r,n)}deleteTrack(t){this.tracks.splice(t,1),this.tracks=[...this.tracks]}getAccuracyBounds(){const{difficulty:t}=this;return[16,64-t*2,97-t*2,127-t*2,188-t*2]}changeKeys(t){this.keys=t}serialize(){return{name:this.name,type:"vsrg",bpm:this.bpm,pitch:this.pitch,version:1,keys:this.keys,data:this.data,id:this.id,audioSongId:this.audioSongId,folderId:this.folderId,duration:this.duration,tracks:this.tracks.map(t=>t.serialize()),instruments:this.instruments.map(t=>t.serialize()),trackModifiers:this.trackModifiers.map(t=>t.serialize()),breakpoints:[...this.breakpoints],difficulty:this.difficulty,snapPoint:this.snapPoint}}set(t){return Object.assign(this,t),this}clone(){const t=new os(this.name);return t.set({id:this.id,folderId:this.folderId,bpm:this.bpm,data:{...this.data},version:this.version,pitch:this.pitch,keys:this.keys,duration:this.duration,audioSongId:this.audioSongId,trackModifiers:this.trackModifiers.map(r=>r.clone()),tracks:this.tracks.map(r=>r.clone()),instruments:this.instruments.map(r=>r.clone()),breakpoints:[...this.breakpoints],difficulty:this.difficulty}),t}}class zd{constructor(){this.hidden=!1,this.muted=!1,this.alias=""}static deserialize(t){return new zd().set({hidden:t.hidden,muted:t.muted,alias:t.alias})}serialize(){return{hidden:this.hidden,muted:this.muted,alias:this.alias}}clone(){return new zd().set({hidden:this.hidden,muted:this.muted})}set(t){return Object.assign(this,t),this}}class Vd{constructor(t,r,n){this.color="#FFFFFF",this.lastPlayedHitObjectIndex=-1,this.instrument=new Un({name:t!=null?t:"DunDun",alias:r}),this.hitObjects=n!=null?n:[]}static deserialize(t){var n,i,o;const r=new Vd;return r.instrument=Un.deserialize((n=t.instrument)!=null?n:{}),r.hitObjects=((i=t.hitObjects)!=null?i:[]).map(s=>hw.deserialize(s)),r.color=(o=t.color)!=null?o:"#FFFFFF",r}startPlayback(t){this.lastPlayedHitObjectIndex=-1;for(let r=0;r<this.hitObjects.length&&!(this.hitObjects[r].timestamp>=t);r++)this.lastPlayedHitObjectIndex=r}tickPlayback(t){const r=[];for(let n=this.lastPlayedHitObjectIndex+1;n<this.hitObjects.length;n++){if(this.hitObjects[n].timestamp<=t){r.push(this.hitObjects[n]),this.lastPlayedHitObjectIndex=n;continue}break}return r}serialize(){return{instrument:this.instrument.serialize(),hitObjects:this.hitObjects.map(t=>t.serialize()),color:this.color}}sortTrack(){this.hitObjects.sort((t,r)=>t.timestamp-r.timestamp)}getHitObjectAt(t,r){return this.hitObjects.find(n=>n.timestamp===t&&n.index===r)||null}addHitObject(t){this.hitObjects.push(t),this.sortTrack()}createHitObjectAt(t,r){const n=this.hitObjects.findIndex(o=>o.timestamp===t&&o.index===r);if(n!==-1)return this.hitObjects[n];const i=new hw(r,t);return this.addHitObject(i),i}getObjectsBetween(t,r,n){if(t>r){const i=t;t=r,r=i}return this.hitObjects.filter(i=>i.timestamp>=t&&i.timestamp<=r&&(n===void 0||i.index===n))}removeObjectsBetween(t,r,n){this.getObjectsBetween(t,r,n).forEach(o=>this.removeHitObjectAt(o.timestamp,o.index))}setHeldHitObjectTail(t,r){const n=t.timestamp+r;this.getObjectsBetween(t.timestamp,n,t.index).forEach(o=>o!==t&&this.removeHitObjectAt(o.timestamp,o.index)),r<0?(t.holdDuration=Math.abs(r),t.timestamp=n):t.holdDuration=r}removeHitObject(t){const r=this.hitObjects.indexOf(t);r!==-1&&this.hitObjects.splice(r,1)}removeHitObjectAt(t,r){const n=this.hitObjects.findIndex(i=>i.timestamp===t&&i.index===r);n!==-1&&this.hitObjects.splice(n,1)}set(t){return Object.assign(this,t),this}clone(){const t=new Vd;return t.instrument=this.instrument.clone(),t.hitObjects=this.hitObjects.map(r=>r.clone()),t.color=this.color,t}}const u0=class{constructor(e,t){this.isHeld=!1,this.notes=[],this.holdDuration=0,this.renderId=0,this.index=e,this.timestamp=t,this.renderId=u0.globalRenderId++}static deserialize(e){const t=new u0(e[0],e[1]);return t.holdDuration=e[2],t.notes=[...e[3]],t.isHeld=t.holdDuration>0,t}serialize(){return[this.index,this.timestamp,this.holdDuration,[...this.notes]]}toggleNote(e){if(this.notes.find(r=>r===e)!==void 0)return this.removeNote(e);this.setNote(e)}setNote(e){this.notes.includes(e)||(this.notes=[...this.notes,e])}removeNote(e){const t=this.notes.indexOf(e);t!==-1&&(this.notes.splice(t,1),this.notes=[...this.notes])}clone(){const e=new u0(this.index,this.timestamp);return e.notes=[...this.notes],e.holdDuration=this.holdDuration,e.isHeld=this.isHeld,e}};let hw=u0;hw.globalRenderId=0;class zW{constructor(){this.songCollection=Jl.collections.songs}async getSongs(){const t=await this.songCollection.find({});return(await this.ensureMigration(t)).map(this.stripDbId)}async ensureMigration(t){const r=t.map(i=>new Promise(async o=>{let s=!1;(i.id===void 0||i.id===null)&&(i.id=Jl.generateId(),i.type=ts.getSongType(i),i.folderId=null,await this.songCollection.update({name:i.name},i),s=!0),o(s)}));return(await Promise.all(r)).some(i=>i)?this.songCollection.find({}):t}stripDbId(t){return delete t._id,t}async songExists(t){return await this.getSongById(t)!==null}async getSongById(t){const r=await this.songCollection.findOneById(t);return r?this.stripDbId(r):null}updateSong(t,r){return this.songCollection.updateById(t,r)}async renameSong(t,r){const n=await this.getSongById(t);if(n!==null)return n.name=r,this.updateSong(t,n)}async addSong(t){const r=Jl.generateId();return t.id=r,await this.songCollection.insert(t),r}_clearAll(){return this.songCollection.remove({})}parseSong(t){var n,i,o;t=Array.isArray(t)?t[0]:t;const r=uG(t);if(r==="none")throw console.log(t),new Error("Error Invalid song");if(r==="oldSky"){const s=En.fromOldFormat(t);if(s===null)throw new Error("Error parsing old format song");return s}if(((n=t.data)==null?void 0:n.appName)==="Sky"){if(t.type==="vsrg")return os.deserialize(t).toGenshin();if(t.type==="composed"||((i=t.data)==null?void 0:i.isComposedVersion)===!0)return Yr.deserialize(t).toGenshin();if(t.type==="recorded"||((o=t.data)==null?void 0:o.isComposedVersion)===!1)return En.deserialize(t).toGenshin()}if(r==="vsrg")return os.deserialize(t);if(r==="newComposed")return Yr.deserialize(t);if(r==="newRecorded")return En.deserialize(t);throw new ka("Error Invalid song")}removeSong(t){return this.songCollection.removeById(t)}}const Pt=new zW;function VW({onClick:e,data:t,importSong:r,theme:n}){const[i,o]=M.exports.useState(!1),[s,a]=M.exports.useState(null),l=async function(){if(!i)try{if(s)return r(s.clone());o(!0);let c=await fetch("https://sky-music.herokuapp.com/api/songs?get="+encodeURI(t.file)).then(f=>f.json());o(!1),c=Pt.parseSong(c),a(c),r(c)}catch(c){o(!1),console.error(c),we.error("Error downloading song")}};return k("div",{className:"song-row",children:[m("div",{className:"song-name",onClick:async function(){if(!i)try{if(s)return e(s,0);o(!0);let c=await fetch("https://sky-music.herokuapp.com/api/songs?get="+encodeURI(t.file)).then(f=>f.json());o(!1),c=Pt.parseSong(c),e(c,0),a(c)}catch(c){console.error(c),o(!1),we.error("Error downloading song")}},children:t.name}),m("div",{className:"song-buttons-wrapper",children:m("button",{className:"song-button",onClick:l,"aria-label":`Import song ${t.name}`,style:{backgroundColor:n.layer("primary",.2).hex(),marginRight:0},children:i?m(tM,{}):m(es,{})})})]})}function yg({onClick:e,children:t,style:r,tooltip:n,ariaLabel:i,className:o}){return m(De,{children:k("button",{className:`song-button ${Wn(n)} ${o!=null?o:""}`,onClick:e||(()=>{}),style:r,"aria-label":i,children:[t,n&&m(Gn,{children:n})]})})}var XW=Object.defineProperty,WW=Object.getOwnPropertyDescriptor,YW=(e,t,r,n)=>{for(var i=n>1?void 0:n?WW(t,r):t,o=e.length-1,s;o>=0;o--)(s=e[o])&&(i=(n?s(t,r,i):s(i))||i);return n&&i&&XW(t,r,i),i};class Jk{constructor(){this.songs=[],this.sync=async()=>{const t=await Pt.getSongs();t.forEach(r=>{r.type||(r.type=ts.getSongType(r)),r.folderId===void 0&&(r.folderId=null)}),this.songs.splice(0,this.songs.length,...t)},this._DANGEROUS_CLEAR_ALL_SONGS=async()=>{await Pt._clearAll(),this.sync()},this.removeSong=async t=>{await Pt.removeSong(t),this.sync()},this.addSong=async t=>{const r=await Pt.addSong(t.serialize());return this.sync(),r},this.renameSong=async(t,r)=>{await Pt.renameSong(t,r),this.sync()},this.updateSong=async t=>{await Pt.updateSong(t.id,t.serialize()),this.sync()},this.getSongById=async t=>t===null?null:await Pt.getSongById(t),this.addSongToFolder=async(t,r)=>{t.folderId=r,await Pt.updateSong(t.id,t),this.sync()},this.clearSongsInFolder=async t=>{const r=this.songs.filter(n=>n.folderId===t);for(const n of r)n.folderId=null,await Pt.updateSong(n.id,n);this.sync()},ki(this)}}YW([gt.shallow],Jk.prototype,"songs",2);const kt=new Jk;kt.sync();var KW=qW;function qW(e,t){t=t||{};var r=e.numberOfChannels,n=e.sampleRate,i=t.float32?3:1,o=i===3?32:16,s;return r===2?s=JW(e.getChannelData(0),e.getChannelData(1)):s=e.getChannelData(0),ZW(s,i,n,r,o)}function ZW(e,t,r,n,i){var o=i/8,s=n*o,a=new ArrayBuffer(44+e.length*o),l=new DataView(a);return sv(l,0,"RIFF"),l.setUint32(4,36+e.length*o,!0),sv(l,8,"WAVE"),sv(l,12,"fmt "),l.setUint32(16,16,!0),l.setUint16(20,t,!0),l.setUint16(22,n,!0),l.setUint32(24,r,!0),l.setUint32(28,r*s,!0),l.setUint16(32,s,!0),l.setUint16(34,i,!0),sv(l,36,"data"),l.setUint32(40,e.length*o,!0),t===1?eY(l,44,e):QW(l,44,e),a}function JW(e,t){for(var r=e.length+t.length,n=new Float32Array(r),i=0,o=0;i<r;)n[i++]=e[o],n[i++]=t[o],o++;return n}function QW(e,t,r){for(var n=0;n<r.length;n++,t+=4)e.setFloat32(t,r[n],!0)}function eY(e,t,r){for(var n=0;n<r.length;n++,t+=2){var i=Math.max(-1,Math.min(1,r[n]));e.setInt16(t,i<0?i*32768:i*32767,!0)}}function sv(e,t,r){for(var n=0;n<r.length;n++)e.setUint8(t+n,r.charCodeAt(n))}class xo{constructor(t,r,n){this.serialize=()=>({type:"folder",id:this.id,name:this.name,filterType:this.filterType}),this.clone=()=>{const i=new xo(this.name,this.id);return i.songs=[...this.songs],i.filterType=this.filterType,i},this.set=i=>{Object.assign(this,i)},this.id=r||null,this.name=t||"Unnamed folder",this.songs=n!=null?n:[],this.filterType="date-created"}addSong(t){this.songs.push(t)}static deserialize(t){var n;const r=new xo(t==null?void 0:t.name,t.id);return r.filterType=(n=t==null?void 0:t.filterType)!=null?n:"date-created",r}static isSerializedType(t){return(t==null?void 0:t.type)==="folder"}}class tY{constructor(){this.foldersCollection=Jl.collections.folders}async getFolders(){const t=await this.foldersCollection.find({});return t.forEach(r=>{delete r._id}),t}async addFolder(t){const r=Jl.generateId();return t.id=r,await this.foldersCollection.insert(t),r}updateFolder(t,r){return this.foldersCollection.updateById(t,r)}removeFolder(t){return this.foldersCollection.removeById(t)}_deleteAllFolders(){return this.foldersCollection.remove({})}}const Ns=new tY;var rY=Object.defineProperty,nY=Object.getOwnPropertyDescriptor,iY=(e,t,r,n)=>{for(var i=n>1?void 0:n?nY(t,r):t,o=e.length-1,s;o>=0;o--)(s=e[o])&&(i=(n?s(t,r,i):s(i))||i);return n&&i&&rY(t,r,i),i};class Qk{constructor(){this.folders=[],this.sync=async()=>{const t=await Ns.getFolders();this.folders.splice(0,this.folders.length,...t.map(r=>xo.deserialize(r)))},this.createFolder=async t=>{t==="_None"&&(t="None");const r=new xo(t);await Ns.addFolder(r.serialize()),this.sync()},this.removeFolder=async t=>{await Ns.removeFolder(t.id),this.sync(),kt.clearSongsInFolder(t.id)},this.addFolder=async t=>{const r=await Ns.addFolder(t.serialize());return this.sync(),r},this.renameFolder=async(t,r)=>{t.name=r||"Unnamed",await Ns.updateFolder(t.id,t.serialize()),this.sync()},this.updateFolder=async t=>{await Ns.updateFolder(t.id,t.serialize()),this.sync()},this._DANGEROUS_CLEAR_ALL_FOLDERS=async()=>{await Ns._deleteAllFolders(),this.sync()},ki(this)}}iY([gt.shallow],Qk.prototype,"folders",2);const Yi=new Qk;Yi.sync();class oY{constructor(t,r){this.successful=t||[],this.errors=r||[]}hasErrors(){return this.errors.length>0}getKinds(t,r){return t.filter(n=>zo.getSerializedObjectType(n)===r)}getSuccessfulSongs(){return this.getKinds(this.successful,"song")}getSuccessfulFolders(){return this.getKinds(this.successful,"folder")}getSuccessfulThemes(){return this.getKinds(this.successful,"theme")}appendSuccessful(t){this.successful.push(t)}getSongErrors(){return this.errors.filter(t=>zo.getSerializedObjectType(t.file)==="song")}getFolderErrors(){return this.errors.filter(t=>zo.getSerializedObjectType(t.file)==="folder")}getThemeErrors(){return this.errors.filter(t=>zo.getSerializedObjectType(t.file)==="theme")}appendError(t,r){this.errors.push({file:t,error:r})}}class zo{async importAndLog(t){we.showPill("Importing files...");const r=await xr.importUnknownFile(t).catch(u=>{throw we.hidePill(),we.error("Error importing files"),console.error(u),u});we.hidePill(),r.hasErrors()&&we.error(`${r.errors.length} thing${r.errors.length===1?"":"s"} failed to import`);const n=r.getSuccessfulSongs(),i=r.getSongErrors();n.forEach(u=>we.success(`Imported ${u.type} song: "${u.name}"`)),i.forEach(u=>{var c,f;return we.error(`Error importing song: "${(f=(c=u.file)==null?void 0:c.name)!=null?f:""}" | ${u.error}`)});const o=r.getSuccessfulFolders(),s=r.getFolderErrors();o.forEach(u=>we.success(`Imported folder: "${u.name}"`)),s.forEach(u=>{var c,f;return we.error(`Error importing folder: "${(f=(c=u.file)==null?void 0:c.name)!=null?f:""}" | ${u.error}`)});const a=r.getSuccessfulThemes(),l=r.getThemeErrors();return a.forEach(u=>{var c,f;return we.success(`Imported theme: "${(f=(c=u==null?void 0:u.other)==null?void 0:c.name)!=null?f:""}"`)}),l.forEach(u=>{var c,f,p;return we.error(`Error importing theme: "${(p=(f=(c=u.file)==null?void 0:c.other)==null?void 0:f.name)!=null?p:""}" | ${u.error}`)}),r}async importUnknownFile(t){var u,c,f,p;const r=new oY,n=Array.isArray(t)?t:[t],i=this.splitIntoTypes(n),o=new Map;for(const v of i.folders)try{const g=v.id,b=await Yi.addFolder(xo.deserialize(v));o.set(g,b),r.appendSuccessful(v)}catch(g){console.error(g),r.appendError(v,ka.getMessageFromAny(g))}const s=i.songs.filter(v=>v.type==="vsrg"),a=i.songs.filter(v=>v.type!=="vsrg"),l=new Map;for(const v of a)try{const g=(u=v.id)!=null?u:null;v.id=null,v.folderId=(c=o.get(v.folderId))!=null?c:null;const b=Pt.parseSong(v),_=await kt.addSong(b);l.set(g,_),r.appendSuccessful(b)}catch(g){console.error(g),r.appendError(v,ka.getMessageFromAny(g))}for(const v of s)try{v.id=null,v.audioSongId=(f=l.get(v.audioSongId))!=null?f:null,v.folderId=(p=o.get(v.folderId))!=null?p:null;const g=Pt.parseSong(v);await kt.addSong(g),r.appendSuccessful(g)}catch(g){console.error(g),r.appendError(v,ka.getMessageFromAny(g))}for(const v of i.themes)try{v.id=null;const g=xe.sanitize(v);await Xa.addTheme(g),r.appendSuccessful(v)}catch(g){console.error(g),r.appendError(v,ka.getMessageFromAny(g))}for(const v of i.unknown)r.appendError(v,"Unknown file type");return r}splitIntoTypes(t){const r=t.filter(s=>zo.getSerializedObjectType(s)==="song"),n=t.filter(s=>zo.getSerializedObjectType(s)==="folder"),i=t.filter(s=>zo.getSerializedObjectType(s)==="theme"),o=t.filter(s=>zo.getSerializedObjectType(s)===null);return{songs:r,folders:n,themes:i,unknown:o}}static getSerializedObjectType(t){try{if(En.isSerializedType(t)||Yr.isSerializedType(t)||os.isSerializedType(t)||En.isOldFormatSerializedType(t)||Yr.isOldFormatSerializedType(t))return"song";if(xo.isSerializedType(t))return"folder";if(jk.isSerializedType(t))return"theme"}catch(r){console.log(r)}return null}async downloadSong(t,r){r=r.replace(".json","");const i=(Array.isArray(t)?t.map(ts.stripMetadata):[ts.stripMetadata(t)]).map(a=>this.prepareSongDownload(a)),s=(await Promise.all(i)).flat().filter((a,l,u)=>u.findIndex(c=>c.id===a.id)===l);this.downloadFiles(s,r)}async prepareSongDownload(t){const r=[t],n=r.filter(o=>o.type==="vsrg"),i=new Set(n.map(o=>o.audioSongId));for(const o of i){if(r.some(a=>a.id===o))continue;const s=await Pt.getSongById(o);s&&r.push(s)}return r}downloadFiles(t,r){r=r.replace(".json",""),Af.download(JSON.stringify(t),`${r}.json`)}downloadObject(t,r){Af.download(JSON.stringify(t),`${r}.json`)}async downloadBlobAsWav(t,r){r=r.replace(".wav","");const n=KW(await sY(t)),i=new Blob([new DataView(n)],{type:"audio/wav"});Af.download(i,r+".wav")}downloadBlob(t,r){Af.download(t,r)}downloadMidi(t,r){return r=(r||t.name).replace(".mid",""),Af.download(new Blob([t.toArray()],{type:"audio/midi"}),r+".mid")}downloadTheme(t,r){r=(r||`${t.other.name}.theme`).replace(".json",""),this.downloadFiles([t],r)}}function sY(e){return new Promise(t=>{const r=new AudioContext,n=new FileReader;function i(){r.decodeAudioData(n.result,o=>{t(o)})}n.addEventListener("loadend",i,{once:!0}),n.readAsArrayBuffer(e)})}const xr=new zo,aY=new DOMRect(0,0,0,0);function Lp({children:e,Icon:t,className:r="",style:n={},onClose:i,tooltip:o,offset:s=3,ignoreClickOutside:a}){const[l,u]=M.exports.useState(!1),[c,f]=M.exports.useState(aY),p=ra(()=>{a||(u(!1),i&&i())},{active:l,ignoreFocusable:!0});M.exports.useEffect(()=>{const b=p.current;if(!b)return;const _=b.getBoundingClientRect();f(_)},[l,p]);const v=c.top+c.height>window.innerHeight,g=`translateX(calc(-100% + ${s}rem)) ${v?"translateY(calc(-100% - 2rem))":""}`;return k("div",{className:`${r} floating-dropdown ${l?"floating-dropdown-active":""}`,children:[m(yg,{style:{margin:0,...n,...l?{backgroundColor:"var(--accent)",color:"var(--accent-text)"}:{}},onClick:()=>{u(!l),l&&i&&i()},ariaLabel:l?"Close":"Open",tooltip:o,children:l?m(Zi,{}):m(t,{})}),m("div",{ref:p,className:"floating-dropdown-children",style:{transform:g,"--existing-transform":g,transformOrigin:v?"bottom":"top"},children:e})]})}function Fr({text:e}){return m("div",{className:"floating-dropdown-text",children:e})}function hr({children:e,onClick:t,style:r}){return m(Be,{ariaLabel:"Floating Dropdown Button",className:"row row-centered",style:{padding:"0.4rem",minWidth:"unset",...r},onClick:t,children:e})}function sc({children:e,title:t}){return k("div",{className:"folder-content",children:[t&&m("h2",{className:"folder-title",children:t}),m("div",{className:"folder-songs-wrapper",children:e})]})}function av({children:e,backgroundColor:t,color:r,data:n,isDefault:i,defaultOpen:o=!1}){const[s,a]=M.exports.useState(!1),[l,u]=M.exports.useState(!1),[c,f]=M.exports.useState(n.name),p=M.exports.useRef(null),[v,g]=M.exports.useState(0);M.exports.useEffect(()=>{f(n.name)},[n.name]),M.exports.useEffect(()=>{if(!p.current)return;const x=p.current.getBoundingClientRect();g(x.height+100);const T=setTimeout(()=>{const I=p.current;if(!I)return;const R=I.getBoundingClientRect();g(R.height+100)},200);return()=>clearTimeout(T)},[n.songs,s,e]),M.exports.useEffect(()=>{a(o)},[o]);const b={backgroundColor:t,color:r};async function _(){!await Mr(`Are you sure you want to delete "${n.name}"?  
            The songs won't be deleted`)||Yi.removeFolder(n)}return k("div",{className:`folder ${s?"folder-expanded":""}`,style:b,children:[k("div",{className:"folder-header",children:[k("div",{onClick:()=>{l||a(!s)},className:"folder-header-button",children:[m(iM,{strokeWidth:2,style:{transform:`rotate(${s?90:0}deg)`,transition:"all 0.2s"},size:18}),l?m("input",{value:c,onChange:w=>f(w.target.value),className:"folder-name"}):m("div",{className:"folder-name text-ellipsis",children:n.name})]}),!i&&k(Lp,{offset:2.3,ignoreClickOutside:l,onClose:()=>u(!1),Icon:xh,children:[k(hr,{onClick:()=>{l&&(Yi.renameFolder(n,c),u(!1)),u(!l)},children:[m(gp,{style:{marginRight:"0.4rem"},size:14}),m(Fr,{text:l?"Save":"Rename"})]}),k(hr,{style:{padding:"0 0.4rem"},children:[m(qF,{style:{marginRight:"0.4rem"}}),m("select",{className:"dropdown-select",value:n.filterType,onChange:w=>{const x=w.target.value;n.set({filterType:x}),Yi.updateFolder(n)},children:mM.map(w=>m("option",{value:w,children:Sy(w.replaceAll("-"," "))},w))})]}),k(hr,{onClick:async()=>{const x=_i(n.songs).map(E=>xr.prepareSongDownload(E)),R=[...(await Promise.all(x)).flat().filter((E,O,P)=>P.findIndex(N=>N.id===E.id)==O),n.serialize()];xr.downloadFiles(R,`${n.name}-folder`)},children:[m(es,{style:{marginRight:"0.4rem"},size:14}),m(Fr,{text:"Download"})]}),k(hr,{onClick:_,children:[m(Ji,{color:"#ed4557",style:{marginRight:"0.4rem"},size:14}),m(Fr,{text:"Delete"})]})]})]}),m("div",{className:"column folder-overflow",style:{maxHeight:s?`${v}px`:0},children:m("div",{className:"column folder-overflow-expandible",ref:p,children:e})})]})}function Up(e){const[t,r]=M.exports.useState(Yi.folders),[n,i]=M.exports.useState([]);return M.exports.useEffect(()=>lY(s=>{r(s)}),[]),M.exports.useEffect(()=>{if(!e)return i(t);i(t.map(o=>{const s=o.clone(),a=e.filter(l=>l.folderId===o.id);return o.filterType==="date-created"?s.songs=a:o.filterType==="alphabetical"?s.songs=a.sort((l,u)=>l.name.localeCompare(u.name)):s.songs=a,s}))},[e,t]),[n]}function lY(e){const t=jn(Yi.folders,()=>{e([...Yi.folders])});return e([...Yi.folders]),t}function du({songs:e,SongComponent:t,componentProps:r,className:n,style:i,baseType:o,exclude:s}){const[a,l]=M.exports.useState(),[u,c]=M.exports.useState(),[f,p]=M.exports.useState(),[v,g]=M.exports.useState([]),[b]=Up(v);M.exports.useEffect(()=>{g(e.filter(x=>!(s!=null&&s.includes(x.type))))},[e,s]),M.exports.useEffect(()=>{function x(T){return b.some(I=>I.id===T.folderId)}l(new xo("Recorded",null,v.filter(T=>!x(T)&&T.type==="recorded"))),c(new xo("Composed",null,v.filter(T=>!x(T)&&T.type==="composed"))),p(new xo("Vsrg",null,v.filter(T=>!x(T)&&T.type==="vsrg")))},[v,b]);const[_]=fn(),w=_.layer("menu_background",.35).lighten(.2);return k("div",{className:n,style:i,children:[!(s!=null&&s.includes("composed"))&&u&&m(av,{backgroundColor:w.toString(),color:_.getText("menu_background").toString(),data:u,isDefault:!0,defaultOpen:o==="composed",children:k(sc,{children:[u.songs.map(x=>M.exports.createElement(t,{...r,data:x,key:x==null?void 0:x.id})),u.songs.length===0&&m("div",{style:{padding:"0.2rem",fontSize:"0.9rem"},children:"No songs here, compose one!"})]})}),!(s!=null&&s.includes("recorded"))&&a&&m(av,{backgroundColor:w.toString(),color:_.getText("menu_background").toString(),data:a,isDefault:!0,defaultOpen:o==="recorded",children:k(sc,{children:[a.songs.map(x=>M.exports.createElement(t,{...r,data:x,key:x==null?void 0:x.id})),a.songs.length===0&&m("div",{style:{padding:"0.2rem",fontSize:"0.9rem"},children:"No songs here, record one!"})]})}),!(s!=null&&s.includes("vsrg"))&&f&&m(av,{backgroundColor:w.toString(),color:_.getText("menu_background").toString(),data:f,isDefault:!0,defaultOpen:o==="recorded",children:k(sc,{children:[f.songs.map(x=>M.exports.createElement(t,{...r,data:x,key:x==null?void 0:x.id})),f.songs.length===0&&m("div",{style:{padding:"0.2rem",fontSize:"0.9rem"},children:"No songs here, create one!"})]})}),b.map(x=>{const T=x.songs.filter(E=>E.type==="composed"),I=x.songs.filter(E=>E.type==="recorded"),R=x.songs.filter(E=>E.type==="vsrg");return k(av,{backgroundColor:w.toString(),color:_.getText("menu_background").toString(),data:x,children:[!(s!=null&&s.includes("composed"))&&T.length>0&&m(sc,{title:"Composed",children:T.map(E=>M.exports.createElement(t,{...r,data:E,key:E==null?void 0:E.id}))}),!(s!=null&&s.includes("recorded"))&&I.length>0&&m(sc,{title:"Recorded",children:I.map(E=>M.exports.createElement(t,{...r,data:E,key:E==null?void 0:E.id}))}),!(s!=null&&s.includes("vsrg"))&&R.length>0&&m(sc,{title:"Vsrg",children:R.map(E=>M.exports.createElement(t,{...r,data:E,key:E==null?void 0:E.id}))}),T.length===0&&I.length===0&&R.length===0&&m("div",{style:{padding:"0.7rem",paddingTop:"0",fontSize:"0.9rem"},children:"The folder is empty"})]},x.id)})]})}function $y({children:e,onPick:t,style:r={},as:n,multiple:i=!1,onError:o}){const s=M.exports.useRef(null),a=M.exports.useCallback(async l=>{if(l.target.files===null)return;const u=Array.from(l.target.files).map(c=>new Promise((f,p)=>{const v=new FileReader;function g(){try{const b=v.result;f({data:n==="json"?JSON.parse(b):b,file:c})}catch(b){p(b)}}try{v.addEventListener("loadend",g,{once:!0}),(n==="text"||n==="json")&&v.readAsText(c),n==="buffer"&&v.readAsArrayBuffer(c)}catch(b){p(b)}}));try{const c=await Promise.all(u);t(c)}catch(c){console.error(c),o==null||o(c)}s.current!==null&&(s.current.value="")},[n,t,o]);return k(De,{children:[m("input",{type:"file",style:{display:"none"},ref:s,onChange:a,multiple:i}),m("div",{onClick:()=>{var l;return(l=s.current)==null?void 0:l.click()},style:r,children:e})]})}function _g({checked:e,onChange:t,styleOuter:r}){const[n]=fn();return m("button",{className:"switch-wrapper",onClick:()=>t(!e),style:r||{},"aria-label":e?"Switch to off":"Switch to on",children:m("div",{className:`switch-inner ${e?"switch-inner-on":""}`,style:{backgroundColor:(e?n.get("accent"):n.layer("primary",.4)).toString()}})})}function uY({data:e,volume:t,onVolumeChange:r,onVolumeComplete:n,onInstrumentPick:i,objectKey:o,instrument:s,theme:a}){const l=[],u=[];for(const v of e.options)v.startsWith("SFX")?u.push(v):l.push(v);function c(v){r(Number(v.target.value))}function f(){n({key:o,value:t})}function p(v){i({key:o,data:{...e,value:v.target.value}})}return k("div",{className:"instrument-picker",children:[m("select",{value:s,style:{textAlign:"left",paddingLeft:"0.4rem",backgroundImage:`url("data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' height='24' viewBox='0 0 24 24' width='24' fill='${a.getText("primary").hex().replace("#","%23")}'><path d='M0 0h24v24H0z' fill='none'/><path d='M16.59 8.59L12 13.17 7.41 8.59 6 10l6 6 6-6z'/></svg>")`},className:"select",onChange:p,children:u.length===0?m(De,{children:l.map(v=>m("option",{value:v,children:v.replace("-"," ")},v))}):k(De,{children:[m("optgroup",{label:"Instruments",children:l.map(v=>m("option",{value:v,children:v.replace("-"," ")},v))}),m("optgroup",{label:"SFX",children:u.map(v=>m("option",{value:v,children:v.replace("-"," ").replace("SFX_","")},v))})]})}),m("input",{type:"range",min:1,max:100,value:t,onChange:c,onPointerUp:f})]})}function cY({data:e,value:t,onChange:r,onComplete:n,objectKey:i}){function o(l){const u=l.target;if(e.type==="number"){const c=Number(u.value);if(u.value="",!e.threshold||c<e.threshold[0]||c>e.threshold[1])return;r(c)}else r(u.value)}function s(l){if(e.type==="number"){const u=Number(t)+(e.increment||0)*l;if(!e.threshold||u<e.threshold[0]||u>e.threshold[1])return;n({key:i,data:{...e,value:u}})}}function a(){e.value!==t&&n({key:i,data:{...e,value:t}})}return k("div",{className:"settings-input",children:[e.type==="number"&&m("button",{onClick:()=>s(-1),className:"settings-input-button",style:{marginRight:"0.15rem"},"aria-label":"Decrement",children:m(iy,{})}),m("input",{type:e.type,value:t,placeholder:e.placeholder||"",onBlur:a,onChange:o,"aria-label":e.name}),e.type==="number"&&m("button",{onClick:()=>s(1),className:"settings-input-button",style:{marginLeft:"0.15rem"},"aria-label":"Increment",children:m(au,{})})]})}function hY({data:e,value:t,onChange:r,objectKey:n}){function i(o){r({key:n,data:{...e,value:Number(o.target.value)}})}return m("input",{type:"range",min:e.threshold[0],max:e.threshold[1],value:t,onChange:i})}function fY({value:e,onChange:t,data:r,objectKey:n,children:i,theme:o,type:s}){function a(l){t({key:n,data:{...r,value:typeof s=="number"?parseInt(l.target.value):l.target.value}})}return m("select",{value:e,onChange:a,style:{backgroundImage:`url("data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' height='24' viewBox='0 0 24 24' width='24' fill='${o.getText("primary").hex().replace("#","%23")}'><path d='M0 0h24v24H0z' fill='none'/><path d='M16.59 8.59L12 13.17 7.41 8.59 6 10l6 6 6-6z'/></svg>")`},children:i})}function dY({data:e,update:t,objKey:r,changeVolume:n}){const[i,o]=M.exports.useState(e.value),[s,a]=M.exports.useState(e.type==="instrument"?e.volume:0),[l]=fn(),{type:u}=e;M.exports.useEffect(()=>{o(e.value)},[e.value]);function c(f){u==="checkbox"&&t({key:r,data:{...e,value:f}})}return k("div",{className:"settings-row",style:{backgroundColor:l.layer("menu_background",.15).toString()},children:[k("div",{className:Wn(e.tooltip),style:{flex:"1"},children:[e.name,e.tooltip&&m(Gn,{style:{width:"12rem"},children:e.tooltip})]}),u==="select"&&m(fY,{theme:l,type:e.options[0],onChange:t,value:e.value,objectKey:r,data:e,children:e.options.map(f=>m("option",{value:f,children:f},f))}),(u==="number"||u==="text")&&m(cY,{data:e,value:i,onChange:o,onComplete:t,objectKey:r}),u==="checkbox"&&m(_g,{checked:i,onChange:c}),u==="slider"&&m(hY,{objectKey:r,data:e,value:i,onChange:t}),u==="instrument"&&n&&m(uY,{theme:l,volume:s,onInstrumentPick:t,onVolumeChange:a,onVolumeComplete:n,instrument:e.value,data:e,objectKey:r})]})}const pY=M.exports.memo(dY,(e,t)=>e.data.value===t.data.value&&e.data.volume===t.data.volume&&e.update===t.update);function Fp({settings:e,changeVolume:t,onUpdate:r}){const n=new Map;return Object.entries(e).forEach(([i,o])=>{n.has(o.category)||n.set(o.category,{category:o.category,settings:{}}),n.get(o.category).settings[i]=o}),m(De,{children:Array.from(n.values()).map(i=>m(M.exports.Fragment,{children:k("div",{className:"column",children:[m("h1",{className:"settings-group-title",children:i.category}),Object.entries(i.settings).map(([o,s])=>m(pY,{objKey:o,data:s,changeVolume:t,update:r},o))]})},i.category))})}function Ou(){const[e,t]=M.exports.useState(kt.songs);return M.exports.useEffect(()=>mY(n=>{t(n)}),[]),[e]}function mY(e){const t=jn(kt.songs,()=>{e([...kt.songs])});return e([...kt.songs]),t}const vY=["vsrg"];function gY({functions:e,data:t}){const[r]=Ou(),[n,i]=M.exports.useState(!1),[o,s]=M.exports.useState("Songs"),[a,l]=M.exports.useState(""),[u,c]=M.exports.useState([]),[f,p]=M.exports.useState(""),[v,g]=M.exports.useState(!1),[b]=fn(),[_]=Up(),{handleSettingChange:w,addSong:x,removeSong:T,renameSong:I}=e,R=ra(ie=>{i(!1)},{active:n,ignoreFocusable:!0});M.exports.useEffect(()=>{async function ie(){if(navigator.storage&&navigator.storage.persist){let Q=await navigator.storage.persisted();Q||(Q=await navigator.storage.persist()),g(Q)}}ie()},[]);const E=M.exports.useCallback(({letter:ie,shift:Q,code:ee})=>{var W;(W=document.activeElement)==null||W.blur(),ie==="M"&&Q&&i(!n),ee==="Escape"&&i(!1)},[n]);M.exports.useEffect(()=>(Xe.listen(E),()=>Xe.unlisten(E)),[E]);function O(){l(""),p(""),c([])}const P=async()=>{if(f==="Searching...")return;if(a.trim().length===0)return p("Please write a non empty name");p("Searching...");const ie=await fetch("https://sky-music.herokuapp.com/api/songs?search="+encodeURI(a)).then(Q=>Q.json());if(ie.error)return p("Please write a non empty name"),we.error(ie.error);p("success"),c(ie),Sn.songSearch({name:a})},N=ie=>{typeof ie!="boolean"&&(ie=null),i(ie!==null?ie:!n)},A=ie=>{if(ie===o&&n)return i(!1);O(),ie&&s(ie),i(!0),Sn.UIEvent("menu",{tab:ie})},j=async ie=>{var Q,ee;for(const W of ie)try{const te=Array.isArray(W.data)?W.data:[W.data];await xr.importAndLog(te)}catch(te){if(console.error(te),(ee=(Q=W.file.name).includes)!=null&&ee.call(Q,".mid"))return we.error("Midi files should be imported in the composer");ae()}},X=async ie=>{if(ie instanceof Cp.Midi)return await Mr("If you use MIDI, the song will loose some information, if you want to share the song with others, use the other format (button above). Do you still want to download?")?xr.downloadMidi(ie):void 0;const Q=ie.name,ee=[ie.serialize()];xr.downloadSong(ee,`${Q}.${je.toLowerCase()}sheet`),we.success("Song downloaded"),Sn.userSongs("download",{name:Q,page:"player"})},B=M.exports.useCallback(async()=>{const ie=await xn("Write the folder name");!ie||Yi.createFolder(ie)},[]),ae=M.exports.useCallback(ie=>{ie&&console.error(ie),we.error("Error importing file, invalid format",8e3)},[]);async function Y(){try{const ie=r.map(te=>te),Q=new Date().toISOString().split("T")[0],W=[...await Ns.getFolders(),...ie];xr.downloadFiles(W,`${je}_Backup_${Q}`),we.success("Song backup downloaded")}catch(ie){console.error(ie),we.error("Error downloading songs")}}const K=n?"side-menu menu-open":"side-menu",me=b.layer("menu_background",.35).lighten(.2),ue=b.layer("menu_background",.32).desaturate(.4);return k("div",{className:"menu-wrapper",ref:R,children:[k("div",{className:"menu menu-visible menu-main-page",children:[n&&m(Ct,{onClick:N,className:"close-menu",ariaLabel:"Close menu",children:m(Zi,{className:"icon"})}),m(Ct,{onClick:()=>A("Help"),className:"margin-top-auto",isActive:o==="Help"&&n,ariaLabel:"Open info menu",children:m(aA,{className:"icon"})}),m(Ct,{onClick:()=>A("Library"),isActive:o==="Library"&&n,ariaLabel:"Open library menu",children:m(BW,{className:"icon"})}),m(Ct,{onClick:()=>A("Songs"),isActive:o==="Songs"&&n,ariaLabel:"Open songs menu",children:m(vp,{className:"icon"})}),m(Ct,{onClick:()=>A("Settings"),isActive:o==="Settings"&&n,ariaLabel:"Open settings",children:m(Tu,{className:"icon"})}),m(Ct,{onClick:an.open,ariaLabel:"Open home menu",children:m(Su,{className:"icon"})})]}),k("div",{className:K,children:[m(ni,{title:"No selection",current:o,id:"No selection"}),k(ni,{current:o,id:"Songs",children:[k("div",{className:"songs-buttons-wrapper",children:[m(ku,{children:k("ul",{children:[m("li",{children:"Click the song name to play it"}),m("li",{children:"You can import songs made by other users (does not accept audio files). Or you can download yours to share"}),m("li",{children:"To create your song, you can record the notes you play or create one in the composer"}),k("li",{children:[m(iA,{style:{marginRight:"0.2rem"}}),": Start the practice mode"]}),k("li",{children:[m(vA,{style:{marginRight:"0.2rem"}}),": Start the approaching notes mode"]}),Lb&&m("li",{children:"You can connect a MIDI keyboard to play"})]})}),m(hi,{to:"Composer",style:{marginLeft:"auto"},children:m(Be,{children:"Compose song"})}),m($y,{onPick:j,onError:ae,as:"json",multiple:!0,children:m(Be,{children:"Import song"})})]}),m(du,{songs:r,exclude:vY,style:{marginTop:"0.6rem"},SongComponent:yY,componentProps:{theme:b,folders:_,functions:{removeSong:T,toggleMenu:N,downloadSong:X,renameSong:I}}}),m("div",{className:"row",style:{justifyContent:"flex-end"},children:m(Be,{onClick:B,children:"Create folder"})}),m("div",{style:{marginTop:"auto",paddingTop:"0.5rem",width:"100%",display:"flex",justifyContent:"flex-end"},children:m(Be,{style:{marginLeft:"auto"},onClick:Y,children:"Download all songs (backup)"})})]}),k(ni,{current:o,id:"Settings",children:[m(Fp,{settings:t.settings,changeVolume:e.changeVolume,onUpdate:w}),k("div",{className:"settings-row-wrap",children:[Lb&&m(hi,{to:"MidiSetup",children:m(Be,{style:{width:"fit-content"},children:"Connect MIDI keyboard"})}),m(hi,{to:"Theme",children:m(Be,{style:{width:"fit-content"},children:"Change app theme"})})]}),k("div",{style:{marginTop:"0.4rem",marginBottom:"0.6rem"},className:Wn(!0),children:[v?"Storage is persisted":"Storage is not persisted",v?m(Gn,{position:"top",style:{maxWidth:"unset"},children:"Your data is persisted in the browser, the browser should not automatically clear it. Always make sure to download a backup sometimes, especially when you will not use the app for a long time"}):m(Gn,{position:"top",children:"The browser didn't allow to store data persistently, it might happen that you will loose data when cache is automatically cleared. To get persistent storage, add the app to the home screen. If that still doesn't work, make sure you do a backup often"})]}),m(cw,{})]}),k(ni,{title:"Library",current:o,id:"Library",children:[m("div",{children:"Here you can find songs to learn, they are provided by the sky-music library."}),k("div",{className:"library-search-row",children:[m("input",{className:"library-search-input",style:{backgroundColor:me.toString()},placeholder:"Song name",onKeyDown:ie=>{ie.code==="Enter"&&P()},onInput:ie=>l(ie.target.value),value:a}),m("button",{className:"library-search-btn",onClick:O,style:{backgroundColor:me.toString()},children:m(Zi,{})}),m("button",{className:"library-search-btn",onClick:P,style:{backgroundColor:me.toString()},children:m(eM,{})})]}),(f||u.length>0)&&m("div",{className:"library-search-songs-wrapper",style:{backgroundColor:ue.toString()},children:f==="success"?u.length>0?u.map(ie=>m(VW,{theme:b,data:ie,importSong:x,onClick:bt.play},ie.file)):m("div",{className:"library-search-result-text",children:"No results"}):m("div",{className:"library-search-result-text",children:f})})]}),k(ni,{title:"Help",current:o,id:"Help",children:[k("div",{className:"help-icon-wrapper",children:[m("a",{href:"https://discord.gg/Arsf65YYHq",children:m(JP,{className:"help-icon"})}),m("a",{href:"https://github.com/Specy/genshin-music",children:m(QP,{className:"help-icon"})})]}),m(Zk,{}),m(cw,{})]})]})]})}function yY({data:e,functions:t,theme:r,folders:n}){const{removeSong:i,toggleMenu:o,downloadSong:s,renameSong:a}=t,l={backgroundColor:r.layer("primary",.15).hex()},[u,c]=M.exports.useState(!1),[f,p]=M.exports.useState(e.name);return M.exports.useEffect(()=>{p(e.name)},[e.name]),e.type==="vsrg"?m("div",{className:"row",children:"Invalid song"}):k("div",{className:"song-row",children:[k("div",{className:`song-name ${Wn(!0)}`,onClick:()=>{u||(bt.play(Pt.parseSong(e),0),o(!1))},children:[u?m("input",{className:`song-name-input ${u?"song-rename":""}`,disabled:!u,onChange:v=>p(v.target.value),style:{width:"100%",color:"var(--primary-text)"},value:f}):m("div",{style:{marginLeft:"0.3rem"},children:f}),m(Gn,{children:u?"Song name":"Play song"})]}),k("div",{className:"song-buttons-wrapper",children:[m(yg,{onClick:()=>{const v=Pt.parseSong(e);bt.practice(v,0,v.notes.length),o(!1)},ariaLabel:`Practice song ${e.name}`,tooltip:"Practice",style:l,children:m(iA,{})}),m(yg,{onClick:()=>{const v=Pt.parseSong(e);bt.approaching(v,0,v.notes.length),o(!1)},tooltip:"Approach mode",ariaLabel:`Play in Approach mode the song ${e.name}`,style:l,children:m(vA,{})}),k(Lp,{Icon:xh,style:l,ignoreClickOutside:u,tooltip:"More options",onClose:()=>c(!1),children:[k(hr,{onClick:()=>{u&&(a(f,e.id),c(!1)),c(!u)},children:[m(gp,{style:{marginRight:"0.4rem"},size:14}),m(Fr,{text:u?"Save":"Rename"})]}),k(hr,{style:{padding:"0 0.4rem"},children:[m(ny,{style:{marginRight:"0.4rem"}}),k("select",{className:"dropdown-select",value:e.folderId||"_None",onChange:v=>{const g=v.target.value;kt.addSongToFolder(e,g!=="_None"?g:null)},children:[m("option",{value:"_None",children:"None"}),n.map(v=>m("option",{value:v.id,children:v.name},v.id))]})]}),m(hi,{to:{pathname:"/Composer",state:{songId:e.id}},style:{width:"100%"},children:k(hr,{style:{width:"100%"},onClick:()=>{(e==null?void 0:e.type)==="recorded"&&we.warn("Converting recorded song to composed, audio might not be accurate")},children:[m(oA,{style:{marginRight:"0.4rem"},size:14}),m(Fr,{text:"Edit song"})]})}),k(hr,{onClick:()=>{const v=Pt.parseSong(e);s(v)},children:[m(es,{style:{marginRight:"0.4rem"},size:14}),m(Fr,{text:"Download"})]}),k(hr,{onClick:()=>{const v=Pt.parseSong(e);s(v.toMidi())},children:[m(es,{style:{marginRight:"0.4rem"},size:14}),m(Fr,{text:"Download MIDI"})]}),k(hr,{onClick:()=>i(e.name,e.id),children:[m(Ji,{color:"#ed4557",style:{marginRight:"0.4rem"},size:14}),m(Fr,{text:"Delete"})]})]})]})]})}const _Y=()=>{let e=2,t=[];function r(i){let o=i.length,s=new Uint8Array(o*e);for(let a=0;a<o;a++){let l=a*e,u=i[a];u>1?u=1:u<-1&&(u=-1),u=u*32768,s[l]=u,s[l+1]=u>>8}t.push(s)}function n(i){let o=t.length?t[0].length:0,s=t.length*o,a=new Uint8Array(44+s),l=new DataView(a.buffer);l.setUint32(0,1380533830,!1),l.setUint32(4,36+s,!0),l.setUint32(8,1463899717,!1),l.setUint32(12,1718449184,!1),l.setUint32(16,16,!0),l.setUint16(20,1,!0),l.setUint16(22,1,!0),l.setUint32(24,i,!0),l.setUint32(28,i*e,!0),l.setUint16(32,e,!0),l.setUint16(34,8*e,!0),l.setUint32(36,1684108385,!1),l.setUint32(40,s,!0);for(let u=0;u<t.length;u++)a.set(t[u],u*o+44);t=[],postMessage(a.buffer,[a.buffer])}onmessage=i=>{i.data[0]==="encode"?r(i.data[1]):i.data[0]==="dump"&&n(i.data[1])}};let eO=window.AudioContext||window.webkitAudioContext,bY=e=>{let t=e.toString().replace(/^(\(\)\s*=>|function\s*\(\))\s*{/,"").replace(/}$/,""),r=new Blob([t]);return new Worker(URL.createObjectURL(r))},Rf=e=>{let t=new Event("error");return t.data=new Error("Wrong state for "+e),t},Al;class ol{constructor(t,r=null){this.stream=t,this.config=r,this.state="inactive",this.em=document.createDocumentFragment(),this.encoder=bY(ol.encoder);let n=this;this.encoder.addEventListener("message",i=>{let o=new Event("dataavailable");o.data=new Blob([i.data],{type:n.mimeType}),n.em.dispatchEvent(o),n.state==="inactive"&&n.em.dispatchEvent(new Event("stop"))})}start(t){if(this.state!=="inactive")return this.em.dispatchEvent(Rf("start"));this.state="recording",Al||(Al=new eO(this.config)),this.clone=this.stream.clone(),this.input=Al.createMediaStreamSource(this.clone),this.processor=Al.createScriptProcessor(2048,1,1),this.encoder.postMessage(["init",Al.sampleRate]),this.processor.onaudioprocess=r=>{this.state==="recording"&&this.encoder.postMessage(["encode",r.inputBuffer.getChannelData(0)])},this.input.connect(this.processor),this.processor.connect(Al.destination),this.em.dispatchEvent(new Event("start")),t&&(this.slicing=setInterval(()=>{this.state==="recording"&&this.requestData()},t))}stop(){return this.state==="inactive"?this.em.dispatchEvent(Rf("stop")):(this.requestData(),this.state="inactive",this.clone.getTracks().forEach(t=>{t.stop()}),this.processor.disconnect(),this.input.disconnect(),clearInterval(this.slicing))}pause(){return this.state!=="recording"?this.em.dispatchEvent(Rf("pause")):(this.state="paused",this.em.dispatchEvent(new Event("pause")))}resume(){return this.state!=="paused"?this.em.dispatchEvent(Rf("resume")):(this.state="recording",this.em.dispatchEvent(new Event("resume")))}requestData(){return this.state==="inactive"?this.em.dispatchEvent(Rf("requestData")):this.encoder.postMessage(["dump",Al.sampleRate])}addEventListener(...t){this.em.addEventListener(...t)}removeEventListener(...t){this.em.removeEventListener(...t)}dispatchEvent(...t){this.em.dispatchEvent(...t)}}ol.prototype.mimeType="audio/wav";ol.isTypeSupported=e=>ol.prototype.mimeType===e;ol.notSupported=!navigator.mediaDevices||!eO;ol.encoder=_Y;class I4{constructor(){this.node=sn.createMediaStreamDestination(),window.MediaRecorder?this.recorder=new MediaRecorder(this.node.stream):(console.log("Audio recorder Polyfill"),this.recorder=new ol(this.node.stream))}start(){this.recorder.start()}delete(){var t;(t=this.node)==null||t.disconnect(),this.node=null}stop(){return new Promise(t=>{this.recorder.addEventListener("dataavailable",function(r){t({data:r.data,toUrl:()=>URL.createObjectURL(r.data)})},{once:!0}),this.recorder.stop()})}static async downloadBlob(t,r){xr.downloadBlobAsWav(t,r)}async download(t,r){xr.downloadBlobAsWav(t,r)}}class wY{constructor(t){this.reverbNode=null,this.reverbVolumeNode=null,this.nodes=[],this.hasReverb=!1,this.isRecording=!1,this.reverbLoading=null,this.loadReverb=()=>(this.reverbLoading=new Promise(r=>{fetch("./assets/audio/reverb4.wav").then(n=>n.arrayBuffer()).then(n=>{this.audioContext&&this.audioContext.decodeAudioData(n,i=>{const o=this.audioContext.createConvolver(),s=this.audioContext.createGain();s.gain.value=2.5,o.buffer=i,o.connect(s),s.connect(this.audioContext.destination),this.reverbNode=o,this.reverbVolumeNode=s,this.reverbLoading=null,r()})}).catch(n=>{console.error(n),this.reverbLoading=null,r()})}),this.reverbLoading),this.waitReverb=async()=>{this.reverbLoading&&await this.reverbLoading},this.init=async()=>(await this.loadReverb(),this.setAudioDestinations(),this),this.connect=r=>r?(this.nodes.push(r),this.setAudioDestinations(),this):this,this.destroy=()=>{this.nodes.forEach(r=>r.disconnect()),this.nodes=[],this.recorder=null,this.reverbNode=null,this.reverbVolumeNode=null},this.clear=()=>(this.nodes.forEach(r=>r.disconnect()),this.nodes=[],this.setReverb(!1),this),this.disconnect=r=>r?(this.nodes=this.nodes.filter(n=>n!==r),r.disconnect(),this):this,this.setReverb=r=>(this.hasReverb=r,this.setAudioDestinations(),this),this.startRecording=()=>{const{hasReverb:r,recorder:n,nodes:i,reverbVolumeNode:o}=this;if(!!n)return r?o&&n.node&&o.connect(n.node):i.forEach(s=>{n.node&&s.connect(n.node)}),this.isRecording=!0,n.start(),this},this.stopRecording=async()=>{const{recorder:r,reverbVolumeNode:n,audioContext:i}=this;if(!r)return;const o=await r.stop();return n&&i&&(n.disconnect(),n.connect(this.audioContext.destination)),this.isRecording=!1,this.setAudioDestinations(),o},this.setAudioDestinations=async()=>(this.nodes.forEach(r=>{this.hasReverb?(r.disconnect(),this.reverbNode?r.connect(this.reverbNode):(console.log("Couldn't connect to reverb"),this.audioContext&&r.connect(this.audioContext.destination))):(r.disconnect(),this.audioContext&&r.connect(this.audioContext.destination))}),this),this.audioContext=t,this.recorder=new I4}}const _t=new wY(sn);function In({text:e}){return M.exports.useEffect(()=>{document.title=e},[e]),null}const St=M.exports.memo(({children:e})=>m(De,{children:e}),(e,t)=>{var r,n,i,o;return((r=t.children)==null?void 0:r.key)!==null||((n=e.children)==null?void 0:n.key)!==null?((i=e.children)==null?void 0:i.key)===((o=t.children)==null?void 0:o.key):e.children!==void 0});function tO(e){return Me({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M256 81c-7.7 0-15.5.33-23 .95V119h46V81.95c-7.5-.62-15.3-.95-23-.95zm-41 3.07c-4.8.76-9.5 1.65-13.9 2.69-14.7 3.46-26.3 8.71-32.8 14.04l-22.4 140.3L215 341V137h-23v-18h23V84.07zm82 0V119h23v18h-23v238.4c30.6 2.8 54.5 19.5 73.7 40.5 11 12.2 20.6 25.8 29.6 39.4l-56.6-354.5c-6.5-5.33-18.1-10.58-32.8-14.04-4.4-1.04-9.1-1.93-13.9-2.69zM39.34 90.79L24.66 101.2l20.89 29.6 15.14-9.9-21.35-30.11zm54.81 29.71l-56.04 36.7L82.56 183l17.54-11.5-5.95-51zM233 137v46h46v-46h-46zm-124.8 50.8l-15.3 10 48.9 69.2-30.1 188.3c9-13.6 18.6-27.2 29.6-39.4 19.2-21 43.1-37.7 73.7-40.5v-2.8l-73.2-105.7 4.1-26-37.7-53.1zM233 201v46h46v-46h-46zm0 64v46h46v-46h-46zm0 64v38l5.5 8H279v-46h-46zm206 23v23h-33.2l2.9 18H439v23h18v-64h-18zm-215 41c-29 0-50.3 14.1-69.3 35.1-15.5 17-28.9 38.4-42.1 58.9h286.8c-13.2-20.5-26.6-41.9-42.1-58.9-19-21-40.3-35.1-69.3-35.1h-37l12.4 17.9-14.8 10.2-19.5-28.1H224z"}}]})(e)}function xY(){const e=is(Dt.state),[t,r]=M.exports.useState(null),[n,i]=M.exports.useState(_M),o=M.exports.useRef(null),s=M.exports.useRef(null),a=M.exports.useRef(null);M.exports.useEffect(()=>{if(t===null)return;function v(){t!==null&&r(null)}return window.addEventListener("pointerup",v),window.addEventListener("blur",v),()=>{window.removeEventListener("pointerup",v),window.removeEventListener("blur",v)}},[t]);const l=v=>{if(a.current&&o.current&&s.current){const g=a.current.getBoundingClientRect(),b=v.clientY,_=o.current.getBoundingClientRect().y,w=s.current.getBoundingClientRect().y,x=Math.abs(_-b),T=Math.abs(w-b);i(g);const I=x>=T?"end":"start";r(x>=T?"end":"start"),c(v,I)}};function u(){r(null)}const c=(v,g)=>{if(t===null&&!g)return;const b=g||t,_=n.height,w=n.y,x=v.clientY-w,T=ii(Math.round((1-x/_)*e.size),0,e.size);b==="start"?T-e.end<-1&&Dt.setPosition(T):T-e.position>1&&Dt.setState({end:T})},f=e.size!==0?e.position/e.size*100:0,p=e.size!==0?e.end/e.size*100:100;return m(De,{children:k("div",{className:"slider-outer",ref:a,onPointerUp:u,onPointerMove:c,onPointerDown:l,children:[m("div",{className:"slider-full",children:m("div",{className:"slider-current",style:{transform:`translateY(${(100-e.current/e.size*100).toFixed(1)}%)`}})}),k("div",{className:"two-way-slider",children:[k("div",{className:"two-way-slider-thumb",style:{bottom:`calc(${p}% - 18px)`},ref:s,children:[m("div",{style:{fontSize:"0.8rem"},children:e.end}),m(St,{children:m(LE,{width:16,style:{filter:"drop-shadow(rgba(0, 0, 0, 0.4) 0px 2px 2px)"}})})]}),k("div",{className:"two-way-slider-thumb",style:{bottom:`calc(${f}% - 14px)`},ref:o,children:[m("div",{style:{fontSize:"0.8rem"},children:e.position}),m(St,{children:m(LE,{width:16,style:{filter:"drop-shadow(rgba(0, 0, 0, 0.4) 0px 2px 2px)"}})})]})]})]})})}const TY=M.exports.memo(xY,()=>!0),SY=new Mn;function EY({chunk:e,rows:t,hasText:r,selected:n,theme:i}){const[s,a]=M.exports.useState("var(--primary)");M.exports.useEffect(()=>{a(i.layer("primary",.2).hex())},[i]);const l=new Array(7*t).fill(!1);return e.notes.forEach(u=>{l[u.index]=!0}),m("div",{className:`frame-outer ${e.notes.length===0?"displayer-ball":""}`,style:n?{borderColor:"var(--accent)"}:{},children:e.notes.length===0?m("div",{}):m("div",{className:"displayer-frame",style:{gridTemplateColumns:`repeat(${7},1fr)`},children:l.map((u,c)=>m("div",{className:u?"frame-note-s":"frame-note-ns",style:u?{}:{backgroundColor:s},children:u&&r?SY.getNoteText(c,"Keyboard layout","C"):null},c))})})}const rO=M.exports.memo(EY,(e,t)=>e.chunk===t.chunk&&e.rows===t.rows&&e.hasText===t.hasText&&e.selected===t.selected&&e.theme===t.theme);function CY(){var r;const e=is(Dt.pagesState),[t]=fn();return m(De,{children:e.pages.length>0&&m("div",{className:"player-chunks-page",children:(r=e.currentPage)==null?void 0:r.map((n,i)=>m(rO,{theme:t,selected:i===e.currentChunkIndex,chunk:n,rows:3,hasText:!1},i))})})}const IY=M.exports.memo(CY,()=>!0);function NY({onRestart:e,onRawSpeedChange:t,speedChanger:r,hasSong:n,isMetronomePlaying:i,onToggleMetronome:o,isRecordingAudio:s,onToggleRecordAudio:a,isVisualSheetVisible:l}){const u=is(bt.state);return k(De,{children:[u.eventType==="approaching"&&m(RY,{}),k("div",{className:"column player-right-controls",children:[m("div",{children:u.eventType!=="approaching"&&m(Be,{toggled:s,onClick:()=>a(!s),children:s?"Finish recording":"Record audio"})}),k("div",{className:"slider-wrapper column",style:n?{}:{display:"none"},children:[k("div",{className:"row",style:{width:"100%"},children:[k("div",{className:`${Wn(!0)} row`,style:{marginRight:"0.4rem",flex:1},children:[k("select",{className:"slider-select",onChange:t,value:r.name,style:{backgroundImage:"none"},children:[m("option",{disabled:!0,children:"Speed"}),Ub.map(c=>m("option",{value:c.name,children:c.name},c.name))]}),m(Gn,{position:"left",children:"Change speed"})]}),m(Ql,{onClick:()=>{bt.resetSong(),Dt.clearPages(),Dt.resetScore()},style:{flex:1},tooltip:"Stop",ariaLabel:"Stop song",children:m(St,{children:m(dA,{})})})]}),m(TY,{}),m(Ql,{onClick:e,tooltip:"Restart",ariaLabel:"Restart song",children:m(St,{children:m(pA,{})})})]}),m(Ql,{toggled:i,onClick:o,className:"metronome-button",ariaLabel:"Toggle metronome",children:m(tO,{size:22})})]}),l&&m(IY,{})]})}const PY=M.exports.memo(NY,(e,t)=>e.speedChanger===t.speedChanger&&e.hasSong===t.hasSong&&e.isMetronomePlaying===t.isMetronomePlaying&&e.isRecordingAudio===t.isRecordingAudio&&e.isVisualSheetVisible===t.isVisualSheetVisible);function AY(){const{combo:e,score:t,correct:r,wrong:n}=is(Dt.score);return m("div",{className:"approaching-accuracy",children:m("table",{children:k("tbody",{children:[k("tr",{children:[m("td",{className:"sc-2",children:"Accuracy"}),k("td",{className:"sc-1",children:[(r/(r+n-1)*100).toFixed(1),"%"]})]}),k("tr",{children:[m("td",{className:"sc-2",children:"Score"}),m("td",{className:"sc-1",children:t})]}),k("tr",{children:[m("td",{className:"sc-2",children:"Combo"}),m("td",{className:"sc-1",children:e})]})]})})})}const RY=M.exports.memo(AY,()=>!0);class kY extends M.exports.Component{constructor(t){super(t),this.cleanup=[],this.init=async()=>{const{settings:n}=this.state;await _t.waitReverb(),await this.loadInstrument(n.instrument.value),this.registerKeyboardListeners(),_t.setReverb(n.caveMode.value)},this.registerKeyboardListeners=()=>{Xe.registerLetter("C",()=>this.toggleRecord(),{shift:!0,id:"player"})},this.setHasSong=n=>{this.setState({hasSong:n})},this.changeVolume=n=>{const{settings:i,instruments:o}=this.state;n.key==="instrument"&&(i.instrument={...i.instrument,volume:n.value},o.forEach(s=>s.changeVolume(n.value))),this.setState({settings:i},this.updateSettings)},this.loadInstrument=async n=>{const i=this.state.instruments[0];_t.disconnect(i.endNode),this.state.instruments[0].dispose();const{settings:o,instruments:s}=this.state,a=new Mn(n);a.changeVolume(o.instrument.volume||100),this.setState({isLoadingInstrument:!0}),await a.load()||we.error("There was an error loading the instrument"),_t.connect(a.endNode),this.mounted&&(bt.setKeyboardLayout(a.notes),s.splice(0,1,a),this.setState({instruments:s,isLoadingInstrument:!1},()=>_t.setReverb(o.caveMode.value)))},this.handleSpeedChanger=n=>{const i=Ub.find(o=>o.name===n.target.value);!i||this.setState({speedChanger:i},()=>this.restartSong())},this.restartSong=async n=>{!this.mounted||bt.restartSong(typeof n=="number"?n:Dt.position,Dt.end)},this.loadInstruments=async n=>{const{instruments:i}=this.state;i.splice(n.length).forEach(u=>{_t.disconnect(u.endNode),u.dispose()}),we.showPill("Loading instruments...");const s=n.map(async(u,c)=>{if(i[c]===void 0){const f=new Mn(u.name);return i[c]=f,await f.load()||we.error("There was an error loading the instrument"),this.mounted?(_t.connect(f.endNode),f.changeVolume(u.volume),f):f.dispose()}if(i[c].name===u.name)return i[c].changeVolume(u.volume),i[c];{const f=i[c];_t.disconnect(f.endNode),f.dispose();const p=new Mn(u.name);return i[c]=p,await p.load()||we.error("There was an error loading the instrument"),this.mounted?(_t.connect(p.endNode),p.changeVolume(u.volume),p):p.dispose()}}),a=await Promise.all(s);if(!this.mounted)return;const{settings:l}=this.state;i[0]&&(l.instrument={...l.instrument,value:i[0].name},bt.setKeyboardLayout(i[0].notes)),we.hidePill(),this.setState({instruments:a,settings:l},this.updateSettings)},this.playSound=(n,i)=>{const{state:o}=this,{settings:s,instruments:a}=o;o.isRecording&&this.handleRecording(n),i?a.forEach((l,u)=>{i.test(u)&&l.play(n,s.pitch.value)}):a[0].play(n,s.pitch.value)},this.updateSettings=n=>{eo.updatePlayerSettings(n!==void 0?n:this.state.settings)},this.handleSettingChange=n=>{const{settings:i}=this.state,{data:o}=n;i[n.key]={...i[n.key],value:o.value},n.key==="instrument"&&this.loadInstrument(o.value),n.key==="caveMode"&&_t.setReverb(o.value),n.key==="bpm"&&(kn.bpm=o.value),n.key==="metronomeBeats"&&(kn.beats=o.value),n.key==="metronomeVolume"&&kn.changeVolume(o.value),this.setState({settings:i},this.updateSettings)},this.addSong=async n=>{var i;try{const o=await kt.addSong(n);n.id=o;const s=(i=n.type)!=null?i:n.data.isComposedVersion?"composed":"recorded";we.success(`Song added to the ${s} tab!`,4e3)}catch(o){return console.error(o),we.error("There was an error importing the song")}},this.removeSong=async(n,i)=>{const o=await Mr(`Are you sure you want to delete the song: "${n}" ?`);!this.mounted||o&&(await kt.removeSong(i),Sn.userSongs("delete",{page:"player"}))},this.renameSong=async(n,i)=>{await kt.renameSong(i,n)},this.handleRecording=n=>{this.state.isRecording&&this.recording.addNote(n)},this.toggleMetronome=()=>{const{isMetronomePlaying:n,settings:i}=this.state;this.setState({isMetronomePlaying:!n}),n?kn.stop():(kn.bpm=i.bpm.value,kn.beats=i.metronomeBeats.value,kn.changeVolume(i.metronomeVolume.value),kn.start())},this.toggleRecord=async n=>{typeof n!="boolean"&&(n=null);const i=n!==null?n:!this.state.isRecording;if(!i&&this.recording.notes.length>0){const{instruments:o,settings:s}=this.state,a=await xn("Write song name, press cancel to ignore");if(!this.mounted)return;if(a!==null){const l=new En(a,this.recording.notes,[o[0].name]);l.bpm=s.bpm.value,l.pitch=s.pitch.value,this.addSong(l),Sn.userSongs("record",{name:a,page:"player"})}}else this.recording=new t5;this.setState({isRecording:i})},this.toggleRecordAudio=async n=>{if(!this.mounted)return;typeof n!="boolean"&&(n=null);const i=n!==null?n:!this.state.isRecordingAudio;if(this.setState({isRecordingAudio:i}),i)_t.startRecording();else{const o=await _t.stopRecording(),s=await xn("Write the song name, press cancel to ignore");if(!this.mounted||!o)return;s&&I4.downloadBlob(o.data,s+".wav")}},this.recording=new t5;const r=eo.getPlayerSettings();this.state={instruments:[new Mn],settings:r,isLoadingInstrument:!0,isRecording:!1,isRecordingAudio:!1,isMetronomePlaying:!1,hasSong:!1,speedChanger:Ub.find(n=>n.name==="x1")},this.mounted=!1}async componentDidMount(){this.mounted=!0;const t=this.state.instruments[0];t&&bt.setKeyboardLayout(t.notes),await this.init();const r=$d(bt.state,({eventType:n,song:i})=>{const{settings:o}=this.state;!o.syncSongData.value||i===null||(["play","practice","approaching"].includes(n)&&this.handleSettingChange({data:{...o.pitch,value:i.pitch},key:"pitch"}),this.loadInstruments(i.instruments))});this.cleanup.push(r)}componentWillUnmount(){Xe.unregisterById("player"),bt.resetSong(),bt.resetKeyboardLayout(),Dt.clearPages(),Dt.resetScore(),_t.clear(),we.hidePill(),this.state.instruments.forEach(t=>t.dispose()),this.cleanup.forEach(t=>t()),this.mounted=!1,kn.stop()}render(){const{state:t,renameSong:r,playSound:n,setHasSong:i,removeSong:o,handleSettingChange:s,changeVolume:a,addSong:l,toggleMetronome:u}=this,{settings:c,isLoadingInstrument:f,instruments:p,hasSong:v,isRecordingAudio:g,isRecording:b,isMetronomePlaying:_,speedChanger:w}=t;return k(De,{children:[m(In,{text:"Player"}),m(gY,{functions:{addSong:l,removeSong:o,handleSettingChange:s,changeVolume:a,renameSong:r},data:{settings:c}}),k("div",{className:"right-panel",children:[m("div",{className:"upper-right",children:!v&&m(Be,{toggled:b,onClick:()=>this.toggleRecord(),style:{marginTop:"0.8rem"},children:b?"Stop":"Record"})}),m("div",{className:"keyboard-wrapper",children:m(MW,{data:{isLoading:f,instrument:p[0],pitch:c.pitch.value,keyboardSize:c.keyboardSize.value,noteNameType:c.noteNameType.value,hasSong:v,hasAnimation:c.noteAnimation.value,approachRate:c.approachSpeed.value,keyboardYPosition:c.keyboardYPosition.value,speedChanger:w},functions:{playSound:n,setHasSong:i}})})]}),m(PY,{isRecordingAudio:g,isVisualSheetVisible:c.showVisualSheet.value,onToggleRecordAudio:this.toggleRecordAudio,onRestart:this.restartSong,isMetronomePlaying:_,onToggleMetronome:u,onRawSpeedChange:this.handleSpeedChanger,hasSong:v,speedChanger:w})]})}}const fw=bh(kY);function OY({className:e}){return m("svg",{width:"194.40327mm",height:"290.853mm",viewBox:"0 0 194.40327 290.85299",xmlns:"http://www.w3.org/2000/svg",className:e,style:{fill:"currentcolor"},children:k("g",{children:[m("rect",{width:"50.962246",height:"290.853",x:"143.44104",y:"2.4868996e-14",rx:"15.05095",ry:"17.061689"}),m("path",{d:"m 42.968955,90.42652 c -2.198688,0 -3.96875,1.770063 -3.96875,3.96875 v 35.03145 H 3.9687499 C 1.7700625,129.42672 0,131.19678 0,133.39547 v 24.0621 c 0,2.19869 1.7700625,3.96875 3.9687499,3.96875 H 39.000205 v 35.03145 c 0,2.19869 1.770062,3.96875 3.96875,3.96875 h 24.062613 c 2.198687,0 3.968749,-1.77006 3.968749,-3.96875 v -35.03145 h 35.030933 c 2.19869,0 3.96875,-1.77006 3.96875,-3.96875 v -24.0621 c 0,-2.19869 -1.77006,-3.96875 -3.96875,-3.96875 H 71.000317 V 94.39527 c 0,-2.198687 -1.770062,-3.96875 -3.968749,-3.96875 z"}),m("rect",{width:"7.8557625",height:"1.5711526",x:"57.085205",y:"139.30885",rx:"3.96875"})]})})}function LY({className:e}){return m("svg",{width:"194.40327mm",height:"290.853mm",viewBox:"0 0 194.40327 290.85299",xmlns:"http://www.w3.org/2000/svg",className:e,style:{fill:"currentcolor"},children:k("g",{children:[m("rect",{width:"50.962246",height:"290.853",x:"143.44104",y:"2.4868996e-14",rx:"15.05095",ry:"17.061689"}),m("rect",{width:"110.35661",height:"35.805271",x:"0",y:"127.52386",rx:"3.96875"})]})})}function nO(e,t){const[r,n]=M.exports.useState(e);return M.exports.useEffect(()=>{const i=setTimeout(()=>{n(e)},t);return()=>clearTimeout(i)},[e,t]),r}function dw({onChange:e,value:t,children:r,style:n}){const[i]=fn();return m("select",{onChange:e,value:t,className:"select",style:{backgroundImage:`url("data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' height='24' viewBox='0 0 24 24' width='24' fill='${i.getText("primary").hex().replace("#","%23")}'><path d='M0 0h24v24H0z' fill='none'/><path d='M16.59 8.59L12 13.17 7.41 8.59 6 10l6 6 6-6z'/></svg>")`,...n},children:r})}function N4({selected:e,onChange:t,style:r,children:n,className:i}){return k("select",{className:`select ${i!=null?i:""}`,style:{width:"100%",padding:"0.3rem",...r},onChange:o=>t(o.target.value),value:e,children:[n,no.map(o=>m("option",{children:o},o))]})}class UY extends M.exports.Component{constructor(t){super(t),this.handleFile=r=>{var n,i;try{if(r.length===0)return;const o=r[0],s=new Cp.Midi(o.data),a=(n=s.header.tempos[0])==null?void 0:n.bpm,l=(i=s.header.keySignatures[0])==null?void 0:i.key,u=s.tracks.map((c,f)=>({...c,selected:!0,layer:0,name:c.name||`Track n.${f+1}`,numberOfAccidentals:0,outOfRangeBounds:{lower:0,upper:0},localOffset:null}));this.setState({tracks:u,fileName:o.file.name,bpm:Math.floor(a*4)||220,offset:0,pitch:no.includes(l)?l:"C"},()=>{this.state.tracks.length&&this.convertMidi()})}catch(o){console.error(o),we.error("There was an error importing this file, is it a .mid file?")}},this.convertMidi=()=>{const{tracks:r,bpm:n,offset:i,includeAccidentals:o,pitch:s}=this.state,a=r.filter(T=>T.selected),l=[];let u=0,c=0,f=0;a.forEach(T=>{T.numberOfAccidentals=0,T.outOfRangeBounds.upper=0,T.outOfRangeBounds.lower=0,T.notes.forEach(I=>{var E;f++;const R=e4.fromMidi(T.layer,Math.floor(I.time*1e3),I.midi-((E=T.localOffset)!=null?E:i));R.data.isAccidental&&(u++,T.numberOfAccidentals++),R.data.note!==-1?(o||!R.data.isAccidental)&&l.push(R):(c++,R.data.outOfRangeBound===-1&&T.outOfRangeBounds.lower++,R.data.outOfRangeBound===1&&T.outOfRangeBounds.upper++)})});const p=l.sort((T,I)=>T.time-I.time),v=Math.floor(6e4/n),g=[];for(;p.length>0;){const T=[p.shift()];let I=0;for(let R=0;R<p.length;R++)T[0].time>p[R].time-v/9&&I++;g.push([...T,...p.splice(0,I)])}const b=[];let _=0;g.forEach(T=>{const I=T[0];if(!I)return;const R=I.time-_,E=Math.floor((R-v)/v),O=new Si;_=I.time,E>-1&&new Array(E).fill(0).forEach(()=>b.push(new Si)),O.notes=T.map(P=>{const N=new Xi;return N.set(P.layer,!0),new $s(P.data.note,N)}),b.push(O)}),b.forEach(T=>{const I=bR(T);T.notes=I.map(R=>(R[0].layer=_R(R),R[0]))});const w=new Yr("Untitled");w.columns=b,w.bpm=n,w.instruments=[],w.instruments=this.props.data.instruments.map(T=>T.clone()),w.pitch=s;const x=this.props.data.selectedColumn;if(w.selected=x<w.columns.length?x:0,w.columns.length===0)return we.warn("There are no notes");this.props.functions.loadSong(w),this.setState({accidentals:u,totalNotes:f,outOfRange:c})},this.editTrack=(r,n)=>{const i=this.state.tracks;Object.assign(i[r],n),this.setState({tracks:i},()=>{this.state.tracks.length>0&&this.convertMidi()})},this.changeOffset=r=>{Number.isInteger(r)||(r=0),this.state.offset!==r&&this.setState({offset:r},()=>{this.state.tracks.length>0&&this.convertMidi()})},this.changePitch=r=>{this.props.functions.changePitch(r),this.setState({pitch:r})},this.toggleAccidentals=()=>{this.setState({includeAccidentals:!this.state.includeAccidentals},()=>{this.state.tracks.length>0&&this.convertMidi()})},this.changeBpm=r=>{Number.isInteger(r)||(r=0),this.state.bpm!==r&&this.setState({bpm:r},()=>{this.state.tracks.length>0&&this.convertMidi()})},this.state={fileName:"",bpm:220,tracks:[],offset:0,pitch:"C",ignoreEmptytracks:!1,accidentals:0,outOfRange:0,totalNotes:0,includeAccidentals:!0,theme:xe},this.dispose=()=>{}}componentDidMount(){this.dispose=jn(xe.state.data,()=>{this.setState({theme:{...xe}})})}componentWillUnmount(){this.dispose()}render(){const{handleFile:t,editTrack:r,state:n,changeBpm:i,changeOffset:o,changePitch:s}=this,{tracks:a,fileName:l,bpm:u,offset:c,pitch:f,accidentals:p,outOfRange:v,totalNotes:g,includeAccidentals:b,theme:_,ignoreEmptytracks:w}=n,{functions:x,data:T}=this.props,{changeMidiVisibility:I}=x,R={backgroundColor:_.layer("primary",.2).toString(),color:_.getText("primary").toString()};return m(By,{boxProps:{className:"floating-midi"},size:"1.2rem",isRelative:!1,offset:"0.1rem",children:k("div",{className:"column floating-midi-content",children:[k("div",{className:"midi-row separator-border",style:{width:"100%"},children:[m($y,{onPick:t,as:"buffer",children:m("button",{className:"midi-btn",style:R,children:"Open midi file"})}),m("div",{style:{margin:"0 0.5rem",maxWidth:"20rem"},className:"text-ellipsis",children:l}),m("button",{className:"midi-btn",style:{marginLeft:"auto",...R},onClick:()=>I(!1),children:"Close"})]}),k("div",{className:"midi-table-row",children:[m("div",{style:{marginRight:"0.5rem"},children:"Bpm:"}),m(iC,{value:u,onChange:i,delay:600,style:R,step:5})]}),k("div",{className:"midi-table-row",children:[k("div",{className:"row flex-centered",children:[m("span",{style:{marginRight:"0.5rem"},children:"Global note offset: "}),m(ku,{buttonStyle:{width:"1.2rem",height:"1.2rem"},children:"The index of each note will be pushed up/down by this amount, you can use it to make the song fit into the app range. You can also change the offset of each layer."})]}),m(iC,{value:c,onChange:o,delay:600,style:R,step:1})]}),k("div",{className:"midi-table-row",children:[m("div",{style:{marginRight:"0.5rem"},children:"Pitch:"}),m(N4,{style:{width:"5rem",...R},selected:f,onChange:s})]}),k("div",{className:"midi-table-row",children:[k("div",{className:"row",children:[m("div",{style:{marginRight:"0.5rem"},children:"Include accidentals:"}),m(_g,{checked:b,onChange:this.toggleAccidentals,styleOuter:R})]}),k("div",{className:"row",children:[m("div",{style:{marginRight:"0.5rem"},children:"Ignore empty tracks:"}),m(_g,{checked:w,onChange:E=>this.setState({ignoreEmptytracks:E}),styleOuter:R})]})]}),a.length>0&&m("div",{className:"midi-column separator-border",style:{width:"100%"},children:k("div",{className:"midi-column",style:{width:"100%"},children:[m("div",{children:"Select midi tracks"}),a.map((E,O)=>w&&E.notes.length===0?null:m(FY,{data:E,instruments:T.instruments,index:O,onChange:r,theme:_},O))]})}),a.length>0&&m("table",{children:k("tbody",{children:[k("tr",{children:[m("td",{children:"Total notes: "}),m("td",{}),m("td",{children:g})]}),k("tr",{children:[m("td",{children:"Accidentals: "}),m("td",{}),m("td",{children:p})]}),k("tr",{children:[m("td",{children:"Out of range: "}),m("td",{}),m("td",{children:v})]})]})})]})})}}function FY({data:e,index:t,onChange:r,theme:n,instruments:i}){var f;const[o,s]=M.exports.useState(!1),a={backgroundColor:n.layer("menu_background",.15).toString()},[l,u]=M.exports.useState(`${(f=e.localOffset)!=null?f:""}`),c=nO(l,600);return M.exports.useEffect(()=>{const p=parseInt(c),v=Number.isFinite(p)?p:null;u(`${v!=null?v:""}`),r(t,{localOffset:v})},[c,r,t]),M.exports.useEffect(()=>{var p;u(`${(p=e.localOffset)!=null?p:""}`)},[e.localOffset]),k("div",{className:"midi-track-column",style:a,children:[k("div",{className:"midi-track-wrapper",children:[k("div",{className:"midi-track-center",children:[m("input",{type:"checkbox",onChange:()=>r(t,{selected:!e.selected}),checked:e.selected}),`${e.name} `,"(",e.notes.length,",",` ${e.instrument.family}`,")"]}),k("div",{className:"midi-track-center",children:[m(dw,{onChange:p=>r(t,{layer:Number(p.target.value)}),value:e.layer,className:"midi-select",style:{marginLeft:"0.2rem"},children:i.map((p,v)=>k("option",{value:v,children:[p.alias||p.name," - ",`Layer ${v+1}`]},v))}),m(xh,{size:22,color:"var(--primary)",onClick:()=>s(!o),cursor:"pointer"})]})]}),k("div",{className:"midi-track-data",style:{display:o?"flex":"none"},children:[k("div",{className:"midi-track-data-row",children:[m("div",{children:"Track offset:"}),m("input",{type:"text",value:l,placeholder:"No offset",className:"midi-input",style:{width:"6rem"},onChange:p=>u(p.target.value)})]}),k("div",{className:"midi-track-data-row",children:[m("div",{children:"Instrument:"}),m("div",{children:e.instrument.name})]}),k("div",{className:"midi-track-data-row",children:[m("div",{children:"Number of notes:"}),m("div",{children:e.notes.length})]}),k("div",{className:"midi-track-data-row",children:[m("div",{children:"Accidentals:"}),m("div",{children:e.numberOfAccidentals})]}),k("div",{className:"midi-track-data-row",children:[k("div",{children:["Out of range: (",e.outOfRangeBounds.upper+e.outOfRangeBounds.lower,")"]}),k("div",{className:"row",style:{width:"fit-content"},children:[k("div",{className:"row",style:{marginRight:"0.4rem"},children:[m(rA,{style:{marginRight:"0.2rem"}}),e.outOfRangeBounds.upper]}),k("div",{className:"row",children:[m(eA,{style:{marginRight:"0.2rem"}}),e.outOfRangeBounds.lower]})]})]})]})]})}function iC({onChange:e,value:t,delay:r=500,step:n=1,style:i}){const[o,s]=M.exports.useState(t),a=nO(o,r);return M.exports.useEffect(()=>{e(a)},[a,e]),M.exports.useEffect(()=>{s(t)},[t]),k("div",{style:{display:"flex",justifyContent:"flex-end"},children:[m("button",{onClick:()=>s(o-n),className:"midi-btn-small",style:i,children:"-"}),m("input",{type:"text",value:o,onChange:l=>s(Number(l.target.value)),className:"midi-input",style:{margin:"0 0.3rem",...i}}),m("button",{onClick:()=>s(o+n),className:"midi-btn-small",style:i,children:"+"})]})}function MY(e){return Me({tag:"svg",attr:{viewBox:"0 0 24 24",strokeWidth:"2",stroke:"currentColor",fill:"none",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"desc",attr:{},child:[]},{tag:"path",attr:{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}},{tag:"line",attr:{x1:"14",y1:"12",x2:"4",y2:"12"}},{tag:"line",attr:{x1:"14",y1:"12",x2:"10",y2:"16"}},{tag:"line",attr:{x1:"14",y1:"12",x2:"10",y2:"8"}},{tag:"line",attr:{x1:"20",y1:"4",x2:"20",y2:"20"}}]})(e)}function BY({data:e,functions:t}){const[r]=fn(),[n,i]=M.exports.useState("all"),{toggleTools:o,copyColumns:s,eraseColumns:a,pasteColumns:l,deleteColumns:u,resetSelection:c,undo:f,moveNotesBy:p}=t,{isToolsVisible:v,hasCopiedColumns:g,layer:b,selectedColumns:_,undoHistory:w}=e,x=n==="all"?"all":b;return k("div",{className:`floating-tools ${v?"floating-tools tools-visible":""}`,style:{backgroundColor:r.get("menu_background").fade(.1).toString()},children:[k("div",{className:"tools-buttons-grid",children:[k(Rl,{area:"a",disabled:g,onClick:()=>s(x),active:g,tooltip:"Copy all notes",style:{flexDirection:"column",justifyContent:"center"},tooltipPosition:"bottom",children:[m(VF,{className:"tools-icon",size:24}),"Copy"]}),k(Rl,{disabled:!g,onClick:()=>l(!1,x),tooltip:"Paste copied notes",area:"b",tooltipPosition:"bottom",children:[m(JF,{className:"tools-icon"}),"Paste ",n==="all"?"":`in layer ${b+1}`]}),k(Rl,{disabled:!g,onClick:()=>l(!0,x),tooltip:"Insert copied notes",area:"c",children:[m(MY,{className:"tools-icon",style:{strokeWidth:"3px"}}),"Insert ",n==="all"?"":`in layer ${b+1}`]}),k(Rl,{disabled:g,onClick:()=>a(x),tooltip:"Erase all selected notes",area:"d",children:[m(XF,{className:"tools-icon"}),"Erase"]}),k(Rl,{disabled:g||x!=="all",onClick:u,tooltip:"Delete selected columns",area:"f",children:[m(Ji,{className:"tools-icon",color:"var(--red)"}),"Delete"]}),k(Rl,{disabled:g,tooltip:"Push notes up by 1 position",area:"e",onClick:()=>p(1,x),children:[m(BF,{className:"tools-icon"}),"Move notes up"]}),k(Rl,{disabled:g,tooltip:"Push notes down by 1 position",onClick:()=>p(-1,x),area:"g",children:[m(MF,{className:"tools-icon"}),"Move notes down"]})]}),k("div",{className:"tools-right column",children:[k(Be,{style:{marginBottom:"0.2rem"},className:Wn(!0),toggled:n==="all",onClick:()=>i("all"),children:[m($W,{style:{marginRight:"0.2rem"},size:16}),"All layers",m(Gn,{style:{left:0},children:"Select all the layers in the highlighted columns"})]}),k(Be,{style:{marginBottom:"0.2rem"},className:Wn(!0),toggled:n==="layer",onClick:()=>i("layer"),children:[m(HW,{style:{marginRight:"0.2rem"},size:16}),"Only Layer",m("span",{style:{minWidth:"0.6rem",marginLeft:"0.2rem"},children:b+1}),m(Gn,{style:{left:0},children:"Select all the notes in the highlighted columns of the current layer"})]}),m(Be,{style:{marginBottom:"0.2rem",justifyContent:"center"},onClick:c,disabled:_.length<=1&&!g,toggled:g,children:"Clear selection"}),k("div",{className:"row",style:{flex:"1",alignItems:"flex-end"},children:[m(Be,{style:{flex:"1",justifyContent:"center"},disabled:w.length===0,onClick:f,children:"Undo"}),m(Be,{onClick:o,style:{marginLeft:"0.2rem",flex:"1",justifyContent:"center"},children:"Ok"})]})]})]})}const DY=M.exports.memo(BY,(e,t)=>e.data.isToolsVisible===t.data.isToolsVisible&&e.data.hasCopiedColumns===t.data.hasCopiedColumns&&e.data.layer===t.data.layer&&e.data.selectedColumns===t.data.selectedColumns&&e.data.undoHistory===t.data.undoHistory);function Rl({disabled:e,onClick:t,active:r,style:n,children:i,tooltip:o,area:s,tooltipPosition:a}){return k("button",{disabled:e,onClick:t,className:`flex-centered tools-button ${r?"tools-button-highlighted":""} ${Wn(o)}`,style:{gridArea:s,...n},children:[i,o&&m(Gn,{position:a||"top",children:o})]})}function oC(){const e=xe.get("note_background");return e.luminosity()>.65?ut.text.note:e.isDark()?ut.text.light:ut.text.dark}const GY=M.exports.memo(function({data:t,layer:r,instrument:n,clickAction:i,noteText:o,noteImage:s}){var f;const[a,l]=M.exports.useState(oC());M.exports.useEffect(()=>jn(xe.state.data,()=>{l(oC())}),[]);let u=Ko.noteComposer;(r&1)!==0&&(u+=" layer-1"),(r&2)!==0&&(u+=" layer-2"),(r&4)!==0&&(u+=" layer-3"),(r&8)!==0&&(u+=" layer-4");const c=xe.get("note_background").desaturate(.6);return m("button",{onPointerDown:()=>i(t),className:"button-hitbox",children:k("div",{className:u,children:[m(Dy,{fill:c.isDark()?c.lighten(.45).hex():c.darken(.18).hex(),className:"genshin-border"}),m(Gy,{name:s,color:xe.isDefault("accent")?(f=el[n])==null?void 0:f.fill:void 0,background:"var(--note-background)"}),m("div",{className:"layer-3-ball-bigger"}),m("div",{className:"layer-4-line"}),m("div",{className:"note-name",style:{color:a},children:o})]})})},(e,t)=>e.noteText===t.noteText&&e.clickAction===t.clickAction&&e.noteImage===t.noteImage&&e.noteText===t.noteText&&e.layer===t.layer&&e.instrument===t.instrument);function jY({data:e,functions:t}){const{keyboard:r,isPlaying:n,noteNameType:i,currentColumn:o,pitch:s,currentLayer:a,isRecordingAudio:l}=e,{handleClick:u,handleTempoChanger:c}=t;if(r===void 0)return m("div",{className:"composer-keyboard-wrapper",style:{marginBottom:"4rem"},children:m("h1",{children:"There was an error with this layer"})});if(l)return m("div",{className:"composer-keyboard-wrapper",style:{marginBottom:"4rem"},children:m("h1",{children:"Recording Audio..."})});let f="keyboard";return r.notes.length===15&&(f+=" keyboard-5"),r.notes.length===14&&(f+=" keyboard-5"),r.notes.length===8&&(f+=" keyboard-4"),r.notes.length===6&&(f+=" keyboard-3"),k(De,{children:[m("div",{className:"composer-keyboard-wrapper",children:k("div",{className:f,children:[r.notes.length===0?m("div",{className:"loading",children:"Loading..."}):null,r.notes.map((p,v)=>{try{const g=o.notes.findIndex(b=>b.index===v);return m(GY,{layer:g>=0?o.notes[g].layer.toLayerStatus(a,e.instruments):0,data:p,noteText:r.getNoteText(v,i,s),instrument:r.name,noteImage:p.noteImage,clickAction:u},p.index)}catch{return"Err"}})]})}),k("div",{className:`tempo-changers-wrapper ${n?"tempo-changers-wrapper-hidden":""}`,children:[m("div",{className:"bottom-right-text",children:"Tempo"}),tl.map(p=>m("button",{onClick:()=>c(p),style:{...p.changer===1?{backgroundColor:xe.get("primary").toString(),color:xe.getText("primary").toString()}:{backgroundColor:"#"+p.color.toString(16)},outline:e.currentColumn.tempoChanger===p.id?`3px ${xe.get("composer_accent").toString()} solid`:"",margin:"",outlineOffset:"-3px"},children:p.text},p.id))]})]})}var Je={exports:{}};function $Y(e){var t=this.constructor;return this.then(function(r){return t.resolve(e()).then(function(){return r})},function(r){return t.resolve(e()).then(function(){return t.reject(r)})})}function HY(e){var t=this;return new t(function(r,n){if(!(e&&typeof e.length<"u"))return n(new TypeError(typeof e+" "+e+" is not iterable(cannot read property Symbol(Symbol.iterator))"));var i=Array.prototype.slice.call(e);if(i.length===0)return r([]);var o=i.length;function s(l,u){if(u&&(typeof u=="object"||typeof u=="function")){var c=u.then;if(typeof c=="function"){c.call(u,function(f){s(l,f)},function(f){i[l]={status:"rejected",reason:f},--o===0&&r(i)});return}}i[l]={status:"fulfilled",value:u},--o===0&&r(i)}for(var a=0;a<i.length;a++)s(a,i[a])})}var zY=setTimeout;function iO(e){return Boolean(e&&typeof e.length<"u")}function VY(){}function XY(e,t){return function(){e.apply(t,arguments)}}function Tr(e){if(!(this instanceof Tr))throw new TypeError("Promises must be constructed via new");if(typeof e!="function")throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],sO(e,this)}function oO(e,t){for(;e._state===3;)e=e._value;if(e._state===0){e._deferreds.push(t);return}e._handled=!0,Tr._immediateFn(function(){var r=e._state===1?t.onFulfilled:t.onRejected;if(r===null){(e._state===1?pw:Xd)(t.promise,e._value);return}var n;try{n=r(e._value)}catch(i){Xd(t.promise,i);return}pw(t.promise,n)})}function pw(e,t){try{if(t===e)throw new TypeError("A promise cannot be resolved with itself.");if(t&&(typeof t=="object"||typeof t=="function")){var r=t.then;if(t instanceof Tr){e._state=3,e._value=t,mw(e);return}else if(typeof r=="function"){sO(XY(r,t),e);return}}e._state=1,e._value=t,mw(e)}catch(n){Xd(e,n)}}function Xd(e,t){e._state=2,e._value=t,mw(e)}function mw(e){e._state===2&&e._deferreds.length===0&&Tr._immediateFn(function(){e._handled||Tr._unhandledRejectionFn(e._value)});for(var t=0,r=e._deferreds.length;t<r;t++)oO(e,e._deferreds[t]);e._deferreds=null}function WY(e,t,r){this.onFulfilled=typeof e=="function"?e:null,this.onRejected=typeof t=="function"?t:null,this.promise=r}function sO(e,t){var r=!1;try{e(function(n){r||(r=!0,pw(t,n))},function(n){r||(r=!0,Xd(t,n))})}catch(n){if(r)return;r=!0,Xd(t,n)}}Tr.prototype.catch=function(e){return this.then(null,e)};Tr.prototype.then=function(e,t){var r=new this.constructor(VY);return oO(this,new WY(e,t,r)),r};Tr.prototype.finally=$Y;Tr.all=function(e){return new Tr(function(t,r){if(!iO(e))return r(new TypeError("Promise.all accepts an array"));var n=Array.prototype.slice.call(e);if(n.length===0)return t([]);var i=n.length;function o(a,l){try{if(l&&(typeof l=="object"||typeof l=="function")){var u=l.then;if(typeof u=="function"){u.call(l,function(c){o(a,c)},r);return}}n[a]=l,--i===0&&t(n)}catch(c){r(c)}}for(var s=0;s<n.length;s++)o(s,n[s])})};Tr.allSettled=HY;Tr.resolve=function(e){return e&&typeof e=="object"&&e.constructor===Tr?e:new Tr(function(t){t(e)})};Tr.reject=function(e){return new Tr(function(t,r){r(e)})};Tr.race=function(e){return new Tr(function(t,r){if(!iO(e))return r(new TypeError("Promise.race accepts an array"));for(var n=0,i=e.length;n<i;n++)Tr.resolve(e[n]).then(t,r)})};Tr._immediateFn=typeof setImmediate=="function"&&function(e){setImmediate(e)}||function(e){zY(e,0)};Tr._unhandledRejectionFn=function(t){typeof console<"u"&&console&&console.warn("Possible Unhandled Promise Rejection:",t)};typeof globalThis>"u"&&(typeof self<"u"?self.globalThis=self:typeof Ni<"u"&&(Ni.globalThis=Ni));globalThis.Promise||(globalThis.Promise=Tr);Object.assign||(Object.assign=Ax);var YY=16;Date.now&&Date.prototype.getTime||(Date.now=function(){return new Date().getTime()});if(!(globalThis.performance&&globalThis.performance.now)){var KY=Date.now();globalThis.performance||(globalThis.performance={}),globalThis.performance.now=function(){return Date.now()-KY}}var X2=Date.now(),sC=["ms","moz","webkit","o"];for(var W2=0;W2<sC.length&&!globalThis.requestAnimationFrame;++W2){var Y2=sC[W2];globalThis.requestAnimationFrame=globalThis[Y2+"RequestAnimationFrame"],globalThis.cancelAnimationFrame=globalThis[Y2+"CancelAnimationFrame"]||globalThis[Y2+"CancelRequestAnimationFrame"]}globalThis.requestAnimationFrame||(globalThis.requestAnimationFrame=function(e){if(typeof e!="function")throw new TypeError(e+"is not a function");var t=Date.now(),r=YY+X2-t;return r<0&&(r=0),X2=t,globalThis.self.setTimeout(function(){X2=Date.now(),e(performance.now())},r)});globalThis.cancelAnimationFrame||(globalThis.cancelAnimationFrame=function(e){return clearTimeout(e)});Math.sign||(Math.sign=function(t){return t=Number(t),t===0||isNaN(t)?t:t>0?1:-1});Number.isInteger||(Number.isInteger=function(t){return typeof t=="number"&&isFinite(t)&&Math.floor(t)===t});globalThis.ArrayBuffer||(globalThis.ArrayBuffer=Array);globalThis.Float32Array||(globalThis.Float32Array=Array);globalThis.Uint32Array||(globalThis.Uint32Array=Array);globalThis.Uint16Array||(globalThis.Uint16Array=Array);globalThis.Uint8Array||(globalThis.Uint8Array=Array);globalThis.Int32Array||(globalThis.Int32Array=Array);var K2=/iPhone/i,aC=/iPod/i,lC=/iPad/i,uC=/\biOS-universal(?:.+)Mac\b/i,q2=/\bAndroid(?:.+)Mobile\b/i,cC=/Android/i,ac=/(?:SD4930UR|\bSilk(?:.+)Mobile\b)/i,lv=/Silk/i,xs=/Windows Phone/i,hC=/\bWindows(?:.+)ARM\b/i,fC=/BlackBerry/i,dC=/BB10/i,pC=/Opera Mini/i,mC=/\b(CriOS|Chrome)(?:.+)Mobile/i,vC=/Mobile(?:.+)Firefox\b/i,gC=function(e){return typeof e<"u"&&e.platform==="MacIntel"&&typeof e.maxTouchPoints=="number"&&e.maxTouchPoints>1&&typeof MSStream>"u"};function qY(e){return function(t){return t.test(e)}}function ZY(e){var t={userAgent:"",platform:"",maxTouchPoints:0};!e&&typeof navigator<"u"?t={userAgent:navigator.userAgent,platform:navigator.platform,maxTouchPoints:navigator.maxTouchPoints||0}:typeof e=="string"?t.userAgent=e:e&&e.userAgent&&(t={userAgent:e.userAgent,platform:e.platform,maxTouchPoints:e.maxTouchPoints||0});var r=t.userAgent,n=r.split("[FBAN");typeof n[1]<"u"&&(r=n[0]),n=r.split("Twitter"),typeof n[1]<"u"&&(r=n[0]);var i=qY(r),o={apple:{phone:i(K2)&&!i(xs),ipod:i(aC),tablet:!i(K2)&&(i(lC)||gC(t))&&!i(xs),universal:i(uC),device:(i(K2)||i(aC)||i(lC)||i(uC)||gC(t))&&!i(xs)},amazon:{phone:i(ac),tablet:!i(ac)&&i(lv),device:i(ac)||i(lv)},android:{phone:!i(xs)&&i(ac)||!i(xs)&&i(q2),tablet:!i(xs)&&!i(ac)&&!i(q2)&&(i(lv)||i(cC)),device:!i(xs)&&(i(ac)||i(lv)||i(q2)||i(cC))||i(/\bokhttp\b/i)},windows:{phone:i(xs),tablet:i(hC),device:i(xs)||i(hC)},other:{blackberry:i(fC),blackberry10:i(dC),opera:i(pC),firefox:i(vC),chrome:i(mC),device:i(fC)||i(dC)||i(pC)||i(vC)||i(mC)},any:!1,phone:!1,tablet:!1};return o.any=o.apple.device||o.android.device||o.windows.device||o.other.device,o.phone=o.apple.phone||o.android.phone||o.windows.phone,o.tablet=o.apple.tablet||o.android.tablet||o.windows.tablet,o}/*!
 * @pixi/settings - v6.4.2
 * Compiled Thu, 02 Jun 2022 15:39:26 UTC
 *
 * @pixi/settings is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var Vo=ZY(globalThis.navigator);function JY(e){var t=!0;if(Vo.tablet||Vo.phone){if(Vo.apple.device){var r=navigator.userAgent.match(/OS (\d+)_(\d+)?/);if(r){var n=parseInt(r[1],10);n<11&&(t=!1)}}if(Vo.android.device){var r=navigator.userAgent.match(/Android\s([0-9.]*)/);if(r){var n=parseInt(r[1],10);n<7&&(t=!1)}}}return t?e:4}function QY(){return!Vo.apple.device}/*!
 * @pixi/constants - v6.4.2
 * Compiled Thu, 02 Jun 2022 15:39:26 UTC
 *
 * @pixi/constants is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var yC;(function(e){e[e.WEBGL_LEGACY=0]="WEBGL_LEGACY",e[e.WEBGL=1]="WEBGL",e[e.WEBGL2=2]="WEBGL2"})(yC||(yC={}));var _C;(function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.WEBGL=1]="WEBGL",e[e.CANVAS=2]="CANVAS"})(_C||(_C={}));var bC;(function(e){e[e.COLOR=16384]="COLOR",e[e.DEPTH=256]="DEPTH",e[e.STENCIL=1024]="STENCIL"})(bC||(bC={}));var wC;(function(e){e[e.NORMAL=0]="NORMAL",e[e.ADD=1]="ADD",e[e.MULTIPLY=2]="MULTIPLY",e[e.SCREEN=3]="SCREEN",e[e.OVERLAY=4]="OVERLAY",e[e.DARKEN=5]="DARKEN",e[e.LIGHTEN=6]="LIGHTEN",e[e.COLOR_DODGE=7]="COLOR_DODGE",e[e.COLOR_BURN=8]="COLOR_BURN",e[e.HARD_LIGHT=9]="HARD_LIGHT",e[e.SOFT_LIGHT=10]="SOFT_LIGHT",e[e.DIFFERENCE=11]="DIFFERENCE",e[e.EXCLUSION=12]="EXCLUSION",e[e.HUE=13]="HUE",e[e.SATURATION=14]="SATURATION",e[e.COLOR=15]="COLOR",e[e.LUMINOSITY=16]="LUMINOSITY",e[e.NORMAL_NPM=17]="NORMAL_NPM",e[e.ADD_NPM=18]="ADD_NPM",e[e.SCREEN_NPM=19]="SCREEN_NPM",e[e.NONE=20]="NONE",e[e.SRC_OVER=0]="SRC_OVER",e[e.SRC_IN=21]="SRC_IN",e[e.SRC_OUT=22]="SRC_OUT",e[e.SRC_ATOP=23]="SRC_ATOP",e[e.DST_OVER=24]="DST_OVER",e[e.DST_IN=25]="DST_IN",e[e.DST_OUT=26]="DST_OUT",e[e.DST_ATOP=27]="DST_ATOP",e[e.ERASE=26]="ERASE",e[e.SUBTRACT=28]="SUBTRACT",e[e.XOR=29]="XOR"})(wC||(wC={}));var xC;(function(e){e[e.POINTS=0]="POINTS",e[e.LINES=1]="LINES",e[e.LINE_LOOP=2]="LINE_LOOP",e[e.LINE_STRIP=3]="LINE_STRIP",e[e.TRIANGLES=4]="TRIANGLES",e[e.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",e[e.TRIANGLE_FAN=6]="TRIANGLE_FAN"})(xC||(xC={}));var TC;(function(e){e[e.RGBA=6408]="RGBA",e[e.RGB=6407]="RGB",e[e.RG=33319]="RG",e[e.RED=6403]="RED",e[e.RGBA_INTEGER=36249]="RGBA_INTEGER",e[e.RGB_INTEGER=36248]="RGB_INTEGER",e[e.RG_INTEGER=33320]="RG_INTEGER",e[e.RED_INTEGER=36244]="RED_INTEGER",e[e.ALPHA=6406]="ALPHA",e[e.LUMINANCE=6409]="LUMINANCE",e[e.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",e[e.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",e[e.DEPTH_STENCIL=34041]="DEPTH_STENCIL"})(TC||(TC={}));var SC;(function(e){e[e.TEXTURE_2D=3553]="TEXTURE_2D",e[e.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",e[e.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",e[e.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",e[e.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",e[e.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",e[e.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",e[e.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",e[e.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z"})(SC||(SC={}));var EC;(function(e){e[e.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",e[e.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",e[e.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",e[e.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",e[e.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",e[e.UNSIGNED_INT=5125]="UNSIGNED_INT",e[e.UNSIGNED_INT_10F_11F_11F_REV=35899]="UNSIGNED_INT_10F_11F_11F_REV",e[e.UNSIGNED_INT_2_10_10_10_REV=33640]="UNSIGNED_INT_2_10_10_10_REV",e[e.UNSIGNED_INT_24_8=34042]="UNSIGNED_INT_24_8",e[e.UNSIGNED_INT_5_9_9_9_REV=35902]="UNSIGNED_INT_5_9_9_9_REV",e[e.BYTE=5120]="BYTE",e[e.SHORT=5122]="SHORT",e[e.INT=5124]="INT",e[e.FLOAT=5126]="FLOAT",e[e.FLOAT_32_UNSIGNED_INT_24_8_REV=36269]="FLOAT_32_UNSIGNED_INT_24_8_REV",e[e.HALF_FLOAT=36193]="HALF_FLOAT"})(EC||(EC={}));var CC;(function(e){e[e.FLOAT=0]="FLOAT",e[e.INT=1]="INT",e[e.UINT=2]="UINT"})(CC||(CC={}));var vw;(function(e){e[e.NEAREST=0]="NEAREST",e[e.LINEAR=1]="LINEAR"})(vw||(vw={}));var gw;(function(e){e[e.CLAMP=33071]="CLAMP",e[e.REPEAT=10497]="REPEAT",e[e.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT"})(gw||(gw={}));var yw;(function(e){e[e.OFF=0]="OFF",e[e.POW2=1]="POW2",e[e.ON=2]="ON",e[e.ON_MANUAL=3]="ON_MANUAL"})(yw||(yw={}));var IC;(function(e){e[e.NPM=0]="NPM",e[e.UNPACK=1]="UNPACK",e[e.PMA=2]="PMA",e[e.NO_PREMULTIPLIED_ALPHA=0]="NO_PREMULTIPLIED_ALPHA",e[e.PREMULTIPLY_ON_UPLOAD=1]="PREMULTIPLY_ON_UPLOAD",e[e.PREMULTIPLY_ALPHA=2]="PREMULTIPLY_ALPHA",e[e.PREMULTIPLIED_ALPHA=2]="PREMULTIPLIED_ALPHA"})(IC||(IC={}));var NC;(function(e){e[e.NO=0]="NO",e[e.YES=1]="YES",e[e.AUTO=2]="AUTO",e[e.BLEND=0]="BLEND",e[e.CLEAR=1]="CLEAR",e[e.BLIT=2]="BLIT"})(NC||(NC={}));var _w;(function(e){e[e.AUTO=0]="AUTO",e[e.MANUAL=1]="MANUAL"})(_w||(_w={}));var pd;(function(e){e.LOW="lowp",e.MEDIUM="mediump",e.HIGH="highp"})(pd||(pd={}));var PC;(function(e){e[e.NONE=0]="NONE",e[e.SCISSOR=1]="SCISSOR",e[e.STENCIL=2]="STENCIL",e[e.SPRITE=3]="SPRITE"})(PC||(PC={}));var bw;(function(e){e[e.NONE=0]="NONE",e[e.LOW=2]="LOW",e[e.MEDIUM=4]="MEDIUM",e[e.HIGH=8]="HIGH"})(bw||(bw={}));var AC;(function(e){e[e.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",e[e.ARRAY_BUFFER=34962]="ARRAY_BUFFER",e[e.UNIFORM_BUFFER=35345]="UNIFORM_BUFFER"})(AC||(AC={}));var We={MIPMAP_TEXTURES:yw.POW2,ANISOTROPIC_LEVEL:0,RESOLUTION:1,FILTER_RESOLUTION:1,FILTER_MULTISAMPLE:bw.NONE,SPRITE_MAX_TEXTURES:JY(32),SPRITE_BATCH_SIZE:4096,RENDER_OPTIONS:{view:null,antialias:!1,autoDensity:!1,backgroundColor:0,backgroundAlpha:1,useContextAlpha:!0,clearBeforeRender:!0,preserveDrawingBuffer:!1,width:800,height:600,legacy:!1},GC_MODE:_w.AUTO,GC_MAX_IDLE:60*60,GC_MAX_CHECK_COUNT:60*10,WRAP_MODE:gw.CLAMP,SCALE_MODE:vw.LINEAR,PRECISION_VERTEX:pd.HIGH,PRECISION_FRAGMENT:Vo.apple.device?pd.HIGH:pd.MEDIUM,CAN_UPLOAD_SAME_BUFFER:QY(),CREATE_IMAGE_BITMAP:!1,ROUND_PIXELS:!1},aO={exports:{}};(function(e){var t=Object.prototype.hasOwnProperty,r="~";function n(){}Object.create&&(n.prototype=Object.create(null),new n().__proto__||(r=!1));function i(l,u,c){this.fn=l,this.context=u,this.once=c||!1}function o(l,u,c,f,p){if(typeof c!="function")throw new TypeError("The listener must be a function");var v=new i(c,f||l,p),g=r?r+u:u;return l._events[g]?l._events[g].fn?l._events[g]=[l._events[g],v]:l._events[g].push(v):(l._events[g]=v,l._eventsCount++),l}function s(l,u){--l._eventsCount===0?l._events=new n:delete l._events[u]}function a(){this._events=new n,this._eventsCount=0}a.prototype.eventNames=function(){var u=[],c,f;if(this._eventsCount===0)return u;for(f in c=this._events)t.call(c,f)&&u.push(r?f.slice(1):f);return Object.getOwnPropertySymbols?u.concat(Object.getOwnPropertySymbols(c)):u},a.prototype.listeners=function(u){var c=r?r+u:u,f=this._events[c];if(!f)return[];if(f.fn)return[f.fn];for(var p=0,v=f.length,g=new Array(v);p<v;p++)g[p]=f[p].fn;return g},a.prototype.listenerCount=function(u){var c=r?r+u:u,f=this._events[c];return f?f.fn?1:f.length:0},a.prototype.emit=function(u,c,f,p,v,g){var b=r?r+u:u;if(!this._events[b])return!1;var _=this._events[b],w=arguments.length,x,T;if(_.fn){switch(_.once&&this.removeListener(u,_.fn,void 0,!0),w){case 1:return _.fn.call(_.context),!0;case 2:return _.fn.call(_.context,c),!0;case 3:return _.fn.call(_.context,c,f),!0;case 4:return _.fn.call(_.context,c,f,p),!0;case 5:return _.fn.call(_.context,c,f,p,v),!0;case 6:return _.fn.call(_.context,c,f,p,v,g),!0}for(T=1,x=new Array(w-1);T<w;T++)x[T-1]=arguments[T];_.fn.apply(_.context,x)}else{var I=_.length,R;for(T=0;T<I;T++)switch(_[T].once&&this.removeListener(u,_[T].fn,void 0,!0),w){case 1:_[T].fn.call(_[T].context);break;case 2:_[T].fn.call(_[T].context,c);break;case 3:_[T].fn.call(_[T].context,c,f);break;case 4:_[T].fn.call(_[T].context,c,f,p);break;default:if(!x)for(R=1,x=new Array(w-1);R<w;R++)x[R-1]=arguments[R];_[T].fn.apply(_[T].context,x)}}return!0},a.prototype.on=function(u,c,f){return o(this,u,c,f,!1)},a.prototype.once=function(u,c,f){return o(this,u,c,f,!0)},a.prototype.removeListener=function(u,c,f,p){var v=r?r+u:u;if(!this._events[v])return this;if(!c)return s(this,v),this;var g=this._events[v];if(g.fn)g.fn===c&&(!p||g.once)&&(!f||g.context===f)&&s(this,v);else{for(var b=0,_=[],w=g.length;b<w;b++)(g[b].fn!==c||p&&!g[b].once||f&&g[b].context!==f)&&_.push(g[b]);_.length?this._events[v]=_.length===1?_[0]:_:s(this,v)}return this},a.prototype.removeAllListeners=function(u){var c;return u?(c=r?r+u:u,this._events[c]&&s(this,c)):(this._events=new n,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=r,a.EventEmitter=a,e.exports=a})(aO);const Ah=aO.exports;var Rh={exports:{}};Rh.exports=Hy;Rh.exports.default=Hy;function Hy(e,t,r){r=r||2;var n=t&&t.length,i=n?t[0]*r:e.length,o=lO(e,0,i,r,!0),s=[];if(!o||o.next===o.prev)return s;var a,l,u,c,f,p,v;if(n&&(o=iK(e,t,o,r)),e.length>80*r){a=u=e[0],l=c=e[1];for(var g=r;g<i;g+=r)f=e[g],p=e[g+1],f<a&&(a=f),p<l&&(l=p),f>u&&(u=f),p>c&&(c=p);v=Math.max(u-a,c-l),v=v!==0?32767/v:0}return Wd(o,s,r,a,l,v,0),s}function lO(e,t,r,n,i){var o,s;if(i===Tw(e,t,r,n)>0)for(o=t;o<r;o+=n)s=RC(o,e[o],e[o+1],s);else for(o=r-n;o>=t;o-=n)s=RC(o,e[o],e[o+1],s);return s&&zy(s,s.next)&&(Kd(s),s=s.next),s}function pu(e,t){if(!e)return e;t||(t=e);var r=e,n;do if(n=!1,!r.steiner&&(zy(r,r.next)||vr(r.prev,r,r.next)===0)){if(Kd(r),r=t=r.prev,r===r.next)break;n=!0}else r=r.next;while(n||r!==t);return t}function Wd(e,t,r,n,i,o,s){if(!!e){!s&&o&&uK(e,n,i,o);for(var a=e,l,u;e.prev!==e.next;){if(l=e.prev,u=e.next,o?tK(e,n,i,o):eK(e)){t.push(l.i/r|0),t.push(e.i/r|0),t.push(u.i/r|0),Kd(e),e=u.next,a=u.next;continue}if(e=u,e===a){s?s===1?(e=rK(pu(e),t,r),Wd(e,t,r,n,i,o,2)):s===2&&nK(e,t,r,n,i,o):Wd(pu(e),t,r,n,i,o,1);break}}}}function eK(e){var t=e.prev,r=e,n=e.next;if(vr(t,r,n)>=0)return!1;for(var i=t.x,o=r.x,s=n.x,a=t.y,l=r.y,u=n.y,c=i<o?i<s?i:s:o<s?o:s,f=a<l?a<u?a:u:l<u?l:u,p=i>o?i>s?i:s:o>s?o:s,v=a>l?a>u?a:u:l>u?l:u,g=n.next;g!==t;){if(g.x>=c&&g.x<=p&&g.y>=f&&g.y<=v&&Rc(i,a,o,l,s,u,g.x,g.y)&&vr(g.prev,g,g.next)>=0)return!1;g=g.next}return!0}function tK(e,t,r,n){var i=e.prev,o=e,s=e.next;if(vr(i,o,s)>=0)return!1;for(var a=i.x,l=o.x,u=s.x,c=i.y,f=o.y,p=s.y,v=a<l?a<u?a:u:l<u?l:u,g=c<f?c<p?c:p:f<p?f:p,b=a>l?a>u?a:u:l>u?l:u,_=c>f?c>p?c:p:f>p?f:p,w=ww(v,g,t,r,n),x=ww(b,_,t,r,n),T=e.prevZ,I=e.nextZ;T&&T.z>=w&&I&&I.z<=x;){if(T.x>=v&&T.x<=b&&T.y>=g&&T.y<=_&&T!==i&&T!==s&&Rc(a,c,l,f,u,p,T.x,T.y)&&vr(T.prev,T,T.next)>=0||(T=T.prevZ,I.x>=v&&I.x<=b&&I.y>=g&&I.y<=_&&I!==i&&I!==s&&Rc(a,c,l,f,u,p,I.x,I.y)&&vr(I.prev,I,I.next)>=0))return!1;I=I.nextZ}for(;T&&T.z>=w;){if(T.x>=v&&T.x<=b&&T.y>=g&&T.y<=_&&T!==i&&T!==s&&Rc(a,c,l,f,u,p,T.x,T.y)&&vr(T.prev,T,T.next)>=0)return!1;T=T.prevZ}for(;I&&I.z<=x;){if(I.x>=v&&I.x<=b&&I.y>=g&&I.y<=_&&I!==i&&I!==s&&Rc(a,c,l,f,u,p,I.x,I.y)&&vr(I.prev,I,I.next)>=0)return!1;I=I.nextZ}return!0}function rK(e,t,r){var n=e;do{var i=n.prev,o=n.next.next;!zy(i,o)&&uO(i,n,n.next,o)&&Yd(i,o)&&Yd(o,i)&&(t.push(i.i/r|0),t.push(n.i/r|0),t.push(o.i/r|0),Kd(n),Kd(n.next),n=e=o),n=n.next}while(n!==e);return pu(n)}function nK(e,t,r,n,i,o){var s=e;do{for(var a=s.next.next;a!==s.prev;){if(s.i!==a.i&&fK(s,a)){var l=cO(s,a);s=pu(s,s.next),l=pu(l,l.next),Wd(s,t,r,n,i,o,0),Wd(l,t,r,n,i,o,0);return}a=a.next}s=s.next}while(s!==e)}function iK(e,t,r,n){var i=[],o,s,a,l,u;for(o=0,s=t.length;o<s;o++)a=t[o]*n,l=o<s-1?t[o+1]*n:e.length,u=lO(e,a,l,n,!1),u===u.next&&(u.steiner=!0),i.push(hK(u));for(i.sort(oK),o=0;o<i.length;o++)r=sK(i[o],r);return r}function oK(e,t){return e.x-t.x}function sK(e,t){var r=aK(e,t);if(!r)return t;var n=cO(r,e);return pu(n,n.next),pu(r,r.next)}function aK(e,t){var r=t,n=e.x,i=e.y,o=-1/0,s;do{if(i<=r.y&&i>=r.next.y&&r.next.y!==r.y){var a=r.x+(i-r.y)*(r.next.x-r.x)/(r.next.y-r.y);if(a<=n&&a>o&&(o=a,s=r.x<r.next.x?r:r.next,a===n))return s}r=r.next}while(r!==t);if(!s)return null;var l=s,u=s.x,c=s.y,f=1/0,p;r=s;do n>=r.x&&r.x>=u&&n!==r.x&&Rc(i<c?n:o,i,u,c,i<c?o:n,i,r.x,r.y)&&(p=Math.abs(i-r.y)/(n-r.x),Yd(r,e)&&(p<f||p===f&&(r.x>s.x||r.x===s.x&&lK(s,r)))&&(s=r,f=p)),r=r.next;while(r!==l);return s}function lK(e,t){return vr(e.prev,e,t.prev)<0&&vr(t.next,e,e.next)<0}function uK(e,t,r,n){var i=e;do i.z===0&&(i.z=ww(i.x,i.y,t,r,n)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next;while(i!==e);i.prevZ.nextZ=null,i.prevZ=null,cK(i)}function cK(e){var t,r,n,i,o,s,a,l,u=1;do{for(r=e,e=null,o=null,s=0;r;){for(s++,n=r,a=0,t=0;t<u&&(a++,n=n.nextZ,!!n);t++);for(l=u;a>0||l>0&&n;)a!==0&&(l===0||!n||r.z<=n.z)?(i=r,r=r.nextZ,a--):(i=n,n=n.nextZ,l--),o?o.nextZ=i:e=i,i.prevZ=o,o=i;r=n}o.nextZ=null,u*=2}while(s>1);return e}function ww(e,t,r,n,i){return e=(e-r)*i|0,t=(t-n)*i|0,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,t=(t|t<<8)&16711935,t=(t|t<<4)&252645135,t=(t|t<<2)&858993459,t=(t|t<<1)&1431655765,e|t<<1}function hK(e){var t=e,r=e;do(t.x<r.x||t.x===r.x&&t.y<r.y)&&(r=t),t=t.next;while(t!==e);return r}function Rc(e,t,r,n,i,o,s,a){return(i-s)*(t-a)>=(e-s)*(o-a)&&(e-s)*(n-a)>=(r-s)*(t-a)&&(r-s)*(o-a)>=(i-s)*(n-a)}function fK(e,t){return e.next.i!==t.i&&e.prev.i!==t.i&&!dK(e,t)&&(Yd(e,t)&&Yd(t,e)&&pK(e,t)&&(vr(e.prev,e,t.prev)||vr(e,t.prev,t))||zy(e,t)&&vr(e.prev,e,e.next)>0&&vr(t.prev,t,t.next)>0)}function vr(e,t,r){return(t.y-e.y)*(r.x-t.x)-(t.x-e.x)*(r.y-t.y)}function zy(e,t){return e.x===t.x&&e.y===t.y}function uO(e,t,r,n){var i=cv(vr(e,t,r)),o=cv(vr(e,t,n)),s=cv(vr(r,n,e)),a=cv(vr(r,n,t));return!!(i!==o&&s!==a||i===0&&uv(e,r,t)||o===0&&uv(e,n,t)||s===0&&uv(r,e,n)||a===0&&uv(r,t,n))}function uv(e,t,r){return t.x<=Math.max(e.x,r.x)&&t.x>=Math.min(e.x,r.x)&&t.y<=Math.max(e.y,r.y)&&t.y>=Math.min(e.y,r.y)}function cv(e){return e>0?1:e<0?-1:0}function dK(e,t){var r=e;do{if(r.i!==e.i&&r.next.i!==e.i&&r.i!==t.i&&r.next.i!==t.i&&uO(r,r.next,e,t))return!0;r=r.next}while(r!==e);return!1}function Yd(e,t){return vr(e.prev,e,e.next)<0?vr(e,t,e.next)>=0&&vr(e,e.prev,t)>=0:vr(e,t,e.prev)<0||vr(e,e.next,t)<0}function pK(e,t){var r=e,n=!1,i=(e.x+t.x)/2,o=(e.y+t.y)/2;do r.y>o!=r.next.y>o&&r.next.y!==r.y&&i<(r.next.x-r.x)*(o-r.y)/(r.next.y-r.y)+r.x&&(n=!n),r=r.next;while(r!==e);return n}function cO(e,t){var r=new xw(e.i,e.x,e.y),n=new xw(t.i,t.x,t.y),i=e.next,o=t.prev;return e.next=t,t.prev=e,r.next=i,i.prev=r,n.next=r,r.prev=n,o.next=n,n.prev=o,n}function RC(e,t,r,n){var i=new xw(e,t,r);return n?(i.next=n.next,i.prev=n,n.next.prev=i,n.next=i):(i.prev=i,i.next=i),i}function Kd(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function xw(e,t,r){this.i=e,this.x=t,this.y=r,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}Hy.deviation=function(e,t,r,n){var i=t&&t.length,o=i?t[0]*r:e.length,s=Math.abs(Tw(e,0,o,r));if(i)for(var a=0,l=t.length;a<l;a++){var u=t[a]*r,c=a<l-1?t[a+1]*r:e.length;s-=Math.abs(Tw(e,u,c,r))}var f=0;for(a=0;a<n.length;a+=3){var p=n[a]*r,v=n[a+1]*r,g=n[a+2]*r;f+=Math.abs((e[p]-e[g])*(e[v+1]-e[p+1])-(e[p]-e[v])*(e[g+1]-e[p+1]))}return s===0&&f===0?0:Math.abs((f-s)/s)};function Tw(e,t,r,n){for(var i=0,o=t,s=r-n;o<r;o+=n)i+=(e[s]-e[o])*(e[o+1]+e[s+1]),s=o;return i}Hy.flatten=function(e){for(var t=e[0][0].length,r={vertices:[],holes:[],dimensions:t},n=0,i=0;i<e.length;i++){for(var o=0;o<e[i].length;o++)for(var s=0;s<t;s++)r.vertices.push(e[i][o][s]);i>0&&(n+=e[i-1].length,r.holes.push(n))}return r};/*! https://mths.be/punycode v1.4.1 by @mathias */var Z2=2147483647,md=36,hO=1,Sw=26,mK=38,vK=700,gK=72,yK=128,_K="-",bK=/[^\x20-\x7E]/,wK=/[\x2E\u3002\uFF0E\uFF61]/g,xK={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},J2=md-hO,kc=Math.floor,Q2=String.fromCharCode;function kC(e){throw new RangeError(xK[e])}function TK(e,t){for(var r=e.length,n=[];r--;)n[r]=t(e[r]);return n}function SK(e,t){var r=e.split("@"),n="";r.length>1&&(n=r[0]+"@",e=r[1]),e=e.replace(wK,".");var i=e.split("."),o=TK(i,t).join(".");return n+o}function EK(e){for(var t=[],r=0,n=e.length,i,o;r<n;)i=e.charCodeAt(r++),i>=55296&&i<=56319&&r<n?(o=e.charCodeAt(r++),(o&64512)==56320?t.push(((i&1023)<<10)+(o&1023)+65536):(t.push(i),r--)):t.push(i);return t}function OC(e,t){return e+22+75*(e<26)-((t!=0)<<5)}function CK(e,t,r){var n=0;for(e=r?kc(e/vK):e>>1,e+=kc(e/t);e>J2*Sw>>1;n+=md)e=kc(e/J2);return kc(n+(J2+1)*e/(e+mK))}function IK(e){var t,r,n,i,o,s,a,l,u,c,f,p=[],v,g,b,_;for(e=EK(e),v=e.length,t=yK,r=0,o=gK,s=0;s<v;++s)f=e[s],f<128&&p.push(Q2(f));for(n=i=p.length,i&&p.push(_K);n<v;){for(a=Z2,s=0;s<v;++s)f=e[s],f>=t&&f<a&&(a=f);for(g=n+1,a-t>kc((Z2-r)/g)&&kC("overflow"),r+=(a-t)*g,t=a,s=0;s<v;++s)if(f=e[s],f<t&&++r>Z2&&kC("overflow"),f==t){for(l=r,u=md;c=u<=o?hO:u>=o+Sw?Sw:u-o,!(l<c);u+=md)_=l-c,b=md-c,p.push(Q2(OC(c+_%b,0))),l=kc(_/b);p.push(Q2(OC(l,0))),o=CK(r,g,n==i),r=0,++n}++r,++t}return p.join("")}function NK(e){return SK(e,function(t){return bK.test(t)?"xn--"+IK(t):t})}function hv(e){return e===null}function PK(e){return e==null}function P4(e){return typeof e=="string"}function fO(e){return typeof e=="object"&&e!==null}function AK(e,t){return Object.prototype.hasOwnProperty.call(e,t)}var dO=Array.isArray||function(e){return Object.prototype.toString.call(e)==="[object Array]"};function kf(e){switch(typeof e){case"string":return e;case"boolean":return e?"true":"false";case"number":return isFinite(e)?e:"";default:return""}}function RK(e,t,r,n){return t=t||"&",r=r||"=",e===null&&(e=void 0),typeof e=="object"?LC(kK(e),function(i){var o=encodeURIComponent(kf(i))+r;return dO(e[i])?LC(e[i],function(s){return o+encodeURIComponent(kf(s))}).join(t):o+encodeURIComponent(kf(e[i]))}).join(t):n?encodeURIComponent(kf(n))+r+encodeURIComponent(kf(e)):""}function LC(e,t){if(e.map)return e.map(t);for(var r=[],n=0;n<e.length;n++)r.push(t(e[n],n));return r}var kK=Object.keys||function(e){var t=[];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.push(r);return t};function UC(e,t,r,n){t=t||"&",r=r||"=";var i={};if(typeof e!="string"||e.length===0)return i;var o=/\+/g;e=e.split(t);var s=1e3;n&&typeof n.maxKeys=="number"&&(s=n.maxKeys);var a=e.length;s>0&&a>s&&(a=s);for(var l=0;l<a;++l){var u=e[l].replace(o,"%20"),c=u.indexOf(r),f,p,v,g;c>=0?(f=u.substr(0,c),p=u.substr(c+1)):(f=u,p=""),v=decodeURIComponent(f),g=decodeURIComponent(p),AK(i,v)?dO(i[v])?i[v].push(g):i[v]=[i[v],g]:i[v]=g}return i}function Hs(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}var OK=/^([a-z0-9.+-]+:)/i,LK=/:[0-9]*$/,UK=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,FK=["<",">",'"',"`"," ","\r",`
`,"	"],MK=["{","}","|","\\","^","`"].concat(FK),Ew=["'"].concat(MK),FC=["%","/","?",";","#"].concat(Ew),MC=["/","?","#"],BK=255,BC=/^[+a-z0-9A-Z_-]{0,63}$/,DK=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,GK={javascript:!0,"javascript:":!0},Cw={javascript:!0,"javascript:":!0},Kc={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0};function A4(e,t,r){if(e&&fO(e)&&e instanceof Hs)return e;var n=new Hs;return n.parse(e,t,r),n}Hs.prototype.parse=function(e,t,r){return pO(this,e,t,r)};function pO(e,t,r,n){if(!P4(t))throw new TypeError("Parameter 'url' must be a string, not "+typeof t);var i=t.indexOf("?"),o=i!==-1&&i<t.indexOf("#")?"?":"#",s=t.split(o),a=/\\/g;s[0]=s[0].replace(a,"/"),t=s.join(o);var l=t;if(l=l.trim(),!n&&t.split("#").length===1){var u=UK.exec(l);if(u)return e.path=l,e.href=l,e.pathname=u[1],u[2]?(e.search=u[2],r?e.query=UC(e.search.substr(1)):e.query=e.search.substr(1)):r&&(e.search="",e.query={}),e}var c=OK.exec(l);if(c){c=c[0];var f=c.toLowerCase();e.protocol=f,l=l.substr(c.length)}if(n||c||l.match(/^\/\/[^@\/]+@[^@\/]+/)){var p=l.substr(0,2)==="//";p&&!(c&&Cw[c])&&(l=l.substr(2),e.slashes=!0)}var v,g,b,_;if(!Cw[c]&&(p||c&&!Kc[c])){var w=-1;for(v=0;v<MC.length;v++)g=l.indexOf(MC[v]),g!==-1&&(w===-1||g<w)&&(w=g);var x,T;for(w===-1?T=l.lastIndexOf("@"):T=l.lastIndexOf("@",w),T!==-1&&(x=l.slice(0,T),l=l.slice(T+1),e.auth=decodeURIComponent(x)),w=-1,v=0;v<FC.length;v++)g=l.indexOf(FC[v]),g!==-1&&(w===-1||g<w)&&(w=g);w===-1&&(w=l.length),e.host=l.slice(0,w),l=l.slice(w),mO(e),e.hostname=e.hostname||"";var I=e.hostname[0]==="["&&e.hostname[e.hostname.length-1]==="]";if(!I){var R=e.hostname.split(/\./);for(v=0,b=R.length;v<b;v++){var E=R[v];if(!!E&&!E.match(BC)){for(var O="",P=0,N=E.length;P<N;P++)E.charCodeAt(P)>127?O+="x":O+=E[P];if(!O.match(BC)){var A=R.slice(0,v),j=R.slice(v+1),X=E.match(DK);X&&(A.push(X[1]),j.unshift(X[2])),j.length&&(l="/"+j.join(".")+l),e.hostname=A.join(".");break}}}}e.hostname.length>BK?e.hostname="":e.hostname=e.hostname.toLowerCase(),I||(e.hostname=NK(e.hostname)),_=e.port?":"+e.port:"";var B=e.hostname||"";e.host=B+_,e.href+=e.host,I&&(e.hostname=e.hostname.substr(1,e.hostname.length-2),l[0]!=="/"&&(l="/"+l))}if(!GK[f])for(v=0,b=Ew.length;v<b;v++){var ae=Ew[v];if(l.indexOf(ae)!==-1){var Y=encodeURIComponent(ae);Y===ae&&(Y=escape(ae)),l=l.split(ae).join(Y)}}var K=l.indexOf("#");K!==-1&&(e.hash=l.substr(K),l=l.slice(0,K));var me=l.indexOf("?");if(me!==-1?(e.search=l.substr(me),e.query=l.substr(me+1),r&&(e.query=UC(e.query)),l=l.slice(0,me)):r&&(e.search="",e.query={}),l&&(e.pathname=l),Kc[f]&&e.hostname&&!e.pathname&&(e.pathname="/"),e.pathname||e.search){_=e.pathname||"";var ue=e.search||"";e.path=_+ue}return e.href=R4(e),e}function jK(e){return P4(e)&&(e=pO({},e)),R4(e)}function R4(e){var t=e.auth||"";t&&(t=encodeURIComponent(t),t=t.replace(/%3A/i,":"),t+="@");var r=e.protocol||"",n=e.pathname||"",i=e.hash||"",o=!1,s="";e.host?o=t+e.host:e.hostname&&(o=t+(e.hostname.indexOf(":")===-1?e.hostname:"["+this.hostname+"]"),e.port&&(o+=":"+e.port)),e.query&&fO(e.query)&&Object.keys(e.query).length&&(s=RK(e.query));var a=e.search||s&&"?"+s||"";return r&&r.substr(-1)!==":"&&(r+=":"),e.slashes||(!r||Kc[r])&&o!==!1?(o="//"+(o||""),n&&n.charAt(0)!=="/"&&(n="/"+n)):o||(o=""),i&&i.charAt(0)!=="#"&&(i="#"+i),a&&a.charAt(0)!=="?"&&(a="?"+a),n=n.replace(/[?#]/g,function(l){return encodeURIComponent(l)}),a=a.replace("#","%23"),r+o+n+a+i}Hs.prototype.format=function(){return R4(this)};function $K(e,t){return A4(e,!1,!0).resolve(t)}Hs.prototype.resolve=function(e){return this.resolveObject(A4(e,!1,!0)).format()};Hs.prototype.resolveObject=function(e){if(P4(e)){var t=new Hs;t.parse(e,!1,!0),e=t}for(var r=new Hs,n=Object.keys(this),i=0;i<n.length;i++){var o=n[i];r[o]=this[o]}if(r.hash=e.hash,e.href==="")return r.href=r.format(),r;if(e.slashes&&!e.protocol){for(var s=Object.keys(e),a=0;a<s.length;a++){var l=s[a];l!=="protocol"&&(r[l]=e[l])}return Kc[r.protocol]&&r.hostname&&!r.pathname&&(r.path=r.pathname="/"),r.href=r.format(),r}var u;if(e.protocol&&e.protocol!==r.protocol){if(!Kc[e.protocol]){for(var c=Object.keys(e),f=0;f<c.length;f++){var p=c[f];r[p]=e[p]}return r.href=r.format(),r}if(r.protocol=e.protocol,!e.host&&!Cw[e.protocol]){for(u=(e.pathname||"").split("/");u.length&&!(e.host=u.shift()););e.host||(e.host=""),e.hostname||(e.hostname=""),u[0]!==""&&u.unshift(""),u.length<2&&u.unshift(""),r.pathname=u.join("/")}else r.pathname=e.pathname;if(r.search=e.search,r.query=e.query,r.host=e.host||"",r.auth=e.auth,r.hostname=e.hostname||e.host,r.port=e.port,r.pathname||r.search){var v=r.pathname||"",g=r.search||"";r.path=v+g}return r.slashes=r.slashes||e.slashes,r.href=r.format(),r}var b=r.pathname&&r.pathname.charAt(0)==="/",_=e.host||e.pathname&&e.pathname.charAt(0)==="/",w=_||b||r.host&&e.pathname,x=w,T=r.pathname&&r.pathname.split("/")||[],I=r.protocol&&!Kc[r.protocol];u=e.pathname&&e.pathname.split("/")||[],I&&(r.hostname="",r.port=null,r.host&&(T[0]===""?T[0]=r.host:T.unshift(r.host)),r.host="",e.protocol&&(e.hostname=null,e.port=null,e.host&&(u[0]===""?u[0]=e.host:u.unshift(e.host)),e.host=null),w=w&&(u[0]===""||T[0]===""));var R;if(_)r.host=e.host||e.host===""?e.host:r.host,r.hostname=e.hostname||e.hostname===""?e.hostname:r.hostname,r.search=e.search,r.query=e.query,T=u;else if(u.length)T||(T=[]),T.pop(),T=T.concat(u),r.search=e.search,r.query=e.query;else if(!PK(e.search))return I&&(r.hostname=r.host=T.shift(),R=r.host&&r.host.indexOf("@")>0?r.host.split("@"):!1,R&&(r.auth=R.shift(),r.host=r.hostname=R.shift())),r.search=e.search,r.query=e.query,(!hv(r.pathname)||!hv(r.search))&&(r.path=(r.pathname?r.pathname:"")+(r.search?r.search:"")),r.href=r.format(),r;if(!T.length)return r.pathname=null,r.search?r.path="/"+r.search:r.path=null,r.href=r.format(),r;for(var E=T.slice(-1)[0],O=(r.host||e.host||T.length>1)&&(E==="."||E==="..")||E==="",P=0,N=T.length;N>=0;N--)E=T[N],E==="."?T.splice(N,1):E===".."?(T.splice(N,1),P++):P&&(T.splice(N,1),P--);if(!w&&!x)for(;P--;P)T.unshift("..");w&&T[0]!==""&&(!T[0]||T[0].charAt(0)!=="/")&&T.unshift(""),O&&T.join("/").substr(-1)!=="/"&&T.push("");var A=T[0]===""||T[0]&&T[0].charAt(0)==="/";return I&&(r.hostname=r.host=A?"":T.length?T.shift():"",R=r.host&&r.host.indexOf("@")>0?r.host.split("@"):!1,R&&(r.auth=R.shift(),r.host=r.hostname=R.shift())),w=w||r.host&&T.length,w&&!A&&T.unshift(""),T.length?r.pathname=T.join("/"):(r.pathname=null,r.path=null),(!hv(r.pathname)||!hv(r.search))&&(r.path=(r.pathname?r.pathname:"")+(r.search?r.search:"")),r.auth=e.auth||r.auth,r.slashes=r.slashes||e.slashes,r.href=r.format(),r};Hs.prototype.parseHost=function(){return mO(this)};function mO(e){var t=e.host,r=LK.exec(t);r&&(r=r[0],r!==":"&&(e.port=r.substr(1)),t=t.substr(0,t.length-r.length)),t&&(e.hostname=t)}/*!
 * @pixi/constants - v6.4.2
 * Compiled Thu, 02 Jun 2022 15:39:26 UTC
 *
 * @pixi/constants is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var Ys;(function(e){e[e.WEBGL_LEGACY=0]="WEBGL_LEGACY",e[e.WEBGL=1]="WEBGL",e[e.WEBGL2=2]="WEBGL2"})(Ys||(Ys={}));var qd;(function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.WEBGL=1]="WEBGL",e[e.CANVAS=2]="CANVAS"})(qd||(qd={}));var bg;(function(e){e[e.COLOR=16384]="COLOR",e[e.DEPTH=256]="DEPTH",e[e.STENCIL=1024]="STENCIL"})(bg||(bg={}));var Ze;(function(e){e[e.NORMAL=0]="NORMAL",e[e.ADD=1]="ADD",e[e.MULTIPLY=2]="MULTIPLY",e[e.SCREEN=3]="SCREEN",e[e.OVERLAY=4]="OVERLAY",e[e.DARKEN=5]="DARKEN",e[e.LIGHTEN=6]="LIGHTEN",e[e.COLOR_DODGE=7]="COLOR_DODGE",e[e.COLOR_BURN=8]="COLOR_BURN",e[e.HARD_LIGHT=9]="HARD_LIGHT",e[e.SOFT_LIGHT=10]="SOFT_LIGHT",e[e.DIFFERENCE=11]="DIFFERENCE",e[e.EXCLUSION=12]="EXCLUSION",e[e.HUE=13]="HUE",e[e.SATURATION=14]="SATURATION",e[e.COLOR=15]="COLOR",e[e.LUMINOSITY=16]="LUMINOSITY",e[e.NORMAL_NPM=17]="NORMAL_NPM",e[e.ADD_NPM=18]="ADD_NPM",e[e.SCREEN_NPM=19]="SCREEN_NPM",e[e.NONE=20]="NONE",e[e.SRC_OVER=0]="SRC_OVER",e[e.SRC_IN=21]="SRC_IN",e[e.SRC_OUT=22]="SRC_OUT",e[e.SRC_ATOP=23]="SRC_ATOP",e[e.DST_OVER=24]="DST_OVER",e[e.DST_IN=25]="DST_IN",e[e.DST_OUT=26]="DST_OUT",e[e.DST_ATOP=27]="DST_ATOP",e[e.ERASE=26]="ERASE",e[e.SUBTRACT=28]="SUBTRACT",e[e.XOR=29]="XOR"})(Ze||(Ze={}));var Ci;(function(e){e[e.POINTS=0]="POINTS",e[e.LINES=1]="LINES",e[e.LINE_LOOP=2]="LINE_LOOP",e[e.LINE_STRIP=3]="LINE_STRIP",e[e.TRIANGLES=4]="TRIANGLES",e[e.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",e[e.TRIANGLE_FAN=6]="TRIANGLE_FAN"})(Ci||(Ci={}));var Se;(function(e){e[e.RGBA=6408]="RGBA",e[e.RGB=6407]="RGB",e[e.RG=33319]="RG",e[e.RED=6403]="RED",e[e.RGBA_INTEGER=36249]="RGBA_INTEGER",e[e.RGB_INTEGER=36248]="RGB_INTEGER",e[e.RG_INTEGER=33320]="RG_INTEGER",e[e.RED_INTEGER=36244]="RED_INTEGER",e[e.ALPHA=6406]="ALPHA",e[e.LUMINANCE=6409]="LUMINANCE",e[e.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",e[e.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",e[e.DEPTH_STENCIL=34041]="DEPTH_STENCIL"})(Se||(Se={}));var eu;(function(e){e[e.TEXTURE_2D=3553]="TEXTURE_2D",e[e.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",e[e.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",e[e.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",e[e.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",e[e.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",e[e.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",e[e.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",e[e.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z"})(eu||(eu={}));var $e;(function(e){e[e.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",e[e.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",e[e.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",e[e.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",e[e.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",e[e.UNSIGNED_INT=5125]="UNSIGNED_INT",e[e.UNSIGNED_INT_10F_11F_11F_REV=35899]="UNSIGNED_INT_10F_11F_11F_REV",e[e.UNSIGNED_INT_2_10_10_10_REV=33640]="UNSIGNED_INT_2_10_10_10_REV",e[e.UNSIGNED_INT_24_8=34042]="UNSIGNED_INT_24_8",e[e.UNSIGNED_INT_5_9_9_9_REV=35902]="UNSIGNED_INT_5_9_9_9_REV",e[e.BYTE=5120]="BYTE",e[e.SHORT=5122]="SHORT",e[e.INT=5124]="INT",e[e.FLOAT=5126]="FLOAT",e[e.FLOAT_32_UNSIGNED_INT_24_8_REV=36269]="FLOAT_32_UNSIGNED_INT_24_8_REV",e[e.HALF_FLOAT=36193]="HALF_FLOAT"})($e||($e={}));var wg;(function(e){e[e.FLOAT=0]="FLOAT",e[e.INT=1]="INT",e[e.UINT=2]="UINT"})(wg||(wg={}));var Tt;(function(e){e[e.NEAREST=0]="NEAREST",e[e.LINEAR=1]="LINEAR"})(Tt||(Tt={}));var Jo;(function(e){e[e.CLAMP=33071]="CLAMP",e[e.REPEAT=10497]="REPEAT",e[e.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT"})(Jo||(Jo={}));var Ks;(function(e){e[e.OFF=0]="OFF",e[e.POW2=1]="POW2",e[e.ON=2]="ON",e[e.ON_MANUAL=3]="ON_MANUAL"})(Ks||(Ks={}));var To;(function(e){e[e.NPM=0]="NPM",e[e.UNPACK=1]="UNPACK",e[e.PMA=2]="PMA",e[e.NO_PREMULTIPLIED_ALPHA=0]="NO_PREMULTIPLIED_ALPHA",e[e.PREMULTIPLY_ON_UPLOAD=1]="PREMULTIPLY_ON_UPLOAD",e[e.PREMULTIPLY_ALPHA=2]="PREMULTIPLY_ALPHA",e[e.PREMULTIPLIED_ALPHA=2]="PREMULTIPLIED_ALPHA"})(To||(To={}));var Ta;(function(e){e[e.NO=0]="NO",e[e.YES=1]="YES",e[e.AUTO=2]="AUTO",e[e.BLEND=0]="BLEND",e[e.CLEAR=1]="CLEAR",e[e.BLIT=2]="BLIT"})(Ta||(Ta={}));var Iw;(function(e){e[e.AUTO=0]="AUTO",e[e.MANUAL=1]="MANUAL"})(Iw||(Iw={}));var Xo;(function(e){e.LOW="lowp",e.MEDIUM="mediump",e.HIGH="highp"})(Xo||(Xo={}));var Rn;(function(e){e[e.NONE=0]="NONE",e[e.SCISSOR=1]="SCISSOR",e[e.STENCIL=2]="STENCIL",e[e.SPRITE=3]="SPRITE"})(Rn||(Rn={}));var Ur;(function(e){e[e.NONE=0]="NONE",e[e.LOW=2]="LOW",e[e.MEDIUM=4]="MEDIUM",e[e.HIGH=8]="HIGH"})(Ur||(Ur={}));var Qo;(function(e){e[e.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",e[e.ARRAY_BUFFER=34962]="ARRAY_BUFFER",e[e.UNIFORM_BUFFER=35345]="UNIFORM_BUFFER"})(Qo||(Qo={}));/*!
 * @pixi/utils - v6.4.2
 * Compiled Thu, 02 Jun 2022 15:39:26 UTC
 *
 * @pixi/utils is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var Oc={parse:A4,format:jK,resolve:$K};We.RETINA_PREFIX=/@([0-9\.]+)x/;We.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT=!1;var DC=!1,GC="6.4.2";function HK(e){var t;if(!DC){if(navigator.userAgent.toLowerCase().indexOf("chrome")>-1){var r=[`
 %c %c %c PixiJS `+GC+" - \u2730 "+e+` \u2730  %c  %c  http://www.pixijs.com/  %c %c \u2665%c\u2665%c\u2665 

`,"background: #ff66a5; padding:5px 0;","background: #ff66a5; padding:5px 0;","color: #ff66a5; background: #030307; padding:5px 0;","background: #ff66a5; padding:5px 0;","background: #ffc3dc; padding:5px 0;","background: #ff66a5; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;"];(t=globalThis.console).log.apply(t,r)}else globalThis.console&&globalThis.console.log("PixiJS "+GC+" - "+e+" - http://www.pixijs.com/");DC=!0}}var e_;function zK(){return typeof e_>"u"&&(e_=function(){var t={stencil:!0,failIfMajorPerformanceCaveat:We.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT};try{if(!globalThis.WebGLRenderingContext)return!1;var r=document.createElement("canvas"),n=r.getContext("webgl",t)||r.getContext("experimental-webgl",t),i=!!(n&&n.getContextAttributes().stencil);if(n){var o=n.getExtension("WEBGL_lose_context");o&&o.loseContext()}return n=null,i}catch{return!1}}()),e_}var VK="#f0f8ff",XK="#faebd7",WK="#00ffff",YK="#7fffd4",KK="#f0ffff",qK="#f5f5dc",ZK="#ffe4c4",JK="#000000",QK="#ffebcd",eq="#0000ff",tq="#8a2be2",rq="#a52a2a",nq="#deb887",iq="#5f9ea0",oq="#7fff00",sq="#d2691e",aq="#ff7f50",lq="#6495ed",uq="#fff8dc",cq="#dc143c",hq="#00ffff",fq="#00008b",dq="#008b8b",pq="#b8860b",mq="#a9a9a9",vq="#006400",gq="#a9a9a9",yq="#bdb76b",_q="#8b008b",bq="#556b2f",wq="#ff8c00",xq="#9932cc",Tq="#8b0000",Sq="#e9967a",Eq="#8fbc8f",Cq="#483d8b",Iq="#2f4f4f",Nq="#2f4f4f",Pq="#00ced1",Aq="#9400d3",Rq="#ff1493",kq="#00bfff",Oq="#696969",Lq="#696969",Uq="#1e90ff",Fq="#b22222",Mq="#fffaf0",Bq="#228b22",Dq="#ff00ff",Gq="#dcdcdc",jq="#f8f8ff",$q="#daa520",Hq="#ffd700",zq="#808080",Vq="#008000",Xq="#adff2f",Wq="#808080",Yq="#f0fff0",Kq="#ff69b4",qq="#cd5c5c",Zq="#4b0082",Jq="#fffff0",Qq="#f0e68c",eZ="#fff0f5",tZ="#e6e6fa",rZ="#7cfc00",nZ="#fffacd",iZ="#add8e6",oZ="#f08080",sZ="#e0ffff",aZ="#fafad2",lZ="#d3d3d3",uZ="#90ee90",cZ="#d3d3d3",hZ="#ffb6c1",fZ="#ffa07a",dZ="#20b2aa",pZ="#87cefa",mZ="#778899",vZ="#778899",gZ="#b0c4de",yZ="#ffffe0",_Z="#00ff00",bZ="#32cd32",wZ="#faf0e6",xZ="#ff00ff",TZ="#800000",SZ="#66cdaa",EZ="#0000cd",CZ="#ba55d3",IZ="#9370db",NZ="#3cb371",PZ="#7b68ee",AZ="#00fa9a",RZ="#48d1cc",kZ="#c71585",OZ="#191970",LZ="#f5fffa",UZ="#ffe4e1",FZ="#ffe4b5",MZ="#ffdead",BZ="#000080",DZ="#fdf5e6",GZ="#808000",jZ="#6b8e23",$Z="#ffa500",HZ="#ff4500",zZ="#da70d6",VZ="#eee8aa",XZ="#98fb98",WZ="#afeeee",YZ="#db7093",KZ="#ffefd5",qZ="#ffdab9",ZZ="#cd853f",JZ="#ffc0cb",QZ="#dda0dd",eJ="#b0e0e6",tJ="#800080",rJ="#663399",nJ="#ff0000",iJ="#bc8f8f",oJ="#4169e1",sJ="#8b4513",aJ="#fa8072",lJ="#f4a460",uJ="#2e8b57",cJ="#fff5ee",hJ="#a0522d",fJ="#c0c0c0",dJ="#87ceeb",pJ="#6a5acd",mJ="#708090",vJ="#708090",gJ="#fffafa",yJ="#00ff7f",_J="#4682b4",bJ="#d2b48c",wJ="#008080",xJ="#d8bfd8",TJ="#ff6347",SJ="#40e0d0",EJ="#ee82ee",CJ="#f5deb3",IJ="#ffffff",NJ="#f5f5f5",PJ="#ffff00",AJ="#9acd32",RJ={aliceblue:VK,antiquewhite:XK,aqua:WK,aquamarine:YK,azure:KK,beige:qK,bisque:ZK,black:JK,blanchedalmond:QK,blue:eq,blueviolet:tq,brown:rq,burlywood:nq,cadetblue:iq,chartreuse:oq,chocolate:sq,coral:aq,cornflowerblue:lq,cornsilk:uq,crimson:cq,cyan:hq,darkblue:fq,darkcyan:dq,darkgoldenrod:pq,darkgray:mq,darkgreen:vq,darkgrey:gq,darkkhaki:yq,darkmagenta:_q,darkolivegreen:bq,darkorange:wq,darkorchid:xq,darkred:Tq,darksalmon:Sq,darkseagreen:Eq,darkslateblue:Cq,darkslategray:Iq,darkslategrey:Nq,darkturquoise:Pq,darkviolet:Aq,deeppink:Rq,deepskyblue:kq,dimgray:Oq,dimgrey:Lq,dodgerblue:Uq,firebrick:Fq,floralwhite:Mq,forestgreen:Bq,fuchsia:Dq,gainsboro:Gq,ghostwhite:jq,goldenrod:$q,gold:Hq,gray:zq,green:Vq,greenyellow:Xq,grey:Wq,honeydew:Yq,hotpink:Kq,indianred:qq,indigo:Zq,ivory:Jq,khaki:Qq,lavenderblush:eZ,lavender:tZ,lawngreen:rZ,lemonchiffon:nZ,lightblue:iZ,lightcoral:oZ,lightcyan:sZ,lightgoldenrodyellow:aZ,lightgray:lZ,lightgreen:uZ,lightgrey:cZ,lightpink:hZ,lightsalmon:fZ,lightseagreen:dZ,lightskyblue:pZ,lightslategray:mZ,lightslategrey:vZ,lightsteelblue:gZ,lightyellow:yZ,lime:_Z,limegreen:bZ,linen:wZ,magenta:xZ,maroon:TZ,mediumaquamarine:SZ,mediumblue:EZ,mediumorchid:CZ,mediumpurple:IZ,mediumseagreen:NZ,mediumslateblue:PZ,mediumspringgreen:AZ,mediumturquoise:RZ,mediumvioletred:kZ,midnightblue:OZ,mintcream:LZ,mistyrose:UZ,moccasin:FZ,navajowhite:MZ,navy:BZ,oldlace:DZ,olive:GZ,olivedrab:jZ,orange:$Z,orangered:HZ,orchid:zZ,palegoldenrod:VZ,palegreen:XZ,paleturquoise:WZ,palevioletred:YZ,papayawhip:KZ,peachpuff:qZ,peru:ZZ,pink:JZ,plum:QZ,powderblue:eJ,purple:tJ,rebeccapurple:rJ,red:nJ,rosybrown:iJ,royalblue:oJ,saddlebrown:sJ,salmon:aJ,sandybrown:lJ,seagreen:uJ,seashell:cJ,sienna:hJ,silver:fJ,skyblue:dJ,slateblue:pJ,slategray:mJ,slategrey:vJ,snow:gJ,springgreen:yJ,steelblue:_J,tan:bJ,teal:wJ,thistle:xJ,tomato:TJ,turquoise:SJ,violet:EJ,wheat:CJ,white:IJ,whitesmoke:NJ,yellow:PJ,yellowgreen:AJ};function sl(e,t){return t===void 0&&(t=[]),t[0]=(e>>16&255)/255,t[1]=(e>>8&255)/255,t[2]=(e&255)/255,t}function vO(e){var t=e.toString(16);return t="000000".substring(0,6-t.length)+t,"#"+t}function gO(e){return typeof e=="string"&&(e=RJ[e.toLowerCase()]||e,e[0]==="#"&&(e=e.slice(1))),parseInt(e,16)}function kJ(){for(var e=[],t=[],r=0;r<32;r++)e[r]=r,t[r]=r;e[Ze.NORMAL_NPM]=Ze.NORMAL,e[Ze.ADD_NPM]=Ze.ADD,e[Ze.SCREEN_NPM]=Ze.SCREEN,t[Ze.NORMAL]=Ze.NORMAL_NPM,t[Ze.ADD]=Ze.ADD_NPM,t[Ze.SCREEN]=Ze.SCREEN_NPM;var n=[];return n.push(t),n.push(e),n}var yO=kJ();function _O(e,t){return yO[t?1:0][e]}function OJ(e,t,r,n){return r=r||new Float32Array(4),n||n===void 0?(r[0]=e[0]*t,r[1]=e[1]*t,r[2]=e[2]*t):(r[0]=e[0],r[1]=e[1],r[2]=e[2]),r[3]=t,r}function Vy(e,t){if(t===1)return(t*255<<24)+e;if(t===0)return 0;var r=e>>16&255,n=e>>8&255,i=e&255;return r=r*t+.5|0,n=n*t+.5|0,i=i*t+.5|0,(t*255<<24)+(r<<16)+(n<<8)+i}function bO(e,t,r,n){return r=r||new Float32Array(4),r[0]=(e>>16&255)/255,r[1]=(e>>8&255)/255,r[2]=(e&255)/255,(n||n===void 0)&&(r[0]*=t,r[1]*=t,r[2]*=t),r[3]=t,r}function LJ(e,t){t===void 0&&(t=null);var r=e*6;if(t=t||new Uint16Array(r),t.length!==r)throw new Error("Out buffer length is incorrect, got "+t.length+" and expected "+r);for(var n=0,i=0;n<r;n+=6,i+=4)t[n+0]=i+0,t[n+1]=i+1,t[n+2]=i+2,t[n+3]=i+0,t[n+4]=i+2,t[n+5]=i+3;return t}function wO(e){if(e.BYTES_PER_ELEMENT===4)return e instanceof Float32Array?"Float32Array":e instanceof Uint32Array?"Uint32Array":"Int32Array";if(e.BYTES_PER_ELEMENT===2){if(e instanceof Uint16Array)return"Uint16Array"}else if(e.BYTES_PER_ELEMENT===1&&e instanceof Uint8Array)return"Uint8Array";return null}function xg(e){return e+=e===0?1:0,--e,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,e+1}function jC(e){return!(e&e-1)&&!!e}function $C(e){var t=(e>65535?1:0)<<4;e>>>=t;var r=(e>255?1:0)<<3;return e>>>=r,t|=r,r=(e>15?1:0)<<2,e>>>=r,t|=r,r=(e>3?1:0)<<1,e>>>=r,t|=r,t|e>>1}function zs(e,t,r){var n=e.length,i;if(!(t>=n||r===0)){r=t+r>n?n-t:r;var o=n-r;for(i=t;i<o;++i)e[i]=e[i+r];e.length=o}}function Lc(e){return e===0?0:e<0?-1:1}var UJ=0;function mu(){return++UJ}var HC={};function Zd(e,t,r){if(r===void 0&&(r=3),!HC[t]){var n=new Error().stack;typeof n>"u"?console.warn("PixiJS Deprecation Warning: ",t+`
Deprecated since v`+e):(n=n.split(`
`).splice(r).join(`
`),console.groupCollapsed?(console.groupCollapsed("%cPixiJS Deprecation Warning: %c%s","color:#614108;background:#fffbe6","font-weight:normal;color:#614108;background:#fffbe6",t+`
Deprecated since v`+e),console.warn(n),console.groupEnd()):(console.warn("PixiJS Deprecation Warning: ",t+`
Deprecated since v`+e),console.warn(n))),HC[t]=!0}}var zC={},Cs=Object.create(null),kl=Object.create(null),VC=function(){function e(t,r,n){this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d"),this.resolution=n||We.RESOLUTION,this.resize(t,r)}return e.prototype.clear=function(){this.context.setTransform(1,0,0,1,0,0),this.context.clearRect(0,0,this.canvas.width,this.canvas.height)},e.prototype.resize=function(t,r){this.canvas.width=Math.round(t*this.resolution),this.canvas.height=Math.round(r*this.resolution)},e.prototype.destroy=function(){this.context=null,this.canvas=null},Object.defineProperty(e.prototype,"width",{get:function(){return this.canvas.width},set:function(t){this.canvas.width=Math.round(t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this.canvas.height},set:function(t){this.canvas.height=Math.round(t)},enumerable:!1,configurable:!0}),e}();function FJ(e){var t=e.width,r=e.height,n=e.getContext("2d"),i=n.getImageData(0,0,t,r),o=i.data,s=o.length,a={top:null,left:null,right:null,bottom:null},l=null,u,c,f;for(u=0;u<s;u+=4)o[u+3]!==0&&(c=u/4%t,f=~~(u/4/t),a.top===null&&(a.top=f),(a.left===null||c<a.left)&&(a.left=c),(a.right===null||a.right<c)&&(a.right=c+1),(a.bottom===null||a.bottom<f)&&(a.bottom=f));return a.top!==null&&(t=a.right-a.left,r=a.bottom-a.top+1,l=n.getImageData(a.left,a.top,t,r)),{height:r,width:t,data:l}}var fv;function MJ(e,t){if(t===void 0&&(t=globalThis.location),e.indexOf("data:")===0)return"";t=t||globalThis.location,fv||(fv=document.createElement("a")),fv.href=e;var r=Oc.parse(fv.href),n=!r.port&&t.port===""||r.port===t.port;return r.hostname!==t.hostname||!n||r.protocol!==t.protocol?"anonymous":""}function Tg(e,t){var r=We.RETINA_PREFIX.exec(e);return r?parseFloat(r[1]):t!==void 0?t:1}/*!
 * @pixi/math - v6.4.2
 * Compiled Thu, 02 Jun 2022 15:39:26 UTC
 *
 * @pixi/math is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var ch=Math.PI*2,xO=180/Math.PI,TO=Math.PI/180,vt;(function(e){e[e.POLY=0]="POLY",e[e.RECT=1]="RECT",e[e.CIRC=2]="CIRC",e[e.ELIP=3]="ELIP",e[e.RREC=4]="RREC"})(vt||(vt={}));var Gt=function(){function e(t,r){t===void 0&&(t=0),r===void 0&&(r=0),this.x=0,this.y=0,this.x=t,this.y=r}return e.prototype.clone=function(){return new e(this.x,this.y)},e.prototype.copyFrom=function(t){return this.set(t.x,t.y),this},e.prototype.copyTo=function(t){return t.set(this.x,this.y),t},e.prototype.equals=function(t){return t.x===this.x&&t.y===this.y},e.prototype.set=function(t,r){return t===void 0&&(t=0),r===void 0&&(r=t),this.x=t,this.y=r,this},e.prototype.toString=function(){return"[@pixi/math:Point x="+this.x+" y="+this.y+"]"},e}(),dv=[new Gt,new Gt,new Gt,new Gt],Fe=function(){function e(t,r,n,i){t===void 0&&(t=0),r===void 0&&(r=0),n===void 0&&(n=0),i===void 0&&(i=0),this.x=Number(t),this.y=Number(r),this.width=Number(n),this.height=Number(i),this.type=vt.RECT}return Object.defineProperty(e.prototype,"left",{get:function(){return this.x},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"right",{get:function(){return this.x+this.width},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"top",{get:function(){return this.y},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"bottom",{get:function(){return this.y+this.height},enumerable:!1,configurable:!0}),Object.defineProperty(e,"EMPTY",{get:function(){return new e(0,0,0,0)},enumerable:!1,configurable:!0}),e.prototype.clone=function(){return new e(this.x,this.y,this.width,this.height)},e.prototype.copyFrom=function(t){return this.x=t.x,this.y=t.y,this.width=t.width,this.height=t.height,this},e.prototype.copyTo=function(t){return t.x=this.x,t.y=this.y,t.width=this.width,t.height=this.height,t},e.prototype.contains=function(t,r){return this.width<=0||this.height<=0?!1:t>=this.x&&t<this.x+this.width&&r>=this.y&&r<this.y+this.height},e.prototype.intersects=function(t,r){if(!r){var n=this.x<t.x?t.x:this.x,i=this.right>t.right?t.right:this.right;if(i<=n)return!1;var o=this.y<t.y?t.y:this.y,s=this.bottom>t.bottom?t.bottom:this.bottom;return s>o}var a=this.left,l=this.right,u=this.top,c=this.bottom;if(l<=a||c<=u)return!1;var f=dv[0].set(t.left,t.top),p=dv[1].set(t.left,t.bottom),v=dv[2].set(t.right,t.top),g=dv[3].set(t.right,t.bottom);if(v.x<=f.x||p.y<=f.y)return!1;var b=Math.sign(r.a*r.d-r.b*r.c);if(b===0||(r.apply(f,f),r.apply(p,p),r.apply(v,v),r.apply(g,g),Math.max(f.x,p.x,v.x,g.x)<=a||Math.min(f.x,p.x,v.x,g.x)>=l||Math.max(f.y,p.y,v.y,g.y)<=u||Math.min(f.y,p.y,v.y,g.y)>=c))return!1;var _=b*(p.y-f.y),w=b*(f.x-p.x),x=_*a+w*u,T=_*l+w*u,I=_*a+w*c,R=_*l+w*c;if(Math.max(x,T,I,R)<=_*f.x+w*f.y||Math.min(x,T,I,R)>=_*g.x+w*g.y)return!1;var E=b*(f.y-v.y),O=b*(v.x-f.x),P=E*a+O*u,N=E*l+O*u,A=E*a+O*c,j=E*l+O*c;return!(Math.max(P,N,A,j)<=E*f.x+O*f.y||Math.min(P,N,A,j)>=E*g.x+O*g.y)},e.prototype.pad=function(t,r){return t===void 0&&(t=0),r===void 0&&(r=t),this.x-=t,this.y-=r,this.width+=t*2,this.height+=r*2,this},e.prototype.fit=function(t){var r=Math.max(this.x,t.x),n=Math.min(this.x+this.width,t.x+t.width),i=Math.max(this.y,t.y),o=Math.min(this.y+this.height,t.y+t.height);return this.x=r,this.width=Math.max(n-r,0),this.y=i,this.height=Math.max(o-i,0),this},e.prototype.ceil=function(t,r){t===void 0&&(t=1),r===void 0&&(r=.001);var n=Math.ceil((this.x+this.width-r)*t)/t,i=Math.ceil((this.y+this.height-r)*t)/t;return this.x=Math.floor((this.x+r)*t)/t,this.y=Math.floor((this.y+r)*t)/t,this.width=n-this.x,this.height=i-this.y,this},e.prototype.enlarge=function(t){var r=Math.min(this.x,t.x),n=Math.max(this.x+this.width,t.x+t.width),i=Math.min(this.y,t.y),o=Math.max(this.y+this.height,t.y+t.height);return this.x=r,this.width=n-r,this.y=i,this.height=o-i,this},e.prototype.toString=function(){return"[@pixi/math:Rectangle x="+this.x+" y="+this.y+" width="+this.width+" height="+this.height+"]"},e}(),SO=function(){function e(t,r,n){t===void 0&&(t=0),r===void 0&&(r=0),n===void 0&&(n=0),this.x=t,this.y=r,this.radius=n,this.type=vt.CIRC}return e.prototype.clone=function(){return new e(this.x,this.y,this.radius)},e.prototype.contains=function(t,r){if(this.radius<=0)return!1;var n=this.radius*this.radius,i=this.x-t,o=this.y-r;return i*=i,o*=o,i+o<=n},e.prototype.getBounds=function(){return new Fe(this.x-this.radius,this.y-this.radius,this.radius*2,this.radius*2)},e.prototype.toString=function(){return"[@pixi/math:Circle x="+this.x+" y="+this.y+" radius="+this.radius+"]"},e}(),EO=function(){function e(t,r,n,i){t===void 0&&(t=0),r===void 0&&(r=0),n===void 0&&(n=0),i===void 0&&(i=0),this.x=t,this.y=r,this.width=n,this.height=i,this.type=vt.ELIP}return e.prototype.clone=function(){return new e(this.x,this.y,this.width,this.height)},e.prototype.contains=function(t,r){if(this.width<=0||this.height<=0)return!1;var n=(t-this.x)/this.width,i=(r-this.y)/this.height;return n*=n,i*=i,n+i<=1},e.prototype.getBounds=function(){return new Fe(this.x-this.width,this.y-this.height,this.width,this.height)},e.prototype.toString=function(){return"[@pixi/math:Ellipse x="+this.x+" y="+this.y+" width="+this.width+" height="+this.height+"]"},e}(),tu=function(){function e(){for(var t=arguments,r=[],n=0;n<arguments.length;n++)r[n]=t[n];var i=Array.isArray(r[0])?r[0]:r;if(typeof i[0]!="number"){for(var o=[],s=0,a=i.length;s<a;s++)o.push(i[s].x,i[s].y);i=o}this.points=i,this.type=vt.POLY,this.closeStroke=!0}return e.prototype.clone=function(){var t=this.points.slice(),r=new e(t);return r.closeStroke=this.closeStroke,r},e.prototype.contains=function(t,r){for(var n=!1,i=this.points.length/2,o=0,s=i-1;o<i;s=o++){var a=this.points[o*2],l=this.points[o*2+1],u=this.points[s*2],c=this.points[s*2+1],f=l>r!=c>r&&t<(u-a)*((r-l)/(c-l))+a;f&&(n=!n)}return n},e.prototype.toString=function(){return"[@pixi/math:Polygon"+("closeStroke="+this.closeStroke)+("points="+this.points.reduce(function(t,r){return t+", "+r},"")+"]")},e}(),CO=function(){function e(t,r,n,i,o){t===void 0&&(t=0),r===void 0&&(r=0),n===void 0&&(n=0),i===void 0&&(i=0),o===void 0&&(o=20),this.x=t,this.y=r,this.width=n,this.height=i,this.radius=o,this.type=vt.RREC}return e.prototype.clone=function(){return new e(this.x,this.y,this.width,this.height,this.radius)},e.prototype.contains=function(t,r){if(this.width<=0||this.height<=0)return!1;if(t>=this.x&&t<=this.x+this.width&&r>=this.y&&r<=this.y+this.height){var n=Math.max(0,Math.min(this.radius,Math.min(this.width,this.height)/2));if(r>=this.y+n&&r<=this.y+this.height-n||t>=this.x+n&&t<=this.x+this.width-n)return!0;var i=t-(this.x+n),o=r-(this.y+n),s=n*n;if(i*i+o*o<=s||(i=t-(this.x+this.width-n),i*i+o*o<=s)||(o=r-(this.y+this.height-n),i*i+o*o<=s)||(i=t-(this.x+n),i*i+o*o<=s))return!0}return!1},e.prototype.toString=function(){return"[@pixi/math:RoundedRectangle x="+this.x+" y="+this.y+("width="+this.width+" height="+this.height+" radius="+this.radius+"]")},e}(),Yl=function(){function e(t,r,n,i){n===void 0&&(n=0),i===void 0&&(i=0),this._x=n,this._y=i,this.cb=t,this.scope=r}return e.prototype.clone=function(t,r){return t===void 0&&(t=this.cb),r===void 0&&(r=this.scope),new e(t,r,this._x,this._y)},e.prototype.set=function(t,r){return t===void 0&&(t=0),r===void 0&&(r=t),(this._x!==t||this._y!==r)&&(this._x=t,this._y=r,this.cb.call(this.scope)),this},e.prototype.copyFrom=function(t){return(this._x!==t.x||this._y!==t.y)&&(this._x=t.x,this._y=t.y,this.cb.call(this.scope)),this},e.prototype.copyTo=function(t){return t.set(this._x,this._y),t},e.prototype.equals=function(t){return t.x===this._x&&t.y===this._y},e.prototype.toString=function(){return"[@pixi/math:ObservablePoint x="+0+" y="+0+" scope="+this.scope+"]"},Object.defineProperty(e.prototype,"x",{get:function(){return this._x},set:function(t){this._x!==t&&(this._x=t,this.cb.call(this.scope))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"y",{get:function(){return this._y},set:function(t){this._y!==t&&(this._y=t,this.cb.call(this.scope))},enumerable:!1,configurable:!0}),e}(),er=function(){function e(t,r,n,i,o,s){t===void 0&&(t=1),r===void 0&&(r=0),n===void 0&&(n=0),i===void 0&&(i=1),o===void 0&&(o=0),s===void 0&&(s=0),this.array=null,this.a=t,this.b=r,this.c=n,this.d=i,this.tx=o,this.ty=s}return e.prototype.fromArray=function(t){this.a=t[0],this.b=t[1],this.c=t[3],this.d=t[4],this.tx=t[2],this.ty=t[5]},e.prototype.set=function(t,r,n,i,o,s){return this.a=t,this.b=r,this.c=n,this.d=i,this.tx=o,this.ty=s,this},e.prototype.toArray=function(t,r){this.array||(this.array=new Float32Array(9));var n=r||this.array;return t?(n[0]=this.a,n[1]=this.b,n[2]=0,n[3]=this.c,n[4]=this.d,n[5]=0,n[6]=this.tx,n[7]=this.ty,n[8]=1):(n[0]=this.a,n[1]=this.c,n[2]=this.tx,n[3]=this.b,n[4]=this.d,n[5]=this.ty,n[6]=0,n[7]=0,n[8]=1),n},e.prototype.apply=function(t,r){r=r||new Gt;var n=t.x,i=t.y;return r.x=this.a*n+this.c*i+this.tx,r.y=this.b*n+this.d*i+this.ty,r},e.prototype.applyInverse=function(t,r){r=r||new Gt;var n=1/(this.a*this.d+this.c*-this.b),i=t.x,o=t.y;return r.x=this.d*n*i+-this.c*n*o+(this.ty*this.c-this.tx*this.d)*n,r.y=this.a*n*o+-this.b*n*i+(-this.ty*this.a+this.tx*this.b)*n,r},e.prototype.translate=function(t,r){return this.tx+=t,this.ty+=r,this},e.prototype.scale=function(t,r){return this.a*=t,this.d*=r,this.c*=t,this.b*=r,this.tx*=t,this.ty*=r,this},e.prototype.rotate=function(t){var r=Math.cos(t),n=Math.sin(t),i=this.a,o=this.c,s=this.tx;return this.a=i*r-this.b*n,this.b=i*n+this.b*r,this.c=o*r-this.d*n,this.d=o*n+this.d*r,this.tx=s*r-this.ty*n,this.ty=s*n+this.ty*r,this},e.prototype.append=function(t){var r=this.a,n=this.b,i=this.c,o=this.d;return this.a=t.a*r+t.b*i,this.b=t.a*n+t.b*o,this.c=t.c*r+t.d*i,this.d=t.c*n+t.d*o,this.tx=t.tx*r+t.ty*i+this.tx,this.ty=t.tx*n+t.ty*o+this.ty,this},e.prototype.setTransform=function(t,r,n,i,o,s,a,l,u){return this.a=Math.cos(a+u)*o,this.b=Math.sin(a+u)*o,this.c=-Math.sin(a-l)*s,this.d=Math.cos(a-l)*s,this.tx=t-(n*this.a+i*this.c),this.ty=r-(n*this.b+i*this.d),this},e.prototype.prepend=function(t){var r=this.tx;if(t.a!==1||t.b!==0||t.c!==0||t.d!==1){var n=this.a,i=this.c;this.a=n*t.a+this.b*t.c,this.b=n*t.b+this.b*t.d,this.c=i*t.a+this.d*t.c,this.d=i*t.b+this.d*t.d}return this.tx=r*t.a+this.ty*t.c+t.tx,this.ty=r*t.b+this.ty*t.d+t.ty,this},e.prototype.decompose=function(t){var r=this.a,n=this.b,i=this.c,o=this.d,s=t.pivot,a=-Math.atan2(-i,o),l=Math.atan2(n,r),u=Math.abs(a+l);return u<1e-5||Math.abs(ch-u)<1e-5?(t.rotation=l,t.skew.x=t.skew.y=0):(t.rotation=0,t.skew.x=a,t.skew.y=l),t.scale.x=Math.sqrt(r*r+n*n),t.scale.y=Math.sqrt(i*i+o*o),t.position.x=this.tx+(s.x*r+s.y*i),t.position.y=this.ty+(s.x*n+s.y*o),t},e.prototype.invert=function(){var t=this.a,r=this.b,n=this.c,i=this.d,o=this.tx,s=t*i-r*n;return this.a=i/s,this.b=-r/s,this.c=-n/s,this.d=t/s,this.tx=(n*this.ty-i*o)/s,this.ty=-(t*this.ty-r*o)/s,this},e.prototype.identity=function(){return this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this},e.prototype.clone=function(){var t=new e;return t.a=this.a,t.b=this.b,t.c=this.c,t.d=this.d,t.tx=this.tx,t.ty=this.ty,t},e.prototype.copyTo=function(t){return t.a=this.a,t.b=this.b,t.c=this.c,t.d=this.d,t.tx=this.tx,t.ty=this.ty,t},e.prototype.copyFrom=function(t){return this.a=t.a,this.b=t.b,this.c=t.c,this.d=t.d,this.tx=t.tx,this.ty=t.ty,this},e.prototype.toString=function(){return"[@pixi/math:Matrix a="+this.a+" b="+this.b+" c="+this.c+" d="+this.d+" tx="+this.tx+" ty="+this.ty+"]"},Object.defineProperty(e,"IDENTITY",{get:function(){return new e},enumerable:!1,configurable:!0}),Object.defineProperty(e,"TEMP_MATRIX",{get:function(){return new e},enumerable:!1,configurable:!0}),e}(),Ml=[1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1,0,1],Bl=[0,1,1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1],Dl=[0,-1,-1,-1,0,1,1,1,0,1,1,1,0,-1,-1,-1],Gl=[1,1,0,-1,-1,-1,0,1,-1,-1,0,1,1,1,0,-1],Nw=[],IO=[],pv=Math.sign;function BJ(){for(var e=0;e<16;e++){var t=[];Nw.push(t);for(var r=0;r<16;r++)for(var n=pv(Ml[e]*Ml[r]+Dl[e]*Bl[r]),i=pv(Bl[e]*Ml[r]+Gl[e]*Bl[r]),o=pv(Ml[e]*Dl[r]+Dl[e]*Gl[r]),s=pv(Bl[e]*Dl[r]+Gl[e]*Gl[r]),a=0;a<16;a++)if(Ml[a]===n&&Bl[a]===i&&Dl[a]===o&&Gl[a]===s){t.push(a);break}}for(var e=0;e<16;e++){var l=new er;l.set(Ml[e],Bl[e],Dl[e],Gl[e],0,0),IO.push(l)}}BJ();var mr={E:0,SE:1,S:2,SW:3,W:4,NW:5,N:6,NE:7,MIRROR_VERTICAL:8,MAIN_DIAGONAL:10,MIRROR_HORIZONTAL:12,REVERSE_DIAGONAL:14,uX:function(e){return Ml[e]},uY:function(e){return Bl[e]},vX:function(e){return Dl[e]},vY:function(e){return Gl[e]},inv:function(e){return e&8?e&15:-e&7},add:function(e,t){return Nw[e][t]},sub:function(e,t){return Nw[e][mr.inv(t)]},rotate180:function(e){return e^4},isVertical:function(e){return(e&3)===2},byDirection:function(e,t){return Math.abs(e)*2<=Math.abs(t)?t>=0?mr.S:mr.N:Math.abs(t)*2<=Math.abs(e)?e>0?mr.E:mr.W:t>0?e>0?mr.SE:mr.SW:e>0?mr.NE:mr.NW},matrixAppendRotationInv:function(e,t,r,n){r===void 0&&(r=0),n===void 0&&(n=0);var i=IO[mr.inv(t)];i.tx=r,i.ty=n,e.append(i)}},k4=function(){function e(){this.worldTransform=new er,this.localTransform=new er,this.position=new Yl(this.onChange,this,0,0),this.scale=new Yl(this.onChange,this,1,1),this.pivot=new Yl(this.onChange,this,0,0),this.skew=new Yl(this.updateSkew,this,0,0),this._rotation=0,this._cx=1,this._sx=0,this._cy=0,this._sy=1,this._localID=0,this._currentLocalID=0,this._worldID=0,this._parentID=0}return e.prototype.onChange=function(){this._localID++},e.prototype.updateSkew=function(){this._cx=Math.cos(this._rotation+this.skew.y),this._sx=Math.sin(this._rotation+this.skew.y),this._cy=-Math.sin(this._rotation-this.skew.x),this._sy=Math.cos(this._rotation-this.skew.x),this._localID++},e.prototype.toString=function(){return"[@pixi/math:Transform "+("position=("+this.position.x+", "+this.position.y+") ")+("rotation="+this.rotation+" ")+("scale=("+this.scale.x+", "+this.scale.y+") ")+("skew=("+this.skew.x+", "+this.skew.y+") ")+"]"},e.prototype.updateLocalTransform=function(){var t=this.localTransform;this._localID!==this._currentLocalID&&(t.a=this._cx*this.scale.x,t.b=this._sx*this.scale.x,t.c=this._cy*this.scale.y,t.d=this._sy*this.scale.y,t.tx=this.position.x-(this.pivot.x*t.a+this.pivot.y*t.c),t.ty=this.position.y-(this.pivot.x*t.b+this.pivot.y*t.d),this._currentLocalID=this._localID,this._parentID=-1)},e.prototype.updateTransform=function(t){var r=this.localTransform;if(this._localID!==this._currentLocalID&&(r.a=this._cx*this.scale.x,r.b=this._sx*this.scale.x,r.c=this._cy*this.scale.y,r.d=this._sy*this.scale.y,r.tx=this.position.x-(this.pivot.x*r.a+this.pivot.y*r.c),r.ty=this.position.y-(this.pivot.x*r.b+this.pivot.y*r.d),this._currentLocalID=this._localID,this._parentID=-1),this._parentID!==t._worldID){var n=t.worldTransform,i=this.worldTransform;i.a=r.a*n.a+r.b*n.c,i.b=r.a*n.b+r.b*n.d,i.c=r.c*n.a+r.d*n.c,i.d=r.c*n.b+r.d*n.d,i.tx=r.tx*n.a+r.ty*n.c+n.tx,i.ty=r.tx*n.b+r.ty*n.d+n.ty,this._parentID=t._worldID,this._worldID++}},e.prototype.setFromMatrix=function(t){t.decompose(this),this._localID++},Object.defineProperty(e.prototype,"rotation",{get:function(){return this._rotation},set:function(t){this._rotation!==t&&(this._rotation=t,this.updateSkew())},enumerable:!1,configurable:!0}),e.IDENTITY=new e,e}();/*!
 * @pixi/display - v6.4.2
 * Compiled Thu, 02 Jun 2022 15:39:26 UTC
 *
 * @pixi/display is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */We.SORTABLE_CHILDREN=!1;var vu=function(){function e(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0,this.rect=null,this.updateID=-1}return e.prototype.isEmpty=function(){return this.minX>this.maxX||this.minY>this.maxY},e.prototype.clear=function(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0},e.prototype.getRectangle=function(t){return this.minX>this.maxX||this.minY>this.maxY?Fe.EMPTY:(t=t||new Fe(0,0,1,1),t.x=this.minX,t.y=this.minY,t.width=this.maxX-this.minX,t.height=this.maxY-this.minY,t)},e.prototype.addPoint=function(t){this.minX=Math.min(this.minX,t.x),this.maxX=Math.max(this.maxX,t.x),this.minY=Math.min(this.minY,t.y),this.maxY=Math.max(this.maxY,t.y)},e.prototype.addPointMatrix=function(t,r){var n=t.a,i=t.b,o=t.c,s=t.d,a=t.tx,l=t.ty,u=n*r.x+o*r.y+a,c=i*r.x+s*r.y+l;this.minX=Math.min(this.minX,u),this.maxX=Math.max(this.maxX,u),this.minY=Math.min(this.minY,c),this.maxY=Math.max(this.maxY,c)},e.prototype.addQuad=function(t){var r=this.minX,n=this.minY,i=this.maxX,o=this.maxY,s=t[0],a=t[1];r=s<r?s:r,n=a<n?a:n,i=s>i?s:i,o=a>o?a:o,s=t[2],a=t[3],r=s<r?s:r,n=a<n?a:n,i=s>i?s:i,o=a>o?a:o,s=t[4],a=t[5],r=s<r?s:r,n=a<n?a:n,i=s>i?s:i,o=a>o?a:o,s=t[6],a=t[7],r=s<r?s:r,n=a<n?a:n,i=s>i?s:i,o=a>o?a:o,this.minX=r,this.minY=n,this.maxX=i,this.maxY=o},e.prototype.addFrame=function(t,r,n,i,o){this.addFrameMatrix(t.worldTransform,r,n,i,o)},e.prototype.addFrameMatrix=function(t,r,n,i,o){var s=t.a,a=t.b,l=t.c,u=t.d,c=t.tx,f=t.ty,p=this.minX,v=this.minY,g=this.maxX,b=this.maxY,_=s*r+l*n+c,w=a*r+u*n+f;p=_<p?_:p,v=w<v?w:v,g=_>g?_:g,b=w>b?w:b,_=s*i+l*n+c,w=a*i+u*n+f,p=_<p?_:p,v=w<v?w:v,g=_>g?_:g,b=w>b?w:b,_=s*r+l*o+c,w=a*r+u*o+f,p=_<p?_:p,v=w<v?w:v,g=_>g?_:g,b=w>b?w:b,_=s*i+l*o+c,w=a*i+u*o+f,p=_<p?_:p,v=w<v?w:v,g=_>g?_:g,b=w>b?w:b,this.minX=p,this.minY=v,this.maxX=g,this.maxY=b},e.prototype.addVertexData=function(t,r,n){for(var i=this.minX,o=this.minY,s=this.maxX,a=this.maxY,l=r;l<n;l+=2){var u=t[l],c=t[l+1];i=u<i?u:i,o=c<o?c:o,s=u>s?u:s,a=c>a?c:a}this.minX=i,this.minY=o,this.maxX=s,this.maxY=a},e.prototype.addVertices=function(t,r,n,i){this.addVerticesMatrix(t.worldTransform,r,n,i)},e.prototype.addVerticesMatrix=function(t,r,n,i,o,s){o===void 0&&(o=0),s===void 0&&(s=o);for(var a=t.a,l=t.b,u=t.c,c=t.d,f=t.tx,p=t.ty,v=this.minX,g=this.minY,b=this.maxX,_=this.maxY,w=n;w<i;w+=2){var x=r[w],T=r[w+1],I=a*x+u*T+f,R=c*T+l*x+p;v=Math.min(v,I-o),b=Math.max(b,I+o),g=Math.min(g,R-s),_=Math.max(_,R+s)}this.minX=v,this.minY=g,this.maxX=b,this.maxY=_},e.prototype.addBounds=function(t){var r=this.minX,n=this.minY,i=this.maxX,o=this.maxY;this.minX=t.minX<r?t.minX:r,this.minY=t.minY<n?t.minY:n,this.maxX=t.maxX>i?t.maxX:i,this.maxY=t.maxY>o?t.maxY:o},e.prototype.addBoundsMask=function(t,r){var n=t.minX>r.minX?t.minX:r.minX,i=t.minY>r.minY?t.minY:r.minY,o=t.maxX<r.maxX?t.maxX:r.maxX,s=t.maxY<r.maxY?t.maxY:r.maxY;if(n<=o&&i<=s){var a=this.minX,l=this.minY,u=this.maxX,c=this.maxY;this.minX=n<a?n:a,this.minY=i<l?i:l,this.maxX=o>u?o:u,this.maxY=s>c?s:c}},e.prototype.addBoundsMatrix=function(t,r){this.addFrameMatrix(r,t.minX,t.minY,t.maxX,t.maxY)},e.prototype.addBoundsArea=function(t,r){var n=t.minX>r.x?t.minX:r.x,i=t.minY>r.y?t.minY:r.y,o=t.maxX<r.x+r.width?t.maxX:r.x+r.width,s=t.maxY<r.y+r.height?t.maxY:r.y+r.height;if(n<=o&&i<=s){var a=this.minX,l=this.minY,u=this.maxX,c=this.maxY;this.minX=n<a?n:a,this.minY=i<l?i:l,this.maxX=o>u?o:u,this.maxY=s>c?s:c}},e.prototype.pad=function(t,r){t===void 0&&(t=0),r===void 0&&(r=t),this.isEmpty()||(this.minX-=t,this.maxX+=t,this.minY-=r,this.maxY+=r)},e.prototype.addFramePad=function(t,r,n,i,o,s){t-=o,r-=s,n+=o,i+=s,this.minX=this.minX<t?this.minX:t,this.maxX=this.maxX>n?this.maxX:n,this.minY=this.minY<r?this.minY:r,this.maxY=this.maxY>i?this.maxY:i},e}();/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var Pw=function(e,t){return Pw=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])},Pw(e,t)};function O4(e,t){Pw(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var Sr=function(e){O4(t,e);function t(){var r=e.call(this)||this;return r.tempDisplayObjectParent=null,r.transform=new k4,r.alpha=1,r.visible=!0,r.renderable=!0,r.cullable=!1,r.cullArea=null,r.parent=null,r.worldAlpha=1,r._lastSortedIndex=0,r._zIndex=0,r.filterArea=null,r.filters=null,r._enabledFilters=null,r._bounds=new vu,r._localBounds=null,r._boundsID=0,r._boundsRect=null,r._localBoundsRect=null,r._mask=null,r._maskRefCount=0,r._destroyed=!1,r.isSprite=!1,r.isMask=!1,r}return t.mixin=function(r){for(var n=Object.keys(r),i=0;i<n.length;++i){var o=n[i];Object.defineProperty(t.prototype,o,Object.getOwnPropertyDescriptor(r,o))}},Object.defineProperty(t.prototype,"destroyed",{get:function(){return this._destroyed},enumerable:!1,configurable:!0}),t.prototype._recursivePostUpdateTransform=function(){this.parent?(this.parent._recursivePostUpdateTransform(),this.transform.updateTransform(this.parent.transform)):this.transform.updateTransform(this._tempDisplayObjectParent.transform)},t.prototype.updateTransform=function(){this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha},t.prototype.getBounds=function(r,n){return r||(this.parent?(this._recursivePostUpdateTransform(),this.updateTransform()):(this.parent=this._tempDisplayObjectParent,this.updateTransform(),this.parent=null)),this._bounds.updateID!==this._boundsID&&(this.calculateBounds(),this._bounds.updateID=this._boundsID),n||(this._boundsRect||(this._boundsRect=new Fe),n=this._boundsRect),this._bounds.getRectangle(n)},t.prototype.getLocalBounds=function(r){r||(this._localBoundsRect||(this._localBoundsRect=new Fe),r=this._localBoundsRect),this._localBounds||(this._localBounds=new vu);var n=this.transform,i=this.parent;this.parent=null,this.transform=this._tempDisplayObjectParent.transform;var o=this._bounds,s=this._boundsID;this._bounds=this._localBounds;var a=this.getBounds(!1,r);return this.parent=i,this.transform=n,this._bounds=o,this._bounds.updateID+=this._boundsID-s,a},t.prototype.toGlobal=function(r,n,i){return i===void 0&&(i=!1),i||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.apply(r,n)},t.prototype.toLocal=function(r,n,i,o){return n&&(r=n.toGlobal(r,i,o)),o||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.applyInverse(r,i)},t.prototype.setParent=function(r){if(!r||!r.addChild)throw new Error("setParent: Argument must be a Container");return r.addChild(this),r},t.prototype.setTransform=function(r,n,i,o,s,a,l,u,c){return r===void 0&&(r=0),n===void 0&&(n=0),i===void 0&&(i=1),o===void 0&&(o=1),s===void 0&&(s=0),a===void 0&&(a=0),l===void 0&&(l=0),u===void 0&&(u=0),c===void 0&&(c=0),this.position.x=r,this.position.y=n,this.scale.x=i||1,this.scale.y=o||1,this.rotation=s,this.skew.x=a,this.skew.y=l,this.pivot.x=u,this.pivot.y=c,this},t.prototype.destroy=function(r){this.parent&&this.parent.removeChild(this),this._destroyed=!0,this.transform=null,this.parent=null,this._bounds=null,this.mask=null,this.cullArea=null,this.filters=null,this.filterArea=null,this.hitArea=null,this.interactive=!1,this.interactiveChildren=!1,this.emit("destroyed"),this.removeAllListeners()},Object.defineProperty(t.prototype,"_tempDisplayObjectParent",{get:function(){return this.tempDisplayObjectParent===null&&(this.tempDisplayObjectParent=new NO),this.tempDisplayObjectParent},enumerable:!1,configurable:!0}),t.prototype.enableTempParent=function(){var r=this.parent;return this.parent=this._tempDisplayObjectParent,r},t.prototype.disableTempParent=function(r){this.parent=r},Object.defineProperty(t.prototype,"x",{get:function(){return this.position.x},set:function(r){this.transform.position.x=r},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"y",{get:function(){return this.position.y},set:function(r){this.transform.position.y=r},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"worldTransform",{get:function(){return this.transform.worldTransform},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"localTransform",{get:function(){return this.transform.localTransform},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"position",{get:function(){return this.transform.position},set:function(r){this.transform.position.copyFrom(r)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"scale",{get:function(){return this.transform.scale},set:function(r){this.transform.scale.copyFrom(r)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"pivot",{get:function(){return this.transform.pivot},set:function(r){this.transform.pivot.copyFrom(r)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"skew",{get:function(){return this.transform.skew},set:function(r){this.transform.skew.copyFrom(r)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"rotation",{get:function(){return this.transform.rotation},set:function(r){this.transform.rotation=r},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"angle",{get:function(){return this.transform.rotation*xO},set:function(r){this.transform.rotation=r*TO},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"zIndex",{get:function(){return this._zIndex},set:function(r){this._zIndex=r,this.parent&&(this.parent.sortDirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"worldVisible",{get:function(){var r=this;do{if(!r.visible)return!1;r=r.parent}while(r);return!0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"mask",{get:function(){return this._mask},set:function(r){if(this._mask!==r){if(this._mask){var n=this._mask.maskObject||this._mask;n._maskRefCount--,n._maskRefCount===0&&(n.renderable=!0,n.isMask=!1)}if(this._mask=r,this._mask){var n=this._mask.maskObject||this._mask;n._maskRefCount===0&&(n.renderable=!1,n.isMask=!0),n._maskRefCount++}}},enumerable:!1,configurable:!0}),t}(Ah),NO=function(e){O4(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.sortDirty=null,r}return t}(Sr);Sr.prototype.displayObjectUpdateTransform=Sr.prototype.updateTransform;/*!
 * @pixi/constants - v6.4.2
 * Compiled Thu, 02 Jun 2022 15:39:26 UTC
 *
 * @pixi/constants is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var XC;(function(e){e[e.WEBGL_LEGACY=0]="WEBGL_LEGACY",e[e.WEBGL=1]="WEBGL",e[e.WEBGL2=2]="WEBGL2"})(XC||(XC={}));var WC;(function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.WEBGL=1]="WEBGL",e[e.CANVAS=2]="CANVAS"})(WC||(WC={}));var YC;(function(e){e[e.COLOR=16384]="COLOR",e[e.DEPTH=256]="DEPTH",e[e.STENCIL=1024]="STENCIL"})(YC||(YC={}));var KC;(function(e){e[e.NORMAL=0]="NORMAL",e[e.ADD=1]="ADD",e[e.MULTIPLY=2]="MULTIPLY",e[e.SCREEN=3]="SCREEN",e[e.OVERLAY=4]="OVERLAY",e[e.DARKEN=5]="DARKEN",e[e.LIGHTEN=6]="LIGHTEN",e[e.COLOR_DODGE=7]="COLOR_DODGE",e[e.COLOR_BURN=8]="COLOR_BURN",e[e.HARD_LIGHT=9]="HARD_LIGHT",e[e.SOFT_LIGHT=10]="SOFT_LIGHT",e[e.DIFFERENCE=11]="DIFFERENCE",e[e.EXCLUSION=12]="EXCLUSION",e[e.HUE=13]="HUE",e[e.SATURATION=14]="SATURATION",e[e.COLOR=15]="COLOR",e[e.LUMINOSITY=16]="LUMINOSITY",e[e.NORMAL_NPM=17]="NORMAL_NPM",e[e.ADD_NPM=18]="ADD_NPM",e[e.SCREEN_NPM=19]="SCREEN_NPM",e[e.NONE=20]="NONE",e[e.SRC_OVER=0]="SRC_OVER",e[e.SRC_IN=21]="SRC_IN",e[e.SRC_OUT=22]="SRC_OUT",e[e.SRC_ATOP=23]="SRC_ATOP",e[e.DST_OVER=24]="DST_OVER",e[e.DST_IN=25]="DST_IN",e[e.DST_OUT=26]="DST_OUT",e[e.DST_ATOP=27]="DST_ATOP",e[e.ERASE=26]="ERASE",e[e.SUBTRACT=28]="SUBTRACT",e[e.XOR=29]="XOR"})(KC||(KC={}));var qC;(function(e){e[e.POINTS=0]="POINTS",e[e.LINES=1]="LINES",e[e.LINE_LOOP=2]="LINE_LOOP",e[e.LINE_STRIP=3]="LINE_STRIP",e[e.TRIANGLES=4]="TRIANGLES",e[e.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",e[e.TRIANGLE_FAN=6]="TRIANGLE_FAN"})(qC||(qC={}));var ZC;(function(e){e[e.RGBA=6408]="RGBA",e[e.RGB=6407]="RGB",e[e.RG=33319]="RG",e[e.RED=6403]="RED",e[e.RGBA_INTEGER=36249]="RGBA_INTEGER",e[e.RGB_INTEGER=36248]="RGB_INTEGER",e[e.RG_INTEGER=33320]="RG_INTEGER",e[e.RED_INTEGER=36244]="RED_INTEGER",e[e.ALPHA=6406]="ALPHA",e[e.LUMINANCE=6409]="LUMINANCE",e[e.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",e[e.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",e[e.DEPTH_STENCIL=34041]="DEPTH_STENCIL"})(ZC||(ZC={}));var JC;(function(e){e[e.TEXTURE_2D=3553]="TEXTURE_2D",e[e.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",e[e.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",e[e.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",e[e.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",e[e.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",e[e.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",e[e.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",e[e.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z"})(JC||(JC={}));var QC;(function(e){e[e.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",e[e.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",e[e.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",e[e.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",e[e.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",e[e.UNSIGNED_INT=5125]="UNSIGNED_INT",e[e.UNSIGNED_INT_10F_11F_11F_REV=35899]="UNSIGNED_INT_10F_11F_11F_REV",e[e.UNSIGNED_INT_2_10_10_10_REV=33640]="UNSIGNED_INT_2_10_10_10_REV",e[e.UNSIGNED_INT_24_8=34042]="UNSIGNED_INT_24_8",e[e.UNSIGNED_INT_5_9_9_9_REV=35902]="UNSIGNED_INT_5_9_9_9_REV",e[e.BYTE=5120]="BYTE",e[e.SHORT=5122]="SHORT",e[e.INT=5124]="INT",e[e.FLOAT=5126]="FLOAT",e[e.FLOAT_32_UNSIGNED_INT_24_8_REV=36269]="FLOAT_32_UNSIGNED_INT_24_8_REV",e[e.HALF_FLOAT=36193]="HALF_FLOAT"})(QC||(QC={}));var e6;(function(e){e[e.FLOAT=0]="FLOAT",e[e.INT=1]="INT",e[e.UINT=2]="UINT"})(e6||(e6={}));var t6;(function(e){e[e.NEAREST=0]="NEAREST",e[e.LINEAR=1]="LINEAR"})(t6||(t6={}));var r6;(function(e){e[e.CLAMP=33071]="CLAMP",e[e.REPEAT=10497]="REPEAT",e[e.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT"})(r6||(r6={}));var n6;(function(e){e[e.OFF=0]="OFF",e[e.POW2=1]="POW2",e[e.ON=2]="ON",e[e.ON_MANUAL=3]="ON_MANUAL"})(n6||(n6={}));var i6;(function(e){e[e.NPM=0]="NPM",e[e.UNPACK=1]="UNPACK",e[e.PMA=2]="PMA",e[e.NO_PREMULTIPLIED_ALPHA=0]="NO_PREMULTIPLIED_ALPHA",e[e.PREMULTIPLY_ON_UPLOAD=1]="PREMULTIPLY_ON_UPLOAD",e[e.PREMULTIPLY_ALPHA=2]="PREMULTIPLY_ALPHA",e[e.PREMULTIPLIED_ALPHA=2]="PREMULTIPLIED_ALPHA"})(i6||(i6={}));var o6;(function(e){e[e.NO=0]="NO",e[e.YES=1]="YES",e[e.AUTO=2]="AUTO",e[e.BLEND=0]="BLEND",e[e.CLEAR=1]="CLEAR",e[e.BLIT=2]="BLIT"})(o6||(o6={}));var s6;(function(e){e[e.AUTO=0]="AUTO",e[e.MANUAL=1]="MANUAL"})(s6||(s6={}));var a6;(function(e){e.LOW="lowp",e.MEDIUM="mediump",e.HIGH="highp"})(a6||(a6={}));var Aw;(function(e){e[e.NONE=0]="NONE",e[e.SCISSOR=1]="SCISSOR",e[e.STENCIL=2]="STENCIL",e[e.SPRITE=3]="SPRITE"})(Aw||(Aw={}));var l6;(function(e){e[e.NONE=0]="NONE",e[e.LOW=2]="LOW",e[e.MEDIUM=4]="MEDIUM",e[e.HIGH=8]="HIGH"})(l6||(l6={}));var u6;(function(e){e[e.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",e[e.ARRAY_BUFFER=34962]="ARRAY_BUFFER",e[e.UNIFORM_BUFFER=35345]="UNIFORM_BUFFER"})(u6||(u6={}));function DJ(e,t){return e.zIndex===t.zIndex?e._lastSortedIndex-t._lastSortedIndex:e.zIndex-t.zIndex}var Pi=function(e){O4(t,e);function t(){var r=e.call(this)||this;return r.children=[],r.sortableChildren=We.SORTABLE_CHILDREN,r.sortDirty=!1,r}return t.prototype.onChildrenChange=function(r){},t.prototype.addChild=function(){for(var r=arguments,n=[],i=0;i<arguments.length;i++)n[i]=r[i];if(n.length>1)for(var o=0;o<n.length;o++)this.addChild(n[o]);else{var s=n[0];s.parent&&s.parent.removeChild(s),s.parent=this,this.sortDirty=!0,s.transform._parentID=-1,this.children.push(s),this._boundsID++,this.onChildrenChange(this.children.length-1),this.emit("childAdded",s,this,this.children.length-1),s.emit("added",this)}return n[0]},t.prototype.addChildAt=function(r,n){if(n<0||n>this.children.length)throw new Error(r+"addChildAt: The index "+n+" supplied is out of bounds "+this.children.length);return r.parent&&r.parent.removeChild(r),r.parent=this,this.sortDirty=!0,r.transform._parentID=-1,this.children.splice(n,0,r),this._boundsID++,this.onChildrenChange(n),r.emit("added",this),this.emit("childAdded",r,this,n),r},t.prototype.swapChildren=function(r,n){if(r!==n){var i=this.getChildIndex(r),o=this.getChildIndex(n);this.children[i]=n,this.children[o]=r,this.onChildrenChange(i<o?i:o)}},t.prototype.getChildIndex=function(r){var n=this.children.indexOf(r);if(n===-1)throw new Error("The supplied DisplayObject must be a child of the caller");return n},t.prototype.setChildIndex=function(r,n){if(n<0||n>=this.children.length)throw new Error("The index "+n+" supplied is out of bounds "+this.children.length);var i=this.getChildIndex(r);zs(this.children,i,1),this.children.splice(n,0,r),this.onChildrenChange(n)},t.prototype.getChildAt=function(r){if(r<0||r>=this.children.length)throw new Error("getChildAt: Index ("+r+") does not exist.");return this.children[r]},t.prototype.removeChild=function(){for(var r=arguments,n=[],i=0;i<arguments.length;i++)n[i]=r[i];if(n.length>1)for(var o=0;o<n.length;o++)this.removeChild(n[o]);else{var s=n[0],a=this.children.indexOf(s);if(a===-1)return null;s.parent=null,s.transform._parentID=-1,zs(this.children,a,1),this._boundsID++,this.onChildrenChange(a),s.emit("removed",this),this.emit("childRemoved",s,this,a)}return n[0]},t.prototype.removeChildAt=function(r){var n=this.getChildAt(r);return n.parent=null,n.transform._parentID=-1,zs(this.children,r,1),this._boundsID++,this.onChildrenChange(r),n.emit("removed",this),this.emit("childRemoved",n,this,r),n},t.prototype.removeChildren=function(r,n){r===void 0&&(r=0),n===void 0&&(n=this.children.length);var i=r,o=n,s=o-i,a;if(s>0&&s<=o){a=this.children.splice(i,s);for(var l=0;l<a.length;++l)a[l].parent=null,a[l].transform&&(a[l].transform._parentID=-1);this._boundsID++,this.onChildrenChange(r);for(var l=0;l<a.length;++l)a[l].emit("removed",this),this.emit("childRemoved",a[l],this,l);return a}else if(s===0&&this.children.length===0)return[];throw new RangeError("removeChildren: numeric values are outside the acceptable range.")},t.prototype.sortChildren=function(){for(var r=!1,n=0,i=this.children.length;n<i;++n){var o=this.children[n];o._lastSortedIndex=n,!r&&o.zIndex!==0&&(r=!0)}r&&this.children.length>1&&this.children.sort(DJ),this.sortDirty=!1},t.prototype.updateTransform=function(){this.sortableChildren&&this.sortDirty&&this.sortChildren(),this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha;for(var r=0,n=this.children.length;r<n;++r){var i=this.children[r];i.visible&&i.updateTransform()}},t.prototype.calculateBounds=function(){this._bounds.clear(),this._calculateBounds();for(var r=0;r<this.children.length;r++){var n=this.children[r];if(!(!n.visible||!n.renderable))if(n.calculateBounds(),n._mask){var i=n._mask.maskObject||n._mask;i.calculateBounds(),this._bounds.addBoundsMask(n._bounds,i._bounds)}else n.filterArea?this._bounds.addBoundsArea(n._bounds,n.filterArea):this._bounds.addBounds(n._bounds)}this._bounds.updateID=this._boundsID},t.prototype.getLocalBounds=function(r,n){n===void 0&&(n=!1);var i=e.prototype.getLocalBounds.call(this,r);if(!n)for(var o=0,s=this.children.length;o<s;++o){var a=this.children[o];a.visible&&a.updateTransform()}return i},t.prototype._calculateBounds=function(){},t.prototype._renderWithCulling=function(r){var n=r.renderTexture.sourceFrame;if(n.width>0&&n.height>0){var i,o;if(this.cullArea?(i=this.cullArea,o=this.worldTransform):this._render!==t.prototype._render&&(i=this.getBounds(!0)),i&&n.intersects(i,o))this._render(r);else if(this.cullArea)return;for(var s=0,a=this.children.length;s<a;++s){var l=this.children[s],u=l.cullable;l.cullable=u||!this.cullArea,l.render(r),l.cullable=u}}},t.prototype.render=function(r){if(!(!this.visible||this.worldAlpha<=0||!this.renderable))if(this._mask||this.filters&&this.filters.length)this.renderAdvanced(r);else if(this.cullable)this._renderWithCulling(r);else{this._render(r);for(var n=0,i=this.children.length;n<i;++n)this.children[n].render(r)}},t.prototype.renderAdvanced=function(r){var n=this.filters,i=this._mask;if(n){this._enabledFilters||(this._enabledFilters=[]),this._enabledFilters.length=0;for(var o=0;o<n.length;o++)n[o].enabled&&this._enabledFilters.push(n[o])}var s=n&&this._enabledFilters&&this._enabledFilters.length||i&&(!i.isMaskData||i.enabled&&(i.autoDetect||i.type!==Aw.NONE));if(s&&r.batch.flush(),n&&this._enabledFilters&&this._enabledFilters.length&&r.filter.push(this,this._enabledFilters),i&&r.mask.push(this,this._mask),this.cullable)this._renderWithCulling(r);else{this._render(r);for(var o=0,a=this.children.length;o<a;++o)this.children[o].render(r)}s&&r.batch.flush(),i&&r.mask.pop(this),n&&this._enabledFilters&&this._enabledFilters.length&&r.filter.pop()},t.prototype._render=function(r){},t.prototype.destroy=function(r){e.prototype.destroy.call(this),this.sortDirty=!1;var n=typeof r=="boolean"?r:r&&r.children,i=this.removeChildren(0,this.children.length);if(n)for(var o=0;o<i.length;++o)i[o].destroy(r)},Object.defineProperty(t.prototype,"width",{get:function(){return this.scale.x*this.getLocalBounds().width},set:function(r){var n=this.getLocalBounds().width;n!==0?this.scale.x=r/n:this.scale.x=1,this._width=r},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this.scale.y*this.getLocalBounds().height},set:function(r){var n=this.getLocalBounds().height;n!==0?this.scale.y=r/n:this.scale.y=1,this._height=r},enumerable:!1,configurable:!0}),t}(Sr);Pi.prototype.containerUpdateTransform=Pi.prototype.updateTransform;/*!
 * @pixi/accessibility - v6.4.2
 * Compiled Thu, 02 Jun 2022 15:39:26 UTC
 *
 * @pixi/accessibility is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var GJ={accessible:!1,accessibleTitle:null,accessibleHint:null,tabIndex:0,_accessibleActive:!1,_accessibleDiv:null,accessibleType:"button",accessiblePointerEvents:"auto",accessibleChildren:!0,renderId:-1};Sr.mixin(GJ);var jJ=9,mv=100,$J=0,HJ=0,c6=2,h6=1,zJ=-1e3,VJ=-1e3,XJ=2,WJ=function(){function e(t){this.debug=!1,this._isActive=!1,this._isMobileAccessibility=!1,this.pool=[],this.renderId=0,this.children=[],this.androidUpdateCount=0,this.androidUpdateFrequency=500,this._hookDiv=null,(Vo.tablet||Vo.phone)&&this.createTouchHook();var r=document.createElement("div");r.style.width=mv+"px",r.style.height=mv+"px",r.style.position="absolute",r.style.top=$J+"px",r.style.left=HJ+"px",r.style.zIndex=c6.toString(),this.div=r,this.renderer=t,this._onKeyDown=this._onKeyDown.bind(this),this._onMouseMove=this._onMouseMove.bind(this),globalThis.addEventListener("keydown",this._onKeyDown,!1)}return Object.defineProperty(e.prototype,"isActive",{get:function(){return this._isActive},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isMobileAccessibility",{get:function(){return this._isMobileAccessibility},enumerable:!1,configurable:!0}),e.prototype.createTouchHook=function(){var t=this,r=document.createElement("button");r.style.width=h6+"px",r.style.height=h6+"px",r.style.position="absolute",r.style.top=zJ+"px",r.style.left=VJ+"px",r.style.zIndex=XJ.toString(),r.style.backgroundColor="#FF0000",r.title="select to enable accessibility for this content",r.addEventListener("focus",function(){t._isMobileAccessibility=!0,t.activate(),t.destroyTouchHook()}),document.body.appendChild(r),this._hookDiv=r},e.prototype.destroyTouchHook=function(){!this._hookDiv||(document.body.removeChild(this._hookDiv),this._hookDiv=null)},e.prototype.activate=function(){var t;this._isActive||(this._isActive=!0,globalThis.document.addEventListener("mousemove",this._onMouseMove,!0),globalThis.removeEventListener("keydown",this._onKeyDown,!1),this.renderer.on("postrender",this.update,this),(t=this.renderer.view.parentNode)===null||t===void 0||t.appendChild(this.div))},e.prototype.deactivate=function(){var t;!this._isActive||this._isMobileAccessibility||(this._isActive=!1,globalThis.document.removeEventListener("mousemove",this._onMouseMove,!0),globalThis.addEventListener("keydown",this._onKeyDown,!1),this.renderer.off("postrender",this.update),(t=this.div.parentNode)===null||t===void 0||t.removeChild(this.div))},e.prototype.updateAccessibleObjects=function(t){if(!(!t.visible||!t.accessibleChildren)){t.accessible&&t.interactive&&(t._accessibleActive||this.addChild(t),t.renderId=this.renderId);var r=t.children;if(r)for(var n=0;n<r.length;n++)this.updateAccessibleObjects(r[n])}},e.prototype.update=function(){var t=performance.now();if(!(Vo.android.device&&t<this.androidUpdateCount)&&(this.androidUpdateCount=t+this.androidUpdateFrequency,!!this.renderer.renderingToScreen)){this.renderer._lastObjectRendered&&this.updateAccessibleObjects(this.renderer._lastObjectRendered);var r=this.renderer.view.getBoundingClientRect(),n=r.left,i=r.top,o=r.width,s=r.height,a=this.renderer,l=a.width,u=a.height,c=a.resolution,f=o/l*c,p=s/u*c,v=this.div;v.style.left=n+"px",v.style.top=i+"px",v.style.width=l+"px",v.style.height=u+"px";for(var g=0;g<this.children.length;g++){var b=this.children[g];if(b.renderId!==this.renderId)b._accessibleActive=!1,zs(this.children,g,1),this.div.removeChild(b._accessibleDiv),this.pool.push(b._accessibleDiv),b._accessibleDiv=null,g--;else{v=b._accessibleDiv;var _=b.hitArea,w=b.worldTransform;b.hitArea?(v.style.left=(w.tx+_.x*w.a)*f+"px",v.style.top=(w.ty+_.y*w.d)*p+"px",v.style.width=_.width*w.a*f+"px",v.style.height=_.height*w.d*p+"px"):(_=b.getBounds(),this.capHitArea(_),v.style.left=_.x*f+"px",v.style.top=_.y*p+"px",v.style.width=_.width*f+"px",v.style.height=_.height*p+"px",v.title!==b.accessibleTitle&&b.accessibleTitle!==null&&(v.title=b.accessibleTitle),v.getAttribute("aria-label")!==b.accessibleHint&&b.accessibleHint!==null&&v.setAttribute("aria-label",b.accessibleHint)),(b.accessibleTitle!==v.title||b.tabIndex!==v.tabIndex)&&(v.title=b.accessibleTitle,v.tabIndex=b.tabIndex,this.debug&&this.updateDebugHTML(v))}}this.renderId++}},e.prototype.updateDebugHTML=function(t){t.innerHTML="type: "+t.type+"</br> title : "+t.title+"</br> tabIndex: "+t.tabIndex},e.prototype.capHitArea=function(t){t.x<0&&(t.width+=t.x,t.x=0),t.y<0&&(t.height+=t.y,t.y=0);var r=this.renderer,n=r.width,i=r.height;t.x+t.width>n&&(t.width=n-t.x),t.y+t.height>i&&(t.height=i-t.y)},e.prototype.addChild=function(t){var r=this.pool.pop();r||(r=document.createElement("button"),r.style.width=mv+"px",r.style.height=mv+"px",r.style.backgroundColor=this.debug?"rgba(255,255,255,0.5)":"transparent",r.style.position="absolute",r.style.zIndex=c6.toString(),r.style.borderStyle="none",navigator.userAgent.toLowerCase().indexOf("chrome")>-1?r.setAttribute("aria-live","off"):r.setAttribute("aria-live","polite"),navigator.userAgent.match(/rv:.*Gecko\//)?r.setAttribute("aria-relevant","additions"):r.setAttribute("aria-relevant","text"),r.addEventListener("click",this._onClick.bind(this)),r.addEventListener("focus",this._onFocus.bind(this)),r.addEventListener("focusout",this._onFocusOut.bind(this))),r.style.pointerEvents=t.accessiblePointerEvents,r.type=t.accessibleType,t.accessibleTitle&&t.accessibleTitle!==null?r.title=t.accessibleTitle:(!t.accessibleHint||t.accessibleHint===null)&&(r.title="displayObject "+t.tabIndex),t.accessibleHint&&t.accessibleHint!==null&&r.setAttribute("aria-label",t.accessibleHint),this.debug&&this.updateDebugHTML(r),t._accessibleActive=!0,t._accessibleDiv=r,r.displayObject=t,this.children.push(t),this.div.appendChild(t._accessibleDiv),t._accessibleDiv.tabIndex=t.tabIndex},e.prototype._onClick=function(t){var r=this.renderer.plugins.interaction,n=t.target.displayObject,i=r.eventData;r.dispatchEvent(n,"click",i),r.dispatchEvent(n,"pointertap",i),r.dispatchEvent(n,"tap",i)},e.prototype._onFocus=function(t){t.target.getAttribute("aria-live")||t.target.setAttribute("aria-live","assertive");var r=this.renderer.plugins.interaction,n=t.target.displayObject,i=r.eventData;r.dispatchEvent(n,"mouseover",i)},e.prototype._onFocusOut=function(t){t.target.getAttribute("aria-live")||t.target.setAttribute("aria-live","polite");var r=this.renderer.plugins.interaction,n=t.target.displayObject,i=r.eventData;r.dispatchEvent(n,"mouseout",i)},e.prototype._onKeyDown=function(t){t.keyCode===jJ&&this.activate()},e.prototype._onMouseMove=function(t){t.movementX===0&&t.movementY===0||this.deactivate()},e.prototype.destroy=function(){this.destroyTouchHook(),this.div=null,globalThis.document.removeEventListener("mousemove",this._onMouseMove,!0),globalThis.removeEventListener("keydown",this._onKeyDown),this.pool=null,this.children=null,this.renderer=null},e}();/*!
 * @pixi/ticker - v6.4.2
 * Compiled Thu, 02 Jun 2022 15:39:26 UTC
 *
 * @pixi/ticker is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */We.TARGET_FPMS=.06;var qs;(function(e){e[e.INTERACTION=50]="INTERACTION",e[e.HIGH=25]="HIGH",e[e.NORMAL=0]="NORMAL",e[e.LOW=-25]="LOW",e[e.UTILITY=-50]="UTILITY"})(qs||(qs={}));var t_=function(){function e(t,r,n,i){r===void 0&&(r=null),n===void 0&&(n=0),i===void 0&&(i=!1),this.next=null,this.previous=null,this._destroyed=!1,this.fn=t,this.context=r,this.priority=n,this.once=i}return e.prototype.match=function(t,r){return r===void 0&&(r=null),this.fn===t&&this.context===r},e.prototype.emit=function(t){this.fn&&(this.context?this.fn.call(this.context,t):this.fn(t));var r=this.next;return this.once&&this.destroy(!0),this._destroyed&&(this.next=null),r},e.prototype.connect=function(t){this.previous=t,t.next&&(t.next.previous=this),this.next=t.next,t.next=this},e.prototype.destroy=function(t){t===void 0&&(t=!1),this._destroyed=!0,this.fn=null,this.context=null,this.previous&&(this.previous.next=this.next),this.next&&(this.next.previous=this.previous);var r=this.next;return this.next=t?null:r,this.previous=null,r},e}(),on=function(){function e(){var t=this;this.autoStart=!1,this.deltaTime=1,this.lastTime=-1,this.speed=1,this.started=!1,this._requestId=null,this._maxElapsedMS=100,this._minElapsedMS=0,this._protected=!1,this._lastFrame=-1,this._head=new t_(null,null,1/0),this.deltaMS=1/We.TARGET_FPMS,this.elapsedMS=1/We.TARGET_FPMS,this._tick=function(r){t._requestId=null,t.started&&(t.update(r),t.started&&t._requestId===null&&t._head.next&&(t._requestId=requestAnimationFrame(t._tick)))}}return e.prototype._requestIfNeeded=function(){this._requestId===null&&this._head.next&&(this.lastTime=performance.now(),this._lastFrame=this.lastTime,this._requestId=requestAnimationFrame(this._tick))},e.prototype._cancelIfNeeded=function(){this._requestId!==null&&(cancelAnimationFrame(this._requestId),this._requestId=null)},e.prototype._startIfPossible=function(){this.started?this._requestIfNeeded():this.autoStart&&this.start()},e.prototype.add=function(t,r,n){return n===void 0&&(n=qs.NORMAL),this._addListener(new t_(t,r,n))},e.prototype.addOnce=function(t,r,n){return n===void 0&&(n=qs.NORMAL),this._addListener(new t_(t,r,n,!0))},e.prototype._addListener=function(t){var r=this._head.next,n=this._head;if(!r)t.connect(n);else{for(;r;){if(t.priority>r.priority){t.connect(n);break}n=r,r=r.next}t.previous||t.connect(n)}return this._startIfPossible(),this},e.prototype.remove=function(t,r){for(var n=this._head.next;n;)n.match(t,r)?n=n.destroy():n=n.next;return this._head.next||this._cancelIfNeeded(),this},Object.defineProperty(e.prototype,"count",{get:function(){if(!this._head)return 0;for(var t=0,r=this._head;r=r.next;)t++;return t},enumerable:!1,configurable:!0}),e.prototype.start=function(){this.started||(this.started=!0,this._requestIfNeeded())},e.prototype.stop=function(){this.started&&(this.started=!1,this._cancelIfNeeded())},e.prototype.destroy=function(){if(!this._protected){this.stop();for(var t=this._head.next;t;)t=t.destroy(!0);this._head.destroy(),this._head=null}},e.prototype.update=function(t){t===void 0&&(t=performance.now());var r;if(t>this.lastTime){if(r=this.elapsedMS=t-this.lastTime,r>this._maxElapsedMS&&(r=this._maxElapsedMS),r*=this.speed,this._minElapsedMS){var n=t-this._lastFrame|0;if(n<this._minElapsedMS)return;this._lastFrame=t-n%this._minElapsedMS}this.deltaMS=r,this.deltaTime=this.deltaMS*We.TARGET_FPMS;for(var i=this._head,o=i.next;o;)o=o.emit(this.deltaTime);i.next||this._cancelIfNeeded()}else this.deltaTime=this.deltaMS=this.elapsedMS=0;this.lastTime=t},Object.defineProperty(e.prototype,"FPS",{get:function(){return 1e3/this.elapsedMS},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"minFPS",{get:function(){return 1e3/this._maxElapsedMS},set:function(t){var r=Math.min(this.maxFPS,t),n=Math.min(Math.max(0,r)/1e3,We.TARGET_FPMS);this._maxElapsedMS=1/n},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"maxFPS",{get:function(){return this._minElapsedMS?Math.round(1e3/this._minElapsedMS):0},set:function(t){if(t===0)this._minElapsedMS=0;else{var r=Math.max(this.minFPS,t);this._minElapsedMS=1/(r/1e3)}},enumerable:!1,configurable:!0}),Object.defineProperty(e,"shared",{get:function(){if(!e._shared){var t=e._shared=new e;t.autoStart=!0,t._protected=!0}return e._shared},enumerable:!1,configurable:!0}),Object.defineProperty(e,"system",{get:function(){if(!e._system){var t=e._system=new e;t.autoStart=!0,t._protected=!0}return e._system},enumerable:!1,configurable:!0}),e}(),YJ=function(){function e(){}return e.init=function(t){var r=this;t=Object.assign({autoStart:!0,sharedTicker:!1},t),Object.defineProperty(this,"ticker",{set:function(n){this._ticker&&this._ticker.remove(this.render,this),this._ticker=n,n&&n.add(this.render,this,qs.LOW)},get:function(){return this._ticker}}),this.stop=function(){r._ticker.stop()},this.start=function(){r._ticker.start()},this._ticker=null,this.ticker=t.sharedTicker?on.shared:new on,t.autoStart&&this.start()},e.destroy=function(){if(this._ticker){var t=this._ticker;this.ticker=null,t.destroy()}},e}();/*!
 * @pixi/interaction - v6.4.2
 * Compiled Thu, 02 Jun 2022 15:39:26 UTC
 *
 * @pixi/interaction is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var f6=function(){function e(){this.pressure=0,this.rotationAngle=0,this.twist=0,this.tangentialPressure=0,this.global=new Gt,this.target=null,this.originalEvent=null,this.identifier=null,this.isPrimary=!1,this.button=0,this.buttons=0,this.width=0,this.height=0,this.tiltX=0,this.tiltY=0,this.pointerType=null,this.pressure=0,this.rotationAngle=0,this.twist=0,this.tangentialPressure=0}return Object.defineProperty(e.prototype,"pointerId",{get:function(){return this.identifier},enumerable:!1,configurable:!0}),e.prototype.getLocalPosition=function(t,r,n){return t.worldTransform.applyInverse(n||this.global,r)},e.prototype.copyEvent=function(t){"isPrimary"in t&&t.isPrimary&&(this.isPrimary=!0),this.button="button"in t&&t.button;var r="buttons"in t&&t.buttons;this.buttons=Number.isInteger(r)?r:"which"in t&&t.which,this.width="width"in t&&t.width,this.height="height"in t&&t.height,this.tiltX="tiltX"in t&&t.tiltX,this.tiltY="tiltY"in t&&t.tiltY,this.pointerType="pointerType"in t&&t.pointerType,this.pressure="pressure"in t&&t.pressure,this.rotationAngle="rotationAngle"in t&&t.rotationAngle,this.twist="twist"in t&&t.twist||0,this.tangentialPressure="tangentialPressure"in t&&t.tangentialPressure||0},e.prototype.reset=function(){this.isPrimary=!1},e}();/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var Rw=function(e,t){return Rw=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])},Rw(e,t)};function KJ(e,t){Rw(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var qJ=function(){function e(){this.stopped=!1,this.stopsPropagatingAt=null,this.stopPropagationHint=!1,this.target=null,this.currentTarget=null,this.type=null,this.data=null}return e.prototype.stopPropagation=function(){this.stopped=!0,this.stopPropagationHint=!0,this.stopsPropagatingAt=this.currentTarget},e.prototype.reset=function(){this.stopped=!1,this.stopsPropagatingAt=null,this.stopPropagationHint=!1,this.currentTarget=null,this.target=null},e}(),r_=function(){function e(t){this._pointerId=t,this._flags=e.FLAGS.NONE}return e.prototype._doSet=function(t,r){r?this._flags=this._flags|t:this._flags=this._flags&~t},Object.defineProperty(e.prototype,"pointerId",{get:function(){return this._pointerId},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"flags",{get:function(){return this._flags},set:function(t){this._flags=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"none",{get:function(){return this._flags===e.FLAGS.NONE},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"over",{get:function(){return(this._flags&e.FLAGS.OVER)!==0},set:function(t){this._doSet(e.FLAGS.OVER,t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"rightDown",{get:function(){return(this._flags&e.FLAGS.RIGHT_DOWN)!==0},set:function(t){this._doSet(e.FLAGS.RIGHT_DOWN,t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"leftDown",{get:function(){return(this._flags&e.FLAGS.LEFT_DOWN)!==0},set:function(t){this._doSet(e.FLAGS.LEFT_DOWN,t)},enumerable:!1,configurable:!0}),e.FLAGS=Object.freeze({NONE:0,OVER:1<<0,LEFT_DOWN:1<<1,RIGHT_DOWN:1<<2}),e}(),ZJ=function(){function e(){this._tempPoint=new Gt}return e.prototype.recursiveFindHit=function(t,r,n,i,o){if(!r||!r.visible)return!1;var s=t.data.global;o=r.interactive||o;var a=!1,l=o,u=!0;if(r.hitArea?(i&&(r.worldTransform.applyInverse(s,this._tempPoint),r.hitArea.contains(this._tempPoint.x,this._tempPoint.y)?a=!0:(i=!1,u=!1)),l=!1):r._mask&&i&&(r._mask.containsPoint&&r._mask.containsPoint(s)||(i=!1)),u&&r.interactiveChildren&&r.children)for(var c=r.children,f=c.length-1;f>=0;f--){var p=c[f],v=this.recursiveFindHit(t,p,n,i,l);if(v){if(!p.parent)continue;l=!1,v&&(t.target&&(i=!1),a=!0)}}return o&&(i&&!t.target&&!r.hitArea&&r.containsPoint&&r.containsPoint(s)&&(a=!0),r.interactive&&(a&&!t.target&&(t.target=r),n&&n(t,r,!!a))),a},e.prototype.findHit=function(t,r,n,i){this.recursiveFindHit(t,r,n,i,!1)},e}(),JJ={interactive:!1,interactiveChildren:!0,hitArea:null,get buttonMode(){return this.cursor==="pointer"},set buttonMode(e){e?this.cursor="pointer":this.cursor==="pointer"&&(this.cursor=null)},cursor:null,get trackedPointers(){return this._trackedPointers===void 0&&(this._trackedPointers={}),this._trackedPointers},_trackedPointers:void 0};Sr.mixin(JJ);var vv=1,gv={target:null,data:{global:null}},QJ=function(e){KJ(t,e);function t(r,n){var i=e.call(this)||this;return n=n||{},i.renderer=r,i.autoPreventDefault=n.autoPreventDefault!==void 0?n.autoPreventDefault:!0,i.interactionFrequency=n.interactionFrequency||10,i.mouse=new f6,i.mouse.identifier=vv,i.mouse.global.set(-999999),i.activeInteractionData={},i.activeInteractionData[vv]=i.mouse,i.interactionDataPool=[],i.eventData=new qJ,i.interactionDOMElement=null,i.moveWhenInside=!1,i.eventsAdded=!1,i.tickerAdded=!1,i.mouseOverRenderer=!("PointerEvent"in globalThis),i.supportsTouchEvents="ontouchstart"in globalThis,i.supportsPointerEvents=!!globalThis.PointerEvent,i.onPointerUp=i.onPointerUp.bind(i),i.processPointerUp=i.processPointerUp.bind(i),i.onPointerCancel=i.onPointerCancel.bind(i),i.processPointerCancel=i.processPointerCancel.bind(i),i.onPointerDown=i.onPointerDown.bind(i),i.processPointerDown=i.processPointerDown.bind(i),i.onPointerMove=i.onPointerMove.bind(i),i.processPointerMove=i.processPointerMove.bind(i),i.onPointerOut=i.onPointerOut.bind(i),i.processPointerOverOut=i.processPointerOverOut.bind(i),i.onPointerOver=i.onPointerOver.bind(i),i.cursorStyles={default:"inherit",pointer:"pointer"},i.currentCursorMode=null,i.cursor=null,i.resolution=1,i.delayedEvents=[],i.search=new ZJ,i._tempDisplayObject=new NO,i._eventListenerOptions={capture:!0,passive:!1},i._useSystemTicker=n.useSystemTicker!==void 0?n.useSystemTicker:!0,i.setTargetElement(i.renderer.view,i.renderer.resolution),i}return Object.defineProperty(t.prototype,"useSystemTicker",{get:function(){return this._useSystemTicker},set:function(r){this._useSystemTicker=r,r?this.addTickerListener():this.removeTickerListener()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"lastObjectRendered",{get:function(){return this.renderer._lastObjectRendered||this._tempDisplayObject},enumerable:!1,configurable:!0}),t.prototype.hitTest=function(r,n){return gv.target=null,gv.data.global=r,n||(n=this.lastObjectRendered),this.processInteractive(gv,n,null,!0),gv.target},t.prototype.setTargetElement=function(r,n){n===void 0&&(n=1),this.removeTickerListener(),this.removeEvents(),this.interactionDOMElement=r,this.resolution=n,this.addEvents(),this.addTickerListener()},t.prototype.addTickerListener=function(){this.tickerAdded||!this.interactionDOMElement||!this._useSystemTicker||(on.system.add(this.tickerUpdate,this,qs.INTERACTION),this.tickerAdded=!0)},t.prototype.removeTickerListener=function(){!this.tickerAdded||(on.system.remove(this.tickerUpdate,this),this.tickerAdded=!1)},t.prototype.addEvents=function(){if(!(this.eventsAdded||!this.interactionDOMElement)){var r=this.interactionDOMElement.style;globalThis.navigator.msPointerEnabled?(r.msContentZooming="none",r.msTouchAction="none"):this.supportsPointerEvents&&(r.touchAction="none"),this.supportsPointerEvents?(globalThis.document.addEventListener("pointermove",this.onPointerMove,this._eventListenerOptions),this.interactionDOMElement.addEventListener("pointerdown",this.onPointerDown,this._eventListenerOptions),this.interactionDOMElement.addEventListener("pointerleave",this.onPointerOut,this._eventListenerOptions),this.interactionDOMElement.addEventListener("pointerover",this.onPointerOver,this._eventListenerOptions),globalThis.addEventListener("pointercancel",this.onPointerCancel,this._eventListenerOptions),globalThis.addEventListener("pointerup",this.onPointerUp,this._eventListenerOptions)):(globalThis.document.addEventListener("mousemove",this.onPointerMove,this._eventListenerOptions),this.interactionDOMElement.addEventListener("mousedown",this.onPointerDown,this._eventListenerOptions),this.interactionDOMElement.addEventListener("mouseout",this.onPointerOut,this._eventListenerOptions),this.interactionDOMElement.addEventListener("mouseover",this.onPointerOver,this._eventListenerOptions),globalThis.addEventListener("mouseup",this.onPointerUp,this._eventListenerOptions)),this.supportsTouchEvents&&(this.interactionDOMElement.addEventListener("touchstart",this.onPointerDown,this._eventListenerOptions),this.interactionDOMElement.addEventListener("touchcancel",this.onPointerCancel,this._eventListenerOptions),this.interactionDOMElement.addEventListener("touchend",this.onPointerUp,this._eventListenerOptions),this.interactionDOMElement.addEventListener("touchmove",this.onPointerMove,this._eventListenerOptions)),this.eventsAdded=!0}},t.prototype.removeEvents=function(){if(!(!this.eventsAdded||!this.interactionDOMElement)){var r=this.interactionDOMElement.style;globalThis.navigator.msPointerEnabled?(r.msContentZooming="",r.msTouchAction=""):this.supportsPointerEvents&&(r.touchAction=""),this.supportsPointerEvents?(globalThis.document.removeEventListener("pointermove",this.onPointerMove,this._eventListenerOptions),this.interactionDOMElement.removeEventListener("pointerdown",this.onPointerDown,this._eventListenerOptions),this.interactionDOMElement.removeEventListener("pointerleave",this.onPointerOut,this._eventListenerOptions),this.interactionDOMElement.removeEventListener("pointerover",this.onPointerOver,this._eventListenerOptions),globalThis.removeEventListener("pointercancel",this.onPointerCancel,this._eventListenerOptions),globalThis.removeEventListener("pointerup",this.onPointerUp,this._eventListenerOptions)):(globalThis.document.removeEventListener("mousemove",this.onPointerMove,this._eventListenerOptions),this.interactionDOMElement.removeEventListener("mousedown",this.onPointerDown,this._eventListenerOptions),this.interactionDOMElement.removeEventListener("mouseout",this.onPointerOut,this._eventListenerOptions),this.interactionDOMElement.removeEventListener("mouseover",this.onPointerOver,this._eventListenerOptions),globalThis.removeEventListener("mouseup",this.onPointerUp,this._eventListenerOptions)),this.supportsTouchEvents&&(this.interactionDOMElement.removeEventListener("touchstart",this.onPointerDown,this._eventListenerOptions),this.interactionDOMElement.removeEventListener("touchcancel",this.onPointerCancel,this._eventListenerOptions),this.interactionDOMElement.removeEventListener("touchend",this.onPointerUp,this._eventListenerOptions),this.interactionDOMElement.removeEventListener("touchmove",this.onPointerMove,this._eventListenerOptions)),this.interactionDOMElement=null,this.eventsAdded=!1}},t.prototype.tickerUpdate=function(r){this._deltaTime+=r,!(this._deltaTime<this.interactionFrequency)&&(this._deltaTime=0,this.update())},t.prototype.update=function(){if(!!this.interactionDOMElement){if(this._didMove){this._didMove=!1;return}this.cursor=null;for(var r in this.activeInteractionData)if(this.activeInteractionData.hasOwnProperty(r)){var n=this.activeInteractionData[r];if(n.originalEvent&&n.pointerType!=="touch"){var i=this.configureInteractionEventForDOMEvent(this.eventData,n.originalEvent,n);this.processInteractive(i,this.lastObjectRendered,this.processPointerOverOut,!0)}}this.setCursorMode(this.cursor)}},t.prototype.setCursorMode=function(r){r=r||"default";var n=!0;if(globalThis.OffscreenCanvas&&this.interactionDOMElement instanceof OffscreenCanvas&&(n=!1),this.currentCursorMode!==r){this.currentCursorMode=r;var i=this.cursorStyles[r];if(i)switch(typeof i){case"string":n&&(this.interactionDOMElement.style.cursor=i);break;case"function":i(r);break;case"object":n&&Object.assign(this.interactionDOMElement.style,i);break}else n&&typeof r=="string"&&!Object.prototype.hasOwnProperty.call(this.cursorStyles,r)&&(this.interactionDOMElement.style.cursor=r)}},t.prototype.dispatchEvent=function(r,n,i){(!i.stopPropagationHint||r===i.stopsPropagatingAt)&&(i.currentTarget=r,i.type=n,r.emit(n,i),r[n]&&r[n](i))},t.prototype.delayDispatchEvent=function(r,n,i){this.delayedEvents.push({displayObject:r,eventString:n,eventData:i})},t.prototype.mapPositionToPoint=function(r,n,i){var o;this.interactionDOMElement.parentElement?o=this.interactionDOMElement.getBoundingClientRect():o={x:0,y:0,width:this.interactionDOMElement.width,height:this.interactionDOMElement.height,left:0,top:0};var s=1/this.resolution;r.x=(n-o.left)*(this.interactionDOMElement.width/o.width)*s,r.y=(i-o.top)*(this.interactionDOMElement.height/o.height)*s},t.prototype.processInteractive=function(r,n,i,o){var s=this.search.findHit(r,n,i,o),a=this.delayedEvents;if(!a.length)return s;r.stopPropagationHint=!1;var l=a.length;this.delayedEvents=[];for(var u=0;u<l;u++){var c=a[u],f=c.displayObject,p=c.eventString,v=c.eventData;v.stopsPropagatingAt===f&&(v.stopPropagationHint=!0),this.dispatchEvent(f,p,v)}return s},t.prototype.onPointerDown=function(r){if(!(this.supportsTouchEvents&&r.pointerType==="touch")){var n=this.normalizeToPointerData(r);if(this.autoPreventDefault&&n[0].isNormalized){var i=r.cancelable||!("cancelable"in r);i&&r.preventDefault()}for(var o=n.length,s=0;s<o;s++){var a=n[s],l=this.getInteractionDataForPointerId(a),u=this.configureInteractionEventForDOMEvent(this.eventData,a,l);if(u.data.originalEvent=r,this.processInteractive(u,this.lastObjectRendered,this.processPointerDown,!0),this.emit("pointerdown",u),a.pointerType==="touch")this.emit("touchstart",u);else if(a.pointerType==="mouse"||a.pointerType==="pen"){var c=a.button===2;this.emit(c?"rightdown":"mousedown",this.eventData)}}}},t.prototype.processPointerDown=function(r,n,i){var o=r.data,s=r.data.identifier;if(i){if(n.trackedPointers[s]||(n.trackedPointers[s]=new r_(s)),this.dispatchEvent(n,"pointerdown",r),o.pointerType==="touch")this.dispatchEvent(n,"touchstart",r);else if(o.pointerType==="mouse"||o.pointerType==="pen"){var a=o.button===2;a?n.trackedPointers[s].rightDown=!0:n.trackedPointers[s].leftDown=!0,this.dispatchEvent(n,a?"rightdown":"mousedown",r)}}},t.prototype.onPointerComplete=function(r,n,i){for(var o=this.normalizeToPointerData(r),s=o.length,a=r.target!==this.interactionDOMElement?"outside":"",l=0;l<s;l++){var u=o[l],c=this.getInteractionDataForPointerId(u),f=this.configureInteractionEventForDOMEvent(this.eventData,u,c);if(f.data.originalEvent=r,this.processInteractive(f,this.lastObjectRendered,i,n||!a),this.emit(n?"pointercancel":"pointerup"+a,f),u.pointerType==="mouse"||u.pointerType==="pen"){var p=u.button===2;this.emit(p?"rightup"+a:"mouseup"+a,f)}else u.pointerType==="touch"&&(this.emit(n?"touchcancel":"touchend"+a,f),this.releaseInteractionDataForPointerId(u.pointerId))}},t.prototype.onPointerCancel=function(r){this.supportsTouchEvents&&r.pointerType==="touch"||this.onPointerComplete(r,!0,this.processPointerCancel)},t.prototype.processPointerCancel=function(r,n){var i=r.data,o=r.data.identifier;n.trackedPointers[o]!==void 0&&(delete n.trackedPointers[o],this.dispatchEvent(n,"pointercancel",r),i.pointerType==="touch"&&this.dispatchEvent(n,"touchcancel",r))},t.prototype.onPointerUp=function(r){this.supportsTouchEvents&&r.pointerType==="touch"||this.onPointerComplete(r,!1,this.processPointerUp)},t.prototype.processPointerUp=function(r,n,i){var o=r.data,s=r.data.identifier,a=n.trackedPointers[s],l=o.pointerType==="touch",u=o.pointerType==="mouse"||o.pointerType==="pen",c=!1;if(u){var f=o.button===2,p=r_.FLAGS,v=f?p.RIGHT_DOWN:p.LEFT_DOWN,g=a!==void 0&&a.flags&v;i?(this.dispatchEvent(n,f?"rightup":"mouseup",r),g&&(this.dispatchEvent(n,f?"rightclick":"click",r),c=!0)):g&&this.dispatchEvent(n,f?"rightupoutside":"mouseupoutside",r),a&&(f?a.rightDown=!1:a.leftDown=!1)}i?(this.dispatchEvent(n,"pointerup",r),l&&this.dispatchEvent(n,"touchend",r),a&&((!u||c)&&this.dispatchEvent(n,"pointertap",r),l&&(this.dispatchEvent(n,"tap",r),a.over=!1))):a&&(this.dispatchEvent(n,"pointerupoutside",r),l&&this.dispatchEvent(n,"touchendoutside",r)),a&&a.none&&delete n.trackedPointers[s]},t.prototype.onPointerMove=function(r){if(!(this.supportsTouchEvents&&r.pointerType==="touch")){var n=this.normalizeToPointerData(r);(n[0].pointerType==="mouse"||n[0].pointerType==="pen")&&(this._didMove=!0,this.cursor=null);for(var i=n.length,o=0;o<i;o++){var s=n[o],a=this.getInteractionDataForPointerId(s),l=this.configureInteractionEventForDOMEvent(this.eventData,s,a);l.data.originalEvent=r,this.processInteractive(l,this.lastObjectRendered,this.processPointerMove,!0),this.emit("pointermove",l),s.pointerType==="touch"&&this.emit("touchmove",l),(s.pointerType==="mouse"||s.pointerType==="pen")&&this.emit("mousemove",l)}n[0].pointerType==="mouse"&&this.setCursorMode(this.cursor)}},t.prototype.processPointerMove=function(r,n,i){var o=r.data,s=o.pointerType==="touch",a=o.pointerType==="mouse"||o.pointerType==="pen";a&&this.processPointerOverOut(r,n,i),(!this.moveWhenInside||i)&&(this.dispatchEvent(n,"pointermove",r),s&&this.dispatchEvent(n,"touchmove",r),a&&this.dispatchEvent(n,"mousemove",r))},t.prototype.onPointerOut=function(r){if(!(this.supportsTouchEvents&&r.pointerType==="touch")){var n=this.normalizeToPointerData(r),i=n[0];i.pointerType==="mouse"&&(this.mouseOverRenderer=!1,this.setCursorMode(null));var o=this.getInteractionDataForPointerId(i),s=this.configureInteractionEventForDOMEvent(this.eventData,i,o);s.data.originalEvent=i,this.processInteractive(s,this.lastObjectRendered,this.processPointerOverOut,!1),this.emit("pointerout",s),i.pointerType==="mouse"||i.pointerType==="pen"?this.emit("mouseout",s):this.releaseInteractionDataForPointerId(o.identifier)}},t.prototype.processPointerOverOut=function(r,n,i){var o=r.data,s=r.data.identifier,a=o.pointerType==="mouse"||o.pointerType==="pen",l=n.trackedPointers[s];i&&!l&&(l=n.trackedPointers[s]=new r_(s)),l!==void 0&&(i&&this.mouseOverRenderer?(l.over||(l.over=!0,this.delayDispatchEvent(n,"pointerover",r),a&&this.delayDispatchEvent(n,"mouseover",r)),a&&this.cursor===null&&(this.cursor=n.cursor)):l.over&&(l.over=!1,this.dispatchEvent(n,"pointerout",this.eventData),a&&this.dispatchEvent(n,"mouseout",r),l.none&&delete n.trackedPointers[s]))},t.prototype.onPointerOver=function(r){var n=this.normalizeToPointerData(r),i=n[0],o=this.getInteractionDataForPointerId(i),s=this.configureInteractionEventForDOMEvent(this.eventData,i,o);s.data.originalEvent=i,i.pointerType==="mouse"&&(this.mouseOverRenderer=!0),this.emit("pointerover",s),(i.pointerType==="mouse"||i.pointerType==="pen")&&this.emit("mouseover",s)},t.prototype.getInteractionDataForPointerId=function(r){var n=r.pointerId,i;return n===vv||r.pointerType==="mouse"?i=this.mouse:this.activeInteractionData[n]?i=this.activeInteractionData[n]:(i=this.interactionDataPool.pop()||new f6,i.identifier=n,this.activeInteractionData[n]=i),i.copyEvent(r),i},t.prototype.releaseInteractionDataForPointerId=function(r){var n=this.activeInteractionData[r];n&&(delete this.activeInteractionData[r],n.reset(),this.interactionDataPool.push(n))},t.prototype.configureInteractionEventForDOMEvent=function(r,n,i){return r.data=i,this.mapPositionToPoint(i.global,n.clientX,n.clientY),n.pointerType==="touch"&&(n.globalX=i.global.x,n.globalY=i.global.y),i.originalEvent=n,r.reset(),r},t.prototype.normalizeToPointerData=function(r){var n=[];if(this.supportsTouchEvents&&r instanceof TouchEvent)for(var i=0,o=r.changedTouches.length;i<o;i++){var s=r.changedTouches[i];typeof s.button>"u"&&(s.button=r.touches.length?1:0),typeof s.buttons>"u"&&(s.buttons=r.touches.length?1:0),typeof s.isPrimary>"u"&&(s.isPrimary=r.touches.length===1&&r.type==="touchstart"),typeof s.width>"u"&&(s.width=s.radiusX||1),typeof s.height>"u"&&(s.height=s.radiusY||1),typeof s.tiltX>"u"&&(s.tiltX=0),typeof s.tiltY>"u"&&(s.tiltY=0),typeof s.pointerType>"u"&&(s.pointerType="touch"),typeof s.pointerId>"u"&&(s.pointerId=s.identifier||0),typeof s.pressure>"u"&&(s.pressure=s.force||.5),typeof s.twist>"u"&&(s.twist=0),typeof s.tangentialPressure>"u"&&(s.tangentialPressure=0),typeof s.layerX>"u"&&(s.layerX=s.offsetX=s.clientX),typeof s.layerY>"u"&&(s.layerY=s.offsetY=s.clientY),s.isNormalized=!0,n.push(s)}else if(!globalThis.MouseEvent||r instanceof MouseEvent&&(!this.supportsPointerEvents||!(r instanceof globalThis.PointerEvent))){var a=r;typeof a.isPrimary>"u"&&(a.isPrimary=!0),typeof a.width>"u"&&(a.width=1),typeof a.height>"u"&&(a.height=1),typeof a.tiltX>"u"&&(a.tiltX=0),typeof a.tiltY>"u"&&(a.tiltY=0),typeof a.pointerType>"u"&&(a.pointerType="mouse"),typeof a.pointerId>"u"&&(a.pointerId=vv),typeof a.pressure>"u"&&(a.pressure=.5),typeof a.twist>"u"&&(a.twist=0),typeof a.tangentialPressure>"u"&&(a.tangentialPressure=0),a.isNormalized=!0,n.push(a)}else n.push(r);return n},t.prototype.destroy=function(){this.removeEvents(),this.removeTickerListener(),this.removeAllListeners(),this.renderer=null,this.mouse=null,this.eventData=null,this.interactionDOMElement=null,this.onPointerDown=null,this.processPointerDown=null,this.onPointerUp=null,this.processPointerUp=null,this.onPointerCancel=null,this.processPointerCancel=null,this.onPointerMove=null,this.processPointerMove=null,this.onPointerOut=null,this.processPointerOverOut=null,this.onPointerOver=null,this.search=null},t}(Ah);/*!
 * @pixi/runner - v6.4.2
 * Compiled Thu, 02 Jun 2022 15:39:26 UTC
 *
 * @pixi/runner is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var Ln=function(){function e(t){this.items=[],this._name=t,this._aliasCount=0}return e.prototype.emit=function(t,r,n,i,o,s,a,l){if(arguments.length>8)throw new Error("max arguments reached");var u=this,c=u.name,f=u.items;this._aliasCount++;for(var p=0,v=f.length;p<v;p++)f[p][c](t,r,n,i,o,s,a,l);return f===this.items&&this._aliasCount--,this},e.prototype.ensureNonAliasedItems=function(){this._aliasCount>0&&this.items.length>1&&(this._aliasCount=0,this.items=this.items.slice(0))},e.prototype.add=function(t){return t[this._name]&&(this.ensureNonAliasedItems(),this.remove(t),this.items.push(t)),this},e.prototype.remove=function(t){var r=this.items.indexOf(t);return r!==-1&&(this.ensureNonAliasedItems(),this.items.splice(r,1)),this},e.prototype.contains=function(t){return this.items.indexOf(t)!==-1},e.prototype.removeAll=function(){return this.ensureNonAliasedItems(),this.items.length=0,this},e.prototype.destroy=function(){this.removeAll(),this.items=null,this._name=null},Object.defineProperty(e.prototype,"empty",{get:function(){return this.items.length===0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"name",{get:function(){return this._name},enumerable:!1,configurable:!0}),e}();Object.defineProperties(Ln.prototype,{dispatch:{value:Ln.prototype.emit},run:{value:Ln.prototype.emit}});/*!
 * @pixi/core - v6.4.2
 * Compiled Thu, 02 Jun 2022 15:39:26 UTC
 *
 * @pixi/core is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */We.PREFER_ENV=Vo.any?Ys.WEBGL:Ys.WEBGL2;We.STRICT_TEXTURE_CACHE=!1;var kw=[];function PO(e,t){if(!e)return null;var r="";if(typeof e=="string"){var n=/\.(\w{3,4})(?:$|\?|#)/i.exec(e);n&&(r=n[1].toLowerCase())}for(var i=kw.length-1;i>=0;--i){var o=kw[i];if(o.test&&o.test(e,r))return new o(e,t)}throw new Error("Unrecognized source type to auto-detect Resource")}/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var Ow=function(e,t){return Ow=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])},Ow(e,t)};function tr(e,t){Ow(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var Lw=function(){return Lw=Object.assign||function(t){for(var r=arguments,n,i=1,o=arguments.length;i<o;i++){n=r[i];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(t[s]=n[s])}return t},Lw.apply(this,arguments)};function eQ(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&(r[n[i]]=e[n[i]]);return r}var Jd=function(){function e(t,r){t===void 0&&(t=0),r===void 0&&(r=0),this._width=t,this._height=r,this.destroyed=!1,this.internal=!1,this.onResize=new Ln("setRealSize"),this.onUpdate=new Ln("update"),this.onError=new Ln("onError")}return e.prototype.bind=function(t){this.onResize.add(t),this.onUpdate.add(t),this.onError.add(t),(this._width||this._height)&&this.onResize.emit(this._width,this._height)},e.prototype.unbind=function(t){this.onResize.remove(t),this.onUpdate.remove(t),this.onError.remove(t)},e.prototype.resize=function(t,r){(t!==this._width||r!==this._height)&&(this._width=t,this._height=r,this.onResize.emit(t,r))},Object.defineProperty(e.prototype,"valid",{get:function(){return!!this._width&&!!this._height},enumerable:!1,configurable:!0}),e.prototype.update=function(){this.destroyed||this.onUpdate.emit()},e.prototype.load=function(){return Promise.resolve(this)},Object.defineProperty(e.prototype,"width",{get:function(){return this._width},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this._height},enumerable:!1,configurable:!0}),e.prototype.style=function(t,r,n){return!1},e.prototype.dispose=function(){},e.prototype.destroy=function(){this.destroyed||(this.destroyed=!0,this.dispose(),this.onError.removeAll(),this.onError=null,this.onResize.removeAll(),this.onResize=null,this.onUpdate.removeAll(),this.onUpdate=null)},e.test=function(t,r){return!1},e}(),Mp=function(e){tr(t,e);function t(r,n){var i=this,o=n||{},s=o.width,a=o.height;if(!s||!a)throw new Error("BufferResource width or height invalid");return i=e.call(this,s,a)||this,i.data=r,i}return t.prototype.upload=function(r,n,i){var o=r.gl;o.pixelStorei(o.UNPACK_PREMULTIPLY_ALPHA_WEBGL,n.alphaMode===To.UNPACK);var s=n.realWidth,a=n.realHeight;return i.width===s&&i.height===a?o.texSubImage2D(n.target,0,0,0,s,a,n.format,i.type,this.data):(i.width=s,i.height=a,o.texImage2D(n.target,0,i.internalFormat,s,a,0,n.format,i.type,this.data)),!0},t.prototype.dispose=function(){this.data=null},t.test=function(r){return r instanceof Float32Array||r instanceof Uint8Array||r instanceof Uint32Array},t}(Jd),tQ={scaleMode:Tt.NEAREST,format:Se.RGBA,alphaMode:To.NPM},wt=function(e){tr(t,e);function t(r,n){r===void 0&&(r=null),n===void 0&&(n=null);var i=e.call(this)||this;n=n||{};var o=n.alphaMode,s=n.mipmap,a=n.anisotropicLevel,l=n.scaleMode,u=n.width,c=n.height,f=n.wrapMode,p=n.format,v=n.type,g=n.target,b=n.resolution,_=n.resourceOptions;return r&&!(r instanceof Jd)&&(r=PO(r,_),r.internal=!0),i.resolution=b||We.RESOLUTION,i.width=Math.round((u||0)*i.resolution)/i.resolution,i.height=Math.round((c||0)*i.resolution)/i.resolution,i._mipmap=s!==void 0?s:We.MIPMAP_TEXTURES,i.anisotropicLevel=a!==void 0?a:We.ANISOTROPIC_LEVEL,i._wrapMode=f||We.WRAP_MODE,i._scaleMode=l!==void 0?l:We.SCALE_MODE,i.format=p||Se.RGBA,i.type=v||$e.UNSIGNED_BYTE,i.target=g||eu.TEXTURE_2D,i.alphaMode=o!==void 0?o:To.UNPACK,i.uid=mu(),i.touched=0,i.isPowerOfTwo=!1,i._refreshPOT(),i._glTextures={},i.dirtyId=0,i.dirtyStyleId=0,i.cacheId=null,i.valid=u>0&&c>0,i.textureCacheIds=[],i.destroyed=!1,i.resource=null,i._batchEnabled=0,i._batchLocation=0,i.parentTextureArray=null,i.setResource(r),i}return Object.defineProperty(t.prototype,"realWidth",{get:function(){return Math.round(this.width*this.resolution)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"realHeight",{get:function(){return Math.round(this.height*this.resolution)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"mipmap",{get:function(){return this._mipmap},set:function(r){this._mipmap!==r&&(this._mipmap=r,this.dirtyStyleId++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"scaleMode",{get:function(){return this._scaleMode},set:function(r){this._scaleMode!==r&&(this._scaleMode=r,this.dirtyStyleId++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"wrapMode",{get:function(){return this._wrapMode},set:function(r){this._wrapMode!==r&&(this._wrapMode=r,this.dirtyStyleId++)},enumerable:!1,configurable:!0}),t.prototype.setStyle=function(r,n){var i;return r!==void 0&&r!==this.scaleMode&&(this.scaleMode=r,i=!0),n!==void 0&&n!==this.mipmap&&(this.mipmap=n,i=!0),i&&this.dirtyStyleId++,this},t.prototype.setSize=function(r,n,i){return i=i||this.resolution,this.setRealSize(r*i,n*i,i)},t.prototype.setRealSize=function(r,n,i){return this.resolution=i||this.resolution,this.width=Math.round(r)/this.resolution,this.height=Math.round(n)/this.resolution,this._refreshPOT(),this.update(),this},t.prototype._refreshPOT=function(){this.isPowerOfTwo=jC(this.realWidth)&&jC(this.realHeight)},t.prototype.setResolution=function(r){var n=this.resolution;return n===r?this:(this.resolution=r,this.valid&&(this.width=Math.round(this.width*n)/r,this.height=Math.round(this.height*n)/r,this.emit("update",this)),this._refreshPOT(),this)},t.prototype.setResource=function(r){if(this.resource===r)return this;if(this.resource)throw new Error("Resource can be set only once");return r.bind(this),this.resource=r,this},t.prototype.update=function(){this.valid?(this.dirtyId++,this.dirtyStyleId++,this.emit("update",this)):this.width>0&&this.height>0&&(this.valid=!0,this.emit("loaded",this),this.emit("update",this))},t.prototype.onError=function(r){this.emit("error",this,r)},t.prototype.destroy=function(){this.resource&&(this.resource.unbind(this),this.resource.internal&&this.resource.destroy(),this.resource=null),this.cacheId&&(delete kl[this.cacheId],delete Cs[this.cacheId],this.cacheId=null),this.dispose(),t.removeFromCache(this),this.textureCacheIds=null,this.destroyed=!0},t.prototype.dispose=function(){this.emit("dispose",this)},t.prototype.castToBaseTexture=function(){return this},t.from=function(r,n,i){i===void 0&&(i=We.STRICT_TEXTURE_CACHE);var o=typeof r=="string",s=null;if(o)s=r;else{if(!r._pixiId){var a=n&&n.pixiIdPrefix||"pixiid";r._pixiId=a+"_"+mu()}s=r._pixiId}var l=kl[s];if(o&&i&&!l)throw new Error('The cacheId "'+s+'" does not exist in BaseTextureCache.');return l||(l=new t(r,n),l.cacheId=s,t.addToCache(l,s)),l},t.fromBuffer=function(r,n,i,o){r=r||new Float32Array(n*i*4);var s=new Mp(r,{width:n,height:i}),a=r instanceof Float32Array?$e.FLOAT:$e.UNSIGNED_BYTE;return new t(s,Object.assign(tQ,o||{width:n,height:i,type:a}))},t.addToCache=function(r,n){n&&(r.textureCacheIds.indexOf(n)===-1&&r.textureCacheIds.push(n),kl[n]&&console.warn("BaseTexture added to the cache with an id ["+n+"] that already had an entry"),kl[n]=r)},t.removeFromCache=function(r){if(typeof r=="string"){var n=kl[r];if(n){var i=n.textureCacheIds.indexOf(r);return i>-1&&n.textureCacheIds.splice(i,1),delete kl[r],n}}else if(r&&r.textureCacheIds){for(var o=0;o<r.textureCacheIds.length;++o)delete kl[r.textureCacheIds[o]];return r.textureCacheIds.length=0,r}return null},t._globalBatch=0,t}(Ah),AO=function(e){tr(t,e);function t(r,n){var i=this,o=n||{},s=o.width,a=o.height;i=e.call(this,s,a)||this,i.items=[],i.itemDirtyIds=[];for(var l=0;l<r;l++){var u=new wt;i.items.push(u),i.itemDirtyIds.push(-2)}return i.length=r,i._load=null,i.baseTexture=null,i}return t.prototype.initFromArray=function(r,n){for(var i=0;i<this.length;i++)!r[i]||(r[i].castToBaseTexture?this.addBaseTextureAt(r[i].castToBaseTexture(),i):r[i]instanceof Jd?this.addResourceAt(r[i],i):this.addResourceAt(PO(r[i],n),i))},t.prototype.dispose=function(){for(var r=0,n=this.length;r<n;r++)this.items[r].destroy();this.items=null,this.itemDirtyIds=null,this._load=null},t.prototype.addResourceAt=function(r,n){if(!this.items[n])throw new Error("Index "+n+" is out of bounds");return r.valid&&!this.valid&&this.resize(r.width,r.height),this.items[n].setResource(r),this},t.prototype.bind=function(r){if(this.baseTexture!==null)throw new Error("Only one base texture per TextureArray is allowed");e.prototype.bind.call(this,r);for(var n=0;n<this.length;n++)this.items[n].parentTextureArray=r,this.items[n].on("update",r.update,r)},t.prototype.unbind=function(r){e.prototype.unbind.call(this,r);for(var n=0;n<this.length;n++)this.items[n].parentTextureArray=null,this.items[n].off("update",r.update,r)},t.prototype.load=function(){var r=this;if(this._load)return this._load;var n=this.items.map(function(o){return o.resource}).filter(function(o){return o}),i=n.map(function(o){return o.load()});return this._load=Promise.all(i).then(function(){var o=r.items[0],s=o.realWidth,a=o.realHeight;return r.resize(s,a),Promise.resolve(r)}),this._load},t}(Jd),rQ=function(e){tr(t,e);function t(r,n){var i=this,o=n||{},s=o.width,a=o.height,l,u;return Array.isArray(r)?(l=r,u=r.length):u=r,i=e.call(this,u,{width:s,height:a})||this,l&&i.initFromArray(l,n),i}return t.prototype.addBaseTextureAt=function(r,n){if(r.resource)this.addResourceAt(r.resource,n);else throw new Error("ArrayResource does not support RenderTexture");return this},t.prototype.bind=function(r){e.prototype.bind.call(this,r),r.target=eu.TEXTURE_2D_ARRAY},t.prototype.upload=function(r,n,i){var o=this,s=o.length,a=o.itemDirtyIds,l=o.items,u=r.gl;i.dirtyId<0&&u.texImage3D(u.TEXTURE_2D_ARRAY,0,i.internalFormat,this._width,this._height,s,0,n.format,i.type,null);for(var c=0;c<s;c++){var f=l[c];a[c]<f.dirtyId&&(a[c]=f.dirtyId,f.valid&&u.texSubImage3D(u.TEXTURE_2D_ARRAY,0,0,0,c,f.resource.width,f.resource.height,1,n.format,i.type,f.resource.source))}return!0},t}(AO),al=function(e){tr(t,e);function t(r){var n=this,i=r,o=i.naturalWidth||i.videoWidth||i.width,s=i.naturalHeight||i.videoHeight||i.height;return n=e.call(this,o,s)||this,n.source=r,n.noSubImage=!1,n}return t.crossOrigin=function(r,n,i){i===void 0&&n.indexOf("data:")!==0?r.crossOrigin=MJ(n):i!==!1&&(r.crossOrigin=typeof i=="string"?i:"anonymous")},t.prototype.upload=function(r,n,i,o){var s=r.gl,a=n.realWidth,l=n.realHeight;if(o=o||this.source,o instanceof HTMLImageElement){if(!o.complete||o.naturalWidth===0)return!1}else if(o instanceof HTMLVideoElement&&o.readyState<=1)return!1;return s.pixelStorei(s.UNPACK_PREMULTIPLY_ALPHA_WEBGL,n.alphaMode===To.UNPACK),!this.noSubImage&&n.target===s.TEXTURE_2D&&i.width===a&&i.height===l?s.texSubImage2D(s.TEXTURE_2D,0,0,0,n.format,i.type,o):(i.width=a,i.height=l,s.texImage2D(n.target,0,i.internalFormat,n.format,i.type,o)),!0},t.prototype.update=function(){if(!this.destroyed){var r=this.source,n=r.naturalWidth||r.videoWidth||r.width,i=r.naturalHeight||r.videoHeight||r.height;this.resize(n,i),e.prototype.update.call(this)}},t.prototype.dispose=function(){this.source=null},t}(Jd),RO=function(e){tr(t,e);function t(r){return e.call(this,r)||this}return t.test=function(r){var n=globalThis.OffscreenCanvas;return n&&r instanceof n?!0:globalThis.HTMLCanvasElement&&r instanceof HTMLCanvasElement},t}(al),nQ=function(e){tr(t,e);function t(r,n){var i=this,o=n||{},s=o.width,a=o.height,l=o.autoLoad,u=o.linkBaseTexture;if(r&&r.length!==t.SIDES)throw new Error("Invalid length. Got "+r.length+", expected 6");i=e.call(this,6,{width:s,height:a})||this;for(var c=0;c<t.SIDES;c++)i.items[c].target=eu.TEXTURE_CUBE_MAP_POSITIVE_X+c;return i.linkBaseTexture=u!==!1,r&&i.initFromArray(r,n),l!==!1&&i.load(),i}return t.prototype.bind=function(r){e.prototype.bind.call(this,r),r.target=eu.TEXTURE_CUBE_MAP},t.prototype.addBaseTextureAt=function(r,n,i){if(!this.items[n])throw new Error("Index "+n+" is out of bounds");if(!this.linkBaseTexture||r.parentTextureArray||Object.keys(r._glTextures).length>0)if(r.resource)this.addResourceAt(r.resource,n);else throw new Error("CubeResource does not support copying of renderTexture.");else r.target=eu.TEXTURE_CUBE_MAP_POSITIVE_X+n,r.parentTextureArray=this.baseTexture,this.items[n]=r;return r.valid&&!this.valid&&this.resize(r.realWidth,r.realHeight),this.items[n]=r,this},t.prototype.upload=function(r,n,i){for(var o=this.itemDirtyIds,s=0;s<t.SIDES;s++){var a=this.items[s];o[s]<a.dirtyId&&(a.valid&&a.resource?(a.resource.upload(r,a,i),o[s]=a.dirtyId):o[s]<-1&&(r.gl.texImage2D(a.target,0,i.internalFormat,n.realWidth,n.realHeight,0,n.format,i.type,null),o[s]=-1))}return!0},t.test=function(r){return Array.isArray(r)&&r.length===t.SIDES},t.SIDES=6,t}(AO),kO=function(e){tr(t,e);function t(r,n){var i=this;if(n=n||{},!(r instanceof HTMLImageElement)){var o=new Image;al.crossOrigin(o,r,n.crossorigin),o.src=r,r=o}return i=e.call(this,r)||this,!r.complete&&!!i._width&&!!i._height&&(i._width=0,i._height=0),i.url=r.src,i._process=null,i.preserveBitmap=!1,i.createBitmap=(n.createBitmap!==void 0?n.createBitmap:We.CREATE_IMAGE_BITMAP)&&!!globalThis.createImageBitmap,i.alphaMode=typeof n.alphaMode=="number"?n.alphaMode:null,i.bitmap=null,i._load=null,n.autoLoad!==!1&&i.load(),i}return t.prototype.load=function(r){var n=this;return this._load?this._load:(r!==void 0&&(this.createBitmap=r),this._load=new Promise(function(i,o){var s=n.source;n.url=s.src;var a=function(){n.destroyed||(s.onload=null,s.onerror=null,n.resize(s.width,s.height),n._load=null,n.createBitmap?i(n.process()):i(n))};s.complete&&s.src?a():(s.onload=a,s.onerror=function(l){o(l),n.onError.emit(l)})}),this._load)},t.prototype.process=function(){var r=this,n=this.source;if(this._process!==null)return this._process;if(this.bitmap!==null||!globalThis.createImageBitmap)return Promise.resolve(this);var i=globalThis.createImageBitmap,o=!n.crossOrigin||n.crossOrigin==="anonymous";return this._process=fetch(n.src,{mode:o?"cors":"no-cors"}).then(function(s){return s.blob()}).then(function(s){return i(s,0,0,n.width,n.height,{premultiplyAlpha:r.alphaMode===To.UNPACK?"premultiply":"none"})}).then(function(s){return r.destroyed?Promise.reject():(r.bitmap=s,r.update(),r._process=null,Promise.resolve(r))}),this._process},t.prototype.upload=function(r,n,i){if(typeof this.alphaMode=="number"&&(n.alphaMode=this.alphaMode),!this.createBitmap)return e.prototype.upload.call(this,r,n,i);if(!this.bitmap&&(this.process(),!this.bitmap))return!1;if(e.prototype.upload.call(this,r,n,i,this.bitmap),!this.preserveBitmap){var o=!0,s=n._glTextures;for(var a in s){var l=s[a];if(l!==i&&l.dirtyId!==n.dirtyId){o=!1;break}}o&&(this.bitmap.close&&this.bitmap.close(),this.bitmap=null)}return!0},t.prototype.dispose=function(){this.source.onload=null,this.source.onerror=null,e.prototype.dispose.call(this),this.bitmap&&(this.bitmap.close(),this.bitmap=null),this._process=null,this._load=null},t.test=function(r){return typeof r=="string"||r instanceof HTMLImageElement},t}(al),iQ=function(e){tr(t,e);function t(r,n){var i=this;return n=n||{},i=e.call(this,document.createElement("canvas"))||this,i._width=0,i._height=0,i.svg=r,i.scale=n.scale||1,i._overrideWidth=n.width,i._overrideHeight=n.height,i._resolve=null,i._crossorigin=n.crossorigin,i._load=null,n.autoLoad!==!1&&i.load(),i}return t.prototype.load=function(){var r=this;return this._load?this._load:(this._load=new Promise(function(n){if(r._resolve=function(){r.resize(r.source.width,r.source.height),n(r)},t.SVG_XML.test(r.svg.trim())){if(!btoa)throw new Error("Your browser doesn't support base64 conversions.");r.svg="data:image/svg+xml;base64,"+btoa(unescape(encodeURIComponent(r.svg)))}r._loadSvg()}),this._load)},t.prototype._loadSvg=function(){var r=this,n=new Image;al.crossOrigin(n,this.svg,this._crossorigin),n.src=this.svg,n.onerror=function(i){!r._resolve||(n.onerror=null,r.onError.emit(i))},n.onload=function(){if(!!r._resolve){var i=n.width,o=n.height;if(!i||!o)throw new Error("The SVG image must have width and height defined (in pixels), canvas API needs them.");var s=i*r.scale,a=o*r.scale;(r._overrideWidth||r._overrideHeight)&&(s=r._overrideWidth||r._overrideHeight/o*i,a=r._overrideHeight||r._overrideWidth/i*o),s=Math.round(s),a=Math.round(a);var l=r.source;l.width=s,l.height=a,l._pixiId="canvas_"+mu(),l.getContext("2d").drawImage(n,0,0,i,o,0,0,s,a),r._resolve(),r._resolve=null}}},t.getSize=function(r){var n=t.SVG_SIZE.exec(r),i={};return n&&(i[n[1]]=Math.round(parseFloat(n[3])),i[n[5]]=Math.round(parseFloat(n[7]))),i},t.prototype.dispose=function(){e.prototype.dispose.call(this),this._resolve=null,this._crossorigin=null},t.test=function(r,n){return n==="svg"||typeof r=="string"&&/^data:image\/svg\+xml(;(charset=utf8|utf8))?;base64/.test(r)||typeof r=="string"&&t.SVG_XML.test(r)},t.SVG_XML=/^(<\?xml[^?]+\?>)?\s*(<!--[^(-->)]*-->)?\s*\<svg/m,t.SVG_SIZE=/<svg[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*>/i,t}(al),oQ=function(e){tr(t,e);function t(r,n){var i=this;if(n=n||{},!(r instanceof HTMLVideoElement)){var o=document.createElement("video");o.setAttribute("preload","auto"),o.setAttribute("webkit-playsinline",""),o.setAttribute("playsinline",""),typeof r=="string"&&(r=[r]);var s=r[0].src||r[0];al.crossOrigin(o,s,n.crossorigin);for(var a=0;a<r.length;++a){var l=document.createElement("source"),u=r[a],c=u.src,f=u.mime;c=c||r[a];var p=c.split("?").shift().toLowerCase(),v=p.slice(p.lastIndexOf(".")+1);f=f||t.MIME_TYPES[v]||"video/"+v,l.src=c,l.type=f,o.appendChild(l)}r=o}return i=e.call(this,r)||this,i.noSubImage=!0,i._autoUpdate=!0,i._isConnectedToTicker=!1,i._updateFPS=n.updateFPS||0,i._msToNextUpdate=0,i.autoPlay=n.autoPlay!==!1,i._load=null,i._resolve=null,i._onCanPlay=i._onCanPlay.bind(i),i._onError=i._onError.bind(i),n.autoLoad!==!1&&i.load(),i}return t.prototype.update=function(r){if(!this.destroyed){var n=on.shared.elapsedMS*this.source.playbackRate;this._msToNextUpdate=Math.floor(this._msToNextUpdate-n),(!this._updateFPS||this._msToNextUpdate<=0)&&(e.prototype.update.call(this),this._msToNextUpdate=this._updateFPS?Math.floor(1e3/this._updateFPS):0)}},t.prototype.load=function(){var r=this;if(this._load)return this._load;var n=this.source;return(n.readyState===n.HAVE_ENOUGH_DATA||n.readyState===n.HAVE_FUTURE_DATA)&&n.width&&n.height&&(n.complete=!0),n.addEventListener("play",this._onPlayStart.bind(this)),n.addEventListener("pause",this._onPlayStop.bind(this)),this._isSourceReady()?this._onCanPlay():(n.addEventListener("canplay",this._onCanPlay),n.addEventListener("canplaythrough",this._onCanPlay),n.addEventListener("error",this._onError,!0)),this._load=new Promise(function(i){r.valid?i(r):(r._resolve=i,n.load())}),this._load},t.prototype._onError=function(r){this.source.removeEventListener("error",this._onError,!0),this.onError.emit(r)},t.prototype._isSourcePlaying=function(){var r=this.source;return r.currentTime>0&&r.paused===!1&&r.ended===!1&&r.readyState>2},t.prototype._isSourceReady=function(){var r=this.source;return r.readyState===3||r.readyState===4},t.prototype._onPlayStart=function(){this.valid||this._onCanPlay(),this.autoUpdate&&!this._isConnectedToTicker&&(on.shared.add(this.update,this),this._isConnectedToTicker=!0)},t.prototype._onPlayStop=function(){this._isConnectedToTicker&&(on.shared.remove(this.update,this),this._isConnectedToTicker=!1)},t.prototype._onCanPlay=function(){var r=this.source;r.removeEventListener("canplay",this._onCanPlay),r.removeEventListener("canplaythrough",this._onCanPlay);var n=this.valid;this.resize(r.videoWidth,r.videoHeight),!n&&this._resolve&&(this._resolve(this),this._resolve=null),this._isSourcePlaying()?this._onPlayStart():this.autoPlay&&r.play()},t.prototype.dispose=function(){this._isConnectedToTicker&&(on.shared.remove(this.update,this),this._isConnectedToTicker=!1);var r=this.source;r&&(r.removeEventListener("error",this._onError,!0),r.pause(),r.src="",r.load()),e.prototype.dispose.call(this)},Object.defineProperty(t.prototype,"autoUpdate",{get:function(){return this._autoUpdate},set:function(r){r!==this._autoUpdate&&(this._autoUpdate=r,!this._autoUpdate&&this._isConnectedToTicker?(on.shared.remove(this.update,this),this._isConnectedToTicker=!1):this._autoUpdate&&!this._isConnectedToTicker&&this._isSourcePlaying()&&(on.shared.add(this.update,this),this._isConnectedToTicker=!0))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"updateFPS",{get:function(){return this._updateFPS},set:function(r){r!==this._updateFPS&&(this._updateFPS=r)},enumerable:!1,configurable:!0}),t.test=function(r,n){return globalThis.HTMLVideoElement&&r instanceof HTMLVideoElement||t.TYPES.indexOf(n)>-1},t.TYPES=["mp4","m4v","webm","ogg","ogv","h264","avi","mov"],t.MIME_TYPES={ogv:"video/ogg",mov:"video/quicktime",m4v:"video/mp4"},t}(al),sQ=function(e){tr(t,e);function t(r){return e.call(this,r)||this}return t.test=function(r){return!!globalThis.createImageBitmap&&r instanceof ImageBitmap},t}(al);kw.push(kO,sQ,RO,oQ,iQ,Mp,nQ,rQ);var aQ=function(e){tr(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.upload=function(r,n,i){var o=r.gl;o.pixelStorei(o.UNPACK_PREMULTIPLY_ALPHA_WEBGL,n.alphaMode===To.UNPACK);var s=n.realWidth,a=n.realHeight;return i.width===s&&i.height===a?o.texSubImage2D(n.target,0,0,0,s,a,n.format,i.type,this.data):(i.width=s,i.height=a,o.texImage2D(n.target,0,i.internalFormat,s,a,0,n.format,i.type,this.data)),!0},t}(Mp),Uw=function(){function e(t,r){this.width=Math.round(t||100),this.height=Math.round(r||100),this.stencil=!1,this.depth=!1,this.dirtyId=0,this.dirtyFormat=0,this.dirtySize=0,this.depthTexture=null,this.colorTextures=[],this.glFramebuffers={},this.disposeRunner=new Ln("disposeFramebuffer"),this.multisample=Ur.NONE}return Object.defineProperty(e.prototype,"colorTexture",{get:function(){return this.colorTextures[0]},enumerable:!1,configurable:!0}),e.prototype.addColorTexture=function(t,r){return t===void 0&&(t=0),this.colorTextures[t]=r||new wt(null,{scaleMode:Tt.NEAREST,resolution:1,mipmap:Ks.OFF,width:this.width,height:this.height}),this.dirtyId++,this.dirtyFormat++,this},e.prototype.addDepthTexture=function(t){return this.depthTexture=t||new wt(new aQ(null,{width:this.width,height:this.height}),{scaleMode:Tt.NEAREST,resolution:1,width:this.width,height:this.height,mipmap:Ks.OFF,format:Se.DEPTH_COMPONENT,type:$e.UNSIGNED_SHORT}),this.dirtyId++,this.dirtyFormat++,this},e.prototype.enableDepth=function(){return this.depth=!0,this.dirtyId++,this.dirtyFormat++,this},e.prototype.enableStencil=function(){return this.stencil=!0,this.dirtyId++,this.dirtyFormat++,this},e.prototype.resize=function(t,r){if(t=Math.round(t),r=Math.round(r),!(t===this.width&&r===this.height)){this.width=t,this.height=r,this.dirtyId++,this.dirtySize++;for(var n=0;n<this.colorTextures.length;n++){var i=this.colorTextures[n],o=i.resolution;i.setSize(t/o,r/o)}if(this.depthTexture){var o=this.depthTexture.resolution;this.depthTexture.setSize(t/o,r/o)}}},e.prototype.dispose=function(){this.disposeRunner.emit(this,!1)},e.prototype.destroyDepthTexture=function(){this.depthTexture&&(this.depthTexture.destroy(),this.depthTexture=null,++this.dirtyId,++this.dirtyFormat)},e}(),OO=function(e){tr(t,e);function t(r){r===void 0&&(r={});var n=this;if(typeof r=="number"){var i=arguments[0],o=arguments[1],s=arguments[2],a=arguments[3];r={width:i,height:o,scaleMode:s,resolution:a}}return r.width=r.width||100,r.height=r.height||100,r.multisample=r.multisample!==void 0?r.multisample:Ur.NONE,n=e.call(this,null,r)||this,n.mipmap=Ks.OFF,n.valid=!0,n.clearColor=[0,0,0,0],n.framebuffer=new Uw(n.realWidth,n.realHeight).addColorTexture(0,n),n.framebuffer.multisample=r.multisample,n.maskStack=[],n.filterStack=[{}],n}return t.prototype.resize=function(r,n){this.framebuffer.resize(r*this.resolution,n*this.resolution),this.setRealSize(this.framebuffer.width,this.framebuffer.height)},t.prototype.dispose=function(){this.framebuffer.dispose(),e.prototype.dispose.call(this)},t.prototype.destroy=function(){e.prototype.destroy.call(this),this.framebuffer.destroyDepthTexture(),this.framebuffer=null},t}(wt),LO=function(){function e(){this.x0=0,this.y0=0,this.x1=1,this.y1=0,this.x2=1,this.y2=1,this.x3=0,this.y3=1,this.uvsFloat32=new Float32Array(8)}return e.prototype.set=function(t,r,n){var i=r.width,o=r.height;if(n){var s=t.width/2/i,a=t.height/2/o,l=t.x/i+s,u=t.y/o+a;n=mr.add(n,mr.NW),this.x0=l+s*mr.uX(n),this.y0=u+a*mr.uY(n),n=mr.add(n,2),this.x1=l+s*mr.uX(n),this.y1=u+a*mr.uY(n),n=mr.add(n,2),this.x2=l+s*mr.uX(n),this.y2=u+a*mr.uY(n),n=mr.add(n,2),this.x3=l+s*mr.uX(n),this.y3=u+a*mr.uY(n)}else this.x0=t.x/i,this.y0=t.y/o,this.x1=(t.x+t.width)/i,this.y1=t.y/o,this.x2=(t.x+t.width)/i,this.y2=(t.y+t.height)/o,this.x3=t.x/i,this.y3=(t.y+t.height)/o;this.uvsFloat32[0]=this.x0,this.uvsFloat32[1]=this.y0,this.uvsFloat32[2]=this.x1,this.uvsFloat32[3]=this.y1,this.uvsFloat32[4]=this.x2,this.uvsFloat32[5]=this.y2,this.uvsFloat32[6]=this.x3,this.uvsFloat32[7]=this.y3},e.prototype.toString=function(){return"[@pixi/core:TextureUvs "+("x0="+this.x0+" y0="+this.y0+" ")+("x1="+this.x1+" y1="+this.y1+" x2="+this.x2+" ")+("y2="+this.y2+" x3="+this.x3+" y3="+this.y3)+"]"},e}(),d6=new LO;function yv(e){e.destroy=function(){},e.on=function(){},e.once=function(){},e.emit=function(){}}var et=function(e){tr(t,e);function t(r,n,i,o,s,a){var l=e.call(this)||this;if(l.noFrame=!1,n||(l.noFrame=!0,n=new Fe(0,0,1,1)),r instanceof t&&(r=r.baseTexture),l.baseTexture=r,l._frame=n,l.trim=o,l.valid=!1,l._uvs=d6,l.uvMatrix=null,l.orig=i||n,l._rotate=Number(s||0),s===!0)l._rotate=2;else if(l._rotate%2!==0)throw new Error("attempt to use diamond-shaped UVs. If you are sure, set rotation manually");return l.defaultAnchor=a?new Gt(a.x,a.y):new Gt(0,0),l._updateID=0,l.textureCacheIds=[],r.valid?l.noFrame?r.valid&&l.onBaseTextureUpdated(r):l.frame=n:r.once("loaded",l.onBaseTextureUpdated,l),l.noFrame&&r.on("update",l.onBaseTextureUpdated,l),l}return t.prototype.update=function(){this.baseTexture.resource&&this.baseTexture.resource.update()},t.prototype.onBaseTextureUpdated=function(r){if(this.noFrame){if(!this.baseTexture.valid)return;this._frame.width=r.width,this._frame.height=r.height,this.valid=!0,this.updateUvs()}else this.frame=this._frame;this.emit("update",this)},t.prototype.destroy=function(r){if(this.baseTexture){if(r){var n=this.baseTexture.resource;n&&n.url&&Cs[n.url]&&t.removeFromCache(n.url),this.baseTexture.destroy()}this.baseTexture.off("loaded",this.onBaseTextureUpdated,this),this.baseTexture.off("update",this.onBaseTextureUpdated,this),this.baseTexture=null}this._frame=null,this._uvs=null,this.trim=null,this.orig=null,this.valid=!1,t.removeFromCache(this),this.textureCacheIds=null},t.prototype.clone=function(){var r=this._frame.clone(),n=this._frame===this.orig?r:this.orig.clone(),i=new t(this.baseTexture,!this.noFrame&&r,n,this.trim&&this.trim.clone(),this.rotate,this.defaultAnchor);return this.noFrame&&(i._frame=r),i},t.prototype.updateUvs=function(){this._uvs===d6&&(this._uvs=new LO),this._uvs.set(this._frame,this.baseTexture,this.rotate),this._updateID++},t.from=function(r,n,i){n===void 0&&(n={}),i===void 0&&(i=We.STRICT_TEXTURE_CACHE);var o=typeof r=="string",s=null;if(o)s=r;else if(r instanceof wt){if(!r.cacheId){var a=n&&n.pixiIdPrefix||"pixiid";r.cacheId=a+"-"+mu(),wt.addToCache(r,r.cacheId)}s=r.cacheId}else{if(!r._pixiId){var a=n&&n.pixiIdPrefix||"pixiid";r._pixiId=a+"_"+mu()}s=r._pixiId}var l=Cs[s];if(o&&i&&!l)throw new Error('The cacheId "'+s+'" does not exist in TextureCache.');return!l&&!(r instanceof wt)?(n.resolution||(n.resolution=Tg(r)),l=new t(new wt(r,n)),l.baseTexture.cacheId=s,wt.addToCache(l.baseTexture,s),t.addToCache(l,s)):!l&&r instanceof wt&&(l=new t(r),t.addToCache(l,s)),l},t.fromURL=function(r,n){var i=Object.assign({autoLoad:!1},n==null?void 0:n.resourceOptions),o=t.from(r,Object.assign({resourceOptions:i},n),!1),s=o.baseTexture.resource;return o.baseTexture.valid?Promise.resolve(o):s.load().then(function(){return Promise.resolve(o)})},t.fromBuffer=function(r,n,i,o){return new t(wt.fromBuffer(r,n,i,o))},t.fromLoader=function(r,n,i,o){var s=new wt(r,Object.assign({scaleMode:We.SCALE_MODE,resolution:Tg(n)},o)),a=s.resource;a instanceof kO&&(a.url=n);var l=new t(s);return i||(i=n),wt.addToCache(l.baseTexture,i),t.addToCache(l,i),i!==n&&(wt.addToCache(l.baseTexture,n),t.addToCache(l,n)),l.baseTexture.valid?Promise.resolve(l):new Promise(function(u){l.baseTexture.once("loaded",function(){return u(l)})})},t.addToCache=function(r,n){n&&(r.textureCacheIds.indexOf(n)===-1&&r.textureCacheIds.push(n),Cs[n]&&console.warn("Texture added to the cache with an id ["+n+"] that already had an entry"),Cs[n]=r)},t.removeFromCache=function(r){if(typeof r=="string"){var n=Cs[r];if(n){var i=n.textureCacheIds.indexOf(r);return i>-1&&n.textureCacheIds.splice(i,1),delete Cs[r],n}}else if(r&&r.textureCacheIds){for(var o=0;o<r.textureCacheIds.length;++o)Cs[r.textureCacheIds[o]]===r&&delete Cs[r.textureCacheIds[o]];return r.textureCacheIds.length=0,r}return null},Object.defineProperty(t.prototype,"resolution",{get:function(){return this.baseTexture.resolution},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"frame",{get:function(){return this._frame},set:function(r){this._frame=r,this.noFrame=!1;var n=r.x,i=r.y,o=r.width,s=r.height,a=n+o>this.baseTexture.width,l=i+s>this.baseTexture.height;if(a||l){var u=a&&l?"and":"or",c="X: "+n+" + "+o+" = "+(n+o)+" > "+this.baseTexture.width,f="Y: "+i+" + "+s+" = "+(i+s)+" > "+this.baseTexture.height;throw new Error("Texture Error: frame does not fit inside the base Texture dimensions: "+(c+" "+u+" "+f))}this.valid=o&&s&&this.baseTexture.valid,!this.trim&&!this.rotate&&(this.orig=r),this.valid&&this.updateUvs()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"rotate",{get:function(){return this._rotate},set:function(r){this._rotate=r,this.valid&&this.updateUvs()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"width",{get:function(){return this.orig.width},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this.orig.height},enumerable:!1,configurable:!0}),t.prototype.castToBaseTexture=function(){return this.baseTexture},Object.defineProperty(t,"EMPTY",{get:function(){return t._EMPTY||(t._EMPTY=new t(new wt),yv(t._EMPTY),yv(t._EMPTY.baseTexture)),t._EMPTY},enumerable:!1,configurable:!0}),Object.defineProperty(t,"WHITE",{get:function(){if(!t._WHITE){var r=document.createElement("canvas"),n=r.getContext("2d");r.width=16,r.height=16,n.fillStyle="white",n.fillRect(0,0,16,16),t._WHITE=new t(new wt(new RO(r))),yv(t._WHITE),yv(t._WHITE.baseTexture)}return t._WHITE},enumerable:!1,configurable:!0}),t}(Ah),gu=function(e){tr(t,e);function t(r,n){var i=e.call(this,r,n)||this;return i.valid=!0,i.filterFrame=null,i.filterPoolKey=null,i.updateUvs(),i}return Object.defineProperty(t.prototype,"framebuffer",{get:function(){return this.baseTexture.framebuffer},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"multisample",{get:function(){return this.framebuffer.multisample},set:function(r){this.framebuffer.multisample=r},enumerable:!1,configurable:!0}),t.prototype.resize=function(r,n,i){i===void 0&&(i=!0);var o=this.baseTexture.resolution,s=Math.round(r*o)/o,a=Math.round(n*o)/o;this.valid=s>0&&a>0,this._frame.width=this.orig.width=s,this._frame.height=this.orig.height=a,i&&this.baseTexture.resize(s,a),this.updateUvs()},t.prototype.setResolution=function(r){var n=this.baseTexture;n.resolution!==r&&(n.setResolution(r),this.resize(n.width,n.height,!1))},t.create=function(r){for(var n=arguments,i=[],o=1;o<arguments.length;o++)i[o-1]=n[o];return typeof r=="number"&&(Zd("6.0.0","Arguments (width, height, scaleMode, resolution) have been deprecated."),r={width:r,height:i[0],scaleMode:i[1],resolution:i[2]}),new t(new OO(r))},t}(et),lQ=function(){function e(t){this.texturePool={},this.textureOptions=t||{},this.enableFullScreen=!1,this._pixelsWidth=0,this._pixelsHeight=0}return e.prototype.createTexture=function(t,r,n){n===void 0&&(n=Ur.NONE);var i=new OO(Object.assign({width:t,height:r,resolution:1,multisample:n},this.textureOptions));return new gu(i)},e.prototype.getOptimalTexture=function(t,r,n,i){n===void 0&&(n=1),i===void 0&&(i=Ur.NONE);var o;t=Math.ceil(t*n-1e-6),r=Math.ceil(r*n-1e-6),!this.enableFullScreen||t!==this._pixelsWidth||r!==this._pixelsHeight?(t=xg(t),r=xg(r),o=((t&65535)<<16|r&65535)>>>0,i>1&&(o+=i*4294967296)):o=i>1?-i:-1,this.texturePool[o]||(this.texturePool[o]=[]);var s=this.texturePool[o].pop();return s||(s=this.createTexture(t,r,i)),s.filterPoolKey=o,s.setResolution(n),s},e.prototype.getFilterTexture=function(t,r,n){var i=this.getOptimalTexture(t.width,t.height,r||t.resolution,n||Ur.NONE);return i.filterFrame=t.filterFrame,i},e.prototype.returnTexture=function(t){var r=t.filterPoolKey;t.filterFrame=null,this.texturePool[r].push(t)},e.prototype.returnFilterTexture=function(t){this.returnTexture(t)},e.prototype.clear=function(t){if(t=t!==!1,t)for(var r in this.texturePool){var n=this.texturePool[r];if(n)for(var i=0;i<n.length;i++)n[i].destroy(!0)}this.texturePool={}},e.prototype.setScreenSize=function(t){if(!(t.width===this._pixelsWidth&&t.height===this._pixelsHeight)){this.enableFullScreen=t.width>0&&t.height>0;for(var r in this.texturePool)if(Number(r)<0){var n=this.texturePool[r];if(n)for(var i=0;i<n.length;i++)n[i].destroy(!0);this.texturePool[r]=[]}this._pixelsWidth=t.width,this._pixelsHeight=t.height}},e.SCREEN_KEY=-1,e}(),p6=function(){function e(t,r,n,i,o,s,a){r===void 0&&(r=0),n===void 0&&(n=!1),i===void 0&&(i=$e.FLOAT),this.buffer=t,this.size=r,this.normalized=n,this.type=i,this.stride=o,this.start=s,this.instance=a}return e.prototype.destroy=function(){this.buffer=null},e.from=function(t,r,n,i,o){return new e(t,r,n,i,o)},e}(),uQ=0,Ar=function(){function e(t,r,n){r===void 0&&(r=!0),n===void 0&&(n=!1),this.data=t||new Float32Array(1),this._glBuffers={},this._updateID=0,this.index=n,this.static=r,this.id=uQ++,this.disposeRunner=new Ln("disposeBuffer")}return e.prototype.update=function(t){t instanceof Array&&(t=new Float32Array(t)),this.data=t||this.data,this._updateID++},e.prototype.dispose=function(){this.disposeRunner.emit(this,!1)},e.prototype.destroy=function(){this.dispose(),this.data=null},Object.defineProperty(e.prototype,"index",{get:function(){return this.type===Qo.ELEMENT_ARRAY_BUFFER},set:function(t){this.type=t?Qo.ELEMENT_ARRAY_BUFFER:Qo.ARRAY_BUFFER},enumerable:!1,configurable:!0}),e.from=function(t){return t instanceof Array&&(t=new Float32Array(t)),new e(t)},e}(),cQ={Float32Array,Uint32Array,Int32Array,Uint8Array};function hQ(e,t){for(var r=0,n=0,i={},o=0;o<e.length;o++)n+=t[o],r+=e[o].length;for(var s=new ArrayBuffer(r*4),a=null,l=0,o=0;o<e.length;o++){var u=t[o],c=e[o],f=wO(c);i[f]||(i[f]=new cQ[f](s)),a=i[f];for(var p=0;p<c.length;p++){var v=(p/u|0)*n+l,g=p%u;a[v+g]=c[p]}l+=u}return new Float32Array(s)}var m6={5126:4,5123:2,5121:1},fQ=0,dQ={Float32Array,Uint32Array,Int32Array,Uint8Array,Uint16Array},kh=function(){function e(t,r){t===void 0&&(t=[]),r===void 0&&(r={}),this.buffers=t,this.indexBuffer=null,this.attributes=r,this.glVertexArrayObjects={},this.id=fQ++,this.instanced=!1,this.instanceCount=1,this.disposeRunner=new Ln("disposeGeometry"),this.refCount=0}return e.prototype.addAttribute=function(t,r,n,i,o,s,a,l){if(n===void 0&&(n=0),i===void 0&&(i=!1),l===void 0&&(l=!1),!r)throw new Error("You must pass a buffer when creating an attribute");r instanceof Ar||(r instanceof Array&&(r=new Float32Array(r)),r=new Ar(r));var u=t.split("|");if(u.length>1){for(var c=0;c<u.length;c++)this.addAttribute(u[c],r,n,i,o);return this}var f=this.buffers.indexOf(r);return f===-1&&(this.buffers.push(r),f=this.buffers.length-1),this.attributes[t]=new p6(f,n,i,o,s,a,l),this.instanced=this.instanced||l,this},e.prototype.getAttribute=function(t){return this.attributes[t]},e.prototype.getBuffer=function(t){return this.buffers[this.getAttribute(t).buffer]},e.prototype.addIndex=function(t){return t instanceof Ar||(t instanceof Array&&(t=new Uint16Array(t)),t=new Ar(t)),t.type=Qo.ELEMENT_ARRAY_BUFFER,this.indexBuffer=t,this.buffers.indexOf(t)===-1&&this.buffers.push(t),this},e.prototype.getIndex=function(){return this.indexBuffer},e.prototype.interleave=function(){if(this.buffers.length===1||this.buffers.length===2&&this.indexBuffer)return this;var t=[],r=[],n=new Ar,i;for(i in this.attributes){var o=this.attributes[i],s=this.buffers[o.buffer];t.push(s.data),r.push(o.size*m6[o.type]/4),o.buffer=0}for(n.data=hQ(t,r),i=0;i<this.buffers.length;i++)this.buffers[i]!==this.indexBuffer&&this.buffers[i].destroy();return this.buffers=[n],this.indexBuffer&&this.buffers.push(this.indexBuffer),this},e.prototype.getSize=function(){for(var t in this.attributes){var r=this.attributes[t],n=this.buffers[r.buffer];return n.data.length/(r.stride/4||r.size)}return 0},e.prototype.dispose=function(){this.disposeRunner.emit(this,!1)},e.prototype.destroy=function(){this.dispose(),this.buffers=null,this.indexBuffer=null,this.attributes=null},e.prototype.clone=function(){for(var t=new e,r=0;r<this.buffers.length;r++)t.buffers[r]=new Ar(this.buffers[r].data.slice(0));for(var r in this.attributes){var n=this.attributes[r];t.attributes[r]=new p6(n.buffer,n.size,n.normalized,n.type,n.stride,n.start,n.instance)}return this.indexBuffer&&(t.indexBuffer=t.buffers[this.buffers.indexOf(this.indexBuffer)],t.indexBuffer.type=Qo.ELEMENT_ARRAY_BUFFER),t},e.merge=function(t){for(var r=new e,n=[],i=[],o=[],s,a=0;a<t.length;a++){s=t[a];for(var l=0;l<s.buffers.length;l++)i[l]=i[l]||0,i[l]+=s.buffers[l].data.length,o[l]=0}for(var a=0;a<s.buffers.length;a++)n[a]=new dQ[wO(s.buffers[a].data)](i[a]),r.buffers[a]=new Ar(n[a]);for(var a=0;a<t.length;a++){s=t[a];for(var l=0;l<s.buffers.length;l++)n[l].set(s.buffers[l].data,o[l]),o[l]+=s.buffers[l].data.length}if(r.attributes=s.attributes,s.indexBuffer){r.indexBuffer=r.buffers[s.buffers.indexOf(s.indexBuffer)],r.indexBuffer.type=Qo.ELEMENT_ARRAY_BUFFER;for(var u=0,c=0,f=0,p=0,a=0;a<s.buffers.length;a++)if(s.buffers[a]!==s.indexBuffer){p=a;break}for(var a in s.attributes){var v=s.attributes[a];(v.buffer|0)===p&&(c+=v.size*m6[v.type]/4)}for(var a=0;a<t.length;a++){for(var g=t[a].indexBuffer.data,l=0;l<g.length;l++)r.indexBuffer.data[l+f]+=u;u+=t[a].buffers[p].data.length/c,f+=g.length}}return r},e}(),pQ=function(e){tr(t,e);function t(){var r=e.call(this)||this;return r.addAttribute("aVertexPosition",new Float32Array([0,0,1,0,1,1,0,1])).addIndex([0,1,3,2]),r}return t}(kh),UO=function(e){tr(t,e);function t(){var r=e.call(this)||this;return r.vertices=new Float32Array([-1,-1,1,-1,1,1,-1,1]),r.uvs=new Float32Array([0,0,1,0,1,1,0,1]),r.vertexBuffer=new Ar(r.vertices),r.uvBuffer=new Ar(r.uvs),r.addAttribute("aVertexPosition",r.vertexBuffer).addAttribute("aTextureCoord",r.uvBuffer).addIndex([0,1,2,0,2,3]),r}return t.prototype.map=function(r,n){var i=0,o=0;return this.uvs[0]=i,this.uvs[1]=o,this.uvs[2]=i+n.width/r.width,this.uvs[3]=o,this.uvs[4]=i+n.width/r.width,this.uvs[5]=o+n.height/r.height,this.uvs[6]=i,this.uvs[7]=o+n.height/r.height,i=n.x,o=n.y,this.vertices[0]=i,this.vertices[1]=o,this.vertices[2]=i+n.width,this.vertices[3]=o,this.vertices[4]=i+n.width,this.vertices[5]=o+n.height,this.vertices[6]=i,this.vertices[7]=o+n.height,this.invalidate(),this},t.prototype.invalidate=function(){return this.vertexBuffer._updateID++,this.uvBuffer._updateID++,this},t}(kh),mQ=0,ru=function(){function e(t,r,n){this.group=!0,this.syncUniforms={},this.dirtyId=0,this.id=mQ++,this.static=!!r,this.ubo=!!n,t instanceof Ar?(this.buffer=t,this.buffer.type=Qo.UNIFORM_BUFFER,this.autoManage=!1,this.ubo=!0):(this.uniforms=t,this.ubo&&(this.buffer=new Ar(new Float32Array(1)),this.buffer.type=Qo.UNIFORM_BUFFER,this.autoManage=!0))}return e.prototype.update=function(){this.dirtyId++,!this.autoManage&&this.buffer&&this.buffer.update()},e.prototype.add=function(t,r,n){if(!this.ubo)this.uniforms[t]=new e(r,n);else throw new Error("[UniformGroup] uniform groups in ubo mode cannot be modified, or have uniform groups nested in them")},e.from=function(t,r,n){return new e(t,r,n)},e.uboFrom=function(t,r){return new e(t,r!=null?r:!0,!0)},e}(),vQ=function(){function e(){this.renderTexture=null,this.target=null,this.legacy=!1,this.resolution=1,this.multisample=Ur.NONE,this.sourceFrame=new Fe,this.destinationFrame=new Fe,this.bindingSourceFrame=new Fe,this.bindingDestinationFrame=new Fe,this.filters=[],this.transform=null}return e.prototype.clear=function(){this.target=null,this.filters=null,this.renderTexture=null},e}(),_v=[new Gt,new Gt,new Gt,new Gt],n_=new er,gQ=function(){function e(t){this.renderer=t,this.defaultFilterStack=[{}],this.texturePool=new lQ,this.texturePool.setScreenSize(t.view),this.statePool=[],this.quad=new pQ,this.quadUv=new UO,this.tempRect=new Fe,this.activeState={},this.globalUniforms=new ru({outputFrame:new Fe,inputSize:new Float32Array(4),inputPixel:new Float32Array(4),inputClamp:new Float32Array(4),resolution:1,filterArea:new Float32Array(4),filterClamp:new Float32Array(4)},!0),this.forceClear=!1,this.useMaxPadding=!1}return e.prototype.push=function(t,r){for(var n,i,o=this.renderer,s=this.defaultFilterStack,a=this.statePool.pop()||new vQ,l=this.renderer.renderTexture,u=r[0].resolution,c=r[0].multisample,f=r[0].padding,p=r[0].autoFit,v=(n=r[0].legacy)!==null&&n!==void 0?n:!0,g=1;g<r.length;g++){var b=r[g];u=Math.min(u,b.resolution),c=Math.min(c,b.multisample),f=this.useMaxPadding?Math.max(f,b.padding):f+b.padding,p=p&&b.autoFit,v=v||((i=b.legacy)!==null&&i!==void 0?i:!0)}s.length===1&&(this.defaultFilterStack[0].renderTexture=l.current),s.push(a),a.resolution=u,a.multisample=c,a.legacy=v,a.target=t,a.sourceFrame.copyFrom(t.filterArea||t.getBounds(!0)),a.sourceFrame.pad(f);var _=this.tempRect.copyFrom(l.sourceFrame);o.projection.transform&&this.transformAABB(n_.copyFrom(o.projection.transform).invert(),_),p?(a.sourceFrame.fit(_),(a.sourceFrame.width<=0||a.sourceFrame.height<=0)&&(a.sourceFrame.width=0,a.sourceFrame.height=0)):a.sourceFrame.intersects(_)||(a.sourceFrame.width=0,a.sourceFrame.height=0),this.roundFrame(a.sourceFrame,l.current?l.current.resolution:o.resolution,l.sourceFrame,l.destinationFrame,o.projection.transform),a.renderTexture=this.getOptimalFilterTexture(a.sourceFrame.width,a.sourceFrame.height,u,c),a.filters=r,a.destinationFrame.width=a.renderTexture.width,a.destinationFrame.height=a.renderTexture.height;var w=this.tempRect;w.x=0,w.y=0,w.width=a.sourceFrame.width,w.height=a.sourceFrame.height,a.renderTexture.filterFrame=a.sourceFrame,a.bindingSourceFrame.copyFrom(l.sourceFrame),a.bindingDestinationFrame.copyFrom(l.destinationFrame),a.transform=o.projection.transform,o.projection.transform=null,l.bind(a.renderTexture,a.sourceFrame,w),o.framebuffer.clear(0,0,0,0)},e.prototype.pop=function(){var t=this.defaultFilterStack,r=t.pop(),n=r.filters;this.activeState=r;var i=this.globalUniforms.uniforms;i.outputFrame=r.sourceFrame,i.resolution=r.resolution;var o=i.inputSize,s=i.inputPixel,a=i.inputClamp;if(o[0]=r.destinationFrame.width,o[1]=r.destinationFrame.height,o[2]=1/o[0],o[3]=1/o[1],s[0]=Math.round(o[0]*r.resolution),s[1]=Math.round(o[1]*r.resolution),s[2]=1/s[0],s[3]=1/s[1],a[0]=.5*s[2],a[1]=.5*s[3],a[2]=r.sourceFrame.width*o[2]-.5*s[2],a[3]=r.sourceFrame.height*o[3]-.5*s[3],r.legacy){var l=i.filterArea;l[0]=r.destinationFrame.width,l[1]=r.destinationFrame.height,l[2]=r.sourceFrame.x,l[3]=r.sourceFrame.y,i.filterClamp=i.inputClamp}this.globalUniforms.update();var u=t[t.length-1];if(this.renderer.framebuffer.blit(),n.length===1)n[0].apply(this,r.renderTexture,u.renderTexture,Ta.BLEND,r),this.returnFilterTexture(r.renderTexture);else{var c=r.renderTexture,f=this.getOptimalFilterTexture(c.width,c.height,r.resolution);f.filterFrame=c.filterFrame;var p=0;for(p=0;p<n.length-1;++p){p===1&&r.multisample>1&&(f=this.getOptimalFilterTexture(c.width,c.height,r.resolution),f.filterFrame=c.filterFrame),n[p].apply(this,c,f,Ta.CLEAR,r);var v=c;c=f,f=v}n[p].apply(this,c,u.renderTexture,Ta.BLEND,r),p>1&&r.multisample>1&&this.returnFilterTexture(r.renderTexture),this.returnFilterTexture(c),this.returnFilterTexture(f)}r.clear(),this.statePool.push(r)},e.prototype.bindAndClear=function(t,r){r===void 0&&(r=Ta.CLEAR);var n=this.renderer,i=n.renderTexture,o=n.state;if(t===this.defaultFilterStack[this.defaultFilterStack.length-1].renderTexture?this.renderer.projection.transform=this.activeState.transform:this.renderer.projection.transform=null,t&&t.filterFrame){var s=this.tempRect;s.x=0,s.y=0,s.width=t.filterFrame.width,s.height=t.filterFrame.height,i.bind(t,t.filterFrame,s)}else t!==this.defaultFilterStack[this.defaultFilterStack.length-1].renderTexture?i.bind(t):this.renderer.renderTexture.bind(t,this.activeState.bindingSourceFrame,this.activeState.bindingDestinationFrame);var a=o.stateId&1||this.forceClear;(r===Ta.CLEAR||r===Ta.BLIT&&a)&&this.renderer.framebuffer.clear(0,0,0,0)},e.prototype.applyFilter=function(t,r,n,i){var o=this.renderer;o.state.set(t.state),this.bindAndClear(n,i),t.uniforms.uSampler=r,t.uniforms.filterGlobals=this.globalUniforms,o.shader.bind(t),t.legacy=!!t.program.attributeData.aTextureCoord,t.legacy?(this.quadUv.map(r._frame,r.filterFrame),o.geometry.bind(this.quadUv),o.geometry.draw(Ci.TRIANGLES)):(o.geometry.bind(this.quad),o.geometry.draw(Ci.TRIANGLE_STRIP))},e.prototype.calculateSpriteMatrix=function(t,r){var n=this.activeState,i=n.sourceFrame,o=n.destinationFrame,s=r._texture.orig,a=t.set(o.width,0,0,o.height,i.x,i.y),l=r.worldTransform.copyTo(er.TEMP_MATRIX);return l.invert(),a.prepend(l),a.scale(1/s.width,1/s.height),a.translate(r.anchor.x,r.anchor.y),a},e.prototype.destroy=function(){this.renderer=null,this.texturePool.clear(!1)},e.prototype.getOptimalFilterTexture=function(t,r,n,i){return n===void 0&&(n=1),i===void 0&&(i=Ur.NONE),this.texturePool.getOptimalTexture(t,r,n,i)},e.prototype.getFilterTexture=function(t,r,n){if(typeof t=="number"){var i=t;t=r,r=i}t=t||this.activeState.renderTexture;var o=this.texturePool.getOptimalTexture(t.width,t.height,r||t.resolution,n||Ur.NONE);return o.filterFrame=t.filterFrame,o},e.prototype.returnFilterTexture=function(t){this.texturePool.returnTexture(t)},e.prototype.emptyPool=function(){this.texturePool.clear(!0)},e.prototype.resize=function(){this.texturePool.setScreenSize(this.renderer.view)},e.prototype.transformAABB=function(t,r){var n=_v[0],i=_v[1],o=_v[2],s=_v[3];n.set(r.left,r.top),i.set(r.left,r.bottom),o.set(r.right,r.top),s.set(r.right,r.bottom),t.apply(n,n),t.apply(i,i),t.apply(o,o),t.apply(s,s);var a=Math.min(n.x,i.x,o.x,s.x),l=Math.min(n.y,i.y,o.y,s.y),u=Math.max(n.x,i.x,o.x,s.x),c=Math.max(n.y,i.y,o.y,s.y);r.x=a,r.y=l,r.width=u-a,r.height=c-l},e.prototype.roundFrame=function(t,r,n,i,o){if(!(t.width<=0||t.height<=0||n.width<=0||n.height<=0)){if(o){var s=o.a,a=o.b,l=o.c,u=o.d;if((Math.abs(a)>1e-4||Math.abs(l)>1e-4)&&(Math.abs(s)>1e-4||Math.abs(u)>1e-4))return}o=o?n_.copyFrom(o):n_.identity(),o.translate(-n.x,-n.y).scale(i.width/n.width,i.height/n.height).translate(i.x,i.y),this.transformAABB(o,t),t.ceil(r),this.transformAABB(o.invert(),t)}},e}(),Xy=function(){function e(t){this.renderer=t}return e.prototype.flush=function(){},e.prototype.destroy=function(){this.renderer=null},e.prototype.start=function(){},e.prototype.stop=function(){this.flush()},e.prototype.render=function(t){},e}(),yQ=function(){function e(t){this.renderer=t,this.emptyRenderer=new Xy(t),this.currentRenderer=this.emptyRenderer}return e.prototype.setObjectRenderer=function(t){this.currentRenderer!==t&&(this.currentRenderer.stop(),this.currentRenderer=t,this.currentRenderer.start())},e.prototype.flush=function(){this.setObjectRenderer(this.emptyRenderer)},e.prototype.reset=function(){this.setObjectRenderer(this.emptyRenderer)},e.prototype.copyBoundTextures=function(t,r){for(var n=this.renderer.texture.boundTextures,i=r-1;i>=0;--i)t[i]=n[i]||null,t[i]&&(t[i]._batchLocation=i)},e.prototype.boundArray=function(t,r,n,i){for(var o=t.elements,s=t.ids,a=t.count,l=0,u=0;u<a;u++){var c=o[u],f=c._batchLocation;if(f>=0&&f<i&&r[f]===c){s[u]=f;continue}for(;l<i;){var p=r[l];if(p&&p._batchEnabled===n&&p._batchLocation===l){l++;continue}s[u]=l,c._batchLocation=l,r[l]=c;break}}},e.prototype.destroy=function(){this.renderer=null},e}(),v6=0,_Q=function(){function e(t){this.renderer=t,this.webGLVersion=1,this.extensions={},this.supports={uint32Indices:!1},this.handleContextLost=this.handleContextLost.bind(this),this.handleContextRestored=this.handleContextRestored.bind(this),t.view.addEventListener("webglcontextlost",this.handleContextLost,!1),t.view.addEventListener("webglcontextrestored",this.handleContextRestored,!1)}return Object.defineProperty(e.prototype,"isLost",{get:function(){return!this.gl||this.gl.isContextLost()},enumerable:!1,configurable:!0}),e.prototype.contextChange=function(t){this.gl=t,this.renderer.gl=t,this.renderer.CONTEXT_UID=v6++,t.isContextLost()&&t.getExtension("WEBGL_lose_context")&&t.getExtension("WEBGL_lose_context").restoreContext()},e.prototype.initFromContext=function(t){this.gl=t,this.validateContext(t),this.renderer.gl=t,this.renderer.CONTEXT_UID=v6++,this.renderer.runners.contextChange.emit(t)},e.prototype.initFromOptions=function(t){var r=this.createContext(this.renderer.view,t);this.initFromContext(r)},e.prototype.createContext=function(t,r){var n;if(We.PREFER_ENV>=Ys.WEBGL2&&(n=t.getContext("webgl2",r)),n)this.webGLVersion=2;else if(this.webGLVersion=1,n=t.getContext("webgl",r)||t.getContext("experimental-webgl",r),!n)throw new Error("This browser does not support WebGL. Try using the canvas renderer");return this.gl=n,this.getExtensions(),this.gl},e.prototype.getExtensions=function(){var t=this.gl,r={anisotropicFiltering:t.getExtension("EXT_texture_filter_anisotropic"),floatTextureLinear:t.getExtension("OES_texture_float_linear"),s3tc:t.getExtension("WEBGL_compressed_texture_s3tc"),s3tc_sRGB:t.getExtension("WEBGL_compressed_texture_s3tc_srgb"),etc:t.getExtension("WEBGL_compressed_texture_etc"),etc1:t.getExtension("WEBGL_compressed_texture_etc1"),pvrtc:t.getExtension("WEBGL_compressed_texture_pvrtc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc"),atc:t.getExtension("WEBGL_compressed_texture_atc"),astc:t.getExtension("WEBGL_compressed_texture_astc")};this.webGLVersion===1?Object.assign(this.extensions,r,{drawBuffers:t.getExtension("WEBGL_draw_buffers"),depthTexture:t.getExtension("WEBGL_depth_texture"),loseContext:t.getExtension("WEBGL_lose_context"),vertexArrayObject:t.getExtension("OES_vertex_array_object")||t.getExtension("MOZ_OES_vertex_array_object")||t.getExtension("WEBKIT_OES_vertex_array_object"),uint32ElementIndex:t.getExtension("OES_element_index_uint"),floatTexture:t.getExtension("OES_texture_float"),floatTextureLinear:t.getExtension("OES_texture_float_linear"),textureHalfFloat:t.getExtension("OES_texture_half_float"),textureHalfFloatLinear:t.getExtension("OES_texture_half_float_linear")}):this.webGLVersion===2&&Object.assign(this.extensions,r,{colorBufferFloat:t.getExtension("EXT_color_buffer_float")})},e.prototype.handleContextLost=function(t){t.preventDefault()},e.prototype.handleContextRestored=function(){this.renderer.runners.contextChange.emit(this.gl)},e.prototype.destroy=function(){var t=this.renderer.view;this.renderer=null,t.removeEventListener("webglcontextlost",this.handleContextLost),t.removeEventListener("webglcontextrestored",this.handleContextRestored),this.gl.useProgram(null),this.extensions.loseContext&&this.extensions.loseContext.loseContext()},e.prototype.postrender=function(){this.renderer.renderingToScreen&&this.gl.flush()},e.prototype.validateContext=function(t){var r=t.getContextAttributes(),n="WebGL2RenderingContext"in globalThis&&t instanceof globalThis.WebGL2RenderingContext;n&&(this.webGLVersion=2),r&&!r.stencil&&console.warn("Provided WebGL context does not have a stencil buffer, masks may not render correctly");var i=n||!!t.getExtension("OES_element_index_uint");this.supports.uint32Indices=i,i||console.warn("Provided WebGL context does not support 32 index buffer, complex graphics may not render correctly")},e}(),bQ=function(){function e(t){this.framebuffer=t,this.stencil=null,this.dirtyId=-1,this.dirtyFormat=-1,this.dirtySize=-1,this.multisample=Ur.NONE,this.msaaBuffer=null,this.blitFramebuffer=null,this.mipLevel=0}return e}(),wQ=new Fe,xQ=function(){function e(t){this.renderer=t,this.managedFramebuffers=[],this.unknownFramebuffer=new Uw(10,10),this.msaaSamples=null}return e.prototype.contextChange=function(){var t=this.gl=this.renderer.gl;if(this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.current=this.unknownFramebuffer,this.viewport=new Fe,this.hasMRT=!0,this.writeDepthTexture=!0,this.disposeAll(!0),this.renderer.context.webGLVersion===1){var r=this.renderer.context.extensions.drawBuffers,n=this.renderer.context.extensions.depthTexture;We.PREFER_ENV===Ys.WEBGL_LEGACY&&(r=null,n=null),r?t.drawBuffers=function(i){return r.drawBuffersWEBGL(i)}:(this.hasMRT=!1,t.drawBuffers=function(){}),n||(this.writeDepthTexture=!1)}else this.msaaSamples=t.getInternalformatParameter(t.RENDERBUFFER,t.RGBA8,t.SAMPLES)},e.prototype.bind=function(t,r,n){n===void 0&&(n=0);var i=this.gl;if(t){var o=t.glFramebuffers[this.CONTEXT_UID]||this.initFramebuffer(t);this.current!==t&&(this.current=t,i.bindFramebuffer(i.FRAMEBUFFER,o.framebuffer)),o.mipLevel!==n&&(t.dirtyId++,t.dirtyFormat++,o.mipLevel=n),o.dirtyId!==t.dirtyId&&(o.dirtyId=t.dirtyId,o.dirtyFormat!==t.dirtyFormat?(o.dirtyFormat=t.dirtyFormat,o.dirtySize=t.dirtySize,this.updateFramebuffer(t,n)):o.dirtySize!==t.dirtySize&&(o.dirtySize=t.dirtySize,this.resizeFramebuffer(t)));for(var s=0;s<t.colorTextures.length;s++){var a=t.colorTextures[s];this.renderer.texture.unbind(a.parentTextureArray||a)}if(t.depthTexture&&this.renderer.texture.unbind(t.depthTexture),r){var l=r.width>>n,u=r.height>>n,c=l/r.width;this.setViewport(r.x*c,r.y*c,l,u)}else{var l=t.width>>n,u=t.height>>n;this.setViewport(0,0,l,u)}}else this.current&&(this.current=null,i.bindFramebuffer(i.FRAMEBUFFER,null)),r?this.setViewport(r.x,r.y,r.width,r.height):this.setViewport(0,0,this.renderer.width,this.renderer.height)},e.prototype.setViewport=function(t,r,n,i){var o=this.viewport;t=Math.round(t),r=Math.round(r),n=Math.round(n),i=Math.round(i),(o.width!==n||o.height!==i||o.x!==t||o.y!==r)&&(o.x=t,o.y=r,o.width=n,o.height=i,this.gl.viewport(t,r,n,i))},Object.defineProperty(e.prototype,"size",{get:function(){return this.current?{x:0,y:0,width:this.current.width,height:this.current.height}:{x:0,y:0,width:this.renderer.width,height:this.renderer.height}},enumerable:!1,configurable:!0}),e.prototype.clear=function(t,r,n,i,o){o===void 0&&(o=bg.COLOR|bg.DEPTH);var s=this.gl;s.clearColor(t,r,n,i),s.clear(o)},e.prototype.initFramebuffer=function(t){var r=this.gl,n=new bQ(r.createFramebuffer());return n.multisample=this.detectSamples(t.multisample),t.glFramebuffers[this.CONTEXT_UID]=n,this.managedFramebuffers.push(t),t.disposeRunner.add(this),n},e.prototype.resizeFramebuffer=function(t){var r=this.gl,n=t.glFramebuffers[this.CONTEXT_UID];n.msaaBuffer&&(r.bindRenderbuffer(r.RENDERBUFFER,n.msaaBuffer),r.renderbufferStorageMultisample(r.RENDERBUFFER,n.multisample,r.RGBA8,t.width,t.height)),n.stencil&&(r.bindRenderbuffer(r.RENDERBUFFER,n.stencil),n.msaaBuffer?r.renderbufferStorageMultisample(r.RENDERBUFFER,n.multisample,r.DEPTH24_STENCIL8,t.width,t.height):r.renderbufferStorage(r.RENDERBUFFER,r.DEPTH_STENCIL,t.width,t.height));var i=t.colorTextures,o=i.length;r.drawBuffers||(o=Math.min(o,1));for(var s=0;s<o;s++){var a=i[s],l=a.parentTextureArray||a;this.renderer.texture.bind(l,0)}t.depthTexture&&this.writeDepthTexture&&this.renderer.texture.bind(t.depthTexture,0)},e.prototype.updateFramebuffer=function(t,r){var n=this.gl,i=t.glFramebuffers[this.CONTEXT_UID],o=t.colorTextures,s=o.length;n.drawBuffers||(s=Math.min(s,1)),i.multisample>1&&this.canMultisampleFramebuffer(t)?(i.msaaBuffer=i.msaaBuffer||n.createRenderbuffer(),n.bindRenderbuffer(n.RENDERBUFFER,i.msaaBuffer),n.renderbufferStorageMultisample(n.RENDERBUFFER,i.multisample,n.RGBA8,t.width,t.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.RENDERBUFFER,i.msaaBuffer)):i.msaaBuffer&&(n.deleteRenderbuffer(i.msaaBuffer),i.msaaBuffer=null,i.blitFramebuffer&&(i.blitFramebuffer.dispose(),i.blitFramebuffer=null));for(var a=[],l=0;l<s;l++){var u=o[l],c=u.parentTextureArray||u;this.renderer.texture.bind(c,0),!(l===0&&i.msaaBuffer)&&(n.framebufferTexture2D(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+l,u.target,c._glTextures[this.CONTEXT_UID].texture,r),a.push(n.COLOR_ATTACHMENT0+l))}if(a.length>1&&n.drawBuffers(a),t.depthTexture){var f=this.writeDepthTexture;if(f){var p=t.depthTexture;this.renderer.texture.bind(p,0),n.framebufferTexture2D(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.TEXTURE_2D,p._glTextures[this.CONTEXT_UID].texture,r)}}(t.stencil||t.depth)&&!(t.depthTexture&&this.writeDepthTexture)?(i.stencil=i.stencil||n.createRenderbuffer(),n.bindRenderbuffer(n.RENDERBUFFER,i.stencil),i.msaaBuffer?n.renderbufferStorageMultisample(n.RENDERBUFFER,i.multisample,n.DEPTH24_STENCIL8,t.width,t.height):n.renderbufferStorage(n.RENDERBUFFER,n.DEPTH_STENCIL,t.width,t.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.RENDERBUFFER,i.stencil)):i.stencil&&(n.deleteRenderbuffer(i.stencil),i.stencil=null)},e.prototype.canMultisampleFramebuffer=function(t){return this.renderer.context.webGLVersion!==1&&t.colorTextures.length<=1&&!t.depthTexture},e.prototype.detectSamples=function(t){var r=this.msaaSamples,n=Ur.NONE;if(t<=1||r===null)return n;for(var i=0;i<r.length;i++)if(r[i]<=t){n=r[i];break}return n===1&&(n=Ur.NONE),n},e.prototype.blit=function(t,r,n){var i=this,o=i.current,s=i.renderer,a=i.gl,l=i.CONTEXT_UID;if(s.context.webGLVersion===2&&!!o){var u=o.glFramebuffers[l];if(!!u){if(!t){if(!u.msaaBuffer)return;var c=o.colorTextures[0];if(!c)return;u.blitFramebuffer||(u.blitFramebuffer=new Uw(o.width,o.height),u.blitFramebuffer.addColorTexture(0,c)),t=u.blitFramebuffer,t.colorTextures[0]!==c&&(t.colorTextures[0]=c,t.dirtyId++,t.dirtyFormat++),(t.width!==o.width||t.height!==o.height)&&(t.width=o.width,t.height=o.height,t.dirtyId++,t.dirtySize++)}r||(r=wQ,r.width=o.width,r.height=o.height),n||(n=r);var f=r.width===n.width&&r.height===n.height;this.bind(t),a.bindFramebuffer(a.READ_FRAMEBUFFER,u.framebuffer),a.blitFramebuffer(r.left,r.top,r.right,r.bottom,n.left,n.top,n.right,n.bottom,a.COLOR_BUFFER_BIT,f?a.NEAREST:a.LINEAR)}}},e.prototype.disposeFramebuffer=function(t,r){var n=t.glFramebuffers[this.CONTEXT_UID],i=this.gl;if(!!n){delete t.glFramebuffers[this.CONTEXT_UID];var o=this.managedFramebuffers.indexOf(t);o>=0&&this.managedFramebuffers.splice(o,1),t.disposeRunner.remove(this),r||(i.deleteFramebuffer(n.framebuffer),n.msaaBuffer&&i.deleteRenderbuffer(n.msaaBuffer),n.stencil&&i.deleteRenderbuffer(n.stencil)),n.blitFramebuffer&&n.blitFramebuffer.dispose()}},e.prototype.disposeAll=function(t){var r=this.managedFramebuffers;this.managedFramebuffers=[];for(var n=0;n<r.length;n++)this.disposeFramebuffer(r[n],t)},e.prototype.forceStencil=function(){var t=this.current;if(!!t){var r=t.glFramebuffers[this.CONTEXT_UID];if(!(!r||r.stencil)){t.stencil=!0;var n=t.width,i=t.height,o=this.gl,s=o.createRenderbuffer();o.bindRenderbuffer(o.RENDERBUFFER,s),r.msaaBuffer?o.renderbufferStorageMultisample(o.RENDERBUFFER,r.multisample,o.DEPTH24_STENCIL8,n,i):o.renderbufferStorage(o.RENDERBUFFER,o.DEPTH_STENCIL,n,i),r.stencil=s,o.framebufferRenderbuffer(o.FRAMEBUFFER,o.DEPTH_STENCIL_ATTACHMENT,o.RENDERBUFFER,s)}}},e.prototype.reset=function(){this.current=this.unknownFramebuffer,this.viewport=new Fe},e.prototype.destroy=function(){this.renderer=null},e}(),i_={5126:4,5123:2,5121:1},TQ=function(){function e(t){this.renderer=t,this._activeGeometry=null,this._activeVao=null,this.hasVao=!0,this.hasInstance=!0,this.canUseUInt32ElementIndex=!1,this.managedGeometries={}}return e.prototype.contextChange=function(){this.disposeAll(!0);var t=this.gl=this.renderer.gl,r=this.renderer.context;if(this.CONTEXT_UID=this.renderer.CONTEXT_UID,r.webGLVersion!==2){var n=this.renderer.context.extensions.vertexArrayObject;We.PREFER_ENV===Ys.WEBGL_LEGACY&&(n=null),n?(t.createVertexArray=function(){return n.createVertexArrayOES()},t.bindVertexArray=function(o){return n.bindVertexArrayOES(o)},t.deleteVertexArray=function(o){return n.deleteVertexArrayOES(o)}):(this.hasVao=!1,t.createVertexArray=function(){return null},t.bindVertexArray=function(){return null},t.deleteVertexArray=function(){return null})}if(r.webGLVersion!==2){var i=t.getExtension("ANGLE_instanced_arrays");i?(t.vertexAttribDivisor=function(o,s){return i.vertexAttribDivisorANGLE(o,s)},t.drawElementsInstanced=function(o,s,a,l,u){return i.drawElementsInstancedANGLE(o,s,a,l,u)},t.drawArraysInstanced=function(o,s,a,l){return i.drawArraysInstancedANGLE(o,s,a,l)}):this.hasInstance=!1}this.canUseUInt32ElementIndex=r.webGLVersion===2||!!r.extensions.uint32ElementIndex},e.prototype.bind=function(t,r){r=r||this.renderer.shader.shader;var n=this.gl,i=t.glVertexArrayObjects[this.CONTEXT_UID],o=!1;i||(this.managedGeometries[t.id]=t,t.disposeRunner.add(this),t.glVertexArrayObjects[this.CONTEXT_UID]=i={},o=!0);var s=i[r.program.id]||this.initGeometryVao(t,r,o);this._activeGeometry=t,this._activeVao!==s&&(this._activeVao=s,this.hasVao?n.bindVertexArray(s):this.activateVao(t,r.program)),this.updateBuffers()},e.prototype.reset=function(){this.unbind()},e.prototype.updateBuffers=function(){for(var t=this._activeGeometry,r=this.renderer.buffer,n=0;n<t.buffers.length;n++){var i=t.buffers[n];r.update(i)}},e.prototype.checkCompatibility=function(t,r){var n=t.attributes,i=r.attributeData;for(var o in i)if(!n[o])throw new Error('shader and geometry incompatible, geometry missing the "'+o+'" attribute')},e.prototype.getSignature=function(t,r){var n=t.attributes,i=r.attributeData,o=["g",t.id];for(var s in n)i[s]&&o.push(s,i[s].location);return o.join("-")},e.prototype.initGeometryVao=function(t,r,n){n===void 0&&(n=!0);var i=this.gl,o=this.CONTEXT_UID,s=this.renderer.buffer,a=r.program;a.glPrograms[o]||this.renderer.shader.generateProgram(r),this.checkCompatibility(t,a);var l=this.getSignature(t,a),u=t.glVertexArrayObjects[this.CONTEXT_UID],c=u[l];if(c)return u[a.id]=c,c;var f=t.buffers,p=t.attributes,v={},g={};for(var b in f)v[b]=0,g[b]=0;for(var b in p)!p[b].size&&a.attributeData[b]?p[b].size=a.attributeData[b].size:p[b].size||console.warn("PIXI Geometry attribute '"+b+"' size cannot be determined (likely the bound shader does not have the attribute)"),v[p[b].buffer]+=p[b].size*i_[p[b].type];for(var b in p){var _=p[b],w=_.size;_.stride===void 0&&(v[_.buffer]===w*i_[_.type]?_.stride=0:_.stride=v[_.buffer]),_.start===void 0&&(_.start=g[_.buffer],g[_.buffer]+=w*i_[_.type])}c=i.createVertexArray(),i.bindVertexArray(c);for(var x=0;x<f.length;x++){var T=f[x];s.bind(T),n&&T._glBuffers[o].refCount++}return this.activateVao(t,a),this._activeVao=c,u[a.id]=c,u[l]=c,c},e.prototype.disposeGeometry=function(t,r){var n;if(!!this.managedGeometries[t.id]){delete this.managedGeometries[t.id];var i=t.glVertexArrayObjects[this.CONTEXT_UID],o=this.gl,s=t.buffers,a=(n=this.renderer)===null||n===void 0?void 0:n.buffer;if(t.disposeRunner.remove(this),!!i){if(a)for(var l=0;l<s.length;l++){var u=s[l]._glBuffers[this.CONTEXT_UID];u&&(u.refCount--,u.refCount===0&&!r&&a.dispose(s[l],r))}if(!r){for(var c in i)if(c[0]==="g"){var f=i[c];this._activeVao===f&&this.unbind(),o.deleteVertexArray(f)}}delete t.glVertexArrayObjects[this.CONTEXT_UID]}}},e.prototype.disposeAll=function(t){for(var r=Object.keys(this.managedGeometries),n=0;n<r.length;n++)this.disposeGeometry(this.managedGeometries[r[n]],t)},e.prototype.activateVao=function(t,r){var n=this.gl,i=this.CONTEXT_UID,o=this.renderer.buffer,s=t.buffers,a=t.attributes;t.indexBuffer&&o.bind(t.indexBuffer);var l=null;for(var u in a){var c=a[u],f=s[c.buffer],p=f._glBuffers[i];if(r.attributeData[u]){l!==p&&(o.bind(f),l=p);var v=r.attributeData[u].location;if(n.enableVertexAttribArray(v),n.vertexAttribPointer(v,c.size,c.type||n.FLOAT,c.normalized,c.stride,c.start),c.instance)if(this.hasInstance)n.vertexAttribDivisor(v,1);else throw new Error("geometry error, GPU Instancing is not supported on this device")}}},e.prototype.draw=function(t,r,n,i){var o=this.gl,s=this._activeGeometry;if(s.indexBuffer){var a=s.indexBuffer.data.BYTES_PER_ELEMENT,l=a===2?o.UNSIGNED_SHORT:o.UNSIGNED_INT;a===2||a===4&&this.canUseUInt32ElementIndex?s.instanced?o.drawElementsInstanced(t,r||s.indexBuffer.data.length,l,(n||0)*a,i||1):o.drawElements(t,r||s.indexBuffer.data.length,l,(n||0)*a):console.warn("unsupported index buffer type: uint32")}else s.instanced?o.drawArraysInstanced(t,n,r||s.getSize(),i||1):o.drawArrays(t,n,r||s.getSize());return this},e.prototype.unbind=function(){this.gl.bindVertexArray(null),this._activeVao=null,this._activeGeometry=null},e.prototype.destroy=function(){this.renderer=null},e}(),SQ=function(){function e(t){t===void 0&&(t=null),this.type=Rn.NONE,this.autoDetect=!0,this.maskObject=t||null,this.pooled=!1,this.isMaskData=!0,this.resolution=null,this.multisample=We.FILTER_MULTISAMPLE,this.enabled=!0,this._filters=null,this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null,this._scissorRectLocal=null,this._target=null}return Object.defineProperty(e.prototype,"filter",{get:function(){return this._filters?this._filters[0]:null},set:function(t){t?this._filters?this._filters[0]=t:this._filters=[t]:this._filters=null},enumerable:!1,configurable:!0}),e.prototype.reset=function(){this.pooled&&(this.maskObject=null,this.type=Rn.NONE,this.autoDetect=!0),this._target=null,this._scissorRectLocal=null},e.prototype.copyCountersOrReset=function(t){t?(this._stencilCounter=t._stencilCounter,this._scissorCounter=t._scissorCounter,this._scissorRect=t._scissorRect):(this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null)},e}();function g6(e,t,r){var n=e.createShader(t);return e.shaderSource(n,r),e.compileShader(n),n}function y6(e,t){var r=e.getShaderSource(t).split(`
`).map(function(u,c){return c+": "+u}),n=e.getShaderInfoLog(t),i=n.split(`
`),o={},s=i.map(function(u){return parseFloat(u.replace(/^ERROR\: 0\:([\d]+)\:.*$/,"$1"))}).filter(function(u){return u&&!o[u]?(o[u]=!0,!0):!1}),a=[""];s.forEach(function(u){r[u-1]="%c"+r[u-1]+"%c",a.push("background: #FF0000; color:#FFFFFF; font-size: 10px","font-size: 10px")});var l=r.join(`
`);a[0]=l,console.error(n),console.groupCollapsed("click to view full shader code"),console.warn.apply(console,a),console.groupEnd()}function EQ(e,t,r,n){e.getProgramParameter(t,e.LINK_STATUS)||(e.getShaderParameter(r,e.COMPILE_STATUS)||y6(e,r),e.getShaderParameter(n,e.COMPILE_STATUS)||y6(e,n),console.error("PixiJS Error: Could not initialize shader."),e.getProgramInfoLog(t)!==""&&console.warn("PixiJS Warning: gl.getProgramInfoLog()",e.getProgramInfoLog(t)))}function o_(e){for(var t=new Array(e),r=0;r<t.length;r++)t[r]=!1;return t}function FO(e,t){switch(e){case"float":return 0;case"vec2":return new Float32Array(2*t);case"vec3":return new Float32Array(3*t);case"vec4":return new Float32Array(4*t);case"int":case"uint":case"sampler2D":case"sampler2DArray":return 0;case"ivec2":return new Int32Array(2*t);case"ivec3":return new Int32Array(3*t);case"ivec4":return new Int32Array(4*t);case"uvec2":return new Uint32Array(2*t);case"uvec3":return new Uint32Array(3*t);case"uvec4":return new Uint32Array(4*t);case"bool":return!1;case"bvec2":return o_(2*t);case"bvec3":return o_(3*t);case"bvec4":return o_(4*t);case"mat2":return new Float32Array([1,0,0,1]);case"mat3":return new Float32Array([1,0,0,0,1,0,0,0,1]);case"mat4":return new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}return null}var MO={},Of=MO;function CQ(){if(Of===MO||Of&&Of.isContextLost()){var e=document.createElement("canvas"),t=void 0;We.PREFER_ENV>=Ys.WEBGL2&&(t=e.getContext("webgl2",{})),t||(t=e.getContext("webgl",{})||e.getContext("experimental-webgl",{}),t?t.getExtension("WEBGL_draw_buffers"):t=null),Of=t}return Of}var bv;function IQ(){if(!bv){bv=Xo.MEDIUM;var e=CQ();if(e&&e.getShaderPrecisionFormat){var t=e.getShaderPrecisionFormat(e.FRAGMENT_SHADER,e.HIGH_FLOAT);bv=t.precision?Xo.HIGH:Xo.MEDIUM}}return bv}function _6(e,t,r){if(e.substring(0,9)!=="precision"){var n=t;return t===Xo.HIGH&&r!==Xo.HIGH&&(n=Xo.MEDIUM),"precision "+n+` float;
`+e}else if(r!==Xo.HIGH&&e.substring(0,15)==="precision highp")return e.replace("precision highp","precision mediump");return e}var NQ={float:1,vec2:2,vec3:3,vec4:4,int:1,ivec2:2,ivec3:3,ivec4:4,uint:1,uvec2:2,uvec3:3,uvec4:4,bool:1,bvec2:2,bvec3:3,bvec4:4,mat2:4,mat3:9,mat4:16,sampler2D:1};function BO(e){return NQ[e]}var wv=null,b6={FLOAT:"float",FLOAT_VEC2:"vec2",FLOAT_VEC3:"vec3",FLOAT_VEC4:"vec4",INT:"int",INT_VEC2:"ivec2",INT_VEC3:"ivec3",INT_VEC4:"ivec4",UNSIGNED_INT:"uint",UNSIGNED_INT_VEC2:"uvec2",UNSIGNED_INT_VEC3:"uvec3",UNSIGNED_INT_VEC4:"uvec4",BOOL:"bool",BOOL_VEC2:"bvec2",BOOL_VEC3:"bvec3",BOOL_VEC4:"bvec4",FLOAT_MAT2:"mat2",FLOAT_MAT3:"mat3",FLOAT_MAT4:"mat4",SAMPLER_2D:"sampler2D",INT_SAMPLER_2D:"sampler2D",UNSIGNED_INT_SAMPLER_2D:"sampler2D",SAMPLER_CUBE:"samplerCube",INT_SAMPLER_CUBE:"samplerCube",UNSIGNED_INT_SAMPLER_CUBE:"samplerCube",SAMPLER_2D_ARRAY:"sampler2DArray",INT_SAMPLER_2D_ARRAY:"sampler2DArray",UNSIGNED_INT_SAMPLER_2D_ARRAY:"sampler2DArray"};function DO(e,t){if(!wv){var r=Object.keys(b6);wv={};for(var n=0;n<r.length;++n){var i=r[n];wv[e[i]]=b6[i]}}return wv[t]}var qc=[{test:function(e){return e.type==="float"&&e.size===1},code:function(e){return`
            if(uv["`+e+'"] !== ud["'+e+`"].value)
            {
                ud["`+e+'"].value = uv["'+e+`"]
                gl.uniform1f(ud["`+e+'"].location, uv["'+e+`"])
            }
            `}},{test:function(e){return(e.type==="sampler2D"||e.type==="samplerCube"||e.type==="sampler2DArray")&&e.size===1&&!e.isArray},code:function(e){return`t = syncData.textureCount++;

            renderer.texture.bind(uv["`+e+`"], t);

            if(ud["`+e+`"].value !== t)
            {
                ud["`+e+`"].value = t;
                gl.uniform1i(ud["`+e+`"].location, t);
; // eslint-disable-line max-len
            }`}},{test:function(e,t){return e.type==="mat3"&&e.size===1&&t.a!==void 0},code:function(e){return`
            gl.uniformMatrix3fv(ud["`+e+'"].location, false, uv["'+e+`"].toArray(true));
            `},codeUbo:function(e){return`
                var `+e+"_matrix = uv."+e+`.toArray(true);

                data[offset] = `+e+`_matrix[0];
                data[offset+1] = `+e+`_matrix[1];
                data[offset+2] = `+e+`_matrix[2];
        
                data[offset + 4] = `+e+`_matrix[3];
                data[offset + 5] = `+e+`_matrix[4];
                data[offset + 6] = `+e+`_matrix[5];
        
                data[offset + 8] = `+e+`_matrix[6];
                data[offset + 9] = `+e+`_matrix[7];
                data[offset + 10] = `+e+`_matrix[8];
            `}},{test:function(e,t){return e.type==="vec2"&&e.size===1&&t.x!==void 0},code:function(e){return`
                cv = ud["`+e+`"].value;
                v = uv["`+e+`"];

                if(cv[0] !== v.x || cv[1] !== v.y)
                {
                    cv[0] = v.x;
                    cv[1] = v.y;
                    gl.uniform2f(ud["`+e+`"].location, v.x, v.y);
                }`},codeUbo:function(e){return`
                v = uv.`+e+`;

                data[offset] = v.x;
                data[offset+1] = v.y;
            `}},{test:function(e){return e.type==="vec2"&&e.size===1},code:function(e){return`
                cv = ud["`+e+`"].value;
                v = uv["`+e+`"];

                if(cv[0] !== v[0] || cv[1] !== v[1])
                {
                    cv[0] = v[0];
                    cv[1] = v[1];
                    gl.uniform2f(ud["`+e+`"].location, v[0], v[1]);
                }
            `}},{test:function(e,t){return e.type==="vec4"&&e.size===1&&t.width!==void 0},code:function(e){return`
                cv = ud["`+e+`"].value;
                v = uv["`+e+`"];

                if(cv[0] !== v.x || cv[1] !== v.y || cv[2] !== v.width || cv[3] !== v.height)
                {
                    cv[0] = v.x;
                    cv[1] = v.y;
                    cv[2] = v.width;
                    cv[3] = v.height;
                    gl.uniform4f(ud["`+e+`"].location, v.x, v.y, v.width, v.height)
                }`},codeUbo:function(e){return`
                    v = uv.`+e+`;

                    data[offset] = v.x;
                    data[offset+1] = v.y;
                    data[offset+2] = v.width;
                    data[offset+3] = v.height;
                `}},{test:function(e){return e.type==="vec4"&&e.size===1},code:function(e){return`
                cv = ud["`+e+`"].value;
                v = uv["`+e+`"];

                if(cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
                {
                    cv[0] = v[0];
                    cv[1] = v[1];
                    cv[2] = v[2];
                    cv[3] = v[3];

                    gl.uniform4f(ud["`+e+`"].location, v[0], v[1], v[2], v[3])
                }`}}],PQ={float:`
    if (cv !== v)
    {
        cu.value = v;
        gl.uniform1f(location, v);
    }`,vec2:`
    if (cv[0] !== v[0] || cv[1] !== v[1])
    {
        cv[0] = v[0];
        cv[1] = v[1];

        gl.uniform2f(location, v[0], v[1])
    }`,vec3:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];

        gl.uniform3f(location, v[0], v[1], v[2])
    }`,vec4:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];
        cv[3] = v[3];

        gl.uniform4f(location, v[0], v[1], v[2], v[3]);
    }`,int:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1i(location, v);
    }`,ivec2:`
    if (cv[0] !== v[0] || cv[1] !== v[1])
    {
        cv[0] = v[0];
        cv[1] = v[1];

        gl.uniform2i(location, v[0], v[1]);
    }`,ivec3:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];

        gl.uniform3i(location, v[0], v[1], v[2]);
    }`,ivec4:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];
        cv[3] = v[3];

        gl.uniform4i(location, v[0], v[1], v[2], v[3]);
    }`,uint:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1ui(location, v);
    }`,uvec2:`
    if (cv[0] !== v[0] || cv[1] !== v[1])
    {
        cv[0] = v[0];
        cv[1] = v[1];

        gl.uniform2ui(location, v[0], v[1]);
    }`,uvec3:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];

        gl.uniform3ui(location, v[0], v[1], v[2]);
    }`,uvec4:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];
        cv[3] = v[3];

        gl.uniform4ui(location, v[0], v[1], v[2], v[3]);
    }`,bool:`
    if (cv !== v)
    {
        cu.value = v;
        gl.uniform1i(location, v);
    }`,bvec2:`
    if (cv[0] != v[0] || cv[1] != v[1])
    {
        cv[0] = v[0];
        cv[1] = v[1];

        gl.uniform2i(location, v[0], v[1]);
    }`,bvec3:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];

        gl.uniform3i(location, v[0], v[1], v[2]);
    }`,bvec4:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];
        cv[3] = v[3];

        gl.uniform4i(location, v[0], v[1], v[2], v[3]);
    }`,mat2:"gl.uniformMatrix2fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",sampler2D:"gl.uniform1i(location, v)",samplerCube:"gl.uniform1i(location, v)",sampler2DArray:"gl.uniform1i(location, v)"},AQ={float:"gl.uniform1fv(location, v)",vec2:"gl.uniform2fv(location, v)",vec3:"gl.uniform3fv(location, v)",vec4:"gl.uniform4fv(location, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat2:"gl.uniformMatrix2fv(location, false, v)",int:"gl.uniform1iv(location, v)",ivec2:"gl.uniform2iv(location, v)",ivec3:"gl.uniform3iv(location, v)",ivec4:"gl.uniform4iv(location, v)",uint:"gl.uniform1uiv(location, v)",uvec2:"gl.uniform2uiv(location, v)",uvec3:"gl.uniform3uiv(location, v)",uvec4:"gl.uniform4uiv(location, v)",bool:"gl.uniform1iv(location, v)",bvec2:"gl.uniform2iv(location, v)",bvec3:"gl.uniform3iv(location, v)",bvec4:"gl.uniform4iv(location, v)",sampler2D:"gl.uniform1iv(location, v)",samplerCube:"gl.uniform1iv(location, v)",sampler2DArray:"gl.uniform1iv(location, v)"};function RQ(e,t){var r,n=[`
        var v = null;
        var cv = null;
        var cu = null;
        var t = 0;
        var gl = renderer.gl;
    `];for(var i in e.uniforms){var o=t[i];if(!o){!((r=e.uniforms[i])===null||r===void 0)&&r.group&&(e.uniforms[i].ubo?n.push(`
                        renderer.shader.syncUniformBufferGroup(uv.`+i+", '"+i+`');
                    `):n.push(`
                        renderer.shader.syncUniformGroup(uv.`+i+`, syncData);
                    `));continue}for(var s=e.uniforms[i],a=!1,l=0;l<qc.length;l++)if(qc[l].test(o,s)){n.push(qc[l].code(i,s)),a=!0;break}if(!a){var u=o.size===1?PQ:AQ,c=u[o.type].replace("location",'ud["'+i+'"].location');n.push(`
            cu = ud["`+i+`"];
            cv = cu.value;
            v = uv["`+i+`"];
            `+c+";")}}return new Function("ud","uv","renderer","syncData",n.join(`
`))}var kQ=["precision mediump float;","void main(void){","float test = 0.1;","%forloop%","gl_FragColor = vec4(0.0);","}"].join(`
`);function OQ(e){for(var t="",r=0;r<e;++r)r>0&&(t+=`
else `),r<e-1&&(t+="if(test == "+r+".0){}");return t}function LQ(e,t){if(e===0)throw new Error("Invalid value of `0` passed to `checkMaxIfStatementsInShader`");for(var r=t.createShader(t.FRAGMENT_SHADER);;){var n=kQ.replace(/%forloop%/gi,OQ(e));if(t.shaderSource(r,n),t.compileShader(r),!t.getShaderParameter(r,t.COMPILE_STATUS))e=e/2|0;else break}return e}var Lf;function UQ(){if(typeof Lf=="boolean")return Lf;try{var e=new Function("param1","param2","param3","return param1[param2] === param3;");Lf=e({a:"b"},"a","b")===!0}catch{Lf=!1}return Lf}var FQ=`varying vec2 vTextureCoord;

uniform sampler2D uSampler;

void main(void){
   gl_FragColor *= texture2D(uSampler, vTextureCoord);
}`,MQ=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void){
   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
   vTextureCoord = aTextureCoord;
}
`,BQ=0,xv={},Oh=function(){function e(t,r,n){n===void 0&&(n="pixi-shader"),this.id=BQ++,this.vertexSrc=t||e.defaultVertexSrc,this.fragmentSrc=r||e.defaultFragmentSrc,this.vertexSrc=this.vertexSrc.trim(),this.fragmentSrc=this.fragmentSrc.trim(),this.vertexSrc.substring(0,8)!=="#version"&&(n=n.replace(/\s+/g,"-"),xv[n]?(xv[n]++,n+="-"+xv[n]):xv[n]=1,this.vertexSrc="#define SHADER_NAME "+n+`
`+this.vertexSrc,this.fragmentSrc="#define SHADER_NAME "+n+`
`+this.fragmentSrc,this.vertexSrc=_6(this.vertexSrc,We.PRECISION_VERTEX,Xo.HIGH),this.fragmentSrc=_6(this.fragmentSrc,We.PRECISION_FRAGMENT,IQ())),this.glPrograms={},this.syncUniforms=null}return Object.defineProperty(e,"defaultVertexSrc",{get:function(){return MQ},enumerable:!1,configurable:!0}),Object.defineProperty(e,"defaultFragmentSrc",{get:function(){return FQ},enumerable:!1,configurable:!0}),e.from=function(t,r,n){var i=t+r,o=zC[i];return o||(zC[i]=o=new e(t,r,n)),o},e}(),Vs=function(){function e(t,r){this.uniformBindCount=0,this.program=t,r?r instanceof ru?this.uniformGroup=r:this.uniformGroup=new ru(r):this.uniformGroup=new ru({})}return e.prototype.checkUniformExists=function(t,r){if(r.uniforms[t])return!0;for(var n in r.uniforms){var i=r.uniforms[n];if(i.group&&this.checkUniformExists(t,i))return!0}return!1},e.prototype.destroy=function(){this.uniformGroup=null},Object.defineProperty(e.prototype,"uniforms",{get:function(){return this.uniformGroup.uniforms},enumerable:!1,configurable:!0}),e.from=function(t,r,n){var i=Oh.from(t,r);return new e(i,n)},e}(),s_=0,a_=1,l_=2,u_=3,c_=4,h_=5,gl=function(){function e(){this.data=0,this.blendMode=Ze.NORMAL,this.polygonOffset=0,this.blend=!0,this.depthMask=!0}return Object.defineProperty(e.prototype,"blend",{get:function(){return!!(this.data&1<<s_)},set:function(t){!!(this.data&1<<s_)!==t&&(this.data^=1<<s_)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"offsets",{get:function(){return!!(this.data&1<<a_)},set:function(t){!!(this.data&1<<a_)!==t&&(this.data^=1<<a_)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"culling",{get:function(){return!!(this.data&1<<l_)},set:function(t){!!(this.data&1<<l_)!==t&&(this.data^=1<<l_)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"depthTest",{get:function(){return!!(this.data&1<<u_)},set:function(t){!!(this.data&1<<u_)!==t&&(this.data^=1<<u_)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"depthMask",{get:function(){return!!(this.data&1<<h_)},set:function(t){!!(this.data&1<<h_)!==t&&(this.data^=1<<h_)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"clockwiseFrontFace",{get:function(){return!!(this.data&1<<c_)},set:function(t){!!(this.data&1<<c_)!==t&&(this.data^=1<<c_)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"blendMode",{get:function(){return this._blendMode},set:function(t){this.blend=t!==Ze.NONE,this._blendMode=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"polygonOffset",{get:function(){return this._polygonOffset},set:function(t){this.offsets=!!t,this._polygonOffset=t},enumerable:!1,configurable:!0}),e.prototype.toString=function(){return"[@pixi/core:State "+("blendMode="+this.blendMode+" ")+("clockwiseFrontFace="+this.clockwiseFrontFace+" ")+("culling="+this.culling+" ")+("depthMask="+this.depthMask+" ")+("polygonOffset="+this.polygonOffset)+"]"},e.for2d=function(){var t=new e;return t.depthTest=!1,t.blend=!0,t},e}(),DQ=`attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

vec2 filterTextureCoord( void )
{
    return aVertexPosition * (outputFrame.zw * inputSize.zw);
}

void main(void)
{
    gl_Position = filterVertexPosition();
    vTextureCoord = filterTextureCoord();
}
`,GQ=`varying vec2 vTextureCoord;

uniform sampler2D uSampler;

void main(void){
   gl_FragColor = texture2D(uSampler, vTextureCoord);
}
`,yl=function(e){tr(t,e);function t(r,n,i){var o=this,s=Oh.from(r||t.defaultVertexSrc,n||t.defaultFragmentSrc);return o=e.call(this,s,i)||this,o.padding=0,o.resolution=We.FILTER_RESOLUTION,o.multisample=We.FILTER_MULTISAMPLE,o.enabled=!0,o.autoFit=!0,o.state=new gl,o}return t.prototype.apply=function(r,n,i,o,s){r.applyFilter(this,n,i,o)},Object.defineProperty(t.prototype,"blendMode",{get:function(){return this.state.blendMode},set:function(r){this.state.blendMode=r},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"resolution",{get:function(){return this._resolution},set:function(r){this._resolution=r},enumerable:!1,configurable:!0}),Object.defineProperty(t,"defaultVertexSrc",{get:function(){return DQ},enumerable:!1,configurable:!0}),Object.defineProperty(t,"defaultFragmentSrc",{get:function(){return GQ},enumerable:!1,configurable:!0}),t}(Vs),jQ=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 otherMatrix;

varying vec2 vMaskCoord;
varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = aTextureCoord;
    vMaskCoord = ( otherMatrix * vec3( aTextureCoord, 1.0)  ).xy;
}
`,$Q=`varying vec2 vMaskCoord;
varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform sampler2D mask;
uniform float alpha;
uniform float npmAlpha;
uniform vec4 maskClamp;

void main(void)
{
    float clip = step(3.5,
        step(maskClamp.x, vMaskCoord.x) +
        step(maskClamp.y, vMaskCoord.y) +
        step(vMaskCoord.x, maskClamp.z) +
        step(vMaskCoord.y, maskClamp.w));

    vec4 original = texture2D(uSampler, vTextureCoord);
    vec4 masky = texture2D(mask, vMaskCoord);
    float alphaMul = 1.0 - npmAlpha * (1.0 - masky.a);

    original *= (alphaMul * masky.r * alpha * clip);

    gl_FragColor = original;
}
`,w6=new er,L4=function(){function e(t,r){this._texture=t,this.mapCoord=new er,this.uClampFrame=new Float32Array(4),this.uClampOffset=new Float32Array(2),this._textureID=-1,this._updateID=0,this.clampOffset=0,this.clampMargin=typeof r>"u"?.5:r,this.isSimple=!1}return Object.defineProperty(e.prototype,"texture",{get:function(){return this._texture},set:function(t){this._texture=t,this._textureID=-1},enumerable:!1,configurable:!0}),e.prototype.multiplyUvs=function(t,r){r===void 0&&(r=t);for(var n=this.mapCoord,i=0;i<t.length;i+=2){var o=t[i],s=t[i+1];r[i]=o*n.a+s*n.c+n.tx,r[i+1]=o*n.b+s*n.d+n.ty}return r},e.prototype.update=function(t){var r=this._texture;if(!r||!r.valid||!t&&this._textureID===r._updateID)return!1;this._textureID=r._updateID,this._updateID++;var n=r._uvs;this.mapCoord.set(n.x1-n.x0,n.y1-n.y0,n.x3-n.x0,n.y3-n.y0,n.x0,n.y0);var i=r.orig,o=r.trim;o&&(w6.set(i.width/o.width,0,0,i.height/o.height,-o.x/o.width,-o.y/o.height),this.mapCoord.append(w6));var s=r.baseTexture,a=this.uClampFrame,l=this.clampMargin/s.resolution,u=this.clampOffset;return a[0]=(r._frame.x+l+u)/s.width,a[1]=(r._frame.y+l+u)/s.height,a[2]=(r._frame.x+r._frame.width-l+u)/s.width,a[3]=(r._frame.y+r._frame.height-l+u)/s.height,this.uClampOffset[0]=u/s.realWidth,this.uClampOffset[1]=u/s.realHeight,this.isSimple=r._frame.width===s.width&&r._frame.height===s.height&&r.rotate===0,!0},e}(),HQ=function(e){tr(t,e);function t(r,n,i){var o=this,s=null;return typeof r!="string"&&n===void 0&&i===void 0&&(s=r,r=void 0,n=void 0,i=void 0),o=e.call(this,r||jQ,n||$Q,i)||this,o.maskSprite=s,o.maskMatrix=new er,o}return Object.defineProperty(t.prototype,"maskSprite",{get:function(){return this._maskSprite},set:function(r){this._maskSprite=r,this._maskSprite&&(this._maskSprite.renderable=!1)},enumerable:!1,configurable:!0}),t.prototype.apply=function(r,n,i,o){var s=this._maskSprite,a=s._texture;!a.valid||(a.uvMatrix||(a.uvMatrix=new L4(a,0)),a.uvMatrix.update(),this.uniforms.npmAlpha=a.baseTexture.alphaMode?0:1,this.uniforms.mask=a,this.uniforms.otherMatrix=r.calculateSpriteMatrix(this.maskMatrix,s).prepend(a.uvMatrix.mapCoord),this.uniforms.alpha=s.worldAlpha,this.uniforms.maskClamp=a.uvMatrix.uClampFrame,r.applyFilter(this,n,i,o))},t}(yl),zQ=function(){function e(t){this.renderer=t,this.enableScissor=!0,this.alphaMaskPool=[],this.maskDataPool=[],this.maskStack=[],this.alphaMaskIndex=0}return e.prototype.setMaskStack=function(t){this.maskStack=t,this.renderer.scissor.setMaskStack(t),this.renderer.stencil.setMaskStack(t)},e.prototype.push=function(t,r){var n=r;if(!n.isMaskData){var i=this.maskDataPool.pop()||new SQ;i.pooled=!0,i.maskObject=r,n=i}var o=this.maskStack.length!==0?this.maskStack[this.maskStack.length-1]:null;if(n.copyCountersOrReset(o),n.autoDetect&&this.detect(n),n._target=t,n.type!==Rn.SPRITE&&this.maskStack.push(n),n.enabled)switch(n.type){case Rn.SCISSOR:this.renderer.scissor.push(n);break;case Rn.STENCIL:this.renderer.stencil.push(n);break;case Rn.SPRITE:n.copyCountersOrReset(null),this.pushSpriteMask(n);break}n.type===Rn.SPRITE&&this.maskStack.push(n)},e.prototype.pop=function(t){var r=this.maskStack.pop();if(!(!r||r._target!==t)){if(r.enabled)switch(r.type){case Rn.SCISSOR:this.renderer.scissor.pop();break;case Rn.STENCIL:this.renderer.stencil.pop(r.maskObject);break;case Rn.SPRITE:this.popSpriteMask(r);break}if(r.reset(),r.pooled&&this.maskDataPool.push(r),this.maskStack.length!==0){var n=this.maskStack[this.maskStack.length-1];n.type===Rn.SPRITE&&n._filters&&(n._filters[0].maskSprite=n.maskObject)}}},e.prototype.detect=function(t){var r=t.maskObject;r.isSprite?t.type=Rn.SPRITE:this.enableScissor&&this.renderer.scissor.testScissor(t)?t.type=Rn.SCISSOR:t.type=Rn.STENCIL},e.prototype.pushSpriteMask=function(t){var r,n,i=t.maskObject,o=t._target,s=t._filters;s||(s=this.alphaMaskPool[this.alphaMaskIndex],s||(s=this.alphaMaskPool[this.alphaMaskIndex]=[new HQ]));var a=this.renderer,l=a.renderTexture,u,c;if(l.current){var f=l.current;u=t.resolution||f.resolution,c=(r=t.multisample)!==null&&r!==void 0?r:f.multisample}else u=t.resolution||a.resolution,c=(n=t.multisample)!==null&&n!==void 0?n:a.multisample;s[0].resolution=u,s[0].multisample=c,s[0].maskSprite=i;var p=o.filterArea;o.filterArea=i.getBounds(!0),a.filter.push(o,s),o.filterArea=p,t._filters||this.alphaMaskIndex++},e.prototype.popSpriteMask=function(t){this.renderer.filter.pop(),t._filters?t._filters[0].maskSprite=null:(this.alphaMaskIndex--,this.alphaMaskPool[this.alphaMaskIndex][0].maskSprite=null)},e.prototype.destroy=function(){this.renderer=null},e}(),GO=function(){function e(t){this.renderer=t,this.maskStack=[],this.glConst=0}return e.prototype.getStackLength=function(){return this.maskStack.length},e.prototype.setMaskStack=function(t){var r=this.renderer.gl,n=this.getStackLength();this.maskStack=t;var i=this.getStackLength();i!==n&&(i===0?r.disable(this.glConst):(r.enable(this.glConst),this._useCurrent()))},e.prototype._useCurrent=function(){},e.prototype.destroy=function(){this.renderer=null,this.maskStack=null},e}(),x6=new er,VQ=function(e){tr(t,e);function t(r){var n=e.call(this,r)||this;return n.glConst=WebGLRenderingContext.SCISSOR_TEST,n}return t.prototype.getStackLength=function(){var r=this.maskStack[this.maskStack.length-1];return r?r._scissorCounter:0},t.prototype.calcScissorRect=function(r){if(!r._scissorRectLocal){var n=r._scissorRect,i=r.maskObject,o=this.renderer,s=o.renderTexture;i.renderable=!0;var a=i.getBounds();this.roundFrameToPixels(a,s.current?s.current.resolution:o.resolution,s.sourceFrame,s.destinationFrame,o.projection.transform),i.renderable=!1,n&&a.fit(n),r._scissorRectLocal=a}},t.isMatrixRotated=function(r){if(!r)return!1;var n=r.a,i=r.b,o=r.c,s=r.d;return(Math.abs(i)>1e-4||Math.abs(o)>1e-4)&&(Math.abs(n)>1e-4||Math.abs(s)>1e-4)},t.prototype.testScissor=function(r){var n=r.maskObject;if(!n.isFastRect||!n.isFastRect()||t.isMatrixRotated(n.worldTransform)||t.isMatrixRotated(this.renderer.projection.transform))return!1;this.calcScissorRect(r);var i=r._scissorRectLocal;return i.width>0&&i.height>0},t.prototype.roundFrameToPixels=function(r,n,i,o,s){t.isMatrixRotated(s)||(s=s?x6.copyFrom(s):x6.identity(),s.translate(-i.x,-i.y).scale(o.width/i.width,o.height/i.height).translate(o.x,o.y),this.renderer.filter.transformAABB(s,r),r.fit(o),r.x=Math.round(r.x*n),r.y=Math.round(r.y*n),r.width=Math.round(r.width*n),r.height=Math.round(r.height*n))},t.prototype.push=function(r){r._scissorRectLocal||this.calcScissorRect(r);var n=this.renderer.gl;r._scissorRect||n.enable(n.SCISSOR_TEST),r._scissorCounter++,r._scissorRect=r._scissorRectLocal,this._useCurrent()},t.prototype.pop=function(){var r=this.renderer.gl;this.getStackLength()>0?this._useCurrent():r.disable(r.SCISSOR_TEST)},t.prototype._useCurrent=function(){var r=this.maskStack[this.maskStack.length-1]._scissorRect,n;this.renderer.renderTexture.current?n=r.y:n=this.renderer.height-r.height-r.y,this.renderer.gl.scissor(r.x,n,r.width,r.height)},t}(GO),XQ=function(e){tr(t,e);function t(r){var n=e.call(this,r)||this;return n.glConst=WebGLRenderingContext.STENCIL_TEST,n}return t.prototype.getStackLength=function(){var r=this.maskStack[this.maskStack.length-1];return r?r._stencilCounter:0},t.prototype.push=function(r){var n=r.maskObject,i=this.renderer.gl,o=r._stencilCounter;o===0&&(this.renderer.framebuffer.forceStencil(),i.clearStencil(0),i.clear(i.STENCIL_BUFFER_BIT),i.enable(i.STENCIL_TEST)),r._stencilCounter++,i.colorMask(!1,!1,!1,!1),i.stencilFunc(i.EQUAL,o,4294967295),i.stencilOp(i.KEEP,i.KEEP,i.INCR),n.renderable=!0,n.render(this.renderer),this.renderer.batch.flush(),n.renderable=!1,this._useCurrent()},t.prototype.pop=function(r){var n=this.renderer.gl;this.getStackLength()===0?n.disable(n.STENCIL_TEST):(n.colorMask(!1,!1,!1,!1),n.stencilOp(n.KEEP,n.KEEP,n.DECR),r.renderable=!0,r.render(this.renderer),this.renderer.batch.flush(),r.renderable=!1,this._useCurrent())},t.prototype._useCurrent=function(){var r=this.renderer.gl;r.colorMask(!0,!0,!0,!0),r.stencilFunc(r.EQUAL,this.getStackLength(),4294967295),r.stencilOp(r.KEEP,r.KEEP,r.KEEP)},t}(GO),WQ=function(){function e(t){this.renderer=t,this.destinationFrame=null,this.sourceFrame=null,this.defaultFrame=null,this.projectionMatrix=new er,this.transform=null}return e.prototype.update=function(t,r,n,i){this.destinationFrame=t||this.destinationFrame||this.defaultFrame,this.sourceFrame=r||this.sourceFrame||t,this.calculateProjection(this.destinationFrame,this.sourceFrame,n,i),this.transform&&this.projectionMatrix.append(this.transform);var o=this.renderer;o.globalUniforms.uniforms.projectionMatrix=this.projectionMatrix,o.globalUniforms.update(),o.shader.shader&&o.shader.syncUniformGroup(o.shader.shader.uniforms.globals)},e.prototype.calculateProjection=function(t,r,n,i){var o=this.projectionMatrix,s=i?-1:1;o.identity(),o.a=1/r.width*2,o.d=s*(1/r.height*2),o.tx=-1-r.x*o.a,o.ty=-s-r.y*o.d},e.prototype.setTransform=function(t){},e.prototype.destroy=function(){this.renderer=null},e}(),Ol=new Fe,Uf=new Fe,YQ=function(){function e(t){this.renderer=t,this.clearColor=t._backgroundColorRgba,this.defaultMaskStack=[],this.current=null,this.sourceFrame=new Fe,this.destinationFrame=new Fe,this.viewportFrame=new Fe}return e.prototype.bind=function(t,r,n){t===void 0&&(t=null);var i=this.renderer;this.current=t;var o,s,a;t?(o=t.baseTexture,a=o.resolution,r||(Ol.width=t.frame.width,Ol.height=t.frame.height,r=Ol),n||(Uf.x=t.frame.x,Uf.y=t.frame.y,Uf.width=r.width,Uf.height=r.height,n=Uf),s=o.framebuffer):(a=i.resolution,r||(Ol.width=i.screen.width,Ol.height=i.screen.height,r=Ol),n||(n=Ol,n.width=r.width,n.height=r.height));var l=this.viewportFrame;l.x=n.x*a,l.y=n.y*a,l.width=n.width*a,l.height=n.height*a,t||(l.y=i.view.height-(l.y+l.height)),l.ceil(),this.renderer.framebuffer.bind(s,l),this.renderer.projection.update(n,r,a,!s),t?this.renderer.mask.setMaskStack(o.maskStack):this.renderer.mask.setMaskStack(this.defaultMaskStack),this.sourceFrame.copyFrom(r),this.destinationFrame.copyFrom(n)},e.prototype.clear=function(t,r){this.current?t=t||this.current.baseTexture.clearColor:t=t||this.clearColor;var n=this.destinationFrame,i=this.current?this.current.baseTexture:this.renderer.screen,o=n.width!==i.width||n.height!==i.height;if(o){var s=this.viewportFrame,a=s.x,l=s.y,u=s.width,c=s.height;a=Math.round(a),l=Math.round(l),u=Math.round(u),c=Math.round(c),this.renderer.gl.enable(this.renderer.gl.SCISSOR_TEST),this.renderer.gl.scissor(a,l,u,c)}this.renderer.framebuffer.clear(t[0],t[1],t[2],t[3],r),o&&this.renderer.scissor.pop()},e.prototype.resize=function(){this.bind(null)},e.prototype.reset=function(){this.bind(null)},e.prototype.destroy=function(){this.renderer=null},e}();function KQ(e,t,r,n,i){r.buffer.update(i)}var qQ={float:`
        data[offset] = v;
    `,vec2:`
        data[offset] = v[0];
        data[offset+1] = v[1];
    `,vec3:`
        data[offset] = v[0];
        data[offset+1] = v[1];
        data[offset+2] = v[2];

    `,vec4:`
        data[offset] = v[0];
        data[offset+1] = v[1];
        data[offset+2] = v[2];
        data[offset+3] = v[3];
    `,mat2:`
        data[offset] = v[0];
        data[offset+1] = v[1];

        data[offset+4] = v[2];
        data[offset+5] = v[3];
    `,mat3:`
        data[offset] = v[0];
        data[offset+1] = v[1];
        data[offset+2] = v[2];

        data[offset + 4] = v[3];
        data[offset + 5] = v[4];
        data[offset + 6] = v[5];

        data[offset + 8] = v[6];
        data[offset + 9] = v[7];
        data[offset + 10] = v[8];
    `,mat4:`
        for(var i = 0; i < 16; i++)
        {
            data[offset + i] = v[i];
        }
    `},jO={float:4,vec2:8,vec3:12,vec4:16,int:4,ivec2:8,ivec3:12,ivec4:16,uint:4,uvec2:8,uvec3:12,uvec4:16,bool:4,bvec2:8,bvec3:12,bvec4:16,mat2:16*2,mat3:16*3,mat4:16*4};function ZQ(e){for(var t=e.map(function(l){return{data:l,offset:0,dataLen:0,dirty:0}}),r=0,n=0,i=0,o=0;o<t.length;o++){var s=t[o];if(r=jO[s.data.type],s.data.size>1&&(r=Math.max(r,16)*s.data.size),s.dataLen=r,n%r!==0&&n<16){var a=n%r%16;n+=a,i+=a}n+r>16?(i=Math.ceil(i/16)*16,s.offset=i,i+=r,n=r):(s.offset=i,n+=r,i+=r)}return i=Math.ceil(i/16)*16,{uboElements:t,size:i}}function JQ(e,t){var r=[];for(var n in e)t[n]&&r.push(t[n]);return r.sort(function(i,o){return i.index-o.index}),r}function QQ(e,t){if(!e.autoManage)return{size:0,syncFunc:KQ};for(var r=JQ(e.uniforms,t),n=ZQ(r),i=n.uboElements,o=n.size,s=[`
    var v = null;
    var v2 = null;
    var cv = null;
    var t = 0;
    var gl = renderer.gl
    var index = 0;
    var data = buffer.data;
    `],a=0;a<i.length;a++){for(var l=i[a],u=e.uniforms[l.data.name],c=l.data.name,f=!1,p=0;p<qc.length;p++){var v=qc[p];if(v.codeUbo&&v.test(l.data,u)){s.push("offset = "+l.offset/4+";",qc[p].codeUbo(l.data.name,u)),f=!0;break}}if(!f)if(l.data.size>1){var g=BO(l.data.type),b=Math.max(jO[l.data.type]/16,1),_=g/b,w=(4-_%4)%4;s.push(`
                cv = ud.`+c+`.value;
                v = uv.`+c+`;
                offset = `+l.offset/4+`;

                t = 0;

                for(var i=0; i < `+l.data.size*b+`; i++)
                {
                    for(var j = 0; j < `+_+`; j++)
                    {
                        data[offset++] = v[t++];
                    }
                    offset += `+w+`;
                }

                `)}else{var x=qQ[l.data.type];s.push(`
                cv = ud.`+c+`.value;
                v = uv.`+c+`;
                offset = `+l.offset/4+`;
                `+x+`;
                `)}}return s.push(`
       renderer.buffer.update(buffer);
    `),{size:o,syncFunc:new Function("ud","uv","renderer","syncData","buffer",s.join(`
`))}}var eee=function(){function e(t,r){this.program=t,this.uniformData=r,this.uniformGroups={},this.uniformDirtyGroups={},this.uniformBufferBindings={}}return e.prototype.destroy=function(){this.uniformData=null,this.uniformGroups=null,this.uniformDirtyGroups=null,this.uniformBufferBindings=null,this.program=null},e}();function tee(e,t){for(var r={},n=t.getProgramParameter(e,t.ACTIVE_ATTRIBUTES),i=0;i<n;i++){var o=t.getActiveAttrib(e,i);if(o.name.indexOf("gl_")!==0){var s=DO(t,o.type),a={type:s,name:o.name,size:BO(s),location:t.getAttribLocation(e,o.name)};r[o.name]=a}}return r}function ree(e,t){for(var r={},n=t.getProgramParameter(e,t.ACTIVE_UNIFORMS),i=0;i<n;i++){var o=t.getActiveUniform(e,i),s=o.name.replace(/\[.*?\]$/,""),a=!!o.name.match(/\[.*?\]$/),l=DO(t,o.type);r[s]={name:s,index:i,type:l,size:o.size,isArray:a,value:FO(l,o.size)}}return r}function nee(e,t){var r=g6(e,e.VERTEX_SHADER,t.vertexSrc),n=g6(e,e.FRAGMENT_SHADER,t.fragmentSrc),i=e.createProgram();if(e.attachShader(i,r),e.attachShader(i,n),e.linkProgram(i),e.getProgramParameter(i,e.LINK_STATUS)||EQ(e,i,r,n),t.attributeData=tee(i,e),t.uniformData=ree(i,e),!/^[ \t]*#[ \t]*version[ \t]+300[ \t]+es[ \t]*$/m.test(t.vertexSrc)){var o=Object.keys(t.attributeData);o.sort(function(c,f){return c>f?1:-1});for(var s=0;s<o.length;s++)t.attributeData[o[s]].location=s,e.bindAttribLocation(i,s,o[s]);e.linkProgram(i)}e.deleteShader(r),e.deleteShader(n);var a={};for(var s in t.uniformData){var l=t.uniformData[s];a[s]={location:e.getUniformLocation(i,s),value:FO(l.type,l.size)}}var u=new eee(i,a);return u}var iee=0,Tv={textureCount:0,uboCount:0},oee=function(){function e(t){this.destroyed=!1,this.renderer=t,this.systemCheck(),this.gl=null,this.shader=null,this.program=null,this.cache={},this._uboCache={},this.id=iee++}return e.prototype.systemCheck=function(){if(!UQ())throw new Error("Current environment does not allow unsafe-eval, please use @pixi/unsafe-eval module to enable support.")},e.prototype.contextChange=function(t){this.gl=t,this.reset()},e.prototype.bind=function(t,r){t.uniforms.globals=this.renderer.globalUniforms;var n=t.program,i=n.glPrograms[this.renderer.CONTEXT_UID]||this.generateProgram(t);return this.shader=t,this.program!==n&&(this.program=n,this.gl.useProgram(i.program)),r||(Tv.textureCount=0,Tv.uboCount=0,this.syncUniformGroup(t.uniformGroup,Tv)),i},e.prototype.setUniforms=function(t){var r=this.shader.program,n=r.glPrograms[this.renderer.CONTEXT_UID];r.syncUniforms(n.uniformData,t,this.renderer)},e.prototype.syncUniformGroup=function(t,r){var n=this.getGlProgram();(!t.static||t.dirtyId!==n.uniformDirtyGroups[t.id])&&(n.uniformDirtyGroups[t.id]=t.dirtyId,this.syncUniforms(t,n,r))},e.prototype.syncUniforms=function(t,r,n){var i=t.syncUniforms[this.shader.program.id]||this.createSyncGroups(t);i(r.uniformData,t.uniforms,this.renderer,n)},e.prototype.createSyncGroups=function(t){var r=this.getSignature(t,this.shader.program.uniformData,"u");return this.cache[r]||(this.cache[r]=RQ(t,this.shader.program.uniformData)),t.syncUniforms[this.shader.program.id]=this.cache[r],t.syncUniforms[this.shader.program.id]},e.prototype.syncUniformBufferGroup=function(t,r){var n=this.getGlProgram();if(!t.static||t.dirtyId!==0||!n.uniformGroups[t.id]){t.dirtyId=0;var i=n.uniformGroups[t.id]||this.createSyncBufferGroup(t,n,r);t.buffer.update(),i(n.uniformData,t.uniforms,this.renderer,Tv,t.buffer)}this.renderer.buffer.bindBufferBase(t.buffer,n.uniformBufferBindings[r])},e.prototype.createSyncBufferGroup=function(t,r,n){var i=this.renderer.gl;this.renderer.buffer.bind(t.buffer);var o=this.gl.getUniformBlockIndex(r.program,n);r.uniformBufferBindings[n]=this.shader.uniformBindCount,i.uniformBlockBinding(r.program,o,this.shader.uniformBindCount),this.shader.uniformBindCount++;var s=this.getSignature(t,this.shader.program.uniformData,"ubo"),a=this._uboCache[s];if(a||(a=this._uboCache[s]=QQ(t,this.shader.program.uniformData)),t.autoManage){var l=new Float32Array(a.size/4);t.buffer.update(l)}return r.uniformGroups[t.id]=a.syncFunc,r.uniformGroups[t.id]},e.prototype.getSignature=function(t,r,n){var i=t.uniforms,o=[n+"-"];for(var s in i)o.push(s),r[s]&&o.push(r[s].type);return o.join("-")},e.prototype.getGlProgram=function(){return this.shader?this.shader.program.glPrograms[this.renderer.CONTEXT_UID]:null},e.prototype.generateProgram=function(t){var r=this.gl,n=t.program,i=nee(r,n);return n.glPrograms[this.renderer.CONTEXT_UID]=i,i},e.prototype.reset=function(){this.program=null,this.shader=null},e.prototype.destroy=function(){this.renderer=null,this.destroyed=!0},e}();function see(e,t){return t===void 0&&(t=[]),t[Ze.NORMAL]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[Ze.ADD]=[e.ONE,e.ONE],t[Ze.MULTIPLY]=[e.DST_COLOR,e.ONE_MINUS_SRC_ALPHA,e.ONE,e.ONE_MINUS_SRC_ALPHA],t[Ze.SCREEN]=[e.ONE,e.ONE_MINUS_SRC_COLOR,e.ONE,e.ONE_MINUS_SRC_ALPHA],t[Ze.OVERLAY]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[Ze.DARKEN]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[Ze.LIGHTEN]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[Ze.COLOR_DODGE]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[Ze.COLOR_BURN]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[Ze.HARD_LIGHT]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[Ze.SOFT_LIGHT]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[Ze.DIFFERENCE]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[Ze.EXCLUSION]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[Ze.HUE]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[Ze.SATURATION]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[Ze.COLOR]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[Ze.LUMINOSITY]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[Ze.NONE]=[0,0],t[Ze.NORMAL_NPM]=[e.SRC_ALPHA,e.ONE_MINUS_SRC_ALPHA,e.ONE,e.ONE_MINUS_SRC_ALPHA],t[Ze.ADD_NPM]=[e.SRC_ALPHA,e.ONE,e.ONE,e.ONE],t[Ze.SCREEN_NPM]=[e.SRC_ALPHA,e.ONE_MINUS_SRC_COLOR,e.ONE,e.ONE_MINUS_SRC_ALPHA],t[Ze.SRC_IN]=[e.DST_ALPHA,e.ZERO],t[Ze.SRC_OUT]=[e.ONE_MINUS_DST_ALPHA,e.ZERO],t[Ze.SRC_ATOP]=[e.DST_ALPHA,e.ONE_MINUS_SRC_ALPHA],t[Ze.DST_OVER]=[e.ONE_MINUS_DST_ALPHA,e.ONE],t[Ze.DST_IN]=[e.ZERO,e.SRC_ALPHA],t[Ze.DST_OUT]=[e.ZERO,e.ONE_MINUS_SRC_ALPHA],t[Ze.DST_ATOP]=[e.ONE_MINUS_DST_ALPHA,e.SRC_ALPHA],t[Ze.XOR]=[e.ONE_MINUS_DST_ALPHA,e.ONE_MINUS_SRC_ALPHA],t[Ze.SUBTRACT]=[e.ONE,e.ONE,e.ONE,e.ONE,e.FUNC_REVERSE_SUBTRACT,e.FUNC_ADD],t}var aee=0,lee=1,uee=2,cee=3,hee=4,fee=5,dee=function(){function e(){this.gl=null,this.stateId=0,this.polygonOffset=0,this.blendMode=Ze.NONE,this._blendEq=!1,this.map=[],this.map[aee]=this.setBlend,this.map[lee]=this.setOffset,this.map[uee]=this.setCullFace,this.map[cee]=this.setDepthTest,this.map[hee]=this.setFrontFace,this.map[fee]=this.setDepthMask,this.checks=[],this.defaultState=new gl,this.defaultState.blend=!0}return e.prototype.contextChange=function(t){this.gl=t,this.blendModes=see(t),this.set(this.defaultState),this.reset()},e.prototype.set=function(t){if(t=t||this.defaultState,this.stateId!==t.data){for(var r=this.stateId^t.data,n=0;r;)r&1&&this.map[n].call(this,!!(t.data&1<<n)),r=r>>1,n++;this.stateId=t.data}for(var n=0;n<this.checks.length;n++)this.checks[n](this,t)},e.prototype.forceState=function(t){t=t||this.defaultState;for(var r=0;r<this.map.length;r++)this.map[r].call(this,!!(t.data&1<<r));for(var r=0;r<this.checks.length;r++)this.checks[r](this,t);this.stateId=t.data},e.prototype.setBlend=function(t){this.updateCheck(e.checkBlendMode,t),this.gl[t?"enable":"disable"](this.gl.BLEND)},e.prototype.setOffset=function(t){this.updateCheck(e.checkPolygonOffset,t),this.gl[t?"enable":"disable"](this.gl.POLYGON_OFFSET_FILL)},e.prototype.setDepthTest=function(t){this.gl[t?"enable":"disable"](this.gl.DEPTH_TEST)},e.prototype.setDepthMask=function(t){this.gl.depthMask(t)},e.prototype.setCullFace=function(t){this.gl[t?"enable":"disable"](this.gl.CULL_FACE)},e.prototype.setFrontFace=function(t){this.gl.frontFace(this.gl[t?"CW":"CCW"])},e.prototype.setBlendMode=function(t){if(t!==this.blendMode){this.blendMode=t;var r=this.blendModes[t],n=this.gl;r.length===2?n.blendFunc(r[0],r[1]):n.blendFuncSeparate(r[0],r[1],r[2],r[3]),r.length===6?(this._blendEq=!0,n.blendEquationSeparate(r[4],r[5])):this._blendEq&&(this._blendEq=!1,n.blendEquationSeparate(n.FUNC_ADD,n.FUNC_ADD))}},e.prototype.setPolygonOffset=function(t,r){this.gl.polygonOffset(t,r)},e.prototype.reset=function(){this.gl.pixelStorei(this.gl.UNPACK_FLIP_Y_WEBGL,!1),this.forceState(this.defaultState),this._blendEq=!0,this.blendMode=-1,this.setBlendMode(0)},e.prototype.updateCheck=function(t,r){var n=this.checks.indexOf(t);r&&n===-1?this.checks.push(t):!r&&n!==-1&&this.checks.splice(n,1)},e.checkBlendMode=function(t,r){t.setBlendMode(r.blendMode)},e.checkPolygonOffset=function(t,r){t.setPolygonOffset(1,r.polygonOffset)},e.prototype.destroy=function(){this.gl=null},e}(),pee=function(){function e(t){this.renderer=t,this.count=0,this.checkCount=0,this.maxIdle=We.GC_MAX_IDLE,this.checkCountMax=We.GC_MAX_CHECK_COUNT,this.mode=We.GC_MODE}return e.prototype.postrender=function(){!this.renderer.renderingToScreen||(this.count++,this.mode!==Iw.MANUAL&&(this.checkCount++,this.checkCount>this.checkCountMax&&(this.checkCount=0,this.run())))},e.prototype.run=function(){for(var t=this.renderer.texture,r=t.managedTextures,n=!1,i=0;i<r.length;i++){var o=r[i];!o.framebuffer&&this.count-o.touched>this.maxIdle&&(t.destroyTexture(o,!0),r[i]=null,n=!0)}if(n){for(var s=0,i=0;i<r.length;i++)r[i]!==null&&(r[s++]=r[i]);r.length=s}},e.prototype.unload=function(t){var r=this.renderer.texture,n=t._texture;n&&!n.framebuffer&&r.destroyTexture(n);for(var i=t.children.length-1;i>=0;i--)this.unload(t.children[i])},e.prototype.destroy=function(){this.renderer=null},e}();function mee(e){var t,r,n,i,o,s,a,l,u,c,f,p,v,g,b,_,w,x,T,I,R,E,O;return"WebGL2RenderingContext"in globalThis&&e instanceof globalThis.WebGL2RenderingContext?O=(t={},t[$e.UNSIGNED_BYTE]=(r={},r[Se.RGBA]=e.RGBA8,r[Se.RGB]=e.RGB8,r[Se.RG]=e.RG8,r[Se.RED]=e.R8,r[Se.RGBA_INTEGER]=e.RGBA8UI,r[Se.RGB_INTEGER]=e.RGB8UI,r[Se.RG_INTEGER]=e.RG8UI,r[Se.RED_INTEGER]=e.R8UI,r[Se.ALPHA]=e.ALPHA,r[Se.LUMINANCE]=e.LUMINANCE,r[Se.LUMINANCE_ALPHA]=e.LUMINANCE_ALPHA,r),t[$e.BYTE]=(n={},n[Se.RGBA]=e.RGBA8_SNORM,n[Se.RGB]=e.RGB8_SNORM,n[Se.RG]=e.RG8_SNORM,n[Se.RED]=e.R8_SNORM,n[Se.RGBA_INTEGER]=e.RGBA8I,n[Se.RGB_INTEGER]=e.RGB8I,n[Se.RG_INTEGER]=e.RG8I,n[Se.RED_INTEGER]=e.R8I,n),t[$e.UNSIGNED_SHORT]=(i={},i[Se.RGBA_INTEGER]=e.RGBA16UI,i[Se.RGB_INTEGER]=e.RGB16UI,i[Se.RG_INTEGER]=e.RG16UI,i[Se.RED_INTEGER]=e.R16UI,i[Se.DEPTH_COMPONENT]=e.DEPTH_COMPONENT16,i),t[$e.SHORT]=(o={},o[Se.RGBA_INTEGER]=e.RGBA16I,o[Se.RGB_INTEGER]=e.RGB16I,o[Se.RG_INTEGER]=e.RG16I,o[Se.RED_INTEGER]=e.R16I,o),t[$e.UNSIGNED_INT]=(s={},s[Se.RGBA_INTEGER]=e.RGBA32UI,s[Se.RGB_INTEGER]=e.RGB32UI,s[Se.RG_INTEGER]=e.RG32UI,s[Se.RED_INTEGER]=e.R32UI,s[Se.DEPTH_COMPONENT]=e.DEPTH_COMPONENT24,s),t[$e.INT]=(a={},a[Se.RGBA_INTEGER]=e.RGBA32I,a[Se.RGB_INTEGER]=e.RGB32I,a[Se.RG_INTEGER]=e.RG32I,a[Se.RED_INTEGER]=e.R32I,a),t[$e.FLOAT]=(l={},l[Se.RGBA]=e.RGBA32F,l[Se.RGB]=e.RGB32F,l[Se.RG]=e.RG32F,l[Se.RED]=e.R32F,l[Se.DEPTH_COMPONENT]=e.DEPTH_COMPONENT32F,l),t[$e.HALF_FLOAT]=(u={},u[Se.RGBA]=e.RGBA16F,u[Se.RGB]=e.RGB16F,u[Se.RG]=e.RG16F,u[Se.RED]=e.R16F,u),t[$e.UNSIGNED_SHORT_5_6_5]=(c={},c[Se.RGB]=e.RGB565,c),t[$e.UNSIGNED_SHORT_4_4_4_4]=(f={},f[Se.RGBA]=e.RGBA4,f),t[$e.UNSIGNED_SHORT_5_5_5_1]=(p={},p[Se.RGBA]=e.RGB5_A1,p),t[$e.UNSIGNED_INT_2_10_10_10_REV]=(v={},v[Se.RGBA]=e.RGB10_A2,v[Se.RGBA_INTEGER]=e.RGB10_A2UI,v),t[$e.UNSIGNED_INT_10F_11F_11F_REV]=(g={},g[Se.RGB]=e.R11F_G11F_B10F,g),t[$e.UNSIGNED_INT_5_9_9_9_REV]=(b={},b[Se.RGB]=e.RGB9_E5,b),t[$e.UNSIGNED_INT_24_8]=(_={},_[Se.DEPTH_STENCIL]=e.DEPTH24_STENCIL8,_),t[$e.FLOAT_32_UNSIGNED_INT_24_8_REV]=(w={},w[Se.DEPTH_STENCIL]=e.DEPTH32F_STENCIL8,w),t):O=(x={},x[$e.UNSIGNED_BYTE]=(T={},T[Se.RGBA]=e.RGBA,T[Se.RGB]=e.RGB,T[Se.ALPHA]=e.ALPHA,T[Se.LUMINANCE]=e.LUMINANCE,T[Se.LUMINANCE_ALPHA]=e.LUMINANCE_ALPHA,T),x[$e.UNSIGNED_SHORT_5_6_5]=(I={},I[Se.RGB]=e.RGB,I),x[$e.UNSIGNED_SHORT_4_4_4_4]=(R={},R[Se.RGBA]=e.RGBA,R),x[$e.UNSIGNED_SHORT_5_5_5_1]=(E={},E[Se.RGBA]=e.RGBA,E),x),O}var f_=function(){function e(t){this.texture=t,this.width=-1,this.height=-1,this.dirtyId=-1,this.dirtyStyleId=-1,this.mipmap=!1,this.wrapMode=33071,this.type=$e.UNSIGNED_BYTE,this.internalFormat=Se.RGBA,this.samplerType=0}return e}(),vee=function(){function e(t){this.renderer=t,this.boundTextures=[],this.currentLocation=-1,this.managedTextures=[],this._unknownBoundTextures=!1,this.unknownTexture=new wt,this.hasIntegerTextures=!1}return e.prototype.contextChange=function(){var t=this.gl=this.renderer.gl;this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.webGLVersion=this.renderer.context.webGLVersion,this.internalFormats=mee(t);var r=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS);this.boundTextures.length=r;for(var n=0;n<r;n++)this.boundTextures[n]=null;this.emptyTextures={};var i=new f_(t.createTexture());t.bindTexture(t.TEXTURE_2D,i.texture),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,1,1,0,t.RGBA,t.UNSIGNED_BYTE,new Uint8Array(4)),this.emptyTextures[t.TEXTURE_2D]=i,this.emptyTextures[t.TEXTURE_CUBE_MAP]=new f_(t.createTexture()),t.bindTexture(t.TEXTURE_CUBE_MAP,this.emptyTextures[t.TEXTURE_CUBE_MAP].texture);for(var n=0;n<6;n++)t.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+n,0,t.RGBA,1,1,0,t.RGBA,t.UNSIGNED_BYTE,null);t.texParameteri(t.TEXTURE_CUBE_MAP,t.TEXTURE_MAG_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_CUBE_MAP,t.TEXTURE_MIN_FILTER,t.LINEAR);for(var n=0;n<this.boundTextures.length;n++)this.bind(null,n)},e.prototype.bind=function(t,r){r===void 0&&(r=0);var n=this.gl;if(t=t==null?void 0:t.castToBaseTexture(),t&&t.valid&&!t.parentTextureArray){t.touched=this.renderer.textureGC.count;var i=t._glTextures[this.CONTEXT_UID]||this.initTexture(t);this.boundTextures[r]!==t&&(this.currentLocation!==r&&(this.currentLocation=r,n.activeTexture(n.TEXTURE0+r)),n.bindTexture(t.target,i.texture)),i.dirtyId!==t.dirtyId&&(this.currentLocation!==r&&(this.currentLocation=r,n.activeTexture(n.TEXTURE0+r)),this.updateTexture(t)),this.boundTextures[r]=t}else this.currentLocation!==r&&(this.currentLocation=r,n.activeTexture(n.TEXTURE0+r)),n.bindTexture(n.TEXTURE_2D,this.emptyTextures[n.TEXTURE_2D].texture),this.boundTextures[r]=null},e.prototype.reset=function(){this._unknownBoundTextures=!0,this.hasIntegerTextures=!1,this.currentLocation=-1;for(var t=0;t<this.boundTextures.length;t++)this.boundTextures[t]=this.unknownTexture},e.prototype.unbind=function(t){var r=this,n=r.gl,i=r.boundTextures;if(this._unknownBoundTextures){this._unknownBoundTextures=!1;for(var o=0;o<i.length;o++)i[o]===this.unknownTexture&&this.bind(null,o)}for(var o=0;o<i.length;o++)i[o]===t&&(this.currentLocation!==o&&(n.activeTexture(n.TEXTURE0+o),this.currentLocation=o),n.bindTexture(t.target,this.emptyTextures[t.target].texture),i[o]=null)},e.prototype.ensureSamplerType=function(t){var r=this,n=r.boundTextures,i=r.hasIntegerTextures,o=r.CONTEXT_UID;if(!!i)for(var s=t-1;s>=0;--s){var a=n[s];if(a){var l=a._glTextures[o];l.samplerType!==wg.FLOAT&&this.renderer.texture.unbind(a)}}},e.prototype.initTexture=function(t){var r=new f_(this.gl.createTexture());return r.dirtyId=-1,t._glTextures[this.CONTEXT_UID]=r,this.managedTextures.push(t),t.on("dispose",this.destroyTexture,this),r},e.prototype.initTextureType=function(t,r){var n,i;r.internalFormat=(i=(n=this.internalFormats[t.type])===null||n===void 0?void 0:n[t.format])!==null&&i!==void 0?i:t.format,this.webGLVersion===2&&t.type===$e.HALF_FLOAT?r.type=this.gl.HALF_FLOAT:r.type=t.type},e.prototype.updateTexture=function(t){var r=t._glTextures[this.CONTEXT_UID];if(!!r){var n=this.renderer;if(this.initTextureType(t,r),t.resource&&t.resource.upload(n,t,r))r.samplerType!==wg.FLOAT&&(this.hasIntegerTextures=!0);else{var i=t.realWidth,o=t.realHeight,s=n.gl;(r.width!==i||r.height!==o||r.dirtyId<0)&&(r.width=i,r.height=o,s.texImage2D(t.target,0,r.internalFormat,i,o,0,t.format,r.type,null))}t.dirtyStyleId!==r.dirtyStyleId&&this.updateTextureStyle(t),r.dirtyId=t.dirtyId}},e.prototype.destroyTexture=function(t,r){var n=this.gl;if(t=t.castToBaseTexture(),t._glTextures[this.CONTEXT_UID]&&(this.unbind(t),n.deleteTexture(t._glTextures[this.CONTEXT_UID].texture),t.off("dispose",this.destroyTexture,this),delete t._glTextures[this.CONTEXT_UID],!r)){var i=this.managedTextures.indexOf(t);i!==-1&&zs(this.managedTextures,i,1)}},e.prototype.updateTextureStyle=function(t){var r=t._glTextures[this.CONTEXT_UID];!r||((t.mipmap===Ks.POW2||this.webGLVersion!==2)&&!t.isPowerOfTwo?r.mipmap=!1:r.mipmap=t.mipmap>=1,this.webGLVersion!==2&&!t.isPowerOfTwo?r.wrapMode=Jo.CLAMP:r.wrapMode=t.wrapMode,t.resource&&t.resource.style(this.renderer,t,r)||this.setStyle(t,r),r.dirtyStyleId=t.dirtyStyleId)},e.prototype.setStyle=function(t,r){var n=this.gl;if(r.mipmap&&t.mipmap!==Ks.ON_MANUAL&&n.generateMipmap(t.target),n.texParameteri(t.target,n.TEXTURE_WRAP_S,r.wrapMode),n.texParameteri(t.target,n.TEXTURE_WRAP_T,r.wrapMode),r.mipmap){n.texParameteri(t.target,n.TEXTURE_MIN_FILTER,t.scaleMode===Tt.LINEAR?n.LINEAR_MIPMAP_LINEAR:n.NEAREST_MIPMAP_NEAREST);var i=this.renderer.context.extensions.anisotropicFiltering;if(i&&t.anisotropicLevel>0&&t.scaleMode===Tt.LINEAR){var o=Math.min(t.anisotropicLevel,n.getParameter(i.MAX_TEXTURE_MAX_ANISOTROPY_EXT));n.texParameterf(t.target,i.TEXTURE_MAX_ANISOTROPY_EXT,o)}}else n.texParameteri(t.target,n.TEXTURE_MIN_FILTER,t.scaleMode===Tt.LINEAR?n.LINEAR:n.NEAREST);n.texParameteri(t.target,n.TEXTURE_MAG_FILTER,t.scaleMode===Tt.LINEAR?n.LINEAR:n.NEAREST)},e.prototype.destroy=function(){this.renderer=null},e}(),d_=new er,gee=function(e){tr(t,e);function t(r,n){r===void 0&&(r=qd.UNKNOWN);var i=e.call(this)||this;return n=Object.assign({},We.RENDER_OPTIONS,n),i.options=n,i.type=r,i.screen=new Fe(0,0,n.width,n.height),i.view=n.view||document.createElement("canvas"),i.resolution=n.resolution||We.RESOLUTION,i.useContextAlpha=n.useContextAlpha,i.autoDensity=!!n.autoDensity,i.preserveDrawingBuffer=n.preserveDrawingBuffer,i.clearBeforeRender=n.clearBeforeRender,i._backgroundColor=0,i._backgroundColorRgba=[0,0,0,1],i._backgroundColorString="#000000",i.backgroundColor=n.backgroundColor||i._backgroundColor,i.backgroundAlpha=n.backgroundAlpha,n.transparent!==void 0&&(Zd("6.0.0","Option transparent is deprecated, please use backgroundAlpha instead."),i.useContextAlpha=n.transparent,i.backgroundAlpha=n.transparent?0:1),i._lastObjectRendered=null,i.plugins={},i}return t.prototype.initPlugins=function(r){for(var n in r)this.plugins[n]=new r[n](this)},Object.defineProperty(t.prototype,"width",{get:function(){return this.view.width},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this.view.height},enumerable:!1,configurable:!0}),t.prototype.resize=function(r,n){this.view.width=Math.round(r*this.resolution),this.view.height=Math.round(n*this.resolution);var i=this.view.width/this.resolution,o=this.view.height/this.resolution;this.screen.width=i,this.screen.height=o,this.autoDensity&&(this.view.style.width=i+"px",this.view.style.height=o+"px"),this.emit("resize",i,o)},t.prototype.generateTexture=function(r,n,i,o){n===void 0&&(n={}),typeof n=="number"&&(Zd("6.1.0","generateTexture options (scaleMode, resolution, region) are now object options."),n={scaleMode:n,resolution:i,region:o});var s=n.region,a=eQ(n,["region"]);o=s||r.getLocalBounds(null,!0),o.width===0&&(o.width=1),o.height===0&&(o.height=1);var l=gu.create(Lw({width:o.width,height:o.height},a));return d_.tx=-o.x,d_.ty=-o.y,this.render(r,{renderTexture:l,clear:!1,transform:d_,skipUpdateTransform:!!r.parent}),l},t.prototype.destroy=function(r){for(var n in this.plugins)this.plugins[n].destroy(),this.plugins[n]=null;r&&this.view.parentNode&&this.view.parentNode.removeChild(this.view);var i=this;i.plugins=null,i.type=qd.UNKNOWN,i.view=null,i.screen=null,i._tempDisplayObjectParent=null,i.options=null,this._backgroundColorRgba=null,this._backgroundColorString=null,this._lastObjectRendered=null},Object.defineProperty(t.prototype,"backgroundColor",{get:function(){return this._backgroundColor},set:function(r){this._backgroundColor=r,this._backgroundColorString=vO(r),sl(r,this._backgroundColorRgba)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"backgroundAlpha",{get:function(){return this._backgroundColorRgba[3]},set:function(r){this._backgroundColorRgba[3]=r},enumerable:!1,configurable:!0}),t}(Ah),yee=function(){function e(t){this.buffer=t||null,this.updateID=-1,this.byteLength=-1,this.refCount=0}return e}(),_ee=function(){function e(t){this.renderer=t,this.managedBuffers={},this.boundBufferBases={}}return e.prototype.destroy=function(){this.renderer=null},e.prototype.contextChange=function(){this.disposeAll(!0),this.gl=this.renderer.gl,this.CONTEXT_UID=this.renderer.CONTEXT_UID},e.prototype.bind=function(t){var r=this,n=r.gl,i=r.CONTEXT_UID,o=t._glBuffers[i]||this.createGLBuffer(t);n.bindBuffer(t.type,o.buffer)},e.prototype.bindBufferBase=function(t,r){var n=this,i=n.gl,o=n.CONTEXT_UID;if(this.boundBufferBases[r]!==t){var s=t._glBuffers[o]||this.createGLBuffer(t);this.boundBufferBases[r]=t,i.bindBufferBase(i.UNIFORM_BUFFER,r,s.buffer)}},e.prototype.bindBufferRange=function(t,r,n){var i=this,o=i.gl,s=i.CONTEXT_UID;n=n||0;var a=t._glBuffers[s]||this.createGLBuffer(t);o.bindBufferRange(o.UNIFORM_BUFFER,r||0,a.buffer,n*256,256)},e.prototype.update=function(t){var r=this,n=r.gl,i=r.CONTEXT_UID,o=t._glBuffers[i];if(t._updateID!==o.updateID)if(o.updateID=t._updateID,n.bindBuffer(t.type,o.buffer),o.byteLength>=t.data.byteLength)n.bufferSubData(t.type,0,t.data);else{var s=t.static?n.STATIC_DRAW:n.DYNAMIC_DRAW;o.byteLength=t.data.byteLength,n.bufferData(t.type,t.data,s)}},e.prototype.dispose=function(t,r){if(!!this.managedBuffers[t.id]){delete this.managedBuffers[t.id];var n=t._glBuffers[this.CONTEXT_UID],i=this.gl;t.disposeRunner.remove(this),n&&(r||i.deleteBuffer(n.buffer),delete t._glBuffers[this.CONTEXT_UID])}},e.prototype.disposeAll=function(t){for(var r=Object.keys(this.managedBuffers),n=0;n<r.length;n++)this.dispose(this.managedBuffers[r[n]],t)},e.prototype.createGLBuffer=function(t){var r=this,n=r.CONTEXT_UID,i=r.gl;return t._glBuffers[n]=new yee(i.createBuffer()),this.managedBuffers[t.id]=t,t.disposeRunner.add(this),t._glBuffers[n]},e}(),_l=function(e){tr(t,e);function t(r){var n=e.call(this,qd.WEBGL,r)||this;return r=n.options,n.gl=null,n.CONTEXT_UID=0,n.runners={destroy:new Ln("destroy"),contextChange:new Ln("contextChange"),reset:new Ln("reset"),update:new Ln("update"),postrender:new Ln("postrender"),prerender:new Ln("prerender"),resize:new Ln("resize")},n.runners.contextChange.add(n),n.globalUniforms=new ru({projectionMatrix:new er},!0),n.addSystem(zQ,"mask").addSystem(_Q,"context").addSystem(dee,"state").addSystem(oee,"shader").addSystem(vee,"texture").addSystem(_ee,"buffer").addSystem(TQ,"geometry").addSystem(xQ,"framebuffer").addSystem(VQ,"scissor").addSystem(XQ,"stencil").addSystem(WQ,"projection").addSystem(pee,"textureGC").addSystem(gQ,"filter").addSystem(YQ,"renderTexture").addSystem(yQ,"batch"),n.initPlugins(t.__plugins),n.multisample=void 0,r.context?n.context.initFromContext(r.context):n.context.initFromOptions({alpha:!!n.useContextAlpha,antialias:r.antialias,premultipliedAlpha:n.useContextAlpha&&n.useContextAlpha!=="notMultiplied",stencil:!0,preserveDrawingBuffer:r.preserveDrawingBuffer,powerPreference:n.options.powerPreference}),n.renderingToScreen=!0,HK(n.context.webGLVersion===2?"WebGL 2":"WebGL 1"),n.resize(n.options.width,n.options.height),n}return t.create=function(r){if(zK())return new t(r);throw new Error('WebGL unsupported in this browser, use "pixi.js-legacy" for fallback canvas2d support.')},t.prototype.contextChange=function(){var r=this.gl,n;if(this.context.webGLVersion===1){var i=r.getParameter(r.FRAMEBUFFER_BINDING);r.bindFramebuffer(r.FRAMEBUFFER,null),n=r.getParameter(r.SAMPLES),r.bindFramebuffer(r.FRAMEBUFFER,i)}else{var i=r.getParameter(r.DRAW_FRAMEBUFFER_BINDING);r.bindFramebuffer(r.DRAW_FRAMEBUFFER,null),n=r.getParameter(r.SAMPLES),r.bindFramebuffer(r.DRAW_FRAMEBUFFER,i)}n>=Ur.HIGH?this.multisample=Ur.HIGH:n>=Ur.MEDIUM?this.multisample=Ur.MEDIUM:n>=Ur.LOW?this.multisample=Ur.LOW:this.multisample=Ur.NONE},t.prototype.addSystem=function(r,n){var i=new r(this);if(this[n])throw new Error('Whoops! The name "'+n+'" is already in use');this[n]=i;for(var o in this.runners)this.runners[o].add(i);return this},t.prototype.render=function(r,n){var i,o,s,a;if(n&&(n instanceof gu?(Zd("6.0.0","Renderer#render arguments changed, use options instead."),i=n,o=arguments[2],s=arguments[3],a=arguments[4]):(i=n.renderTexture,o=n.clear,s=n.transform,a=n.skipUpdateTransform)),this.renderingToScreen=!i,this.runners.prerender.emit(),this.emit("prerender"),this.projection.transform=s,!this.context.isLost){if(i||(this._lastObjectRendered=r),!a){var l=r.enableTempParent();r.updateTransform(),r.disableTempParent(l)}this.renderTexture.bind(i),this.batch.currentRenderer.start(),(o!==void 0?o:this.clearBeforeRender)&&this.renderTexture.clear(),r.render(this),this.batch.currentRenderer.flush(),i&&i.baseTexture.update(),this.runners.postrender.emit(),this.projection.transform=null,this.emit("postrender")}},t.prototype.generateTexture=function(r,n,i,o){n===void 0&&(n={});var s=e.prototype.generateTexture.call(this,r,n,i,o);return this.framebuffer.blit(),s},t.prototype.resize=function(r,n){e.prototype.resize.call(this,r,n),this.runners.resize.emit(this.screen.height,this.screen.width)},t.prototype.reset=function(){return this.runners.reset.emit(),this},t.prototype.clear=function(){this.renderTexture.bind(),this.renderTexture.clear()},t.prototype.destroy=function(r){this.runners.destroy.emit();for(var n in this.runners)this.runners[n].destroy();e.prototype.destroy.call(this,r),this.gl=null},Object.defineProperty(t.prototype,"extract",{get:function(){return Zd("6.0.0","Renderer#extract has been deprecated, please use Renderer#plugins.extract instead."),this.plugins.extract},enumerable:!1,configurable:!0}),t.registerPlugin=function(r,n){t.__plugins=t.__plugins||{},t.__plugins[r]=n},t}(gee);function bee(e){return _l.create(e)}var wee=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
    vTextureCoord = aTextureCoord;
}`,xee=`attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

vec2 filterTextureCoord( void )
{
    return aVertexPosition * (outputFrame.zw * inputSize.zw);
}

void main(void)
{
    gl_Position = filterVertexPosition();
    vTextureCoord = filterTextureCoord();
}
`,Tee=wee,$O=xee,Fw=function(){function e(){this.texArray=null,this.blend=0,this.type=Ci.TRIANGLES,this.start=0,this.size=0,this.data=null}return e}(),Sg=function(){function e(){this.elements=[],this.ids=[],this.count=0}return e.prototype.clear=function(){for(var t=0;t<this.count;t++)this.elements[t]=null;this.count=0},e}(),Mw=function(){function e(t){typeof t=="number"?this.rawBinaryData=new ArrayBuffer(t):t instanceof Uint8Array?this.rawBinaryData=t.buffer:this.rawBinaryData=t,this.uint32View=new Uint32Array(this.rawBinaryData),this.float32View=new Float32Array(this.rawBinaryData)}return Object.defineProperty(e.prototype,"int8View",{get:function(){return this._int8View||(this._int8View=new Int8Array(this.rawBinaryData)),this._int8View},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"uint8View",{get:function(){return this._uint8View||(this._uint8View=new Uint8Array(this.rawBinaryData)),this._uint8View},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"int16View",{get:function(){return this._int16View||(this._int16View=new Int16Array(this.rawBinaryData)),this._int16View},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"uint16View",{get:function(){return this._uint16View||(this._uint16View=new Uint16Array(this.rawBinaryData)),this._uint16View},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"int32View",{get:function(){return this._int32View||(this._int32View=new Int32Array(this.rawBinaryData)),this._int32View},enumerable:!1,configurable:!0}),e.prototype.view=function(t){return this[t+"View"]},e.prototype.destroy=function(){this.rawBinaryData=null,this._int8View=null,this._uint8View=null,this._int16View=null,this._uint16View=null,this._int32View=null,this.uint32View=null,this.float32View=null},e.sizeOf=function(t){switch(t){case"int8":case"uint8":return 1;case"int16":case"uint16":return 2;case"int32":case"uint32":case"float32":return 4;default:throw new Error(t+" isn't a valid view type")}},e}(),See=function(e){tr(t,e);function t(r){var n=e.call(this,r)||this;return n.shaderGenerator=null,n.geometryClass=null,n.vertexSize=null,n.state=gl.for2d(),n.size=We.SPRITE_BATCH_SIZE*4,n._vertexCount=0,n._indexCount=0,n._bufferedElements=[],n._bufferedTextures=[],n._bufferSize=0,n._shader=null,n._packedGeometries=[],n._packedGeometryPoolSize=2,n._flushId=0,n._aBuffers={},n._iBuffers={},n.MAX_TEXTURES=1,n.renderer.on("prerender",n.onPrerender,n),r.runners.contextChange.add(n),n._dcIndex=0,n._aIndex=0,n._iIndex=0,n._attributeBuffer=null,n._indexBuffer=null,n._tempBoundTextures=[],n}return t.prototype.contextChange=function(){var r=this.renderer.gl;We.PREFER_ENV===Ys.WEBGL_LEGACY?this.MAX_TEXTURES=1:(this.MAX_TEXTURES=Math.min(r.getParameter(r.MAX_TEXTURE_IMAGE_UNITS),We.SPRITE_MAX_TEXTURES),this.MAX_TEXTURES=LQ(this.MAX_TEXTURES,r)),this._shader=this.shaderGenerator.generateShader(this.MAX_TEXTURES);for(var n=0;n<this._packedGeometryPoolSize;n++)this._packedGeometries[n]=new this.geometryClass;this.initFlushBuffers()},t.prototype.initFlushBuffers=function(){for(var r=t._drawCallPool,n=t._textureArrayPool,i=this.size/4,o=Math.floor(i/this.MAX_TEXTURES)+1;r.length<i;)r.push(new Fw);for(;n.length<o;)n.push(new Sg);for(var s=0;s<this.MAX_TEXTURES;s++)this._tempBoundTextures[s]=null},t.prototype.onPrerender=function(){this._flushId=0},t.prototype.render=function(r){!r._texture.valid||(this._vertexCount+r.vertexData.length/2>this.size&&this.flush(),this._vertexCount+=r.vertexData.length/2,this._indexCount+=r.indices.length,this._bufferedTextures[this._bufferSize]=r._texture.baseTexture,this._bufferedElements[this._bufferSize++]=r)},t.prototype.buildTexturesAndDrawCalls=function(){var r=this,n=r._bufferedTextures,i=r.MAX_TEXTURES,o=t._textureArrayPool,s=this.renderer.batch,a=this._tempBoundTextures,l=this.renderer.textureGC.count,u=++wt._globalBatch,c=0,f=o[0],p=0;s.copyBoundTextures(a,i);for(var v=0;v<this._bufferSize;++v){var g=n[v];n[v]=null,g._batchEnabled!==u&&(f.count>=i&&(s.boundArray(f,a,u,i),this.buildDrawCalls(f,p,v),p=v,f=o[++c],++u),g._batchEnabled=u,g.touched=l,f.elements[f.count++]=g)}f.count>0&&(s.boundArray(f,a,u,i),this.buildDrawCalls(f,p,this._bufferSize),++c,++u);for(var v=0;v<a.length;v++)a[v]=null;wt._globalBatch=u},t.prototype.buildDrawCalls=function(r,n,i){var o=this,s=o._bufferedElements,a=o._attributeBuffer,l=o._indexBuffer,u=o.vertexSize,c=t._drawCallPool,f=this._dcIndex,p=this._aIndex,v=this._iIndex,g=c[f];g.start=this._iIndex,g.texArray=r;for(var b=n;b<i;++b){var _=s[b],w=_._texture.baseTexture,x=yO[w.alphaMode?1:0][_.blendMode];s[b]=null,n<b&&g.blend!==x&&(g.size=v-g.start,n=b,g=c[++f],g.texArray=r,g.start=v),this.packInterleavedGeometry(_,a,l,p,v),p+=_.vertexData.length/2*u,v+=_.indices.length,g.blend=x}n<i&&(g.size=v-g.start,++f),this._dcIndex=f,this._aIndex=p,this._iIndex=v},t.prototype.bindAndClearTexArray=function(r){for(var n=this.renderer.texture,i=0;i<r.count;i++)n.bind(r.elements[i],r.ids[i]),r.elements[i]=null;r.count=0},t.prototype.updateGeometry=function(){var r=this,n=r._packedGeometries,i=r._attributeBuffer,o=r._indexBuffer;We.CAN_UPLOAD_SAME_BUFFER?(n[this._flushId]._buffer.update(i.rawBinaryData),n[this._flushId]._indexBuffer.update(o),this.renderer.geometry.updateBuffers()):(this._packedGeometryPoolSize<=this._flushId&&(this._packedGeometryPoolSize++,n[this._flushId]=new this.geometryClass),n[this._flushId]._buffer.update(i.rawBinaryData),n[this._flushId]._indexBuffer.update(o),this.renderer.geometry.bind(n[this._flushId]),this.renderer.geometry.updateBuffers(),this._flushId++)},t.prototype.drawBatches=function(){for(var r=this._dcIndex,n=this.renderer,i=n.gl,o=n.state,s=t._drawCallPool,a=null,l=0;l<r;l++){var u=s[l],c=u.texArray,f=u.type,p=u.size,v=u.start,g=u.blend;a!==c&&(a=c,this.bindAndClearTexArray(c)),this.state.blendMode=g,o.set(this.state),i.drawElements(f,p,i.UNSIGNED_SHORT,v*2)}},t.prototype.flush=function(){this._vertexCount!==0&&(this._attributeBuffer=this.getAttributeBuffer(this._vertexCount),this._indexBuffer=this.getIndexBuffer(this._indexCount),this._aIndex=0,this._iIndex=0,this._dcIndex=0,this.buildTexturesAndDrawCalls(),this.updateGeometry(),this.drawBatches(),this._bufferSize=0,this._vertexCount=0,this._indexCount=0)},t.prototype.start=function(){this.renderer.state.set(this.state),this.renderer.texture.ensureSamplerType(this.MAX_TEXTURES),this.renderer.shader.bind(this._shader),We.CAN_UPLOAD_SAME_BUFFER&&this.renderer.geometry.bind(this._packedGeometries[this._flushId])},t.prototype.stop=function(){this.flush()},t.prototype.destroy=function(){for(var r=0;r<this._packedGeometryPoolSize;r++)this._packedGeometries[r]&&this._packedGeometries[r].destroy();this.renderer.off("prerender",this.onPrerender,this),this._aBuffers=null,this._iBuffers=null,this._packedGeometries=null,this._attributeBuffer=null,this._indexBuffer=null,this._shader&&(this._shader.destroy(),this._shader=null),e.prototype.destroy.call(this)},t.prototype.getAttributeBuffer=function(r){var n=xg(Math.ceil(r/8)),i=$C(n),o=n*8;this._aBuffers.length<=i&&(this._iBuffers.length=i+1);var s=this._aBuffers[o];return s||(this._aBuffers[o]=s=new Mw(o*this.vertexSize*4)),s},t.prototype.getIndexBuffer=function(r){var n=xg(Math.ceil(r/12)),i=$C(n),o=n*12;this._iBuffers.length<=i&&(this._iBuffers.length=i+1);var s=this._iBuffers[i];return s||(this._iBuffers[i]=s=new Uint16Array(o)),s},t.prototype.packInterleavedGeometry=function(r,n,i,o,s){for(var a=n.uint32View,l=n.float32View,u=o/this.vertexSize,c=r.uvs,f=r.indices,p=r.vertexData,v=r._texture.baseTexture._batchLocation,g=Math.min(r.worldAlpha,1),b=g<1&&r._texture.baseTexture.alphaMode?Vy(r._tintRGB,g):r._tintRGB+(g*255<<24),_=0;_<p.length;_+=2)l[o++]=p[_],l[o++]=p[_+1],l[o++]=c[_],l[o++]=c[_+1],a[o++]=b,l[o++]=v;for(var _=0;_<f.length;_++)i[s++]=u+f[_]},t._drawCallPool=[],t._textureArrayPool=[],t}(Xy),Eee=function(){function e(t,r){if(this.vertexSrc=t,this.fragTemplate=r,this.programCache={},this.defaultGroupCache={},r.indexOf("%count%")<0)throw new Error('Fragment template must contain "%count%".');if(r.indexOf("%forloop%")<0)throw new Error('Fragment template must contain "%forloop%".')}return e.prototype.generateShader=function(t){if(!this.programCache[t]){for(var r=new Int32Array(t),n=0;n<t;n++)r[n]=n;this.defaultGroupCache[t]=ru.from({uSamplers:r},!0);var i=this.fragTemplate;i=i.replace(/%count%/gi,""+t),i=i.replace(/%forloop%/gi,this.generateSampleSrc(t)),this.programCache[t]=new Oh(this.vertexSrc,i)}var o={tint:new Float32Array([1,1,1,1]),translationMatrix:new er,default:this.defaultGroupCache[t]};return new Vs(this.programCache[t],o)},e.prototype.generateSampleSrc=function(t){var r="";r+=`
`,r+=`
`;for(var n=0;n<t;n++)n>0&&(r+=`
else `),n<t-1&&(r+="if(vTextureId < "+n+".5)"),r+=`
{`,r+=`
	color = texture2D(uSamplers[`+n+"], vTextureCoord);",r+=`
}`;return r+=`
`,r+=`
`,r},e}(),HO=function(e){tr(t,e);function t(r){r===void 0&&(r=!1);var n=e.call(this)||this;return n._buffer=new Ar(null,r,!1),n._indexBuffer=new Ar(null,r,!0),n.addAttribute("aVertexPosition",n._buffer,2,!1,$e.FLOAT).addAttribute("aTextureCoord",n._buffer,2,!1,$e.FLOAT).addAttribute("aColor",n._buffer,4,!0,$e.UNSIGNED_BYTE).addAttribute("aTextureId",n._buffer,1,!0,$e.FLOAT).addIndex(n._indexBuffer),n}return t}(kh),T6=`precision highp float;
attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;
attribute vec4 aColor;
attribute float aTextureId;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform vec4 tint;

varying vec2 vTextureCoord;
varying vec4 vColor;
varying float vTextureId;

void main(void){
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = aTextureCoord;
    vTextureId = aTextureId;
    vColor = aColor * tint;
}
`,S6=`varying vec2 vTextureCoord;
varying vec4 vColor;
varying float vTextureId;
uniform sampler2D uSamplers[%count%];

void main(void){
    vec4 color;
    %forloop%
    gl_FragColor = color * vColor;
}
`,Cee=function(){function e(){}return e.create=function(t){var r=Object.assign({vertex:T6,fragment:S6,geometryClass:HO,vertexSize:6},t),n=r.vertex,i=r.fragment,o=r.vertexSize,s=r.geometryClass;return function(a){tr(l,a);function l(u){var c=a.call(this,u)||this;return c.shaderGenerator=new Eee(n,i),c.geometryClass=s,c.vertexSize=o,c}return l}(See)},Object.defineProperty(e,"defaultVertexSrc",{get:function(){return T6},enumerable:!1,configurable:!0}),Object.defineProperty(e,"defaultFragmentTemplate",{get:function(){return S6},enumerable:!1,configurable:!0}),e}(),Iee=Cee.create();/*!
 * @pixi/app - v6.4.2
 * Compiled Thu, 02 Jun 2022 15:39:26 UTC
 *
 * @pixi/app is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var Lh=function(){function e(t){var r=this;this.stage=new Pi,t=Object.assign({forceCanvas:!1},t),this.renderer=bee(t),e._plugins.forEach(function(n){n.init.call(r,t)})}return e.registerPlugin=function(t){e._plugins.push(t)},e.prototype.render=function(){this.renderer.render(this.stage)},Object.defineProperty(e.prototype,"view",{get:function(){return this.renderer.view},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"screen",{get:function(){return this.renderer.screen},enumerable:!1,configurable:!0}),e.prototype.destroy=function(t,r){var n=this,i=e._plugins.slice(0);i.reverse(),i.forEach(function(o){o.destroy.call(n)}),this.stage.destroy(r),this.stage=null,this.renderer.destroy(t),this.renderer=null},e._plugins=[],e}(),Nee=function(){function e(){}return e.init=function(t){var r=this;Object.defineProperty(this,"resizeTo",{set:function(n){globalThis.removeEventListener("resize",this.queueResize),this._resizeTo=n,n&&(globalThis.addEventListener("resize",this.queueResize),this.resize())},get:function(){return this._resizeTo}}),this.queueResize=function(){!r._resizeTo||(r.cancelResize(),r._resizeId=requestAnimationFrame(function(){return r.resize()}))},this.cancelResize=function(){r._resizeId&&(cancelAnimationFrame(r._resizeId),r._resizeId=null)},this.resize=function(){if(!!r._resizeTo){r.cancelResize();var n,i;if(r._resizeTo===globalThis.window)n=globalThis.innerWidth,i=globalThis.innerHeight;else{var o=r._resizeTo,s=o.clientWidth,a=o.clientHeight;n=s,i=a}r.renderer.resize(n,i)}},this._resizeId=null,this._resizeTo=null,this.resizeTo=t.resizeTo||null},e.destroy=function(){globalThis.removeEventListener("resize",this.queueResize),this.cancelResize(),this.cancelResize=null,this.queueResize=null,this.resizeTo=null,this.resize=null},e}();Lh.registerPlugin(Nee);/*!
 * @pixi/extract - v6.4.2
 * Compiled Thu, 02 Jun 2022 15:39:26 UTC
 *
 * @pixi/extract is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var p_=/iPhone/i,E6=/iPod/i,C6=/iPad/i,I6=/\biOS-universal(?:.+)Mac\b/i,m_=/\bAndroid(?:.+)Mobile\b/i,N6=/Android/i,lc=/(?:SD4930UR|\bSilk(?:.+)Mobile\b)/i,Sv=/Silk/i,Ts=/Windows Phone/i,P6=/\bWindows(?:.+)ARM\b/i,A6=/BlackBerry/i,R6=/BB10/i,k6=/Opera Mini/i,O6=/\b(CriOS|Chrome)(?:.+)Mobile/i,L6=/Mobile(?:.+)Firefox\b/i,U6=function(e){return typeof e<"u"&&e.platform==="MacIntel"&&typeof e.maxTouchPoints=="number"&&e.maxTouchPoints>1&&typeof MSStream>"u"};function Pee(e){return function(t){return t.test(e)}}function Aee(e){var t={userAgent:"",platform:"",maxTouchPoints:0};!e&&typeof navigator<"u"?t={userAgent:navigator.userAgent,platform:navigator.platform,maxTouchPoints:navigator.maxTouchPoints||0}:typeof e=="string"?t.userAgent=e:e&&e.userAgent&&(t={userAgent:e.userAgent,platform:e.platform,maxTouchPoints:e.maxTouchPoints||0});var r=t.userAgent,n=r.split("[FBAN");typeof n[1]<"u"&&(r=n[0]),n=r.split("Twitter"),typeof n[1]<"u"&&(r=n[0]);var i=Pee(r),o={apple:{phone:i(p_)&&!i(Ts),ipod:i(E6),tablet:!i(p_)&&(i(C6)||U6(t))&&!i(Ts),universal:i(I6),device:(i(p_)||i(E6)||i(C6)||i(I6)||U6(t))&&!i(Ts)},amazon:{phone:i(lc),tablet:!i(lc)&&i(Sv),device:i(lc)||i(Sv)},android:{phone:!i(Ts)&&i(lc)||!i(Ts)&&i(m_),tablet:!i(Ts)&&!i(lc)&&!i(m_)&&(i(Sv)||i(N6)),device:!i(Ts)&&(i(lc)||i(Sv)||i(m_)||i(N6))||i(/\bokhttp\b/i)},windows:{phone:i(Ts),tablet:i(P6),device:i(Ts)||i(P6)},other:{blackberry:i(A6),blackberry10:i(R6),opera:i(k6),firefox:i(L6),chrome:i(O6),device:i(A6)||i(R6)||i(k6)||i(L6)||i(O6)},any:!1,phone:!1,tablet:!1};return o.any=o.apple.device||o.android.device||o.windows.device||o.other.device,o.phone=o.apple.phone||o.android.phone||o.windows.phone,o.tablet=o.apple.tablet||o.android.tablet||o.windows.tablet,o}/*!
 * @pixi/settings - v6.4.2
 * Compiled Thu, 02 Jun 2022 15:39:26 UTC
 *
 * @pixi/settings is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var Uc=Aee(globalThis.navigator);function Ree(e){var t=!0;if(Uc.tablet||Uc.phone){if(Uc.apple.device){var r=navigator.userAgent.match(/OS (\d+)_(\d+)?/);if(r){var n=parseInt(r[1],10);n<11&&(t=!1)}}if(Uc.android.device){var r=navigator.userAgent.match(/Android\s([0-9.]*)/);if(r){var n=parseInt(r[1],10);n<7&&(t=!1)}}}return t?e:4}function kee(){return!Uc.apple.device}/*!
 * @pixi/constants - v6.4.2
 * Compiled Thu, 02 Jun 2022 15:39:26 UTC
 *
 * @pixi/constants is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var F6;(function(e){e[e.WEBGL_LEGACY=0]="WEBGL_LEGACY",e[e.WEBGL=1]="WEBGL",e[e.WEBGL2=2]="WEBGL2"})(F6||(F6={}));var M6;(function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.WEBGL=1]="WEBGL",e[e.CANVAS=2]="CANVAS"})(M6||(M6={}));var B6;(function(e){e[e.COLOR=16384]="COLOR",e[e.DEPTH=256]="DEPTH",e[e.STENCIL=1024]="STENCIL"})(B6||(B6={}));var D6;(function(e){e[e.NORMAL=0]="NORMAL",e[e.ADD=1]="ADD",e[e.MULTIPLY=2]="MULTIPLY",e[e.SCREEN=3]="SCREEN",e[e.OVERLAY=4]="OVERLAY",e[e.DARKEN=5]="DARKEN",e[e.LIGHTEN=6]="LIGHTEN",e[e.COLOR_DODGE=7]="COLOR_DODGE",e[e.COLOR_BURN=8]="COLOR_BURN",e[e.HARD_LIGHT=9]="HARD_LIGHT",e[e.SOFT_LIGHT=10]="SOFT_LIGHT",e[e.DIFFERENCE=11]="DIFFERENCE",e[e.EXCLUSION=12]="EXCLUSION",e[e.HUE=13]="HUE",e[e.SATURATION=14]="SATURATION",e[e.COLOR=15]="COLOR",e[e.LUMINOSITY=16]="LUMINOSITY",e[e.NORMAL_NPM=17]="NORMAL_NPM",e[e.ADD_NPM=18]="ADD_NPM",e[e.SCREEN_NPM=19]="SCREEN_NPM",e[e.NONE=20]="NONE",e[e.SRC_OVER=0]="SRC_OVER",e[e.SRC_IN=21]="SRC_IN",e[e.SRC_OUT=22]="SRC_OUT",e[e.SRC_ATOP=23]="SRC_ATOP",e[e.DST_OVER=24]="DST_OVER",e[e.DST_IN=25]="DST_IN",e[e.DST_OUT=26]="DST_OUT",e[e.DST_ATOP=27]="DST_ATOP",e[e.ERASE=26]="ERASE",e[e.SUBTRACT=28]="SUBTRACT",e[e.XOR=29]="XOR"})(D6||(D6={}));var G6;(function(e){e[e.POINTS=0]="POINTS",e[e.LINES=1]="LINES",e[e.LINE_LOOP=2]="LINE_LOOP",e[e.LINE_STRIP=3]="LINE_STRIP",e[e.TRIANGLES=4]="TRIANGLES",e[e.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",e[e.TRIANGLE_FAN=6]="TRIANGLE_FAN"})(G6||(G6={}));var j6;(function(e){e[e.RGBA=6408]="RGBA",e[e.RGB=6407]="RGB",e[e.RG=33319]="RG",e[e.RED=6403]="RED",e[e.RGBA_INTEGER=36249]="RGBA_INTEGER",e[e.RGB_INTEGER=36248]="RGB_INTEGER",e[e.RG_INTEGER=33320]="RG_INTEGER",e[e.RED_INTEGER=36244]="RED_INTEGER",e[e.ALPHA=6406]="ALPHA",e[e.LUMINANCE=6409]="LUMINANCE",e[e.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",e[e.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",e[e.DEPTH_STENCIL=34041]="DEPTH_STENCIL"})(j6||(j6={}));var $6;(function(e){e[e.TEXTURE_2D=3553]="TEXTURE_2D",e[e.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",e[e.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",e[e.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",e[e.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",e[e.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",e[e.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",e[e.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",e[e.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z"})($6||($6={}));var H6;(function(e){e[e.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",e[e.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",e[e.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",e[e.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",e[e.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",e[e.UNSIGNED_INT=5125]="UNSIGNED_INT",e[e.UNSIGNED_INT_10F_11F_11F_REV=35899]="UNSIGNED_INT_10F_11F_11F_REV",e[e.UNSIGNED_INT_2_10_10_10_REV=33640]="UNSIGNED_INT_2_10_10_10_REV",e[e.UNSIGNED_INT_24_8=34042]="UNSIGNED_INT_24_8",e[e.UNSIGNED_INT_5_9_9_9_REV=35902]="UNSIGNED_INT_5_9_9_9_REV",e[e.BYTE=5120]="BYTE",e[e.SHORT=5122]="SHORT",e[e.INT=5124]="INT",e[e.FLOAT=5126]="FLOAT",e[e.FLOAT_32_UNSIGNED_INT_24_8_REV=36269]="FLOAT_32_UNSIGNED_INT_24_8_REV",e[e.HALF_FLOAT=36193]="HALF_FLOAT"})(H6||(H6={}));var z6;(function(e){e[e.FLOAT=0]="FLOAT",e[e.INT=1]="INT",e[e.UINT=2]="UINT"})(z6||(z6={}));var Bw;(function(e){e[e.NEAREST=0]="NEAREST",e[e.LINEAR=1]="LINEAR"})(Bw||(Bw={}));var Dw;(function(e){e[e.CLAMP=33071]="CLAMP",e[e.REPEAT=10497]="REPEAT",e[e.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT"})(Dw||(Dw={}));var Gw;(function(e){e[e.OFF=0]="OFF",e[e.POW2=1]="POW2",e[e.ON=2]="ON",e[e.ON_MANUAL=3]="ON_MANUAL"})(Gw||(Gw={}));var V6;(function(e){e[e.NPM=0]="NPM",e[e.UNPACK=1]="UNPACK",e[e.PMA=2]="PMA",e[e.NO_PREMULTIPLIED_ALPHA=0]="NO_PREMULTIPLIED_ALPHA",e[e.PREMULTIPLY_ON_UPLOAD=1]="PREMULTIPLY_ON_UPLOAD",e[e.PREMULTIPLY_ALPHA=2]="PREMULTIPLY_ALPHA",e[e.PREMULTIPLIED_ALPHA=2]="PREMULTIPLIED_ALPHA"})(V6||(V6={}));var X6;(function(e){e[e.NO=0]="NO",e[e.YES=1]="YES",e[e.AUTO=2]="AUTO",e[e.BLEND=0]="BLEND",e[e.CLEAR=1]="CLEAR",e[e.BLIT=2]="BLIT"})(X6||(X6={}));var jw;(function(e){e[e.AUTO=0]="AUTO",e[e.MANUAL=1]="MANUAL"})(jw||(jw={}));var vd;(function(e){e.LOW="lowp",e.MEDIUM="mediump",e.HIGH="highp"})(vd||(vd={}));var W6;(function(e){e[e.NONE=0]="NONE",e[e.SCISSOR=1]="SCISSOR",e[e.STENCIL=2]="STENCIL",e[e.SPRITE=3]="SPRITE"})(W6||(W6={}));var $w;(function(e){e[e.NONE=0]="NONE",e[e.LOW=2]="LOW",e[e.MEDIUM=4]="MEDIUM",e[e.HIGH=8]="HIGH"})($w||($w={}));var Y6;(function(e){e[e.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",e[e.ARRAY_BUFFER=34962]="ARRAY_BUFFER",e[e.UNIFORM_BUFFER=35345]="UNIFORM_BUFFER"})(Y6||(Y6={}));var zO={MIPMAP_TEXTURES:Gw.POW2,ANISOTROPIC_LEVEL:0,RESOLUTION:1,FILTER_RESOLUTION:1,FILTER_MULTISAMPLE:$w.NONE,SPRITE_MAX_TEXTURES:Ree(32),SPRITE_BATCH_SIZE:4096,RENDER_OPTIONS:{view:null,antialias:!1,autoDensity:!1,backgroundColor:0,backgroundAlpha:1,useContextAlpha:!0,clearBeforeRender:!0,preserveDrawingBuffer:!1,width:800,height:600,legacy:!1},GC_MODE:jw.AUTO,GC_MAX_IDLE:60*60,GC_MAX_CHECK_COUNT:60*10,WRAP_MODE:Dw.CLAMP,SCALE_MODE:Bw.LINEAR,PRECISION_VERTEX:vd.HIGH,PRECISION_FRAGMENT:Uc.apple.device?vd.HIGH:vd.MEDIUM,CAN_UPLOAD_SAME_BUFFER:kee(),CREATE_IMAGE_BITMAP:!1,ROUND_PIXELS:!1};/*!
 * @pixi/display - v6.4.2
 * Compiled Thu, 02 Jun 2022 15:39:26 UTC
 *
 * @pixi/display is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */zO.SORTABLE_CHILDREN=!1;var K6=function(){function e(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0,this.rect=null,this.updateID=-1}return e.prototype.isEmpty=function(){return this.minX>this.maxX||this.minY>this.maxY},e.prototype.clear=function(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0},e.prototype.getRectangle=function(t){return this.minX>this.maxX||this.minY>this.maxY?Fe.EMPTY:(t=t||new Fe(0,0,1,1),t.x=this.minX,t.y=this.minY,t.width=this.maxX-this.minX,t.height=this.maxY-this.minY,t)},e.prototype.addPoint=function(t){this.minX=Math.min(this.minX,t.x),this.maxX=Math.max(this.maxX,t.x),this.minY=Math.min(this.minY,t.y),this.maxY=Math.max(this.maxY,t.y)},e.prototype.addPointMatrix=function(t,r){var n=t.a,i=t.b,o=t.c,s=t.d,a=t.tx,l=t.ty,u=n*r.x+o*r.y+a,c=i*r.x+s*r.y+l;this.minX=Math.min(this.minX,u),this.maxX=Math.max(this.maxX,u),this.minY=Math.min(this.minY,c),this.maxY=Math.max(this.maxY,c)},e.prototype.addQuad=function(t){var r=this.minX,n=this.minY,i=this.maxX,o=this.maxY,s=t[0],a=t[1];r=s<r?s:r,n=a<n?a:n,i=s>i?s:i,o=a>o?a:o,s=t[2],a=t[3],r=s<r?s:r,n=a<n?a:n,i=s>i?s:i,o=a>o?a:o,s=t[4],a=t[5],r=s<r?s:r,n=a<n?a:n,i=s>i?s:i,o=a>o?a:o,s=t[6],a=t[7],r=s<r?s:r,n=a<n?a:n,i=s>i?s:i,o=a>o?a:o,this.minX=r,this.minY=n,this.maxX=i,this.maxY=o},e.prototype.addFrame=function(t,r,n,i,o){this.addFrameMatrix(t.worldTransform,r,n,i,o)},e.prototype.addFrameMatrix=function(t,r,n,i,o){var s=t.a,a=t.b,l=t.c,u=t.d,c=t.tx,f=t.ty,p=this.minX,v=this.minY,g=this.maxX,b=this.maxY,_=s*r+l*n+c,w=a*r+u*n+f;p=_<p?_:p,v=w<v?w:v,g=_>g?_:g,b=w>b?w:b,_=s*i+l*n+c,w=a*i+u*n+f,p=_<p?_:p,v=w<v?w:v,g=_>g?_:g,b=w>b?w:b,_=s*r+l*o+c,w=a*r+u*o+f,p=_<p?_:p,v=w<v?w:v,g=_>g?_:g,b=w>b?w:b,_=s*i+l*o+c,w=a*i+u*o+f,p=_<p?_:p,v=w<v?w:v,g=_>g?_:g,b=w>b?w:b,this.minX=p,this.minY=v,this.maxX=g,this.maxY=b},e.prototype.addVertexData=function(t,r,n){for(var i=this.minX,o=this.minY,s=this.maxX,a=this.maxY,l=r;l<n;l+=2){var u=t[l],c=t[l+1];i=u<i?u:i,o=c<o?c:o,s=u>s?u:s,a=c>a?c:a}this.minX=i,this.minY=o,this.maxX=s,this.maxY=a},e.prototype.addVertices=function(t,r,n,i){this.addVerticesMatrix(t.worldTransform,r,n,i)},e.prototype.addVerticesMatrix=function(t,r,n,i,o,s){o===void 0&&(o=0),s===void 0&&(s=o);for(var a=t.a,l=t.b,u=t.c,c=t.d,f=t.tx,p=t.ty,v=this.minX,g=this.minY,b=this.maxX,_=this.maxY,w=n;w<i;w+=2){var x=r[w],T=r[w+1],I=a*x+u*T+f,R=c*T+l*x+p;v=Math.min(v,I-o),b=Math.max(b,I+o),g=Math.min(g,R-s),_=Math.max(_,R+s)}this.minX=v,this.minY=g,this.maxX=b,this.maxY=_},e.prototype.addBounds=function(t){var r=this.minX,n=this.minY,i=this.maxX,o=this.maxY;this.minX=t.minX<r?t.minX:r,this.minY=t.minY<n?t.minY:n,this.maxX=t.maxX>i?t.maxX:i,this.maxY=t.maxY>o?t.maxY:o},e.prototype.addBoundsMask=function(t,r){var n=t.minX>r.minX?t.minX:r.minX,i=t.minY>r.minY?t.minY:r.minY,o=t.maxX<r.maxX?t.maxX:r.maxX,s=t.maxY<r.maxY?t.maxY:r.maxY;if(n<=o&&i<=s){var a=this.minX,l=this.minY,u=this.maxX,c=this.maxY;this.minX=n<a?n:a,this.minY=i<l?i:l,this.maxX=o>u?o:u,this.maxY=s>c?s:c}},e.prototype.addBoundsMatrix=function(t,r){this.addFrameMatrix(r,t.minX,t.minY,t.maxX,t.maxY)},e.prototype.addBoundsArea=function(t,r){var n=t.minX>r.x?t.minX:r.x,i=t.minY>r.y?t.minY:r.y,o=t.maxX<r.x+r.width?t.maxX:r.x+r.width,s=t.maxY<r.y+r.height?t.maxY:r.y+r.height;if(n<=o&&i<=s){var a=this.minX,l=this.minY,u=this.maxX,c=this.maxY;this.minX=n<a?n:a,this.minY=i<l?i:l,this.maxX=o>u?o:u,this.maxY=s>c?s:c}},e.prototype.pad=function(t,r){t===void 0&&(t=0),r===void 0&&(r=t),this.isEmpty()||(this.minX-=t,this.maxX+=t,this.minY-=r,this.maxY+=r)},e.prototype.addFramePad=function(t,r,n,i,o,s){t-=o,r-=s,n+=o,i+=s,this.minX=this.minX<t?this.minX:t,this.maxX=this.maxX>n?this.maxX:n,this.minY=this.minY<r?this.minY:r,this.maxY=this.maxY>i?this.maxY:i},e}();/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var Hw=function(e,t){return Hw=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])},Hw(e,t)};function U4(e,t){Hw(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var Qd=function(e){U4(t,e);function t(){var r=e.call(this)||this;return r.tempDisplayObjectParent=null,r.transform=new k4,r.alpha=1,r.visible=!0,r.renderable=!0,r.cullable=!1,r.cullArea=null,r.parent=null,r.worldAlpha=1,r._lastSortedIndex=0,r._zIndex=0,r.filterArea=null,r.filters=null,r._enabledFilters=null,r._bounds=new K6,r._localBounds=null,r._boundsID=0,r._boundsRect=null,r._localBoundsRect=null,r._mask=null,r._maskRefCount=0,r._destroyed=!1,r.isSprite=!1,r.isMask=!1,r}return t.mixin=function(r){for(var n=Object.keys(r),i=0;i<n.length;++i){var o=n[i];Object.defineProperty(t.prototype,o,Object.getOwnPropertyDescriptor(r,o))}},Object.defineProperty(t.prototype,"destroyed",{get:function(){return this._destroyed},enumerable:!1,configurable:!0}),t.prototype._recursivePostUpdateTransform=function(){this.parent?(this.parent._recursivePostUpdateTransform(),this.transform.updateTransform(this.parent.transform)):this.transform.updateTransform(this._tempDisplayObjectParent.transform)},t.prototype.updateTransform=function(){this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha},t.prototype.getBounds=function(r,n){return r||(this.parent?(this._recursivePostUpdateTransform(),this.updateTransform()):(this.parent=this._tempDisplayObjectParent,this.updateTransform(),this.parent=null)),this._bounds.updateID!==this._boundsID&&(this.calculateBounds(),this._bounds.updateID=this._boundsID),n||(this._boundsRect||(this._boundsRect=new Fe),n=this._boundsRect),this._bounds.getRectangle(n)},t.prototype.getLocalBounds=function(r){r||(this._localBoundsRect||(this._localBoundsRect=new Fe),r=this._localBoundsRect),this._localBounds||(this._localBounds=new K6);var n=this.transform,i=this.parent;this.parent=null,this.transform=this._tempDisplayObjectParent.transform;var o=this._bounds,s=this._boundsID;this._bounds=this._localBounds;var a=this.getBounds(!1,r);return this.parent=i,this.transform=n,this._bounds=o,this._bounds.updateID+=this._boundsID-s,a},t.prototype.toGlobal=function(r,n,i){return i===void 0&&(i=!1),i||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.apply(r,n)},t.prototype.toLocal=function(r,n,i,o){return n&&(r=n.toGlobal(r,i,o)),o||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.applyInverse(r,i)},t.prototype.setParent=function(r){if(!r||!r.addChild)throw new Error("setParent: Argument must be a Container");return r.addChild(this),r},t.prototype.setTransform=function(r,n,i,o,s,a,l,u,c){return r===void 0&&(r=0),n===void 0&&(n=0),i===void 0&&(i=1),o===void 0&&(o=1),s===void 0&&(s=0),a===void 0&&(a=0),l===void 0&&(l=0),u===void 0&&(u=0),c===void 0&&(c=0),this.position.x=r,this.position.y=n,this.scale.x=i||1,this.scale.y=o||1,this.rotation=s,this.skew.x=a,this.skew.y=l,this.pivot.x=u,this.pivot.y=c,this},t.prototype.destroy=function(r){this.parent&&this.parent.removeChild(this),this._destroyed=!0,this.transform=null,this.parent=null,this._bounds=null,this.mask=null,this.cullArea=null,this.filters=null,this.filterArea=null,this.hitArea=null,this.interactive=!1,this.interactiveChildren=!1,this.emit("destroyed"),this.removeAllListeners()},Object.defineProperty(t.prototype,"_tempDisplayObjectParent",{get:function(){return this.tempDisplayObjectParent===null&&(this.tempDisplayObjectParent=new Oee),this.tempDisplayObjectParent},enumerable:!1,configurable:!0}),t.prototype.enableTempParent=function(){var r=this.parent;return this.parent=this._tempDisplayObjectParent,r},t.prototype.disableTempParent=function(r){this.parent=r},Object.defineProperty(t.prototype,"x",{get:function(){return this.position.x},set:function(r){this.transform.position.x=r},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"y",{get:function(){return this.position.y},set:function(r){this.transform.position.y=r},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"worldTransform",{get:function(){return this.transform.worldTransform},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"localTransform",{get:function(){return this.transform.localTransform},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"position",{get:function(){return this.transform.position},set:function(r){this.transform.position.copyFrom(r)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"scale",{get:function(){return this.transform.scale},set:function(r){this.transform.scale.copyFrom(r)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"pivot",{get:function(){return this.transform.pivot},set:function(r){this.transform.pivot.copyFrom(r)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"skew",{get:function(){return this.transform.skew},set:function(r){this.transform.skew.copyFrom(r)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"rotation",{get:function(){return this.transform.rotation},set:function(r){this.transform.rotation=r},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"angle",{get:function(){return this.transform.rotation*xO},set:function(r){this.transform.rotation=r*TO},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"zIndex",{get:function(){return this._zIndex},set:function(r){this._zIndex=r,this.parent&&(this.parent.sortDirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"worldVisible",{get:function(){var r=this;do{if(!r.visible)return!1;r=r.parent}while(r);return!0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"mask",{get:function(){return this._mask},set:function(r){if(this._mask!==r){if(this._mask){var n=this._mask.maskObject||this._mask;n._maskRefCount--,n._maskRefCount===0&&(n.renderable=!0,n.isMask=!1)}if(this._mask=r,this._mask){var n=this._mask.maskObject||this._mask;n._maskRefCount===0&&(n.renderable=!1,n.isMask=!0),n._maskRefCount++}}},enumerable:!1,configurable:!0}),t}(Ah),Oee=function(e){U4(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.sortDirty=null,r}return t}(Qd);Qd.prototype.displayObjectUpdateTransform=Qd.prototype.updateTransform;/*!
 * @pixi/constants - v6.4.2
 * Compiled Thu, 02 Jun 2022 15:39:26 UTC
 *
 * @pixi/constants is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var q6;(function(e){e[e.WEBGL_LEGACY=0]="WEBGL_LEGACY",e[e.WEBGL=1]="WEBGL",e[e.WEBGL2=2]="WEBGL2"})(q6||(q6={}));var Z6;(function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.WEBGL=1]="WEBGL",e[e.CANVAS=2]="CANVAS"})(Z6||(Z6={}));var J6;(function(e){e[e.COLOR=16384]="COLOR",e[e.DEPTH=256]="DEPTH",e[e.STENCIL=1024]="STENCIL"})(J6||(J6={}));var Q6;(function(e){e[e.NORMAL=0]="NORMAL",e[e.ADD=1]="ADD",e[e.MULTIPLY=2]="MULTIPLY",e[e.SCREEN=3]="SCREEN",e[e.OVERLAY=4]="OVERLAY",e[e.DARKEN=5]="DARKEN",e[e.LIGHTEN=6]="LIGHTEN",e[e.COLOR_DODGE=7]="COLOR_DODGE",e[e.COLOR_BURN=8]="COLOR_BURN",e[e.HARD_LIGHT=9]="HARD_LIGHT",e[e.SOFT_LIGHT=10]="SOFT_LIGHT",e[e.DIFFERENCE=11]="DIFFERENCE",e[e.EXCLUSION=12]="EXCLUSION",e[e.HUE=13]="HUE",e[e.SATURATION=14]="SATURATION",e[e.COLOR=15]="COLOR",e[e.LUMINOSITY=16]="LUMINOSITY",e[e.NORMAL_NPM=17]="NORMAL_NPM",e[e.ADD_NPM=18]="ADD_NPM",e[e.SCREEN_NPM=19]="SCREEN_NPM",e[e.NONE=20]="NONE",e[e.SRC_OVER=0]="SRC_OVER",e[e.SRC_IN=21]="SRC_IN",e[e.SRC_OUT=22]="SRC_OUT",e[e.SRC_ATOP=23]="SRC_ATOP",e[e.DST_OVER=24]="DST_OVER",e[e.DST_IN=25]="DST_IN",e[e.DST_OUT=26]="DST_OUT",e[e.DST_ATOP=27]="DST_ATOP",e[e.ERASE=26]="ERASE",e[e.SUBTRACT=28]="SUBTRACT",e[e.XOR=29]="XOR"})(Q6||(Q6={}));var eI;(function(e){e[e.POINTS=0]="POINTS",e[e.LINES=1]="LINES",e[e.LINE_LOOP=2]="LINE_LOOP",e[e.LINE_STRIP=3]="LINE_STRIP",e[e.TRIANGLES=4]="TRIANGLES",e[e.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",e[e.TRIANGLE_FAN=6]="TRIANGLE_FAN"})(eI||(eI={}));var tI;(function(e){e[e.RGBA=6408]="RGBA",e[e.RGB=6407]="RGB",e[e.RG=33319]="RG",e[e.RED=6403]="RED",e[e.RGBA_INTEGER=36249]="RGBA_INTEGER",e[e.RGB_INTEGER=36248]="RGB_INTEGER",e[e.RG_INTEGER=33320]="RG_INTEGER",e[e.RED_INTEGER=36244]="RED_INTEGER",e[e.ALPHA=6406]="ALPHA",e[e.LUMINANCE=6409]="LUMINANCE",e[e.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",e[e.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",e[e.DEPTH_STENCIL=34041]="DEPTH_STENCIL"})(tI||(tI={}));var rI;(function(e){e[e.TEXTURE_2D=3553]="TEXTURE_2D",e[e.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",e[e.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",e[e.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",e[e.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",e[e.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",e[e.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",e[e.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",e[e.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z"})(rI||(rI={}));var nI;(function(e){e[e.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",e[e.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",e[e.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",e[e.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",e[e.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",e[e.UNSIGNED_INT=5125]="UNSIGNED_INT",e[e.UNSIGNED_INT_10F_11F_11F_REV=35899]="UNSIGNED_INT_10F_11F_11F_REV",e[e.UNSIGNED_INT_2_10_10_10_REV=33640]="UNSIGNED_INT_2_10_10_10_REV",e[e.UNSIGNED_INT_24_8=34042]="UNSIGNED_INT_24_8",e[e.UNSIGNED_INT_5_9_9_9_REV=35902]="UNSIGNED_INT_5_9_9_9_REV",e[e.BYTE=5120]="BYTE",e[e.SHORT=5122]="SHORT",e[e.INT=5124]="INT",e[e.FLOAT=5126]="FLOAT",e[e.FLOAT_32_UNSIGNED_INT_24_8_REV=36269]="FLOAT_32_UNSIGNED_INT_24_8_REV",e[e.HALF_FLOAT=36193]="HALF_FLOAT"})(nI||(nI={}));var iI;(function(e){e[e.FLOAT=0]="FLOAT",e[e.INT=1]="INT",e[e.UINT=2]="UINT"})(iI||(iI={}));var oI;(function(e){e[e.NEAREST=0]="NEAREST",e[e.LINEAR=1]="LINEAR"})(oI||(oI={}));var sI;(function(e){e[e.CLAMP=33071]="CLAMP",e[e.REPEAT=10497]="REPEAT",e[e.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT"})(sI||(sI={}));var aI;(function(e){e[e.OFF=0]="OFF",e[e.POW2=1]="POW2",e[e.ON=2]="ON",e[e.ON_MANUAL=3]="ON_MANUAL"})(aI||(aI={}));var lI;(function(e){e[e.NPM=0]="NPM",e[e.UNPACK=1]="UNPACK",e[e.PMA=2]="PMA",e[e.NO_PREMULTIPLIED_ALPHA=0]="NO_PREMULTIPLIED_ALPHA",e[e.PREMULTIPLY_ON_UPLOAD=1]="PREMULTIPLY_ON_UPLOAD",e[e.PREMULTIPLY_ALPHA=2]="PREMULTIPLY_ALPHA",e[e.PREMULTIPLIED_ALPHA=2]="PREMULTIPLIED_ALPHA"})(lI||(lI={}));var uI;(function(e){e[e.NO=0]="NO",e[e.YES=1]="YES",e[e.AUTO=2]="AUTO",e[e.BLEND=0]="BLEND",e[e.CLEAR=1]="CLEAR",e[e.BLIT=2]="BLIT"})(uI||(uI={}));var cI;(function(e){e[e.AUTO=0]="AUTO",e[e.MANUAL=1]="MANUAL"})(cI||(cI={}));var hI;(function(e){e.LOW="lowp",e.MEDIUM="mediump",e.HIGH="highp"})(hI||(hI={}));var zw;(function(e){e[e.NONE=0]="NONE",e[e.SCISSOR=1]="SCISSOR",e[e.STENCIL=2]="STENCIL",e[e.SPRITE=3]="SPRITE"})(zw||(zw={}));var fI;(function(e){e[e.NONE=0]="NONE",e[e.LOW=2]="LOW",e[e.MEDIUM=4]="MEDIUM",e[e.HIGH=8]="HIGH"})(fI||(fI={}));var dI;(function(e){e[e.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",e[e.ARRAY_BUFFER=34962]="ARRAY_BUFFER",e[e.UNIFORM_BUFFER=35345]="UNIFORM_BUFFER"})(dI||(dI={}));function Lee(e,t){return e.zIndex===t.zIndex?e._lastSortedIndex-t._lastSortedIndex:e.zIndex-t.zIndex}var pI=function(e){U4(t,e);function t(){var r=e.call(this)||this;return r.children=[],r.sortableChildren=zO.SORTABLE_CHILDREN,r.sortDirty=!1,r}return t.prototype.onChildrenChange=function(r){},t.prototype.addChild=function(){for(var r=arguments,n=[],i=0;i<arguments.length;i++)n[i]=r[i];if(n.length>1)for(var o=0;o<n.length;o++)this.addChild(n[o]);else{var s=n[0];s.parent&&s.parent.removeChild(s),s.parent=this,this.sortDirty=!0,s.transform._parentID=-1,this.children.push(s),this._boundsID++,this.onChildrenChange(this.children.length-1),this.emit("childAdded",s,this,this.children.length-1),s.emit("added",this)}return n[0]},t.prototype.addChildAt=function(r,n){if(n<0||n>this.children.length)throw new Error(r+"addChildAt: The index "+n+" supplied is out of bounds "+this.children.length);return r.parent&&r.parent.removeChild(r),r.parent=this,this.sortDirty=!0,r.transform._parentID=-1,this.children.splice(n,0,r),this._boundsID++,this.onChildrenChange(n),r.emit("added",this),this.emit("childAdded",r,this,n),r},t.prototype.swapChildren=function(r,n){if(r!==n){var i=this.getChildIndex(r),o=this.getChildIndex(n);this.children[i]=n,this.children[o]=r,this.onChildrenChange(i<o?i:o)}},t.prototype.getChildIndex=function(r){var n=this.children.indexOf(r);if(n===-1)throw new Error("The supplied DisplayObject must be a child of the caller");return n},t.prototype.setChildIndex=function(r,n){if(n<0||n>=this.children.length)throw new Error("The index "+n+" supplied is out of bounds "+this.children.length);var i=this.getChildIndex(r);zs(this.children,i,1),this.children.splice(n,0,r),this.onChildrenChange(n)},t.prototype.getChildAt=function(r){if(r<0||r>=this.children.length)throw new Error("getChildAt: Index ("+r+") does not exist.");return this.children[r]},t.prototype.removeChild=function(){for(var r=arguments,n=[],i=0;i<arguments.length;i++)n[i]=r[i];if(n.length>1)for(var o=0;o<n.length;o++)this.removeChild(n[o]);else{var s=n[0],a=this.children.indexOf(s);if(a===-1)return null;s.parent=null,s.transform._parentID=-1,zs(this.children,a,1),this._boundsID++,this.onChildrenChange(a),s.emit("removed",this),this.emit("childRemoved",s,this,a)}return n[0]},t.prototype.removeChildAt=function(r){var n=this.getChildAt(r);return n.parent=null,n.transform._parentID=-1,zs(this.children,r,1),this._boundsID++,this.onChildrenChange(r),n.emit("removed",this),this.emit("childRemoved",n,this,r),n},t.prototype.removeChildren=function(r,n){r===void 0&&(r=0),n===void 0&&(n=this.children.length);var i=r,o=n,s=o-i,a;if(s>0&&s<=o){a=this.children.splice(i,s);for(var l=0;l<a.length;++l)a[l].parent=null,a[l].transform&&(a[l].transform._parentID=-1);this._boundsID++,this.onChildrenChange(r);for(var l=0;l<a.length;++l)a[l].emit("removed",this),this.emit("childRemoved",a[l],this,l);return a}else if(s===0&&this.children.length===0)return[];throw new RangeError("removeChildren: numeric values are outside the acceptable range.")},t.prototype.sortChildren=function(){for(var r=!1,n=0,i=this.children.length;n<i;++n){var o=this.children[n];o._lastSortedIndex=n,!r&&o.zIndex!==0&&(r=!0)}r&&this.children.length>1&&this.children.sort(Lee),this.sortDirty=!1},t.prototype.updateTransform=function(){this.sortableChildren&&this.sortDirty&&this.sortChildren(),this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha;for(var r=0,n=this.children.length;r<n;++r){var i=this.children[r];i.visible&&i.updateTransform()}},t.prototype.calculateBounds=function(){this._bounds.clear(),this._calculateBounds();for(var r=0;r<this.children.length;r++){var n=this.children[r];if(!(!n.visible||!n.renderable))if(n.calculateBounds(),n._mask){var i=n._mask.maskObject||n._mask;i.calculateBounds(),this._bounds.addBoundsMask(n._bounds,i._bounds)}else n.filterArea?this._bounds.addBoundsArea(n._bounds,n.filterArea):this._bounds.addBounds(n._bounds)}this._bounds.updateID=this._boundsID},t.prototype.getLocalBounds=function(r,n){n===void 0&&(n=!1);var i=e.prototype.getLocalBounds.call(this,r);if(!n)for(var o=0,s=this.children.length;o<s;++o){var a=this.children[o];a.visible&&a.updateTransform()}return i},t.prototype._calculateBounds=function(){},t.prototype._renderWithCulling=function(r){var n=r.renderTexture.sourceFrame;if(n.width>0&&n.height>0){var i,o;if(this.cullArea?(i=this.cullArea,o=this.worldTransform):this._render!==t.prototype._render&&(i=this.getBounds(!0)),i&&n.intersects(i,o))this._render(r);else if(this.cullArea)return;for(var s=0,a=this.children.length;s<a;++s){var l=this.children[s],u=l.cullable;l.cullable=u||!this.cullArea,l.render(r),l.cullable=u}}},t.prototype.render=function(r){if(!(!this.visible||this.worldAlpha<=0||!this.renderable))if(this._mask||this.filters&&this.filters.length)this.renderAdvanced(r);else if(this.cullable)this._renderWithCulling(r);else{this._render(r);for(var n=0,i=this.children.length;n<i;++n)this.children[n].render(r)}},t.prototype.renderAdvanced=function(r){var n=this.filters,i=this._mask;if(n){this._enabledFilters||(this._enabledFilters=[]),this._enabledFilters.length=0;for(var o=0;o<n.length;o++)n[o].enabled&&this._enabledFilters.push(n[o])}var s=n&&this._enabledFilters&&this._enabledFilters.length||i&&(!i.isMaskData||i.enabled&&(i.autoDetect||i.type!==zw.NONE));if(s&&r.batch.flush(),n&&this._enabledFilters&&this._enabledFilters.length&&r.filter.push(this,this._enabledFilters),i&&r.mask.push(this,this._mask),this.cullable)this._renderWithCulling(r);else{this._render(r);for(var o=0,a=this.children.length;o<a;++o)this.children[o].render(r)}s&&r.batch.flush(),i&&r.mask.pop(this),n&&this._enabledFilters&&this._enabledFilters.length&&r.filter.pop()},t.prototype._render=function(r){},t.prototype.destroy=function(r){e.prototype.destroy.call(this),this.sortDirty=!1;var n=typeof r=="boolean"?r:r&&r.children,i=this.removeChildren(0,this.children.length);if(n)for(var o=0;o<i.length;++o)i[o].destroy(r)},Object.defineProperty(t.prototype,"width",{get:function(){return this.scale.x*this.getLocalBounds().width},set:function(r){var n=this.getLocalBounds().width;n!==0?this.scale.x=r/n:this.scale.x=1,this._width=r},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this.scale.y*this.getLocalBounds().height},set:function(r){var n=this.getLocalBounds().height;n!==0?this.scale.y=r/n:this.scale.y=1,this._height=r},enumerable:!1,configurable:!0}),t}(Qd);pI.prototype.containerUpdateTransform=pI.prototype.updateTransform;var v_=new Fe,mI=4,Uee=function(){function e(t){this.renderer=t}return e.prototype.image=function(t,r,n){var i=new Image;return i.src=this.base64(t,r,n),i},e.prototype.base64=function(t,r,n){return this.canvas(t).toDataURL(r,n)},e.prototype.canvas=function(t){var r=this.renderer,n,i,o=!1,s,a=!1;t&&(t instanceof gu?s=t:(s=this.renderer.generateTexture(t),a=!0)),s?(n=s.baseTexture.resolution,i=s.frame,o=!1,r.renderTexture.bind(s)):(n=this.renderer.resolution,o=!0,i=v_,i.width=this.renderer.width,i.height=this.renderer.height,r.renderTexture.bind(null));var l=Math.floor(i.width*n+1e-4),u=Math.floor(i.height*n+1e-4),c=new VC(l,u,1),f=new Uint8Array(mI*l*u),p=r.gl;p.readPixels(i.x*n,i.y*n,l,u,p.RGBA,p.UNSIGNED_BYTE,f);var v=c.context.getImageData(0,0,l,u);if(e.arrayPostDivide(f,v.data),c.context.putImageData(v,0,0),o){var g=new VC(c.width,c.height,1);g.context.scale(1,-1),g.context.drawImage(c.canvas,0,-u),c.destroy(),c=g}return a&&s.destroy(!0),c.canvas},e.prototype.pixels=function(t,r){var n=this.renderer,i,o,s,a=!1;t&&(t instanceof gu?s=t:t instanceof Qd&&(s=this.renderer.generateTexture(t),a=!0)),s?r?(i=r.resolution,o=s.frame,n.renderTexture.bind(s)):(i=s.baseTexture.resolution,o=s.frame,n.renderTexture.bind(s)):r?(i=r.resolution,o=v_,o.width=r.width,o.height=r.height,n.renderTexture.bind(null)):(i=n.resolution,o=v_,o.width=n.width,o.height=n.height,n.renderTexture.bind(null));var l=o.width*i,u=o.height*i,c=new Uint8Array(mI*l*u),f=n.gl;return f.readPixels(o.x*i,o.y*i,l,u,f.RGBA,f.UNSIGNED_BYTE,c),a&&s.destroy(!0),e.arrayPostDivide(c,c),c},e.prototype.destroy=function(){this.renderer=null},e.arrayPostDivide=function(t,r){for(var n=0;n<t.length;n+=4){var i=r[n+3]=t[n+3];i!==0?(r[n]=Math.round(Math.min(t[n]*255/i,255)),r[n+1]=Math.round(Math.min(t[n+1]*255/i,255)),r[n+2]=Math.round(Math.min(t[n+2]*255/i,255))):(r[n]=t[n],r[n+1]=t[n+1],r[n+2]=t[n+2])}},e}();/*!
 * @pixi/loaders - v6.4.2
 * Compiled Thu, 02 Jun 2022 15:39:26 UTC
 *
 * @pixi/loaders is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var Ev=function(){function e(t,r,n){r===void 0&&(r=!1),this._fn=t,this._once=r,this._thisArg=n,this._next=this._prev=this._owner=null}return e.prototype.detach=function(){return this._owner===null?!1:(this._owner.detach(this),!0)},e}();function vI(e,t){return e._head?(e._tail._next=t,t._prev=e._tail,e._tail=t):(e._head=t,e._tail=t),t._owner=e,t}var Os=function(){function e(){this._head=this._tail=void 0}return e.prototype.handlers=function(t){t===void 0&&(t=!1);var r=this._head;if(t)return!!r;for(var n=[];r;)n.push(r),r=r._next;return n},e.prototype.has=function(t){if(!(t instanceof Ev))throw new Error("MiniSignal#has(): First arg must be a SignalBinding object.");return t._owner===this},e.prototype.dispatch=function(){for(var t=arguments,r=[],n=0;n<arguments.length;n++)r[n]=t[n];var i=this._head;if(!i)return!1;for(;i;)i._once&&this.detach(i),i._fn.apply(i._thisArg,r),i=i._next;return!0},e.prototype.add=function(t,r){if(r===void 0&&(r=null),typeof t!="function")throw new Error("MiniSignal#add(): First arg must be a Function.");return vI(this,new Ev(t,!1,r))},e.prototype.once=function(t,r){if(r===void 0&&(r=null),typeof t!="function")throw new Error("MiniSignal#once(): First arg must be a Function.");return vI(this,new Ev(t,!0,r))},e.prototype.detach=function(t){if(!(t instanceof Ev))throw new Error("MiniSignal#detach(): First arg must be a SignalBinding object.");return t._owner!==this?this:(t._prev&&(t._prev._next=t._next),t._next&&(t._next._prev=t._prev),t===this._head?(this._head=t._next,t._next===null&&(this._tail=null)):t===this._tail&&(this._tail=t._prev,this._tail._next=null),t._owner=null,this)},e.prototype.detachAll=function(){var t=this._head;if(!t)return this;for(this._head=this._tail=null;t;)t._owner=null,t=t._next;return this},e}();function VO(e,t){t=t||{};for(var r={key:["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],q:{name:"queryKey",parser:/(?:^|&)([^&=]*)=?([^&]*)/g},parser:{strict:/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,loose:/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/}},n=r.parser[t.strictMode?"strict":"loose"].exec(e),i={},o=14;o--;)i[r.key[o]]=n[o]||"";return i[r.q.name]={},i[r.key[12]].replace(r.q.parser,function(s,a,l){a&&(i[r.q.name][a]=l)}),i}var g_,Cv=null,Fee=0,gI=200,Mee=204,Bee=1223,Dee=2;function yI(){}function _I(e,t,r){t&&t.indexOf(".")===0&&(t=t.substring(1)),t&&(e[t]=r)}function y_(e){return e.toString().replace("object ","")}var wr=function(){function e(t,r,n){if(this._dequeue=yI,this._onLoadBinding=null,this._elementTimer=0,this._boundComplete=null,this._boundOnError=null,this._boundOnProgress=null,this._boundOnTimeout=null,this._boundXhrOnError=null,this._boundXhrOnTimeout=null,this._boundXhrOnAbort=null,this._boundXhrOnLoad=null,typeof t!="string"||typeof r!="string")throw new Error("Both name and url are required for constructing a resource.");n=n||{},this._flags=0,this._setFlag(e.STATUS_FLAGS.DATA_URL,r.indexOf("data:")===0),this.name=t,this.url=r,this.extension=this._getExtension(),this.data=null,this.crossOrigin=n.crossOrigin===!0?"anonymous":n.crossOrigin,this.timeout=n.timeout||0,this.loadType=n.loadType||this._determineLoadType(),this.xhrType=n.xhrType,this.metadata=n.metadata||{},this.error=null,this.xhr=null,this.children=[],this.type=e.TYPE.UNKNOWN,this.progressChunk=0,this._dequeue=yI,this._onLoadBinding=null,this._elementTimer=0,this._boundComplete=this.complete.bind(this),this._boundOnError=this._onError.bind(this),this._boundOnProgress=this._onProgress.bind(this),this._boundOnTimeout=this._onTimeout.bind(this),this._boundXhrOnError=this._xhrOnError.bind(this),this._boundXhrOnTimeout=this._xhrOnTimeout.bind(this),this._boundXhrOnAbort=this._xhrOnAbort.bind(this),this._boundXhrOnLoad=this._xhrOnLoad.bind(this),this.onStart=new Os,this.onProgress=new Os,this.onComplete=new Os,this.onAfterMiddleware=new Os}return e.setExtensionLoadType=function(t,r){_I(e._loadTypeMap,t,r)},e.setExtensionXhrType=function(t,r){_I(e._xhrTypeMap,t,r)},Object.defineProperty(e.prototype,"isDataUrl",{get:function(){return this._hasFlag(e.STATUS_FLAGS.DATA_URL)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isComplete",{get:function(){return this._hasFlag(e.STATUS_FLAGS.COMPLETE)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isLoading",{get:function(){return this._hasFlag(e.STATUS_FLAGS.LOADING)},enumerable:!1,configurable:!0}),e.prototype.complete=function(){this._clearEvents(),this._finish()},e.prototype.abort=function(t){if(!this.error){if(this.error=new Error(t),this._clearEvents(),this.xhr)this.xhr.abort();else if(this.xdr)this.xdr.abort();else if(this.data)if(this.data.src)this.data.src=e.EMPTY_GIF;else for(;this.data.firstChild;)this.data.removeChild(this.data.firstChild);this._finish()}},e.prototype.load=function(t){var r=this;if(!this.isLoading){if(this.isComplete){t&&setTimeout(function(){return t(r)},1);return}else t&&this.onComplete.once(t);switch(this._setFlag(e.STATUS_FLAGS.LOADING,!0),this.onStart.dispatch(this),(this.crossOrigin===!1||typeof this.crossOrigin!="string")&&(this.crossOrigin=this._determineCrossOrigin(this.url)),this.loadType){case e.LOAD_TYPE.IMAGE:this.type=e.TYPE.IMAGE,this._loadElement("image");break;case e.LOAD_TYPE.AUDIO:this.type=e.TYPE.AUDIO,this._loadSourceElement("audio");break;case e.LOAD_TYPE.VIDEO:this.type=e.TYPE.VIDEO,this._loadSourceElement("video");break;case e.LOAD_TYPE.XHR:default:typeof g_>"u"&&(g_=!!(globalThis.XDomainRequest&&!("withCredentials"in new XMLHttpRequest))),g_&&this.crossOrigin?this._loadXdr():this._loadXhr();break}}},e.prototype._hasFlag=function(t){return(this._flags&t)!==0},e.prototype._setFlag=function(t,r){this._flags=r?this._flags|t:this._flags&~t},e.prototype._clearEvents=function(){clearTimeout(this._elementTimer),this.data&&this.data.removeEventListener&&(this.data.removeEventListener("error",this._boundOnError,!1),this.data.removeEventListener("load",this._boundComplete,!1),this.data.removeEventListener("progress",this._boundOnProgress,!1),this.data.removeEventListener("canplaythrough",this._boundComplete,!1)),this.xhr&&(this.xhr.removeEventListener?(this.xhr.removeEventListener("error",this._boundXhrOnError,!1),this.xhr.removeEventListener("timeout",this._boundXhrOnTimeout,!1),this.xhr.removeEventListener("abort",this._boundXhrOnAbort,!1),this.xhr.removeEventListener("progress",this._boundOnProgress,!1),this.xhr.removeEventListener("load",this._boundXhrOnLoad,!1)):(this.xhr.onerror=null,this.xhr.ontimeout=null,this.xhr.onprogress=null,this.xhr.onload=null))},e.prototype._finish=function(){if(this.isComplete)throw new Error("Complete called again for an already completed resource.");this._setFlag(e.STATUS_FLAGS.COMPLETE,!0),this._setFlag(e.STATUS_FLAGS.LOADING,!1),this.onComplete.dispatch(this)},e.prototype._loadElement=function(t){this.metadata.loadElement?this.data=this.metadata.loadElement:t==="image"&&typeof globalThis.Image<"u"?this.data=new Image:this.data=document.createElement(t),this.crossOrigin&&(this.data.crossOrigin=this.crossOrigin),this.metadata.skipSource||(this.data.src=this.url),this.data.addEventListener("error",this._boundOnError,!1),this.data.addEventListener("load",this._boundComplete,!1),this.data.addEventListener("progress",this._boundOnProgress,!1),this.timeout&&(this._elementTimer=setTimeout(this._boundOnTimeout,this.timeout))},e.prototype._loadSourceElement=function(t){if(this.metadata.loadElement?this.data=this.metadata.loadElement:t==="audio"&&typeof globalThis.Audio<"u"?this.data=new Audio:this.data=document.createElement(t),this.data===null){this.abort("Unsupported element: "+t);return}if(this.crossOrigin&&(this.data.crossOrigin=this.crossOrigin),!this.metadata.skipSource)if(navigator.isCocoonJS)this.data.src=Array.isArray(this.url)?this.url[0]:this.url;else if(Array.isArray(this.url))for(var r=this.metadata.mimeType,n=0;n<this.url.length;++n)this.data.appendChild(this._createSource(t,this.url[n],Array.isArray(r)?r[n]:r));else{var r=this.metadata.mimeType;this.data.appendChild(this._createSource(t,this.url,Array.isArray(r)?r[0]:r))}this.data.addEventListener("error",this._boundOnError,!1),this.data.addEventListener("load",this._boundComplete,!1),this.data.addEventListener("progress",this._boundOnProgress,!1),this.data.addEventListener("canplaythrough",this._boundComplete,!1),this.data.load(),this.timeout&&(this._elementTimer=setTimeout(this._boundOnTimeout,this.timeout))},e.prototype._loadXhr=function(){typeof this.xhrType!="string"&&(this.xhrType=this._determineXhrType());var t=this.xhr=new XMLHttpRequest;this.crossOrigin==="use-credentials"&&(t.withCredentials=!0),t.open("GET",this.url,!0),t.timeout=this.timeout,this.xhrType===e.XHR_RESPONSE_TYPE.JSON||this.xhrType===e.XHR_RESPONSE_TYPE.DOCUMENT?t.responseType=e.XHR_RESPONSE_TYPE.TEXT:t.responseType=this.xhrType,t.addEventListener("error",this._boundXhrOnError,!1),t.addEventListener("timeout",this._boundXhrOnTimeout,!1),t.addEventListener("abort",this._boundXhrOnAbort,!1),t.addEventListener("progress",this._boundOnProgress,!1),t.addEventListener("load",this._boundXhrOnLoad,!1),t.send()},e.prototype._loadXdr=function(){typeof this.xhrType!="string"&&(this.xhrType=this._determineXhrType());var t=this.xhr=new globalThis.XDomainRequest;t.timeout=this.timeout||5e3,t.onerror=this._boundXhrOnError,t.ontimeout=this._boundXhrOnTimeout,t.onprogress=this._boundOnProgress,t.onload=this._boundXhrOnLoad,t.open("GET",this.url,!0),setTimeout(function(){return t.send()},1)},e.prototype._createSource=function(t,r,n){n||(n=t+"/"+this._getExtension(r));var i=document.createElement("source");return i.src=r,i.type=n,i},e.prototype._onError=function(t){this.abort("Failed to load element using: "+t.target.nodeName)},e.prototype._onProgress=function(t){t&&t.lengthComputable&&this.onProgress.dispatch(this,t.loaded/t.total)},e.prototype._onTimeout=function(){this.abort("Load timed out.")},e.prototype._xhrOnError=function(){var t=this.xhr;this.abort(y_(t)+" Request failed. Status: "+t.status+', text: "'+t.statusText+'"')},e.prototype._xhrOnTimeout=function(){var t=this.xhr;this.abort(y_(t)+" Request timed out.")},e.prototype._xhrOnAbort=function(){var t=this.xhr;this.abort(y_(t)+" Request was aborted by the user.")},e.prototype._xhrOnLoad=function(){var t=this.xhr,r="",n=typeof t.status>"u"?gI:t.status;(t.responseType===""||t.responseType==="text"||typeof t.responseType>"u")&&(r=t.responseText),n===Fee&&(r.length>0||t.responseType===e.XHR_RESPONSE_TYPE.BUFFER)?n=gI:n===Bee&&(n=Mee);var i=n/100|0;if(i===Dee)if(this.xhrType===e.XHR_RESPONSE_TYPE.TEXT)this.data=r,this.type=e.TYPE.TEXT;else if(this.xhrType===e.XHR_RESPONSE_TYPE.JSON)try{this.data=JSON.parse(r),this.type=e.TYPE.JSON}catch(a){this.abort("Error trying to parse loaded json: "+a);return}else if(this.xhrType===e.XHR_RESPONSE_TYPE.DOCUMENT)try{if(globalThis.DOMParser){var o=new DOMParser;this.data=o.parseFromString(r,"text/xml")}else{var s=document.createElement("div");s.innerHTML=r,this.data=s}this.type=e.TYPE.XML}catch(a){this.abort("Error trying to parse loaded xml: "+a);return}else this.data=t.response||r;else{this.abort("["+t.status+"] "+t.statusText+": "+t.responseURL);return}this.complete()},e.prototype._determineCrossOrigin=function(t,r){if(t.indexOf("data:")===0)return"";if(globalThis.origin!==globalThis.location.origin)return"anonymous";r=r||globalThis.location,Cv||(Cv=document.createElement("a")),Cv.href=t;var n=VO(Cv.href,{strictMode:!0}),i=!n.port&&r.port===""||n.port===r.port,o=n.protocol?n.protocol+":":"";return n.host!==r.hostname||!i||o!==r.protocol?"anonymous":""},e.prototype._determineXhrType=function(){return e._xhrTypeMap[this.extension]||e.XHR_RESPONSE_TYPE.TEXT},e.prototype._determineLoadType=function(){return e._loadTypeMap[this.extension]||e.LOAD_TYPE.XHR},e.prototype._getExtension=function(t){t===void 0&&(t=this.url);var r="";if(this.isDataUrl){var n=t.indexOf("/");r=t.substring(n+1,t.indexOf(";",n))}else{var i=t.indexOf("?"),o=t.indexOf("#"),s=Math.min(i>-1?i:t.length,o>-1?o:t.length);t=t.substring(0,s),r=t.substring(t.lastIndexOf(".")+1)}return r.toLowerCase()},e.prototype._getMimeFromXhrType=function(t){switch(t){case e.XHR_RESPONSE_TYPE.BUFFER:return"application/octet-binary";case e.XHR_RESPONSE_TYPE.BLOB:return"application/blob";case e.XHR_RESPONSE_TYPE.DOCUMENT:return"application/xml";case e.XHR_RESPONSE_TYPE.JSON:return"application/json";case e.XHR_RESPONSE_TYPE.DEFAULT:case e.XHR_RESPONSE_TYPE.TEXT:default:return"text/plain"}},e}();(function(e){(function(t){t[t.NONE=0]="NONE",t[t.DATA_URL=1]="DATA_URL",t[t.COMPLETE=2]="COMPLETE",t[t.LOADING=4]="LOADING"})(e.STATUS_FLAGS||(e.STATUS_FLAGS={})),function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.JSON=1]="JSON",t[t.XML=2]="XML",t[t.IMAGE=3]="IMAGE",t[t.AUDIO=4]="AUDIO",t[t.VIDEO=5]="VIDEO",t[t.TEXT=6]="TEXT"}(e.TYPE||(e.TYPE={})),function(t){t[t.XHR=1]="XHR",t[t.IMAGE=2]="IMAGE",t[t.AUDIO=3]="AUDIO",t[t.VIDEO=4]="VIDEO"}(e.LOAD_TYPE||(e.LOAD_TYPE={})),function(t){t.DEFAULT="text",t.BUFFER="arraybuffer",t.BLOB="blob",t.DOCUMENT="document",t.JSON="json",t.TEXT="text"}(e.XHR_RESPONSE_TYPE||(e.XHR_RESPONSE_TYPE={})),e._loadTypeMap={gif:e.LOAD_TYPE.IMAGE,png:e.LOAD_TYPE.IMAGE,bmp:e.LOAD_TYPE.IMAGE,jpg:e.LOAD_TYPE.IMAGE,jpeg:e.LOAD_TYPE.IMAGE,tif:e.LOAD_TYPE.IMAGE,tiff:e.LOAD_TYPE.IMAGE,webp:e.LOAD_TYPE.IMAGE,tga:e.LOAD_TYPE.IMAGE,svg:e.LOAD_TYPE.IMAGE,"svg+xml":e.LOAD_TYPE.IMAGE,mp3:e.LOAD_TYPE.AUDIO,ogg:e.LOAD_TYPE.AUDIO,wav:e.LOAD_TYPE.AUDIO,mp4:e.LOAD_TYPE.VIDEO,webm:e.LOAD_TYPE.VIDEO},e._xhrTypeMap={xhtml:e.XHR_RESPONSE_TYPE.DOCUMENT,html:e.XHR_RESPONSE_TYPE.DOCUMENT,htm:e.XHR_RESPONSE_TYPE.DOCUMENT,xml:e.XHR_RESPONSE_TYPE.DOCUMENT,tmx:e.XHR_RESPONSE_TYPE.DOCUMENT,svg:e.XHR_RESPONSE_TYPE.DOCUMENT,tsx:e.XHR_RESPONSE_TYPE.DOCUMENT,gif:e.XHR_RESPONSE_TYPE.BLOB,png:e.XHR_RESPONSE_TYPE.BLOB,bmp:e.XHR_RESPONSE_TYPE.BLOB,jpg:e.XHR_RESPONSE_TYPE.BLOB,jpeg:e.XHR_RESPONSE_TYPE.BLOB,tif:e.XHR_RESPONSE_TYPE.BLOB,tiff:e.XHR_RESPONSE_TYPE.BLOB,webp:e.XHR_RESPONSE_TYPE.BLOB,tga:e.XHR_RESPONSE_TYPE.BLOB,json:e.XHR_RESPONSE_TYPE.JSON,text:e.XHR_RESPONSE_TYPE.TEXT,txt:e.XHR_RESPONSE_TYPE.TEXT,ttf:e.XHR_RESPONSE_TYPE.BUFFER,otf:e.XHR_RESPONSE_TYPE.BUFFER},e.EMPTY_GIF="data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw=="})(wr||(wr={}));function Ll(){}function Gee(e){return function(){for(var r=arguments,n=[],i=0;i<arguments.length;i++)n[i]=r[i];if(e===null)throw new Error("Callback was already called.");var o=e;e=null,o.apply(this,n)}}var jee=function(){function e(t,r){this.data=t,this.callback=r}return e}(),__=function(){function e(t,r){var n=this;if(r===void 0&&(r=1),this.workers=0,this.saturated=Ll,this.unsaturated=Ll,this.empty=Ll,this.drain=Ll,this.error=Ll,this.started=!1,this.paused=!1,this._tasks=[],this._insert=function(i,o,s){if(s&&typeof s!="function")throw new Error("task callback must be a function");if(n.started=!0,i==null&&n.idle()){setTimeout(function(){return n.drain()},1);return}var a=new jee(i,typeof s=="function"?s:Ll);o?n._tasks.unshift(a):n._tasks.push(a),setTimeout(n.process,1)},this.process=function(){for(;!n.paused&&n.workers<n.concurrency&&n._tasks.length;){var i=n._tasks.shift();n._tasks.length===0&&n.empty(),n.workers+=1,n.workers===n.concurrency&&n.saturated(),n._worker(i.data,Gee(n._next(i)))}},this._worker=t,r===0)throw new Error("Concurrency must not be zero");this.concurrency=r,this.buffer=r/4}return e.prototype._next=function(t){var r=this;return function(){for(var n=arguments,i=[],o=0;o<arguments.length;o++)i[o]=n[o];r.workers-=1,t.callback.apply(t,i),i[0]!=null&&r.error(i[0],t.data),r.workers<=r.concurrency-r.buffer&&r.unsaturated(),r.idle()&&r.drain(),r.process()}},e.prototype.push=function(t,r){this._insert(t,!1,r)},e.prototype.kill=function(){this.workers=0,this.drain=Ll,this.started=!1,this._tasks=[]},e.prototype.unshift=function(t,r){this._insert(t,!0,r)},e.prototype.length=function(){return this._tasks.length},e.prototype.running=function(){return this.workers},e.prototype.idle=function(){return this._tasks.length+this.workers===0},e.prototype.pause=function(){this.paused!==!0&&(this.paused=!0)},e.prototype.resume=function(){if(this.paused!==!1){this.paused=!1;for(var t=1;t<=this.concurrency;t++)this.process()}},e.eachSeries=function(t,r,n,i){var o=0,s=t.length;function a(l){if(l||o===s){n&&n(l);return}i?setTimeout(function(){r(t[o++],a)},1):r(t[o++],a)}a()},e.queue=function(t,r){return new e(t,r)},e}(),b_=100,$ee=/(#[\w-]+)?$/,ss=function(){function e(t,r){var n=this;t===void 0&&(t=""),r===void 0&&(r=10),this.progress=0,this.loading=!1,this.defaultQueryString="",this._beforeMiddleware=[],this._afterMiddleware=[],this._resourcesParsing=[],this._boundLoadResource=function(l,u){return n._loadResource(l,u)},this.resources={},this.baseUrl=t,this._beforeMiddleware=[],this._afterMiddleware=[],this._resourcesParsing=[],this._boundLoadResource=function(l,u){return n._loadResource(l,u)},this._queue=__.queue(this._boundLoadResource,r),this._queue.pause(),this.resources={},this.onProgress=new Os,this.onError=new Os,this.onLoad=new Os,this.onStart=new Os,this.onComplete=new Os;for(var i=0;i<e._plugins.length;++i){var o=e._plugins[i],s=o.pre,a=o.use;s&&this.pre(s),a&&this.use(a)}this._protected=!1}return e.prototype._add=function(t,r,n,i){if(this.loading&&(!n||!n.parentResource))throw new Error("Cannot add resources while the loader is running.");if(this.resources[t])throw new Error('Resource named "'+t+'" already exists.');if(r=this._prepareUrl(r),this.resources[t]=new wr(t,r,n),typeof i=="function"&&this.resources[t].onAfterMiddleware.once(i),this.loading){for(var o=n.parentResource,s=[],a=0;a<o.children.length;++a)o.children[a].isComplete||s.push(o.children[a]);var l=o.progressChunk*(s.length+1),u=l/(s.length+2);o.children.push(this.resources[t]),o.progressChunk=u;for(var a=0;a<s.length;++a)s[a].progressChunk=u;this.resources[t].progressChunk=u}return this._queue.push(this.resources[t]),this},e.prototype.pre=function(t){return this._beforeMiddleware.push(t),this},e.prototype.use=function(t){return this._afterMiddleware.push(t),this},e.prototype.reset=function(){this.progress=0,this.loading=!1,this._queue.kill(),this._queue.pause();for(var t in this.resources){var r=this.resources[t];r._onLoadBinding&&r._onLoadBinding.detach(),r.isLoading&&r.abort("loader reset")}return this.resources={},this},e.prototype.load=function(t){if(typeof t=="function"&&this.onComplete.once(t),this.loading)return this;if(this._queue.idle())this._onStart(),this._onComplete();else{for(var r=this._queue._tasks.length,n=b_/r,i=0;i<this._queue._tasks.length;++i)this._queue._tasks[i].data.progressChunk=n;this._onStart(),this._queue.resume()}return this},Object.defineProperty(e.prototype,"concurrency",{get:function(){return this._queue.concurrency},set:function(t){this._queue.concurrency=t},enumerable:!1,configurable:!0}),e.prototype._prepareUrl=function(t){var r=VO(t,{strictMode:!0}),n;if(r.protocol||!r.path||t.indexOf("//")===0?n=t:this.baseUrl.length&&this.baseUrl.lastIndexOf("/")!==this.baseUrl.length-1&&t.charAt(0)!=="/"?n=this.baseUrl+"/"+t:n=this.baseUrl+t,this.defaultQueryString){var i=$ee.exec(n)[0];n=n.slice(0,n.length-i.length),n.indexOf("?")!==-1?n+="&"+this.defaultQueryString:n+="?"+this.defaultQueryString,n+=i}return n},e.prototype._loadResource=function(t,r){var n=this;t._dequeue=r,__.eachSeries(this._beforeMiddleware,function(i,o){i.call(n,t,function(){o(t.isComplete?{}:null)})},function(){t.isComplete?n._onLoad(t):(t._onLoadBinding=t.onComplete.once(n._onLoad,n),t.load())},!0)},e.prototype._onStart=function(){this.progress=0,this.loading=!0,this.onStart.dispatch(this)},e.prototype._onComplete=function(){this.progress=b_,this.loading=!1,this.onComplete.dispatch(this,this.resources)},e.prototype._onLoad=function(t){var r=this;t._onLoadBinding=null,this._resourcesParsing.push(t),t._dequeue(),__.eachSeries(this._afterMiddleware,function(n,i){n.call(r,t,i)},function(){t.onAfterMiddleware.dispatch(t),r.progress=Math.min(b_,r.progress+t.progressChunk),r.onProgress.dispatch(r,t),t.error?r.onError.dispatch(t.error,r,t):r.onLoad.dispatch(r,t),r._resourcesParsing.splice(r._resourcesParsing.indexOf(t),1),r._queue.idle()&&r._resourcesParsing.length===0&&r._onComplete()},!0)},e.prototype.destroy=function(){this._protected||this.reset()},Object.defineProperty(e,"shared",{get:function(){var t=e._shared;return t||(t=new e,t._protected=!0,e._shared=t),t},enumerable:!1,configurable:!0}),e.registerPlugin=function(t){return e._plugins.push(t),t.add&&t.add(),e},e._plugins=[],e}();ss.prototype.add=function(t,r,n,i){if(Array.isArray(t)){for(var o=0;o<t.length;++o)this.add(t[o]);return this}if(typeof t=="object"&&(n=t,i=r||n.callback||n.onComplete,r=n.url,t=n.name||n.key||n.url),typeof r!="string"&&(i=n,n=r,r=t),typeof r!="string")throw new Error("No url passed to add resource to loader.");return typeof n=="function"&&(i=n,n=null),this._add(t,r,n,i)};var Hee=function(){function e(){}return e.init=function(t){t=Object.assign({sharedLoader:!1},t),this.loader=t.sharedLoader?ss.shared:new ss},e.destroy=function(){this.loader&&(this.loader.destroy(),this.loader=null)},e}(),zee=function(){function e(){}return e.add=function(){wr.setExtensionLoadType("svg",wr.LOAD_TYPE.XHR),wr.setExtensionXhrType("svg",wr.XHR_RESPONSE_TYPE.TEXT)},e.use=function(t,r){if(t.data&&(t.type===wr.TYPE.IMAGE||t.extension==="svg")){var n=t.data,i=t.url,o=t.name,s=t.metadata;et.fromLoader(n,i,o,s).then(function(a){t.texture=a,r()}).catch(r)}else r()},e}(),Vee="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function Xee(e){for(var t="",r=0;r<e.length;){for(var n=[0,0,0],i=[0,0,0,0],o=0;o<n.length;++o)r<e.length?n[o]=e.charCodeAt(r++)&255:n[o]=0;i[0]=n[0]>>2,i[1]=(n[0]&3)<<4|n[1]>>4,i[2]=(n[1]&15)<<2|n[2]>>6,i[3]=n[2]&63;var s=r-(e.length-1);switch(s){case 2:i[3]=64,i[2]=64;break;case 1:i[3]=64;break}for(var o=0;o<i.length;++o)t+=Vee.charAt(i[o])}return t}function Wee(e,t){if(!e.data){t();return}if(e.xhr&&e.xhrType===wr.XHR_RESPONSE_TYPE.BLOB){if(!self.Blob||typeof e.data=="string"){var r=e.xhr.getResponseHeader("content-type");if(r&&r.indexOf("image")===0){e.data=new Image,e.data.src="data:"+r+";base64,"+Xee(e.xhr.responseText),e.type=wr.TYPE.IMAGE,e.data.onload=function(){e.data.onload=null,t()};return}}else if(e.data.type.indexOf("image")===0){var n=globalThis.URL||globalThis.webkitURL,i=n.createObjectURL(e.data);e.blob=e.data,e.data=new Image,e.data.src=i,e.type=wr.TYPE.IMAGE,e.data.onload=function(){n.revokeObjectURL(i),e.data.onload=null,t()};return}}t()}ss.registerPlugin({use:Wee});ss.registerPlugin(zee);/*!
 * @pixi/compressed-textures - v6.4.2
 * Compiled Thu, 02 Jun 2022 15:39:26 UTC
 *
 * @pixi/compressed-textures is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var Vt,ft;(function(e){e[e.COMPRESSED_RGB_S3TC_DXT1_EXT=33776]="COMPRESSED_RGB_S3TC_DXT1_EXT",e[e.COMPRESSED_RGBA_S3TC_DXT1_EXT=33777]="COMPRESSED_RGBA_S3TC_DXT1_EXT",e[e.COMPRESSED_RGBA_S3TC_DXT3_EXT=33778]="COMPRESSED_RGBA_S3TC_DXT3_EXT",e[e.COMPRESSED_RGBA_S3TC_DXT5_EXT=33779]="COMPRESSED_RGBA_S3TC_DXT5_EXT",e[e.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT=35917]="COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT",e[e.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT=35918]="COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT",e[e.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT=35919]="COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT",e[e.COMPRESSED_SRGB_S3TC_DXT1_EXT=35916]="COMPRESSED_SRGB_S3TC_DXT1_EXT",e[e.COMPRESSED_R11_EAC=37488]="COMPRESSED_R11_EAC",e[e.COMPRESSED_SIGNED_R11_EAC=37489]="COMPRESSED_SIGNED_R11_EAC",e[e.COMPRESSED_RG11_EAC=37490]="COMPRESSED_RG11_EAC",e[e.COMPRESSED_SIGNED_RG11_EAC=37491]="COMPRESSED_SIGNED_RG11_EAC",e[e.COMPRESSED_RGB8_ETC2=37492]="COMPRESSED_RGB8_ETC2",e[e.COMPRESSED_RGBA8_ETC2_EAC=37496]="COMPRESSED_RGBA8_ETC2_EAC",e[e.COMPRESSED_SRGB8_ETC2=37493]="COMPRESSED_SRGB8_ETC2",e[e.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC=37497]="COMPRESSED_SRGB8_ALPHA8_ETC2_EAC",e[e.COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2=37494]="COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2",e[e.COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2=37495]="COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2",e[e.COMPRESSED_RGB_PVRTC_4BPPV1_IMG=35840]="COMPRESSED_RGB_PVRTC_4BPPV1_IMG",e[e.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG=35842]="COMPRESSED_RGBA_PVRTC_4BPPV1_IMG",e[e.COMPRESSED_RGB_PVRTC_2BPPV1_IMG=35841]="COMPRESSED_RGB_PVRTC_2BPPV1_IMG",e[e.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG=35843]="COMPRESSED_RGBA_PVRTC_2BPPV1_IMG",e[e.COMPRESSED_RGB_ETC1_WEBGL=36196]="COMPRESSED_RGB_ETC1_WEBGL",e[e.COMPRESSED_RGB_ATC_WEBGL=35986]="COMPRESSED_RGB_ATC_WEBGL",e[e.COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL=35986]="COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL",e[e.COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL=34798]="COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL"})(ft||(ft={}));var Eg=(Vt={},Vt[ft.COMPRESSED_RGB_S3TC_DXT1_EXT]=.5,Vt[ft.COMPRESSED_RGBA_S3TC_DXT1_EXT]=.5,Vt[ft.COMPRESSED_RGBA_S3TC_DXT3_EXT]=1,Vt[ft.COMPRESSED_RGBA_S3TC_DXT5_EXT]=1,Vt[ft.COMPRESSED_SRGB_S3TC_DXT1_EXT]=.5,Vt[ft.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT]=.5,Vt[ft.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT]=1,Vt[ft.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT]=1,Vt[ft.COMPRESSED_R11_EAC]=.5,Vt[ft.COMPRESSED_SIGNED_R11_EAC]=.5,Vt[ft.COMPRESSED_RG11_EAC]=1,Vt[ft.COMPRESSED_SIGNED_RG11_EAC]=1,Vt[ft.COMPRESSED_RGB8_ETC2]=.5,Vt[ft.COMPRESSED_RGBA8_ETC2_EAC]=1,Vt[ft.COMPRESSED_SRGB8_ETC2]=.5,Vt[ft.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC]=1,Vt[ft.COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2]=.5,Vt[ft.COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2]=.5,Vt[ft.COMPRESSED_RGB_PVRTC_4BPPV1_IMG]=.5,Vt[ft.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG]=.5,Vt[ft.COMPRESSED_RGB_PVRTC_2BPPV1_IMG]=.25,Vt[ft.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG]=.25,Vt[ft.COMPRESSED_RGB_ETC1_WEBGL]=.5,Vt[ft.COMPRESSED_RGB_ATC_WEBGL]=.5,Vt[ft.COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL]=1,Vt[ft.COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL]=1,Vt);/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var Vw=function(e,t){return Vw=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])},Vw(e,t)};function XO(e,t){Vw(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}function Yee(e,t,r,n){return new(r||(r=Promise))(function(i,o){function s(u){try{l(n.next(u))}catch(c){o(c)}}function a(u){try{l(n.throw(u))}catch(c){o(c)}}function l(u){u.done?i(u.value):new r(function(c){c(u.value)}).then(s,a)}l((n=n.apply(e,t||[])).next())})}function Kee(e,t){var r={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,s;return s={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function a(u){return function(c){return l([u,c])}}function l(u){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(o=u[0]&2?i.return:u[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,u[1])).done)return o;switch(i=0,o&&(u=[u[0]&2,o.value]),u[0]){case 0:case 1:o=u;break;case 4:return r.label++,{value:u[1],done:!1};case 5:r.label++,i=u[1],u=[0];continue;case 7:u=r.ops.pop(),r.trys.pop();continue;default:if(o=r.trys,!(o=o.length>0&&o[o.length-1])&&(u[0]===6||u[0]===2)){r=0;continue}if(u[0]===3&&(!o||u[1]>o[0]&&u[1]<o[3])){r.label=u[1];break}if(u[0]===6&&r.label<o[1]){r.label=o[1],o=u;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(u);break}o[2]&&r.ops.pop(),r.trys.pop();continue}u=t.call(e,r)}catch(c){u=[6,c],i=0}finally{n=o=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}var qee=function(e){XO(t,e);function t(r,n){n===void 0&&(n={width:1,height:1,autoLoad:!0});var i=this,o,s;return typeof r=="string"?(o=r,s=new Uint8Array):(o=null,s=r),i=e.call(this,s,n)||this,i.origin=o,i.buffer=s?new Mw(s):null,i.origin&&n.autoLoad!==!1&&i.load(),s&&s.length&&(i.loaded=!0,i.onBlobLoaded(i.buffer.rawBinaryData)),i}return t.prototype.onBlobLoaded=function(r){},t.prototype.load=function(){return Yee(this,void 0,Promise,function(){var r,n,i;return Kee(this,function(o){switch(o.label){case 0:return[4,fetch(this.origin)];case 1:return r=o.sent(),[4,r.blob()];case 2:return n=o.sent(),[4,n.arrayBuffer()];case 3:return i=o.sent(),this.data=new Uint32Array(i),this.buffer=new Mw(i),this.loaded=!0,this.onBlobLoaded(i),this.update(),[2,this]}})})},t}(Mp),Xw=function(e){XO(t,e);function t(r,n){var i=e.call(this,r,n)||this;return i.format=n.format,i.levels=n.levels||1,i._width=n.width,i._height=n.height,i._extension=t._formatToExtension(i.format),(n.levelBuffers||i.buffer)&&(i._levelBuffers=n.levelBuffers||t._createLevelBuffers(r instanceof Uint8Array?r:i.buffer.uint8View,i.format,i.levels,4,4,i.width,i.height)),i}return t.prototype.upload=function(r,n,i){var o=r.gl,s=r.context.extensions[this._extension];if(!s)throw new Error(this._extension+" textures are not supported on the current machine");if(!this._levelBuffers)return!1;for(var a=0,l=this.levels;a<l;a++){var u=this._levelBuffers[a],c=u.levelID,f=u.levelWidth,p=u.levelHeight,v=u.levelBuffer;o.compressedTexImage2D(o.TEXTURE_2D,c,this.format,f,p,0,v)}return!0},t.prototype.onBlobLoaded=function(){this._levelBuffers=t._createLevelBuffers(this.buffer.uint8View,this.format,this.levels,4,4,this.width,this.height)},t._formatToExtension=function(r){if(r>=33776&&r<=33779)return"s3tc";if(r>=37488&&r<=37497)return"etc";if(r>=35840&&r<=35843)return"pvrtc";if(r>=36196)return"etc1";if(r>=35986&&r<=34798)return"atc";throw new Error("Invalid (compressed) texture format given!")},t._createLevelBuffers=function(r,n,i,o,s,a,l){for(var u=new Array(i),c=r.byteOffset,f=a,p=l,v=f+o-1&~(o-1),g=p+s-1&~(s-1),b=v*g*Eg[n],_=0;_<i;_++)u[_]={levelID:_,levelWidth:i>1?f:v,levelHeight:i>1?p:g,levelBuffer:new Uint8Array(r.buffer,c,b)},c+=b,f=f>>1||1,p=p>>1||1,v=f+o-1&~(o-1),g=p+s-1&~(s-1),b=v*g*Eg[n];return u},t}(qee),Zee=function(){function e(){}return e.use=function(t,r){var n=t.data,i=this;if(t.type===wr.TYPE.JSON&&n&&n.cacheID&&n.textures){for(var o=n.textures,s=void 0,a=void 0,l=0,u=o.length;l<u;l++){var c=o[l],f=c.src,p=c.format;if(p||(a=f),e.textureFormats[p]){s=f;break}}if(s=s||a,!s){r(new Error("Cannot load compressed-textures in "+t.url+", make sure you provide a fallback"));return}if(s===t.url){r(new Error("URL of compressed texture cannot be the same as the manifest's URL"));return}var v={crossOrigin:t.crossOrigin,metadata:t.metadata.imageMetadata,parentResource:t},g=Oc.resolve(t.url.replace(i.baseUrl,""),s),b=n.cacheID;i.add(b,g,v,function(_){if(_.error){r(_.error);return}var w=_.texture,x=w===void 0?null:w,T=_.textures,I=T===void 0?{}:T;Object.assign(t,{texture:x,textures:I}),r()})}else r()},Object.defineProperty(e,"textureExtensions",{get:function(){if(!e._textureExtensions){var t=document.createElement("canvas"),r=t.getContext("webgl");if(!r)return console.warn("WebGL not available for compressed textures. Silently failing."),{};var n={s3tc:r.getExtension("WEBGL_compressed_texture_s3tc"),s3tc_sRGB:r.getExtension("WEBGL_compressed_texture_s3tc_srgb"),etc:r.getExtension("WEBGL_compressed_texture_etc"),etc1:r.getExtension("WEBGL_compressed_texture_etc1"),pvrtc:r.getExtension("WEBGL_compressed_texture_pvrtc")||r.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc"),atc:r.getExtension("WEBGL_compressed_texture_atc"),astc:r.getExtension("WEBGL_compressed_texture_astc")};e._textureExtensions=n}return e._textureExtensions},enumerable:!1,configurable:!0}),Object.defineProperty(e,"textureFormats",{get:function(){if(!e._textureFormats){var t=e.textureExtensions;e._textureFormats={};for(var r in t){var n=t[r];!n||Object.assign(e._textureFormats,Object.getPrototypeOf(n))}}return e._textureFormats},enumerable:!1,configurable:!0}),e}();function WO(e,t,r){var n={textures:{},texture:null};if(!t)return n;var i=t.map(function(o){return new et(new wt(o,Object.assign({mipmap:Ks.OFF,alphaMode:To.NO_PREMULTIPLIED_ALPHA},r)))});return i.forEach(function(o,s){var a=o.baseTexture,l=e+"-"+(s+1);wt.addToCache(a,l),et.addToCache(o,l),s===0&&(wt.addToCache(a,e),et.addToCache(o,e),n.texture=o),n.textures[l]=o}),n}var Ff,uo;wr.setExtensionXhrType("dds",wr.XHR_RESPONSE_TYPE.BUFFER);var w_=4,Iv=124,Jee=32,bI=20,Qee=542327876,Nv={SIZE:1,FLAGS:2,HEIGHT:3,WIDTH:4,MIPMAP_COUNT:7,PIXEL_FORMAT:19},ete={SIZE:0,FLAGS:1,FOURCC:2,RGB_BITCOUNT:3,R_BIT_MASK:4,G_BIT_MASK:5,B_BIT_MASK:6,A_BIT_MASK:7},Pv={DXGI_FORMAT:0,RESOURCE_DIMENSION:1,MISC_FLAG:2,ARRAY_SIZE:3,MISC_FLAGS2:4},fo;(function(e){e[e.DXGI_FORMAT_UNKNOWN=0]="DXGI_FORMAT_UNKNOWN",e[e.DXGI_FORMAT_R32G32B32A32_TYPELESS=1]="DXGI_FORMAT_R32G32B32A32_TYPELESS",e[e.DXGI_FORMAT_R32G32B32A32_FLOAT=2]="DXGI_FORMAT_R32G32B32A32_FLOAT",e[e.DXGI_FORMAT_R32G32B32A32_UINT=3]="DXGI_FORMAT_R32G32B32A32_UINT",e[e.DXGI_FORMAT_R32G32B32A32_SINT=4]="DXGI_FORMAT_R32G32B32A32_SINT",e[e.DXGI_FORMAT_R32G32B32_TYPELESS=5]="DXGI_FORMAT_R32G32B32_TYPELESS",e[e.DXGI_FORMAT_R32G32B32_FLOAT=6]="DXGI_FORMAT_R32G32B32_FLOAT",e[e.DXGI_FORMAT_R32G32B32_UINT=7]="DXGI_FORMAT_R32G32B32_UINT",e[e.DXGI_FORMAT_R32G32B32_SINT=8]="DXGI_FORMAT_R32G32B32_SINT",e[e.DXGI_FORMAT_R16G16B16A16_TYPELESS=9]="DXGI_FORMAT_R16G16B16A16_TYPELESS",e[e.DXGI_FORMAT_R16G16B16A16_FLOAT=10]="DXGI_FORMAT_R16G16B16A16_FLOAT",e[e.DXGI_FORMAT_R16G16B16A16_UNORM=11]="DXGI_FORMAT_R16G16B16A16_UNORM",e[e.DXGI_FORMAT_R16G16B16A16_UINT=12]="DXGI_FORMAT_R16G16B16A16_UINT",e[e.DXGI_FORMAT_R16G16B16A16_SNORM=13]="DXGI_FORMAT_R16G16B16A16_SNORM",e[e.DXGI_FORMAT_R16G16B16A16_SINT=14]="DXGI_FORMAT_R16G16B16A16_SINT",e[e.DXGI_FORMAT_R32G32_TYPELESS=15]="DXGI_FORMAT_R32G32_TYPELESS",e[e.DXGI_FORMAT_R32G32_FLOAT=16]="DXGI_FORMAT_R32G32_FLOAT",e[e.DXGI_FORMAT_R32G32_UINT=17]="DXGI_FORMAT_R32G32_UINT",e[e.DXGI_FORMAT_R32G32_SINT=18]="DXGI_FORMAT_R32G32_SINT",e[e.DXGI_FORMAT_R32G8X24_TYPELESS=19]="DXGI_FORMAT_R32G8X24_TYPELESS",e[e.DXGI_FORMAT_D32_FLOAT_S8X24_UINT=20]="DXGI_FORMAT_D32_FLOAT_S8X24_UINT",e[e.DXGI_FORMAT_R32_FLOAT_X8X24_TYPELESS=21]="DXGI_FORMAT_R32_FLOAT_X8X24_TYPELESS",e[e.DXGI_FORMAT_X32_TYPELESS_G8X24_UINT=22]="DXGI_FORMAT_X32_TYPELESS_G8X24_UINT",e[e.DXGI_FORMAT_R10G10B10A2_TYPELESS=23]="DXGI_FORMAT_R10G10B10A2_TYPELESS",e[e.DXGI_FORMAT_R10G10B10A2_UNORM=24]="DXGI_FORMAT_R10G10B10A2_UNORM",e[e.DXGI_FORMAT_R10G10B10A2_UINT=25]="DXGI_FORMAT_R10G10B10A2_UINT",e[e.DXGI_FORMAT_R11G11B10_FLOAT=26]="DXGI_FORMAT_R11G11B10_FLOAT",e[e.DXGI_FORMAT_R8G8B8A8_TYPELESS=27]="DXGI_FORMAT_R8G8B8A8_TYPELESS",e[e.DXGI_FORMAT_R8G8B8A8_UNORM=28]="DXGI_FORMAT_R8G8B8A8_UNORM",e[e.DXGI_FORMAT_R8G8B8A8_UNORM_SRGB=29]="DXGI_FORMAT_R8G8B8A8_UNORM_SRGB",e[e.DXGI_FORMAT_R8G8B8A8_UINT=30]="DXGI_FORMAT_R8G8B8A8_UINT",e[e.DXGI_FORMAT_R8G8B8A8_SNORM=31]="DXGI_FORMAT_R8G8B8A8_SNORM",e[e.DXGI_FORMAT_R8G8B8A8_SINT=32]="DXGI_FORMAT_R8G8B8A8_SINT",e[e.DXGI_FORMAT_R16G16_TYPELESS=33]="DXGI_FORMAT_R16G16_TYPELESS",e[e.DXGI_FORMAT_R16G16_FLOAT=34]="DXGI_FORMAT_R16G16_FLOAT",e[e.DXGI_FORMAT_R16G16_UNORM=35]="DXGI_FORMAT_R16G16_UNORM",e[e.DXGI_FORMAT_R16G16_UINT=36]="DXGI_FORMAT_R16G16_UINT",e[e.DXGI_FORMAT_R16G16_SNORM=37]="DXGI_FORMAT_R16G16_SNORM",e[e.DXGI_FORMAT_R16G16_SINT=38]="DXGI_FORMAT_R16G16_SINT",e[e.DXGI_FORMAT_R32_TYPELESS=39]="DXGI_FORMAT_R32_TYPELESS",e[e.DXGI_FORMAT_D32_FLOAT=40]="DXGI_FORMAT_D32_FLOAT",e[e.DXGI_FORMAT_R32_FLOAT=41]="DXGI_FORMAT_R32_FLOAT",e[e.DXGI_FORMAT_R32_UINT=42]="DXGI_FORMAT_R32_UINT",e[e.DXGI_FORMAT_R32_SINT=43]="DXGI_FORMAT_R32_SINT",e[e.DXGI_FORMAT_R24G8_TYPELESS=44]="DXGI_FORMAT_R24G8_TYPELESS",e[e.DXGI_FORMAT_D24_UNORM_S8_UINT=45]="DXGI_FORMAT_D24_UNORM_S8_UINT",e[e.DXGI_FORMAT_R24_UNORM_X8_TYPELESS=46]="DXGI_FORMAT_R24_UNORM_X8_TYPELESS",e[e.DXGI_FORMAT_X24_TYPELESS_G8_UINT=47]="DXGI_FORMAT_X24_TYPELESS_G8_UINT",e[e.DXGI_FORMAT_R8G8_TYPELESS=48]="DXGI_FORMAT_R8G8_TYPELESS",e[e.DXGI_FORMAT_R8G8_UNORM=49]="DXGI_FORMAT_R8G8_UNORM",e[e.DXGI_FORMAT_R8G8_UINT=50]="DXGI_FORMAT_R8G8_UINT",e[e.DXGI_FORMAT_R8G8_SNORM=51]="DXGI_FORMAT_R8G8_SNORM",e[e.DXGI_FORMAT_R8G8_SINT=52]="DXGI_FORMAT_R8G8_SINT",e[e.DXGI_FORMAT_R16_TYPELESS=53]="DXGI_FORMAT_R16_TYPELESS",e[e.DXGI_FORMAT_R16_FLOAT=54]="DXGI_FORMAT_R16_FLOAT",e[e.DXGI_FORMAT_D16_UNORM=55]="DXGI_FORMAT_D16_UNORM",e[e.DXGI_FORMAT_R16_UNORM=56]="DXGI_FORMAT_R16_UNORM",e[e.DXGI_FORMAT_R16_UINT=57]="DXGI_FORMAT_R16_UINT",e[e.DXGI_FORMAT_R16_SNORM=58]="DXGI_FORMAT_R16_SNORM",e[e.DXGI_FORMAT_R16_SINT=59]="DXGI_FORMAT_R16_SINT",e[e.DXGI_FORMAT_R8_TYPELESS=60]="DXGI_FORMAT_R8_TYPELESS",e[e.DXGI_FORMAT_R8_UNORM=61]="DXGI_FORMAT_R8_UNORM",e[e.DXGI_FORMAT_R8_UINT=62]="DXGI_FORMAT_R8_UINT",e[e.DXGI_FORMAT_R8_SNORM=63]="DXGI_FORMAT_R8_SNORM",e[e.DXGI_FORMAT_R8_SINT=64]="DXGI_FORMAT_R8_SINT",e[e.DXGI_FORMAT_A8_UNORM=65]="DXGI_FORMAT_A8_UNORM",e[e.DXGI_FORMAT_R1_UNORM=66]="DXGI_FORMAT_R1_UNORM",e[e.DXGI_FORMAT_R9G9B9E5_SHAREDEXP=67]="DXGI_FORMAT_R9G9B9E5_SHAREDEXP",e[e.DXGI_FORMAT_R8G8_B8G8_UNORM=68]="DXGI_FORMAT_R8G8_B8G8_UNORM",e[e.DXGI_FORMAT_G8R8_G8B8_UNORM=69]="DXGI_FORMAT_G8R8_G8B8_UNORM",e[e.DXGI_FORMAT_BC1_TYPELESS=70]="DXGI_FORMAT_BC1_TYPELESS",e[e.DXGI_FORMAT_BC1_UNORM=71]="DXGI_FORMAT_BC1_UNORM",e[e.DXGI_FORMAT_BC1_UNORM_SRGB=72]="DXGI_FORMAT_BC1_UNORM_SRGB",e[e.DXGI_FORMAT_BC2_TYPELESS=73]="DXGI_FORMAT_BC2_TYPELESS",e[e.DXGI_FORMAT_BC2_UNORM=74]="DXGI_FORMAT_BC2_UNORM",e[e.DXGI_FORMAT_BC2_UNORM_SRGB=75]="DXGI_FORMAT_BC2_UNORM_SRGB",e[e.DXGI_FORMAT_BC3_TYPELESS=76]="DXGI_FORMAT_BC3_TYPELESS",e[e.DXGI_FORMAT_BC3_UNORM=77]="DXGI_FORMAT_BC3_UNORM",e[e.DXGI_FORMAT_BC3_UNORM_SRGB=78]="DXGI_FORMAT_BC3_UNORM_SRGB",e[e.DXGI_FORMAT_BC4_TYPELESS=79]="DXGI_FORMAT_BC4_TYPELESS",e[e.DXGI_FORMAT_BC4_UNORM=80]="DXGI_FORMAT_BC4_UNORM",e[e.DXGI_FORMAT_BC4_SNORM=81]="DXGI_FORMAT_BC4_SNORM",e[e.DXGI_FORMAT_BC5_TYPELESS=82]="DXGI_FORMAT_BC5_TYPELESS",e[e.DXGI_FORMAT_BC5_UNORM=83]="DXGI_FORMAT_BC5_UNORM",e[e.DXGI_FORMAT_BC5_SNORM=84]="DXGI_FORMAT_BC5_SNORM",e[e.DXGI_FORMAT_B5G6R5_UNORM=85]="DXGI_FORMAT_B5G6R5_UNORM",e[e.DXGI_FORMAT_B5G5R5A1_UNORM=86]="DXGI_FORMAT_B5G5R5A1_UNORM",e[e.DXGI_FORMAT_B8G8R8A8_UNORM=87]="DXGI_FORMAT_B8G8R8A8_UNORM",e[e.DXGI_FORMAT_B8G8R8X8_UNORM=88]="DXGI_FORMAT_B8G8R8X8_UNORM",e[e.DXGI_FORMAT_R10G10B10_XR_BIAS_A2_UNORM=89]="DXGI_FORMAT_R10G10B10_XR_BIAS_A2_UNORM",e[e.DXGI_FORMAT_B8G8R8A8_TYPELESS=90]="DXGI_FORMAT_B8G8R8A8_TYPELESS",e[e.DXGI_FORMAT_B8G8R8A8_UNORM_SRGB=91]="DXGI_FORMAT_B8G8R8A8_UNORM_SRGB",e[e.DXGI_FORMAT_B8G8R8X8_TYPELESS=92]="DXGI_FORMAT_B8G8R8X8_TYPELESS",e[e.DXGI_FORMAT_B8G8R8X8_UNORM_SRGB=93]="DXGI_FORMAT_B8G8R8X8_UNORM_SRGB",e[e.DXGI_FORMAT_BC6H_TYPELESS=94]="DXGI_FORMAT_BC6H_TYPELESS",e[e.DXGI_FORMAT_BC6H_UF16=95]="DXGI_FORMAT_BC6H_UF16",e[e.DXGI_FORMAT_BC6H_SF16=96]="DXGI_FORMAT_BC6H_SF16",e[e.DXGI_FORMAT_BC7_TYPELESS=97]="DXGI_FORMAT_BC7_TYPELESS",e[e.DXGI_FORMAT_BC7_UNORM=98]="DXGI_FORMAT_BC7_UNORM",e[e.DXGI_FORMAT_BC7_UNORM_SRGB=99]="DXGI_FORMAT_BC7_UNORM_SRGB",e[e.DXGI_FORMAT_AYUV=100]="DXGI_FORMAT_AYUV",e[e.DXGI_FORMAT_Y410=101]="DXGI_FORMAT_Y410",e[e.DXGI_FORMAT_Y416=102]="DXGI_FORMAT_Y416",e[e.DXGI_FORMAT_NV12=103]="DXGI_FORMAT_NV12",e[e.DXGI_FORMAT_P010=104]="DXGI_FORMAT_P010",e[e.DXGI_FORMAT_P016=105]="DXGI_FORMAT_P016",e[e.DXGI_FORMAT_420_OPAQUE=106]="DXGI_FORMAT_420_OPAQUE",e[e.DXGI_FORMAT_YUY2=107]="DXGI_FORMAT_YUY2",e[e.DXGI_FORMAT_Y210=108]="DXGI_FORMAT_Y210",e[e.DXGI_FORMAT_Y216=109]="DXGI_FORMAT_Y216",e[e.DXGI_FORMAT_NV11=110]="DXGI_FORMAT_NV11",e[e.DXGI_FORMAT_AI44=111]="DXGI_FORMAT_AI44",e[e.DXGI_FORMAT_IA44=112]="DXGI_FORMAT_IA44",e[e.DXGI_FORMAT_P8=113]="DXGI_FORMAT_P8",e[e.DXGI_FORMAT_A8P8=114]="DXGI_FORMAT_A8P8",e[e.DXGI_FORMAT_B4G4R4A4_UNORM=115]="DXGI_FORMAT_B4G4R4A4_UNORM",e[e.DXGI_FORMAT_P208=116]="DXGI_FORMAT_P208",e[e.DXGI_FORMAT_V208=117]="DXGI_FORMAT_V208",e[e.DXGI_FORMAT_V408=118]="DXGI_FORMAT_V408",e[e.DXGI_FORMAT_SAMPLER_FEEDBACK_MIN_MIP_OPAQUE=119]="DXGI_FORMAT_SAMPLER_FEEDBACK_MIN_MIP_OPAQUE",e[e.DXGI_FORMAT_SAMPLER_FEEDBACK_MIP_REGION_USED_OPAQUE=120]="DXGI_FORMAT_SAMPLER_FEEDBACK_MIP_REGION_USED_OPAQUE",e[e.DXGI_FORMAT_FORCE_UINT=121]="DXGI_FORMAT_FORCE_UINT"})(fo||(fo={}));var Ww;(function(e){e[e.DDS_DIMENSION_TEXTURE1D=2]="DDS_DIMENSION_TEXTURE1D",e[e.DDS_DIMENSION_TEXTURE2D=3]="DDS_DIMENSION_TEXTURE2D",e[e.DDS_DIMENSION_TEXTURE3D=6]="DDS_DIMENSION_TEXTURE3D"})(Ww||(Ww={}));var tte=1,rte=2,nte=4,ite=64,ote=512,ste=131072,ate=827611204,lte=861165636,ute=894720068,cte=808540228,hte=4,fte=(Ff={},Ff[ate]=ft.COMPRESSED_RGBA_S3TC_DXT1_EXT,Ff[lte]=ft.COMPRESSED_RGBA_S3TC_DXT3_EXT,Ff[ute]=ft.COMPRESSED_RGBA_S3TC_DXT5_EXT,Ff),dte=(uo={},uo[fo.DXGI_FORMAT_BC1_TYPELESS]=ft.COMPRESSED_RGBA_S3TC_DXT1_EXT,uo[fo.DXGI_FORMAT_BC1_UNORM]=ft.COMPRESSED_RGBA_S3TC_DXT1_EXT,uo[fo.DXGI_FORMAT_BC2_TYPELESS]=ft.COMPRESSED_RGBA_S3TC_DXT3_EXT,uo[fo.DXGI_FORMAT_BC2_UNORM]=ft.COMPRESSED_RGBA_S3TC_DXT3_EXT,uo[fo.DXGI_FORMAT_BC3_TYPELESS]=ft.COMPRESSED_RGBA_S3TC_DXT5_EXT,uo[fo.DXGI_FORMAT_BC3_UNORM]=ft.COMPRESSED_RGBA_S3TC_DXT5_EXT,uo[fo.DXGI_FORMAT_BC1_UNORM_SRGB]=ft.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT,uo[fo.DXGI_FORMAT_BC2_UNORM_SRGB]=ft.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT,uo[fo.DXGI_FORMAT_BC3_UNORM_SRGB]=ft.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT,uo),pte=function(){function e(){}return e.use=function(t,r){if(t.extension==="dds"&&t.data)try{Object.assign(t,WO(t.name||t.url,e.parse(t.data),t.metadata))}catch(n){r(n);return}r()},e.parse=function(t){var r=new Uint32Array(t),n=r[0];if(n!==Qee)throw new Error("Invalid DDS file magic word");var i=new Uint32Array(t,0,Iv/Uint32Array.BYTES_PER_ELEMENT),o=i[Nv.HEIGHT],s=i[Nv.WIDTH],a=i[Nv.MIPMAP_COUNT],l=new Uint32Array(t,Nv.PIXEL_FORMAT*Uint32Array.BYTES_PER_ELEMENT,Jee/Uint32Array.BYTES_PER_ELEMENT),u=l[tte];if(u&nte){var c=l[ete.FOURCC];if(c!==cte){var f=fte[c],p=w_+Iv,v=new Uint8Array(t,p),g=new Xw(v,{format:f,width:s,height:o,levels:a});return[g]}var b=w_+Iv,_=new Uint32Array(r.buffer,b,bI/Uint32Array.BYTES_PER_ELEMENT),w=_[Pv.DXGI_FORMAT],x=_[Pv.RESOURCE_DIMENSION],T=_[Pv.MISC_FLAG],I=_[Pv.ARRAY_SIZE],R=dte[w];if(R===void 0)throw new Error("DDSLoader cannot parse texture data with DXGI format "+w);if(T===hte)throw new Error("DDSLoader does not support cubemap textures");if(x===Ww.DDS_DIMENSION_TEXTURE3D)throw new Error("DDSLoader does not supported 3D texture data");var E=new Array,O=w_+Iv+bI;if(I===1)E.push(new Uint8Array(t,O));else{for(var P=Eg[R],N=0,A=s,j=o,X=0;X<a;X++){var B=Math.max(1,A+3&-4),ae=Math.max(1,j+3&-4),Y=B*ae*P;N+=Y,A=A>>>1,j=j>>>1}for(var K=O,X=0;X<I;X++)E.push(new Uint8Array(t,K,N)),K+=N}return E.map(function(me){return new Xw(me,{format:R,width:s,height:o,levels:a})})}throw u&ite?new Error("DDSLoader does not support uncompressed texture data."):u&ote?new Error("DDSLoader does not supported YUV uncompressed texture data."):u&ste?new Error("DDSLoader does not support single-channel (lumninance) texture data!"):u&rte?new Error("DDSLoader does not support single-channel (alpha) texture data!"):new Error("DDSLoader failed to load a texture file due to an unknown reason!")},e}(),ya,Ss,Mf;wr.setExtensionXhrType("ktx",wr.XHR_RESPONSE_TYPE.BUFFER);var wI=[171,75,84,88,32,49,49,187,13,10,26,10],mte=67305985,co={FILE_IDENTIFIER:0,ENDIANNESS:12,GL_TYPE:16,GL_TYPE_SIZE:20,GL_FORMAT:24,GL_INTERNAL_FORMAT:28,GL_BASE_INTERNAL_FORMAT:32,PIXEL_WIDTH:36,PIXEL_HEIGHT:40,PIXEL_DEPTH:44,NUMBER_OF_ARRAY_ELEMENTS:48,NUMBER_OF_FACES:52,NUMBER_OF_MIPMAP_LEVELS:56,BYTES_OF_KEY_VALUE_DATA:60},x_=64,xI=(ya={},ya[$e.UNSIGNED_BYTE]=1,ya[$e.UNSIGNED_SHORT]=2,ya[$e.INT]=4,ya[$e.UNSIGNED_INT]=4,ya[$e.FLOAT]=4,ya[$e.HALF_FLOAT]=8,ya),vte=(Ss={},Ss[Se.RGBA]=4,Ss[Se.RGB]=3,Ss[Se.RG]=2,Ss[Se.RED]=1,Ss[Se.LUMINANCE]=1,Ss[Se.LUMINANCE_ALPHA]=2,Ss[Se.ALPHA]=1,Ss),gte=(Mf={},Mf[$e.UNSIGNED_SHORT_4_4_4_4]=2,Mf[$e.UNSIGNED_SHORT_5_5_5_1]=2,Mf[$e.UNSIGNED_SHORT_5_6_5]=2,Mf),yte=function(){function e(){}return e.use=function(t,r){if(t.extension==="ktx"&&t.data)try{var n=t.name||t.url,i=e.parse(n,t.data),o=i.compressed,s=i.uncompressed,a=i.kvData;if(o){var l=WO(n,o,t.metadata);if(a&&l.textures)for(var u in l.textures)l.textures[u].baseTexture.ktxKeyValueData=a;Object.assign(t,l)}else if(s){var c={};s.forEach(function(f,p){var v=new et(new wt(f.resource,{mipmap:Ks.OFF,alphaMode:To.NO_PREMULTIPLIED_ALPHA,type:f.type,format:f.format})),g=n+"-"+(p+1);a&&(v.baseTexture.ktxKeyValueData=a),wt.addToCache(v.baseTexture,g),et.addToCache(v,g),p===0&&(c[n]=v,wt.addToCache(v.baseTexture,n),et.addToCache(v,n)),c[g]=v}),Object.assign(t,{textures:c})}}catch(f){r(f);return}r()},e.parse=function(t,r){var n=new DataView(r);if(!e.validate(t,n))return null;var i=n.getUint32(co.ENDIANNESS,!0)===mte,o=n.getUint32(co.GL_TYPE,i),s=n.getUint32(co.GL_FORMAT,i),a=n.getUint32(co.GL_INTERNAL_FORMAT,i),l=n.getUint32(co.PIXEL_WIDTH,i),u=n.getUint32(co.PIXEL_HEIGHT,i)||1,c=n.getUint32(co.PIXEL_DEPTH,i)||1,f=n.getUint32(co.NUMBER_OF_ARRAY_ELEMENTS,i)||1,p=n.getUint32(co.NUMBER_OF_FACES,i),v=n.getUint32(co.NUMBER_OF_MIPMAP_LEVELS,i),g=n.getUint32(co.BYTES_OF_KEY_VALUE_DATA,i);if(u===0||c!==1)throw new Error("Only 2D textures are supported");if(p!==1)throw new Error("CubeTextures are not supported by KTXLoader yet!");if(f!==1)throw new Error("WebGL does not support array textures");var b=4,_=4,w=l+3&-4,x=u+3&-4,T=new Array(f),I=l*u;o===0&&(I=w*x);var R;if(o!==0?xI[o]?R=xI[o]*vte[s]:R=gte[o]:R=Eg[a],R===void 0)throw new Error("Unable to resolve the pixel format stored in the *.ktx file!");for(var E=e.loadKeyValueData?e.parseKvData(n,g,i):null,O=I*R,P=O,N=l,A=u,j=w,X=x,B=x_+g,ae=0;ae<v;ae++){for(var Y=n.getUint32(B,i),K=B+4,me=0;me<f;me++){var ue=T[me];ue||(ue=T[me]=new Array(v)),ue[ae]={levelID:ae,levelWidth:v>1||o!==0?N:j,levelHeight:v>1||o!==0?A:X,levelBuffer:new Uint8Array(r,K,P)},K+=P}B+=Y+4,B=B%4!==0?B+4-B%4:B,N=N>>1||1,A=A>>1||1,j=N+b-1&~(b-1),X=A+_-1&~(_-1),P=j*X*R}return o!==0?{uncompressed:T.map(function(ie){var Q=ie[0].levelBuffer,ee=!1;return o===$e.FLOAT?Q=new Float32Array(ie[0].levelBuffer.buffer,ie[0].levelBuffer.byteOffset,ie[0].levelBuffer.byteLength/4):o===$e.UNSIGNED_INT?(ee=!0,Q=new Uint32Array(ie[0].levelBuffer.buffer,ie[0].levelBuffer.byteOffset,ie[0].levelBuffer.byteLength/4)):o===$e.INT&&(ee=!0,Q=new Int32Array(ie[0].levelBuffer.buffer,ie[0].levelBuffer.byteOffset,ie[0].levelBuffer.byteLength/4)),{resource:new Mp(Q,{width:ie[0].levelWidth,height:ie[0].levelHeight}),type:o,format:ee?e.convertFormatToInteger(s):s}}),kvData:E}:{compressed:T.map(function(ie){return new Xw(null,{format:a,width:l,height:u,levels:v,levelBuffers:ie})}),kvData:E}},e.validate=function(t,r){for(var n=0;n<wI.length;n++)if(r.getUint8(n)!==wI[n])return console.error(t+" is not a valid *.ktx file!"),!1;return!0},e.convertFormatToInteger=function(t){switch(t){case Se.RGBA:return Se.RGBA_INTEGER;case Se.RGB:return Se.RGB_INTEGER;case Se.RG:return Se.RG_INTEGER;case Se.RED:return Se.RED_INTEGER;default:return t}},e.parseKvData=function(t,r,n){for(var i=new Map,o=0;o<r;){var s=t.getUint32(x_+o,n),a=x_+o+4,l=3-(s+3)%4;if(s===0||s>r-o){console.error("KTXLoader: keyAndValueByteSize out of bounds");break}for(var u=0;u<s&&t.getUint8(a+u)!==0;u++);if(u===-1){console.error("KTXLoader: Failed to find null byte terminating kvData key");break}var c=new TextDecoder().decode(new Uint8Array(t.buffer,a,u)),f=new DataView(t.buffer,a+u+1,s-u-1);i.set(c,f),o+=4+s+l}return i},e.loadKeyValueData=!1,e}();/*!
 * @pixi/particle-container - v6.4.2
 * Compiled Thu, 02 Jun 2022 15:39:26 UTC
 *
 * @pixi/particle-container is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var Yw=function(e,t){return Yw=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])},Yw(e,t)};function YO(e,t){Yw(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var _te=function(e){YO(t,e);function t(r,n,i,o){r===void 0&&(r=1500),i===void 0&&(i=16384),o===void 0&&(o=!1);var s=e.call(this)||this,a=16384;return i>a&&(i=a),s._properties=[!1,!0,!1,!1,!1],s._maxSize=r,s._batchSize=i,s._buffers=null,s._bufferUpdateIDs=[],s._updateID=0,s.interactiveChildren=!1,s.blendMode=Ze.NORMAL,s.autoResize=o,s.roundPixels=!0,s.baseTexture=null,s.setProperties(n),s._tint=0,s.tintRgb=new Float32Array(4),s.tint=16777215,s}return t.prototype.setProperties=function(r){r&&(this._properties[0]="vertices"in r||"scale"in r?!!r.vertices||!!r.scale:this._properties[0],this._properties[1]="position"in r?!!r.position:this._properties[1],this._properties[2]="rotation"in r?!!r.rotation:this._properties[2],this._properties[3]="uvs"in r?!!r.uvs:this._properties[3],this._properties[4]="tint"in r||"alpha"in r?!!r.tint||!!r.alpha:this._properties[4])},t.prototype.updateTransform=function(){this.displayObjectUpdateTransform()},Object.defineProperty(t.prototype,"tint",{get:function(){return this._tint},set:function(r){this._tint=r,sl(r,this.tintRgb)},enumerable:!1,configurable:!0}),t.prototype.render=function(r){var n=this;!this.visible||this.worldAlpha<=0||!this.children.length||!this.renderable||(this.baseTexture||(this.baseTexture=this.children[0]._texture.baseTexture,this.baseTexture.valid||this.baseTexture.once("update",function(){return n.onChildrenChange(0)})),r.batch.setObjectRenderer(r.plugins.particle),r.plugins.particle.render(this))},t.prototype.onChildrenChange=function(r){for(var n=Math.floor(r/this._batchSize);this._bufferUpdateIDs.length<n;)this._bufferUpdateIDs.push(0);this._bufferUpdateIDs[n]=++this._updateID},t.prototype.dispose=function(){if(this._buffers){for(var r=0;r<this._buffers.length;++r)this._buffers[r].destroy();this._buffers=null}},t.prototype.destroy=function(r){e.prototype.destroy.call(this,r),this.dispose(),this._properties=null,this._buffers=null,this._bufferUpdateIDs=null},t}(Pi),TI=function(){function e(t,r,n){this.geometry=new kh,this.indexBuffer=null,this.size=n,this.dynamicProperties=[],this.staticProperties=[];for(var i=0;i<t.length;++i){var o=t[i];o={attributeName:o.attributeName,size:o.size,uploadFunction:o.uploadFunction,type:o.type||$e.FLOAT,offset:o.offset},r[i]?this.dynamicProperties.push(o):this.staticProperties.push(o)}this.staticStride=0,this.staticBuffer=null,this.staticData=null,this.staticDataUint32=null,this.dynamicStride=0,this.dynamicBuffer=null,this.dynamicData=null,this.dynamicDataUint32=null,this._updateID=0,this.initBuffers()}return e.prototype.initBuffers=function(){var t=this.geometry,r=0;this.indexBuffer=new Ar(LJ(this.size),!0,!0),t.addIndex(this.indexBuffer),this.dynamicStride=0;for(var n=0;n<this.dynamicProperties.length;++n){var i=this.dynamicProperties[n];i.offset=r,r+=i.size,this.dynamicStride+=i.size}var o=new ArrayBuffer(this.size*this.dynamicStride*4*4);this.dynamicData=new Float32Array(o),this.dynamicDataUint32=new Uint32Array(o),this.dynamicBuffer=new Ar(this.dynamicData,!1,!1);var s=0;this.staticStride=0;for(var n=0;n<this.staticProperties.length;++n){var i=this.staticProperties[n];i.offset=s,s+=i.size,this.staticStride+=i.size}var a=new ArrayBuffer(this.size*this.staticStride*4*4);this.staticData=new Float32Array(a),this.staticDataUint32=new Uint32Array(a),this.staticBuffer=new Ar(this.staticData,!0,!1);for(var n=0;n<this.dynamicProperties.length;++n){var i=this.dynamicProperties[n];t.addAttribute(i.attributeName,this.dynamicBuffer,0,i.type===$e.UNSIGNED_BYTE,i.type,this.dynamicStride*4,i.offset*4)}for(var n=0;n<this.staticProperties.length;++n){var i=this.staticProperties[n];t.addAttribute(i.attributeName,this.staticBuffer,0,i.type===$e.UNSIGNED_BYTE,i.type,this.staticStride*4,i.offset*4)}},e.prototype.uploadDynamic=function(t,r,n){for(var i=0;i<this.dynamicProperties.length;i++){var o=this.dynamicProperties[i];o.uploadFunction(t,r,n,o.type===$e.UNSIGNED_BYTE?this.dynamicDataUint32:this.dynamicData,this.dynamicStride,o.offset)}this.dynamicBuffer._updateID++},e.prototype.uploadStatic=function(t,r,n){for(var i=0;i<this.staticProperties.length;i++){var o=this.staticProperties[i];o.uploadFunction(t,r,n,o.type===$e.UNSIGNED_BYTE?this.staticDataUint32:this.staticData,this.staticStride,o.offset)}this.staticBuffer._updateID++},e.prototype.destroy=function(){this.indexBuffer=null,this.dynamicProperties=null,this.dynamicBuffer=null,this.dynamicData=null,this.dynamicDataUint32=null,this.staticProperties=null,this.staticBuffer=null,this.staticData=null,this.staticDataUint32=null,this.geometry.destroy()},e}(),bte=`varying vec2 vTextureCoord;
varying vec4 vColor;

uniform sampler2D uSampler;

void main(void){
    vec4 color = texture2D(uSampler, vTextureCoord) * vColor;
    gl_FragColor = color;
}`,wte=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;
attribute vec4 aColor;

attribute vec2 aPositionCoord;
attribute float aRotation;

uniform mat3 translationMatrix;
uniform vec4 uColor;

varying vec2 vTextureCoord;
varying vec4 vColor;

void main(void){
    float x = (aVertexPosition.x) * cos(aRotation) - (aVertexPosition.y) * sin(aRotation);
    float y = (aVertexPosition.x) * sin(aRotation) + (aVertexPosition.y) * cos(aRotation);

    vec2 v = vec2(x, y);
    v = v + aPositionCoord;

    gl_Position = vec4((translationMatrix * vec3(v, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = aTextureCoord;
    vColor = aColor * uColor;
}
`,xte=function(e){YO(t,e);function t(r){var n=e.call(this,r)||this;return n.shader=null,n.properties=null,n.tempMatrix=new er,n.properties=[{attributeName:"aVertexPosition",size:2,uploadFunction:n.uploadVertices,offset:0},{attributeName:"aPositionCoord",size:2,uploadFunction:n.uploadPosition,offset:0},{attributeName:"aRotation",size:1,uploadFunction:n.uploadRotation,offset:0},{attributeName:"aTextureCoord",size:2,uploadFunction:n.uploadUvs,offset:0},{attributeName:"aColor",size:1,type:$e.UNSIGNED_BYTE,uploadFunction:n.uploadTint,offset:0}],n.shader=Vs.from(wte,bte,{}),n.state=gl.for2d(),n}return t.prototype.render=function(r){var n=r.children,i=r._maxSize,o=r._batchSize,s=this.renderer,a=n.length;if(a!==0){a>i&&!r.autoResize&&(a=i);var l=r._buffers;l||(l=r._buffers=this.generateBuffers(r));var u=n[0]._texture.baseTexture;this.state.blendMode=_O(r.blendMode,u.alphaMode),s.state.set(this.state);var c=s.gl,f=r.worldTransform.copyTo(this.tempMatrix);f.prepend(s.globalUniforms.uniforms.projectionMatrix),this.shader.uniforms.translationMatrix=f.toArray(!0),this.shader.uniforms.uColor=OJ(r.tintRgb,r.worldAlpha,this.shader.uniforms.uColor,u.alphaMode),this.shader.uniforms.uSampler=u,this.renderer.shader.bind(this.shader);for(var p=!1,v=0,g=0;v<a;v+=o,g+=1){var b=a-v;b>o&&(b=o),g>=l.length&&l.push(this._generateOneMoreBuffer(r));var _=l[g];_.uploadDynamic(n,v,b);var w=r._bufferUpdateIDs[g]||0;p=p||_._updateID<w,p&&(_._updateID=r._updateID,_.uploadStatic(n,v,b)),s.geometry.bind(_.geometry),c.drawElements(c.TRIANGLES,b*6,c.UNSIGNED_SHORT,0)}}},t.prototype.generateBuffers=function(r){for(var n=[],i=r._maxSize,o=r._batchSize,s=r._properties,a=0;a<i;a+=o)n.push(new TI(this.properties,s,o));return n},t.prototype._generateOneMoreBuffer=function(r){var n=r._batchSize,i=r._properties;return new TI(this.properties,i,n)},t.prototype.uploadVertices=function(r,n,i,o,s,a){for(var l=0,u=0,c=0,f=0,p=0;p<i;++p){var v=r[n+p],g=v._texture,b=v.scale.x,_=v.scale.y,w=g.trim,x=g.orig;w?(u=w.x-v.anchor.x*x.width,l=u+w.width,f=w.y-v.anchor.y*x.height,c=f+w.height):(l=x.width*(1-v.anchor.x),u=x.width*-v.anchor.x,c=x.height*(1-v.anchor.y),f=x.height*-v.anchor.y),o[a]=u*b,o[a+1]=f*_,o[a+s]=l*b,o[a+s+1]=f*_,o[a+s*2]=l*b,o[a+s*2+1]=c*_,o[a+s*3]=u*b,o[a+s*3+1]=c*_,a+=s*4}},t.prototype.uploadPosition=function(r,n,i,o,s,a){for(var l=0;l<i;l++){var u=r[n+l].position;o[a]=u.x,o[a+1]=u.y,o[a+s]=u.x,o[a+s+1]=u.y,o[a+s*2]=u.x,o[a+s*2+1]=u.y,o[a+s*3]=u.x,o[a+s*3+1]=u.y,a+=s*4}},t.prototype.uploadRotation=function(r,n,i,o,s,a){for(var l=0;l<i;l++){var u=r[n+l].rotation;o[a]=u,o[a+s]=u,o[a+s*2]=u,o[a+s*3]=u,a+=s*4}},t.prototype.uploadUvs=function(r,n,i,o,s,a){for(var l=0;l<i;++l){var u=r[n+l]._texture._uvs;u?(o[a]=u.x0,o[a+1]=u.y0,o[a+s]=u.x1,o[a+s+1]=u.y1,o[a+s*2]=u.x2,o[a+s*2+1]=u.y2,o[a+s*3]=u.x3,o[a+s*3+1]=u.y3,a+=s*4):(o[a]=0,o[a+1]=0,o[a+s]=0,o[a+s+1]=0,o[a+s*2]=0,o[a+s*2+1]=0,o[a+s*3]=0,o[a+s*3+1]=0,a+=s*4)}},t.prototype.uploadTint=function(r,n,i,o,s,a){for(var l=0;l<i;++l){var u=r[n+l],c=u._texture.baseTexture.alphaMode>0,f=u.alpha,p=f<1&&c?Vy(u._tintRGB,f):u._tintRGB+(f*255<<24);o[a]=p,o[a+s]=p,o[a+s*2]=p,o[a+s*3]=p,a+=s*4}},t.prototype.destroy=function(){e.prototype.destroy.call(this),this.shader&&(this.shader.destroy(),this.shader=null),this.tempMatrix=null},t}(Xy);/*!
 * @pixi/graphics - v6.4.2
 * Compiled Thu, 02 Jun 2022 15:39:26 UTC
 *
 * @pixi/graphics is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var oi;(function(e){e.MITER="miter",e.BEVEL="bevel",e.ROUND="round"})(oi||(oi={}));var zi;(function(e){e.BUTT="butt",e.ROUND="round",e.SQUARE="square"})(zi||(zi={}));var ep={adaptive:!0,maxLength:10,minSegments:8,maxSegments:2048,epsilon:1e-4,_segmentsCount:function(e,t){if(t===void 0&&(t=20),!this.adaptive||!e||isNaN(e))return t;var r=Math.ceil(e/this.maxLength);return r<this.minSegments?r=this.minSegments:r>this.maxSegments&&(r=this.maxSegments),r}},KO=function(){function e(){this.color=16777215,this.alpha=1,this.texture=et.WHITE,this.matrix=null,this.visible=!1,this.reset()}return e.prototype.clone=function(){var t=new e;return t.color=this.color,t.alpha=this.alpha,t.texture=this.texture,t.matrix=this.matrix,t.visible=this.visible,t},e.prototype.reset=function(){this.color=16777215,this.alpha=1,this.texture=et.WHITE,this.matrix=null,this.visible=!1},e.prototype.destroy=function(){this.texture=null,this.matrix=null},e}();/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var Kw=function(e,t){return Kw=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])},Kw(e,t)};function F4(e,t){Kw(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}function SI(e,t){var r,n;t===void 0&&(t=!1);var i=e.length;if(!(i<6)){for(var o=0,s=0,a=e[i-2],l=e[i-1];s<i;s+=2){var u=e[s],c=e[s+1];o+=(u-a)*(c+l),a=u,l=c}if(!t&&o>0||t&&o<=0)for(var f=i/2,s=f+f%2;s<i;s+=2){var p=i-s-2,v=i-s-1,g=s,b=s+1;r=[e[g],e[p]],e[p]=r[0],e[g]=r[1],n=[e[b],e[v]],e[v]=n[0],e[b]=n[1]}}}var M4={build:function(e){e.points=e.shape.points.slice()},triangulate:function(e,t){var r=e.points,n=e.holes,i=t.points,o=t.indices;if(r.length>=6){SI(r,!1);for(var s=[],a=0;a<n.length;a++){var l=n[a];SI(l.points,!0),s.push(r.length/2),r=r.concat(l.points)}var u=Rh.exports(r,s,2);if(!u)return;for(var c=i.length/2,a=0;a<u.length;a+=3)o.push(u[a]+c),o.push(u[a+1]+c),o.push(u[a+2]+c);for(var a=0;a<r.length;a++)i.push(r[a])}}},tp={build:function(e){var t=e.points,r,n,i,o,s,a;if(e.type===vt.CIRC){var l=e.shape;r=l.x,n=l.y,s=a=l.radius,i=o=0}else if(e.type===vt.ELIP){var u=e.shape;r=u.x,n=u.y,s=u.width,a=u.height,i=o=0}else{var c=e.shape,f=c.width/2,p=c.height/2;r=c.x+f,n=c.y+p,s=a=Math.max(0,Math.min(c.radius,Math.min(f,p))),i=f-s,o=p-a}if(!(s>=0&&a>=0&&i>=0&&o>=0)){t.length=0;return}var v=Math.ceil(2.3*Math.sqrt(s+a)),g=v*8+(i?4:0)+(o?4:0);if(t.length=g,g!==0){if(v===0){t.length=8,t[0]=t[6]=r+i,t[1]=t[3]=n+o,t[2]=t[4]=r-i,t[5]=t[7]=n-o;return}var b=0,_=v*4+(i?2:0)+2,w=_,x=g;{var T=i+s,I=o,R=r+T,E=r-T,O=n+I;if(t[b++]=R,t[b++]=O,t[--_]=O,t[--_]=E,o){var P=n-I;t[w++]=E,t[w++]=P,t[--x]=P,t[--x]=R}}for(var N=1;N<v;N++){var A=Math.PI/2*(N/v),T=i+Math.cos(A)*s,I=o+Math.sin(A)*a,R=r+T,E=r-T,O=n+I,P=n-I;t[b++]=R,t[b++]=O,t[--_]=O,t[--_]=E,t[w++]=E,t[w++]=P,t[--x]=P,t[--x]=R}{var T=i,I=o+a,R=r+T,E=r-T,O=n+I,P=n-I;t[b++]=R,t[b++]=O,t[--x]=P,t[--x]=R,i&&(t[b++]=E,t[b++]=O,t[--x]=P,t[--x]=E)}}},triangulate:function(e,t){var r=e.points,n=t.points,i=t.indices,o=n.length/2,s=o,a,l;if(e.type!==vt.RREC){var u=e.shape;a=u.x,l=u.y}else{var c=e.shape;a=c.x+c.width/2,l=c.y+c.height/2}var f=e.matrix;n.push(e.matrix?f.a*a+f.c*l+f.tx:a,e.matrix?f.b*a+f.d*l+f.ty:l),o++,n.push(r[0],r[1]);for(var p=2;p<r.length;p+=2)n.push(r[p],r[p+1]),i.push(o++,s,o);i.push(s+1,s,o)}},qO={build:function(e){var t=e.shape,r=t.x,n=t.y,i=t.width,o=t.height,s=e.points;s.length=0,s.push(r,n,r+i,n,r+i,n+o,r,n+o)},triangulate:function(e,t){var r=e.points,n=t.points,i=n.length/2;n.push(r[0],r[1],r[2],r[3],r[6],r[7],r[4],r[5]),t.indices.push(i,i+1,i+2,i+1,i+2,i+3)}};function uc(e,t,r){var n=t-e;return e+n*r}function Av(e,t,r,n,i,o,s){s===void 0&&(s=[]);for(var a=20,l=s,u=0,c=0,f=0,p=0,v=0,g=0,b=0,_=0;b<=a;++b)_=b/a,u=uc(e,r,_),c=uc(t,n,_),f=uc(r,i,_),p=uc(n,o,_),v=uc(u,f,_),g=uc(c,p,_),!(b===0&&l[l.length-2]===v&&l[l.length-1]===g)&&l.push(v,g);return l}var ZO={build:function(e){if(Ya.nextRoundedRectBehavior){tp.build(e);return}var t=e.shape,r=e.points,n=t.x,i=t.y,o=t.width,s=t.height,a=Math.max(0,Math.min(t.radius,Math.min(o,s)/2));r.length=0,a?(Av(n,i+a,n,i,n+a,i,r),Av(n+o-a,i,n+o,i,n+o,i+a,r),Av(n+o,i+s-a,n+o,i+s,n+o-a,i+s,r),Av(n+a,i+s,n,i+s,n,i+s-a,r)):r.push(n,i,n+o,i,n+o,i+s,n,i+s)},triangulate:function(e,t){if(Ya.nextRoundedRectBehavior){tp.triangulate(e,t);return}for(var r=e.points,n=t.points,i=t.indices,o=n.length/2,s=Rh.exports(r,null,2),a=0,l=s.length;a<l;a+=3)i.push(s[a]+o),i.push(s[a+1]+o),i.push(s[a+2]+o);for(var a=0,l=r.length;a<l;a++)n.push(r[a],r[++a])}};function EI(e,t,r,n,i,o,s,a){var l=e-r*i,u=t-n*i,c=e+r*o,f=t+n*o,p,v;s?(p=n,v=-r):(p=-n,v=r);var g=l+p,b=u+v,_=c+p,w=f+v;return a.push(g,b),a.push(_,w),2}function cc(e,t,r,n,i,o,s,a){var l=r-e,u=n-t,c=Math.atan2(l,u),f=Math.atan2(i-e,o-t);a&&c<f?c+=Math.PI*2:!a&&c>f&&(f+=Math.PI*2);var p=c,v=f-c,g=Math.abs(v),b=Math.sqrt(l*l+u*u),_=(15*g*Math.sqrt(b)/Math.PI>>0)+1,w=v/_;if(p+=w,a){s.push(e,t),s.push(r,n);for(var x=1,T=p;x<_;x++,T+=w)s.push(e,t),s.push(e+Math.sin(T)*b,t+Math.cos(T)*b);s.push(e,t),s.push(i,o)}else{s.push(r,n),s.push(e,t);for(var x=1,T=p;x<_;x++,T+=w)s.push(e+Math.sin(T)*b,t+Math.cos(T)*b),s.push(e,t);s.push(i,o),s.push(e,t)}return _*2}function Tte(e,t){var r=e.shape,n=e.points||r.points.slice(),i=t.closePointEps;if(n.length!==0){var o=e.lineStyle,s=new Gt(n[0],n[1]),a=new Gt(n[n.length-2],n[n.length-1]),l=r.type!==vt.POLY||r.closeStroke,u=Math.abs(s.x-a.x)<i&&Math.abs(s.y-a.y)<i;if(l){n=n.slice(),u&&(n.pop(),n.pop(),a.set(n[n.length-2],n[n.length-1]));var c=(s.x+a.x)*.5,f=(a.y+s.y)*.5;n.unshift(c,f),n.push(c,f)}var p=t.points,v=n.length/2,g=n.length,b=p.length/2,_=o.width/2,w=_*_,x=o.miterLimit*o.miterLimit,T=n[0],I=n[1],R=n[2],E=n[3],O=0,P=0,N=-(I-E),A=T-R,j=0,X=0,B=Math.sqrt(N*N+A*A);N/=B,A/=B,N*=_,A*=_;var ae=o.alignment,Y=(1-ae)*2,K=ae*2;l||(o.cap===zi.ROUND?g+=cc(T-N*(Y-K)*.5,I-A*(Y-K)*.5,T-N*Y,I-A*Y,T+N*K,I+A*K,p,!0)+2:o.cap===zi.SQUARE&&(g+=EI(T,I,N,A,Y,K,!0,p))),p.push(T-N*Y,I-A*Y),p.push(T+N*K,I+A*K);for(var me=1;me<v-1;++me){T=n[(me-1)*2],I=n[(me-1)*2+1],R=n[me*2],E=n[me*2+1],O=n[(me+1)*2],P=n[(me+1)*2+1],N=-(I-E),A=T-R,B=Math.sqrt(N*N+A*A),N/=B,A/=B,N*=_,A*=_,j=-(E-P),X=R-O,B=Math.sqrt(j*j+X*X),j/=B,X/=B,j*=_,X*=_;var ue=R-T,ie=I-E,Q=R-O,ee=P-E,W=ie*Q-ee*ue,te=W<0;if(Math.abs(W)<.1){p.push(R-N*Y,E-A*Y),p.push(R+N*K,E+A*K);continue}var ye=(-N+T)*(-A+E)-(-N+R)*(-A+I),Ce=(-j+O)*(-X+E)-(-j+R)*(-X+P),Ie=(ue*Ce-Q*ye)/W,Ye=(ee*ye-ie*Ce)/W,de=(Ie-R)*(Ie-R)+(Ye-E)*(Ye-E),F=R+(Ie-R)*Y,$=E+(Ye-E)*Y,q=R-(Ie-R)*K,pe=E-(Ye-E)*K,le=Math.min(ue*ue+ie*ie,Q*Q+ee*ee),Ee=te?Y:K,Pe=le+Ee*Ee*w,Oe=de<=Pe;Oe?o.join===oi.BEVEL||de/w>x?(te?(p.push(F,$),p.push(R+N*K,E+A*K),p.push(F,$),p.push(R+j*K,E+X*K)):(p.push(R-N*Y,E-A*Y),p.push(q,pe),p.push(R-j*Y,E-X*Y),p.push(q,pe)),g+=2):o.join===oi.ROUND?te?(p.push(F,$),p.push(R+N*K,E+A*K),g+=cc(R,E,R+N*K,E+A*K,R+j*K,E+X*K,p,!0)+4,p.push(F,$),p.push(R+j*K,E+X*K)):(p.push(R-N*Y,E-A*Y),p.push(q,pe),g+=cc(R,E,R-N*Y,E-A*Y,R-j*Y,E-X*Y,p,!1)+4,p.push(R-j*Y,E-X*Y),p.push(q,pe)):(p.push(F,$),p.push(q,pe)):(p.push(R-N*Y,E-A*Y),p.push(R+N*K,E+A*K),o.join===oi.ROUND?te?g+=cc(R,E,R+N*K,E+A*K,R+j*K,E+X*K,p,!0)+2:g+=cc(R,E,R-N*Y,E-A*Y,R-j*Y,E-X*Y,p,!1)+2:o.join===oi.MITER&&de/w<=x&&(te?(p.push(q,pe),p.push(q,pe)):(p.push(F,$),p.push(F,$)),g+=2),p.push(R-j*Y,E-X*Y),p.push(R+j*K,E+X*K),g+=2)}T=n[(v-2)*2],I=n[(v-2)*2+1],R=n[(v-1)*2],E=n[(v-1)*2+1],N=-(I-E),A=T-R,B=Math.sqrt(N*N+A*A),N/=B,A/=B,N*=_,A*=_,p.push(R-N*Y,E-A*Y),p.push(R+N*K,E+A*K),l||(o.cap===zi.ROUND?g+=cc(R-N*(Y-K)*.5,E-A*(Y-K)*.5,R-N*Y,E-A*Y,R+N*K,E+A*K,p,!1)+2:o.cap===zi.SQUARE&&(g+=EI(R,E,N,A,Y,K,!1,p)));for(var it=t.indices,Et=ep.epsilon*ep.epsilon,me=b;me<g+b-2;++me)T=p[me*2],I=p[me*2+1],R=p[(me+1)*2],E=p[(me+1)*2+1],O=p[(me+2)*2],P=p[(me+2)*2+1],!(Math.abs(T*(E-P)+R*(P-I)+O*(I-E))<Et)&&it.push(me,me+1,me+2)}}function Ste(e,t){var r=0,n=e.shape,i=e.points||n.points,o=n.type!==vt.POLY||n.closeStroke;if(i.length!==0){var s=t.points,a=t.indices,l=i.length/2,u=s.length/2,c=u;for(s.push(i[0],i[1]),r=1;r<l;r++)s.push(i[r*2],i[r*2+1]),a.push(c,c+1),c++;o&&a.push(c,u)}}function qw(e,t){e.lineStyle.native?Ste(e,t):Tte(e,t)}var Zw=function(){function e(){}return e.curveTo=function(t,r,n,i,o,s){var a=s[s.length-2],l=s[s.length-1],u=l-r,c=a-t,f=i-r,p=n-t,v=Math.abs(u*p-c*f);if(v<1e-8||o===0)return(s[s.length-2]!==t||s[s.length-1]!==r)&&s.push(t,r),null;var g=u*u+c*c,b=f*f+p*p,_=u*f+c*p,w=o*Math.sqrt(g)/v,x=o*Math.sqrt(b)/v,T=w*_/g,I=x*_/b,R=w*p+x*c,E=w*f+x*u,O=c*(x+T),P=u*(x+T),N=p*(w+I),A=f*(w+I),j=Math.atan2(P-E,O-R),X=Math.atan2(A-E,N-R);return{cx:R+t,cy:E+r,radius:o,startAngle:j,endAngle:X,anticlockwise:c*f>p*u}},e.arc=function(t,r,n,i,o,s,a,l,u){for(var c=a-s,f=ep._segmentsCount(Math.abs(c)*o,Math.ceil(Math.abs(c)/ch)*40),p=c/(f*2),v=p*2,g=Math.cos(p),b=Math.sin(p),_=f-1,w=_%1/_,x=0;x<=_;++x){var T=x+w*x,I=p+s+v*T,R=Math.cos(I),E=-Math.sin(I);u.push((g*R+b*E)*o+n,(g*-E+b*R)*o+i)}},e}(),JO=function(){function e(){}return e.curveLength=function(t,r,n,i,o,s,a,l){for(var u=10,c=0,f=0,p=0,v=0,g=0,b=0,_=0,w=0,x=0,T=0,I=0,R=t,E=r,O=1;O<=u;++O)f=O/u,p=f*f,v=p*f,g=1-f,b=g*g,_=b*g,w=_*t+3*b*f*n+3*g*p*o+v*a,x=_*r+3*b*f*i+3*g*p*s+v*l,T=R-w,I=E-x,R=w,E=x,c+=Math.sqrt(T*T+I*I);return c},e.curveTo=function(t,r,n,i,o,s,a){var l=a[a.length-2],u=a[a.length-1];a.length-=2;var c=ep._segmentsCount(e.curveLength(l,u,t,r,n,i,o,s)),f=0,p=0,v=0,g=0,b=0;a.push(l,u);for(var _=1,w=0;_<=c;++_)w=_/c,f=1-w,p=f*f,v=p*f,g=w*w,b=g*w,a.push(v*l+3*p*w*t+3*f*g*n+b*o,v*u+3*p*w*r+3*f*g*i+b*s)},e}(),QO=function(){function e(){}return e.curveLength=function(t,r,n,i,o,s){var a=t-2*n+o,l=r-2*i+s,u=2*n-2*t,c=2*i-2*r,f=4*(a*a+l*l),p=4*(a*u+l*c),v=u*u+c*c,g=2*Math.sqrt(f+p+v),b=Math.sqrt(f),_=2*f*b,w=2*Math.sqrt(v),x=p/b;return(_*g+b*p*(g-w)+(4*v*f-p*p)*Math.log((2*b+x+g)/(x+w)))/(4*_)},e.curveTo=function(t,r,n,i,o){for(var s=o[o.length-2],a=o[o.length-1],l=ep._segmentsCount(e.curveLength(s,a,t,r,n,i)),u=0,c=0,f=1;f<=l;++f){var p=f/l;u=s+(t-s)*p,c=a+(r-a)*p,o.push(u+(t+(n-t)*p-u)*p,c+(r+(i-r)*p-c)*p)}},e}(),e7=function(){function e(){this.reset()}return e.prototype.begin=function(t,r,n){this.reset(),this.style=t,this.start=r,this.attribStart=n},e.prototype.end=function(t,r){this.attribSize=r-this.attribStart,this.size=t-this.start},e.prototype.reset=function(){this.style=null,this.size=0,this.start=0,this.attribStart=0,this.attribSize=0},e}(),Ul,c0=(Ul={},Ul[vt.POLY]=M4,Ul[vt.CIRC]=tp,Ul[vt.ELIP]=tp,Ul[vt.RECT]=qO,Ul[vt.RREC]=ZO,Ul),Jw=[],Xf=[],CI=function(){function e(t,r,n,i){r===void 0&&(r=null),n===void 0&&(n=null),i===void 0&&(i=null),this.points=[],this.holes=[],this.shape=t,this.lineStyle=n,this.fillStyle=r,this.matrix=i,this.type=t.type}return e.prototype.clone=function(){return new e(this.shape,this.fillStyle,this.lineStyle,this.matrix)},e.prototype.destroy=function(){this.shape=null,this.holes.length=0,this.holes=null,this.points.length=0,this.points=null,this.lineStyle=null,this.fillStyle=null},e}(),hc=new Gt,Ete=new vu,Cte=function(e){F4(t,e);function t(){var r=e.call(this)||this;return r.closePointEps=1e-4,r.boundsPadding=0,r.uvsFloat32=null,r.indicesUint16=null,r.batchable=!1,r.points=[],r.colors=[],r.uvs=[],r.indices=[],r.textureIds=[],r.graphicsData=[],r.drawCalls=[],r.batchDirty=-1,r.batches=[],r.dirty=0,r.cacheDirty=-1,r.clearDirty=0,r.shapeIndex=0,r._bounds=new vu,r.boundsDirty=-1,r}return Object.defineProperty(t.prototype,"bounds",{get:function(){return this.boundsDirty!==this.dirty&&(this.boundsDirty=this.dirty,this.calculateBounds()),this._bounds},enumerable:!1,configurable:!0}),t.prototype.invalidate=function(){this.boundsDirty=-1,this.dirty++,this.batchDirty++,this.shapeIndex=0,this.points.length=0,this.colors.length=0,this.uvs.length=0,this.indices.length=0,this.textureIds.length=0;for(var r=0;r<this.drawCalls.length;r++)this.drawCalls[r].texArray.clear(),Xf.push(this.drawCalls[r]);this.drawCalls.length=0;for(var r=0;r<this.batches.length;r++){var n=this.batches[r];n.reset(),Jw.push(n)}this.batches.length=0},t.prototype.clear=function(){return this.graphicsData.length>0&&(this.invalidate(),this.clearDirty++,this.graphicsData.length=0),this},t.prototype.drawShape=function(r,n,i,o){n===void 0&&(n=null),i===void 0&&(i=null),o===void 0&&(o=null);var s=new CI(r,n,i,o);return this.graphicsData.push(s),this.dirty++,this},t.prototype.drawHole=function(r,n){if(n===void 0&&(n=null),!this.graphicsData.length)return null;var i=new CI(r,null,null,n),o=this.graphicsData[this.graphicsData.length-1];return i.lineStyle=o.lineStyle,o.holes.push(i),this.dirty++,this},t.prototype.destroy=function(){e.prototype.destroy.call(this);for(var r=0;r<this.graphicsData.length;++r)this.graphicsData[r].destroy();this.points.length=0,this.points=null,this.colors.length=0,this.colors=null,this.uvs.length=0,this.uvs=null,this.indices.length=0,this.indices=null,this.indexBuffer.destroy(),this.indexBuffer=null,this.graphicsData.length=0,this.graphicsData=null,this.drawCalls.length=0,this.drawCalls=null,this.batches.length=0,this.batches=null,this._bounds=null},t.prototype.containsPoint=function(r){for(var n=this.graphicsData,i=0;i<n.length;++i){var o=n[i];if(!!o.fillStyle.visible&&o.shape&&(o.matrix?o.matrix.applyInverse(r,hc):hc.copyFrom(r),o.shape.contains(hc.x,hc.y))){var s=!1;if(o.holes)for(var a=0;a<o.holes.length;a++){var l=o.holes[a];if(l.shape.contains(hc.x,hc.y)){s=!0;break}}if(!s)return!0}}return!1},t.prototype.updateBatches=function(r){if(!this.graphicsData.length){this.batchable=!0;return}if(!!this.validateBatching()){this.cacheDirty=this.dirty;var n=this.uvs,i=this.graphicsData,o=null,s=null;this.batches.length>0&&(o=this.batches[this.batches.length-1],s=o.style);for(var a=this.shapeIndex;a<i.length;a++){this.shapeIndex++;var l=i[a],u=l.fillStyle,c=l.lineStyle,f=c0[l.type];f.build(l),l.matrix&&this.transformPoints(l.points,l.matrix),(u.visible||c.visible)&&this.processHoles(l.holes);for(var p=0;p<2;p++){var v=p===0?u:c;if(!!v.visible){var g=v.texture.baseTexture,b=this.indices.length,_=this.points.length/2;g.wrapMode=Jo.REPEAT,p===0?this.processFill(l):this.processLine(l);var w=this.points.length/2-_;w!==0&&(o&&!this._compareStyles(s,v)&&(o.end(b,_),o=null),o||(o=Jw.pop()||new e7,o.begin(v,b,_),this.batches.push(o),s=v),this.addUvs(this.points,n,v.texture,_,w,v.matrix))}}}var x=this.indices.length,T=this.points.length/2;if(o&&o.end(x,T),this.batches.length===0){this.batchable=!0;return}if(this.indicesUint16&&this.indices.length===this.indicesUint16.length)this.indicesUint16.set(this.indices);else{var I=T>65535&&r;this.indicesUint16=I?new Uint32Array(this.indices):new Uint16Array(this.indices)}this.batchable=this.isBatchable(),this.batchable?this.packBatches():this.buildDrawCalls()}},t.prototype._compareStyles=function(r,n){return!(!r||!n||r.texture.baseTexture!==n.texture.baseTexture||r.color+r.alpha!==n.color+n.alpha||!!r.native!=!!n.native)},t.prototype.validateBatching=function(){if(this.dirty===this.cacheDirty||!this.graphicsData.length)return!1;for(var r=0,n=this.graphicsData.length;r<n;r++){var i=this.graphicsData[r],o=i.fillStyle,s=i.lineStyle;if(o&&!o.texture.baseTexture.valid||s&&!s.texture.baseTexture.valid)return!1}return!0},t.prototype.packBatches=function(){this.batchDirty++,this.uvsFloat32=new Float32Array(this.uvs);for(var r=this.batches,n=0,i=r.length;n<i;n++)for(var o=r[n],s=0;s<o.size;s++){var a=o.start+s;this.indicesUint16[a]=this.indicesUint16[a]-o.attribStart}},t.prototype.isBatchable=function(){if(this.points.length>65535*2)return!1;for(var r=this.batches,n=0;n<r.length;n++)if(r[n].style.native)return!1;return this.points.length<t.BATCHABLE_SIZE*2},t.prototype.buildDrawCalls=function(){for(var r=++wt._globalBatch,n=0;n<this.drawCalls.length;n++)this.drawCalls[n].texArray.clear(),Xf.push(this.drawCalls[n]);this.drawCalls.length=0;var i=this.colors,o=this.textureIds,s=Xf.pop();s||(s=new Fw,s.texArray=new Sg),s.texArray.count=0,s.start=0,s.size=0,s.type=Ci.TRIANGLES;var a=0,l=null,u=0,c=!1,f=Ci.TRIANGLES,p=0;this.drawCalls.push(s);for(var n=0;n<this.batches.length;n++){var v=this.batches[n],g=8,b=v.style,_=b.texture.baseTexture;c!==!!b.native&&(c=!!b.native,f=c?Ci.LINES:Ci.TRIANGLES,l=null,a=g,r++),l!==_&&(l=_,_._batchEnabled!==r&&(a===g&&(r++,a=0,s.size>0&&(s=Xf.pop(),s||(s=new Fw,s.texArray=new Sg),this.drawCalls.push(s)),s.start=p,s.size=0,s.texArray.count=0,s.type=f),_.touched=1,_._batchEnabled=r,_._batchLocation=a,_.wrapMode=Jo.REPEAT,s.texArray.elements[s.texArray.count++]=_,a++)),s.size+=v.size,p+=v.size,u=_._batchLocation,this.addColors(i,b.color,b.alpha,v.attribSize,v.attribStart),this.addTextureIds(o,u,v.attribSize,v.attribStart)}wt._globalBatch=r,this.packAttributes()},t.prototype.packAttributes=function(){for(var r=this.points,n=this.uvs,i=this.colors,o=this.textureIds,s=new ArrayBuffer(r.length*3*4),a=new Float32Array(s),l=new Uint32Array(s),u=0,c=0;c<r.length/2;c++)a[u++]=r[c*2],a[u++]=r[c*2+1],a[u++]=n[c*2],a[u++]=n[c*2+1],l[u++]=i[c],a[u++]=o[c];this._buffer.update(s),this._indexBuffer.update(this.indicesUint16)},t.prototype.processFill=function(r){if(r.holes.length)M4.triangulate(r,this);else{var n=c0[r.type];n.triangulate(r,this)}},t.prototype.processLine=function(r){qw(r,this);for(var n=0;n<r.holes.length;n++)qw(r.holes[n],this)},t.prototype.processHoles=function(r){for(var n=0;n<r.length;n++){var i=r[n],o=c0[i.type];o.build(i),i.matrix&&this.transformPoints(i.points,i.matrix)}},t.prototype.calculateBounds=function(){var r=this._bounds,n=Ete,i=er.IDENTITY;this._bounds.clear(),n.clear();for(var o=0;o<this.graphicsData.length;o++){var s=this.graphicsData[o],a=s.shape,l=s.type,u=s.lineStyle,c=s.matrix||er.IDENTITY,f=0;if(u&&u.visible&&(f=u.width,l!==vt.POLY||s.fillStyle.visible?f*=Math.max(0,u.alignment):f*=Math.max(u.alignment,1-u.alignment)),i!==c&&(n.isEmpty()||(r.addBoundsMatrix(n,i),n.clear()),i=c),l===vt.RECT||l===vt.RREC){var p=a;n.addFramePad(p.x,p.y,p.x+p.width,p.y+p.height,f,f)}else if(l===vt.CIRC){var v=a;n.addFramePad(v.x,v.y,v.x,v.y,v.radius+f,v.radius+f)}else if(l===vt.ELIP){var g=a;n.addFramePad(g.x,g.y,g.x,g.y,g.width+f,g.height+f)}else{var b=a;r.addVerticesMatrix(i,b.points,0,b.points.length,f,f)}}n.isEmpty()||r.addBoundsMatrix(n,i),r.pad(this.boundsPadding,this.boundsPadding)},t.prototype.transformPoints=function(r,n){for(var i=0;i<r.length/2;i++){var o=r[i*2],s=r[i*2+1];r[i*2]=n.a*o+n.c*s+n.tx,r[i*2+1]=n.b*o+n.d*s+n.ty}},t.prototype.addColors=function(r,n,i,o,s){s===void 0&&(s=0);var a=(n>>16)+(n&65280)+((n&255)<<16),l=Vy(a,i);r.length=Math.max(r.length,s+o);for(var u=0;u<o;u++)r[s+u]=l},t.prototype.addTextureIds=function(r,n,i,o){o===void 0&&(o=0),r.length=Math.max(r.length,o+i);for(var s=0;s<i;s++)r[o+s]=n},t.prototype.addUvs=function(r,n,i,o,s,a){a===void 0&&(a=null);for(var l=0,u=n.length,c=i.frame;l<s;){var f=r[(o+l)*2],p=r[(o+l)*2+1];if(a){var v=a.a*f+a.c*p+a.tx;p=a.b*f+a.d*p+a.ty,f=v}l++,n.push(f/c.width,p/c.height)}var g=i.baseTexture;(c.width<g.width||c.height<g.height)&&this.adjustUvs(n,i,u,s)},t.prototype.adjustUvs=function(r,n,i,o){for(var s=n.baseTexture,a=1e-6,l=i+o*2,u=n.frame,c=u.width/s.width,f=u.height/s.height,p=u.x/u.width,v=u.y/u.height,g=Math.floor(r[i]+a),b=Math.floor(r[i+1]+a),_=i+2;_<l;_+=2)g=Math.min(g,Math.floor(r[_]+a)),b=Math.min(b,Math.floor(r[_+1]+a));p-=g,v-=b;for(var _=i;_<l;_+=2)r[_]=(r[_]+p)*c,r[_+1]=(r[_+1]+v)*f},t.BATCHABLE_SIZE=100,t}(HO),Ite=function(e){F4(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.width=0,r.alignment=.5,r.native=!1,r.cap=zi.BUTT,r.join=oi.MITER,r.miterLimit=10,r}return t.prototype.clone=function(){var r=new t;return r.color=this.color,r.alpha=this.alpha,r.texture=this.texture,r.matrix=this.matrix,r.visible=this.visible,r.width=this.width,r.alignment=this.alignment,r.native=this.native,r.cap=this.cap,r.join=this.join,r.miterLimit=this.miterLimit,r},t.prototype.reset=function(){e.prototype.reset.call(this),this.color=0,this.alignment=.5,this.width=0,this.native=!1},t}(KO),Nte=new Float32Array(3),T_={},Ya=function(e){F4(t,e);function t(r){r===void 0&&(r=null);var n=e.call(this)||this;return n.shader=null,n.pluginName="batch",n.currentPath=null,n.batches=[],n.batchTint=-1,n.batchDirty=-1,n.vertexData=null,n._fillStyle=new KO,n._lineStyle=new Ite,n._matrix=null,n._holeMode=!1,n.state=gl.for2d(),n._geometry=r||new Cte,n._geometry.refCount++,n._transformID=-1,n.tint=16777215,n.blendMode=Ze.NORMAL,n}return Object.defineProperty(t.prototype,"geometry",{get:function(){return this._geometry},enumerable:!1,configurable:!0}),t.prototype.clone=function(){return this.finishPoly(),new t(this._geometry)},Object.defineProperty(t.prototype,"blendMode",{get:function(){return this.state.blendMode},set:function(r){this.state.blendMode=r},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"tint",{get:function(){return this._tint},set:function(r){this._tint=r},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fill",{get:function(){return this._fillStyle},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"line",{get:function(){return this._lineStyle},enumerable:!1,configurable:!0}),t.prototype.lineStyle=function(r,n,i,o,s){return r===void 0&&(r=null),n===void 0&&(n=0),i===void 0&&(i=1),o===void 0&&(o=.5),s===void 0&&(s=!1),typeof r=="number"&&(r={width:r,color:n,alpha:i,alignment:o,native:s}),this.lineTextureStyle(r)},t.prototype.lineTextureStyle=function(r){r=Object.assign({width:0,texture:et.WHITE,color:r&&r.texture?16777215:0,alpha:1,matrix:null,alignment:.5,native:!1,cap:zi.BUTT,join:oi.MITER,miterLimit:10},r),this.currentPath&&this.startPoly();var n=r.width>0&&r.alpha>0;return n?(r.matrix&&(r.matrix=r.matrix.clone(),r.matrix.invert()),Object.assign(this._lineStyle,{visible:n},r)):this._lineStyle.reset(),this},t.prototype.startPoly=function(){if(this.currentPath){var r=this.currentPath.points,n=this.currentPath.points.length;n>2&&(this.drawShape(this.currentPath),this.currentPath=new tu,this.currentPath.closeStroke=!1,this.currentPath.points.push(r[n-2],r[n-1]))}else this.currentPath=new tu,this.currentPath.closeStroke=!1},t.prototype.finishPoly=function(){this.currentPath&&(this.currentPath.points.length>2?(this.drawShape(this.currentPath),this.currentPath=null):this.currentPath.points.length=0)},t.prototype.moveTo=function(r,n){return this.startPoly(),this.currentPath.points[0]=r,this.currentPath.points[1]=n,this},t.prototype.lineTo=function(r,n){this.currentPath||this.moveTo(0,0);var i=this.currentPath.points,o=i[i.length-2],s=i[i.length-1];return(o!==r||s!==n)&&i.push(r,n),this},t.prototype._initCurve=function(r,n){r===void 0&&(r=0),n===void 0&&(n=0),this.currentPath?this.currentPath.points.length===0&&(this.currentPath.points=[r,n]):this.moveTo(r,n)},t.prototype.quadraticCurveTo=function(r,n,i,o){this._initCurve();var s=this.currentPath.points;return s.length===0&&this.moveTo(0,0),QO.curveTo(r,n,i,o,s),this},t.prototype.bezierCurveTo=function(r,n,i,o,s,a){return this._initCurve(),JO.curveTo(r,n,i,o,s,a,this.currentPath.points),this},t.prototype.arcTo=function(r,n,i,o,s){this._initCurve(r,n);var a=this.currentPath.points,l=Zw.curveTo(r,n,i,o,s,a);if(l){var u=l.cx,c=l.cy,f=l.radius,p=l.startAngle,v=l.endAngle,g=l.anticlockwise;this.arc(u,c,f,p,v,g)}return this},t.prototype.arc=function(r,n,i,o,s,a){if(a===void 0&&(a=!1),o===s)return this;!a&&s<=o?s+=ch:a&&o<=s&&(o+=ch);var l=s-o;if(l===0)return this;var u=r+Math.cos(o)*i,c=n+Math.sin(o)*i,f=this._geometry.closePointEps,p=this.currentPath?this.currentPath.points:null;if(p){var v=Math.abs(p[p.length-2]-u),g=Math.abs(p[p.length-1]-c);v<f&&g<f||p.push(u,c)}else this.moveTo(u,c),p=this.currentPath.points;return Zw.arc(u,c,r,n,i,o,s,a,p),this},t.prototype.beginFill=function(r,n){return r===void 0&&(r=0),n===void 0&&(n=1),this.beginTextureFill({texture:et.WHITE,color:r,alpha:n})},t.prototype.beginTextureFill=function(r){r=Object.assign({texture:et.WHITE,color:16777215,alpha:1,matrix:null},r),this.currentPath&&this.startPoly();var n=r.alpha>0;return n?(r.matrix&&(r.matrix=r.matrix.clone(),r.matrix.invert()),Object.assign(this._fillStyle,{visible:n},r)):this._fillStyle.reset(),this},t.prototype.endFill=function(){return this.finishPoly(),this._fillStyle.reset(),this},t.prototype.drawRect=function(r,n,i,o){return this.drawShape(new Fe(r,n,i,o))},t.prototype.drawRoundedRect=function(r,n,i,o,s){return this.drawShape(new CO(r,n,i,o,s))},t.prototype.drawCircle=function(r,n,i){return this.drawShape(new SO(r,n,i))},t.prototype.drawEllipse=function(r,n,i,o){return this.drawShape(new EO(r,n,i,o))},t.prototype.drawPolygon=function(){for(var r=arguments,n=[],i=0;i<arguments.length;i++)n[i]=r[i];var o,s=!0,a=n[0];a.points?(s=a.closeStroke,o=a.points):Array.isArray(n[0])?o=n[0]:o=n;var l=new tu(o);return l.closeStroke=s,this.drawShape(l),this},t.prototype.drawShape=function(r){return this._holeMode?this._geometry.drawHole(r,this._matrix):this._geometry.drawShape(r,this._fillStyle.clone(),this._lineStyle.clone(),this._matrix),this},t.prototype.clear=function(){return this._geometry.clear(),this._lineStyle.reset(),this._fillStyle.reset(),this._boundsID++,this._matrix=null,this._holeMode=!1,this.currentPath=null,this},t.prototype.isFastRect=function(){var r=this._geometry.graphicsData;return r.length===1&&r[0].shape.type===vt.RECT&&!r[0].matrix&&!r[0].holes.length&&!(r[0].lineStyle.visible&&r[0].lineStyle.width)},t.prototype._render=function(r){this.finishPoly();var n=this._geometry,i=r.context.supports.uint32Indices;n.updateBatches(i),n.batchable?(this.batchDirty!==n.batchDirty&&this._populateBatches(),this._renderBatched(r)):(r.batch.flush(),this._renderDirect(r))},t.prototype._populateBatches=function(){var r=this._geometry,n=this.blendMode,i=r.batches.length;this.batchTint=-1,this._transformID=-1,this.batchDirty=r.batchDirty,this.batches.length=i,this.vertexData=new Float32Array(r.points);for(var o=0;o<i;o++){var s=r.batches[o],a=s.style.color,l=new Float32Array(this.vertexData.buffer,s.attribStart*4*2,s.attribSize*2),u=new Float32Array(r.uvsFloat32.buffer,s.attribStart*4*2,s.attribSize*2),c=new Uint16Array(r.indicesUint16.buffer,s.start*2,s.size),f={vertexData:l,blendMode:n,indices:c,uvs:u,_batchRGB:sl(a),_tintRGB:a,_texture:s.style.texture,alpha:s.style.alpha,worldAlpha:1};this.batches[o]=f}},t.prototype._renderBatched=function(r){if(!!this.batches.length){r.batch.setObjectRenderer(r.plugins[this.pluginName]),this.calculateVertices(),this.calculateTints();for(var n=0,i=this.batches.length;n<i;n++){var o=this.batches[n];o.worldAlpha=this.worldAlpha*o.alpha,r.plugins[this.pluginName].render(o)}}},t.prototype._renderDirect=function(r){var n=this._resolveDirectShader(r),i=this._geometry,o=this.tint,s=this.worldAlpha,a=n.uniforms,l=i.drawCalls;a.translationMatrix=this.transform.worldTransform,a.tint[0]=(o>>16&255)/255*s,a.tint[1]=(o>>8&255)/255*s,a.tint[2]=(o&255)/255*s,a.tint[3]=s,r.shader.bind(n),r.geometry.bind(i,n),r.state.set(this.state);for(var u=0,c=l.length;u<c;u++)this._renderDrawCallDirect(r,i.drawCalls[u])},t.prototype._renderDrawCallDirect=function(r,n){for(var i=n.texArray,o=n.type,s=n.size,a=n.start,l=i.count,u=0;u<l;u++)r.texture.bind(i.elements[u],u);r.geometry.draw(o,s,a)},t.prototype._resolveDirectShader=function(r){var n=this.shader,i=this.pluginName;if(!n){if(!T_[i]){for(var o=r.plugins[i].MAX_TEXTURES,s=new Int32Array(o),a=0;a<o;a++)s[a]=a;var l={tint:new Float32Array([1,1,1,1]),translationMatrix:new er,default:ru.from({uSamplers:s},!0)},u=r.plugins[i]._shader.program;T_[i]=new Vs(u,l)}n=T_[i]}return n},t.prototype._calculateBounds=function(){this.finishPoly();var r=this._geometry;if(!!r.graphicsData.length){var n=r.bounds,i=n.minX,o=n.minY,s=n.maxX,a=n.maxY;this._bounds.addFrame(this.transform,i,o,s,a)}},t.prototype.containsPoint=function(r){return this.worldTransform.applyInverse(r,t._TEMP_POINT),this._geometry.containsPoint(t._TEMP_POINT)},t.prototype.calculateTints=function(){if(this.batchTint!==this.tint){this.batchTint=this.tint;for(var r=sl(this.tint,Nte),n=0;n<this.batches.length;n++){var i=this.batches[n],o=i._batchRGB,s=r[0]*o[0]*255,a=r[1]*o[1]*255,l=r[2]*o[2]*255,u=(s<<16)+(a<<8)+(l|0);i._tintRGB=(u>>16)+(u&65280)+((u&255)<<16)}}},t.prototype.calculateVertices=function(){var r=this.transform._worldID;if(this._transformID!==r){this._transformID=r;for(var n=this.transform.worldTransform,i=n.a,o=n.b,s=n.c,a=n.d,l=n.tx,u=n.ty,c=this._geometry.points,f=this.vertexData,p=0,v=0;v<c.length;v+=2){var g=c[v],b=c[v+1];f[p++]=i*g+s*b+l,f[p++]=a*b+o*g+u}}},t.prototype.closePath=function(){var r=this.currentPath;return r&&(r.closeStroke=!0,this.finishPoly()),this},t.prototype.setMatrix=function(r){return this._matrix=r,this},t.prototype.beginHole=function(){return this.finishPoly(),this._holeMode=!0,this},t.prototype.endHole=function(){return this.finishPoly(),this._holeMode=!1,this},t.prototype.destroy=function(r){this._geometry.refCount--,this._geometry.refCount===0&&this._geometry.dispose(),this._matrix=null,this.currentPath=null,this._lineStyle.destroy(),this._lineStyle=null,this._fillStyle.destroy(),this._fillStyle=null,this._geometry=null,this.shader=null,this.vertexData=null,this.batches.length=0,this.batches=null,e.prototype.destroy.call(this,r)},t.nextRoundedRectBehavior=!1,t._TEMP_POINT=new Gt,t}(Pi),Pte={buildPoly:M4,buildCircle:tp,buildRectangle:qO,buildRoundedRectangle:ZO,buildLine:qw,ArcUtils:Zw,BezierUtils:JO,QuadraticUtils:QO,BatchPart:e7,FILL_COMMANDS:c0,BATCH_POOL:Jw,DRAW_CALL_POOL:Xf};/*!
 * @pixi/sprite - v6.4.2
 * Compiled Thu, 02 Jun 2022 15:39:26 UTC
 *
 * @pixi/sprite is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var Qw=function(e,t){return Qw=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])},Qw(e,t)};function Ate(e,t){Qw(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var Bf=new Gt,Rte=new Uint16Array([0,1,2,0,2,3]),yu=function(e){Ate(t,e);function t(r){var n=e.call(this)||this;return n._anchor=new Yl(n._onAnchorUpdate,n,r?r.defaultAnchor.x:0,r?r.defaultAnchor.y:0),n._texture=null,n._width=0,n._height=0,n._tint=null,n._tintRGB=null,n.tint=16777215,n.blendMode=Ze.NORMAL,n._cachedTint=16777215,n.uvs=null,n.texture=r||et.EMPTY,n.vertexData=new Float32Array(8),n.vertexTrimmedData=null,n._transformID=-1,n._textureID=-1,n._transformTrimmedID=-1,n._textureTrimmedID=-1,n.indices=Rte,n.pluginName="batch",n.isSprite=!0,n._roundPixels=We.ROUND_PIXELS,n}return t.prototype._onTextureUpdate=function(){this._textureID=-1,this._textureTrimmedID=-1,this._cachedTint=16777215,this._width&&(this.scale.x=Lc(this.scale.x)*this._width/this._texture.orig.width),this._height&&(this.scale.y=Lc(this.scale.y)*this._height/this._texture.orig.height)},t.prototype._onAnchorUpdate=function(){this._transformID=-1,this._transformTrimmedID=-1},t.prototype.calculateVertices=function(){var r=this._texture;if(!(this._transformID===this.transform._worldID&&this._textureID===r._updateID)){this._textureID!==r._updateID&&(this.uvs=this._texture._uvs.uvsFloat32),this._transformID=this.transform._worldID,this._textureID=r._updateID;var n=this.transform.worldTransform,i=n.a,o=n.b,s=n.c,a=n.d,l=n.tx,u=n.ty,c=this.vertexData,f=r.trim,p=r.orig,v=this._anchor,g=0,b=0,_=0,w=0;if(f?(b=f.x-v._x*p.width,g=b+f.width,w=f.y-v._y*p.height,_=w+f.height):(b=-v._x*p.width,g=b+p.width,w=-v._y*p.height,_=w+p.height),c[0]=i*b+s*w+l,c[1]=a*w+o*b+u,c[2]=i*g+s*w+l,c[3]=a*w+o*g+u,c[4]=i*g+s*_+l,c[5]=a*_+o*g+u,c[6]=i*b+s*_+l,c[7]=a*_+o*b+u,this._roundPixels)for(var x=We.RESOLUTION,T=0;T<c.length;++T)c[T]=Math.round((c[T]*x|0)/x)}},t.prototype.calculateTrimmedVertices=function(){if(!this.vertexTrimmedData)this.vertexTrimmedData=new Float32Array(8);else if(this._transformTrimmedID===this.transform._worldID&&this._textureTrimmedID===this._texture._updateID)return;this._transformTrimmedID=this.transform._worldID,this._textureTrimmedID=this._texture._updateID;var r=this._texture,n=this.vertexTrimmedData,i=r.orig,o=this._anchor,s=this.transform.worldTransform,a=s.a,l=s.b,u=s.c,c=s.d,f=s.tx,p=s.ty,v=-o._x*i.width,g=v+i.width,b=-o._y*i.height,_=b+i.height;n[0]=a*v+u*b+f,n[1]=c*b+l*v+p,n[2]=a*g+u*b+f,n[3]=c*b+l*g+p,n[4]=a*g+u*_+f,n[5]=c*_+l*g+p,n[6]=a*v+u*_+f,n[7]=c*_+l*v+p},t.prototype._render=function(r){this.calculateVertices(),r.batch.setObjectRenderer(r.plugins[this.pluginName]),r.plugins[this.pluginName].render(this)},t.prototype._calculateBounds=function(){var r=this._texture.trim,n=this._texture.orig;!r||r.width===n.width&&r.height===n.height?(this.calculateVertices(),this._bounds.addQuad(this.vertexData)):(this.calculateTrimmedVertices(),this._bounds.addQuad(this.vertexTrimmedData))},t.prototype.getLocalBounds=function(r){return this.children.length===0?(this._localBounds||(this._localBounds=new vu),this._localBounds.minX=this._texture.orig.width*-this._anchor._x,this._localBounds.minY=this._texture.orig.height*-this._anchor._y,this._localBounds.maxX=this._texture.orig.width*(1-this._anchor._x),this._localBounds.maxY=this._texture.orig.height*(1-this._anchor._y),r||(this._localBoundsRect||(this._localBoundsRect=new Fe),r=this._localBoundsRect),this._localBounds.getRectangle(r)):e.prototype.getLocalBounds.call(this,r)},t.prototype.containsPoint=function(r){this.worldTransform.applyInverse(r,Bf);var n=this._texture.orig.width,i=this._texture.orig.height,o=-n*this.anchor.x,s=0;return Bf.x>=o&&Bf.x<o+n&&(s=-i*this.anchor.y,Bf.y>=s&&Bf.y<s+i)},t.prototype.destroy=function(r){e.prototype.destroy.call(this,r),this._texture.off("update",this._onTextureUpdate,this),this._anchor=null;var n=typeof r=="boolean"?r:r&&r.texture;if(n){var i=typeof r=="boolean"?r:r&&r.baseTexture;this._texture.destroy(!!i)}this._texture=null},t.from=function(r,n){var i=r instanceof et?r:et.from(r,n);return new t(i)},Object.defineProperty(t.prototype,"roundPixels",{get:function(){return this._roundPixels},set:function(r){this._roundPixels!==r&&(this._transformID=-1),this._roundPixels=r},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"width",{get:function(){return Math.abs(this.scale.x)*this._texture.orig.width},set:function(r){var n=Lc(this.scale.x)||1;this.scale.x=n*r/this._texture.orig.width,this._width=r},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return Math.abs(this.scale.y)*this._texture.orig.height},set:function(r){var n=Lc(this.scale.y)||1;this.scale.y=n*r/this._texture.orig.height,this._height=r},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"anchor",{get:function(){return this._anchor},set:function(r){this._anchor.copyFrom(r)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"tint",{get:function(){return this._tint},set:function(r){this._tint=r,this._tintRGB=(r>>16)+(r&65280)+((r&255)<<16)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"texture",{get:function(){return this._texture},set:function(r){this._texture!==r&&(this._texture&&this._texture.off("update",this._onTextureUpdate,this),this._texture=r||et.EMPTY,this._cachedTint=16777215,this._textureID=-1,this._textureTrimmedID=-1,r&&(r.baseTexture.valid?this._onTextureUpdate():r.once("update",this._onTextureUpdate,this)))},enumerable:!1,configurable:!0}),t}(Pi);/*!
 * @pixi/text - v6.4.2
 * Compiled Thu, 02 Jun 2022 15:39:26 UTC
 *
 * @pixi/text is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var ex=function(e,t){return ex=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])},ex(e,t)};function kte(e,t){ex(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var rp;(function(e){e[e.LINEAR_VERTICAL=0]="LINEAR_VERTICAL",e[e.LINEAR_HORIZONTAL=1]="LINEAR_HORIZONTAL"})(rp||(rp={}));var S_={align:"left",breakWords:!1,dropShadow:!1,dropShadowAlpha:1,dropShadowAngle:Math.PI/6,dropShadowBlur:0,dropShadowColor:"black",dropShadowDistance:5,fill:"black",fillGradientType:rp.LINEAR_VERTICAL,fillGradientStops:[],fontFamily:"Arial",fontSize:26,fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",letterSpacing:0,lineHeight:0,lineJoin:"miter",miterLimit:10,padding:0,stroke:"black",strokeThickness:0,textBaseline:"alphabetic",trim:!1,whiteSpace:"pre",wordWrap:!1,wordWrapWidth:100,leading:0},Ote=["serif","sans-serif","monospace","cursive","fantasy","system-ui"],Zs=function(){function e(t){this.styleID=0,this.reset(),C_(this,t,t)}return e.prototype.clone=function(){var t={};return C_(t,this,S_),new e(t)},e.prototype.reset=function(){C_(this,S_,S_)},Object.defineProperty(e.prototype,"align",{get:function(){return this._align},set:function(t){this._align!==t&&(this._align=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"breakWords",{get:function(){return this._breakWords},set:function(t){this._breakWords!==t&&(this._breakWords=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"dropShadow",{get:function(){return this._dropShadow},set:function(t){this._dropShadow!==t&&(this._dropShadow=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"dropShadowAlpha",{get:function(){return this._dropShadowAlpha},set:function(t){this._dropShadowAlpha!==t&&(this._dropShadowAlpha=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"dropShadowAngle",{get:function(){return this._dropShadowAngle},set:function(t){this._dropShadowAngle!==t&&(this._dropShadowAngle=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"dropShadowBlur",{get:function(){return this._dropShadowBlur},set:function(t){this._dropShadowBlur!==t&&(this._dropShadowBlur=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"dropShadowColor",{get:function(){return this._dropShadowColor},set:function(t){var r=E_(t);this._dropShadowColor!==r&&(this._dropShadowColor=r,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"dropShadowDistance",{get:function(){return this._dropShadowDistance},set:function(t){this._dropShadowDistance!==t&&(this._dropShadowDistance=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"fill",{get:function(){return this._fill},set:function(t){var r=E_(t);this._fill!==r&&(this._fill=r,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"fillGradientType",{get:function(){return this._fillGradientType},set:function(t){this._fillGradientType!==t&&(this._fillGradientType=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"fillGradientStops",{get:function(){return this._fillGradientStops},set:function(t){Lte(this._fillGradientStops,t)||(this._fillGradientStops=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"fontFamily",{get:function(){return this._fontFamily},set:function(t){this.fontFamily!==t&&(this._fontFamily=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"fontSize",{get:function(){return this._fontSize},set:function(t){this._fontSize!==t&&(this._fontSize=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"fontStyle",{get:function(){return this._fontStyle},set:function(t){this._fontStyle!==t&&(this._fontStyle=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"fontVariant",{get:function(){return this._fontVariant},set:function(t){this._fontVariant!==t&&(this._fontVariant=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"fontWeight",{get:function(){return this._fontWeight},set:function(t){this._fontWeight!==t&&(this._fontWeight=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"letterSpacing",{get:function(){return this._letterSpacing},set:function(t){this._letterSpacing!==t&&(this._letterSpacing=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"lineHeight",{get:function(){return this._lineHeight},set:function(t){this._lineHeight!==t&&(this._lineHeight=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"leading",{get:function(){return this._leading},set:function(t){this._leading!==t&&(this._leading=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"lineJoin",{get:function(){return this._lineJoin},set:function(t){this._lineJoin!==t&&(this._lineJoin=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"miterLimit",{get:function(){return this._miterLimit},set:function(t){this._miterLimit!==t&&(this._miterLimit=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"padding",{get:function(){return this._padding},set:function(t){this._padding!==t&&(this._padding=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"stroke",{get:function(){return this._stroke},set:function(t){var r=E_(t);this._stroke!==r&&(this._stroke=r,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"strokeThickness",{get:function(){return this._strokeThickness},set:function(t){this._strokeThickness!==t&&(this._strokeThickness=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"textBaseline",{get:function(){return this._textBaseline},set:function(t){this._textBaseline!==t&&(this._textBaseline=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"trim",{get:function(){return this._trim},set:function(t){this._trim!==t&&(this._trim=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"whiteSpace",{get:function(){return this._whiteSpace},set:function(t){this._whiteSpace!==t&&(this._whiteSpace=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"wordWrap",{get:function(){return this._wordWrap},set:function(t){this._wordWrap!==t&&(this._wordWrap=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"wordWrapWidth",{get:function(){return this._wordWrapWidth},set:function(t){this._wordWrapWidth!==t&&(this._wordWrapWidth=t,this.styleID++)},enumerable:!1,configurable:!0}),e.prototype.toFontString=function(){var t=typeof this.fontSize=="number"?this.fontSize+"px":this.fontSize,r=this.fontFamily;Array.isArray(this.fontFamily)||(r=this.fontFamily.split(","));for(var n=r.length-1;n>=0;n--){var i=r[n].trim();!/([\"\'])[^\'\"]+\1/.test(i)&&Ote.indexOf(i)<0&&(i='"'+i+'"'),r[n]=i}return this.fontStyle+" "+this.fontVariant+" "+this.fontWeight+" "+t+" "+r.join(",")},e}();function II(e){return typeof e=="number"?vO(e):(typeof e=="string"&&e.indexOf("0x")===0&&(e=e.replace("0x","#")),e)}function E_(e){if(Array.isArray(e)){for(var t=0;t<e.length;++t)e[t]=II(e[t]);return e}else return II(e)}function Lte(e,t){if(!Array.isArray(e)||!Array.isArray(t)||e.length!==t.length)return!1;for(var r=0;r<e.length;++r)if(e[r]!==t[r])return!1;return!0}function C_(e,t,r){for(var n in r)Array.isArray(t[n])?e[n]=t[n].slice():e[n]=t[n]}var ls=function(){function e(t,r,n,i,o,s,a,l,u){this.text=t,this.style=r,this.width=n,this.height=i,this.lines=o,this.lineWidths=s,this.lineHeight=a,this.maxLineWidth=l,this.fontProperties=u}return e.measureText=function(t,r,n,i){i===void 0&&(i=e._canvas),n=n==null?r.wordWrap:n;var o=r.toFontString(),s=e.measureFont(o);s.fontSize===0&&(s.fontSize=r.fontSize,s.ascent=r.fontSize);var a=i.getContext("2d");a.font=o;for(var l=n?e.wordWrap(t,r,i):t,u=l.split(/(?:\r\n|\r|\n)/),c=new Array(u.length),f=0,p=0;p<u.length;p++){var v=a.measureText(u[p]).width+(u[p].length-1)*r.letterSpacing;c[p]=v,f=Math.max(f,v)}var g=f+r.strokeThickness;r.dropShadow&&(g+=r.dropShadowDistance);var b=r.lineHeight||s.fontSize+r.strokeThickness,_=Math.max(b,s.fontSize+r.strokeThickness)+(u.length-1)*(b+r.leading);return r.dropShadow&&(_+=r.dropShadowDistance),new e(t,r,g,_,u,c,b+r.leading,f,s)},e.wordWrap=function(t,r,n){n===void 0&&(n=e._canvas);for(var i=n.getContext("2d"),o=0,s="",a="",l=Object.create(null),u=r.letterSpacing,c=r.whiteSpace,f=e.collapseSpaces(c),p=e.collapseNewlines(c),v=!f,g=r.wordWrapWidth+u,b=e.tokenize(t),_=0;_<b.length;_++){var w=b[_];if(e.isNewline(w)){if(!p){a+=e.addLine(s),v=!f,s="",o=0;continue}w=" "}if(f){var x=e.isBreakingSpace(w),T=e.isBreakingSpace(s[s.length-1]);if(x&&T)continue}var I=e.getFromCache(w,u,l,i);if(I>g)if(s!==""&&(a+=e.addLine(s),s="",o=0),e.canBreakWords(w,r.breakWords))for(var R=e.wordWrapSplit(w),E=0;E<R.length;E++){for(var O=R[E],P=1;R[E+P];){var N=R[E+P],A=O[O.length-1];if(!e.canBreakChars(A,N,w,E,r.breakWords))O+=N;else break;P++}E+=O.length-1;var j=e.getFromCache(O,u,l,i);j+o>g&&(a+=e.addLine(s),v=!1,s="",o=0),s+=O,o+=j}else{s.length>0&&(a+=e.addLine(s),s="",o=0);var X=_===b.length-1;a+=e.addLine(w,!X),v=!1,s="",o=0}else I+o>g&&(v=!1,a+=e.addLine(s),s="",o=0),(s.length>0||!e.isBreakingSpace(w)||v)&&(s+=w,o+=I)}return a+=e.addLine(s,!1),a},e.addLine=function(t,r){return r===void 0&&(r=!0),t=e.trimRight(t),t=r?t+`
`:t,t},e.getFromCache=function(t,r,n,i){var o=n[t];if(typeof o!="number"){var s=t.length*r;o=i.measureText(t).width+s,n[t]=o}return o},e.collapseSpaces=function(t){return t==="normal"||t==="pre-line"},e.collapseNewlines=function(t){return t==="normal"},e.trimRight=function(t){if(typeof t!="string")return"";for(var r=t.length-1;r>=0;r--){var n=t[r];if(!e.isBreakingSpace(n))break;t=t.slice(0,-1)}return t},e.isNewline=function(t){return typeof t!="string"?!1:e._newlines.indexOf(t.charCodeAt(0))>=0},e.isBreakingSpace=function(t,r){return typeof t!="string"?!1:e._breakingSpaces.indexOf(t.charCodeAt(0))>=0},e.tokenize=function(t){var r=[],n="";if(typeof t!="string")return r;for(var i=0;i<t.length;i++){var o=t[i],s=t[i+1];if(e.isBreakingSpace(o,s)||e.isNewline(o)){n!==""&&(r.push(n),n=""),r.push(o);continue}n+=o}return n!==""&&r.push(n),r},e.canBreakWords=function(t,r){return r},e.canBreakChars=function(t,r,n,i,o){return!0},e.wordWrapSplit=function(t){return t.split("")},e.measureFont=function(t){if(e._fonts[t])return e._fonts[t];var r={ascent:0,descent:0,fontSize:0},n=e._canvas,i=e._context;i.font=t;var o=e.METRICS_STRING+e.BASELINE_SYMBOL,s=Math.ceil(i.measureText(o).width),a=Math.ceil(i.measureText(e.BASELINE_SYMBOL).width),l=Math.ceil(e.HEIGHT_MULTIPLIER*a);a=a*e.BASELINE_MULTIPLIER|0,n.width=s,n.height=l,i.fillStyle="#f00",i.fillRect(0,0,s,l),i.font=t,i.textBaseline="alphabetic",i.fillStyle="#000",i.fillText(o,0,a);var u=i.getImageData(0,0,s,l).data,c=u.length,f=s*4,p=0,v=0,g=!1;for(p=0;p<a;++p){for(var b=0;b<f;b+=4)if(u[v+b]!==255){g=!0;break}if(!g)v+=f;else break}for(r.ascent=a-p,v=c-f,g=!1,p=l;p>a;--p){for(var b=0;b<f;b+=4)if(u[v+b]!==255){g=!0;break}if(!g)v-=f;else break}return r.descent=p-a,r.fontSize=r.ascent+r.descent,e._fonts[t]=r,r},e.clearMetrics=function(t){t===void 0&&(t=""),t?delete e._fonts[t]:e._fonts={}},Object.defineProperty(e,"_canvas",{get:function(){if(!e.__canvas){var t=void 0;try{var r=new OffscreenCanvas(0,0),n=r.getContext("2d");if(n&&n.measureText)return e.__canvas=r,r;t=document.createElement("canvas")}catch{t=document.createElement("canvas")}t.width=t.height=10,e.__canvas=t}return e.__canvas},enumerable:!1,configurable:!0}),Object.defineProperty(e,"_context",{get:function(){return e.__context||(e.__context=e._canvas.getContext("2d")),e.__context},enumerable:!1,configurable:!0}),e}();ls._fonts={};ls.METRICS_STRING="|\xC9q\xC5";ls.BASELINE_SYMBOL="M";ls.BASELINE_MULTIPLIER=1.4;ls.HEIGHT_MULTIPLIER=2;ls._newlines=[10,13];ls._breakingSpaces=[9,32,8192,8193,8194,8195,8196,8197,8198,8200,8201,8202,8287,12288];var Ute={texture:!0,children:!1,baseTexture:!0},B4=function(e){kte(t,e);function t(r,n,i){var o=this,s=!1;i||(i=document.createElement("canvas"),s=!0),i.width=3,i.height=3;var a=et.from(i);return a.orig=new Fe,a.trim=new Fe,o=e.call(this,a)||this,o._ownCanvas=s,o.canvas=i,o.context=o.canvas.getContext("2d"),o._resolution=We.RESOLUTION,o._autoResolution=!0,o._text=null,o._style=null,o._styleListener=null,o._font="",o.text=r,o.style=n,o.localStyleID=-1,o}return t.prototype.updateText=function(r){var n=this._style;if(this.localStyleID!==n.styleID&&(this.dirty=!0,this.localStyleID=n.styleID),!(!this.dirty&&r)){this._font=this._style.toFontString();var i=this.context,o=ls.measureText(this._text||" ",this._style,this._style.wordWrap,this.canvas),s=o.width,a=o.height,l=o.lines,u=o.lineHeight,c=o.lineWidths,f=o.maxLineWidth,p=o.fontProperties;this.canvas.width=Math.ceil(Math.ceil(Math.max(1,s)+n.padding*2)*this._resolution),this.canvas.height=Math.ceil(Math.ceil(Math.max(1,a)+n.padding*2)*this._resolution),i.scale(this._resolution,this._resolution),i.clearRect(0,0,this.canvas.width,this.canvas.height),i.font=this._font,i.lineWidth=n.strokeThickness,i.textBaseline=n.textBaseline,i.lineJoin=n.lineJoin,i.miterLimit=n.miterLimit;for(var v,g,b=n.dropShadow?2:1,_=0;_<b;++_){var w=n.dropShadow&&_===0,x=w?Math.ceil(Math.max(1,a)+n.padding*2):0,T=x*this._resolution;if(w){i.fillStyle="black",i.strokeStyle="black";var I=n.dropShadowColor,R=sl(typeof I=="number"?I:gO(I)),E=n.dropShadowBlur*this._resolution,O=n.dropShadowDistance*this._resolution;i.shadowColor="rgba("+R[0]*255+","+R[1]*255+","+R[2]*255+","+n.dropShadowAlpha+")",i.shadowBlur=E,i.shadowOffsetX=Math.cos(n.dropShadowAngle)*O,i.shadowOffsetY=Math.sin(n.dropShadowAngle)*O+T}else i.fillStyle=this._generateFillStyle(n,l,o),i.strokeStyle=n.stroke,i.shadowColor="black",i.shadowBlur=0,i.shadowOffsetX=0,i.shadowOffsetY=0;var P=(u-p.fontSize)/2;(!t.nextLineHeightBehavior||u-p.fontSize<0)&&(P=0);for(var N=0;N<l.length;N++)v=n.strokeThickness/2,g=n.strokeThickness/2+N*u+p.ascent+P,n.align==="right"?v+=f-c[N]:n.align==="center"&&(v+=(f-c[N])/2),n.stroke&&n.strokeThickness&&this.drawLetterSpacing(l[N],v+n.padding,g+n.padding-x,!0),n.fill&&this.drawLetterSpacing(l[N],v+n.padding,g+n.padding-x)}this.updateTexture()}},t.prototype.drawLetterSpacing=function(r,n,i,o){o===void 0&&(o=!1);var s=this._style,a=s.letterSpacing,l=t.experimentalLetterSpacing&&("letterSpacing"in CanvasRenderingContext2D.prototype||"textLetterSpacing"in CanvasRenderingContext2D.prototype);if(a===0||l){l&&(this.context.letterSpacing=a,this.context.textLetterSpacing=a),o?this.context.strokeText(r,n,i):this.context.fillText(r,n,i);return}for(var u=n,c=Array.from?Array.from(r):r.split(""),f=this.context.measureText(r).width,p=0,v=0;v<c.length;++v){var g=c[v];o?this.context.strokeText(g,u,i):this.context.fillText(g,u,i);for(var b="",_=v+1;_<c.length;++_)b+=c[_];p=this.context.measureText(b).width,u+=f-p+a,f=p}},t.prototype.updateTexture=function(){var r=this.canvas;if(this._style.trim){var n=FJ(r);n.data&&(r.width=n.width,r.height=n.height,this.context.putImageData(n.data,0,0))}var i=this._texture,o=this._style,s=o.trim?0:o.padding,a=i.baseTexture;i.trim.width=i._frame.width=r.width/this._resolution,i.trim.height=i._frame.height=r.height/this._resolution,i.trim.x=-s,i.trim.y=-s,i.orig.width=i._frame.width-s*2,i.orig.height=i._frame.height-s*2,this._onTextureUpdate(),a.setRealSize(r.width,r.height,this._resolution),i.updateUvs(),this.dirty=!1},t.prototype._render=function(r){this._autoResolution&&this._resolution!==r.resolution&&(this._resolution=r.resolution,this.dirty=!0),this.updateText(!0),e.prototype._render.call(this,r)},t.prototype.updateTransform=function(){this.updateText(!0),e.prototype.updateTransform.call(this)},t.prototype.getBounds=function(r,n){return this.updateText(!0),this._textureID===-1&&(r=!1),e.prototype.getBounds.call(this,r,n)},t.prototype.getLocalBounds=function(r){return this.updateText(!0),e.prototype.getLocalBounds.call(this,r)},t.prototype._calculateBounds=function(){this.calculateVertices(),this._bounds.addQuad(this.vertexData)},t.prototype._generateFillStyle=function(r,n,i){var o=r.fill;if(Array.isArray(o)){if(o.length===1)return o[0]}else return o;var s,a=r.dropShadow?r.dropShadowDistance:0,l=r.padding||0,u=this.canvas.width/this._resolution-a-l*2,c=this.canvas.height/this._resolution-a-l*2,f=o.slice(),p=r.fillGradientStops.slice();if(!p.length)for(var v=f.length+1,g=1;g<v;++g)p.push(g/v);if(f.unshift(o[0]),p.unshift(0),f.push(o[o.length-1]),p.push(1),r.fillGradientType===rp.LINEAR_VERTICAL){s=this.context.createLinearGradient(u/2,l,u/2,c+l);for(var b=i.fontProperties.fontSize+r.strokeThickness,g=0;g<n.length;g++){var _=i.lineHeight*(g-1)+b,w=i.lineHeight*g,x=w;g>0&&_>w&&(x=(w+_)/2);var T=w+b,I=i.lineHeight*(g+1),R=T;g+1<n.length&&I<T&&(R=(T+I)/2);for(var E=(R-x)/c,O=0;O<f.length;O++){var P=0;typeof p[O]=="number"?P=p[O]:P=O/f.length;var N=Math.min(1,Math.max(0,x/c+P*E));N=Number(N.toFixed(5)),s.addColorStop(N,f[O])}}}else{s=this.context.createLinearGradient(l,c/2,u+l,c/2);for(var A=f.length+1,j=1,g=0;g<f.length;g++){var X=void 0;typeof p[g]=="number"?X=p[g]:X=j/A,s.addColorStop(X,f[g]),j++}}return s},t.prototype.destroy=function(r){typeof r=="boolean"&&(r={children:r}),r=Object.assign({},Ute,r),e.prototype.destroy.call(this,r),this._ownCanvas&&(this.canvas.height=this.canvas.width=0),this.context=null,this.canvas=null,this._style=null},Object.defineProperty(t.prototype,"width",{get:function(){return this.updateText(!0),Math.abs(this.scale.x)*this._texture.orig.width},set:function(r){this.updateText(!0);var n=Lc(this.scale.x)||1;this.scale.x=n*r/this._texture.orig.width,this._width=r},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this.updateText(!0),Math.abs(this.scale.y)*this._texture.orig.height},set:function(r){this.updateText(!0);var n=Lc(this.scale.y)||1;this.scale.y=n*r/this._texture.orig.height,this._height=r},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"style",{get:function(){return this._style},set:function(r){r=r||{},r instanceof Zs?this._style=r:this._style=new Zs(r),this.localStyleID=-1,this.dirty=!0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"text",{get:function(){return this._text},set:function(r){r=String(r==null?"":r),this._text!==r&&(this._text=r,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"resolution",{get:function(){return this._resolution},set:function(r){this._autoResolution=!1,this._resolution!==r&&(this._resolution=r,this.dirty=!0)},enumerable:!1,configurable:!0}),t.nextLineHeightBehavior=!1,t.experimentalLetterSpacing=!1,t}(yu);/*!
 * @pixi/prepare - v6.4.2
 * Compiled Thu, 02 Jun 2022 15:39:26 UTC
 *
 * @pixi/prepare is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */We.UPLOADS_PER_FRAME=4;/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var tx=function(e,t){return tx=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])},tx(e,t)};function Fte(e,t){tx(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var Mte=function(){function e(t){this.maxItemsPerFrame=t,this.itemsLeft=0}return e.prototype.beginFrame=function(){this.itemsLeft=this.maxItemsPerFrame},e.prototype.allowedToUpload=function(){return this.itemsLeft-- >0},e}();function Bte(e,t){var r=!1;if(e&&e._textures&&e._textures.length){for(var n=0;n<e._textures.length;n++)if(e._textures[n]instanceof et){var i=e._textures[n].baseTexture;t.indexOf(i)===-1&&(t.push(i),r=!0)}}return r}function Dte(e,t){if(e.baseTexture instanceof wt){var r=e.baseTexture;return t.indexOf(r)===-1&&t.push(r),!0}return!1}function Gte(e,t){if(e._texture&&e._texture instanceof et){var r=e._texture.baseTexture;return t.indexOf(r)===-1&&t.push(r),!0}return!1}function jte(e,t){return t instanceof B4?(t.updateText(!0),!0):!1}function $te(e,t){if(t instanceof Zs){var r=t.toFontString();return ls.measureFont(r),!0}return!1}function Hte(e,t){if(e instanceof B4){t.indexOf(e.style)===-1&&t.push(e.style),t.indexOf(e)===-1&&t.push(e);var r=e._texture.baseTexture;return t.indexOf(r)===-1&&t.push(r),!0}return!1}function zte(e,t){return e instanceof Zs?(t.indexOf(e)===-1&&t.push(e),!0):!1}var Vte=function(){function e(t){var r=this;this.limiter=new Mte(We.UPLOADS_PER_FRAME),this.renderer=t,this.uploadHookHelper=null,this.queue=[],this.addHooks=[],this.uploadHooks=[],this.completes=[],this.ticking=!1,this.delayedTick=function(){!r.queue||r.prepareItems()},this.registerFindHook(Hte),this.registerFindHook(zte),this.registerFindHook(Bte),this.registerFindHook(Dte),this.registerFindHook(Gte),this.registerUploadHook(jte),this.registerUploadHook($te)}return e.prototype.upload=function(t,r){typeof t=="function"&&(r=t,t=null),t&&this.add(t),this.queue.length?(r&&this.completes.push(r),this.ticking||(this.ticking=!0,on.system.addOnce(this.tick,this,qs.UTILITY))):r&&r()},e.prototype.tick=function(){setTimeout(this.delayedTick,0)},e.prototype.prepareItems=function(){for(this.limiter.beginFrame();this.queue.length&&this.limiter.allowedToUpload();){var t=this.queue[0],r=!1;if(t&&!t._destroyed){for(var n=0,i=this.uploadHooks.length;n<i;n++)if(this.uploadHooks[n](this.uploadHookHelper,t)){this.queue.shift(),r=!0;break}}r||this.queue.shift()}if(this.queue.length)on.system.addOnce(this.tick,this,qs.UTILITY);else{this.ticking=!1;var o=this.completes.slice(0);this.completes.length=0;for(var n=0,i=o.length;n<i;n++)o[n]()}},e.prototype.registerFindHook=function(t){return t&&this.addHooks.push(t),this},e.prototype.registerUploadHook=function(t){return t&&this.uploadHooks.push(t),this},e.prototype.add=function(t){for(var r=0,n=this.addHooks.length;r<n&&!this.addHooks[r](t,this.queue);r++);if(t instanceof Pi)for(var r=t.children.length-1;r>=0;r--)this.add(t.children[r]);return this},e.prototype.destroy=function(){this.ticking&&on.system.remove(this.tick,this),this.ticking=!1,this.addHooks=null,this.uploadHooks=null,this.renderer=null,this.completes=null,this.queue=null,this.limiter=null,this.uploadHookHelper=null},e}();function t7(e,t){return t instanceof wt?(t._glTextures[e.CONTEXT_UID]||e.texture.bind(t),!0):!1}function Xte(e,t){if(!(t instanceof Ya))return!1;var r=t.geometry;t.finishPoly(),r.updateBatches();for(var n=r.batches,i=0;i<n.length;i++){var o=n[i].style.texture;o&&t7(e,o.baseTexture)}return r.batchable||e.geometry.bind(r,t._resolveDirectShader(e)),!0}function Wte(e,t){return e instanceof Ya?(t.push(e),!0):!1}var Yte=function(e){Fte(t,e);function t(r){var n=e.call(this,r)||this;return n.uploadHookHelper=n.renderer,n.registerFindHook(Wte),n.registerUploadHook(t7),n.registerUploadHook(Xte),n}return t}(Vte);/*!
 * @pixi/spritesheet - v6.4.2
 * Compiled Thu, 02 Jun 2022 15:39:26 UTC
 *
 * @pixi/spritesheet is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var Kte=function(){function e(t,r,n){n===void 0&&(n=null),this._texture=t instanceof et?t:null,this.baseTexture=t instanceof wt?t:this._texture.baseTexture,this.textures={},this.animations={},this.data=r;var i=this.baseTexture.resource;this.resolution=this._updateResolution(n||(i?i.url:null)),this._frames=this.data.frames,this._frameKeys=Object.keys(this._frames),this._batchIndex=0,this._callback=null}return e.prototype._updateResolution=function(t){t===void 0&&(t=null);var r=this.data.meta.scale,n=Tg(t,null);return n===null&&(n=r!==void 0?parseFloat(r):1),n!==1&&this.baseTexture.setResolution(n),n},e.prototype.parse=function(t){this._batchIndex=0,this._callback=t,this._frameKeys.length<=e.BATCH_SIZE?(this._processFrames(0),this._processAnimations(),this._parseComplete()):this._nextBatch()},e.prototype._processFrames=function(t){for(var r=t,n=e.BATCH_SIZE;r-t<n&&r<this._frameKeys.length;){var i=this._frameKeys[r],o=this._frames[i],s=o.frame;if(s){var a=null,l=null,u=o.trimmed!==!1&&o.sourceSize?o.sourceSize:o.frame,c=new Fe(0,0,Math.floor(u.w)/this.resolution,Math.floor(u.h)/this.resolution);o.rotated?a=new Fe(Math.floor(s.x)/this.resolution,Math.floor(s.y)/this.resolution,Math.floor(s.h)/this.resolution,Math.floor(s.w)/this.resolution):a=new Fe(Math.floor(s.x)/this.resolution,Math.floor(s.y)/this.resolution,Math.floor(s.w)/this.resolution,Math.floor(s.h)/this.resolution),o.trimmed!==!1&&o.spriteSourceSize&&(l=new Fe(Math.floor(o.spriteSourceSize.x)/this.resolution,Math.floor(o.spriteSourceSize.y)/this.resolution,Math.floor(s.w)/this.resolution,Math.floor(s.h)/this.resolution)),this.textures[i]=new et(this.baseTexture,a,c,l,o.rotated?2:0,o.anchor),et.addToCache(this.textures[i],i)}r++}},e.prototype._processAnimations=function(){var t=this.data.animations||{};for(var r in t){this.animations[r]=[];for(var n=0;n<t[r].length;n++){var i=t[r][n];this.animations[r].push(this.textures[i])}}},e.prototype._parseComplete=function(){var t=this._callback;this._callback=null,this._batchIndex=0,t.call(this,this.textures)},e.prototype._nextBatch=function(){var t=this;this._processFrames(this._batchIndex*e.BATCH_SIZE),this._batchIndex++,setTimeout(function(){t._batchIndex*e.BATCH_SIZE<t._frameKeys.length?t._nextBatch():(t._processAnimations(),t._parseComplete())},0)},e.prototype.destroy=function(t){var r;t===void 0&&(t=!1);for(var n in this.textures)this.textures[n].destroy();this._frames=null,this._frameKeys=null,this.data=null,this.textures=null,t&&((r=this._texture)===null||r===void 0||r.destroy(),this.baseTexture.destroy()),this._texture=null,this.baseTexture=null},e.BATCH_SIZE=1e3,e}(),qte=function(){function e(){}return e.use=function(t,r){var n,i,o=this,s=t.name+"_image";if(!t.data||t.type!==wr.TYPE.JSON||!t.data.frames||o.resources[s]){r();return}var a=(i=(n=t.data)===null||n===void 0?void 0:n.meta)===null||i===void 0?void 0:i.related_multi_packs;if(Array.isArray(a))for(var l=function(g){if(typeof g!="string")return"continue";var b=g.replace(".json",""),_=Oc.resolve(t.url.replace(o.baseUrl,""),g);if(o.resources[b]||Object.values(o.resources).some(function(x){return Oc.format(Oc.parse(x.url))===_}))return"continue";var w={crossOrigin:t.crossOrigin,loadType:wr.LOAD_TYPE.XHR,xhrType:wr.XHR_RESPONSE_TYPE.JSON,parentResource:t,metadata:t.metadata};o.add(b,_,w)},u=0,c=a;u<c.length;u++){var f=c[u];l(f)}var p={crossOrigin:t.crossOrigin,metadata:t.metadata.imageMetadata,parentResource:t},v=e.getResourcePath(t,o.baseUrl);o.add(s,v,p,function(b){if(b.error){r(b.error);return}var _=new Kte(b.texture,t.data,t.url);_.parse(function(){t.spritesheet=_,t.textures=_.textures,r()})})},e.getResourcePath=function(t,r){return t.isDataUrl?t.data.meta.image:Oc.resolve(t.url.replace(r,""),t.data.meta.image)},e}();/*!
 * @pixi/sprite-tiling - v6.4.2
 * Compiled Thu, 02 Jun 2022 15:39:26 UTC
 *
 * @pixi/sprite-tiling is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var rx=function(e,t){return rx=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])},rx(e,t)};function r7(e,t){rx(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var Df=new Gt,Zte=function(e){r7(t,e);function t(r,n,i){n===void 0&&(n=100),i===void 0&&(i=100);var o=e.call(this,r)||this;return o.tileTransform=new k4,o._width=n,o._height=i,o.uvMatrix=o.texture.uvMatrix||new L4(r),o.pluginName="tilingSprite",o.uvRespectAnchor=!1,o}return Object.defineProperty(t.prototype,"clampMargin",{get:function(){return this.uvMatrix.clampMargin},set:function(r){this.uvMatrix.clampMargin=r,this.uvMatrix.update(!0)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"tileScale",{get:function(){return this.tileTransform.scale},set:function(r){this.tileTransform.scale.copyFrom(r)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"tilePosition",{get:function(){return this.tileTransform.position},set:function(r){this.tileTransform.position.copyFrom(r)},enumerable:!1,configurable:!0}),t.prototype._onTextureUpdate=function(){this.uvMatrix&&(this.uvMatrix.texture=this._texture),this._cachedTint=16777215},t.prototype._render=function(r){var n=this._texture;!n||!n.valid||(this.tileTransform.updateLocalTransform(),this.uvMatrix.update(),r.batch.setObjectRenderer(r.plugins[this.pluginName]),r.plugins[this.pluginName].render(this))},t.prototype._calculateBounds=function(){var r=this._width*-this._anchor._x,n=this._height*-this._anchor._y,i=this._width*(1-this._anchor._x),o=this._height*(1-this._anchor._y);this._bounds.addFrame(this.transform,r,n,i,o)},t.prototype.getLocalBounds=function(r){return this.children.length===0?(this._bounds.minX=this._width*-this._anchor._x,this._bounds.minY=this._height*-this._anchor._y,this._bounds.maxX=this._width*(1-this._anchor._x),this._bounds.maxY=this._height*(1-this._anchor._y),r||(this._localBoundsRect||(this._localBoundsRect=new Fe),r=this._localBoundsRect),this._bounds.getRectangle(r)):e.prototype.getLocalBounds.call(this,r)},t.prototype.containsPoint=function(r){this.worldTransform.applyInverse(r,Df);var n=this._width,i=this._height,o=-n*this.anchor._x;if(Df.x>=o&&Df.x<o+n){var s=-i*this.anchor._y;if(Df.y>=s&&Df.y<s+i)return!0}return!1},t.prototype.destroy=function(r){e.prototype.destroy.call(this,r),this.tileTransform=null,this.uvMatrix=null},t.from=function(r,n){var i=r instanceof et?r:et.from(r,n);return new t(i,n.width,n.height)},Object.defineProperty(t.prototype,"width",{get:function(){return this._width},set:function(r){this._width=r},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this._height},set:function(r){this._height=r},enumerable:!1,configurable:!0}),t}(yu),Jte=`#version 100
#define SHADER_NAME Tiling-Sprite-Simple-100

precision lowp float;

varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform vec4 uColor;

void main(void)
{
    vec4 texSample = texture2D(uSampler, vTextureCoord);
    gl_FragColor = texSample * uColor;
}
`,NI=`#version 100
#define SHADER_NAME Tiling-Sprite-100

precision lowp float;

attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform mat3 uTransform;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;
}
`,Qte=`#version 100
#ifdef GL_EXT_shader_texture_lod
    #extension GL_EXT_shader_texture_lod : enable
#endif
#define SHADER_NAME Tiling-Sprite-100

precision lowp float;

varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform vec4 uColor;
uniform mat3 uMapCoord;
uniform vec4 uClampFrame;
uniform vec2 uClampOffset;

void main(void)
{
    vec2 coord = vTextureCoord + ceil(uClampOffset - vTextureCoord);
    coord = (uMapCoord * vec3(coord, 1.0)).xy;
    vec2 unclamped = coord;
    coord = clamp(coord, uClampFrame.xy, uClampFrame.zw);

    #ifdef GL_EXT_shader_texture_lod
        vec4 texSample = unclamped == coord
            ? texture2D(uSampler, coord) 
            : texture2DLodEXT(uSampler, coord, 0);
    #else
        vec4 texSample = texture2D(uSampler, coord);
    #endif

    gl_FragColor = texSample * uColor;
}
`,ere=`#version 300 es
#define SHADER_NAME Tiling-Sprite-300

precision lowp float;

in vec2 aVertexPosition;
in vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform mat3 uTransform;

out vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;
}
`,tre=`#version 300 es
#define SHADER_NAME Tiling-Sprite-100

precision lowp float;

in vec2 vTextureCoord;

out vec4 fragmentColor;

uniform sampler2D uSampler;
uniform vec4 uColor;
uniform mat3 uMapCoord;
uniform vec4 uClampFrame;
uniform vec2 uClampOffset;

void main(void)
{
    vec2 coord = vTextureCoord + ceil(uClampOffset - vTextureCoord);
    coord = (uMapCoord * vec3(coord, 1.0)).xy;
    vec2 unclamped = coord;
    coord = clamp(coord, uClampFrame.xy, uClampFrame.zw);

    vec4 texSample = texture(uSampler, coord, unclamped == coord ? 0.0f : -32.0f);// lod-bias very negative to force lod 0

    fragmentColor = texSample * uColor;
}
`,Rv=new er,rre=function(e){r7(t,e);function t(r){var n=e.call(this,r)||this;return r.runners.contextChange.add(n),n.quad=new UO,n.state=gl.for2d(),n}return t.prototype.contextChange=function(){var r=this.renderer,n={globals:r.globalUniforms};this.simpleShader=Vs.from(NI,Jte,n),this.shader=r.context.webGLVersion>1?Vs.from(ere,tre,n):Vs.from(NI,Qte,n)},t.prototype.render=function(r){var n=this.renderer,i=this.quad,o=i.vertices;o[0]=o[6]=r._width*-r.anchor.x,o[1]=o[3]=r._height*-r.anchor.y,o[2]=o[4]=r._width*(1-r.anchor.x),o[5]=o[7]=r._height*(1-r.anchor.y);var s=r.uvRespectAnchor?r.anchor.x:0,a=r.uvRespectAnchor?r.anchor.y:0;o=i.uvs,o[0]=o[6]=-s,o[1]=o[3]=-a,o[2]=o[4]=1-s,o[5]=o[7]=1-a,i.invalidate();var l=r._texture,u=l.baseTexture,c=r.tileTransform.localTransform,f=r.uvMatrix,p=u.isPowerOfTwo&&l.frame.width===u.width&&l.frame.height===u.height;p&&(u._glTextures[n.CONTEXT_UID]?p=u.wrapMode!==Jo.CLAMP:u.wrapMode===Jo.CLAMP&&(u.wrapMode=Jo.REPEAT));var v=p?this.simpleShader:this.shader,g=l.width,b=l.height,_=r._width,w=r._height;Rv.set(c.a*g/_,c.b*g/w,c.c*b/_,c.d*b/w,c.tx/_,c.ty/w),Rv.invert(),p?Rv.prepend(f.mapCoord):(v.uniforms.uMapCoord=f.mapCoord.toArray(!0),v.uniforms.uClampFrame=f.uClampFrame,v.uniforms.uClampOffset=f.uClampOffset),v.uniforms.uTransform=Rv.toArray(!0),v.uniforms.uColor=bO(r.tint,r.worldAlpha,v.uniforms.uColor,u.alphaMode),v.uniforms.translationMatrix=r.transform.worldTransform.toArray(!0),v.uniforms.uSampler=l,n.shader.bind(v),n.geometry.bind(i),this.state.blendMode=_O(r.blendMode,u.alphaMode),n.state.set(this.state),n.geometry.draw(this.renderer.gl.TRIANGLES,6,0)},t}(Xy);/*!
 * @pixi/mesh - v6.4.2
 * Compiled Thu, 02 Jun 2022 15:39:26 UTC
 *
 * @pixi/mesh is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var nx=function(e,t){return nx=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])},nx(e,t)};function D4(e,t){nx(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var nre=function(){function e(t,r){this.uvBuffer=t,this.uvMatrix=r,this.data=null,this._bufferUpdateId=-1,this._textureUpdateId=-1,this._updateID=0}return e.prototype.update=function(t){if(!(!t&&this._bufferUpdateId===this.uvBuffer._updateID&&this._textureUpdateId===this.uvMatrix._updateID)){this._bufferUpdateId=this.uvBuffer._updateID,this._textureUpdateId=this.uvMatrix._updateID;var r=this.uvBuffer.data;(!this.data||this.data.length!==r.length)&&(this.data=new Float32Array(r.length)),this.uvMatrix.multiplyUvs(r,this.data),this._updateID++}},e}(),I_=new Gt,PI=new tu,np=function(e){D4(t,e);function t(r,n,i,o){o===void 0&&(o=Ci.TRIANGLES);var s=e.call(this)||this;return s.geometry=r,s.shader=n,s.state=i||gl.for2d(),s.drawMode=o,s.start=0,s.size=0,s.uvs=null,s.indices=null,s.vertexData=new Float32Array(1),s.vertexDirty=-1,s._transformID=-1,s._roundPixels=We.ROUND_PIXELS,s.batchUvs=null,s}return Object.defineProperty(t.prototype,"geometry",{get:function(){return this._geometry},set:function(r){this._geometry!==r&&(this._geometry&&(this._geometry.refCount--,this._geometry.refCount===0&&this._geometry.dispose()),this._geometry=r,this._geometry&&this._geometry.refCount++,this.vertexDirty=-1)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"uvBuffer",{get:function(){return this.geometry.buffers[1]},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"verticesBuffer",{get:function(){return this.geometry.buffers[0]},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"material",{get:function(){return this.shader},set:function(r){this.shader=r},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"blendMode",{get:function(){return this.state.blendMode},set:function(r){this.state.blendMode=r},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"roundPixels",{get:function(){return this._roundPixels},set:function(r){this._roundPixels!==r&&(this._transformID=-1),this._roundPixels=r},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"tint",{get:function(){return"tint"in this.shader?this.shader.tint:null},set:function(r){this.shader.tint=r},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"texture",{get:function(){return"texture"in this.shader?this.shader.texture:null},set:function(r){this.shader.texture=r},enumerable:!1,configurable:!0}),t.prototype._render=function(r){var n=this.geometry.buffers[0].data,i=this.shader;i.batchable&&this.drawMode===Ci.TRIANGLES&&n.length<t.BATCHABLE_SIZE*2?this._renderToBatch(r):this._renderDefault(r)},t.prototype._renderDefault=function(r){var n=this.shader;n.alpha=this.worldAlpha,n.update&&n.update(),r.batch.flush(),n.uniforms.translationMatrix=this.transform.worldTransform.toArray(!0),r.shader.bind(n),r.state.set(this.state),r.geometry.bind(this.geometry,n),r.geometry.draw(this.drawMode,this.size,this.start,this.geometry.instanceCount)},t.prototype._renderToBatch=function(r){var n=this.geometry,i=this.shader;i.uvMatrix&&(i.uvMatrix.update(),this.calculateUvs()),this.calculateVertices(),this.indices=n.indexBuffer.data,this._tintRGB=i._tintRGB,this._texture=i.texture;var o=this.material.pluginName;r.batch.setObjectRenderer(r.plugins[o]),r.plugins[o].render(this)},t.prototype.calculateVertices=function(){var r=this.geometry,n=r.buffers[0],i=n.data,o=n._updateID;if(!(o===this.vertexDirty&&this._transformID===this.transform._worldID)){this._transformID=this.transform._worldID,this.vertexData.length!==i.length&&(this.vertexData=new Float32Array(i.length));for(var s=this.transform.worldTransform,a=s.a,l=s.b,u=s.c,c=s.d,f=s.tx,p=s.ty,v=this.vertexData,g=0;g<v.length/2;g++){var b=i[g*2],_=i[g*2+1];v[g*2]=a*b+u*_+f,v[g*2+1]=l*b+c*_+p}if(this._roundPixels)for(var w=We.RESOLUTION,g=0;g<v.length;++g)v[g]=Math.round((v[g]*w|0)/w);this.vertexDirty=o}},t.prototype.calculateUvs=function(){var r=this.geometry.buffers[1],n=this.shader;n.uvMatrix.isSimple?this.uvs=r.data:(this.batchUvs||(this.batchUvs=new nre(r,n.uvMatrix)),this.batchUvs.update(),this.uvs=this.batchUvs.data)},t.prototype._calculateBounds=function(){this.calculateVertices(),this._bounds.addVertexData(this.vertexData,0,this.vertexData.length)},t.prototype.containsPoint=function(r){if(!this.getBounds().contains(r.x,r.y))return!1;this.worldTransform.applyInverse(r,I_);for(var n=this.geometry.getBuffer("aVertexPosition").data,i=PI.points,o=this.geometry.getIndex().data,s=o.length,a=this.drawMode===4?3:1,l=0;l+2<s;l+=a){var u=o[l]*2,c=o[l+1]*2,f=o[l+2]*2;if(i[0]=n[u],i[1]=n[u+1],i[2]=n[c],i[3]=n[c+1],i[4]=n[f],i[5]=n[f+1],PI.contains(I_.x,I_.y))return!0}return!1},t.prototype.destroy=function(r){e.prototype.destroy.call(this,r),this._cachedTexture&&(this._cachedTexture.destroy(),this._cachedTexture=null),this.geometry=null,this.shader=null,this.state=null,this.uvs=null,this.indices=null,this.vertexData=null},t.BATCHABLE_SIZE=100,t}(Pi),ire=`varying vec2 vTextureCoord;
uniform vec4 uColor;

uniform sampler2D uSampler;

void main(void)
{
    gl_FragColor = texture2D(uSampler, vTextureCoord) * uColor;
}
`,ore=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform mat3 uTextureMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = (uTextureMatrix * vec3(aTextureCoord, 1.0)).xy;
}
`,ip=function(e){D4(t,e);function t(r,n){var i=this,o={uSampler:r,alpha:1,uTextureMatrix:er.IDENTITY,uColor:new Float32Array([1,1,1,1])};return n=Object.assign({tint:16777215,alpha:1,pluginName:"batch"},n),n.uniforms&&Object.assign(o,n.uniforms),i=e.call(this,n.program||Oh.from(ore,ire),o)||this,i._colorDirty=!1,i.uvMatrix=new L4(r),i.batchable=n.program===void 0,i.pluginName=n.pluginName,i.tint=n.tint,i.alpha=n.alpha,i}return Object.defineProperty(t.prototype,"texture",{get:function(){return this.uniforms.uSampler},set:function(r){this.uniforms.uSampler!==r&&(!this.uniforms.uSampler.baseTexture.alphaMode!=!r.baseTexture.alphaMode&&(this._colorDirty=!0),this.uniforms.uSampler=r,this.uvMatrix.texture=r)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"alpha",{get:function(){return this._alpha},set:function(r){r!==this._alpha&&(this._alpha=r,this._colorDirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"tint",{get:function(){return this._tint},set:function(r){r!==this._tint&&(this._tint=r,this._tintRGB=(r>>16)+(r&65280)+((r&255)<<16),this._colorDirty=!0)},enumerable:!1,configurable:!0}),t.prototype.update=function(){if(this._colorDirty){this._colorDirty=!1;var r=this.texture.baseTexture;bO(this._tint,this._alpha,this.uniforms.uColor,r.alphaMode)}this.uvMatrix.update()&&(this.uniforms.uTextureMatrix=this.uvMatrix.mapCoord)},t}(Vs),Wy=function(e){D4(t,e);function t(r,n,i){var o=e.call(this)||this,s=new Ar(r),a=new Ar(n,!0),l=new Ar(i,!0,!0);return o.addAttribute("aVertexPosition",s,2,!1,$e.FLOAT).addAttribute("aTextureCoord",a,2,!1,$e.FLOAT).addIndex(l),o._updateId=-1,o}return Object.defineProperty(t.prototype,"vertexDirtyId",{get:function(){return this.buffers[0]._updateID},enumerable:!1,configurable:!0}),t}(kh);/*!
 * @pixi/text-bitmap - v6.4.2
 * Compiled Thu, 02 Jun 2022 15:39:26 UTC
 *
 * @pixi/text-bitmap is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var ix=function(e,t){return ix=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])},ix(e,t)};function sre(e,t){ix(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var Cg=function(){function e(){this.info=[],this.common=[],this.page=[],this.char=[],this.kerning=[],this.distanceField=[]}return e}(),are=function(){function e(){}return e.test=function(t){return typeof t=="string"&&t.indexOf("info face=")===0},e.parse=function(t){var r=t.match(/^[a-z]+\s+.+$/gm),n={info:[],common:[],page:[],char:[],chars:[],kerning:[],kernings:[],distanceField:[]};for(var i in r){var o=r[i].match(/^[a-z]+/gm)[0],s=r[i].match(/[a-zA-Z]+=([^\s"']+|"([^"]*)")/gm),a={};for(var l in s){var u=s[l].split("="),c=u[0],f=u[1].replace(/"/gm,""),p=parseFloat(f),v=isNaN(p)?f:p;a[c]=v}n[o].push(a)}var g=new Cg;return n.info.forEach(function(b){return g.info.push({face:b.face,size:parseInt(b.size,10)})}),n.common.forEach(function(b){return g.common.push({lineHeight:parseInt(b.lineHeight,10)})}),n.page.forEach(function(b){return g.page.push({id:parseInt(b.id,10),file:b.file})}),n.char.forEach(function(b){return g.char.push({id:parseInt(b.id,10),page:parseInt(b.page,10),x:parseInt(b.x,10),y:parseInt(b.y,10),width:parseInt(b.width,10),height:parseInt(b.height,10),xoffset:parseInt(b.xoffset,10),yoffset:parseInt(b.yoffset,10),xadvance:parseInt(b.xadvance,10)})}),n.kerning.forEach(function(b){return g.kerning.push({first:parseInt(b.first,10),second:parseInt(b.second,10),amount:parseInt(b.amount,10)})}),n.distanceField.forEach(function(b){return g.distanceField.push({distanceRange:parseInt(b.distanceRange,10),fieldType:b.fieldType})}),g},e}(),ox=function(){function e(){}return e.test=function(t){return t instanceof XMLDocument&&t.getElementsByTagName("page").length&&t.getElementsByTagName("info")[0].getAttribute("face")!==null},e.parse=function(t){for(var r=new Cg,n=t.getElementsByTagName("info"),i=t.getElementsByTagName("common"),o=t.getElementsByTagName("page"),s=t.getElementsByTagName("char"),a=t.getElementsByTagName("kerning"),l=t.getElementsByTagName("distanceField"),u=0;u<n.length;u++)r.info.push({face:n[u].getAttribute("face"),size:parseInt(n[u].getAttribute("size"),10)});for(var u=0;u<i.length;u++)r.common.push({lineHeight:parseInt(i[u].getAttribute("lineHeight"),10)});for(var u=0;u<o.length;u++)r.page.push({id:parseInt(o[u].getAttribute("id"),10)||0,file:o[u].getAttribute("file")});for(var u=0;u<s.length;u++){var c=s[u];r.char.push({id:parseInt(c.getAttribute("id"),10),page:parseInt(c.getAttribute("page"),10)||0,x:parseInt(c.getAttribute("x"),10),y:parseInt(c.getAttribute("y"),10),width:parseInt(c.getAttribute("width"),10),height:parseInt(c.getAttribute("height"),10),xoffset:parseInt(c.getAttribute("xoffset"),10),yoffset:parseInt(c.getAttribute("yoffset"),10),xadvance:parseInt(c.getAttribute("xadvance"),10)})}for(var u=0;u<a.length;u++)r.kerning.push({first:parseInt(a[u].getAttribute("first"),10),second:parseInt(a[u].getAttribute("second"),10),amount:parseInt(a[u].getAttribute("amount"),10)});for(var u=0;u<l.length;u++)r.distanceField.push({fieldType:l[u].getAttribute("fieldType"),distanceRange:parseInt(l[u].getAttribute("distanceRange"),10)});return r},e}(),lre=function(){function e(){}return e.test=function(t){if(typeof t=="string"&&t.indexOf("<font>")>-1){var r=new globalThis.DOMParser().parseFromString(t,"text/xml");return ox.test(r)}return!1},e.parse=function(t){var r=new globalThis.DOMParser().parseFromString(t,"text/xml");return ox.parse(r)},e}(),N_=[are,ox,lre];function n7(e){for(var t=0;t<N_.length;t++)if(N_[t].test(e))return N_[t];return null}function ure(e,t,r,n,i,o){var s=r.fill;if(Array.isArray(s)){if(s.length===1)return s[0]}else return s;var a,l=r.dropShadow?r.dropShadowDistance:0,u=r.padding||0,c=e.width/n-l-u*2,f=e.height/n-l-u*2,p=s.slice(),v=r.fillGradientStops.slice();if(!v.length)for(var g=p.length+1,b=1;b<g;++b)v.push(b/g);if(p.unshift(s[0]),v.unshift(0),p.push(s[s.length-1]),v.push(1),r.fillGradientType===rp.LINEAR_VERTICAL){a=t.createLinearGradient(c/2,u,c/2,f+u);for(var _=0,w=o.fontProperties.fontSize+r.strokeThickness,x=w/f,b=0;b<i.length;b++)for(var T=o.lineHeight*b,I=0;I<p.length;I++){var R=0;typeof v[I]=="number"?R=v[I]:R=I/p.length;var E=T/f+R*x,O=Math.max(_,E);O=Math.min(O,1),a.addColorStop(O,p[I]),_=O}}else{a=t.createLinearGradient(u,f/2,c+u,f/2);for(var P=p.length+1,N=1,b=0;b<p.length;b++){var A=void 0;typeof v[b]=="number"?A=v[b]:A=N/P,a.addColorStop(A,p[b]),N++}}return a}function cre(e,t,r,n,i,o,s){var a=r.text,l=r.fontProperties;t.translate(n,i),t.scale(o,o);var u=s.strokeThickness/2,c=-(s.strokeThickness/2);if(t.font=s.toFontString(),t.lineWidth=s.strokeThickness,t.textBaseline=s.textBaseline,t.lineJoin=s.lineJoin,t.miterLimit=s.miterLimit,t.fillStyle=ure(e,t,s,o,[a],r),t.strokeStyle=s.stroke,s.dropShadow){var f=s.dropShadowColor,p=sl(typeof f=="number"?f:gO(f)),v=s.dropShadowBlur*o,g=s.dropShadowDistance*o;t.shadowColor="rgba("+p[0]*255+","+p[1]*255+","+p[2]*255+","+s.dropShadowAlpha+")",t.shadowBlur=v,t.shadowOffsetX=Math.cos(s.dropShadowAngle)*g,t.shadowOffsetY=Math.sin(s.dropShadowAngle)*g}else t.shadowColor="black",t.shadowBlur=0,t.shadowOffsetX=0,t.shadowOffsetY=0;s.stroke&&s.strokeThickness&&t.strokeText(a,u,c+r.lineHeight-l.descent),s.fill&&t.fillText(a,u,c+r.lineHeight-l.descent),t.setTransform(1,0,0,1,0,0),t.fillStyle="rgba(0, 0, 0, 0)"}function i7(e){return Array.from?Array.from(e):e.split("")}function hre(e){typeof e=="string"&&(e=[e]);for(var t=[],r=0,n=e.length;r<n;r++){var i=e[r];if(Array.isArray(i)){if(i.length!==2)throw new Error("[BitmapFont]: Invalid character range length, expecting 2 got "+i.length+".");var o=i[0].charCodeAt(0),s=i[1].charCodeAt(0);if(s<o)throw new Error("[BitmapFont]: Invalid character range.");for(var a=o,l=s;a<=l;a++)t.push(String.fromCharCode(a))}else t.push.apply(t,i7(i))}if(t.length===0)throw new Error("[BitmapFont]: Empty set when resolving characters.");return t}function h0(e){return e.codePointAt?e.codePointAt(0):e.charCodeAt(0)}var bc=function(){function e(t,r,n){var i,o,s=t.info[0],a=t.common[0],l=t.page[0],u=t.distanceField[0],c=Tg(l.file),f={};this._ownsTextures=n,this.font=s.face,this.size=s.size,this.lineHeight=a.lineHeight/c,this.chars={},this.pageTextures=f;for(var p=0;p<t.page.length;p++){var v=t.page[p],g=v.id,b=v.file;f[g]=r instanceof Array?r[p]:r[b],(u==null?void 0:u.fieldType)&&u.fieldType!=="none"&&(f[g].baseTexture.alphaMode=To.NO_PREMULTIPLIED_ALPHA)}for(var p=0;p<t.char.length;p++){var _=t.char[p],g=_.id,w=_.page,x=t.char[p],T=x.x,I=x.y,R=x.width,E=x.height,O=x.xoffset,P=x.yoffset,N=x.xadvance;T/=c,I/=c,R/=c,E/=c,O/=c,P/=c,N/=c;var A=new Fe(T+f[w].frame.x/c,I+f[w].frame.y/c,R,E);this.chars[g]={xOffset:O,yOffset:P,xAdvance:N,kerning:{},texture:new et(f[w].baseTexture,A),page:w}}for(var p=0;p<t.kerning.length;p++){var j=t.kerning[p],X=j.first,B=j.second,ae=j.amount;X/=c,B/=c,ae/=c,this.chars[B]&&(this.chars[B].kerning[X]=ae)}this.distanceFieldRange=u==null?void 0:u.distanceRange,this.distanceFieldType=(o=(i=u==null?void 0:u.fieldType)===null||i===void 0?void 0:i.toLowerCase())!==null&&o!==void 0?o:"none"}return e.prototype.destroy=function(){for(var t in this.chars)this.chars[t].texture.destroy(),this.chars[t].texture=null;for(var t in this.pageTextures)this._ownsTextures&&this.pageTextures[t].destroy(!0),this.pageTextures[t]=null;this.chars=null,this.pageTextures=null},e.install=function(t,r,n){var i;if(t instanceof Cg)i=t;else{var o=n7(t);if(!o)throw new Error("Unrecognized data format for font.");i=o.parse(t)}r instanceof et&&(r=[r]);var s=new e(i,r,n);return e.available[s.font]=s,s},e.uninstall=function(t){var r=e.available[t];if(!r)throw new Error("No font found named '"+t+"'");r.destroy(),delete e.available[t]},e.from=function(t,r,n){if(!t)throw new Error("[BitmapFont] Property `name` is required.");var i=Object.assign({},e.defaultOptions,n),o=i.chars,s=i.padding,a=i.resolution,l=i.textureWidth,u=i.textureHeight,c=hre(o),f=r instanceof Zs?r:new Zs(r),p=l,v=new Cg;v.info[0]={face:f.fontFamily,size:f.fontSize},v.common[0]={lineHeight:f.fontSize};for(var g=0,b=0,_,w,x,T=0,I=[],R=0;R<c.length;R++){_||(_=document.createElement("canvas"),_.width=l,_.height=u,w=_.getContext("2d"),x=new wt(_,{resolution:a}),I.push(new et(x)),v.page.push({id:I.length-1,file:""}));var E=ls.measureText(c[R],f,!1,_),O=E.width,P=Math.ceil(E.height),N=Math.ceil((f.fontStyle==="italic"?2:1)*O);if(b>=u-P*a){if(b===0)throw new Error("[BitmapFont] textureHeight "+u+"px is "+("too small for "+f.fontSize+"px fonts"));--R,_=null,w=null,x=null,b=0,g=0,T=0;continue}if(T=Math.max(P+E.fontProperties.descent,T),N*a+g>=p){--R,b+=T*a,b=Math.ceil(b),g=0,T=0;continue}cre(_,w,E,g,b,a,f);var A=h0(E.text);v.char.push({id:A,page:I.length-1,x:g/a,y:b/a,width:N,height:P,xoffset:0,yoffset:0,xadvance:Math.ceil(O-(f.dropShadow?f.dropShadowDistance:0)-(f.stroke?f.strokeThickness:0))}),g+=(N+2*s)*a,g=Math.ceil(g)}for(var R=0,j=c.length;R<j;R++)for(var X=c[R],B=0;B<j;B++){var ae=c[B],Y=w.measureText(X).width,K=w.measureText(ae).width,me=w.measureText(X+ae).width,ue=me-(Y+K);ue&&v.kerning.push({first:h0(X),second:h0(ae),amount:ue})}var ie=new e(v,I,!0);return e.available[t]!==void 0&&e.uninstall(t),e.available[t]=ie,ie},e.ALPHA=[["a","z"],["A","Z"]," "],e.NUMERIC=[["0","9"]],e.ALPHANUMERIC=[["a","z"],["A","Z"],["0","9"]," "],e.ASCII=[[" ","~"]],e.defaultOptions={resolution:1,textureWidth:512,textureHeight:512,padding:4,chars:e.ALPHANUMERIC},e.available={},e}(),fre=`// Pixi texture info\r
varying vec2 vTextureCoord;\r
uniform sampler2D uSampler;\r
\r
// Tint\r
uniform vec4 uColor;\r
\r
// on 2D applications fwidth is screenScale / glyphAtlasScale * distanceFieldRange\r
uniform float uFWidth;\r
\r
void main(void) {\r
\r
  // To stack MSDF and SDF we need a non-pre-multiplied-alpha texture.\r
  vec4 texColor = texture2D(uSampler, vTextureCoord);\r
\r
  // MSDF\r
  float median = texColor.r + texColor.g + texColor.b -\r
                  min(texColor.r, min(texColor.g, texColor.b)) -\r
                  max(texColor.r, max(texColor.g, texColor.b));\r
  // SDF\r
  median = min(median, texColor.a);\r
\r
  float screenPxDistance = uFWidth * (median - 0.5);\r
  float alpha = clamp(screenPxDistance + 0.5, 0.0, 1.0);\r
\r
  // NPM Textures, NPM outputs\r
  gl_FragColor = vec4(uColor.rgb, uColor.a * alpha);\r
\r
}\r
`,dre=`// Mesh material default fragment\r
attribute vec2 aVertexPosition;\r
attribute vec2 aTextureCoord;\r
\r
uniform mat3 projectionMatrix;\r
uniform mat3 translationMatrix;\r
uniform mat3 uTextureMatrix;\r
\r
varying vec2 vTextureCoord;\r
\r
void main(void)\r
{\r
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\r
\r
    vTextureCoord = (uTextureMatrix * vec3(aTextureCoord, 1.0)).xy;\r
}\r
`,pre=[],mre=[],AI=[],vre=function(e){sre(t,e);function t(r,n){n===void 0&&(n={});var i=e.call(this)||this;i._tint=16777215;var o=Object.assign({},t.styleDefaults,n),s=o.align,a=o.tint,l=o.maxWidth,u=o.letterSpacing,c=o.fontName,f=o.fontSize;if(!bc.available[c])throw new Error('Missing BitmapFont "'+c+'"');return i._activePagesMeshData=[],i._textWidth=0,i._textHeight=0,i._align=s,i._tint=a,i._fontName=c,i._fontSize=f||bc.available[c].size,i.text=r,i._maxWidth=l,i._maxLineHeight=0,i._letterSpacing=u,i._anchor=new Yl(function(){i.dirty=!0},i,0,0),i._roundPixels=We.ROUND_PIXELS,i.dirty=!0,i._resolution=We.RESOLUTION,i._autoResolution=!0,i._textureCache={},i}return t.prototype.updateText=function(){for(var r,n=bc.available[this._fontName],i=this._fontSize/n.size,o=new Gt,s=[],a=[],l=[],u=this._text.replace(/(?:\r\n|\r)/g,`
`)||" ",c=i7(u),f=this._maxWidth*n.size/this._fontSize,p=n.distanceFieldType==="none"?pre:mre,v=null,g=0,b=0,_=0,w=-1,x=0,T=0,I=0,R=0,E=0;E<c.length;E++){var O=c[E],P=h0(O);if(/(?:\s)/.test(O)&&(w=E,x=g,R++),O==="\r"||O===`
`){a.push(g),l.push(-1),b=Math.max(b,g),++_,++T,o.x=0,o.y+=n.lineHeight,v=null,R=0;continue}var N=n.chars[P];if(!!N){v&&N.kerning[v]&&(o.x+=N.kerning[v]);var A=AI.pop()||{texture:et.EMPTY,line:0,charCode:0,prevSpaces:0,position:new Gt};A.texture=N.texture,A.line=_,A.charCode=P,A.position.x=o.x+N.xOffset+this._letterSpacing/2,A.position.y=o.y+N.yOffset,A.prevSpaces=R,s.push(A),g=A.position.x+Math.max(N.xAdvance,N.texture.orig.width),o.x+=N.xAdvance+this._letterSpacing,I=Math.max(I,N.yOffset+N.texture.height),v=P,w!==-1&&f>0&&o.x>f&&(++T,zs(s,1+w-T,1+E-w),E=w,w=-1,a.push(x),l.push(s.length>0?s[s.length-1].prevSpaces:0),b=Math.max(b,x),_++,o.x=0,o.y+=n.lineHeight,v=null,R=0)}}var j=c[c.length-1];j!=="\r"&&j!==`
`&&(/(?:\s)/.test(j)&&(g=x),a.push(g),b=Math.max(b,g),l.push(-1));for(var X=[],E=0;E<=_;E++){var B=0;this._align==="right"?B=b-a[E]:this._align==="center"?B=(b-a[E])/2:this._align==="justify"&&(B=l[E]<0?0:(b-a[E])/l[E]),X.push(B)}for(var ae=s.length,Y={},K=[],me=this._activePagesMeshData,E=0;E<me.length;E++)p.push(me[E]);for(var E=0;E<ae;E++){var ue=s[E].texture,ie=ue.baseTexture.uid;if(!Y[ie]){var Q=p.pop();if(!Q){var ee=new Wy,W=void 0,te=void 0;n.distanceFieldType==="none"?(W=new ip(et.EMPTY),te=Ze.NORMAL):(W=new ip(et.EMPTY,{program:Oh.from(dre,fre),uniforms:{uFWidth:0}}),te=Ze.NORMAL_NPM);var ye=new np(ee,W);ye.blendMode=te,Q={index:0,indexCount:0,vertexCount:0,uvsCount:0,total:0,mesh:ye,vertices:null,uvs:null,indices:null}}Q.index=0,Q.indexCount=0,Q.vertexCount=0,Q.uvsCount=0,Q.total=0;var Ce=this._textureCache;Ce[ie]=Ce[ie]||new et(ue.baseTexture),Q.mesh.texture=Ce[ie],Q.mesh.tint=this._tint,K.push(Q),Y[ie]=Q}Y[ie].total++}for(var E=0;E<me.length;E++)K.indexOf(me[E])===-1&&this.removeChild(me[E].mesh);for(var E=0;E<K.length;E++)K[E].mesh.parent!==this&&this.addChild(K[E].mesh);this._activePagesMeshData=K;for(var E in Y){var Q=Y[E],Ie=Q.total;if(!(((r=Q.indices)===null||r===void 0?void 0:r.length)>6*Ie)||Q.vertices.length<np.BATCHABLE_SIZE*2)Q.vertices=new Float32Array(4*2*Ie),Q.uvs=new Float32Array(4*2*Ie),Q.indices=new Uint16Array(6*Ie);else for(var Ye=Q.total,de=Q.vertices,F=Ye*4*2;F<de.length;F++)de[F]=0;Q.mesh.size=6*Ie}for(var E=0;E<ae;E++){var O=s[E],$=O.position.x+X[O.line]*(this._align==="justify"?O.prevSpaces:1);this._roundPixels&&($=Math.round($));var q=$*i,pe=O.position.y*i,ue=O.texture,le=Y[ue.baseTexture.uid],Ee=ue.frame,Pe=ue._uvs,Oe=le.index++;le.indices[Oe*6+0]=0+Oe*4,le.indices[Oe*6+1]=1+Oe*4,le.indices[Oe*6+2]=2+Oe*4,le.indices[Oe*6+3]=0+Oe*4,le.indices[Oe*6+4]=2+Oe*4,le.indices[Oe*6+5]=3+Oe*4,le.vertices[Oe*8+0]=q,le.vertices[Oe*8+1]=pe,le.vertices[Oe*8+2]=q+Ee.width*i,le.vertices[Oe*8+3]=pe,le.vertices[Oe*8+4]=q+Ee.width*i,le.vertices[Oe*8+5]=pe+Ee.height*i,le.vertices[Oe*8+6]=q,le.vertices[Oe*8+7]=pe+Ee.height*i,le.uvs[Oe*8+0]=Pe.x0,le.uvs[Oe*8+1]=Pe.y0,le.uvs[Oe*8+2]=Pe.x1,le.uvs[Oe*8+3]=Pe.y1,le.uvs[Oe*8+4]=Pe.x2,le.uvs[Oe*8+5]=Pe.y2,le.uvs[Oe*8+6]=Pe.x3,le.uvs[Oe*8+7]=Pe.y3}this._textWidth=b*i,this._textHeight=(o.y+n.lineHeight)*i;for(var E in Y){var Q=Y[E];if(this.anchor.x!==0||this.anchor.y!==0)for(var it=0,Et=this._textWidth*this.anchor.x,Ot=this._textHeight*this.anchor.y,Yt=0;Yt<Q.total;Yt++)Q.vertices[it++]-=Et,Q.vertices[it++]-=Ot,Q.vertices[it++]-=Et,Q.vertices[it++]-=Ot,Q.vertices[it++]-=Et,Q.vertices[it++]-=Ot,Q.vertices[it++]-=Et,Q.vertices[it++]-=Ot;this._maxLineHeight=I*i;var Kt=Q.mesh.geometry.getBuffer("aVertexPosition"),xt=Q.mesh.geometry.getBuffer("aTextureCoord"),Gr=Q.mesh.geometry.getIndex();Kt.data=Q.vertices,xt.data=Q.uvs,Gr.data=Q.indices,Kt.update(),xt.update(),Gr.update()}for(var E=0;E<s.length;E++)AI.push(s[E])},t.prototype.updateTransform=function(){this.validate(),this.containerUpdateTransform()},t.prototype._render=function(r){this._autoResolution&&this._resolution!==r.resolution&&(this._resolution=r.resolution,this.dirty=!0);var n=bc.available[this._fontName],i=n.distanceFieldRange,o=n.distanceFieldType,s=n.size;if(o!=="none")for(var a=this.worldTransform,l=a.a,u=a.b,c=a.c,f=a.d,p=Math.sqrt(l*l+u*u),v=Math.sqrt(c*c+f*f),g=(Math.abs(p)+Math.abs(v))/2,b=this._fontSize/s,_=0,w=this._activePagesMeshData;_<w.length;_++){var x=w[_];x.mesh.shader.uniforms.uFWidth=g*i*b*this._resolution}e.prototype._render.call(this,r)},t.prototype.getLocalBounds=function(){return this.validate(),e.prototype.getLocalBounds.call(this)},t.prototype.validate=function(){this.dirty&&(this.updateText(),this.dirty=!1)},Object.defineProperty(t.prototype,"tint",{get:function(){return this._tint},set:function(r){if(this._tint!==r){this._tint=r;for(var n=0;n<this._activePagesMeshData.length;n++)this._activePagesMeshData[n].mesh.tint=r}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"align",{get:function(){return this._align},set:function(r){this._align!==r&&(this._align=r,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fontName",{get:function(){return this._fontName},set:function(r){if(!bc.available[r])throw new Error('Missing BitmapFont "'+r+'"');this._fontName!==r&&(this._fontName=r,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fontSize",{get:function(){return this._fontSize},set:function(r){this._fontSize!==r&&(this._fontSize=r,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"anchor",{get:function(){return this._anchor},set:function(r){typeof r=="number"?this._anchor.set(r):this._anchor.copyFrom(r)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"text",{get:function(){return this._text},set:function(r){r=String(r==null?"":r),this._text!==r&&(this._text=r,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"maxWidth",{get:function(){return this._maxWidth},set:function(r){this._maxWidth!==r&&(this._maxWidth=r,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"maxLineHeight",{get:function(){return this.validate(),this._maxLineHeight},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"textWidth",{get:function(){return this.validate(),this._textWidth},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"letterSpacing",{get:function(){return this._letterSpacing},set:function(r){this._letterSpacing!==r&&(this._letterSpacing=r,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"roundPixels",{get:function(){return this._roundPixels},set:function(r){r!==this._roundPixels&&(this._roundPixels=r,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"textHeight",{get:function(){return this.validate(),this._textHeight},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"resolution",{get:function(){return this._resolution},set:function(r){this._autoResolution=!1,this._resolution!==r&&(this._resolution=r,this.dirty=!0)},enumerable:!1,configurable:!0}),t.prototype.destroy=function(r){var n=this._textureCache;for(var i in n){var o=n[i];o.destroy(),delete n[i]}this._textureCache=null,e.prototype.destroy.call(this,r)},t.styleDefaults={align:"left",tint:16777215,maxWidth:0,letterSpacing:0},t}(Pi),gre=function(){function e(){}return e.add=function(){wr.setExtensionXhrType("fnt",wr.XHR_RESPONSE_TYPE.TEXT)},e.use=function(t,r){var n=n7(t.data);if(!n){r();return}for(var i=e.getBaseUrl(this,t),o=n.parse(t.data),s={},a=function(b){s[b.metadata.pageFile]=b.texture,Object.keys(s).length===o.page.length&&(t.bitmapFont=bc.install(o,s,!0),r())},l=0;l<o.page.length;++l){var u=o.page[l].file,c=i+u,f=!1;for(var p in this.resources){var v=this.resources[p];if(v.url===c){v.metadata.pageFile=u,v.texture?a(v):v.onAfterMiddleware.add(a),f=!0;break}}if(!f){var g={crossOrigin:t.crossOrigin,loadType:wr.LOAD_TYPE.IMAGE,metadata:Object.assign({pageFile:u},t.metadata.imageMetadata),parentResource:t};this.add(c,g,a)}}},e.getBaseUrl=function(t,r){var n=r.isDataUrl?"":e.dirname(r.url);return r.isDataUrl&&(n==="."&&(n=""),t.baseUrl&&n&&t.baseUrl.charAt(t.baseUrl.length-1)==="/"&&(n+="/")),n=n.replace(t.baseUrl,""),n&&n.charAt(n.length-1)!=="/"&&(n+="/"),n},e.dirname=function(t){var r=t.replace(/\\/g,"/").replace(/\/$/,"").replace(/\/[^\/]*$/,"");return r===t?".":r===""?"/":r},e}();/*!
 * @pixi/filter-alpha - v6.4.2
 * Compiled Thu, 02 Jun 2022 15:39:26 UTC
 *
 * @pixi/filter-alpha is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var sx=function(e,t){return sx=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])},sx(e,t)};function yre(e,t){sx(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var _re=`varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform float uAlpha;

void main(void)
{
   gl_FragColor = texture2D(uSampler, vTextureCoord) * uAlpha;
}
`;(function(e){yre(t,e);function t(r){r===void 0&&(r=1);var n=e.call(this,Tee,_re,{uAlpha:1})||this;return n.alpha=r,n}return Object.defineProperty(t.prototype,"alpha",{get:function(){return this.uniforms.uAlpha},set:function(r){this.uniforms.uAlpha=r},enumerable:!1,configurable:!0}),t})(yl);/*!
 * @pixi/filter-blur - v6.4.2
 * Compiled Thu, 02 Jun 2022 15:39:26 UTC
 *
 * @pixi/filter-blur is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var ax=function(e,t){return ax=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])},ax(e,t)};function o7(e,t){ax(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var bre=`
    attribute vec2 aVertexPosition;

    uniform mat3 projectionMatrix;

    uniform float strength;

    varying vec2 vBlurTexCoords[%size%];

    uniform vec4 inputSize;
    uniform vec4 outputFrame;

    vec4 filterVertexPosition( void )
    {
        vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

        return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
    }

    vec2 filterTextureCoord( void )
    {
        return aVertexPosition * (outputFrame.zw * inputSize.zw);
    }

    void main(void)
    {
        gl_Position = filterVertexPosition();

        vec2 textureCoord = filterTextureCoord();
        %blur%
    }`;function wre(e,t){var r=Math.ceil(e/2),n=bre,i="",o;t?o="vBlurTexCoords[%index%] =  textureCoord + vec2(%sampleIndex% * strength, 0.0);":o="vBlurTexCoords[%index%] =  textureCoord + vec2(0.0, %sampleIndex% * strength);";for(var s=0;s<e;s++){var a=o.replace("%index%",s.toString());a=a.replace("%sampleIndex%",s-(r-1)+".0"),i+=a,i+=`
`}return n=n.replace("%blur%",i),n=n.replace("%size%",e.toString()),n}var xre={5:[.153388,.221461,.250301],7:[.071303,.131514,.189879,.214607],9:[.028532,.067234,.124009,.179044,.20236],11:[.0093,.028002,.065984,.121703,.175713,.198596],13:[.002406,.009255,.027867,.065666,.121117,.174868,.197641],15:[489e-6,.002403,.009246,.02784,.065602,.120999,.174697,.197448]},Tre=["varying vec2 vBlurTexCoords[%size%];","uniform sampler2D uSampler;","void main(void)","{","    gl_FragColor = vec4(0.0);","    %blur%","}"].join(`
`);function Sre(e){for(var t=xre[e],r=t.length,n=Tre,i="",o="gl_FragColor += texture2D(uSampler, vBlurTexCoords[%index%]) * %value%;",s,a=0;a<e;a++){var l=o.replace("%index%",a.toString());s=a,a>=r&&(s=e-a-1),l=l.replace("%value%",t[s].toString()),i+=l,i+=`
`}return n=n.replace("%blur%",i),n=n.replace("%size%",e.toString()),n}/*!
 * @pixi/constants - v6.4.2
 * Compiled Thu, 02 Jun 2022 15:39:26 UTC
 *
 * @pixi/constants is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var RI;(function(e){e[e.WEBGL_LEGACY=0]="WEBGL_LEGACY",e[e.WEBGL=1]="WEBGL",e[e.WEBGL2=2]="WEBGL2"})(RI||(RI={}));var kI;(function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.WEBGL=1]="WEBGL",e[e.CANVAS=2]="CANVAS"})(kI||(kI={}));var OI;(function(e){e[e.COLOR=16384]="COLOR",e[e.DEPTH=256]="DEPTH",e[e.STENCIL=1024]="STENCIL"})(OI||(OI={}));var LI;(function(e){e[e.NORMAL=0]="NORMAL",e[e.ADD=1]="ADD",e[e.MULTIPLY=2]="MULTIPLY",e[e.SCREEN=3]="SCREEN",e[e.OVERLAY=4]="OVERLAY",e[e.DARKEN=5]="DARKEN",e[e.LIGHTEN=6]="LIGHTEN",e[e.COLOR_DODGE=7]="COLOR_DODGE",e[e.COLOR_BURN=8]="COLOR_BURN",e[e.HARD_LIGHT=9]="HARD_LIGHT",e[e.SOFT_LIGHT=10]="SOFT_LIGHT",e[e.DIFFERENCE=11]="DIFFERENCE",e[e.EXCLUSION=12]="EXCLUSION",e[e.HUE=13]="HUE",e[e.SATURATION=14]="SATURATION",e[e.COLOR=15]="COLOR",e[e.LUMINOSITY=16]="LUMINOSITY",e[e.NORMAL_NPM=17]="NORMAL_NPM",e[e.ADD_NPM=18]="ADD_NPM",e[e.SCREEN_NPM=19]="SCREEN_NPM",e[e.NONE=20]="NONE",e[e.SRC_OVER=0]="SRC_OVER",e[e.SRC_IN=21]="SRC_IN",e[e.SRC_OUT=22]="SRC_OUT",e[e.SRC_ATOP=23]="SRC_ATOP",e[e.DST_OVER=24]="DST_OVER",e[e.DST_IN=25]="DST_IN",e[e.DST_OUT=26]="DST_OUT",e[e.DST_ATOP=27]="DST_ATOP",e[e.ERASE=26]="ERASE",e[e.SUBTRACT=28]="SUBTRACT",e[e.XOR=29]="XOR"})(LI||(LI={}));var UI;(function(e){e[e.POINTS=0]="POINTS",e[e.LINES=1]="LINES",e[e.LINE_LOOP=2]="LINE_LOOP",e[e.LINE_STRIP=3]="LINE_STRIP",e[e.TRIANGLES=4]="TRIANGLES",e[e.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",e[e.TRIANGLE_FAN=6]="TRIANGLE_FAN"})(UI||(UI={}));var FI;(function(e){e[e.RGBA=6408]="RGBA",e[e.RGB=6407]="RGB",e[e.RG=33319]="RG",e[e.RED=6403]="RED",e[e.RGBA_INTEGER=36249]="RGBA_INTEGER",e[e.RGB_INTEGER=36248]="RGB_INTEGER",e[e.RG_INTEGER=33320]="RG_INTEGER",e[e.RED_INTEGER=36244]="RED_INTEGER",e[e.ALPHA=6406]="ALPHA",e[e.LUMINANCE=6409]="LUMINANCE",e[e.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",e[e.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",e[e.DEPTH_STENCIL=34041]="DEPTH_STENCIL"})(FI||(FI={}));var MI;(function(e){e[e.TEXTURE_2D=3553]="TEXTURE_2D",e[e.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",e[e.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",e[e.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",e[e.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",e[e.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",e[e.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",e[e.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",e[e.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z"})(MI||(MI={}));var BI;(function(e){e[e.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",e[e.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",e[e.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",e[e.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",e[e.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",e[e.UNSIGNED_INT=5125]="UNSIGNED_INT",e[e.UNSIGNED_INT_10F_11F_11F_REV=35899]="UNSIGNED_INT_10F_11F_11F_REV",e[e.UNSIGNED_INT_2_10_10_10_REV=33640]="UNSIGNED_INT_2_10_10_10_REV",e[e.UNSIGNED_INT_24_8=34042]="UNSIGNED_INT_24_8",e[e.UNSIGNED_INT_5_9_9_9_REV=35902]="UNSIGNED_INT_5_9_9_9_REV",e[e.BYTE=5120]="BYTE",e[e.SHORT=5122]="SHORT",e[e.INT=5124]="INT",e[e.FLOAT=5126]="FLOAT",e[e.FLOAT_32_UNSIGNED_INT_24_8_REV=36269]="FLOAT_32_UNSIGNED_INT_24_8_REV",e[e.HALF_FLOAT=36193]="HALF_FLOAT"})(BI||(BI={}));var DI;(function(e){e[e.FLOAT=0]="FLOAT",e[e.INT=1]="INT",e[e.UINT=2]="UINT"})(DI||(DI={}));var GI;(function(e){e[e.NEAREST=0]="NEAREST",e[e.LINEAR=1]="LINEAR"})(GI||(GI={}));var jI;(function(e){e[e.CLAMP=33071]="CLAMP",e[e.REPEAT=10497]="REPEAT",e[e.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT"})(jI||(jI={}));var $I;(function(e){e[e.OFF=0]="OFF",e[e.POW2=1]="POW2",e[e.ON=2]="ON",e[e.ON_MANUAL=3]="ON_MANUAL"})($I||($I={}));var HI;(function(e){e[e.NPM=0]="NPM",e[e.UNPACK=1]="UNPACK",e[e.PMA=2]="PMA",e[e.NO_PREMULTIPLIED_ALPHA=0]="NO_PREMULTIPLIED_ALPHA",e[e.PREMULTIPLY_ON_UPLOAD=1]="PREMULTIPLY_ON_UPLOAD",e[e.PREMULTIPLY_ALPHA=2]="PREMULTIPLY_ALPHA",e[e.PREMULTIPLIED_ALPHA=2]="PREMULTIPLIED_ALPHA"})(HI||(HI={}));var op;(function(e){e[e.NO=0]="NO",e[e.YES=1]="YES",e[e.AUTO=2]="AUTO",e[e.BLEND=0]="BLEND",e[e.CLEAR=1]="CLEAR",e[e.BLIT=2]="BLIT"})(op||(op={}));var zI;(function(e){e[e.AUTO=0]="AUTO",e[e.MANUAL=1]="MANUAL"})(zI||(zI={}));var VI;(function(e){e.LOW="lowp",e.MEDIUM="mediump",e.HIGH="highp"})(VI||(VI={}));var XI;(function(e){e[e.NONE=0]="NONE",e[e.SCISSOR=1]="SCISSOR",e[e.STENCIL=2]="STENCIL",e[e.SPRITE=3]="SPRITE"})(XI||(XI={}));var WI;(function(e){e[e.NONE=0]="NONE",e[e.LOW=2]="LOW",e[e.MEDIUM=4]="MEDIUM",e[e.HIGH=8]="HIGH"})(WI||(WI={}));var YI;(function(e){e[e.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",e[e.ARRAY_BUFFER=34962]="ARRAY_BUFFER",e[e.UNIFORM_BUFFER=35345]="UNIFORM_BUFFER"})(YI||(YI={}));var KI=function(e){o7(t,e);function t(r,n,i,o,s){n===void 0&&(n=8),i===void 0&&(i=4),o===void 0&&(o=We.FILTER_RESOLUTION),s===void 0&&(s=5);var a=this,l=wre(s,r),u=Sre(s);return a=e.call(this,l,u)||this,a.horizontal=r,a.resolution=o,a._quality=0,a.quality=i,a.blur=n,a}return t.prototype.apply=function(r,n,i,o){if(i?this.horizontal?this.uniforms.strength=1/i.width*(i.width/n.width):this.uniforms.strength=1/i.height*(i.height/n.height):this.horizontal?this.uniforms.strength=1/r.renderer.width*(r.renderer.width/n.width):this.uniforms.strength=1/r.renderer.height*(r.renderer.height/n.height),this.uniforms.strength*=this.strength,this.uniforms.strength/=this.passes,this.passes===1)r.applyFilter(this,n,i,o);else{var s=r.getFilterTexture(),a=r.renderer,l=n,u=s;this.state.blend=!1,r.applyFilter(this,l,u,op.CLEAR);for(var c=1;c<this.passes-1;c++){r.bindAndClear(l,op.BLIT),this.uniforms.uSampler=u;var f=u;u=l,l=f,a.shader.bind(this),a.geometry.draw(5)}this.state.blend=!0,r.applyFilter(this,u,i,o),r.returnFilterTexture(s)}},Object.defineProperty(t.prototype,"blur",{get:function(){return this.strength},set:function(r){this.padding=1+Math.abs(r)*2,this.strength=r},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"quality",{get:function(){return this._quality},set:function(r){this._quality=r,this.passes=r},enumerable:!1,configurable:!0}),t}(yl);(function(e){o7(t,e);function t(r,n,i,o){r===void 0&&(r=8),n===void 0&&(n=4),i===void 0&&(i=We.FILTER_RESOLUTION),o===void 0&&(o=5);var s=e.call(this)||this;return s.blurXFilter=new KI(!0,r,n,i,o),s.blurYFilter=new KI(!1,r,n,i,o),s.resolution=i,s.quality=n,s.blur=r,s.repeatEdgePixels=!1,s}return t.prototype.apply=function(r,n,i,o){var s=Math.abs(this.blurXFilter.strength),a=Math.abs(this.blurYFilter.strength);if(s&&a){var l=r.getFilterTexture();this.blurXFilter.apply(r,n,l,op.CLEAR),this.blurYFilter.apply(r,l,i,o),r.returnFilterTexture(l)}else a?this.blurYFilter.apply(r,n,i,o):this.blurXFilter.apply(r,n,i,o)},t.prototype.updatePadding=function(){this._repeatEdgePixels?this.padding=0:this.padding=Math.max(Math.abs(this.blurXFilter.strength),Math.abs(this.blurYFilter.strength))*2},Object.defineProperty(t.prototype,"blur",{get:function(){return this.blurXFilter.blur},set:function(r){this.blurXFilter.blur=this.blurYFilter.blur=r,this.updatePadding()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"quality",{get:function(){return this.blurXFilter.quality},set:function(r){this.blurXFilter.quality=this.blurYFilter.quality=r},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"blurX",{get:function(){return this.blurXFilter.blur},set:function(r){this.blurXFilter.blur=r,this.updatePadding()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"blurY",{get:function(){return this.blurYFilter.blur},set:function(r){this.blurYFilter.blur=r,this.updatePadding()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"blendMode",{get:function(){return this.blurYFilter.blendMode},set:function(r){this.blurYFilter.blendMode=r},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"repeatEdgePixels",{get:function(){return this._repeatEdgePixels},set:function(r){this._repeatEdgePixels=r,this.updatePadding()},enumerable:!1,configurable:!0}),t})(yl);/*!
 * @pixi/filter-color-matrix - v6.4.2
 * Compiled Thu, 02 Jun 2022 15:39:26 UTC
 *
 * @pixi/filter-color-matrix is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var lx=function(e,t){return lx=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])},lx(e,t)};function Ere(e,t){lx(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var Cre=`varying vec2 vTextureCoord;
uniform sampler2D uSampler;
uniform float m[20];
uniform float uAlpha;

void main(void)
{
    vec4 c = texture2D(uSampler, vTextureCoord);

    if (uAlpha == 0.0) {
        gl_FragColor = c;
        return;
    }

    // Un-premultiply alpha before applying the color matrix. See issue #3539.
    if (c.a > 0.0) {
      c.rgb /= c.a;
    }

    vec4 result;

    result.r = (m[0] * c.r);
        result.r += (m[1] * c.g);
        result.r += (m[2] * c.b);
        result.r += (m[3] * c.a);
        result.r += m[4];

    result.g = (m[5] * c.r);
        result.g += (m[6] * c.g);
        result.g += (m[7] * c.b);
        result.g += (m[8] * c.a);
        result.g += m[9];

    result.b = (m[10] * c.r);
       result.b += (m[11] * c.g);
       result.b += (m[12] * c.b);
       result.b += (m[13] * c.a);
       result.b += m[14];

    result.a = (m[15] * c.r);
       result.a += (m[16] * c.g);
       result.a += (m[17] * c.b);
       result.a += (m[18] * c.a);
       result.a += m[19];

    vec3 rgb = mix(c.rgb, result.rgb, uAlpha);

    // Premultiply alpha again.
    rgb *= result.a;

    gl_FragColor = vec4(rgb, result.a);
}
`,qI=function(e){Ere(t,e);function t(){var r=this,n={m:new Float32Array([1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0]),uAlpha:1};return r=e.call(this,$O,Cre,n)||this,r.alpha=1,r}return t.prototype._loadMatrix=function(r,n){n===void 0&&(n=!1);var i=r;n&&(this._multiply(i,this.uniforms.m,r),i=this._colorMatrix(i)),this.uniforms.m=i},t.prototype._multiply=function(r,n,i){return r[0]=n[0]*i[0]+n[1]*i[5]+n[2]*i[10]+n[3]*i[15],r[1]=n[0]*i[1]+n[1]*i[6]+n[2]*i[11]+n[3]*i[16],r[2]=n[0]*i[2]+n[1]*i[7]+n[2]*i[12]+n[3]*i[17],r[3]=n[0]*i[3]+n[1]*i[8]+n[2]*i[13]+n[3]*i[18],r[4]=n[0]*i[4]+n[1]*i[9]+n[2]*i[14]+n[3]*i[19]+n[4],r[5]=n[5]*i[0]+n[6]*i[5]+n[7]*i[10]+n[8]*i[15],r[6]=n[5]*i[1]+n[6]*i[6]+n[7]*i[11]+n[8]*i[16],r[7]=n[5]*i[2]+n[6]*i[7]+n[7]*i[12]+n[8]*i[17],r[8]=n[5]*i[3]+n[6]*i[8]+n[7]*i[13]+n[8]*i[18],r[9]=n[5]*i[4]+n[6]*i[9]+n[7]*i[14]+n[8]*i[19]+n[9],r[10]=n[10]*i[0]+n[11]*i[5]+n[12]*i[10]+n[13]*i[15],r[11]=n[10]*i[1]+n[11]*i[6]+n[12]*i[11]+n[13]*i[16],r[12]=n[10]*i[2]+n[11]*i[7]+n[12]*i[12]+n[13]*i[17],r[13]=n[10]*i[3]+n[11]*i[8]+n[12]*i[13]+n[13]*i[18],r[14]=n[10]*i[4]+n[11]*i[9]+n[12]*i[14]+n[13]*i[19]+n[14],r[15]=n[15]*i[0]+n[16]*i[5]+n[17]*i[10]+n[18]*i[15],r[16]=n[15]*i[1]+n[16]*i[6]+n[17]*i[11]+n[18]*i[16],r[17]=n[15]*i[2]+n[16]*i[7]+n[17]*i[12]+n[18]*i[17],r[18]=n[15]*i[3]+n[16]*i[8]+n[17]*i[13]+n[18]*i[18],r[19]=n[15]*i[4]+n[16]*i[9]+n[17]*i[14]+n[18]*i[19]+n[19],r},t.prototype._colorMatrix=function(r){var n=new Float32Array(r);return n[4]/=255,n[9]/=255,n[14]/=255,n[19]/=255,n},t.prototype.brightness=function(r,n){var i=[r,0,0,0,0,0,r,0,0,0,0,0,r,0,0,0,0,0,1,0];this._loadMatrix(i,n)},t.prototype.tint=function(r,n){var i=r>>16&255,o=r>>8&255,s=r&255,a=[i/255,0,0,0,0,0,o/255,0,0,0,0,0,s/255,0,0,0,0,0,1,0];this._loadMatrix(a,n)},t.prototype.greyscale=function(r,n){var i=[r,r,r,0,0,r,r,r,0,0,r,r,r,0,0,0,0,0,1,0];this._loadMatrix(i,n)},t.prototype.blackAndWhite=function(r){var n=[.3,.6,.1,0,0,.3,.6,.1,0,0,.3,.6,.1,0,0,0,0,0,1,0];this._loadMatrix(n,r)},t.prototype.hue=function(r,n){r=(r||0)/180*Math.PI;var i=Math.cos(r),o=Math.sin(r),s=Math.sqrt,a=1/3,l=s(a),u=i+(1-i)*a,c=a*(1-i)-l*o,f=a*(1-i)+l*o,p=a*(1-i)+l*o,v=i+a*(1-i),g=a*(1-i)-l*o,b=a*(1-i)-l*o,_=a*(1-i)+l*o,w=i+a*(1-i),x=[u,c,f,0,0,p,v,g,0,0,b,_,w,0,0,0,0,0,1,0];this._loadMatrix(x,n)},t.prototype.contrast=function(r,n){var i=(r||0)+1,o=-.5*(i-1),s=[i,0,0,0,o,0,i,0,0,o,0,0,i,0,o,0,0,0,1,0];this._loadMatrix(s,n)},t.prototype.saturate=function(r,n){r===void 0&&(r=0);var i=r*2/3+1,o=(i-1)*-.5,s=[i,o,o,0,0,o,i,o,0,0,o,o,i,0,0,0,0,0,1,0];this._loadMatrix(s,n)},t.prototype.desaturate=function(){this.saturate(-1)},t.prototype.negative=function(r){var n=[-1,0,0,1,0,0,-1,0,1,0,0,0,-1,1,0,0,0,0,1,0];this._loadMatrix(n,r)},t.prototype.sepia=function(r){var n=[.393,.7689999,.18899999,0,0,.349,.6859999,.16799999,0,0,.272,.5339999,.13099999,0,0,0,0,0,1,0];this._loadMatrix(n,r)},t.prototype.technicolor=function(r){var n=[1.9125277891456083,-.8545344976951645,-.09155508482755585,0,11.793603434377337,-.3087833385928097,1.7658908555458428,-.10601743074722245,0,-70.35205161461398,-.231103377548616,-.7501899197440212,1.847597816108189,0,30.950940869491138,0,0,0,1,0];this._loadMatrix(n,r)},t.prototype.polaroid=function(r){var n=[1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0];this._loadMatrix(n,r)},t.prototype.toBGR=function(r){var n=[0,0,1,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,1,0];this._loadMatrix(n,r)},t.prototype.kodachrome=function(r){var n=[1.1285582396593525,-.3967382283601348,-.03992559172921793,0,63.72958762196502,-.16404339962244616,1.0835251566291304,-.05498805115633132,0,24.732407896706203,-.16786010706155763,-.5603416277695248,1.6014850761964943,0,35.62982807460946,0,0,0,1,0];this._loadMatrix(n,r)},t.prototype.browni=function(r){var n=[.5997023498159715,.34553243048391263,-.2708298674538042,0,47.43192855600873,-.037703249837783157,.8609577587992641,.15059552388459913,0,-36.96841498319127,.24113635128153335,-.07441037908422492,.44972182064877153,0,-7.562075277591283,0,0,0,1,0];this._loadMatrix(n,r)},t.prototype.vintage=function(r){var n=[.6279345635605994,.3202183420819367,-.03965408211312453,0,9.651285835294123,.02578397704808868,.6441188644374771,.03259127616149294,0,7.462829176470591,.0466055556782719,-.0851232987247891,.5241648018700465,0,5.159190588235296,0,0,0,1,0];this._loadMatrix(n,r)},t.prototype.colorTone=function(r,n,i,o,s){r=r||.2,n=n||.15,i=i||16770432,o=o||3375104;var a=(i>>16&255)/255,l=(i>>8&255)/255,u=(i&255)/255,c=(o>>16&255)/255,f=(o>>8&255)/255,p=(o&255)/255,v=[.3,.59,.11,0,0,a,l,u,r,0,c,f,p,n,0,a-c,l-f,u-p,0,0];this._loadMatrix(v,s)},t.prototype.night=function(r,n){r=r||.1;var i=[r*-2,-r,0,0,0,-r,0,r,0,0,0,r,r*2,0,0,0,0,0,1,0];this._loadMatrix(i,n)},t.prototype.predator=function(r,n){var i=[11.224130630493164*r,-4.794486999511719*r,-2.8746118545532227*r,0*r,.40342438220977783*r,-3.6330697536468506*r,9.193157196044922*r,-2.951810836791992*r,0*r,-1.316135048866272*r,-3.2184197902679443*r,-4.2375030517578125*r,7.476448059082031*r,0*r,.8044459223747253*r,0,0,0,1,0];this._loadMatrix(i,n)},t.prototype.lsd=function(r){var n=[2,-.4,.5,0,0,-.5,2,-.4,0,0,-.4,-.5,3,0,0,0,0,0,1,0];this._loadMatrix(n,r)},t.prototype.reset=function(){var r=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0];this._loadMatrix(r,!1)},Object.defineProperty(t.prototype,"matrix",{get:function(){return this.uniforms.m},set:function(r){this.uniforms.m=r},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"alpha",{get:function(){return this.uniforms.uAlpha},set:function(r){this.uniforms.uAlpha=r},enumerable:!1,configurable:!0}),t}(yl);qI.prototype.grayscale=qI.prototype.greyscale;/*!
 * @pixi/filter-displacement - v6.4.2
 * Compiled Thu, 02 Jun 2022 15:39:26 UTC
 *
 * @pixi/filter-displacement is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var ux=function(e,t){return ux=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])},ux(e,t)};function Ire(e,t){ux(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var Nre=`varying vec2 vFilterCoord;
varying vec2 vTextureCoord;

uniform vec2 scale;
uniform mat2 rotation;
uniform sampler2D uSampler;
uniform sampler2D mapSampler;

uniform highp vec4 inputSize;
uniform vec4 inputClamp;

void main(void)
{
  vec4 map =  texture2D(mapSampler, vFilterCoord);

  map -= 0.5;
  map.xy = scale * inputSize.zw * (rotation * map.xy);

  gl_FragColor = texture2D(uSampler, clamp(vec2(vTextureCoord.x + map.x, vTextureCoord.y + map.y), inputClamp.xy, inputClamp.zw));
}
`,Pre=`attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;
uniform mat3 filterMatrix;

varying vec2 vTextureCoord;
varying vec2 vFilterCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

vec2 filterTextureCoord( void )
{
    return aVertexPosition * (outputFrame.zw * inputSize.zw);
}

void main(void)
{
	gl_Position = filterVertexPosition();
	vTextureCoord = filterTextureCoord();
	vFilterCoord = ( filterMatrix * vec3( vTextureCoord, 1.0)  ).xy;
}
`;(function(e){Ire(t,e);function t(r,n){var i=this,o=new er;return r.renderable=!1,i=e.call(this,Pre,Nre,{mapSampler:r._texture,filterMatrix:o,scale:{x:1,y:1},rotation:new Float32Array([1,0,0,1])})||this,i.maskSprite=r,i.maskMatrix=o,n==null&&(n=20),i.scale=new Gt(n,n),i}return t.prototype.apply=function(r,n,i,o){this.uniforms.filterMatrix=r.calculateSpriteMatrix(this.maskMatrix,this.maskSprite),this.uniforms.scale.x=this.scale.x,this.uniforms.scale.y=this.scale.y;var s=this.maskSprite.worldTransform,a=Math.sqrt(s.a*s.a+s.b*s.b),l=Math.sqrt(s.c*s.c+s.d*s.d);a!==0&&l!==0&&(this.uniforms.rotation[0]=s.a/a,this.uniforms.rotation[1]=s.b/a,this.uniforms.rotation[2]=s.c/l,this.uniforms.rotation[3]=s.d/l),r.applyFilter(this,n,i,o)},Object.defineProperty(t.prototype,"map",{get:function(){return this.uniforms.mapSampler},set:function(r){this.uniforms.mapSampler=r},enumerable:!1,configurable:!0}),t})(yl);/*!
 * @pixi/filter-fxaa - v6.4.2
 * Compiled Thu, 02 Jun 2022 15:39:26 UTC
 *
 * @pixi/filter-fxaa is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var cx=function(e,t){return cx=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])},cx(e,t)};function Are(e,t){cx(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var Rre=`
attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;

varying vec2 v_rgbNW;
varying vec2 v_rgbNE;
varying vec2 v_rgbSW;
varying vec2 v_rgbSE;
varying vec2 v_rgbM;

varying vec2 vFragCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

void texcoords(vec2 fragCoord, vec2 inverseVP,
               out vec2 v_rgbNW, out vec2 v_rgbNE,
               out vec2 v_rgbSW, out vec2 v_rgbSE,
               out vec2 v_rgbM) {
    v_rgbNW = (fragCoord + vec2(-1.0, -1.0)) * inverseVP;
    v_rgbNE = (fragCoord + vec2(1.0, -1.0)) * inverseVP;
    v_rgbSW = (fragCoord + vec2(-1.0, 1.0)) * inverseVP;
    v_rgbSE = (fragCoord + vec2(1.0, 1.0)) * inverseVP;
    v_rgbM = vec2(fragCoord * inverseVP);
}

void main(void) {

   gl_Position = filterVertexPosition();

   vFragCoord = aVertexPosition * outputFrame.zw;

   texcoords(vFragCoord, inputSize.zw, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);
}
`,kre=`varying vec2 v_rgbNW;
varying vec2 v_rgbNE;
varying vec2 v_rgbSW;
varying vec2 v_rgbSE;
varying vec2 v_rgbM;

varying vec2 vFragCoord;
uniform sampler2D uSampler;
uniform highp vec4 inputSize;


/**
 Basic FXAA implementation based on the code on geeks3d.com with the
 modification that the texture2DLod stuff was removed since it's
 unsupported by WebGL.

 --

 From:
 https://github.com/mitsuhiko/webgl-meincraft

 Copyright (c) 2011 by Armin Ronacher.

 Some rights reserved.

 Redistribution and use in source and binary forms, with or without
 modification, are permitted provided that the following conditions are
 met:

 * Redistributions of source code must retain the above copyright
 notice, this list of conditions and the following disclaimer.

 * Redistributions in binary form must reproduce the above
 copyright notice, this list of conditions and the following
 disclaimer in the documentation and/or other materials provided
 with the distribution.

 * The names of the contributors may not be used to endorse or
 promote products derived from this software without specific
 prior written permission.

 THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS
 "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT
 LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR
 A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT
 OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
 SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
 LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,
 DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY
 THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
 (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE
 OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 */

#ifndef FXAA_REDUCE_MIN
#define FXAA_REDUCE_MIN   (1.0/ 128.0)
#endif
#ifndef FXAA_REDUCE_MUL
#define FXAA_REDUCE_MUL   (1.0 / 8.0)
#endif
#ifndef FXAA_SPAN_MAX
#define FXAA_SPAN_MAX     8.0
#endif

//optimized version for mobile, where dependent
//texture reads can be a bottleneck
vec4 fxaa(sampler2D tex, vec2 fragCoord, vec2 inverseVP,
          vec2 v_rgbNW, vec2 v_rgbNE,
          vec2 v_rgbSW, vec2 v_rgbSE,
          vec2 v_rgbM) {
    vec4 color;
    vec3 rgbNW = texture2D(tex, v_rgbNW).xyz;
    vec3 rgbNE = texture2D(tex, v_rgbNE).xyz;
    vec3 rgbSW = texture2D(tex, v_rgbSW).xyz;
    vec3 rgbSE = texture2D(tex, v_rgbSE).xyz;
    vec4 texColor = texture2D(tex, v_rgbM);
    vec3 rgbM  = texColor.xyz;
    vec3 luma = vec3(0.299, 0.587, 0.114);
    float lumaNW = dot(rgbNW, luma);
    float lumaNE = dot(rgbNE, luma);
    float lumaSW = dot(rgbSW, luma);
    float lumaSE = dot(rgbSE, luma);
    float lumaM  = dot(rgbM,  luma);
    float lumaMin = min(lumaM, min(min(lumaNW, lumaNE), min(lumaSW, lumaSE)));
    float lumaMax = max(lumaM, max(max(lumaNW, lumaNE), max(lumaSW, lumaSE)));

    mediump vec2 dir;
    dir.x = -((lumaNW + lumaNE) - (lumaSW + lumaSE));
    dir.y =  ((lumaNW + lumaSW) - (lumaNE + lumaSE));

    float dirReduce = max((lumaNW + lumaNE + lumaSW + lumaSE) *
                          (0.25 * FXAA_REDUCE_MUL), FXAA_REDUCE_MIN);

    float rcpDirMin = 1.0 / (min(abs(dir.x), abs(dir.y)) + dirReduce);
    dir = min(vec2(FXAA_SPAN_MAX, FXAA_SPAN_MAX),
              max(vec2(-FXAA_SPAN_MAX, -FXAA_SPAN_MAX),
                  dir * rcpDirMin)) * inverseVP;

    vec3 rgbA = 0.5 * (
                       texture2D(tex, fragCoord * inverseVP + dir * (1.0 / 3.0 - 0.5)).xyz +
                       texture2D(tex, fragCoord * inverseVP + dir * (2.0 / 3.0 - 0.5)).xyz);
    vec3 rgbB = rgbA * 0.5 + 0.25 * (
                                     texture2D(tex, fragCoord * inverseVP + dir * -0.5).xyz +
                                     texture2D(tex, fragCoord * inverseVP + dir * 0.5).xyz);

    float lumaB = dot(rgbB, luma);
    if ((lumaB < lumaMin) || (lumaB > lumaMax))
        color = vec4(rgbA, texColor.a);
    else
        color = vec4(rgbB, texColor.a);
    return color;
}

void main() {

      vec4 color;

      color = fxaa(uSampler, vFragCoord, inputSize.zw, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);

      gl_FragColor = color;
}
`;(function(e){Are(t,e);function t(){return e.call(this,Rre,kre)||this}return t})(yl);/*!
 * @pixi/filter-noise - v6.4.2
 * Compiled Thu, 02 Jun 2022 15:39:26 UTC
 *
 * @pixi/filter-noise is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var hx=function(e,t){return hx=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])},hx(e,t)};function Ore(e,t){hx(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var Lre=`precision highp float;

varying vec2 vTextureCoord;
varying vec4 vColor;

uniform float uNoise;
uniform float uSeed;
uniform sampler2D uSampler;

float rand(vec2 co)
{
    return fract(sin(dot(co.xy, vec2(12.9898, 78.233))) * 43758.5453);
}

void main()
{
    vec4 color = texture2D(uSampler, vTextureCoord);
    float randomValue = rand(gl_FragCoord.xy * uSeed);
    float diff = (randomValue - 0.5) * uNoise;

    // Un-premultiply alpha before applying the color matrix. See issue #3539.
    if (color.a > 0.0) {
        color.rgb /= color.a;
    }

    color.r += diff;
    color.g += diff;
    color.b += diff;

    // Premultiply alpha again.
    color.rgb *= color.a;

    gl_FragColor = color;
}
`;(function(e){Ore(t,e);function t(r,n){r===void 0&&(r=.5),n===void 0&&(n=Math.random());var i=e.call(this,$O,Lre,{uNoise:0,uSeed:0})||this;return i.noise=r,i.seed=n,i}return Object.defineProperty(t.prototype,"noise",{get:function(){return this.uniforms.uNoise},set:function(r){this.uniforms.uNoise=r},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"seed",{get:function(){return this.uniforms.uSeed},set:function(r){this.uniforms.uSeed=r},enumerable:!1,configurable:!0}),t})(yl);/*!
 * @pixi/mixin-cache-as-bitmap - v6.4.2
 * Compiled Thu, 02 Jun 2022 15:39:26 UTC
 *
 * @pixi/mixin-cache-as-bitmap is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*!
 * @pixi/constants - v6.4.2
 * Compiled Thu, 02 Jun 2022 15:39:26 UTC
 *
 * @pixi/constants is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var ZI;(function(e){e[e.WEBGL_LEGACY=0]="WEBGL_LEGACY",e[e.WEBGL=1]="WEBGL",e[e.WEBGL2=2]="WEBGL2"})(ZI||(ZI={}));var JI;(function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.WEBGL=1]="WEBGL",e[e.CANVAS=2]="CANVAS"})(JI||(JI={}));var QI;(function(e){e[e.COLOR=16384]="COLOR",e[e.DEPTH=256]="DEPTH",e[e.STENCIL=1024]="STENCIL"})(QI||(QI={}));var eN;(function(e){e[e.NORMAL=0]="NORMAL",e[e.ADD=1]="ADD",e[e.MULTIPLY=2]="MULTIPLY",e[e.SCREEN=3]="SCREEN",e[e.OVERLAY=4]="OVERLAY",e[e.DARKEN=5]="DARKEN",e[e.LIGHTEN=6]="LIGHTEN",e[e.COLOR_DODGE=7]="COLOR_DODGE",e[e.COLOR_BURN=8]="COLOR_BURN",e[e.HARD_LIGHT=9]="HARD_LIGHT",e[e.SOFT_LIGHT=10]="SOFT_LIGHT",e[e.DIFFERENCE=11]="DIFFERENCE",e[e.EXCLUSION=12]="EXCLUSION",e[e.HUE=13]="HUE",e[e.SATURATION=14]="SATURATION",e[e.COLOR=15]="COLOR",e[e.LUMINOSITY=16]="LUMINOSITY",e[e.NORMAL_NPM=17]="NORMAL_NPM",e[e.ADD_NPM=18]="ADD_NPM",e[e.SCREEN_NPM=19]="SCREEN_NPM",e[e.NONE=20]="NONE",e[e.SRC_OVER=0]="SRC_OVER",e[e.SRC_IN=21]="SRC_IN",e[e.SRC_OUT=22]="SRC_OUT",e[e.SRC_ATOP=23]="SRC_ATOP",e[e.DST_OVER=24]="DST_OVER",e[e.DST_IN=25]="DST_IN",e[e.DST_OUT=26]="DST_OUT",e[e.DST_ATOP=27]="DST_ATOP",e[e.ERASE=26]="ERASE",e[e.SUBTRACT=28]="SUBTRACT",e[e.XOR=29]="XOR"})(eN||(eN={}));var tN;(function(e){e[e.POINTS=0]="POINTS",e[e.LINES=1]="LINES",e[e.LINE_LOOP=2]="LINE_LOOP",e[e.LINE_STRIP=3]="LINE_STRIP",e[e.TRIANGLES=4]="TRIANGLES",e[e.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",e[e.TRIANGLE_FAN=6]="TRIANGLE_FAN"})(tN||(tN={}));var rN;(function(e){e[e.RGBA=6408]="RGBA",e[e.RGB=6407]="RGB",e[e.RG=33319]="RG",e[e.RED=6403]="RED",e[e.RGBA_INTEGER=36249]="RGBA_INTEGER",e[e.RGB_INTEGER=36248]="RGB_INTEGER",e[e.RG_INTEGER=33320]="RG_INTEGER",e[e.RED_INTEGER=36244]="RED_INTEGER",e[e.ALPHA=6406]="ALPHA",e[e.LUMINANCE=6409]="LUMINANCE",e[e.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",e[e.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",e[e.DEPTH_STENCIL=34041]="DEPTH_STENCIL"})(rN||(rN={}));var nN;(function(e){e[e.TEXTURE_2D=3553]="TEXTURE_2D",e[e.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",e[e.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",e[e.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",e[e.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",e[e.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",e[e.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",e[e.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",e[e.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z"})(nN||(nN={}));var iN;(function(e){e[e.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",e[e.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",e[e.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",e[e.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",e[e.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",e[e.UNSIGNED_INT=5125]="UNSIGNED_INT",e[e.UNSIGNED_INT_10F_11F_11F_REV=35899]="UNSIGNED_INT_10F_11F_11F_REV",e[e.UNSIGNED_INT_2_10_10_10_REV=33640]="UNSIGNED_INT_2_10_10_10_REV",e[e.UNSIGNED_INT_24_8=34042]="UNSIGNED_INT_24_8",e[e.UNSIGNED_INT_5_9_9_9_REV=35902]="UNSIGNED_INT_5_9_9_9_REV",e[e.BYTE=5120]="BYTE",e[e.SHORT=5122]="SHORT",e[e.INT=5124]="INT",e[e.FLOAT=5126]="FLOAT",e[e.FLOAT_32_UNSIGNED_INT_24_8_REV=36269]="FLOAT_32_UNSIGNED_INT_24_8_REV",e[e.HALF_FLOAT=36193]="HALF_FLOAT"})(iN||(iN={}));var oN;(function(e){e[e.FLOAT=0]="FLOAT",e[e.INT=1]="INT",e[e.UINT=2]="UINT"})(oN||(oN={}));var sN;(function(e){e[e.NEAREST=0]="NEAREST",e[e.LINEAR=1]="LINEAR"})(sN||(sN={}));var aN;(function(e){e[e.CLAMP=33071]="CLAMP",e[e.REPEAT=10497]="REPEAT",e[e.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT"})(aN||(aN={}));var lN;(function(e){e[e.OFF=0]="OFF",e[e.POW2=1]="POW2",e[e.ON=2]="ON",e[e.ON_MANUAL=3]="ON_MANUAL"})(lN||(lN={}));var uN;(function(e){e[e.NPM=0]="NPM",e[e.UNPACK=1]="UNPACK",e[e.PMA=2]="PMA",e[e.NO_PREMULTIPLIED_ALPHA=0]="NO_PREMULTIPLIED_ALPHA",e[e.PREMULTIPLY_ON_UPLOAD=1]="PREMULTIPLY_ON_UPLOAD",e[e.PREMULTIPLY_ALPHA=2]="PREMULTIPLY_ALPHA",e[e.PREMULTIPLIED_ALPHA=2]="PREMULTIPLIED_ALPHA"})(uN||(uN={}));var cN;(function(e){e[e.NO=0]="NO",e[e.YES=1]="YES",e[e.AUTO=2]="AUTO",e[e.BLEND=0]="BLEND",e[e.CLEAR=1]="CLEAR",e[e.BLIT=2]="BLIT"})(cN||(cN={}));var hN;(function(e){e[e.AUTO=0]="AUTO",e[e.MANUAL=1]="MANUAL"})(hN||(hN={}));var fN;(function(e){e.LOW="lowp",e.MEDIUM="mediump",e.HIGH="highp"})(fN||(fN={}));var dN;(function(e){e[e.NONE=0]="NONE",e[e.SCISSOR=1]="SCISSOR",e[e.STENCIL=2]="STENCIL",e[e.SPRITE=3]="SPRITE"})(dN||(dN={}));var fx;(function(e){e[e.NONE=0]="NONE",e[e.LOW=2]="LOW",e[e.MEDIUM=4]="MEDIUM",e[e.HIGH=8]="HIGH"})(fx||(fx={}));var pN;(function(e){e[e.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",e[e.ARRAY_BUFFER=34962]="ARRAY_BUFFER",e[e.UNIFORM_BUFFER=35345]="UNIFORM_BUFFER"})(pN||(pN={}));var s7=new er;Sr.prototype._cacheAsBitmap=!1;Sr.prototype._cacheData=null;Sr.prototype._cacheAsBitmapResolution=null;Sr.prototype._cacheAsBitmapMultisample=fx.NONE;var Ure=function(){function e(){this.textureCacheId=null,this.originalRender=null,this.originalRenderCanvas=null,this.originalCalculateBounds=null,this.originalGetLocalBounds=null,this.originalUpdateTransform=null,this.originalDestroy=null,this.originalMask=null,this.originalFilterArea=null,this.originalContainsPoint=null,this.sprite=null}return e}();Object.defineProperties(Sr.prototype,{cacheAsBitmapResolution:{get:function(){return this._cacheAsBitmapResolution},set:function(e){e!==this._cacheAsBitmapResolution&&(this._cacheAsBitmapResolution=e,this.cacheAsBitmap&&(this.cacheAsBitmap=!1,this.cacheAsBitmap=!0))}},cacheAsBitmapMultisample:{get:function(){return this._cacheAsBitmapMultisample},set:function(e){e!==this._cacheAsBitmapMultisample&&(this._cacheAsBitmapMultisample=e,this.cacheAsBitmap&&(this.cacheAsBitmap=!1,this.cacheAsBitmap=!0))}},cacheAsBitmap:{get:function(){return this._cacheAsBitmap},set:function(e){if(this._cacheAsBitmap!==e){this._cacheAsBitmap=e;var t;e?(this._cacheData||(this._cacheData=new Ure),t=this._cacheData,t.originalRender=this.render,t.originalRenderCanvas=this.renderCanvas,t.originalUpdateTransform=this.updateTransform,t.originalCalculateBounds=this.calculateBounds,t.originalGetLocalBounds=this.getLocalBounds,t.originalDestroy=this.destroy,t.originalContainsPoint=this.containsPoint,t.originalMask=this._mask,t.originalFilterArea=this.filterArea,this.render=this._renderCached,this.renderCanvas=this._renderCachedCanvas,this.destroy=this._cacheAsBitmapDestroy):(t=this._cacheData,t.sprite&&this._destroyCachedDisplayObject(),this.render=t.originalRender,this.renderCanvas=t.originalRenderCanvas,this.calculateBounds=t.originalCalculateBounds,this.getLocalBounds=t.originalGetLocalBounds,this.destroy=t.originalDestroy,this.updateTransform=t.originalUpdateTransform,this.containsPoint=t.originalContainsPoint,this._mask=t.originalMask,this.filterArea=t.originalFilterArea)}}}});Sr.prototype._renderCached=function(t){!this.visible||this.worldAlpha<=0||!this.renderable||(this._initCachedDisplayObject(t),this._cacheData.sprite.transform._worldID=this.transform._worldID,this._cacheData.sprite.worldAlpha=this.worldAlpha,this._cacheData.sprite._render(t))};Sr.prototype._initCachedDisplayObject=function(t){var r;if(!(this._cacheData&&this._cacheData.sprite)){var n=this.alpha;this.alpha=1,t.batch.flush();var i=this.getLocalBounds(null,!0).clone();if(this.filters&&this.filters.length){var o=this.filters[0].padding;i.pad(o)}i.ceil(We.RESOLUTION);var s=t.renderTexture.current,a=t.renderTexture.sourceFrame.clone(),l=t.renderTexture.destinationFrame.clone(),u=t.projection.transform,c=gu.create({width:i.width,height:i.height,resolution:this.cacheAsBitmapResolution||t.resolution,multisample:(r=this.cacheAsBitmapMultisample)!==null&&r!==void 0?r:t.multisample}),f="cacheAsBitmap_"+mu();this._cacheData.textureCacheId=f,wt.addToCache(c.baseTexture,f),et.addToCache(c,f);var p=this.transform.localTransform.copyTo(s7).invert().translate(-i.x,-i.y);this.render=this._cacheData.originalRender,t.render(this,{renderTexture:c,clear:!0,transform:p,skipUpdateTransform:!1}),t.framebuffer.blit(),t.projection.transform=u,t.renderTexture.bind(s,a,l),this.render=this._renderCached,this.updateTransform=this.displayObjectUpdateTransform,this.calculateBounds=this._calculateCachedBounds,this.getLocalBounds=this._getCachedLocalBounds,this._mask=null,this.filterArea=null,this.alpha=n;var v=new yu(c);v.transform.worldTransform=this.transform.worldTransform,v.anchor.x=-(i.x/i.width),v.anchor.y=-(i.y/i.height),v.alpha=n,v._bounds=this._bounds,this._cacheData.sprite=v,this.transform._parentID=-1,this.parent?this.updateTransform():(this.enableTempParent(),this.updateTransform(),this.disableTempParent(null)),this.containsPoint=v.containsPoint.bind(v)}};Sr.prototype._renderCachedCanvas=function(t){!this.visible||this.worldAlpha<=0||!this.renderable||(this._initCachedDisplayObjectCanvas(t),this._cacheData.sprite.worldAlpha=this.worldAlpha,this._cacheData.sprite._renderCanvas(t))};Sr.prototype._initCachedDisplayObjectCanvas=function(t){if(!(this._cacheData&&this._cacheData.sprite)){var r=this.getLocalBounds(null,!0),n=this.alpha;this.alpha=1;var i=t.context,o=t._projTransform;r.ceil(We.RESOLUTION);var s=gu.create({width:r.width,height:r.height}),a="cacheAsBitmap_"+mu();this._cacheData.textureCacheId=a,wt.addToCache(s.baseTexture,a),et.addToCache(s,a);var l=s7;this.transform.localTransform.copyTo(l),l.invert(),l.tx-=r.x,l.ty-=r.y,this.renderCanvas=this._cacheData.originalRenderCanvas,t.render(this,{renderTexture:s,clear:!0,transform:l,skipUpdateTransform:!1}),t.context=i,t._projTransform=o,this.renderCanvas=this._renderCachedCanvas,this.updateTransform=this.displayObjectUpdateTransform,this.calculateBounds=this._calculateCachedBounds,this.getLocalBounds=this._getCachedLocalBounds,this._mask=null,this.filterArea=null,this.alpha=n;var u=new yu(s);u.transform.worldTransform=this.transform.worldTransform,u.anchor.x=-(r.x/r.width),u.anchor.y=-(r.y/r.height),u.alpha=n,u._bounds=this._bounds,this._cacheData.sprite=u,this.transform._parentID=-1,this.parent?this.updateTransform():(this.parent=t._tempDisplayObjectParent,this.updateTransform(),this.parent=null),this.containsPoint=u.containsPoint.bind(u)}};Sr.prototype._calculateCachedBounds=function(){this._bounds.clear(),this._cacheData.sprite.transform._worldID=this.transform._worldID,this._cacheData.sprite._calculateBounds(),this._bounds.updateID=this._boundsID};Sr.prototype._getCachedLocalBounds=function(){return this._cacheData.sprite.getLocalBounds(null)};Sr.prototype._destroyCachedDisplayObject=function(){this._cacheData.sprite._texture.destroy(!0),this._cacheData.sprite=null,wt.removeFromCache(this._cacheData.textureCacheId),et.removeFromCache(this._cacheData.textureCacheId),this._cacheData.textureCacheId=null};Sr.prototype._cacheAsBitmapDestroy=function(t){this.cacheAsBitmap=!1,this.destroy(t)};/*!
 * @pixi/mixin-get-child-by-name - v6.4.2
 * Compiled Thu, 02 Jun 2022 15:39:26 UTC
 *
 * @pixi/mixin-get-child-by-name is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */Sr.prototype.name=null;Pi.prototype.getChildByName=function(t,r){for(var n=0,i=this.children.length;n<i;n++)if(this.children[n].name===t)return this.children[n];if(r)for(var n=0,i=this.children.length;n<i;n++){var o=this.children[n];if(!!o.getChildByName){var s=this.children[n].getChildByName(t,!0);if(s)return s}}return null};/*!
 * @pixi/mixin-get-global-position - v6.4.2
 * Compiled Thu, 02 Jun 2022 15:39:26 UTC
 *
 * @pixi/mixin-get-global-position is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */Sr.prototype.getGlobalPosition=function(t,r){return t===void 0&&(t=new Gt),r===void 0&&(r=!1),this.parent?this.parent.toGlobal(this.position,t,r):(t.x=this.position.x,t.y=this.position.y),t};/*!
 * @pixi/mesh-extras - v6.4.2
 * Compiled Thu, 02 Jun 2022 15:39:26 UTC
 *
 * @pixi/mesh-extras is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var dx=function(e,t){return dx=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])},dx(e,t)};function Uh(e,t){dx(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var Fre=function(e){Uh(t,e);function t(r,n,i,o){r===void 0&&(r=100),n===void 0&&(n=100),i===void 0&&(i=10),o===void 0&&(o=10);var s=e.call(this)||this;return s.segWidth=i,s.segHeight=o,s.width=r,s.height=n,s.build(),s}return t.prototype.build=function(){for(var r=this.segWidth*this.segHeight,n=[],i=[],o=[],s=this.segWidth-1,a=this.segHeight-1,l=this.width/s,u=this.height/a,c=0;c<r;c++){var f=c%this.segWidth,p=c/this.segWidth|0;n.push(f*l,p*u),i.push(f/s,p/a)}for(var v=s*a,c=0;c<v;c++){var g=c%s,b=c/s|0,_=b*this.segWidth+g,w=b*this.segWidth+g+1,x=(b+1)*this.segWidth+g,T=(b+1)*this.segWidth+g+1;o.push(_,w,x,w,T,x)}this.buffers[0].data=new Float32Array(n),this.buffers[1].data=new Float32Array(i),this.indexBuffer.data=new Uint16Array(o),this.buffers[0].update(),this.buffers[1].update(),this.indexBuffer.update()},t}(Wy),Mre=function(e){Uh(t,e);function t(r,n,i){r===void 0&&(r=200),i===void 0&&(i=0);var o=e.call(this,new Float32Array(n.length*4),new Float32Array(n.length*4),new Uint16Array((n.length-1)*6))||this;return o.points=n,o._width=r,o.textureScale=i,o.build(),o}return Object.defineProperty(t.prototype,"width",{get:function(){return this._width},enumerable:!1,configurable:!0}),t.prototype.build=function(){var r=this.points;if(!!r){var n=this.getBuffer("aVertexPosition"),i=this.getBuffer("aTextureCoord"),o=this.getIndex();if(!(r.length<1)){n.data.length/4!==r.length&&(n.data=new Float32Array(r.length*4),i.data=new Float32Array(r.length*4),o.data=new Uint16Array((r.length-1)*6));var s=i.data,a=o.data;s[0]=0,s[1]=0,s[2]=0,s[3]=1;for(var l=0,u=r[0],c=this._width*this.textureScale,f=r.length,p=0;p<f;p++){var v=p*4;if(this.textureScale>0){var g=u.x-r[p].x,b=u.y-r[p].y,_=Math.sqrt(g*g+b*b);u=r[p],l+=_/c}else l=p/(f-1);s[v]=l,s[v+1]=0,s[v+2]=l,s[v+3]=1}for(var w=0,p=0;p<f-1;p++){var v=p*2;a[w++]=v,a[w++]=v+1,a[w++]=v+2,a[w++]=v+2,a[w++]=v+1,a[w++]=v+3}i.update(),o.update(),this.updateVertices()}}},t.prototype.updateVertices=function(){var r=this.points;if(!(r.length<1)){for(var n=r[0],i,o=0,s=0,a=this.buffers[0].data,l=r.length,u=0;u<l;u++){var c=r[u],f=u*4;u<r.length-1?i=r[u+1]:i=c,s=-(i.x-n.x),o=i.y-n.y;var p=Math.sqrt(o*o+s*s),v=this.textureScale>0?this.textureScale*this._width/2:this._width/2;o/=p,s/=p,o*=v,s*=v,a[f]=c.x+o,a[f+1]=c.y+s,a[f+2]=c.x-o,a[f+3]=c.y-s,n=c}this.buffers[0].update()}},t.prototype.update=function(){this.textureScale>0?this.build():this.updateVertices()},t}(Wy),Bre=function(e){Uh(t,e);function t(r,n,i){i===void 0&&(i=0);var o=this,s=new Mre(r.height,n,i),a=new ip(r);return i>0&&(r.baseTexture.wrapMode=Jo.REPEAT),o=e.call(this,s,a)||this,o.autoUpdate=!0,o}return t.prototype._render=function(r){var n=this.geometry;(this.autoUpdate||n._width!==this.shader.texture.height)&&(n._width=this.shader.texture.height,n.update()),e.prototype._render.call(this,r)},t}(np),Dre=function(e){Uh(t,e);function t(r,n,i){var o=this,s=new Fre(r.width,r.height,n,i),a=new ip(et.WHITE);return o=e.call(this,s,a)||this,o.texture=r,o.autoResize=!0,o}return t.prototype.textureUpdated=function(){this._textureID=this.shader.texture._updateID;var r=this.geometry,n=this.shader.texture,i=n.width,o=n.height;this.autoResize&&(r.width!==i||r.height!==o)&&(r.width=this.shader.texture.width,r.height=this.shader.texture.height,r.build())},Object.defineProperty(t.prototype,"texture",{get:function(){return this.shader.texture},set:function(r){this.shader.texture!==r&&(this.shader.texture=r,this._textureID=-1,r.baseTexture.valid?this.textureUpdated():r.once("update",this.textureUpdated,this))},enumerable:!1,configurable:!0}),t.prototype._render=function(r){this._textureID!==this.shader.texture._updateID&&this.textureUpdated(),e.prototype._render.call(this,r)},t.prototype.destroy=function(r){this.shader.texture.off("update",this.textureUpdated,this),e.prototype.destroy.call(this,r)},t}(np),Gre=function(e){Uh(t,e);function t(r,n,i,o,s){r===void 0&&(r=et.EMPTY);var a=this,l=new Wy(n,i,o);l.getBuffer("aVertexPosition").static=!1;var u=new ip(r);return a=e.call(this,l,u,null,s)||this,a.autoUpdate=!0,a}return Object.defineProperty(t.prototype,"vertices",{get:function(){return this.geometry.getBuffer("aVertexPosition").data},set:function(r){this.geometry.getBuffer("aVertexPosition").data=r},enumerable:!1,configurable:!0}),t.prototype._render=function(r){this.autoUpdate&&this.geometry.getBuffer("aVertexPosition").update(),e.prototype._render.call(this,r)},t}(np),kv=10,jre=function(e){Uh(t,e);function t(r,n,i,o,s){n===void 0&&(n=kv),i===void 0&&(i=kv),o===void 0&&(o=kv),s===void 0&&(s=kv);var a=e.call(this,et.WHITE,4,4)||this;return a._origWidth=r.orig.width,a._origHeight=r.orig.height,a._width=a._origWidth,a._height=a._origHeight,a._leftWidth=n,a._rightWidth=o,a._topHeight=i,a._bottomHeight=s,a.texture=r,a}return t.prototype.textureUpdated=function(){this._textureID=this.shader.texture._updateID,this._refresh()},Object.defineProperty(t.prototype,"vertices",{get:function(){return this.geometry.getBuffer("aVertexPosition").data},set:function(r){this.geometry.getBuffer("aVertexPosition").data=r},enumerable:!1,configurable:!0}),t.prototype.updateHorizontalVertices=function(){var r=this.vertices,n=this._getMinScale();r[9]=r[11]=r[13]=r[15]=this._topHeight*n,r[17]=r[19]=r[21]=r[23]=this._height-this._bottomHeight*n,r[25]=r[27]=r[29]=r[31]=this._height},t.prototype.updateVerticalVertices=function(){var r=this.vertices,n=this._getMinScale();r[2]=r[10]=r[18]=r[26]=this._leftWidth*n,r[4]=r[12]=r[20]=r[28]=this._width-this._rightWidth*n,r[6]=r[14]=r[22]=r[30]=this._width},t.prototype._getMinScale=function(){var r=this._leftWidth+this._rightWidth,n=this._width>r?1:this._width/r,i=this._topHeight+this._bottomHeight,o=this._height>i?1:this._height/i,s=Math.min(n,o);return s},Object.defineProperty(t.prototype,"width",{get:function(){return this._width},set:function(r){this._width=r,this._refresh()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this._height},set:function(r){this._height=r,this._refresh()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"leftWidth",{get:function(){return this._leftWidth},set:function(r){this._leftWidth=r,this._refresh()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"rightWidth",{get:function(){return this._rightWidth},set:function(r){this._rightWidth=r,this._refresh()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"topHeight",{get:function(){return this._topHeight},set:function(r){this._topHeight=r,this._refresh()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"bottomHeight",{get:function(){return this._bottomHeight},set:function(r){this._bottomHeight=r,this._refresh()},enumerable:!1,configurable:!0}),t.prototype._refresh=function(){var r=this.texture,n=this.geometry.buffers[1].data;this._origWidth=r.orig.width,this._origHeight=r.orig.height;var i=1/this._origWidth,o=1/this._origHeight;n[0]=n[8]=n[16]=n[24]=0,n[1]=n[3]=n[5]=n[7]=0,n[6]=n[14]=n[22]=n[30]=1,n[25]=n[27]=n[29]=n[31]=1,n[2]=n[10]=n[18]=n[26]=i*this._leftWidth,n[4]=n[12]=n[20]=n[28]=1-i*this._rightWidth,n[9]=n[11]=n[13]=n[15]=o*this._topHeight,n[17]=n[19]=n[21]=n[23]=1-o*this._bottomHeight,this.updateHorizontalVertices(),this.updateVerticalVertices(),this.geometry.buffers[0].update(),this.geometry.buffers[1].update()},t}(Dre);/*!
 * @pixi/sprite-animated - v6.4.2
 * Compiled Thu, 02 Jun 2022 15:39:26 UTC
 *
 * @pixi/sprite-animated is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var px=function(e,t){return px=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])},px(e,t)};function $re(e,t){px(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var mN=function(e){$re(t,e);function t(r,n){n===void 0&&(n=!0);var i=e.call(this,r[0]instanceof et?r[0]:r[0].texture)||this;return i._textures=null,i._durations=null,i._autoUpdate=n,i._isConnectedToTicker=!1,i.animationSpeed=1,i.loop=!0,i.updateAnchor=!1,i.onComplete=null,i.onFrameChange=null,i.onLoop=null,i._currentTime=0,i._playing=!1,i._previousFrame=null,i.textures=r,i}return t.prototype.stop=function(){!this._playing||(this._playing=!1,this._autoUpdate&&this._isConnectedToTicker&&(on.shared.remove(this.update,this),this._isConnectedToTicker=!1))},t.prototype.play=function(){this._playing||(this._playing=!0,this._autoUpdate&&!this._isConnectedToTicker&&(on.shared.add(this.update,this,qs.HIGH),this._isConnectedToTicker=!0))},t.prototype.gotoAndStop=function(r){this.stop();var n=this.currentFrame;this._currentTime=r,n!==this.currentFrame&&this.updateTexture()},t.prototype.gotoAndPlay=function(r){var n=this.currentFrame;this._currentTime=r,n!==this.currentFrame&&this.updateTexture(),this.play()},t.prototype.update=function(r){if(!!this._playing){var n=this.animationSpeed*r,i=this.currentFrame;if(this._durations!==null){var o=this._currentTime%1*this._durations[this.currentFrame];for(o+=n/60*1e3;o<0;)this._currentTime--,o+=this._durations[this.currentFrame];var s=Math.sign(this.animationSpeed*r);for(this._currentTime=Math.floor(this._currentTime);o>=this._durations[this.currentFrame];)o-=this._durations[this.currentFrame]*s,this._currentTime+=s;this._currentTime+=o/this._durations[this.currentFrame]}else this._currentTime+=n;this._currentTime<0&&!this.loop?(this.gotoAndStop(0),this.onComplete&&this.onComplete()):this._currentTime>=this._textures.length&&!this.loop?(this.gotoAndStop(this._textures.length-1),this.onComplete&&this.onComplete()):i!==this.currentFrame&&(this.loop&&this.onLoop&&(this.animationSpeed>0&&this.currentFrame<i?this.onLoop():this.animationSpeed<0&&this.currentFrame>i&&this.onLoop()),this.updateTexture())}},t.prototype.updateTexture=function(){var r=this.currentFrame;this._previousFrame!==r&&(this._previousFrame=r,this._texture=this._textures[r],this._textureID=-1,this._textureTrimmedID=-1,this._cachedTint=16777215,this.uvs=this._texture._uvs.uvsFloat32,this.updateAnchor&&this._anchor.copyFrom(this._texture.defaultAnchor),this.onFrameChange&&this.onFrameChange(this.currentFrame))},t.prototype.destroy=function(r){this.stop(),e.prototype.destroy.call(this,r),this.onComplete=null,this.onFrameChange=null,this.onLoop=null},t.fromFrames=function(r){for(var n=[],i=0;i<r.length;++i)n.push(et.from(r[i]));return new t(n)},t.fromImages=function(r){for(var n=[],i=0;i<r.length;++i)n.push(et.from(r[i]));return new t(n)},Object.defineProperty(t.prototype,"totalFrames",{get:function(){return this._textures.length},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"textures",{get:function(){return this._textures},set:function(r){if(r[0]instanceof et)this._textures=r,this._durations=null;else{this._textures=[],this._durations=[];for(var n=0;n<r.length;n++)this._textures.push(r[n].texture),this._durations.push(r[n].time)}this._previousFrame=null,this.gotoAndStop(0),this.updateTexture()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"currentFrame",{get:function(){var r=Math.floor(this._currentTime)%this._textures.length;return r<0&&(r+=this._textures.length),r},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"playing",{get:function(){return this._playing},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"autoUpdate",{get:function(){return this._autoUpdate},set:function(r){r!==this._autoUpdate&&(this._autoUpdate=r,!this._autoUpdate&&this._isConnectedToTicker?(on.shared.remove(this.update,this),this._isConnectedToTicker=!1):this._autoUpdate&&!this._isConnectedToTicker&&this._playing&&(on.shared.add(this.update,this),this._isConnectedToTicker=!0))},enumerable:!1,configurable:!0}),t}(yu);/*!
 * pixi.js - v6.4.2
 * Compiled Thu, 02 Jun 2022 15:39:26 UTC
 *
 * pixi.js is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */_l.registerPlugin("accessibility",WJ);_l.registerPlugin("extract",Uee);_l.registerPlugin("interaction",QJ);_l.registerPlugin("particle",xte);_l.registerPlugin("prepare",Yte);_l.registerPlugin("batch",Iee);_l.registerPlugin("tilingSprite",rre);ss.registerPlugin(gre);ss.registerPlugin(Zee);ss.registerPlugin(pte);ss.registerPlugin(yte);ss.registerPlugin(qte);Lh.registerPlugin(YJ);Lh.registerPlugin(Hee);function vN(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function si(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?vN(Object(r),!0).forEach(function(n){rn(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):vN(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function ll(e){return(ll=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function Hre(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function zre(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function rn(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Yy(){return(Yy=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function mx(e){return(mx=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(e)}function G4(e,t){return(G4=Object.setPrototypeOf||function(r,n){return r.__proto__=n,r})(e,t)}function a7(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function l7(e,t,r){return(l7=a7()?Reflect.construct:function(n,i,o){var s=[null];s.push.apply(s,i);var a=new(Function.bind.apply(n,s));return o&&G4(a,o.prototype),a}).apply(null,arguments)}function _a(e,t){if(e==null)return{};var r,n,i=function(s,a){if(s==null)return{};var l,u,c={},f=Object.keys(s);for(u=0;u<f.length;u++)l=f[u],a.indexOf(l)>=0||(c[l]=s[l]);return c}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function Is(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Vre(e,t){return!t||typeof t!="object"&&typeof t!="function"?Is(e):t}function Js(e){return function(t){if(Array.isArray(t))return P_(t)}(e)||function(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}(e)||function(t,r){if(!!t){if(typeof t=="string")return P_(t,r);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return P_(t,r)}}(e)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function P_(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Br(e,t){for(var r=arguments.length,n=new Array(r>2?r-2:0),i=2;i<r;i++)n[i-2]=arguments[i]}var Xre=function(e){return e==null};function Wf(e){var t=[];if(e===void 0)return t;if(typeof e=="string")t=e.split(",");else if(typeof e=="number")t=[e];else if(Array.isArray(e))t=Js(e);else{if(e===null||ll(e)!=="object")return t;t=[e&&(e==null?void 0:e.x)||0,e&&(e==null?void 0:e.y)||0]}return t.filter(function(r){return!Xre(r)&&!isNaN(r)}).map(Number)}function gN(e,t){if(e.length!==t.length)return!1;for(var r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0}function A_(e){return e instanceof Gt||e instanceof Yl}var Ig=["click","mousedown","mousemove","mouseout","mouseover","mouseup","mouseupoutside","tap","touchstart","touchmove","touchend","touchendoutside","pointercancel","pointerout","pointerover","pointertap","pointerdown","pointerup","pointerupoutside","pointermove","rightclick","rightdown","rightup","rightupoutside","touchcancel","touchendoutside","touchmove","touchstart"];function R_(e,t,r){if(A_(e[t])&&A_(r))e[t].copyFrom(r);else if(A_(e[t])){var n=Wf(r);Br(n!==void 0&&n.length>0&&n.length<3,"The property `%s` is a `PIXI.Point` or `PIXI.ObservablePoint` and must be set to a comma-separated string of either 1 or 2 coordinates, a 1 or 2 element array containing coordinates, or a PIXI Point/ObservablePoint. If only one coordinate is given then X and Y will be set to the provided value. Received: `%s` of type `%s`.",t,JSON.stringify(r),ll(r)),e[t].set(n.shift(),n.shift())}else e[t]=r}var fc,u7=function(e){var t,r=e;if(!Array.isArray(r)){if(t=e,Object.prototype.toString.call(t)!=="[object Object]")throw new Error("collection needs to be an Array or Object");r=Object.keys(e)}var n={};return r.forEach(function(i){n[i]=!0}),function(i){return n[i]!==void 0}},c7=function(e){return function(){return!e.apply(void 0,arguments)}},Wre=(rn(fc={},"children",!0),rn(fc,"parent",!0),rn(fc,"worldAlpha",!0),rn(fc,"worldTransform",!0),rn(fc,"worldVisible",!0),fc),vx={alpha:1,buttonMode:!1,cacheAsBitmap:!1,cursor:null,filterArea:null,filters:null,hitArea:null,interactive:!1,mask:null,pivot:0,position:0,renderable:!0,rotation:0,scale:1,skew:0,transform:null,visible:!0,x:0,y:0},Fo=function(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},n=function(a){return requestAnimationFrame(function(){var l,u;a==null||(l=a.__reactpixi)===null||l===void 0||(u=l.root)===null||u===void 0||u.emit("__REACT_PIXI_REQUEST_RENDER__")})},i=function(a,l){if(r.hasOwnProperty(a))return Br(l.typeofs.some(function(u){return ll(r[a])===u})||l.instanceofs.some(function(u){return r[a]instanceof u}),"".concat(e," ").concat(a," prop is invalid")),r[a]};if(r.texture)return Br(r.texture instanceof et,"".concat(e," texture needs to be typeof `PIXI.Texture`")),r.texture;var o=i("image",{typeofs:["string"],instanceofs:[HTMLImageElement]})||i("video",{typeofs:["string"],instanceofs:[HTMLVideoElement]})||i("source",{typeofs:["string","number"],instanceofs:[HTMLImageElement,HTMLVideoElement,HTMLCanvasElement,et]});Br(!!o,"".concat(e," could not get texture from props"));var s=et.from(o);return s.__reactpixi={root:t},s.once("update",n),s.once("loaded",n),s.valid&&n(s),s},Yre=c7(u7([].concat(Js(Object.keys(Wre)),Js(Ig))));function Mo(e,t,r){var n=!1;if(Br(Sr.prototype.isPrototypeOf(e),"instance needs to be typeof `PIXI.DisplayObject`, got `%s`",ll(e)),!r.ignoreEvents)for(var i=typeof e.removeListener=="function",o=typeof e.on=="function",s=0;s<Ig.length;s++){var a=Ig[s];t[a]!==r[a]&&(n=!0,typeof t[a]=="function"&&i&&e.removeListener(a,t[a]),typeof r[a]=="function"&&o&&e.on(a,r[a]))}var l=Object.keys(r||{});if(!r.overwriteProps){for(var u=l.filter(Yre),c=0;c<u.length;c++){var f=u[c],p=r[f];r[f]!==t[f]&&(n=!0),p!==void 0?R_(e,f,p):f in vx?(console.warn("setting default value: ".concat(f,", from: ").concat(e[f]," to: ").concat(p," for"),e),n=!0,R_(e,f,vx[f])):console.warn("ignoring prop: ".concat(f,", from ").concat(e[f]," to ").concat(p," for"),e)}return n}for(var v=0;v<l.length;v++){var g=l[v];t[g]!==r[g]&&(n=!0,R_(e,g,r[g]))}}var Kre=["draw","geometry"],qre=["image","texture"],Zre=["image","texture"],Jre=["textures","isPlaying","initialFrame"],Qre=["tileScale","tilePosition","image","texture"],ene=["image","texture"],tne=["image","texture"],rne=Object.freeze({__proto__:null,BitmapText:function(e,t){var r=t.text,n=t.style;return new vre(r,n)},Container:function(){return new Pi},Graphics:function(e,t){var r=t.geometry;Br(!r||r instanceof Ya,"Graphics geometry needs to be a `PIXI.Graphics`");var n=r?new Ya(r.geometry):new Ya;return n.applyProps=function(i,o,s){var a=s.draw;s.geometry;var l=Mo(i,o,_a(s,Kre));return o.draw!==a&&typeof a=="function"&&(l=!0,a.call(n,n)),l},n},NineSlicePlane:function(e,t){var r=t.leftWidth,n=r===void 0?10:r,i=t.topHeight,o=i===void 0?10:i,s=t.rightWidth,a=s===void 0?10:s,l=t.bottomHeight,u=l===void 0?10:l,c=Fo("NineSlicePlane",e,t),f=new jre(c,n,o,a,u);return f.applyProps=function(p,v,g){var b=g.image,_=g.texture,w=Mo(p,v,_a(g,qre));return(b||_)&&(_!==v.texture&&(w=!0),p.texture=Fo("NineSlicePlane",e,g)),w},f},ParticleContainer:function(e,t){var r=t.maxSize,n=r===void 0?1500:r,i=t.batchSize,o=i===void 0?16384:i,s=t.autoResize,a=s!==void 0&&s,l=si(si({},{vertices:!1,scale:!0,position:!0,rotation:!0,uvs:!0,tint:!0}),t.properties||{}),u=si(si({},{children:!1,texture:!1,baseTexture:!1}),t.destroyOptions||{}),c=new _te(n,l,o,a);return c.willUnmount=function(f,p,v){f.destroy(u)},c},Sprite:function(e,t){var r=new yu(Fo("Sprite",e,t));return r.applyProps=function(n,i,o){var s=o.image,a=o.texture,l=Mo(n,i,_a(o,Zre));return(a&&i.texture!==o.texture||s&&i.image!==o.image)&&(i.texture!==o.texture&&(l=!0),n.texture=Fo("Sprite",e,o)),l},r},Text:function(e,t){var r=t.text,n=r===void 0?"":r,i=t.style,o=i===void 0?{}:i,s=t.isSprite,a=new B4(n,o);return s?(a.updateText(),new yu(a.texture)):a},TilingSprite:function(e,t){var r=t.width,n=r===void 0?100:r,i=t.height,o=i===void 0?100:i,s=Fo("TilingSprite",e,t),a=new Zte(s,n,o);return a.applyProps=function(l,u,c){var f=c.tileScale,p=c.tilePosition,v=c.image,g=c.texture,b=Mo(l,u,_a(c,Qre));if(p){var _,w=Wf(p);(_=l.tilePosition).set.apply(_,Js(w)),b=!gN(Wf(u.tilePosition),w)||b}if(f){var x,T=Wf(f);(x=l.tileScale).set.apply(x,Js(T)),b=!gN(Wf(u.tileScale),T)||b}return(v||g)&&(g!==u.texture&&(b=!0),l.texture=Fo("Sprite",e,c)),b},a},SimpleMesh:function(e,t){var r=Fo("Mesh",e,t),n=t.vertices,i=t.uvs,o=t.indices,s=t.drawMode,a=s===void 0?Ci.TRIANGLES:s,l=new Gre(r,n,i,o,a);return l.applyProps=function(u,c,f){var p=f.image,v=f.texture,g=Mo(u,c,_a(f,ene));return(p||v)&&(v!==c.texture&&(g=!0),u.texture=Fo("Mesh",e,f)),g},l},SimpleRope:function(e,t){var r=Fo("SimpleRope",e,t),n=t.points,i=new Bre(r,n);return i.applyProps=function(o,s,a){var l=a.image,u=a.texture,c=_a(a,tne);Br(Array.isArray(a.points),"SimpleRope points needs to be %s","Array<PIXI.Point>");var f=Mo(o,s,c);return(l||u)&&(u!==s.texture&&(f=!0),o.texture=Fo("SimpleRope",e,a)),f},i},AnimatedSprite:function(e,t){var r=t.textures,n=t.images,i=t.isPlaying,o=i===void 0||i,s=t.initialFrame,a=function(u){return u.map(function(c){return Br(c instanceof et||(c==null?void 0:c.texture),"AnimationSprite texture needs to be an array of `PIXI.Texture` or `{ texture: PIXI.Texture, time: number }`"),c})},l=n?mN.fromImages(n):new mN(a(r));return l[o?"gotoAndPlay":"gotoAndStop"](s||0),l.applyProps=function(u,c,f){var p=f.textures,v=f.isPlaying,g=f.initialFrame,b=Mo(u,c,_a(f,Jre));if(p&&c.textures!==p&&(u.textures=a(p),b=!0),v!==c.isPlaying||g!==c.initialFrame){var _=typeof g=="number"?g:l.currentFrame||0;l[v?"gotoAndPlay":"gotoAndStop"](_),b=!0}return b},l}}),Oi={BitmapText:"BitmapText",Container:"Container",Graphics:"Graphics",NineSlicePlane:"NineSlicePlane",ParticleContainer:"ParticleContainer",Sprite:"Sprite",AnimatedSprite:"AnimatedSprite",Text:"Text",TilingSprite:"TilingSprite",SimpleMesh:"SimpleMesh",SimpleRope:"SimpleRope"},nne=Object.keys(Oi).reduce(function(e,t){return si(si({},e),{},rn({},t,rne[t]))},{}),h7={};function ine(e,t){return Br(!!e,"Expect type to be defined, got `%s`",e),Br(!Oi[e],"Component `%s` could not be created, already exists in default components.",e),h7[e]=t,e}var one=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof Ni<"u"?Ni:typeof self<"u"?self:{};function to(e,t){return e(t={exports:{}},t.exports),t.exports;/*
object-assign
(c) Sindre Sorhus
@license MIT
*/}var yN=Object.getOwnPropertySymbols,sne=Object.prototype.hasOwnProperty,ane=Object.prototype.propertyIsEnumerable;function lne(e){if(e==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}var une=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de",Object.getOwnPropertyNames(e)[0]==="5")return!1;for(var t={},r=0;r<10;r++)t["_"+String.fromCharCode(r)]=r;if(Object.getOwnPropertyNames(t).map(function(i){return t[i]}).join("")!=="0123456789")return!1;var n={};return"abcdefghijklmnopqrst".split("").forEach(function(i){n[i]=i}),Object.keys(Object.assign({},n)).join("")==="abcdefghijklmnopqrst"}catch{return!1}}()?Object.assign:function(e,t){for(var r,n,i=lne(e),o=1;o<arguments.length;o++){for(var s in r=Object(arguments[o]))sne.call(r,s)&&(i[s]=r[s]);if(yN){n=yN(r);for(var a=0;a<n.length;a++)ane.call(r,n[a])&&(i[n[a]]=r[n[a]])}}return i},Or=to(function(e,t){var r,n,i,o;if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var a=Date,l=a.now();t.unstable_now=function(){return a.now()-l}}if(typeof window>"u"||typeof MessageChannel!="function"){var u=null,c=null,f=function(){if(u!==null)try{var W=t.unstable_now();u(!0,W),u=null}catch(te){throw setTimeout(f,0),te}};r=function(W){u!==null?setTimeout(r,0,W):(u=W,setTimeout(f,0))},n=function(W,te){c=setTimeout(W,te)},i=function(){clearTimeout(c)},t.unstable_shouldYield=function(){return!1},o=t.unstable_forceFrameRate=function(){}}else{var p=window.setTimeout,v=window.clearTimeout;if(typeof console<"u"){var g=window.cancelAnimationFrame;typeof window.requestAnimationFrame!="function"&&console.error("This browser doesn't support requestAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills"),typeof g!="function"&&console.error("This browser doesn't support cancelAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills")}var b=!1,_=null,w=-1,x=5,T=0;t.unstable_shouldYield=function(){return t.unstable_now()>=T},o=function(){},t.unstable_forceFrameRate=function(W){0>W||125<W?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):x=0<W?Math.floor(1e3/W):5};var I=new MessageChannel,R=I.port2;I.port1.onmessage=function(){if(_!==null){var W=t.unstable_now();T=W+x;try{_(!0,W)?R.postMessage(null):(b=!1,_=null)}catch(te){throw R.postMessage(null),te}}else b=!1},r=function(W){_=W,b||(b=!0,R.postMessage(null))},n=function(W,te){w=p(function(){W(t.unstable_now())},te)},i=function(){v(w),w=-1}}function E(W,te){var ye=W.length;W.push(te);e:for(;;){var Ce=ye-1>>>1,Ie=W[Ce];if(!(Ie!==void 0&&0<N(Ie,te)))break e;W[Ce]=te,W[ye]=Ie,ye=Ce}}function O(W){return(W=W[0])===void 0?null:W}function P(W){var te=W[0];if(te!==void 0){var ye=W.pop();if(ye!==te){W[0]=ye;e:for(var Ce=0,Ie=W.length;Ce<Ie;){var Ye=2*(Ce+1)-1,de=W[Ye],F=Ye+1,$=W[F];if(de!==void 0&&0>N(de,ye))$!==void 0&&0>N($,de)?(W[Ce]=$,W[F]=ye,Ce=F):(W[Ce]=de,W[Ye]=ye,Ce=Ye);else{if(!($!==void 0&&0>N($,ye)))break e;W[Ce]=$,W[F]=ye,Ce=F}}}return te}return null}function N(W,te){var ye=W.sortIndex-te.sortIndex;return ye!==0?ye:W.id-te.id}var A=[],j=[],X=1,B=null,ae=3,Y=!1,K=!1,me=!1;function ue(W){for(var te=O(j);te!==null;){if(te.callback===null)P(j);else{if(!(te.startTime<=W))break;P(j),te.sortIndex=te.expirationTime,E(A,te)}te=O(j)}}function ie(W){if(me=!1,ue(W),!K)if(O(A)!==null)K=!0,r(Q);else{var te=O(j);te!==null&&n(ie,te.startTime-W)}}function Q(W,te){K=!1,me&&(me=!1,i()),Y=!0;var ye=ae;try{for(ue(te),B=O(A);B!==null&&(!(B.expirationTime>te)||W&&!t.unstable_shouldYield());){var Ce=B.callback;if(typeof Ce=="function"){B.callback=null,ae=B.priorityLevel;var Ie=Ce(B.expirationTime<=te);te=t.unstable_now(),typeof Ie=="function"?B.callback=Ie:B===O(A)&&P(A),ue(te)}else P(A);B=O(A)}if(B!==null)var Ye=!0;else{var de=O(j);de!==null&&n(ie,de.startTime-te),Ye=!1}return Ye}finally{B=null,ae=ye,Y=!1}}var ee=o;t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(W){W.callback=null},t.unstable_continueExecution=function(){K||Y||(K=!0,r(Q))},t.unstable_getCurrentPriorityLevel=function(){return ae},t.unstable_getFirstCallbackNode=function(){return O(A)},t.unstable_next=function(W){switch(ae){case 1:case 2:case 3:var te=3;break;default:te=ae}var ye=ae;ae=te;try{return W()}finally{ae=ye}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=ee,t.unstable_runWithPriority=function(W,te){switch(W){case 1:case 2:case 3:case 4:case 5:break;default:W=3}var ye=ae;ae=W;try{return te()}finally{ae=ye}},t.unstable_scheduleCallback=function(W,te,ye){var Ce=t.unstable_now();switch(typeof ye=="object"&&ye!==null?ye=typeof(ye=ye.delay)=="number"&&0<ye?Ce+ye:Ce:ye=Ce,W){case 1:var Ie=-1;break;case 2:Ie=250;break;case 5:Ie=1073741823;break;case 4:Ie=1e4;break;default:Ie=5e3}return W={id:X++,callback:te,priorityLevel:W,startTime:ye,expirationTime:Ie=ye+Ie,sortIndex:-1},ye>Ce?(W.sortIndex=ye,E(j,W),O(A)===null&&W===O(j)&&(me?i():me=!0,n(ie,ye-Ce))):(W.sortIndex=Ie,E(A,W),K||Y||(K=!0,r(Q))),W},t.unstable_wrapCallback=function(W){var te=ae;return function(){var ye=ae;ae=te;try{return W.apply(this,arguments)}finally{ae=ye}}}});Or.unstable_now,Or.unstable_shouldYield,Or.unstable_forceFrameRate,Or.unstable_IdlePriority,Or.unstable_ImmediatePriority,Or.unstable_LowPriority,Or.unstable_NormalPriority,Or.unstable_Profiling,Or.unstable_UserBlockingPriority,Or.unstable_cancelCallback,Or.unstable_continueExecution,Or.unstable_getCurrentPriorityLevel,Or.unstable_getFirstCallbackNode,Or.unstable_next,Or.unstable_pauseExecution,Or.unstable_requestPaint,Or.unstable_runWithPriority,Or.unstable_scheduleCallback,Or.unstable_wrapCallback;var Vr=to(function(e,t){});Vr.unstable_now,Vr.unstable_shouldYield,Vr.unstable_forceFrameRate,Vr.unstable_IdlePriority,Vr.unstable_ImmediatePriority,Vr.unstable_LowPriority,Vr.unstable_NormalPriority,Vr.unstable_Profiling,Vr.unstable_UserBlockingPriority,Vr.unstable_cancelCallback,Vr.unstable_continueExecution,Vr.unstable_getCurrentPriorityLevel,Vr.unstable_getFirstCallbackNode,Vr.unstable_next,Vr.unstable_pauseExecution,Vr.unstable_requestPaint,Vr.unstable_runWithPriority,Vr.unstable_scheduleCallback,Vr.unstable_wrapCallback;var gx=to(function(e){e.exports=Or});gx.unstable_scheduleCallback,gx.unstable_cancelCallback;var cne=to(function(e){/** @license React v0.26.2
 * react-reconciler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */e.exports=function(t){var r={},n=une,i=nt,o=gx;function s(h){for(var d="https://reactjs.org/docs/error-decoder.html?invariant="+h,y=1;y<arguments.length;y++)d+="&args[]="+encodeURIComponent(arguments[y]);return"Minified React error #"+h+"; visit "+d+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var a=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,l=60103,u=60106,c=60107,f=60108,p=60114,v=60109,g=60110,b=60112,_=60113,w=60120,x=60115,T=60116,I=60121,R=60129,E=60130,O=60131;if(typeof Symbol=="function"&&Symbol.for){var P=Symbol.for;l=P("react.element"),u=P("react.portal"),c=P("react.fragment"),f=P("react.strict_mode"),p=P("react.profiler"),v=P("react.provider"),g=P("react.context"),b=P("react.forward_ref"),_=P("react.suspense"),w=P("react.suspense_list"),x=P("react.memo"),T=P("react.lazy"),I=P("react.block"),P("react.scope"),R=P("react.debug_trace_mode"),E=P("react.offscreen"),O=P("react.legacy_hidden")}var N=typeof Symbol=="function"&&Symbol.iterator;function A(h){return h===null||typeof h!="object"?null:typeof(h=N&&h[N]||h["@@iterator"])=="function"?h:null}function j(h){if(h==null)return null;if(typeof h=="function")return h.displayName||h.name||null;if(typeof h=="string")return h;switch(h){case c:return"Fragment";case u:return"Portal";case p:return"Profiler";case f:return"StrictMode";case _:return"Suspense";case w:return"SuspenseList"}if(typeof h=="object")switch(h.$$typeof){case g:return(h.displayName||"Context")+".Consumer";case v:return(h._context.displayName||"Context")+".Provider";case b:var d=h.render;return d=d.displayName||d.name||"",h.displayName||(d!==""?"ForwardRef("+d+")":"ForwardRef");case x:return j(h.type);case I:return j(h._render);case T:d=h._payload,h=h._init;try{return j(h(d))}catch{}}return null}function X(h){var d=h,y=h;if(h.alternate)for(;d.return;)d=d.return;else{h=d;do(1026&(d=h).flags)!=0&&(y=d.return),h=d.return;while(h)}return d.tag===3?y:null}function B(h){if(X(h)!==h)throw Error(s(188))}function ae(h){var d=h.alternate;if(!d){if((d=X(h))===null)throw Error(s(188));return d!==h?null:h}for(var y=h,S=d;;){var C=y.return;if(C===null)break;var U=C.alternate;if(U===null){if((S=C.return)!==null){y=S;continue}break}if(C.child===U.child){for(U=C.child;U;){if(U===y)return B(C),h;if(U===S)return B(C),d;U=U.sibling}throw Error(s(188))}if(y.return!==S.return)y=C,S=U;else{for(var z=!1,J=C.child;J;){if(J===y){z=!0,y=C,S=U;break}if(J===S){z=!0,S=C,y=U;break}J=J.sibling}if(!z){for(J=U.child;J;){if(J===y){z=!0,y=U,S=C;break}if(J===S){z=!0,S=U,y=C;break}J=J.sibling}if(!z)throw Error(s(189))}}if(y.alternate!==S)throw Error(s(190))}if(y.tag!==3)throw Error(s(188));return y.stateNode.current===y?h:d}function Y(h){if(!(h=ae(h)))return null;for(var d=h;;){if(d.tag===5||d.tag===6)return d;if(d.child)d.child.return=d,d=d.child;else{if(d===h)break;for(;!d.sibling;){if(!d.return||d.return===h)return null;d=d.return}d.sibling.return=d.return,d=d.sibling}}return null}function K(h,d){for(var y=h.alternate;d!==null;){if(d===h||d===y)return!0;d=d.return}return!1}var me,ue=t.getPublicInstance,ie=t.getRootHostContext,Q=t.getChildHostContext,ee=t.prepareForCommit,W=t.resetAfterCommit,te=t.createInstance,ye=t.appendInitialChild,Ce=t.finalizeInitialChildren,Ie=t.prepareUpdate,Ye=t.shouldSetTextContent,de=t.createTextInstance,F=t.scheduleTimeout,$=t.cancelTimeout,q=t.noTimeout,pe=t.isPrimaryRenderer,le=t.supportsMutation,Ee=t.supportsPersistence,Pe=t.supportsHydration,Oe=t.getInstanceFromNode,it=t.makeOpaqueHydratingObject,Et=t.makeClientId,Ot=t.beforeActiveInstanceBlur,Yt=t.afterActiveInstanceBlur,Kt=t.preparePortalMount,xt=t.supportsTestSelectors,Gr=t.findFiberRoot,L=t.getBoundingRect,H=t.getTextContent,Z=t.isHiddenSubtree,_e=t.matchAccessibilityRole,Ve=t.setFocusIfFocusable,ht=t.setupIntersectionObserver,D=t.appendChild,V=t.appendChildToContainer,re=t.commitTextUpdate,ve=t.commitMount,Ke=t.commitUpdate,rt=t.insertBefore,Qe=t.insertInContainerBefore,jt=t.removeChild,yt=t.removeChildFromContainer,Nt=t.resetTextContent,Ut=t.hideInstance,ur=t.hideTextInstance,di=t.unhideInstance,e1=t.unhideTextInstance,Mh=t.clearContainer,t1=t.cloneInstance,Bp=t.createContainerChildSet,Dp=t.appendChildToContainerChildSet,Gp=t.finalizeContainerChildren,Bh=t.replaceContainerChildren,Eo=t.cloneHiddenInstance,jp=t.cloneHiddenTextInstance,r1=t.canHydrateInstance,n1=t.canHydrateTextInstance,i1=t.isSuspenseInstancePending,o1=t.isSuspenseInstanceFallback,pi=t.getNextHydratableSibling,$p=t.getFirstHydratableChild,s1=t.hydrateInstance,a1=t.hydrateTextInstance,l1=t.getNextHydratableInstanceAfterSuspenseInstance,Hp=t.commitHydratedContainer,na=t.commitHydratedSuspenseInstance;function bl(h){if(me===void 0)try{throw Error()}catch(y){var d=y.stack.trim().match(/\n( *(at )?)/);me=d&&d[1]||""}return`
`+me+h}var Dh=!1;function Uu(h,d){if(!h||Dh)return"";Dh=!0;var y=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(d)if(d=function(){throw Error()},Object.defineProperty(d.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(d,[])}catch(ce){var S=ce}Reflect.construct(h,[],d)}else{try{d.call()}catch(ce){S=ce}h.call(d.prototype)}else{try{throw Error()}catch(ce){S=ce}h()}}catch(ce){if(ce&&S&&typeof ce.stack=="string"){for(var C=ce.stack.split(`
`),U=S.stack.split(`
`),z=C.length-1,J=U.length-1;1<=z&&0<=J&&C[z]!==U[J];)J--;for(;1<=z&&0<=J;z--,J--)if(C[z]!==U[J]){if(z!==1||J!==1)do if(z--,0>--J||C[z]!==U[J])return`
`+C[z].replace(" at new "," at ");while(1<=z&&0<=J);break}}}finally{Dh=!1,Error.prepareStackTrace=y}return(h=h?h.displayName||h.name:"")?bl(h):""}var Gh=[],ia=-1;function $n(h){return{current:h}}function qt(h){0>ia||(h.current=Gh[ia],Gh[ia]=null,ia--)}function cr(h,d){ia++,Gh[ia]=h.current,h.current=d}var Co={},Qr=$n(Co),Nn=$n(!1),us=Co;function cs(h,d){var y=h.type.contextTypes;if(!y)return Co;var S=h.stateNode;if(S&&S.__reactInternalMemoizedUnmaskedChildContext===d)return S.__reactInternalMemoizedMaskedChildContext;var C,U={};for(C in y)U[C]=d[C];return S&&((h=h.stateNode).__reactInternalMemoizedUnmaskedChildContext=d,h.__reactInternalMemoizedMaskedChildContext=U),U}function jr(h){return(h=h.childContextTypes)!=null}function Fu(){qt(Nn),qt(Qr)}function Mu(h,d,y){if(Qr.current!==Co)throw Error(s(168));cr(Qr,d),cr(Nn,y)}function zp(h,d,y){var S=h.stateNode;if(h=d.childContextTypes,typeof S.getChildContext!="function")return y;for(var C in S=S.getChildContext())if(!(C in h))throw Error(s(108,j(d)||"Unknown",C));return n({},y,S)}function Bu(h){return h=(h=h.stateNode)&&h.__reactInternalMemoizedMergedChildContext||Co,us=Qr.current,cr(Qr,h),cr(Nn,Nn.current),!0}function Vp(h,d,y){var S=h.stateNode;if(!S)throw Error(s(169));y?(h=zp(h,d,us),S.__reactInternalMemoizedMergedChildContext=h,qt(Nn),qt(Qr),cr(Qr,h)):qt(Nn),cr(Nn,y)}var jh=null,hs=null;(0,o.unstable_now)();var Du=0,Ft=8;function fs(h){if((1&h)!=0)return Ft=15,1;if((2&h)!=0)return Ft=14,2;if((4&h)!=0)return Ft=13,4;var d=24&h;return d!==0?(Ft=12,d):(32&h)!=0?(Ft=11,32):(d=192&h)!==0?(Ft=10,d):(256&h)!=0?(Ft=9,256):(d=3584&h)!==0?(Ft=8,d):(4096&h)!=0?(Ft=7,4096):(d=4186112&h)!==0?(Ft=6,d):(d=62914560&h)!==0?(Ft=5,d):67108864&h?(Ft=4,67108864):(134217728&h)!=0?(Ft=3,134217728):(d=805306368&h)!==0?(Ft=2,d):(1073741824&h)!=0?(Ft=1,1073741824):(Ft=8,h)}function wl(h,d){var y=h.pendingLanes;if(y===0)return Ft=0;var S=0,C=0,U=h.expiredLanes,z=h.suspendedLanes,J=h.pingedLanes;if(U!==0)S=U,C=Ft=15;else if((U=134217727&y)!==0){var ce=U&~z;ce!==0?(S=fs(ce),C=Ft):(J&=U)!==0&&(S=fs(J),C=Ft)}else(U=y&~z)!==0?(S=fs(U),C=Ft):J!==0&&(S=fs(J),C=Ft);if(S===0)return 0;if(S=y&((0>(S=31-oo(S))?0:1<<S)<<1)-1,d!==0&&d!==S&&(d&z)==0){if(fs(d),C<=Ft)return d;Ft=C}if((d=h.entangledLanes)!==0)for(h=h.entanglements,d&=S;0<d;)C=1<<(y=31-oo(d)),S|=h[y],d&=~C;return S}function Xp(h){return(h=-1073741825&h.pendingLanes)!==0?h:1073741824&h?1073741824:0}function Gu(h,d){switch(h){case 15:return 1;case 14:return 2;case 12:return(h=oa(24&~d))===0?Gu(10,d):h;case 10:return(h=oa(192&~d))===0?Gu(8,d):h;case 8:return(h=oa(3584&~d))===0&&(h=oa(4186112&~d))===0&&(h=512),h;case 2:return(d=oa(805306368&~d))===0&&(d=268435456),d}throw Error(s(358,h))}function oa(h){return h&-h}function $h(h){for(var d=[],y=0;31>y;y++)d.push(h);return d}function ju(h,d,y){h.pendingLanes|=d;var S=d-1;h.suspendedLanes&=S,h.pingedLanes&=S,(h=h.eventTimes)[d=31-oo(d)]=y}var oo=Math.clz32?Math.clz32:function(h){return h===0?32:31-(u1(h)/c1|0)|0},u1=Math.log,c1=Math.LN2,$u=o.unstable_runWithPriority,Io=o.unstable_scheduleCallback,Hu=o.unstable_cancelCallback,ds=o.unstable_shouldYield,Wp=o.unstable_requestPaint,Hh=o.unstable_now,h1=o.unstable_getCurrentPriorityLevel,zu=o.unstable_ImmediatePriority,Yp=o.unstable_UserBlockingPriority,Kp=o.unstable_NormalPriority,zh=o.unstable_LowPriority,No=o.unstable_IdlePriority,Vh={},qp=Wp!==void 0?Wp:function(){},so=null,sa=null,Vu=!1,Zp=Hh(),$r=1e4>Zp?Hh:function(){return Hh()-Zp};function ps(){switch(h1()){case zu:return 99;case Yp:return 98;case Kp:return 97;case zh:return 96;case No:return 95;default:throw Error(s(332))}}function Jp(h){switch(h){case 99:return zu;case 98:return Yp;case 97:return Kp;case 96:return zh;case 95:return No;default:throw Error(s(332))}}function Zn(h,d){return h=Jp(h),$u(h,d)}function xl(h,d,y){return h=Jp(h),Io(h,d,y)}function Pn(){if(sa!==null){var h=sa;sa=null,Hu(h)}Qp()}function Qp(){if(!Vu&&so!==null){Vu=!0;var h=0;try{var d=so;Zn(99,function(){for(;h<d.length;h++){var y=d[h];do y=y(!0);while(y!==null)}}),so=null}catch(y){throw so!==null&&(so=so.slice(h+1)),Io(zu,Pn),y}finally{Vu=!1}}}var f1=a.ReactCurrentBatchConfig,G=typeof Object.is=="function"?Object.is:function(h,d){return h===d&&(h!==0||1/h==1/d)||h!=h&&d!=d},oe=Object.prototype.hasOwnProperty;function fe(h,d){if(G(h,d))return!0;if(typeof h!="object"||h===null||typeof d!="object"||d===null)return!1;var y=Object.keys(h),S=Object.keys(d);if(y.length!==S.length)return!1;for(S=0;S<y.length;S++)if(!oe.call(d,y[S])||!G(h[y[S]],d[y[S]]))return!1;return!0}function Ge(h){switch(h.tag){case 5:return bl(h.type);case 16:return bl("Lazy");case 13:return bl("Suspense");case 19:return bl("SuspenseList");case 0:case 2:case 15:return h=Uu(h.type,!1);case 11:return h=Uu(h.type.render,!1);case 22:return h=Uu(h.type._render,!1);case 1:return h=Uu(h.type,!0);default:return""}}function Mt(h,d){if(h&&h.defaultProps){for(var y in d=n({},d),h=h.defaultProps)d[y]===void 0&&(d[y]=h[y]);return d}return d}var kr=$n(null),pn=null,Cr=null,Tl=null;function Po(){Tl=Cr=pn=null}function Xh(h,d){h=h.type._context,pe?(cr(kr,h._currentValue),h._currentValue=d):(cr(kr,h._currentValue2),h._currentValue2=d)}function Xu(h){var d=kr.current;qt(kr),h=h.type._context,pe?h._currentValue=d:h._currentValue2=d}function Wh(h,d){for(;h!==null;){var y=h.alternate;if((h.childLanes&d)===d){if(y===null||(y.childLanes&d)===d)break;y.childLanes|=d}else h.childLanes|=d,y!==null&&(y.childLanes|=d);h=h.return}}function Ao(h,d){pn=h,Tl=Cr=null,(h=h.dependencies)!==null&&h.firstContext!==null&&((h.lanes&d)!=0&&(ao=!0),h.firstContext=null)}function mn(h,d){if(Tl!==h&&d!==!1&&d!==0)if(typeof d=="number"&&d!==1073741823||(Tl=h,d=1073741823),d={context:h,observedBits:d,next:null},Cr===null){if(pn===null)throw Error(s(308));Cr=d,pn.dependencies={lanes:0,firstContext:d,responders:null}}else Cr=Cr.next=d;return pe?h._currentValue:h._currentValue2}var aa=!1;function d1(h){h.updateQueue={baseState:h.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null},effects:null}}function V4(h,d){h=h.updateQueue,d.updateQueue===h&&(d.updateQueue={baseState:h.baseState,firstBaseUpdate:h.firstBaseUpdate,lastBaseUpdate:h.lastBaseUpdate,shared:h.shared,effects:h.effects})}function la(h,d){return{eventTime:h,lane:d,tag:0,payload:null,callback:null,next:null}}function ua(h,d){if((h=h.updateQueue)!==null){var y=(h=h.shared).pending;y===null?d.next=d:(d.next=y.next,y.next=d),h.pending=d}}function X4(h,d){var y=h.updateQueue,S=h.alternate;if(S!==null&&y===(S=S.updateQueue)){var C=null,U=null;if((y=y.firstBaseUpdate)!==null){do{var z={eventTime:y.eventTime,lane:y.lane,tag:y.tag,payload:y.payload,callback:y.callback,next:null};U===null?C=U=z:U=U.next=z,y=y.next}while(y!==null);U===null?C=U=d:U=U.next=d}else C=U=d;return y={baseState:S.baseState,firstBaseUpdate:C,lastBaseUpdate:U,shared:S.shared,effects:S.effects},void(h.updateQueue=y)}(h=y.lastBaseUpdate)===null?y.firstBaseUpdate=d:h.next=d,y.lastBaseUpdate=d}function Yh(h,d,y,S){var C=h.updateQueue;aa=!1;var U=C.firstBaseUpdate,z=C.lastBaseUpdate,J=C.shared.pending;if(J!==null){C.shared.pending=null;var ce=J,Ne=ce.next;ce.next=null,z===null?U=Ne:z.next=Ne,z=ce;var ze=h.alternate;if(ze!==null){var tt=(ze=ze.updateQueue).lastBaseUpdate;tt!==z&&(tt===null?ze.firstBaseUpdate=Ne:tt.next=Ne,ze.lastBaseUpdate=ce)}}if(U!==null){for(tt=C.baseState,z=0,ze=Ne=ce=null;;){J=U.lane;var Ae=U.eventTime;if((S&J)===J){ze!==null&&(ze=ze.next={eventTime:Ae,lane:0,tag:U.tag,payload:U.payload,callback:U.callback,next:null});e:{var rr=h,dr=U;switch(J=d,Ae=y,dr.tag){case 1:if(typeof(rr=dr.payload)=="function"){tt=rr.call(Ae,tt,J);break e}tt=rr;break e;case 3:rr.flags=-4097&rr.flags|64;case 0:if((J=typeof(rr=dr.payload)=="function"?rr.call(Ae,tt,J):rr)==null)break e;tt=n({},tt,J);break e;case 2:aa=!0}}U.callback!==null&&(h.flags|=32,(J=C.effects)===null?C.effects=[U]:J.push(U))}else Ae={eventTime:Ae,lane:J,tag:U.tag,payload:U.payload,callback:U.callback,next:null},ze===null?(Ne=ze=Ae,ce=tt):ze=ze.next=Ae,z|=J;if((U=U.next)===null){if((J=C.shared.pending)===null)break;U=J.next,J.next=null,C.lastBaseUpdate=J,C.shared.pending=null}}ze===null&&(ce=tt),C.baseState=ce,C.firstBaseUpdate=Ne,C.lastBaseUpdate=ze,uf|=z,h.lanes=z,h.memoizedState=tt}}function W4(h,d,y){if(h=d.effects,d.effects=null,h!==null)for(d=0;d<h.length;d++){var S=h[d],C=S.callback;if(C!==null){if(S.callback=null,S=y,typeof C!="function")throw Error(s(191,C));C.call(S)}}}var Y4=new i.Component().refs;function em(h,d,y,S){y=(y=y(S,d=h.memoizedState))==null?d:n({},d,y),h.memoizedState=y,h.lanes===0&&(h.updateQueue.baseState=y)}var tm={isMounted:function(h){return!!(h=h._reactInternals)&&X(h)===h},enqueueSetState:function(h,d,y){h=h._reactInternals;var S=Qn(),C=fa(h),U=la(S,C);U.payload=d,y!=null&&(U.callback=y),ua(h,U),_s(h,C,S)},enqueueReplaceState:function(h,d,y){h=h._reactInternals;var S=Qn(),C=fa(h),U=la(S,C);U.tag=1,U.payload=d,y!=null&&(U.callback=y),ua(h,U),_s(h,C,S)},enqueueForceUpdate:function(h,d){h=h._reactInternals;var y=Qn(),S=fa(h),C=la(y,S);C.tag=2,d!=null&&(C.callback=d),ua(h,C),_s(h,S,y)}};function K4(h,d,y,S,C,U,z){return typeof(h=h.stateNode).shouldComponentUpdate=="function"?h.shouldComponentUpdate(S,U,z):!d.prototype||!d.prototype.isPureReactComponent||!fe(y,S)||!fe(C,U)}function q4(h,d,y){var S=!1,C=Co,U=d.contextType;return typeof U=="object"&&U!==null?U=mn(U):(C=jr(d)?us:Qr.current,U=(S=(S=d.contextTypes)!=null)?cs(h,C):Co),d=new d(y,U),h.memoizedState=d.state!==null&&d.state!==void 0?d.state:null,d.updater=tm,h.stateNode=d,d._reactInternals=h,S&&((h=h.stateNode).__reactInternalMemoizedUnmaskedChildContext=C,h.__reactInternalMemoizedMaskedChildContext=U),d}function Z4(h,d,y,S){h=d.state,typeof d.componentWillReceiveProps=="function"&&d.componentWillReceiveProps(y,S),typeof d.UNSAFE_componentWillReceiveProps=="function"&&d.UNSAFE_componentWillReceiveProps(y,S),d.state!==h&&tm.enqueueReplaceState(d,d.state,null)}function p1(h,d,y,S){var C=h.stateNode;C.props=y,C.state=h.memoizedState,C.refs=Y4,d1(h);var U=d.contextType;typeof U=="object"&&U!==null?C.context=mn(U):(U=jr(d)?us:Qr.current,C.context=cs(h,U)),Yh(h,y,C,S),C.state=h.memoizedState,typeof(U=d.getDerivedStateFromProps)=="function"&&(em(h,d,U,y),C.state=h.memoizedState),typeof d.getDerivedStateFromProps=="function"||typeof C.getSnapshotBeforeUpdate=="function"||typeof C.UNSAFE_componentWillMount!="function"&&typeof C.componentWillMount!="function"||(d=C.state,typeof C.componentWillMount=="function"&&C.componentWillMount(),typeof C.UNSAFE_componentWillMount=="function"&&C.UNSAFE_componentWillMount(),d!==C.state&&tm.enqueueReplaceState(C,C.state,null),Yh(h,y,C,S),C.state=h.memoizedState),typeof C.componentDidMount=="function"&&(h.flags|=4)}var rm=Array.isArray;function Kh(h,d,y){if((h=y.ref)!==null&&typeof h!="function"&&typeof h!="object"){if(y._owner){if(y=y._owner){if(y.tag!==1)throw Error(s(309));var S=y.stateNode}if(!S)throw Error(s(147,h));var C=""+h;return d!==null&&d.ref!==null&&typeof d.ref=="function"&&d.ref._stringRef===C?d.ref:((d=function(U){var z=S.refs;z===Y4&&(z=S.refs={}),U===null?delete z[C]:z[C]=U})._stringRef=C,d)}if(typeof h!="string")throw Error(s(284));if(!y._owner)throw Error(s(290,h))}return h}function nm(h,d){if(h.type!=="textarea")throw Error(s(31,Object.prototype.toString.call(d)==="[object Object]"?"object with keys {"+Object.keys(d).join(", ")+"}":d))}function J4(h){function d(se,ne){if(h){var he=se.lastEffect;he!==null?(he.nextEffect=ne,se.lastEffect=ne):se.firstEffect=se.lastEffect=ne,ne.nextEffect=null,ne.flags=8}}function y(se,ne){if(!h)return null;for(;ne!==null;)d(se,ne),ne=ne.sibling;return null}function S(se,ne){for(se=new Map;ne!==null;)ne.key!==null?se.set(ne.key,ne):se.set(ne.index,ne),ne=ne.sibling;return se}function C(se,ne){return(se=pa(se,ne)).index=0,se.sibling=null,se}function U(se,ne,he){return se.index=he,h?(he=se.alternate)!==null?(he=he.index)<ne?(se.flags=2,ne):he:(se.flags=2,ne):ne}function z(se){return h&&se.alternate===null&&(se.flags=2),se}function J(se,ne,he,Re){return ne===null||ne.tag!==6?((ne=r2(he,se.mode,Re)).return=se,ne):((ne=C(ne,he)).return=se,ne)}function ce(se,ne,he,Re){return ne!==null&&ne.elementType===he.type?((Re=C(ne,he.props)).ref=Kh(se,ne,he),Re.return=se,Re):((Re=Am(he.type,he.key,he.props,null,se.mode,Re)).ref=Kh(se,ne,he),Re.return=se,Re)}function Ne(se,ne,he,Re){return ne===null||ne.tag!==4||ne.stateNode.containerInfo!==he.containerInfo||ne.stateNode.implementation!==he.implementation?((ne=n2(he,se.mode,Re)).return=se,ne):((ne=C(ne,he.children||[])).return=se,ne)}function ze(se,ne,he,Re,qe){return ne===null||ne.tag!==7?((ne=ec(he,se.mode,Re,qe)).return=se,ne):((ne=C(ne,he)).return=se,ne)}function tt(se,ne,he){if(typeof ne=="string"||typeof ne=="number")return(ne=r2(""+ne,se.mode,he)).return=se,ne;if(typeof ne=="object"&&ne!==null){switch(ne.$$typeof){case l:return(he=Am(ne.type,ne.key,ne.props,null,se.mode,he)).ref=Kh(se,null,ne),he.return=se,he;case u:return(ne=n2(ne,se.mode,he)).return=se,ne}if(rm(ne)||A(ne))return(ne=ec(ne,se.mode,he,null)).return=se,ne;nm(se,ne)}return null}function Ae(se,ne,he,Re){var qe=ne!==null?ne.key:null;if(typeof he=="string"||typeof he=="number")return qe!==null?null:J(se,ne,""+he,Re);if(typeof he=="object"&&he!==null){switch(he.$$typeof){case l:return he.key===qe?he.type===c?ze(se,ne,he.props.children,Re,qe):ce(se,ne,he,Re):null;case u:return he.key===qe?Ne(se,ne,he,Re):null}if(rm(he)||A(he))return qe!==null?null:ze(se,ne,he,Re,null);nm(se,he)}return null}function rr(se,ne,he,Re,qe){if(typeof Re=="string"||typeof Re=="number")return J(ne,se=se.get(he)||null,""+Re,qe);if(typeof Re=="object"&&Re!==null){switch(Re.$$typeof){case l:return se=se.get(Re.key===null?he:Re.key)||null,Re.type===c?ze(ne,se,Re.props.children,qe,Re.key):ce(ne,se,Re,qe);case u:return Ne(ne,se=se.get(Re.key===null?he:Re.key)||null,Re,qe)}if(rm(Re)||A(Re))return ze(ne,se=se.get(he)||null,Re,qe,null);nm(ne,Re)}return null}function dr(se,ne,he,Re){for(var qe=null,Zt=null,st=ne,zt=ne=0,yn=null;st!==null&&zt<he.length;zt++){st.index>zt?(yn=st,st=null):yn=st.sibling;var Bt=Ae(se,st,he[zt],Re);if(Bt===null){st===null&&(st=yn);break}h&&st&&Bt.alternate===null&&d(se,st),ne=U(Bt,ne,zt),Zt===null?qe=Bt:Zt.sibling=Bt,Zt=Bt,st=yn}if(zt===he.length)return y(se,st),qe;if(st===null){for(;zt<he.length;zt++)(st=tt(se,he[zt],Re))!==null&&(ne=U(st,ne,zt),Zt===null?qe=st:Zt.sibling=st,Zt=st);return qe}for(st=S(se,st);zt<he.length;zt++)(yn=rr(st,se,zt,he[zt],Re))!==null&&(h&&yn.alternate!==null&&st.delete(yn.key===null?zt:yn.key),ne=U(yn,ne,zt),Zt===null?qe=yn:Zt.sibling=yn,Zt=yn);return h&&st.forEach(function(ma){return d(se,ma)}),qe}function Mi(se,ne,he,Re){var qe=A(he);if(typeof qe!="function")throw Error(s(150));if((he=qe.call(he))==null)throw Error(s(151));for(var Zt=qe=null,st=ne,zt=ne=0,yn=null,Bt=he.next();st!==null&&!Bt.done;zt++,Bt=he.next()){st.index>zt?(yn=st,st=null):yn=st.sibling;var ma=Ae(se,st,Bt.value,Re);if(ma===null){st===null&&(st=yn);break}h&&st&&ma.alternate===null&&d(se,st),ne=U(ma,ne,zt),Zt===null?qe=ma:Zt.sibling=ma,Zt=ma,st=yn}if(Bt.done)return y(se,st),qe;if(st===null){for(;!Bt.done;zt++,Bt=he.next())(Bt=tt(se,Bt.value,Re))!==null&&(ne=U(Bt,ne,zt),Zt===null?qe=Bt:Zt.sibling=Bt,Zt=Bt);return qe}for(st=S(se,st);!Bt.done;zt++,Bt=he.next())(Bt=rr(st,se,zt,Bt.value,Re))!==null&&(h&&Bt.alternate!==null&&st.delete(Bt.key===null?zt:Bt.key),ne=U(Bt,ne,zt),Zt===null?qe=Bt:Zt.sibling=Bt,Zt=Bt);return h&&st.forEach(function(p9){return d(se,p9)}),qe}return function(se,ne,he,Re){var qe=typeof he=="object"&&he!==null&&he.type===c&&he.key===null;qe&&(he=he.props.children);var Zt=typeof he=="object"&&he!==null;if(Zt)switch(he.$$typeof){case l:e:{for(Zt=he.key,qe=ne;qe!==null;){if(qe.key===Zt){switch(qe.tag){case 7:if(he.type===c){y(se,qe.sibling),(ne=C(qe,he.props.children)).return=se,se=ne;break e}break;default:if(qe.elementType===he.type){y(se,qe.sibling),(ne=C(qe,he.props)).ref=Kh(se,qe,he),ne.return=se,se=ne;break e}}y(se,qe);break}d(se,qe),qe=qe.sibling}he.type===c?((ne=ec(he.props.children,se.mode,Re,he.key)).return=se,se=ne):((Re=Am(he.type,he.key,he.props,null,se.mode,Re)).ref=Kh(se,ne,he),Re.return=se,se=Re)}return z(se);case u:e:{for(qe=he.key;ne!==null;){if(ne.key===qe){if(ne.tag===4&&ne.stateNode.containerInfo===he.containerInfo&&ne.stateNode.implementation===he.implementation){y(se,ne.sibling),(ne=C(ne,he.children||[])).return=se,se=ne;break e}y(se,ne);break}d(se,ne),ne=ne.sibling}(ne=n2(he,se.mode,Re)).return=se,se=ne}return z(se)}if(typeof he=="string"||typeof he=="number")return he=""+he,ne!==null&&ne.tag===6?(y(se,ne.sibling),(ne=C(ne,he)).return=se,se=ne):(y(se,ne),(ne=r2(he,se.mode,Re)).return=se,se=ne),z(se);if(rm(he))return dr(se,ne,he,Re);if(A(he))return Mi(se,ne,he,Re);if(Zt&&nm(se,he),he===void 0&&!qe)switch(se.tag){case 1:case 22:case 0:case 11:case 15:throw Error(s(152,j(se.type)||"Component"))}return y(se,ne)}}var im=J4(!0),Q4=J4(!1),qh={},Li=$n(qh),Zh=$n(qh),Wu=$n(qh);function Ro(h){if(h===qh)throw Error(s(174));return h}function m1(h,d){cr(Wu,d),cr(Zh,h),cr(Li,qh),h=ie(d),qt(Li),cr(Li,h)}function Yu(){qt(Li),qt(Zh),qt(Wu)}function eT(h){var d=Ro(Wu.current),y=Ro(Li.current);y!==(d=Q(y,h.type,d))&&(cr(Zh,h),cr(Li,d))}function v1(h){Zh.current===h&&(qt(Li),qt(Zh))}var Ir=$n(0);function om(h){for(var d=h;d!==null;){if(d.tag===13){var y=d.memoizedState;if(y!==null&&((y=y.dehydrated)===null||i1(y)||o1(y)))return d}else if(d.tag===19&&d.memoizedProps.revealOrder!==void 0){if((64&d.flags)!=0)return d}else if(d.child!==null){d.child.return=d,d=d.child;continue}if(d===h)break;for(;d.sibling===null;){if(d.return===null||d.return===h)return null;d=d.return}d.sibling.return=d.return,d=d.sibling}return null}var ms=null,Sl=null,ko=!1;function tT(h,d){var y=Fi(5,null,null,0);y.elementType="DELETED",y.type="DELETED",y.stateNode=d,y.return=h,y.flags=8,h.lastEffect!==null?(h.lastEffect.nextEffect=y,h.lastEffect=y):h.firstEffect=h.lastEffect=y}function rT(h,d){switch(h.tag){case 5:return(d=r1(d,h.type,h.pendingProps))!==null&&(h.stateNode=d,!0);case 6:return(d=n1(d,h.pendingProps))!==null&&(h.stateNode=d,!0);case 13:default:return!1}}function g1(h){if(ko){var d=Sl;if(d){var y=d;if(!rT(h,d)){if(!(d=pi(y))||!rT(h,d))return h.flags=-1025&h.flags|2,ko=!1,void(ms=h);tT(ms,y)}ms=h,Sl=$p(d)}else h.flags=-1025&h.flags|2,ko=!1,ms=h}}function nT(h){for(h=h.return;h!==null&&h.tag!==5&&h.tag!==3&&h.tag!==13;)h=h.return;ms=h}function sm(h){if(!Pe||h!==ms)return!1;if(!ko)return nT(h),ko=!0,!1;var d=h.type;if(h.tag!==5||d!=="head"&&d!=="body"&&!Ye(d,h.memoizedProps))for(d=Sl;d;)tT(h,d),d=pi(d);if(nT(h),h.tag===13){if(!Pe)throw Error(s(316));if(!(h=(h=h.memoizedState)!==null?h.dehydrated:null))throw Error(s(317));Sl=l1(h)}else Sl=ms?pi(h.stateNode):null;return!0}function y1(){Pe&&(Sl=ms=null,ko=!1)}var Ku=[];function _1(){for(var h=0;h<Ku.length;h++){var d=Ku[h];pe?d._workInProgressVersionPrimary=null:d._workInProgressVersionSecondary=null}Ku.length=0}var Jh=a.ReactCurrentDispatcher,Ui=a.ReactCurrentBatchConfig,Qh=0,Nr=null,Hn=null,vn=null,am=!1,ef=!1;function Jn(){throw Error(s(321))}function b1(h,d){if(d===null)return!1;for(var y=0;y<d.length&&y<h.length;y++)if(!G(h[y],d[y]))return!1;return!0}function w1(h,d,y,S,C,U){if(Qh=U,Nr=d,d.memoizedState=null,d.updateQueue=null,d.lanes=0,Jh.current=h===null||h.memoizedState===null?$7:H7,h=y(S,C),ef){U=0;do{if(ef=!1,!(25>U))throw Error(s(301));U+=1,vn=Hn=null,d.updateQueue=null,Jh.current=z7,h=y(S,C)}while(ef)}if(Jh.current=hm,d=Hn!==null&&Hn.next!==null,Qh=0,vn=Hn=Nr=null,am=!1,d)throw Error(s(300));return h}function El(){var h={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return vn===null?Nr.memoizedState=vn=h:vn=vn.next=h,vn}function Cl(){if(Hn===null){var h=Nr.alternate;h=h!==null?h.memoizedState:null}else h=Hn.next;var d=vn===null?Nr.memoizedState:vn.next;if(d!==null)vn=d,Hn=h;else{if(h===null)throw Error(s(310));h={memoizedState:(Hn=h).memoizedState,baseState:Hn.baseState,baseQueue:Hn.baseQueue,queue:Hn.queue,next:null},vn===null?Nr.memoizedState=vn=h:vn=vn.next=h}return vn}function Oo(h,d){return typeof d=="function"?d(h):d}function tf(h){var d=Cl(),y=d.queue;if(y===null)throw Error(s(311));y.lastRenderedReducer=h;var S=Hn,C=S.baseQueue,U=y.pending;if(U!==null){if(C!==null){var z=C.next;C.next=U.next,U.next=z}S.baseQueue=C=U,y.pending=null}if(C!==null){C=C.next,S=S.baseState;var J=z=U=null,ce=C;do{var Ne=ce.lane;if((Qh&Ne)===Ne)J!==null&&(J=J.next={lane:0,action:ce.action,eagerReducer:ce.eagerReducer,eagerState:ce.eagerState,next:null}),S=ce.eagerReducer===h?ce.eagerState:h(S,ce.action);else{var ze={lane:Ne,action:ce.action,eagerReducer:ce.eagerReducer,eagerState:ce.eagerState,next:null};J===null?(z=J=ze,U=S):J=J.next=ze,Nr.lanes|=Ne,uf|=Ne}ce=ce.next}while(ce!==null&&ce!==C);J===null?U=S:J.next=z,G(S,d.memoizedState)||(ao=!0),d.memoizedState=S,d.baseState=U,d.baseQueue=J,y.lastRenderedState=S}return[d.memoizedState,y.dispatch]}function rf(h){var d=Cl(),y=d.queue;if(y===null)throw Error(s(311));y.lastRenderedReducer=h;var S=y.dispatch,C=y.pending,U=d.memoizedState;if(C!==null){y.pending=null;var z=C=C.next;do U=h(U,z.action),z=z.next;while(z!==C);G(U,d.memoizedState)||(ao=!0),d.memoizedState=U,d.baseQueue===null&&(d.baseState=U),y.lastRenderedState=U}return[U,S]}function iT(h,d,y){var S=d._getVersion;S=S(d._source);var C=pe?d._workInProgressVersionPrimary:d._workInProgressVersionSecondary;if(C!==null?h=C===S:(h=h.mutableReadLanes,(h=(Qh&h)===h)&&(pe?d._workInProgressVersionPrimary=S:d._workInProgressVersionSecondary=S,Ku.push(d))),h)return y(d._source);throw Ku.push(d),Error(s(350))}function oT(h,d,y,S){var C=zn;if(C===null)throw Error(s(349));var U=d._getVersion,z=U(d._source),J=Jh.current,ce=J.useState(function(){return iT(C,d,y)}),Ne=ce[1],ze=ce[0];ce=vn;var tt=h.memoizedState,Ae=tt.refs,rr=Ae.getSnapshot,dr=tt.source;tt=tt.subscribe;var Mi=Nr;return h.memoizedState={refs:Ae,source:d,subscribe:S},J.useEffect(function(){Ae.getSnapshot=y,Ae.setSnapshot=Ne;var se=U(d._source);if(!G(z,se)){se=y(d._source),G(ze,se)||(Ne(se),se=fa(Mi),C.mutableReadLanes|=se&C.pendingLanes),se=C.mutableReadLanes,C.entangledLanes|=se;for(var ne=C.entanglements,he=se;0<he;){var Re=31-oo(he),qe=1<<Re;ne[Re]|=se,he&=~qe}}},[y,d,S]),J.useEffect(function(){return S(d._source,function(){var se=Ae.getSnapshot,ne=Ae.setSnapshot;try{ne(se(d._source));var he=fa(Mi);C.mutableReadLanes|=he&C.pendingLanes}catch(Re){ne(function(){throw Re})}})},[d,S]),G(rr,y)&&G(dr,d)&&G(tt,S)||((h={pending:null,dispatch:null,lastRenderedReducer:Oo,lastRenderedState:ze}).dispatch=Ne=E1.bind(null,Nr,h),ce.queue=h,ce.baseQueue=null,ze=iT(C,d,y),ce.memoizedState=ce.baseState=ze),ze}function sT(h,d,y){return oT(Cl(),h,d,y)}function nf(h){var d=El();return typeof h=="function"&&(h=h()),d.memoizedState=d.baseState=h,h=(h=d.queue={pending:null,dispatch:null,lastRenderedReducer:Oo,lastRenderedState:h}).dispatch=E1.bind(null,Nr,h),[d.memoizedState,h]}function lm(h,d,y,S){return h={tag:h,create:d,destroy:y,deps:S,next:null},(d=Nr.updateQueue)===null?(d={lastEffect:null},Nr.updateQueue=d,d.lastEffect=h.next=h):(y=d.lastEffect)===null?d.lastEffect=h.next=h:(S=y.next,y.next=h,h.next=S,d.lastEffect=h),h}function aT(h){return h={current:h},El().memoizedState=h}function um(){return Cl().memoizedState}function x1(h,d,y,S){var C=El();Nr.flags|=h,C.memoizedState=lm(1|d,y,void 0,S===void 0?null:S)}function T1(h,d,y,S){var C=Cl();S=S===void 0?null:S;var U=void 0;if(Hn!==null){var z=Hn.memoizedState;if(U=z.destroy,S!==null&&b1(S,z.deps))return void lm(d,y,U,S)}Nr.flags|=h,C.memoizedState=lm(1|d,y,U,S)}function lT(h,d){return x1(516,4,h,d)}function cm(h,d){return T1(516,4,h,d)}function uT(h,d){return T1(4,2,h,d)}function cT(h,d){return typeof d=="function"?(h=h(),d(h),function(){d(null)}):d!=null?(h=h(),d.current=h,function(){d.current=null}):void 0}function hT(h,d,y){return y=y!=null?y.concat([h]):null,T1(4,2,cT.bind(null,d,h),y)}function S1(){}function fT(h,d){var y=Cl();d=d===void 0?null:d;var S=y.memoizedState;return S!==null&&d!==null&&b1(d,S[1])?S[0]:(y.memoizedState=[h,d],h)}function dT(h,d){var y=Cl();d=d===void 0?null:d;var S=y.memoizedState;return S!==null&&d!==null&&b1(d,S[1])?S[0]:(h=h(),y.memoizedState=[h,d],h)}function j7(h,d){var y=ps();Zn(98>y?98:y,function(){h(!0)}),Zn(97<y?97:y,function(){var S=Ui.transition;Ui.transition=1;try{h(!1),d()}finally{Ui.transition=S}})}function E1(h,d,y){var S=Qn(),C=fa(h),U={lane:C,action:y,eagerReducer:null,eagerState:null,next:null},z=d.pending;if(z===null?U.next=U:(U.next=z.next,z.next=U),d.pending=U,z=h.alternate,h===Nr||z!==null&&z===Nr)ef=am=!0;else{if(h.lanes===0&&(z===null||z.lanes===0)&&(z=d.lastRenderedReducer)!==null)try{var J=d.lastRenderedState,ce=z(J,y);if(U.eagerReducer=z,U.eagerState=ce,G(ce,J))return}catch{}_s(h,C,S)}}var hm={readContext:mn,useCallback:Jn,useContext:Jn,useEffect:Jn,useImperativeHandle:Jn,useLayoutEffect:Jn,useMemo:Jn,useReducer:Jn,useRef:Jn,useState:Jn,useDebugValue:Jn,useDeferredValue:Jn,useTransition:Jn,useMutableSource:Jn,useOpaqueIdentifier:Jn,unstable_isNewReconciler:!1},$7={readContext:mn,useCallback:function(h,d){return El().memoizedState=[h,d===void 0?null:d],h},useContext:mn,useEffect:lT,useImperativeHandle:function(h,d,y){return y=y!=null?y.concat([h]):null,x1(4,2,cT.bind(null,d,h),y)},useLayoutEffect:function(h,d){return x1(4,2,h,d)},useMemo:function(h,d){var y=El();return d=d===void 0?null:d,h=h(),y.memoizedState=[h,d],h},useReducer:function(h,d,y){var S=El();return d=y!==void 0?y(d):d,S.memoizedState=S.baseState=d,h=(h=S.queue={pending:null,dispatch:null,lastRenderedReducer:h,lastRenderedState:d}).dispatch=E1.bind(null,Nr,h),[S.memoizedState,h]},useRef:aT,useState:nf,useDebugValue:S1,useDeferredValue:function(h){var d=nf(h),y=d[0],S=d[1];return lT(function(){var C=Ui.transition;Ui.transition=1;try{S(h)}finally{Ui.transition=C}},[h]),y},useTransition:function(){var h=nf(!1),d=h[0];return aT(h=j7.bind(null,h[1])),[h,d]},useMutableSource:function(h,d,y){var S=El();return S.memoizedState={refs:{getSnapshot:d,setSnapshot:null},source:h,subscribe:y},oT(S,h,d,y)},useOpaqueIdentifier:function(){if(ko){var h=!1,d=it(function(){throw h||(h=!0,y(Et())),Error(s(355))}),y=nf(d)[1];return(2&Nr.mode)==0&&(Nr.flags|=516,lm(5,function(){y(Et())},void 0,null)),d}return nf(d=Et()),d},unstable_isNewReconciler:!1},H7={readContext:mn,useCallback:fT,useContext:mn,useEffect:cm,useImperativeHandle:hT,useLayoutEffect:uT,useMemo:dT,useReducer:tf,useRef:um,useState:function(){return tf(Oo)},useDebugValue:S1,useDeferredValue:function(h){var d=tf(Oo),y=d[0],S=d[1];return cm(function(){var C=Ui.transition;Ui.transition=1;try{S(h)}finally{Ui.transition=C}},[h]),y},useTransition:function(){var h=tf(Oo)[0];return[um().current,h]},useMutableSource:sT,useOpaqueIdentifier:function(){return tf(Oo)[0]},unstable_isNewReconciler:!1},z7={readContext:mn,useCallback:fT,useContext:mn,useEffect:cm,useImperativeHandle:hT,useLayoutEffect:uT,useMemo:dT,useReducer:rf,useRef:um,useState:function(){return rf(Oo)},useDebugValue:S1,useDeferredValue:function(h){var d=rf(Oo),y=d[0],S=d[1];return cm(function(){var C=Ui.transition;Ui.transition=1;try{S(h)}finally{Ui.transition=C}},[h]),y},useTransition:function(){var h=rf(Oo)[0];return[um().current,h]},useMutableSource:sT,useOpaqueIdentifier:function(){return rf(Oo)[0]},unstable_isNewReconciler:!1},V7=a.ReactCurrentOwner,ao=!1;function mi(h,d,y,S){d.child=h===null?Q4(d,null,y,S):im(d,h.child,y,S)}function pT(h,d,y,S,C){y=y.render;var U=d.ref;return Ao(d,C),S=w1(h,d,y,S,U,C),h===null||ao?(d.flags|=1,mi(h,d,S,C),d.child):(d.updateQueue=h.updateQueue,d.flags&=-517,h.lanes&=~C,vs(h,d,C))}function mT(h,d,y,S,C,U){if(h===null){var z=y.type;return typeof z!="function"||e2(z)||z.defaultProps!==void 0||y.compare!==null||y.defaultProps!==void 0?((h=Am(y.type,null,S,d,d.mode,U)).ref=d.ref,h.return=d,d.child=h):(d.tag=15,d.type=z,vT(h,d,z,S,C,U))}return z=h.child,(C&U)==0&&(C=z.memoizedProps,(y=(y=y.compare)!==null?y:fe)(C,S)&&h.ref===d.ref)?vs(h,d,U):(d.flags|=1,(h=pa(z,S)).ref=d.ref,h.return=d,d.child=h)}function vT(h,d,y,S,C,U){if(h!==null&&fe(h.memoizedProps,S)&&h.ref===d.ref){if(ao=!1,(U&C)==0)return d.lanes=h.lanes,vs(h,d,U);(16384&h.flags)!=0&&(ao=!0)}return C1(h,d,y,S,U)}function gT(h,d,y){var S=d.pendingProps,C=S.children,U=h!==null?h.memoizedState:null;if(S.mode==="hidden"||S.mode==="unstable-defer-without-hiding")if((4&d.mode)==0)d.memoizedState={baseLanes:0},Im(d,y);else{if((1073741824&y)==0)return h=U!==null?U.baseLanes|y:y,d.lanes=d.childLanes=1073741824,d.memoizedState={baseLanes:h},Im(d,h),null;d.memoizedState={baseLanes:0},Im(d,U!==null?U.baseLanes:y)}else U!==null?(S=U.baseLanes|y,d.memoizedState=null):S=y,Im(d,S);return mi(h,d,C,y),d.child}function yT(h,d){var y=d.ref;(h===null&&y!==null||h!==null&&h.ref!==y)&&(d.flags|=128)}function C1(h,d,y,S,C){var U=jr(y)?us:Qr.current;return U=cs(d,U),Ao(d,C),y=w1(h,d,y,S,U,C),h===null||ao?(d.flags|=1,mi(h,d,y,C),d.child):(d.updateQueue=h.updateQueue,d.flags&=-517,h.lanes&=~C,vs(h,d,C))}function _T(h,d,y,S,C){if(jr(y)){var U=!0;Bu(d)}else U=!1;if(Ao(d,C),d.stateNode===null)h!==null&&(h.alternate=null,d.alternate=null,d.flags|=2),q4(d,y,S),p1(d,y,S,C),S=!0;else if(h===null){var z=d.stateNode,J=d.memoizedProps;z.props=J;var ce=z.context,Ne=y.contextType;typeof Ne=="object"&&Ne!==null?Ne=mn(Ne):Ne=cs(d,Ne=jr(y)?us:Qr.current);var ze=y.getDerivedStateFromProps,tt=typeof ze=="function"||typeof z.getSnapshotBeforeUpdate=="function";tt||typeof z.UNSAFE_componentWillReceiveProps!="function"&&typeof z.componentWillReceiveProps!="function"||(J!==S||ce!==Ne)&&Z4(d,z,S,Ne),aa=!1;var Ae=d.memoizedState;z.state=Ae,Yh(d,S,z,C),ce=d.memoizedState,J!==S||Ae!==ce||Nn.current||aa?(typeof ze=="function"&&(em(d,y,ze,S),ce=d.memoizedState),(J=aa||K4(d,y,J,S,Ae,ce,Ne))?(tt||typeof z.UNSAFE_componentWillMount!="function"&&typeof z.componentWillMount!="function"||(typeof z.componentWillMount=="function"&&z.componentWillMount(),typeof z.UNSAFE_componentWillMount=="function"&&z.UNSAFE_componentWillMount()),typeof z.componentDidMount=="function"&&(d.flags|=4)):(typeof z.componentDidMount=="function"&&(d.flags|=4),d.memoizedProps=S,d.memoizedState=ce),z.props=S,z.state=ce,z.context=Ne,S=J):(typeof z.componentDidMount=="function"&&(d.flags|=4),S=!1)}else{z=d.stateNode,V4(h,d),J=d.memoizedProps,Ne=d.type===d.elementType?J:Mt(d.type,J),z.props=Ne,tt=d.pendingProps,Ae=z.context,typeof(ce=y.contextType)=="object"&&ce!==null?ce=mn(ce):ce=cs(d,ce=jr(y)?us:Qr.current);var rr=y.getDerivedStateFromProps;(ze=typeof rr=="function"||typeof z.getSnapshotBeforeUpdate=="function")||typeof z.UNSAFE_componentWillReceiveProps!="function"&&typeof z.componentWillReceiveProps!="function"||(J!==tt||Ae!==ce)&&Z4(d,z,S,ce),aa=!1,Ae=d.memoizedState,z.state=Ae,Yh(d,S,z,C);var dr=d.memoizedState;J!==tt||Ae!==dr||Nn.current||aa?(typeof rr=="function"&&(em(d,y,rr,S),dr=d.memoizedState),(Ne=aa||K4(d,y,Ne,S,Ae,dr,ce))?(ze||typeof z.UNSAFE_componentWillUpdate!="function"&&typeof z.componentWillUpdate!="function"||(typeof z.componentWillUpdate=="function"&&z.componentWillUpdate(S,dr,ce),typeof z.UNSAFE_componentWillUpdate=="function"&&z.UNSAFE_componentWillUpdate(S,dr,ce)),typeof z.componentDidUpdate=="function"&&(d.flags|=4),typeof z.getSnapshotBeforeUpdate=="function"&&(d.flags|=256)):(typeof z.componentDidUpdate!="function"||J===h.memoizedProps&&Ae===h.memoizedState||(d.flags|=4),typeof z.getSnapshotBeforeUpdate!="function"||J===h.memoizedProps&&Ae===h.memoizedState||(d.flags|=256),d.memoizedProps=S,d.memoizedState=dr),z.props=S,z.state=dr,z.context=ce,S=Ne):(typeof z.componentDidUpdate!="function"||J===h.memoizedProps&&Ae===h.memoizedState||(d.flags|=4),typeof z.getSnapshotBeforeUpdate!="function"||J===h.memoizedProps&&Ae===h.memoizedState||(d.flags|=256),S=!1)}return I1(h,d,y,S,U,C)}function I1(h,d,y,S,C,U){yT(h,d);var z=(64&d.flags)!=0;if(!S&&!z)return C&&Vp(d,y,!1),vs(h,d,U);S=d.stateNode,V7.current=d;var J=z&&typeof y.getDerivedStateFromError!="function"?null:S.render();return d.flags|=1,h!==null&&z?(d.child=im(d,h.child,null,U),d.child=im(d,null,J,U)):mi(h,d,J,U),d.memoizedState=S.state,C&&Vp(d,y,!0),d.child}function bT(h){var d=h.stateNode;d.pendingContext?Mu(0,d.pendingContext,d.pendingContext!==d.context):d.context&&Mu(0,d.context,!1),m1(h,d.containerInfo)}var of,sf,fm,dm,N1={dehydrated:null,retryLane:0};function wT(h,d,y){var S,C=d.pendingProps,U=Ir.current,z=!1;return(S=(64&d.flags)!=0)||(S=(h===null||h.memoizedState!==null)&&(2&U)!=0),S?(z=!0,d.flags&=-65):h!==null&&h.memoizedState===null||C.fallback===void 0||C.unstable_avoidThisFallback===!0||(U|=1),cr(Ir,1&U),h===null?(C.fallback!==void 0&&g1(d),h=C.children,U=C.fallback,z?(h=xT(d,h,U,y),d.child.memoizedState={baseLanes:y},d.memoizedState=N1,h):typeof C.unstable_expectedLoadTime=="number"?(h=xT(d,h,U,y),d.child.memoizedState={baseLanes:y},d.memoizedState=N1,d.lanes=33554432,h):((y=t2({mode:"visible",children:h},d.mode,y,null)).return=d,d.child=y)):(h.memoizedState,z?(C=W7(h,d,C.children,C.fallback,y),z=d.child,U=h.child.memoizedState,z.memoizedState=U===null?{baseLanes:y}:{baseLanes:U.baseLanes|y},z.childLanes=h.childLanes&~y,d.memoizedState=N1,C):(y=X7(h,d,C.children,y),d.memoizedState=null,y))}function xT(h,d,y,S){var C=h.mode,U=h.child;return d={mode:"hidden",children:d},(2&C)==0&&U!==null?(U.childLanes=0,U.pendingProps=d):U=t2(d,C,0,null),y=ec(y,C,S,null),U.return=h,y.return=h,U.sibling=y,h.child=U,y}function X7(h,d,y,S){var C=h.child;return h=C.sibling,y=pa(C,{mode:"visible",children:y}),(2&d.mode)==0&&(y.lanes=S),y.return=d,y.sibling=null,h!==null&&(h.nextEffect=null,h.flags=8,d.firstEffect=d.lastEffect=h),d.child=y}function W7(h,d,y,S,C){var U=d.mode,z=h.child;h=z.sibling;var J={mode:"hidden",children:y};return(2&U)==0&&d.child!==z?((y=d.child).childLanes=0,y.pendingProps=J,(z=y.lastEffect)!==null?(d.firstEffect=y.firstEffect,d.lastEffect=z,z.nextEffect=null):d.firstEffect=d.lastEffect=null):y=pa(z,J),h!==null?S=pa(h,S):(S=ec(S,U,C,null)).flags|=2,S.return=d,y.return=d,y.sibling=S,d.child=y,S}function TT(h,d){h.lanes|=d;var y=h.alternate;y!==null&&(y.lanes|=d),Wh(h.return,d)}function P1(h,d,y,S,C,U){var z=h.memoizedState;z===null?h.memoizedState={isBackwards:d,rendering:null,renderingStartTime:0,last:S,tail:y,tailMode:C,lastEffect:U}:(z.isBackwards=d,z.rendering=null,z.renderingStartTime=0,z.last=S,z.tail=y,z.tailMode=C,z.lastEffect=U)}function ST(h,d,y){var S=d.pendingProps,C=S.revealOrder,U=S.tail;if(mi(h,d,S.children,y),(2&(S=Ir.current))!=0)S=1&S|2,d.flags|=64;else{if(h!==null&&(64&h.flags)!=0)e:for(h=d.child;h!==null;){if(h.tag===13)h.memoizedState!==null&&TT(h,y);else if(h.tag===19)TT(h,y);else if(h.child!==null){h.child.return=h,h=h.child;continue}if(h===d)break e;for(;h.sibling===null;){if(h.return===null||h.return===d)break e;h=h.return}h.sibling.return=h.return,h=h.sibling}S&=1}if(cr(Ir,S),(2&d.mode)==0)d.memoizedState=null;else switch(C){case"forwards":for(y=d.child,C=null;y!==null;)(h=y.alternate)!==null&&om(h)===null&&(C=y),y=y.sibling;(y=C)===null?(C=d.child,d.child=null):(C=y.sibling,y.sibling=null),P1(d,!1,C,y,U,d.lastEffect);break;case"backwards":for(y=null,C=d.child,d.child=null;C!==null;){if((h=C.alternate)!==null&&om(h)===null){d.child=C;break}h=C.sibling,C.sibling=y,y=C,C=h}P1(d,!0,y,null,U,d.lastEffect);break;case"together":P1(d,!1,null,null,void 0,d.lastEffect);break;default:d.memoizedState=null}return d.child}function vs(h,d,y){if(h!==null&&(d.dependencies=h.dependencies),uf|=d.lanes,(y&d.childLanes)!=0){if(h!==null&&d.child!==h.child)throw Error(s(153));if(d.child!==null){for(y=pa(h=d.child,h.pendingProps),d.child=y,y.return=d;h.sibling!==null;)h=h.sibling,(y=y.sibling=pa(h,h.pendingProps)).return=d;y.sibling=null}return d.child}return null}function Lo(h){h.flags|=4}if(le)of=function(h,d){for(var y=d.child;y!==null;){if(y.tag===5||y.tag===6)ye(h,y.stateNode);else if(y.tag!==4&&y.child!==null){y.child.return=y,y=y.child;continue}if(y===d)break;for(;y.sibling===null;){if(y.return===null||y.return===d)return;y=y.return}y.sibling.return=y.return,y=y.sibling}},sf=function(){},fm=function(h,d,y,S,C){if((h=h.memoizedProps)!==S){var U=d.stateNode,z=Ro(Li.current);y=Ie(U,y,h,S,C,z),(d.updateQueue=y)&&Lo(d)}},dm=function(h,d,y,S){y!==S&&Lo(d)};else if(Ee){of=function(h,d,y,S){for(var C=d.child;C!==null;){if(C.tag===5){var U=C.stateNode;y&&S&&(U=Eo(U,C.type,C.memoizedProps,C)),ye(h,U)}else if(C.tag===6)U=C.stateNode,y&&S&&(U=jp(U,C.memoizedProps,C)),ye(h,U);else if(C.tag!==4){if(C.tag===13&&(4&C.flags)!=0&&(U=C.memoizedState!==null)){var z=C.child;if(z!==null&&(z.child!==null&&(z.child.return=z,of(h,z,!0,U)),(U=z.sibling)!==null)){U.return=C,C=U;continue}}if(C.child!==null){C.child.return=C,C=C.child;continue}}if(C===d)break;for(;C.sibling===null;){if(C.return===null||C.return===d)return;C=C.return}C.sibling.return=C.return,C=C.sibling}};var ET=function(h,d,y,S){for(var C=d.child;C!==null;){if(C.tag===5){var U=C.stateNode;y&&S&&(U=Eo(U,C.type,C.memoizedProps,C)),Dp(h,U)}else if(C.tag===6)U=C.stateNode,y&&S&&(U=jp(U,C.memoizedProps,C)),Dp(h,U);else if(C.tag!==4){if(C.tag===13&&(4&C.flags)!=0&&(U=C.memoizedState!==null)){var z=C.child;if(z!==null&&(z.child!==null&&(z.child.return=z,ET(h,z,!0,U)),(U=z.sibling)!==null)){U.return=C,C=U;continue}}if(C.child!==null){C.child.return=C,C=C.child;continue}}if(C===d)break;for(;C.sibling===null;){if(C.return===null||C.return===d)return;C=C.return}C.sibling.return=C.return,C=C.sibling}};sf=function(h){var d=h.stateNode;if(h.firstEffect!==null){var y=d.containerInfo,S=Bp(y);ET(S,h,!1,!1),d.pendingChildren=S,Lo(h),Gp(y,S)}},fm=function(h,d,y,S,C){var U=h.stateNode,z=h.memoizedProps;if((h=d.firstEffect===null)&&z===S)d.stateNode=U;else{var J=d.stateNode,ce=Ro(Li.current),Ne=null;z!==S&&(Ne=Ie(J,y,z,S,C,ce)),h&&Ne===null?d.stateNode=U:(U=t1(U,Ne,y,z,S,d,h,J),Ce(U,y,S,C,ce)&&Lo(d),d.stateNode=U,h?Lo(d):of(U,d,!1,!1))}},dm=function(h,d,y,S){y!==S?(h=Ro(Wu.current),y=Ro(Li.current),d.stateNode=de(S,h,y,d),Lo(d)):d.stateNode=h.stateNode}}else sf=function(){},fm=function(){},dm=function(){};function af(h,d){if(!ko)switch(h.tailMode){case"hidden":d=h.tail;for(var y=null;d!==null;)d.alternate!==null&&(y=d),d=d.sibling;y===null?h.tail=null:y.sibling=null;break;case"collapsed":y=h.tail;for(var S=null;y!==null;)y.alternate!==null&&(S=y),y=y.sibling;S===null?d||h.tail===null?h.tail=null:h.tail.sibling=null:S.sibling=null}}function Y7(h,d,y){var S=d.pendingProps;switch(d.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return null;case 1:return jr(d.type)&&Fu(),null;case 3:return Yu(),qt(Nn),qt(Qr),_1(),(S=d.stateNode).pendingContext&&(S.context=S.pendingContext,S.pendingContext=null),h!==null&&h.child!==null||(sm(d)?Lo(d):S.hydrate||(d.flags|=256)),sf(d),null;case 5:v1(d);var C=Ro(Wu.current);if(y=d.type,h!==null&&d.stateNode!=null)fm(h,d,y,S,C),h.ref!==d.ref&&(d.flags|=128);else{if(!S){if(d.stateNode===null)throw Error(s(166));return null}if(h=Ro(Li.current),sm(d)){if(!Pe)throw Error(s(175));h=s1(d.stateNode,d.type,d.memoizedProps,C,h,d),d.updateQueue=h,h!==null&&Lo(d)}else{var U=te(y,S,C,h,d);of(U,d,!1,!1),d.stateNode=U,Ce(U,y,S,C,h)&&Lo(d)}d.ref!==null&&(d.flags|=128)}return null;case 6:if(h&&d.stateNode!=null)dm(h,d,h.memoizedProps,S);else{if(typeof S!="string"&&d.stateNode===null)throw Error(s(166));if(h=Ro(Wu.current),C=Ro(Li.current),sm(d)){if(!Pe)throw Error(s(176));a1(d.stateNode,d.memoizedProps,d)&&Lo(d)}else d.stateNode=de(S,h,C,d)}return null;case 13:return qt(Ir),S=d.memoizedState,(64&d.flags)!=0?(d.lanes=y,d):(S=S!==null,C=!1,h===null?d.memoizedProps.fallback!==void 0&&sm(d):C=h.memoizedState!==null,S&&!C&&(2&d.mode)!=0&&(h===null&&d.memoizedProps.unstable_avoidThisFallback!==!0||(1&Ir.current)!=0?gn===0&&(gn=3):(gn!==0&&gn!==3||(gn=4),zn===null||(134217727&uf)==0&&(134217727&Zu)==0||Ju(zn,An))),Ee&&S&&(d.flags|=4),le&&(S||C)&&(d.flags|=4),null);case 4:return Yu(),sf(d),h===null&&Kt(d.stateNode.containerInfo),null;case 10:return Xu(d),null;case 17:return jr(d.type)&&Fu(),null;case 19:if(qt(Ir),(S=d.memoizedState)===null)return null;if(C=(64&d.flags)!=0,(U=S.rendering)===null)if(C)af(S,!1);else{if(gn!==0||h!==null&&(64&h.flags)!=0)for(h=d.child;h!==null;){if((U=om(h))!==null){for(d.flags|=64,af(S,!1),(h=U.updateQueue)!==null&&(d.updateQueue=h,d.flags|=4),S.lastEffect===null&&(d.firstEffect=null),d.lastEffect=S.lastEffect,h=y,S=d.child;S!==null;)y=h,(C=S).flags&=2,C.nextEffect=null,C.firstEffect=null,C.lastEffect=null,(U=C.alternate)===null?(C.childLanes=0,C.lanes=y,C.child=null,C.memoizedProps=null,C.memoizedState=null,C.updateQueue=null,C.dependencies=null,C.stateNode=null):(C.childLanes=U.childLanes,C.lanes=U.lanes,C.child=U.child,C.memoizedProps=U.memoizedProps,C.memoizedState=U.memoizedState,C.updateQueue=U.updateQueue,C.type=U.type,y=U.dependencies,C.dependencies=y===null?null:{lanes:y.lanes,firstContext:y.firstContext}),S=S.sibling;return cr(Ir,1&Ir.current|2),d.child}h=h.sibling}S.tail!==null&&$r()>V1&&(d.flags|=64,C=!0,af(S,!1),d.lanes=33554432)}else{if(!C)if((h=om(U))!==null){if(d.flags|=64,C=!0,(h=h.updateQueue)!==null&&(d.updateQueue=h,d.flags|=4),af(S,!0),S.tail===null&&S.tailMode==="hidden"&&!U.alternate&&!ko)return(d=d.lastEffect=S.lastEffect)!==null&&(d.nextEffect=null),null}else 2*$r()-S.renderingStartTime>V1&&y!==1073741824&&(d.flags|=64,C=!0,af(S,!1),d.lanes=33554432);S.isBackwards?(U.sibling=d.child,d.child=U):((h=S.last)!==null?h.sibling=U:d.child=U,S.last=U)}return S.tail!==null?(h=S.tail,S.rendering=h,S.tail=h.sibling,S.lastEffect=d.lastEffect,S.renderingStartTime=$r(),h.sibling=null,d=Ir.current,cr(Ir,C?1&d|2:1&d),h):null;case 23:case 24:return Z1(),h!==null&&h.memoizedState!==null!=(d.memoizedState!==null)&&S.mode!=="unstable-defer-without-hiding"&&(d.flags|=4),null}throw Error(s(156,d.tag))}function K7(h){switch(h.tag){case 1:jr(h.type)&&Fu();var d=h.flags;return 4096&d?(h.flags=-4097&d|64,h):null;case 3:if(Yu(),qt(Nn),qt(Qr),_1(),(64&(d=h.flags))!=0)throw Error(s(285));return h.flags=-4097&d|64,h;case 5:return v1(h),null;case 13:return qt(Ir),4096&(d=h.flags)?(h.flags=-4097&d|64,h):null;case 19:return qt(Ir),null;case 4:return Yu(),null;case 10:return Xu(h),null;case 23:case 24:return Z1(),null;default:return null}}function A1(h,d){try{var y="",S=d;do y+=Ge(S),S=S.return;while(S);var C=y}catch(U){C=`
Error generating stack: `+U.message+`
`+U.stack}return{value:h,source:d,stack:C}}function R1(h,d){try{console.error(d.value)}catch(y){setTimeout(function(){throw y})}}var q7=typeof WeakMap=="function"?WeakMap:Map;function CT(h,d,y){(y=la(-1,y)).tag=3,y.payload={element:null};var S=d.value;return y.callback=function(){Tm||(Tm=!0,X1=S),R1(0,d)},y}function IT(h,d,y){(y=la(-1,y)).tag=3;var S=h.type.getDerivedStateFromError;if(typeof S=="function"){var C=d.value;y.payload=function(){return R1(0,d),S(C)}}var U=h.stateNode;return U!==null&&typeof U.componentDidCatch=="function"&&(y.callback=function(){typeof S!="function"&&(Uo===null?Uo=new Set([this]):Uo.add(this),R1(0,d));var z=d.stack;this.componentDidCatch(d.value,{componentStack:z!==null?z:""})}),y}var Z7=typeof WeakSet=="function"?WeakSet:Set;function NT(h){var d=h.ref;if(d!==null)if(typeof d=="function")try{d(null)}catch(y){da(h,y)}else d.current=null}function J7(h,d){switch(d.tag){case 0:case 11:case 15:case 22:return;case 1:if(256&d.flags&&h!==null){var y=h.memoizedProps,S=h.memoizedState;d=(h=d.stateNode).getSnapshotBeforeUpdate(d.elementType===d.type?y:Mt(d.type,y),S),h.__reactInternalSnapshotBeforeUpdate=d}return;case 3:return void(le&&256&d.flags&&Mh(d.stateNode.containerInfo));case 5:case 6:case 4:case 17:return}throw Error(s(163))}function PT(h,d){if((d=(d=d.updateQueue)!==null?d.lastEffect:null)!==null){var y=d=d.next;do{if((y.tag&h)===h){var S=y.destroy;y.destroy=void 0,S!==void 0&&S()}y=y.next}while(y!==d)}}function Q7(h,d,y){switch(y.tag){case 0:case 11:case 15:case 22:if((d=(d=y.updateQueue)!==null?d.lastEffect:null)!==null){h=d=d.next;do{if((3&h.tag)==3){var S=h.create;h.destroy=S()}h=h.next}while(h!==d)}if((d=(d=y.updateQueue)!==null?d.lastEffect:null)!==null){h=d=d.next;do{var C=h;S=C.next,(4&(C=C.tag))!=0&&(1&C)!=0&&(WT(y,h),s9(y,h)),h=S}while(h!==d)}return;case 1:return h=y.stateNode,4&y.flags&&(d===null?h.componentDidMount():(S=y.elementType===y.type?d.memoizedProps:Mt(y.type,d.memoizedProps),h.componentDidUpdate(S,d.memoizedState,h.__reactInternalSnapshotBeforeUpdate))),void((d=y.updateQueue)!==null&&W4(y,d,h));case 3:if((d=y.updateQueue)!==null){if(h=null,y.child!==null)switch(y.child.tag){case 5:h=ue(y.child.stateNode);break;case 1:h=y.child.stateNode}W4(y,d,h)}return;case 5:return h=y.stateNode,void(d===null&&4&y.flags&&ve(h,y.type,y.memoizedProps,y));case 6:case 4:case 12:return;case 13:return void(Pe&&y.memoizedState===null&&(y=y.alternate,y!==null&&(y=y.memoizedState,y!==null&&(y=y.dehydrated,y!==null&&na(y)))));case 19:case 17:case 20:case 21:case 23:case 24:return}throw Error(s(163))}function AT(h,d){if(le)for(var y=h;;){if(y.tag===5){var S=y.stateNode;d?Ut(S):di(y.stateNode,y.memoizedProps)}else if(y.tag===6)S=y.stateNode,d?ur(S):e1(S,y.memoizedProps);else if((y.tag!==23&&y.tag!==24||y.memoizedState===null||y===h)&&y.child!==null){y.child.return=y,y=y.child;continue}if(y===h)break;for(;y.sibling===null;){if(y.return===null||y.return===h)return;y=y.return}y.sibling.return=y.return,y=y.sibling}}function RT(h,d){if(hs&&typeof hs.onCommitFiberUnmount=="function")try{hs.onCommitFiberUnmount(jh,d)}catch{}switch(d.tag){case 0:case 11:case 14:case 15:case 22:if((h=d.updateQueue)!==null&&(h=h.lastEffect)!==null){var y=h=h.next;do{var S=y,C=S.destroy;if(S=S.tag,C!==void 0)if((4&S)!=0)WT(d,y);else{S=d;try{C()}catch(U){da(S,U)}}y=y.next}while(y!==h)}break;case 1:if(NT(d),typeof(h=d.stateNode).componentWillUnmount=="function")try{h.props=d.memoizedProps,h.state=d.memoizedState,h.componentWillUnmount()}catch(U){da(d,U)}break;case 5:NT(d);break;case 4:le?FT(h,d):Ee&&Ee&&(d=d.stateNode.containerInfo,h=Bp(d),Bh(d,h))}}function kT(h,d){for(var y=d;;)if(RT(h,y),y.child===null||le&&y.tag===4){if(y===d)break;for(;y.sibling===null;){if(y.return===null||y.return===d)return;y=y.return}y.sibling.return=y.return,y=y.sibling}else y.child.return=y,y=y.child}function OT(h){h.alternate=null,h.child=null,h.dependencies=null,h.firstEffect=null,h.lastEffect=null,h.memoizedProps=null,h.memoizedState=null,h.pendingProps=null,h.return=null,h.updateQueue=null}function LT(h){return h.tag===5||h.tag===3||h.tag===4}function UT(h){if(le){e:{for(var d=h.return;d!==null;){if(LT(d))break e;d=d.return}throw Error(s(160))}var y=d;switch(d=y.stateNode,y.tag){case 5:var S=!1;break;case 3:case 4:d=d.containerInfo,S=!0;break;default:throw Error(s(161))}16&y.flags&&(Nt(d),y.flags&=-17);e:t:for(y=h;;){for(;y.sibling===null;){if(y.return===null||LT(y.return)){y=null;break e}y=y.return}for(y.sibling.return=y.return,y=y.sibling;y.tag!==5&&y.tag!==6&&y.tag!==18;){if(2&y.flags||y.child===null||y.tag===4)continue t;y.child.return=y,y=y.child}if(!(2&y.flags)){y=y.stateNode;break e}}S?k1(h,y,d):O1(h,y,d)}}function k1(h,d,y){var S=h.tag,C=S===5||S===6;if(C)h=C?h.stateNode:h.stateNode.instance,d?Qe(y,h,d):V(y,h);else if(S!==4&&(h=h.child)!==null)for(k1(h,d,y),h=h.sibling;h!==null;)k1(h,d,y),h=h.sibling}function O1(h,d,y){var S=h.tag,C=S===5||S===6;if(C)h=C?h.stateNode:h.stateNode.instance,d?rt(y,h,d):D(y,h);else if(S!==4&&(h=h.child)!==null)for(O1(h,d,y),h=h.sibling;h!==null;)O1(h,d,y),h=h.sibling}function FT(h,d){for(var y,S,C=d,U=!1;;){if(!U){U=C.return;e:for(;;){if(U===null)throw Error(s(160));switch(y=U.stateNode,U.tag){case 5:S=!1;break e;case 3:case 4:y=y.containerInfo,S=!0;break e}U=U.return}U=!0}if(C.tag===5||C.tag===6)kT(h,C),S?yt(y,C.stateNode):jt(y,C.stateNode);else if(C.tag===4){if(C.child!==null){y=C.stateNode.containerInfo,S=!0,C.child.return=C,C=C.child;continue}}else if(RT(h,C),C.child!==null){C.child.return=C,C=C.child;continue}if(C===d)break;for(;C.sibling===null;){if(C.return===null||C.return===d)return;(C=C.return).tag===4&&(U=!1)}C.sibling.return=C.return,C=C.sibling}}function L1(h,d){if(le){switch(d.tag){case 0:case 11:case 14:case 15:case 22:return void PT(3,d);case 1:return;case 5:var y=d.stateNode;if(y!=null){var S=d.memoizedProps;h=h!==null?h.memoizedProps:S;var C=d.type,U=d.updateQueue;d.updateQueue=null,U!==null&&Ke(y,U,C,h,S,d)}return;case 6:if(d.stateNode===null)throw Error(s(162));return y=d.memoizedProps,void re(d.stateNode,h!==null?h.memoizedProps:y,y);case 3:return void(Pe&&(d=d.stateNode,d.hydrate&&(d.hydrate=!1,Hp(d.containerInfo))));case 12:return;case 13:return MT(d),void pm(d);case 19:return void pm(d);case 17:return;case 23:case 24:return void AT(d,d.memoizedState!==null)}throw Error(s(163))}switch(d.tag){case 0:case 11:case 14:case 15:case 22:return void PT(3,d);case 12:return;case 13:return MT(d),void pm(d);case 19:return void pm(d);case 3:Pe&&(y=d.stateNode).hydrate&&(y.hydrate=!1,Hp(y.containerInfo));break;case 23:case 24:return}e:if(Ee){switch(d.tag){case 1:case 5:case 6:case 20:break e;case 3:case 4:d=d.stateNode,Bh(d.containerInfo,d.pendingChildren);break e}throw Error(s(163))}}function MT(h){h.memoizedState!==null&&(z1=$r(),le&&AT(h.child,!0))}function pm(h){var d=h.updateQueue;if(d!==null){h.updateQueue=null;var y=h.stateNode;y===null&&(y=h.stateNode=new Z7),d.forEach(function(S){var C=u9.bind(null,h,S);y.has(S)||(y.add(S),S.then(C,C))})}}function e9(h,d){return h!==null&&((h=h.memoizedState)===null||h.dehydrated!==null)&&(d=d.memoizedState)!==null&&d.dehydrated===null}var mm=0,vm=1,gm=2,ym=3,_m=4;if(typeof Symbol=="function"&&Symbol.for){var lf=Symbol.for;mm=lf("selector.component"),vm=lf("selector.has_pseudo_class"),gm=lf("selector.role"),ym=lf("selector.test_id"),_m=lf("selector.text")}function U1(h){var d=Oe(h);if(d!=null){if(typeof d.memoizedProps["data-testname"]!="string")throw Error(s(364));return d}if((h=Gr(h))===null)throw Error(s(362));return h.stateNode.current}function F1(h,d){switch(d.$$typeof){case mm:if(h.type===d.value)return!0;break;case vm:e:{d=d.value,h=[h,0];for(var y=0;y<h.length;){var S=h[y++],C=h[y++],U=d[C];if(S.tag!==5||!Z(S)){for(;U!=null&&F1(S,U);)U=d[++C];if(C===d.length){d=!0;break e}for(S=S.child;S!==null;)h.push(S,C),S=S.sibling}}d=!1}return d;case gm:if(h.tag===5&&_e(h.stateNode,d.value))return!0;break;case _m:if((h.tag===5||h.tag===6)&&(h=H(h))!==null&&0<=h.indexOf(d.value))return!0;break;case ym:if(h.tag===5&&typeof(h=h.memoizedProps["data-testname"])=="string"&&h.toLowerCase()===d.value.toLowerCase())return!0;break;default:throw Error(s(365,d))}return!1}function M1(h){switch(h.$$typeof){case mm:return"<"+(j(h.value)||"Unknown")+">";case vm:return":has("+(M1(h)||"")+")";case gm:return'[role="'+h.value+'"]';case _m:return'"'+h.value+'"';case ym:return'[data-testname="'+h.value+'"]';default:throw Error(s(365,h))}}function BT(h,d){var y=[];h=[h,0];for(var S=0;S<h.length;){var C=h[S++],U=h[S++],z=d[U];if(C.tag!==5||!Z(C)){for(;z!=null&&F1(C,z);)z=d[++U];if(U===d.length)y.push(C);else for(C=C.child;C!==null;)h.push(C,U),C=C.sibling}}return y}function B1(h,d){if(!xt)throw Error(s(363));h=BT(h=U1(h),d),d=[],h=Array.from(h);for(var y=0;y<h.length;){var S=h[y++];if(S.tag===5)Z(S)||d.push(S.stateNode);else for(S=S.child;S!==null;)h.push(S),S=S.sibling}return d}var bm=null,t9=Math.ceil,wm=a.ReactCurrentDispatcher,D1=a.ReactCurrentOwner,G1=a.IsSomeRendererActing,ot=0,zn=null,Hr=null,An=0,Il=0,j1=$n(0),gn=0,xm=null,qu=0,uf=0,Zu=0,$1=0,H1=null,z1=0,V1=1/0;function ca(){V1=$r()+500}var DT,Le=null,Tm=!1,X1=null,Uo=null,ha=!1,cf=null,hf=90,W1=[],Y1=[],gs=null,ff=0,K1=null,Sm=-1,ys=0,Em=0,df=null,pf=!1;function Qn(){return(48&ot)!=0?$r():Sm!==-1?Sm:Sm=$r()}function fa(h){if((2&(h=h.mode))==0)return 1;if((4&h)==0)return ps()===99?1:2;if(ys===0&&(ys=qu),f1.transition!==0){Em!==0&&(Em=H1!==null?H1.pendingLanes:0),h=ys;var d=4186112&~Em;return(d&=-d)===0&&(d=(h=4186112&~h)&-h)===0&&(d=8192),d}return h=ps(),(4&ot)!=0&&h===98?h=Gu(12,ys):h=Gu(h=function(y){switch(y){case 99:return 15;case 98:return 10;case 97:case 96:return 8;case 95:return 2;default:return 0}}(h),ys),h}function _s(h,d,y){if(50<ff)throw ff=0,K1=null,Error(s(185));if((h=Cm(h,d))===null)return null;ju(h,d,y),h===zn&&(Zu|=d,gn===4&&Ju(h,An));var S=ps();d===1?(8&ot)!=0&&(48&ot)==0?q1(h):(vi(h,y),ot===0&&(ca(),Pn())):((4&ot)==0||S!==98&&S!==99||(gs===null?gs=new Set([h]):gs.add(h)),vi(h,y)),H1=h}function Cm(h,d){h.lanes|=d;var y=h.alternate;for(y!==null&&(y.lanes|=d),y=h,h=h.return;h!==null;)h.childLanes|=d,(y=h.alternate)!==null&&(y.childLanes|=d),y=h,h=h.return;return y.tag===3?y.stateNode:null}function vi(h,d){for(var y=h.callbackNode,S=h.suspendedLanes,C=h.pingedLanes,U=h.expirationTimes,z=h.pendingLanes;0<z;){var J=31-oo(z),ce=1<<J,Ne=U[J];if(Ne===-1){if((ce&S)==0||(ce&C)!=0){Ne=d,fs(ce);var ze=Ft;U[J]=10<=ze?Ne+250:6<=ze?Ne+5e3:-1}}else Ne<=d&&(h.expiredLanes|=ce);z&=~ce}if(S=wl(h,h===zn?An:0),d=Ft,S===0)y!==null&&(y!==Vh&&Hu(y),h.callbackNode=null,h.callbackPriority=0);else{if(y!==null){if(h.callbackPriority===d)return;y!==Vh&&Hu(y)}d===15?(y=q1.bind(null,h),so===null?(so=[y],sa=Io(zu,Qp)):so.push(y),y=Vh):d===14?y=xl(99,q1.bind(null,h)):y=xl(y=function(tt){switch(tt){case 15:case 14:return 99;case 13:case 12:case 11:case 10:return 98;case 9:case 8:case 7:case 6:case 4:case 5:return 97;case 3:case 2:case 1:return 95;case 0:return 90;default:throw Error(s(358,tt))}}(d),GT.bind(null,h)),h.callbackPriority=d,h.callbackNode=y}}function GT(h){if(Sm=-1,Em=ys=0,(48&ot)!=0)throw Error(s(327));var d=h.callbackNode;if(bs()&&h.callbackNode!==d)return null;var y=wl(h,h===zn?An:0);if(y===0)return null;var S=y,C=ot;ot|=16;var U=zT();for(zn===h&&An===S||(ca(),Qu(h,S));;)try{n9();break}catch(J){HT(h,J)}if(Po(),wm.current=U,ot=C,Hr!==null?S=0:(zn=null,An=0,S=gn),(qu&Zu)!=0)Qu(h,0);else if(S!==0){if(S===2&&(ot|=64,h.hydrate&&(h.hydrate=!1,Mh(h.containerInfo)),(y=Xp(h))!==0&&(S=mf(h,y))),S===1)throw d=xm,Qu(h,0),Ju(h,y),vi(h,$r()),d;switch(h.finishedWork=h.current.alternate,h.finishedLanes=y,S){case 0:case 1:throw Error(s(345));case 2:Nl(h);break;case 3:if(Ju(h,y),(62914560&y)===y&&10<(S=z1+500-$r())){if(wl(h,0)!==0)break;if(((C=h.suspendedLanes)&y)!==y){Qn(),h.pingedLanes|=h.suspendedLanes&C;break}h.timeoutHandle=F(Nl.bind(null,h),S);break}Nl(h);break;case 4:if(Ju(h,y),(4186112&y)===y)break;for(S=h.eventTimes,C=-1;0<y;){var z=31-oo(y);U=1<<z,(z=S[z])>C&&(C=z),y&=~U}if(y=C,10<(y=(120>(y=$r()-y)?120:480>y?480:1080>y?1080:1920>y?1920:3e3>y?3e3:4320>y?4320:1960*t9(y/1960))-y)){h.timeoutHandle=F(Nl.bind(null,h),y);break}Nl(h);break;case 5:Nl(h);break;default:throw Error(s(329))}}return vi(h,$r()),h.callbackNode===d?GT.bind(null,h):null}function Ju(h,d){for(d&=~$1,d&=~Zu,h.suspendedLanes|=d,h.pingedLanes&=~d,h=h.expirationTimes;0<d;){var y=31-oo(d),S=1<<y;h[y]=-1,d&=~S}}function q1(h){if((48&ot)!=0)throw Error(s(327));if(bs(),h===zn&&(h.expiredLanes&An)!=0){var d=An,y=mf(h,d);(qu&Zu)!=0&&(y=mf(h,d=wl(h,d)))}else y=mf(h,d=wl(h,0));if(h.tag!==0&&y===2&&(ot|=64,h.hydrate&&(h.hydrate=!1,Mh(h.containerInfo)),(d=Xp(h))!==0&&(y=mf(h,d))),y===1)throw y=xm,Qu(h,0),Ju(h,d),vi(h,$r()),y;return h.finishedWork=h.current.alternate,h.finishedLanes=d,Nl(h),vi(h,$r()),null}function jT(h,d){var y=ot;ot|=1;try{return h(d)}finally{(ot=y)===0&&(ca(),Pn())}}function $T(h,d){var y=ot;if((48&y)!=0)return h(d);ot|=1;try{if(h)return Zn(99,h.bind(null,d))}finally{ot=y,Pn()}}function Im(h,d){cr(j1,Il),Il|=d,qu|=d}function Z1(){Il=j1.current,qt(j1)}function Qu(h,d){h.finishedWork=null,h.finishedLanes=0;var y=h.timeoutHandle;if(y!==q&&(h.timeoutHandle=q,$(y)),Hr!==null)for(y=Hr.return;y!==null;){var S=y;switch(S.tag){case 1:(S=S.type.childContextTypes)!=null&&Fu();break;case 3:Yu(),qt(Nn),qt(Qr),_1();break;case 5:v1(S);break;case 4:Yu();break;case 13:case 19:qt(Ir);break;case 10:Xu(S);break;case 23:case 24:Z1()}y=y.return}zn=h,Hr=pa(h.current,null),An=Il=qu=d,gn=0,xm=null,$1=Zu=uf=0}function HT(h,d){for(;;){var y=Hr;try{if(Po(),Jh.current=hm,am){for(var S=Nr.memoizedState;S!==null;){var C=S.queue;C!==null&&(C.pending=null),S=S.next}am=!1}if(Qh=0,vn=Hn=Nr=null,ef=!1,D1.current=null,y===null||y.return===null){gn=1,xm=d,Hr=null;break}e:{var U=h,z=y.return,J=y,ce=d;if(d=An,J.flags|=2048,J.firstEffect=J.lastEffect=null,ce!==null&&typeof ce=="object"&&typeof ce.then=="function"){var Ne=ce;if((2&J.mode)==0){var ze=J.alternate;ze?(J.updateQueue=ze.updateQueue,J.memoizedState=ze.memoizedState,J.lanes=ze.lanes):(J.updateQueue=null,J.memoizedState=null)}var tt=(1&Ir.current)!=0,Ae=z;do{var rr;if(rr=Ae.tag===13){var dr=Ae.memoizedState;if(dr!==null)rr=dr.dehydrated!==null;else{var Mi=Ae.memoizedProps;rr=Mi.fallback!==void 0&&(Mi.unstable_avoidThisFallback!==!0||!tt)}}if(rr){var se=Ae.updateQueue;if(se===null){var ne=new Set;ne.add(Ne),Ae.updateQueue=ne}else se.add(Ne);if((2&Ae.mode)==0){if(Ae.flags|=64,J.flags|=16384,J.flags&=-2981,J.tag===1)if(J.alternate===null)J.tag=17;else{var he=la(-1,1);he.tag=2,ua(J,he)}J.lanes|=1;break e}ce=void 0,J=d;var Re=U.pingCache;if(Re===null?(Re=U.pingCache=new q7,ce=new Set,Re.set(Ne,ce)):(ce=Re.get(Ne))===void 0&&(ce=new Set,Re.set(Ne,ce)),!ce.has(J)){ce.add(J);var qe=l9.bind(null,U,Ne,J);Ne.then(qe,qe)}Ae.flags|=4096,Ae.lanes=d;break e}Ae=Ae.return}while(Ae!==null);ce=Error((j(J.type)||"A React component")+` suspended while rendering, but no fallback UI was specified.

Add a <Suspense fallback=...> component higher in the tree to provide a loading indicator or placeholder to display.`)}gn!==5&&(gn=2),ce=A1(ce,J),Ae=z;do{switch(Ae.tag){case 3:U=ce,Ae.flags|=4096,d&=-d,Ae.lanes|=d,X4(Ae,CT(0,U,d));break e;case 1:U=ce;var Zt=Ae.type,st=Ae.stateNode;if((64&Ae.flags)==0&&(typeof Zt.getDerivedStateFromError=="function"||st!==null&&typeof st.componentDidCatch=="function"&&(Uo===null||!Uo.has(st)))){Ae.flags|=4096,d&=-d,Ae.lanes|=d,X4(Ae,IT(Ae,U,d));break e}}Ae=Ae.return}while(Ae!==null)}XT(y)}catch(zt){d=zt,Hr===y&&y!==null&&(Hr=y=y.return);continue}break}}function zT(){var h=wm.current;return wm.current=hm,h===null?hm:h}function mf(h,d){var y=ot;ot|=16;var S=zT();for(zn===h&&An===d||Qu(h,d);;)try{r9();break}catch(C){HT(h,C)}if(Po(),ot=y,wm.current=S,Hr!==null)throw Error(s(261));return zn=null,An=0,gn}function r9(){for(;Hr!==null;)VT(Hr)}function n9(){for(;Hr!==null&&!ds();)VT(Hr)}function VT(h){var d=DT(h.alternate,h,Il);h.memoizedProps=h.pendingProps,d===null?XT(h):Hr=d,D1.current=null}function XT(h){var d=h;do{var y=d.alternate;if(h=d.return,(2048&d.flags)==0){if((y=Y7(y,d,Il))!==null)return void(Hr=y);if((y=d).tag!==24&&y.tag!==23||y.memoizedState===null||(1073741824&Il)!=0||(4&y.mode)==0){for(var S=0,C=y.child;C!==null;)S|=C.lanes|C.childLanes,C=C.sibling;y.childLanes=S}h!==null&&(2048&h.flags)==0&&(h.firstEffect===null&&(h.firstEffect=d.firstEffect),d.lastEffect!==null&&(h.lastEffect!==null&&(h.lastEffect.nextEffect=d.firstEffect),h.lastEffect=d.lastEffect),1<d.flags&&(h.lastEffect!==null?h.lastEffect.nextEffect=d:h.firstEffect=d,h.lastEffect=d))}else{if((y=K7(d))!==null)return y.flags&=2047,void(Hr=y);h!==null&&(h.firstEffect=h.lastEffect=null,h.flags|=2048)}if((d=d.sibling)!==null)return void(Hr=d);Hr=d=h}while(d!==null);gn===0&&(gn=5)}function Nl(h){var d=ps();return Zn(99,i9.bind(null,h,d)),null}function i9(h,d){do bs();while(cf!==null);if((48&ot)!=0)throw Error(s(327));var y=h.finishedWork;if(y===null)return null;if(h.finishedWork=null,h.finishedLanes=0,y===h.current)throw Error(s(177));h.callbackNode=null;var S=y.lanes|y.childLanes,C=S,U=h.pendingLanes&~C;h.pendingLanes=C,h.suspendedLanes=0,h.pingedLanes=0,h.expiredLanes&=C,h.mutableReadLanes&=C,h.entangledLanes&=C,C=h.entanglements;for(var z=h.eventTimes,J=h.expirationTimes;0<U;){var ce=31-oo(U),Ne=1<<ce;C[ce]=0,z[ce]=-1,J[ce]=-1,U&=~Ne}if(gs!==null&&(24&S)==0&&gs.has(h)&&gs.delete(h),h===zn&&(Hr=zn=null,An=0),1<y.flags?y.lastEffect!==null?(y.lastEffect.nextEffect=y,S=y.firstEffect):S=y:S=y.firstEffect,S!==null){C=ot,ot|=32,D1.current=null,df=ee(h.containerInfo),pf=!1,Le=S;do try{o9()}catch(ne){if(Le===null)throw Error(s(330));da(Le,ne),Le=Le.nextEffect}while(Le!==null);df=null,Le=S;do try{for(z=h;Le!==null;){var ze=Le.flags;if(16&ze&&le&&Nt(Le.stateNode),128&ze){var tt=Le.alternate;if(tt!==null){var Ae=tt.ref;Ae!==null&&(typeof Ae=="function"?Ae(null):Ae.current=null)}}switch(1038&ze){case 2:UT(Le),Le.flags&=-3;break;case 6:UT(Le),Le.flags&=-3,L1(Le.alternate,Le);break;case 1024:Le.flags&=-1025;break;case 1028:Le.flags&=-1025,L1(Le.alternate,Le);break;case 4:L1(Le.alternate,Le);break;case 8:J=z,U=Le,le?FT(J,U):kT(J,U);var rr=U.alternate;OT(U),rr!==null&&OT(rr)}Le=Le.nextEffect}}catch(ne){if(Le===null)throw Error(s(330));da(Le,ne),Le=Le.nextEffect}while(Le!==null);pf&&Yt(),W(h.containerInfo),h.current=y,Le=S;do try{for(ze=h;Le!==null;){var dr=Le.flags;if(36&dr&&Q7(ze,Le.alternate,Le),128&dr){tt=void 0;var Mi=Le.ref;if(Mi!==null){var se=Le.stateNode;switch(Le.tag){case 5:tt=ue(se);break;default:tt=se}typeof Mi=="function"?Mi(tt):Mi.current=tt}}Le=Le.nextEffect}}catch(ne){if(Le===null)throw Error(s(330));da(Le,ne),Le=Le.nextEffect}while(Le!==null);Le=null,qp(),ot=C}else h.current=y;if(ha)ha=!1,cf=h,hf=d;else for(Le=S;Le!==null;)d=Le.nextEffect,Le.nextEffect=null,8&Le.flags&&((dr=Le).sibling=null,dr.stateNode=null),Le=d;if((S=h.pendingLanes)===0&&(Uo=null),S===1?h===K1?ff++:(ff=0,K1=h):ff=0,y=y.stateNode,hs&&typeof hs.onCommitFiberRoot=="function")try{hs.onCommitFiberRoot(jh,y,void 0,(64&y.current.flags)==64)}catch{}if(vi(h,$r()),Tm)throw Tm=!1,h=X1,X1=null,h;return(8&ot)!=0||Pn(),null}function o9(){for(;Le!==null;){var h=Le.alternate;pf||df===null||((8&Le.flags)!=0?K(Le,df)&&(pf=!0,Ot()):Le.tag===13&&e9(h,Le)&&K(Le,df)&&(pf=!0,Ot()));var d=Le.flags;(256&d)!=0&&J7(h,Le),(512&d)==0||ha||(ha=!0,xl(97,function(){return bs(),null})),Le=Le.nextEffect}}function bs(){if(hf!==90){var h=97<hf?97:hf;return hf=90,Zn(h,a9)}return!1}function s9(h,d){W1.push(d,h),ha||(ha=!0,xl(97,function(){return bs(),null}))}function WT(h,d){Y1.push(d,h),ha||(ha=!0,xl(97,function(){return bs(),null}))}function a9(){if(cf===null)return!1;var h=cf;if(cf=null,(48&ot)!=0)throw Error(s(331));var d=ot;ot|=32;var y=Y1;Y1=[];for(var S=0;S<y.length;S+=2){var C=y[S],U=y[S+1],z=C.destroy;if(C.destroy=void 0,typeof z=="function")try{z()}catch(ce){if(U===null)throw Error(s(330));da(U,ce)}}for(y=W1,W1=[],S=0;S<y.length;S+=2){C=y[S],U=y[S+1];try{var J=C.create;C.destroy=J()}catch(ce){if(U===null)throw Error(s(330));da(U,ce)}}for(J=h.current.firstEffect;J!==null;)h=J.nextEffect,J.nextEffect=null,8&J.flags&&(J.sibling=null,J.stateNode=null),J=h;return ot=d,Pn(),!0}function YT(h,d,y){ua(h,d=CT(0,d=A1(y,d),1)),d=Qn(),(h=Cm(h,1))!==null&&(ju(h,1,d),vi(h,d))}function da(h,d){if(h.tag===3)YT(h,h,d);else for(var y=h.return;y!==null;){if(y.tag===3){YT(y,h,d);break}if(y.tag===1){var S=y.stateNode;if(typeof y.type.getDerivedStateFromError=="function"||typeof S.componentDidCatch=="function"&&(Uo===null||!Uo.has(S))){var C=IT(y,h=A1(d,h),1);if(ua(y,C),C=Qn(),(y=Cm(y,1))!==null)ju(y,1,C),vi(y,C);else if(typeof S.componentDidCatch=="function"&&(Uo===null||!Uo.has(S)))try{S.componentDidCatch(d,h)}catch{}break}}y=y.return}}function l9(h,d,y){var S=h.pingCache;S!==null&&S.delete(d),d=Qn(),h.pingedLanes|=h.suspendedLanes&y,zn===h&&(An&y)===y&&(gn===4||gn===3&&(62914560&An)===An&&500>$r()-z1?Qu(h,0):$1|=y),vi(h,d)}function u9(h,d){var y=h.stateNode;y!==null&&y.delete(d),(d=0)==0&&((2&(d=h.mode))==0?d=1:(4&d)==0?d=ps()===99?1:2:(ys===0&&(ys=qu),(d=oa(62914560&~ys))===0&&(d=4194304))),y=Qn(),(h=Cm(h,d))!==null&&(ju(h,d,y),vi(h,y))}DT=function(h,d,y){var S=d.lanes;if(h!==null)if(h.memoizedProps!==d.pendingProps||Nn.current)ao=!0;else{if((y&S)==0){switch(ao=!1,d.tag){case 3:bT(d),y1();break;case 5:eT(d);break;case 1:jr(d.type)&&Bu(d);break;case 4:m1(d,d.stateNode.containerInfo);break;case 10:Xh(d,d.memoizedProps.value);break;case 13:if(d.memoizedState!==null)return(y&d.child.childLanes)!=0?wT(h,d,y):(cr(Ir,1&Ir.current),(d=vs(h,d,y))!==null?d.sibling:null);cr(Ir,1&Ir.current);break;case 19:if(S=(y&d.childLanes)!=0,(64&h.flags)!=0){if(S)return ST(h,d,y);d.flags|=64}var C=d.memoizedState;if(C!==null&&(C.rendering=null,C.tail=null,C.lastEffect=null),cr(Ir,Ir.current),S)break;return null;case 23:case 24:return d.lanes=0,gT(h,d,y)}return vs(h,d,y)}ao=(16384&h.flags)!=0}else ao=!1;switch(d.lanes=0,d.tag){case 2:if(S=d.type,h!==null&&(h.alternate=null,d.alternate=null,d.flags|=2),h=d.pendingProps,C=cs(d,Qr.current),Ao(d,y),C=w1(null,d,S,h,C,y),d.flags|=1,typeof C=="object"&&C!==null&&typeof C.render=="function"&&C.$$typeof===void 0){if(d.tag=1,d.memoizedState=null,d.updateQueue=null,jr(S)){var U=!0;Bu(d)}else U=!1;d.memoizedState=C.state!==null&&C.state!==void 0?C.state:null,d1(d);var z=S.getDerivedStateFromProps;typeof z=="function"&&em(d,S,z,h),C.updater=tm,d.stateNode=C,C._reactInternals=d,p1(d,S,h,y),d=I1(null,d,S,!0,U,y)}else d.tag=0,mi(null,d,C,y),d=d.child;return d;case 16:C=d.elementType;e:{switch(h!==null&&(h.alternate=null,d.alternate=null,d.flags|=2),h=d.pendingProps,C=(U=C._init)(C._payload),d.type=C,U=d.tag=function(ze){if(typeof ze=="function")return e2(ze)?1:0;if(ze!=null){if((ze=ze.$$typeof)===b)return 11;if(ze===x)return 14}return 2}(C),h=Mt(C,h),U){case 0:d=C1(null,d,C,h,y);break e;case 1:d=_T(null,d,C,h,y);break e;case 11:d=pT(null,d,C,h,y);break e;case 14:d=mT(null,d,C,Mt(C.type,h),S,y);break e}throw Error(s(306,C,""))}return d;case 0:return S=d.type,C=d.pendingProps,C1(h,d,S,C=d.elementType===S?C:Mt(S,C),y);case 1:return S=d.type,C=d.pendingProps,_T(h,d,S,C=d.elementType===S?C:Mt(S,C),y);case 3:if(bT(d),S=d.updateQueue,h===null||S===null)throw Error(s(282));if(S=d.pendingProps,C=(C=d.memoizedState)!==null?C.element:null,V4(h,d),Yh(d,S,null,y),(S=d.memoizedState.element)===C)y1(),d=vs(h,d,y);else{if((U=(C=d.stateNode).hydrate)&&(Pe?(Sl=$p(d.stateNode.containerInfo),ms=d,U=ko=!0):U=!1),U){if(Pe&&(h=C.mutableSourceEagerHydrationData)!=null)for(C=0;C<h.length;C+=2)U=h[C],z=h[C+1],pe?U._workInProgressVersionPrimary=z:U._workInProgressVersionSecondary=z,Ku.push(U);for(y=Q4(d,null,S,y),d.child=y;y;)y.flags=-3&y.flags|1024,y=y.sibling}else mi(h,d,S,y),y1();d=d.child}return d;case 5:return eT(d),h===null&&g1(d),S=d.type,C=d.pendingProps,U=h!==null?h.memoizedProps:null,z=C.children,Ye(S,C)?z=null:U!==null&&Ye(S,U)&&(d.flags|=16),yT(h,d),mi(h,d,z,y),d.child;case 6:return h===null&&g1(d),null;case 13:return wT(h,d,y);case 4:return m1(d,d.stateNode.containerInfo),S=d.pendingProps,h===null?d.child=im(d,null,S,y):mi(h,d,S,y),d.child;case 11:return S=d.type,C=d.pendingProps,pT(h,d,S,C=d.elementType===S?C:Mt(S,C),y);case 7:return mi(h,d,d.pendingProps,y),d.child;case 8:case 12:return mi(h,d,d.pendingProps.children,y),d.child;case 10:e:{if(S=d.type._context,C=d.pendingProps,z=d.memoizedProps,Xh(d,U=C.value),z!==null){var J=z.value;if((U=G(J,U)?0:0|(typeof S._calculateChangedBits=="function"?S._calculateChangedBits(J,U):1073741823))===0){if(z.children===C.children&&!Nn.current){d=vs(h,d,y);break e}}else for((J=d.child)!==null&&(J.return=d);J!==null;){var ce=J.dependencies;if(ce!==null){z=J.child;for(var Ne=ce.firstContext;Ne!==null;){if(Ne.context===S&&(Ne.observedBits&U)!=0){J.tag===1&&((Ne=la(-1,y&-y)).tag=2,ua(J,Ne)),J.lanes|=y,(Ne=J.alternate)!==null&&(Ne.lanes|=y),Wh(J.return,y),ce.lanes|=y;break}Ne=Ne.next}}else z=J.tag===10&&J.type===d.type?null:J.child;if(z!==null)z.return=J;else for(z=J;z!==null;){if(z===d){z=null;break}if((J=z.sibling)!==null){J.return=z.return,z=J;break}z=z.return}J=z}}mi(h,d,C.children,y),d=d.child}return d;case 9:return C=d.type,S=(U=d.pendingProps).children,Ao(d,y),S=S(C=mn(C,U.unstable_observedBits)),d.flags|=1,mi(h,d,S,y),d.child;case 14:return U=Mt(C=d.type,d.pendingProps),mT(h,d,C,U=Mt(C.type,U),S,y);case 15:return vT(h,d,d.type,d.pendingProps,S,y);case 17:return S=d.type,C=d.pendingProps,C=d.elementType===S?C:Mt(S,C),h!==null&&(h.alternate=null,d.alternate=null,d.flags|=2),d.tag=1,jr(S)?(h=!0,Bu(d)):h=!1,Ao(d,y),q4(d,S,C),p1(d,S,C,y),I1(null,d,S,!0,h,y);case 19:return ST(h,d,y);case 23:case 24:return gT(h,d,y)}throw Error(s(156,d.tag))};var Nm={current:!1},J1=o.unstable_flushAllWithoutAsserting,KT=typeof J1=="function";function Q1(){if(J1!==void 0)return J1();for(var h=!1;bs();)h=!0;return h}function qT(h){try{Q1(),function(d){if(bm===null)try{var y=("require"+Math.random()).slice(0,7);bm=(e&&e[y]).call(e,"timers").setImmediate}catch{bm=function(C){var U=new MessageChannel;U.port1.onmessage=C,U.port2.postMessage(void 0)}}bm(d)}(function(){Q1()?qT(h):h()})}catch(d){h(d)}}var Pm=0,ZT=!1;function c9(h,d,y,S){this.tag=h,this.key=y,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=d,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=S,this.flags=0,this.lastEffect=this.firstEffect=this.nextEffect=null,this.childLanes=this.lanes=0,this.alternate=null}function Fi(h,d,y,S){return new c9(h,d,y,S)}function e2(h){return!(!(h=h.prototype)||!h.isReactComponent)}function pa(h,d){var y=h.alternate;return y===null?((y=Fi(h.tag,d,h.key,h.mode)).elementType=h.elementType,y.type=h.type,y.stateNode=h.stateNode,y.alternate=h,h.alternate=y):(y.pendingProps=d,y.type=h.type,y.flags=0,y.nextEffect=null,y.firstEffect=null,y.lastEffect=null),y.childLanes=h.childLanes,y.lanes=h.lanes,y.child=h.child,y.memoizedProps=h.memoizedProps,y.memoizedState=h.memoizedState,y.updateQueue=h.updateQueue,d=h.dependencies,y.dependencies=d===null?null:{lanes:d.lanes,firstContext:d.firstContext},y.sibling=h.sibling,y.index=h.index,y.ref=h.ref,y}function Am(h,d,y,S,C,U){var z=2;if(S=h,typeof h=="function")e2(h)&&(z=1);else if(typeof h=="string")z=5;else e:switch(h){case c:return ec(y.children,C,U,d);case R:z=8,C|=16;break;case f:z=8,C|=1;break;case p:return(h=Fi(12,y,d,8|C)).elementType=p,h.type=p,h.lanes=U,h;case _:return(h=Fi(13,y,d,C)).type=_,h.elementType=_,h.lanes=U,h;case w:return(h=Fi(19,y,d,C)).elementType=w,h.lanes=U,h;case E:return t2(y,C,U,d);case O:return(h=Fi(24,y,d,C)).elementType=O,h.lanes=U,h;default:if(typeof h=="object"&&h!==null)switch(h.$$typeof){case v:z=10;break e;case g:z=9;break e;case b:z=11;break e;case x:z=14;break e;case T:z=16,S=null;break e;case I:z=22;break e}throw Error(s(130,h==null?h:typeof h,""))}return(d=Fi(z,y,d,C)).elementType=h,d.type=S,d.lanes=U,d}function ec(h,d,y,S){return(h=Fi(7,h,S,d)).lanes=y,h}function t2(h,d,y,S){return(h=Fi(23,h,S,d)).elementType=E,h.lanes=y,h}function r2(h,d,y){return(h=Fi(6,h,null,d)).lanes=y,h}function n2(h,d,y){return(d=Fi(4,h.children!==null?h.children:[],h.key,d)).lanes=y,d.stateNode={containerInfo:h.containerInfo,pendingChildren:null,implementation:h.implementation},d}function h9(h,d,y){this.tag=d,this.containerInfo=h,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=q,this.pendingContext=this.context=null,this.hydrate=y,this.callbackNode=null,this.callbackPriority=0,this.eventTimes=$h(0),this.expirationTimes=$h(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=$h(0),Pe&&(this.mutableSourceEagerHydrationData=null)}function JT(h){var d=h._reactInternals;if(d===void 0)throw typeof h.render=="function"?Error(s(188)):Error(s(268,Object.keys(h)));return(h=Y(d))===null?null:h.stateNode}function QT(h,d){if((h=h.memoizedState)!==null&&h.dehydrated!==null){var y=h.retryLane;h.retryLane=y!==0&&y<d?y:d}}function Rm(h,d){QT(h,d),(h=h.alternate)&&QT(h,d)}function f9(h){return(h=Y(h))===null?null:h.stateNode}function d9(){return null}return r.IsThisRendererActing=Nm,r.act=function(h){function d(){Pm--,G1.current=y,Nm.current=S}ZT===!1&&(ZT=!0,console.error("act(...) is not supported in production builds of React, and might not behave as expected.")),Pm++;var y=G1.current,S=Nm.current;G1.current=!0,Nm.current=!0;try{var C=jT(h)}catch(U){throw d(),U}if(C!==null&&typeof C=="object"&&typeof C.then=="function")return{then:function(U,z){C.then(function(){1<Pm||KT===!0&&y===!0?(d(),U()):qT(function(J){d(),J?z(J):U()})},function(J){d(),z(J)})}};try{Pm!==1||KT!==!1&&y!==!1||Q1(),d()}catch(U){throw d(),U}return{then:function(U){U()}}},r.attemptContinuousHydration=function(h){h.tag===13&&(_s(h,67108864,Qn()),Rm(h,67108864))},r.attemptHydrationAtCurrentPriority=function(h){if(h.tag===13){var d=Qn(),y=fa(h);_s(h,y,d),Rm(h,y)}},r.attemptSynchronousHydration=function(h){switch(h.tag){case 3:var d=h.stateNode;if(d.hydrate){var y=fs(d.pendingLanes);d.expiredLanes|=y&d.pendingLanes,vi(d,$r()),(48&ot)==0&&(ca(),Pn())}break;case 13:var S=Qn();$T(function(){return _s(h,1,S)}),Rm(h,4)}},r.attemptUserBlockingHydration=function(h){h.tag===13&&(_s(h,4,Qn()),Rm(h,4))},r.batchedEventUpdates=function(h,d){var y=ot;ot|=2;try{return h(d)}finally{(ot=y)===0&&(ca(),Pn())}},r.batchedUpdates=jT,r.createComponentSelector=function(h){return{$$typeof:mm,value:h}},r.createContainer=function(h,d,y){return h=new h9(h,d,y),d=Fi(3,null,null,d===2?7:d===1?3:0),h.current=d,d.stateNode=h,d1(d),h},r.createHasPsuedoClassSelector=function(h){return{$$typeof:vm,value:h}},r.createPortal=function(h,d,y){var S=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:u,key:S==null?null:""+S,children:h,containerInfo:d,implementation:y}},r.createRoleSelector=function(h){return{$$typeof:gm,value:h}},r.createTestNameSelector=function(h){return{$$typeof:ym,value:h}},r.createTextSelector=function(h){return{$$typeof:_m,value:h}},r.deferredUpdates=function(h){return Zn(97,h)},r.discreteUpdates=function(h,d,y,S,C){var U=ot;ot|=4;try{return Zn(98,h.bind(null,d,y,S,C))}finally{(ot=U)===0&&(ca(),Pn())}},r.findAllNodes=B1,r.findBoundingRects=function(h,d){if(!xt)throw Error(s(363));d=B1(h,d),h=[];for(var y=0;y<d.length;y++)h.push(L(d[y]));for(d=h.length-1;0<d;d--)for(var S=(y=h[d]).x,C=S+y.width,U=y.y,z=U+y.height,J=d-1;0<=J;J--)if(d!==J){var ce=h[J],Ne=ce.x,ze=Ne+ce.width,tt=ce.y,Ae=tt+ce.height;if(S>=Ne&&U>=tt&&C<=ze&&z<=Ae){h.splice(d,1);break}if(!(S!==Ne||y.width!==ce.width||Ae<U||tt>z)){tt>U&&(ce.height+=tt-U,ce.y=U),Ae<z&&(ce.height=z-tt),h.splice(d,1);break}if(!(U!==tt||y.height!==ce.height||ze<S||Ne>C)){Ne>S&&(ce.width+=Ne-S,ce.x=S),ze<C&&(ce.width=C-Ne),h.splice(d,1);break}}return h},r.findHostInstance=JT,r.findHostInstanceWithNoPortals=function(h){return(h=function(d){if(!(d=ae(d)))return null;for(var y=d;;){if(y.tag===5||y.tag===6)return y;if(y.child&&y.tag!==4)y.child.return=y,y=y.child;else{if(y===d)break;for(;!y.sibling;){if(!y.return||y.return===d)return null;y=y.return}y.sibling.return=y.return,y=y.sibling}}return null}(h))===null?null:h.tag===20?h.stateNode.instance:h.stateNode},r.findHostInstanceWithWarning=function(h){return JT(h)},r.flushControlled=function(h){var d=ot;ot|=1;try{Zn(99,h)}finally{(ot=d)===0&&(ca(),Pn())}},r.flushDiscreteUpdates=function(){(49&ot)==0&&(function(){if(gs!==null){var h=gs;gs=null,h.forEach(function(d){d.expiredLanes|=24&d.pendingLanes,vi(d,$r())})}Pn()}(),bs())},r.flushPassiveEffects=bs,r.flushSync=$T,r.focusWithin=function(h,d){if(!xt)throw Error(s(363));for(d=BT(h=U1(h),d),d=Array.from(d),h=0;h<d.length;){var y=d[h++];if(!Z(y)){if(y.tag===5&&Ve(y.stateNode))return!0;for(y=y.child;y!==null;)d.push(y),y=y.sibling}}return!1},r.getCurrentUpdateLanePriority=function(){return Du},r.getFindAllNodesFailureDescription=function(h,d){if(!xt)throw Error(s(363));var y=0,S=[];h=[U1(h),0];for(var C=0;C<h.length;){var U=h[C++],z=h[C++],J=d[z];if((U.tag!==5||!Z(U))&&(F1(U,J)&&(S.push(M1(J)),++z>y&&(y=z)),z<d.length))for(U=U.child;U!==null;)h.push(U,z),U=U.sibling}if(y<d.length){for(h=[];y<d.length;y++)h.push(M1(d[y]));return`findAllNodes was able to match part of the selector:
  `+S.join(" > ")+`

No matching component was found for:
  `+h.join(" > ")}return null},r.getPublicRootInstance=function(h){if(!(h=h.current).child)return null;switch(h.child.tag){case 5:return ue(h.child.stateNode);default:return h.child.stateNode}},r.injectIntoDevTools=function(h){if(h={bundleType:h.bundleType,version:h.version,rendererPackageName:h.rendererPackageName,rendererConfig:h.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:a.ReactCurrentDispatcher,findHostInstanceByFiber:f9,findFiberByHostInstance:h.findFiberByHostInstance||d9,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null},typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u")h=!1;else{var d=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!d.isDisabled&&d.supportsFiber)try{jh=d.inject(h),hs=d}catch{}h=!0}return h},r.observeVisibleRects=function(h,d,y,S){if(!xt)throw Error(s(363));h=B1(h,d);var C=ht(h,y,S).disconnect;return{disconnect:function(){C()}}},r.registerMutableSourceForHydration=function(h,d){var y=d._getVersion;y=y(d._source),h.mutableSourceEagerHydrationData==null?h.mutableSourceEagerHydrationData=[d,y]:h.mutableSourceEagerHydrationData.push(d,y)},r.runWithPriority=function(h,d){var y=Du;try{return Du=h,d()}finally{Du=y}},r.shouldSuspend=function(){return!1},r.unbatchedUpdates=function(h,d){var y=ot;ot&=-2,ot|=8;try{return h(d)}finally{(ot=y)===0&&(ca(),Pn())}},r.updateContainer=function(h,d,y,S){var C=d.current,U=Qn(),z=fa(C);e:if(y){t:{if(X(y=y._reactInternals)!==y||y.tag!==1)throw Error(s(170));var J=y;do{switch(J.tag){case 3:J=J.stateNode.context;break t;case 1:if(jr(J.type)){J=J.stateNode.__reactInternalMemoizedMergedChildContext;break t}}J=J.return}while(J!==null);throw Error(s(171))}if(y.tag===1){var ce=y.type;if(jr(ce)){y=zp(y,ce,J);break e}}y=J}else y=Co;return d.context===null?d.context=y:d.pendingContext=y,(d=la(U,z)).payload={element:h},(S=S===void 0?null:S)!==null&&(d.callback=S),ua(C,d),_s(C,z,U),z},r}}),hne=0,fne={__interactionsRef:null,__subscriberRef:null,unstable_clear:function(e){return e()},unstable_getCurrent:function(){return null},unstable_getThreadID:function(){return++hne},unstable_subscribe:function(){},unstable_trace:function(e,t,r){return r()},unstable_unsubscribe:function(){},unstable_wrap:function(e){return e}},Es=to(function(e,t){});/** @license React v0.20.2
 * scheduler-tracing.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */Es.__interactionsRef,Es.__subscriberRef,Es.unstable_clear,Es.unstable_getCurrent,Es.unstable_getThreadID,Es.unstable_subscribe,Es.unstable_trace,Es.unstable_unsubscribe,Es.unstable_wrap,to(function(e){e.exports=fne}),to(function(e){});var dne=to(function(e){e.exports=cne}),f7={name:"@inlet/react-pixi",version:"6.8.0",description:"Write PixiJS applications using React declarative style.",main:"index.js","umd:main":"umd.js",module:"module.js","jsnext:main":"module.js",author:"Patrick Brouwer <patrick@inlet.nl>",license:"MIT",scripts:{"docz:dev":"rimraf ./docs && docz dev","docz:build":"rimraf ./docs && yarn build:prod && docz build",eslint:"eslint .","build:watch":"cross-env FORMAT=umd NODE_ENV=development rollup -c --watch","build:dev":"cross-env NODE_ENV=development rollup -c","build:prod":"cross-env NODE_ENV=production rollup -c",build:"rimraf ./dist && npm run build:dev && npm run build:prod",test:"jest --silent","test:watch":"jest --silent --watch",prepack:'if-env CI=true && echo "skip build" || (npm run test && npm run eslint && npm run build)'},repository:{type:"git",url:"git+https://github.com/inlet/react-pixi.git"},files:["dist/","animated/","legacy/","LICENSE","index.d.ts","index.js","umd.js","module.js"],typings:"./index.d.ts",devDependencies:{"@babel/cli":"7.14.8","@babel/core":"7.14.8","@babel/plugin-proposal-class-properties":"7.14.5","@babel/plugin-proposal-decorators":"7.14.5","@babel/plugin-proposal-do-expressions":"7.14.5","@babel/plugin-proposal-export-default-from":"7.14.5","@babel/plugin-proposal-export-namespace-from":"7.14.5","@babel/plugin-proposal-function-bind":"7.14.5","@babel/plugin-proposal-function-sent":"7.14.5","@babel/plugin-proposal-json-strings":"7.14.5","@babel/plugin-proposal-logical-assignment-operators":"7.14.5","@babel/plugin-proposal-nullish-coalescing-operator":"7.14.5","@babel/plugin-proposal-numeric-separator":"7.14.5","@babel/plugin-proposal-optional-chaining":"7.14.5","@babel/plugin-proposal-pipeline-operator":"7.14.8","@babel/plugin-proposal-throw-expressions":"7.14.5","@babel/plugin-syntax-dynamic-import":"7.8.3","@babel/plugin-syntax-import-meta":"7.10.4","@babel/plugin-transform-runtime":"7.14.5","@babel/preset-env":"7.14.9","@babel/preset-react":"7.14.5","@babel/runtime":"7.14.8","@rollup/plugin-alias":"3.1.5","@testing-library/react":"12.0.0","@types/jest":"26.0.24","@types/react":"17.0.15","@types/react-dom":"17.0.9","@types/react-reconciler":"0.26.3","babel-core":"7.0.0-beta.3","babel-eslint":"10.1.0","babel-jest":"26.6.3","babel-plugin-module-resolver":"4.1.0",canvas:"2.8.0","cross-env":"7.0.3",docz:"2.3.1",eslint:"7.32.0","eslint-config-prettier":"8.3.0","eslint-plugin-prettier":"3.4.0","eslint-plugin-react":"7.24.0","if-env":"1.0.4",jest:"26.6.3","jest-webgl-canvas-mock":"0.2.3","lodash.isnil":"4.0.0","lodash.times":"4.3.2","performance-now":"2.1.0","pixi.js":"6.1.0",prettier:"2.3.2","prop-types":"15.7.2",react:"17.0.2","react-dom":"17.0.2","react-reconciler":"0.26.2","react-spring":"9.2.4","react-test-renderer":"17.0.2",rimraf:"3.0.2",rollup:"2.55.1","rollup-plugin-babel":"4.4.0","rollup-plugin-commonjs":"10.1.0","rollup-plugin-filesize":"9.1.1","rollup-plugin-json":"4.0.0","rollup-plugin-node-globals":"1.4.0","rollup-plugin-node-resolve":"5.2.0","rollup-plugin-replace":"2.2.0","rollup-plugin-terser":"7.0.2",typescript:"4.3.5"},peerDependencies:{"pixi.js":"^6.0.0","prop-types":"^15.7.2",react:"^17.0.1","react-dom":"^17.0.1"},jest:{collectCoverage:!1,roots:["./test"],setupFiles:["jest-webgl-canvas-mock","<rootDir>/test/bootstrap.js","<rootDir>/test/__mocks__/matchMediaMock.js"]},resolutions:{"get-pkg-repo":"4.1.1","hosted-git-info":"^2.1.4"},dependencies:{}},yx=typeof Ni<"u"?Ni:typeof self<"u"?self:typeof window<"u"?window:{};function d7(){throw new Error("setTimeout has not been defined")}function p7(){throw new Error("clearTimeout has not been defined")}var ba=d7,wa=p7;function m7(e){if(ba===setTimeout)return setTimeout(e,0);if((ba===d7||!ba)&&setTimeout)return ba=setTimeout,setTimeout(e,0);try{return ba(e,0)}catch{try{return ba.call(null,e,0)}catch{return ba.call(this,e,0)}}}typeof yx.setTimeout=="function"&&(ba=setTimeout),typeof yx.clearTimeout=="function"&&(wa=clearTimeout);var Kl,Bs=[],Zc=!1,f0=-1;function pne(){Zc&&Kl&&(Zc=!1,Kl.length?Bs=Kl.concat(Bs):f0=-1,Bs.length&&v7())}function v7(){if(!Zc){var e=m7(pne);Zc=!0;for(var t=Bs.length;t;){for(Kl=Bs,Bs=[];++f0<t;)Kl&&Kl[f0].run();f0=-1,t=Bs.length}Kl=null,Zc=!1,function(r){if(wa===clearTimeout)return clearTimeout(r);if((wa===p7||!wa)&&clearTimeout)return wa=clearTimeout,clearTimeout(r);try{wa(r)}catch{try{return wa.call(null,r)}catch{return wa.call(this,r)}}}(e)}}function g7(e,t){this.fun=e,this.array=t}g7.prototype.run=function(){this.fun.apply(null,this.array)};function Lu(){}var mne=Lu,vne=Lu,gne=Lu,yne=Lu,_ne=Lu,bne=Lu,wne=Lu,wc=yx.performance||{},xne=wc.now||wc.mozNow||wc.msNow||wc.oNow||wc.webkitNow||function(){return new Date().getTime()},Tne=new Date,Ov={nextTick:function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];Bs.push(new g7(e,t)),Bs.length!==1||Zc||m7(v7)},title:"browser",browser:!0,env:{},argv:[],version:"",versions:{},on:mne,addListener:vne,once:gne,off:yne,removeListener:_ne,removeAllListeners:bne,emit:wne,binding:function(e){throw new Error("process.binding is not supported")},cwd:function(){return"/"},chdir:function(e){throw new Error("process.chdir is not supported")},umask:function(){return 0},hrtime:function(e){var t=.001*xne.call(wc),r=Math.floor(t),n=Math.floor(t%1*1e9);return e&&(r-=e[0],(n-=e[1])<0&&(r--,n+=1e9)),[r,n]},platform:"browser",release:{},config:{},uptime:function(){return(new Date-Tne)/1e3}},Sne=to(function(e){(function(){var t,r,n,i,o,s;typeof performance<"u"&&performance!==null&&performance.now?e.exports=function(){return performance.now()}:Ov!=null&&Ov.hrtime?(e.exports=function(){return(t()-o)/1e6},r=Ov.hrtime,i=(t=function(){var a;return 1e9*(a=r())[0]+a[1]})(),s=1e9*Ov.uptime(),o=i-s):Date.now?(e.exports=function(){return Date.now()-n},n=Date.now()):(e.exports=function(){return new Date().getTime()-n},n=new Date().getTime())}).call(one)}),_N={};function k_(e,t){e.addChild&&(e.addChild(t),typeof t.didMount=="function"&&t.didMount.call(t,t,e))}function _x(e,t){var r,n,i;typeof t.willUnmount=="function"&&t.willUnmount.call(t,t,e),(t==null||(r=t.config)===null||r===void 0?void 0:r.destroyChildren)!==!1&&(n=t.children)!==null&&n!==void 0&&n.length&&Js(t.children).forEach(function(o){_x(t,o)}),e.removeChild(t),(t==null||(i=t.config)===null||i===void 0?void 0:i.destroy)!==!1&&t.destroy()}function bN(e,t,r){Br(t!==r,"react-pixi: PixiFiber cannot insert node before itself");var n=e.children.indexOf(t)!==-1,i=e.getChildIndex(r);n?e.setChildIndex(t,i):e.addChildAt(t,i)}var wN=null,_o=dne({getRootHostContext:function(){return _N},getChildHostContext:function(){return _N},getChildHostContextForEventComponent:function(e){return e},getPublicInstance:function(e){return e},prepareForCommit:function(){return null},resetAfterCommit:function(){},createInstance:function(e){var t,r,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null,o=nne[e];if(typeof o=="function"&&(t=o(i,n)),!t){var s=h7[e];s&&((t=s.create(n)).didMount=s.didMount?s.didMount.bind(t):void 0,t.willUnmount=s.willUnmount?s.willUnmount.bind(t):void 0,t.applyProps=s.applyProps?s.applyProps.bind(t):void 0,t.config=s.config)}return t&&((typeof((r=t)===null||r===void 0?void 0:r.applyProps)=="function"?t.applyProps:Mo)(t,{},n),t.__reactpixi={root:i}),t},hideInstance:function(e){e.visible=!1},unhideInstance:function(e,t){var r=t==null||!t.hasOwnProperty("visible")||t.visible;e.visible=r},finalizeInitialChildren:function(e,t,r){return!1},prepareUpdate:function(e,t,r,n,i,o){return wN=function(s,a,l,u,c){var f=null;for(var p in l)!u.hasOwnProperty(p)&&l.hasOwnProperty(p)&&l[p]!=null&&(p==="children"||(f||(f=[]),f.push(p,null)));for(var v in u){var g=u[v],b=l!=null?l[v]:void 0;!u.hasOwnProperty(v)||g===b||g==null&&b==null||v==="children"||(f||(f=[]),f.push(v,g))}return f}(0,0,r,n)},shouldSetTextContent:function(e,t){return!1},shouldDeprioritizeSubtree:function(e,t){var r=t.alpha===void 0||t.alpha>0,n=t.renderable===void 0||t.renderable===!0,i=t.visible===void 0||t.visible===!0;return!(r&&n&&i)},createTextInstance:function(e,t,r){Br(!1,'react-pixi: Error trying to add text node "'+e+'"',"PixiFiber does not support text nodes as children of a Pixi component. To pass a string value to your component, use a property other than children. If you wish to display some text, you can use &lt;Text text={string} /&gt; instead.")},unhideTextInstance:function(e,t){},mountEventComponent:function(){},updateEventComponent:function(){},handleEventTarget:function(){},scheduleTimeout:setTimeout,cancelTimeout:clearTimeout,noTimeout:-1,warnsIfNotActing:!1,now:Sne,isPrimaryRenderer:!1,supportsMutation:!0,supportsPersistence:!1,supportsHydration:!1,appendInitialChild:function(){for(var e,t,r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];var o=k_.apply(null,n);return(e=n[0].__reactpixi)===null||e===void 0||(t=e.root)===null||t===void 0||t.emit("__REACT_PIXI_REQUEST_RENDER__",{detail:"appendInitialChild"}),o},appendChild:function(){for(var e,t,r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];var o=k_.apply(null,n);return(e=n[0].__reactpixi)===null||e===void 0||(t=e.root)===null||t===void 0||t.emit("__REACT_PIXI_REQUEST_RENDER__",{detail:"appendChild"}),o},appendChildToContainer:function(){for(var e,t,r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];var o=k_.apply(null,n);return(e=n[0].__reactpixi)===null||e===void 0||(t=e.root)===null||t===void 0||t.emit("__REACT_PIXI_REQUEST_RENDER__",{detail:"appendChildToContainer"}),o},removeChild:function(){for(var e,t,r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];var o=_x.apply(null,n);return(e=n[0].__reactpixi)===null||e===void 0||(t=e.root)===null||t===void 0||t.emit("__REACT_PIXI_REQUEST_RENDER__",{detail:"removeChild"}),o},removeChildFromContainer:function(){for(var e,t,r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];var o=_x.apply(null,n);return(e=n[0].__reactpixi)===null||e===void 0||(t=e.root)===null||t===void 0||t.emit("__REACT_PIXI_REQUEST_RENDER__",{detail:"removeChildFromContainer"}),o},insertBefore:bN,insertInContainerBefore:function(){for(var e,t,r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];var o=bN.apply(null,n);return(e=n[0].__reactpixi)===null||e===void 0||(t=e.root)===null||t===void 0||t.emit("__REACT_PIXI_REQUEST_RENDER__",{detail:"insertInContainerBefore"}),o},commitUpdate:function(e,t,r,n,i){var o,s,a=e&&e.applyProps;typeof a!="function"&&(a=Mo),(a(e,n,i)||wN)&&((o=e.__reactpixi)===null||o===void 0||(s=o.root)===null||s===void 0||s.emit("__REACT_PIXI_REQUEST_RENDER__",{detail:"commitUpdate"}))},commitMount:function(e,t,r,n,i){},commitTextUpdate:function(e,t,r){},resetTextContent:function(e){},clearContainer:function(e){},getFundamentalComponentInstance:function(e){throw new Error("Not yet implemented.")},mountFundamentalComponent:function(e){throw new Error("Not yet implemented.")},shouldUpdateFundamentalComponent:function(e){throw new Error("Not yet implemented.")},unmountFundamentalComponent:function(e){throw new Error("Not yet implemented.")},getInstanceFromNode:function(e){throw new Error("Not yet implemented.")},isOpaqueHydratingObject:function(e){throw new Error("Not yet implemented")},makeOpaqueHydratingObject:function(e){throw new Error("Not yet implemented.")},makeClientIdInDEV:function(e){throw new Error("Not yet implemented")},beforeActiveInstanceBlur:function(e){},afterActiveInstanceBlur:function(){},preparePortalMount:function(e){}}),Ene=f7.devDependencies["react-dom"].replace(/[^0-9.]/g,""),Cne=f7.name;_o.injectIntoDevTools({bundleType:0,version:Ene,rendererPackageName:Cne,findHostInstanceByFiber:_o.findHostInstance});var gd=new Map;function Ine(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:function(){};Br(Pi.prototype.isPrototypeOf(t),"Invalid argument `container`, expected instance of `PIXI.Container`.");var n=gd.get(t);return n||(n=_o.createContainer(t),gd.set(t,n)),_o.updateContainer(e,n,void 0,r),_o.getPublicRootInstance(n)}function Nne(e){gd.has(e)&&_o.updateContainer(null,gd.get(e),void 0,function(){gd.delete(e)})}/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var dn=typeof Symbol=="function"&&Symbol.for,bx=dn?Symbol.for("react.element"):60103,wx=dn?Symbol.for("react.portal"):60106,d0=dn?Symbol.for("react.fragment"):60107,p0=dn?Symbol.for("react.strict_mode"):60108,m0=dn?Symbol.for("react.profiler"):60114,v0=dn?Symbol.for("react.provider"):60109,g0=dn?Symbol.for("react.context"):60110,xx=dn?Symbol.for("react.async_mode"):60111,Ng=dn?Symbol.for("react.concurrent_mode"):60111,y0=dn?Symbol.for("react.forward_ref"):60112,_0=dn?Symbol.for("react.suspense"):60113,Pne=dn?Symbol.for("react.suspense_list"):60120,b0=dn?Symbol.for("react.memo"):60115,w0=dn?Symbol.for("react.lazy"):60116,Ane=dn?Symbol.for("react.block"):60121,Rne=dn?Symbol.for("react.fundamental"):60117,kne=dn?Symbol.for("react.responder"):60118,One=dn?Symbol.for("react.scope"):60119;function gi(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case bx:switch(e=e.type){case xx:case Ng:case d0:case m0:case p0:case _0:return e;default:switch(e=e&&e.$$typeof){case g0:case y0:case w0:case b0:case v0:return e;default:return t}}case wx:return t}}}function xN(e){return gi(e)===Ng}var Lne={AsyncMode:xx,ConcurrentMode:Ng,ContextConsumer:g0,ContextProvider:v0,Element:bx,ForwardRef:y0,Fragment:d0,Lazy:w0,Memo:b0,Portal:wx,Profiler:m0,StrictMode:p0,Suspense:_0,isAsyncMode:function(e){return xN(e)||gi(e)===xx},isConcurrentMode:xN,isContextConsumer:function(e){return gi(e)===g0},isContextProvider:function(e){return gi(e)===v0},isElement:function(e){return typeof e=="object"&&e!==null&&e.$$typeof===bx},isForwardRef:function(e){return gi(e)===y0},isFragment:function(e){return gi(e)===d0},isLazy:function(e){return gi(e)===w0},isMemo:function(e){return gi(e)===b0},isPortal:function(e){return gi(e)===wx},isProfiler:function(e){return gi(e)===m0},isStrictMode:function(e){return gi(e)===p0},isSuspense:function(e){return gi(e)===_0},isValidElementType:function(e){return typeof e=="string"||typeof e=="function"||e===d0||e===Ng||e===m0||e===p0||e===_0||e===Pne||typeof e=="object"&&e!==null&&(e.$$typeof===w0||e.$$typeof===b0||e.$$typeof===v0||e.$$typeof===g0||e.$$typeof===y0||e.$$typeof===Rne||e.$$typeof===kne||e.$$typeof===One||e.$$typeof===Ane)},typeOf:gi},Xt=to(function(e,t){});Xt.AsyncMode,Xt.ConcurrentMode,Xt.ContextConsumer,Xt.ContextProvider,Xt.Element,Xt.ForwardRef,Xt.Fragment,Xt.Lazy,Xt.Memo,Xt.Portal,Xt.Profiler,Xt.StrictMode,Xt.Suspense,Xt.isAsyncMode,Xt.isConcurrentMode,Xt.isContextConsumer,Xt.isContextProvider,Xt.isElement,Xt.isForwardRef,Xt.isFragment,Xt.isLazy,Xt.isMemo,Xt.isPortal,Xt.isProfiler,Xt.isStrictMode,Xt.isSuspense,Xt.isValidElementType,Xt.typeOf,to(function(e){e.exports=Lne});function y7(){}function _7(){}Function.call.bind(Object.prototype.hasOwnProperty),_7.resetWarningCache=y7;var sr=to(function(e){e.exports=function(){function t(i,o,s,a,l,u){if(u!=="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"){var c=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw c.name="Invariant Violation",c}}function r(){return t}t.isRequired=t;var n={array:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:r,element:t,elementType:t,instanceOf:r,node:t,objectOf:r,oneOf:r,oneOfType:r,shape:r,exact:r,checkPropTypes:_7,resetWarningCache:y7};return n.PropTypes=n,n}()}),Ky=nt.createContext(null),b7=Ky.Provider,w7=Ky.Consumer,Une=function(e){var t=nt.forwardRef(function(r,n){return nt.createElement(w7,null,function(i){return nt.createElement(e,Yy({},r,{ref:n,app:i}))})});return t.displayName="withPIXIApp(".concat(e.displayName||e.name,")"),t},TN=function(){},x7={width:sr.number,height:sr.number,onMount:sr.func,onUnmount:sr.func,raf:sr.bool,renderOnComponentChange:sr.bool,children:sr.node,options:sr.shape({autoStart:sr.bool,width:sr.number,height:sr.number,useContextAlpha:sr.bool,backgroundAlpha:sr.number,autoDensity:sr.bool,antialias:sr.bool,preserveDrawingBuffer:sr.bool,resolution:sr.number,forceCanvas:sr.bool,backgroundColor:sr.number,clearBeforeRender:sr.bool,powerPreference:sr.string,sharedTicker:sr.bool,sharedLoader:sr.bool,resizeTo:function(e,t){var r=e[t];r&&Br(r===window||r instanceof HTMLElement,"Invalid prop `resizeTo` of type ".concat(ll(r),", expect `window` or an `HTMLElement`."))},view:function(e,t,r){var n=e[t];n&&Br(n instanceof HTMLCanvasElement,"Invalid prop `view` of type ".concat(ll(n),", supplied to ").concat(r,", expected `<canvas> Element`"))}})},Fne={width:800,height:600,onMount:TN,onUnmount:TN,raf:!0,renderOnComponentChange:!0},Tx=function(e){(function(a,l){if(typeof l!="function"&&l!==null)throw new TypeError("Super expression must either be null or a function");a.prototype=Object.create(l&&l.prototype,{constructor:{value:a,writable:!0,configurable:!0}}),l&&G4(a,l)})(s,nt.Component);var t,r,n,i,o=(t=s,r=a7(),function(){var a,l=mx(t);if(r){var u=mx(this).constructor;a=Reflect.construct(l,arguments,u)}else a=l.apply(this,arguments);return Vre(this,a)});function s(){var a;Hre(this,s);for(var l=arguments.length,u=new Array(l),c=0;c<l;c++)u[c]=arguments[c];return rn(Is(a=o.call.apply(o,[this].concat(u))),"_canvas",null),rn(Is(a),"_mediaQuery",null),rn(Is(a),"_ticker",null),rn(Is(a),"_needsUpdate",!0),rn(Is(a),"app",null),rn(Is(a),"updateSize",function(){var f=a.props,p=f.width,v=f.height,g=f.options;g!=null&&g.resolution||(a.app.renderer.resolution=window.devicePixelRatio,a.resetInteractionManager()),a.app.renderer.resize(p,v)}),rn(Is(a),"needsRenderUpdate",function(){a._needsUpdate=!0}),rn(Is(a),"renderStage",function(){var f=a.props,p=f.renderOnComponentChange;!f.raf&&p&&a._needsUpdate&&(a._needsUpdate=!1,a.app.renderer.render(a.app.stage))}),a}return n=s,(i=[{key:"componentDidMount",value:function(){var a=this.props,l=a.onMount,u=a.width,c=a.height,f=a.options,p=a.raf,v=a.renderOnComponentChange;this.app=new Lh(si(si({width:u,height:c,view:this._canvas},f),{},{autoDensity:(f==null?void 0:f.autoDensity)!==!1})),this.app.ticker.autoStart=!1,this.app.ticker[p?"start":"stop"](),this.app.stage.__reactpixi={root:this.app.stage},this.mountNode=_o.createContainer(this.app.stage),_o.updateContainer(this.getChildren(),this.mountNode,this),l(this.app),f!=null&&f.autoDensity&&window.matchMedia&&(f==null?void 0:f.resolution)===void 0&&(this._mediaQuery=window.matchMedia("(-webkit-min-device-pixel-ratio: 1.3), (min-resolution: 120dpi)"),this._mediaQuery.addListener(this.updateSize)),v&&!p&&(this._ticker=new on,this._ticker.autoStart=!0,this._ticker.add(this.renderStage),this.app.stage.on("__REACT_PIXI_REQUEST_RENDER__",this.needsRenderUpdate)),this.updateSize(),this.renderStage()}},{key:"componentDidUpdate",value:function(a,l,u){var c,f=this.props,p=f.width,v=f.height,g=f.raf,b=f.renderOnComponentChange,_=f.options;(_==null?void 0:_.resolution)!==void 0&&(a==null?void 0:a.options.resolution)!==(_==null?void 0:_.resolution)&&(this.app.renderer.resolution=_.resolution,this.resetInteractionManager()),a.height===v&&a.width===p&&((c=a.options)===null||c===void 0?void 0:c.resolution)===(_==null?void 0:_.resolution)||this.updateSize(),a.raf!==g&&this.app.ticker[g?"start":"stop"](),_o.updateContainer(this.getChildren(),this.mountNode,this),a.width===p&&a.height===v&&a.raf===g&&a.renderOnComponentChange===b&&a.options===_||(this._needsUpdate=!0,this.renderStage())}},{key:"resetInteractionManager",value:function(){"interaction"in this.app.renderer.plugins&&(this.app.renderer.plugins.interaction.resolution=this.app.renderer.resolution)}},{key:"getChildren",value:function(){var a=this.props.children;return nt.createElement(b7,{value:this.app},a)}},{key:"componentDidCatch",value:function(a,l){console.error("Error occurred in `Stage`."),console.error(a),console.error(l)}},{key:"componentWillUnmount",value:function(){this.props.onUnmount(this.app),this._ticker&&(this._ticker.remove(this.renderStage),this._ticker.destroy()),this.app.stage.off("__REACT_PIXI_REQUEST_RENDER__",this.needsRenderUpdate),_o.updateContainer(null,this.mountNode,this),this._mediaQuery&&(this._mediaQuery.removeListener(this.updateSize),this._mediaQuery=null),this.app.destroy()}},{key:"render",value:function(){var a,l,u=this,c=this.props.options;return c&&c.view?(Br(c.view instanceof HTMLCanvasElement,"options.view needs to be a `HTMLCanvasElement`"),null):nt.createElement("canvas",Yy({},(a=this.props,l=[].concat(Js(Object.keys(x7)),Js(Object.keys(vx))),Object.keys(a).filter(function(f){return!l.includes(f)}).reduce(function(f,p){return si(si({},f),{},rn({},p,a[p]))},{})),{ref:function(f){return u._canvas=f}}))}}])&&zre(n.prototype,i),s}();function T7(){var e=M.exports.useContext(Ky);return Br(e instanceof Lh,"No Context found with `%s`. Make sure to wrap component with `%s`","PIXI.Application","AppProvider"),e}function Mne(e){var t=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1],r=T7();Br(typeof e=="function","`useTick` needs a callback function."),Br(r instanceof Lh,"No Context found with `%s`. Make sure to wrap component with `%s`","PIXI.Application","AppProvider");var n=M.exports.useRef(null);M.exports.useEffect(function(){n.current=e},[e]),M.exports.useEffect(function(){if(t){var i=function(o){return n.current.apply(r.ticker,[o,r.ticker])};return r.ticker.add(i),function(){r.ticker&&r.ticker.remove(i)}}},[t])}Tx.propTypes=x7,Tx.defaultProps=Fne;var Bne=["children","apply"],Dne=function(e,t){Br(ll(t)==="object","Second argument needs to be an indexed object with { prop: Filter }");var r=Object.keys(t),n=function(i){var o=i.children,s=i.apply,a=_a(i,Bne),l=M.exports.useRef(M.exports.useMemo(function(){return r.map(function(f){var p,v=(a==null||(p=a[f])===null||p===void 0?void 0:p.construct)||[];return l7(t[f],Js(v))})},[r])),u=M.exports.useMemo(function(){return r.reduce(function(f,p,v){return si(si({},f),{},rn({},p,l.current[v]))},{})},[r]),c=M.exports.useMemo(function(){return Object.keys(a).filter(c7(u7(r))).reduce(function(f,p){return si(si({},f),{},rn({},p,a[p]))},{})},[a,r]);return r.forEach(function(f,p){return Object.assign(l.current[p],a[f])}),s&&function(){for(var f=arguments.length,p=new Array(f),v=0;v<f;v++)p[v]=arguments[v];return p.every(function(g){return typeof g=="function"})}(s)&&s.call(e,u),nt.createElement(e,Yy({},c,{filters:l.current}),o)};return n.displayName="FilterWrapper",n.propTypes={children:sr.node,apply:sr.func},n},Gne=Oi.BitmapText,jne=Oi.Container,$ne=Oi.Graphics,Hne=Oi.NineSlicePlane,zne=Oi.ParticleContainer,Vne=Oi.Sprite,Xne=Oi.AnimatedSprite,Wne=Oi.Text,Yne=Oi.TilingSprite,Kne=Oi.SimpleMesh,qne=Oi.SimpleRope;const Zne=Object.freeze(Object.defineProperty({__proto__:null,AnimatedSprite:Xne,AppConsumer:w7,AppContext:Ky,AppProvider:b7,BitmapText:Gne,Container:jne,Graphics:$ne,NineSlicePlane:Hne,ParticleContainer:zne,PixiComponent:ine,PixiFiber:_o,SimpleMesh:Kne,SimpleRope:qne,Sprite:Vne,Stage:Tx,Text:Wne,TilingSprite:Yne,applyDefaultProps:Mo,eventHandlers:Ig,render:Ine,unmountComponentAtNode:Nne,useApp:T7,useTick:Mne,withFilters:Dne,withPixiApp:Une},Symbol.toStringTag,{value:"Module"})),Jne=Px(Zne);(function(e){e.exports=Jne})(Je);function S7(e,t,r=.001){return this===t||Math.abs(e.a-t.a)<r&&Math.abs(e.b-t.b)<r&&Math.abs(e.c-t.c)<r&&Math.abs(e.d-t.d)<r&&Math.abs(e.tx-t.tx)<r&&Math.abs(e.ty-t.ty)<r}class Qne{constructor(){this.textureIds=[],this.matrices=[],this.lines=[],this.count=0}clear(){for(let t=0;t<this.count;t++)this.textureIds[t]=null,this.matrices[t]=null;this.count=0}add(t,r,n,i,o,s){const{textureIds:a,matrices:l,lines:u,count:c}=this;t=t*4+o;for(let f=0;f<c;f++)if(u[f*2]===n&&u[f*2+1]===i&&a[f]===t&&S7(l[f],r))return f;return c>=s.maxStyles?-1:(a[c]=t,l[c]=r,u[c*2]=n,u[c*2+1]=i,this.count++,c)}}class SN{constructor(){this.texArray=new Sg,this.styleArray=new Qne,this.shader=null,this.blend=Ze.NORMAL,this.start=0,this.size=0,this.TICK=0,this.settings=null,this.data=null}clear(){this.texArray.clear(),this.styleArray.clear(),this.settings=null,this.data=null,this.shader=null}begin(t,r){this.TICK=++wt._globalBatch,this.settings=t,this.shader=r,this.start=0,this.size=0,this.data=null,r&&r.settings&&(this.settings=r.settings)}check(t){return this.size===0?(this.shader=t,!0):this.shader===t}add(t,r,n,i,o){const{texArray:s,TICK:a,styleArray:l,settings:u}=this,{baseTexture:c}=t;if(c._batchEnabled!==a&&s.count===u.maxTextures)return-1;const f=c._batchEnabled!==a?s.count:c._batchLocation,p=l.add(f,r||er.IDENTITY,n,i,o,u);return p>=0&&c._batchEnabled!==a&&(c._batchEnabled=a,c._batchLocation=s.count,s.elements[s.count++]=c),p}}class eie{constructor(){this.reset()}begin(t,r,n){this.reset(),this.style=t,this.start=r,this.attribStart=n,this.jointEnd=0}end(t,r){this.attribSize=r-this.attribStart,this.size=t-this.start}reset(){this.style=null,this.size=0,this.start=0,this.attribStart=0,this.attribSize=0,this.styleId=-1,this.rgba=0,this.jointEnd=0}}class qy{constructor(){this.reset()}toJSON(){return this.copyTo({})}clone(){return this.copyTo(new qy)}copyTo(t){return t.color=this.color,t.alpha=this.alpha,t.texture=this.texture,t.matrix=this.matrix,t.shader=this.shader,t.visible=this.visible,t.smooth=this.smooth,t.matrixTex=null,t}packLineScale(){return 0}reset(){this.color=16777215,this.alpha=1,this.texture=et.WHITE,this.matrix=null,this.shader=null,this.visible=!1,this.smooth=!1,this.matrixTex=null}destroy(){this.texture=null,this.matrix=null,this.matrixTex=null}getTextureMatrix(){const t=this.texture;return this.matrix?t.frame.width===t.baseTexture.width&&t.frame.height===t.baseTexture.height?this.matrix:(this.matrixTex?this.matrixTex.copyFrom(this.matrix):this.matrixTex=this.matrix.clone(),this.matrixTex.translate(Number(t.frame.x),Number(t.frame.y)),this.matrixTex):null}}var ai;(function(e){const t="none";e.NONE=t;const r="normal";e.NORMAL=r;const n="horizontal";e.HORIZONTAL=n;const i="vertical";e.VERTICAL=i})(ai||(ai={}));class j4 extends qy{clone(){return this.copyTo(new j4)}copyTo(t){return t.color=this.color,t.alpha=this.alpha,t.texture=this.texture,t.matrix=this.matrix,t.shader=this.shader,t.visible=this.visible,t.width=this.width,t.alignment=this.alignment,t.cap=this.cap,t.join=this.join,t.miterLimit=this.miterLimit,t.scaleMode=this.scaleMode,t}packLineScale(){switch(this.scaleMode){case ai.NORMAL:return 1;case ai.HORIZONTAL:return 2;case ai.VERTICAL:return 3;default:return 0}}reset(){super.reset(),this.smooth=!0,this.color=0,this.width=0,this.alignment=.5,this.cap=zi.BUTT,this.join=oi.MITER,this.miterLimit=10,this.scaleMode=ai.NORMAL}}class jl{constructor(){jl.prototype.__init.call(this),jl.prototype.__init2.call(this),jl.prototype.__init3.call(this),jl.prototype.__init4.call(this),jl.prototype.__init5.call(this)}__init(){this.verts=[]}__init2(){this.joints=[]}__init3(){this.vertexSize=0}__init4(){this.indexSize=0}__init5(){this.closePointEps=1e-4}clear(){this.verts.length=0,this.joints.length=0,this.vertexSize=0,this.indexSize=0}destroy(){this.verts.length=0,this.joints.length=0}}var be;(function(e){e[e.NONE=0]="NONE";const r=1;e[e.FILL=r]="FILL";const n=4;e[e.JOINT_BEVEL=n]="JOINT_BEVEL";const i=8;e[e.JOINT_MITER=i]="JOINT_MITER";const o=12;e[e.JOINT_ROUND=o]="JOINT_ROUND";const s=16;e[e.JOINT_CAP_BUTT=s]="JOINT_CAP_BUTT";const a=18;e[e.JOINT_CAP_SQUARE=a]="JOINT_CAP_SQUARE";const l=20;e[e.JOINT_CAP_ROUND=l]="JOINT_CAP_ROUND";const u=24;e[e.FILL_EXPAND=u]="FILL_EXPAND";const c=1<<5;e[e.CAP_BUTT=c]="CAP_BUTT";const f=2<<5;e[e.CAP_SQUARE=f]="CAP_SQUARE";const p=3<<5;e[e.CAP_ROUND=p]="CAP_ROUND";const v=4<<5;e[e.CAP_BUTT2=v]="CAP_BUTT2"})(be||(be={}));class Di{constructor(){Di.prototype.__init.call(this),Di.prototype.__init2.call(this),Di.prototype.__init3.call(this)}static __initStatic(){this.vertsByJoint=[]}__init(){this.strideFloats=12}updateBufferSize(t,r,n,i){const{joints:o}=i;let s=!1,a=0,l=0;for(let u=t;u<t+r;u++){const c=o[u]&-32,f=o[u]&31;if(f===be.FILL){s=!0,a++;continue}if(f>=be.FILL_EXPAND){a+=3,l+=3;continue}const p=Di.vertsByJoint[f]+Di.vertsByJoint[c];p>=4&&(a+=p,l+=6+3*Math.max(p-6,0))}s&&(l+=n),i.vertexSize+=a,i.indexSize+=l}__init2(){this.bufferPos=0}__init3(){this.indexPos=0}beginPack(t,r,n,i,o=0,s=0){this.buildData=t,this.bufFloat=r,this.bufUint=n,this.indices=i,this.bufferPos=o,this.indexPos=s}endPack(){this.buildData=null,this.bufFloat=null,this.bufUint=null,this.indices=null}packInterleavedGeometry(t,r,n,i,o){const{bufFloat:s,bufUint:a,indices:l,buildData:u,strideFloats:c}=this,{joints:f,verts:p}=u;let v=this.bufferPos,g=this.indexPos,b=this.bufferPos/this.strideFloats,_,w,x,T,I,R,E,O,P=!1,N=0;for(let A=t;A<t+r;A++){const j=f[A],X=f[A]&-32,B=f[A]&31;if(B===be.FILL){P=!0,_=p[A*2],w=p[A*2+1],s[v]=_,s[v+1]=w,s[v+2]=_,s[v+3]=w,s[v+4]=_,s[v+5]=w,s[v+6]=_,s[v+7]=w,s[v+8]=N,s[v+9]=16*B,s[v+10]=i,a[v+11]=o,v+=c;continue}if(B>=be.FILL_EXPAND){I=p[A*2],R=p[A*2+1],_=p[A*2+2],w=p[A*2+3],x=p[A*2+4],T=p[A*2+5];const K=A+3;for(let me=0;me<3;me++)s[v]=I,s[v+1]=R,s[v+2]=_,s[v+3]=w,s[v+4]=x,s[v+5]=T,s[v+6]=p[(K+me)*2],s[v+7]=p[(K+me)*2+1],s[v+8]=N,s[v+9]=16*j+me,s[v+10]=i,a[v+11]=o,v+=c;l[g]=b,l[g+1]=b+1,l[g+2]=b+2,g+=3,b+=3;continue}const ae=Di.vertsByJoint[B]+Di.vertsByJoint[X];if(ae===0)continue;_=p[A*2],w=p[A*2+1],x=p[A*2+2],T=p[A*2+3],I=p[A*2-2],R=p[A*2-1];const Y=Math.sqrt((x-_)*(x-_)+(T-w)*(T-w));Di.vertsByJoint[B]===0&&(N-=Y),(B&-3)!==be.JOINT_CAP_BUTT?(E=p[A*2+4],O=p[A*2+5]):(E=_,O=w);for(let K=0;K<ae;K++)s[v]=I,s[v+1]=R,s[v+2]=_,s[v+3]=w,s[v+4]=x,s[v+5]=T,s[v+6]=E,s[v+7]=O,s[v+8]=N,s[v+9]=16*j+K,s[v+10]=i,a[v+11]=o,v+=c;N+=Y,l[g]=b,l[g+1]=b+1,l[g+2]=b+2,l[g+3]=b,l[g+4]=b+2,l[g+5]=b+3,g+=6;for(let K=5;K+1<ae;K++)l[g]=b+4,l[g+1]=b+K,l[g+2]=b+K+1,g+=3;b+=ae}if(P){for(let A=0;A<n.length;A++)l[g+A]=n[A]+b;g+=n.length}this.bufferPos=v,this.indexPos=g}}Di.__initStatic();const Er=Di.vertsByJoint;for(let e=0;e<256;e++)Er.push(0);Er[be.FILL]=1;for(let e=0;e<8;e++)Er[be.FILL_EXPAND+e]=3;Er[be.JOINT_BEVEL]=4+5;Er[be.JOINT_BEVEL+1]=4+5;Er[be.JOINT_BEVEL+2]=4+5;Er[be.JOINT_BEVEL+3]=4+5;Er[be.JOINT_ROUND]=4+5;Er[be.JOINT_ROUND+1]=4+5;Er[be.JOINT_ROUND+2]=4+5;Er[be.JOINT_ROUND+3]=4+5;Er[be.JOINT_MITER]=4+5;Er[be.JOINT_MITER+1]=4+5;Er[be.JOINT_MITER+2]=4;Er[be.JOINT_MITER+3]=4;Er[be.JOINT_CAP_BUTT]=4;Er[be.JOINT_CAP_BUTT+1]=4;Er[be.JOINT_CAP_SQUARE]=4;Er[be.JOINT_CAP_SQUARE+1]=4;Er[be.JOINT_CAP_ROUND]=4+5;Er[be.JOINT_CAP_ROUND+1]=4+5;Er[be.CAP_ROUND]=4;class Pg{constructor(t,r=null,n=null,i=null){this.shape=t,this.lineStyle=n,this.fillStyle=r,this.matrix=i,this.type=t.type,this.points=[],this.holes=[],this.triangles=[],this.closeStroke=!1,this.clearBuild()}clearPath(){this.points.length=0,this.closeStroke=!0}clearBuild(){this.triangles.length=0,this.fillStart=0,this.fillLen=0,this.strokeStart=0,this.strokeLen=0,this.fillAA=!1}clone(){return new Pg(this.shape,this.fillStyle,this.lineStyle,this.matrix)}capType(){let t;switch(this.lineStyle.cap){case zi.SQUARE:t=be.CAP_SQUARE;break;case zi.ROUND:t=be.CAP_ROUND;break;default:t=be.CAP_BUTT;break}return t}goodJointType(){let t;switch(this.lineStyle.join){case oi.BEVEL:t=be.JOINT_BEVEL;break;case oi.ROUND:t=be.JOINT_ROUND;break;default:t=be.JOINT_MITER+3;break}return t}jointType(){let t;switch(this.lineStyle.join){case oi.BEVEL:t=be.JOINT_BEVEL;break;case oi.ROUND:t=be.JOINT_ROUND;break;default:t=be.JOINT_MITER;break}return t}destroy(){this.shape=null,this.holes.length=0,this.holes=null,this.points.length=0,this.points=null,this.lineStyle=null,this.fillStyle=null,this.triangles=null}}class EN{path(t,r){const n=t.shape,i=t.points,o=n.x,s=n.y;let a,l;if(t.type===vt.CIRC)a=n.radius,l=n.radius;else{const f=t.shape;a=f.width,l=f.height}if(a<=0||l<=0)return;let u=Math.floor(30*Math.sqrt(n.radius))||Math.floor(15*Math.sqrt(a+l));u/=2.3,u<3?u=3:u=Math.ceil(u);const c=Math.PI*2/u;for(let f=0;f<u;f++)i.push(o+Math.sin(-c*f)*a,s+Math.cos(-c*f)*l)}fill(t,r){const{verts:n,joints:i}=r,{points:o,triangles:s}=t;let a=1;const l=0,u=t.shape,c=t.matrix,f=u.x,p=u.y,v=c?c.a*f+c.c*p+c.tx:f,g=c?c.b*f+c.d*p+c.ty:p;if(!t.fillAA){n.push(v,g),i.push(be.FILL);for(let _=0;_<o.length;_+=2)n.push(o[_],o[_+1]),i.push(be.FILL),_>0&&s.push(a++,l,a);s.push(a,l,1);return}const b=u.radius;for(let _=0;_<o.length;_+=2){const w=_,x=_+2<o.length?_+2:0;n.push(v),n.push(g),n.push(o[w]),n.push(o[w+1]),n.push(o[x]),n.push(o[x+1]),n.push(0),n.push(0),n.push((o[w]-v)/b),n.push((o[w+1]-g)/b),n.push((o[x]-v)/b),n.push((o[x+1]-g)/b),i.push(be.FILL_EXPAND+2),i.push(be.NONE),i.push(be.NONE),i.push(be.NONE),i.push(be.NONE),i.push(be.NONE)}}line(t,r){const{verts:n,joints:i}=r,{points:o}=t,s=t.goodJointType(),a=o.length;n.push(o[a-2],o[a-1]),i.push(be.NONE);for(let l=0;l<a;l+=2)n.push(o[l],o[l+1]),i.push(s);n.push(o[0],o[1]),i.push(be.NONE),n.push(o[2],o[3]),i.push(be.NONE)}}class tie{path(t,r){const n=t.shape,i=n.x,o=n.y,s=n.width,a=n.height,l=t.points;l.length=0,l.push(i,o,i+s,o,i+s,o+a,i,o+a)}line(t,r){const{verts:n,joints:i}=r,{points:o}=t,s=t.goodJointType(),a=o.length;n.push(o[a-2],o[a-1]),i.push(be.NONE);for(let l=0;l<a;l+=2)n.push(o[l],o[l+1]),i.push(s);n.push(o[0],o[1]),i.push(be.NONE),n.push(o[2],o[3]),i.push(be.NONE)}fill(t,r){const{verts:n,joints:i}=r,{points:o,triangles:s}=t;s.length=0,n.push(o[0],o[1],o[2],o[3],o[4],o[5],o[6],o[7]),i.push(be.FILL,be.FILL,be.FILL,be.FILL),s.push(0,1,2,0,2,3)}}function dc(e,t,r){const n=t-e;return e+n*r}function Lv(e,t,r,n,i,o,s=[],a=.001){const u=s;let c=0,f=0,p=0,v=0,g=0,b=0;for(let _=0,w=0;_<=20;++_)w=_/20,c=dc(e,r,w),f=dc(t,n,w),p=dc(r,i,w),v=dc(n,o,w),g=dc(c,p,w),b=dc(f,v,w),!(_===0&&Math.abs(g-u[u.length-2])<a&&Math.abs(b-u[u.length-1])<a)&&u.push(g,b);return u}class rie{path(t,r){const n=t.shape,{points:i}=t,o=n.x,s=n.y,a=n.width,l=n.height,u=Math.max(0,Math.min(n.radius,Math.min(a,l)/2));if(i.length=0,!u)i.push(o,s,o+a,s,o+a,s+l,o,s+l);else{const c=r.closePointEps;Lv(o,s+u,o,s,o+u,s,i,c),Lv(o+a-u,s,o+a,s,o+a,s+u,i,c),Lv(o+a,s+l-u,o+a,s+l,o+a-u,s+l,i,c),Lv(o+u,s+l,o,s+l,o,s+l-u,i,c),i.length>=4&&Math.abs(i[0]-i[i.length-2])<c&&Math.abs(i[1]-i[i.length-1])<c&&(i.pop(),i.pop())}}line(t,r){const{verts:n,joints:i}=r,{points:o}=t,s=o.length===8?t.goodJointType():be.JOINT_MITER+3,a=o.length;n.push(o[a-2],o[a-1]),i.push(be.NONE);for(let l=0;l<a;l+=2)n.push(o[l],o[l+1]),i.push(s);n.push(o[0],o[1]),i.push(be.NONE),n.push(o[2],o[3]),i.push(be.NONE)}fill(t,r){const{verts:n,joints:i}=r,{points:o}=t;t.triangles=Rh.exports(o,null,2);for(let s=0,a=o.length;s<a;s++)n.push(o[s],o[++s]),i.push(be.FILL)}}const nie=[];class iie{path(t,r){const n=t.shape,i=t.points=n.points.slice(),o=r.closePointEps,s=o*o;if(i.length===0)return;const a=new Gt(i[0],i[1]),l=new Gt(i[i.length-2],i[i.length-1]),u=t.closeStroke=n.closeStroke;let c=i.length,f=2;for(let p=2;p<c;p+=2){const v=i[p-2],g=i[p-1],b=i[p],_=i[p+1];let w=!0;Math.abs(v-b)<o&&Math.abs(g-_)<o&&(w=!1),w&&(i[f]=i[p],i[f+1]=i[p+1],f+=2)}i.length=c=f,f=2;for(let p=2;p+2<c;p+=2){let v=i[p-2],g=i[p-1];const b=i[p],_=i[p+1];let w=i[p+2],x=i[p+3];v-=b,g-=_,w-=b,x-=_;let T=!0;Math.abs(w*g-x*v)<s&&v*w+g*x<-s&&(T=!1),T&&(i[f]=i[p],i[f+1]=i[p+1],f+=2)}i[f]=i[c-2],i[f+1]=i[c-1],f+=2,i.length=c=f,!(c<=2)&&u&&Math.abs(a.x-l.x)<o&&Math.abs(a.y-l.y)<o&&(i.pop(),i.pop())}line(t,r){const{closeStroke:n,points:i}=t,o=r.closePointEps,s=i.length;if(s<=2)return;const{verts:a,joints:l}=r,u=t.jointType(),c=t.capType();let f=0,p,v;n?(p=i[s-2],v=i[s-1],l.push(be.NONE)):(p=i[2],v=i[3],c===be.CAP_ROUND?(a.push(i[0],i[1]),l.push(be.NONE),l.push(be.CAP_ROUND),f=0):(f=c,l.push(be.NONE))),a.push(p,v);for(let g=0;g<s;g+=2){const b=i[g],_=i[g+1];let w,x;g+2<s?(w=i[g+2],x=i[g+3]):(w=i[0],x=i[1]);const T=w-b,I=x-_;let R,E,O=u;g+2>=s?(R=i[2],E=i[3],n||(O=be.NONE)):g+4>=s?(R=i[0],E=i[1],n||(c===be.CAP_ROUND&&(O=be.JOINT_CAP_ROUND),c===be.CAP_BUTT&&(O=be.JOINT_CAP_BUTT),c===be.CAP_SQUARE&&(O=be.JOINT_CAP_SQUARE))):(R=i[g+4],E=i[g+5]);const P=b-p,N=_-v;if(u>=be.JOINT_BEVEL&&u<=be.JOINT_MITER){const A=R-w,j=E-x;if(O>=be.JOINT_BEVEL&&O<=be.JOINT_MITER+3){const X=A*I-j*T;if(Math.abs(X)<o)switch(u&-4){case be.JOINT_ROUND:O=be.JOINT_CAP_ROUND;break;default:O=be.JOINT_CAP_BUTT;break}}if(u===be.JOINT_MITER){let X=0;P*T+N*I>-o&&X++,O===be.JOINT_MITER&&A*T+j*I>-o&&(X+=2),O+=X}}f===0&&Math.abs(P*I-N*T)<o&&(f=be.CAP_BUTT2),O+=f,f=0,a.push(b,_),l.push(O),p=b,v=_}n?(a.push(i[0],i[1]),l.push(be.NONE),a.push(i[2],i[3]),l.push(be.NONE)):(a.push(i[s-4],i[s-3]),l.push(be.NONE))}fill(t,r){let n=t.points;const i=t.holes,o=r.closePointEps,{verts:s,joints:a}=r;if(n.length<6)return;const l=[];let u=n.length;for(let v=0;v<i.length;v++){const g=i[v];l.push(n.length/2),n=n.concat(g.points)}const c=nie;c.length<n.length&&(c.length=n.length);let f=0;for(let v=0;v<=l.length;v++){let g=u/2;v>0&&(v<l.length?g=l[v]:g=n.length>>1),c[f*2]=g-1,c[(g-1)*2+1]=0;for(let b=f;b+1<g;b++)c[b*2+1]=b+1,c[b*2+2]=b;f=g}if(t.triangles=Rh.exports(n,l,2),!t.triangles)return;if(!t.fillAA){for(let v=0;v<n.length;v+=2)s.push(n[v],n[v+1]),a.push(be.FILL);return}const{triangles:p}=t;u=n.length;for(let v=0;v<p.length;v+=3){let g=0;for(let b=0;b<3;b++){const _=p[v+b],w=p[v+(b+1)%3];(c[_*2]===w||c[_*2+1]===w)&&(g|=1<<b)}a.push(be.FILL_EXPAND+g),a.push(be.NONE),a.push(be.NONE),a.push(be.NONE),a.push(be.NONE),a.push(be.NONE)}for(let v=0;v<u/2;v++){const g=c[v*2],b=c[v*2+1];let _=n[b*2+1]-n[v*2+1],w=-(n[b*2]-n[v*2]),x=n[v*2+1]-n[g*2+1],T=-(n[v*2]-n[g*2]);const I=Math.sqrt(_*_+w*w);_/=I,w/=I;const R=Math.sqrt(x*x+T*T);x/=R,T/=R;let E=_+x,O=w+T;const P=E*_+O*w;Math.abs(P)<o?(E=_,O=w):(E/=P,O/=P),c[v*2]=E,c[v*2+1]=O}for(let v=0;v<p.length;v+=3){const g=p[v],b=p[v+1],_=p[v+2],w=n[_*2+1]-n[b*2+1],x=-(n[_*2]-n[b*2]),T=n[b*2+1]-n[g*2+1],I=-(n[b*2]-n[g*2]);let R=1;w*I-T*x>0&&(R=2);for(let E=0;E<3;E++){const O=p[v+E*R%3];s.push(n[O*2],n[O*2+1])}for(let E=0;E<3;E++){const O=p[v+E*R%3];s.push(c[O*2],c[O*2+1])}}}}const Uv={[vt.POLY]:new iie,[vt.CIRC]:new EN,[vt.ELIP]:new EN,[vt.RECT]:new tie,[vt.RREC]:new rie},CN=[],Fv=[],pc=new Gt,oie=new vu;class Zy extends kh{static __initStatic(){this.BATCHABLE_SIZE=100}__init(){this.indicesUint16=null}get points(){return this.buildData.verts}get closePointEps(){return this.buildData.closePointEps}initAttributes(t){this._buffer=new Ar(null,t,!1),this._bufferFloats=new Float32Array,this._bufferUint=new Uint32Array,this._indexBuffer=new Ar(null,t,!0),this.addAttribute("aPrev",this._buffer,2,!1,$e.FLOAT).addAttribute("aPoint1",this._buffer,2,!1,$e.FLOAT).addAttribute("aPoint2",this._buffer,2,!1,$e.FLOAT).addAttribute("aNext",this._buffer,2,!1,$e.FLOAT).addAttribute("aTravel",this._buffer,1,!1,$e.FLOAT).addAttribute("aVertexJoint",this._buffer,1,!1,$e.FLOAT).addAttribute("aStyleId",this._buffer,1,!1,$e.FLOAT).addAttribute("aColor",this._buffer,4,!0,$e.UNSIGNED_BYTE).addIndex(this._indexBuffer),this.strideFloats=12}constructor(){super(),Zy.prototype.__init.call(this),this.initAttributes(!1),this.buildData=new jl,this.graphicsData=[],this.dirty=0,this.batchDirty=-1,this.cacheDirty=-1,this.clearDirty=0,this.drawCalls=[],this.batches=[],this.shapeBuildIndex=0,this.shapeBatchIndex=0,this._bounds=new vu,this.boundsDirty=-1,this.boundsPadding=0,this.batchable=!1,this.indicesUint16=null,this.packer=null,this.packSize=0,this.pack32index=null}checkInstancing(t,r){this.packer||(this.packer=new Di,this.pack32index=r)}get bounds(){return this.boundsDirty!==this.dirty&&(this.boundsDirty=this.dirty,this.calculateBounds()),this._bounds}invalidate(){this.boundsDirty=-1,this.dirty++,this.batchDirty++,this.shapeBuildIndex=0,this.shapeBatchIndex=0,this.packSize=0,this.buildData.clear();for(let t=0;t<this.drawCalls.length;t++)this.drawCalls[t].clear(),Fv.push(this.drawCalls[t]);this.drawCalls.length=0;for(let t=0;t<this.batches.length;t++){const r=this.batches[t];r.reset(),CN.push(r)}this.batches.length=0}clear(){return this.graphicsData.length>0&&(this.invalidate(),this.clearDirty++,this.graphicsData.length=0),this}drawShape(t,r=null,n=null,i=null){const o=new Pg(t,r,n,i);return this.graphicsData.push(o),this.dirty++,this}drawHole(t,r=null){if(!this.graphicsData.length)return null;const n=new Pg(t,null,null,r),i=this.graphicsData[this.graphicsData.length-1];return n.lineStyle=i.lineStyle,i.holes.push(n),this.dirty++,this}destroy(){super.destroy();for(let t=0;t<this.graphicsData.length;++t)this.graphicsData[t].destroy();this.buildData.destroy(),this.buildData=null,this.indexBuffer.destroy(),this.indexBuffer=null,this.graphicsData.length=0,this.graphicsData=null,this.drawCalls.length=0,this.drawCalls=null,this.batches.length=0,this.batches=null,this._bounds=null}containsPoint(t){const r=this.graphicsData;for(let n=0;n<r.length;++n){const i=r[n];if(!!i.fillStyle.visible&&i.shape&&(i.matrix?i.matrix.applyInverse(t,pc):pc.copyFrom(t),i.shape.contains(pc.x,pc.y))){let o=!1;if(i.holes){for(let s=0;s<i.holes.length;s++)if(i.holes[s].shape.contains(pc.x,pc.y)){o=!0;break}}if(!o)return!0}}return!1}updatePoints(){}updateBufferSize(){this._buffer.update(new Float32Array)}updateBuild(){const{graphicsData:t,buildData:r}=this,n=t.length;for(let i=this.shapeBuildIndex;i<n;i++){const o=t[i];o.strokeStart=0,o.strokeLen=0,o.fillStart=0,o.fillLen=0;const{fillStyle:s,lineStyle:a,holes:l}=o;if(!s.visible&&!a.visible)continue;const u=Uv[o.type];if(o.clearPath(),u.path(o,r),o.matrix&&this.transformPoints(o.points,o.matrix),o.clearBuild(),!(o.points.length<=2)&&(s.visible&&(o.fillAA=o.fillStyle.smooth&&!(o.lineStyle.visible&&o.lineStyle.alpha>=.99&&o.lineStyle.width>=.99),o.fillStart=r.joints.length,l.length?(this.processHoles(l),Uv[vt.POLY].fill(o,r)):o.fillAA&&(o.type===vt.RECT||o.type===vt.RREC)?Uv[vt.POLY].fill(o,r):u.fill(o,r),o.fillLen=r.joints.length-o.fillStart),a.visible)){o.strokeStart=r.joints.length,u.line(o,r);for(let c=0;c<l.length;c++)u.line(l[c],r);o.strokeLen=r.joints.length-o.strokeStart}}this.shapeBuildIndex=n}updateBatches(t){if(!this.graphicsData.length){this.batchable=!0;return}if(this.updateBuild(),!this.validateBatching())return;const{buildData:r,graphicsData:n}=this,i=n.length;this.cacheDirty=this.dirty;let o=null,s=null;this.batches.length>0&&(o=this.batches[this.batches.length-1],s=o.style);for(let a=this.shapeBatchIndex;a<i;a++){const l=n[a],u=l.fillStyle,c=l.lineStyle;if(l.matrix&&this.transformPoints(l.points,l.matrix),!(!u.visible&&!c.visible))for(let f=0;f<2;f++){const p=f===0?u:c;if(!p.visible)continue;const v=p.texture.baseTexture,g=r.vertexSize,b=r.indexSize;v.wrapMode=Jo.REPEAT,f===0?this.packer.updateBufferSize(l.fillStart,l.fillLen,l.triangles.length,r):this.packer.updateBufferSize(l.strokeStart,l.strokeLen,l.triangles.length,r),r.vertexSize!==g&&(o&&!this._compareStyles(s,p)&&(o.end(b,g),o=null),o||(o=CN.pop()||new eie,o.begin(p,b,g),this.batches.push(o),s=p),f===0?o.jointEnd=l.fillStart+l.fillLen:o.jointEnd=l.strokeStart+l.strokeLen)}}if(this.shapeBatchIndex=i,o&&o.end(r.indexSize,r.vertexSize),this.batches.length===0){this.batchable=!0;return}this.batchable=this.isBatchable(),this.batchable?this.packBatches():(this.buildDrawCalls(t),this.updatePack())}updatePack(){const{vertexSize:t,indexSize:r}=this.buildData;if(this.packSize===t)return;const{strideFloats:n,packer:i,buildData:o,batches:s}=this,a=this._buffer,l=this._indexBuffer,u=t*n;if(a.data.length!==u){const f=new ArrayBuffer(u*4);this._bufferFloats=new Float32Array(f),this._bufferUint=new Uint32Array(f),a.data=this._bufferFloats}l.data.length!==r&&(t>65535&&this.pack32index?l.data=new Uint32Array(r):l.data=new Uint16Array(r)),i.beginPack(o,this._bufferFloats,this._bufferUint,l.data);let c=0;for(let f=0;f<this.graphicsData.length;f++){const p=this.graphicsData[f];if(p.fillLen){for(;s[c].jointEnd<=p.fillStart;)c++;i.packInterleavedGeometry(p.fillStart,p.fillLen,p.triangles,s[c].styleId,s[c].rgba)}if(p.strokeLen){for(;s[c].jointEnd<=p.strokeStart;)c++;i.packInterleavedGeometry(p.strokeStart,p.strokeLen,p.triangles,s[c].styleId,s[c].rgba)}}a.update(),l.update(),this.packSize=t}_compareStyles(t,r){if(!t||!r||t.texture.baseTexture!==r.texture.baseTexture||t.color+t.alpha!==r.color+r.alpha||t.width!==r.width||t.scaleMode!==r.scaleMode||t.alignment!==r.alignment)return!1;const n=t.matrix||er.IDENTITY,i=r.matrix||er.IDENTITY;return S7(n,i)}validateBatching(){if(this.dirty===this.cacheDirty||!this.graphicsData.length)return!1;for(let t=0,r=this.graphicsData.length;t<r;t++){const n=this.graphicsData[t],i=n.fillStyle,o=n.lineStyle;if(i&&!i.texture.baseTexture.valid||o&&!o.texture.baseTexture.valid)return!1}return!0}packBatches(){this.batchDirty++;const t=this.batches;for(let r=0,n=t.length;r<n;r++){const i=t[r];for(let o=0;o<i.size;o++){const s=i.start+o;this.indicesUint16[s]=this.indicesUint16[s]-i.attribStart}}}isBatchable(){return!1}buildDrawCalls(t){for(let i=0;i<this.drawCalls.length;i++)this.drawCalls[i].clear(),Fv.push(this.drawCalls[i]);this.drawCalls.length=0;let r=Fv.pop()||new SN;r.begin(t,null);let n=0;this.drawCalls.push(r);for(let i=0;i<this.batches.length;i++){const o=this.batches[i],s=o.style;if(o.attribSize===0)continue;let a=-1;const l=s.getTextureMatrix();r.check(s.shader)&&(a=r.add(s.texture,l,s.width,s.alignment||0,s.packLineScale())),a<0&&(r=Fv.pop()||new SN,this.drawCalls.push(r),r.begin(t,s.shader),r.start=n,a=r.add(s.texture,l,s.width,s.alignment||0,s.packLineScale())),r.size+=o.size,n+=o.size;const{color:u,alpha:c}=s,f=(u>>16)+(u&65280)+((u&255)<<16);o.rgba=Vy(f,c),o.styleId=a}}processHoles(t){for(let r=0;r<t.length;r++){const n=t[r];Uv[n.type].path(n,this.buildData),n.matrix&&this.transformPoints(n.points,n.matrix)}}calculateBounds(){const t=this._bounds,r=oie;let n=er.IDENTITY;this._bounds.clear(),r.clear();for(let i=0;i<this.graphicsData.length;i++){const o=this.graphicsData[i],s=o.shape,a=o.type,l=o.lineStyle,u=o.matrix||er.IDENTITY;let c=0;if(l&&l.visible){const f=l.alignment;c=l.width,a===vt.POLY?c=c*(.5+Math.abs(.5-f)):c=c*Math.max(0,f)}if(n!==u&&(r.isEmpty()||(t.addBoundsMatrix(r,n),r.clear()),n=u),a===vt.RECT||a===vt.RREC){const f=s;r.addFramePad(f.x,f.y,f.x+f.width,f.y+f.height,c,c)}else if(a===vt.CIRC){const f=s;r.addFramePad(f.x,f.y,f.x,f.y,f.radius+c,f.radius+c)}else if(a===vt.ELIP){const f=s;r.addFramePad(f.x,f.y,f.x,f.y,f.width+c,f.height+c)}else{const f=s;t.addVerticesMatrix(n,f.points,0,f.points.length,c,c)}}r.isEmpty()||t.addBoundsMatrix(r,n),t.pad(this.boundsPadding,this.boundsPadding)}transformPoints(t,r){for(let n=0;n<t.length/2;n++){const i=t[n*2],o=t[n*2+1];t[n*2]=r.a*i+r.c*o+r.tx,t[n*2+1]=r.b*i+r.d*o+r.ty}}}Zy.__initStatic();const sie=`#version 100
precision highp float;
const float FILL = 1.0;
const float BEVEL = 4.0;
const float MITER = 8.0;
const float ROUND = 12.0;
const float JOINT_CAP_BUTT = 16.0;
const float JOINT_CAP_SQUARE = 18.0;
const float JOINT_CAP_ROUND = 20.0;

const float FILL_EXPAND = 24.0;

const float CAP_BUTT = 1.0;
const float CAP_SQUARE = 2.0;
const float CAP_ROUND = 3.0;
const float CAP_BUTT2 = 4.0;

const float MITER_LIMIT = 10.0;

// === geom ===
attribute vec2 aPrev;
attribute vec2 aPoint1;
attribute vec2 aPoint2;
attribute vec2 aNext;
attribute float aVertexJoint;
attribute float aTravel;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform vec4 tint;

varying vec4 vLine1;
varying vec4 vLine2;
varying vec4 vArc;
varying float vType;

uniform float resolution;
uniform float expand;

// === style ===
attribute float aStyleId;
attribute vec4 aColor;

varying float vTextureId;
varying vec4 vColor;
varying vec2 vTextureCoord;
varying float vTravel;

uniform vec2 styleLine[%MAX_STYLES%];
uniform vec3 styleMatrix[2 * %MAX_STYLES%];
uniform float styleTextureId[%MAX_STYLES%];
uniform vec2 samplerSize[%MAX_TEXTURES%];

vec2 doBisect(vec2 norm, float len, vec2 norm2, float len2,
    float dy, float inner) {
    vec2 bisect = (norm + norm2) / 2.0;
    bisect /= dot(norm, bisect);
    vec2 shift = dy * bisect;
    if (inner > 0.5) {
        if (len < len2) {
            if (abs(dy * (bisect.x * norm.y - bisect.y * norm.x)) > len) {
                return dy * norm;
            }
        } else {
            if (abs(dy * (bisect.x * norm2.y - bisect.y * norm2.x)) > len2) {
                return dy * norm;
            }
        }
    }
    return dy * bisect;
}

void main(void){
    vec2 pointA = (translationMatrix * vec3(aPoint1, 1.0)).xy;
    vec2 pointB = (translationMatrix * vec3(aPoint2, 1.0)).xy;

    vec2 xBasis = pointB - pointA;
    float len = length(xBasis);
    vec2 forward = xBasis / len;
    vec2 norm = vec2(forward.y, -forward.x);

    float type = floor(aVertexJoint / 16.0);
    float vertexNum = aVertexJoint - type * 16.0;
    float dx = 0.0, dy = 1.0;

    float capType = floor(type / 32.0);
    type -= capType * 32.0;

    int styleId = int(aStyleId + 0.5);
    float lineWidth = styleLine[styleId].x;
    vTextureId = floor(styleTextureId[styleId] / 4.0);
    float scaleMode = styleTextureId[styleId] - vTextureId * 4.0;
    float avgScale = 1.0;
    if (scaleMode > 2.5) {
        avgScale = length(translationMatrix * vec3(1.0, 0.0, 0.0));
    } else if (scaleMode > 1.5) {
        avgScale = length(translationMatrix * vec3(0.0, 1.0, 0.0));
    } else if (scaleMode > 0.5) {
        vec2 avgDiag = (translationMatrix * vec3(1.0, 1.0, 0.0)).xy;
        avgScale = sqrt(dot(avgDiag, avgDiag) * 0.5);
    }
    lineWidth *= 0.5 * avgScale;
    float lineAlignment = 2.0 * styleLine[styleId].y - 1.0;
    vTextureCoord = vec2(0.0);

    vec2 pos;

    if (capType == CAP_ROUND) {
        vertexNum += 4.0;
        type = JOINT_CAP_ROUND;
        capType = 0.0;
        lineAlignment = -lineAlignment;
    }

    vLine1 = vec4(0.0, 10.0, 1.0, 0.0);
    vLine2 = vec4(0.0, 10.0, 1.0, 0.0);
    vArc = vec4(0.0);
    if (type == FILL) {
        pos = pointA;
        vType = 0.0;
        vLine2 = vec4(-2.0, -2.0, -2.0, 0.0);
        vec2 vTexturePixel;
        vTexturePixel.x = dot(vec3(aPoint1, 1.0), styleMatrix[styleId * 2]);
        vTexturePixel.y = dot(vec3(aPoint1, 1.0), styleMatrix[styleId * 2 + 1]);
        vTextureCoord = vTexturePixel / samplerSize[int(vTextureId)];
    } else if (type >= FILL_EXPAND && type < FILL_EXPAND + 7.5) {
        // expand vertices
        float flags = type - FILL_EXPAND;
        float flag3 = floor(flags / 4.0);
        float flag2 = floor((flags - flag3 * 4.0) / 2.0);
        float flag1 = flags - flag3 * 4.0 - flag2 * 2.0;

        vec2 prev = (translationMatrix * vec3(aPrev, 1.0)).xy;

        vec2 n1 = normalize(vec2(pointA.y - prev.y, -(pointA.x - prev.x)));
        vec2 n2 = normalize(vec2(pointB.y - pointA.y, -(pointB.x - pointA.x)));
        vec2 n3 = normalize(vec2(prev.y - pointB.y, -(prev.x - pointB.x)));

        if (n1.x * n2.y - n1.y * n2.x < 0.0) {
            n1 = -n1;
            n2 = -n2;
            n3 = -n3;
        }

        float len2 = length(aNext);
        vec2 bisect = (translationMatrix * vec3(aNext, 0.0)).xy;

        if (vertexNum < 0.5) {
            pos = prev;

            if (flag1 < 0.5 && flag3 < 0.5) {
                bisect = vec2(0.0);
            } else if (flag1 < 0.5) {
                bisect = vec2(n1.y, -n1.x) + n1 / 8.0;
            } else if (flag3 < 0.5) {
                bisect = vec2(-n3.y, n3.x) + n3 / 8.0;
            }
        } else if (vertexNum < 1.5) {
            pos = pointA;

            if (flag1 < 0.5 && flag2 < 0.5) {
                bisect = vec2(0.0);
            } else if (flag1 < 0.5) {
                bisect = vec2(-n1.y, n1.x) + n1 / 8.0;
            } else if (flag2 < 0.5) {
                bisect = vec2(n2.y, -n2.x) + n2 / 8.0;
            }
        } else {
            pos = pointB;

            if (flag2 < 0.5 && flag3 < 0.5) {
                bisect = vec2(0.0);
            } else if (flag2 < 0.5) {
                bisect = vec2(-n2.y, n2.x) + n2 / 8.0;
            } else if (flag3 < 0.5) {
                bisect = vec2(n3.y, -n3.x) + n3 / 8.0;
            }
        }

        if (length(bisect) > 0.0) {
            bisect = normalize(bisect) * len2;
        }

        pos += bisect * expand;

        vLine1 = vec4(16.0, 16.0, 16.0, -1.0);
        if (flag1 > 0.5) {
            vLine1.x = -dot(pos - prev, n1);
        }
        if (flag2 > 0.5) {
            vLine1.y = -dot(pos - pointA, n2);
        }
        if (flag3 > 0.5) {
            vLine1.z = -dot(pos - pointB, n3);
        }
        vLine1.xyz *= resolution;
        vType = 2.0;
    } else if (type >= BEVEL) {
        float dy = lineWidth + expand;
        float shift = lineWidth * lineAlignment;
        float inner = 0.0;
        if (vertexNum >= 1.5) {
            dy = -dy;
            inner = 1.0;
        }

        vec2 base, next, xBasis2, bisect;
        float flag = 0.0;
        float side2 = 1.0;
        if (vertexNum < 0.5 || vertexNum > 2.5 && vertexNum < 3.5) {
            next = (translationMatrix * vec3(aPrev, 1.0)).xy;
            base = pointA;
            flag = type - floor(type / 2.0) * 2.0;
            side2 = -1.0;
        } else {
            next = (translationMatrix * vec3(aNext, 1.0)).xy;
            base = pointB;
            if (type >= MITER && type < MITER + 3.5) {
                flag = step(MITER + 1.5, type);
                // check miter limit here?
            }
        }
        xBasis2 = next - base;
        float len2 = length(xBasis2);
        vec2 norm2 = vec2(xBasis2.y, -xBasis2.x) / len2;
        float D = norm.x * norm2.y - norm.y * norm2.x;
        if (D < 0.0) {
            inner = 1.0 - inner;
        }

        norm2 *= side2;

        float collinear = step(0.0, dot(norm, norm2));

        vType = 0.0;
        float dy2 = -1000.0;

        if (abs(D) < 0.01 && collinear < 0.5) {
            if (type >= ROUND && type < ROUND + 1.5) {
                type = JOINT_CAP_ROUND;
            }
            //TODO: BUTT here too
        }

        vLine1 = vec4(0.0, lineWidth, max(abs(norm.x), abs(norm.y)), min(abs(norm.x), abs(norm.y)));
        vLine2 = vec4(0.0, lineWidth, max(abs(norm2.x), abs(norm2.y)), min(abs(norm2.x), abs(norm2.y)));

        if (vertexNum < 3.5) {
            if (abs(D) < 0.01 && collinear < 0.5) {
                pos = (shift + dy) * norm;
            } else {
                if (flag < 0.5 && inner < 0.5) {
                    pos = (shift + dy) * norm;
                } else {
                    pos = doBisect(norm, len, norm2, len2, shift + dy, inner);
                }
            }
            vLine2.y = -1000.0;
            if (capType >= CAP_BUTT && capType < CAP_ROUND) {
                float extra = step(CAP_SQUARE, capType) * lineWidth;
                vec2 back = -forward;
                if (vertexNum < 0.5 || vertexNum > 2.5) {
                    pos += back * (expand + extra);
                    dy2 = expand;
                } else {
                    dy2 = dot(pos + base - pointA, back) - extra;
                }
            }
            if (type >= JOINT_CAP_BUTT && type < JOINT_CAP_SQUARE + 0.5) {
                float extra = step(JOINT_CAP_SQUARE, type) * lineWidth;
                if (vertexNum < 0.5 || vertexNum > 2.5) {
                    vLine2.y = dot(pos + base - pointB, forward) - extra;
                } else {
                    pos += forward * (expand + extra);
                    vLine2.y = expand;
                    if (capType >= CAP_BUTT) {
                        dy2 -= expand + extra;
                    }
                }
            }
        } else if (type >= JOINT_CAP_ROUND && type < JOINT_CAP_ROUND + 1.5) {
            base += shift * norm;
            if (inner > 0.5) {
                dy = -dy;
                inner = 0.0;
            }
            vec2 d2 = abs(dy) * forward;
            if (vertexNum < 4.5) {
                dy = -dy;
                pos = dy * norm;
            } else if (vertexNum < 5.5) {
                pos = dy * norm;
            } else if (vertexNum < 6.5) {
                pos = dy * norm + d2;
                vArc.x = abs(dy);
            } else {
                dy = -dy;
                pos = dy * norm + d2;
                vArc.x = abs(dy);
            }
            vLine2 = vec4(0.0, lineWidth * 2.0 + 10.0, 1.0  , 0.0); // forget about line2 with type=3
            vArc.y = dy;
            vArc.z = 0.0;
            vArc.w = lineWidth;
            vType = 3.0;
        } else if (abs(D) < 0.01 && collinear < 0.5) {
            pos = dy * norm;
        } else {
            if (inner > 0.5) {
                dy = -dy;
                inner = 0.0;
            }
            float side = sign(dy);
            vec2 norm3 = normalize(norm + norm2);

            if (type >= MITER && type < MITER + 3.5) {
                vec2 farVertex = doBisect(norm, len, norm2, len2, shift + dy, 0.0);
                if (length(farVertex) > abs(shift + dy) * MITER_LIMIT) {
                    type = BEVEL;
                }
            }

            if (vertexNum < 4.5) {
                pos = doBisect(norm, len, norm2, len2, shift - dy, 1.0);
            } else if (vertexNum < 5.5) {
                pos = (shift + dy) * norm;
            } else if (vertexNum > 7.5) {
                pos = (shift + dy) * norm2;
            } else {
                if (type >= ROUND && type < ROUND + 1.5) {
                    pos = doBisect(norm, len, norm2, len2, shift + dy, 0.0);
                    float d2 = abs(shift + dy);
                    if (length(pos) > abs(shift + dy) * 1.5) {
                        if (vertexNum < 6.5) {
                            pos.x = (shift + dy) * norm.x - d2 * norm.y;
                            pos.y = (shift + dy) * norm.y + d2 * norm.x;
                        } else {
                            pos.x = (shift + dy) * norm2.x + d2 * norm2.y;
                            pos.y = (shift + dy) * norm2.y - d2 * norm2.x;
                        }
                    }
                } else if (type >= MITER && type < MITER + 3.5) {
                    pos = doBisect(norm, len, norm2, len2, shift + dy, 0.0); //farVertex
                } else if (type >= BEVEL && type < BEVEL + 1.5) {
                    float d2 = side / resolution;
                    if (vertexNum < 6.5) {
                        pos = (shift + dy) * norm + d2 * norm3;
                    } else {
                        pos = (shift + dy) * norm2 + d2 * norm3;
                    }
                }
            }

            if (type >= ROUND && type < ROUND + 1.5) {
                vArc.x = side * dot(pos, norm3);
                vArc.y = pos.x * norm3.y - pos.y * norm3.x;
                vArc.z = dot(norm, norm3) * (lineWidth + side * shift);
                vArc.w = lineWidth + side * shift;
                vType = 3.0;
            } else if (type >= MITER && type < MITER + 3.5) {
                vType = 1.0;
            } else if (type >= BEVEL && type < BEVEL + 1.5) {
                vType = 4.0;
                vArc.z = dot(norm, norm3) * (lineWidth + side * shift) - side * dot(pos, norm3);
            }

            dy = side * (dot(pos, norm) - shift);
            dy2 = side * (dot(pos, norm2) - shift);
        }

        pos += base;
        vLine1.xy = vec2(dy, vLine1.y) * resolution;
        vLine2.xy = vec2(dy2, vLine2.y) * resolution;
        vArc = vArc * resolution;
        vTravel = aTravel * avgScale + dot(pos - pointA, vec2(-norm.y, norm.x));
    }

    gl_Position = vec4((projectionMatrix * vec3(pos, 1.0)).xy, 0.0, 1.0);

    vColor = aColor * tint;
}`,aie=`#version 100
#ifdef GL_FRAGMENT_PRECISION_HIGH
  precision highp float;
#else
  precision mediump float;
#endif
`,lie=`%PRECISION%
varying vec4 vColor;
varying vec4 vLine1;
varying vec4 vLine2;
varying vec4 vArc;
varying float vType;
varying float vTextureId;
varying vec2 vTextureCoord;
varying float vTravel;
uniform sampler2D uSamplers[%MAX_TEXTURES%];

%PIXEL_LINE%

void main(void){
    %PIXEL_COVERAGE%

    vec4 texColor;
    float textureId = floor(vTextureId+0.5);
    %FOR_LOOP%

    gl_FragColor = vColor * texColor * alpha;
}
`,uie=[`
float pixelLine(float x, float A, float B) {
    return clamp(x + 0.5, 0.0, 1.0);
}
`,`
float pixelLine(float x, float A, float B) {
    float y = abs(x), s = sign(x);
    if (y * 2.0 < A - B) {
        return 0.5 + s * y / A;
    }
    y -= (A - B) * 0.5;
    y = max(1.0 - y / B, 0.0);
    return (1.0 + s * (1.0 - y * y)) * 0.5;
    //return clamp(x + 0.5, 0.0, 1.0);
}
`],cie=`float alpha = 1.0;
if (vType < 0.5) {
    float left = pixelLine(-vLine1.y - vLine1.x, vLine1.z, vLine1.w);
    float right = pixelLine(vLine1.y - vLine1.x, vLine1.z, vLine1.w);
    float near = vLine2.x - 0.5;
    float far = min(vLine2.x + 0.5, 0.0);
    float top = vLine2.y - 0.5;
    float bottom = min(vLine2.y + 0.5, 0.0);
    alpha = (right - left) * max(bottom - top, 0.0) * max(far - near, 0.0);
} else if (vType < 1.5) {
    float a1 = pixelLine(- vLine1.y - vLine1.x, vLine1.z, vLine1.w);
    float a2 = pixelLine(vLine1.y - vLine1.x, vLine1.z, vLine1.w);
    float b1 = pixelLine(- vLine2.y - vLine2.x, vLine2.z, vLine2.w);
    float b2 = pixelLine(vLine2.y - vLine2.x, vLine2.z, vLine2.w);
    alpha = a2 * b2 - a1 * b1;
} else if (vType < 2.5) {
    alpha *= max(min(vLine1.x + 0.5, 1.0), 0.0);
    alpha *= max(min(vLine1.y + 0.5, 1.0), 0.0);
    alpha *= max(min(vLine1.z + 0.5, 1.0), 0.0);
} else if (vType < 3.5) {
    float a1 = pixelLine(- vLine1.y - vLine1.x, vLine1.z, vLine1.w);
    float a2 = pixelLine(vLine1.y - vLine1.x, vLine1.z, vLine1.w);
    float b1 = pixelLine(- vLine2.y - vLine2.x, vLine2.z, vLine2.w);
    float b2 = pixelLine(vLine2.y - vLine2.x, vLine2.z, vLine2.w);
    float alpha_miter = a2 * b2 - a1 * b1;
    float alpha_plane = clamp(vArc.z - vArc.x + 0.5, 0.0, 1.0);
    float d = length(vArc.xy);
    float circle_hor = max(min(vArc.w, d + 0.5) - max(-vArc.w, d - 0.5), 0.0);
    float circle_vert = min(vArc.w * 2.0, 1.0);
    float alpha_circle = circle_hor * circle_vert;
    alpha = min(alpha_miter, max(alpha_circle, alpha_plane));
} else {
    float a1 = pixelLine(- vLine1.y - vLine1.x, vLine1.z, vLine1.w);
    float a2 = pixelLine(vLine1.y - vLine1.x, vLine1.z, vLine1.w);
    float b1 = pixelLine(- vLine2.y - vLine2.x, vLine2.z, vLine2.w);
    float b2 = pixelLine(vLine2.y - vLine2.x, vLine2.z, vLine2.w);
    alpha = a2 * b2 - a1 * b1;
    alpha *= clamp(vArc.z + 0.5, 0.0, 1.0);
}
`;class hie extends Oh{constructor(t,r=sie,n=lie,i={}){const{maxStyles:o,maxTextures:s,pixelLine:a}=t;r=r.replace(/%MAX_TEXTURES%/gi,`${s}`).replace(/%MAX_STYLES%/gi,`${o}`),n=n.replace(/%PRECISION%/gi,aie).replace(/%PIXEL_LINE%/gi,uie[a]).replace(/%PIXEL_COVERAGE%/gi,cie).replace(/%MAX_TEXTURES%/gi,`${s}`).replace(/%FOR_LOOP%/gi,E7.generateSampleSrc(s)),super(r,n),this.settings=t}}class E7 extends Vs{constructor(t,r=new hie(t),n={}){const{maxStyles:i,maxTextures:o}=t,s=new Int32Array(o);for(let a=0;a<o;a++)s[a]=a;super(r,Object.assign(n,{styleMatrix:new Float32Array(6*i),styleTextureId:new Float32Array(i),styleLine:new Float32Array(2*i),samplerSize:new Float32Array(2*o),uSamplers:s,tint:new Float32Array([1,1,1,1]),resolution:1,expand:1})),this.settings=t}static generateSampleSrc(t){let r="";r+=`
`,r+=`
`;for(let n=0;n<t;n++)n>0&&(r+=`
else `),n<t-1&&(r+=`if(textureId < ${n}.5)`),r+=`
{`,r+=`
	texColor = texture2D(uSamplers[${n}], vTextureCoord);`,r+=`
}`;return r+=`
`,r+=`
`,r}}const Ia={LINE_SCALE_MODE:ai.NORMAL,SHADER_MAX_STYLES:24,SHADER_MAX_TEXTURES:4,PIXEL_LINE:0},{BezierUtils:fie,QuadraticUtils:die,ArcUtils:IN}=Pte,pie=new Float32Array(3),O_={};class ar extends Pi{static __initStatic(){this._TEMP_POINT=new Gt}get geometry(){return this._geometry}constructor(t=null){super(),this._geometry=t||new Zy,this._geometry.refCount++,this.shader=null,this.shaderSettings={maxStyles:Ia.SHADER_MAX_STYLES,maxTextures:Ia.SHADER_MAX_TEXTURES,pixelLine:Ia.PIXEL_LINE},this.state=gl.for2d(),this._fillStyle=new qy,this._lineStyle=new j4,this._matrix=null,this._holeMode=!1,this.currentPath=null,this.batches=[],this.batchTint=-1,this.batchDirty=-1,this.vertexData=null,this.pluginName="smooth",this._transformID=-1,this.tint=16777215,this.blendMode=Ze.NORMAL}clone(){return this.finishPoly(),new ar(this._geometry)}set blendMode(t){this.state.blendMode=t}get blendMode(){return this.state.blendMode}get tint(){return this._tint}set tint(t){this._tint=t}get fill(){return this._fillStyle}get line(){return this._lineStyle}lineStyle(t=null,r=0,n=1,i=.5,o=Ia.LINE_SCALE_MODE){if(typeof t=="number")typeof o=="boolean"&&(o=o?ai.NONE:ai.NORMAL),t={width:t,color:r,alpha:n,alignment:i,scaleMode:o};else{const s=t.native;s!==void 0&&(t.scaleMode=s?ai.NONE:ai.NORMAL)}return this.lineTextureStyle(t)}lineTextureStyle(t){t=Object.assign({width:0,texture:et.WHITE,color:t&&t.texture?16777215:0,alpha:1,matrix:null,alignment:.5,native:!1,cap:zi.BUTT,join:oi.MITER,miterLimit:10,shader:null,scaleMode:Ia.LINE_SCALE_MODE},t),this.currentPath&&this.startPoly();const r=t.width>0&&t.alpha>0;return r?(t.matrix&&(t.matrix=t.matrix.clone(),t.matrix.invert()),Object.assign(this._lineStyle,{visible:r},t)):this._lineStyle.reset(),this}startPoly(){if(this.currentPath){const t=this.currentPath.points,r=this.currentPath.points.length;r>2&&(this.drawShape(this.currentPath),this.currentPath=new tu,this.currentPath.closeStroke=!1,this.currentPath.points.push(t[r-2],t[r-1]))}else this.currentPath=new tu,this.currentPath.closeStroke=!1}finishPoly(){this.currentPath&&(this.currentPath.points.length>2?(this.drawShape(this.currentPath),this.currentPath=null):this.currentPath.points.length=0)}moveTo(t,r){return this.startPoly(),this.currentPath.points[0]=t,this.currentPath.points[1]=r,this}lineTo(t,r){this.currentPath||this.moveTo(0,0);const n=this.currentPath.points,i=n[n.length-2],o=n[n.length-1];return(i!==t||o!==r)&&n.push(t,r),this}_initCurve(t=0,r=0){this.currentPath?this.currentPath.points.length===0&&(this.currentPath.points=[t,r]):this.moveTo(t,r)}quadraticCurveTo(t,r,n,i){this._initCurve();const o=this.currentPath.points;return o.length===0&&this.moveTo(0,0),die.curveTo(t,r,n,i,o),this}bezierCurveTo(t,r,n,i,o,s){return this._initCurve(),fie.curveTo(t,r,n,i,o,s,this.currentPath.points),this}arcTo(t,r,n,i,o){this._initCurve(t,r);const s=this.currentPath.points,a=IN.curveTo(t,r,n,i,o,s);if(a){const{cx:l,cy:u,radius:c,startAngle:f,endAngle:p,anticlockwise:v}=a;this.arc(l,u,c,f,p,v)}return this}arc(t,r,n,i,o,s=!1){if(i===o)return this;if(!s&&o<=i?o+=ch:s&&i<=o&&(i+=ch),o-i===0)return this;const l=t+Math.cos(i)*n,u=r+Math.sin(i)*n,c=this._geometry.closePointEps;let f=this.currentPath?this.currentPath.points:null;if(f){const p=Math.abs(f[f.length-2]-l),v=Math.abs(f[f.length-1]-u);p<c&&v<c||f.push(l,u)}else this.moveTo(l,u),f=this.currentPath.points;return IN.arc(l,u,t,r,n,i,o,s,f),this}beginFill(t=0,r=1,n=!1){return this.beginTextureFill({texture:et.WHITE,color:t,alpha:r,smooth:n})}beginTextureFill(t){t=Object.assign({texture:et.WHITE,color:16777215,alpha:1,matrix:null,smooth:!1},t),this.currentPath&&this.startPoly();const r=t.alpha>0;return r?(t.matrix&&(t.matrix=t.matrix.clone(),t.matrix.invert()),Object.assign(this._fillStyle,{visible:r},t)):this._fillStyle.reset(),this}endFill(){return this.finishPoly(),this._fillStyle.reset(),this}drawRect(t,r,n,i){return this.drawShape(new Fe(t,r,n,i))}drawRoundedRect(t,r,n,i,o){return this.drawShape(new CO(t,r,n,i,o))}drawCircle(t,r,n){return this.drawShape(new SO(t,r,n))}drawEllipse(t,r,n,i){return this.drawShape(new EO(t,r,n,i))}drawPolygon(...t){let r,n=!0;const i=t[0];i.points?(n=i.closeStroke,r=i.points):Array.isArray(t[0])?r=t[0]:r=t;const o=new tu(r);return o.closeStroke=n,this.drawShape(o),this}drawShape(t){return this._holeMode?this._geometry.drawHole(t,this._matrix):this._geometry.drawShape(t,this._fillStyle.clone(),this._lineStyle.clone(),this._matrix),this}clear(){return this._geometry.clear(),this._lineStyle.reset(),this._fillStyle.reset(),this._boundsID++,this._matrix=null,this._holeMode=!1,this.currentPath=null,this}isFastRect(){const t=this._geometry.graphicsData;return t.length===1&&t[0].shape.type===vt.RECT&&!t[0].matrix&&!t[0].holes.length&&!(t[0].lineStyle.visible&&t[0].lineStyle.width)}_renderCanvas(t){Ya.prototype._renderCanvas.call(this,t)}_render(t){this.finishPoly();const r=this._geometry,n=t.context.supports.uint32Indices;r.checkInstancing(t.geometry.hasInstance,n),r.updateBatches(this.shaderSettings),r.batchable?(this.batchDirty!==r.batchDirty&&this._populateBatches(),this._renderBatched(t)):(t.batch.flush(),this._renderDirect(t))}_populateBatches(){const t=this._geometry,r=this.blendMode,n=t.batches.length;this.batchTint=-1,this._transformID=-1,this.batchDirty=t.batchDirty,this.batches.length=n,this.vertexData=new Float32Array(t.points);for(let i=0;i<n;i++){const o=t.batches[i],s=o.style.color,l={vertexData:new Float32Array(this.vertexData.buffer,o.attribStart*4*2,o.attribSize*2),blendMode:r,_batchRGB:sl(s),_tintRGB:s,_texture:o.style.texture,alpha:o.style.alpha,worldAlpha:1};this.batches[i]=l}}_renderBatched(t){if(!!this.batches.length){t.batch.setObjectRenderer(t.plugins[this.pluginName]),this.calculateVertices(),this.calculateTints();for(let r=0,n=this.batches.length;r<n;r++){const i=this.batches[r];i.worldAlpha=this.worldAlpha*i.alpha,t.plugins[this.pluginName].render(i)}}}_renderDirect(t){const r=this._resolveDirectShader(t);let n=r;const i=this._geometry,o=this.tint,s=this.worldAlpha,a=n.uniforms,l=i.drawCalls;a.translationMatrix=this.transform.worldTransform,a.tint[0]=(o>>16&255)/255*s,a.tint[1]=(o>>8&255)/255*s,a.tint[2]=(o&255)/255*s,a.tint[3]=s,a.resolution=t.renderTexture.current?t.renderTexture.current.resolution:t.resolution;const u=t.projection.transform;if(u){const c=Math.sqrt(u.a*u.a+u.b*u.b);a.resolution*=c}a.expand=(t.options.antialias?2:1)/a.resolution,t.shader.bind(n),t.geometry.bind(i,n),t.state.set(this.state),n=null;for(let c=0,f=l.length;c<f;c++){const p=i.drawCalls[c],v=n!==p.shader;v&&(n=p.shader,n&&(n.uniforms.translationMatrix=this.transform.worldTransform,n.uniforms.tint&&(n.uniforms.tint[0]=a.tint[0],n.uniforms.tint[1]=a.tint[1],n.uniforms.tint[2]=a.tint[2],n.uniforms.tint[3]=a.tint[3])));const{texArray:g,styleArray:b,size:_,start:w}=p,x=g.count,T=n||r,I=T.uniforms.styleTextureId,R=T.uniforms.styleMatrix,E=T.uniforms.styleLine;for(let P=0;P<b.count;P++){I[P]=b.textureIds[P],E[P*2]=b.lines[P*2],E[P*2+1]=b.lines[P*2+1];const N=b.matrices[P];R[P*6]=N.a,R[P*6+1]=N.c,R[P*6+2]=N.tx,R[P*6+3]=N.b,R[P*6+4]=N.d,R[P*6+5]=N.ty}const O=T.uniforms.samplerSize;for(let P=0;P<x;P++)O[P*2]=g.elements[P].width,O[P*2+1]=g.elements[P].height;t.shader.bind(T),v&&t.geometry.bind(i);for(let P=0;P<x;P++)t.texture.bind(g.elements[P],P);t.geometry.draw(Ci.TRIANGLES,_,w)}}_resolveDirectShader(t){let r=this.shader;const n=this.pluginName;return r||(O_[n]||(O_[n]=new E7(this.shaderSettings)),r=O_[n]),r}_calculateBounds(){this.finishPoly();const t=this._geometry;if(!t.graphicsData.length)return;const{minX:r,minY:n,maxX:i,maxY:o}=t.bounds;this._bounds.addFrame(this.transform,r,n,i,o)}containsPoint(t){return this.worldTransform.applyInverse(t,ar._TEMP_POINT),this._geometry.containsPoint(ar._TEMP_POINT)}calculateTints(){if(this.batchTint!==this.tint){this.batchTint=this.tint;const t=sl(this.tint,pie);for(let r=0;r<this.batches.length;r++){const n=this.batches[r],i=n._batchRGB,o=t[0]*i[0]*255,s=t[1]*i[1]*255,a=t[2]*i[2]*255,l=(o<<16)+(s<<8)+(a|0);n._tintRGB=(l>>16)+(l&65280)+((l&255)<<16)}}}calculateVertices(){const t=this.transform._worldID;if(this._transformID===t)return;this._transformID=t;const r=this.transform.worldTransform,n=r.a,i=r.b,o=r.c,s=r.d,a=r.tx,l=r.ty,u=this._geometry.points,c=this.vertexData;let f=0;for(let p=0;p<u.length;p+=2){const v=u[p],g=u[p+1];c[f++]=n*v+o*g+a,c[f++]=s*g+i*v+l}}closePath(){const t=this.currentPath;return t&&(t.closeStroke=!0),this}setMatrix(t){return this._matrix=t,this}beginHole(){return this.finishPoly(),this._holeMode=!0,this}endHole(){return this.finishPoly(),this._holeMode=!1,this}destroy(t){this._geometry.refCount--,this._geometry.refCount===0&&this._geometry.dispose(),this._matrix=null,this.currentPath=null,this._lineStyle.destroy(),this._lineStyle=null,this._fillStyle.destroy(),this._fillStyle=null,this._geometry=null,this.shader=null,this.vertexData=null,this.batches.length=0,this.batches=null,super.destroy(t)}}ar.__initStatic();Ia.LINE_SCALE_MODE=ai.NORMAL;const{noteData:mc,horizontalLineBreak:mie,standards:vie,layersCombination:gie,breakpoints:yie}=dM;class _ie{constructor({width:t,height:r,margin:n=4,timelineHeight:i=30,standardsColors:o,app:s,breakpointsApp:a,composerAccent:l}){this.destroy=()=>{this.cache.columns.forEach(u=>u.destroy(!0)),this.cache.standard.forEach(u=>u.destroy(!0)),this.cache.columnsLarger.forEach(u=>u.destroy(!0)),this.cache.standardLarger.forEach(u=>u.destroy(!0)),this.cache.breakpoints.forEach(u=>u.destroy(!0)),Object.entries(this.cache.notes).forEach(([u,c])=>{c.destroy(!0)}),this.app=null,this.breakpointsApp=null},this.generate=()=>{tl.forEach(u=>{const c=this.drawColumn(u,1);c&&this.cache.columns.push(c)}),this.standardsColors.forEach(u=>{const c=this.drawColumn(u,1);c&&this.cache.standard.push(c)}),this.standardsColors.forEach(u=>{const c=this.drawColumn(u,3);c&&this.cache.standardLarger.push(c)}),gie.forEach(u=>{const c=this.noteWidth,f=this.noteHeight,p=this.noteWidth>20?3:2,v=new Xi(u),g=new ar;if(v.test(0)&&g.beginFill(new Lt(mc.background).rgbNumber()).lineStyle(1,new Lt(mc.background).rgbNumber()).drawRoundedRect(this.margin/2-.25,this.margin/2,Math.ceil(c-this.margin),Math.ceil(f-this.margin),p).endFill(),v.test(1)&&g.lineStyle(this.margin===4?3:2,new Lt(mc.border).rgbNumber()).drawRoundedRect(this.margin/2-.25,this.margin/2,Math.ceil(c-this.margin),Math.ceil(f-this.margin),p).endFill(),v.test(2)&&g.beginFill(new Lt(mc.center).rgbNumber()).lineStyle(1,new Lt(mc.center).rgbNumber()).drawCircle(c/2-.25,f/2,f/3-.5).endFill(),v.test(3)){const _=this.margin===4?3:2;g.lineStyle(_,new Lt(mc.border).darken(.15).rgbNumber()).moveTo(this.margin/2+.5,f/2).lineTo(c-this.margin+.5,f/2).endFill()}if(!this.app)return;const b=this.app.renderer.generateTexture(g,{resolution:2,scaleMode:Tt.LINEAR,region:new Fe(0,0,this.noteWidth,this.noteHeight)});this.cache.notes[u]=b,g.destroy(!0)}),tl.forEach(u=>{const c=this.drawColumn(u,2);c&&this.cache.columnsLarger.push(c)}),yie.forEach(u=>{const c=new ar,f=this.timelineHeight/6;if(u.type==="short"){if(c.beginFill(this.composerAccent.rgbNumber()),c.drawCircle(f,this.timelineHeight/2,f).endFill(),!this.breakpointsApp)return;const p=this.breakpointsApp.renderer.generateTexture(c,{scaleMode:Tt.LINEAR,resolution:2,region:new Fe(0,0,f*2,this.timelineHeight)});this.cache.breakpoints.push(p),c.destroy(!0)}else{if(c.beginFill(this.composerAccent.rgbNumber()).moveTo(0,this.height).lineTo(this.noteWidth/2,this.height).lineTo(0,this.height-this.noteHeight).endFill(),c.beginFill(this.composerAccent.rgbNumber()).moveTo(this.width,this.height).lineTo(this.noteWidth/2,this.height).lineTo(this.width,this.height-this.noteHeight).endFill(),c.beginFill(this.composerAccent.rgbNumber()).moveTo(0,0).lineTo(this.noteWidth/2,0).lineTo(0,this.noteHeight).endFill(),c.beginFill(this.composerAccent.rgbNumber()).moveTo(this.width,0).lineTo(this.noteWidth/2,0).lineTo(this.width,this.noteHeight).endFill(),!this.app)return;const p=this.app.renderer.generateTexture(c,{scaleMode:Tt.LINEAR,resolution:2});this.cache.breakpoints.push(p),c.destroy(!0)}})},this.drawColumn=(u,c)=>{const f=new ar;f.beginFill(u.color),f.drawRect(0,0,this.width,this.height),f.lineStyle(c,3355443).moveTo(this.width,0).lineTo(this.width,this.height),f.lineStyle(1,3355443);for(let v=1;v<3;v++){const g=this.noteHeight*mie*v;f.moveTo(0,g),f.lineTo(this.width,g)}if(!this.app)return;const p=this.app.renderer.generateTexture(f,{scaleMode:Tt.LINEAR,resolution:(window==null?void 0:window.devicePixelRatio)||1,region:new Fe(0,0,this.width,this.height)});return f.destroy(!0),p},this.cache={columns:[],notes:{},standard:[],columnsLarger:[],standardLarger:[],breakpoints:[]},this.width=t,this.height=r,this.timelineHeight=i,this.margin=n,this.noteWidth=this.width,this.noteHeight=this.height/V3,this.standardsColors=o||vie,this.app=s,this.breakpointsApp=a,this.composerAccent=l,this.generate()}}function bie({notes:e,index:t,sizes:r,onClick:n,cache:i,instruments:o,backgroundCache:s,isBreakpoint:a,isSelected:l,isToolsSelected:u,currentLayer:c}){const f=M.exports.useCallback(()=>{n(t)},[t,n]);return k(Je.exports.Container,{pointertap:f,interactive:!0,x:r.width*t,children:[k(Je.exports.Sprite,{texture:s,interactiveChildren:!1,children:[(l||u)&&m(Je.exports.Sprite,{texture:u&&!l?i.standard[3]:i.standard[2],alpha:u&&!l?.4:.8,zIndex:1}),a&&m(Je.exports.Sprite,{texture:i.breakpoints[1]})]}),e.map(p=>{const v=p.layer.toLayerStatus(c,o);return v===0?null:m(Je.exports.Sprite,{texture:i.notes[v],y:Fb[p.index]*r.height/V3},p.index)})]})}function wie(e,t,r){const n=r/2+2;return t-n<e&&e<t+n}function L_({onClick:e,children:t,tooltip:r,style:n,ariaLabel:i}){return k("button",{className:`timeline-button ${Wn(r)}`,onClick:e,style:n,"aria-label":i,children:[t,r&&m(Gn,{children:r})]})}class xie extends M.exports.Component{constructor(t){super(t),this.resetPointerDown=()=>{this.stageSelected=!1,this.sliderSelected=!1,this.stagePreviousPositon=0},this.recalculateCacheAndSizes=()=>{this.cacheRecalculateDebounce&&clearTimeout(this.cacheRecalculateDebounce),this.cacheRecalculateDebounce=setTimeout(()=>{var f,p;if(!((f=this.notesStageRef)!=null&&f.current)||!((p=this.breakpointsStageRef)!=null&&p.current))return;const o=document.body.getBoundingClientRect(),{numberOfColumnsPerCanvas:s}=this.state,{inPreview:a}=this.props.data;let l=ga(o.width*.85-45),u=ga(o.height*.45);a&&(l=ga(l*(o.width<900?.8:.55)),u=ga(u*(o.width<900?.8:.6)));let c=ga(l/s);this.setState({width:Math.floor(l),height:Math.floor(u),column:{width:c,height:u},cache:this.getCache(c,u,Tn.exports()?2:4,Tn.exports()?25:30)})},50)},this.handleKeyboard=({code:o})=>{o==="ArrowRight"?this.handleBreakpoints(1):o==="ArrowLeft"&&this.handleBreakpoints(-1)},this.handleWheel=o=>{this.props.functions.selectColumn(this.props.data.selected+Math.sign(o.deltaY),!0)},this.handleClick=(o,s)=>{const a=o.data.global.x,{width:l,numberOfColumnsPerCanvas:u}=this.state,{data:c}=this.props;if(s==="up"&&(this.sliderSelected=!1),s==="down"){this.sliderSelected=!0;const f=l/c.columns.length,p=f*(u+1),v=f*c.selected-u/2*f;this.onSlider=a>v&&a<v+p,this.sliderOffset=v+p/2-a,this.throttleScroll=Number.MAX_SAFE_INTEGER,this.handleSlide(o)}s==="downStage"&&(this.stagePreviousPositon=a,this.stageSelected=!0)},this.handleStageSlide=o=>{const s=o.data.global.x;if(this.stageSelected===!0){if(this.throttleScroll++<5)return;this.throttleScroll=0;const{data:a,functions:l}=this.props,u=ii(Math.ceil(Math.abs(this.stagePreviousPositon-s)/8),0,4),c=this.stagePreviousPositon<s?-1:1;this.stagePreviousPositon=s;const f=a.selected+c*u;if(a.selected===f)return;l.selectColumn(ii(f,0,a.columns.length-1),!0)}},this.handleBreakpoints=o=>{const{selected:s,columns:a,breakpoints:l}=this.props.data,u=o===1?l.filter(c=>c>s).sort((c,f)=>c-f):l.filter(c=>c<s).sort((c,f)=>f-c);u.length!==0&&a.length>=u[0]&&u[0]>=0&&this.props.functions.selectColumn(u[0])},this.handleSlide=o=>{const s=o.data.global.x;if(this.sliderSelected){if(this.throttleScroll++<4)return;const{width:a,column:l}=this.state,{data:u}=this.props;this.hasSlided=!0,this.throttleScroll=0;const c=l.width*u.columns.length,f=this.onSlider?s+this.sliderOffset:s,p=Math.floor(f/a*c/l.width);this.props.functions.selectColumn(p,!0)}},this.sizes=document.body.getBoundingClientRect();const r=Number(this.props.data.settings.columnsPerCanvas.value);let n=ga(this.sizes.width*.85-45),i=ga(this.sizes.height*.45);this.state={width:Math.floor(n),height:Math.floor(i),numberOfColumnsPerCanvas:r,column:{width:ga(n/r),height:i},timelineHeight:Tn.exports()?25:30,currentBreakpoint:-1,theme:{timeline:{hex:xe.layer("primary",.1).toString(),hexNumber:xe.layer("primary",.1).rgbNumber(),selected:xe.get("composer_accent").negate().rgbNumber(),border:xe.get("composer_accent").rgbNumber()},sideButtons:{hex:xe.get("primary").darken(.08).toString(),rgb:xe.get("primary").darken(.08).rgb().array().map(o=>Math.floor(o)).join(",")}},cache:null},this.notesStageRef=M.exports.createRef(),this.breakpointsStageRef=M.exports.createRef(),this.stageSelected=!1,this.sliderSelected=!1,this.hasSlided=!1,this.stagePreviousPositon=0,this.sliderOffset=0,this.throttleScroll=0,this.onSlider=!1,this.dispose=()=>{},this.cacheRecalculateDebounce=0}componentDidMount(){var t,r,n;window.addEventListener("pointerup",this.resetPointerDown),window.addEventListener("resize",this.recalculateCacheAndSizes),Xe.listen(this.handleKeyboard),(n=(r=(t=this.notesStageRef)==null?void 0:t.current)==null?void 0:r._canvas)==null||n.addEventListener("wheel",this.handleWheel),this.recalculateCacheAndSizes(),this.dispose=My(()=>{this.recalculateCacheAndSizes(),this.setState({theme:{timeline:{hex:xe.layer("primary",.1).toString(),hexNumber:xe.layer("primary",.1).rgbNumber(),selected:xe.get("composer_accent").negate().rgbNumber(),border:xe.get("composer_accent").rgbNumber()},sideButtons:{hex:xe.get("primary").darken(.08).toString(),rgb:xe.get("primary").darken(.08).rgb().array().map(i=>Math.floor(i)).join(",")}}})})}componentWillUnmount(){var t,r,n,i;window.removeEventListener("pointerup",this.resetPointerDown),window.removeEventListener("resize",this.recalculateCacheAndSizes),this.cacheRecalculateDebounce&&clearTimeout(this.cacheRecalculateDebounce),Xe.unlisten(this.handleKeyboard),(n=(r=(t=this.notesStageRef)==null?void 0:t.current)==null?void 0:r._canvas)==null||n.removeEventListener("wheel",this.handleWheel),this.dispose(),(i=this.state.cache)==null||i.destroy(),this.notesStageRef=null,this.breakpointsStageRef=null}getCache(t,r,n,i){var a,l,u,c;const o={l:xe.get("primary"),d:xe.get("primary")};if(o.l=o.l.luminosity()<.05?o.l.lighten(.4):o.l.lighten(.1),o.d=o.d.luminosity()<.05?o.d.lighten(.15):o.d.darken(.03),!((a=this.notesStageRef)!=null&&a.current)||!((l=this.breakpointsStageRef)!=null&&l.current))return null;const s=new _ie({width:t,height:r,margin:n,timelineHeight:i,app:this.notesStageRef.current.app,breakpointsApp:this.breakpointsStageRef.current.app,composerAccent:xe.get("composer_accent").rotate(20).darken(.5),standardsColors:[{color:o.l.rgbNumber()},{color:o.d.rgbNumber()},{color:xe.get("composer_accent").rgbNumber()},{color:xe.get("composer_accent").negate().rgbNumber()}]});return(c=(u=this.state.cache)==null?void 0:u.destroy)==null||c.call(u),s}render(){var x;const{width:t,timelineHeight:r,height:n,theme:i,numberOfColumnsPerCanvas:o}=this.state,{data:s,functions:a}=this.props,l=(x=this.state.cache)==null?void 0:x.cache,u=this.state.column,c=(s.selected-o/2+1)*-u.width,f=Number(s.settings.beatMarks.value),p=f===0?12:4*f,v=t/s.columns.length,g=Math.floor(v*(t/u.width+1)),b=v*s.selected-v*(o/2),_=s.breakpoints.includes(s.selected),w=i.sideButtons.rgb;return k("div",{className:"canvas-wrapper",style:{width:t},children:[k("div",{className:"canvas-relative",children:[m("button",{onPointerDown:()=>a.selectColumn(s.selected-1),className:`canvas-buttons ${s.isPlaying?"":"canvas-buttons-visible"}`,style:{left:"0",paddingRight:"0.5rem",background:`linear-gradient(90deg, rgba(${w},0.80) 30%, rgba(${w},0.30) 80%, rgba(${w},0) 100%)`},children:m(GF,{})}),m("button",{onPointerDown:()=>a.selectColumn(s.selected+1),className:`canvas-buttons ${s.isPlaying?"":"canvas-buttons-visible"}`,style:{right:"0",paddingLeft:"0.5rem",background:`linear-gradient(270deg, rgba(${w},0.80) 30%, rgba(${w},0.30) 80%, rgba(${w},0) 100%)`},children:m(jF,{})}),m(Je.exports.Stage,{width:t,height:n,raf:!1,renderOnComponentChange:!0,options:{backgroundAlpha:0,autoDensity:!0,resolution:(window==null?void 0:window.devicePixelRatio)||1.4},ref:this.notesStageRef,children:l&&!s.isRecordingAudio&&m(Je.exports.Container,{x:c,interactive:!0,pointerdown:T=>this.handleClick(T,"downStage"),pointermove:T=>this.handleStageSlide(T),children:s.columns.map((T,I)=>{if(!wie(I,s.selected,o))return null;const R=(I+1)%4===0?l.columnsLarger:l.columns,E=(I+1)%4===0?l.standardLarger:l.standard,O=T.tempoChanger===0?E[Number(I%(p*2)>=p)]:R[T.tempoChanger];return m(bie,{cache:l,notes:T.notes,index:I,sizes:u,instruments:s.song.instruments,currentLayer:s.currentLayer,backgroundCache:O,isToolsSelected:s.selectedColumns.includes(I),onClick:a.selectColumn,isSelected:I===s.selected,isBreakpoint:s.breakpoints.includes(I)},I)})})})]}),k("div",{className:"timeline-wrapper",style:{height:this.state.timelineHeight},children:[m(L_,{onClick:()=>this.handleBreakpoints(-1),tooltip:"Previous Breakpoint",style:{backgroundColor:i.timeline.hex},ariaLabel:"Previous Breakpoint",children:m(St,{children:m(hA,{size:16})})}),m(L_,{onClick:()=>this.handleBreakpoints(1),tooltip:"Next breakpoint",style:{marginLeft:0,backgroundColor:i.timeline.hex},ariaLabel:"Next Breakpoint",children:m(St,{children:m(fA,{size:16})})}),m("div",{className:"timeline-scroll",style:{backgroundColor:i.timeline.hex},children:k(Je.exports.Stage,{width:t,height:r,options:{backgroundAlpha:0,autoDensity:!0,resolution:(window==null?void 0:window.devicePixelRatio)||1},raf:!1,ref:this.breakpointsStageRef,renderOnComponentChange:!0,children:[l&&k(Je.exports.Container,{width:t,height:r,interactive:!0,pointerdown:T=>this.handleClick(T,"down"),pointerup:T=>this.handleClick(T,"up"),pointermove:this.handleSlide,children:[m(Je.exports.Graphics,{draw:T=>{T.clear(),T.beginFill(i.timeline.hexNumber),T.drawRect(0,0,t,r)}}),s.selectedColumns.length?m(Je.exports.Graphics,{draw:T=>{const I=s.selectedColumns[0]||0,R=s.selectedColumns[s.selectedColumns.length-1],E=I*v,P=R*v-E;T.clear(),T.beginFill(i.timeline.selected,.6),T.drawRect(E,0,P,r)}}):null,s.breakpoints.map(T=>m(Je.exports.Sprite,{texture:l.breakpoints[0],anchor:[.5,0],x:t/(s.columns.length-1)*T},T))]}),m(Je.exports.Graphics,{draw:T=>{T.clear(),T.lineStyle(3,i.timeline.border,.8),T.drawRoundedRect(0,0,g,r-3,6)},x:b,y:1.5})]})}),m(L_,{onClick:a.toggleBreakpoint,style:{backgroundColor:i.timeline.hex},tooltip:_?"Remove breakpoint":"Add breakpoint",ariaLabel:_?"Remove breakpoint":"Add breakpoint",children:m(St,{children:_?m(ZF,{size:16},"minus"):m(QF,{size:16},"plus")})})]})]})}}const Tie=["vsrg"];function Sie({data:e,functions:t}){const[r,n]=M.exports.useState(!1),[i,o]=M.exports.useState(!1),[s]=Ou(),[a]=Up(),[l,u]=M.exports.useState("Settings"),{loadSong:c,changePage:f,renameSong:p,handleSettingChange:v,changeVolume:g,createNewSong:b,changeMidiVisibility:_,updateThisSong:w}=t,[x]=fn(),T=ra(B=>{lu?o(!1):n(!1)},{active:r&&i,ignoreFocusable:!0});M.exports.useEffect(()=>(Xe.register("Escape",()=>{o(!1)},{id:"composer_menu"}),()=>Xe.unregisterById("composer_menu")),[]);const I=M.exports.useCallback(B=>{typeof B!="boolean"&&(B=void 0),o(ae=>B!==void 0?B:!ae)},[]),R=M.exports.useCallback(async(B,ae)=>{await Mr("Are you sure you want to delete the song: "+B)&&(await kt.removeSong(ae),Sn.userSongs("delete",{name:B,page:"composer"}))},[]),E=M.exports.useCallback(async()=>{const B=await xn("Write the folder name");!B||Yi.createFolder(B)},[]),O=M.exports.useCallback(B=>{if(B===l&&r)return n(!1);n(!0),B&&(u(B),Sn.UIEvent("menu",{tab:B}))},[r,l]),P=M.exports.useCallback(async B=>{try{if(B instanceof Cp.Midi)return await Mr("If you use MIDI, the song will loose some information, if you want to share the song with others, use the other format (button above). Do you still want to download?")?xr.downloadMidi(B):void 0;B.data.appName=je;const ae=B.name,Y=Pt.parseSong(B),K=[je==="Sky"&&(Y instanceof Yr||Y instanceof En)?Y.toOldFormat():Y.serialize()];xr.downloadSong(K,`${ae}.${je.toLowerCase()}sheet`),we.success("Song downloaded"),Sn.userSongs("download",{name:Y.name,page:"composer"})}catch(ae){console.log(ae),we.error("Error downloading song")}},[]),N=r&&i?"side-menu menu-open":"side-menu",A={loadSong:c,removeSong:R,toggleMenu:I,downloadSong:P,renameSong:p},j=e.hasChanges?"margin-top-auto not-saved":"margin-top-auto";return k(De,{children:[m("div",{className:"hamburger",onClick:()=>o(!i),children:m(St,{children:m(ry,{})})}),k("div",{className:"menu-wrapper",ref:T,children:[k("div",{className:i?"menu menu-visible":"menu",children:[m(Ct,{onClick:()=>I(),className:"close-menu",ariaLabel:"Close menu",children:m(Zi,{className:"icon"})}),m(Ct,{onClick:w,className:j,ariaLabel:"Save",children:m(St,{children:m(cA,{className:"icon"})})}),m(Ct,{onClick:()=>O("Songs"),isActive:r&&l==="Songs",ariaLabel:"Song menu",children:m(St,{children:m(vp,{className:"icon"})})}),m(Ct,{onClick:()=>O("Settings"),isActive:r&&l==="Settings",ariaLabel:"Settings menu",children:m(St,{children:m(Tu,{className:"icon"})})}),m(Ct,{onClick:()=>f("Home"),ariaLabel:"Open home menu",children:m(St,{children:m(Su,{className:"icon"})})})]}),k("div",{className:N,children:[k(ni,{current:l,id:"Songs",children:[k("div",{className:"songs-buttons-wrapper",children:[m(ku,{children:k("ul",{children:[m("li",{children:"Click the song name to load it"}),m("li",{children:"You can use different instruments for each layer"}),m("li",{children:"Tempo changers help you make faster parts of a song without having very high bpm"}),m("li",{children:"You can quickly create a song by importing a MIDI file and editing it"}),m("li",{children:"You can add breakpoints to the timeline (the bar below the composer) to quickly jump between parts of a song"})]})}),m(Be,{onClick:()=>{_(!0),I()},style:{marginLeft:"auto"},children:"Create from MIDI"}),m(Be,{onClick:b,children:"Create new song"})]}),m(du,{songs:s,exclude:Tie,SongComponent:Eie,style:{marginTop:"0.6rem"},componentProps:{theme:x,folders:a,functions:A}}),m("div",{className:"row",style:{justifyContent:"flex-end"},children:m(Be,{onClick:E,children:"Create folder"})}),m("div",{className:"songs-buttons-wrapper",style:{marginTop:"auto"},children:m(Be,{style:{marginTop:"0.5rem"},className:"record-btn",onClick:()=>t.startRecordingAudio(!e.isRecordingAudio),toggled:e.isRecordingAudio,children:e.isRecordingAudio?"Stop recording audio":"Start recording audio"})})]}),k(ni,{current:l,id:"Settings",children:[m(Fp,{settings:e.settings,onUpdate:v,changeVolume:g}),k("div",{className:"settings-row-wrap",children:[Lb&&m(Be,{onClick:()=>f("MidiSetup"),style:{width:"fit-content"},children:"Connect MIDI keyboard"}),m(Be,{onClick:()=>f("Theme"),style:{width:"fit-content"},children:"Change app theme"})]}),m(cw,{})]})]})]})]})}function Eie({data:e,functions:t,theme:r,folders:n}){const{removeSong:i,toggleMenu:o,renameSong:s,loadSong:a,downloadSong:l}=t,u={backgroundColor:r.layer("primary",.15).hex()},[c,f]=M.exports.useState(!1),[p,v]=M.exports.useState(e.name);return M.exports.useEffect(()=>{v(e.name)},[e.name]),e.type==="vsrg"?m("div",{className:"row",children:"Invalid song"}):k("div",{className:"song-row",children:[k("div",{className:`song-name ${Wn(!0)}`,onClick:()=>{c||(a(e),o(!1))},children:[c?m("input",{className:`song-name-input ${c?"song-rename":""}`,disabled:!c,onChange:g=>v(g.target.value),style:{width:"100%",color:"var(--primary-text)"},value:p}):m("div",{style:{marginLeft:"0.3rem"},children:p}),m(Gn,{children:c?"Song name":"Open in composer"})]}),m("div",{className:"song-buttons-wrapper",children:k(Lp,{Icon:xh,ignoreClickOutside:c,style:u,tooltip:"More options",onClose:()=>f(!1),children:[k(Be,{className:"row row-centered",style:{padding:"0.4rem"},onClick:()=>{c&&(s(p,e.id),f(!1)),f(!c)},children:[m(gp,{style:{marginRight:"0.4rem"}}),m(Fr,{text:c?"Save":"Rename"})]}),k(hr,{style:{padding:"0 0.4rem"},children:[m(ny,{style:{marginRight:"0.4rem"}}),k("select",{className:"dropdown-select",value:e.folderId||"_None",onChange:g=>{const b=g.target.value;kt.addSongToFolder(e,b!=="_None"?b:null)},children:[m("option",{value:"_None",children:"None"}),n.map(g=>m("option",{value:g.id,children:g.name},g.id))]})]}),k(hr,{style:{width:"100%"},onClick:()=>{(e==null?void 0:e.type)==="recorded"&&we.warn("Converting recorded song to composed, audio might not be accurate"),a(e),o(!1)},children:[m(oA,{style:{marginRight:"0.4rem"},size:14}),m(Fr,{text:"Edit song"})]}),k(hr,{onClick:()=>l(e),children:[m(es,{style:{marginRight:"0.4rem"}}),m(Fr,{text:"Download"})]}),(e.type==="recorded"||e.type==="composed")&&k(hr,{onClick:()=>{const g=Pt.parseSong(e);l(g.toMidi())},children:[m(es,{style:{marginRight:"0.4rem"},size:14}),m(Fr,{text:"Download MIDI"})]}),k(hr,{onClick:async()=>{const g=Pt.parseSong(e);await kt.addSong(g),we.log(`Cloned song: ${e.name}`),o(!1)},children:[m(HF,{style:{marginRight:"0.4rem"}}),m(Fr,{text:"Clone song"})]}),k(hr,{onClick:()=>i(e.name,e.id),children:[m(Ji,{color:"#ed4557",style:{marginRight:"0.4rem"}}),m(Fr,{text:"Delete"})]})]})})]})}const Cie=M.exports.memo(Sie,(e,t)=>e.data.settings===t.data.settings&&e.data.hasChanges===t.data.hasChanges&&e.data.isRecordingAudio===t.data.isRecordingAudio);function Mv({children:e,tooltip:t,onClick:r,style:n,ariaLabel:i}){return k("button",{className:`tool ${Wn(t)}`,onClick:r,style:n,"aria-label":i,children:[e,t&&m(Gn,{children:t})]})}function Iie(e){return Me({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M17 2H7C4.243 2 2 4.243 2 7v10c0 2.757 2.243 5 5 5h10c2.757 0 5-2.243 5-5V7c0-2.757-2.243-5-5-5zm3 15c0 1.654-1.346 3-3 3H7c-1.654 0-3-1.346-3-3V7c0-1.654 1.346-3 3-3h10c1.654 0 3 1.346 3 3v10z"}}]})(e)}const Sx=[],Ex=[];for(const e of Pr)e.startsWith("SFX")?Ex.push(e):Sx.push(e);function C7({selected:e,onChange:t,style:r}){return m("select",{className:"select",style:{width:"100%",padding:"0.3rem",...r},onChange:n=>t(n.target.value),value:e,children:Ex.length===0?m(De,{children:Sx.map(n=>m("option",{value:n,children:n.replace("-"," ")},n))}):k(De,{children:[m("optgroup",{label:"Instruments",children:Sx.map(n=>m("option",{value:n,children:n.replace("-"," ")},n))}),m("optgroup",{label:"SFX",children:Ex.map(n=>m("option",{value:n,children:n.replace("-"," ").replace("SFX_","")},n))})]})})}const Nie=["circle","border","line"];function Pie({instrument:e,onChange:t,onDelete:r,onClose:n,onChangePosition:i,currentLayer:o,instruments:s}){const a=ra(n,{active:!0,ignoreFocusable:!0});return e?k("div",{className:"floating-instrument-settings box-shadow",ref:a,children:[k("div",{className:"row space-between",children:["Layer name",m("input",{type:"text",maxLength:50,className:"input",style:{width:"7.4rem"},value:e.alias,onChange:l=>t(e.set({alias:l.target.value})),placeholder:e.name})]}),k("div",{className:"row space-between",style:{marginTop:"0.4rem"},children:["Instrument",m(C7,{style:{width:"8rem"},selected:e.name,onChange:l=>t(e.set({name:l}))})]}),k("div",{className:"row space-between",style:{marginTop:"0.4rem"},children:["Pitch",m(N4,{style:{padding:"0.3rem",width:"8rem"},selected:e.pitch,onChange:l=>t(e.set({pitch:l})),children:m("option",{value:"",children:"Use song pitch"})})]}),k("div",{className:"row space-between",style:{marginTop:"0.4rem"},children:["Note icon",m("select",{className:"select",style:{padding:"0.3rem",width:"8rem"},value:e.icon,onChange:l=>t(e.set({icon:l.target.value})),children:Nie.map(l=>m("option",{value:l,children:Sy(l)},l))})]}),k("div",{className:"row",style:{marginTop:"1rem",alignItems:"center"},children:["Volume",k("span",{style:{marginLeft:"0.4rem",width:"3rem",...e.volume>100&&{color:`hsl(0, ${-40+e.volume}%, 61%)`,marginLeft:"0.4rem"}},children:[e.volume,"%"]}),m(ku,{buttonStyle:{width:"1.2rem",height:"1.2rem"},width:10,children:"If you hear distortion, reduce the volume"})]}),k("div",{className:"row",children:[m("input",{type:"range",style:{flex:"1",opacity:e.muted?"0.6":"1"},min:0,max:125,value:e.volume,onChange:l=>t(e.set({volume:Number(l.target.value)}))}),m(Be,{className:"flex-centered",toggled:e.muted,style:{padding:0,minWidth:"unset",width:"1.6rem",height:"1.6rem",borderRadius:"2rem"},onClick:()=>{e.volume===0&&!e.muted||t(e.set({muted:!e.muted}))},children:e.muted||e.volume===0?m(oy,{}):m(mA,{})})]}),k("div",{className:"row space-between",style:{marginTop:"1rem"},children:[k(Be,{onClick:()=>i(-1),disabled:o===0,className:"flex-centered",style:{padding:"0.5rem",flex:"1",marginRight:"0.4rem"},children:[m(rA,{style:{marginRight:"0.2rem"}})," Move up"]}),k(Be,{onClick:()=>i(1),disabled:o===s.length-1,className:"flex-centered",style:{padding:"0.5rem",flex:"1"},children:[m(eA,{style:{marginRight:"0.2rem"}})," Move down"]})]}),k("div",{className:"row space-between",style:{marginTop:"0.4rem"},children:[k(Be,{className:"row-centered",style:{padding:"0.4rem",width:"fit-content"},onClick:r,children:[m(Ji,{color:"var(--red)",style:{marginRight:"0.3rem"}}),"Delete"]}),m(Be,{onClick:n,style:{padding:"0.4rem",width:"fit-content"},children:"Ok"})]})]}):m("div",{className:"floating-instrument-settings  box-shadow",children:"No instrument selected"})}function Aie({instruments:e,onInstrumentAdd:t,onInstrumentChange:r,onInstrumentDelete:n,selected:i,onLayerSelect:o,onChangePosition:s}){const[a]=fn(),[l,u]=M.exports.useState(!1),c=M.exports.useCallback(()=>{u(!1)},[]);return k(De,{children:[l&&m(Pie,{instrument:e[i],currentLayer:i,instruments:e,onChange:f=>r(f,i),onDelete:()=>{n(i),c()},onChangePosition:s,onClose:c}),k("div",{className:"column instruments-button-wrapper",children:[e.map((f,p)=>m(kie,{theme:a,instrument:f,isSelected:p===i,onEditClick:()=>u(!l),onClick:()=>o(p),onVisibleToggle:v=>r(f.set({visible:v}),p)},f.name+p)),m("div",{style:{minHeight:"1rem"}}),m(Be,{onClick:f=>{t(),setTimeout(()=>{var p;(p=f.target)==null||p.scrollIntoView()},50)},ariaLabel:"Add new instrument",className:"new-instrument-button flex-centered",children:m(au,{size:16,color:"var(--icon-color)"})})]})]})}const Rie=M.exports.memo(Aie,(e,t)=>e.instruments===t.instruments&&e.selected===t.selected);function kie({instrument:e,onClick:t,isSelected:r,theme:n,onEditClick:i,onVisibleToggle:o}){const s=M.exports.useRef(null);M.exports.useEffect(()=>{!r||!s.current||s.current.scrollIntoView({behavior:"auto",block:"nearest"})},[r,s]);let a=n.getText("primary");return a=a.isDark()?a.lighten(.2):a.darken(.15),k("div",{ref:s,className:`instrument-button flex-centered ${r?"instrument-button-selected":""}`,style:r?{backgroundColor:n.get("primary").mix(n.get("accent")).toString()}:{},children:[!r&&k("div",{className:"row",style:{position:"absolute",gap:"0.2rem",top:"0.2rem",left:"0.3rem"},children:[!e.visible&&m(Ob,{color:a.hex(),size:14}),e.muted&&m(oy,{color:a.hex(),size:14})]}),!r&&k("div",{style:{position:"absolute",top:"0.4rem",right:"0.4rem",height:"fit-content"},children:[e.icon==="circle"&&m($F,{size:8,style:{display:"block"},color:a.hex()}),e.icon==="border"&&m(Iie,{size:12,style:{display:"block",marginRight:"-2px",marginTop:"-2px",strokeWidth:"2px"},color:a.hex()}),e.icon==="line"&&m(iy,{size:8,style:{display:"block"},color:a.hex()})]}),m(Be,{onClick:t,style:{backgroundColor:"transparent",width:"100%"},className:"flex-grow flex-centered instrument-name-button",children:m("span",{className:"text-ellipsis",style:{width:"6rem"},children:e.alias||e.name})}),r&&k("div",{className:"instrument-settings",children:[m(Be,{onClick:()=>i(),ariaLabel:"Settings",className:"flex-centered",children:m(Tu,{size:15})}),m(Be,{onClick:()=>o(!e.visible),ariaLabel:e.visible?"Hide":"Show",className:"flex-centered",children:e.visible?m(sA,{size:16}):m(Ob,{size:16})})]})]})}class Oie extends M.exports.Component{constructor(t){super(t),this.init=async()=>{var i,o,s;const{settings:n}=this.state;await this.syncInstruments(),this.mounted&&await _t.init(),_t.setReverb(n.caveMode.value),Lr.addListener(this.handleMidi),this.registerKeyboardListeners();try{const a=(s=(o=(i=this.props)==null?void 0:i.history)==null?void 0:o.location)==null?void 0:s.state,l=a==null?void 0:a.songId;if(!l)return;const u=await Pt.getSongById(l);if(!u)return;this.loadSong(u)}catch(a){console.log("Error loading song"),console.error(a)}},this.registerKeyboardListeners=()=>{const n="composer";Xe.registerLetter("D",()=>{this.state.isPlaying||this.selectColumn(this.state.song.selected+1)},{id:n}),Xe.registerLetter("A",()=>{this.state.isPlaying||this.selectColumn(this.state.song.selected-1)},{id:n}),Xe.registerLetter("Q",()=>{this.state.isPlaying||this.removeColumns(1,this.state.song.selected)},{id:n}),Xe.registerLetter("E",()=>{this.state.isPlaying||this.addColumns(1,this.state.song.selected)},{id:n}),tl.forEach((i,o)=>{Xe.registerNumber(o+1,()=>this.handleTempoChanger(i),{id:n})}),Xe.register("ArrowUp",()=>{const i=this.state.layer-1;i>=0&&this.changeLayer(i)},{id:n}),Xe.register("ArrowDown",()=>{const i=this.state.layer+1;i<this.state.layers.length&&this.changeLayer(i)},{id:n}),Xe.register("Space",({event:i})=>{var o,s,a,l;i.repeat||(((o=i.target)==null?void 0:o.tagName)==="BUTTON"&&((s=i.target)==null||s.blur()),this.togglePlay(),this.state.settings.syncTabs.value&&((l=(a=this.broadcastChannel)==null?void 0:a.postMessage)==null||l.call(a,this.state.isPlaying?"play":"stop")))},{id:n}),Xe.listen(({event:i,letter:o})=>{if(i.repeat)return;const{isPlaying:s}=this.state;if(s||i.shiftKey){const l=this.currentInstrument.getNoteFromCode(o);l!==null&&this.handleClick(l)}},{id:n})},this.handleUnload=n=>{n.preventDefault(),n.returnValue=""},this.handleAutoSave=()=>{this.changes++,this.changes>5&&this.state.settings.autosave.value&&this.state.song.name!=="Untitled"&&this.updateSong(this.state.song)},this.handleMidi=([n,i,o])=>{if(!this.mounted)return;const{song:s,layer:a}=this.state;if(z3.down===n&&o!==0){Lr.settings.notes.filter(c=>c.midi===i).forEach(c=>{this.handleClick(this.currentInstrument.notes[c.index])});const u=Lr.settings.shortcuts.find(c=>c.midi===i);if(!u)return;switch(u.type){case"toggle_play":this.togglePlay();break;case"next_column":this.selectColumn(s.selected+1);break;case"previous_column":this.selectColumn(s.selected-1);break;case"add_column":this.addColumns(1,s.selected);break;case"remove_column":this.removeColumns(1,s.selected);break;case"change_layer":{let c=a+1;c>this.state.layers.length&&(c=1),this.changeLayer(c);break}}}},this.updateSettings=n=>{eo.updateComposerSettings(n!==void 0?n:this.state.settings)},this.handleSettingChange=({data:n,key:i})=>{const{song:o,settings:s}=this.state;s[i]={...s[i],value:n.value},n.songSetting&&(o[i]=n.value),i==="caveMode"&&_t.setReverb(n.value),this.setState({settings:{...s},song:o},this.updateSettings)},this.addInstrument=()=>{const{song:n}=this.state;if(n.instruments.length>=30)return we.error("You can't add more than 30 instruments!");n.addInstrument(Pr[0]),this.setState({song:n}),this.syncInstruments(n)},this.removeInstrument=async n=>{const{song:i,layers:o}=this.state;if(o.length<=1)return we.warn("You can't remove all layers!");await Mr(`Are you sure you want to remove ${o[n].name}? ALL NOTES OF THIS LAYER WILL BE DELETED`)&&(i.removeInstrument(n),this.syncInstruments(i),this.setState({song:i,layer:Math.max(0,n-1)}))},this.editInstrument=(n,i)=>{const{song:o}=this.state;o.instruments[i]=n.clone(),o.instruments=[...o.instruments],this.syncInstruments(o),this.setState({song:o})},this.syncInstruments=async n=>{const{layers:i}=this.state;n||(n=this.state.song),i.splice(n.instruments.length).forEach(l=>{_t.disconnect(l.endNode),l.dispose()});const s=n.instruments.map(async(l,u)=>{if(i[u]===void 0){const c=new Mn(l.name);return i[u]=c,await c.load()||we.error("There was an error loading the instrument"),this.mounted?(_t.connect(c.endNode),c.changeVolume(l.volume),c):c.dispose()}if(i[u].name===l.name)return i[u].changeVolume(l.volume),i[u];{const c=i[u];_t.disconnect(c.endNode),c.dispose();const f=new Mn(l.name);return i[u]=f,await f.load()||we.error("There was an error loading the instrument"),this.mounted?(_t.connect(f.endNode),f.changeVolume(l.volume),f):f.dispose()}}),a=await Promise.all(s);!this.mounted||this.setState({layers:a})},this.changeVolume=n=>{const i=this.state.settings,o=Number(n.key.split("layer")[1])-1;i[n.key]={...i[n.key],volume:n.value},this.state.layers[o].changeVolume(n.value),this.setState({settings:{...i}},this.updateSettings)},this.startRecordingAudio=async n=>{if(!this.mounted)return;if(!n)return this.setState({isRecordingAudio:!1}),this.togglePlay(!1);if(_t.startRecording(),this.setState({isRecordingAudio:!0}),await Ws(300),await this.togglePlay(!0),!this.mounted)return;this.setState({isRecordingAudio:!1});const i=await _t.stopRecording();if(!i)return;const o=await xn("Write the song name, press cancel to ignore");o&&I4.downloadBlob(i.data,o+".wav")},this.playSound=(n,i)=>{const o=this.state.layers[n],s=o==null?void 0:o.notes[i];if(s===void 0||this.state.song.instruments[n].muted)return;const a=this.state.song.instruments[n].pitch||this.state.settings.pitch.value;o.play(s.index,a)},this.changePitch=n=>{const{settings:i}=this.state;i.pitch={...i.pitch,value:n},this.setState({settings:{...i}},this.updateSettings)},this.handleClick=n=>{const{song:i,layer:o}=this.state,s=i.selectedColumn,a=s.getNoteIndex(n.index);if(a===null)s.addNote(n.index).setLayer(o,!0);else{const l=s.notes[a];l.toggleLayer(o),l.layer.isEmpty()&&s.removeAtIndex(a)}this.setState({song:i}),this.handleAutoSave(),this.playSound(o,n.index)},this.renameSong=async(n,i)=>{const{song:o}=this.state;await kt.renameSong(i,n),this.state.song.id===i&&(o.name=n,this.setState({song:o}))},this.addSong=async n=>{const i=await kt.addSong(n);return n.id=i,n},this.updateSong=async n=>{if(n.name==="Untitled"){const i=await xn("Write song name, press cancel to ignore");if(i===null||!this.mounted)return;n.name=i,this.changes=0,this.setState({}),await this.addSong(n);return}return new Promise(async i=>{const o=await Pt.getSongById(n.id);if(o)n.folderId=o.folderId,await kt.updateSong(n),console.log("song saved:",n.name),this.changes=0,this.setState({});else{if(n.name.includes("- Composed")){const s=await xn("Write the song name for the composed version, press cancel to ignore");return s===null||(n.name=s,this.addSong(n)),i()}console.log("song doesn't exist"),n.name="Untitled",this.updateSong(n)}i()})},this.updateThisSong=async()=>{this.updateSong(this.state.song)},this.askForSongUpdate=async()=>await Mr(`You have unsaved changes to the song: "${this.state.song.name}" do you want to save now?`,!1),this.createNewSong=async()=>{if(this.state.song.name!=="Untitled"&&this.changes>0){const s=await this.askForSongUpdate();if(s===null)return;s&&await this.updateSong(this.state.song)}const n=await xn("Write song name, press cancel to ignore");if(n===null)return;const i=new Yr(n,[Pr[0],Pr[0],Pr[0]]);if(this.changes=0,!this.mounted)return;const o=await this.addSong(i);!this.mounted||(this.setState({song:o,layer:0}),Sn.songEvent({type:"create"}))},this.loadSong=async n=>{const i=this.state;let o=null;if(n instanceof Yr?o=n:(n.type==="recorded"&&(o=En.deserialize(n).toComposedSong(4),o.name+=" - Composed"),n.type==="composed"&&(o=Yr.deserialize(n))),!o)return;if(this.changes!==0){let a=i.settings.autosave.value&&i.song.name!=="Untitled";if(!a&&i.song.columns.length>0){const l=await Mr(`You have unsaved changes to the song: "${i.song.name}" do you want to save? UNSAVED CHANGES WILL BE LOST`,!1);if(l===null)return;a=l}if(a&&(await this.updateSong(i.song),i.song.name===o.name))return}const s=this.state.settings;s.bpm={...s.bpm,value:n.bpm},s.pitch={...s.pitch,value:n.pitch},this.mounted&&(this.changes=0,console.log("song loaded"),this.setState({layer:0,song:o,settings:{...s},selectedColumns:[]},()=>this.syncInstruments()))},this.addColumns=(n=1,i="end")=>new Promise(o=>{const{song:s}=this.state;s.addColumns(n,i),n===1&&this.selectColumn(s.selected+1),this.handleAutoSave(),this.setState({song:s},o)}),this.removeColumns=(n,i)=>{const{song:o,settings:s}=this.state;o.columns.length<s.beatMarks.value*4||(o.removeColumns(n,i),o.columns.length<=o.selected&&this.selectColumn(o.selected-1),this.handleAutoSave(),this.setState({song:o}))},this.togglePlay=async n=>new Promise(i=>{const o=typeof n=="boolean"?n:!this.state.isPlaying;this.setState({isPlaying:o},async()=>{this.state.isPlaying&&this.selectColumn(this.state.song.selected);let s=0,a=Date.now();for(;this.state.isPlaying;){const{song:l,settings:u}=this.state,c=l.selectedColumn.getTempoChanger().changer,f=Math.floor(6e4/u.bpm.value*c)+s;if(a=Date.now(),await Ws(f),!this.state.isPlaying||!this.mounted)break;this.handleTick(),s=a+f-Date.now()}i()})}),this.handleTick=()=>{const n=this.state.song.selected+1;if(this.state.isPlaying&&n>this.state.song.columns.length-1)return this.togglePlay(!1);this.selectColumn(n)},this.toggleBreakpoint=n=>{const{song:i}=this.state;i.toggleBreakpoint(n),this.validateBreakpoints(),this.setState({song:i})},this.handleTempoChanger=n=>{const{song:i}=this.state;i.selectedColumn.setTempoChanger(n),this.handleAutoSave(),this.setState({song:i})},this.changePage=async n=>{const{song:i,settings:o}=this.state;if(n==="Home")return an.open();this.changes!==0&&(o.autosave.value?await this.updateSong(i):await Mr(`You have unsaved changes to the song: "${i.name}" do you want to save? UNSAVED CHANGES WILL BE LOST`,!1)&&await this.updateSong(i)),this.unblock(),this.props.history.push(n)},this.selectColumn=(n,i)=>{const{song:o,isToolsVisible:s,layers:a,copiedColumns:l}=this.state;let u=this.state.selectedColumns;if(!(n<0||n>o.columns.length-1)){if(o.selected=n,s&&l.length===0){u.push(n);const c=Math.min(...u),f=Math.max(...u);u=new Array(f-c+1).fill(0).map((p,v)=>c+v)}this.setState({song:o,selectedColumns:u}),!i&&o.selectedColumn.notes.forEach(c=>{a.forEach((f,p)=>{c.isLayerToggled(p)&&this.playSound(p,c.index)})})}},this.changeLayer=n=>{this.setState({layer:n})},this.toggleTools=()=>{this.setState({isToolsVisible:!this.state.isToolsVisible,selectedColumns:this.state.isToolsVisible?[]:[this.state.song.selected],copiedColumns:[],undoHistory:[]})},this.resetSelection=()=>{this.setState({copiedColumns:[],selectedColumns:[this.state.song.selected]})},this.addToHistory=()=>{const{song:n,undoHistory:i,isToolsVisible:o}=this.state;!o||this.setState({undoHistory:[...i,n.clone().columns]})},this.undo=()=>{const{undoHistory:n,song:i}=this.state,o=n.pop();!o||(i.columns=o,i.selected=i.columns.length>i.selected?i.selected:i.columns.length-1,this.setState({undoHistory:[...n],song:i}))},this.copyColumns=n=>{const{selectedColumns:i,song:o}=this.state,s=o.copyColumns(i,n);this.changes++,this.setState({selectedColumns:[],copiedColumns:s})},this.pasteColumns=async(n,i)=>{const{song:o,copiedColumns:s}=this.state;this.addToHistory(),i==="all"?o.pasteColumns(s,n):Number.isFinite(i)&&o.pasteLayer(s,n,i),this.syncInstruments(),this.changes++,this.setState({song:o})},this.eraseColumns=n=>{const{song:i,selectedColumns:o}=this.state;this.addToHistory(),i.eraseColumns(o,n),this.changes++,this.setState({song:i,selectedColumns:[i.selected]})},this.moveNotesBy=(n,i)=>{const{song:o,selectedColumns:s}=this.state;this.addToHistory(),o.moveNotesBy(s,n,i),this.changes++,this.setState({song:o})},this.switchLayerPosition=n=>{const{song:i,layer:o}=this.state,s=o+n;if(s<0||s>i.instruments.length-1)return;i.swapLayer(i.columns.length,0,o,s);const a=i.instruments[o];i.instruments[o]=i.instruments[s],i.instruments[s]=a,i.instruments=[...i.instruments],this.changes++,this.syncInstruments(),this.setState({song:i,layer:s})},this.deleteColumns=async()=>{const{song:n,selectedColumns:i}=this.state;this.addToHistory(),n.deleteColumns(i),this.changes++,this.setState({song:n,selectedColumns:[n.selected]},this.validateBreakpoints)},this.validateBreakpoints=()=>{const{song:n}=this.state;n.validateBreakpoints(),this.setState({song:n})},this.changeMidiVisibility=n=>{this.setState({isMidiVisible:n}),n&&Sn.songEvent({type:"create_MIDI"})};const r=eo.getComposerSettings();this.state={layers:[new Mn(Pr[1])],isPlaying:!1,song:new Yr("Untitled",[Pr[0],Pr[0],Pr[0]]),settings:r,layer:0,selectedColumns:[],undoHistory:[],copiedColumns:[],isToolsVisible:!1,isMidiVisible:!1,isRecordingAudio:!1,theme:xe},this.state.song.bpm=r.bpm.value,this.mounted=!1,this.changes=0,this.broadcastChannel=null,this.unblock=()=>{}}get currentInstrument(){return this.state.layers[this.state.layer]}componentDidMount(){this.mounted=!0,this.init(),this.broadcastChannel=window.BroadcastChannel?new BroadcastChannel(je+"_composer"):null,this.broadcastChannel&&this.broadcastChannel.addEventListener("message",t=>{!this.state.settings.syncTabs.value||!["play","stop"].includes(t==null?void 0:t.data)||this.togglePlay(t.data==="play")}),this.unblock=this.props.history.block(t=>{if(this.changes!==0)return this.changePage(t.pathname),!1}),window.location.hostname!=="localhost"&&window.addEventListener("beforeunload",this.handleUnload)}componentWillUnmount(){var n,i;const{state:t}=this,{layers:r}=t;this.mounted=!1,_t.clear(),r.forEach(o=>o.dispose()),(i=(n=this.broadcastChannel)==null?void 0:n.close)==null||i.call(n),t.isPlaying=!1,this.unblock(),Xe.unregisterById("composer"),Lr.removeListener(this.handleMidi),_t.isRecording&&_t.stopRecording(),window.location.hostname!=="localhost"&&window.removeEventListener("beforeunload",this.handleUnload)}render(){var v;const{isMidiVisible:t,song:r,isPlaying:n,copiedColumns:i,settings:o,isRecordingAudio:s,isToolsVisible:a,layer:l,selectedColumns:u,layers:c,undoHistory:f}=this.state,p=dG(r.columns,o.bpm.value,r.selected);return k(De,{children:[m(In,{text:`Composer - ${r.name}`}),t&&m(UY,{functions:this,data:{instruments:r.instruments,selectedColumn:r.selected}}),k("div",{className:"composer-grid",children:[k("div",{className:"column composer-left-control",children:[m(Be,{className:"flex-centered",style:{height:"3rem",borderRadius:"0.3rem",backgroundColor:"var(--primary-darken-10)"},onClick:g=>{var b,_;this.togglePlay(),o.syncTabs.value&&((_=(b=this.broadcastChannel)==null?void 0:b.postMessage)==null||_.call(b,n?"stop":"play"))},ariaLabel:n?"Pause":"Play",children:m(St,{children:n?m(lA,{size:18,color:"var(--icon-color)"},"pause"):m(uA,{size:18,color:"var(--icon-color)"},"play")})}),m(Rie,{instruments:r.instruments,selected:l,onLayerSelect:this.changeLayer,onInstrumentAdd:this.addInstrument,onInstrumentChange:this.editInstrument,onInstrumentDelete:this.removeInstrument,onChangePosition:this.switchLayerPosition})]}),m("div",{className:"top-panel-composer",style:{gridArea:"b"},children:k("div",{className:"row",style:{height:"fit-content",width:"100%"},children:[m(xie,{functions:this,data:{inPreview:this.props.inPreview,isRecordingAudio:s,currentLayer:l,isPlaying:n,song:r,settings:o,selectedColumns:u,columns:r.columns,selected:r.selected,breakpoints:r.breakpoints}},o.columnsPerCanvas.value),k("div",{className:"buttons-composer-wrapper-right",children:[m(Mv,{onClick:()=>this.addColumns(1,r.selected),tooltip:"Add column",ariaLabel:"Add column",children:m(St,{children:m(OY,{className:"tool-icon"})})}),m(Mv,{onClick:()=>this.removeColumns(1,r.selected),tooltip:"Remove column",ariaLabel:"Remove column",children:m(St,{children:m(LY,{className:"tool-icon"})})}),m(Mv,{onClick:()=>this.addColumns(Number(o.beatMarks.value)*4,"end"),tooltip:"Add new page",ariaLabel:"Add new page",children:m(St,{children:m(au,{size:16})})}),m(Mv,{onClick:this.toggleTools,tooltip:"Open tools",ariaLabel:"Open tools",children:m(St,{children:m(nM,{size:16})})})]})]})}),m(jY,{functions:this,data:{isPlaying:n,isRecordingAudio:s,currentLayer:l,instruments:r.instruments,keyboard:c[l],currentColumn:r.selectedColumn,pitch:((v=r.instruments[l])==null?void 0:v.pitch)||o.pitch.value,noteNameType:o.noteNameType.value}})]}),m(Cie,{data:{isRecordingAudio:s,settings:o,hasChanges:this.changes>0},functions:this}),m(DY,{data:{isToolsVisible:a,layer:l,hasCopiedColumns:i.length>0,selectedColumns:u,undoHistory:f},functions:this}),k("div",{className:"song-info",children:[m("div",{className:"text-ellipsis",children:r.name}),k("div",{children:[s5(p.current),"/",s5(p.total)]})]})]})}}const I7=bh(Oie);function N7({children:e=void 0,className:t=""}){const r=B3();return m("div",{className:"menu-wrapper "+t,children:k("div",{className:"menu menu-visible",style:{justifyContent:"flex-end"},children:[x4.hasNavigated&&m(Ct,{style:{marginBottom:"auto"},onClick:()=>{r.goBack()},ariaLabel:"Go back",children:m(tA,{className:"icon"})}),e,m(Ct,{ariaLabel:"Go to discord",children:m("a",{href:"https://discord.gg/Arsf65YYHq",target:"_blank",rel:"noreferrer",children:m(JP,{className:"icon"})})}),m(Ct,{onClick:an.open,ariaLabel:"Open home menu",children:m(Su,{className:"icon"})})]})})}function io({excludeMenu:e=!1,children:t,className:r="",style:n}){return k("div",{className:"default-page "+r,style:n,children:[!e&&m(N7,{}),m("div",{className:"default-content",children:t})]})}function Lie(){const[e]=Ou(),t=Wa(vg.logs);return k(io,{className:"error-page",children:[m(In,{text:"Error"}),k("div",{style:{textAlign:"center"},children:["There seems to be an error. ",m("br",{}),"Here you can download or delete your songs, if one caused an error, delete it. If you need help, join our",m("a",{href:"https://discord.gg/Arsf65YYHq",target:"_blank",rel:"noreferrer",style:{margin:"0 0.4rem",color:"var(--accent)"},children:"Discord"}),"and send the log file below."]}),k("div",{className:"error-buttons-wrapper",children:[m(Be,{onClick:()=>{localStorage.removeItem(je+"_Composer_Settings"),localStorage.removeItem(je+"_Main_Settings"),we.success("Settings have been reset")},children:"Reset settings"}),m(Be,{onClick:async()=>{await Mr("Are you sure you want to delete ALL SONGS?")&&await kt._DANGEROUS_CLEAR_ALL_SONGS()},children:"Delete all songs"})]}),m("div",{className:"error-songs-wrapper",children:m(du,{SongComponent:Uie,songs:e,componentProps:{deleteSong:async(s,a)=>{await Mr("Are you sure you want to delete the song: "+s)&&await kt.removeSong(a)},download:s=>{try{const a=s.name,l=Pt.parseSong(s),u=[je==="Sky"&&(l instanceof Yr||l instanceof En)?l.toOldFormat():l.serialize()];xr.downloadSong(u,`${a}.${je.toLowerCase()}sheet`),we.success("Song downloaded")}catch(a){console.error(a),we.error("Error downloading song")}}}})}),k("div",{className:"row space-between",style:{margin:"1rem 0"},children:[m("div",{style:{fontSize:"2rem"},children:"Error logs"}),m(Be,{onClick:()=>{const s=vg.logs.map(a=>a.message);xr.downloadObject(s,`${je}_logs`)},children:"Download logs"})]}),m("div",{className:"error-logs",children:t.map((s,a)=>m("div",{className:"error-log-row row",children:s.message},a))})]})}function Uie({data:e,deleteSong:t,download:r}){return k("div",{className:"song-row",children:[m("div",{className:"song-name",children:e.name}),k("div",{className:"song-buttons-wrapper",children:[m("button",{className:"song-button",onClick:()=>r(e),"aria-label":`Download song ${e.name}`,children:m(es,{})}),m("button",{className:"song-button",onClick:()=>t(e.name,e.id),"aria-label":`Delete song ${e.name}`,children:m(Ji,{color:"#ed4557"})})]})]})}function Fie({version:e,title:t,changes:r,date:n}){return k("div",{children:[k("div",{className:"changelog-title",children:[m("div",{className:"clt-1",children:e}),m("div",{className:"clt-2",children:n})]}),k("div",{className:"changelog-list",children:[m("div",{className:"cll-1",children:t}),m("ul",{children:r.map((i,o)=>m("li",{children:i.split("$l").map((s,a)=>a===0?m("div",{children:s},a):m("p",{className:"cll-new-line",children:s},a))},o))})]})]})}const Mie=[{version:"3.0",title:"VSRG mode, Zen keyboard, Calls and more!",date:"2022 - 22/07",changes:["Added VSRG mode to compose and play vsrg songs","Added Zen keyboard, where you can simply focus on playing by hand","Added Visual sheet to the player","Added app scaling","Added alphabetical folder ordering","Added backup page","(Genshin) added vintage lyre","(Sky) Added SFX of the calls and dance emote","Changed metronome sounds","Improved player performance","Multi type export, you can now export/import songs, folders, themes etc","Fixed bug that would remove a song from the folder when saved","Fixed bug that would not play audio","Fixed issues when opening/saving songs in the composer","Fixed bug in pasting notes in the composer","Exporting a song would not work in sky music and sky studio","Other bug fixes and features..."]},{version:"2.8",title:"More Composer layers and UI rework",date:"2022 - 7/07",changes:["Increased instrument limit in the composer to 30","Redesigned the tools in the composer","Added UNDO to the composer tools","Added paste/insert to certain layer","Added tool to move notes up/down","Added metronome in player","Added multiple instruments in player","Added more tooltips, also for mobile","Bug fixes and improvements"]},{version:"2.7",title:"Song rename, MIDI export, folders",date:"2022 - 15/06",changes:["Added option to rename songs","Song names are not unique anymore","Added folders and new song menu UI","Added MIDI export of a song (DO NOT USE INSTEAD OF NORMAL FORMAT)","Improved song playback in the player","Fixed some bugs"]},{version:"2.6",title:"Light guitar & Tooltips",date:"2022 - 30/05",changes:["Added tooltips","Added help buttons","Added Light guitar (Sky, notes can't be held)","Bug fixes for main page loading songs","Added drag and drop in the composer","Composer on pc now resizes with the page","Fixed some bugs"]},{version:"2.5",title:"Composer improvements",date:"2022 - 27/03",changes:["Improved the rendering of the composer to be sherper and easier to see on mobile","Improved performance in the composer","Added 4th layer in the composer","Added theming of more parts of the composer","App rewrite in TypeScript","Bug fixes"]},{version:"2.4",title:"Multi Slider and Themes",date:"2022 - 15/02",changes:["Added app themes, fully customise the look of the app","Added start and end slider for selecting which part of the song to play/practice","Bug fixes"]},{version:"2.3",title:"MIDI Keyboard and Performance",date:"2022 - 3/02",changes:["Added MIDI Keyboard support on all pages with custom layouts and shortcuts","Big performance improvements of main page","Added note names to sheet visualizer and empty cells","Added ABC format","Added Panflute (Sky)","UI improvements and bug fixes"]},{version:"2.2",title:"Sheet visualizer",date:"2022 - 17/01",changes:["Added sheet visualizer","Changed timeline behaviour when dragging the scroll bar","Improved performance by 2 times in some places","UI improvements and bug fixes"]},{version:"2.1.1",title:"Zither and icons",date:"2021 - 16/12",changes:["Changed note icon and animation (Genshin)","Added Help page","Changed zither audio (Genshin)","UI improvements"]},{version:"2.1",title:"Home menu and pages",date:"2021 - 11/12",changes:["Restructured code","Added opacity to some elements","Changed margins and padding of some elements","Added home page","Added Partners page","Added shortcuts for main page","Fixed loading bug in composer and main page","Added Donate page"]},{version:"2.0",title:"Approaching circles",date:"2021 - 28/11",changes:[`Added Approaching cirlces mode, a new way to learn a song, or a way to challange yourself.
            You can find it in the main page, next to the practice button`,"Rewrite of the main page to increase overall performance","Added changelog page","Added audio recording feature in main page and composer","Added tabs autoplay (composer) on pc as a setting","Added note animations when pressing the note","Added possibility to change background image from URL","Updated info page","In the composer you can now press shift + note name to add a note","In the composer you can press up/down keys to change layer",'While in the composer on PC, you can now add new notes by simply pressing the PC keyboard while in "playing" mode']},{version:"1.7",title:"Zither",date:"2021 - 20/10",changes:["(For genshin) Added Zither",'Added back "do re mi" format']},{version:"1.6",title:"Performance tweaks",date:"2021 - 17/10",changes:["Performance of composer improved by 2x","Added note names for genshin (made it a setting)","Fixed instrument volume bug","Fixed keyboard layout issues","Fixed other small bugs"]},{version:"1.5",title:"MIDI import",date:"2021 - 14/10",changes:[`Added to both Sky and Genshin music nightly the MIDI import feature $l
            - Music track selection (select or deselect which tracks to include) $l
            - Instrument track selection (select what instrument to give to each track) $l
            - Track info (get info on how successful your parsing was, accidentals and notes out of range) $l
            - Change note offset (in case that the song is outside of the octaves available) 
            `]},{version:"1.4",title:"Song library",date:"2021 - 28/08",changes:["Added song library integration, directly import songs from the app (700+ songs)","Bug fixes"]},{version:"1.3",title:"New audio files",date:"2021 - 25/08",changes:["Changed audio files","Added ocarina","Removed support button in TWA","Bug fixes"]},{version:"1.2",title:"Bug fixes and PWA",date:"2021 - 18/08",changes:["(For sky) Fixed bug where sheets couldn't be imported in sky studio","Changed app install to more modern approach with description and images"]},{version:"1.1",title:"Sheets compatibility",date:"2021 - 07/08",changes:["(For sky) Added backwards compatibility for sheets, now sheets made in sky music nightly can be imported into sky music and sky studio (with some losses)","Bug fixes","General improvement in performance"]},{version:"1.0",title:"Release",date:"2021 - 22/05",changes:["3 Instruments composition","Better performance than previous version","Better practice tool","Better interface","Breakpoints for the composer","New features for both composer and main page","Feature rich customisability to make learning and composition easier"]}],Bie="2022-8-22-16-8-56";function Die(){return k(io,{excludeMenu:!0,children:[m(N7,{children:m(Ct,{ariaLabel:"Go to github",children:m("a",{href:"https://github.com/Specy/genshin-music",className:"icon",target:"_blank",rel:"noreferrer",children:m(QP,{})})})}),m(In,{text:`Changelog V${Rs}`}),k("div",{className:"changelog-page-title",children:["Changelog",k("span",{style:{fontSize:"1.2rem",marginLeft:"1rem"},children:["v",Rs]})]}),k("div",{className:"row",style:{fontSize:"0.8rem",justifyContent:"space-between",alignItems:"center"},children:["Cache: ",Bie,m(hi,{to:"/Error",children:m(Be,{children:"View Error logs"})})]}),m("div",{style:{marginTop:"2rem"}}),Mie.map(e=>M.exports.createElement(Fie,{...e,key:e.version})),m("div",{className:"changelog-ending"})]})}function Gie(){return k(io,{className:"partners-page",children:[m(In,{text:"Partners"}),k("div",{className:"partner-wrapper",children:[m(Bv,{name:"Specy",description:"The youtube channel that collects videos created by users of this app",children:m(U_,{src:"https://www.youtube.com/embed/Sh7kqYVMjwM",title:"Specy"})}),m(Bv,{name:"ChaconneScott_ACG",description:"YouTube pianist and arranger, features Genshin Impact OST",children:m(U_,{src:"https://www.youtube.com/embed/ltE8zfGfUVo",title:"ChaconneScott_ACG"})}),m(Bv,{name:"uma\u273F",description:"Arranges music, primarily from anime and games for Sky and Genshin.",children:m(U_,{src:"https://www.youtube.com/embed/7aIkAGvp9Y0",title:"uma"})}),m(Bv,{name:"Windsong DB",description:"A Genshin Impact Database for Instrument Gadget Keymaps",children:m(jie,{img:"./assets/images/partners/windsong-db.jpg",to:"https://genshin-lyre.notion.site/genshin-lyre/Windsong-DB-8012b5f6939b486d857552c7b60e917f",alt:"Windsong DB"})})]})]})}function jie({to:e,img:t,alt:r}){return m("a",{href:e,style:{width:"18.8rem",height:"10.5rem",overflow:"hidden",borderRadius:"0.3rem"},target:"_blank",rel:"noreferrer",children:m("img",{loading:"lazy",src:t,style:{width:"100%",objectFit:"cover"},alt:r})})}function U_({src:e,title:t}){return m("iframe",{src:e,title:t,frameBorder:"0",allow:"autoplay; picture-in-picture",allowFullScreen:!0})}function Bv({name:e,description:t,children:r}){return k("div",{className:"partner",children:[m("div",{className:"partner-title",children:e}),m("div",{className:"partner-description",children:t}),r]})}function $ie(){return k(io,{children:[m(In,{text:"Help"}),k("div",{children:[m("div",{style:{fontSize:"2rem",margin:"1rem 0"},children:"Info about the app"}),k("div",{style:{marginLeft:"1rem"},children:["In this page you will find an explaination for what all the buttons in the app do and how to use them.",m("br",{}),m("br",{}),"If you Have issues, bugs, or suggestions, please join our",k("a",{href:"https://discord.gg/Arsf65YYHq",style:{color:"var(--accent)"},children:[m(De,{children:"\xA0"})," Discord server"]}),". ",m("br",{})]}),m(Zk,{})]})]})}function Hie({currentSong:e,onSongLoaded:t}){const[r]=Ou(),n=B3(),[i,o]=M.exports.useState(""),s=i==="Songs"?"side-menu menu-open":"side-menu",a=ra(()=>{o("")},{ignoreFocusable:!0,active:i!==""});return k("div",{className:"menu-wrapper noprint",ref:a,children:[k("div",{className:"menu menu-visible",style:{justifyContent:"flex-end"},children:[x4.hasNavigated&&i===""&&m(Ct,{ariaLabel:"Go back",style:{marginBottom:"auto"},onClick:()=>{n.goBack()},children:m(tA,{className:"icon"})}),i!==""&&m(Ct,{ariaLabel:"Close menu",style:{marginBottom:"auto"},onClick:()=>o(""),children:m(Zi,{className:"icon"})}),m(Ct,{onClick:()=>{o(i==="Songs"?"":"Songs")},ariaLabel:"Open songs menu",children:m(vp,{className:"icon"})}),m(Ct,{onClick:an.open,ariaLabel:"Open home menu",children:m(Su,{className:"icon"})})]}),m("div",{className:s,children:m(ni,{children:m(du,{songs:r,className:"noprint",exclude:["vsrg"],SongComponent:zie,componentProps:{current:e,onClick:t}})})})]})}function zie({data:e,current:t,onClick:r}){return m("div",{className:"song-row",style:t===e?{backgroundColor:"rgb(124, 116, 106)"}:{},onClick:()=>r(e),children:m("div",{className:"song-name",children:e.name})})}class NN{constructor(t=[],r=0){this.notes=[],this.delay=0,this.notes=t,this.delay=r}}const PN={joined:50,pause:400},Vie=new Mn;function Xie(){const[e]=fn(),[t,r]=M.exports.useState([]),[n,i]=M.exports.useState(7),[o,s]=M.exports.useState(null),[a,l]=M.exports.useState(!1),[u,c]=M.exports.useState("");function f(g){const b=n+g,_=document.querySelector(".frame-outer");!_||b<1||_.getBoundingClientRect().width<50&&g===1||i(b)}function p(g){return Vie.getNoteText(g,"Keyboard layout","C").toLowerCase()}function v(g){s(g);try{const b=Pt.parseSong(g);if(!aG(b))return;const x=(b instanceof En?b:b.toRecordedSong()).notes,T=[];let I=0,R="";for(let E=0;x.length>0;E++){const O=new NN([x.shift()]),P=O.notes.length>0?O.notes[0].time:0;for(let A=0;A<x.length&&A<20;A++)x[A].time-O.notes[0].time-PN.joined<0&&(O.notes.push(x.shift()),A--);O.delay=I,I=x.length>0?x[0].time-P:0;const N=Math.floor(O.delay/PN.pause);if(T.push(...new Array(N).fill(0).map(()=>new NN)),T.push(O),R+=N>2?` 

`:"- ".repeat(N),O.notes.length>1){const A=O.notes.map(j=>p(j.index)).join("");R+=je==="Genshin"?`[${A}] `:`${A} `}else O.notes.length>0&&(R+=`${p(O.notes[0].index)} `)}c(R),r(T)}catch(b){console.error(b),we.error("Error visualizing song")}Sn.songEvent({type:"visualize"})}return k(io,{style:{overflowY:"scroll"},excludeMenu:!0,children:[m(In,{text:"Sheet Visualizer"}),k("div",{style:{display:"flex",alignItems:"center",flexDirection:"column"},children:[m(Hie,{onSongLoaded:g=>v(g),currentSong:o}),k("div",{className:"displayer-buttons-wrapper noprint",children:[k("div",{style:{display:"flex",alignItems:"center"},children:[m("div",{style:{marginRight:"0.5rem"},children:"Note names"}),m(_g,{checked:a,onChange:l})]}),k("div",{style:{display:"flex",alignItems:"center"},children:["Per row: ",n,m("button",{className:"displayer-plus-minus",onClick:()=>f(-1),children:"-"}),m("button",{className:"displayer-plus-minus",onClick:()=>f(1),children:"+"})]})]}),m("h1",{className:"onprint",children:o?o==null?void 0:o.name:""}),k("div",{style:{width:"100%"},className:"noprint",children:[k("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[m("h2",{className:"text-ellipsis",children:o?o.name:"No song selected"}),m(Be,{onClick:()=>window.print(),style:{minWidth:"fit-content",marginLeft:"0.4rem"},children:"Print as PDF"})]}),m("div",{style:{color:"var(--background-text)"},children:"Select a song from the menu on the left. Remember that you can learn a song with the interactive practice tool in the Player"})]}),m("div",{className:"displayer-frame-wrapper",style:{gridTemplateColumns:`repeat(${n},1fr)`},children:t.map((g,b)=>m(rO,{chunk:g,rows:3,theme:e,hasText:a},b))}),u.trim().length>0&&m("pre",{className:"text-notation-wrapper",children:u})]})]})}function Wie({data:e,noteText:t="A",handleClick:r,noteImage:n,clickClass:i="",noteClass:o="",noteRef:s}){const[a,l]=M.exports.useState(RN());M.exports.useEffect(()=>jn(xe.state.data,()=>{l(RN())}),[]);const u=Yie(e.status,i)+` ${o}`;return m("button",{onPointerDown:c=>{c.preventDefault(),r(e)},className:"button-hitbox-bigger",children:k("div",{ref:s,className:u,style:{borderColor:AN(e.status)},children:[m(Dy,{className:"genshin-border",fill:AN(e.status)}),n&&m(Gy,{name:n,background:e.status==="clicked"?"var(--accent)":"var(--note-background)"}),m("div",{className:Ko.noteName,style:{color:a},children:t})]})})}function Yie(e,t){let r=Ko.note;switch(e){case"clicked":r+=` click-event ${t}`;break}return r}function AN(e){let t="#eae5ce";return e==="clicked"?t="transparent":e==="wrong"?t="#d66969":e==="right"&&(t="#358a55"),t}function RN(){const e=xe.get("note_background");return e.luminosity()>.65?ut.text.note:e.isDark()?ut.text.light:ut.text.dark}function Kie({status:e,onClick:t,type:r,selected:n,midi:i}){return m(Be,{className:`midi-shortcut ${e}`,toggled:n,onClick:()=>t(r),children:qie(r)+` (${i===-1?"NA":i})`})}function qie(e){var t;return(((t=e[0])==null?void 0:t.toUpperCase())+e.substring(1)).split("_").join(" ")}class sp{constructor(t){this.instruments=[],this.audioInstruments=[],this.basePitch="C",this.basePitch=t}destroy(){this.audioInstruments.forEach(t=>{_t.disconnect(t.endNode),t.dispose()})}syncInstruments(t){return this.instruments=t,this.loadInstruments()}async loadInstruments(){const{instruments:t,audioInstruments:r}=this;r.splice(t.length).forEach(o=>{_t.disconnect(o.endNode),o.dispose()});const i=t.map(async(o,s)=>{if(r[s]===void 0){const a=new Mn(o.name);return r[s]=a,await a.load(),_t.connect(a.endNode),a.changeVolume(o.volume),a}if(r[s].name===o.name)return r[s].changeVolume(o.volume),r[s];{const a=r[s];_t.disconnect(a.endNode),a.dispose();const l=new Mn(o.name);return r[s]=l,await l.load(),_t.connect(l.endNode),l.changeVolume(o.volume),l}});return Promise.all(i)}playNoteOfInstrument(t,r,n){const i=this.instruments[t];this.audioInstruments[t].play(r,n!=null?n:i.pitch||this.basePitch)}playNotesOfInstrument(t,r,n){r.forEach(i=>this.playNoteOfInstrument(t,i,n))}}const Zie=new Mn;class Jie extends M.exports.Component{constructor(t){super(t),this.init=async()=>{await this.loadInstrument(Pr[0]),await Lr.enable(),Lr.addInputsListener(this.midiStateChange),Lr.addListener(this.handleMidi),this.setState({sources:Lr.inputs,selectedSource:Lr.currentMIDISource})},this.midiStateChange=r=>{if(!this.mounted)return;const{sources:n}=this.state;n.length>r.length?we.warn("Device disconnected"):r.length>0&&we.warn("Device connected"),this.setState({sources:r})},this.selectMidi=r=>{!this.mounted||!r||(Lr.selectSource(r),this.setState({selectedSource:r}),Lr.saveSettings())},this.deselectNotes=()=>{const{settings:r}=this.state;r.notes.forEach(n=>{n.status=n.midi<0?"wrong":"right"}),this.setState({settings:r})},this.loadInstrument=async r=>{const{audioPlayer:n}=this.state;if((await n.syncInstruments([new Un({name:r})])).some(o=>!o))return we.error("Error loading instrument");if(!this.mounted)return n.destroy();this.setState({audioPlayer:n})},this.checkIfUsed=(r,n)=>{const{shortcuts:i,notes:o}=this.state.settings;return!!(i.find(s=>s.midi===r)&&["all","shortcuts"].includes(n)||o.find(s=>s.midi===r)&&["all","notes"].includes(n))},this.handleMidi=([r,n,i])=>{const{selectedNote:o,settings:s,selectedShortcut:a}=this.state;if(z3.down===r&&i!==0){if(o){if(this.checkIfUsed(n,"shortcuts"))return we.warn("Key already used");o.midi=n,this.deselectNotes(),this.setState({selectedNote:null}),Lr.saveSettings()}if(a){const c=s.shortcuts.find(f=>f.type===a);if(this.checkIfUsed(n,"all"))return we.warn("Key already used");c&&(c.midi=n,c.status=n<0?"wrong":"right",this.setState({settings:s}),Lr.saveSettings())}const l=s.shortcuts.find(c=>c.midi===n);l&&(l.status="clicked",setTimeout(()=>{l.status=n<0?"wrong":"right",this.setState({settings:s})},150),this.setState({settings:s})),s.notes.filter(c=>c.midi===n).forEach(c=>{this.handleClick(c,!0)})}},this.handleClick=(r,n=!1)=>{const{settings:i}=this.state;n||this.deselectNotes(),r.status="clicked",n?(setTimeout(()=>{r.status=r.midi<0?"wrong":"right",this.setState({settings:i})},200),this.setState({settings:i,selectedShortcut:null})):this.setState({settings:i,selectedNote:r,selectedShortcut:null}),this.playSound(r)},this.handleShortcutClick=r=>{if(this.deselectNotes(),this.state.selectedShortcut===r)return this.setState({selectedShortcut:null,selectedNote:null});this.setState({selectedShortcut:r,selectedNote:null})},this.playSound=r=>{if(r===void 0)return;const{audioPlayer:n}=this.state;n.playNoteOfInstrument(0,r.index)},this.state={audioPlayer:new sp("C"),settings:Lr.settings,selectedNote:null,selectedShortcut:null,sources:[],selectedSource:null},this.mounted=!0}componentDidMount(){this.init()}componentWillUnmount(){this.mounted=!1,this.state.audioPlayer.destroy(),Lr.clear(),_t.clear()}render(){const{settings:t,sources:r,selectedShortcut:n,selectedSource:i}=this.state;return k(io,{children:[m(In,{text:"MIDI Setup"}),k("div",{className:"column midi-setup-column",children:[k("div",{children:["Select MIDI device:",k("select",{className:"midi-select",style:{marginLeft:"0.5rem"},value:i?i.id:"None",onChange:o=>{this.selectMidi(r.find(s=>s.id===o.target.value))},children:[m("option",{disabled:!0,value:"None",children:" None"}),r.map((o,s)=>k("option",{value:o.id,children:[o.name," - ",o.id]},o.id))]})]}),m("div",{style:{margin:"0.5rem 0"},children:"Click on the note to map, then press your MIDI keyboard"})]}),k("div",{className:"midi-setup-content",children:[m("div",{className:"keyboard",style:{marginTop:"auto",width:"fit-content"},children:t.notes.map((o,s)=>m(Wie,{handleClick:()=>this.handleClick(o),data:o,noteImage:Zie.notes[s].noteImage,noteText:o.midi<0?"NA":String(o.midi)},s))}),k("div",{className:"midi-shortcuts-wrapper",children:[m("div",{style:{fontSize:"1.5rem"},children:"Shortcuts"}),m("div",{className:"midi-shortcuts",children:t.shortcuts.map(o=>m(Kie,{type:o.type,status:o.status,midi:o.midi,selected:n===o.type,onClick:this.handleShortcutClick},o.type))})]})]})]})}}const Qie=""+new URL("paypalme.64ab6d76.png",import.meta.url).href,eoe=""+new URL("buymeacoffee.05e7f5d3.svg",import.meta.url).href,toe=""+new URL("kofi.bc6b1e15.png",import.meta.url).href;function roe(){return k(io,{children:[m(In,{text:"Donate"}),k("div",{className:"donate-text",children:["Each App I make takes months of learning and development. Added to that are also the costs of hosting. With a higher budget I can afford to not worry so much about how much I spend on the server, giving you the best possible experience.",m("br",{}),"I care about giving users all features without having to pay for it, neither having intrusive ads which can be annoying. For this same reason, there is no source of income except donations.",m("br",{}),m("br",{}),"I would be really thankful if you could consider donating in order to fund development and costs."]}),k("div",{className:"donation-wrapper",children:[m("a",{href:"https://paypal.me/specyDev",target:"_blank",className:"paypal",rel:"noreferrer",children:m("img",{src:Qie,alt:"paypalme",style:{height:"3rem"},loading:"lazy"})}),m("a",{href:"https://ko-fi.com/specy",target:"_blank",className:"kofi",rel:"noreferrer",children:m("img",{src:toe,alt:"kofi",style:{height:"2rem"},loading:"lazy"})}),m("a",{href:"https://www.buymeacoffee.com/specy",target:"_blank",rel:"noreferrer",children:m("img",{src:eoe,alt:"buymeacoffee",style:{height:"3rem"},loading:"lazy"})})]})]})}function noe(){return k(io,{children:[m(In,{text:"404"}),k(hi,{to:"./",className:"link",style:{textAlign:"center"},children:[m("div",{style:{fontSize:"6rem"},children:"404"}),m("div",{children:"No page found, open the menu to change page"})]})]})}function Fh(){return(Fh=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function Jy(e,t){if(e==null)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)t.indexOf(r=o[n])>=0||(i[r]=e[r]);return i}function ap(e){var t=M.exports.useRef(e),r=M.exports.useRef(function(n){t.current&&t.current(n)});return t.current=e,r.current}var lp=function(e,t,r){return t===void 0&&(t=0),r===void 0&&(r=1),e>r?r:e<t?t:e},yd=function(e){return"touches"in e},Cx=function(e){return e&&e.ownerDocument.defaultView||self},kN=function(e,t,r){var n=e.getBoundingClientRect(),i=yd(t)?function(o,s){for(var a=0;a<o.length;a++)if(o[a].identifier===s)return o[a];return o[0]}(t.touches,r):t;return{left:lp((i.pageX-(n.left+Cx(e).pageXOffset))/n.width),top:lp((i.pageY-(n.top+Cx(e).pageYOffset))/n.height)}},ON=function(e){!yd(e)&&e.preventDefault()},P7=nt.memo(function(e){var t=e.onMove,r=e.onKey,n=Jy(e,["onMove","onKey"]),i=M.exports.useRef(null),o=ap(t),s=ap(r),a=M.exports.useRef(null),l=M.exports.useRef(!1),u=M.exports.useMemo(function(){var v=function(_){ON(_),(yd(_)?_.touches.length>0:_.buttons>0)&&i.current?o(kN(i.current,_,a.current)):b(!1)},g=function(){return b(!1)};function b(_){var w=l.current,x=Cx(i.current),T=_?x.addEventListener:x.removeEventListener;T(w?"touchmove":"mousemove",v),T(w?"touchend":"mouseup",g)}return[function(_){var w=_.nativeEvent,x=i.current;if(x&&(ON(w),!function(I,R){return R&&!yd(I)}(w,l.current)&&x)){if(yd(w)){l.current=!0;var T=w.changedTouches||[];T.length&&(a.current=T[0].identifier)}x.focus(),o(kN(x,w,a.current)),b(!0)}},function(_){var w=_.which||_.keyCode;w<37||w>40||(_.preventDefault(),s({left:w===39?.05:w===37?-.05:0,top:w===40?.05:w===38?-.05:0}))},b]},[s,o]),c=u[0],f=u[1],p=u[2];return M.exports.useEffect(function(){return p},[p]),m("div",{...Fh({},n,{onTouchStart:c,onMouseDown:c,className:"react-colorful__interactive",ref:i,onKeyDown:f,tabIndex:0,role:"slider"})})}),$4=function(e){return e.filter(Boolean).join(" ")},A7=function(e){var t=e.color,r=e.left,n=e.top,i=n===void 0?.5:n,o=$4(["react-colorful__pointer",e.className]);return m("div",{className:o,style:{top:100*i+"%",left:100*r+"%"},children:m("div",{className:"react-colorful__pointer-fill",style:{backgroundColor:t}})})},li=function(e,t,r){return t===void 0&&(t=0),r===void 0&&(r=Math.pow(10,t)),Math.round(r*e)/r},F_=function(e){return e[0]==="#"&&(e=e.substr(1)),e.length<6?{r:parseInt(e[0]+e[0],16),g:parseInt(e[1]+e[1],16),b:parseInt(e[2]+e[2],16),a:1}:{r:parseInt(e.substr(0,2),16),g:parseInt(e.substr(2,2),16),b:parseInt(e.substr(4,2),16),a:1}},ioe=function(e){var t=e.s,r=e.v,n=e.a,i=(200-t)*r/100;return{h:li(e.h),s:li(i>0&&i<200?t*r/100/(i<=100?i:200-i)*100:0),l:li(i/2),a:li(n,2)}},Ix=function(e){var t=ioe(e);return"hsl("+t.h+", "+t.s+"%, "+t.l+"%)"},ooe=function(e){var t=e.h,r=e.s,n=e.v,i=e.a;t=t/360*6,r/=100,n/=100;var o=Math.floor(t),s=n*(1-r),a=n*(1-(t-o)*r),l=n*(1-(1-t+o)*r),u=o%6;return{r:li(255*[n,a,s,s,l,n][u]),g:li(255*[l,n,n,a,s,s][u]),b:li(255*[s,s,l,n,n,a][u]),a:li(i,2)}},M_=function(e){var t=e.toString(16);return t.length<2?"0"+t:t},soe=function(e){var t=e.r,r=e.g,n=e.b,i=e.a,o=Math.max(t,r,n),s=o-Math.min(t,r,n),a=s?o===t?(r-n)/s:o===r?2+(n-t)/s:4+(t-r)/s:0;return{h:li(60*(a<0?a+6:a)),s:li(o?s/o*100:0),v:li(o/255*100),a:i}},aoe=nt.memo(function(e){var t=e.hue,r=e.onChange,n=$4(["react-colorful__hue",e.className]);return nt.createElement("div",{className:n},nt.createElement(P7,{onMove:function(i){r({h:360*i.left})},onKey:function(i){r({h:lp(t+360*i.left,0,360)})},"aria-label":"Hue","aria-valuetext":li(t)},nt.createElement(A7,{className:"react-colorful__hue-pointer",left:t/360,color:Ix({h:t,s:100,v:100,a:1})})))}),loe=nt.memo(function(e){var t=e.hsva,r=e.onChange,n={backgroundColor:Ix({h:t.h,s:100,v:100,a:1})};return nt.createElement("div",{className:"react-colorful__saturation",style:n},nt.createElement(P7,{onMove:function(i){r({s:100*i.left,v:100-100*i.top})},onKey:function(i){r({s:lp(t.s+100*i.left,0,100),v:lp(t.v-100*i.top,0,100)})},"aria-label":"Color","aria-valuetext":"Saturation "+li(t.s)+"%, Brightness "+li(t.v)+"%"},nt.createElement(A7,{className:"react-colorful__saturation-pointer",top:1-t.v/100,left:t.s/100,color:Ix(t)})))}),R7=function(e,t){if(e===t)return!0;for(var r in e)if(e[r]!==t[r])return!1;return!0};function uoe(e,t,r){var n=ap(r),i=M.exports.useState(function(){return e.toHsva(t)}),o=i[0],s=i[1],a=M.exports.useRef({color:t,hsva:o});M.exports.useEffect(function(){if(!e.equal(t,a.current.color)){var u=e.toHsva(t);a.current={hsva:u,color:t},s(u)}},[t,e]),M.exports.useEffect(function(){var u;R7(o,a.current.hsva)||e.equal(u=e.fromHsva(o),a.current.color)||(a.current={hsva:o,color:u},n(u))},[o,e,n]);var l=M.exports.useCallback(function(u){s(function(c){return Object.assign({},c,u)})},[]);return[o,l]}var coe=typeof window<"u"?M.exports.useLayoutEffect:M.exports.useEffect,hoe=function(){return typeof __webpack_nonce__<"u"?__webpack_nonce__:void 0},LN=new Map,foe=function(e){coe(function(){var t=e.current?e.current.ownerDocument:document;if(t!==void 0&&!LN.has(t)){var r=t.createElement("style");r.innerHTML=`.react-colorful{position:relative;display:flex;flex-direction:column;width:200px;height:200px;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:default}.react-colorful__saturation{position:relative;flex-grow:1;border-color:transparent;border-bottom:12px solid #000;border-radius:8px 8px 0 0;background-image:linear-gradient(0deg,#000,transparent),linear-gradient(90deg,#fff,hsla(0,0%,100%,0))}.react-colorful__alpha-gradient,.react-colorful__pointer-fill{content:"";position:absolute;left:0;top:0;right:0;bottom:0;pointer-events:none;border-radius:inherit}.react-colorful__alpha-gradient,.react-colorful__saturation{box-shadow:inset 0 0 0 1px rgba(0,0,0,.05)}.react-colorful__alpha,.react-colorful__hue{position:relative;height:24px}.react-colorful__hue{background:linear-gradient(90deg,red 0,#ff0 17%,#0f0 33%,#0ff 50%,#00f 67%,#f0f 83%,red)}.react-colorful__last-control{border-radius:0 0 8px 8px}.react-colorful__interactive{position:absolute;left:0;top:0;right:0;bottom:0;border-radius:inherit;outline:none;touch-action:none}.react-colorful__pointer{position:absolute;z-index:1;box-sizing:border-box;width:28px;height:28px;transform:translate(-50%,-50%);background-color:#fff;border:2px solid #fff;border-radius:50%;box-shadow:0 2px 4px rgba(0,0,0,.2)}.react-colorful__interactive:focus .react-colorful__pointer{transform:translate(-50%,-50%) scale(1.1)}.react-colorful__alpha,.react-colorful__alpha-pointer{background-color:#fff;background-image:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill-opacity=".05"><path d="M8 0h8v8H8zM0 8h8v8H0z"/></svg>')}.react-colorful__saturation-pointer{z-index:3}.react-colorful__hue-pointer{z-index:2}`,LN.set(t,r);var n=hoe();n&&r.setAttribute("nonce",n),t.head.appendChild(r)}},[])},doe=function(e){var t=e.className,r=e.colorModel,n=e.color,i=n===void 0?r.defaultColor:n,o=e.onChange,s=Jy(e,["className","colorModel","color","onChange"]),a=M.exports.useRef(null);foe(a);var l=uoe(r,i,o),u=l[0],c=l[1],f=$4(["react-colorful",t]);return k("div",{...Fh({},s,{ref:a,className:f}),children:[m(loe,{hsva:u,onChange:c}),m(aoe,{hue:u.h,onChange:c,className:"react-colorful__last-control"})]})},poe={defaultColor:"000",toHsva:function(e){return soe(F_(e))},fromHsva:function(e){return r=(t=ooe(e)).g,n=t.b,"#"+M_(t.r)+M_(r)+M_(n);var t,r,n},equal:function(e,t){return e.toLowerCase()===t.toLowerCase()||R7(F_(e),F_(t))}},k7=function(e){return nt.createElement(doe,Fh({},e,{colorModel:poe}))},moe=/^#?([0-9A-F]{3,8})$/i,voe=function(e){var t=e.color,r=t===void 0?"":t,n=e.onChange,i=e.onBlur,o=e.escape,s=e.validate,a=e.format,l=e.process,u=Jy(e,["color","onChange","onBlur","escape","validate","format","process"]),c=M.exports.useState(function(){return o(r)}),f=c[0],p=c[1],v=ap(n),g=ap(i),b=M.exports.useCallback(function(w){var x=o(w.target.value);p(x),s(x)&&v(l?l(x):x)},[o,l,s,v]),_=M.exports.useCallback(function(w){s(w.target.value)||p(o(r)),g(w)},[r,o,s,g]);return M.exports.useEffect(function(){p(o(r))},[r,o]),m("input",{...Fh({},u,{value:a?a(f):f,spellCheck:"false",onChange:b,onBlur:_})})},UN=function(e){return"#"+e},O7=function(e){var t=e.prefixed,r=e.alpha,n=Jy(e,["prefixed","alpha"]),i=M.exports.useCallback(function(s){return s.replace(/([^0-9A-F]+)/gi,"").substr(0,r?8:6)},[r]),o=M.exports.useCallback(function(s){return function(a,l){var u=moe.exec(a),c=u?u[1].length:0;return c===3||c===6||!!l&&c===4||!!l&&c===8}(s,r)},[r]);return m(voe,{...Fh({},n,{escape:i,format:t?UN:void 0,process:UN,validate:o})})};function goe({name:e,value:t,onChange:r,isModified:n,setSelectedProp:i,isSelected:o,handlePropReset:s,canReset:a}){const[l,u]=M.exports.useState(Lt(t));M.exports.useEffect(()=>{u(Lt(t))},[t]);function c(p){u(Lt(p))}function f(){r(e,l.toString()),i("")}return k("div",{className:`theme-row ${o?"selected":""}`,style:o?{backgroundColor:l.toString(),color:l.isDark()?ut.text.light:ut.text.dark}:{},children:[m("div",{children:Sy(e.split("_").join(" "))}),k("div",{className:"color-input-wrapper",children:[a&&n&&m(Be,{onClick:()=>s(e),toggled:n,className:"theme-reset",children:"RESET"}),o?k("div",{className:"color-picker",children:[m(k7,{onChange:c,color:l.hex()}),k("div",{className:"color-picker-row",children:[k("div",{className:"color-picker-input",style:{backgroundColor:l.toString(),color:l.isDark()?ut.text.light:ut.text.dark},children:[m("div",{style:{fontFamily:"Arial"},children:"#"}),m(O7,{onChange:c,color:l.hex(),style:{color:l.isDark()?ut.text.light:ut.text.dark}})]}),m("button",{className:"color-picker-check",onClick:()=>{u(Lt(t)),r(e,t),i("")},style:{backgroundColor:l.toString(),color:l.isDark()?ut.text.light:ut.text.dark},children:m(Zi,{size:16})}),m("button",{className:"color-picker-check",onClick:f,style:{backgroundColor:l.toString(),color:l.isDark()?ut.text.light:ut.text.dark},children:m(nA,{size:16})})]})]}):m("div",{onClick:()=>i(e),className:"color-preview",style:{backgroundColor:xe.get(e).toString(),color:xe.getText(e).toString()},children:"Text"})]})]})}function FN({theme:e,onClick:t,onDelete:r,current:n,downloadable:i}){return k("div",{className:"theme-preview",onClick:()=>{t&&t(e)},style:{backgroundColor:e.data.background.value,color:e.data.background.text,...n?{outline:"solid 0.1rem var(--accent)"}:{boxShadow:"0px 0px 10px 0px rgba(0,0,0,0.4)"}},children:[k("div",{className:"theme-preview-row",children:[m("div",{className:"text-ellipsis",children:e.other.name}),k("div",{children:[i&&m(es,{color:e.data.background.text,onClick:o=>{o.stopPropagation(),we.success(`The theme "${e.other.name}" was downloaded`),xr.downloadTheme(e,`${e.other.name||je}.theme`)},size:18,cursor:"pointer"}),r&&m(Ji,{onClick:o=>{o.stopPropagation(),r(e)},size:18,style:{marginLeft:"0.5rem"},color:"var(--red)",cursor:"pointer"})]})]}),m("div",{className:"theme-preview-colors",children:Object.entries(e.data).map(([o,s])=>m("div",{style:{backgroundColor:s.value,color:s.text}},o))})]})}function B_({name:e,onChange:t,disabled:r,value:n,onLeave:i}){return k("div",{className:"theme-row",children:[m("div",{children:e}),m("input",{className:"theme-input",style:{width:"9rem"},placeholder:"Write here",disabled:r,value:n,onPointerDown:()=>{r&&we.warn("Create a new theme first")},onBlur:()=>{i&&i()},onChange:o=>t(o.target.value)})]})}function yoe(){const[e,t]=M.exports.useState(xe);return M.exports.useEffect(()=>jn(xe.state.other,()=>{t({...xe})}),[]),[e,t]}function Sa({children:e,page:t}){const[r]=yoe();return m("div",{className:"app bg-image",style:{backgroundImage:`url(${r.getOther("backgroundImage"+t)}`},children:e})}function _oe(){const[e,t]=fn(),r=Wa(Xa.themes),[n,i]=M.exports.useState(""),[o,s]=M.exports.useState("player");M.exports.useEffect(()=>jn(xe.state.other,()=>{t({...xe})}),[]);async function a(b,_){if(!xe.isEditable()){if(_===xe.get(b).toString())return;const w=await xn("Creating a new theme from this default theme, write the name:");if(w===null)return;await f(w)}xe.set(b,_),await xe.save()}async function l(b){xe.reset(b),await xe.save()}async function u(b){for(const _ of b){const w=_.data;try{const T=(await xr.importAndLog(w)).getSuccessfulThemes()[0];T&&xe.loadFromJson(T)}catch{c()}}}const c=M.exports.useCallback(b=>{b&&console.error(b),we.error("There was an error importing this theme, is it the correct file?",4e3)},[]);async function f(b){const _=new V5(b);_.state=_i(xe.state),_.state.other.name=b,_.state.editable=!0,await v(_)}async function p(){const b=await xn("How do you want to name the theme?");if(b!=null){const _=new V5(b);await v(_)}}async function v(b){const _=await Xa.addTheme(b.serialize());return b.state.id=_,xe.loadFromJson(b.serialize()),_}async function g(b){await Mr(`Are you sure you want to delete the theme ${b.other.name}?`)&&(xe.getId()===b.id&&xe.wipe(),Xa.removeThemeById(b.id))}return k(io,{children:[m(In,{text:"Themes"}),k("div",{style:{display:"flex",alignItems:"center"},children:[m($y,{onPick:u,as:"json",onError:c,children:m(Be,{style:{margin:"0.25rem"},children:"Import Theme"})}),m("div",{style:{marginLeft:"1rem"},children:xe.getOther("name")})]}),m("div",{style:{marginTop:"2.2rem"}}),e.toArray().map(b=>M.exports.createElement(goe,{...b,key:b.name,isSelected:n===b.name,canReset:xe.isEditable(),isModified:!e.isDefault(b.name),onChange:a,setSelectedProp:i,handlePropReset:l})),m(B_,{name:"Background image (URL)",value:e.getOther("backgroundImageMain"),disabled:!xe.isEditable(),onChange:b=>xe.setBackground(b,"Main")}),m(B_,{name:"Composer Background image (URL)",value:e.getOther("backgroundImageComposer"),disabled:!xe.isEditable(),onChange:b=>xe.setBackground(b,"Composer")}),m(B_,{name:"Theme name",value:e.getOther("name"),disabled:!xe.isEditable(),onChange:b=>xe.setOther("name",b),onLeave:()=>xe.save()}),k("div",{style:{textAlign:"center",marginTop:"1rem"},children:[m("span",{style:{color:"var(--red)"},children:"Warning"}),": GIF backgrounds could reduce performance"]}),m("div",{style:{fontSize:"1.5rem",marginTop:"2rem"},children:"Your Themes"}),k("div",{className:"theme-preview-wrapper",children:[r.map(b=>m(FN,{onDelete:g,current:b.id===xe.getId(),theme:b,downloadable:!0,onClick:_=>{xe.loadFromTheme(_),xe.save()}},b.id)),k("button",{className:"new-theme",onClick:p,children:[m(au,{size:30}),"New theme"]})]}),m("div",{style:{fontSize:"1.5rem",marginTop:"2rem"},children:"Default Themes"}),m("div",{className:"theme-preview-wrapper",children:w4.map(b=>m(FN,{theme:b,current:b.id===xe.getId(),onClick:_=>{xe.loadFromTheme(_),xe.save()}},b.id))}),m("div",{style:{fontSize:"1.5rem",marginTop:"2rem"},children:"Preview"}),k("div",{className:"theme-app-preview",children:[m(Be,{className:"box-shadow",toggled:!0,style:{position:"absolute",right:0,top:0,zIndex:90},onClick:()=>s(o==="composer"?"player":"composer"),children:o==="composer"?"View player":"View composer"}),o==="player"&&m(Sa,{page:"Main",children:m(fw,{})}),o==="composer"&&m(Sa,{page:"Composer",children:m(I7,{inPreview:!0})})]})]})}function boe({onSongSelect:e,settings:t,onSettingsUpdate:r}){const[n,i]=M.exports.useState(!1),[o,s]=M.exports.useState(!0),[a,l]=M.exports.useState("Settings"),[u]=Up(),[c]=Ou(),[f]=fn(),p=ra(b=>{if(lu)return s(!1);i(!1)},{active:n&&o,ignoreFocusable:!0}),v=M.exports.useCallback(b=>{if(b===a&&n)return i(!1);i(!0),b&&(l(b),Sn.UIEvent("menu",{tab:b}))},[n,a]);return m(De,{children:k("div",{className:"menu-wrapper",ref:p,children:[m("div",{className:"hamburger-top",onClick:()=>s(!o),children:m(St,{children:m(ry,{})})}),k("div",{className:`menu ${o?"menu-visible":""}`,children:[m(Ct,{onClick:()=>{s(!1)},ariaLabel:"Close Menu",children:m(Zi,{className:"icon"})}),m(Ct,{style:{marginTop:"auto"},onClick:()=>v("Songs"),isActive:n&&a==="Songs",ariaLabel:"Song menu",children:m(St,{children:m(vp,{className:"icon"})})}),m(Ct,{onClick:()=>v("Settings"),isActive:n&&a==="Settings",ariaLabel:"Settings menu",children:m(St,{children:m(Tu,{className:"icon"})})}),m(Ct,{onClick:()=>an.open(),ariaLabel:"Open home menu",children:m(St,{children:m(Su,{className:"icon"})})})]}),k("div",{className:n&&o?"side-menu menu-open":"side-menu",children:[k(ni,{current:a,id:"Songs",children:[m("div",{className:"row",children:m(hi,{to:"/VsrgComposer",children:m(Be,{children:"Create song"})})}),m(du,{songs:c,exclude:["composed","recorded"],style:{marginTop:"0.6rem"},SongComponent:xoe,componentProps:{theme:f,folders:u,functions:{setMenuVisible:s,onSongSelect:e}}})]}),k(ni,{current:a,id:"Settings",children:[m(Fp,{settings:t,onUpdate:r}),m("div",{className:"row",style:{marginTop:"0.6rem",justifyContent:"flex-end"},children:!lu&&m(hi,{to:"/Keybinds",children:m(Be,{children:"Change keybinds"})})})]})]})]})})}const woe=M.exports.memo(boe,(e,t)=>e.settings===t.settings);function xoe({data:e,functions:t,theme:r,folders:n}){const{setMenuVisible:i,onSongSelect:o}=t,s={backgroundColor:r.layer("primary",.15).hex()},[a,l]=M.exports.useState(!1),[u,c]=M.exports.useState(e.name);return M.exports.useEffect(()=>{c(e.name)},[e.name]),e.type!=="vsrg"?m("div",{className:"row",children:"Invalid song"}):k("div",{className:"song-row",children:[k("div",{className:`song-name ${Wn(!0)}`,onClick:()=>{a||(o(Pt.parseSong(e),"play"),i(!1))},children:[a?m("input",{className:`song-name-input ${a?"song-rename":""}`,disabled:!a,onChange:f=>c(f.target.value),style:{width:"100%",color:"var(--primary-text)"},value:u}):m("div",{style:{marginLeft:"0.3rem"},children:u}),m(Gn,{children:a?"Song name":"Play song"})]}),m("div",{className:"song-buttons-wrapper",children:k(Lp,{Icon:xh,style:s,ignoreClickOutside:a,tooltip:"More options",onClose:()=>l(!1),children:[k(hr,{onClick:()=>{a&&(kt.renameSong(e.id,u),l(!1)),l(!a)},children:[m(gp,{style:{marginRight:"0.4rem"},size:14}),m(Fr,{text:a?"Save":"Rename"})]}),k(hr,{style:{padding:"0 0.4rem"},children:[m(ny,{style:{marginRight:"0.4rem"}}),k("select",{className:"dropdown-select",value:e.folderId||"_None",onChange:f=>{const p=f.target.value;kt.addSongToFolder(e,p!=="_None"?p:null)},children:[m("option",{value:"_None",children:"None"}),n.map(f=>m("option",{value:f.id,children:f.name},f.id))]})]}),k(hr,{onClick:async()=>{xr.downloadSong(e,e.name)},children:[m(es,{style:{marginRight:"0.4rem"},size:14}),m(Fr,{text:"Download"})]}),k(hr,{onClick:async()=>{!await Mr("Are you sure you want to delete this song?")||kt.removeSong(e.id)},children:[m(Ji,{color:"#ed4557",style:{marginRight:"0.4rem"},size:14}),m(Fr,{text:"Delete"})]})]})})]})}var Toe=Object.defineProperty,Soe=Object.getOwnPropertyDescriptor,H4=(e,t,r,n)=>{for(var i=n>1?void 0:n?Soe(t,r):t,o=e.length-1,s;o>=0;o--)(s=e[o])&&(i=(n?s(t,r,i):s(i))||i);return n&&i&&Toe(t,r,i),i};const Eoe={amazing:300,perfect:200,great:100,good:50,bad:25,miss:0};class Qy{constructor(){this.keyboard=[],this.currentSong={song:null,type:"stop"},this.score={scoreVisible:!1,combo:0,score:0,amazing:0,perfect:0,great:0,good:0,bad:0,miss:0,lastScore:{timestamp:0,type:"",combo:0}},this.listeners=[],this.keyboardListeners=[],this.setLayout=t=>{this.keyboard.splice(0,this.keyboard.length,...t.map((r,n)=>({key:r,index:n,isPressed:!1})))},this.addEventListener=(t,r)=>{this.listeners.push({callback:t,id:r})},this.emitEvent=t=>{this.listeners.forEach(r=>r.callback(t))},this.removeEventListener=t=>{this.listeners=this.listeners.filter(r=>r.id!==t)},this.resetScore=()=>{const t={scoreVisible:!1,score:0,amazing:0,perfect:0,great:0,good:0,bad:0,miss:0,combo:0,lastScore:{timestamp:0,type:"",combo:0}};Object.assign(this.score,t)},this.incrementScore=t=>{const r=t==="miss"?0:this.score.combo+1;Object.assign(this.score,{[t]:this.score[t]+1,combo:r,score:this.score.score+this.getScore(t)*r,lastScore:{timestamp:Date.now(),type:t,combo:r}})},this.getScore=t=>{var r;return(r=Eoe[t])!=null?r:0},this.playSong=t=>{this.currentSong.type="play",this.currentSong.song=t.clone()},this.showScore=()=>{this.score.scoreVisible=!0},this.stopSong=()=>{this.currentSong.type="stop",this.currentSong.song=null},this.pressKey=t=>{this.keyboard[t].isPressed=!0,this.emitKeyboardEvent(this.keyboard[t],"down")},this.releaseKey=t=>{this.keyboard[t].isPressed=!1,this.emitKeyboardEvent(this.keyboard[t],"up")},this.addKeyboardListener=t=>{this.keyboardListeners.push(t)},this.removeKeyboardListener=t=>{const r=this.keyboardListeners.findIndex(n=>n.id===t.id||n.callback===t.callback);r!==-1&&this.keyboardListeners.splice(r,1)},this.emitKeyboardEvent=(t,r)=>{this.keyboardListeners.forEach(n=>n.callback(t,r))},ki(this)}}H4([gt],Qy.prototype,"keyboard",2);H4([gt.shallow],Qy.prototype,"currentSong",2);H4([gt],Qy.prototype,"score",2);const dt=new Qy;function Coe(e){return jn(dt.currentSong,()=>{e(dt.currentSong)})}function Ioe(e){return jn(dt.score,()=>{e({...dt.score})})}function Noe(e){return jn(dt.score,()=>{e({...dt.score.lastScore})})}function Poe(e,t){const[r,n]=M.exports.useState(dt.keyboard[e]);return M.exports.useEffect(()=>Aoe(e,n),[e,t]),r}function Aoe(e,t){const r=jn(dt.keyboard[e],()=>{t({...dt.keyboard[e]}),t({...dt.keyboard[e]})});return t({...dt.keyboard[e]}),r}function Roe(){const[e,t]=M.exports.useState(dt.keyboard);return M.exports.useEffect(()=>koe(t),[]),e}function koe(e){const t=jn(dt.keyboard,()=>{e([...dt.keyboard])});return e([...dt.keyboard]),t}function Ooe({hitObjectSize:e,offset:t,keyboardLayout:r,verticalOffset:n,horizontalOffset:i}){const o=Roe();M.exports.useEffect(()=>(Xe.listen(({letter:c,event:f})=>{if(f.repeat)return;const p=o.findIndex(v=>v.key===c);p>=0&&dt.pressKey(p)},{type:"keydown",id:"vsrg-player-keyboard"}),Xe.listen(({letter:c,event:f})=>{if(f.repeat)return;const p=o.findIndex(v=>v.key===c);p>=0&&dt.releaseKey(p)},{type:"keyup",id:"vsrg-player-keyboard"}),()=>{Xe.unregisterById("vsrg-player-keyboard")}),[o]);const s=Math.ceil(o.length/2),a=o.length-s*2,l=o.slice(0,s),u=o.slice(s+a);return k(De,{children:[r==="line"&&k(De,{children:[m("div",{className:"vsrg-player-keyboard-control-left",style:{"--vertical-offset":`calc(-${l.length*2}vw + ${n*.1}rem)`,"--horizontal-offset":`${i*.1+1}rem`},children:l.map(c=>m(D_,{index:c.index,layout:o,offset:t,layoutType:"circles",size:e},`${c.key}-${o.length}`))}),m("div",{className:"vsrg-player-keyboard-control-right",style:{"--vertical-offset":`calc(-${l.length*2}vw + ${n*.1}rem)`,"--horizontal-offset":`${i*.1+1}rem`},children:u.map(c=>m(D_,{index:c.index,layout:o,offset:t,layoutType:"circles",size:e},`${c.key}-${o.length}`))})]}),m("div",{className:"vsrg-player-keyboard-circles",children:o.map(c=>m(D_,{index:c.index,layout:o,offset:t,layoutType:r,size:e},`${c.key}-${o.length}`))})]})}function D_({index:e,layout:t,size:r,layoutType:n,offset:i}){const o=Poe(e,t),s=M.exports.useCallback(()=>{dt.pressKey(e)},[e]),a=M.exports.useCallback(()=>{dt.releaseKey(e)},[e]);return n==="circles"?m("button",{className:"vsrg-player-key-hitbox-circle flex-centered",style:{paddingBottom:`${i}px`},onPointerDown:s,onPointerUp:a,children:m("div",{className:`vsrg-player-key-circle ${o.isPressed?"vsrg-key-pressed":""}`,style:{width:r,height:r},children:o.key})}):n==="line"?m("button",{className:"vsrg-player-key-hitbox-line",onPointerDown:s,onPointerUp:a,children:m("div",{className:`vsrg-player-key-line ${o.isPressed?"vsrg-key-pressed":""}`,style:{height:`${i}px`}})}):null}class L7{constructor(t,r){this.nextTick=0,this.maxFpsInterval=0,this.deltaTime=0,this.raf=0,this.duration=0,this.previousTickTime=0,this.tick=()=>{const n=Date.now();this.deltaTime=n-this.nextTick,this.deltaTime>=this.maxFpsInterval&&(this.nextTick=n-this.deltaTime%this.maxFpsInterval,this.callback(this.elapsed,n-this.previousTickTime),this.previousTickTime=n),this.elapsed=n-this.startTime,this.elapsed<this.duration&&(this.raf=setTimeout(this.tick,8))},this.callback=t,this.startTime=0,this.elapsed=0,this.maxFps=r,this.maxFpsInterval=1e3/r}get fps(){return this.maxFps}changeMaxFps(t){this.maxFps=t,this.maxFpsInterval=1e3/t}setCallback(t){this.callback=t}start(t){this.stop(),this.startTime=Date.now(),this.nextTick=Date.now(),this.previousTickTime=0,this.duration=t!=null?t:Number.MAX_SAFE_INTEGER,this.tick()}stop(){clearTimeout(this.raf)}}var Loe=Object.defineProperty,Uoe=Object.getOwnPropertyDescriptor,U7=(e,t,r,n)=>{for(var i=n>1?void 0:n?Uoe(t,r):t,o=e.length-1,s;o>=0;o--)(s=e[o])&&(i=(n?s(t,r,i):s(i))||i);return n&&i&&Loe(t,r,i),i};class z4{constructor(){this.version=2,this.vsrg={k4:["A","S","J","K"],k6:["A","S","D","H","J","K"]},this.keyboard={genshin:"Q W E R T Y U A S D F G H J Z X C V B N M".split(" "),sky:"Q W E R T A S D F G Z X C V B".split(" ")},ki(this),this.load()}getVsrgKeybinds(t){return this.vsrg[`k${t}`]}setVsrgKeybind(t,r,n){this.vsrg[`k${t}`][r]=n,this.save()}setVsrgKeybinds(t,r){this.vsrg[`k${t}`].splice(0,r.length,...r),this.save()}getKeyboardKeybinds(){return this.keyboard[je.toLowerCase()]}setKeyboardKeybinds(t){this.keyboard[je.toLowerCase()].splice(0,t.length,...t),this.save()}setKeyboardKeybind(t,r){this.keyboard[je.toLowerCase()][t]=r,this.save()}load(){const t=localStorage.getItem(`${je}_keybinds`);if(t){const r=JSON.parse(t);if(r.version!==this.version)return;this.vsrg=r.vsrg,this.keyboard=r.keyboard}}save(){localStorage.setItem(`${je}_keybinds`,JSON.stringify(this.serialize()))}serialize(){return{version:this.version,vsrg:_i(this.vsrg),keyboard:_i(this.keyboard)}}}U7([gt],z4.prototype,"vsrg",2);U7([gt],z4.prototype,"keyboard",2);const Ls=new z4;Ia.LINE_SCALE_MODE=ai.NORMAL;class Foe{constructor({app:t,colors:r,sizes:n,trackColors:i}){this.destroy=()=>{Object.values(this.textures.hitObjects).forEach(o=>o==null?void 0:o.destroy()),Object.values(this.textures.heldHitObjects).forEach(o=>o==null?void 0:o.destroy()),Object.values(this.textures.trails).forEach(o=>o==null?void 0:o.destroy()),this.app=null},this.textures={hitObjects:{},heldHitObjects:{},trails:{},lines:{},sizes:{hitObject:0,trail:0}},this.trackColors=i,this.colors=r,this.sizes=n,this.app=t,this.generate()}generate(){const{app:t}=this;!t||(this.generateTrackCache(t),this.generateTrailsCache(t),this.generateLinesCache(t))}getHitObjectCache(t){return this.textures.hitObjects[t]||this.textures.hitObjects["#FF0000"]}getHeldTrailCache(t){return this.textures.trails[t]||this.textures.trails["#FF0000"]}getHeldHitObjectCache(t){return this.textures.heldHitObjects[t]||this.textures.heldHitObjects["#FF0000"]}getLinesCache(t){return this.textures.lines[t]||this.textures.lines["#FF0000"]}generateTrailsCache(t){const{sizes:r,trackColors:n}=this,i=[...n,"#FF0000"],o=r.hitObjectSize,s=o/3;i.forEach(a=>{const l=new ar;l.beginFill(Lt(a).rgbNumber()).drawRect(s/2,0,o-s,o);const u=t.renderer.generateTexture(l,{resolution:1,scaleMode:Tt.LINEAR,region:new Fe(0,0,o,o)});this.textures.trails[a]=u,l.destroy(!0)}),this.textures.sizes.trail=o}generateLinesCache(t){const{sizes:r,trackColors:n}=this,i=[...n,"#FF0000"],o=5;i.forEach(s=>{const a=new ar;a.lineStyle(o,Lt(s).rgbNumber()).moveTo(0,0).lineTo(r.width,0);const l=t.renderer.generateTexture(a,{resolution:2,scaleMode:Tt.LINEAR,region:new Fe(0,0,r.width,o)});this.textures.lines[s]=l,a.destroy(!0)})}generateTrackCache(t){const{colors:r,sizes:n,trackColors:i}=this,o=n.hitObjectSize;[...i,"#FF0000"].forEach(a=>{const l=new ar,u=o/2;l.lineStyle(5,Lt(a).rgbNumber()).beginFill(r.background_10[1]).drawCircle(u,u,u-5);const c=t.renderer.generateTexture(l,{resolution:2,scaleMode:Tt.LINEAR,region:new Fe(0,0,o,o)});this.textures.hitObjects[a]=c,l.destroy(!0);const f=new ar,p=o*.7,v=(o-p)/2;f.lineStyle(5,Lt(a).rgbNumber()).beginFill(r.background_10[1]).drawRoundedRect(v,v,p,p,6);const g=t.renderer.generateTexture(f,{resolution:2,scaleMode:Tt.LINEAR,region:new Fe(0,0,o,o)});this.textures.heldHitObjects[a]=g,f.destroy(!0)}),this.textures.sizes.hitObject=o}}function Moe({timestamp:e,renderableHitObjects:t,cache:r,sizes:n,offset:i}){const o=n.scaling,s=n.hitObjectSize/2;return m(De,{children:m(Je.exports.Container,{x:0,y:e*o+n.height-i,sortableChildren:!0,children:t.map((a,l)=>{const u=a.hitObject,c=u.index*n.keyWidth+n.keyWidth/2,f=-(u.timestamp*o);if((a.status===Yf.Hit||a.status===Yf.Missed)&&!u.isHeld)return null;let p=a.hitObject.index,v=p;for(const g of t)g===a||g.status===Yf.Missed||g.status===Yf.Hit||g.hitObject.timestamp===u.timestamp&&(g.hitObject.index<p&&(p=g.hitObject.index),g.hitObject.index>v&&(v=g.hitObject.index));return k(M.exports.Fragment,{children:[p!==v&&m(Je.exports.Sprite,{texture:r.getLinesCache(a.color),x:p*n.keyWidth+n.keyWidth/2,width:(v-p)*n.keyWidth,zIndex:-1,y:f-s}),u.isHeld?k(De,{children:[m(Je.exports.Sprite,{texture:r.getHeldTrailCache(a.color),anchor:Jv,width:r.textures.sizes.trail,height:u.holdDuration*o,x:c,y:f-s}),m(Je.exports.Sprite,{texture:r.getHeldHitObjectCache(a.color),anchor:.5,angle:45,x:c,y:f-s}),m(Je.exports.Sprite,{texture:r.getHeldHitObjectCache(a.color),anchor:Jv,x:c,y:f-u.holdDuration*o})]}):m(Je.exports.Sprite,{texture:r.getHitObjectCache(a.color),y:f,anchor:Jv,x:c},a.hitObject.renderId)]},u.renderId)})})})}function Boe({time:e}){const t=M.exports.useRef(null);return M.exports.useEffect(()=>{const r=t.current;r&&r.animate([{transform:"scale(1.4)"},{transform:"scale(1)"}],{duration:500,iterations:1})},[e]),m(De,{children:m("div",{className:"vsrg-player-countdown flex-centered",ref:t,children:e})})}const Doe=M.exports.memo(Boe,(e,t)=>e.time===t.time);var Yf=(e=>(e[e.Idle=0]="Idle",e[e.Pressed=1]="Pressed",e[e.Missed=2]="Missed",e[e.Hit=3]="Hit",e))(Yf||{});class Goe{constructor(t){this.color="#FFFFFF",this.status=0,this.instrumentIndex=0,this.heldScoreTimeout=0,this.hitObject=t}}const F7={el:new DOMRect,rawWidth:0,rawHeight:0,width:0,height:0,keyWidth:0,hitObjectSize:0,scaling:0,verticalOffset:0};class joe extends M.exports.Component{constructor(t){super(t),this.toDispose=[],this.onSongPick=({type:r,song:n})=>{dt.resetScore();const{scrollSpeed:i}=this.props;r==="play"&&n&&this.setState({song:n,timestamp:-1500-i,renderableHitObjects:[]},()=>{n.startPlayback(0),this.calculateSizes(),this.generateAccuracyBounds()}),r==="stop"&&this.setState({song:new os(""),timestamp:0,renderableHitObjects:[]})},this.handleVsrgEvent=r=>{r==="fpsChange"&&this.throttledEventLoop.changeMaxFps(this.props.maxFps)},this.handleKeyboard=(r,n)=>{const{renderableHitObjects:i,timestamp:o,accuracy:s}=this.state,a=i.find(l=>l.hitObject.index===r.index);if(!!a){if(n==="down"){const l=o5(a.hitObject.timestamp,o,s),u=a.status===0;l&&u&&(a.hitObject.isHeld?a.status=1:a.status=3,this.props.playHitObject(a.hitObject,a.instrumentIndex),dt.incrementScore(this.getHitRating(a.hitObject,o)))}n==="up"&&a.hitObject.isHeld&&(o5(a.hitObject.timestamp+a.hitObject.holdDuration,o,s)?a.status=3:(a.status=2,dt.incrementScore("miss")))}},this.calculateSizes=()=>{const r=this.wrapperRef.current;if(!r)return;const n=r.clientWidth,i=n/this.state.song.keys,o=i*.6,s={width:n,height:r.clientHeight,rawWidth:n,rawHeight:r.clientHeight,el:r.getBoundingClientRect(),keyWidth:i,hitObjectSize:o,scaling:r.clientHeight/this.props.scrollSpeed,verticalOffset:15},a=r.querySelector("canvas");a&&(a.style.width=`${s.width}px`,a.style.height=`${s.height}px`),this.props.onSizeChange(s),this.setState({sizes:s},this.generateCache)},this.generateCache=()=>{const{colors:r,sizes:n,cache:i}=this.state,o=this.stageRef.current.app,s=new Foe({app:o,colors:r,sizes:n,trackColors:this.state.song.tracks.map(a=>a.color)});this.setState({cache:s},()=>{i==null||i.destroy()})},this.generateAccuracyBounds=()=>{const{song:r}=this.state;this.setState({accuracyBounds:r.getAccuracyBounds()})},this.getHitRating=(r,n)=>{const{accuracyBounds:i}=this.state,o=Math.abs(n-r.timestamp);return o<i[0]?"amazing":o<i[1]?"perfect":o<i[2]?"great":o<i[3]?"good":o<i[4]?"bad":"miss"},this.handleThemeChange=r=>{const n=r.get("primary"),i=r.getText("primary"),o=i.darken(.5).desaturate(1),s=r.layer("background",.18,.06),a=n.darken(.15),l=a.darken(.1),u=r.get("secondary"),c=r.get("accent");this.setState({colors:{background_plain:[n.hex(),n.rgbNumber()],background_layer_10:[s.hex(),s.rgbNumber()],background:[a.hex(),a.rgbNumber()],background_10:[l.hex(),l.rgbNumber()],secondary:[u.hex(),u.rgbNumber()],lineColor:[i.hex(),i.rgbNumber()],lineColor_10:[o.hex(),o.rgbNumber()],accent:[c.hex(),c.rgbNumber()]}},this.generateCache)},this.handleTick=(r,n)=>{const{isPlaying:i,scrollSpeed:o}=this.props,{song:s,renderableHitObjects:a,sizes:l}=this.state;if(!i)return;const u=this.state.timestamp+n,f=s.tickPlayback(u+o+l.height).map((p,v)=>p.map(b=>{const _=new Goe(b);return _.instrumentIndex=v,_.color=s.tracks[v].color,_})).flat();this.validateHitObjects(u,a.concat(f),this.state.timestamp),this.props.onTick(u)},this.validateHitObjects=(r,n,i)=>{const{accuracy:o}=this.state,s=dt.keyboard;for(let l=0;l<n.length;l++){const u=n[l],c=s[u.hitObject.index];if(!c)continue;const f=u.status===0;if(!c.isPressed&&f&&u.hitObject.timestamp<r-o){u.status=2,dt.incrementScore("miss");continue}if(c.isPressed&&u.status===1){const p=u.hitObject.timestamp+u.hitObject.holdDuration<r-o;u.heldScoreTimeout-=r-i,p?(u.status=2,dt.incrementScore("miss")):u.heldScoreTimeout<=0&&(u.heldScoreTimeout=300,dt.incrementScore("perfect"));continue}}const a=n.filter(l=>l.hitObject.timestamp+l.hitObject.holdDuration>r-o);this.setState({timestamp:r,renderableHitObjects:a})},this.state={song:new os(""),timestamp:0,accuracy:150,sizes:F7,colors:{background_plain:["#000000",1],background_layer_10:["#000000",1],background:["#000000",1],background_10:["#000000",1],secondary:["#000000",1],lineColor:["#000000",1],lineColor_10:["#000000",1],accent:["#000000",1]},accuracyBounds:[0,0,0,0,0],cache:null,renderableHitObjects:[]},this.throttledEventLoop=new L7(()=>{},this.props.maxFps),this.wrapperRef=M.exports.createRef(),this.stageRef=M.exports.createRef()}componentDidMount(){this.throttledEventLoop.setCallback(this.handleTick),this.throttledEventLoop.start(),dt.addKeyboardListener({callback:this.handleKeyboard,id:"vsrg-player-canvas"}),this.toDispose.push(()=>dt.removeKeyboardListener({id:"vsrg-player-canvas"})),this.toDispose.push(Coe(this.onSongPick)),this.toDispose.push(My(this.handleThemeChange)),dt.addEventListener(this.handleVsrgEvent,"vsrg-player-canvas"),this.toDispose.push(()=>dt.removeEventListener("vsrg-player-canvas")),window.addEventListener("resize",this.calculateSizes),this.toDispose.push(()=>window.removeEventListener("resize",this.calculateSizes)),this.calculateSizes()}componentWillUnmount(){this.throttledEventLoop.stop(),dt.setLayout(Ls.getVsrgKeybinds(4)),this.toDispose.forEach(t=>t())}render(){const{sizes:t,cache:r,renderableHitObjects:n,timestamp:i,colors:o}=this.state,{scrollSpeed:s}=this.props;return m(De,{children:k("div",{className:"vsrg-player-canvas box-shadow",style:{backgroundColor:o.background_layer_10[0]},ref:this.wrapperRef,children:[i+s<0&&m(Doe,{time:Math.abs(Math.ceil((i+s)/1e3*2))+1}),m(Je.exports.Stage,{ref:this.stageRef,raf:!1,width:t.width,height:t.height,options:{backgroundAlpha:0,autoDensity:!1,resolution:(window==null?void 0:window.devicePixelRatio)||1},onMount:this.calculateSizes,children:r&&m(De,{children:m(Moe,{sizes:t,offset:t.verticalOffset,cache:r,renderableHitObjects:n,timestamp:i})})})]})})}}function $oe(){const[e,t]=M.exports.useState(dt.score);return M.exports.useEffect(()=>Ioe(t),[]),e}function Hoe(){const e=$oe();return k(De,{children:[m("div",{className:"vsrg-player-score",children:m("div",{className:"column space-between",children:m("div",{children:e.score})})}),e.scoreVisible&&k("div",{className:"vsrg-final-score box-shadow",children:[m(Gf,{text:"Amazing",number:e.amazing,color:Ca.amazing,gridArea:"a"}),m(Gf,{text:"Perfect",number:e.perfect,color:Ca.perfect,gridArea:"b"}),m(Gf,{text:"Great",number:e.great,color:Ca.great,gridArea:"c"}),m(Gf,{text:"Good",number:e.good,color:Ca.good,gridArea:"d"}),m(Gf,{text:"Miss",number:e.miss,color:Ca.miss,gridArea:"e"}),k("div",{className:"row space-between",style:{width:"100%",alignItems:"center",gridArea:"f"},children:[k("div",{style:{fontSize:"1.2rem"},children:["Combo: ",e.combo,"x"]}),m("div",{className:"flex",style:{fontSize:"0.8rem",alignItems:"center"},children:e.score})]})]})]})}const zoe=M.exports.memo(Hoe,(e,t)=>!1);function Gf({text:e,color:t,number:r,gridArea:n}){return k("div",{className:"row floating-score-element",style:{gridArea:n},children:[m("span",{style:{color:t},children:e}),m("span",{children:r})]})}function Voe({song:e,onStopSong:t,onRetrySong:r}){return e?k(De,{children:[m("div",{className:"vsrg-player-right",children:k("div",{className:"row space-between",style:{gap:"0.2rem"},children:[m(Ql,{onClick:t,children:m(St,{children:m(dA,{})})}),m(Ql,{onClick:r,children:m(St,{children:m(pA,{})})})]})}),m(zoe,{})]}):null}const Xoe={transform:"rotate(0) scale(1)",color:"var(--primary-text)"};function Woe(){const[e,t]=M.exports.useState(dt.score.lastScore),r=M.exports.useRef(null),[n,i]=M.exports.useState(Xoe);return M.exports.useEffect(()=>{let o=0;const s=Noe(a=>{t(a),clearTimeout(o),o=setTimeout(()=>{t({...a,type:""})},800)});return()=>{s(),clearTimeout(o)}},[]),M.exports.useEffect(()=>{const o=r.current;if(!o)return;const s=Math.floor(Math.random()*25-12.5);o.animate([n,{transform:`rotate(${s}deg) scale(1.3)`,color:Ca[e.type]},{transform:"rotate(0) scale(1)",color:Ca[e.type]}],{duration:150,easing:"ease-out"}),i({transform:`rotate(${s}deg)`,color:Ca[e.type]})},[e]),k(De,{children:[m("div",{ref:r,style:n,className:"vsrg-floating-score",children:e.type}),m("div",{className:"vsrg-floating-combo",children:e.combo>0&&`${e.combo}x`})]})}const Yoe=M.exports.memo(Woe,(e,t)=>!1);class Koe extends M.exports.Component{constructor(t){super(t),this.lastTimestamp=0,this.onSongSelect=async(r,n)=>{const{songAudioPlayer:i,keyboardAudioPlayer:o}=this.state,s=await kt.getSongById(r.audioSongId);if(we.showPill("Loading instruments..."),s){const a=Pt.parseSong(s);if(i.basePitch=a.pitch,a instanceof En&&(this.setState({audioSong:a}),await i.syncInstruments(a.instruments)),a instanceof Yr){const l=a.toRecordedSong(0);this.setState({audioSong:l}),await i.syncInstruments(l.instruments)}}else this.setState({audioSong:null});await o.syncInstruments(r.tracks.map(a=>a.instrument)),we.hidePill(),this.setState({song:r,isPlaying:!0},()=>{n==="play"&&(dt.setLayout(Ls.getVsrgKeybinds(r.keys)),dt.playSong(r))})},this.handleSettingChange=r=>{const{settings:n}=this.state,{data:i}=r;n[r.key]={...n[r.key],value:i.value},this.setState({settings:{...n}},()=>{this.updateSettings(),r.key==="maxFps"&&dt.emitEvent("fpsChange")})},this.updateSettings=r=>{eo.updateVsrgPlayerSettings(r!==void 0?r:this.state.settings)},this.onSizeChange=r=>{this.setState({canvasSizes:r})},this.onStopSong=()=>{this.setState({isPlaying:!1,song:null},()=>{dt.stopSong()})},this.onRetrySong=()=>{const{song:r}=this.state;!r||this.onSongSelect(r,"play")},this.handleTick=r=>{const{audioSong:n,songAudioPlayer:i,song:o,settings:s}=this.state;this.lastTimestamp=r,o&&(this.lastTimestamp>=o.duration+2e3&&(this.setState({isPlaying:!1}),dt.showScore()),!(this.lastTimestamp>=o.duration||r<0)&&n&&n.tickPlayback(r+s.offset.value).forEach(l=>{l.layer.toArray().forEach((c,f)=>{c===0||o.trackModifiers[f].muted||i.playNoteOfInstrument(f,l.index)})}))},this.playHitObject=(r,n)=>{const{keyboardAudioPlayer:i}=this.state;i&&r.notes.forEach(o=>{i.playNoteOfInstrument(n,o)})},this.state={song:null,audioSong:null,settings:eo.getVsrgPlayerSettings(),canvasSizes:F7,songAudioPlayer:new sp("C"),keyboardAudioPlayer:new sp("C"),currentLayout:Ls.getVsrgKeybinds(4),isPlaying:!1}}componentDidMount(){dt.setLayout(this.state.currentLayout)}componentWillUnmount(){const{songAudioPlayer:t,keyboardAudioPlayer:r}=this.state;t.destroy(),r.destroy(),dt.resetScore(),we.hidePill()}render(){const{canvasSizes:t,settings:r}=this.state;return k(De,{children:[m(In,{text:"Vsrg Player"}),k("div",{className:"vsrg-player-page",children:[m(woe,{settings:r,onSettingsUpdate:this.handleSettingChange,onSongSelect:this.onSongSelect}),k("div",{className:"vsrg-player-grid",children:[m(joe,{keyboardLayout:r.keyboardLayout.value,onTick:this.handleTick,maxFps:r.maxFps.value,scrollSpeed:r.approachTime.value,onSizeChange:this.onSizeChange,playHitObject:this.playHitObject,isPlaying:this.state.isPlaying}),m(Ooe,{keyboardLayout:r.keyboardLayout.value,offset:t.verticalOffset,hitObjectSize:t.hitObjectSize,verticalOffset:r.verticalOffset.value,horizontalOffset:r.horizontalOffset.value})]}),m(Voe,{song:this.state.song,onStopSong:this.onStopSong,onRetrySong:this.onRetrySong}),m(Yoe,{})]})]})}}const qoe=bh(Koe);function Zoe({data:e,onChange:t,onVisibilityChange:r,theme:n,style:i}){const o=n.layer("menu_background",.2).desaturate(.5);return m(De,{children:k("div",{className:"row-centered space-between track-modifier",style:{backgroundColor:o.hex(),...i},children:[m("span",{className:"text-ellipsis",children:e.alias}),k("div",{className:"row-centered",style:{justifyContent:"flex-end"},children:[m(Be,{className:"flex-centered vsrg-track-modifier-button",onClick:()=>r(!e.hidden),children:e.hidden?m(Ob,{}):m(sA,{})}),m(Be,{className:"flex-centered vsrg-track-modifier-button",style:{marginLeft:"0.3rem"},onClick:()=>t(e.set({muted:!e.muted})),children:e.muted?m(oy,{}):m(mA,{})})]})]})})}const Joe=""+new URL("help-vsrg-composer.2989e7d1.png",import.meta.url).href;function Qoe(){const e=Ls.getVsrgKeybinds(6);return m(De,{children:k("div",{className:"column",children:[k("div",{className:"column",style:{padding:"0.4rem"},children:[m("h2",{style:{margin:0},children:"Vsrg Composer info"}),m("p",{style:{marginLeft:"0.4rem"},children:"This is a composer to create beatmaps for the songs you have in the app. Here are explained how the composer works and how to use it."}),m("h2",{style:{margin:0},children:"How to use"}),k("p",{style:{marginLeft:"0.4rem"},children:['You start off by selecting the song you want to create a beatmap for, you can find it in the Settings as "background song", you can mute and hide the layers of the song, the shown layers will have the notes appear in the timeline above the composer.',m("br",{}),m("br",{}),"Then you can select the bpm of the beatmap, usually it should be the same of the song or /2 or /4 of it. You can then select the different snap points, it's where the notes will be placed when you click on the editor. Then you can add notes to the editor by clicking them or using the keyboard. Once finished you can test the song in the vsrg player"]})]}),m("img",{src:Joe,className:"help-img",alt:"tutorial for the vsrg composer page",loading:"lazy"}),k("ol",{children:[m("li",{children:"Selected hit object"}),m("li",{children:"Held hit object"}),m("li",{children:"Background song notes"}),m("li",{children:"Instruments"}),m("li",{children:"Selected hit object's notes"}),m("li",{children:"Hit object type"}),m("li",{children:"Horizontal scaling"}),m("li",{children:"Slow down / Speed up the playback"}),m("li",{children:"BPM Snap points"}),m("li",{children:"Current timestamp in the timeline"}),m("li",{children:"Add/Remove breakpoint"})]}),m("div",{style:{marginBottom:"0.5rem"},children:"The main page has shortcuts for PC users:"}),m("table",{className:"keys-table",children:k("tbody",{children:[k("tr",{children:[m("td",{children:m(yr,{children:"Space"})}),m("td",{children:" toggle playback "})]}),k("tr",{children:[m("td",{children:m(yr,{children:"Arrow Left/Right"})}),m("td",{children:"Move to Previous/Next breakpoint"})]}),k("tr",{children:[m("td",{children:m(yr,{children:"Arrow Up/Down"})}),m("td",{children:"Select instrument"})]}),k("tr",{children:[m("td",{children:m(yr,{children:e.join("/")})}),m("td",{children:"Add hit object (syncs to the registered keybinds)"})]}),k("tr",{children:[m("td",{children:m(yr,{children:"1/2/3"})}),m("td",{children:"Select tap/hold/delete"})]}),k("tr",{children:[m("td",{children:m(yr,{children:"Shift + W/A/S/D"})}),m("td",{children:"Move the selected hit object up / left / down / right, inverts if the editor is horizontal"})]}),k("tr",{children:[m("td",{children:m(yr,{children:"Esc"})}),m("td",{children:" Deselect current hitObject "})]})]})})]})})}const ese=Tn.exports();function tse({onSave:e,onSongOpen:t,settings:r,handleSettingChange:n,hasChanges:i,onCreateSong:o,setAudioSong:s,audioSong:a,trackModifiers:l,onTrackModifierChange:u}){const[c,f]=M.exports.useState(!1),[p,v]=M.exports.useState(!1),[g,b]=M.exports.useState("Settings"),[_]=Up(),[w]=Ou(),[x]=fn(),T=ra(P=>{f(!1),ese&&v(!1)},{active:c&&p,ignoreFocusable:!0}),I=M.exports.useCallback(P=>{typeof P!="boolean"&&(P=void 0),v(N=>P!==void 0?P:!N)},[]),R=M.exports.useCallback(P=>{if(P===g&&c)return f(!1);f(!0),P&&(b(P),Sn.UIEvent("menu",{tab:P}))},[c,g]);return k(De,{children:[m("div",{className:"hamburger vsrg-hamburger",onClick:()=>v(!p),children:m(St,{children:m(ry,{})})}),k("div",{className:"menu-wrapper",ref:T,children:[k("div",{className:p?"menu menu-visible":"menu",children:[m(Ct,{onClick:()=>I(!1),className:"close-menu",ariaLabel:"Close menu",children:m(Zi,{className:"icon"})}),m(Ct,{onClick:e,className:`margin-top-auto ${i?"not-saved":""}`,ariaLabel:"Save",children:m(St,{children:m(cA,{className:"icon"})})}),m(Ct,{onClick:()=>R("Help"),isActive:c&&g==="Help",ariaLabel:"Help",children:m(St,{children:m(aA,{className:"icon"})})}),m(Ct,{onClick:()=>R("Songs"),isActive:c&&g==="Songs",ariaLabel:"Song menu",children:m(St,{children:m(vp,{className:"icon"})})}),m(Ct,{onClick:()=>R("Settings"),isActive:c&&g==="Settings",ariaLabel:"Settings menu",children:m(St,{children:m(Tu,{className:"icon"})})}),m(Ct,{onClick:()=>an.open(),ariaLabel:"Open home menu",children:m(St,{children:m(Su,{className:"icon"})})})]}),k("div",{className:c&&p?"side-menu menu-open":"side-menu",children:[m(ni,{current:g,id:"Help",children:m(Qoe,{})}),k(ni,{current:g,id:"Songs",children:[m("div",{className:"row",children:m(Be,{onClick:o,children:"Create song"})}),m(du,{songs:w,exclude:["composed","recorded"],style:{marginTop:"0.6rem"},SongComponent:ise,componentProps:{theme:x,folders:_,functions:{onClick:t,toggleMenu:I}}})]}),k(ni,{current:g,id:"Settings",children:[m(Fp,{settings:r,onUpdate:n}),k("div",{className:"column vsrg-select-song-wrapper",children:[k("h1",{className:"settings-group-title row-centered",children:["Background Song",m(ku,{buttonStyle:{width:"1.2rem",height:"1.2rem",marginLeft:"0.5rem"},children:"You can select one of your songs to be played on the background"})]}),a===null?m("span",{children:"No background song selected"}):k("div",{className:"column vsrg-composer-selected-song",children:[k("div",{className:"row",style:{borderBottom:"2px solid var(--secondary)",paddingBottom:"0.4rem",marginBottom:"0.4rem"},children:[m("span",{className:"song-name",style:{cursor:"default"},children:a.name}),m(yg,{onClick:()=>s(null),ariaLabel:"Remove background song",tooltip:"Remove background song",style:{backgroundColor:"var(--red-bg)",margin:0},children:m(Zi,{})})]}),k("div",{className:"row-centered space-between",children:[m("span",{children:"Pitch"}),m("span",{children:a.pitch})]}),k("div",{className:"row-centered space-between",children:[m("span",{children:"BPM"}),m("span",{children:a.bpm})]}),m("span",{style:{marginTop:"0.4rem"},children:"Instrument modifiers"}),l.map((P,N)=>m(Zoe,{theme:x,data:P,onChange:A=>u(A,N,!1),onVisibilityChange:A=>{u(P.set({hidden:A}),N,!0)}},N))]}),m(du,{songs:w,exclude:["vsrg"],style:{marginTop:"0.6rem"},SongComponent:nse,componentProps:{onClick:s}})]})]})]})]})]})}const rse=M.exports.memo(tse,(e,t)=>e.settings===t.settings&&e.hasChanges===t.hasChanges&&e.audioSong===t.audioSong&&e.trackModifiers===t.trackModifiers);function nse({data:e,onClick:t}){return m(De,{children:k("div",{className:`song-row ${Wn(!0)}`,onClick:()=>{t(e)},style:{cursor:"pointer"},children:[m("div",{className:"song-name",children:e.name}),m(Gn,{children:"Click to select as background song"})]})})}function ise({data:e,functions:t,theme:r,folders:n}){const{toggleMenu:i,onClick:o}=t,s={backgroundColor:r.layer("primary",.15).hex()},[a,l]=M.exports.useState(!1),[u,c]=M.exports.useState(e.name);return M.exports.useEffect(()=>{c(e.name)},[e.name]),e.type!=="vsrg"?m("div",{className:"row",children:"Invalid song"}):k("div",{className:"song-row",children:[k("div",{className:`song-name ${Wn(!0)}`,onClick:()=>{a||(o(Pt.parseSong(e)),i(!1))},children:[a?m("input",{className:`song-name-input ${a?"song-rename":""}`,disabled:!a,onChange:f=>c(f.target.value),style:{width:"100%",color:"var(--primary-text)"},value:u}):m("div",{style:{marginLeft:"0.3rem"},children:u}),m(Gn,{children:a?"Song name":"Play song"})]}),m("div",{className:"song-buttons-wrapper",children:k(Lp,{Icon:xh,style:s,ignoreClickOutside:a,tooltip:"More options",onClose:()=>l(!1),children:[k(hr,{onClick:()=>{a&&(kt.renameSong(e.id,u),l(!1)),l(!a)},children:[m(gp,{style:{marginRight:"0.4rem"},size:14}),m(Fr,{text:a?"Save":"Rename"})]}),k(hr,{style:{padding:"0 0.4rem"},children:[m(ny,{style:{marginRight:"0.4rem"}}),k("select",{className:"dropdown-select",value:e.folderId||"_None",onChange:f=>{const p=f.target.value;kt.addSongToFolder(e,p!=="_None"?p:null)},children:[m("option",{value:"_None",children:"None"}),n.map(f=>m("option",{value:f.id,children:f.name},f.id))]})]}),k(hr,{onClick:()=>{xr.downloadSong(e,e.name)},children:[m(es,{style:{marginRight:"0.4rem"},size:14}),m(Fr,{text:"Download"})]}),k(hr,{onClick:async()=>{!await Mr("Are you sure you want to delete this song?")||kt.removeSong(e.id)},children:[m(Ji,{color:"#ed4557",style:{marginRight:"0.4rem"},size:14}),m(Fr,{text:"Delete"})]})]})})]})}function ose({options:e,selected:t,onChange:r}){const n=M.exports.useRef(null),i=e.find(a=>a.value===t),[o,s]=M.exports.useState({width:0,left:0});return M.exports.useEffect(()=>{var f;const a=(f=n.current)==null?void 0:f.querySelectorAll("button"),l=e.findIndex(p=>p.value===t);if(!a||l<0)return;const u=a[l].getBoundingClientRect(),c=n.current.getBoundingClientRect();s({width:u.width,left:u.left-c.left})},[n,e,t]),k("div",{className:"multiple-option-slider",ref:n,children:[e.map(a=>m("button",{onClick:()=>r(a.value),className:a===i?"multiple-options-selected":"",children:Sy(a.value)},a.value)),m("div",{className:"multiple-option-slider-overlay",style:{width:`${o.width}px`,left:`${o.left}px`,backgroundColor:i==null?void 0:i.color}})]})}const sse=[{value:"tap",color:"var(--accent)"},{value:"hold",color:"#8569a9"},{value:"delete",color:"var(--red)"}],ase=[1,2,4,8,16];function lse({onSnapPointChange:e,onHitObjectTypeChange:t,selectedSnapPoint:r,isPlaying:n,togglePlay:i,selectedHitObjectType:o,vsrg:s,onScalingChange:a,scaling:l,tempoChanger:u,onTempoChangerChange:c}){return m(De,{children:k("div",{className:"vsrg-bottom",children:[m(ose,{options:sse,selected:o,onChange:f=>{t(f)}}),m("div",{className:"vsrg-name text-ellipsis",children:s.name}),m("div",{className:"flex-centered",style:{flex:"1",padding:"0 1rem"},children:m("input",{type:"range",min:10,style:{width:"100%"},max:120,value:l,onPointerUp:f=>{var p;(p=f.target)==null||p.blur()},onChange:f=>a(parseInt(f.target.value))})}),k("div",{className:"flex-centered",style:{height:"100%"},children:[m(dw,{value:u,onChange:f=>c(Number(f.target.value)),style:{width:"5rem",height:"100%",borderRadius:"0.4rem",marginRight:"0.6rem"},children:pM.map(f=>k("option",{value:f,children:[f*100,"%"]},f))}),m(dw,{value:r,onChange:f=>{const p=parseInt(f.target.value);e(p)},style:{width:"6rem",height:"100%",borderRadius:"0.4rem"},children:ase.map(f=>k("option",{value:f,children:["Snap: 1/",f]},f))}),m(Be,{className:"vsrg-play-button flex-centered",onClick:i,children:n?m(lA,{size:20}):m(uA,{size:20})})]})]})})}function use({elements:e,perRow:t,onClick:r,selected:n}){return m(De,{children:m("div",{className:"vsrg-keyboard",style:{gridTemplateColumns:`repeat(${t}, 1fr)`,gridTemplateRows:`repeat(${Math.ceil(e.length/t)}, 1fr)`,opacity:n?1:.5,pointerEvents:n?"all":"none",cursor:n?"pointer":"not-allowed"},children:e.map(i=>m("button",{onClick:()=>r(i),style:n!=null&&n.includes(i)?{backgroundColor:"var(--accent)"}:{}},i))})})}function cse({onChange:e,value:t,absolute:r=!0,style:n}){const[i,o]=M.exports.useState(Lt(t));M.exports.useEffect(()=>{o(Lt(t))},[t]);function s(l){o(Lt(l))}function a(){e==null||e(i.toString())}return m(De,{children:k("div",{className:"color-picker",style:{position:r?"absolute":"unset",...n},children:[m(k7,{onChange:s,color:i.hex()}),k("div",{className:"color-picker-row",children:[k("div",{className:"color-picker-input",style:{backgroundColor:i.toString(),color:i.isDark()?ut.text.light:ut.text.dark},children:[m("div",{style:{fontFamily:"Arial"},children:"#"}),m(O7,{onChange:s,color:i.hex(),style:{color:i.isDark()?ut.text.light:ut.text.dark}})]}),m("button",{className:"color-picker-check",onClick:()=>{o(Lt(t)),e==null||e(t)},style:{backgroundColor:i.toString(),color:i.isDark()?ut.text.light:ut.text.dark},children:m(Zi,{size:16})}),m("button",{className:"color-picker-check",onClick:a,style:{backgroundColor:i.toString(),color:i.isDark()?ut.text.light:ut.text.dark},children:m(nA,{size:16})})]})]})})}class hse{constructor(){this.listeners=new Map}addEventListener(t,r){this.listeners.has(t)||this.listeners.set(t,[]),this.listeners.get(t).push(r)}removeEventListener(t,r){const n=this.listeners.get(t);if(!n)return;const i=n.findIndex(o=>o.id===r.id||o.callback===r.callback);i!==-1&&n.splice(i,1)}emitEvent(t,r){var i,o;[...(i=this.listeners.get(t))!=null?i:[],...(o=this.listeners.get("ALL"))!=null?o:[]].forEach(s=>s.callback(t,r))}}const yi=new hse;function fse({track:e,onSave:t,onDelete:r,onChange:n}){const[i,o]=M.exports.useState(!1);return e?k(De,{children:[k("div",{className:"vsrg-floating-settings box-shadow",children:[k("div",{className:"row-centered space-between",children:["Track name",m("input",{type:"text",maxLength:50,className:"input",style:{width:"7.4rem"},value:e.instrument.alias,onChange:s=>{e.instrument.set({alias:s.target.value}),n(e)},placeholder:e.instrument.name})]}),k("div",{className:"row-centered space-between",style:{marginTop:"0.4rem"},children:["Instrument",m(C7,{style:{width:"8rem"},selected:e.instrument.name,onChange:s=>{e.instrument.set({name:s}),n(e)}})]}),k("div",{className:"row-centered space-between",style:{marginTop:"0.4rem"},children:["Pitch",m(N4,{style:{width:"8rem"},selected:e.instrument.pitch,onChange:s=>{e.instrument.set({pitch:s}),n(e)},children:m("option",{value:"",children:"Use song pitch"})})]}),k("div",{className:"row-centered",style:{marginTop:"1rem",alignItems:"center"},children:["Volume",k("span",{style:{marginLeft:"0.4rem",width:"3rem",...e.instrument.volume>100&&{color:`hsl(0, ${-40+e.instrument.volume}%, 61%)`,marginLeft:"0.4rem"}},children:[e.instrument.volume,"%"]}),m(ku,{buttonStyle:{width:"1.2rem",height:"1.2rem"},width:10,children:"If you hear distortion, reduce the volume"})]}),m("div",{className:"row-centered",children:m("input",{type:"range",style:{flex:"1"},min:0,max:125,value:e.instrument.volume,onChange:s=>{e.instrument.set({volume:parseInt(s.target.value)}),n(e)}})}),m("div",{className:"column",children:k("div",{className:"row-centered space-between",children:["Color",m(Be,{onClick:()=>o(!0),ariaLabel:"Change color",style:{backgroundColor:e.color,color:Lt(e.color).isDark()?"#fff":"#000"},children:"Change"})]})}),k("div",{className:"row space-between",style:{marginTop:"0.4rem"},children:[k(Be,{className:"row-centered",style:{padding:"0.4rem",width:"fit-content"},onClick:r,children:[m(Ji,{color:"var(--red)",style:{marginRight:"0.3rem"}}),"Delete"]}),m(Be,{onClick:t,style:{padding:"0.4rem",width:"fit-content"},children:"Ok"})]})]}),i&&m(cse,{style:{right:"0.8rem",top:"0.5rem"},value:e.color,onChange:s=>{n(e.set({color:s})),o(!1),yi.emitEvent("colorChange")}})]}):null}function dse({vsrg:e,selectedTrack:t,children:r,onTrackAdd:n,onTrackChange:i,onTrackSelect:o,onTrackDelete:s,onNoteSelect:a,onBreakpointChange:l,onBreakpointSelect:u,lastCreatedHitObject:c,selectedHitObject:f}){const[p]=fn(),[v,g]=M.exports.useState([]),[b,_]=M.exports.useState(!1),w=e.tracks[t];return M.exports.useEffect(()=>{g(new Array(21).fill(0).map((x,T)=>T))},[]),k(De,{children:[r,k("div",{className:`vsrg-top-right ${c!==null?"vsrg-top-right-disabled":""}`,children:[b&&m(fse,{track:w,onSave:()=>_(!1),onDelete:()=>s(t),onChange:x=>i(x,t)}),k("div",{className:"row-centered vsrg-breakpoints-buttons",style:{marginBottom:"0.4rem"},children:[m(Be,{style:{marginLeft:0},onClick:()=>u(-1),children:m(St,{children:m(hA,{})})}),m(Be,{onClick:()=>l(!0),children:m(St,{children:m(iy,{})})}),m(Be,{onClick:()=>l(!1),children:m(St,{children:m(au,{})})}),m(Be,{onClick:()=>u(1),children:m(St,{children:m(fA,{})})})]}),k("div",{className:"vsrg-track-wrapper column",children:[e.tracks.map((x,T)=>m(pse,{track:x,selected:T===t,theme:p,onSettingsClick:()=>_(!b),onTrackClick:()=>o(T)},T)),m("div",{style:{width:"100%",height:"1.4rem"}}),m(Be,{onClick:x=>{setTimeout(()=>{var T;n(),(T=x.target)==null||T.scrollIntoView()},50)},ariaLabel:"Add new instrument",className:"flex-centered",style:{marginTop:"auto",padding:"0.3rem"},children:m(au,{size:16,color:"var(--icon-color)"})})]}),m(use,{elements:v,selected:f==null?void 0:f.notes,perRow:7,onClick:a})]})]})}function pse({track:e,selected:t,theme:r,onSettingsClick:n,onTrackClick:i}){const[o,s]=M.exports.useState({background:"var(--primary)",text:"var(--primary-text)"}),[a,l]=M.exports.useState({background:"var(--primary)",text:"var(--primary-text)"});return M.exports.useEffect(()=>{const c=r.get("primary").mix(new Lt(e.color),.3);s({background:c.toString(),text:c.isDark()?"var(--text-light)":"var(--text-dark)"});const f=new Lt(e.color);l({background:f.toString(),text:f.isDark()?"rgb(220 219 216)":"rgb(55 55 55)"})},[r,e.color]),m(De,{children:k("div",{className:"vsrg-track row-centered",style:{backgroundColor:t?o.background:"var(--primary)",color:t?o.text:"var(--primary-text)"},onClick:i,children:[m("span",{className:"text-ellipsis",style:{color:t?o.text:"var(--text-color)",paddingLeft:"0.6rem",paddingRight:"0.2rem",flex:1},children:e.instrument.alias||e.instrument.name}),m(Be,{onClick:()=>t&&n(),style:{backgroundColor:a.background},className:"vsrg-track-left flex-centered",children:t&&m(Tu,{color:a.text})})]})})}Ia.LINE_SCALE_MODE=ai.NORMAL;class mse{constructor({app:t,colors:r,sizes:n,trackColors:i,isHorizontal:o}){this.destroy=()=>{var s,a,l,u;(s=this.textures.snapPoints.small)==null||s.destroy(),(a=this.textures.snapPoints.large)==null||a.destroy(),(l=this.textures.snapPoints.empty)==null||l.destroy(),Object.values(this.textures.hitObjects).forEach(c=>c==null?void 0:c.destroy()),Object.values(this.textures.heldHitObjects).forEach(c=>c==null?void 0:c.destroy()),Object.values(this.textures.trails).forEach(c=>c==null?void 0:c.destroy()),Object.values(this.textures.selectionRings).forEach(c=>c==null?void 0:c.destroy()),Object.values(this.textures.timeline).forEach(c=>c==null?void 0:c.destroy()),(u=this.textures.buttons.time)==null||u.destroy(),this.app=null},this.textures={hitObjects:{},heldHitObjects:{},selectionRings:{},trails:{},buttons:{width:0,height:0,time:null},snapPoints:{size:0,small:null,large:null,empty:null},timeline:{breakpoint:null,currentTime:null,note:null,square:null,thumb:null},sizes:{hitObject:0,trail:0}},this.trackColors=i,this.colors=r,this.isHorizontal=o,this.sizes=n,this.app=t,this.generate()}generate(){const{app:t}=this;!t||(this.generateSnapPoints(t),this.generateTrackCache(t),this.generateTrails(t),this.generateSelectionRings(t),this.generateOthers(t))}getHitObjectCache(t){return this.textures.hitObjects[t]||this.textures.hitObjects["#FF0000"]}getHeldTrailCache(t){return this.textures.trails[t]||this.textures.trails["#FF0000"]}getHeldHitObjectCache(t){return this.textures.heldHitObjects[t]||this.textures.heldHitObjects["#FF0000"]}getSelectionRingsCache(t){return this.textures.selectionRings[t]||this.textures.selectionRings["#FF0000"]}generateOthers(t){const{sizes:r,colors:n,isHorizontal:i}=this,o=new ar;o.beginFill(this.colors.background_plain[1]).drawRect(0,0,this.sizes.width,this.sizes.timelineSize).lineStyle(3,this.colors.secondary[1],1).moveTo(0,r.timelineSize).lineTo(this.sizes.width,r.timelineSize);const s=t.renderer.generateTexture(o,{resolution:1,scaleMode:Tt.LINEAR,region:new Fe(0,0,this.sizes.width,this.sizes.timelineSize)});this.textures.timeline.square=s;const a=i?r.height/16:r.width/16,l=ii(r.timelineSize/4,8,100),u=new ar;u.beginFill(n.accent[1]).moveTo(0,0).lineTo(l,0).lineTo(l/2,l).lineTo(0,0).moveTo(0,0).lineTo(l,0).lineTo(l/2,-l).lineTo(0,0).endFill().lineStyle(3,n.accent[1],1).moveTo(l/2,0).lineTo(l/2,r.timelineSize).lineStyle(0).beginFill(n.accent[1]).moveTo(0,r.timelineSize).lineTo(l,r.timelineSize).lineTo(l/2,r.timelineSize).lineTo(0,r.timelineSize).moveTo(0,r.timelineSize).lineTo(l,r.timelineSize).lineTo(l/2,r.timelineSize-l).lineTo(0,r.timelineSize);const c=r.timelineSize/2,f=new ar;f.lineStyle(Tn.exports()?2:3,n.secondary[1],1).drawCircle(r.timelineSize/2+1,r.timelineSize/2,c/2);const p=t.renderer.generateTexture(f,{resolution:1,scaleMode:Tt.LINEAR,region:new Fe(0,0,r.timelineSize,r.timelineSize)});this.textures.timeline.note=p;const v=new ar;v.lineStyle(12,n.accent[1],1).moveTo(0,0).lineTo(0,r.timelineSize);const g=t.renderer.generateTexture(v,{resolution:1,scaleMode:Tt.LINEAR,region:new Fe(0,0,12,r.timelineSize)});this.textures.timeline.currentTime=g;const b=t.renderer.generateTexture(u,{resolution:2,scaleMode:Tt.LINEAR,region:new Fe(0,0,l,r.timelineSize)});this.textures.timeline.thumb=b;const _=new ar;_.beginFill(n.accent[1]).moveTo(0,0).lineTo(l,0).lineTo(l/2,l).lineTo(0,0).moveTo(0,0).lineTo(l,0).lineTo(l/2,-l).lineTo(0,0);const w=t.renderer.generateTexture(_,{resolution:1,scaleMode:Tt.LINEAR,region:new Fe(0,0,l,l)});this.textures.timeline.breakpoint=w;const x=new ar;if(x.beginFill(n.background_10[1]),i){x.drawRoundedRect(a/2,a/2,r.width/2-a,r.height/2-a,16);const T=t.renderer.generateTexture(x,{resolution:1,scaleMode:Tt.LINEAR,region:new Fe(0,0,r.width/2,r.height/2)});this.textures.buttons.width=r.width/2,this.textures.buttons.height=r.height/2,this.textures.buttons.time=T}else{x.drawRoundedRect(a/2,a/2,r.width/2-a,r.height/3-a,8);const T=t.renderer.generateTexture(x,{resolution:1,scaleMode:Tt.LINEAR,region:new Fe(0,0,r.width/2,r.height/3)});this.textures.buttons.width=r.width/2,this.textures.buttons.height=r.height/3,this.textures.buttons.time=T}}generateTrails(t){const{sizes:r,trackColors:n}=this,i=[...n,"#FF0000"],o=ii(r.keyHeight/2*r.scaling,r.keyHeight/(Tn.exports()?3:4),100),s=o/2;i.forEach(a=>{const l=new ar;this.isHorizontal?l.beginFill(Lt(a).rgbNumber()).drawRect(0,s/2,o,o-s):l.beginFill(Lt(a).rgbNumber()).drawRect(s/2,0,o-s,o);const u=t.renderer.generateTexture(l,{resolution:1,scaleMode:Tt.LINEAR,region:new Fe(0,0,o,o)});this.textures.trails[a]=u,l.destroy(!0)}),this.textures.sizes.trail=o}generateSelectionRings(t){const{sizes:r,trackColors:n}=this,i=[...n,"#FF0000"],o=ii(r.keyHeight/1.5*r.scaling,r.keyHeight/(Tn.exports()?1.2:2),150);i.forEach(s=>{const a=new ar;a.lineStyle(3,Lt(s).rgbNumber()).drawCircle(o/2,o/2,o/2-3);const l=t.renderer.generateTexture(a,{resolution:1,scaleMode:Tt.LINEAR,region:new Fe(0,0,o,o)});this.textures.selectionRings[s]=l,a.destroy(!0)})}generateTrackCache(t){const{colors:r,sizes:n,trackColors:i}=this,o=ii(n.keyHeight/1.8*n.scaling,n.keyHeight/(Tn.exports()?2:3.5),100);[...i,"#FF0000"].forEach(a=>{const l=new ar,u=o/2;l.lineStyle(5,Lt(a).rgbNumber()).beginFill(r.background_10[1]).drawCircle(u,u,u-5);const c=t.renderer.generateTexture(l,{resolution:2,scaleMode:Tt.LINEAR,region:new Fe(0,0,o,o)});this.textures.hitObjects[a]=c,l.destroy(!0);const f=new ar,p=o*.7,v=(o-p)/2;f.width=p,f.height=p,f.lineStyle(5,Lt(a).rgbNumber()).beginFill(r.background_10[1]).drawRoundedRect(v,v,p,p,6);const g=t.renderer.generateTexture(f,{resolution:2,scaleMode:Tt.LINEAR,region:new Fe(0,0,o,o)});this.textures.heldHitObjects[a]=g,f.destroy(!0)}),this.textures.sizes.hitObject=o}generateSnapPoints(t){const{colors:r,sizes:n,isHorizontal:i}=this,o=new ar,s=new ar,a=new ar;if(i){o.lineStyle(2,r.lineColor[1]).moveTo(0,0).lineTo(0,n.height);const l=t.renderer.generateTexture(o,{resolution:1,scaleMode:Tt.LINEAR,region:new Fe(0,0,n.snapPointWidth,n.height)});s.lineStyle(4,r.secondary[1]).moveTo(0,0).lineTo(0,n.height);const u=t.renderer.generateTexture(s,{resolution:1,scaleMode:Tt.LINEAR,region:new Fe(0,0,n.snapPointWidth,n.height)}),c=10,f=n.height/c;a.lineStyle(2,r.secondary[1]);for(let v=0;v<c+2;v++){const b=f*v-f;a.moveTo(Xr,b),a.lineTo(0,b+f)}const p=t.renderer.generateTexture(a,{resolution:1,scaleMode:Tt.LINEAR,region:new Fe(0,0,Xr,n.height)});this.textures.snapPoints.size=n.snapPointWidth,this.textures.snapPoints.small=l,this.textures.snapPoints.large=u,this.textures.snapPoints.empty=p}else{o.lineStyle(2,r.lineColor[1]).moveTo(0,n.snapPointWidth).lineTo(n.width,n.snapPointWidth);const l=t.renderer.generateTexture(o,{resolution:1,scaleMode:Tt.LINEAR,region:new Fe(0,0,n.width,n.snapPointWidth)});s.lineStyle(4,r.secondary[1]).moveTo(0,n.snapPointWidth).lineTo(n.width,n.snapPointWidth);const u=t.renderer.generateTexture(s,{resolution:1,scaleMode:Tt.LINEAR,region:new Fe(0,0,n.width,n.snapPointWidth)}),c=20,f=n.width/c;a.lineStyle(2,r.secondary[1]);for(let v=0;v<c+2;v++){const b=f*v-f;a.moveTo(b,Xr),a.lineTo(b+f,0)}const p=t.renderer.generateTexture(a,{resolution:1,scaleMode:Tt.LINEAR,region:new Fe(0,0,n.width,Xr)});this.textures.snapPoints.size=n.snapPointWidth,this.textures.snapPoints.large=u,this.textures.snapPoints.empty=p,this.textures.snapPoints.small=l}o.destroy(!0),s.destroy(!0),a.destroy(!0)}}var M7={exports:{}};(function(e){(function(){function t(_,w){document.addEventListener?_.addEventListener("scroll",w,!1):_.attachEvent("scroll",w)}function r(_){document.body?_():document.addEventListener?document.addEventListener("DOMContentLoaded",function w(){document.removeEventListener("DOMContentLoaded",w),_()}):document.attachEvent("onreadystatechange",function w(){(document.readyState=="interactive"||document.readyState=="complete")&&(document.detachEvent("onreadystatechange",w),_())})}function n(_){this.a=document.createElement("div"),this.a.setAttribute("aria-hidden","true"),this.a.appendChild(document.createTextNode(_)),this.b=document.createElement("span"),this.c=document.createElement("span"),this.h=document.createElement("span"),this.f=document.createElement("span"),this.g=-1,this.b.style.cssText="max-width:none;display:inline-block;position:absolute;height:100%;width:100%;overflow:scroll;font-size:16px;",this.c.style.cssText="max-width:none;display:inline-block;position:absolute;height:100%;width:100%;overflow:scroll;font-size:16px;",this.f.style.cssText="max-width:none;display:inline-block;position:absolute;height:100%;width:100%;overflow:scroll;font-size:16px;",this.h.style.cssText="display:inline-block;width:200%;height:200%;font-size:16px;max-width:none;",this.b.appendChild(this.h),this.c.appendChild(this.f),this.a.appendChild(this.b),this.a.appendChild(this.c)}function i(_,w){_.a.style.cssText="max-width:none;min-width:20px;min-height:20px;display:inline-block;overflow:hidden;position:absolute;width:auto;margin:0;padding:0;top:-999px;white-space:nowrap;font-synthesis:none;font:"+w+";"}function o(_){var w=_.a.offsetWidth,x=w+100;return _.f.style.width=x+"px",_.c.scrollLeft=x,_.b.scrollLeft=_.b.scrollWidth+100,_.g!==w?(_.g=w,!0):!1}function s(_,w){function x(){var I=T;o(I)&&I.a.parentNode&&w(I.g)}var T=_;t(_.b,x),t(_.c,x),o(_)}function a(_,w){var x=w||{};this.family=_,this.style=x.style||"normal",this.weight=x.weight||"normal",this.stretch=x.stretch||"normal"}var l=null,u=null,c=null,f=null;function p(){if(u===null)if(v()&&/Apple/.test(window.navigator.vendor)){var _=/AppleWebKit\/([0-9]+)(?:\.([0-9]+))(?:\.([0-9]+))/.exec(window.navigator.userAgent);u=!!_&&603>parseInt(_[1],10)}else u=!1;return u}function v(){return f===null&&(f=!!document.fonts),f}function g(){if(c===null){var _=document.createElement("div");try{_.style.font="condensed 100px sans-serif"}catch{}c=_.style.font!==""}return c}function b(_,w){return[_.style,_.weight,g()?_.stretch:"","100px",w].join(" ")}a.prototype.load=function(_,w){var x=this,T=_||"BESbswy",I=0,R=w||3e3,E=new Date().getTime();return new Promise(function(O,P){if(v()&&!p()){var N=new Promise(function(j,X){function B(){new Date().getTime()-E>=R?X(Error(""+R+"ms timeout exceeded")):document.fonts.load(b(x,'"'+x.family+'"'),T).then(function(ae){1<=ae.length?j():setTimeout(B,25)},X)}B()}),A=new Promise(function(j,X){I=setTimeout(function(){X(Error(""+R+"ms timeout exceeded"))},R)});Promise.race([A,N]).then(function(){clearTimeout(I),O(x)},P)}else r(function(){function j(){var te;(te=K!=-1&&me!=-1||K!=-1&&ue!=-1||me!=-1&&ue!=-1)&&((te=K!=me&&K!=ue&&me!=ue)||(l===null&&(te=/AppleWebKit\/([0-9]+)(?:\.([0-9]+))/.exec(window.navigator.userAgent),l=!!te&&(536>parseInt(te[1],10)||parseInt(te[1],10)===536&&11>=parseInt(te[2],10))),te=l&&(K==ie&&me==ie&&ue==ie||K==Q&&me==Q&&ue==Q||K==ee&&me==ee&&ue==ee)),te=!te),te&&(W.parentNode&&W.parentNode.removeChild(W),clearTimeout(I),O(x))}function X(){if(new Date().getTime()-E>=R)W.parentNode&&W.parentNode.removeChild(W),P(Error(""+R+"ms timeout exceeded"));else{var te=document.hidden;(te===!0||te===void 0)&&(K=B.a.offsetWidth,me=ae.a.offsetWidth,ue=Y.a.offsetWidth,j()),I=setTimeout(X,50)}}var B=new n(T),ae=new n(T),Y=new n(T),K=-1,me=-1,ue=-1,ie=-1,Q=-1,ee=-1,W=document.createElement("div");W.dir="ltr",i(B,b(x,"sans-serif")),i(ae,b(x,"serif")),i(Y,b(x,"monospace")),W.appendChild(B.a),W.appendChild(ae.a),W.appendChild(Y.a),document.body.appendChild(W),ie=B.a.offsetWidth,Q=ae.a.offsetWidth,ee=Y.a.offsetWidth,X(),s(B,function(te){K=te,j()}),i(B,b(x,'"'+x.family+'",sans-serif')),s(ae,function(te){me=te,j()}),i(ae,b(x,'"'+x.family+'",serif')),s(Y,function(te){ue=te,j()}),i(Y,b(x,'"'+x.family+'",monospace'))})})},e.exports=a})()})(M7);const vse=M7.exports;function B7(e=[],{testString:t,timeout:r}={},{showErrors:n}={showErrors:!1}){const[i,o]=M.exports.useState(!1),s=JSON.stringify(e);return M.exports.useEffect(()=>{const a=JSON.parse(s).map(({family:l,weight:u,style:c,stretch:f})=>new vse(l,{weight:u,style:c,stretch:f}).load(t,r));Promise.all(a).then(()=>o(!0)).catch(()=>{n&&console.error("An error occurred during font loading")})},[s,t,r,n]),i}const D7=new Zs({fontFamily:'"Source Sans Pro", Helvetica, sans-serif',fontSize:30,fill:"#ffffff"}),gse=[{family:"Bonobo"}];function yse({keys:e,sizes:t,colors:r,isHorizontal:n,onKeyDown:i,onKeyUp:o}){const[s,a]=M.exports.useState(D7),l=B7(gse);M.exports.useEffect(()=>{a(new Zs({fontFamily:l?'"Bonobo"':'"Source Sans Pro", Helvetica, sans-serif',fontSize:l?25:30,fill:r.lineColor[1]}))},[r,t,e,l]);const u=t.height/e.length,c=t.width/e.length;return k(Je.exports.Container,{x:0,y:t.timelineSize,children:[m(Je.exports.Graphics,{draw:f=>{if(f.clear(),f.beginFill(r.background_plain[1]),n){f.drawRect(0,0,60,t.height),f.lineStyle(2,r.lineColor_10[1]);for(let p=0;p<e.length-1;p++)f.moveTo(0,u*(p+1)),f.lineTo(t.width,u*(p+1));f.lineStyle(2,r.secondary[1]),f.moveTo(59,0),f.lineTo(59,t.height)}else{f.drawRect(0,t.height-60,t.width,60),f.lineStyle(2,r.lineColor_10[1]);for(let p=0;p<e.length-1;p++)f.moveTo(c*(p+1),0),f.lineTo(c*(p+1),t.height);f.lineStyle(2,r.secondary[1]),f.moveTo(0,t.height-60),f.lineTo(t.width,t.height-60)}}}),m(Je.exports.Graphics,{draw:f=>{if(f.clear(),f.lineStyle(6,r.accent[1]),n){f.moveTo(Xr+1,0),f.lineTo(Xr+1,t.height);for(let p=0;p<e.length;p++)f.drawCircle(Xr+1,u*(p+.5),4)}else{const p=t.height-Xr-1-t.timelineSize;f.moveTo(0,p),f.lineTo(t.width,p);for(let v=0;v<e.length;v++)f.drawCircle(c*(v+.5)+1,p,4)}}}),e.map((f,p)=>{const v=new Fe(n?0:c*p,n?u*p:t.height-60,n?60:t.width,n?u:60);return m(Je.exports.Container,{hitArea:v,interactive:!0,pointerdown:()=>i(p),pointerup:()=>o(p),pointerupoutside:()=>o(p),children:m(Je.exports.Text,{x:n?30:c*p+c/2,y:n?u*p+u/2:t.height-30,anchor:.5,text:`${p+1}`,style:s})},f)})]})}const _se=M.exports.memo(yse,(e,t)=>e.keys===t.keys&&e.sizes===t.sizes&&e.colors===t.colors&&e.isHorizontal===t.isHorizontal);function bse({track:e,sizes:t,keys:r,cache:n,isHorizontal:i,selectedHitObject:o,selectHitObject:s,trackIndex:a,timestamp:l}){const u=t.scaling,c=t.height/r,f=t.width/r,p=l-Xr/u-n.textures.sizes.hitObject,v=l+(i?t.width:t.height)/u-Xr+n.textures.sizes.hitObject;return m(De,{children:e.hitObjects.map(g=>{if(p>g.timestamp+g.holdDuration||g.timestamp>v)return null;const b=i?g.timestamp*u:f*g.index+f/2,_=i?c*g.index+c/2:-(g.timestamp*u-t.height);return g.isHeld?k(Je.exports.Container,{interactive:!0,pointerdown:w=>{s(g,a,ig(w.data.button))},children:[i?m(Je.exports.Sprite,{texture:n.getHeldTrailCache(e.color),anchor:[0,.5],height:n.textures.sizes.trail,width:g.holdDuration*u,x:b,y:_}):m(Je.exports.Sprite,{texture:n.getHeldTrailCache(e.color),anchor:Jv,width:n.textures.sizes.trail,height:g.holdDuration*u,x:b,y:_}),m(Je.exports.Sprite,{texture:n.getHeldHitObjectCache(e.color),anchor:.5,x:b,angle:45,y:_}),m(Je.exports.Sprite,{texture:n.getHeldHitObjectCache(e.color),anchor:.5,x:i?(g.timestamp+g.holdDuration)*u:b,y:i?_:_-g.holdDuration*u}),g===o&&m(Je.exports.Sprite,{texture:n.getSelectionRingsCache(e.color),anchor:.5,x:b,y:_})]},g.renderId):k(M.exports.Fragment,{children:[g===o&&m(Je.exports.Sprite,{texture:n.getSelectionRingsCache(e.color),anchor:.5,x:b,y:_}),m(Je.exports.Sprite,{texture:n.getHitObjectCache(e.color),interactive:!0,pointerdown:w=>{s(g,a,ig(w.data.button))},anchor:.5,x:b,y:_})]},g.renderId)})})}const wse=[{family:"Bonobo"}];function xse({vsrg:e,sizes:t,snapPoint:r,timestamp:n,snapPoints:i,colors:o,cache:s,onSnapPointSelect:a,preventClick:l,isHorizontal:u,selectedHitObject:c,selectHitObject:f,onAddTime:p,onRemoveTime:v}){const g=t.scaling,b=n-(Xr+s.textures.snapPoints.size)/g,_=n+((u?t.width:t.height)-Xr)/g,w=s.textures.snapPoints.size,[x,T]=M.exports.useState(D7),I=B7(wse);M.exports.useEffect(()=>{T(new Zs({fontFamily:I?'"Bonobo"':'"Source Sans Pro", Helvetica, sans-serif',fontSize:I?25:30,fill:o.lineColor[1]}))},[I,o.lineColor]);function R(E){if(!l)if(u){const O=E.data.global.y-t.timelineSize,P=E.target.x/g;a(P,Math.floor(O/t.keyHeight),ig(E.data.button))}else{const O=Math.abs(Math.floor(E.target.y-t.height+w)/g),P=E.data.global.x;a(O,Math.floor(P/t.keyWidth),ig(E.data.button))}}return k(Je.exports.Container,{x:u?-n*g+Xr:0,y:u?t.timelineSize:n*g-Xr,interactive:!0,interactiveChildren:!0,children:[i.map((E,O)=>b>E||E>_?null:m(Je.exports.Sprite,{interactive:!0,pointertap:R,x:u?E*g:0,y:u?0:-(E*g-t.height+w),texture:O%r?s.textures.snapPoints.small:s.textures.snapPoints.large},E)),b<0&&m(Je.exports.Sprite,{x:u?-Xr:0,y:u?0:t.height,texture:s.textures.snapPoints.empty}),e.tracks.map((E,O)=>m(bse,{track:E,cache:s,keys:e.keys,colors:o,sizes:t,timestamp:n,trackIndex:O,selectHitObject:f,selectedHitObject:c,isHorizontal:u},O)),n>=e.duration-(u?t.width:t.height)/g&&k(De,{children:[k(Je.exports.Container,{pointertap:p,interactive:!0,x:u?e.duration*g:0,anchor:.5,y:u?0:-(e.duration*g-t.height+s.textures.buttons.height),children:[m(Je.exports.Sprite,{texture:s.textures.buttons.time}),m(Je.exports.Text,{x:s.textures.buttons.width/2,anchor:.5,y:s.textures.buttons.height/2,text:"Click to add time",style:x})]}),k(Je.exports.Container,{pointertap:v,interactive:!0,x:u?e.duration*g:t.width/2,anchor:.5,y:u?t.height/2:-(e.duration*g-t.height+s.textures.buttons.height),children:[m(Je.exports.Sprite,{texture:s.textures.buttons.time}),m(Je.exports.Text,{x:s.textures.buttons.width/2,anchor:.5,y:s.textures.buttons.height/2,text:"Click to remove time",style:x})]})]})]})}function Tse({cache:e,breakpoints:t,sizes:r,duration:n}){return m(De,{children:m(Je.exports.Container,{children:t.map(i=>m(Je.exports.Sprite,{texture:e.textures.timeline.breakpoint,x:i/n*r.width},i))})})}const Sse=M.exports.memo(Tse,(e,t)=>e.breakpoints===t.breakpoints&&e.cache===t.cache&&e.sizes===t.sizes&&e.duration===t.duration),Ese=new Fe(0,0,0,0);function Cse({sizes:e,timestamp:t,song:r,cache:n,hidden:i,notes:o,onTimelineClick:s}){const[a,l]=M.exports.useState(Ese),[u,c]=M.exports.useState(!1),f=t-(Xr+e.timelineSize)/e.scaling,p=t+(e.width-Xr+e.timelineSize)/e.scaling,v=M.exports.useCallback(()=>c(!1),[]);M.exports.useEffect(()=>{l(new Fe(0,0,e.width,e.timelineSize))},[e]),M.exports.useEffect(()=>{function w(){c(!1)}return window.addEventListener("blur",w),()=>window.removeEventListener("blur",w)},[]);const g=M.exports.useCallback((w,x)=>{if(!u&&x!==!0)return;const I=w.data.global.x/e.width*r.duration;s(ii(I,0,r.duration))},[e,r.duration,s,u]),b=M.exports.useCallback(w=>{c(!0),g(w,!0)},[g]);if(i)return null;const _=t/r.duration;return m(De,{children:k(Je.exports.Container,{x:0,y:0,interactive:!0,pointermove:g,pointerdown:b,pointerup:v,pointerupoutside:v,hitArea:a,children:[m(Je.exports.Sprite,{x:0,y:0,width:e.width,texture:n.textures.timeline.square}),m(Je.exports.Container,{x:-t*e.scaling+Xr,y:0,children:o.map((w,x)=>w.time<f||w.time>p?null:m(Je.exports.Sprite,{x:w.time*e.scaling,anchor:vM,texture:n.textures.timeline.note},x))}),m(Sse,{breakpoints:r.breakpoints,cache:n,sizes:e,duration:r.duration}),m(Je.exports.Sprite,{x:Xr-2,y:0,texture:n.textures.timeline.currentTime}),m(Je.exports.Sprite,{y:0,x:_*e.width,texture:n.textures.timeline.thumb})]})})}class Ise extends M.exports.Component{constructor(t){super(t),this.wrapperRef=M.exports.createRef(),this.stageRef=M.exports.createRef(),this.toDispose=[],this.throttledEventLoop=new L7(()=>{},48),this.cumulativeScroll=0,this.handleEvent=(r,n)=>{r==="colorChange"&&this.generateCache(),r==="updateKeys"&&this.calculateSizes(),r==="updateOrientation"&&this.calculateSizes(),r==="snapPointChange"&&this.calculateSizes(),r==="tracksChange"&&this.generateCache(),r==="songLoad"&&this.calculateSizes(),r==="scaleChange"&&this.calculateSizes(),r==="maxFpsChange"&&this.throttledEventLoop.changeMaxFps(this.props.maxFps),r==="timestampChange"&&this.setTimestamp(n)},this.handleTick=(r,n)=>{if(this.props.isPlaying){const i=this.state.timestamp+n*this.props.tempoChanger;this.setTimestamp(i)}},this.handleBlur=()=>{this.setState({isPressing:!1})},this.calculateSizes=()=>{const{wrapperRef:r}=this;if(!r.current)return console.warn("no wrapper");const n=r.current.getBoundingClientRect(),{scaling:i}=this.props,o=Tn.exports()?20:40,s=n.height-o,a={el:n,rawWidth:n.width,rawHeight:n.height,width:n.width,height:s,keyHeight:s/ld[this.props.vsrg.keys].length,keyWidth:n.width/ld[this.props.vsrg.keys].length,snapPointWidth:6e4/this.props.vsrg.bpm/this.props.snapPoint*i/100,scaling:i/100,timelineSize:o},l=r.current.querySelector("canvas");l&&(l.style.width=`${a.width}px`,l.style.height=`${a.height+o}px`),this.setState({sizes:a},this.generateCache)},this.handleWheel=r=>{if(this.props.scrollSnap){if(this.cumulativeScroll+=r.deltaY,Math.abs(this.cumulativeScroll)<100)return;const{snapPoints:o}=this.props,s=o.findIndex(u=>u>this.state.timestamp),a=(s<0?o.length:s)-1+(this.cumulativeScroll<0?-1:1);if(this.cumulativeScroll=0,a<0||a>=o.length)return;const l=o[a];return this.setTimestamp(l)}const n=Math.max(0,this.state.timestamp+r.deltaY/1.2),i=Math.min(n,this.props.vsrg.duration);this.setState({timestamp:i},()=>{const{draggedHitObject:o,timestamp:s}=this.state;this.props.onTimestampChange(this.state.timestamp),!(!o||s<=0)&&this.props.dragHitObject(o.timestamp+r.deltaY/1.2)})},this.setIsDragging=r=>{const{sizes:n}=this.state;r.clientY-n.el.top>n.timelineSize&&this.setState({isPressing:!0,previousPosition:this.props.isHorizontal?r.clientX:-r.clientY})},this.setIsNotDragging=r=>{if(!this.state.isPressing)return;const n=this.state.draggedHitObject;this.setState({isPressing:!1,totalMovement:0,draggedHitObject:null},()=>{if(n&&this.props.releaseHitObject(),setTimeout(()=>this.setState({preventClick:!1}),200),this.props.scrollSnap){const{snapPoints:i}=this.props,o=i.findIndex(u=>u>this.state.timestamp);if(!o||o<0)return;const s=i[o],a=i[o-1];if(s===void 0||a===void 0)return;const l=iG(this.state.timestamp,a,s);this.setTimestamp(l)}})},this.handleDrag=r=>{if(!this.state.isPressing)return;const{previousPosition:n,draggedHitObject:i,sizes:o,timestamp:s}=this.state,{isHorizontal:a,vsrg:l}=this.props,u=a?r.clientX:-r.clientY,c=a?r.clientY-o.el.top-o.timelineSize:r.clientX-o.el.left,f=Math.floor(c/(a?o.keyHeight:o.keyWidth)),p=(n-u)/o.scaling,v=this.state.totalMovement+Math.abs(p);if(i!==null){const _=i.timestamp-p;return this.setState({previousPosition:u},()=>this.props.dragHitObject(Math.max(0,_),f))}const g=Math.max(0,s+p),b=Math.min(g,l.duration);this.setState({previousPosition:u,preventClick:v>50,totalMovement:v,timestamp:b},()=>this.props.onTimestampChange(this.state.timestamp))},this.generateCache=()=>{const{sizes:r,canvasColors:n,cache:i}=this.state,o=this.props.vsrg.tracks.map(a=>a.color);if(!this.stageRef.current)return;const s=new mse({app:this.stageRef.current.app,sizes:r,colors:n,trackColors:o,isHorizontal:this.props.isHorizontal});this.setState({cache:s},()=>{i==null||i.destroy()})},this.selectHitObject=(r,n,i)=>{i!==2&&this.setState({draggedHitObject:r}),this.props.selectHitObject(r,n,i)},this.setTimestamp=r=>{this.setState({timestamp:r}),this.props.onTimestampChange(r)},this.handleThemeChange=r=>{const n=r.get("primary"),i=r.getText("primary"),o=i.darken(.5).desaturate(1),s=n.darken(.15),a=s.darken(.1),l=r.get("secondary"),u=r.get("accent");this.setState({canvasColors:{background_plain:[n.hex(),n.rgbNumber()],background:[s.hex(),s.rgbNumber()],background_10:[a.hex(),a.rgbNumber()],secondary:[l.hex(),l.rgbNumber()],lineColor:[i.hex(),i.rgbNumber()],lineColor_10:[o.hex(),o.rgbNumber()],accent:[u.hex(),u.rgbNumber()]}},this.generateCache)},this.state={canvasColors:{background_plain:["#000000",0],background:["#000000",0],background_10:["#000000",0],secondary:["#ffffff",16777215],lineColor:["#ffffff",16777215],lineColor_10:["#ffffff",16777215],accent:["#ffffff",16777215]},timestamp:0,sizes:{el:new DOMRect,rawWidth:0,rawHeight:0,width:0,height:0,snapPointWidth:0,keyHeight:0,keyWidth:0,timelineSize:0,scaling:0},draggedHitObject:null,isPressing:!1,totalMovement:0,previousPosition:0,preventClick:!1,cache:null},this.wrapperRef=M.exports.createRef(),this.stageRef=M.exports.createRef()}componentDidMount(){var t;this.toDispose.push(My(this.handleThemeChange)),window.addEventListener("resize",this.calculateSizes),this.toDispose.push(()=>window.removeEventListener("resize",this.calculateSizes)),yi.addEventListener("ALL",{callback:this.handleEvent,id:"vsrg-canvas-color-change"}),this.toDispose.push(()=>yi.removeEventListener("ALL",{id:"vsrg-canvas-color-change"})),this.calculateSizes(),this.throttledEventLoop.setCallback(this.handleTick),this.throttledEventLoop.changeMaxFps(this.props.maxFps),this.throttledEventLoop.start(),window.addEventListener("blur",this.handleBlur),(t=this.state.cache)==null||t.destroy(),this.toDispose.push(()=>window.removeEventListener("blur",this.handleBlur)),this.handleThemeChange(xe)}componentWillUnmount(){var t;this.toDispose.forEach(r=>r()),(t=this.state.cache)==null||t.destroy(),this.throttledEventLoop.stop()}render(){const{canvasColors:t,sizes:r,cache:n,timestamp:i,preventClick:o}=this.state,{vsrg:s,isHorizontal:a,audioSong:l,snapPoint:u,snapPoints:c,selectedHitObject:f}=this.props;return m("div",{className:"vsrg-top-canvas-wrapper",ref:this.wrapperRef,children:this.wrapperRef.current&&k(Je.exports.Stage,{onMount:this.calculateSizes,ref:this.stageRef,raf:!1,width:r.rawWidth,height:r.rawHeight,onWheel:this.handleWheel,onPointerDown:this.setIsDragging,onPointerUp:this.setIsNotDragging,onPointerLeave:this.setIsNotDragging,onPointerMove:this.handleDrag,onContextMenu:p=>p.preventDefault(),options:{backgroundColor:t.background[1],autoDensity:!1,resolution:(window==null?void 0:window.devicePixelRatio)||1},children:[n&&m(xse,{vsrg:s,cache:n,selectedHitObject:f,snapPoint:u,snapPoints:c,timestamp:i,preventClick:o,sizes:r,colors:t,isHorizontal:a,onAddTime:this.props.onAddTime,onRemoveTime:this.props.onRemoveTime,selectHitObject:this.selectHitObject,onSnapPointSelect:this.props.onSnapPointSelect}),m(_se,{isHorizontal:a,keys:ld[s.keys],sizes:r,colors:t,onKeyDown:this.props.onKeyDown,onKeyUp:this.props.onKeyUp}),n&&m(Cse,{hidden:!1,notes:this.props.renderableNotes,cache:n,timestamp:i,onTimelineClick:this.setTimestamp,isHorizontal:a,song:s,audioSong:l,sizes:r,colors:t})]})})}}class Nse extends M.exports.Component{constructor(t){super(t),this.lastTimestamp=0,this.changes=0,this.playbackTimestamp=0,this.mounted=!1,this.heldKeys=[],this.pressedDownHitObjects=[],this.unblock=()=>{},this.addTrack=()=>{const{vsrg:n}=this.state;n.addTrack(),this.setState({vsrg:n},()=>yi.emitEvent("tracksChange"))},this.updateSettings=n=>{eo.updateVsrgComposerSettings(n!==void 0?n:this.state.settings)},this.syncInstruments=()=>{const{vsrg:n,audioPlayer:i}=this.state;i.syncInstruments(n.tracks.map(o=>o.instrument))},this.syncAudioSongInstruments=()=>{const{audioSong:n,audioPlaybackPlayer:i}=this.state;n!==null&&(i.syncInstruments(n.instruments),i.basePitch=n.pitch)},this.handleKeyboardDown=({event:n,letter:i,shift:o})=>{var l;const{vsrg:s}=this.state;if(o)return;const a=(l=ld[s.keys])==null?void 0:l.indexOf(i);if(a>=0){if(n.repeat)return;this.startHitObjectTap(a)}},this.handleKeyboardUp=({letter:n})=>{var s;const{vsrg:i}=this.state,o=(s=ld[i.keys])==null?void 0:s.indexOf(n);o>=0&&this.endHitObjectTap(o)},this.startHitObjectTap=n=>{const{vsrg:i,selectedTrack:o,selectedType:s}=this.state;this.heldKeys[n]=!0,this.changes++;const a=this.findClosestSnapPoint(this.lastTimestamp);if(s==="delete")return i.removeHitObjectInTrackAtTimestamp(o,a,n),this.setState({vsrg:i,selectedHitObject:null});const l=i.createHitObjectInTrack(o,a,n);this.pressedDownHitObjects[n]=l,this.setState({vsrg:i,selectedHitObject:l})},this.endHitObjectTap=n=>{const{vsrg:i,selectedTrack:o}=this.state,s=this.pressedDownHitObjects[n];if(this.heldKeys[n]&&s){const a=this.findClosestSnapPoint(s.timestamp+s.holdDuration);i.setHeldHitObjectTail(o,s,a-s.timestamp)}this.heldKeys[n]=!1,this.pressedDownHitObjects[n]=void 0},this.handleSettingChange=n=>{const{settings:i,vsrg:o}=this.state,{data:s}=n;i[n.key]={...i[n.key],value:s.value},n.key==="keys"&&o.changeKeys(s.value),n.key==="bpm"&&(o.set({bpm:s.value}),this.calculateSnapPoints()),n.key==="difficulty"&&o.set({difficulty:s.value}),this.setState({settings:{...i}},()=>{this.updateSettings(),n.key==="keys"&&yi.emitEvent("updateKeys"),n.key==="isVertical"&&yi.emitEvent("updateOrientation"),n.key==="maxFps"&&yi.emitEvent("maxFpsChange")})},this.changePage=async n=>{const{vsrg:i,settings:o}=this.state;if(n==="Home")return an.open();if(this.changes!==0)if(o.autosave.value)await this.saveSong();else{const s=await Mr(`You have unsaved changes to the song: "${i.name}" do you want to save? UNSAVED CHANGES WILL BE LOST`,!1);if(s===null)return;s&&await this.saveSong()}this.unblock(),this.props.history.push(n)},this.onSnapPointChange=n=>{const{vsrg:i}=this.state;i.set({snapPoint:n}),this.setState({snapPoint:n,vsrg:i},()=>{this.calculateSnapPoints(),yi.emitEvent("snapPointChange")})},this.selectHitObject=(n,i,o)=>{const s=n.isHeld?"hold":"tap";if(this.state.selectedType==="delete"||o===Bo.Right){this.state.vsrg.removeHitObjectInTrack(i,n),this.setState({selectedHitObject:null,vsrg:this.state.vsrg});return}this.state.selectedType==="hold"&&o===Bo.Left&&this.setState({selectedHitObject:n,lastCreatedHitObject:n,selectedType:s}),this.setState({selectedHitObject:n,selectedTrack:i,selectedType:s})},this.onSnapPointSelect=(n,i,o)=>{const{vsrg:s,selectedType:a,lastCreatedHitObject:l,selectedTrack:u,selectedHitObject:c}=this.state;if(this.changes++,n<0)return console.warn("Timestamp is less than 0");const p=s.getHitObjectsAt(n,i).find(v=>v!==null);if(o===Bo.Unknown&&console.warn("unknown click type"),a==="tap"&&o===Bo.Left){if(p)return this.setState({selectedHitObject:p});const v=s.createHitObjectInTrack(u,n,i);this.playHitObject(v,u),this.setState({selectedHitObject:v})}if(a==="hold"&&o===Bo.Left)if(l!==null)s.setHeldHitObjectTail(u,l,n-l.timestamp),this.setState({lastCreatedHitObject:null,selectedHitObject:null});else{if(p)return this.setState({selectedHitObject:p});const v=s.createHeldHitObject(u,n,i);this.setState({lastCreatedHitObject:v,selectedHitObject:v})}(a==="delete"||o===Bo.Right)&&(s.removeHitObjectInTrackAtTimestamp(u,n,i),this.setState({selectedHitObject:null})),this.setState({vsrg:s})},this.selectTrack=n=>{this.setState({selectedTrack:n})},this.setAudioSong=n=>{const{vsrg:i}=this.state;if(this.changes++,n===null)return i.setAudioSong(null),this.setState({audioSong:null,renderableNotes:[]});const o=Pt.parseSong(n);if(o instanceof En){i.setAudioSong(o),o.startPlayback(this.lastTimestamp),i.setDurationFromNotes(o.notes);const s=i.getRenderableNotes(o);this.setState({audioSong:o,renderableNotes:s},()=>{this.syncAudioSongInstruments(),this.calculateSnapPoints()})}if(o instanceof Yr){const s=o.toRecordedSong(0);i.setDurationFromNotes(s.notes),s.startPlayback(this.lastTimestamp),i.setAudioSong(o);const a=i.getRenderableNotes(s);this.setState({audioSong:s,renderableNotes:a},()=>{this.syncAudioSongInstruments(),this.calculateSnapPoints()})}},this.askForSongUpdate=async()=>await Mr(`You have unsaved changes to the song: "${this.state.vsrg.name}" do you want to save now?`,!1),this.createNewSong=async()=>{if(this.state.vsrg.name!=="Untitled"&&this.changes>0){const i=await this.askForSongUpdate();if(i===null)return;i&&await this.saveSong()}const n=await xn("Enter song name");if(n){const i=new os(n);i.set({bpm:this.state.settings.bpm.value,keys:this.state.settings.keys.value,pitch:this.state.settings.pitch.value,snapPoint:this.state.snapPoint}),i.addTrack();const o=await kt.addSong(i);i.set({id:o}),this.setState({vsrg:i,renderableNotes:[]},()=>{yi.emitEvent("songLoad"),this.calculateSnapPoints(),this.syncInstruments()})}},this.calculateSnapPoints=()=>{const{vsrg:n,snapPoint:i}=this.state,o=n.duration/Math.floor(6e4/n.bpm)*i,s=n.duration/o,a=new Array(Math.floor(o)).fill(0).map((l,u)=>u*s);this.setState({snapPoints:a,snapPointDuration:s})},this.dragHitObject=(n,i)=>{const{selectedHitObject:o,vsrg:s,settings:a}=this.state;o!==null&&(o.timestamp=n,i!==void 0&&i<a.keys.value&&(o.index=i),this.setState({vsrg:s,selectedHitObject:o}))},this.findClosestSnapPoint=n=>{const{snapPoints:i}=this.state;return i.reduce((s,a)=>Math.abs(a-n)<Math.abs(s-n)?a:s)},this.releaseHitObject=()=>{const{selectedHitObject:n,vsrg:i}=this.state;if(n===null)return;n.timestamp=this.findClosestSnapPoint(n.timestamp),i.getHitObjectsBetween(n.timestamp,n.timestamp+n.holdDuration,n.index).forEach((s,a)=>s.forEach(l=>l!==n&&i.removeHitObjectInTrackAtTimestamp(a,l.timestamp,l.index))),this.changes++,this.setState({vsrg:i})},this.onTrackChange=(n,i)=>{const{vsrg:o}=this.state;o.tracks[i]=n,this.setState({vsrg:o},this.syncInstruments)},this.onNoteSelect=n=>{const{selectedHitObject:i,audioPlayer:o,selectedTrack:s}=this.state;i==null||i.toggleNote(n),o.playNoteOfInstrument(s,n),this.setState({selectedHitObject:i})},this.togglePlay=()=>{const{isPlaying:n,vsrg:i,audioSong:o}=this.state;if(i.startPlayback(this.lastTimestamp),this.lastTimestamp>=i.duration)return this.setState({isPlaying:!1});o&&o.startPlayback(this.lastTimestamp),this.setState({isPlaying:!n})},this.playHitObject=(n,i)=>{const{audioPlayer:o}=this.state;o.playNotesOfInstrument(i,n.notes)},this.onTimestampChange=n=>{const{vsrg:i,isPlaying:o,audioSong:s,audioPlaybackPlayer:a,snapPointDuration:l}=this.state;if(this.lastTimestamp=n,o){if(this.lastTimestamp>=i.duration)return this.setState({isPlaying:!1});this.heldKeys.forEach((c,f)=>{if(c){const p=this.pressedDownHitObjects[f];if(!p)return;const v=n-p.timestamp;v>l&&(p.holdDuration=v,p.isHeld=!0)}}),s&&s.tickPlayback(n).forEach(f=>{f.layer.toArray().forEach((v,g)=>{v===0||i.trackModifiers[g].muted||a.playNoteOfInstrument(g,f.index)})}),i.tickPlayback(n).forEach((c,f)=>c.forEach(p=>this.playHitObject(p,f)))}},this.deleteTrack=async n=>{const{vsrg:i}=this.state;if(i.tracks.length===1)return we.error("Cannot delete last track");!await Mr("Are you sure you want to remove this track? All notes will be deleted.")||!this.mounted||(this.changes++,i.deleteTrack(n),this.setState({vsrg:i,selectedTrack:Math.max(0,n-1)},()=>yi.emitEvent("tracksChange")))},this.onSongOpen=async n=>{const{settings:i,vsrg:o}=this.state;if(this.changes!==0){let s=i.autosave.value&&o.name!=="Untitled";if(!s){const a=await Mr(`You have unsaved changes to the song: "${o.name}" do you want to save? UNSAVED CHANGES WILL BE LOST`,!1);if(a===null)return;s=a}s&&await this.saveSong()}i.bpm={...i.bpm,value:n.bpm},i.keys={...i.keys,value:n.keys},i.pitch={...i.pitch,value:n.pitch},this.updateSettings(),this.changes++,this.setState({vsrg:n,snapPoint:n.snapPoint,selectedTrack:0,selectedHitObject:null,lastCreatedHitObject:null},async()=>{yi.emitEvent("songLoad"),this.syncInstruments();const s=await kt.getSongById(n.audioSongId);this.setAudioSong(s),this.calculateSnapPoints()})},this.addTime=()=>{const{vsrg:n}=this.state;n.duration+=1e3,this.calculateSnapPoints(),this.changes++,this.setState({vsrg:n})},this.removeTime=()=>{const{vsrg:n}=this.state;n.duration-=1e3,this.calculateSnapPoints(),this.changes++,this.setState({vsrg:n})},this.onScalingChange=n=>{this.setState({scaling:n},()=>yi.emitEvent("scaleChange"))},this.saveSong=async()=>{const{vsrg:n}=this.state,i=n.id!==null?n.name:await xn("Enter song name");if(i!==null){if(n.set({name:i}),n.id===null){const o=await kt.addSong(n);n.set({id:o})}else kt.updateSong(n);this.changes=0,this.setState({vsrg:n})}},this.onTrackModifierChange=(n,i,o)=>{const{vsrg:s,audioSong:a}=this.state;if(s.trackModifiers[i]=n,s.trackModifiers=[...s.trackModifiers],this.changes++,o&&a){const l=s.getRenderableNotes(a);return this.setState({renderableNotes:l,vsrg:s})}this.setState({vsrg:s})},this.onTempoChangerChange=n=>{this.setState({tempoChanger:n})},this.selectType=n=>{this.setState({selectedType:n,lastCreatedHitObject:null})},this.onBreakpointChange=n=>{const{vsrg:i}=this.state,o=this.findClosestSnapPoint(this.lastTimestamp);i.setBreakpoint(o,!n),this.setState({vsrg:i})},this.onBreakpointSelect=n=>{const{vsrg:i,isPlaying:o,audioSong:s}=this.state,a=i.getClosestBreakpoint(this.lastTimestamp,n);o&&(s==null||s.startPlayback(a),i.startPlayback(a)),yi.emitEvent("timestampChange",a)};const r=eo.getVsrgComposerSettings();this.state={vsrg:new os("Untitled"),audioPlayer:new sp(r.pitch.value),audioPlaybackPlayer:new sp(r.pitch.value),selectedTrack:0,snapPoint:1,snapPoints:[0],snapPointDuration:0,selectedHitObject:null,scaling:60,selectedType:"tap",isPlaying:!1,lastCreatedHitObject:null,settings:r,audioSong:null,renderableNotes:[],tempoChanger:1},this.state.vsrg.addTrack("DunDun"),this.state.vsrg.set({bpm:r.bpm.value,keys:r.keys.value}),this.mounted=!1}componentDidMount(){this.mounted=!0;const t="vsrg-composer";this.calculateSnapPoints(),this.syncInstruments(),this.unblock=this.props.history.block(r=>{if(this.changes!==0)return this.changePage(r.pathname),!1}),Xe.listen(this.handleKeyboardDown,{id:t,type:"keydown"}),Xe.registerNumber(1,()=>{this.setState({selectedType:"tap"})},{id:t}),Xe.registerLetter("W",()=>{const{selectedHitObject:r,vsrg:n,snapPointDuration:i}=this.state;!r||(this.state.settings.isVertical.value?r.timestamp=r.timestamp+i:r.index=ii(r.index-1,0,n.keys),this.releaseHitObject())},{id:t,shift:!0}),Xe.registerLetter("A",()=>{const{selectedHitObject:r,vsrg:n,snapPointDuration:i}=this.state;!r||(this.state.settings.isVertical.value?r.index=ii(r.index-1,0,n.keys):r.timestamp=r.timestamp-i,this.releaseHitObject())},{id:t,shift:!0}),Xe.registerLetter("S",()=>{const{selectedHitObject:r,vsrg:n,snapPointDuration:i}=this.state;!r||(this.state.settings.isVertical.value?r.timestamp=r.timestamp-i:r.index=ii(r.index+1,0,n.keys),this.releaseHitObject())},{id:t,shift:!0}),Xe.registerLetter("D",()=>{const{selectedHitObject:r,vsrg:n,snapPointDuration:i}=this.state;!r||(this.state.settings.isVertical.value?r.index=ii(r.index+1,0,n.keys):r.timestamp=r.timestamp+i,this.releaseHitObject())},{id:t,shift:!0}),Xe.register("Escape",()=>{this.setState({selectedHitObject:null,lastCreatedHitObject:null})},{id:t}),Xe.register("Backspace",()=>{const{selectedHitObject:r,vsrg:n,selectedTrack:i}=this.state;!r||(n.removeHitObjectInTrackAtTimestamp(i,r.timestamp,r.index),this.setState({selectedHitObject:null,lastCreatedHitObject:null}))}),Xe.registerNumber(2,()=>{this.setState({selectedType:"hold"})},{id:t}),Xe.registerNumber(3,()=>{this.setState({selectedType:"delete"})},{id:t}),Xe.register("ArrowLeft",()=>{this.onBreakpointSelect(-1)},{id:t}),Xe.register("ArrowRight",()=>{this.onBreakpointSelect(1)},{id:t}),Xe.register("ArrowUp",()=>{this.selectTrack(Math.max(0,this.state.selectedTrack-1))},{id:t}),Xe.register("ArrowDown",()=>{this.selectTrack(Math.min(this.state.vsrg.tracks.length-1,this.state.selectedTrack+1))},{id:t}),Xe.listen(this.handleKeyboardUp,{id:t,type:"keyup"}),Xe.register("Space",({event:r})=>{var n;r.repeat||(sG(document.activeElement)&&((n=document.activeElement)==null||n.blur()),this.togglePlay())},{id:"vsrg-composer"})}componentWillUnmount(){this.mounted=!1,Xe.unregisterById("vsrg-composer");const{audioPlaybackPlayer:t,audioPlayer:r}=this.state;t.destroy(),r.destroy()}render(){var g;const{settings:t,selectedTrack:r,vsrg:n,lastCreatedHitObject:i,snapPoints:o,isPlaying:s,snapPoint:a,selectedHitObject:l,selectedType:u,audioSong:c,scaling:f,renderableNotes:p,tempoChanger:v}=this.state;return k(De,{children:[m(In,{text:`Vsrg Composer - ${(g=n.name)!=null?g:"Unnamed"}`}),m(rse,{trackModifiers:n.trackModifiers,hasChanges:this.changes>0,settings:t,audioSong:c,onTrackModifierChange:this.onTrackModifierChange,onSongOpen:this.onSongOpen,onSave:this.saveSong,onCreateSong:this.createNewSong,setAudioSong:this.setAudioSong,handleSettingChange:this.handleSettingChange}),k("div",{className:"vsrg-page",children:[m(dse,{vsrg:n,onBreakpointSelect:this.onBreakpointSelect,onBreakpointChange:this.onBreakpointChange,selectedHitObject:l,isHorizontal:!t.isVertical.value,selectedTrack:r,lastCreatedHitObject:i,onTrackAdd:this.addTrack,onTrackChange:this.onTrackChange,onTrackDelete:this.deleteTrack,onTrackSelect:this.selectTrack,onNoteSelect:this.onNoteSelect,children:m(Ise,{vsrg:n,renderableNotes:p,onTimestampChange:this.onTimestampChange,selectedHitObject:l,isHorizontal:!t.isVertical.value,tempoChanger:v,scrollSnap:t.scrollSnap.value,maxFps:t.maxFps.value,scaling:f,audioSong:c,snapPoint:a,snapPoints:o,isPlaying:s,onRemoveTime:this.removeTime,onAddTime:this.addTime,onKeyDown:this.startHitObjectTap,onKeyUp:this.endHitObjectTap,dragHitObject:this.dragHitObject,releaseHitObject:this.releaseHitObject,selectHitObject:this.selectHitObject,onSnapPointSelect:this.onSnapPointSelect})}),m(lse,{vsrg:n,scaling:f,tempoChanger:v,onTempoChangerChange:this.onTempoChangerChange,onScalingChange:this.onScalingChange,isPlaying:s,togglePlay:this.togglePlay,selectedSnapPoint:a,onSnapPointChange:this.onSnapPointChange,selectedHitObjectType:u,onHitObjectTypeChange:this.selectType})]})]})}}const Pse=bh(Nse);function Ase({children:e}){M.exports.useEffect(()=>{xe.load()},[]);const[t]=fn(),r=t.get("accent").isDark()?t.get("accent").lighten(.1):t.get("accent").saturate(.2).lighten(.25);return k(De,{children:[m("style",{children:`:root{
                ${t.toArray().map(n=>`--${n.css}:${n.value};
                            --${n.css}-rgb:${xe.get(n.name).rgb().array().join(",")};
                            --${n.css}-text: ${n.text};
                            ${new Array(2).fill(0).map((i,o)=>`--${n.css}-darken-${o*10+10}: ${xe.get(n.name).darken(o*.1+.1).hex()};`).join(`
`)}
                            ${new Array(2).fill(0).map((i,o)=>`--${n.css}-lighten-${o*10+10}: ${xe.get(n.name).lighten(o*.1+.1).hex()};`).join(`
`)}
                            `).join(`
`)}
                --clicked-note:${r};
            }`}),e]})}function Rse({children:e}){return M.exports.useEffect(()=>(Lr.create(),()=>Lr.destroy()),[]),m(De,{children:e})}function kse({children:e}){return M.exports.useEffect(()=>(_t.init(),()=>_t.destroy()),[]),m(De,{children:e})}function Ose({children:e}){return M.exports.useEffect(()=>(Xe.create(),()=>Xe.destroy()),[]),m(De,{children:e})}function MN(e){var t;return(t=e==null?void 0:e.dataTransfer)==null?void 0:t.types.includes("Files")}function Lse({onHoverChange:e,onDrop:t,onError:r,as:n,showDropArea:i=!1,dropAreaStyle:o={}}){const[s,a]=M.exports.useState(!1),l=M.exports.useCallback(()=>{a(!1),e==null||e(!1)},[e]),u=M.exports.useCallback(p=>{p.preventDefault(),MN(p)&&(a(!0),e==null||e(!0))},[e]),c=M.exports.useCallback(p=>{!MN(p)||(p.preventDefault(),a(!0),e==null||e(!0))},[e]),f=M.exports.useCallback(async p=>{var g;l(),p.preventDefault();const v=Array.from(((g=p.dataTransfer)==null?void 0:g.files)||[]).map(b=>new Promise((_,w)=>{const x=new FileReader;function T(){try{const I=x.result;_({data:n==="json"?JSON.parse(I):I,file:b})}catch(I){w(I)}}try{x.addEventListener("loadend",T,{once:!0}),(n==="text"||n==="json")&&x.readAsText(b),n==="buffer"&&x.readAsArrayBuffer(b)}catch(I){w(I)}}));try{const b=await Promise.all(v);t(b)}catch(b){console.error(b),r==null||r(b)}},[l,t,r,n]);return M.exports.useEffect(()=>(document.body.addEventListener("drop",f),()=>document.body.removeEventListener("drop",f)),[f]),M.exports.useEffect(()=>(document.body.addEventListener("dragenter",c),document.body.addEventListener("dragleave",l),document.body.addEventListener("dragover",u),()=>{document.body.removeEventListener("dragenter",c),document.body.removeEventListener("dragleave",l),document.body.removeEventListener("dragover",u)}),[l,c,u]),m(De,{children:i&&m(Use,{isHovering:s,style:o,children:"Drop files here"})})}const Use=M.exports.memo(({isHovering:e,children:t,style:r})=>m(De,{children:e&&m("div",{className:"drag-n-drop",style:r,children:t})}),(e,t)=>e.children===t.children&&e.isHovering===t.isHovering),Fse=M.exports.memo(Lse,(e,t)=>e.as===t.as&&e.onDrop===t.onDrop&&e.onError===t.onError&&e.onHoverChange===t.onHoverChange&&e.showDropArea===t.showDropArea);function Mse({children:e}){const t=async n=>{try{for(const i of n){const o=i.data;await xr.importAndLog(o)}}catch(i){console.error(i),we.error("Error importing file")}};function r(){we.error("There was an error importing the file! Was it the correct format?")}return k(De,{children:[m(Fse,{showDropArea:!0,dropAreaStyle:{paddingTop:"15vh"},onDrop:t,as:"json",onError:r}),e]})}function Bse(){return k(io,{children:[m(In,{text:"Privacy"}),k("span",{children:["This website uses cookies to collect data about usage of the app through IP anonymized Google Analytics. We use this information to improve user experience and find how our users use the app. All data (songs, themes, folders, etc) produced by you is stored in the browser. If you wish to see how Google Analytics collects data, please visit",m("a",{href:"https://support.google.com/analytics/answer/11593727",target:"_blank",rel:"noreferrer",style:{color:"var(--primary-text)",textDecoration:"underline",marginLeft:"0.3rem"},children:"here."})]})]})}class Dse extends M.exports.Component{componentDidCatch(t,r){if(console.error(t,r),window.location.hostname==="localhost")return console.error("Prevent localhost redirect");this.props.history.push(this.props.onErrorGoTo)}render(){return this.props.children}}const Gse=bh(Dse);new Mn;function jse(){Wa(Ls.getKeyboardKeybinds());const[e,t]=M.exports.useState({type:"",index:-1});M.exports.useEffect(()=>(Xe.listen(({letter:i})=>{if(i==="Escape")return t({type:"",index:-1});const{type:o,index:s}=e;if(o==="keyboard"&&s!==-1&&(Ls.setKeyboardKeybind(s,i),t({type:"",index:-1})),["k4","k6","k8"].includes(o)&&s!==-1){const a=Number(o.replace("k",""));Ls.setVsrgKeybind(a,s,i),t({type:"",index:-1})}},{id:"keybinds"}),()=>Xe.unregisterById("keybinds")),[e]);const r=Wa(Ls.getVsrgKeybinds(4)),n=Wa(Ls.getVsrgKeybinds(6));return k(io,{children:[m(In,{text:"Keybinds"}),!1,m("h1",{children:"Vsrg keybinds"}),m("div",{className:"column",style:{marginLeft:"1rem"},children:[r,n].map((i,o)=>k(M.exports.Fragment,{children:[k("h2",{children:[i.length," keys"]}),m("div",{className:"row",children:i.map((s,a)=>m($se,{letter:s,isActive:e.type===`k${i.length}`&&e.index===a,handleClick:l=>t({type:`k${i.length}`,index:l?a:-1})},a))})]},o))})]})}function $se({letter:e,isActive:t,handleClick:r}){const n=ra(()=>r(!1),{ignoreFocusable:!0,active:t});return m("button",{className:"vsrg-player-key-circle",ref:n,style:{width:"3.5rem",fontSize:"1rem",height:"3.5rem",margin:"0.4rem",border:"none",backgroundColor:t?"var(--accent)":"var(--primary)",color:t?"var(--accent-text)":"var(--primary-text)",cursor:"pointer"},onClick:()=>r(!t),children:e})}var Hse=Object.defineProperty,zse=Object.getOwnPropertyDescriptor,Vse=(e,t,r,n)=>{for(var i=n>1?void 0:n?zse(t,r):t,o=e.length-1,s;o>=0;o--)(s=e[o])&&(i=(n?s(t,r,i):s(i))||i);return n&&i&&Hse(t,r,i),i};class G7{constructor(){this.keyboard=[],this.setKeyboardLayout=t=>{this.keyboard.splice(0,this.keyboard.length,...t)},this.animateNote=(t,r)=>{this.keyboard[t].triggerAnimation(r)},this.resetKeyboardLayout=()=>{this.keyboard.forEach(t=>t.setState({status:"",delay:100}))},this.resetOutgoingAnimation=()=>{this.keyboard.forEach(t=>t.setState({animationId:0}))},this.setNoteState=(t,r)=>{this.keyboard[t].setState(r)},ki(this)}}Vse([gt],G7.prototype,"keyboard",2);const Nx=new G7;function Xse({note:e,onClick:t,noteImage:r,noteText:n,instrumentName:i}){var b,_;const[o,s]=M.exports.useState(""),[a,l]=M.exports.useState(0),[u,c]=M.exports.useState(ut.text.light),f=M.exports.useRef(null),p=M.exports.useCallback(w=>{w.preventDefault(),t(e)},[t,e]);M.exports.useEffect(()=>{function w(){s("clicked"),l(x=>x+1),setTimeout(()=>s(""),100)}return $d(e.data,w)},[e,f]),M.exports.useEffect(()=>$d(xe.state.data,()=>{c(Kse())}),[]);const v=Wse(o)+"",g=(b=el[i])==null?void 0:b.clickColor;return k("button",{onPointerDown:p,className:"button-hitbox-bigger",children:[m("div",{style:g&&xe.isDefault("accent")?{borderColor:g}:{},className:Ko.noteAnimation},a),k("div",{ref:f,className:v,children:[m(Dy,{className:"genshin-border",fill:Yse(o)}),r&&m(Gy,{name:e.noteImage,color:xe.isDefault("accent")?(_=el[i])==null?void 0:_.fill:void 0,background:o==="clicked"?g&&xe.isDefault("accent")?g:"var(--accent)":"var(--note-background)"}),m("div",{className:Ko.noteName,style:{color:u},children:n})]})]})}function Wse(e){let t=Ko.note;switch(e){case"clicked":t+=" click-event";break}return t}function Yse(e){if(e==="clicked")return"transparent";if(e==="toClickNext"||e==="toClickAndNext")return"#63aea7";const t=xe.get("note_background").desaturate(.6);return t.isDark()?t.lighten(.45).hex():t.darken(.18).hex()}function Kse(){const e=xe.get("note_background");return e.luminosity()>.65?ut.text.note:e.isDark()?ut.text.light:ut.text.dark}function qse({onNoteClick:e,instrument:t,pitch:r,verticalOffset:n,scale:i,noteNameType:o}){const s=Wa(Nx.keyboard);M.exports.useEffect(()=>(Xe.listen(({letter:l,event:u})=>{if(u.repeat)return;const c=t.getNoteFromCode(l);c!==null&&e(c)},{id:"ZenKeyboard"}),()=>Xe.unregisterById("ZenKeyboard")),[e,t]);let a="keyboard zen-keyboard";return t.notes.length===15&&(a+=" keyboard-5"),t.notes.length===14&&(a+=" keyboard-5"),t.notes.length===8&&(a+=" keyboard-4"),t.notes.length===6&&(a+=" keyboard-3"),m("div",{className:a,style:{transform:`scale(${i/100}) translateY(${n}px)`},children:s.map((l,u)=>m(Xse,{instrumentName:t.name,noteText:t.getNoteText(u,o,r),noteImage:l.noteImage,note:l,onClick:e},u))})}function Zse({settings:e,handleSettingChange:t,onVolumeChange:r}){const[n,i]=M.exports.useState("Settings"),[o,s]=M.exports.useState(!0),[a,l]=M.exports.useState(!1),u=ra(()=>{l(!1)},{ignoreFocusable:!0,active:n!==""}),c=o&&a?"side-menu menu-open":"side-menu";function f(){s(!o)}return k("div",{className:"menu-wrapper",ref:u,children:[m("div",{className:"hamburger-top",onClick:()=>l(!a),children:m(St,{children:m(ry,{})})}),k("div",{className:`menu ${a?"menu-visible":""}`,style:{justifyContent:"flex-end"},children:[m(Ct,{ariaLabel:"Close menu",style:{marginBottom:"auto"},onClick:()=>l(!a),children:m(Zi,{className:"icon"})}),m(Ct,{onClick:()=>{i("Settings"),f()},isActive:n==="Settings"&&o,ariaLabel:"Open settings",children:m(Tu,{className:"icon"})}),m(Ct,{onClick:an.open,ariaLabel:"Open home menu",children:m(Su,{className:"icon"})})]}),m("div",{className:c,children:m(ni,{title:"Settings",current:n,id:"Settings",children:m(Fp,{settings:e,onUpdate:t,changeVolume:r})})})]})}function Jse(){const[e,t]=M.exports.useState(Xb.data),[r,n]=M.exports.useState(new Mn),[i,o]=M.exports.useState(!1);M.exports.useEffect(()=>{const c=eo.getZenKeyboardSettings();return kn.bpm=c.metronomeBpm.value,n(new Mn(c.instrument.value)),t(c),_t.setReverb(c.caveMode.value),()=>we.hidePill()},[]);const s=M.exports.useCallback(c=>{eo.updateZenKeyboardSettings(c)},[]);M.exports.useEffect(()=>{Nx.setKeyboardLayout(r.notes)},[r]);const a=async c=>{const{data:f}=c;e[c.key]={...e[c.key],value:f.value},c.key==="instrument"&&n(new Mn(f.value)),c.key==="caveMode"&&_t.setReverb(f.value),c.key==="metronomeBpm"&&(kn.bpm=f.value),c.key==="metronomeBeats"&&(kn.beats=f.value),c.key==="metronomeVolume"&&kn.changeVolume(f.value),t({...e}),s(e)};M.exports.useEffect(()=>{async function c(){we.showPill(`Loading instrument: ${r.name}...`),await r.load(),we.hidePill(),_t.connect(r.endNode)}return c(),()=>{_t.disconnect(r.endNode)}},[r]);const l=c=>{r.play(c.index,e.pitch.value),Nx.animateNote(c.index)};M.exports.useEffect(()=>{i?kn.start():kn.stop()},[i]);const u=M.exports.useCallback(c=>{r.changeVolume(c.value)},[r]);return k(De,{children:[m(In,{text:"Zen Keyboard"}),m(Zse,{settings:e,onVolumeChange:u,handleSettingChange:a}),m(qse,{instrument:r,onNoteClick:l,noteNameType:e.noteNameType.value,pitch:e.pitch.value,scale:e.keyboardSize.value,verticalOffset:e.keyboardYPosition.value}),m(Ql,{toggled:i,onClick:()=>o(!i),className:"metronome-button",style:{position:"absolute",bottom:"0.8rem",right:"0.8rem"},ariaLabel:"Toggle metronome",children:m(tO,{size:22})})]})}function Qse(){const e={marginRight:"0.3rem",marginLeft:"-0.4rem"},[t]=Ou(),r=Wa(Xa.themes);M.exports.useEffect(()=>()=>we.hidePill(),[]);async function n(){we.showPill("Validating songs...");const u=await Pt.getSongs(),c=[];for(const f of u)try{Pt.parseSong(f)}catch(p){console.error(p),c.push(f),we.error(`Error validating song "${f==null?void 0:f.name}"`)}return c.length>0&&!await xn("There were errors validating some songs. Do you want to continue downloading?")?null:(we.hidePill(),[...u])}async function i(){we.showPill("Validating folders...");const u=[],c=await Ns.getFolders();for(const f of c)try{xo.deserialize(f)}catch(p){console.error(p),u.push(f),we.error(`Error validating folder "${f==null?void 0:f.name}"`)}return u.length>0&&!await xn("There were errors validating some folders. Do you want to continue downloading?")?null:(we.hidePill(),[...c])}async function o(){we.showPill("Validating themes...");const u=await mo.getThemes(),c=[];for(const f of u);return c.length>0&&!await xn("There were errors validating some themes. Do you want to continue downloading?")?null:(we.hidePill(),[...u])}async function s(u){var c;for(const f of u)try{const p=Array.isArray(f.data)?f.data:[f.data];await xr.importAndLog(p)}catch(p){console.error(p),we.error(`Error importing file "${(c=f.file)==null?void 0:c.name}"`)}}async function a(){if(await xn("Write 'delete' if you want to delete all songs, press cancel to ignore")!=="delete"||(await Ws(200),!await Mr("Are you REALLY sure you want to delete all songs?")))return we.warn("Action cancelled");await kt._DANGEROUS_CLEAR_ALL_SONGS(),await Yi._DANGEROUS_CLEAR_ALL_FOLDERS(),we.success("Deleted all songs")}async function l(){if(await xn("Write 'delete' if you want to delete all themes")!=="delete"||(await Ws(200),!await Mr("Are you REALLY sure you want to delete all themes?")))return we.warn("Action cancelled");await Xa._DANGEROUS_CLEAR_ALL_THEMES(),we.success("Deleted all themes")}return k(io,{children:[m(In,{text:"Backup"}),m("h1",{children:"Backup"}),m("div",{children:"Make sure you create a backup every now and then. Especially if you just finished a new song. The browser shouldn't delete your data, especially if you installed the app, but there is always a chance."}),k("div",{className:"row space-between",style:{marginTop:"2rem"},children:[k(Be,{tooltip:"Download all the data of the app, aka themes, songs, folders",className:"flex-centered",onClick:async()=>{const u=await n();if(!u)return;const c=await i();if(!c)return;const f=await o();!f||(xr.downloadFiles([...u,...c,...f],`${je}-all-backup-${G_()}.json`),we.success("Downloaded backup"))},children:[m(O2,{style:e}),"Download all backup"]}),k(Be,{tooltip:"Downloads a backup containing all songs and folders",className:"flex-centered",onClick:async()=>{const u=await n();if(!u)return;const c=await i();!c||(xr.downloadFiles([...u,...c],`${je}-song-backup-${G_()}.json`),we.success("Downloaded songs backup"))},children:[m(O2,{style:e}),"Download song backup"]}),k(Be,{tooltip:"Downloads a backup of all the custom themes",className:"flex-centered",onClick:async()=>{const u=await o();!u||(xr.downloadFiles(u,`${je}-themes-backup-${G_()}.json`),we.success("Downloaded themes backup"))},children:[m(O2,{style:e}),"Download themes backup"]})]}),m("div",{style:{marginTop:"2rem"},children:"If you have a backup, you can import it here, they will be added to your existing data. (if you already have the same song, a duplicate will be created)."}),m("div",{className:"flex-centered",children:m($y,{onPick:s,as:"json",onError:()=>we.error("There was an error reading the file"),children:k(Be,{className:"flex-centered",tooltip:"Here you can import any backup you have",style:{marginTop:"1rem",backgroundColor:"var(--accent)",color:"var(--accent-text)",padding:"0.8rem"},children:[m(KF,{style:{...e,fontSize:"1rem",marginRight:"0.5rem"}}),"Import backup"]})})}),m("div",{className:"column",style:{flex:"1",justifyContent:"center",padding:"2rem 1rem"},children:k("div",{className:"column",style:{width:"fit-content"},children:[k("span",{children:[t.length," ",t.length===1?"song":"songs"]}),k("span",{children:[r.length," ",r.length===1?"theme":"themes"]})]})}),m("div",{style:{marginTop:"1rem"},children:"If you want, you can also delete all your data here, once deleted it can't be recovered. Don't worry you will be asked to confirm before anything is deleted."}),k("div",{className:"row space-around",style:{marginTop:"1rem"},children:[k(Be,{className:"flex-centered",tooltip:"Here you can delete all your songs and folders",tooltipPosition:"top",style:{backgroundColor:"var(--red-bg)",color:"var(--red-text)"},onClick:a,children:[m(Ji,{style:e}),"Delete songs and folders"]}),k(Be,{className:"flex-centered",tooltip:"Here you can delete all your themes",tooltipPosition:"top",style:{backgroundColor:"var(--red-bg)",color:"var(--red-text)"},onClick:l,children:[m(Ji,{style:e}),"Delete themes"]})]})]})}function G_(){const e=new Date;return`${e.getFullYear()}-${e.getMonth()}-${e.getDate()}`}function eae(){return M.exports.useEffect(()=>{try{"virtualKeyboard"in navigator?(navigator.virtualKeyboard.overlaysContent=!0,console.log("virtual keyboard supported")):console.log("virtual keyboard not supported")}catch(e){console.error(e)}},[]),m(EF,{children:m(Mse,{children:m(Ase,{children:m(Ose,{children:m(Rse,{children:k(kse,{children:[m(lW,{}),k(TF,{children:[m(tn,{exact:!0,path:"/Error",children:m(Lie,{})}),k(Gse,{onErrorGoTo:"/Error",onError:()=>we.error("There was an error with the app!"),children:[m(tn,{exact:!0,path:"/",children:m(Sa,{page:"Main",children:m(fw,{})})}),m(tn,{exact:!0,path:"/Player",children:m(Sa,{page:"Main",children:m(fw,{})})}),m(tn,{exact:!0,path:"/VsrgComposer",children:m(Sa,{page:"Composer",children:m(Pse,{})})}),m(tn,{exact:!0,path:"/VsrgPlayer",children:m(Sa,{page:"Main",children:m(qoe,{})})}),m(tn,{exact:!0,path:"/Composer",children:m(Sa,{page:"Composer",children:m(I7,{})})}),m(tn,{exact:!0,path:"/Donate",children:m(roe,{})}),m(tn,{exact:!0,path:"/Changelog",children:m(Die,{})}),m(tn,{exact:!0,path:"/Partners",children:m(Gie,{})}),m(tn,{exact:!0,path:"/Help",children:m($ie,{})}),m(tn,{exact:!0,path:"/SheetVisualizer",children:m(Xie,{})}),m(tn,{exact:!0,path:"/MidiSetup",children:m(Jie,{})}),m(tn,{exact:!0,path:"/Theme",children:m(_oe,{})}),m(tn,{exact:!0,path:"/Privacy",children:m(Bse,{})}),m(tn,{exact:!0,path:"/Keybinds",children:m(jse,{})}),m(tn,{exact:!0,path:"/ZenKeyboard",children:m(Sa,{page:"Main",children:m(Jse,{})})}),m(tn,{exact:!0,path:"/Backup",children:m(Qse,{})})]}),m(tn,{path:"*",children:m(noe,{})})]})]})})})})})})}ZN.exports.render(m(M.exports.StrictMode,{children:m(eae,{})}),document.getElementById("root"));H3||(lG(),wU());
//# sourceMappingURL=app-82b8ce72.js.map
