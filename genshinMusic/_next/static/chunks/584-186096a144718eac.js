(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[584],{40208:function(e,t,n){"use strict";n.d(t,{h:function(){return o}});var r=n(85893),l=n(48043);function o(e){var t,n,o,s,i;return(0,r.jsx)(l.J,{...e,style:{width:null!==(t=e.size)&&void 0!==t?t:"2rem",height:null!==(n=e.size)&&void 0!==n?n:"2rem",minWidth:null!==(o=e.size)&&void 0!==o?o:"2rem",minHeight:null!==(s=e.size)&&void 0!==s?s:"2rem",...e.style},className:"icon-app-button flex-centered ".concat(null!==(i=e.className)&&void 0!==i?i:""),children:e.children})}},50746:function(e,t,n){"use strict";n.d(t,{v:function(){return o}});var r=n(85893),l=n(10694);function o(e){let{onClick:t,children:n,style:o,tooltip:s,ariaLabel:i,className:a}=e;return(0,r.jsx)(r.Fragment,{children:(0,r.jsxs)("button",{className:"song-button ".concat((0,l.h)(s)," ").concat(null!=a?a:""),onClick:t||(()=>{}),style:o,"aria-label":i,children:[n,s&&(0,r.jsx)(l.u,{children:s})]})})}},99962:function(e,t,n){"use strict";n.d(t,{V:function(){return a},q:function(){return c}});var r=n(85893),l=n(40456),o=n.n(l),s=n(69887),i=n(39324);function a(e){let{style:t,className:n,opacity:l,children:a}=e,{visible:c}=(0,s.X)();return(0,r.jsx)("div",{className:(0,i.cn)("".concat(o().menu," ").concat(n),[c,o()["menu-visible"]]),style:{opacity:l,...t},children:a})}let c=(0,n(67294).forwardRef)(function(e,t){let{children:n,className:l,style:i,current:a,open:c,setOpen:d,setCurrent:u,visible:f,setVisible:g}=e;return(0,r.jsx)(s.p.Provider,{value:{current:null!=a?a:"",setCurrent:null!=u?u:e=>{},open:null!=c&&c,setOpen:null!=d?d:()=>{},visible:null==f||f,setVisible:null!=g?g:()=>{}},children:(0,r.jsx)("div",{className:"".concat(o()["menu-wrapper"]," ").concat(l),ref:t,style:i,children:n})})})},23441:function(e,t,n){"use strict";n.d(t,{d:function(){return s}});var r=n(85893),l=n(9008),o=n.n(l);function s(e){let{text:t,description:n,image:l,children:s}=e;return(0,r.jsxs)(o(),{children:[(0,r.jsx)("title",{children:t}),n&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("meta",{name:"description",content:n}),(0,r.jsx)("meta",{property:"og:description",content:n})]}),l&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("meta",{name:"image",content:l}),(0,r.jsx)("meta",{property:"og:image",content:l})]}),s]})}},52461:function(e,t,n){"use strict";n.d(t,{Qr:function(){return d},Rk:function(){return c},tc:function(){return u}});var r=n(85893),l=n(12293),o=n(67294),s=n(78773),i=n(48043),a=n(50746);function c(e){let{children:t,Icon:n,className:i="",style:c={},onClose:d,tooltip:u,offset:f=3,ignoreClickOutside:g}=e,[m,h]=(0,o.useState)(!1),[p,x]=(0,o.useState)(!1),v=(0,l.ZP)(()=>{!g&&(h(!1),d&&d())},{active:m,ignoreFocusable:!0});(0,o.useEffect)(()=>{var e;let t=v.current;if(!t)return;let n=t.getBoundingClientRect(),r=n.top+n.height>(null!==(e=window.innerHeight)&&void 0!==e?e:0);x(!(n.top-n.height-32<0)&&r)},[m,v]);let j="translateX(calc(-100% + ".concat(f,"rem)) ").concat(p?"translateY(calc(-100% - 2rem))":"");return(0,r.jsxs)("div",{className:"".concat(i," floating-dropdown ").concat(m?"floating-dropdown-active":""),children:[(0,r.jsx)(a.v,{style:{margin:0,...c,...m?{backgroundColor:"var(--accent)",color:"var(--accent-text)"}:{}},onClick:()=>{h(!m),m&&d&&d()},ariaLabel:m?"Close":"Open",tooltip:u,children:m?(0,r.jsx)(s.aHS,{}):(0,r.jsx)(n,{})}),(0,r.jsx)("div",{ref:v,className:"floating-dropdown-children",style:{transform:j,"--existing-transform":j,transformOrigin:p?"bottom":"top"},children:t})]})}function d(e){let{text:t}=e;return(0,r.jsx)("div",{className:"floating-dropdown-text",children:t})}function u(e){let{children:t,onClick:n,style:l}=e;return(0,r.jsx)(i.J,{ariaLabel:"Floating Dropdown Button",className:"row row-centered",style:{padding:"0.4rem",minWidth:"unset",...l},onClick:n,children:t})}},82860:function(e,t,n){"use strict";n.d(t,{s:function(){return o}});var r=n(85893),l=n(36180);function o(e){let{children:t,className:n,style:o,gap:s,flex1:i,justify:a,align:c,padding:d}=e;return(0,r.jsx)("div",{className:"column ".concat(null!=n?n:""),style:{gap:s,flex:i?1:void 0,justifyContent:a?l.q[a]:void 0,alignItems:c?l.q[c]:void 0,padding:d,...o},children:t})}},17678:function(e,t,n){"use strict";n.d(t,{G:function(){return R}});var r=n(85893),l=n(67294),o=n(92634),s=n(89867),i=n(83465),a=n.n(i),c=n(65890),d=n(78773),u=n(40398),f=n(31602),g=n(52461),m=n(17544),h=n(39324),p=n(85565),x=n(82860);function v(e){let{children:t,title:n}=e;return(0,r.jsxs)("div",{className:"folder-content",children:[n&&(0,r.jsx)("h2",{className:"folder-title",children:n}),(0,r.jsx)("div",{className:"folder-songs-wrapper",children:t})]})}function j(e){let{children:t,backgroundColor:n,color:o,headerColor:i,data:v,isDefault:j,defaultOpen:y=!1}=e,[C,k]=(0,l.useState)(!1),[S,b]=(0,l.useState)(!1),[w,N]=(0,l.useState)(v.name),E=(0,l.useRef)(null),[z,R]=(0,l.useState)(0);async function F(){await (0,f.jH)('Are you sure you want to delete the folder "'.concat(v.name,"\"?  \n            The songs won't be deleted"))&&u.p.removeFolder(v)}return(0,l.useEffect)(()=>{N(v.name)},[v.name]),(0,l.useEffect)(()=>{k(y)},[y]),(0,l.useEffect)(()=>{if(!E.current)return;R(E.current.getBoundingClientRect().height+100);let e=setTimeout(()=>{let e=E.current;e&&R(e.getBoundingClientRect().height+100)},200);return()=>clearTimeout(e)},[v.songs,C,t]),(0,r.jsxs)("div",{className:"folder ".concat(C?"folder-expanded":""),style:{backgroundColor:n,color:o},children:[(0,r.jsxs)("div",{className:"folder-header",children:[(0,r.jsxs)("div",{onClick:()=>{S||k(!C)},className:"folder-header-button",style:{color:i},children:[(0,r.jsx)(c.fmn,{strokeWidth:2,style:{transform:"rotate(".concat(C?90:0,"deg)"),transition:"all 0.2s"},size:18}),S?(0,r.jsx)("input",{value:w,onChange:e=>N(e.target.value),className:"folder-name"}):(0,r.jsx)("div",{className:"folder-name text-ellipsis",children:v.name})]}),!j&&(0,r.jsxs)(g.Rk,{offset:2.3,ignoreClickOutside:S,onClose:()=>b(!1),Icon:d.LCi,children:[(0,r.jsxs)(g.tc,{onClick:()=>{S&&(u.p.renameFolder(v,w),b(!1)),b(!S)},children:[(0,r.jsx)(d.tU3,{style:{marginRight:"0.4rem"},size:14}),(0,r.jsx)(g.Qr,{text:S?"Save":"Rename"})]}),(0,r.jsxs)(g.tc,{style:{padding:"0 0.4rem"},children:[(0,r.jsx)(d.ulB,{style:{marginRight:"0.4rem"}}),(0,r.jsx)("select",{className:"dropdown-select",value:v.filterType,onChange:e=>{let t=e.target.value;v.set({filterType:t}),u.p.updateFolder(v)},children:m.g0.map(e=>(0,r.jsx)("option",{value:e,children:(0,h.kC)(e.replaceAll("-"," "))},e))})]}),(0,r.jsxs)(g.tc,{onClick:async()=>{let e=(await p.v.getManySerializedFromStorable(a()(v.songs))).map(e=>s.bV.prepareSongDownload(e)),t=[...(await Promise.all(e)).flat().filter((e,t,n)=>n.findIndex(t=>t.id===e.id)===t),v.serialize()];s.bV.downloadFiles(t,"".concat(v.name,"-folder.").concat(m.iC.toLowerCase(),"sheet"))},children:[(0,r.jsx)(d.aBF,{style:{marginRight:"0.4rem"},size:14}),(0,r.jsx)(g.Qr,{text:"Download"})]}),(0,r.jsxs)(g.tc,{onClick:F,children:[(0,r.jsx)(d.Xm5,{color:"#ed4557",style:{marginRight:"0.4rem"},size:14}),(0,r.jsx)(g.Qr,{text:"Delete"})]})]})]}),(0,r.jsx)(x.s,{className:"folder-overflow",style:{maxHeight:C?"".concat(z,"px"):0},children:(0,r.jsx)("div",{className:"column folder-overflow-expandible",ref:E,children:t})})]})}var y=n(16913),C=n(86087),k=n(74608),S=n.n(k),b=n(66611),w=n(48043),N=n(40208),E=n(11090);function z(e,t){return e.some(e=>e.id===t.folderId)}function R(e){let{songs:t,SongComponent:n,componentProps:s,className:i,style:a,baseType:c,exclude:u,onCreateFolder:f}=e,[g,m]=(0,l.useState)(),[h,p]=(0,l.useState)(),[x,k]=(0,l.useState)(),[R,F]=(0,l.useState)([]),[T,_]=(0,l.useState)(""),[O]=(0,C.j)(R),[B]=(0,o.F)();(0,l.useEffect)(()=>{let e=t.filter(e=>!(null==u?void 0:u.includes(e.type))),n=new b.Z(e,["name"],{caseSensitive:!1,sort:!0});if(""===T)return F(e);F(n.search(T))},[t,u,T]),(0,l.useEffect)(()=>{m(new y.g("Recorded",null,R.filter(e=>!z(O,e)&&"recorded"===e.type))),p(new y.g("Composed",null,R.filter(e=>!z(O,e)&&"composed"===e.type))),k(new y.g("Vsrg",null,R.filter(e=>!z(O,e)&&"vsrg"===e.type)))},[R,O]);let D=B.layer("menu_background",.35).lighten(.2),H=B.getTextColorFromBackground(D).toString();return(0,r.jsxs)("div",{className:i,style:a,children:[(0,r.jsxs)(E.X,{justify:"between",gap:"0.5rem",children:[(0,r.jsxs)("div",{className:S().search,style:{backgroundColor:D.toString(),color:H,outline:"solid 0.2rem transparent",outlineOffset:"-0.2rem",outlineColor:""===T?"transparent":"var(--accent)"},children:[(0,r.jsx)("input",{type:"text",placeholder:"Search",value:T,onChange:e=>_(e.target.value),style:{color:H}}),(0,r.jsx)(N.h,{size:"1rem",ariaLabel:""===T?"Search":"Clear search",style:{backgroundColor:"transparent",color:"inherit"},onClick:()=>_(""),children:""===T?(0,r.jsx)(d.U41,{}):(0,r.jsx)(d.aHS,{})})]}),f&&(0,r.jsx)(w.J,{onClick:f,children:"Create folder"})]}),!(null==u?void 0:u.includes("composed"))&&h&&(0,r.jsx)(j,{backgroundColor:D.toString(),headerColor:H,color:B.getText("menu_background").toString(),data:h,isDefault:!0,defaultOpen:"composed"===c,children:(0,r.jsxs)(v,{children:[h.songs.map(e=>(0,l.createElement)(n,{...s,data:e,key:null==e?void 0:e.id})),0===h.songs.length&&(0,r.jsx)("div",{style:{padding:"0.2rem",fontSize:"0.9rem"},children:"No songs here, compose one!"})]})}),!(null==u?void 0:u.includes("recorded"))&&g&&(0,r.jsx)(j,{backgroundColor:D.toString(),headerColor:H,color:B.getText("menu_background").toString(),data:g,isDefault:!0,defaultOpen:"recorded"===c,children:(0,r.jsxs)(v,{children:[g.songs.map(e=>(0,l.createElement)(n,{...s,data:e,key:null==e?void 0:e.id})),0===g.songs.length&&(0,r.jsx)("div",{style:{padding:"0.2rem",fontSize:"0.9rem"},children:"No songs here, record one!"})]})}),!(null==u?void 0:u.includes("vsrg"))&&x&&(0,r.jsx)(j,{backgroundColor:D.toString(),headerColor:H,color:B.getText("menu_background").toString(),data:x,isDefault:!0,defaultOpen:"recorded"===c,children:(0,r.jsxs)(v,{children:[x.songs.map(e=>(0,l.createElement)(n,{...s,data:e,key:null==e?void 0:e.id})),0===x.songs.length&&(0,r.jsx)("div",{style:{padding:"0.2rem",fontSize:"0.9rem"},children:"No songs here, create one!"})]})}),O.map(e=>{let t=e.songs.filter(e=>"composed"===e.type),o=e.songs.filter(e=>"recorded"===e.type),i=e.songs.filter(e=>"vsrg"===e.type);return(0,r.jsxs)(j,{backgroundColor:D.toString(),headerColor:H,color:B.getText("menu_background").toString(),data:e,children:[!(null==u?void 0:u.includes("composed"))&&t.length>0&&(0,r.jsx)(v,{title:"Composed",children:t.map(e=>(0,l.createElement)(n,{...s,data:e,key:null==e?void 0:e.id}))}),!(null==u?void 0:u.includes("recorded"))&&o.length>0&&(0,r.jsx)(v,{title:"Recorded",children:o.map(e=>(0,l.createElement)(n,{...s,data:e,key:null==e?void 0:e.id}))}),!(null==u?void 0:u.includes("vsrg"))&&i.length>0&&(0,r.jsx)(v,{title:"Vsrg",children:i.map(e=>(0,l.createElement)(n,{...s,data:e,key:null==e?void 0:e.id}))}),0===t.length&&0===o.length&&0===i.length&&(0,r.jsx)("div",{style:{padding:"0.7rem",paddingTop:"0",fontSize:"0.9rem"},children:"The folder is empty"})]},e.id)})]})}},86087:function(e,t,n){"use strict";n.d(t,{j:function(){return s}});var r=n(67294),l=n(68949),o=n(40398);function s(e){let[t,n]=(0,r.useState)(o.p.folders),[s,i]=(0,r.useState)([]);return(0,r.useEffect)(()=>(function(e){let t=(0,l.N7)(o.p.folders,()=>{e([...o.p.folders])});return e([...o.p.folders]),t})(e=>{n(e)}),[]),(0,r.useEffect)(()=>{if(!e)return i(t);i(t.map(t=>{let n=t.clone(),r=e.filter(e=>e.folderId===t.id);return"date-created"===t.filterType?n.songs=r:"alphabetical"===t.filterType?n.songs=r.sort((e,t)=>e.name.localeCompare(t.name)):n.songs=r,n}))},[e,t]),[s]}},24104:function(e,t,n){"use strict";n.d(t,{n:function(){return s}});var r=n(67294),l=n(68949),o=n(6340);function s(){let[e,t]=(0,r.useState)(o.k.songs);return(0,r.useEffect)(()=>(function(e){let t=(0,l.N7)(o.k.songs,()=>{e([...o.k.songs])});return e([...o.k.songs]),t})(e=>{t(e)}),[]),[e]}},74608:function(e){e.exports={search:"SongMenu_search__aSIQY"}}}]);