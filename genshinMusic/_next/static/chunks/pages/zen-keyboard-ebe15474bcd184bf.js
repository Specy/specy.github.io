(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1483],{49691:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/zen-keyboard",function(){return n(86994)}])},40208:function(e,t,n){"use strict";n.d(t,{h:function(){return s}});var a=n(85893),i=n(48043);function s(e){var t,n,s,r,l;return(0,a.jsx)(i.J,{...e,style:{width:null!==(t=e.size)&&void 0!==t?t:"2rem",height:null!==(n=e.size)&&void 0!==n?n:"2rem",minWidth:null!==(s=e.size)&&void 0!==s?s:"2rem",minHeight:null!==(r=e.size)&&void 0!==r?r:"2rem",...e.style},className:"icon-app-button flex-centered ".concat(null!==(l=e.className)&&void 0!==l?l:""),children:e.children})}},13042:function(e,t,n){"use strict";n.d(t,{Z:function(){return l}});var a=n(85893),i=n(92634),s=n(48771),r=n.n(s);function l(e){let{checked:t,onChange:n,styleOuter:s}=e,[l]=(0,i.F)();return(0,a.jsx)("button",{className:r()["switch-wrapper"],onClick:()=>n(!t),style:s||{},"aria-label":t?"Switch to off":"Switch to on",children:(0,a.jsx)("div",{className:"".concat(r()["switch-inner"]," ").concat(t?r()["switch-inner-on"]:""),style:{backgroundColor:(t?l.get("accent"):l.layer("primary",.4)).toString()}})})}},99962:function(e,t,n){"use strict";n.d(t,{V:function(){return o},q:function(){return c}});var a=n(85893),i=n(40456),s=n.n(i),r=n(69887),l=n(39324);function o(e){let{style:t,className:n,opacity:i,children:o}=e,{visible:c}=(0,r.X)();return(0,a.jsx)("div",{className:(0,l.cn)("".concat(s().menu," ").concat(n),[c,s()["menu-visible"]]),style:{opacity:i,...t},children:o})}let c=(0,n(67294).forwardRef)(function(e,t){let{children:n,className:i,style:l,current:o,open:c,setOpen:u,setCurrent:d,visible:m,setVisible:h}=e;return(0,a.jsx)(r.p.Provider,{value:{current:null!=o?o:"",setCurrent:null!=d?d:e=>{},open:null!=c&&c,setOpen:null!=u?u:()=>{},visible:null==m||m,setVisible:null!=h?h:()=>{}},children:(0,a.jsx)("div",{className:"".concat(s()["menu-wrapper"]," ").concat(i),ref:t,style:l,children:n})})})},20027:function(e,t,n){"use strict";n.d(t,{G:function(){return c},f:function(){return o}});var a=n(85893),i=n(40456),s=n.n(i),r=n(39324),l=n(69887);function o(e){let{children:t,className:n,style:i}=e,{open:o,visible:c}=(0,l.X)();return(0,a.jsx)("div",{className:(0,r.cn)("".concat(s()["side-menu"]," ").concat(n),[o&&c,s()["side-menu-open"]]),style:i,children:t})}function c(e){let{title:t,children:n,id:i}=e,{current:o}=(0,l.X)();return(0,a.jsxs)("div",{className:(0,r.cn)(s()["menu-panel"],[o===i,s()["menu-panel-visible"]]),children:[t&&(0,a.jsx)("div",{className:s()["menu-title"],children:t}),(0,a.jsx)("div",{className:s()["panel-content-wrapper"],children:n})]})}},23441:function(e,t,n){"use strict";n.d(t,{d:function(){return r}});var a=n(85893),i=n(9008),s=n.n(i);function r(e){let{text:t,description:n,image:i,children:r}=e;return(0,a.jsxs)(s(),{children:[(0,a.jsx)("title",{children:t}),n&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("meta",{name:"description",content:n}),(0,a.jsx)("meta",{property:"og:description",content:n})]}),i&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("meta",{name:"image",content:i}),(0,a.jsx)("meta",{property:"og:image",content:i})]}),r]})}},86998:function(e,t,n){"use strict";n.d(t,{A:function(){return v}});var a=n(85893),i=n(67294),s=n(13042),r=n(21820),l=n.n(r);function o(e){let{data:t,volume:n,onVolumeChange:i,onVolumeComplete:s,onInstrumentPick:r,objectKey:o,instrument:c,theme:u}=e,d=[],m=[];for(let e of t.options)e.startsWith("SFX")?m.push(e):d.push(e);return(0,a.jsxs)("div",{className:l()["instrument-picker"],children:[(0,a.jsx)("select",{value:c,style:{textAlign:"left",paddingLeft:"0.4rem",backgroundImage:"url(\"data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' height='24' viewBox='0 0 24 24' width='24' fill='".concat(u.getText("primary").hex().replace("#","%23"),"'><path d='M0 0h24v24H0z' fill='none'/><path d='M16.59 8.59L12 13.17 7.41 8.59 6 10l6 6 6-6z'/></svg>\")")},className:l().select,onChange:function(e){r({key:o,data:{...t,value:e.target.value}})},children:0===m.length?(0,a.jsx)(a.Fragment,{children:d.map(e=>(0,a.jsx)("option",{value:e,children:e.replace("-"," ")},e))}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("optgroup",{label:"Instruments",children:d.map(e=>(0,a.jsx)("option",{value:e,children:e.replace("-"," ")},e))}),(0,a.jsx)("optgroup",{label:"SFX",children:m.map(e=>(0,a.jsx)("option",{value:e,children:e.replace("-"," ").replace("SFX_","")},e))})]})}),(0,a.jsx)("input",{type:"range",min:1,max:100,value:n,onChange:function(e){i(Number(e.target.value))},onPointerUp:function(){s({key:o,value:n})}})]})}var c=n(78773);function u(e){let{data:t,value:n,onChange:i,onComplete:s,objectKey:r}=e;function o(e){if("number"===t.type){let a=Number(n)+(t.increment||0)*e;!t.threshold||a<t.threshold[0]||a>t.threshold[1]||s({key:r,data:{...t,value:a}})}}return(0,a.jsxs)("div",{className:l()["settings-input"],children:["number"===t.type&&(0,a.jsx)("button",{onClick:()=>o(-1),className:l()["settings-input-button"],style:{marginRight:"0.15rem"},"aria-label":"Decrement",children:(0,a.jsx)(c.iFH,{})}),(0,a.jsx)("input",{type:t.type,value:n,placeholder:t.placeholder||"",onBlur:function(){t.value!==n&&s({key:r,data:{...t,value:n}})},onChange:function(e){let n=e.target;if("number"===t.type){let e=Number(n.value);if(n.value="",!t.threshold||e<t.threshold[0]||e>t.threshold[1])return;i(e)}else i(n.value)},"aria-label":t.name}),"number"===t.type&&(0,a.jsx)("button",{onClick:()=>o(1),className:l()["settings-input-button"],style:{marginLeft:"0.15rem"},"aria-label":"Increment",children:(0,a.jsx)(c.wEH,{})})]})}function d(e){let{data:t,value:n,onChange:i,objectKey:s}=e;return(0,a.jsx)("input",{type:"range",min:t.threshold[0],max:t.threshold[1],step:t.step,value:n,onChange:function(e){i({key:s,data:{...t,value:Number(e.target.value)}})}})}function m(e){let{value:t,onChange:n,data:i,objectKey:s,children:r,theme:l,type:o}=e;return(0,a.jsx)("select",{value:t,onChange:function(e){n({key:s,data:{...i,value:"number"==typeof o?parseInt(e.target.value):e.target.value}}),e.target.blur()},style:{backgroundImage:"url(\"data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' height='24' viewBox='0 0 24 24' width='24' fill='".concat(l.getText("primary").hex().replace("#","%23"),"'><path d='M0 0h24v24H0z' fill='none'/><path d='M16.59 8.59L12 13.17 7.41 8.59 6 10l6 6 6-6z'/></svg>\")")},children:r})}var h=n(92634),g=n(10694),p=(0,i.memo)(function(e){let{data:t,update:n,objKey:r,changeVolume:c}=e,[p,v]=(0,i.useState)(t.value),[f,x]=(0,i.useState)("instrument"===t.type?t.volume:0),[y]=(0,h.F)(),{type:b}=t;return(0,i.useEffect)(()=>{v(t.value)},[t.value]),(0,a.jsxs)("div",{className:l()["settings-row"],style:{backgroundColor:y.layer("menu_background",.15).toString()},children:[(0,a.jsxs)("div",{className:(0,g.h)(t.tooltip),style:{flex:"1"},children:[t.name,t.tooltip&&(0,a.jsx)(g.u,{style:{width:"12rem"},children:t.tooltip})]}),"select"===b&&(0,a.jsx)(m,{theme:y,type:t.options[0],onChange:n,value:t.value,objectKey:r,data:t,children:t.options.map(e=>(0,a.jsx)("option",{value:e,children:e},e))}),("number"===b||"text"===b)&&(0,a.jsx)(u,{data:t,value:p,onChange:v,onComplete:n,objectKey:r}),"checkbox"===b&&(0,a.jsx)(s.Z,{checked:p,onChange:function(e){"checkbox"===b&&n({key:r,data:{...t,value:e}})}}),"slider"===b&&(0,a.jsx)(d,{objectKey:r,data:t,value:p,onChange:n}),"instrument"===b&&c&&(0,a.jsx)(o,{theme:y,volume:f,onInstrumentPick:n,onVolumeChange:x,onVolumeComplete:c,instrument:t.value,data:t,objectKey:r})]})},(e,t)=>e.data.value===t.data.value&&e.data.volume===t.data.volume&&e.update===t.update);function v(e){let{settings:t,changeVolume:n,onUpdate:s}=e,r=new Map;return Object.entries(t).forEach(e=>{let[t,n]=e;r.has(n.category)||r.set(n.category,{category:n.category,settings:{}}),r.get(n.category).settings[t]=n}),(0,a.jsx)(a.Fragment,{children:Array.from(r.values()).map(e=>(0,a.jsx)(i.Fragment,{children:(0,a.jsxs)("div",{className:"column",children:[(0,a.jsx)("h1",{className:l()["settings-group-title"],children:e.category}),Object.entries(e.settings).map(e=>{let[t,i]=e;return(0,a.jsx)(p,{objKey:t,data:i,changeVolume:n,update:s},t)})]})},e.category))})}},97411:function(e,t,n){"use strict";n.d(t,{c:function(){return s}});var a=n(85893),i=n(67294);t.Z=(0,i.memo)(function(e){let{children:t}=e;return(0,a.jsx)(a.Fragment,{children:t})},(e,t)=>{var n,a,i,s;return(null===(n=t.children)||void 0===n?void 0:n.key)!==null||(null===(a=e.children)||void 0===a?void 0:a.key)!==null?(null===(i=e.children)||void 0===i?void 0:i.key)===(null===(s=t.children)||void 0===s?void 0:s.key):void 0!==e.children});let s=(0,i.memo)(function(e){let{icon:t,size:n,className:i}=e;return(0,a.jsx)(t,{size:n,className:i})},(e,t)=>e.icon===t.icon&&e.size===t.size&&e.className===t.className)},47103:function(e,t,n){"use strict";n.d(t,{Z:function(){return l}});var a=n(85893),i=n(54233),s=n(67294),r=n(68949);function l(e){let{children:t,page:n,style:l}=e,[o]=function(){let[e,t]=(0,s.useState)(i.f6);return(0,s.useEffect)(()=>(0,r.N7)(i.f6.state.other,()=>{t({...i.f6})}),[]),[e,t]}();return(0,a.jsx)("div",{className:"app bg-image",style:{backgroundImage:"url(".concat(o.getOther("backgroundImage"+n),")"),...l},children:t})}},86994:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return D}});var a=n(85893),i=n(32362),s=n(97582),r=n(17544),l=n(68949);class o{constructor(){this.keyboard=[],this.setKeyboardLayout=e=>{this.keyboard.splice(0,this.keyboard.length,...e)},this.animateNote=(e,t)=>{this.keyboard[e].triggerAnimation(t)},this.resetKeyboardLayout=()=>{this.keyboard.forEach(e=>e.setState({status:"",delay:"Genshin"===r.iC?100:200}))},this.resetOutgoingAnimation=()=>{this.keyboard.forEach(e=>e.setState({animationId:0}))},this.setNoteState=(e,t)=>{this.keyboard[e].setState(t)},(0,l.rC)(this)}}(0,s.gn)([l.LO],o.prototype,"keyboard",void 0);let c=new o;var u=n(79317),d=n(67294),m=n(54233),h=n(67274),g=n(92333),p=n.n(g),v=n(39324);let f=[{transform:"rotateY(0deg) scale(0.8)"},{transform:"rotateY(180deg) scale(0.8)"},{transform:"rotateY(360deg) scale(1)"}];function x(e){var t,n;let s;let{note:l,onClick:o,noteImage:c,noteText:g,instrumentName:x,keyPadding:y}=e,[b,k]=(0,d.useState)(""),[j,N]=(0,d.useState)(0),[_,w]=(0,d.useState)(r.kx.text.light),C=(0,d.useRef)(null),S=(0,d.useCallback)(e=>{(0,v.PF)(e),o(l)},[o,l]);(0,d.useEffect)(()=>(0,i.VZ)(l.data,function(){if("Genshin"===r.iC)k("clicked"),N(e=>e+1),setTimeout(()=>k(""),100);else{let e=C.current;if(!e)return;e.animate(f,{duration:400})}}),[l,C]),(0,d.useEffect)(()=>(0,i.VZ)(m.f6.state.data,()=>{w(function(){let e=m.f6.get("note_background");return"Genshin"!==r.iC?e.isDark()?r.kx.text.light:r.kx.text.dark:e.luminosity()>.65?r.kx.text.note:e.isDark()?r.kx.text.light:r.kx.text.dark}())}),[]);let z="".concat((s=r.Al.note,"clicked"===b&&(s+=" click-event"),s)," ").concat("Genshin"===r.iC?"":p()["sky-zen-note"]),A=null===(t=r.as[x])||void 0===t?void 0:t.clickColor;return(0,a.jsxs)("button",{onPointerDown:S,onContextMenu:v.PF,className:"button-hitbox-bigger",style:{padding:"".concat(y,"rem")},children:["Genshin"===r.iC&&(0,a.jsx)("div",{style:A&&m.f6.isDefault("accent")?{borderColor:A}:{},className:r.Al.noteAnimation},j),(0,a.jsxs)("div",{ref:C,className:z,children:["Genshin"===r.iC&&(0,a.jsx)(h.Z,{className:"genshin-border",fill:"clicked"===b?"transparent":"toClickNext"===b||"toClickAndNext"===b?"#63aea7":"var(--note-border-fill)"}),c&&(0,a.jsx)(u.Z,{name:l.noteImage,color:m.f6.isDefault("accent")?null===(n=r.as[x])||void 0===n?void 0:n.fill:void 0,background:"clicked"===b?A&&m.f6.isDefault("accent")?A:"var(--accent)":"var(--note-background)"}),(0,a.jsx)("div",{className:r.Al.noteName,style:{color:_},children:g})]})]})}var y=n(7374);let b="keyboard ".concat(p()["zen-keyboard"],"}"),k=new Map([[15,"".concat(b," keyboard-5")],[14,"".concat(b," keyboard-5")],[8,"".concat(b," keyboard-4")],[6,"".concat(b," keyboard-3")]]);function j(e){let{onNoteClick:t,instrument:n,pitch:s,verticalOffset:r,scale:l,noteNameType:o,keySpacing:u}=e,m=(0,i.ih)(c.keyboard);(0,d.useEffect)(()=>(0,y.JP)("zen_keyboard",e=>{let{shortcut:a,event:i}=e;if(i.repeat)return;let s=n.getNoteFromCode(a.name);null!==s&&t(s)}),[t,n]);let h=k.get(m.length)||b;return(0,a.jsx)("div",{className:h,style:{transform:"scale(".concat(l/100,") translateY(").concat(r,"px)"),marginTop:"unset"},children:m.map((e,i)=>(0,a.jsx)(x,{keyPadding:u,instrumentName:n.name,noteText:n.getNoteText(i,o,s),noteImage:e.noteImage,note:e,onClick:t},i))})}var N=n(12293),_=n(40569),w=n(78773),C=n(20027),S=n(54135),z=n(86998),A=n(97411),F=n(40208),I=n(92088),Z=n(11828),P=n(41570),E=n(99962);function T(e){let{settings:t,handleSettingChange:n,onVolumeChange:i,isMetronomePlaying:s,setIsMetronomePlaying:l}=e,[o,c]=(0,d.useState)("Settings"),[u,m]=(0,d.useState)(!0),[h,g]=(0,d.useState)(!1),p=(0,N.ZP)(()=>{g(!1)},{ignoreFocusable:!0,active:""!==o});return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(F.h,{toggled:s,onClick:()=>l(!s),className:"metronome-button",style:{position:"absolute",top:"0.5rem",right:"5.1rem",borderRadius:"1rem",border:"solid 0.1rem var(--secondary)"},ariaLabel:"Toggle metronome",children:(0,a.jsx)(P.eHT,{size:18})}),(0,a.jsx)("div",{style:{position:"absolute",top:"0.5rem",right:"2.8rem"},children:(0,a.jsx)(K,{value:t.pitch.value,items:r.T_,Icon:Z.n5x,onChange:e=>n({key:"pitch",data:{...t.pitch,value:e}})})}),(0,a.jsx)("div",{style:{position:"absolute",top:"0.5rem",right:"0.5rem"},children:(0,a.jsx)(K,{value:t.instrument.value,items:r.BX,Icon:I.S0H,onChange:e=>n({key:"instrument",data:{...t.instrument,value:e}})})}),(0,a.jsxs)(E.q,{open:u,setOpen:m,current:o,setCurrent:c,ref:p,visible:h,children:[(0,a.jsx)("div",{className:"hamburger-top",onClick:()=>g(!h),children:(0,a.jsx)(A.c,{icon:w.Fm7})}),(0,a.jsxs)(E.V,{style:{justifyContent:"flex-end"},children:[(0,a.jsx)(S.j,{ariaLabel:"Close menu",style:{marginBottom:"auto"},onClick:()=>g(!h),children:(0,a.jsx)(A.c,{icon:w.aHS,className:"icon"})}),(0,a.jsx)(S.s,{id:"Settings",ariaLabel:"Open settings",children:(0,a.jsx)(A.c,{icon:w.p4t,className:"icon"})}),(0,a.jsx)(S.j,{onClick:_.I.open,ariaLabel:"Open home menu",style:{border:"solid 0.1rem var(--secondary)"},children:(0,a.jsx)(A.c,{icon:w.xng,className:"icon"})})]}),(0,a.jsx)(C.f,{children:(0,a.jsx)(C.G,{title:"Settings",id:"Settings",children:(0,a.jsx)(z.A,{settings:t,onUpdate:n,changeVolume:i})})})]})]})}function K(e){let{items:t,onChange:n,value:i,Icon:s}=e,[r,l]=(0,d.useState)(!1),o=(0,N.ZP)(()=>l(!1),{active:r});return(0,a.jsxs)("div",{className:"column",ref:o,style:{alignItems:"flex-end",gap:"0.5rem"},children:[(0,a.jsx)(F.h,{onClick:()=>l(!r),style:{zIndex:2,borderRadius:"1rem",border:"solid 0.1rem var(--secondary)"},toggled:r,children:(0,a.jsx)(s,{size:18})}),r&&(0,a.jsx)("div",{className:p()["floating-selection-card"],style:{maxHeight:"75vh"},children:t.map(e=>(0,a.jsx)("button",{className:"".concat(p()["floating-selection-card-item"]),style:i===e?{backgroundColor:"var(--accent)",color:"var(--accent-text)"}:{},onClick:()=>{n(e),l(!1)},children:e},e))})]})}var L=n(67299),O=n(83679),V=n(65023),M=n(92761),X=n(80219),G=n(53179),H=n(23441),Y=n(47103),B=n(80331);function D(){let[e,t]=(0,d.useState)(L.$h.data),[n,i]=(0,d.useState)(new O.Yx),[s,r]=(0,d.useState)(!1);(0,d.useEffect)(()=>{let e=X.j.getZenKeyboardSettings();return V.A.bpm=e.metronomeBpm.value,i(new O.Yx(e.instrument.value)),t(e),M.n.setReverb(e.reverb.value),()=>G.kg.hidePill()},[]);let l=(0,d.useCallback)(e=>{X.j.updateZenKeyboardSettings(e)},[]);(0,d.useEffect)(()=>{c.setKeyboardLayout(n.notes)},[n]);let o=async n=>{let{data:a}=n;e[n.key]={...e[n.key],value:a.value},"instrument"===n.key&&i(new O.Yx(a.value)),"reverb"===n.key&&M.n.setReverb(a.value),"metronomeBpm"===n.key&&(V.A.bpm=a.value),"metronomeBeats"===n.key&&(V.A.beats=a.value),"metronomeVolume"===n.key&&V.A.changeVolume(a.value),t({...e}),l(e)};(0,d.useEffect)(()=>((async function(){G.kg.showPill("Loading instrument: ".concat(n.name,"...")),await n.load(M.n.getAudioContext()),G.kg.hidePill(),M.n.connect(n.endNode,null)})(),()=>{M.n.disconnect(n.endNode)}),[n]);let u=(0,d.useCallback)(t=>{n.play(t.index,e.pitch.value),c.animateNote(t.index),B.mP.broadcastNoteClick(t.midiNote)},[n,e.pitch.value]);(0,d.useEffect)(()=>{s?V.A.start():V.A.stop()},[s]);let m=(0,d.useCallback)(e=>{n.changeVolume(e.value)},[n]);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(H.d,{text:"Zen Keyboard",description:"The simplest keyboard in the app, focus only on playing manually with all the features of the player, instrument and pitch selection, animations and metronome"}),(0,a.jsx)(T,{settings:e,isMetronomePlaying:s,setIsMetronomePlaying:r,onVolumeChange:m,handleSettingChange:o}),(0,a.jsx)("div",{className:"flex-centered",children:(0,a.jsx)(j,{instrument:n,onNoteClick:u,noteNameType:e.noteNameType.value,pitch:e.pitch.value,scale:e.keyboardSize.value,keySpacing:e.keyboardSpacing.value,verticalOffset:e.keyboardYPosition.value})})]})}D.getLayout=function(e){return(0,a.jsx)(Y.Z,{page:"Main",children:e})}},92333:function(e){e.exports={"zen-keyboard":"ZenKeyboard_zen-keyboard__FqTg8","sky-zen-note":"ZenKeyboard_sky-zen-note__W3j5Y","floating-selection-card":"ZenKeyboard_floating-selection-card__l6T_n",fadeIn:"ZenKeyboard_fadeIn__pOeEw","floating-selection-card-item":"ZenKeyboard_floating-selection-card-item__AeTlS"}},48771:function(e){e.exports={"switch-wrapper":"Switch_switch-wrapper__QbqdS","switch-inner":"Switch_switch-inner__2FN4t","switch-inner-on":"Switch_switch-inner-on__dXyKj"}},21820:function(e){e.exports={"instrument-picker":"Settings_instrument-picker__7I4Rw",select:"Settings_select__TfGwk","settings-group-title":"Settings_settings-group-title__ZP9Kk","settings-row":"Settings_settings-row__QAhCZ",invalid:"Settings_invalid__xvU6D","settings-input":"Settings_settings-input__TWACI","settings-input-button":"Settings_settings-input-button__AnhLi"}}},function(e){e.O(0,[8127,509,2463,2888,9774,179],function(){return e(e.s=49691)}),_N_E=e.O()}]);