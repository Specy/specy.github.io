(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2510],{66611:function(e,r,t){"use strict";t.d(r,{Z:function(){return o}});class s{static getDescendantProperty(e,r,t=[]){let o,n,a,i,l,c;if(r){if(-1===(a=r.indexOf("."))?o=r:(o=r.slice(0,a),n=r.slice(a+1)),null!=(i=e[o])){if(n||"string"!=typeof i&&"number"!=typeof i){if("[object Array]"===Object.prototype.toString.call(i))for(l=0,c=i.length;l<c;l++)s.getDescendantProperty(i[l],n,t);else n&&s.getDescendantProperty(i,n,t)}else t.push(i)}}else t.push(e);return t}}class o{constructor(e=[],r=[],t={}){Array.isArray(r)||(t=r,r=[]),this.haystack=e,this.keys=r,this.options=Object.assign({caseSensitive:!1,sort:!1},t)}search(e=""){if(""===e)return this.haystack;let r=[];for(let t=0;t<this.haystack.length;t++){let n=this.haystack[t];if(0===this.keys.length){let t=o.isMatch(n,e,this.options.caseSensitive);t&&r.push({item:n,score:t})}else for(let t=0;t<this.keys.length;t++){let a=s.getDescendantProperty(n,this.keys[t]),i=!1;for(let t=0;t<a.length;t++){let s=o.isMatch(a[t],e,this.options.caseSensitive);if(s){i=!0,r.push({item:n,score:s});break}}if(i)break}}return this.options.sort&&r.sort((e,r)=>e.score-r.score),r.map(e=>e.item)}static isMatch(e,r,t){e=String(e),r=String(r),t||(e=e.toLocaleLowerCase(),r=r.toLocaleLowerCase());let s=o.nearestIndexesFor(e,r);return!!s&&(e===r?1:s.length>1?2+(s[s.length-1]-s[0]):2+s[0])}static nearestIndexesFor(e,r){let t=r.split(""),s=[];return o.indexesOfFirstLetter(e,r).forEach((r,o)=>{let n=r+1;s[o]=[r];for(let r=1;r<t.length;r++){let a=t[r];if(-1===(n=e.indexOf(a,n))){s[o]=!1;break}s[o].push(n),n++}}),!!(s=s.filter(e=>!1!==e)).length&&s.sort((e,r)=>1===e.length?e[0]-r[0]:(e=e[e.length-1]-e[0])-(r=r[r.length-1]-r[0]))[0]}static indexesOfFirstLetter(e,r){let t=r[0];return e.split("").map((e,r)=>e===t&&r).filter(e=>!1!==e)}}},89802:function(e,r,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/error",function(){return t(32045)}])},2816:function(e,r,t){"use strict";t.d(r,{k:function(){return n}});var s=t(85893),o=t(420);function n(e){let{excludeMenu:r=!1,children:t,className:n="",style:a,menu:i,cropped:l=!0}=e,c=l?a:{...a,padding:0};return(0,s.jsxs)("div",{className:"default-page "+n,style:c,children:[(!r||!i)&&(0,s.jsx)(o.O,{}),i,(0,s.jsx)("main",{className:"default-content appear-on-mount",children:t})]})}},420:function(e,r,t){"use strict";t.d(r,{O:function(){return h}});var s=t(85893),o=t(78773),n=t(54135),a=t(9827),i=t(40569),l=t(11163),c=t(41664),d=t.n(c),g=t(31602),u=t(99962);function h(e){let{children:r,className:t,style:c}=e,h=(0,l.useRouter)();return(0,s.jsx)(u.q,{className:t,style:c,children:(0,s.jsxs)(u.V,{style:{justifyContent:"flex-end"},children:[a.b.hasNavigated&&(0,s.jsx)(n.j,{style:{marginBottom:"auto"},onClick:()=>{h.back()},ariaLabel:"Go back",children:(0,s.jsx)(o.x_l,{className:"icon"})}),r,(0,s.jsx)(d(),{href:"https://discord.gg/Arsf65YYHq",target:"_blank",rel:"noreferrer",title:"Go to discord",onClick:async e=>{e.preventDefault(),await (0,g.jH)("You are leaving the app to go to discord, do you want to continue?")&&window.open("https://discord.gg/Arsf65YYHq","_blank")},children:(0,s.jsx)(n.j,{ariaLabel:"Go to discord",children:(0,s.jsx)(o.j2d,{className:"icon"})})}),(0,s.jsx)(n.j,{onClick:i.I.open,ariaLabel:"Open home menu",style:{border:"solid 0.1rem var(--secondary)"},children:(0,s.jsx)(o.xng,{className:"icon"})})]})})}},32045:function(e,r,t){"use strict";t.r(r),t.d(r,{ErrorPage:function(){return b}});var s=t(85893),o=t(78773),n=t(31602),a=t(17544),i=t(53179),l=t(17678),c=t(48043),d=t(24104),g=t(6340),u=t(89867),h=t(23441),p=t(2816),f=t(85565),m=t(12120),x=t(23935),y=t(32362),j=t(97541),w=t(47704),_=t.n(w);function b(){let[e]=(0,d.n)(),r=(0,y.ih)(j.J.logs),t=async(e,r)=>{await (0,n.jH)("Are you sure you want to delete the song: "+e)&&await g.k.removeSong(r)},o=async()=>{await (0,n.jH)("Are you sure you want to delete ALL SONGS?")&&await g.k._DANGEROUS_CLEAR_ALL_SONGS()};return(0,s.jsxs)(p.k,{className:_()["error-page"],children:[(0,s.jsx)(h.d,{text:"Error",description:"View the errors that happened in the app to send bug reports and to try to recover your songs"}),(0,s.jsxs)("div",{style:{textAlign:"center"},children:["If you unexpectedly see this page it means an error has occoured. Here you can download or delete your songs, if one caused an error, delete it. If you need help, join our",(0,s.jsx)("a",{href:"https://discord.gg/Arsf65YYHq",target:"_blank",rel:"noreferrer",style:{margin:"0 0.4rem",color:"var(--accent)"},children:"Discord"}),"and send the log file below."]}),(0,s.jsxs)("div",{className:_()["error-buttons-wrapper"],children:[(0,s.jsx)(c.J,{onClick:()=>{localStorage.removeItem(a.iC+"_Composer_Settings"),localStorage.removeItem(a.iC+"_Main_Settings"),i.kg.success("Settings have been reset")},children:"Reset settings"}),(0,s.jsx)(c.J,{onClick:o,children:"Delete all songs"})]}),(0,s.jsx)("div",{className:_()["error-songs-wrapper"],children:(0,s.jsx)(l.G,{SongComponent:k,songs:e,componentProps:{deleteSong:t,download:e=>{try{let r=e.name,t=f.v.parseSong(e),s=["Sky"===a.iC&&(t instanceof m.l||t instanceof x.M)?t.toOldFormat():t.serialize()];u.bV.downloadSong(s,"".concat(r,".").concat(a.iC.toLowerCase(),"sheet")),i.kg.success("Song downloaded")}catch(e){console.error(e),i.kg.error("Error downloading song")}}}})}),(0,s.jsxs)("div",{className:"row space-between",style:{margin:"1rem 0"},children:[(0,s.jsx)("div",{style:{fontSize:"2rem"},children:"Error logs"}),(0,s.jsx)(c.J,{onClick:()=>{let e=j.J.logs.map(e=>e.message);u.bV.downloadObject(e,"".concat(a.iC,"_logs"))},children:"Download logs"})]}),(0,s.jsx)("div",{className:_()["error-logs"],children:r.map((e,r)=>(0,s.jsx)("pre",{className:"".concat(_()["error-log-row"]," row"),children:e.message},r))})]})}function k(e){let{data:r,deleteSong:t,download:n}=e;return(0,s.jsxs)("div",{className:"song-row",children:[(0,s.jsx)("div",{className:"song-name",children:r.name}),(0,s.jsxs)("div",{className:"song-buttons-wrapper",children:[(0,s.jsx)("button",{className:"song-button",onClick:async()=>{let e=await f.v.getOneSerializedFromStorable(r);if(!e)return i.kg.error("Could not find song");n(e)},"aria-label":"Download song ".concat(r.name),children:(0,s.jsx)(o.aBF,{})}),(0,s.jsx)("button",{className:"song-button",onClick:()=>t(r.name,r.id),"aria-label":"Delete song ".concat(r.name),children:(0,s.jsx)(o.Xm5,{color:"#ed4557"})})]})]})}r.default=b},47704:function(e){e.exports={"error-page":"ErrorPage_error-page__YGVCe","error-buttons-wrapper":"ErrorPage_error-buttons-wrapper__yxRcD","error-logs":"ErrorPage_error-logs__nx3gA","error-log-row":"ErrorPage_error-log-row__tqst4","error-songs-wrapper":"ErrorPage_error-songs-wrapper__4v2PG"}}},function(e){e.O(0,[584,2888,9774,179],function(){return e(e.s=89802)}),_N_E=e.O()}]);