(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2510],{66611:function(e,r,s){"use strict";s.d(r,{Z:function(){return n}});class t{static getDescendantProperty(e,r,s=[]){let n,o,a,i,l,c;if(r){if(-1===(a=r.indexOf("."))?n=r:(n=r.slice(0,a),o=r.slice(a+1)),null!=(i=e[n])){if(o||"string"!=typeof i&&"number"!=typeof i){if("[object Array]"===Object.prototype.toString.call(i))for(l=0,c=i.length;l<c;l++)t.getDescendantProperty(i[l],o,s);else o&&t.getDescendantProperty(i,o,s)}else s.push(i)}}else s.push(e);return s}}class n{constructor(e=[],r=[],s={}){Array.isArray(r)||(s=r,r=[]),this.haystack=e,this.keys=r,this.options=Object.assign({caseSensitive:!1,sort:!1},s)}search(e=""){if(""===e)return this.haystack;let r=[];for(let s=0;s<this.haystack.length;s++){let o=this.haystack[s];if(0===this.keys.length){let s=n.isMatch(o,e,this.options.caseSensitive);s&&r.push({item:o,score:s})}else for(let s=0;s<this.keys.length;s++){let a=t.getDescendantProperty(o,this.keys[s]),i=!1;for(let s=0;s<a.length;s++){let t=n.isMatch(a[s],e,this.options.caseSensitive);if(t){i=!0,r.push({item:o,score:t});break}}if(i)break}}return this.options.sort&&r.sort((e,r)=>e.score-r.score),r.map(e=>e.item)}static isMatch(e,r,s){e=String(e),r=String(r),s||(e=e.toLocaleLowerCase(),r=r.toLocaleLowerCase());let t=n.nearestIndexesFor(e,r);return!!t&&(e===r?1:t.length>1?2+(t[t.length-1]-t[0]):2+t[0])}static nearestIndexesFor(e,r){let s=r.split(""),t=[];return n.indexesOfFirstLetter(e,r).forEach((r,n)=>{let o=r+1;t[n]=[r];for(let r=1;r<s.length;r++){let a=s[r];if(-1===(o=e.indexOf(a,o))){t[n]=!1;break}t[n].push(o),o++}}),!!(t=t.filter(e=>!1!==e)).length&&t.sort((e,r)=>1===e.length?e[0]-r[0]:(e=e[e.length-1]-e[0])-(r=r[r.length-1]-r[0]))[0]}static indexesOfFirstLetter(e,r){let s=r[0];return e.split("").map((e,r)=>e===s&&r).filter(e=>!1!==e)}}},89802:function(e,r,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/error",function(){return s(32045)}])},2816:function(e,r,s){"use strict";s.d(r,{k:function(){return o}});var t=s(85893),n=s(420);function o(e){let{excludeMenu:r=!1,children:s,className:o="",style:a,menu:i,cropped:l=!0,contentStyle:c}=e,d=l?a:{...a,padding:0},g=i||!r;return(0,t.jsxs)("div",{className:"default-page "+o,style:{"--left-mobile-padding":g?"5rem":"1rem","--right-mobile-padding":g?"1.4rem":"1rem",...d},children:[i||!r&&(0,t.jsx)(n.O,{}),(0,t.jsx)("main",{className:"default-content appear-on-mount",style:c,children:s})]})}},420:function(e,r,s){"use strict";s.d(r,{O:function(){return m}});var t=s(85893),n=s(78773),o=s(54135),a=s(9827),i=s(40569),l=s(11163),c=s(41664),d=s.n(c),g=s(31602),h=s(99962),u=s(67421);function m(e){let{children:r,className:s,style:c}=e,{t:m}=(0,u.$G)(["menu","home"]),p=(0,l.useRouter)();return(0,t.jsx)(h.q,{className:s,style:c,children:(0,t.jsxs)(h.V,{style:{justifyContent:"flex-end"},children:[a.b.hasNavigated&&(0,t.jsx)(o.j,{style:{marginBottom:"auto"},onClick:()=>{p.back()},ariaLabel:m("go_back"),children:(0,t.jsx)(n.x_l,{className:"icon"})}),r,(0,t.jsx)(d(),{href:"https://discord.gg/Arsf65YYHq",target:"_blank",rel:"noreferrer",title:"Discord",onClick:async e=>{e.preventDefault(),await (0,g.jH)(m("home:about_to_leave_warning",{to:"discord"}))&&window.open("https://discord.gg/Arsf65YYHq","_blank")},children:(0,t.jsx)(o.j,{ariaLabel:"Discord",children:(0,t.jsx)(n.j2d,{className:"icon"})})}),(0,t.jsx)(o.j,{onClick:i.I.open,ariaLabel:m("open_home_menu"),style:{border:"solid 0.1rem var(--secondary)"},children:(0,t.jsx)(n.xng,{className:"icon"})})]})})}},32045:function(e,r,s){"use strict";s.r(r),s.d(r,{ErrorPage:function(){return v}});var t=s(85893),n=s(78773),o=s(31602),a=s(17544),i=s(53179),l=s(17678),c=s(48043),d=s(24104),g=s(6340),h=s(89867),u=s(23441),m=s(2816),p=s(85565),_=s(12120),f=s(23935),x=s(32362),j=s(97541),w=s(47704),y=s.n(w),b=s(67421),k=s(19116);function v(){(0,k.o)("error");let{t:e}=(0,b.$G)(["error","logs","confirm","common"]),[r]=(0,d.n)(),s=(0,x.ih)(j.J.logs),n=async(r,s)=>{await (0,o.jH)(e("confirm:delete_song",{song_name:r}))&&await g.k.removeSong(s)},w=async()=>{await (0,o.jH)(e("confirm_delete_all_songs"))&&await g.k._DANGEROUS_CLEAR_ALL_SONGS()};return(0,t.jsxs)(m.k,{className:y()["error-page"],children:[(0,t.jsx)(u.d,{text:e("common:error"),description:"View the errors that happened in the app to send bug reports and to try to recover your songs"}),(0,t.jsxs)("div",{style:{textAlign:"center"},children:[e("error_page_description"),(0,t.jsx)("a",{href:"https://discord.gg/Arsf65YYHq",target:"_blank",rel:"noreferrer",style:{margin:"0 0.4rem",color:"var(--accent)"},children:"Discord"})]}),(0,t.jsxs)("div",{className:y()["error-buttons-wrapper"],children:[(0,t.jsx)(c.J,{onClick:()=>{localStorage.removeItem(a.iC+"_Composer_Settings"),localStorage.removeItem(a.iC+"_Main_Settings"),i.kg.success(e("settings_reset_notice"))},children:e("reset_settings")}),(0,t.jsx)(c.J,{onClick:w,children:e("delete_all_songs")})]}),(0,t.jsx)("div",{className:y()["error-songs-wrapper"],children:(0,t.jsx)(l.G,{SongComponent:N,songs:r,componentProps:{deleteSong:n,download:r=>{try{let s=r.name,t=p.v.parseSong(r),n=["Sky"===a.iC&&(t instanceof _.l||t instanceof f.M)?t.toOldFormat():t.serialize()];h.bV.downloadSong(n,"".concat(s,".").concat(a.iC.toLowerCase(),"sheet")),i.kg.success(e("logs:song_downloaded"))}catch(r){console.error(r),i.kg.error(e("logs:error_downloading_song"))}}}})}),(0,t.jsxs)("div",{className:"row space-between",style:{margin:"1rem 0"},children:[(0,t.jsx)("div",{style:{fontSize:"2rem"},children:e("error_logs")}),(0,t.jsx)(c.J,{onClick:()=>{let e=j.J.logs.map(e=>e.message);h.bV.downloadObject(e,"".concat(a.iC,"_logs"))},children:e("download_logs")})]}),(0,t.jsx)("div",{className:y()["error-logs"],children:s.map((e,r)=>(0,t.jsx)("pre",{className:"".concat(y()["error-log-row"]," row"),children:e.message},r))})]})}function N(e){let{data:r,deleteSong:s,download:o}=e,{t:a}=(0,b.$G)(["menu","logs"]);return(0,t.jsxs)("div",{className:"song-row",children:[(0,t.jsx)("div",{className:"song-name",children:r.name}),(0,t.jsxs)("div",{className:"song-buttons-wrapper",children:[(0,t.jsx)("button",{className:"song-button",onClick:async()=>{let e=await p.v.getOneSerializedFromStorable(r);if(!e)return i.kg.error(a("logs:could_not_find_song"));o(e)},"aria-label":a("download_song",{song_name:r.name}),children:(0,t.jsx)(n.aBF,{})}),(0,t.jsx)("button",{className:"song-button",onClick:()=>s(r.name,r.id),"aria-label":a("delete_song",{song_name:r.name}),children:(0,t.jsx)(n.Xm5,{color:"#ed4557"})})]})]})}r.default=v},47704:function(e){e.exports={"error-page":"ErrorPage_error-page__YGVCe","error-buttons-wrapper":"ErrorPage_error-buttons-wrapper__yxRcD","error-logs":"ErrorPage_error-logs__nx3gA","error-log-row":"ErrorPage_error-log-row__tqst4","error-songs-wrapper":"ErrorPage_error-songs-wrapper__4v2PG"}}},function(e){e.O(0,[584,2888,9774,179],function(){return e(e.s=89802)}),_N_E=e.O()}]);